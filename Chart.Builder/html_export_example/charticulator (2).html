
          <!DOCTYPE html>
          <html>
          <head>
            <meta charset="utf-8" />
            <title>Charticulator HTML Export</title>
            <script type="text/javascript" src='https://tunchz.github.io/Charticular/scripts/TunchzChartBuilder.min.js'></script>

            <style type="text/css">
              #container {
                display: block;
                position: absolute;
                left: 0; right: 0; top: 0; bottom: 0;
              }
            </style>
          </head>
          <body>
            <div id="container"></div>
            <script type="text/javascript">
              CharticulatorContainer.initialize().then(function() {


                const dataset = {"tables":[{"name":"Temperature","displayName":"Temperature","columns":[{"name":"Month","displayName":"Month","type":"string","metadata":{"kind":"categorical","order":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"orderMode":null,"rawColumnName":null,"unit":null,"isRaw":null,"format":null,"examples":null}},{"name":"City","displayName":"City","type":"string","metadata":{"kind":"categorical"}},{"name":"Value","displayName":"Value","type":"number","metadata":{"kind":"numerical","format":".1f"}}],"rows":[{"_id":"ID0","Month":"Jan","City":"City1","Value":53.9},{"_id":"ID1","Month":"Jan","City":"City2","Value":79.7},{"_id":"ID2","Month":"Jan","City":"City3","Value":46.1},{"_id":"ID3","Month":"Feb","City":"City1","Value":61.5},{"_id":"ID4","Month":"Feb","City":"City2","Value":77.7},{"_id":"ID5","Month":"Feb","City":"City3","Value":38.5},{"_id":"ID6","Month":"Mar","City":"City1","Value":68.3},{"_id":"ID7","Month":"Mar","City":"City2","Value":73.8},{"_id":"ID8","Month":"Mar","City":"City3","Value":31.7},{"_id":"ID9","Month":"Apr","City":"City1","Value":73.8},{"_id":"ID10","Month":"Apr","City":"City2","Value":68.3},{"_id":"ID11","Month":"Apr","City":"City3","Value":26.2},{"_id":"ID12","Month":"May","City":"City1","Value":77.7},{"_id":"ID13","Month":"May","City":"City2","Value":61.5},{"_id":"ID14","Month":"May","City":"City3","Value":22.3},{"_id":"ID15","Month":"Jun","City":"City1","Value":79.7},{"_id":"ID16","Month":"Jun","City":"City2","Value":53.9},{"_id":"ID17","Month":"Jun","City":"City3","Value":20.3},{"_id":"ID18","Month":"Jul","City":"City1","Value":79.7},{"_id":"ID19","Month":"Jul","City":"City2","Value":46.1},{"_id":"ID20","Month":"Jul","City":"City3","Value":20.3},{"_id":"ID21","Month":"Aug","City":"City1","Value":77.7},{"_id":"ID22","Month":"Aug","City":"City2","Value":38.5},{"_id":"ID23","Month":"Aug","City":"City3","Value":22.3},{"_id":"ID24","Month":"Sep","City":"City1","Value":73.8},{"_id":"ID25","Month":"Sep","City":"City2","Value":31.7},{"_id":"ID26","Month":"Sep","City":"City3","Value":26.2},{"_id":"ID27","Month":"Oct","City":"City1","Value":68.3},{"_id":"ID28","Month":"Oct","City":"City2","Value":26.2},{"_id":"ID29","Month":"Oct","City":"City3","Value":31.7},{"_id":"ID30","Month":"Nov","City":"City1","Value":61.5},{"_id":"ID31","Month":"Nov","City":"City2","Value":22.3},{"_id":"ID32","Month":"Nov","City":"City3","Value":38.5},{"_id":"ID33","Month":"Dec","City":"City1","Value":53.9},{"_id":"ID34","Month":"Dec","City":"City2","Value":20.3},{"_id":"ID35","Month":"Dec","City":"City3","Value":46.1}],"type":"Main"}],"name":"demo"};
                const template = {"specification":{"_id":"61j9fnu7ca","classID":"chart.rectangle","properties":{"name":"Chart","backgroundColor":null,"backgroundOpacity":1,"enableContextMenu":true,"exposed":true},"mappings":{"marginTop":{"type":"value","value":80},"marginRight":{"type":"value","value":100}},"glyphs":[{"_id":"jordvbmox0d","classID":"glyph.rectangle","properties":{"name":"Glyph"},"table":"Temperature","marks":[{"_id":"xb7nkykw6ss","classID":"mark.anchor","properties":{"name":"Anchor"},"mappings":{"x":{"type":"parent","parentAttribute":"icx"},"y":{"type":"parent","parentAttribute":"icy"}}},{"_id":"2v2fs9kqvqi","classID":"mark.rect","properties":{"enableTooltips":true,"enableContextMenu":true,"enableSelection":true,"exposed":true,"visible":true,"strokeStyle":"solid","shape":"rectangle","allowFlipping":true,"name":"Shape1"},"mappings":{"fill":{"type":"scale","table":"Temperature","expression":"first(City)","valueType":"string","scale":"ug204f4rkba","attribute":"fill","valueIndex":null},"strokeWidth":{"type":"value","value":1},"opacity":{"type":"value","value":1},"visible":{"type":"value","value":true},"x1":{"type":"parent","parentAttribute":"ix1"},"y1":{"type":"parent","parentAttribute":"iy1"},"x2":{"type":"parent","parentAttribute":"ix2"},"y2":{"type":"parent","parentAttribute":"iy2"},"height":{"type":"scale","table":"Temperature","expression":"avg(Value)","valueType":"number","scale":"h57qcb4c1jt","attribute":"height","valueIndex":null}}},{"_id":"7w4uosnah0h","classID":"mark.text","properties":{"enableTooltips":true,"enableContextMenu":true,"enableSelection":true,"exposed":true,"alignment":{"x":"middle","y":"top","xMargin":5,"yMargin":1.6137182525347624},"rotation":0,"visible":true,"name":"Text1"},"mappings":{"text":{"type":"text","table":"Temperature","textExpression":"${avg(Value)}{.2f}"},"fontFamily":{"type":"value","value":"Impact"},"fontSize":{"type":"value","value":12},"color":{"type":"value","value":{"r":0,"g":0,"b":0}},"opacity":{"type":"value","value":1},"visible":{"type":"value","value":true},"x":{"type":"parent","parentAttribute":"icx"},"y":{"type":"parent","parentAttribute":"iy2"}}}],"mappings":{},"constraints":[]}],"elements":[{"_id":"ahwtbav9bk7","classID":"plot-segment.cartesian","glyph":"jordvbmox0d","table":"Temperature","filter":null,"mappings":{"x1":{"type":"parent","parentAttribute":"x1"},"y1":{"type":"parent","parentAttribute":"y1"},"x2":{"type":"parent","parentAttribute":"x2"},"y2":{"type":"parent","parentAttribute":"y2"}},"properties":{"name":"PlotSegment1","visible":true,"marginX1":0,"marginY1":0,"marginX2":0,"marginY2":0,"sublayout":{"type":"dodge-y","order":null,"ratioX":0.088,"ratioY":0,"align":{"x":"start","y":"start"},"grid":{"direction":"x","xCount":null,"yCount":null},"packing":{"gravityX":0.1,"gravityY":0.1},"jitter":{"vertical":true,"horizontal":true}},"xData":{"type":"categorical","expression":"first(Month)","rawExpression":"first(Month)","valueType":"string","gapRatio":0.2,"visible":true,"side":"default","style":{"tickColor":{"r":0,"g":0,"b":0},"lineColor":{"r":0,"g":0,"b":0},"fontFamily":"Segoe UI","fontSize":12,"tickSize":5,"wordWrap":false,"gridlineStyle":"none","gridlineColor":{"r":234,"g":234,"b":234},"gridlineWidth":1},"numericalMode":null,"dataKind":"categorical","order":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Oct","Nov","Sep","Dec"],"orderMode":"order","autoDomainMax":true,"autoDomainMin":true,"tickFormat":null,"tickDataExpression":null,"domainMin":null,"domainMax":null,"enablePrePostGap":null,"categories":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Oct","Nov","Sep","Dec"]}}},{"_id":"va2dcmxd8ha","classID":"mark.text","properties":{"name":"Title","visible":true,"alignment":{"x":"middle","y":"top","xMargin":0,"yMargin":30},"rotation":0},"mappings":{"x":{"type":"parent","parentAttribute":"cx"},"y":{"type":"parent","parentAttribute":"oy2"},"text":{"type":"value","value":"demo"},"fontSize":{"type":"value","value":24},"color":{"type":"value","value":{"r":0,"g":0,"b":0}}}},{"_id":"gk0e67e5zf4","classID":"legend.categorical","properties":{"scale":"ug204f4rkba","visible":true,"alignX":"start","alignY":"end","fontFamily":"Segoe UI","fontSize":10,"textColor":{"r":0,"g":0,"b":0},"dataSource":"columnValues","dataExpressions":[],"markerShape":"circle","orientation":"vertical","name":"Legend1"},"mappings":{"x":{"type":"parent","parentAttribute":"x2"},"y":{"type":"parent","parentAttribute":"y2"},"mappingOptions":{"type":"scale","table":"Temperature","expression":"first(City)","valueType":"string","scale":"ug204f4rkba","allowSelectValue":false}}}],"scales":[{"_id":"ug204f4rkba","classID":"scale.categorical<string,color>","properties":{"enableTooltips":true,"enableContextMenu":true,"enableSelection":true,"exposed":true,"name":"Scale1","mapping":{"City1":{"r":127,"g":201,"b":127},"City2":{"r":190,"g":174,"b":212},"City3":{"r":253,"g":192,"b":134}}},"mappings":{},"inputType":"string","outputType":"color"},{"_id":"h57qcb4c1jt","classID":"scale.linear<number,number>","properties":{"autoDomainMin":true,"autoDomainMax":true,"name":"Scale2","domainMin":0,"domainMax":80},"mappings":{"rangeMin":{"type":"value","value":0}},"inputType":"number","outputType":"number"}],"scaleMappings":[{"type":"scale","table":"Temperature","expression":"first(City)","valueType":"string","scale":"ug204f4rkba","attribute":"fill","valueIndex":null},{"type":"scale","table":"Temperature","expression":"avg(Value)","valueType":"number","scale":"h57qcb4c1jt","attribute":"height","valueIndex":null}],"constraints":[],"resources":[]},"defaultAttributes":{"xb7nkykw6ss":{"x":0,"y":0},"2v2fs9kqvqi":{"x1":-2.4999999999999996,"y1":-6.538675570409393,"x2":2.4999999999999996,"y2":6.538675570409393,"cx":0,"cy":0,"width":4.999999999999999,"height":13.077351140818786,"strokeWidth":0.1,"opacity":0.1},"7w4uosnah0h":{"x":0,"y":16.346688926023482,"fontSize":3,"opacity":0.25},"va2dcmxd8ha":{"x":-6.25,"y":75,"fontSize":6,"opacity":0.25}},"tables":[{"name":"Temperature","columns":[{"displayName":"Month","name":"Month","type":"string","metadata":{"kind":"categorical","order":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"orderMode":null,"rawColumnName":null,"unit":null,"isRaw":null,"format":null,"examples":null}},{"displayName":"City","name":"City","type":"string","metadata":{"kind":"categorical"}},{"displayName":"Value","name":"Value","type":"number","metadata":{"kind":"numerical","format":".1f"}}]}],"inference":[{"objectID":"ahwtbav9bk7","dataSource":{"table":"Temperature"},"axis":{"expression":"first(Month)","type":"categorical","style":{"tickColor":{"r":0,"g":0,"b":0},"lineColor":{"r":0,"g":0,"b":0},"fontFamily":"Segoe UI","fontSize":12,"tickSize":5,"wordWrap":false,"gridlineStyle":"none","gridlineColor":{"r":234,"g":234,"b":234},"gridlineWidth":1},"order":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Oct","Nov","Sep","Dec"],"orderMode":"order","rawExpression":"first(Month)","property":"xData"},"autoDomainMin":true,"autoDomainMax":true},{"objectID":"ug204f4rkba","scale":{"classID":"scale.categorical<string,color>","expressions":["first(City)"],"properties":{"mapping":"mapping"}},"dataSource":{"table":"Temperature"}},{"objectID":"h57qcb4c1jt","autoDomainMax":true,"autoDomainMin":true,"scale":{"classID":"scale.linear<number,number>","expressions":["avg(Value)"],"properties":{"mapping":"mapping"}},"dataSource":{"table":"Temperature"}}],"properties":[{"objectID":"ahwtbav9bk7","target":{"property":{"property":"xData","field":"style","subfield":"tickSize"}},"type":"number","default":5,"displayName":"PlotSegment1/xData.style.tickSize"},{"objectID":"ahwtbav9bk7","target":{"property":{"property":"xData","field":"style","subfield":"fontSize"}},"type":"number","default":12,"displayName":"PlotSegment1/xData.style.fontSize"},{"objectID":"ahwtbav9bk7","target":{"property":{"property":"xData","field":"style","subfield":"fontFamily"}},"type":"font-family","default":"Segoe UI","displayName":"PlotSegment1/xData.style.fontFamily"},{"objectID":"ahwtbav9bk7","target":{"property":{"property":"xData","field":"style","subfield":"lineColor"}},"type":"color","default":"#000000","displayName":"PlotSegment1/xData.style.lineColor"},{"objectID":"ahwtbav9bk7","target":{"property":{"property":"xData","field":"style","subfield":"tickColor"}},"type":"color","default":"#000000","displayName":"PlotSegment1/xData.style.tickColor"},{"objectID":"ahwtbav9bk7","target":{"property":{"property":"xData","field":"tickFormat"}},"type":"text","default":null,"displayName":"PlotSegment1/xData.tickFormat"},{"objectID":"ahwtbav9bk7","target":{"property":{"property":"xData","field":"tickDataExpression"}},"type":"text","default":null,"displayName":"PlotSegment1/xData.tickDataExpression"},{"objectID":"ahwtbav9bk7","target":{"property":{"property":"xData","field":"categories"}},"type":"enum","default":"descending","displayName":"PlotSegment1/xData.categories"},{"objectID":"2v2fs9kqvqi","target":{"attribute":"visible"},"type":"boolean","default":true,"displayName":"Shape1/visible"},{"objectID":"2v2fs9kqvqi","target":{"attribute":"strokeWidth"},"type":"number","default":1,"displayName":"Shape1/strokeWidth"},{"objectID":"2v2fs9kqvqi","target":{"property":"strokeStyle"},"type":"enum","default":"solid","displayName":"Shape1/strokeStyle"},{"objectID":"2v2fs9kqvqi","target":{"attribute":"opacity"},"type":"number","default":1,"displayName":"Shape1/opacity"},{"objectID":"7w4uosnah0h","target":{"attribute":"fontFamily"},"type":"font-family","default":"Impact","displayName":"Text1/fontFamily"},{"objectID":"7w4uosnah0h","target":{"attribute":"fontSize"},"type":"number","default":12,"displayName":"Text1/fontSize"},{"objectID":"7w4uosnah0h","target":{"attribute":"color"},"type":"color","default":"#000000","displayName":"Text1/color"},{"objectID":"7w4uosnah0h","target":{"attribute":"visible"},"type":"boolean","default":true,"displayName":"Text1/visible"},{"objectID":"7w4uosnah0h","target":{"attribute":"opacity"},"type":"number","default":1,"displayName":"Text1/opacity"},{"objectID":"va2dcmxd8ha","target":{"attribute":"fontSize"},"type":"number","default":24,"displayName":"Title/fontSize"},{"objectID":"va2dcmxd8ha","target":{"attribute":"color"},"type":"color","default":"#000000","displayName":"Title/color"},{"objectID":"va2dcmxd8ha","target":{"attribute":"text"},"type":"text","default":"demo","displayName":"Title/text"},{"objectID":"gk0e67e5zf4","target":{"property":"fontFamily"},"type":"font-family","default":"Segoe UI","displayName":"Legend1/fontFamily"},{"objectID":"gk0e67e5zf4","target":{"property":"fontSize"},"type":"number","default":10,"displayName":"Legend1/fontSize"},{"objectID":"gk0e67e5zf4","target":{"property":"textColor"},"type":"color","default":"#000000","displayName":"Legend1/textColor"},{"objectID":"gk0e67e5zf4","target":{"property":"markerShape"},"type":"enum","default":"circle","displayName":"Legend1/markerShape"},{"objectID":"gk0e67e5zf4","target":{"property":"alignY"},"type":"enum","default":"end","displayName":"Legend1/alignY"},{"objectID":"gk0e67e5zf4","target":{"property":"alignX"},"type":"enum","default":"start","displayName":"Legend1/alignX"},{"objectID":"h57qcb4c1jt","target":{"property":"domainMin"},"type":"number","displayName":"Scale2/domainMin"},{"objectID":"h57qcb4c1jt","target":{"property":"domainMax"},"type":"number","displayName":"Scale2/domainMax"},{"objectID":"h57qcb4c1jt","target":{"attribute":"rangeMin"},"type":"number","default":null,"displayName":"Scale2/rangeMin"},{"objectID":"h57qcb4c1jt","target":{"attribute":"rangeMax"},"type":"number","default":null,"displayName":"Scale2/rangeMax"},{"objectID":"61j9fnu7ca","target":{"attribute":"marginLeft"},"type":"number","default":50,"displayName":"Chart/marginLeft"},{"objectID":"61j9fnu7ca","target":{"attribute":"marginRight"},"type":"number","default":100,"displayName":"Chart/marginRight"},{"objectID":"61j9fnu7ca","target":{"attribute":"marginTop"},"type":"number","default":80,"displayName":"Chart/marginTop"},{"objectID":"61j9fnu7ca","target":{"attribute":"marginBottom"},"type":"number","default":50,"displayName":"Chart/marginBottom"}],"version":"2.0.4"};
                const chartTemplate = new CharticulatorContainer.ChartTemplate(
                  template
                );
                chartTemplate.reset();

                const defaultTable = dataset.tables[0];
                const columns = defaultTable.columns;
                chartTemplate.assignTable(defaultTable.name, defaultTable.name);
                for (const column of columns) {
                  chartTemplate.assignColumn(
                    defaultTable.name,
                    column.name,
                    column.name
                  );
                }

                // links table
                const linksTable = dataset.tables[1];
                const links = linksTable && (linksTable.columns);
                if (links) {
                  chartTemplate.assignTable(linksTable.name, linksTable.name);
                  for (const column of links) {
                    chartTemplate.assignColumn(
                      linksTable.name,
                      column.name,
                      column.name
                    );
                  }
                }
                const instance = chartTemplate.instantiate(dataset);

                const { chart } = instance;

                // for (const property of template.properties) {
                //   if (property.target.attribute) {
                //     CharticulatorContainer.ChartTemplate.SetChartAttributeMapping(
                //       chart,
                //       property.objectID,
                //       property.target.attribute,
                //       {
                //         type: "value",
                //         value: property.default,
                //       }
                //     );
                //   }
                  
                // }

                const container = new CharticulatorContainer.ChartContainer({ chart: chart }, dataset);
                const width = document.getElementById("container").getBoundingClientRect().width;
                const height = document.getElementById("container").getBoundingClientRect().height;
                container.mount("container", width, height);
                window.addEventListener("resize", function() {
                  container.resize(
                    document.getElementById("container").getBoundingClientRect().width,
                    document.getElementById("container").getBoundingClientRect().height
                  );
                });
              });
            </script>
          </body>
          </html>
        