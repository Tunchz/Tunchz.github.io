<!doctype html>
<html lang="en" class="no-js">
  <head>
  	<meta charset="UTF-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DRM : Disaster Risk Management</title>
    <meta name="description" content="the question isn't can you; it's WILL YOU. -FWTT-">
    <link rel="icon" type="image/x-icon" href="img/isoc.png"/>
    <link rel="stylesheet" href="css/covid19.min.blue.css">

    <!link rel="stylesheet" href="css/patternfly.min.css" />
    <!link rel="stylesheet" href="css/patternfly-additions.min.css" />

    <link rel="stylesheet" href="css/FWTT.css">
    <link rel="stylesheet" href="css/fonts.css">

    <style id="dynamic_style">
      .detailTable>tbody>tr>td {
        background-color: #7777770f;
      }
      .open>.parent>.detailHeader {
        background-color: #2a58c3;
        color: #fff;
      }
    </style>
  </head>
  <body onresize="resizeAdjust();" onload="setfullscreen();">
<!--     <div id="ptr">
        ...
    </div> -->
    <div id = "wholecontent">
      <div id = "map-panel" class = "col-sm-7 height100p" onresize="map.resize()">

        <div id="map-container">
          <div id="map"></div>
          <div id="header-menu-container">
            <div id="header-menu-container-wrap">
              <div id="header-menu" align="center">
                <span id="home-toggle-icon"><icon class="icon-home" oncontextmenu="return false;"></icon></span>
                <div id="headermenu2" class="header-menu-button" onclick="switchDatapanel(2)" style="border-top-left-radius: 15px;border-bottom-left-radius: 15px;">ตาราง</div>
                <div id="headermenu1" class="header-menu-button" onclick="switchDatapanel(1)">สมดุล</div>
                <div id="headermenu0" class="header-menu-button" onclick="switchDatapanel(0)" style="border-top-right-radius: 15px;border-bottom-right-radius: 15px;">แผนที่</div>
                <span id="geocoder-toggle-icon"><icon class="icon-search" oncontextmenu="return false;"></icon></span>
              </div>
            </div>
            <div id="geocoder" class="geocoder" style="display: none;"></div>
          </div>
          <div id='header-container' class='map_addon_top_left'>
            <div id = "logo-container" class = "col-xs-3" style = "display: flex;justify-content: center; align-items: center;" data-toggle="modal" data-target="#info-modal">
              <img id = "logo" src = 'img/isoc.png' style = "padding: 5px; width : 40px; height : 40px;"></img>
            </div>
            <div id = "title-container" class = "col-xs-9 height100p" style = "">
              <div id = "Text1_" class = "col-xs-8 height100p" style = "padding: 0px 0px 0px 5px;margin:0px;margin-top: 10px; max-width: 65px;">
                <span style="font-family: Impact;font-size: 30px; color: #fff;text-shadow: 0px 0px 3px #777;">DRM </span>
              </div>
              <div id = "Text2_" class = "col-xs-4 height100p" style = "pointer-events: auto;display: flex;justify-content: left; align-items: center; padding : 11px 0px 0px 5px;">
                <div type="button" class="btn btn-primary" style="width:18px; height:18px; border-radius: 50%; padding: 0px 5px; font-family: mitr;box-shadow: 0px 0px 3px #777;" data-toggle="modal" data-target="#info-modal">
                  <div style="margin: -1px 0px 0px 0px;">?</div>
                </div>                          
              </div>
            </div>

            <div class="modal fade" id="info-modal" tabindex="-1" role="dialog" aria-labelledby="info-modalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="false">&times;</span></button>
                            <h2 class="modal-title h3" id="myModalLabel"><a href="https://www.maholan.co.th/">DRM</a> &gt; Disaster Risk Management Dashboard </h2>
                        </div>
                        <div class="modal-body">
                            <h3 style="margin-top:0">วัตถุประสงค์</h3>
                            <p>รายงานการจัดการความเสี่ยงภัยพิบัติ ใช้เพื่อช่วยบริหารจัดการความเสี่ยงการเกิดภัยพิบัติ แจ้งเตือนการวางแผนรับมือภัย แจ้งเตือนภัยพิบัติเมื่อมีการประกาศภัย และใช้เป็นข้อมูลประกอบในการวิเคราะห์เพื่อการตัดสินใจในการดำเนินการปฏิบัติงานเพื่อรับมือกับภัยพิบัติอย่างมีปรุสิทธิภาพ โดยรายงานมีการแสดงข้อมูลดังนี้/p>
                            <ol>
                                <li>ข้อมูลแจ้งเตือนภัยพิบัติตามประการศจาก ปภ. พร้อมรายละเอียดการดำเนินการ</li>
                                <li>ข้อมูลแจ้งเตือนการวางแผนรับมือภัยพิบัติ พร้อมรายละเอียดข้อแนะนำ</li>
                                <li>ข้อมูลพื้นฐานและผลการวิเคราะห์เพื่อใช้ประกอบในการวิเคราะห์สถานการณ์เกี่ยวกับภัยพิบัติต่างๆ</li>
                            </ol>

                            <h3 class="">การใช้งาน</h3>
                            <p>สามารถโหลด<a href="https://tunchz.github.io/ISOC/Manual_DRM.pdf">คู่มือการใช้งาน</a>ได้ที่นี่ </p>
                            <ol>
                                <li>Map Menu ด้านซ้ายขอบจอภาพใช้ควบคุมการแสงผลบนแผนที่ รวมถึงการจัดการชั้นข้อมูล ซ่อน/แสดงและกรองชั้นข้อมูลต่างๆ ได้แก่ ชั้นข้อมูลการแจ้งเตือน   ชั้นข้อมูลประกอบการวิเคราะห์ และชั้นข้อมูลภาพแผนที่พื้นหลัง</li>
                                <li>Notification Menu และ Notification Icon ด้านขวาขอบจอภาพใช้ควบคุมชั้นข้อมูลการแจ้งเตือน การซ่อน/แสดงสัญลักษณ์แจ้งเตือนบนแผนที่ การเปิด/ปิด ถาดข้อมูลแจ้งเตือน การกรองและแสดงข้อมูลรายละเอียดการแจ้งเตือนต่างๆ</li>
                                <li>รายงานสามารถแสดงผลใช้งานได้บนอุปกรณ์โทรศัพท์เคลี่อนที่โดยที่ Notification Menu และ Notification Icon จะแสดงขอบด้านล่างจอภาพ แทนที่ขอบจอภาพด้านขวา</li>
                            </ol>
                            <h3>ข้อมูล</h3>
                            <p>ข้อมูลใช้ในรายงานได้ถูกเชื่อมต่อจากหน่วยงานราชการที่มีหน้าที่รับผิดชอบดำเนินการภัยพิบัติด้านต่างๆ เพื่อนำมาบูรณาการใช้ประโยชน์จากข้อมูลในระบบ Bigdata Platform สามารถ<a data-toggle="modal" data-target="#datasource-modal" href="">ดูรายละเอียดชุดข้อมูล</a>ได้ที่นี่</p>
                            <ul>
                                <li>ระบบรายงาน ถูกพัฒนาขึ้นเพื่อใช้บูรณาการข้อมูลด้านต่างๆ เพื่อช่วยในการบริหารจัดการภัยพิบัติ และเพื่อประโยชน์กับสาธารณะชน กรุณาติดต่อผู้จัดทำระบบเพื่อขออนุญาตในการใช้งานข้อมูลใดๆ ที่เป็นผลลัพธ์จากระบบก่อนนำไปใช้งาน ผู้จัดทำจะไม่รับผิดชอบการกระทำใดๆ ที่ก่อให้เกิดความเสียหายจากการนำข้อมูลไปใช้หรืออ้างอิง </li>
                            </ul>
                            <h3>ติดต่อ</h3>
                            <p>สำหรับคำถามและข้อเสนอแนะติดต่อ <a href="mailto:tunchz@gmail.com">Bigdata Team</a> สดม.กอ.รมน.</p>
                        </div>
                        <div class="modal-footer" style="margin-top: 0px; padding-top: 0px;"><span class="pull-left">Made by ISOC Bigdata Team</span><br><span class="pull-left">Copyright &#169; Mholan Co,lmd., All Rights Reserved.</span> <button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="datasource-modal" tabindex="-1" role="dialog" aria-labelledby="datasource-modalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h3 class="modal-title" id="myModalLabel">รายละเอียดแหล่งข้อมูล</h3>
                        </div>
                        <div class="modal-body">
                            <table class="table table-condensed" >
                                <thead>
                                    <tr>
                                        <th>ชุดข้อมูล</th>
                                        <th>แหล่งข้อมูล</th>
                                        <th>อัปเดตล่าสุด</th>
                                    </tr>
                                </thead>
                                <tbody>

                                    <tr>
                                        <td>ข้อมูลการแจ้งเตือนภัย</td>
                                        <td>ระบบรายงานของ ปภ.</td>
                                        <td>ต.ค. 63</td>
                                    </tr>
                                    <tr>
                                        <td>ข้อมูลการแจ้งเตือนวางแผน</td>
                                        <td>ระบบแผนงานด้านภัยพิบัติ</td>
                                        <td>ต.ค. 63</td>
                                    </tr>
                                    <tr>
                                        <td>ข้อมูลผลการวิเคราะห์ด้านน้ำ</td>
                                        <td>สำนักงานทรัพยากรน้ำแห่งชาติ</td>
                                        <td>ต.ค. 63</td>
                                    </tr>

                                    <tr>
                                        <td>ข้อมูลทรัพยากรน้ำ</td>
                                        <td>กรมทรัพยากรน้ำ กระทรวงทรัพยากรธรรมชาติ</td>
                                        <td>ต.ค. 63</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div>
                    </div>
                </div>
            </div>
          </div>

          <div id='notification-container-right' class='map_addon_right' style = "width: auto; display:block; margin:0px;">
            
            <div id='table-container-MAP' class = "col-sm-12 height100p" style="display: block;">
              <div id="table-markers-container" class="table-container" oncontextmenu="return false;" style = "padding-right:2px; background-color: #fff0;/*-webkit-transform: translateX(-50%) translateY(0%);*/"></div>
              <div id='menu-container-top-right' class='map_addon_top_right' style = "padding: 0px 0px 0px 0px;"></div>
            </div>
            <div id = "data-panel" class = "col-xs-12 height100p" style = "/*background-color: #383838;*/">
              <div id='table-container-BG' class = "col-xs-12 height100p" style = "padding: 0 5px 5px 0;/*background-color: #ffffff22*/">
                <div id="table-container" class="table-container" oncontextmenu="return false;"></div> 
              </div>                
            </div>

          </div>


          <div id='notification-container-bottom' class='map_addon_bottom' style = "height: auto; margin:0px;">
            <div id='notification-container-bottom-handle'></div>
            <div id='vertical-table-container-MAP' class = "col-sm-12 height105p">
              <div id="vertical-table-markers-container" class="table-container" oncontextmenu="return false;" style = "padding: 0px 5px; background-color: #fff0;/*-webkit-transform: translateX(-50%) translateY(-50%);*/">
              </div>
            </div>
          </div>


          <div id="map_style_menu_outline" style="display: none" onmouseenter="switchStyleMenu(true)" onmouseleave="switchStyleMenu(false)"  >
            <div id="map_style_menu" >
              <div style="/*margin: 5px 17px 0px 5px; padding-top:3px;*/" onclick="switchStyleMenu(false)" >
                <input id="satellite-v9" type="radio" name="rtoggle" value="sattellite-streets" checked="checked" />
                <label for="satellite-v9">sattellite</label><br>                
                <input id="satellite-streets-v11" type="radio" name="rtoggle" value="satellite" />
                <label for="satellite-streets-v11">satellite-streets </label><br>
                <input id="streets-v11" type="radio" name="rtoggle" value="streets" />
                <label for="streets-v11">streets </label><br>
                <input id="outdoors-v11" type="radio" name="rtoggle" value="outdoors" />
                <label for="outdoors-v11">outdoors </label><br>
                <input id="light-v10" type="radio" name="rtoggle" value="light" />
                <label for="light-v10">light </label><br>
                <input id="dark-v10" type="radio" name="rtoggle" value="dark" />
                <label for="dark-v10">dark </label>
              </div>
            </div>
          </div>
          <div id="map_style_menu_button" class="mapboxgl-ctrl mapboxgl-ctrl-group" onclick="switchStyleMenu(true)" onmouseleave="switchStyleMenu(false)">
            <button style="padding:2px;" type="button">
              <div id="map_style_menu_button_image"></div>
            </button>
          </div>


          
          <div id='menu-container-bottom-right' class='map_addon_bottom_right' ></div>





        </div>

      </div>
    </div>
  </body>

  <!script defer src="js/face-api.min.js"><!/script>
<!--   <script src="js/pull-to-reload.js"></script> -->
  <script src="js/covid19.js"></script>

  <!link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css"
    integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous" />
  <link rel="stylesheet" href="layer_control/layerControl2.css">


  <script src='js/mapbox-gl_v1120.js'></script>
  <link rel="stylesheet" href="css/mapbox-gl_v1120.css">
  <!script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"><!/script>
  <!link href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css" rel="stylesheet" />
  <script src='js/mapbox-gl-geocoder.js'></script>
  <link rel="stylesheet" href="css/mapbox-gl-geocoder.css">

  <!script src="js/bootstrap-datepicker.min.js"><!/script>
  <!script src="js/d3.min.js"><!/script>
  <script src="js/alasql.js"></script>
  <script src="js/crossfilter.min.js"></script>
  <script src="js/jquery.min.js"></script>

  <!script type="module" src="https://tunchz.github.io/ISOC/base_layer_control.js"><!/script>
  <script defer src="markers.js"></script>
  <!script defer src="ISOC.js"><!/script>
  <script defer src="swipedetect.js"></script>

  <link rel="stylesheet" href="css/jquery-ui.css">
  <script src="js/jquery-ui.js"></script>
  <script src="autocomplete.js"></script>
  <script src="getthaiwatergeojson.js"></script>

  <link rel="stylesheet" href="css/mapbox-gl-draw.css">
  <link rel="stylesheet" href="css/maptools.css">

  <script>
/*
    var ptr;

    document.addEventListener("DOMContentLoaded", function() {
      ptr = new PullToReload({ 
        'callback-loading': function(){
          alert("refresh!!!");
          ptr.loadingEnd();
          //setTimeout(function(){
          //    ptr.loadingEnd();
          //}, 5000);
        }
      });
                
    });

*/


    var formatDateTime = d3.time.format("%d %B %Y %H:%M:%S");

    //---- Mapbox GL Initialization--------
    var z=4,  //default zoom level 0-4
        flyspeed = 2,
        mapcenter = {"lng":101.6673626,"lat":13.2808669},
        disinteract = 0;

    mapboxgl.accessToken = 'pk.eyJ1IjoidHVuY2h6IiwiYSI6ImNqcnU5NTRmMzJ0NHAzeWw5MTc1YzN4cGQifQ.jSjhGqwnq-8XjfgRlf4JNg';  //from mapbox
    //mapboxgl.accessToken ="pk.eyJ1IjoiYTEwayIsImEiOiJjaWdyMmVrazcwMXpsdTZtMThscWtiOTJtIn0.-A76dzJ0vsKULJdDxGvVXg";
    //mapboxgl.accessToken ='pk.eyJ1IjoibW9yZ2Vua2FmZmVlIiwiYSI6IjIzcmN0NlkifQ.0LRTNgCc-envt9d5MzR75w';
    //mapboxgl.accessToken ='pk.eyJ1IjoiZHVlcm1hZWwiLCJhIjoiNTRmNjc2MjYzN2Y0NDk5ZjRjMTM1MDA2YjQzYTY4NjUifQ.zdJRPPXa8WvpcMZC1_RAyw';  //from jsfiddle
    //mapboxgl.accessToken ='pk.eyJ1IjoiYXByZW5kZWdpcyIsImEiOiI1TmFvZGI4In0.ZicumXHvKqD1e6G_WH7B4g';  //from jsfiddle
    //mapboxgl.accessToken ='pk.eyJ1IjoiZGFuc3dpY2siLCJhIjoiY2l1dTUzcmgxMDJ0djJ0b2VhY2sxNXBiMyJ9.25Qs4HNEkHubd4_Awbd8Og';  //
    //mapboxgl.accessToken ='pk.eyJ1IjoiZWRlbnJheWdhcmRuZXIiLCJhIjoiRlZRVlhqOCJ9.tDrWaeNRbMCtXAovQLYuzA';  //
    //mapboxgl.accessToken ='pk.eyJ1IjoiaWFtYW52ZXNoIiwiYSI6ImNrMDJpdGdiMTFsOXMzY3Byd285MXMzZ3kifQ.d-3i64qeGwMjSZcBQ2EQvQ';  //

    //Setup mapbox-gl map
    var map = new mapboxgl.Map({
      //style: 'mapbox://styles/tunchz/ck9litjbw2soc1iqo4rysy4nt',
      //style: 'mapbox://styles/mapbox/streets-v11',
      //style: 'mapbox://styles/mapbox/cjaudgl840gn32rnrepcb9b9g',  // the outdoors-v10 style but without Hillshade layers
      //style: 'mapbox://styles/mapbox/outdoors-v10',
      //style: 'mapbox://styles/mapbox/dark-v10',
      //style: 'mapbox://styles/mapbox/satellite-v9',
      style: 'mapbox://styles/mapbox/satellite-streets-v11',
      //style: 'mapbox://styles/mapbox/light-v10',

      // Custom map style
      //style: 'https://maputnik.github.io/osm-liberty/style.json',

      // hash: true,
      // /*style: 'some mapbox style url*/
      // /*below is a blank style*/
      // style: {
      //   "version": 8,
      //   "name": "blank",
      //   "sources": {
      //     "blank": {
      //       "type": "vector",
      //       "url": ""
      //     }
      //   },
      //   "layers": [{
      //     "id": "background",
      //     "type": "background",
      //     "paint": {
      //       "background-color": "#383838"
      //     }
      //   }]
      // },




      container: 'map', // container id
      center: mapcenter,
      //center: [13.79,53.545],
      minZoom: 0.3,
      maxZoom: 20,
      zoom: 4.8,
      pitch: 0,
      // pitch: 90,
      //bearing: -17.6,
      antialias: true

    })

    $("#header-container").appendTo(".mapboxgl-ctrl-top-left");
    $("#header-menu-container").appendTo(".mapboxgl-ctrl-top-left");
    $("#header-geocoder-container").appendTo(".mapboxgl-ctrl-top-left");
    // disable map rotation using right click + drag
    //map.dragRotate.disable();
     
    // map.addControl(new MapboxGeocoder({
    //   accessToken: mapboxgl.accessToken
    // }), 'top-left');

    // Setting up GeoCoder
    var geocoder = new MapboxGeocoder({
      accessToken: mapboxgl.accessToken,
      flyTo:true,
      marker: {offset: [-13,-36],color: 'red'},
      mapboxgl: mapboxgl
    });
    geocoder.on('result', function(e) {
      resize = 1;
      centerMap({"lng":e.result.center[0],"lat":e.result.center[1]});
    });
    document.getElementById('geocoder').appendChild(geocoder.onAdd(map)); 

    // disable map rotation using touch rotation gesture
    //map.touchZoomRotate.disableRotation();

    //map.scrollZoom.disable()
    map.doubleClickZoom.disable();
    //map.addControl(new mapboxgl.Navigation());
    map.addControl(new mapboxgl.FullscreenControl(), 'top-left');

    // Add geolocate control to the map.
    map.addControl(new mapboxgl.GeolocateControl({positionOptions: {enableHighAccuracy: true},trackUserLocation: true}), 'top-left');
    map.addControl(new mapboxgl.NavigationControl({showCompass: true,showZoom:false}), 'top-left');


    var layerList = document.getElementById('map_style_menu');
    var inputs = layerList.getElementsByTagName('input');
    var currentLayer = "satellite-v9";
    var mapEvent = 'style.load'; //'idle'; //'styledata';
    var run = 0;
     
    $("#map_style_menu_button").appendTo(".mapboxgl-ctrl-top-left");
    $("#map_style_menu_outline").appendTo(".mapboxgl-ctrl-top-left");

    
    $("#notification-container-right").appendTo(".mapboxgl-ctrl-top-right");
    $("#notification-container-bottom").appendTo(".mapboxgl-ctrl-bottom-left");

    $("#menu-container-bottom-right").appendTo(".mapboxgl-ctrl-bottom-right");


    function switchLayer(layer) {      
      //firstrun = false;
      var layerId = layer.target.id;
      if (layerId != currentLayer) {

        var removebutton = document.getElementsByClassName('mgl-layerControl');
        //console.log("length",removebutton.length);
        for (i=0;i<removebutton.length;i++) {removebutton[i].parentElement.removeChild(removebutton[i]);}

        map.setStyle('mapbox://styles/mapbox/' + layerId);
        currentLayer = layerId;
      }
      //map.setLayoutProperty('country-label', 'text-field', ['get','name_ru']);
    }
     
    for (var i = 0; i < inputs.length; i++) {
      inputs[i].onclick = switchLayer;
    }
        
    function switchStyleMenu(sw) {
      //console.log("switchStyleMenu : ",sw);
      if (sw) {
        document.getElementById("map_style_menu_outline").style.display = "block";
      } else {
        document.getElementById("map_style_menu_outline").style.display = "none";
      }
    }





    function project(m,d) {
      return m.project(new mapboxgl.LngLat(+d.lon, +d.lat)/*getLL(d)*/);
    }

    function markerupdate(m,d) {
      d
      .attr({
        cx: function(d) { 
          var x = project(m,d).x;
          return x
        },
        cy: function(d) { 
          var y = project(m,d).y;
          return y
        },
      })
    }

    function zoom(d) {
      if (d==0) {
        return 18.5;
      } else if (d==1) {
        return 16;
      } else if (d==2) {
        return 11;
      } else if (d==3) {
        return 7;
      } else {
        return 4.7;
      }
    }

    function setfullscreen() {
      // element = document.getElementById("map-container");
      // // console.log(element);
      // if (!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)) {
      //   if (element.requestFullscreen) {
      //     element.requestFullscreen();
      //   } else if (element.mozRequestFullScreen) {
      //     element.mozRequestFullScreen();
      //   } else if (element.webkitRequestFullscreen) {
      //     element.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
      //   } else if (element.msRequestFullscreen) {
      //     element.msRequestFullscreen();
      //   }          
      // }
    
    }

    function forcefullscreen() {
      console.log("forcefullscreen call...on width : "+ $("#wholecontent").width());
      if ($("#wholecontent").width()  < 768) {
        // top.resizeTo(window.screen.availWidth, window.screen.availHeight);
        // top.moveTo(0,0);
        // console.log("set forcefullscreen!")
        // setTimeout("forcefullscreen()",500);
      }
    }   

  </script>

  <script src="js/mapbox-gl-draw.js"></script>
  <script src="js/maptools.js"></script>


  <script type="module">
//=======Map Layer Control ========================================================================================
    //import { layerControlSimple } from "https://tunchz.github.io/ISOC/layer_control/layerControlSimple.js"
    import { layerControlGrouped } from "https://tunchz.github.io/ISOC/layer_control/layerControlGrouped2.js"

    var config;

    load_map_layers();
    // load_thaiwater();
var empty_geojson = {
      'type': 'FeatureCollection',
      'features': []
    };


    map.on(mapEvent, function () {


      map.addSource('mapth_prov', {
        'type': 'geojson',
        'data': 'https://tunchz.github.io/ISOC/json/mapth_prov_2.5p.json'
      });

      map.addSource('mapth_dist', {
        'type': 'geojson',
        'data': 'https://tunchz.github.io/ISOC/json/mapth_dist_2.5p.json'
      });

      map.addSource('mapth_subd', {
        'type': 'geojson',
        'data': 'https://tunchz.github.io/ISOC/json/mapth_subd_2.5p_dissolved.json'
      });

      map.addSource('mainbasin', {
        'type': 'geojson',
        'data': 'https://tunchz.github.io/ISOC/json/mainbasin_10p.json'
      });

      map.addSource('subbasin', {
        'type': 'geojson',
        'data': 'https://tunchz.github.io/ISOC/json/subbasin_10p.json'
      });

      map.addSource('mainriver', {
        'type': 'geojson',
        'data': 'https://tunchz.github.io/ISOC/json/main_river.json'
      });

      map.addSource('drought_risk', {
        'type': 'geojson',
        'data': 'https://tunchz.github.io/ISOC/json/Drought_Risk_34_10p.json'
      });

      map.addSource('flood_risk', {
        'type': 'geojson',
        'data': 'https://tunchz.github.io/ISOC/json/Flood_Risk_35_10p.json'
      });

      map.addSource('water_l', {
        'type': 'geojson',
        'data': 'https://tunchz.github.io/ISOC/json/P_Water_L.geojson'
      });

      map.addSource('water_m', {
        'type': 'geojson',
        'data': 'https://tunchz.github.io/ISOC/json/P_Water_M.geojson'
      });
//------------------------Warnining ---------------------------------
      // map.addLayer({
      //   'id': 'สถานการณ์น้ำ',
      //   'type': 'circle',
      //   'source': {
      //     'type': 'geojson',
      //     'data': {
      //       'type': 'FeatureCollection',
      //       'features': []
      //     }
      //   },
      //   'layout': {
      //     'visibility': 'visible'
      //   },
      //   'paint': {
      //       'circle-color': '#fff',  //set color #0000 means no color layer
      //       'circle-radius': 1,
      //       'circle-opacity':0
      //   }
      // });

      // map.addLayer({
      //   'id': 'การคาดการณ์',
      //   'type': 'circle',
      //   'source': {
      //     'type': 'geojson',
      //     'data': {
      //       'type': 'FeatureCollection',
      //       'features': []
      //     }
      //   },
      //   'layout': {
      //     'visibility': 'visible'
      //   },
      //   'paint': {
      //       'circle-color': '#fff',  //set color #0000 means no color layer
      //       'circle-radius': 1,
      //       'circle-opacity':0
      //   }
      // });

              // map.addLayer({
              //     'id': layername+'_label',
              //     'type': 'symbol',
              //     'source': layername,
              //     'layout': {
              //         'visibility': 'visible',
              //         'text-field': '',//['get', 'val'],
              //         'text-font': ['Roboto Black', 'Arial Unicode MS Bold'],
              //         'text-ignore-placement': true,
              //         'text-offset': [0, -4.9],
              //         'text-size': 8
              //     },
              //     'paint': {
              //         'text-color': textcolor,
              //         'text-opacity': 1,
              //         'text-halo-color': "rgba(255,255,255,1)",                  
              //         'text-halo-width': 1,
              //         'text-halo-blur': 0
              //     }
              // });



      map.addLayer({
        'id': 'แจ้งเตือนภัย',
        'type': 'symbol',
        'source': {
          'type': 'geojson',
          'data': {
            'type': 'FeatureCollection',
            'features': []
          }
        },
        'layout': {
          'visibility': 'none',
          'text-field': ''
        },
        'paint': {
            'text-color': '#fff',
            'text-opacity':0
        }
      });

      map.addLayer({
        'id': 'แจ้งเตือนวางแผน',
        'type': 'heatmap',
        'source': {
          'type': 'geojson',
          'data': {
            'type': 'FeatureCollection',
            'features': []
          }
        },
        'layout': {
          'visibility': symbol[1].initialvis
        },
        'paint': {
            'heatmap-color': '#ffffff',
            'heatmap-opacity': 0
        }
      });

      map.addLayer({
        'id': 'พื้นที่จังหวัด',
        'type': 'fill',
        'source': 'mapth_prov',
        'layout': {
          'visibility': 'visible'
        },
        'paint': {
          'fill-color': '#ffffff',
          'fill-outline-color': 'white',
          'fill-opacity': 0
        }
      });

      map.addLayer({
        'id': 'เขตจังหวัด',
        'type': 'line',
        'source': 'mapth_prov',
        'layout': {
          'visibility': 'visible'
        },
        'paint': {
          'line-color': '#dddddd',
          'line-opacity': 1
        }
      });

      map.addLayer({
        'id': 'พื้นที่อำเภอ',
        'type': 'fill',
        'source': 'mapth_dist',
        'layout': {
          'visibility': 'none'
        },
        'paint': {
          'fill-color': '#ffffff',
          'fill-outline-color': 'white',
          'fill-opacity': 0
        }
      });

      map.addLayer({
        'id': 'เขตอำเภอ',
        'type': 'line',
        'source': 'mapth_dist',
        'layout': {
          'visibility': 'none'
        },
        'paint': {
          'line-color': '#dddddd',
          'line-opacity': 1
        }
      });

      map.addLayer({
        'id': 'พื้นที่ตำบล',
        'type': 'fill',
        'source': 'mapth_subd',
        'layout': {
          'visibility': 'none'
        },
        'paint': {
          'fill-color': '#ffffff',
          'fill-outline-color': 'white',
          'fill-opacity': 0
        }
      });

      map.addLayer({
        'id': 'เขตตำบล',
        'type': 'line',
        'source': 'mapth_subd',
        'layout': {
          'visibility': 'none'
        },
        'paint': {
          'line-color': '#bbbbbb',
          'line-opacity': 1
        }
      });

      map.addLayer({
        'id': 'พื้นที่ลุ่มน้ำหลัก',
        'type': 'fill',
        'source': 'mainbasin',
        'layout': {
          'visibility': 'none'
        },
        'paint': {
          'fill-color': '#ffffff',
          'fill-outline-color': 'white',
          'fill-opacity': 0
        }
      });

      map.addLayer({
        'id': 'เขตพื้นที่ลุ่มน้ำหลัก',
        'type': 'line',
        'source': 'mainbasin',
        'layout': {
          'visibility': 'none'
        },
        'paint': {
          'line-color': '#00f',
          'line-opacity': 1
        }
      });

      map.addLayer({
        'id': 'พื้นที่ลุ่มน้ำย่อย',
        'type': 'fill',
        'source': 'subbasin',
        'layout': {
          'visibility': 'none'
        },
        'paint': {
          'fill-color': '#ffffff',
          'fill-outline-color': 'white',
          'fill-opacity': 0
        }
      });

      map.addLayer({
        'id': 'เขตพื้นที่ลุ่มน้ำย่อย',
        'type': 'line',
        'source': 'subbasin',
        'layout': {
          'visibility': 'none'
        },
        'paint': {
          'line-color': '#00f',
          'line-opacity': 1
        }
      });      


      map.addLayer({
        'id': 'แม่น้ำสายหลัก',
        'type': 'line',
        'source': 'mainriver',
        'layout': {
          'visibility': 'none'
        },
        'paint': {
          'line-color': '#00f',
          'line-width': 2,
          'line-opacity': 1
        }
      });      //map.setFilter('เขตจังหวัด',["match",["get", "จังหวัด"],['น่าน','นครนายก'],true,false]);
      //map.setFilter('เขตจังหวัด',["in", "จังหวัด", 'น่าน','นครนายก']);
      //map.setFilter('เขตอำเภอ',["all",["match",["get", "จังหวัด"],['นครนายก','น่าน'],true,false],["match",["get", "อำเภอ"],['เมืองนครนายก','บ้านนา','เมืองน่าน'],true,false]]);

      map.addLayer({
        'id': 'พื้นที่เสี่ยงภัยแล้ง',
        'type': 'fill',
        'source': 'drought_risk',
        'layout': {
          'visibility': 'none'
        },
        'paint': {
          'fill-color': [
              'case',
              ['==', ['get', 'ระดับ'], '3'], 'rgba(227,116,0,1)',
              ['==', ['get', 'ระดับ'], '4'], 'rgba(197,34,31,1)',
              '#ffffff'
          ],
          // 'fill-outline-color': 'white',
          'fill-opacity': 0.5
        }
      });

      map.addLayer({
        'id': 'พื้นที่เสี่ยงน้ำท่วม',
        'type': 'fill',
        'source': 'flood_risk',
        'layout': {
          'visibility': 'none'
        },
        'paint': {
          'fill-color': [
              'case',
              ['==', ['get', 'ระดับ'], '3'], 'rgba(100,100,255,1)',
              ['==', ['get', 'ระดับ'], '5'], 'rgba(0,0,255,1)',
              '#ffffff'
          ],
          // 'fill-outline-color': 'white',
          'fill-opacity': 0.5
        }
      });

      map.addLayer({
        'id': 'แหล่งน้ำขนาดใหญ่',
        'type': 'fill',
        'source': 'water_l',
        'layout': {
          'visibility': 'none'
        },
        'paint': {
          'fill-color': 'rgba(0,0,255,1)',
          // 'fill-outline-color': 'white',
          'fill-opacity': 0.5
        }
      });

      map.addLayer({
        'id': 'แหล่งน้ำขนาดกลาง',
        'type': 'fill',
        'source': 'water_m',
        'layout': {
          'visibility': 'none'
        },
        'paint': {
          'fill-color': 'rgba(0,0,255,1)',
          // 'fill-outline-color': 'white',
          'fill-opacity': 0.5
        }
      });

      map.addLayer({
        'id': 'บ่อบาดาล (จุด)',
        'type': 'circle',
        'source': {
          'type': 'geojson',
          'data': 'https://tunchz.github.io/ISOC/json/well_small.geojson'
        },
        layout: {
            'visibility': 'none'
        },          
        paint: {
            'circle-color': '#0f0',
            'circle-radius': 2,
            'circle-stroke-width': 0,
            'circle-stroke-color': '#fff'
        }
      });

      map.addLayer({
        'id': 'จุดความร้อน (จุด)',
        'type': 'circle',
        'source': {
          'type': 'geojson',
          'data': 'https://tunchz.github.io/ISOC/json/hotspotth.geojson'
        },
        layout: {
            'visibility': 'none'
        },          
        paint: {
            'circle-color': '#f00',
            'circle-radius': 2,
            'circle-stroke-width': 0,
            'circle-stroke-color': '#fff'
        }
      });


      map_addcluster('hotspotth','https://tunchz.github.io/ISOC/json/hotspotth.geojson','none');  

      map_addcluster('well','https://tunchz.github.io/ISOC/json/well_small.geojson','none');  


      config = {
        options: {
          collapsed: true
        },
        layers: [




          {
            id: "hotspotth-cluster-count",
            hidden: true,
            group: "ไฟ",
            parent: "hotspotth-cluster",
            directory: "สิ่งแวดล้อม"
          },
          {
            id: "hotspotth-unclustered-point",
            hidden: true,
            group: "ไฟ",
            parent: "hotspotth-cluster",
            directory: "สิ่งแวดล้อม"
          },
          {
            name: "จุดความร้อน (Cluster)",
            id: "hotspotth-cluster",
            hidden: false,
            group: "ไฟ",
            children: true,
            directory: "สิ่งแวดล้อม",
            legend: "<icon class='icon-circle' style='color:#51bbd6;'></icon> 1-100 จุด<br><icon class='icon-circle' style='color:#f1f075;'></icon> 101-750 จุด<br><icon class='icon-circle' style='color:#f28cb1;'></icon> มากกว่า 750 จุด"            
          },
          {
            // name: "จุดความร้อน (จุด)",
            hidden: false,
            id: "จุดความร้อน (จุด)",
            group: "ไฟ",
            directory: "สิ่งแวดล้อม"
          },


          {
            id: "well-cluster-count",
            hidden: true,
            group: "น้ำ",
            parent: "well-cluster",
            directory: "สิ่งแวดล้อม"
          },
          {
            id: "well-unclustered-point",
            hidden: true,
            group: "น้ำ",
            parent: "well-cluster",
            directory: "สิ่งแวดล้อม"
          },
          {
            name: "บ่อบาดาล (Cluster)",
            id: "well-cluster",
            hidden: false,
            group: "น้ำ",
            children: true,
            directory: "สิ่งแวดล้อม",
            legend: "<icon class='icon-circle' style='color:#51bbd6;'></icon> 1-100 บ่อ<br><icon class='icon-circle' style='color:#f1f075;'></icon> 101-750 บ่อ<br><icon class='icon-circle' style='color:#f28cb1;'></icon> มากกว่า 750 บ่อ",            
            metadata: {
              filterSchema: {
                "ประเภทบ่อ": {
                  type: "select",
                  options: ["-- ทั้งหมด --", "บ่ออุปโภค-บริโภค","บ่อเกษตร"]
                },
                "ชื่อที่ตั้ง": {
                  type: "string"
                },                
                // "ภาค": {
                //   type: "select",
                //   options: ["", "เหนือ","ตะวันออกเฉียงเหนือ", "กลาง","ตะวันออก", "ใต้"]
                // },                
                "จังหวัด": {
                  type: "string"
                },
                "อำเภอ": {
                  type: "string"
                },
                "ตำบล": {
                  type: "string"
                }
              }
            }         
          },
          {
            //name: "บ่อบาดาล (จุด)",
            hidden: false,
            id: "บ่อบาดาล (จุด)",
            group: "น้ำ",
            directory: "สิ่งแวดล้อม",
            metadata: {
              filterSchema: {
                "ประเภทบ่อ": {
                  type: "select",
                  options: ["-- ทั้งหมด --", "บ่ออุปโภค-บริโภค","บ่อเกษตร"]
                },
                "ชื่อที่ตั้ง": {
                  type: "string"
                },                
                // "ภาค": {
                //   type: "select",
                //   options: ["", "เหนือ","ตะวันออกเฉียงเหนือ", "กลาง","ตะวันออก", "ใต้"]
                // },                
                "จังหวัด": {
                  type: "string"
                },
                "อำเภอ": {
                  type: "string"
                },
                "ตำบล": {
                  type: "string"
                }
              }
            }             
          },
        {
            // name: "แหล่งน้ำขนาดใหญ่",
            id: "แหล่งน้ำขนาดใหญ่",
            hidden: false,
            group: "น้ำ",
            directory: "สิ่งแวดล้อม",            
            metadata: {
              filterSchema: {
                "หน่วยงาน": {
                  type: "select",
                  options: ["-- ทั้งหมด --", "แหล่งน้ำธรรมชาติขนาดใหญ่","กรมชลประทาน","การไฟฟ้าฝ่ายผลิตแห่งประเทศไทย"]
                },
                "ชื่อแหล่งน้ำ": {
                  type: "string"
                },                
                // "ภาค": {
                //   type: "select",
                //   options: ["", "เหนือ","ตะวันออกเฉียงเหนือ", "กลาง","ตะวันออก", "ใต้"]
                // },                
                "จังหวัด": {
                  type: "string"
                },
                "อำเภอ": {
                  type: "string"
                },
                "ตำบล": {
                  type: "string"
                }
              }
            }       
          },

          {
            // name: "แหล่งน้ำขนาดกลาง",
            id: "แหล่งน้ำขนาดกลาง",
            hidden: false,
            group: "น้ำ",
            directory: "สิ่งแวดล้อม",            
            metadata: {
              filterSchema: {
                "หน่วยงาน": {
                  type: "select",
                  options: ["-- ทั้งหมด --", "แหล่งน้ำธรรมชาติขนาดกลาง","กรมชลประทาน","การไฟฟ้าฝ่ายผลิตแห่งประเทศ","กรมทรัพยากรน้ำ","กรมเจ้าท่า","กรมประมง","กรมพัฒนาพลังงานทดแทนและอนุ","อปท."]
                },
                "ชื่อแหล่งน้ำ": {
                  type: "string"
                },                
                // "ภาค": {
                //   type: "select",
                //   options: ["", "เหนือ","ตะวันออกเฉียงเหนือ", "กลาง","ตะวันออก", "ใต้"]
                // },                
                "จังหวัด": {
                  type: "string"
                },
                "อำเภอ": {
                  type: "string"
                },
                "ตำบล": {
                  type: "string"
                }
              }
            }       
          },

          {
            // name: "พื้นที่เสี่ยงภัยแล้ง",
            id: "พื้นที่เสี่ยงภัยแล้ง",
            hidden: false,
            group: "ด้านน้ำ",
            //children: true,
            directory: "ผลการวิเคราะห์",
            legend: "<icon class='icon-stop' style='color:rgba(227,116,0,0.7);'></icon> เสี่ยงปานกลาง<br><icon class='icon-stop' style='color:rgba(197,34,31,0.7);'></icon> เสี่ยงมาก",            
            metadata: {
              filterSchema: {
                "ระดับความเสี่ยง": {
                  type: "select",
                  options: ["-- ทั้งหมด --", "พื้นที่ที่เสี่ยงต่อการเกิดภัยแล้งปานกลาง","พื้นที่ที่เสี่ยงต่อการเกิดภัยแล้งสูง"]
                },
                "ภาค": {
                  type: "select",
                  options: ["-- ทั้งหมด --", "เหนือ","ตะวันออกเฉียงเหนือ", "กลาง","ตะวันออก", "ใต้"]
                },                
                "จังหวัด": {
                  type: "string"
                },
                "อำเภอ": {
                  type: "string"
                },
                "ตำบล": {
                  type: "string"
                }
              }
            }            
          },


          {
            // name: "พื้นที่เสี่ยงน้ำท่วม",
            id: "พื้นที่เสี่ยงน้ำท่วม",
            hidden: false,
            group: "ด้านน้ำ",
            //children: true,
            directory: "ผลการวิเคราะห์",
            legend: "<icon class='icon-stop' style='color:rgba(100,100,255,0.7);'></icon> เสี่ยงปานกลาง<br><icon class='icon-stop' style='color:rgba(0,0,255,0.7);'></icon> เสี่ยงมาก",            
            metadata: {
              filterSchema: {
                "ระดับความเสี่ยง": {
                  type: "select",
                  options: ["-- ทั้งหมด --", "พื้นที่เสี่ยงต่อการถูกน้ำท่วมเสียหายซ้ำซากปานกลาง","พื้นที่เสี่ยงต่อการถูกน้ำท่วมเสียหายซ้ำซากสูง"]
                },
                "ภาค": {
                  type: "select",
                  options: ["-- ทั้งหมด --", "เหนือ","ตะวันออกเฉียงเหนือ", "กลาง","ตะวันออก", "ใต้"]
                },                
                "จังหวัด": {
                  type: "string"
                },
                "อำเภอ": {
                  type: "string"
                },
                "ตำบล": {
                  type: "string"
                }
              }
            }
          },

          {
            // name: "",
            id: "แม่น้ำสายหลัก",
            hidden: false,
            group: "แม่น้ำ",
            directory: "การบริหาร",            
            metadata: {
              filterSchema: {
                "ชื่อแม่น้ำ": {
                  type: "string"
                }
              }
            }       
          },
          {
            id: "เขตพื้นที่ลุ่มน้ำย่อย",
            hidden: false,
            group: "เขตลุ่มน้ำ",
            directory: "การบริหาร",
            children:true,
            metadata: {
              filterSchema: {
                "ลุ่มน้ำหลัก": {
                  type: "string"
                },
                "ลุ่มน้ำย่อย": {
                  type: "string"
                }
              }
            }
          },
          {
            id: "พื้นที่ลุ่มน้ำย่อย",
            hidden: true,
            group: "เขตลุ่มน้ำ",
            directory: "การบริหาร",
            parent: "เขตพื้นที่ลุ่มน้ำย่อย"
          },
          {
            id: "เขตพื้นที่ลุ่มน้ำหลัก",
            hidden: false,
            group: "เขตลุ่มน้ำ",
            directory: "การบริหาร",
            children:true,
            metadata: {
              filterSchema: {
                "ลุ่มน้ำหลัก": {
                  type: "string"
                }
              }
            }
          },
          {
            id: "พื้นที่ลุ่มน้ำหลัก",
            hidden: true,
            group: "เขตลุ่มน้ำ",
            directory: "การบริหาร",
            parent: "เขตพื้นที่ลุ่มน้ำหลัก"
          },
          {
            id: "เขตตำบล",
            hidden: false,
            group: "เขตการปกครอง",
            directory: "การบริหาร",
            children:true,
            metadata: {
              filterSchema: {
                "จังหวัด": {
                  type: "string"
                },
                "อำเภอ": {
                  type: "string"
                },
                "ตำบล": {
                  type: "string"
                }
              }
            }
          },
          {
            id: "พื้นที่ตำบล",
            hidden: true,
            group: "เขตการปกครอง",
            directory: "การบริหาร",
            parent: "เขตตำบล"

            // metadata: {
            //   filterSchema: {
            //     "จังหวัด": {
            //       type: "string"
            //     }
            //     // "scalerank": {
            //     //   "type": "number"
            //     // }
            //   }
            // }
          },            
          {
            id: "เขตอำเภอ",
            hidden: false,
            group: "เขตการปกครอง",
            directory: "การบริหาร",
            children:true,
            metadata: {
              filterSchema: {
                "จังหวัด": {
                  type: "string"
                },
                "อำเภอ": {
                  type: "string"
                }
              }
            }
          },
          {
            id: "พื้นที่อำเภอ",
            hidden: true,
            group: "เขตการปกครอง",
            directory: "การบริหาร",
            parent: "เขตอำเภอ"

            // metadata: {
            //   filterSchema: {
            //     "จังหวัด": {
            //       type: "string"
            //     }
            //     // "scalerank": {
            //     //   "type": "number"
            //     // }
            //   }
            // }
          },          
          {
            // name: "เขตจังหวัด",
            id: "เขตจังหวัด",
            hidden: false,
            group: "เขตการปกครอง",
            directory: "การบริหาร",
            children:true,
            metadata: {
              filterSchema: {
                "จังหวัด": {
                  type: "string"
                }
                // "scalerank": {
                //   "type": "number"
                // }
              }
            }
          },
          {
            id: "พื้นที่จังหวัด",
            hidden: true,
            group: "เขตการปกครอง",
            directory: "การบริหาร",
            parent: "เขตจังหวัด",

            metadata: {
              filterSchema: {
                "จังหวัด": {
                  type: "string"
                }
                // "scalerank": {
                //   "type": "number"
                // }
              }
            }
          },


          // {
          //   id: "การคาดการณ์",
          //   hidden: false,
          //   group: "ข้อมูลปฏิบัติการน้ำ",
          //   directory: "การแจ้งเตือน",
          //   children:true
          // },

          // {
          //   id: "สถานการณ์น้ำ",
          //   hidden: false,
          //   group: "ข้อมูลปฏิบัติการน้ำ",
          //   directory: "การแจ้งเตือน",
          //   children:true
          // },

          //-------------------Thaiwater Start--------------------

// Object.values(['21-1','21-6','22-1','22-5','23-3','24-6','24-7'])


          {
            id: symbol[264].layername,
            hidden: false,
            group: "สถานการณ์น้ำ",
            directory: "การแจ้งเตือน",
            children:true,
          },
          {
            id: symbol[264].layername+'_label',
            hidden: true,
            group: "สถานการณ์น้ำ",
            parent: symbol[264].layername,
            directory: "การแจ้งเตือน"
          },
          {
            id: symbol[264].layername+'_bound',
            hidden: true,
            group: "สถานการณ์น้ำ",
            parent: symbol[264].layername,
            directory: "การแจ้งเตือน"
          },

          {
            id: symbol[265].layername,
            hidden: true,
            group: "สถานการณ์น้ำ",
            parent: symbol[264].layername,
            directory: "การแจ้งเตือน"
          },
          {
            id: symbol[265].layername+'_label',
            hidden: true,
            group: "สถานการณ์น้ำ",
            parent: symbol[264].layername,
            directory: "การแจ้งเตือน"
          },
          {
            id: symbol[265].layername+'_bound',
            hidden: true,
            group: "สถานการณ์น้ำ",
            parent: symbol[264].layername,
            directory: "การแจ้งเตือน"
          },


          {
            id: symbol[246].layername,
            hidden: false,
            group: "สถานการณ์น้ำ",
            directory: "การแจ้งเตือน",
            children:true,
          },
          {
            id: symbol[246].layername+'_label',
            hidden: true,
            group: "สถานการณ์น้ำ",
            parent: symbol[246].layername,
            directory: "การแจ้งเตือน"
          },
          {
            id: symbol[247].layername,
            hidden: true,
            group: "สถานการณ์น้ำ",
            parent: symbol[246].layername,
            directory: "การแจ้งเตือน"
          },
          {
            id: symbol[247].layername+'_label',
            hidden: true,
            group: "สถานการณ์น้ำ",
            parent: symbol[246].layername,
            directory: "การแจ้งเตือน"
          },



          {
            id: symbol[233].layername,
            hidden: false,
            group: "สถานการณ์น้ำ",
            directory: "การแจ้งเตือน",
            children:true,
          },
          {
            id: symbol[233].layername+'_label',
            hidden: true,
            group: "สถานการณ์น้ำ",
            parent: symbol[233].layername,
            directory: "การแจ้งเตือน"
          },



          {
            id: symbol[221].layername,
            hidden: false,
            group: "สถานการณ์น้ำ",
            directory: "การแจ้งเตือน",
            children:true,
          },
          {
            id: symbol[221].layername+'_label',
            hidden: true,
            group: "สถานการณ์น้ำ",
            parent: symbol[221].layername,
            directory: "การแจ้งเตือน"
          },
          {
            id: symbol[225].layername,
            hidden: true,
            group: "สถานการณ์น้ำ",
            parent: symbol[221].layername,
            directory: "การแจ้งเตือน"
          },
          {
            id: symbol[225].layername+'_label',
            hidden: true,
            group: "สถานการณ์น้ำ",
            parent: symbol[221].layername,
            directory: "การแจ้งเตือน"
          },




          {
            id: symbol[211].layername,
            hidden: false,
            group: "สถานการณ์น้ำ",
            directory: "การแจ้งเตือน",
            children:true,
          },
          {
            id: symbol[211].layername+'_label',
            hidden: true,
            group: "สถานการณ์น้ำ",
            parent: symbol[211].layername,
            directory: "การแจ้งเตือน"
          },
          {
            id: symbol[216].layername,
            hidden: true,
            group: "สถานการณ์น้ำ",
            parent: symbol[211].layername,
            directory: "การแจ้งเตือน"
          },
          {
            id: symbol[216].layername+'_label',
            hidden: true,
            group: "สถานการณ์น้ำ",
            parent: symbol[211].layername,
            directory: "การแจ้งเตือน"
          },


          //-------------------Thaiwater End --------------------

          {
            id: "แจ้งเตือนวางแผน",
            hidden: false,
            group: "ข้อมูลปฏิบัติการ",
            directory: "การแจ้งเตือน",
            children:true
          },

          {
            id: "แจ้งเตือนภัย",
            hidden: false,
            group: "ข้อมูลปฏิบัติการ",
            directory: "การแจ้งเตือน",
            children:true
          }










        ]
      }

      var l=[1,2,3,4,5,6,7,8,9,91,94,95];

      l.forEach(function (item, index) {
        //console.log(item);

        if (item < 90) { 
          config.layers.push({
              id: symbol[item].layername,
              hidden: true,
              group: "ข้อมูลปฏิบัติการ",
              parent: "แจ้งเตือนภัย",
              directory: "การแจ้งเตือน"
            });
          config.layers.push({
              id: symbol[item].layername+'_label',
              hidden: true,
              group: "ข้อมูลปฏิบัติการ",
              parent: "แจ้งเตือนภัย",
              directory: "การแจ้งเตือน"
            });
        } else {
          config.layers.push({
              id: symbol[item].layername,
              hidden: true,
              group: "ข้อมูลปฏิบัติการ",
              parent: "แจ้งเตือนวางแผน",
              directory: "การแจ้งเตือน"
            });
          config.layers.push({
              id: symbol[item].layername+'_label',
              hidden: true,
              group: "ข้อมูลปฏิบัติการ",
              parent: "แจ้งเตือนวางแผน",
              directory: "การแจ้งเตือน"
            });
          config.layers.push({
              id: symbol[item].layername+'_bound',
              hidden: true,
              group: "ข้อมูลปฏิบัติการ",
              parent: "แจ้งเตือนวางแผน",
              directory: "การแจ้งเตือน"
            });
        }
      });




      // Object.values(['21-1','21-6','22-1','22-5','23-3','24-6','24-7']).forEach(function (item) {
      //   //console.log(item);
      //     config.layers.push({
      //         id: symbol[item].layername,
      //         hidden: true,
      //         group: "ข้อมูลปฏิบัติการน้ำ",
      //         parent: "สถานการณ์น้ำ",
      //         directory: "การแจ้งเตือน"
      //       });
      //     config.layers.push({
      //         id: symbol[item].layername+'_label',
      //         hidden: true,
      //         group: "ข้อมูลปฏิบัติการน้ำ",
      //         parent: "สถานการณ์น้ำ",
      //         directory: "การแจ้งเตือน"
      //       });
      // });

      // Object.values(['26-4','26-5']).forEach(function (item) {
      //   //console.log(item);
      //     config.layers.push({
      //         id: symbol[item].layername,
      //         hidden: true,
      //         group: "ข้อมูลปฏิบัติการน้ำ",
      //         parent: "การคาดการณ์",
      //         directory: "การแจ้งเตือน"
      //       });
      //     config.layers.push({
      //         id: symbol[item].layername+'_label',
      //         hidden: true,
      //         group: "ข้อมูลปฏิบัติการน้ำ",
      //         parent: "การคาดการณ์",
      //         directory: "การแจ้งเตือน"
      //       });
      //     config.layers.push({
      //         id: symbol[item].layername+'_bound',
      //         hidden: true,
      //         group: "ข้อมูลปฏิบัติการน้ำ",
      //         parent: "การคาดการณ์",
      //         directory: "การแจ้งเตือน"
      //       });
      // });





      setTimeout(function (){
        //console.log(run);
        if (run > 0) {
        //   map.setStyle('mapbox://styles/mapbox/satellite-v9');
        //   run++;
        // } else {
          var removebutton = document.getElementsByClassName('mgl-layerControl');
          for (i=0;i<removebutton.length;i++) {removebutton[i].parentElement.removeChild(removebutton[i]);}   
          map.addControl(new layerControlGrouped(config), "top-left");
          run++;          
        }

      }, 3000);



    });

  /* Inspect */
  // var inspect = new InspectControl();
  // map.addControl(inspect, 'top-left');

  /* Ruler */
  // map.addControl(new RulerControl(), 'top-left');


  /* Maptools */
  var maptools = new MaptoolsControl();
  map.addControl(maptools, 'top-left');

  // /* Compass */
  // map.addControl(new CompassControl(), 'top-left');  


    /* testing */

    // map.on('ruler.on', function () {
    //   //if (inspect.isInspecting) inspect.inspectingOff();
    //   console.log("ruler on");
    //   disinteract++;
    // });
    // map.on('ruler.off', function () {
    //   console.log("ruler off");
    //   disinteract--;
    // });
    map.on('inspect.on', function () {
      //if (maptools.ruler.isMeasuring) maptools.ruler.measuringOff();
      console.log("inspect on");
      disinteract++;
    });
    map.on('inspect.off', function () {
      console.log("inspect off");
      disinteract--;
    });
    map.on('maptools.on', function () {
      console.log("maptools on");
      disinteract++;
    });
    map.on('maptools.off', function () {
      console.log("maptools off");
      disinteract--;
    });

    // map.on('draw.modechange', function () {
    //   console.log("draw modechange");
    // });


    //load_map_layers();

    /*End Blank Map*/
  </script>



</html>
