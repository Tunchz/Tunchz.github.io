/*! For license information please see 2.af25912a.chunk.js.LICENSE.txt */
(this.webpackJsonpmap_maptoolscontrol=this.webpackJsonpmap_maptoolscontrol||[]).push([[2],[function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"o",(function(){return i})),n.d(t,"i",(function(){return o})),n.d(t,"p",(function(){return a})),n.d(t,"k",(function(){return s})),n.d(t,"n",(function(){return u})),n.d(t,"j",(function(){return l})),n.d(t,"q",(function(){return c})),n.d(t,"m",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"l",(function(){return p})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return g})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return y})),n.d(t,"f",(function(){return v})),n.d(t,"e",(function(){return _}));var r={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},i={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},o={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},a={POLYGON:"polygon",LINE:"line_string",POINT:"point"},s={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},u={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},l={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},c={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},h={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},f={ACTIVE:"true",INACTIVE:"false"},p=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],d=-90,g=-85,m=90,y=85,v=-270,_=270},function(e,t,n){"use strict";e.exports=n(99)},function(e,t,n){var r,i,o;i="undefined"!==typeof window?window:this,o=function(n,i){var o=[],a=o.slice,s=o.concat,u=o.push,l=o.indexOf,c={},h=c.toString,f=c.hasOwnProperty,p={},d=n.document,g="2.1.1",m=function e(t,n){return new e.fn.init(t,n)},y=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,_=/-([\da-z])/gi,b=function(e,t){return t.toUpperCase()};function x(e){var t=e.length,n=m.type(e);return"function"!==n&&!m.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===n||0===t||"number"===typeof t&&t>0&&t-1 in e)}m.fn=m.prototype={jquery:g,constructor:m,selector:"",length:0,toArray:function(){return a.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:a.call(this)},pushStack:function(e){var t=m.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return m.each(this,e,t)},map:function(e){return this.pushStack(m.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:u,sort:o.sort,splice:o.splice},m.extend=m.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"===typeof a&&(l=a,a=arguments[s]||{},s++),"object"===typeof a||m.isFunction(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(m.isPlainObject(r)||(i=m.isArray(r)))?(i?(i=!1,o=n&&m.isArray(n)?n:[]):o=n&&m.isPlainObject(n)?n:{},a[t]=m.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},m.extend({expando:"jQuery"+(g+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===m.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!m.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"===m.type(e)&&!e.nodeType&&!m.isWindow(e)&&!(e.constructor&&!f.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?c[h.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=m.trim(e))&&(1===e.indexOf("use strict")?((t=d.createElement("script")).text=e,d.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(v,"ms-").replace(_,b)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r=0,i=e.length,o=x(e);if(n){if(o)for(;r<i&&!1!==t.apply(e[r],n);r++);else for(r in e)if(!1===t.apply(e[r],n))break}else if(o)for(;r<i&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(y,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(x(Object(e))?m.merge(n,"string"===typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:l.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i=0,o=e.length,a=[];if(x(e))for(;i<o;i++)null!=(r=t(e[i],i,n))&&a.push(r);else for(i in e)null!=(r=t(e[i],i,n))&&a.push(r);return s.apply([],a)},guid:1,proxy:function(e,t){var n,r,i;if("string"===typeof t&&(n=e[t],t=e,e=n),m.isFunction(e))return r=a.call(arguments,2),i=function(){return e.apply(t||this,r.concat(a.call(arguments)))},i.guid=e.guid=e.guid||m.guid++,i},now:Date.now,support:p}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){c["[object "+t+"]"]=t.toLowerCase()}));var w=function(e){var t,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,_,b="sizzle"+-new Date,x=e.document,w=0,E=0,S=oe(),T=oe(),k=oe(),C=function(e,t){return e===t&&(h=!0),0},I="undefined",A=1<<31,M={}.hasOwnProperty,L=[],N=L.pop,P=L.push,O=L.push,R=L.slice,D=L.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",z="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",U=B.replace("w","w#"),V="\\[[\\x20\\t\\r\\n\\f]*("+B+")(?:"+z+"*([*^$|!~]?=)"+z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+z+"*\\]",j=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",q=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),G=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),$=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),H=new RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),X=new RegExp(j),W=new RegExp("^"+U+"$"),Y={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Z=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ne=new RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),re=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{O.apply(L=R.call(x.childNodes),x.childNodes),L[x.childNodes.length].nodeType}catch(xe){O={apply:L.length?function(e,t){P.apply(e,R.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ie(e,t,r,i){var o,s,l,c,h,d,y,v,w,E;if((t?t.ownerDocument||t:x)!==p&&f(t),r=r||[],!e||"string"!==typeof e)return r;if(1!==(c=(t=t||p).nodeType)&&9!==c)return[];if(g&&!i){if(o=Q.exec(e))if(l=o[1]){if(9===c){if(!(s=t.getElementById(l))||!s.parentNode)return r;if(s.id===l)return r.push(s),r}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(l))&&_(t,s)&&s.id===l)return r.push(s),r}else{if(o[2])return O.apply(r,t.getElementsByTagName(e)),r;if((l=o[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(r,t.getElementsByClassName(l)),r}if(n.qsa&&(!m||!m.test(e))){if(v=y=b,w=t,E=9===c&&e,1===c&&"object"!==t.nodeName.toLowerCase()){for(d=a(e),(y=t.getAttribute("id"))?v=y.replace(te,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",h=d.length;h--;)d[h]=v+ge(d[h]);w=ee.test(e)&&pe(t.parentNode)||t,E=d.join(",")}if(E)try{return O.apply(r,w.querySelectorAll(E)),r}catch(S){}finally{y||t.removeAttribute("id")}}}return u(e.replace(q,"$1"),t,r,i)}function oe(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ae(e){return e[b]=!0,e}function se(e){var t=p.createElement("div");try{return!!e(t)}catch(xe){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var n=e.split("|"),i=e.length;i--;)r.attrHandle[n[i]]=t}function le(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ce(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function fe(e){return ae((function(t){return t=+t,ae((function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function pe(e){return e&&typeof e.getElementsByTagName!==I&&e}for(t in n=ie.support={},o=ie.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},f=ie.setDocument=function(e){var t,i=e?e.ownerDocument||e:x,a=i.defaultView;return i!==p&&9===i.nodeType&&i.documentElement?(p=i,d=i.documentElement,g=!o(i),a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",(function(){f()}),!1):a.attachEvent&&a.attachEvent("onunload",(function(){f()}))),n.attributes=se((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=se((function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=K.test(i.getElementsByClassName)&&se((function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length})),n.getById=se((function(e){return d.appendChild(e).id=b,!i.getElementsByName||!i.getElementsByName(b).length})),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!==I&&g){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(ne,re);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(ne,re);return function(e){var n=typeof e.getAttributeNode!==I&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==I)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==I&&g)return t.getElementsByClassName(e)},y=[],m=[],(n.qsa=K.test(i.querySelectorAll))&&(se((function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&m.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+F+")"),e.querySelectorAll(":checked").length||m.push(":checked")})),se((function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=K.test(v=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&se((function(e){n.disconnectedMatch=v.call(e,"div"),v.call(e,"[s!='']:x"),y.push("!=",j)})),m=m.length&&new RegExp(m.join("|")),y=y.length&&new RegExp(y.join("|")),t=K.test(d.compareDocumentPosition),_=t||K.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},C=t?function(e,t){if(e===t)return h=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===i||e.ownerDocument===x&&_(x,e)?-1:t===i||t.ownerDocument===x&&_(x,t)?1:c?D.call(c,e)-D.call(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return h=!0,0;var n,r=0,o=e.parentNode,a=t.parentNode,s=[e],u=[t];if(!o||!a)return e===i?-1:t===i?1:o?-1:a?1:c?D.call(c,e)-D.call(c,t):0;if(o===a)return le(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;s[r]===u[r];)r++;return r?le(s[r],u[r]):s[r]===x?-1:u[r]===x?1:0},i):p},ie.matches=function(e,t){return ie(e,null,null,t)},ie.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&f(e),t=t.replace(H,"='$1']"),n.matchesSelector&&g&&(!y||!y.test(t))&&(!m||!m.test(t)))try{var r=v.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(xe){}return ie(t,p,null,[e]).length>0},ie.contains=function(e,t){return(e.ownerDocument||e)!==p&&f(e),_(e,t)},ie.attr=function(e,t){(e.ownerDocument||e)!==p&&f(e);var i=r.attrHandle[t.toLowerCase()],o=i&&M.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ie.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ie.uniqueSort=function(e){var t,r=[],i=0,o=0;if(h=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(C),h){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return c=null,e},i=ie.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"===typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=ie.selectors={cacheLength:50,createPseudo:ae,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,re),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ie.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ie.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+z+"|$)"))&&S(e,(function(e){return t.test("string"===typeof e.className&&e.className||typeof e.getAttribute!==I&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=ie.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,h,f,p,d,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){for(;g;){for(h=t;h=h[g];)if(s?h.nodeName.toLowerCase()===y:1===h.nodeType)return!1;d=g="only"===e&&!d&&"nextSibling"}return!0}if(d=[a?m.firstChild:m.lastChild],a&&v){for(p=(l=(c=m[b]||(m[b]={}))[e]||[])[0]===w&&l[1],f=l[0]===w&&l[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(f=p=0)||d.pop();)if(1===h.nodeType&&++f&&h===t){c[e]=[w,p,f];break}}else if(v&&(l=(t[b]||(t[b]={}))[e])&&l[0]===w)f=l[1];else for(;(h=++p&&h&&h[g]||(f=p=0)||d.pop())&&((s?h.nodeName.toLowerCase()!==y:1!==h.nodeType)||!++f||(v&&((h[b]||(h[b]={}))[e]=[w,f]),h!==t)););return(f-=i)===r||f%r===0&&f/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ae((function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=D.call(e,o[a])]=!(n[r]=o[a])})):function(e){return i(e,0,n)}):i}},pseudos:{not:ae((function(e){var t=[],n=[],r=s(e.replace(q,"$1"));return r[b]?ae((function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}})),has:ae((function(e){return function(t){return ie(e,t).length>0}})),contains:ae((function(e){return function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}})),lang:ae((function(e){return W.test(e||"")||ie.error("unsupported lang: "+e),e=e.replace(ne,re).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe((function(){return[0]})),last:fe((function(e,t){return[t-1]})),eq:fe((function(e,t,n){return[n<0?n+t:n]})),even:fe((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:fe((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:fe((function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e})),gt:fe((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ce(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function de(){}function ge(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function me(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=E++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,u,l=[w,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if((s=(u=t[b]||(t[b]={}))[r])&&s[0]===w&&s[1]===o)return l[2]=s[2];if(u[r]=l,l[2]=e(t,n,a))return!0}}}function ye(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function ve(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function _e(e,t,n,r,i,o){return r&&!r[b]&&(r=_e(r)),i&&!i[b]&&(i=_e(i,o)),ae((function(o,a,s,u){var l,c,h,f=[],p=[],d=a.length,g=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)ie(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:ve(g,f,e,s,u),y=n?i||(o?e:d||r)?[]:a:m;if(n&&n(m,y,s,u),r)for(l=ve(y,p),r(l,[],s,u),c=l.length;c--;)(h=l[c])&&(y[p[c]]=!(m[p[c]]=h));if(o){if(i||e){if(i){for(l=[],c=y.length;c--;)(h=y[c])&&l.push(m[c]=h);i(null,y=[],l,u)}for(c=y.length;c--;)(h=y[c])&&(l=i?D.call(o,h):f[c])>-1&&(o[l]=!(a[l]=h))}}else y=ve(y===a?y.splice(d,y.length):y),i?i(null,a,y,u):O.apply(a,y)}))}function be(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=me((function(e){return e===t}),s,!0),h=me((function(e){return D.call(t,e)>-1}),s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):h(e,n,r))}];u<o;u++)if(n=r.relative[e[u].type])f=[me(ye(f),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return _e(u>1&&ye(f),u>1&&ge(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(q,"$1"),n,u<i&&be(e.slice(u,i)),i<o&&be(e=e.slice(i)),i<o&&ge(e))}f.push(n)}return ye(f)}return de.prototype=r.filters=r.pseudos,r.setFilters=new de,a=ie.tokenize=function(e,t){var n,i,o,a,s,u,l,c=T[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=r.preFilter;s;){for(a in n&&!(i=G.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=$.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(q," ")}),s=s.slice(n.length)),r.filter)!(i=Y[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ie.error(e):T(e,u).slice(0)},s=ie.compile=function(e,t){var n,i=[],o=[],s=k[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=be(t[n]))[b]?i.push(s):o.push(s);(s=k(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var h,f,d,g=0,m="0",y=o&&[],v=[],_=l,b=o||i&&r.find.TAG("*",c),x=w+=null==_?1:Math.random()||.1,E=b.length;for(c&&(l=a!==p&&a);m!==E&&null!=(h=b[m]);m++){if(i&&h){for(f=0;d=e[f++];)if(d(h,a,s)){u.push(h);break}c&&(w=x)}n&&((h=!d&&h)&&g--,o&&y.push(h))}if(g+=m,n&&m!==g){for(f=0;d=t[f++];)d(y,v,a,s);if(o){if(g>0)for(;m--;)y[m]||v[m]||(v[m]=N.call(u));v=ve(v)}O.apply(u,v),c&&!o&&v.length>0&&g+t.length>1&&ie.uniqueSort(u)}return c&&(w=x,l=_),y};return n?ae(o):o}(o,i))).selector=e}return s},u=ie.select=function(e,t,i,o){var u,l,c,h,f,p="function"===typeof e&&e,d=!o&&a(e=p.selector||e);if(i=i||[],1===d.length){if((l=d[0]=d[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&n.getById&&9===t.nodeType&&g&&r.relative[l[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(ne,re),t)||[])[0]))return i;p&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(u=Y.needsContext.test(e)?0:l.length;u--&&(c=l[u],!r.relative[h=c.type]);)if((f=r.find[h])&&(o=f(c.matches[0].replace(ne,re),ee.test(l[0].type)&&pe(t.parentNode)||t))){if(l.splice(u,1),!(e=o.length&&ge(l)))return O.apply(i,o),i;break}}return(p||s(e,d))(o,t,!g,i,ee.test(e)&&pe(t.parentNode)||t),i},n.sortStable=b.split("").sort(C).join("")===b,n.detectDuplicates=!!h,f(),n.sortDetached=se((function(e){return 1&e.compareDocumentPosition(p.createElement("div"))})),se((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ue("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&se((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ue("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),se((function(e){return null==e.getAttribute("disabled")}))||ue(F,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),ie}(n);m.find=w,(m.expr=w.selectors)[":"]=m.expr.pseudos,m.unique=w.uniqueSort,m.text=w.getText,m.isXMLDoc=w.isXML,m.contains=w.contains;var E=m.expr.match.needsContext,S=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,T=/^.[^:#\[\.,]*$/;function k(e,t,n){if(m.isFunction(t))return m.grep(e,(function(e,r){return!!t.call(e,r,e)!==n}));if(t.nodeType)return m.grep(e,(function(e){return e===t!==n}));if("string"===typeof t){if(T.test(t))return m.filter(t,e,n);t=m.filter(t,e)}return m.grep(e,(function(e){return l.call(t,e)>=0!==n}))}m.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?m.find.matchesSelector(r,e)?[r]:[]:m.find.matches(e,m.grep(t,(function(e){return 1===e.nodeType})))},m.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!==typeof e)return this.pushStack(m(e).filter((function(){for(t=0;t<n;t++)if(m.contains(i[t],this))return!0})));for(t=0;t<n;t++)m.find(e,i[t],r);return(r=this.pushStack(n>1?m.unique(r):r)).selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(k(this,e||[],!1))},not:function(e){return this.pushStack(k(this,e||[],!0))},is:function(e){return!!k(this,"string"===typeof e&&E.test(e)?m(e):e||[],!1).length}});var C,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(e,t){var n,r;if(!e)return this;if("string"===typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:I.exec(e))||!n[1]&&t)return!t||t.jquery?(t||C).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof m?t[0]:t,m.merge(this,m.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:d,!0)),S.test(n[1])&&m.isPlainObject(t))for(n in t)m.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(r=d.getElementById(n[2]))&&r.parentNode&&(this.length=1,this[0]=r),this.context=d,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):m.isFunction(e)?"undefined"!==typeof C.ready?C.ready(e):e(m):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),m.makeArray(e,this))}).prototype=m.fn,C=m(d);var A=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function L(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}m.extend({dir:function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&m(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),m.fn.extend({has:function(e){var t=m(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(m.contains(this,t[e]))return!0}))},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=E.test(e)||"string"!==typeof e?m(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&m.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?m.unique(o):o)},index:function(e){return e?"string"===typeof e?l.call(m(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(m.unique(m.merge(this.get(),m(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),m.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return m.dir(e,"parentNode")},parentsUntil:function(e,t,n){return m.dir(e,"parentNode",n)},next:function(e){return L(e,"nextSibling")},prev:function(e){return L(e,"previousSibling")},nextAll:function(e){return m.dir(e,"nextSibling")},prevAll:function(e){return m.dir(e,"previousSibling")},nextUntil:function(e,t,n){return m.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return m.dir(e,"previousSibling",n)},siblings:function(e){return m.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return m.sibling(e.firstChild)},contents:function(e){return e.contentDocument||m.merge([],e.childNodes)}},(function(e,t){m.fn[e]=function(n,r){var i=m.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"===typeof r&&(i=m.filter(r,i)),this.length>1&&(M[e]||m.unique(i),A.test(e)&&i.reverse()),this.pushStack(i)}}));var N,P=/\S+/g,O={};function R(){d.removeEventListener("DOMContentLoaded",R,!1),n.removeEventListener("load",R,!1),m.ready()}m.Callbacks=function(e){e="string"===typeof e?O[e]||function(e){var t=O[e]={};return m.each(e.match(P)||[],(function(e,n){t[n]=!0})),t}(e):m.extend({},e);var t,n,r,i,o,a,s=[],u=!e.once&&[],l=function l(h){for(t=e.memory&&h,n=!0,a=i||0,i=0,o=s.length,r=!0;s&&a<o;a++)if(!1===s[a].apply(h[0],h[1])&&e.stopOnFalse){t=!1;break}r=!1,s&&(u?u.length&&l(u.shift()):t?s=[]:c.disable())},c={add:function(){if(s){var n=s.length;!function t(n){m.each(n,(function(n,r){var i=m.type(r);"function"===i?e.unique&&c.has(r)||s.push(r):r&&r.length&&"string"!==i&&t(r)}))}(arguments),r?o=s.length:t&&(i=n,l(t))}return this},remove:function(){return s&&m.each(arguments,(function(e,t){for(var n;(n=m.inArray(t,s,n))>-1;)s.splice(n,1),r&&(n<=o&&o--,n<=a&&a--)})),this},has:function(e){return e?m.inArray(e,s)>-1:!(!s||!s.length)},empty:function(){return s=[],o=0,this},disable:function(){return s=u=t=void 0,this},disabled:function(){return!s},lock:function(){return u=void 0,t||c.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!s||n&&!u||(t=[e,(t=t||[]).slice?t.slice():t],r?u.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},m.extend({Deferred:function(e){var t=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return m.Deferred((function(n){m.each(t,(function(t,o){var a=m.isFunction(e[t])&&e[t];i[o[1]]((function(){var e=a&&a.apply(this,arguments);e&&m.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?m.extend(e,r):r}},i={};return r.pipe=r.then,m.each(t,(function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add((function(){n=s}),t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith})),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=a.call(arguments),s=o.length,u=1!==s||e&&m.isFunction(e.promise)?s:0,l=1===u?e:m.Deferred(),c=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?a.call(arguments):i,r===t?l.notifyWith(n,r):--u||l.resolveWith(n,r)}};if(s>1)for(t=new Array(s),n=new Array(s),r=new Array(s);i<s;i++)o[i]&&m.isFunction(o[i].promise)?o[i].promise().done(c(i,r,o)).fail(l.reject).progress(c(i,n,t)):--u;return u||l.resolveWith(r,o),l.promise()}}),m.fn.ready=function(e){return m.ready.promise().done(e),this},m.extend({isReady:!1,readyWait:1,holdReady:function(e){e?m.readyWait++:m.ready(!0)},ready:function(e){(!0===e?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==e&&--m.readyWait>0||(N.resolveWith(d,[m]),m.fn.triggerHandler&&(m(d).triggerHandler("ready"),m(d).off("ready"))))}}),m.ready.promise=function(e){return N||(N=m.Deferred(),"complete"===d.readyState?setTimeout(m.ready):(d.addEventListener("DOMContentLoaded",R,!1),n.addEventListener("load",R,!1))),N.promise(e)},m.ready.promise();var D=m.access=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===m.type(n))for(s in i=!0,n)m.access(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m.isFunction(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(m(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o};function F(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=m.expando+Math.random()}m.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},F.uid=1,F.accepts=m.acceptData,F.prototype={key:function(e){if(!F.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=F.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,m.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"===typeof t)o[t]=n;else if(m.isEmptyObject(o))m.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"===typeof t&&void 0===n?void 0!==(r=this.get(e,t))?r:this.get(e,m.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),a=this.cache[o];if(void 0===t)this.cache[o]={};else{m.isArray(t)?r=t.concat(t.map(m.camelCase)):(i=m.camelCase(t),r=t in a?[t,i]:(r=i)in a?[r]:r.match(P)||[]),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(e){return!m.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var z=new F,B=new F,U=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,V=/([A-Z])/g;function j(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(V,"-$1").toLowerCase(),"string"===typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:U.test(n)?m.parseJSON(n):n)}catch(i){}B.set(e,t,n)}else n=void 0;return n}m.extend({hasData:function(e){return B.hasData(e)||z.hasData(e)},data:function(e,t,n){return B.access(e,t,n)},removeData:function(e,t){B.remove(e,t)},_data:function(e,t,n){return z.access(e,t,n)},_removeData:function(e,t){z.remove(e,t)}}),m.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=B.get(o),1===o.nodeType&&!z.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=m.camelCase(r.slice(5)),j(o,r,i[r]));z.set(o,"hasDataAttrs",!0)}return i}return"object"===typeof e?this.each((function(){B.set(this,e)})):D(this,(function(t){var n,r=m.camelCase(e);if(o&&void 0===t)return void 0!==(n=B.get(o,e))||void 0!==(n=B.get(o,r))||void 0!==(n=j(o,r,void 0))?n:void 0;this.each((function(){var n=B.get(this,r);B.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&B.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){B.remove(this,e)}))}}),m.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=z.get(e,t),n&&(!r||m.isArray(n)?r=z.access(e,t,m.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){var n=m.queue(e,t=t||"fx"),r=n.length,i=n.shift(),o=m._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,(function(){m.dequeue(e,t)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return z.get(e,n)||z.access(e,n,{empty:m.Callbacks("once memory").add((function(){z.remove(e,[t+"queue",n])}))})}}),m.fn.extend({queue:function(e,t){var n=2;return"string"!==typeof e&&(t=e,e="fx",n--),arguments.length<n?m.queue(this[0],e):void 0===t?this:this.each((function(){var n=m.queue(this,e,t);m._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&m.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){m.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=m.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!==typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=z.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,G=["Top","Right","Bottom","Left"],$=function(e,t){return"none"===m.css(e=t||e,"display")||!m.contains(e.ownerDocument,e)},H=/^(?:checkbox|radio)$/i;!function(){var e=d.createDocumentFragment().appendChild(d.createElement("div")),t=d.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),p.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var X="undefined";p.focusinBubbles="onfocusin"in n;var W=/^key/,Y=/^(?:mouse|pointer|contextmenu)|click/,Z=/^(?:focusinfocus|focusoutblur)$/,J=/^([^.]*)(?:\.(.+)|)$/;function K(){return!0}function Q(){return!1}function ee(){try{return d.activeElement}catch(e){}}m.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,h,f,p,d,g,y=z.get(e);if(y)for(n.handler&&(n=(o=n).handler,i=o.selector),n.guid||(n.guid=m.guid++),(u=y.events)||(u=y.events={}),(a=y.handle)||(a=y.handle=function(t){return m.event.triggered!==t.type?m.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(P)||[""]).length;l--;)p=g=(s=J.exec(t[l])||[])[1],d=(s[2]||"").split(".").sort(),p&&(h=m.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=m.event.special[p]||{},c=m.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&m.expr.match.needsContext.test(i),namespace:d.join(".")},o),(f=u[p])||((f=u[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,d,a)||e.addEventListener&&e.addEventListener(p,a,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),m.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,l,c,h,f,p,d,g,y=z.hasData(e)&&z.get(e);if(y&&(u=y.events)){for(l=(t=(t||"").match(P)||[""]).length;l--;)if(p=g=(s=J.exec(t[l])||[])[1],d=(s[2]||"").split(".").sort(),p){for(h=m.event.special[p]||{},f=u[p=(r?h.delegateType:h.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(e,c));a&&!f.length&&(h.teardown&&!1!==h.teardown.call(e,d,y.handle)||m.removeEvent(e,p,y.handle),delete u[p])}else for(p in u)m.event.remove(e,p+t[l],n,r,!0);m.isEmptyObject(u)&&(delete y.handle,z.remove(e,"events"))}},trigger:function(e,t,r,i){var o,a,s,u,l,c,h,p=[r||d],g=f.call(e,"type")?e.type:e,y=f.call(e,"namespace")?e.namespace.split("."):[];if(a=s=r=r||d,3!==r.nodeType&&8!==r.nodeType&&!Z.test(g+m.event.triggered)&&(g.indexOf(".")>=0&&(y=g.split("."),g=y.shift(),y.sort()),l=g.indexOf(":")<0&&"on"+g,(e=e[m.expando]?e:new m.Event(g,"object"===typeof e&&e)).isTrigger=i?2:3,e.namespace=y.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:m.makeArray(t,[e]),h=m.event.special[g]||{},i||!h.trigger||!1!==h.trigger.apply(r,t))){if(!i&&!h.noBubble&&!m.isWindow(r)){for(u=h.delegateType||g,Z.test(u+g)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(r.ownerDocument||d)&&p.push(s.defaultView||s.parentWindow||n)}for(o=0;(a=p[o++])&&!e.isPropagationStopped();)e.type=o>1?u:h.bindType||g,(c=(z.get(a,"events")||{})[e.type]&&z.get(a,"handle"))&&c.apply(a,t),(c=l&&a[l])&&c.apply&&m.acceptData(a)&&(e.result=c.apply(a,t),!1===e.result&&e.preventDefault());return e.type=g,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),t)||!m.acceptData(r)||l&&m.isFunction(r[g])&&!m.isWindow(r)&&((s=r[l])&&(r[l]=null),m.event.triggered=g,r[g](),m.event.triggered=void 0,s&&(r[l]=s)),e.result}},dispatch:function(e){e=m.event.fix(e);var t,n,r,i,o,s=[],u=a.call(arguments),l=(z.get(this,"events")||{})[e.type]||[],c=m.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(s=m.event.handlers.call(this,e,l),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(r=((m.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,u=e.target;if(s&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(!0!==u.disabled||"click"!==e.type){for(r=[],n=0;n<s;n++)void 0===r[i=(o=t[n]).selector+" "]&&(r[i]=o.needsContext?m(i,this).index(u)>=0:m.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&a.push({elem:u,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||d).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[m.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Y.test(i)?this.mouseHooks:W.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new m.Event(o),t=r.length;t--;)e[n=r[t]]=o[n];return e.target||(e.target=d),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ee()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ee()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&m.nodeName(this,"input"))return this.click(),!1},_default:function(e){return m.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=m.extend(new m.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?m.event.trigger(i,null,t):m.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},m.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},(m.Event=function(e,t){if(!(this instanceof m.Event))return new m.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?K:Q):this.type=e,t&&m.extend(this,t),this.timeStamp=e&&e.timeStamp||m.now(),this[m.expando]=!0}).prototype={isDefaultPrevented:Q,isPropagationStopped:Q,isImmediatePropagationStopped:Q,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=K,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=K,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=K,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){m.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||m.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),p.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){m.event.simulate(t,e.target,m.event.fix(e),!0)};m.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=z.access(r,t);i||r.addEventListener(e,n,!0),z.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=z.access(r,t)-1;i?z.access(r,t,i):(r.removeEventListener(e,n,!0),z.remove(r,t))}}})),m.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"===typeof e){for(a in"string"!==typeof t&&(n=n||t,t=void 0),e)this.on(a,t,n,e[a],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"===typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),!1===r)r=Q;else if(!r)return this;return 1===i&&(o=r,(r=function(e){return m().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=m.guid++)),this.each((function(){m.event.add(this,e,r,n,t)}))},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,m(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!==typeof t||(n=t,t=void 0),!1===n&&(n=Q),this.each((function(){m.event.remove(this,e,n,t)}))},trigger:function(e,t){return this.each((function(){m.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return m.event.trigger(e,t,n,!0)}});var te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ne=/<([\w:]+)/,re=/<|&#?\w+;/,ie=/<(?:script|style|link)/i,oe=/checked\s*(?:[^=]|=\s*.checked.)/i,ae=/^$|\/(?:java|ecma)script/i,se=/^true\/(.*)/,ue=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,le={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ce(e,t){return m.nodeName(e,"table")&&m.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function he(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function fe(e){var t=se.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function pe(e,t){for(var n=0,r=e.length;n<r;n++)z.set(e[n],"globalEval",!t||z.get(t[n],"globalEval"))}function de(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(z.hasData(e)&&(o=z.access(e),a=z.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)m.event.add(t,i,l[i][n]);B.hasData(e)&&(s=B.access(e),u=m.extend({},s),B.set(t,u))}}function ge(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&m.nodeName(e,t)?m.merge([e],n):n}function me(e,t){var n=t.nodeName.toLowerCase();"input"===n&&H.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}le.optgroup=le.option,le.tbody=le.tfoot=le.colgroup=le.caption=le.thead,le.th=le.td,m.extend({clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=m.contains(e.ownerDocument,e);if(!p.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!m.isXMLDoc(e))for(a=ge(s),r=0,i=(o=ge(e)).length;r<i;r++)me(o[r],a[r]);if(t)if(n)for(o=o||ge(e),a=a||ge(s),r=0,i=o.length;r<i;r++)de(o[r],a[r]);else de(e,s);return(a=ge(s,"script")).length>0&&pe(a,!u&&ge(e,"script")),s},buildFragment:function(e,t,n,r){for(var i,o,a,s,u,l,c=t.createDocumentFragment(),h=[],f=0,p=e.length;f<p;f++)if((i=e[f])||0===i)if("object"===m.type(i))m.merge(h,i.nodeType?[i]:i);else if(re.test(i)){for(o=o||c.appendChild(t.createElement("div")),a=(ne.exec(i)||["",""])[1].toLowerCase(),s=le[a]||le._default,o.innerHTML=s[1]+i.replace(te,"<$1></$2>")+s[2],l=s[0];l--;)o=o.lastChild;m.merge(h,o.childNodes),(o=c.firstChild).textContent=""}else h.push(t.createTextNode(i));for(c.textContent="",f=0;i=h[f++];)if((!r||-1===m.inArray(i,r))&&(u=m.contains(i.ownerDocument,i),o=ge(c.appendChild(i),"script"),u&&pe(o),n))for(l=0;i=o[l++];)ae.test(i.type||"")&&n.push(i);return c},cleanData:function(e){for(var t,n,r,i,o=m.event.special,a=0;void 0!==(n=e[a]);a++){if(m.acceptData(n)&&(i=n[z.expando])&&(t=z.cache[i])){if(t.events)for(r in t.events)o[r]?m.event.remove(n,r):m.removeEvent(n,r,t.handle);z.cache[i]&&delete z.cache[i]}delete B.cache[n[B.expando]]}}}),m.fn.extend({text:function(e){return D(this,(function(e){return void 0===e?m.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return this.domManip(arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ce(this,e).appendChild(e)}))},prepend:function(){return this.domManip(arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ce(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},remove:function(e,t){for(var n,r=e?m.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||m.cleanData(ge(n)),n.parentNode&&(t&&m.contains(n.ownerDocument,n)&&pe(ge(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(m.cleanData(ge(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return m.clone(this,e,t)}))},html:function(e){return D(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!ie.test(e)&&!le[(ne.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(te,"<$1></$2>");try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(m.cleanData(ge(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,(function(t){e=this.parentNode,m.cleanData(ge(this)),e&&e.replaceChild(t,this)})),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=s.apply([],e);var n,r,i,o,a,u,l=0,c=this.length,h=this,f=c-1,d=e[0],g=m.isFunction(d);if(g||c>1&&"string"===typeof d&&!p.checkClone&&oe.test(d))return this.each((function(n){var r=h.eq(n);g&&(e[0]=d.call(this,n,r.html())),r.domManip(e,t)}));if(c&&(r=(n=m.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===n.childNodes.length&&(n=r),r)){for(o=(i=m.map(ge(n,"script"),he)).length;l<c;l++)a=n,l!==f&&(a=m.clone(a,!0,!0),o&&m.merge(i,ge(a,"script"))),t.call(this[l],a,l);if(o)for(u=i[i.length-1].ownerDocument,m.map(i,fe),l=0;l<o;l++)a=i[l],ae.test(a.type||"")&&!z.access(a,"globalEval")&&m.contains(u,a)&&(a.src?m._evalUrl&&m._evalUrl(a.src):m.globalEval(a.textContent.replace(ue,"")))}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){m.fn[e]=function(e){for(var n,r=[],i=m(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),m(i[a])[t](n),u.apply(r,n.get());return this.pushStack(r)}}));var ye,ve={};function _e(e,t){var r,i=m(t.createElement(e)).appendTo(t.body),o=n.getDefaultComputedStyle&&(r=n.getDefaultComputedStyle(i[0]))?r.display:m.css(i[0],"display");return i.detach(),o}function be(e){var t=d,n=ve[e];return n||("none"!==(n=_e(e,t))&&n||((t=(ye=(ye||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=_e(e,t),ye.detach()),ve[e]=n),n}var xe=/^margin/,we=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),Ee=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};function Se(e,t,n){var r,i,o,a,s=e.style;return(n=n||Ee(e))&&(a=n.getPropertyValue(t)||n[t]),n&&(""!==a||m.contains(e.ownerDocument,e)||(a=m.style(e,t)),we.test(a)&&xe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Te(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){var e,t,r=d.documentElement,i=d.createElement("div"),o=d.createElement("div");function a(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",r.appendChild(i);var a=n.getComputedStyle(o,null);e="1%"!==a.top,t="4px"===a.width,r.removeChild(i)}o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===o.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(o),n.getComputedStyle&&m.extend(p,{pixelPosition:function(){return a(),e},boxSizingReliable:function(){return null==t&&a(),t},reliableMarginRight:function(){var e,t=o.appendChild(d.createElement("div"));return t.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",o.style.width="1px",r.appendChild(i),e=!parseFloat(n.getComputedStyle(t,null).marginRight),r.removeChild(i),e}}))}(),m.swap=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};var ke=/^(none|table(?!-c[ea]).+)/,Ce=new RegExp("^("+q+")(.*)$","i"),Ie=new RegExp("^([+-])=("+q+")","i"),Ae={position:"absolute",visibility:"hidden",display:"block"},Me={letterSpacing:"0",fontWeight:"400"},Le=["Webkit","O","Moz","ms"];function Ne(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,i=Le.length;i--;)if((t=Le[i]+n)in e)return t;return r}function Pe(e,t,n){var r=Ce.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Oe(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=m.css(e,n+G[o],!0,i)),r?("content"===n&&(a-=m.css(e,"padding"+G[o],!0,i)),"margin"!==n&&(a-=m.css(e,"border"+G[o]+"Width",!0,i))):(a+=m.css(e,"padding"+G[o],!0,i),"padding"!==n&&(a+=m.css(e,"border"+G[o]+"Width",!0,i)));return a}function Re(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Ee(e),a="border-box"===m.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(((i=Se(e,t,o))<0||null==i)&&(i=e.style[t]),we.test(i))return i;r=a&&(p.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+Oe(e,t,n||(a?"border":"content"),r,o)+"px"}function De(e,t){for(var n,r,i,o=[],a=0,s=e.length;a<s;a++)(r=e[a]).style&&(o[a]=z.get(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&$(r)&&(o[a]=z.access(r,"olddisplay",be(r.nodeName)))):(i=$(r),"none"===n&&i||z.set(r,"olddisplay",i?n:m.css(r,"display"))));for(a=0;a<s;a++)(r=e[a]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function Fe(e,t,n,r,i){return new Fe.prototype.init(e,t,n,r,i)}m.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Se(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=m.camelCase(t),u=e.style;if(t=m.cssProps[s]||(m.cssProps[s]=Ne(u,s)),a=m.cssHooks[t]||m.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t];"string"===(o=typeof n)&&(i=Ie.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(m.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||m.cssNumber[s]||(n+="px"),p.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u[t]=n))}},css:function(e,t,n,r){var i,o,a,s=m.camelCase(t);return t=m.cssProps[s]||(m.cssProps[s]=Ne(e.style,s)),(a=m.cssHooks[t]||m.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Se(e,t,r)),"normal"===i&&t in Me&&(i=Me[t]),""===n||n?(o=parseFloat(i),!0===n||m.isNumeric(o)?o||0:i):i}}),m.each(["height","width"],(function(e,t){m.cssHooks[t]={get:function(e,n,r){if(n)return ke.test(m.css(e,"display"))&&0===e.offsetWidth?m.swap(e,Ae,(function(){return Re(e,t,r)})):Re(e,t,r)},set:function(e,n,r){var i=r&&Ee(e);return Pe(0,n,r?Oe(e,t,r,"border-box"===m.css(e,"boxSizing",!1,i),i):0)}}})),m.cssHooks.marginRight=Te(p.reliableMarginRight,(function(e,t){if(t)return m.swap(e,{display:"inline-block"},Se,[e,"marginRight"])})),m.each({margin:"",padding:"",border:"Width"},(function(e,t){m.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"===typeof n?n.split(" "):[n];r<4;r++)i[e+G[r]+t]=o[r]||o[r-2]||o[0];return i}},xe.test(e)||(m.cssHooks[e+t].set=Pe)})),m.fn.extend({css:function(e,t){return D(this,(function(e,t,n){var r,i,o={},a=0;if(m.isArray(t)){for(r=Ee(e),i=t.length;a<i;a++)o[t[a]]=m.css(e,t[a],!1,r);return o}return void 0!==n?m.style(e,t,n):m.css(e,t)}),e,t,arguments.length>1)},show:function(){return De(this,!0)},hide:function(){return De(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){$(this)?m(this).show():m(this).hide()}))}}),m.Tween=Fe,Fe.prototype={constructor:Fe,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(m.cssNumber[n]?"":"px")},cur:function(){var e=Fe.propHooks[this.prop];return e&&e.get?e.get(this):Fe.propHooks._default.get(this)},run:function(e){var t,n=Fe.propHooks[this.prop];return this.options.duration?this.pos=t=m.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Fe.propHooks._default.set(this),this}},Fe.prototype.init.prototype=Fe.prototype,Fe.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=m.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){m.fx.step[e.prop]?m.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[m.cssProps[e.prop]]||m.cssHooks[e.prop])?m.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Fe.propHooks.scrollTop=Fe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},m.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},(m.fx=Fe.prototype.init).step={};var ze,Be,Ue=/^(?:toggle|show|hide)$/,Ve=new RegExp("^(?:([+-])=|)("+q+")([a-z%]*)$","i"),je=/queueHooks$/,qe=[function(e,t,n){var r,i,o,a,s,u,l,c=this,h={},f=e.style,p=e.nodeType&&$(e),d=z.get(e,"fxshow");for(r in n.queue||(null==(s=m._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,c.always((function(){c.always((function(){s.unqueued--,m.queue(e,"fx").length||s.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===("none"===(l=m.css(e,"display"))?z.get(e,"olddisplay")||be(e.nodeName):l)&&"none"===m.css(e,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",c.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),t)if(i=t[r],Ue.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!d||void 0===d[r])continue;p=!0}h[r]=d&&d[r]||m.style(e,r)}else l=void 0;if(m.isEmptyObject(h))"inline"===("none"===l?be(e.nodeName):l)&&(f.display=l);else for(r in d?"hidden"in d&&(p=d.hidden):d=z.access(e,"fxshow",{}),o&&(d.hidden=!p),p?m(e).show():c.done((function(){m(e).hide()})),c.done((function(){var t;for(t in z.remove(e,"fxshow"),h)m.style(e,t,h[t])})),h)a=Xe(p?d[r]:0,r,c),r in d||(d[r]=a.start,p&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}],Ge={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Ve.exec(t),o=i&&i[3]||(m.cssNumber[e]?"":"px"),a=(m.cssNumber[e]||"px"!==o&&+r)&&Ve.exec(m.css(n.elem,e)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do{a/=s=s||".5",m.style(n.elem,e,a+o)}while(s!==(s=n.cur()/r)&&1!==s&&--u)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};function $e(){return setTimeout((function(){ze=void 0})),ze=m.now()}function He(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=G[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Xe(e,t,n){for(var r,i=(Ge[t]||[]).concat(Ge["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function We(e,t,n){var r,i,o=0,a=qe.length,s=m.Deferred().always((function(){delete u.elem})),u=function(){if(i)return!1;for(var t=ze||$e(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:m.extend({},t),opts:m.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:ze||$e(),duration:n.duration,tweens:[],createTween:function(t,n){var r=m.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=m.camelCase(n)],o=e[n],m.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=m.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);o<a;o++)if(r=qe[o].call(l,e,c,l.opts))return r;return m.map(c,Xe,l),m.isFunction(l.opts.start)&&l.opts.start.call(e,l),m.fx.timer(m.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}m.Animation=m.extend(We,{tweener:function(e,t){m.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;r<i;r++)n=e[r],Ge[n]=Ge[n]||[],Ge[n].unshift(t)},prefilter:function(e,t){t?qe.unshift(e):qe.push(e)}}),m.speed=function(e,t,n){var r=e&&"object"===typeof e?m.extend({},e):{complete:n||!n&&t||m.isFunction(e)&&e,duration:e,easing:n&&t||t&&!m.isFunction(t)&&t};return r.duration=m.fx.off?0:"number"===typeof r.duration?r.duration:r.duration in m.fx.speeds?m.fx.speeds[r.duration]:m.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m.isFunction(r.old)&&r.old.call(this),r.queue&&m.dequeue(this,r.queue)},r},m.fn.extend({fadeTo:function(e,t,n,r){return this.filter($).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=m.isEmptyObject(e),o=m.speed(t,n,r),a=function(){var t=We(this,m.extend({},e),o);(i||z.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!==typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=m.timers,a=z.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&je.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||m.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=z.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=m.timers,a=r?r.length:0;for(n.finish=!0,m.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),m.each(["toggle","show","hide"],(function(e,t){var n=m.fn[t];m.fn[t]=function(e,r,i){return null==e||"boolean"===typeof e?n.apply(this,arguments):this.animate(He(t,!0),e,r,i)}})),m.each({slideDown:He("show"),slideUp:He("hide"),slideToggle:He("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){m.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),m.timers=[],m.fx.tick=function(){var e,t=0,n=m.timers;for(ze=m.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||m.fx.stop(),ze=void 0},m.fx.timer=function(e){m.timers.push(e),e()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){Be||(Be=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(Be),Be=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(e,t){return e=m.fx&&m.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}}))},function(){var e=d.createElement("input"),t=d.createElement("select"),n=t.appendChild(d.createElement("option"));e.type="checkbox",p.checkOn=""!==e.value,p.optSelected=n.selected,t.disabled=!0,p.optDisabled=!n.disabled,(e=d.createElement("input")).value="t",e.type="radio",p.radioValue="t"===e.value}();var Ye,Ze=m.expr.attrHandle;m.fn.extend({attr:function(e,t){return D(this,m.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){m.removeAttr(this,e)}))}}),m.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===X?m.prop(e,t,n):(1===o&&m.isXMLDoc(e)||(t=t.toLowerCase(),r=m.attrHooks[t]||(m.expr.match.bool.test(t)?Ye:void 0)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=m.find.attr(e,t))?void 0:i:null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void m.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(P);if(o&&1===e.nodeType)for(;n=o[i++];)r=m.propFix[n]||n,m.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&m.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),Ye={set:function(e,t,n){return!1===t?m.removeAttr(e,n):e.setAttribute(n,n),n}},m.each(m.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=Ze[t]||m.find.attr;Ze[t]=function(e,t,r){var i,o;return r||(o=Ze[t],Ze[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,Ze[t]=o),i}}));var Je=/^(?:input|select|textarea|button)$/i;m.fn.extend({prop:function(e,t){return D(this,m.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[m.propFix[e]||e]}))}}),m.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!m.isXMLDoc(e))&&(t=m.propFix[t]||t,i=m.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||Je.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),p.optSelected||(m.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){m.propFix[this.toLowerCase()]=this}));var Ke=/[\t\r\n\f]/g;m.fn.extend({addClass:function(e){var t,n,r,i,o,a,s="string"===typeof e&&e,u=0,l=this.length;if(m.isFunction(e))return this.each((function(t){m(this).addClass(e.call(this,t,this.className))}));if(s)for(t=(e||"").match(P)||[];u<l;u++)if(r=1===(n=this[u]).nodeType&&(n.className?(" "+n.className+" ").replace(Ke," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=m.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,i,o,a,s=0===arguments.length||"string"===typeof e&&e,u=0,l=this.length;if(m.isFunction(e))return this.each((function(t){m(this).removeClass(e.call(this,t,this.className))}));if(s)for(t=(e||"").match(P)||[];u<l;u++)if(r=1===(n=this[u]).nodeType&&(n.className?(" "+n.className+" ").replace(Ke," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=e?m.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"===typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):m.isFunction(e)?this.each((function(n){m(this).toggleClass(e.call(this,n,this.className,t),t)})):this.each((function(){if("string"===n)for(var t,r=0,i=m(this),o=e.match(P)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else n!==X&&"boolean"!==n||(this.className&&z.set(this,"__className__",this.className),this.className=this.className||!1===e?"":z.get(this,"__className__")||"")}))},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;n<r;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Ke," ").indexOf(t)>=0)return!0;return!1}});var Qe=/\r/g;m.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=m.isFunction(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,m(this).val()):e)?i="":"number"===typeof i?i+="":m.isArray(i)&&(i=m.map(i,(function(e){return null==e?"":e+""}))),(t=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=m.valHooks[i.type]||m.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"===typeof(n=i.value)?n.replace(Qe,""):null==n?"":n:void 0}}),m.extend({valHooks:{option:{get:function(e){var t=m.find.attr(e,"value");return null!=t?t:m.trim(m.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,a=o?null:[],s=o?i+1:r.length,u=i<0?s:o?i:0;u<s;u++)if(((n=r[u]).selected||u===i)&&(p.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!m.nodeName(n.parentNode,"optgroup"))){if(t=m(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=m.makeArray(t),a=i.length;a--;)((r=i[a]).selected=m.inArray(r.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),m.each(["radio","checkbox"],(function(){m.valHooks[this]={set:function(e,t){if(m.isArray(t))return e.checked=m.inArray(m(e).val(),t)>=0}},p.checkOn||(m.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){m.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}})),m.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var et=m.now(),tt=/\?/;m.parseJSON=function(e){return JSON.parse(e+"")},m.parseXML=function(e){var t;if(!e||"string"!==typeof e)return null;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(n){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+e),t};var nt,rt,it=/#.*$/,ot=/([?&])_=[^&]*/,at=/^(.*?):[ \t]*([^\r\n]*)$/gm,st=/^(?:GET|HEAD)$/,ut=/^\/\//,lt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ct={},ht={},ft="*/".concat("*");try{rt=location.href}catch(Pt){(rt=d.createElement("a")).href="",rt=rt.href}function pt(e){return function(t,n){"string"!==typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(P)||[];if(m.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function dt(e,t,n,r){var i={},o=e===ht;function a(s){var u;return i[s]=!0,m.each(e[s]||[],(function(e,s){var l=s(t,n,r);return"string"!==typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)})),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function gt(e,t){var n,r,i=m.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&m.extend(!0,e,r),e}nt=lt.exec(rt.toLowerCase())||[],m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:rt,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(nt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?gt(gt(e,m.ajaxSettings),t):gt(m.ajaxSettings,e)},ajaxPrefilter:pt(ct),ajaxTransport:pt(ht),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0);var n,r,i,o,a,s,u,l,c=m.ajaxSetup({},t=t||{}),h=c.context||c,f=c.context&&(h.nodeType||h.jquery)?m(h):m.event,p=m.Deferred(),d=m.Callbacks("once memory"),g=c.statusCode||{},y={},v={},_=0,b="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!o)for(o={};t=at.exec(i);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return _||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(_<2)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),w(0,t),this}};if(p.promise(x).complete=d.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||rt)+"").replace(it,"").replace(ut,nt[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=m.trim(c.dataType||"*").toLowerCase().match(P)||[""],null==c.crossDomain&&(s=lt.exec(c.url.toLowerCase()),c.crossDomain=!(!s||s[1]===nt[1]&&s[2]===nt[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(nt[3]||("http:"===nt[1]?"80":"443")))),c.data&&c.processData&&"string"!==typeof c.data&&(c.data=m.param(c.data,c.traditional)),dt(ct,c,t,x),2===_)return x;for(l in(u=c.global)&&0===m.active++&&m.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!st.test(c.type),r=c.url,c.hasContent||(c.data&&(r=c.url+=(tt.test(r)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=ot.test(r)?r.replace(ot,"$1_="+et++):r+(tt.test(r)?"&":"?")+"_="+et++)),c.ifModified&&(m.lastModified[r]&&x.setRequestHeader("If-Modified-Since",m.lastModified[r]),m.etag[r]&&x.setRequestHeader("If-None-Match",m.etag[r])),(c.data&&c.hasContent&&!1!==c.contentType||t.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+ft+"; q=0.01":""):c.accepts["*"]),c.headers)x.setRequestHeader(l,c.headers[l]);if(c.beforeSend&&(!1===c.beforeSend.call(h,x,c)||2===_))return x.abort();for(l in b="abort",{success:1,error:1,complete:1})x[l](c[l]);if(n=dt(ht,c,t,x)){x.readyState=1,u&&f.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(a=setTimeout((function(){x.abort("timeout")}),c.timeout));try{_=1,n.send(y,w)}catch(Pt){if(!(_<2))throw Pt;w(-1,Pt)}}else w(-1,"No Transport");function w(e,t,o,s){var l,y,v,b,w,E=t;2!==_&&(_=2,a&&clearTimeout(a),n=void 0,i=s||"",x.readyState=e>0?4:0,l=e>=200&&e<300||304===e,o&&(b=function(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(c,x,o)),b=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(Pt){return{state:"parsererror",error:a?Pt:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(c,b,x,l),l?(c.ifModified&&((w=x.getResponseHeader("Last-Modified"))&&(m.lastModified[r]=w),(w=x.getResponseHeader("etag"))&&(m.etag[r]=w)),204===e||"HEAD"===c.type?E="nocontent":304===e?E="notmodified":(E=b.state,y=b.data,l=!(v=b.error))):(v=E,!e&&E||(E="error",e<0&&(e=0))),x.status=e,x.statusText=(t||E)+"",l?p.resolveWith(h,[y,E,x]):p.rejectWith(h,[x,E,v]),x.statusCode(g),g=void 0,u&&f.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?y:v]),d.fireWith(h,[x,E]),u&&(f.trigger("ajaxComplete",[x,c]),--m.active||m.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,n){return m.get(e,t,n,"json")},getScript:function(e,t){return m.get(e,void 0,t,"script")}}),m.each(["get","post"],(function(e,t){m[t]=function(e,n,r,i){return m.isFunction(n)&&(i=i||r,r=n,n=void 0),m.ajax({url:e,type:t,dataType:i,data:n,success:r})}})),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){m.fn[t]=function(e){return this.on(t,e)}})),m._evalUrl=function(e){return m.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},m.fn.extend({wrapAll:function(e){var t;return m.isFunction(e)?this.each((function(t){m(this).wrapAll(e.call(this,t))})):(this[0]&&(t=m(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this)},wrapInner:function(e){return m.isFunction(e)?this.each((function(t){m(this).wrapInner(e.call(this,t))})):this.each((function(){var t=m(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=m.isFunction(e);return this.each((function(n){m(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(){return this.parent().each((function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)})).end()}}),m.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},m.expr.filters.visible=function(e){return!m.expr.filters.hidden(e)};var mt=/%20/g,yt=/\[\]$/,vt=/\r?\n/g,_t=/^(?:submit|button|image|reset|file)$/i,bt=/^(?:input|select|textarea|keygen)/i;function xt(e,t,n,r){var i;if(m.isArray(t))m.each(t,(function(t,i){n||yt.test(e)?r(e,i):xt(e+"["+("object"===typeof i?t:"")+"]",i,n,r)}));else if(n||"object"!==m.type(t))r(e,t);else for(i in t)xt(e+"["+i+"]",t[i],n,r)}m.param=function(e,t){var n,r=[],i=function(e,t){t=m.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(e)||e.jquery&&!m.isPlainObject(e))m.each(e,(function(){i(this.name,this.value)}));else for(n in e)xt(n,e[n],t,i);return r.join("&").replace(mt,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=m.prop(this,"elements");return e?m.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!m(this).is(":disabled")&&bt.test(this.nodeName)&&!_t.test(e)&&(this.checked||!H.test(e))})).map((function(e,t){var n=m(this).val();return null==n?null:m.isArray(n)?m.map(n,(function(e){return{name:t.name,value:e.replace(vt,"\r\n")}})):{name:t.name,value:n.replace(vt,"\r\n")}})).get()}}),m.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(Pt){}};var wt=0,Et={},St={0:200,1223:204},Tt=m.ajaxSettings.xhr();n.ActiveXObject&&m(n).on("unload",(function(){for(var e in Et)Et[e]()})),p.cors=!!Tt&&"withCredentials"in Tt,p.ajax=Tt=!!Tt,m.ajaxTransport((function(e){var t;if(p.cors||Tt&&!e.crossDomain)return{send:function(n,r){var i,o=e.xhr(),a=++wt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];for(i in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Et[a],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status,o.statusText):r(St[o.status]||o.status,o.statusText,"string"===typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=Et[a]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(Pt){if(t)throw Pt}},abort:function(){t&&t()}}})),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return m.globalEval(e),e}}}),m.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),m.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain)return{send:function(r,i){t=m("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),d.head.appendChild(t[0])},abort:function(){n&&n()}}}));var kt=[],Ct=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=kt.pop()||m.expando+"_"+et++;return this[e]=!0,e}}),m.ajaxPrefilter("json jsonp",(function(e,t,r){var i,o,a,s=!1!==e.jsonp&&(Ct.test(e.url)?"url":"string"===typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ct.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=m.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Ct,"$1"+i):!1!==e.jsonp&&(e.url+=(tt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||m.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always((function(){n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,kt.push(i)),a&&m.isFunction(o)&&o(a[0]),a=o=void 0})),"script"})),m.parseHTML=function(e,t,n){if(!e||"string"!==typeof e)return null;"boolean"===typeof t&&(n=t,t=!1),t=t||d;var r=S.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=m.buildFragment([e],t,i),i&&i.length&&m(i).remove(),m.merge([],r.childNodes))};var It=m.fn.load;m.fn.load=function(e,t,n){if("string"!==typeof e&&It)return It.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>=0&&(r=m.trim(e.slice(s)),e=e.slice(0,s)),m.isFunction(t)?(n=t,t=void 0):t&&"object"===typeof t&&(i="POST"),a.length>0&&m.ajax({url:e,type:i,dataType:"html",data:t}).done((function(e){o=arguments,a.html(r?m("<div>").append(m.parseHTML(e)).find(r):e)})).complete(n&&function(e,t){a.each(n,o||[e.responseText,t,e])}),this},m.expr.filters.animated=function(e){return m.grep(m.timers,(function(t){return e===t.elem})).length};var At=n.document.documentElement;function Mt(e){return m.isWindow(e)?e:9===e.nodeType&&e.defaultView}m.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=m.css(e,"position"),c=m(e),h={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=m.css(e,"top"),u=m.css(e,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+i),"using"in t?t.using.call(e,h):c.css(h)}},m.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){m.offset.setOffset(this,e,t)}));var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(t=o.documentElement,m.contains(t,r)?(typeof r.getBoundingClientRect!==X&&(i=r.getBoundingClientRect()),n=Mt(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i):void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===m.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),m.nodeName(e[0],"html")||(r=e.offset()),r.top+=m.css(e[0],"borderTopWidth",!0),r.left+=m.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-m.css(n,"marginTop",!0),left:t.left-r.left-m.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||At;e&&!m.nodeName(e,"html")&&"static"===m.css(e,"position");)e=e.offsetParent;return e||At}))}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;m.fn[e]=function(i){return D(this,(function(e,i,o){var a=Mt(e);if(void 0===o)return a?a[t]:e[i];a?a.scrollTo(r?n.pageXOffset:o,r?o:n.pageYOffset):e[i]=o}),e,i,arguments.length,null)}})),m.each(["top","left"],(function(e,t){m.cssHooks[t]=Te(p.pixelPosition,(function(e,n){if(n)return n=Se(e,t),we.test(n)?m(e).position()[t]+"px":n}))})),m.each({Height:"height",Width:"width"},(function(e,t){m.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){m.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!==typeof r),a=n||(!0===r||!0===i?"margin":"border");return D(this,(function(t,n,r){var i;return m.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?m.css(t,n,a):m.style(t,n,r,a)}),t,o?r:void 0,o,null)}}))})),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,void 0===(r=function(){return m}.apply(t,[]))||(e.exports=r);var Lt=n.jQuery,Nt=n.$;return m.noConflict=function(e){return n.$===m&&(n.$=Nt),e&&n.jQuery===m&&(n.jQuery=Lt),m},typeof i===X&&(n.jQuery=n.$=m),m},"object"===typeof e.exports?e.exports=i.document?o(i,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return o(e)}:o(i)},function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"h",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"j",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"i",(function(){return c})),n.d(t,"g",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return p}));var r=n(0);function i(e){return function(t){var n=t.featureTarget;return!!n&&(!!n.properties&&n.properties.meta===e)}}function o(e){return!!e.originalEvent&&(!!e.originalEvent.shiftKey&&0===e.originalEvent.button)}function a(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&(e.featureTarget.properties.active===r.g.ACTIVE&&e.featureTarget.properties.meta===r.m.FEATURE))}function s(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&(e.featureTarget.properties.active===r.g.INACTIVE&&e.featureTarget.properties.meta===r.m.FEATURE))}function u(e){return void 0===e.featureTarget}function l(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&e.featureTarget.properties.meta===r.m.FEATURE)}function c(e){var t=e.featureTarget;return!!t&&(!!t.properties&&t.properties.meta===r.m.VERTEX)}function h(e){return!!e.originalEvent&&!0===e.originalEvent.shiftKey}function f(e){return 27===e.keyCode}function p(e){return 13===e.keyCode}},function(e,t){e.exports={classes:{CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},sources:{HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},cursors:{ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},types:{POLYGON:"polygon",LINE:"line_string",POINT:"point"},geojsonTypes:{FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},modes:{DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},events:{CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},updateActions:{MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},meta:{FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},activeStates:{ACTIVE:"true",INACTIVE:"false"},interactions:["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],LAT_MIN:-90,LAT_RENDERED_MIN:-85,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}},function(e,t,n){"use strict";t.a={enable:function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()}),0)},disable:function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),0)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(29);var i=n(43);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";e.exports=n(100)},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty},function(e,t,n){var r=n(62),i=n(63),o=n(64),a=n(105),s=n(30),u=n(66),l=n(108),c=n(71),h=n(72),f=n(73),p=n(112),d=n(114),g=n(115),m=n(74),y=n(75);e.exports=function(){"use strict";var e,t,n;function v(r,i){if(e)if(t){var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",a={};e(a),n=i(a),"undefined"!==typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else t=i;else e=i}return v(["exports"],(function(e){function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=r;function r(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){var n,r,i,o,a;for(void 0===t&&(t=1e-6),i=e,a=0;a<8;a++){if(o=this.sampleCurveX(i)-e,Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-e)<t)return i;e>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var v=_;function _(e,t){this.x=e,this.y=t}_.prototype={clone:function(){return new _(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},_.convert=function(e){return e instanceof _?e:Array.isArray(e)?new _(e[0],e[1]):e};var b="undefined"!=typeof self?self:{};function x(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!x(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!x(e[r],t[r]))return!1;return!0}return e===t}var w=Math.pow(2,53)-1,E=Math.PI/180,S=180/Math.PI;function T(e){return e*E}function k(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function C(e,t,r,i){var o=new n(e,t,r,i);return function(e){return o.solve(e)}}var I=C(.25,.1,.25,1);function A(e,t,n){return Math.min(n,Math.max(t,e))}function M(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function L(e){var t=[];for(var n in e)t.push(e[n]);return t}function N(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)e[s]=a[s]}return e}var P=1;function O(){return P++}function R(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function D(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function F(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function z(e,t){return-1!==e.indexOf(t,e.length-t.length)}function B(e,t,n){var r={};for(var i in e)r[i]=t.call(n||this,e[i],i,e);return r}function U(e,t,n){var r={};for(var i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function V(e){return Array.isArray(e)?e.map(V):"object"==typeof e&&e?B(e,V):e}var j={};function q(e){j[e]||("undefined"!=typeof console&&console.warn(e),j[e]=!0)}function G(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function $(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],r+=((n=e[a]).x-t.x)*(t.y+n.y);return r}function H(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function X(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,n,r,i){var o=r||i;return t[n]=!o||o.toLowerCase(),""})),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}var W=null;function Y(e){if(null==W){var t=e.navigator?e.navigator.userAgent:null;W=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return W}function Z(e){try{var t=b[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}var J,K,Q,ee,te=b.performance&&b.performance.now?b.performance.now.bind(b.performance):Date.now.bind(Date),ne=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame,re=b.cancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelAnimationFrame||b.msCancelAnimationFrame,ie=!1,oe={now:te,setErrorState:function(){ie=!0},setNow:function(e){oe.now=function(){return e}},restoreNow:function(){oe.now=te},frame:function(e){if(ie)return{cancel:function(){}};var t=ne(e);return{cancel:function(){return re(t)}}},getImageData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=b.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return J||(J=b.document.createElement("a")),J.href=e,J.href},get devicePixelRatio(){return b.devicePixelRatio},get prefersReducedMotion(){return!!b.matchMedia&&(null==K&&(K=b.matchMedia("(prefers-reduced-motion: reduce)")),K.matches)}},ae={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},se={supported:!1,testSupport:function(e){!ue&&ee&&(le?ce(e):Q=e)}},ue=!1,le=!1;function ce(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,ee),e.isContextLost())return;se.supported=!0}catch(e){}e.deleteTexture(t),ue=!0}b.document&&((ee=b.document.createElement("img")).onload=function(){Q&&ce(Q),Q=null,le=!0},ee.onerror=function(){ue=!0,Q=null},ee.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var he="01";function fe(e){return 0===e.indexOf("mapbox:")}var pe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function de(e){return pe.test(e)}var ge=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function me(e){var t=e.match(ge);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function ye(e){var t=e.params.length?"?".concat(e.params.join("&")):"";return"".concat(e.protocol,"://").concat(e.authority).concat(e.path).concat(t)}function ve(e){if(!e)return null;var t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(b.atob(t[1]).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(e){return null}}var _e,be,xe=function(){function e(t){m(this,e),this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}return y(e,[{key:"getStorageKey",value:function(e){var t=ve(ae.ACCESS_TOKEN),n="";return n=t&&t.u?b.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))}))):ae.ACCESS_TOKEN||"",e?"mapbox.eventData.".concat(e,":").concat(n):"mapbox.eventData:".concat(n)}},{key:"fetchEventData",value:function(){var e=Z("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var r=b.localStorage.getItem(t);r&&(this.eventData=JSON.parse(r));var i=b.localStorage.getItem(n);i&&(this.anonId=i)}catch(e){q("Unable to read from LocalStorage")}}},{key:"saveEventData",value:function(){var e=Z("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{b.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&b.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){q("Unable to write to LocalStorage")}}},{key:"processRequests",value:function(e){}},{key:"postEvent",value:function(e,t,n,r){var i=this;if(ae.EVENTS_URL){var o=me(ae.EVENTS_URL);o.params.push("access_token=".concat(r||ae.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"2.0.0",skuId:he,userId:this.anonId},s=t?N(a,t):a,u={url:ye(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=Ue(u,(function(e){i.pendingRequest=null,n(e),i.saveEventData(),i.processRequests(r)}))}}},{key:"queueRequest",value:function(e,t){this.queue.push(e),this.processRequests(t)}}]),e}(),we=new(function(e){d(n,e);var t=g(n);function n(e){var r;return m(this,n),(r=t.call(this,"appUserTurnstile"))._customAccessToken=e,r}return y(n,[{key:"postTurnstileEvent",value:function(e,t){ae.EVENTS_URL&&ae.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return fe(e)||de(e)}))&&this.queueRequest(Date.now(),t)}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=ve(ae.ACCESS_TOKEN),r=n?n.u:ae.ACCESS_TOKEN,i=r!==this.eventData.tokenU;D(this.anonId)||(this.anonId=R(),i=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),u=(o-this.eventData.lastSuccess)/864e5;i=i||u>=1||u<-1||a.getDate()!==s.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},(function(e){e||(t.eventData.lastSuccess=o,t.eventData.tokenU=r)}),e)}}}]),n}(xe)),Ee=we.postTurnstileEvent.bind(we),Se=new(function(e){d(n,e);var t=g(n);function n(){var e;return m(this,n),(e=t.call(this,"map.load")).success={},e.skuToken="",e}return y(n,[{key:"postMapLoadEvent",value:function(e,t,n,r){this.skuToken=t,this.errorCb=r,ae.EVENTS_URL&&(n||ae.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),D(this.anonId)||(this.anonId=R()),this.postEvent(i,{skuToken:this.skuToken},(function(e){e?t.errorCb(e):r&&(t.success[r]=!0)}),e))}}}]),n}(xe)),Te=Se.postMapLoadEvent.bind(Se),ke=new(function(e){d(n,e);var t=g(n);function n(){var e;return m(this,n),(e=t.call(this,"map.auth")).success={},e.skuToken="",e}return y(n,[{key:"getSession",value:function(e,t,n,r){var i=this;if(ae.API_URL&&ae.SESSION_PATH){var o=me(ae.API_URL+ae.SESSION_PATH);o.params.push("sku=".concat(t||"")),o.params.push("access_token=".concat(r||ae.ACCESS_TOKEN||""));var a={url:ye(o),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Ve(a,(function(e){i.pendingRequest=null,n(e),i.saveEventData(),i.processRequests(r)}))}}},{key:"getSessionAPI",value:function(e,t,n,r){this.skuToken=t,this.errorCb=r,ae.SESSION_PATH&&ae.API_URL&&(n||ae.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error("NO_ACCESS_TOKEN")))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||this.getSession(i,this.skuToken,(function(e){e?t.errorCb(e):r&&(t.success[r]=!0)}),e)}}}]),n}(xe)),Ce=ke.getSessionAPI.bind(ke),Ie=500,Ae=50;function Me(){b.caches&&!_e&&(_e=b.caches.open("mapbox-tiles"))}function Le(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var Ne,Pe=1/0;function Oe(){return null==Ne&&(Ne=b.OffscreenCanvas&&new b.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof b.createImageBitmap),Ne}var Re={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Re);var De=function(e){d(n,e);var t=g(n);function n(e,r,i){var o;return m(this,n),401===r&&de(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),(o=t.call(this,e)).status=r,o.url=i,o}return y(n,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),n}(p(Error)),Fe=H()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===b.location.protocol?b.parent:b).location.href},ze=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(Fe())&&!/^\w+:/.test(n))){if(b.fetch&&b.Request&&b.AbortController&&b.Request.prototype.hasOwnProperty("signal"))return function(e,t){var n,r=new b.AbortController,i=new b.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:Fe(),signal:r.signal}),o=!1,a=!1,s=(n=i.url).indexOf("sku=")>0&&de(n);"json"===e.type&&i.headers.set("Accept","application/json");var u=function(n,r,o){if(!a){if(n&&"SecurityError"!==n.message&&q(n),r&&o)return l(r);var u=Date.now();b.fetch(i).then((function(n){if(n.ok){var r=s?n.clone():null;return l(n,r,u)}return t(new De(n.statusText,n.status,e.url))})).catch((function(e){20!==e.code&&t(new Error(e.message))}))}},l=function(n,r,s){("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((function(e){a||(r&&s&&function(e,t,n){if(Me(),_e){var r={status:t.status,statusText:t.statusText,headers:new b.Headers};t.headers.forEach((function(e,t){return r.headers.set(t,e)}));var i=X(t.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(e,t){if(void 0===be)try{new Response(new ReadableStream),be=!0}catch(e){be=!1}be?t(e.body):e.blob().then(t)}(t,(function(t){var n=new b.Response(t,r);Me(),_e&&_e.then((function(t){return t.put(Le(e.url),n)})).catch((function(e){return q(e.message)}))})))}}(i,r,s),o=!0,t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(e){a||t(new Error(e.message))}))};return s?function(e,t){if(Me(),!_e)return t(null);var n=Le(e.url);_e.then((function(e){e.match(n).then((function(r){var i=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0),n=X(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(r);e.delete(n),i&&e.put(n,r.clone()),t(null,r,i)})).catch(t)})).catch(t)}(i,u):u(null,null),{cancel:function(){a=!0,o||r.abort()}}}(e,t);if(H()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(e,t){var n=new b.XMLHttpRequest;for(var r in n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)n.setRequestHeader(r,e.headers[r]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===e.type)try{r=JSON.parse(n.response)}catch(e){return t(e)}t(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new De(n.statusText,n.status,e.url))},n.send(e.body),{cancel:function(){return n.abort()}}}(e,t)},Be=function(e,t){return ze(N(e,{type:"arrayBuffer"}),t)},Ue=function(e,t){return ze(N(e,{method:"POST"}),t)},Ve=function(e,t){return ze(N(e,{method:"GET"}),t)};function je(e){var t=b.document.createElement("a");return t.href=e,t.protocol===b.document.location.protocol&&t.host===b.document.location.host}var qe,Ge,$e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";qe=[],Ge=0;var He=function e(t,n){if(se.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Ge>=ae.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:t,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return qe.push(r),r}Ge++;var i=!1,o=function(){if(!i)for(i=!0,Ge--;qe.length&&Ge<ae.MAX_PARALLEL_IMAGE_REQUESTS;){var t=qe.shift(),n=t.requestParameters,r=t.callback;t.cancelled||(t.cancel=e(n,r).cancel)}},a=Be(t,(function(e,t,r,i){o(),e?n(e):t&&(Oe()?function(e,t){var n=new b.Blob([new Uint8Array(e)],{type:"image/png"});b.createImageBitmap(n).then((function(e){t(null,e)})).catch((function(e){t(new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(t,n):function(e,t,n,r){var i=new b.Image,o=b.URL;i.onload=function(){t(null,i),o.revokeObjectURL(i.src),i.onload=null,i.src=$e},i.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new b.Blob([new Uint8Array(e)],{type:"image/png"});i.cacheControl=n,i.expires=r,i.src=e.byteLength?o.createObjectURL(a):$e}(t,n,r,i))}));return{cancel:function(){a.cancel(),o()}}};function Xe(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function We(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var Ye=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(this,e),N(this,n),this.type=t},Ze=function(e){d(n,e);var t=g(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m(this,n),t.call(this,"error",N({error:e},r))}return n}(Ye),Je=function(){function e(){m(this,e)}return y(e,[{key:"on",value:function(e,t){return this._listeners=this._listeners||{},Xe(e,t,this._listeners),this}},{key:"off",value:function(e,t){return We(e,t,this._listeners),We(e,t,this._oneTimeListeners),this}},{key:"once",value:function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},Xe(e,t,this._oneTimeListeners),this}},{key:"fire",value:function(e,t){"string"==typeof e&&(e=new Ye(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;var r,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[],o=f(i);try{for(o.s();!(r=o.n()).done;)r.value.call(this,e)}catch(h){o.e(h)}finally{o.f()}var a,s=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[],u=f(s);try{for(u.s();!(a=u.n()).done;){var l=a.value;We(n,l,this._oneTimeListeners),l.call(this,e)}}catch(h){u.e(h)}finally{u.f()}var c=this._eventedParent;c&&(N(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),c.fire(e))}else e instanceof Ze&&console.error(e.error);return this}},{key:"listens",value:function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}},{key:"setEventedParent",value:function(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}]),e}(),Ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Qe=function e(t,n,r,i){m(this,e),this.message=(t?"".concat(t,": "):"")+r,i&&(this.identifier=i),null!=n&&n.__line__&&(this.line=n.__line__)};function et(e){var t=e.value;return t?[new Qe(e.key,t,"constants have been deprecated as of v8")]:[]}function tt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)e[s]=a[s]}return e}function nt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function rt(e){if(Array.isArray(e))return e.map(rt);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var n in e)t[n]=rt(e[n]);return t}return nt(e)}var it=function(e){d(n,e);var t=g(n);function n(e,r){var i;return m(this,n),(i=t.call(this,r)).message=r,i.key=e,i}return n}(p(Error)),ot=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];m(this,e),this.parent=t,this.bindings={};var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var o=h(r.value,2),a=o[0],s=o[1];this.bindings[a]=s}}catch(u){i.e(u)}finally{i.f()}}return y(e,[{key:"concat",value:function(t){return new e(this,t)}},{key:"get",value:function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}},{key:"has",value:function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}]),e}(),at={kind:"null"},st={kind:"number"},ut={kind:"string"},lt={kind:"boolean"},ct={kind:"color"},ht={kind:"object"},ft={kind:"value"},pt={kind:"collator"},dt={kind:"formatted"},gt={kind:"resolvedImage"};function mt(e,t){return{kind:"array",itemType:e,N:t}}function yt(e){if("array"===e.kind){var t=yt(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}var vt=[at,st,ut,lt,ct,dt,ht,mt(ft),gt];function _t(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!_t(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind){var n,r=f(vt);try{for(r.s();!(n=r.n()).done;)if(!_t(n.value,t))return null}catch(i){r.e(i)}finally{r.f()}}}return"Expected ".concat(yt(e)," but found ").concat(yt(t)," instead.")}function bt(e,t){return t.some((function(t){return t.kind===e.kind}))}function xt(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}var wt=t((function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function i(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function o(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function a(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,s=e.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var u=s.indexOf("("),l=s.indexOf(")");if(-1!==u&&l+1===s.length){var c=s.substr(0,u),h=s.substr(u+1,l-(u+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return null;f=o(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),f];case"hsla":if(4!==h.length)return null;f=o(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,d=o(h[1]),g=o(h[2]),m=g<=.5?g*(d+1):g+d-g*d,y=2*g-m;return[r(255*a(y,m,p+1/3)),r(255*a(y,m,p)),r(255*a(y,m,p-1/3)),f];default:return null}}return null}}catch(e){}})).parseCSSColor,Et=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;m(this,e),this.r=t,this.g=n,this.b=r,this.a=i}return y(e,[{key:"toString",value:function(){var e=this.toArray(),t=h(e,4),n=t[0],r=t[1],i=t[2],o=t[3];return"rgba(".concat(Math.round(n),",").concat(Math.round(r),",").concat(Math.round(i),",").concat(o,")")}},{key:"toArray",value:function(){var e=this.r,t=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]}}],[{key:"parse",value:function(t){if(t){if(t instanceof e)return t;if("string"==typeof t){var n=wt(t);return n?new e(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}}}}]),e}();Et.black=new Et(0,0,0,1),Et.white=new Et(1,1,1,1),Et.transparent=new Et(0,0,0,0),Et.red=new Et(1,0,0,1),Et.blue=new Et(0,0,1,1);var St=function(){function e(t,n,r){m(this,e),this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return y(e,[{key:"compare",value:function(e,t){return this.collator.compare(e,t)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),e}(),Tt=function e(t,n,r,i,o){m(this,e),this.text=t,this.image=n,this.scale=r,this.fontStack=i,this.textColor=o},kt=function(){function e(t){m(this,e),this.sections=t}return y(e,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")}},{key:"serialize",value:function(){var e,t=["format"],n=f(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(i)}}}catch(o){n.e(o)}finally{n.f()}return t}}],[{key:"fromString",value:function(t){return new e([new Tt(t,null,null,null,null)])}},{key:"factory",value:function(t){return t instanceof e?t:e.fromString(t)}}]),e}(),Ct=function(){function e(t){m(this,e),this.name=t.name,this.available=t.available}return y(e,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(t){return t?new e({name:t,available:!1}):null}}]),e}();function It(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value [".concat([e,t,n,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function At(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Et)return!0;if(e instanceof St)return!0;if(e instanceof kt)return!0;if(e instanceof Ct)return!0;if(Array.isArray(e)){var t,n=f(e);try{for(n.s();!(t=n.n()).done;)if(!At(t.value))return!1}catch(i){n.e(i)}finally{n.f()}return!0}if("object"==typeof e){for(var r in e)if(!At(e[r]))return!1;return!0}return!1}function Mt(e){if(null===e)return at;if("string"==typeof e)return ut;if("boolean"==typeof e)return lt;if("number"==typeof e)return st;if(e instanceof Et)return ct;if(e instanceof St)return pt;if(e instanceof kt)return dt;if(e instanceof Ct)return gt;if(Array.isArray(e)){var t,n,r=e.length,i=f(e);try{for(i.s();!(n=i.n()).done;){var o=Mt(n.value);if(t){if(t===o)continue;t=ft;break}t=o}}catch(a){i.e(a)}finally{i.f()}return mt(t||ft,r)}return ht}function Lt(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Et||e instanceof kt||e instanceof Ct?e.toString():JSON.stringify(e)}var Nt=function(){function e(t,n){m(this,e),this.type=t,this.value=n}return y(e,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Et?["rgba"].concat(this.value.toArray()):this.value instanceof kt?this.value.serialize():this.value}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!At(t[1]))return n.error("invalid value");var r=t[1],i=Mt(r),o=n.expectedType;return"array"!==i.kind||0!==i.N||!o||"array"!==o.kind||"number"==typeof o.N&&0!==o.N||(i=o),new e(i,r)}}]),e}(),Pt=function(){function e(t){m(this,e),this.name="ExpressionEvaluationError",this.message=t}return y(e,[{key:"toJSON",value:function(){return this.message}}]),e}(),Ot={string:ut,number:st,boolean:lt,object:ht},Rt=function(){function e(t,n){m(this,e),this.type=t,this.args=n}return y(e,[{key:"evaluate",value:function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!_t(this.type,Mt(n)))return n;if(t===this.args.length-1)throw new Pt("Expected value to be of type ".concat(yt(this.type),", but found ").concat(yt(Mt(n))," instead."))}return null}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=this.type,t=[e.kind];if("array"===e.kind){var n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);var r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r,i=1,o=t[0];if("array"===o){var a,s;if(t.length>2){var u=t[1];if("string"!=typeof u||!(u in Ot)||"object"===u)return n.error('The item type argument of "array" must be one of string, number, boolean',1);a=Ot[u],i++}else a=ft;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);s=t[2],i++}r=mt(a,s)}else r=Ot[o];for(var l=[];i<t.length;i++){var c=n.parse(t[i],i,ft);if(!c)return null;l.push(c)}return new e(r,l)}}]),e}(),Dt=function(){function e(t){m(this,e),this.type=dt,this.sections=t}return y(e,[{key:"evaluate",value:function(e){return new kt(this.sections.map((function(t){var n=t.content.evaluate(e);return Mt(n)===gt?new Tt("",n,null,null,null):new Tt(Lt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}},{key:"eachChild",value:function(e){var t,n=f(this.sections);try{for(n.s();!(t=n.n()).done;){var r=t.value;e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}}catch(i){n.e(i)}finally{n.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e,t=["format"],n=f(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),t.push(i)}}catch(o){n.e(o)}finally{n.f()}return t}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return n.error("First argument must be an image or text section.");for(var i=[],o=!1,a=1;a<=t.length-1;++a){var s=t[a];if(o&&"object"==typeof s&&!Array.isArray(s)){o=!1;var u=null;if(s["font-scale"]&&!(u=n.parse(s["font-scale"],1,st)))return null;var l=null;if(s["text-font"]&&!(l=n.parse(s["text-font"],1,mt(ut))))return null;var c=null;if(s["text-color"]&&!(c=n.parse(s["text-color"],1,ct)))return null;var h=i[i.length-1];h.scale=u,h.font=l,h.textColor=c}else{var f=n.parse(t[a],1,ft);if(!f)return null;var p=f.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,i.push({content:f,scale:null,font:null,textColor:null})}}return new e(i)}}]),e}(),Ft=function(){function e(t){m(this,e),this.type=gt,this.input=t}return y(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=Ct.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected two arguments.");var r=n.parse(t[1],1,ut);return r?new e(r):n.error("No image name provided.")}}]),e}(),zt={"to-boolean":lt,"to-color":ct,"to-number":st,"to-string":ut},Bt=function(){function e(t,n){m(this,e),this.type=t,this.args=n}return y(e,[{key:"evaluate",value:function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){var t,n,r,i=f(this.args);try{for(i.s();!(r=i.n()).done;){if(t=r.value.evaluate(e),n=null,t instanceof Et)return t;if("string"==typeof t){var o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):It(t[0],t[1],t[2],t[3])))return new Et(t[0]/255,t[1]/255,t[2]/255,t[3])}}catch(c){i.e(c)}finally{i.f()}throw new Pt(n||"Could not parse color from value '".concat("string"==typeof t?t:String(JSON.stringify(t)),"'"))}if("number"===this.type.kind){var a,s=null,u=f(this.args);try{for(u.s();!(a=u.n()).done;){if(null===(s=a.value.evaluate(e)))return 0;var l=Number(s);if(!isNaN(l))return l}}catch(c){u.e(c)}finally{u.f()}throw new Pt("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?kt.fromString(Lt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Ct.fromString(Lt(this.args[0].evaluate(e))):Lt(this.args[0].evaluate(e))}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new Dt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ft(this.args[0]).serialize();var e=["to-".concat(this.type.kind)];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return n.error("Expected one argument.");for(var i=zt[r],o=[],a=1;a<t.length;a++){var s=n.parse(t[a],a,ft);if(!s)return null;o.push(s)}return new e(i,o)}}]),e}(),Ut=["Unknown","Point","LineString","Polygon"],Vt=function(){function e(){m(this,e),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}return y(e,[{key:"id",value:function(){return this.feature&&"id"in this.feature?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?Ut[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"parseColor",value:function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Et.parse(e)),t}}]),e}(),jt=function(){function e(t,n,r,i){m(this,e),this.name=t,this.type=n,this._evaluate=r,this.args=i}return y(e,[{key:"evaluate",value:function(e){return this._evaluate(e,this.args)}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){var r,i=t[0],o=e.definitions[i];if(!o)return n.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0);var a,s=Array.isArray(o)?o[0]:o.type,u=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,l=u.filter((function(e){var n=h(e,1)[0];return!Array.isArray(n)||n.length===t.length-1})),p=null,d=f(l);try{for(d.s();!(a=d.n()).done;){var g=h(a.value,2),m=g[0],y=g[1];p=new hn(n.registry,n.path,null,n.scope);for(var v=[],_=!1,b=1;b<t.length;b++){var x=t[b],w=Array.isArray(m)?m[b-1]:m.type,E=p.parse(x,1+v.length,w);if(!E){_=!0;break}v.push(E)}if(!_)if(Array.isArray(m)&&m.length!==v.length)p.error("Expected ".concat(m.length," arguments, but found ").concat(v.length," instead."));else{for(var S=0;S<v.length;S++){var T=Array.isArray(m)?m[S]:m.type,k=v[S];p.concat(S+1).checkSubtype(T,k.type)}if(0===p.errors.length)return new e(i,s,y,v)}}}catch(L){d.e(L)}finally{d.f()}if(1===l.length)(r=n.errors).push.apply(r,c(p.errors));else{for(var C=(l.length?l:u).map((function(e){var t;return t=h(e,1)[0],Array.isArray(t)?"(".concat(t.map(yt).join(", "),")"):"(".concat(yt(t.type),"...)")})).join(" | "),I=[],A=1;A<t.length;A++){var M=n.parse(t[A],1+I.length);if(!M)return null;I.push(yt(M.type))}n.error("Expected arguments of type ".concat(C,", but found (").concat(I.join(", "),") instead."))}return null}},{key:"register",value:function(t,n){for(var r in e.definitions=n,n)t[r]=e}}]),e}(),qt=function(){function e(t,n,r){m(this,e),this.type=pt,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=n}return y(e,[{key:"evaluate",value:function(e){return new St(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}},{key:"eachChild",value:function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return n.error("Collator options argument must be an object.");var i=n.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,lt);if(!i)return null;var o=n.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,lt);if(!o)return null;var a=null;return r.locale&&!(a=n.parse(r.locale,1,ut))?null:new e(i,o,a)}}]),e}();function Gt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function $t(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Ht(e,t){var n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*8192),Math.round(r*i*8192)]}function Xt(e,t,n){var r=e[0]-t[0],i=e[1]-t[1],o=e[0]-n[0],a=e[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function Wt(e,t){for(var n,r,i,o=!1,a=0,s=t.length;a<s;a++)for(var u=t[a],l=0,c=u.length;l<c-1;l++){if(Xt(e,u[l],u[l+1]))return!1;(r=u[l])[1]>(n=e)[1]!=(i=u[l+1])[1]>n[1]&&n[0]<(i[0]-r[0])*(n[1]-r[1])/(i[1]-r[1])+r[0]&&(o=!o)}return o}function Yt(e,t){for(var n=0;n<t.length;n++)if(Wt(e,t[n]))return!0;return!1}function Zt(e,t,n,r){var i=r[0]-n[0],o=r[1]-n[1],a=(e[0]-n[0])*o-i*(e[1]-n[1]),s=(t[0]-n[0])*o-i*(t[1]-n[1]);return a>0&&s<0||a<0&&s>0}function Jt(e,t,n){var r,i,o,a,s,u,l,c=f(n);try{for(c.s();!(r=c.n()).done;)for(var h=r.value,p=0;p<h.length-1;++p)if(0!=(u=[(s=h[p+1])[0]-(a=h[p])[0],s[1]-a[1]])[0]*(l=[(o=t)[0]-(i=e)[0],o[1]-i[1]])[1]-u[1]*l[0]&&Zt(i,o,a,s)&&Zt(a,s,i,o))return!0}catch(d){c.e(d)}finally{c.f()}return!1}function Kt(e,t){for(var n=0;n<e.length;++n)if(!Wt(e[n],t))return!1;for(var r=0;r<e.length-1;++r)if(Jt(e[r],e[r+1],t))return!1;return!0}function Qt(e,t){for(var n=0;n<t.length;n++)if(Kt(e,t[n]))return!0;return!1}function en(e,t,n){for(var r=[],i=0;i<e.length;i++){for(var o=[],a=0;a<e[i].length;a++){var s=Ht(e[i][a],n);Gt(t,s),o.push(s)}r.push(o)}return r}function tn(e,t,n){for(var r=[],i=0;i<e.length;i++){var o=en(e[i],t,n);r.push(o)}return r}function nn(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){var i=.5*r,o=e[0]-n[0]>i?-r:n[0]-e[0]>i?r:0;0===o&&(o=e[0]-n[2]>i?-r:n[2]-e[0]>i?r:0),e[0]+=o}Gt(t,e)}function rn(e,t,n,r){var i,o=8192*Math.pow(2,r.z),a=[8192*r.x,8192*r.y],s=[],u=f(e);try{for(u.s();!(i=u.n()).done;){var l,c=i.value,h=f(c);try{for(h.s();!(l=h.n()).done;){var p=l.value,d=[p.x+a[0],p.y+a[1]];nn(d,t,n,o),s.push(d)}}catch(g){h.e(g)}finally{h.f()}}}catch(g){u.e(g)}finally{u.f()}return s}function on(e,t,n,r){var i,o,a=8192*Math.pow(2,r.z),s=[8192*r.x,8192*r.y],u=[],l=f(e);try{for(l.s();!(i=l.n()).done;){var c,h=i.value,p=[],d=f(h);try{for(d.s();!(c=d.n()).done;){var g=c.value,m=[g.x+s[0],g.y+s[1]];Gt(t,m),p.push(m)}}catch(w){d.e(w)}finally{d.f()}u.push(p)}}catch(w){l.e(w)}finally{l.f()}if(t[2]-t[0]<=a/2){(o=t)[0]=o[1]=1/0,o[2]=o[3]=-1/0;var y,v=f(u);try{for(v.s();!(y=v.n()).done;){var _,b=y.value,x=f(b);try{for(x.s();!(_=x.n()).done;)nn(_.value,t,n,a)}catch(w){x.e(w)}finally{x.f()}}}catch(w){v.e(w)}finally{v.f()}}return u}var an=function(){function e(t,n){m(this,e),this.type=lt,this.geojson=t,this.geometries=n}return y(e,[{key:"evaluate",value:function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){var o=en(t.coordinates,r,i),a=rn(e.geometry(),n,r,i);if(!$t(n,r))return!1;var s,u=f(a);try{for(u.s();!(s=u.n()).done;)if(!Wt(s.value,o))return!1}catch(d){u.e(d)}finally{u.f()}}if("MultiPolygon"===t.type){var l=tn(t.coordinates,r,i),c=rn(e.geometry(),n,r,i);if(!$t(n,r))return!1;var h,p=f(c);try{for(p.s();!(h=p.n()).done;)if(!Yt(h.value,l))return!1}catch(d){p.e(d)}finally{p.f()}}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){var o=en(t.coordinates,r,i),a=on(e.geometry(),n,r,i);if(!$t(n,r))return!1;var s,u=f(a);try{for(u.s();!(s=u.n()).done;)if(!Kt(s.value,o))return!1}catch(d){u.e(d)}finally{u.f()}}if("MultiPolygon"===t.type){var l=tn(t.coordinates,r,i),c=on(e.geometry(),n,r,i);if(!$t(n,r))return!1;var h,p=f(c);try{for(p.s();!(h=p.n()).done;)if(!Qt(h.value,l))return!1}catch(d){p.e(d)}finally{p.f()}}return!0}(e,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(At(t[1])){var r=t[1];if("FeatureCollection"===r.type)for(var i=0;i<r.features.length;++i){var o=r.features[i].geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new e(r,r.features[i].geometry)}else if("Feature"===r.type){var a=r.geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new e(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new e(r,r)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),e}();function sn(e){if(e instanceof jt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof an)return!1;var t=!0;return e.eachChild((function(e){t&&!sn(e)&&(t=!1)})),t}function un(e){if(e instanceof jt&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!un(e)&&(t=!1)})),t}function ln(e,t){if(e instanceof jt&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild((function(e){n&&!ln(e,t)&&(n=!1)})),n}var cn=function(){function e(t,n){m(this,e),this.type=n.type,this.name=t,this.boundExpression=n}return y(e,[{key:"evaluate",value:function(e){return this.boundExpression.evaluate(e)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(t,n){if(2!==t.length||"string"!=typeof t[1])return n.error("'var' expression requires exactly one string literal argument.");var r=t[1];return n.scope.has(r)?new e(r,n.scope.get(r)):n.error('Unknown variable "'.concat(r,'". Make sure "').concat(r,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),e}(),hn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ot,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];m(this,e),this.registry=t,this.path=n,this.key=n.map((function(e){return"[".concat(e,"]")})).join(""),this.scope=i,this.errors=o,this.expectedType=r}return y(e,[{key:"parse",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}},{key:"_parse",value:function(e,t){function n(e,t,n){return"assert"===n?new Rt(t,[e]):"coerce"===n?new Bt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=e[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found ".concat(typeof r,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var i=this.registry[r];if(i){var o=i.parse(e,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,t.typeAnnotation||"coerce");else o=n(o,a,t.typeAnnotation||"assert")}if(!(o instanceof Nt)&&"resolvedImage"!==o.type.kind&&function e(t){if(t instanceof cn)return e(t.boundExpression);if(t instanceof jt&&"error"===t.name)return!1;if(t instanceof qt)return!1;if(t instanceof an)return!1;var n=t instanceof Bt||t instanceof Rt,r=!0;return t.eachChild((function(t){r=n?r&&e(t):r&&t instanceof Nt})),!!r&&sn(t)&&ln(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}(o)){var u=new Vt;try{o=new Nt(o.type,o.evaluate(u))}catch(e){return this.error(e.message),null}}return o}return this.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}},{key:"concat",value:function(t,n,r){var i="number"==typeof t?this.path.concat(t):this.path,o=r?this.scope.concat(r):this.scope;return new e(this.registry,i,n||null,o,this.errors)}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i="".concat(this.key).concat(n.map((function(e){return"[".concat(e,"]")})).join(""));this.errors.push(new it(i,e))}},{key:"checkSubtype",value:function(e,t){var n=_t(e,t);return n&&this.error(n),n}}]),e}();function fn(e,t){for(var n,r,i=e.length-1,o=0,a=i,s=0;o<=a;)if(n=e[s=Math.floor((o+a)/2)],r=e[s+1],n<=t){if(s===i||t<r)return s;o=s+1}else{if(!(n>t))throw new Pt("Input is not a number.");a=s-1}return 0}var pn=function(){function e(t,n,r){m(this,e),this.type=t,this.input=n,this.labels=[],this.outputs=[];var i,o=f(r);try{for(o.s();!(i=o.n()).done;){var a=h(i.value,2),s=a[0],u=a[1];this.labels.push(s),this.outputs.push(u)}}catch(l){o.e(l)}finally{o.f()}}return y(e,[{key:"evaluate",value:function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[fn(t,r)].evaluate(e)}},{key:"eachChild",value:function(e){e(this.input);var t,n=f(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}],[{key:"parse",value:function(t,n){if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");var r=n.parse(t[1],1,st);if(!r)return null;var i=[],o=null;n.expectedType&&"value"!==n.expectedType.kind&&(o=n.expectedType);for(var a=1;a<t.length;a+=2){var s=1===a?-1/0:t[a],u=t[a+1],l=a,c=a+1;if("number"!=typeof s)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var h=n.parse(u,c,o);if(!h)return null;o=o||h.type,i.push([s,h])}return new e(o,r,i)}}]),e}();function dn(e,t,n){return e*(1-n)+t*n}var gn=Object.freeze({__proto__:null,number:dn,color:function(e,t,n){return new Et(dn(e.r,t.r,n),dn(e.g,t.g,n),dn(e.b,t.b,n),dn(e.a,t.a,n))},array:function(e,t,n){return e.map((function(e,r){return dn(e,t[r],n)}))}}),mn=6/29*3*(6/29),yn=Math.PI/180,vn=180/Math.PI;function _n(e){return e>.008856451679035631?Math.pow(e,1/3):e/mn+4/29}function bn(e){return e>6/29?e*e*e:mn*(e-4/29)}function xn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function wn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function En(e){var t=wn(e.r),n=wn(e.g),r=wn(e.b),i=_n((.4124564*t+.3575761*n+.1804375*r)/.95047),o=_n((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-_n((.0193339*t+.119192*n+.9503041*r)/1.08883)),alpha:e.a}}function Sn(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*bn(t),n=.95047*bn(n),r=1.08883*bn(r),new Et(xn(3.2404542*n-1.5371385*t-.4985314*r),xn(-.969266*n+1.8760108*t+.041556*r),xn(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function Tn(e,t,n){var r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var kn={forward:En,reverse:Sn,interpolate:function(e,t,n){return{l:dn(e.l,t.l,n),a:dn(e.a,t.a,n),b:dn(e.b,t.b,n),alpha:dn(e.alpha,t.alpha,n)}}},Cn={forward:function(e){var t=En(e),n=t.l,r=t.a,i=t.b,o=Math.atan2(i,r)*vn;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}},reverse:function(e){var t=e.h*yn,n=e.c;return Sn({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:Tn(e.h,t.h,n),c:dn(e.c,t.c,n),l:dn(e.l,t.l,n),alpha:dn(e.alpha,t.alpha,n)}}},In=Object.freeze({__proto__:null,lab:kn,hcl:Cn}),An=function(){function e(t,n,r,i,o){m(this,e),this.type=t,this.operator=n,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];var a,s=f(o);try{for(s.s();!(a=s.n()).done;){var u=h(a.value,2),l=u[0],c=u[1];this.labels.push(l),this.outputs.push(c)}}catch(p){s.e(p)}finally{s.f()}}return y(e,[{key:"evaluate",value:function(t){var n=this.labels,r=this.outputs;if(1===n.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=n[0])return r[0].evaluate(t);var o=n.length;if(i>=n[o-1])return r[o-1].evaluate(t);var a=fn(n,i),s=e.interpolationFactor(this.interpolation,i,n[a],n[a+1]),u=r[a].evaluate(t),l=r[a+1].evaluate(t);return"interpolate"===this.operator?gn[this.type.kind.toLowerCase()](u,l,s):"interpolate-hcl"===this.operator?Cn.reverse(Cn.interpolate(Cn.forward(u),Cn.forward(l),s)):kn.reverse(kn.interpolate(kn.forward(u),kn.forward(l),s))}},{key:"eachChild",value:function(e){e(this.input);var t,n=f(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t}}],[{key:"interpolationFactor",value:function(e,t,r,i){var o=0;if("exponential"===e.name)o=Mn(t,e.base,r,i);else if("linear"===e.name)o=Mn(t,1,r,i);else if("cubic-bezier"===e.name){var a=e.controlPoints;o=new n(a[0],a[1],a[2],a[3]).solve(Mn(t,1,r,i))}return o}},{key:"parse",value:function(t,n){var r=l(t),i=r[0],o=r[1],a=r[2],s=r.slice(3);if(!Array.isArray(o)||0===o.length)return n.error("Expected an interpolation type expression.",1);if("linear"===o[0])o={name:"linear"};else if("exponential"===o[0]){var u=o[1];if("number"!=typeof u)return n.error("Exponential interpolation requires a numeric base.",1,1);o={name:"exponential",base:u}}else{if("cubic-bezier"!==o[0])return n.error("Unknown interpolation type ".concat(String(o[0])),1,0);var c=o.slice(1);if(4!==c.length||c.some((function(e){return"number"!=typeof e||e<0||e>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);o={name:"cubic-bezier",controlPoints:c}}if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(a=n.parse(a,2,st)))return null;var h=[],f=null;"interpolate-hcl"===i||"interpolate-lab"===i?f=ct:n.expectedType&&"value"!==n.expectedType.kind&&(f=n.expectedType);for(var p=0;p<s.length;p+=2){var d=s[p],g=s[p+1],m=p+3,y=p+4;if("number"!=typeof d)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',m);if(h.length&&h[h.length-1][0]>=d)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',m);var v=n.parse(g,y,f);if(!v)return null;f=f||v.type,h.push([d,v])}return"number"===f.kind||"color"===f.kind||"array"===f.kind&&"number"===f.itemType.kind&&"number"==typeof f.N?new e(f,i,o,a,h):n.error("Type ".concat(yt(f)," is not interpolatable."))}}]),e}();function Mn(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}var Ln=function(){function e(t,n){m(this,e),this.type=t,this.args=n}return y(e,[{key:"evaluate",value:function(e){var t,n,r=null,i=0,o=f(this.args);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(i++,(r=a.evaluate(e))&&r instanceof Ct&&!r.available&&(t||(t=r.name),r=null,i===this.args.length&&(r=t)),null!==r)break}}catch(s){o.e(s)}finally{o.f()}return r}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expectected at least one argument.");var r=null,i=n.expectedType;i&&"value"!==i.kind&&(r=i);var o,a=[],s=f(t.slice(1));try{for(s.s();!(o=s.n()).done;){var u=o.value,l=n.parse(u,1+a.length,r,void 0,{typeAnnotation:"omit"});if(!l)return null;r=r||l.type,a.push(l)}}catch(c){s.e(c)}finally{s.f()}return new e(i&&a.some((function(e){return _t(i,e.type)}))?ft:r,a)}}]),e}(),Nn=function(){function e(t,n){m(this,e),this.type=n.type,this.bindings=[].concat(t),this.result=n}return y(e,[{key:"evaluate",value:function(e){return this.result.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=f(this.bindings);try{for(n.s();!(t=n.n()).done;)e(t.value[1])}catch(r){n.e(r)}finally{n.f()}e(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var e,t=["let"],n=f(this.bindings);try{for(n.s();!(e=n.n()).done;){var r=h(e.value,2),i=r[0],o=r[1];t.push(i,o.serialize())}}catch(a){n.e(a)}finally{n.f()}return t.push(this.result.serialize()),t}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));for(var r=[],i=1;i<t.length-1;i+=2){var o=t[i];if("string"!=typeof o)return n.error("Expected string, but found ".concat(typeof o," instead."),i);if(/[^a-zA-Z0-9_]/.test(o))return n.error("Variable names must contain only alphanumeric characters or '_'.",i);var a=n.parse(t[i+1],i+1);if(!a)return null;r.push([o,a])}var s=n.parse(t[t.length-1],t.length-1,n.expectedType,r);return s?new e(r,s):null}}]),e}(),Pn=function(){function e(t,n,r){m(this,e),this.type=t,this.index=n,this.input=r}return y(e,[{key:"evaluate",value:function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Pt("Array index out of bounds: ".concat(t," < 0."));if(t>=n.length)throw new Pt("Array index out of bounds: ".concat(t," > ").concat(n.length-1,"."));if(t!==Math.floor(t))throw new Pt("Array index must be an integer, but found ".concat(t," instead."));return n[t]}},{key:"eachChild",value:function(e){e(this.index),e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,st),i=n.parse(t[2],2,mt(n.expectedType||ft));return r&&i?new e(i.type.itemType,r,i):null}}]),e}(),On=function(){function e(t,n){m(this,e),this.type=lt,this.needle=t,this.haystack=n}return y(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!xt(t,["boolean","string","number","null"]))throw new Pt("Expected first argument to be of type boolean, string, number or null, but found ".concat(yt(Mt(t))," instead."));if(!xt(n,["string","array"]))throw new Pt("Expected second argument to be of type array or string, but found ".concat(yt(Mt(n))," instead."));return n.indexOf(t)>=0}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,ft),i=n.parse(t[2],2,ft);return r&&i?bt(r.type,[lt,ut,st,at,ft])?new e(r,i):n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(yt(r.type)," instead")):null}}]),e}(),Rn=function(){function e(t,n,r){m(this,e),this.type=st,this.needle=t,this.haystack=n,this.fromIndex=r}return y(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!xt(t,["boolean","string","number","null"]))throw new Pt("Expected first argument to be of type boolean, string, number or null, but found ".concat(yt(Mt(t))," instead."));if(!xt(n,["string","array"]))throw new Pt("Expected second argument to be of type array or string, but found ".concat(yt(Mt(n))," instead."));if(this.fromIndex){var r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,ft),i=n.parse(t[2],2,ft);if(!r||!i)return null;if(!bt(r.type,[lt,ut,st,at,ft]))return n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(yt(r.type)," instead"));if(4===t.length){var o=n.parse(t[3],3,st);return o?new e(r,i,o):null}return new e(r,i)}}]),e}(),Dn=function(){function e(t,n,r,i,o,a){m(this,e),this.inputType=t,this.type=n,this.input=r,this.cases=i,this.outputs=o,this.otherwise=a}return y(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);return(Mt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}},{key:"eachChild",value:function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e,t=this,n=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),i=[],o={},a=f(r);try{for(a.s();!(e=a.n()).done;){var s=e.value,u=o[this.cases[s]];void 0===u?(o[this.cases[s]]=i.length,i.push([this.cases[s],[s]])):i[u][1].push(s)}}catch(y){a.e(y)}finally{a.f()}for(var l=function(e){return"number"===t.inputType.kind?Number(e):e},c=0,p=i;c<p.length;c++){var d=h(p[c],2),g=d[0],m=d[1];n.push(1===m.length?l(m[0]):m.map(l)),n.push(this.outputs[g].serialize())}return n.push(this.otherwise.serialize()),n}}],[{key:"parse",value:function(t,n){if(t.length<5)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return n.error("Expected an even number of arguments.");var r,i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var o={},a=[],s=2;s<t.length-1;s+=2){var u=t[s],l=t[s+1];Array.isArray(u)||(u=[u]);var c=n.concat(s);if(0===u.length)return c.error("Expected at least one branch label.");var h,p=f(u);try{for(p.s();!(h=p.n()).done;){var d=h.value;if("number"!=typeof d&&"string"!=typeof d)return c.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof d&&Math.floor(d)!==d)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,Mt(d)))return null}else r=Mt(d);if(void 0!==o[String(d)])return c.error("Branch labels must be unique.");o[String(d)]=a.length}}catch(v){p.e(v)}finally{p.f()}var g=n.parse(l,s,i);if(!g)return null;i=i||g.type,a.push(g)}var m=n.parse(t[1],1,ft);if(!m)return null;var y=n.parse(t[t.length-1],t.length-1,i);return y?"value"!==m.type.kind&&n.concat(1).checkSubtype(r,m.type)?null:new e(r,i,m,o,a,y):null}}]),e}(),Fn=function(){function e(t,n,r){m(this,e),this.type=t,this.branches=n,this.otherwise=r}return y(e,[{key:"evaluate",value:function(e){var t,n=f(this.branches);try{for(n.s();!(t=n.n()).done;){var r=h(t.value,2),i=r[0],o=r[1];if(i.evaluate(e))return o.evaluate(e)}}catch(a){n.e(a)}finally{n.f()}return this.otherwise.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=f(this.branches);try{for(n.s();!(t=n.n()).done;){var r=h(t.value,2),i=r[0],o=r[1];e(i),e(o)}}catch(a){n.e(a)}finally{n.f()}e(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(e){var t=h(e,2);return t[0],t[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return n.error("Expected an odd number of arguments.");var r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var i=[],o=1;o<t.length-1;o+=2){var a=n.parse(t[o],o,lt);if(!a)return null;var s=n.parse(t[o+1],o+1,r);if(!s)return null;i.push([a,s]),r=r||s.type}var u=n.parse(t[t.length-1],t.length-1,r);return u?new e(r,i,u):null}}]),e}(),zn=function(){function e(t,n,r,i){m(this,e),this.type=t,this.input=n,this.beginIndex=r,this.endIndex=i}return y(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!xt(t,["string","array"]))throw new Pt("Expected first argument to be of type array or string, but found ".concat(yt(Mt(t))," instead."));if(this.endIndex){var r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}},{key:"eachChild",value:function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,ft),i=n.parse(t[2],2,st);if(!r||!i)return null;if(!bt(r.type,[mt(ft),ut,ft]))return n.error("Expected first argument to be of type array or string, but found ".concat(yt(r.type)," instead"));if(4===t.length){var o=n.parse(t[3],3,st);return o?new e(r.type,r,i,o):null}return new e(r.type,r,i)}}]),e}();function Bn(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Un(e,t,n,r){return 0===r.compare(t,n)}function Vn(e,t,n){var r="=="!==e&&"!="!==e;return function(){function i(e,t,n){m(this,i),this.type=lt,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return y(i,[{key:"evaluate",value:function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=Mt(o),u=Mt(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new Pt('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(u.kind,") instead."))}if(this.collator&&!r&&this.hasUntypedArgument){var l=Mt(o),c=Mt(a);if("string"!==l.kind||"string"!==c.kind)return t(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):t(i,o,a)}},{key:"eachChild",value:function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n=e[0],o=t.parse(e[1],1,ft);if(!o)return null;if(!Bn(n,o.type))return t.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(yt(o.type),"'."));var a=t.parse(e[2],2,ft);if(!a)return null;if(!Bn(n,a.type))return t.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(yt(a.type),"'."));if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot compare types '".concat(yt(o.type),"' and '").concat(yt(a.type),"'."));r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Rt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Rt(o.type,[a])));var s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,pt)))return null}return new i(o,a,s)}}]),i}()}var jn=Vn("==",(function(e,t,n){return t===n}),Un),qn=Vn("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!Un(0,t,n,r)})),Gn=Vn("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),$n=Vn(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),Hn=Vn("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),Xn=function(){function e(t,n,r,i,o){m(this,e),this.type=ut,this.number=t,this.locale=n,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=o}return y(e,[{key:"evaluate",value:function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}},{key:"eachChild",value:function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected two arguments.");var r=n.parse(t[1],1,st);if(!r)return null;var i=t[2];if("object"!=typeof i||Array.isArray(i))return n.error("NumberFormat options argument must be an object.");var o=null;if(i.locale&&!(o=n.parse(i.locale,1,ut)))return null;var a=null;if(i.currency&&!(a=n.parse(i.currency,1,ut)))return null;var s=null;if(i["min-fraction-digits"]&&!(s=n.parse(i["min-fraction-digits"],1,st)))return null;var u=null;return i["max-fraction-digits"]&&!(u=n.parse(i["max-fraction-digits"],1,st))?null:new e(r,o,a,s,u)}}]),e}(),Wn=function(){function e(t){m(this,e),this.type=st,this.input=t}return y(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Pt("Expected value to be of type string or array, but found ".concat(yt(Mt(t))," instead."))}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected 1 argument, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?n.error("Expected argument of type string or array, but found ".concat(yt(r.type)," instead.")):new e(r):null}}]),e}(),Yn={"==":jn,"!=":qn,">":$n,"<":Gn,">=":Vn(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0})),"<=":Hn,array:Rt,at:Pn,boolean:Rt,case:Fn,coalesce:Ln,collator:qt,format:Dt,image:Ft,in:On,"index-of":Rn,interpolate:An,"interpolate-hcl":An,"interpolate-lab":An,length:Wn,let:Nn,literal:Nt,match:Dn,number:Rt,"number-format":Xn,object:Rt,slice:zn,step:pn,string:Rt,"to-boolean":Bt,"to-color":Bt,"to-number":Bt,"to-string":Bt,var:cn,within:an};function Zn(e,t){var n=h(t,4),r=n[0],i=n[1],o=n[2],a=n[3];r=r.evaluate(e),i=i.evaluate(e),o=o.evaluate(e);var s=a?a.evaluate(e):1,u=It(r,i,o,s);if(u)throw new Pt(u);return new Et(r/255*s,i/255*s,o/255*s,s)}function Jn(e,t){return e in t}function Kn(e,t){var n=t[e];return void 0===n?null:n}function Qn(e){return{type:e}}function er(e){return{result:"success",value:e}}function tr(e){return{result:"error",value:e}}function nr(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function rr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function ir(e){return!!e.expression&&e.expression.interpolated}function or(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function ar(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function sr(e){return e}function ur(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function lr(e,t,n,r,i){return ur(typeof n===i?r[n]:void 0,e.default,t.default)}function cr(e,t,n){if("number"!==or(n))return ur(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var i=fn(e.stops.map((function(e){return e[0]})),n);return e.stops[i][1]}function hr(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==or(n))return ur(e.default,t.default);var i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];var o=fn(e.stops.map((function(e){return e[0]})),n),a=function(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],u=e.stops[o+1][1],l=gn[t.type]||sr;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=In[e.colorSpace];l=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=s.evaluate.apply(void 0,t),i=u.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==i)return l(r,i,a)}}:l(s,u,a)}function fr(e,t,n){return"color"===t.type?n=Et.parse(n):"formatted"===t.type?n=kt.fromString(n.toString()):"resolvedImage"===t.type?n=Ct.fromString(n.toString()):or(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),ur(n,e.default,t.default)}jt.register(Yn,{error:[{kind:"error"},[ut],function(e,t){var n=h(t,1)[0];throw new Pt(n.evaluate(e))}],typeof:[ut,[ft],function(e,t){return yt(Mt(h(t,1)[0].evaluate(e)))}],"to-rgba":[mt(st,4),[ct],function(e,t){return h(t,1)[0].evaluate(e).toArray()}],rgb:[ct,[st,st,st],Zn],rgba:[ct,[st,st,st,st],Zn],has:{type:lt,overloads:[[[ut],function(e,t){return Jn(h(t,1)[0].evaluate(e),e.properties())}],[[ut,ht],function(e,t){var n=h(t,2),r=n[0],i=n[1];return Jn(r.evaluate(e),i.evaluate(e))}]]},get:{type:ft,overloads:[[[ut],function(e,t){return Kn(h(t,1)[0].evaluate(e),e.properties())}],[[ut,ht],function(e,t){var n=h(t,2),r=n[0],i=n[1];return Kn(r.evaluate(e),i.evaluate(e))}]]},"feature-state":[ft,[ut],function(e,t){return Kn(h(t,1)[0].evaluate(e),e.featureState||{})}],properties:[ht,[],function(e){return e.properties()}],"geometry-type":[ut,[],function(e){return e.geometryType()}],id:[ft,[],function(e){return e.id()}],zoom:[st,[],function(e){return e.globals.zoom}],"heatmap-density":[st,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[st,[],function(e){return e.globals.lineProgress||0}],"sky-radial-progress":[st,[],function(e){return e.globals.skyRadialProgress||0}],accumulated:[ft,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[st,Qn(st),function(e,t){var n,r=0,i=f(t);try{for(i.s();!(n=i.n()).done;)r+=n.value.evaluate(e)}catch(o){i.e(o)}finally{i.f()}return r}],"*":[st,Qn(st),function(e,t){var n,r=1,i=f(t);try{for(i.s();!(n=i.n()).done;)r*=n.value.evaluate(e)}catch(o){i.e(o)}finally{i.f()}return r}],"-":{type:st,overloads:[[[st,st],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)-i.evaluate(e)}],[[st],function(e,t){return-h(t,1)[0].evaluate(e)}]]},"/":[st,[st,st],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)/i.evaluate(e)}],"%":[st,[st,st],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)%i.evaluate(e)}],ln2:[st,[],function(){return Math.LN2}],pi:[st,[],function(){return Math.PI}],e:[st,[],function(){return Math.E}],"^":[st,[st,st],function(e,t){var n=h(t,2),r=n[0],i=n[1];return Math.pow(r.evaluate(e),i.evaluate(e))}],sqrt:[st,[st],function(e,t){var n=h(t,1)[0];return Math.sqrt(n.evaluate(e))}],log10:[st,[st],function(e,t){var n=h(t,1)[0];return Math.log(n.evaluate(e))/Math.LN10}],ln:[st,[st],function(e,t){var n=h(t,1)[0];return Math.log(n.evaluate(e))}],log2:[st,[st],function(e,t){var n=h(t,1)[0];return Math.log(n.evaluate(e))/Math.LN2}],sin:[st,[st],function(e,t){var n=h(t,1)[0];return Math.sin(n.evaluate(e))}],cos:[st,[st],function(e,t){var n=h(t,1)[0];return Math.cos(n.evaluate(e))}],tan:[st,[st],function(e,t){var n=h(t,1)[0];return Math.tan(n.evaluate(e))}],asin:[st,[st],function(e,t){var n=h(t,1)[0];return Math.asin(n.evaluate(e))}],acos:[st,[st],function(e,t){var n=h(t,1)[0];return Math.acos(n.evaluate(e))}],atan:[st,[st],function(e,t){var n=h(t,1)[0];return Math.atan(n.evaluate(e))}],min:[st,Qn(st),function(e,t){return Math.min.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],max:[st,Qn(st),function(e,t){return Math.max.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],abs:[st,[st],function(e,t){var n=h(t,1)[0];return Math.abs(n.evaluate(e))}],round:[st,[st],function(e,t){var n=h(t,1)[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[st,[st],function(e,t){var n=h(t,1)[0];return Math.floor(n.evaluate(e))}],ceil:[st,[st],function(e,t){var n=h(t,1)[0];return Math.ceil(n.evaluate(e))}],"filter-==":[lt,[ut,ft],function(e,t){var n=h(t,2),r=n[0],i=n[1];return e.properties()[r.value]===i.value}],"filter-id-==":[lt,[ft],function(e,t){var n=h(t,1)[0];return e.id()===n.value}],"filter-type-==":[lt,[ut],function(e,t){var n=h(t,1)[0];return e.geometryType()===n.value}],"filter-<":[lt,[ut,ft],function(e,t){var n=h(t,2),r=n[0],i=n[1],o=e.properties()[r.value],a=i.value;return typeof o==typeof a&&o<a}],"filter-id-<":[lt,[ft],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[lt,[ut,ft],function(e,t){var n=h(t,2),r=n[0],i=n[1],o=e.properties()[r.value],a=i.value;return typeof o==typeof a&&o>a}],"filter-id->":[lt,[ft],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[lt,[ut,ft],function(e,t){var n=h(t,2),r=n[0],i=n[1],o=e.properties()[r.value],a=i.value;return typeof o==typeof a&&o<=a}],"filter-id-<=":[lt,[ft],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[lt,[ut,ft],function(e,t){var n=h(t,2),r=n[0],i=n[1],o=e.properties()[r.value],a=i.value;return typeof o==typeof a&&o>=a}],"filter-id->=":[lt,[ft],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[lt,[ft],function(e,t){return h(t,1)[0].value in e.properties()}],"filter-has-id":[lt,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[lt,[mt(ut)],function(e,t){return h(t,1)[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[lt,[mt(ft)],function(e,t){return h(t,1)[0].value.indexOf(e.id())>=0}],"filter-in-small":[lt,[ut,mt(ft)],function(e,t){var n=h(t,2),r=n[0];return n[1].value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[lt,[ut,mt(ft)],function(e,t){var n=h(t,2),r=n[0],i=n[1];return function(e,t,n,r){for(;n<=r;){var i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:lt,overloads:[[[lt,lt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)&&i.evaluate(e)}],[Qn(lt),function(e,t){var n,r=f(t);try{for(r.s();!(n=r.n()).done;)if(!n.value.evaluate(e))return!1}catch(i){r.e(i)}finally{r.f()}return!0}]]},any:{type:lt,overloads:[[[lt,lt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)||i.evaluate(e)}],[Qn(lt),function(e,t){var n,r=f(t);try{for(r.s();!(n=r.n()).done;)if(n.value.evaluate(e))return!0}catch(i){r.e(i)}finally{r.f()}return!1}]]},"!":[lt,[lt],function(e,t){return!h(t,1)[0].evaluate(e)}],"is-supported-script":[lt,[ut],function(e,t){var n=h(t,1)[0],r=e.globals&&e.globals.isSupportedScript;return!r||r(n.evaluate(e))}],upcase:[ut,[ut],function(e,t){return h(t,1)[0].evaluate(e).toUpperCase()}],downcase:[ut,[ut],function(e,t){return h(t,1)[0].evaluate(e).toLowerCase()}],concat:[ut,Qn(ft),function(e,t){return t.map((function(t){return Lt(t.evaluate(e))})).join("")}],"resolved-locale":[ut,[pt],function(e,t){return h(t,1)[0].evaluate(e).resolvedLocale()}]});var pr=function(){function e(t,n){m(this,e),this.expression=t,this._warningHistory={},this._evaluator=new Vt,this._defaultValue=n?function(e){return"color"===e.type&&ar(e.default)?new Et(0,0,0,0):"color"===e.type?Et.parse(e.default)||null:void 0===e.default?null:e.default}(n):null,this._enumValues=n&&"enum"===n.type?n.values:null}return y(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(e,t,n,r,i,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Pt("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", "),", but found ").concat(JSON.stringify(a)," instead."));return a}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}]),e}();function dr(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Yn}function gr(e,t){var n=new hn(Yn,[],t?function(e){var t={color:ct,string:ut,number:st,enum:ut,boolean:lt,formatted:dt,resolvedImage:gt};return"array"===e.type?mt(t[e.value]||ft,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?er(new pr(r,t)):tr(n.errors)}var mr=function(){function e(t,n){m(this,e),this.kind=t,this._styleExpression=n,this.isStateDependent="constant"!==t&&!un(n.expression)}return y(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}},{key:"evaluate",value:function(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}}]),e}(),yr=function(){function e(t,n,r,i){m(this,e),this.kind=t,this.zoomStops=r,this._styleExpression=n,this.isStateDependent="camera"!==t&&!un(n.expression),this.interpolationType=i}return y(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}},{key:"evaluate",value:function(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}},{key:"interpolationFactor",value:function(e,t,n){return this.interpolationType?An.interpolationFactor(this.interpolationType,e,t,n):0}}]),e}();function vr(e,t){if("error"===(e=gr(e,t)).result)return e;var n=e.value.expression,r=sn(n);if(!r&&!nr(t))return tr([new it("","data expressions not supported")]);var i=ln(n,["zoom"]);if(!i&&!rr(t))return tr([new it("","zoom expressions not supported")]);var o=function e(t){var n=null;if(t instanceof Nn)n=e(t.result);else if(t instanceof Ln){var r,i=f(t.args);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(n=e(o))break}}catch(a){i.e(a)}finally{i.f()}}else(t instanceof pn||t instanceof An)&&t.input instanceof jt&&"zoom"===t.input.name&&(n=t);return n instanceof it||t.eachChild((function(t){var r=e(t);r instanceof it?n=r:!n&&r?n=new it("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new it("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}(n);return o||i?o instanceof it?tr([o]):o instanceof An&&!ir(t)?tr([new it("",'"interpolate" expressions cannot be used with this property')]):er(o?new yr(r?"camera":"composite",e.value,o.labels,o instanceof An?o.interpolation:void 0):new mr(r?"constant":"source",e.value)):tr([new it("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var _r=function(){function e(t,n){m(this,e),this._parameters=t,this._specification=n,tt(this,function e(t,n){var r,i,o,a="color"===n.type,s=t.stops&&"object"==typeof t.stops[0][0],u=s||!(s||void 0!==t.property),l=t.type||(ir(n)?"exponential":"interval");if(a&&((t=tt({},t)).stops&&(t.stops=t.stops.map((function(e){return[e[0],Et.parse(e[1])]}))),t.default=Et.parse(t.default?t.default:n.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!In[t.colorSpace])throw new Error("Unknown color space: ".concat(t.colorSpace));if("exponential"===l)r=hr;else if("interval"===l)r=cr;else if("categorical"===l){r=lr,i=Object.create(null);var c,h=f(t.stops);try{for(h.s();!(c=h.n()).done;){var p=c.value;i[p[0]]=p[1]}}catch(T){h.e(T)}finally{h.f()}o=typeof t.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'.concat(l,'"'));r=fr}if(s){for(var d={},g=[],m=0;m<t.stops.length;m++){var y=t.stops[m],v=y[0].zoom;void 0===d[v]&&(d[v]={zoom:v,type:t.type,property:t.property,default:t.default,stops:[]},g.push(v)),d[v].stops.push([y[0].value,y[1]])}for(var _=[],b=0,x=g;b<x.length;b++){var w=x[b];_.push([d[w].zoom,e(d[w],n)])}var E={name:"linear"};return{kind:"composite",interpolationType:E,interpolationFactor:An.interpolationFactor.bind(void 0,E),zoomStops:_.map((function(e){return e[0]})),evaluate:function(e,r){var i=e.zoom;return hr({stops:_,base:t.base},n,i).evaluate(i,r)}}}if(u){var S="exponential"===l?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:S,interpolationFactor:An.interpolationFactor.bind(void 0,S),zoomStops:t.stops.map((function(e){return e[0]})),evaluate:function(e){var a=e.zoom;return r(t,n,a,i,o)}}}return{kind:"source",evaluate:function(e,a){var s=a&&a.properties?a.properties[t.property]:void 0;return void 0===s?ur(t.default,n.default):r(t,n,s,i,o)}}}(this._parameters,this._specification))}return y(e,null,[{key:"deserialize",value:function(t){return new e(t._parameters,t._specification)}},{key:"serialize",value:function(e){return{_parameters:e._parameters,_specification:e._specification}}}]),e}();function br(e){var t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec,s=[],u=or(n);if("object"!==u)return[new Qe(t,n,"object expected, ".concat(u," found"))];for(var l in n){var c=l.split(".")[0],h=r[c]||r["*"],f=void 0;if(i[c])f=i[c];else if(r[c])f=Hr;else if(i["*"])f=i["*"];else{if(!r["*"]){s.push(new Qe(t,n[l],'unknown property "'.concat(l,'"')));continue}f=Hr}s=s.concat(f({key:(t?"".concat(t,"."):t)+l,value:n[l],valueSpec:h,style:o,styleSpec:a,object:n,objectKey:l},n))}for(var p in r)i[p]||r[p].required&&void 0===r[p].default&&void 0===n[p]&&s.push(new Qe(t,n,'missing required property "'.concat(p,'"')));return s}function xr(e){var t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||Hr;if("array"!==or(t))return[new Qe(o,t,"array expected, ".concat(or(t)," found"))];if(n.length&&t.length!==n.length)return[new Qe(o,t,"array length ".concat(n.length," expected, length ").concat(t.length," found"))];if(n["min-length"]&&t.length<n["min-length"])return[new Qe(o,t,"array length at least ".concat(n["min-length"]," expected, length ").concat(t.length," found"))];var s={type:n.value,values:n.values};i.$version<7&&(s.function=n.function),"object"===or(n.value)&&(s=n.value);for(var u=[],l=0;l<t.length;l++)u=u.concat(a({array:t,arrayIndex:l,value:t[l],valueSpec:s,style:r,styleSpec:i,key:"".concat(o,"[").concat(l,"]")}));return u}function wr(e){var t=e.key,n=e.value,r=e.valueSpec,i=or(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new Qe(t,n,"number expected, ".concat(i," found"))]:"minimum"in r&&n<r.minimum?[new Qe(t,n,"".concat(n," is less than the minimum value ").concat(r.minimum))]:"maximum"in r&&n>r.maximum?[new Qe(t,n,"".concat(n," is greater than the maximum value ").concat(r.maximum))]:[]}function Er(e){var t,n,r,i=e.valueSpec,o=nt(e.value.type),a={},s="categorical"!==o&&void 0===e.value.property,u=!s,l="array"===or(e.value.stops)&&"array"===or(e.value.stops[0])&&"object"===or(e.value.stops[0][0]),c=br({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===o)return[new Qe(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(xr({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===or(n)&&0===n.length&&t.push(new Qe(e.key,n,"array must have at least one stop")),t},default:function(e){return Hr({key:e.key,value:e.value,valueSpec:i,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===o&&s&&c.push(new Qe(e.key,e.value,'missing required property "property"')),"identity"===o||e.value.stops||c.push(new Qe(e.key,e.value,'missing required property "stops"')),"exponential"===o&&e.valueSpec.expression&&!ir(e.valueSpec)&&c.push(new Qe(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(u&&!nr(e.valueSpec)?c.push(new Qe(e.key,e.value,"property functions not supported")):s&&!rr(e.valueSpec)&&c.push(new Qe(e.key,e.value,"zoom functions not supported"))),"categorical"!==o&&!l||void 0!==e.value.property||c.push(new Qe(e.key,e.value,'"property" property is required')),c;function h(e){var t=[],o=e.value,s=e.key;if("array"!==or(o))return[new Qe(s,o,"array expected, ".concat(or(o)," found"))];if(2!==o.length)return[new Qe(s,o,"array length 2 expected, length ".concat(o.length," found"))];if(l){if("object"!==or(o[0]))return[new Qe(s,o,"object expected, ".concat(or(o[0])," found"))];if(void 0===o[0].zoom)return[new Qe(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new Qe(s,o,"object stop key must have value")];if(r&&r>nt(o[0].zoom))return[new Qe(s,o[0].zoom,"stop zoom values must appear in ascending order")];nt(o[0].zoom)!==r&&(r=nt(o[0].zoom),n=void 0,a={}),t=t.concat(br({key:"".concat(s,"[0]"),value:o[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:wr,value:f}}))}else t=t.concat(f({key:"".concat(s,"[0]"),value:o[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},o));return dr(rt(o[1]))?t.concat([new Qe("".concat(s,"[1]"),o[1],"expressions are not allowed in function stops.")]):t.concat(Hr({key:"".concat(s,"[1]"),value:o[1],valueSpec:i,style:e.style,styleSpec:e.styleSpec}))}function f(e,r){var s=or(e.value),u=nt(e.value),l=null!==e.value?e.value:r;if(t){if(s!==t)return[new Qe(e.key,l,"".concat(s," stop domain type must match previous stop domain type ").concat(t))]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Qe(e.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, ".concat(s," found");return nr(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qe(e.key,l,c)]}return"categorical"!==o||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==o&&"number"===s&&void 0!==n&&u<n?[new Qe(e.key,l,"stop domain values must appear in ascending order")]:(n=u,"categorical"===o&&u in a?[new Qe(e.key,l,"stop domain values must be unique")]:(a[u]=!0,[])):[new Qe(e.key,l,"integer expected, found ".concat(u))]}}function Sr(e){var t=("property"===e.expressionContext?vr:gr)(rt(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new Qe("".concat(e.key).concat(t.key),e.value,t.message)}));var n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new Qe(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!un(n))return[new Qe(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!un(n))return[new Qe(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!ln(n,["zoom","feature-state"]))return[new Qe(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!sn(n))return[new Qe(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Tr(e){var t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(nt(n))&&i.push(new Qe(t,n,"expected one of [".concat(r.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(r.values).indexOf(nt(n))&&i.push(new Qe(t,n,"expected one of [".concat(Object.keys(r.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),i}function kr(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":var t,n=f(e.slice(1));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!kr(r)&&"boolean"!=typeof r)return!1}}catch(i){n.e(i)}finally{n.f()}return!0;default:return!0}}var Cr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ir(e){if(null==e)return{filter:function(){return!0},needGeometry:!1};kr(e)||(e=Mr(e));var t=gr(e,Cr);if("error"===t.result)throw new Error(t.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return{filter:function(e,n,r){return t.value.evaluate(e,n,{},r)},needGeometry:function e(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var n=1;n<t.length;n++)if(e(t[n]))return!0;return!1}(e)}}function Ar(e,t){return e<t?-1:e>t?1:0}function Mr(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?Lr(e[1],e[2],"=="):"!="===n?Or(Lr(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Lr(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(Mr))):"all"===n?["all"].concat(e.slice(1).map(Mr)):"none"===n?["all"].concat(e.slice(1).map(Mr).map(Or)):"in"===n?Nr(e[1],e.slice(2)):"!in"===n?Or(Nr(e[1],e.slice(2))):"has"===n?Pr(e[1]):"!has"===n?Or(Pr(e[1])):"within"!==n||e}function Lr(e,t,n){switch(e){case"$type":return["filter-type-".concat(n),t];case"$id":return["filter-id-".concat(n),t];default:return["filter-".concat(n),e,t]}}function Nr(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(Ar)]]:["filter-in-small",e,["literal",t]]}}function Pr(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Or(e){return["!",e]}function Rr(e){return kr(rt(e.value))?Sr(tt({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(t){var n=t.value,r=t.key;if("array"!==or(n))return[new Qe(r,n,"array expected, ".concat(or(n)," found"))];var i,o=t.styleSpec,a=[];if(n.length<1)return[new Qe(r,n,"filter array must have at least 1 element")];switch(a=a.concat(Tr({key:"".concat(r,"[0]"),value:n[0],valueSpec:o.filter_operator,style:t.style,styleSpec:t.styleSpec})),nt(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===nt(n[1])&&a.push(new Qe(r,n,'"$type" cannot be use with operator "'.concat(n[0],'"')));case"==":case"!=":3!==n.length&&a.push(new Qe(r,n,'filter array for operator "'.concat(n[0],'" must have 3 elements')));case"in":case"!in":n.length>=2&&"string"!==(i=or(n[1]))&&a.push(new Qe("".concat(r,"[1]"),n[1],"string expected, ".concat(i," found")));for(var s=2;s<n.length;s++)i=or(n[s]),"$type"===nt(n[1])?a=a.concat(Tr({key:"".concat(r,"[").concat(s,"]"),value:n[s],valueSpec:o.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new Qe("".concat(r,"[").concat(s,"]"),n[s],"string, number, or boolean expected, ".concat(i," found")));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)a=a.concat(e({key:"".concat(r,"[").concat(u,"]"),value:n[u],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=or(n[1]),2!==n.length?a.push(new Qe(r,n,'filter array for "'.concat(n[0],'" operator must have 2 elements'))):"string"!==i&&a.push(new Qe("".concat(r,"[1]"),n[1],"string expected, ".concat(i," found")));break;case"within":i=or(n[1]),2!==n.length?a.push(new Qe(r,n,'filter array for "'.concat(n[0],'" operator must have 2 elements'))):"object"!==i&&a.push(new Qe("".concat(r,"[1]"),n[1],"object expected, ".concat(i," found")))}return a}(e)}function Dr(e,t){var n=e.key,r=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i["".concat(t,"_").concat(e.layerType)];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===t&&u&&s[u[1]]&&s[u[1]].transition)return Hr({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var l,c=e.valueSpec||s[a];if(!c)return[new Qe(n,o,'unknown property "'.concat(a,'"'))];if("string"===or(o)&&nr(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new Qe(n,o,'"'.concat(a,'" does not support interpolation syntax\n')+'Use an identity property function instead: `{ "type": "identity", "property": '.concat(JSON.stringify(l[1])," }`."))];var h=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new Qe(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&ar(rt(o))&&"identity"===nt(o.type)&&h.push(new Qe(n,o,'"text-font" does not support identity functions'))),h.concat(Hr({key:e.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function Fr(e){return Dr(e,"paint")}function zr(e){return Dr(e,"layout")}function Br(e){var t=[],n=e.value,r=e.key,i=e.style,o=e.styleSpec;n.type||n.ref||t.push(new Qe(r,n,'either "type" or "ref" is required'));var a,s=nt(n.type),u=nt(n.ref);if(n.id)for(var l=nt(n.id),c=0;c<e.arrayIndex;c++){var h=i.layers[c];nt(h.id)===l&&t.push(new Qe(r,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(h.id.__line__)))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(e){e in n&&t.push(new Qe(r,n[e],'"'.concat(e,'" is prohibited for ref layers')))})),i.layers.forEach((function(e){nt(e.id)===u&&(a=e)})),a?a.ref?t.push(new Qe(r,n.ref,"ref cannot reference another ref layer")):s=nt(a.type):t.push(new Qe(r,n.ref,'ref layer "'.concat(u,'" not found')));else if("background"!==s&&"sky"!==s)if(n.source){var f=i.sources&&i.sources[n.source],p=f&&nt(f.type);f?"vector"===p&&"raster"===s?t.push(new Qe(r,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===p&&"raster"!==s?t.push(new Qe(r,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==p||n["source-layer"]?"raster-dem"===p&&"hillshade"!==s?t.push(new Qe(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===p&&f.lineMetrics||t.push(new Qe(r,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new Qe(r,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):t.push(new Qe(r,n.source,'source "'.concat(n.source,'" not found')))}else t.push(new Qe(r,n,'missing required property "source"'));return t=t.concat(br({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Hr({key:"".concat(r,".type"),value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:Rr,layout:function(e){return br({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return zr(tt({layerType:s},e))}}})},paint:function(e){return br({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Fr(tt({layerType:s},e))}}})}}}))}function Ur(e){var t=e.value,n=e.key,r=or(t);return"string"!==r?[new Qe(n,t,"string expected, ".concat(r," found"))]:[]}var Vr={promoteId:function(e){var t=e.key,n=e.value;if("string"===or(n))return Ur({key:t,value:n});var r=[];for(var i in n)r.push.apply(r,c(Ur({key:"".concat(t,".").concat(i),value:n[i]})));return r}};function jr(e){var t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new Qe(n,t,'"type" is required')];var o,a=nt(t.type);switch(a){case"vector":case"raster":case"raster-dem":return o=br({key:n,value:t,valueSpec:r["source_".concat(a.replace("-","_"))],style:e.style,styleSpec:r,objectElementValidators:Vr});case"geojson":if(o=br({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Vr}),t.cluster)for(var s in t.clusterProperties){var u,l,f=h(t.clusterProperties[s],2),p=f[0],d=f[1],g="string"==typeof p?[p,["accumulated"],["get",s]]:p;(u=o).push.apply(u,c(Sr({key:"".concat(n,".").concat(s,".map"),value:d,expressionContext:"cluster-map"}))),(l=o).push.apply(l,c(Sr({key:"".concat(n,".").concat(s,".reduce"),value:g,expressionContext:"cluster-reduce"})))}return o;case"video":return br({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return br({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new Qe(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Tr({key:"".concat(n,".type"),value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function qr(e){var t=e.value,n=e.styleSpec,r=n.light,i=e.style,o=[],a=or(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new Qe("light",t,"object expected, ".concat(a," found"))]);for(var s in t){var u=s.match(/^(.*)-transition$/);o=o.concat(u&&r[u[1]]&&r[u[1]].transition?Hr({key:s,value:t[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Hr({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}):[new Qe(s,t[s],'unknown property "'.concat(s,'"'))])}return o}function Gr(e){var t=e.value,n=e.key,r=e.style,i=e.styleSpec,o=i.terrain,a=[],s=or(t);if(void 0===t)return a;if("object"!==s)return a=a.concat([new Qe("terrain",t,"object expected, ".concat(s," found"))]);for(var u in t){var l=u.match(/^(.*)-transition$/);a=a.concat(l&&o[l[1]]&&o[l[1]].transition?Hr({key:u,value:t[u],valueSpec:i.transition,style:r,styleSpec:i}):o[u]?Hr({key:u,value:t[u],valueSpec:o[u],style:r,styleSpec:i}):[new Qe(u,t[u],'unknown property "'.concat(u,'"'))])}if(t.source){var c=r.sources&&r.sources[t.source],h=c&&nt(c.type);c?"raster-dem"!==h&&a.push(new Qe(n,t.source,"terrain cannot be used with a source of type ".concat(h,', it only be used with a "raster-dem" source type'))):a.push(new Qe(n,t.source,'source "'.concat(t.source,'" not found')))}else a.push(new Qe(n,t,'terrain is missing required property "source"'));return a}var $r={"*":function(){return[]},array:xr,boolean:function(e){var t=e.value,n=e.key,r=or(t);return"boolean"!==r?[new Qe(n,t,"boolean expected, ".concat(r," found"))]:[]},number:wr,color:function(e){var t=e.key,n=e.value,r=or(n);return"string"!==r?[new Qe(t,n,"color expected, ".concat(r," found"))]:null===wt(n)?[new Qe(t,n,'color expected, "'.concat(n,'" found'))]:[]},constants:et,enum:Tr,filter:Rr,function:Er,layer:Br,object:br,source:jr,light:qr,terrain:Gr,string:Ur,formatted:function(e){return 0===Ur(e).length?[]:Sr(e)},resolvedImage:function(e){return 0===Ur(e).length?[]:Sr(e)}};function Hr(e){var t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&ar(nt(t))?Er(e):n.expression&&dr(rt(t))?Sr(e):n.type&&$r[n.type]?$r[n.type](e):br(tt({},e,{valueSpec:n.type?r[n.type]:n}))}function Xr(e){var t=e.value,n=e.key,r=Ur(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new Qe(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new Qe(n,t,'"glyphs" url must include a "{range}" token'))),r}function Wr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ke,n=[];return n=n.concat(Hr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Xr,"*":function(){return[]}}})),e.constants&&(n=n.concat(et({key:"constants",value:e.constants,style:e,styleSpec:t}))),Yr(n)}function Yr(e){return[].concat(e).sort((function(e,t){return e.line-t.line}))}function Zr(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Yr(e.apply(this,n))}}Wr.source=Zr(jr),Wr.light=Zr(qr),Wr.terrain=Zr(Gr),Wr.layer=Zr(Br),Wr.filter=Zr(Rr),Wr.paintProperty=Zr(Fr),Wr.layoutProperty=Zr(zr);var Jr=Wr,Kr=Jr.light,Qr=Jr.paintProperty,ei=Jr.layoutProperty;function ti(e,t){var n=!1;if(t&&t.length){var r,i=f(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;e.fire(new Ze(new Error(o.message))),n=!0}}catch(a){i.e(a)}finally{i.f()}}return n}var ni=ri;function ri(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var l=0;l<this.d*this.d;l++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var c=n/t*e;this.min=-c,this.max=e+c}ri.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},ri.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ri.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},ri.prototype.query=function(e,t,n,r,i){var o=this.min,a=this.max;if(e<=o&&t<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},i),s},ri.prototype._queryCell=function(e,t,n,r,i,o,a,s){var u=this.cells[i];if(null!==u)for(var l=this.keys,c=this.bboxes,h=0;h<u.length;h++){var f=u[h];if(void 0===a[f]){var p=4*f;(s?s(c[p+0],c[p+1],c[p+2],c[p+3]):e<=c[p+2]&&t<=c[p+3]&&n>=c[p+0]&&r>=c[p+1])?(a[f]=!0,o.push(l[f])):a[f]=!1}}},ri.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var u=this._convertToCellCoord(e),l=this._convertToCellCoord(t),c=this._convertToCellCoord(n),h=this._convertToCellCoord(r),f=u;f<=c;f++)for(var p=l;p<=h;p++){var d=this.d*p+f;if((!s||s(this._convertFromCellCoord(f),this._convertFromCellCoord(p),this._convertFromCellCoord(f+1),this._convertFromCellCoord(p+1)))&&i.call(this,e,t,n,r,d,o,a,s))return}},ri.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},ri.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},ri.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=t,a=0;a<e.length;a++){var s=e[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+e.length]=o,i.set(this.keys,o),i[3+e.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var ii=b.ImageData,oi=b.ImageBitmap,ai={};function si(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),ai[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for(var ui in si("Object",Object),ni.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},ni.deserialize=function(e){return new ni(e.buffer)},si("Grid",ni),si("Color",Et),si("Error",Error),si("ResolvedImage",Ct),si("StylePropertyFunction",_r),si("StyleExpression",pr,{omit:["_evaluator"]}),si("ZoomDependentExpression",yr),si("ZoomConstantExpression",mr),si("CompoundExpression",jt,{omit:["_evaluate"]}),Yn)Yn[ui]._classRegistryKey||si("Expression_".concat(ui),Yn[ui]);function li(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function ci(e){return oi&&e instanceof oi}function hi(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(li(e)||ci(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof ii)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){var r,i=[],o=f(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.push(hi(a,t))}}catch(p){o.e(p)}finally{o.f()}return i}if("object"==typeof e){var s=e.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var l=s.serialize?s.serialize(e,t):{};if(!s.serialize){for(var c in e)if(e.hasOwnProperty(c)&&!(ai[u].omit.indexOf(c)>=0)){var h=e[c];l[c]=ai[u].shallow.indexOf(c)>=0?h:hi(h,t)}e instanceof Error&&(l.message=e.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(l.$name=u),l}throw new Error("can't serialize object of type ".concat(typeof e))}function fi(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||li(e)||ci(e)||ArrayBuffer.isView(e)||e instanceof ii)return e;if(Array.isArray(e))return e.map(fi);if("object"==typeof e){var t=e.$name||"Object",n=ai[t].klass;if(!n)throw new Error("can't deserialize unregistered class ".concat(t));if(n.deserialize)return n.deserialize(e);for(var r=Object.create(n.prototype),i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];if("$name"!==a){var s=e[a];r[a]=ai[t].shallow.indexOf(a)>=0?s:fi(s)}}return r}throw new Error("can't deserialize object of type ".concat(typeof e))}var pi=function(){function e(){m(this,e),this.first=!0}return y(e,[{key:"update",value:function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))}}]),e}(),di={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function gi(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;)if(vi(t.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}function mi(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;)if(!yi(t.value.charCodeAt(0)))return!1}catch(r){n.e(r)}finally{n.f()}return!0}function yi(e){return!(di.Arabic(e)||di["Arabic Supplement"](e)||di["Arabic Extended-A"](e)||di["Arabic Presentation Forms-A"](e)||di["Arabic Presentation Forms-B"](e))}function vi(e){return!(746!==e&&747!==e&&(e<4352||!(di["Bopomofo Extended"](e)||di.Bopomofo(e)||di["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||di["CJK Compatibility Ideographs"](e)||di["CJK Compatibility"](e)||di["CJK Radicals Supplement"](e)||di["CJK Strokes"](e)||!(!di["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||di["CJK Unified Ideographs Extension A"](e)||di["CJK Unified Ideographs"](e)||di["Enclosed CJK Letters and Months"](e)||di["Hangul Compatibility Jamo"](e)||di["Hangul Jamo Extended-A"](e)||di["Hangul Jamo Extended-B"](e)||di["Hangul Jamo"](e)||di["Hangul Syllables"](e)||di.Hiragana(e)||di["Ideographic Description Characters"](e)||di.Kanbun(e)||di["Kangxi Radicals"](e)||di["Katakana Phonetic Extensions"](e)||di.Katakana(e)&&12540!==e||!(!di["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!di["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||di["Unified Canadian Aboriginal Syllabics"](e)||di["Unified Canadian Aboriginal Syllabics Extended"](e)||di["Vertical Forms"](e)||di["Yijing Hexagram Symbols"](e)||di["Yi Syllables"](e)||di["Yi Radicals"](e))))}function _i(e){return!(vi(e)||function(e){return!!(di["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||di["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||di["Letterlike Symbols"](e)||di["Number Forms"](e)||di["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||di["Control Pictures"](e)&&9251!==e||di["Optical Character Recognition"](e)||di["Enclosed Alphanumerics"](e)||di["Geometric Shapes"](e)||di["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||di["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||di["CJK Symbols and Punctuation"](e)||di.Katakana(e)||di["Private Use Area"](e)||di["CJK Compatibility Forms"](e)||di["Small Form Variants"](e)||di["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function bi(e){return e>=1424&&e<=2303||di["Arabic Presentation Forms-A"](e)||di["Arabic Presentation Forms-B"](e)}function xi(e,t){return!(!t&&bi(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||di.Khmer(e))}function wi(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;)if(bi(t.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var Ei=null,Si="unavailable",Ti=null,ki=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Si="error"),Ei&&Ei(e)};function Ci(){Ii.fire(new Ye("pluginStateChange",{pluginStatus:Si,pluginURL:Ti}))}var Ii=new Je,Ai=function(){return Si},Mi=function(){if("deferred"!==Si||!Ti)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Si="loading",Ci(),Ti&&Be({url:Ti},(function(e){e?ki(e):(Si="loaded",Ci())}))},Li={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Si||null!=Li.applyArabicShaping},isLoading:function(){return"loading"===Si},setState:function(e){Si=e.pluginStatus,Ti=e.pluginURL},isParsed:function(){return null!=Li.applyArabicShaping&&null!=Li.processBidirectionalText&&null!=Li.processStyledBidirectionalText},getPluginURL:function(){return Ti}},Ni=function(){function e(t,n){m(this,e),this.zoom=t,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.zoomHistory=n.zoomHistory,this.transition=n.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new pi,this.transition={})}return y(e,[{key:"isSupportedScript",value:function(e){return function(e,t){var n,r=f(e);try{for(r.s();!(n=r.n()).done;)if(!xi(n.value.charCodeAt(0),t))return!1}catch(i){r.e(i)}finally{r.f()}return!0}(e,Li.isLoaded())}},{key:"crossFadingFactor",value:function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}},{key:"getCrossfadeParameters",value:function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}}}]),e}(),Pi=function(){function e(t,n){m(this,e),this.property=t,this.value=n,this.expression=function(e,t){if(ar(e))return new _r(e,t);if(dr(e)){var n=vr(e,t);if("error"===n.result)throw new Error(n.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return n.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=Et.parse(e)),{kind:"constant",evaluate:function(){return r}}}(void 0===n?t.specification.default:n,t.specification)}return y(e,[{key:"isDataDriven",value:function(){return"source"===this.expression.kind||"composite"===this.expression.kind}},{key:"possiblyEvaluate",value:function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}]),e}(),Oi=function(){function e(t){m(this,e),this.property=t,this.value=new Pi(t,void 0)}return y(e,[{key:"transitioned",value:function(e,t){return new Di(this.property,this.value,t,N({},e.transition,this.transition),e.now)}},{key:"untransitioned",value:function(){return new Di(this.property,this.value,null,{},0)}}]),e}(),Ri=function(){function e(t){m(this,e),this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}return y(e,[{key:"getValue",value:function(e){return V(this._values[e].value.value)}},{key:"setValue",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Oi(this._values[e].property)),this._values[e].value=new Pi(this._values[e].property,null===t?void 0:V(t))}},{key:"getTransition",value:function(e){return V(this._values[e].transition)}},{key:"setTransition",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Oi(this._values[e].property)),this._values[e].transition=V(t)||void 0}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i);var o=this.getTransition(r);void 0!==o&&(e["".concat(r,"-transition")]=o)}return e}},{key:"transitioned",value:function(e,t){for(var n=new Fi(this._properties),r=0,i=Object.keys(this._values);r<i.length;r++){var o=i[r];n._values[o]=this._values[o].transitioned(e,t._values[o])}return n}},{key:"untransitioned",value:function(){for(var e=new Fi(this._properties),t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t];e._values[r]=this._values[r].untransitioned()}return e}}]),e}(),Di=function(){function e(t,n,r,i,o){m(this,e),this.property=t,this.value=n,this.begin=o+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=r)}return y(e,[{key:"possiblyEvaluate",value:function(e,t,n){var r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(e,t,n);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,n),i,k(a))}return i}}]),e}(),Fi=function(){function e(t){m(this,e),this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}return y(e,[{key:"possiblyEvaluate",value:function(e,t,n){for(var r=new Ui(this._properties),i=0,o=Object.keys(this._values);i<o.length;i++){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(e,t,n)}return r}},{key:"hasTransition",value:function(){for(var e=0,t=Object.keys(this._values);e<t.length;e++){var n=t[e];if(this._values[n].prior)return!0}return!1}}]),e}(),zi=function(){function e(t){m(this,e),this._properties=t,this._values=Object.create(t.defaultPropertyValues)}return y(e,[{key:"getValue",value:function(e){return V(this._values[e].value)}},{key:"setValue",value:function(e,t){this._values[e]=new Pi(this._values[e].property,null===t?void 0:V(t))}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i)}return e}},{key:"possiblyEvaluate",value:function(e,t,n){for(var r=new Ui(this._properties),i=0,o=Object.keys(this._values);i<o.length;i++){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(e,t,n)}return r}}]),e}(),Bi=function(){function e(t,n,r){m(this,e),this.property=t,this.value=n,this.parameters=r}return y(e,[{key:"isConstant",value:function(){return"constant"===this.value.kind}},{key:"constantOr",value:function(e){return"constant"===this.value.kind?this.value.value:e}},{key:"evaluate",value:function(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}]),e}(),Ui=function(){function e(t){m(this,e),this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}return y(e,[{key:"get",value:function(e){return this._values[e]}}]),e}(),Vi=function(){function e(t){m(this,e),this.specification=t}return y(e,[{key:"possiblyEvaluate",value:function(e,t){return e.expression.evaluate(t)}},{key:"interpolate",value:function(e,t,n){var r=gn[this.specification.type];return r?r(e,t,n):e}}]),e}(),ji=function(){function e(t,n){m(this,e),this.specification=t,this.overrides=n}return y(e,[{key:"possiblyEvaluate",value:function(e,t,n,r){return new Bi(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}},{key:"interpolate",value:function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Bi(this,{kind:"constant",value:void 0},e.parameters);var r=gn[this.specification.type];return r?new Bi(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e}},{key:"evaluate",value:function(e,t,n,r,i,o){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,o)}}]),e}(),qi=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"possiblyEvaluate",value:function(e,t,n,r){if(void 0===e.value)return new Bi(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var i=e.expression.evaluate(t,null,{},n,r),o="resolvedImage"===e.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,t);return new Bi(this,{kind:"constant",value:a},t)}if("camera"===e.expression.kind){var s=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new Bi(this,{kind:"constant",value:s},t)}return new Bi(this,e.expression,t)}},{key:"evaluate",value:function(e,t,n,r,i,o){if("source"===e.kind){var a=e.evaluate(t,n,r,i,o);return this._calculate(a,a,a,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value}},{key:"_calculate",value:function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}},{key:"interpolate",value:function(e){return e}}]),n}(ji),Gi=function(){function e(t){m(this,e),this.specification=t}return y(e,[{key:"possiblyEvaluate",value:function(e,t,n,r){if(void 0!==e.value){if("constant"===e.expression.kind){var i=e.expression.evaluate(t,null,{},n,r);return this._calculate(i,i,i,t)}return this._calculate(e.expression.evaluate(new Ni(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Ni(Math.floor(t.zoom),t)),e.expression.evaluate(new Ni(Math.floor(t.zoom+1),t)),t)}}},{key:"_calculate",value:function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}},{key:"interpolate",value:function(e){return e}}]),e}(),$i=function(){function e(t){m(this,e),this.specification=t}return y(e,[{key:"possiblyEvaluate",value:function(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}},{key:"interpolate",value:function(){return!1}}]),e}(),Hi=function e(t){for(var n in m(this,e),this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var r=t[n];r.specification.overridable&&this.overridableProperties.push(n);var i=this.defaultPropertyValues[n]=new Pi(r,void 0),o=this.defaultTransitionablePropertyValues[n]=new Oi(r);this.defaultTransitioningPropertyValues[n]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate({})}};function Xi(e,t){return 256*(e=A(Math.floor(e),0,255))+A(Math.floor(t),0,255)}si("DataDrivenProperty",ji),si("DataConstantProperty",Vi),si("CrossFadedDataDrivenProperty",qi),si("CrossFadedProperty",Gi),si("ColorRampProperty",$i);var Wi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Yi=function e(t,n){m(this,e),this._structArray=t,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Zi=function(){function e(){m(this,e),this.isTransferred=!1,this.capacity=-1,this.resize(0)}return y(e,[{key:"_trim",value:function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}},{key:"clear",value:function(){this.length=0}},{key:"resize",value:function(e){this.reserve(e),this.length=e}},{key:"reserve",value:function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}},{key:"_refreshViews",value:function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}],[{key:"serialize",value:function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}},{key:"deserialize",value:function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}}]),e}();function Ji(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0;return{members:e.map((function(e){var i=Wi[e.type].BYTES_PER_ELEMENT,o=n=Ki(n,Math.max(t,i)),a=e.components||1;return r=Math.max(r,i),n+=i*a,{name:e.name,type:e.type,components:a,offset:o}})),size:Ki(n,Math.max(r,t)),alignment:t}}function Ki(e,t){return Math.ceil(e/t)*t}var Qi=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}]),n}(Zi);Qi.prototype.bytesPerElement=4,si("StructArrayLayout2i4",Qi);var eo=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,e}}]),n}(Zi);eo.prototype.bytesPerElement=8,si("StructArrayLayout4i8",eo);var to=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,o,a){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}},{key:"emplace",value:function(e,t,n,r,i,o,a,s){var u=6*e,l=12*e,c=3*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.uint8[l+4]=r,this.uint8[l+5]=i,this.uint8[l+6]=o,this.uint8[l+7]=a,this.float32[c+2]=s,e}}]),n}(Zi);to.prototype.bytesPerElement=12,si("StructArrayLayout2i4ub1f12",to);var no=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}]),n}(Zi);no.prototype.bytesPerElement=8,si("StructArrayLayout2f8",no);var ro=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,o,a,s,u,l){var c=this.length;return this.resize(c+1),this.emplace(c,e,t,n,r,i,o,a,s,u,l)}},{key:"emplace",value:function(e,t,n,r,i,o,a,s,u,l,c){var h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=u,this.uint16[h+8]=l,this.uint16[h+9]=c,e}}]),n}(Zi);ro.prototype.bytesPerElement=20,si("StructArrayLayout10ui20",ro);var io=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,o,a,s,u,l,c,h){var f=this.length;return this.resize(f+1),this.emplace(f,e,t,n,r,i,o,a,s,u,l,c,h)}},{key:"emplace",value:function(e,t,n,r,i,o,a,s,u,l,c,h,f){var p=12*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=u,this.int16[p+8]=l,this.int16[p+9]=c,this.int16[p+10]=h,this.int16[p+11]=f,e}}]),n}(Zi);io.prototype.bytesPerElement=24,si("StructArrayLayout4i4ui4i24",io);var oo=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}]),n}(Zi);oo.prototype.bytesPerElement=12,si("StructArrayLayout3f12",oo);var ao=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint32[1*e+0]=t,e}}]),n}(Zi);ao.prototype.bytesPerElement=4,si("StructArrayLayout1ul4",ao);var so=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,o,a,s,u,l){var c=this.length;return this.resize(c+1),this.emplace(c,e,t,n,r,i,o,a,s,u,l)}},{key:"emplace",value:function(e,t,n,r,i,o,a,s,u,l,c){var h=16*e,f=8*e;return this.int16[h+0]=t,this.int16[h+1]=n,this.float32[f+1]=r,this.float32[f+2]=i,this.float32[f+3]=o,this.float32[f+4]=a,this.int16[h+10]=s,this.uint32[f+6]=u,this.uint16[h+14]=l,this.uint16[h+15]=c,e}}]),n}(Zi);so.prototype.bytesPerElement=32,si("StructArrayLayout2i4f1i1ul2ui32",so);var uo=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)}},{key:"emplace",value:function(e,t,n,r,i,o,a){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e}}]),n}(Zi);uo.prototype.bytesPerElement=12,si("StructArrayLayout2i2i2i12",uo);var lo=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}},{key:"emplace",value:function(e,t,n,r,i,o){var a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,e}}]),n}(Zi);lo.prototype.bytesPerElement=16,si("StructArrayLayout2f1f2i16",lo);var co=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var o=12*e,a=3*e;return this.uint8[o+0]=t,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,e}}]),n}(Zi);co.prototype.bytesPerElement=12,si("StructArrayLayout2ub2f12",co);var ho=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}]),n}(Zi);ho.prototype.bytesPerElement=6,si("StructArrayLayout3ui6",ho);var fo=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m){var y=this.length;return this.resize(y+1),this.emplace(y,e,t,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m)}},{key:"emplace",value:function(e,t,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y){var v=24*e,_=12*e,b=48*e;return this.int16[v+0]=t,this.int16[v+1]=n,this.uint16[v+2]=r,this.uint16[v+3]=i,this.uint32[_+2]=o,this.uint32[_+3]=a,this.uint32[_+4]=s,this.uint16[v+10]=u,this.uint16[v+11]=l,this.uint16[v+12]=c,this.float32[_+7]=h,this.float32[_+8]=f,this.uint8[b+36]=p,this.uint8[b+37]=d,this.uint8[b+38]=g,this.uint32[_+10]=m,this.int16[v+22]=y,e}}]),n}(Zi);fo.prototype.bytesPerElement=48,si("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",fo);var po=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,_,b,x,w,E,S,T,k,C){var I=this.length;return this.resize(I+1),this.emplace(I,e,t,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,_,b,x,w,E,S,T,k,C)}},{key:"emplace",value:function(e,t,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,_,b,x,w,E,S,T,k,C,I){var A=34*e,M=17*e;return this.int16[A+0]=t,this.int16[A+1]=n,this.int16[A+2]=r,this.int16[A+3]=i,this.int16[A+4]=o,this.int16[A+5]=a,this.int16[A+6]=s,this.int16[A+7]=u,this.uint16[A+8]=l,this.uint16[A+9]=c,this.uint16[A+10]=h,this.uint16[A+11]=f,this.uint16[A+12]=p,this.uint16[A+13]=d,this.uint16[A+14]=g,this.uint16[A+15]=m,this.uint16[A+16]=y,this.uint16[A+17]=v,this.uint16[A+18]=_,this.uint16[A+19]=b,this.uint16[A+20]=x,this.uint16[A+21]=w,this.uint16[A+22]=E,this.uint32[M+12]=S,this.float32[M+13]=T,this.float32[M+14]=k,this.float32[M+15]=C,this.float32[M+16]=I,e}}]),n}(Zi);po.prototype.bytesPerElement=68,si("StructArrayLayout8i15ui1ul4f68",po);var go=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.float32[1*e+0]=t,e}}]),n}(Zi);go.prototype.bytesPerElement=4,si("StructArrayLayout1f4",go);var mo=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}]),n}(Zi);mo.prototype.bytesPerElement=6,si("StructArrayLayout3i6",mo);var yo=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=4*e;return this.uint32[2*e+0]=t,this.uint16[i+2]=n,this.uint16[i+3]=r,e}}]),n}(Zi);yo.prototype.bytesPerElement=8,si("StructArrayLayout1ul2ui8",yo);var vo=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}]),n}(Zi);vo.prototype.bytesPerElement=4,si("StructArrayLayout2ui4",vo);var _o=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint16[1*e+0]=t,e}}]),n}(Zi);_o.prototype.bytesPerElement=2,si("StructArrayLayout1ui2",_o);var bo=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,e}}]),n}(Zi);bo.prototype.bytesPerElement=16,si("StructArrayLayout4f16",bo);var xo=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"anchorPointX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorPointY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"x1",get:function(){return this._structArray.float32[this._pos4+1]}},{key:"y1",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"x2",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"y2",get:function(){return this._structArray.float32[this._pos4+4]}},{key:"padding",get:function(){return this._structArray.int16[this._pos2+10]}},{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+6]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"anchorPoint",get:function(){return new v(this.anchorPointX,this.anchorPointY)}}]),n}(Yi);xo.prototype.size=32;var wo=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"get",value:function(e){return new xo(this,e)}}]),n}(so);si("CollisionBoxArray",wo);var Eo=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"anchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"glyphStartIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"numGlyphs",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"vertexStartIndex",get:function(){return this._structArray.uint32[this._pos4+2]}},{key:"lineStartIndex",get:function(){return this._structArray.uint32[this._pos4+3]}},{key:"lineLength",get:function(){return this._structArray.uint32[this._pos4+4]}},{key:"segment",get:function(){return this._structArray.uint16[this._pos2+10]}},{key:"lowerSize",get:function(){return this._structArray.uint16[this._pos2+11]}},{key:"upperSize",get:function(){return this._structArray.uint16[this._pos2+12]}},{key:"lineOffsetX",get:function(){return this._structArray.float32[this._pos4+7]}},{key:"lineOffsetY",get:function(){return this._structArray.float32[this._pos4+8]}},{key:"writingMode",get:function(){return this._structArray.uint8[this._pos1+36]}},{key:"placedOrientation",get:function(){return this._structArray.uint8[this._pos1+37]},set:function(e){this._structArray.uint8[this._pos1+37]=e}},{key:"hidden",get:function(){return this._structArray.uint8[this._pos1+38]},set:function(e){this._structArray.uint8[this._pos1+38]=e}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+10]},set:function(e){this._structArray.uint32[this._pos4+10]=e}},{key:"associatedIconIndex",get:function(){return this._structArray.int16[this._pos2+22]}}]),n}(Yi);Eo.prototype.size=48;var So=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"get",value:function(e){return new Eo(this,e)}}]),n}(fo);si("PlacedSymbolArray",So);var To=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"anchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"rightJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"centerJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"leftJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"verticalPlacedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+5]}},{key:"placedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+6]}},{key:"verticalPlacedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+7]}},{key:"key",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"textBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"textBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+10]}},{key:"verticalTextBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+11]}},{key:"verticalTextBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+12]}},{key:"iconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+13]}},{key:"iconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"verticalIconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"verticalIconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"featureIndex",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"numHorizontalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"numVerticalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+19]}},{key:"numIconVertices",get:function(){return this._structArray.uint16[this._pos2+20]}},{key:"numVerticalIconVertices",get:function(){return this._structArray.uint16[this._pos2+21]}},{key:"useRuntimeCollisionCircles",get:function(){return this._structArray.uint16[this._pos2+22]}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+12]},set:function(e){this._structArray.uint32[this._pos4+12]=e}},{key:"textBoxScale",get:function(){return this._structArray.float32[this._pos4+13]}},{key:"textOffset0",get:function(){return this._structArray.float32[this._pos4+14]}},{key:"textOffset1",get:function(){return this._structArray.float32[this._pos4+15]}},{key:"collisionCircleDiameter",get:function(){return this._structArray.float32[this._pos4+16]}}]),n}(Yi);To.prototype.size=68;var ko=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"get",value:function(e){return new To(this,e)}}]),n}(po);si("SymbolInstanceArray",ko);var Co=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getoffsetX",value:function(e){return this.float32[1*e+0]}}]),n}(go);si("GlyphOffsetArray",Co);var Io=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getx",value:function(e){return this.int16[3*e+0]}},{key:"gety",value:function(e){return this.int16[3*e+1]}},{key:"gettileUnitDistanceFromAnchor",value:function(e){return this.int16[3*e+2]}}]),n}(mo);si("SymbolLineVertexArray",Io);var Ao=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+0]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+3]}}]),n}(Yi);Ao.prototype.size=8;var Mo=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"get",value:function(e){return new Ao(this,e)}}]),n}(yo);si("FeatureIndexArray",Mo);var Lo=Ji([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),No=t((function(e){e.exports=function(e,t){var n,r,i,o,a,s,u,l;for(r=e.length-(n=3&e.length),i=t,a=3432918353,s=461845907,l=0;l<r;)u=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,i=27492+(65535&(o=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(l+2))<<16;case 2:u^=(255&e.charCodeAt(l+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(l)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),Po=t((function(e){e.exports=function(e,t){for(var n,r=e.length,i=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),Oo=No,Ro=Po;Oo.murmur3=No,Oo.murmur2=Ro;var Do=function(){function e(){m(this,e),this.ids=[],this.positions=[],this.indexed=!1}return y(e,[{key:"add",value:function(e,t,n,r){this.ids.push(Fo(e)),this.positions.push(t,n,r)}},{key:"getPositions",value:function(e){for(var t=Fo(e),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=t?r=i:n=i+1}for(var o=[];this.ids[n]===t;)o.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return o}}],[{key:"serialize",value:function(e,t){var n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return function e(t,n,r,i){for(;r<i;){for(var o=t[r+i>>1],a=r-1,s=i+1;;){do{a++}while(t[a]<o);do{s--}while(t[s]>o);if(a>=s)break;zo(t,a,s),zo(n,3*a,3*s),zo(n,3*a+1,3*s+1),zo(n,3*a+2,3*s+2)}s-r<i-s?(e(t,n,r,s),r=s+1):(e(t,n,s+1,i),i=s)}}(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}},{key:"deserialize",value:function(t){var n=new e;return n.ids=t.ids,n.positions=t.positions,n.indexed=!0,n}}]),e}();function Fo(e){var t=+e;return!isNaN(t)&&t<=w?t:Oo(String(e))}function zo(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}si("FeaturePositionMap",Do);var Bo=function e(t,n){m(this,e),this.gl=t.gl,this.location=n},Uo=function(e){d(n,e);var t=g(n);function n(e,r){var i;return m(this,n),(i=t.call(this,e,r)).current=0,i}return y(n,[{key:"set",value:function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}]),n}(Bo),Vo=function(e){d(n,e);var t=g(n);function n(e,r){var i;return m(this,n),(i=t.call(this,e,r)).current=[0,0,0,0],i}return y(n,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}]),n}(Bo),jo=function(e){d(n,e);var t=g(n);function n(e,r){var i;return m(this,n),(i=t.call(this,e,r)).current=Et.transparent,i}return y(n,[{key:"set",value:function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}]),n}(Bo),qo=new Float32Array(16),Go=new Float32Array(9);function $o(e){return[Xi(255*e.r,255*e.g),Xi(255*e.b,255*e.a)]}var Ho=function(){function e(t,n,r){m(this,e),this.value=t,this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.type=r}return y(e,[{key:"setUniform",value:function(e,t,n){e.set(n.constantOr(this.value))}},{key:"getBinding",value:function(e,t,n){return"color"===this.type?new jo(e,t):new Uo(e,t)}}]),e}(),Xo=function(){function e(t,n){m(this,e),this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}return y(e,[{key:"setConstantPatternPositions",value:function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}},{key:"setUniform",value:function(e,t,n,r){var i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&e.set(i)}},{key:"getBinding",value:function(e,t,n){return"u_pattern"===n.substr(0,9)?new Vo(e,t):new Uo(e,t)}}]),e}(),Wo=function(){function e(t,n,r,i){m(this,e),this.expression=t,this.type=r,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===r?2:1,offset:0}})),this.paintVertexArray=new i}return y(e,[{key:"populatePaintArray",value:function(e,t,n,r,i){var o=this.paintVertexArray.length,a=this.expression.evaluate(new Ni(0),t,{},r,[],i);this.paintVertexArray.resize(e),this._setPaintValue(o,e,a)}},{key:"updatePaintArray",value:function(e,t,n,r){var i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(e,t,i)}},{key:"_setPaintValue",value:function(e,t,n){if("color"===this.type)for(var r=$o(n),i=e;i<t;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var o=e;o<t;o++)this.paintVertexArray.emplace(o,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),e}(),Yo=function(){function e(t,n,r,i,o,a){m(this,e),this.expression=t,this.uniformNames=n.map((function(e){return"u_".concat(e,"_t")})),this.type=r,this.useIntegerZoom=i,this.zoom=o,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===r?4:2,offset:0}})),this.paintVertexArray=new a}return y(e,[{key:"populatePaintArray",value:function(e,t,n,r,i){var o=this.expression.evaluate(new Ni(this.zoom),t,{},r,[],i),a=this.expression.evaluate(new Ni(this.zoom+1),t,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,o,a)}},{key:"updatePaintArray",value:function(e,t,n,r){var i=this.expression.evaluate({zoom:this.zoom},n,r),o=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(e,t,i,o)}},{key:"_setPaintValue",value:function(e,t,n,r){if("color"===this.type)for(var i=$o(n),o=$o(r),a=e;a<t;a++)this.paintVertexArray.emplace(a,i[0],i[1],o[0],o[1]);else{for(var s=e;s<t;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},{key:"setUniform",value:function(e,t){var n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,r=A(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(r)}},{key:"getBinding",value:function(e,t,n){return new Uo(e,t)}}]),e}(),Zo=function(){function e(t,n,r,i,o,a){m(this,e),this.expression=t,this.type=n,this.useIntegerZoom=r,this.zoom=i,this.layerId=a,this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}return y(e,[{key:"populatePaintArray",value:function(e,t,n){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}},{key:"updatePaintArray",value:function(e,t,n,r,i){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],i)}},{key:"_setPaintValues",value:function(e,t,n,r){if(r&&n){var i=n.min,o=n.mid,a=n.max,s=r[i],u=r[o],l=r[a];if(s&&u&&l)for(var c=e;c<t;c++)this.zoomInPaintVertexArray.emplace(c,u.tl[0],u.tl[1],u.br[0],u.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],u.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(c,u.tl[0],u.tl[1],u.br[0],u.br[1],l.tl[0],l.tl[1],l.br[0],l.br[1],u.pixelRatio,l.pixelRatio)}}},{key:"upload",value:function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Lo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Lo.members,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}]),e}(),Jo=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};m(this,e),this.binders={},this._buffers=[];var i=[];for(var o in t.paint._values)if(r(o)){var a=t.paint.get(o);if(a instanceof Bi&&nr(a.property.specification)){var s=Qo(o,t.type),u=a.value,l=a.property.specification.type,c=a.property.useIntegerZoom,h=a.property.specification["property-type"],f="cross-faded"===h||"cross-faded-data-driven"===h;if("constant"===u.kind)this.binders[o]=f?new Xo(u.value,s):new Ho(u.value,s,l),i.push("/u_".concat(o));else if("source"===u.kind||f){var p=ea(o,l,"source");this.binders[o]=f?new Zo(u,l,c,n,p,t.id):new Wo(u,s,l,p),i.push("/a_".concat(o))}else{var d=ea(o,l,"composite");this.binders[o]=new Yo(u,s,l,c,n,d),i.push("/z_".concat(o))}}}this.cacheKey=i.sort().join("")}return y(e,[{key:"getMaxValue",value:function(e){var t=this.binders[e];return t instanceof Wo||t instanceof Yo?t.maxValue:0}},{key:"populatePaintArrays",value:function(e,t,n,r,i){for(var o in this.binders){var a=this.binders[o];(a instanceof Wo||a instanceof Yo||a instanceof Zo)&&a.populatePaintArray(e,t,n,r,i)}}},{key:"setConstantPatternPositions",value:function(e,t){for(var n in this.binders){var r=this.binders[n];r instanceof Xo&&r.setConstantPatternPositions(e,t)}}},{key:"updatePaintArrays",value:function(e,t,n,r,i){var o=!1;for(var a in e){var s,u=t.getPositions(a),l=f(u);try{for(l.s();!(s=l.n()).done;){var c=s.value,h=n.feature(c.index);for(var p in this.binders){var d=this.binders[p];if((d instanceof Wo||d instanceof Yo||d instanceof Zo)&&!0===d.expression.isStateDependent){var g=r.paint.get(p);d.expression=g.value,d.updatePaintArray(c.start,c.end,h,e[a],i),o=!0}}}}catch(m){l.e(m)}finally{l.f()}}return o}},{key:"defines",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];(n instanceof Ho||n instanceof Xo)&&e.push.apply(e,c(n.uniformNames.map((function(e){return"#define HAS_UNIFORM_".concat(e)}))))}return e}},{key:"getBinderAttributes",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Wo||n instanceof Yo)for(var r=0;r<n.paintVertexAttributes.length;r++)e.push(n.paintVertexAttributes[r].name);else if(n instanceof Zo)for(var i=0;i<Lo.members.length;i++)e.push(Lo.members[i].name)}return e}},{key:"getBinderUniforms",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Ho||n instanceof Xo||n instanceof Yo){var r,i=f(n.uniformNames);try{for(i.s();!(r=i.n()).done;){var o=r.value;e.push(o)}}catch(a){i.e(a)}finally{i.f()}}}return e}},{key:"getPaintVertexBuffers",value:function(){return this._buffers}},{key:"getUniforms",value:function(e,t){var n=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof Ho||i instanceof Xo||i instanceof Yo){var o,a=f(i.uniformNames);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(t[s]){var u=i.getBinding(e,t[s],s);n.push({name:s,property:r,binding:u})}}}catch(l){a.e(l)}finally{a.f()}}}return n}},{key:"setUniforms",value:function(e,t,n,r){var i,o=f(t);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.name,u=a.property,l=a.binding;this.binders[u].setUniform(l,r,n.get(u),s)}}catch(c){o.e(c)}finally{o.f()}}},{key:"updatePaintBuffers",value:function(e){for(var t in this._buffers=[],this.binders){var n=this.binders[t];if(e&&n instanceof Zo){var r=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(n instanceof Wo||n instanceof Yo)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}},{key:"upload",value:function(e){for(var t in this.binders){var n=this.binders[t];(n instanceof Wo||n instanceof Yo||n instanceof Zo)&&n.upload(e)}this.updatePaintBuffers()}},{key:"destroy",value:function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Wo||t instanceof Yo||t instanceof Zo)&&t.destroy()}}}]),e}(),Ko=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};m(this,e),this.programConfigurations={};var i,o=f(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.programConfigurations[a.id]=new Jo(a,n,r)}}catch(s){o.e(s)}finally{o.f()}this.needsUpload=!1,this._featureMap=new Do,this._bufferOffset=0}return y(e,[{key:"populatePaintArrays",value:function(e,t,n,r,i,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(e,t,r,i,o);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}},{key:"updatePaintArrays",value:function(e,t,n,r){var i,o=f(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(e,this._featureMap,t,a,r)||this.needsUpload}}catch(s){o.e(s)}finally{o.f()}}},{key:"get",value:function(e){return this.programConfigurations[e]}},{key:"upload",value:function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}},{key:"destroy",value:function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()}}]),e}();function Qo(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}function ea(e,t,n){var r={color:{source:no,composite:bo},number:{source:go,composite:no}},i=function(e){return{"line-pattern":{source:ro,composite:ro},"fill-pattern":{source:ro,composite:ro},"fill-extrusion-pattern":{source:ro,composite:ro}}[e]}(e);return i&&i[n]||r[t][n]}si("ConstantBinder",Ho),si("CrossFadedConstantBinder",Xo),si("SourceExpressionBinder",Wo),si("CrossFadedCompositeBinder",Zo),si("CompositeExpressionBinder",Yo),si("ProgramConfiguration",Jo,{omit:["_buffers"]}),si("ProgramConfigurationSet",Ko);var ta=function(e){d(n,e);var t=g(n);function n(e,r){var i;if(m(this,n),(i=t.call(this)).id=e.id,i.type=e.type,i._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(i.metadata=(e=e).metadata,i.minzoom=e.minzoom,i.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(i.source=e.source,i.sourceLayer=e["source-layer"],i.filter=e.filter),r.layout&&(i._unevaluatedLayout=new zi(r.layout)),r.paint)){for(var o in i._transitionablePaint=new Ri(r.paint),e.paint)i.setPaintProperty(o,e.paint[o],{validate:!1});for(var a in e.layout)i.setLayoutProperty(a,e.layout[a],{validate:!1});i._transitioningPaint=i._transitionablePaint.untransitioned(),i.paint=new Ui(r.paint)}return u(i)}return y(n,[{key:"getCrossfadeParameters",value:function(){return this._crossfadeParameters}},{key:"getLayoutProperty",value:function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}},{key:"setLayoutProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(ei,"layers.".concat(this.id,".layout.").concat(e),e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}},{key:"getPaintProperty",value:function(e){return z(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)}},{key:"setPaintProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(Qr,"layers.".concat(this.id,".paint.").concat(e),e,t,n))return!1;if(z(e,"-transition"))return this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0),!1;var r=this._transitionablePaint._values[e],i="cross-faded-data-driven"===r.property.specification["property-type"],o=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);var s=this._transitionablePaint._values[e].value;return s.isDataDriven()||o||i||this._handleOverridablePaintPropertyUpdate(e,a,s)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){}},{key:"getProgramIds",value:function(){return null}},{key:"getProgramConfiguration",value:function(e){return null}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,n){return!1}},{key:"isHidden",value:function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}},{key:"updateTransitions",value:function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}},{key:"hasTransition",value:function(){return this._transitioningPaint.hasTransition()}},{key:"recalculate",value:function(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}},{key:"serialize",value:function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),U(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))}},{key:"_validate",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&ti(this,e.call(Jr,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:Ke,style:{glyphs:!0,sprite:!0}}))}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!1}},{key:"isTileClipped",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return!1}},{key:"resize",value:function(){}},{key:"isStateDependent",value:function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof Bi&&nr(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}]),n}(Je),na=Ji([{name:"a_pos",components:2,type:"Int16"}],4).members,ra=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];m(this,e),this.segments=t}return y(e,[{key:"prepareSegment",value:function(t,n,r,i){var o=this.segments[this.segments.length-1];return t>e.MAX_VERTEX_ARRAY_LENGTH&&q("Max vertices per segment is ".concat(e.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!o||o.vertexLength+t>e.MAX_VERTEX_ARRAY_LENGTH||o.sortKey!==i)&&(o={vertexOffset:n.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==i&&(o.sortKey=i),this.segments.push(o)),o}},{key:"get",value:function(){return this.segments}},{key:"destroy",value:function(){var e,t=f(this.segments);try{for(t.s();!(e=t.n()).done;){var n=e.value;for(var r in n.vaos)n.vaos[r].destroy()}}catch(i){t.e(i)}finally{t.f()}}}],[{key:"simpleSegment",value:function(t,n,r,i){return new e([{vertexOffset:t,primitiveOffset:n,vertexLength:r,primitiveLength:i,vaos:{},sortKey:0}])}}]),e}();ra.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,si("SegmentVector",ra);var ia=Math.pow(2,14)-1,oa=-ia-1;function aa(e){for(var t=8192/e.extent,n=e.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o],s=Math.round(a.x*t),u=Math.round(a.y*t);a.x=A(s,oa,ia),a.y=A(u,oa,ia),(s<a.x||s>a.x+1||u<a.y||u>a.y+1)&&q("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function sa(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?aa(e):[]}}function ua(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}var la=function(){function e(t){m(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Qi,this.indexArray=new ho,this.segments=new ra,this.programConfigurations=new Ko(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return y(e,[{key:"populate",value:function(e,t,n){var r=this.layers[0],i=[],o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));var a,s=f(e);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=u.feature,c=u.id,h=u.index,p=u.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,g=sa(l,d);if(this.layers[0]._featureFilter.filter(new Ni(this.zoom),g,n)){var m=o?o.evaluate(g,{},n):void 0,y={id:c,properties:l.properties,type:l.type,sourceLayerIndex:p,index:h,geometry:d?g.geometry:aa(l),patterns:{},sortKey:m};i.push(y)}}}catch(T){s.e(T)}finally{s.f()}o&&i.sort((function(e,t){return e.sortKey-t.sortKey}));for(var v=0,_=i;v<_.length;v++){var b=_[v],x=b.geometry,w=b.index,E=b.sourceLayerIndex,S=e[w].feature;this.addFeature(b,x,w,n),t.featureIndex.insert(S,x,w,E,this.index)}}},{key:"update",value:function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,na),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(e,t,n,r){var i,o=f(t);try{for(o.s();!(i=o.n()).done;){var a,s=i.value,u=f(s);try{for(u.s();!(a=u.n()).done;){var l=a.value,c=l.x,h=l.y;if(!(c<0||c>=8192||h<0||h>=8192)){var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),d=p.vertexLength;ua(this.layoutVertexArray,c,h,-1,-1),ua(this.layoutVertexArray,c,h,1,-1),ua(this.layoutVertexArray,c,h,1,1),ua(this.layoutVertexArray,c,h,-1,1),this.indexArray.emplaceBack(d,d+1,d+2),this.indexArray.emplaceBack(d,d+3,d+2),p.vertexLength+=4,p.primitiveLength+=2}}}catch(g){u.e(g)}finally{u.f()}}}catch(g){o.e(g)}finally{o.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r)}}]),e}();function ca(e,t){for(var n=0;n<e.length;n++)if(_a(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(_a(e,t[r]))return!0;return!!da(e,t)}function ha(e,t,n){return!!_a(e,t)||!!ma(t,e,n)}function fa(e,t){if(1===e.length)return va(t,e[0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(_a(e,r[i]))return!0;for(var o=0;o<e.length;o++)if(va(t,e[o]))return!0;for(var a=0;a<t.length;a++)if(da(e,t[a]))return!0;return!1}function pa(e,t,n){if(e.length>1){if(da(e,t))return!0;for(var r=0;r<t.length;r++)if(ma(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(ma(e[i],t,n))return!0;return!1}function da(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],o=0;o<t.length-1;o++)if(ga(r,i,t[o],t[o+1]))return!0;return!1}function ga(e,t,n,r){return G(e,n,r)!==G(t,n,r)&&G(e,t,n)!==G(e,t,r)}function ma(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++)if(ya(e,t[i-1],t[i])<r)return!0;return!1}function ya(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function va(e,t){for(var n,r,i,o=!1,a=0;a<e.length;a++)for(var s=0,u=(n=e[a]).length-1;s<n.length;u=s++)r=n[s],i=n[u],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function _a(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function ba(e,t,n,r,i){var o,a=f(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(t<=s.x&&n<=s.y&&r>=s.x&&i>=s.y)return!0}}catch(p){a.e(p)}finally{a.f()}var u=[new v(t,n),new v(t,i),new v(r,i),new v(r,n)];if(e.length>2){var l,c=f(u);try{for(c.s();!(l=c.n()).done;)if(_a(e,l.value))return!0}catch(p){c.e(p)}finally{c.f()}}for(var h=0;h<e.length-1;h++)if(xa(e[h],e[h+1],u))return!0;return!1}function xa(e,t,n){var r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;var o=G(e,t,n[0]);return o!==G(e,t,n[1])||o!==G(e,t,n[2])||o!==G(e,t,n[3])}function wa(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function Ea(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Sa(e,t,n,r,i){if(!t[0]&&!t[1])return e;var o=v.convert(t)._mult(i);"viewport"===n&&o._rotate(-r);for(var a=[],s=0;s<e.length;s++)a.push(e[s].sub(o));return a}function Ta(e,t,n,r){var i=v.convert(e)._mult(r);return"viewport"===t&&i._rotate(-n),i}si("CircleBucket",la,{omit:["layers"]});var ka=new Hi({"circle-sort-key":new ji(Ke.layout_circle["circle-sort-key"])}),Ca={paint:new Hi({"circle-radius":new ji(Ke.paint_circle["circle-radius"]),"circle-color":new ji(Ke.paint_circle["circle-color"]),"circle-blur":new ji(Ke.paint_circle["circle-blur"]),"circle-opacity":new ji(Ke.paint_circle["circle-opacity"]),"circle-translate":new Vi(Ke.paint_circle["circle-translate"]),"circle-translate-anchor":new Vi(Ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Vi(Ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Vi(Ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ji(Ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ji(Ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ji(Ke.paint_circle["circle-stroke-opacity"])}),layout:ka},Ia="undefined"!=typeof Float32Array?Float32Array:Array;function Aa(){var e=new Ia(9);return Ia!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ma(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function La(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=t[9],p=t[10],d=t[11],g=t[12],m=t[13],y=t[14],v=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*h+w*g,e[1]=_*i+b*u+x*f+w*m,e[2]=_*o+b*l+x*p+w*y,e[3]=_*a+b*c+x*d+w*v,e[4]=(_=n[4])*r+(b=n[5])*s+(x=n[6])*h+(w=n[7])*g,e[5]=_*i+b*u+x*f+w*m,e[6]=_*o+b*l+x*p+w*y,e[7]=_*a+b*c+x*d+w*v,e[8]=(_=n[8])*r+(b=n[9])*s+(x=n[10])*h+(w=n[11])*g,e[9]=_*i+b*u+x*f+w*m,e[10]=_*o+b*l+x*p+w*y,e[11]=_*a+b*c+x*d+w*v,e[12]=(_=n[12])*r+(b=n[13])*s+(x=n[14])*h+(w=n[15])*g,e[13]=_*i+b*u+x*f+w*m,e[14]=_*o+b*l+x*p+w*y,e[15]=_*a+b*c+x*d+w*v,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Na=La;function Pa(){var e=new Ia(3);return Ia!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Oa(e){var t=new Ia(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ra(e){return Math.hypot(e[0],e[1],e[2])}function Da(e,t,n){var r=new Ia(3);return r[0]=e,r[1]=t,r[2]=n,r}function Fa(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function za(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Ba(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Ua(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Va(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function ja(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function qa(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2];return e[0]=i*u-o*s,e[1]=o*a-r*u,e[2]=r*s-i*a,e}function Ga(e,t,n){var r=n[0],i=n[1],o=n[2],a=t[0],s=t[1],u=t[2],l=i*u-o*s,c=o*a-r*u,h=r*s-i*a,f=i*h-o*c,p=o*l-r*h,d=r*c-i*l,g=2*n[3];return c*=g,h*=g,p*=2,d*=2,e[0]=a+(l*=g)+(f*=2),e[1]=s+c+p,e[2]=u+h+d,e}var $a,Ha=za,Xa=Ra;function Wa(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function Ya(){var e=new Ia(4);return Ia!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Za(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Ja(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*s,e[1]=i*u+o*s,e[2]=o*u-i*s,e[3]=a*u-r*s,e}Pa(),$a=new Ia(4),Ia!=Float32Array&&($a[0]=0,$a[1]=0,$a[2]=0,$a[3]=0),Pa(),Da(1,0,0),Da(0,1,0),Ya(),Ya(),Aa();var Ka=function(){function e(t,n){m(this,e),this.points=t,this.planes=n}return y(e,null,[{key:"fromInvProjectionMatrix",value:function(t,n,r){var i=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(e){var r=Wa([],e,t),o=1/r[3]/n*i;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(r,r,[o,o,1/r[3],o])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var t=Va([],qa([],Ha([],o[e[0]],o[e[1]]),Ha([],o[e[2]],o[e[1]]))),n=-ja(t,o[e[1]]);return t.concat(n)}));return new e(o,a)}}]),e}(),Qa=function(){function e(t,n){m(this,e),this.min=t,this.max=n,this.center=Ba([],Fa([],this.min,this.max),.5)}return y(e,[{key:"quadrant",value:function(t){for(var n=[t%2==0,t<2],r=Oa(this.min),i=Oa(this.max),o=0;o<n.length;o++)r[o]=n[o]?this.min[o]:this.center[o],i[o]=n[o]?this.center[o]:this.max[o];return i[2]=this.max[2],new e(r,i)}},{key:"distanceX",value:function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}},{key:"distanceY",value:function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}},{key:"distanceZ",value:function(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}},{key:"intersects",value:function(e){for(var t,n,r=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],i=!0,o=0;o<e.planes.length;o++){for(var a=e.planes[o],s=0,u=0;u<r.length;u++)s+=(t=a)[0]*(n=r[u])[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]>=0;if(0===s)return 0;s!==r.length&&(i=!1)}if(i)return 2;for(var l=0;l<3;l++){for(var c=Number.MAX_VALUE,h=-Number.MAX_VALUE,f=0;f<e.points.length;f++){var p=e.points[f][l]-this.min[l];c=Math.min(c,p),h=Math.max(h,p)}if(h<0||c>this.max[l]-this.min[l])return 0}return 1}}]),e}();function es(e,t,n){var r=Wa([],[e.x,e.y,t,1],n);return new v(r[0]/r[3],r[1]/r[3])}var ts=Da(0,0,0),ns=Da(0,0,1);function rs(e,t){var n=Pa();return ts[2]=t,e.intersectsPlane(ts,ns,n),new v(n[0],n[1])}var is=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return n}(la);function os(e,t,n,r){var i=t.width,o=t.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return e.width=i,e.height=o,e.data=r,e}function as(e,t,n){var r=t.width,i=t.height;if(r!==e.width||i!==e.height){var o=os({},{width:r,height:i},n);ss(e,o,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=o.data}}function ss(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=e.data,s=t.data,u=0;u<i.height;u++)for(var l=((n.y+u)*e.width+n.x)*o,c=((r.y+u)*t.width+r.x)*o,h=0;h<i.width*o;h++)s[c+h]=a[l+h];return t}si("HeatmapBucket",is,{omit:["layers"]});var us=function(){function e(t,n){m(this,e),os(this,t,1,n)}return y(e,[{key:"resize",value:function(e){as(this,e,1)}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,r,i){ss(e,t,n,r,i,1)}}]),e}(),ls=function(){function e(t,n){m(this,e),os(this,t,4,n)}return y(e,[{key:"resize",value:function(e){as(this,e,4)}},{key:"replace",value:function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,r,i){ss(e,t,n,r,i,4)}}]),e}();si("AlphaImage",us),si("RGBAImage",ls);var cs={paint:new Hi({"heatmap-radius":new ji(Ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ji(Ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Vi(Ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $i(Ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Vi(Ke.paint_heatmap["heatmap-opacity"])})};function hs(e){var t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new ls({width:n,height:r}),o=function(n,r,o){t[e.evaluationKey]=o;var a=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(e.clips)for(var a=0,s=0;a<r;++a,s+=4*n)for(var u=0,l=0;u<n;u++,l+=4){var c=u/(n-1),h=e.clips[a];o(s,l,h.start*(1-c)+h.end*c)}else for(var f=0,p=0;f<n;f++,p+=4)o(0,p,f/(n-1));return i}var fs={paint:new Hi({"hillshade-illumination-direction":new Vi(Ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Vi(Ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Vi(Ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Vi(Ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Vi(Ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Vi(Ke.paint_hillshade["hillshade-accent-color"])})},ps=Ji([{name:"a_pos",components:2,type:"Int16"}],4).members,ds=ms,gs=ms;function ms(e,t,n){n=n||2;var r,i,o,a,s,u,l,c=t&&t.length,h=c?t[0]*n:e.length,f=ys(e,0,h,n,!0),p=[];if(!f||f.next===f.prev)return p;if(c&&(f=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=ys(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(Is(a));for(s.sort(Ss),i=0;i<s.length;i++)Ts(s[i],n),n=vs(n,n.next);return n}(e,t,f,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var d=n;d<h;d+=n)(s=e[d])<r&&(r=s),(u=e[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return _s(f,p,n,r,i,l),p}function ys(e,t,n,r,i){var o,a;if(i===Vs(e,t,n,r)>0)for(o=t;o<n;o+=r)a=zs(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=zs(o,e[o],e[o+1],a);return a&&Ns(a,a.next)&&(Bs(a),a=a.next),a}function vs(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Ns(r,r.next)&&0!==Ls(r.prev,r,r.next))r=r.next;else{if(Bs(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function _s(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Cs(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(e,r,i,o);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?xs(e,r,i,o):bs(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),Bs(e),e=u.next,l=u.next;else if((e=u)===l){a?1===a?_s(e=ws(vs(e),t,n),t,n,r,i,o,2):2===a&&Es(e,t,n,r,i,o):_s(vs(e),t,n,r,i,o,1);break}}}function bs(e){var t=e.prev,n=e,r=e.next;if(Ls(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(As(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Ls(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function xs(e,t,n,r){var i=e.prev,o=e,a=e.next;if(Ls(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=Cs(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,t,n,r),c=Cs(s,u,t,n,r),h=e.prevZ,f=e.nextZ;h&&h.z>=l&&f&&f.z<=c;){if(h!==e.prev&&h!==e.next&&As(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Ls(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,f!==e.prev&&f!==e.next&&As(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Ls(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;h&&h.z>=l;){if(h!==e.prev&&h!==e.next&&As(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Ls(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;f&&f.z<=c;){if(f!==e.prev&&f!==e.next&&As(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Ls(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function ws(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!Ns(i,o)&&Ps(i,r,r.next,o)&&Ds(i,o)&&Ds(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),Bs(r),Bs(r.next),r=e=o),r=r.next}while(r!==e);return vs(r)}function Es(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Ms(a,s)){var u=Fs(a,s);return a=vs(a,a.next),u=vs(u,u.next),_s(a,t,n,r,i,o),void _s(u,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function Ss(e,t){return e.x-t.x}function Ts(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n;var u,l=n,c=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&As(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),Ds(r,e)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&ks(n,r)))&&(n=r,f=u)),r=r.next}while(r!==l);return n}(e,t)){var n=Fs(t,e);vs(t,t.next),vs(n,n.next)}}function ks(e,t){return Ls(e.prev,e,t.prev)<0&&Ls(t.next,e,e.next)<0}function Cs(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Is(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function As(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Ms(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ps(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Ds(e,t)&&Ds(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Ls(e.prev,e,t.prev)||Ls(e,t.prev,t))||Ns(e,t)&&Ls(e.prev,e,e.next)>0&&Ls(t.prev,t,t.next)>0)}function Ls(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ns(e,t){return e.x===t.x&&e.y===t.y}function Ps(e,t,n,r){var i=Rs(Ls(e,t,n)),o=Rs(Ls(e,t,r)),a=Rs(Ls(n,r,e)),s=Rs(Ls(n,r,t));return i!==o&&a!==s||!(0!==i||!Os(e,n,t))||!(0!==o||!Os(e,r,t))||!(0!==a||!Os(n,e,r))||!(0!==s||!Os(n,t,r))}function Os(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Rs(e){return e>0?1:e<0?-1:0}function Ds(e,t){return Ls(e.prev,e,e.next)<0?Ls(e,t,e.next)>=0&&Ls(e,e.prev,t)>=0:Ls(e,t,e.prev)<0||Ls(e,e.next,t)<0}function Fs(e,t){var n=new Us(e.i,e.x,e.y),r=new Us(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function zs(e,t,n,r){var i=new Us(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Bs(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Us(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Vs(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function js(e,t,n,r,i){!function e(t,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var h=t[n],f=r,p=i;for(qs(t,r,n),o(t[i],h)>0&&qs(t,r,i);f<p;){for(qs(t,f,p),f++,p--;o(t[f],h)<0;)f++;for(;o(t[p],h)>0;)p--}0===o(t[r],h)?qs(t,r,p):qs(t,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}}(e,t,n||0,r||e.length-1,i||Gs)}function qs(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Gs(e,t){return e<t?-1:e>t?1:0}function $s(e,t){var n=e.length;if(n<=1)return[e];for(var r,i,o=[],a=0;a<n;a++){var s=$(e[a]);0!==s&&(e[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[e[a]]):r.push(e[a]))}if(r&&o.push(r),t>1)for(var u=0;u<o.length;u++)o[u].length<=t||(js(o[u],t,1,o[u].length-1,Hs),o[u]=o[u].slice(0,t));return o}function Hs(e,t){return t.area-e.area}function Xs(e,t,n){var r,i=n.patternDependencies,o=!1,a=f(t);try{for(a.s();!(r=a.n()).done;){var s=r.value.paint.get("".concat(e,"-pattern"));s.isConstant()||(o=!0);var u=s.constantOr(null);u&&(o=!0,i[u.to]=!0,i[u.from]=!0)}}catch(l){a.e(l)}finally{a.f()}return o}function Ws(e,t,n,r,i){var o,a=i.patternDependencies,s=f(t);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=u.paint.get("".concat(e,"-pattern")).value;if("constant"!==l.kind){var c=l.evaluate({zoom:r-1},n,{},i.availableImages),h=l.evaluate({zoom:r},n,{},i.availableImages),p=l.evaluate({zoom:r+1},n,{},i.availableImages);c=c&&c.name?c.name:c,h=h&&h.name?h.name:h,p=p&&p.name?p.name:p,a[c]=!0,a[h]=!0,a[p]=!0,n.patterns[u.id]={min:c,mid:h,max:p}}}}catch(d){s.e(d)}finally{s.f()}return n}ms.deviation=function(e,t,n,r){var i=t&&t.length,o=Math.abs(Vs(e,0,i?t[0]*n:e.length,n));if(i)for(var a=0,s=t.length;a<s;a++)o-=Math.abs(Vs(e,t[a]*n,a<s-1?t[a+1]*n:e.length,n));var u=0;for(a=0;a<r.length;a+=3){var l=r[a]*n,c=r[a+1]*n,h=r[a+2]*n;u+=Math.abs((e[l]-e[h])*(e[c+1]-e[l+1])-(e[l]-e[c])*(e[h+1]-e[l+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},ms.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&n.holes.push(r+=e[i-1].length)}return n},ds.default=gs;var Ys=function(){function e(t){m(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Qi,this.indexArray=new ho,this.indexArray2=new vo,this.programConfigurations=new Ko(t.layers,t.zoom),this.segments=new ra,this.segments2=new ra,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return y(e,[{key:"populate",value:function(e,t,n){this.hasPattern=Xs("fill",this.layers,t);var r,i=this.layers[0].layout.get("fill-sort-key"),o=[],a=f(e);try{for(a.s();!(r=a.n()).done;){var s=r.value,u=s.feature,l=s.id,c=s.index,h=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d=sa(u,p);if(this.layers[0]._featureFilter.filter(new Ni(this.zoom),d,n)){var g=i?i.evaluate(d,{},n,t.availableImages):void 0,m={id:l,properties:u.properties,type:u.type,sourceLayerIndex:h,index:c,geometry:p?d.geometry:aa(u),patterns:{},sortKey:g};o.push(m)}}}catch(S){a.e(S)}finally{a.f()}i&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=0,v=o;y<v.length;y++){var _=v[y],b=_.geometry,x=_.index,w=_.sourceLayerIndex;if(this.hasPattern){var E=Ws("fill",this.layers,_,this.zoom,t);this.patternFeatures.push(E)}else this.addFeature(_,b,x,n,{});t.featureIndex.insert(e[x].feature,b,x,w,this.index)}}},{key:"update",value:function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}},{key:"addFeatures",value:function(e,t,n){var r,i=f(this.patternFeatures);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.addFeature(o,o.geometry,o.index,t,n)}}catch(a){i.e(a)}finally{i.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ps),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}},{key:"addFeature",value:function(e,t,n,r,i){var o,a=f($s(t,500));try{for(a.s();!(o=a.n()).done;){var s,u=o.value,l=0,c=f(u);try{for(c.s();!(s=c.n()).done;)l+=s.value.length}catch(S){c.e(S)}finally{c.f()}var h,p=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray),d=p.vertexLength,g=[],m=[],y=f(u);try{for(y.s();!(h=y.n()).done;){var v=h.value;if(0!==v.length){v!==u[0]&&m.push(g.length/2);var _=this.segments2.prepareSegment(v.length,this.layoutVertexArray,this.indexArray2),b=_.vertexLength;this.layoutVertexArray.emplaceBack(v[0].x,v[0].y),this.indexArray2.emplaceBack(b+v.length-1,b),g.push(v[0].x),g.push(v[0].y);for(var x=1;x<v.length;x++)this.layoutVertexArray.emplaceBack(v[x].x,v[x].y),this.indexArray2.emplaceBack(b+x-1,b+x),g.push(v[x].x),g.push(v[x].y);_.vertexLength+=v.length,_.primitiveLength+=v.length}}}catch(S){y.e(S)}finally{y.f()}for(var w=ds(g,m),E=0;E<w.length;E+=3)this.indexArray.emplaceBack(d+w[E],d+w[E+1],d+w[E+2]);p.vertexLength+=l,p.primitiveLength+=w.length/3}}catch(S){a.e(S)}finally{a.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}}]),e}();si("FillBucket",Ys,{omit:["layers","patternFeatures"]});var Zs=new Hi({"fill-sort-key":new ji(Ke.layout_fill["fill-sort-key"])}),Js={paint:new Hi({"fill-antialias":new Vi(Ke.paint_fill["fill-antialias"]),"fill-opacity":new ji(Ke.paint_fill["fill-opacity"]),"fill-color":new ji(Ke.paint_fill["fill-color"]),"fill-outline-color":new ji(Ke.paint_fill["fill-outline-color"]),"fill-translate":new Vi(Ke.paint_fill["fill-translate"]),"fill-translate-anchor":new Vi(Ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new qi(Ke.paint_fill["fill-pattern"])}),layout:Zs},Ks=Ji([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Qs=Ji([{name:"a_centroid_pos",components:2,type:"Uint16"}]),eu=Ks.members,tu=nu;function nu(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(ru,this,t)}function ru(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function iu(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)r+=((n=e[a]).x-(t=e[i]).x)*(t.y+n.y);return r}nu.types=["Unknown","Point","LineString","Polygon"],nu.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,o=0,a=0,s=[];e.pos<n;){if(i<=0){var u=e.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)o+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new v(o,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},nu.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},nu.prototype.toGeoJSON=function(e,t,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*e,s=this.extent*t,u=this.loadGeometry(),l=nu.types[this.type];function c(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<u.length;r++)h[r]=u[r][0];c(u=h);break;case 2:for(r=0;r<u.length;r++)c(u[r]);break;case 3:for(u=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=iu(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)c(u[r][i])}1===u.length?u=u[0]:l="Multi"+l;var f={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(f.id=this.id),f};var ou=au;function au(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(su,this,t),this.length=this._features.length}function su(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}function uu(e,t,n){if(3===e){var r=new ou(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}au.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new tu(this._pbf,t,this.extent,this._keys,this._values)};var lu={VectorTile:function(e,t){this.layers=e.readFields(uu,{},t)},VectorTileFeature:tu,VectorTileLayer:ou},cu=lu.VectorTileFeature.types,hu=Math.pow(2,13);function fu(e,t,n,r,i,o,a,s){e.emplaceBack((t<<1)+a,(n<<1)+o,(Math.floor(r*hu)<<1)+i,Math.round(s))}var pu=function(){function e(){m(this,e),this.acc=new v(0,0),this.polyCount=[]}return y(e,[{key:"startRing",value:function(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new v(e.x,e.y),this.max=new v(e.x,e.y))}},{key:"append",value:function(e,t){this.currentPolyCount.edges++,this.acc._add(e);var n=!!this.borders,r=this.min,i=this.max;e.x<r.x?(r.x=e.x,n=!0):e.x>i.x&&(i.x=e.x,n=!0),e.y<r.y?(r.y=e.y,n=!0):e.y>i.y&&(i.y=e.y,n=!0),((0===e.x||8192===e.x)&&e.x===t.x)!=((0===e.y||8192===e.y)&&e.y===t.y)&&this.processBorderOverlap(e,t),n&&this.checkBorderIntersection(e,t)}},{key:"checkBorderIntersection",value:function(e,t){t.x<0!=e.x<0&&this.addBorderIntersection(0,dn(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>8192!=e.x>8192&&this.addBorderIntersection(1,dn(t.y,e.y,(8192-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,dn(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>8192!=e.y>8192&&this.addBorderIntersection(3,dn(t.x,e.x,(8192-t.y)/(e.y-t.y)))}},{key:"addBorderIntersection",value:function(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);var n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}},{key:"processBorderOverlap",value:function(e,t){if(e.x===t.x){if(e.y===t.y)return;var n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{var r=0===e.y?2:3;this.addBorderIntersection(r,t.x),this.addBorderIntersection(r,e.x)}}},{key:"centroid",value:function(){var e=this.polyCount.reduce((function(e,t){return e+t.edges}),0);return 0!==e?this.acc.div(e)._round():new v(0,0)}},{key:"span",value:function(){return new v(this.max.x-this.min.x,this.max.y-this.min.y)}},{key:"intersectsCount",value:function(){return this.borders.reduce((function(e,t){return e+ +(t[0]!==Number.MAX_VALUE)}),0)}}]),e}(),du=function(){function e(t){m(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new eo,this.centroidVertexArray=new vo,this.indexArray=new ho,this.programConfigurations=new Ko(t.layers,t.zoom),this.segments=new ra,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.enableTerrain=t.enableTerrain}return y(e,[{key:"populate",value:function(e,t,n){this.features=[],this.hasPattern=Xs("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(e){var t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/8192/(1<<e.z)}(n);var r,i=f(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.feature,s=o.id,u=o.index,l=o.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,h=sa(a,c);if(this.layers[0]._featureFilter.filter(new Ni(this.zoom),h,n)){var p={id:s,sourceLayerIndex:l,index:u,geometry:c?h.geometry:aa(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(Ws("fill-extrusion",this.layers,p,this.zoom,t)):this.addFeature(p,p.geometry,u,n,{}),t.featureIndex.insert(a,p.geometry,u,l,this.index)}}}catch(d){i.e(d)}finally{i.f()}this.sortBorders()}},{key:"addFeatures",value:function(e,t,n){var r,i=f(this.features);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.geometry;this.addFeature(o,a,o.index,t,n)}}catch(s){i.e(s)}finally{i.f()}this.sortBorders()}},{key:"update",value:function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,eu),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"uploadCentroid",value:function(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Qs.members,!0),this.needsCentroidUpdate=!1)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(e,t,n,r,i){var o,a,s=this.enableTerrain&&e.properties&&e.properties.hasOwnProperty("type")&&e.properties.hasOwnProperty("height")&&"Polygon"===cu[e.type]?new pu:null,u=f($s(t,500));try{for(u.s();!(o=u.n()).done;){var l=o.value,c=0,h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(!(0===l.length||(a=l[0]).every((function(e){return e.x<=0}))||a.every((function(e){return e.x>=8192}))||a.every((function(e){return e.y<=0}))||a.every((function(e){return e.y>=8192})))){for(var p=0;p<l.length;p++){var d=l[p];if(0!==d.length){c+=d.length;var g=0;s&&s.startRing(d[0]);for(var m=0;m<d.length;m++){var y=d[m];if(m>=1){var v=d[m-1];if(!gu(y,v)){s&&s.append(y,v),h.vertexLength+4>ra.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _=y.sub(v)._perp(),b=_.x/(Math.abs(_.x)+Math.abs(_.y)),x=_.y>0?1:0,w=v.dist(y);g+w>32768&&(g=0),fu(this.layoutVertexArray,y.x,y.y,b,x,0,0,g),fu(this.layoutVertexArray,y.x,y.y,b,x,0,1,g),g+=w,fu(this.layoutVertexArray,v.x,v.y,b,x,0,0,g),fu(this.layoutVertexArray,v.x,v.y,b,x,0,1,g);var E=h.vertexLength;this.indexArray.emplaceBack(E,E+2,E+1),this.indexArray.emplaceBack(E+1,E+2,E+3),h.vertexLength+=4,h.primitiveLength+=2}}}}}if(h.vertexLength+c>ra.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray)),"Polygon"===cu[e.type]){for(var S=[],T=[],k=h.vertexLength,C=0;C<l.length;C++){var I=l[C];if(0!==I.length){I!==l[0]&&T.push(S.length/2);for(var A=0;A<I.length;A++){var M=I[A];fu(this.layoutVertexArray,M.x,M.y,0,0,1,1,0),S.push(M.x),S.push(M.y),s&&s.currentPolyCount.top++}}}for(var L=ds(S,T),N=0;N<L.length;N+=3)this.indexArray.emplaceBack(k+L[N],k+L[N+2],k+L[N+1]);h.primitiveLength+=L.length/3,h.vertexLength+=c}}}}catch(D){u.e(D)}finally{u.f()}if(s&&s.polyCount.length>0){if(s.borders){s.vertexArrayOffset=this.centroidVertexArray.length;for(var P=s.borders,O=this.featuresOnBorder.push(s)-1,R=0;R<4;R++)P[R][0]!==Number.MAX_VALUE&&this.borders[R].push(O)}this.encodeCentroid(s.borders?void 0:s.centroid(),s)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}},{key:"sortBorders",value:function(){for(var e=this,t=function(t){e.borders[t].sort((function(n,r){return e.featuresOnBorder[n].borders[t][0]-e.featuresOnBorder[r].borders[t][0]}))},n=0;n<4;n++)t(n)}},{key:"encodeCentroid",value:function(e,t){var n,r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)if(0!==e.y){var o=t.span()._mult(this.tileToMeter);n=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(o.x/10)),r=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(o.y/10))}else n=Math.ceil(7.3*e.x),r=0;else n=0,r=+i;var a,s=i?this.centroidVertexArray.length:t.vertexArrayOffset,u=f(t.polyCount);try{for(u.s();!(a=u.n()).done;){var l=a.value;i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*l.edges+l.top);for(var c=0;c<2*l.edges;c++)this.centroidVertexArray.emplace(s++,0,r),this.centroidVertexArray.emplace(s++,n,r);for(var h=0;h<l.top;h++)this.centroidVertexArray.emplace(s++,n,r)}}catch(p){u.e(p)}finally{u.f()}}}]),e}();function gu(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}si("FillExtrusionBucket",du,{omit:["layers","features"]}),si("PartMetadata",pu);var mu={paint:new Hi({"fill-extrusion-opacity":new Vi(Ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ji(Ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Vi(Ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Vi(Ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new qi(Ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ji(Ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ji(Ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Vi(Ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function yu(e,t){return e.x*t.x+e.y*t.y}function vu(e,t){if(1===e.length){for(var n,r=0,i=t[r++];!n||i.equals(n);)if(!(n=t[r++]))return 1/0;for(;r<t.length;r++){var o=t[r],a=e[0],s=n.sub(i),u=o.sub(i),l=a.sub(i),c=yu(s,s),h=yu(s,u),p=yu(u,u),d=yu(l,s),g=yu(l,u),m=c*p-h*h,y=(p*d-h*g)/m,v=(c*g-h*d)/m,_=i.z*(1-y-v)+n.z*y+o.z*v;if(isFinite(_))return _}return 1/0}var b,x=1/0,w=f(t);try{for(w.s();!(b=w.n()).done;){var E=b.value;x=Math.min(x,E.z)}}catch(S){w.e(S)}finally{w.f()}return x}var _u=Ji([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4).members,bu=Ji([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,xu=lu.VectorTileFeature.types,wu=Math.cos(Math.PI/180*37.5),Eu=function(){function e(t){var n=this;m(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(e){n.gradients[e.id]={}})),this.layoutVertexArray=new to,this.layoutVertexArray2=new no,this.indexArray=new ho,this.programConfigurations=new Ko(t.layers,t.zoom),this.segments=new ra,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return y(e,[{key:"populate",value:function(e,t,n){this.hasPattern=Xs("line",this.layers,t);var r,i=this.layers[0].layout.get("line-sort-key"),o=[],a=f(e);try{for(a.s();!(r=a.n()).done;){var s=r.value,u=s.feature,l=s.id,c=s.index,h=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d=sa(u,p);if(this.layers[0]._featureFilter.filter(new Ni(this.zoom),d,n)){var g=i?i.evaluate(d,{},n):void 0,m={id:l,properties:u.properties,type:u.type,sourceLayerIndex:h,index:c,geometry:p?d.geometry:aa(u),patterns:{},sortKey:g};o.push(m)}}}catch(S){a.e(S)}finally{a.f()}i&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=0,v=o;y<v.length;y++){var _=v[y],b=_.geometry,x=_.index,w=_.sourceLayerIndex;if(this.hasPattern){var E=Ws("line",this.layers,_,this.zoom,t);this.patternFeatures.push(E)}else this.addFeature(_,b,x,n,{});t.featureIndex.insert(e[x].feature,b,x,w,this.index)}}},{key:"update",value:function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}},{key:"addFeatures",value:function(e,t,n){var r,i=f(this.patternFeatures);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.addFeature(o,o.geometry,o.index,t,n)}}catch(a){i.e(a)}finally{i.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,bu)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,_u),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"lineFeatureClips",value:function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}},{key:"addFeature",value:function(e,t,n,r,i){var o=this.layers[0].layout,a=o.get("line-join").evaluate(e,{}),s=o.get("line-cap"),u=o.get("line-miter-limit"),l=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);var c,h=f(t);try{for(h.s();!(c=h.n()).done;){var p=c.value;this.addLine(p,e,a,s,u,l)}}catch(d){h.e(d)}finally{h.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}},{key:"addLine",value:function(e,t,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<e.length-1;a++)this.totalDistance+=e[a].dist(e[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===xu[t.type],u=e.length;u>=2&&e[u-1].equals(e[u-2]);)u--;for(var l=0;l<u-1&&e[l].equals(e[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===n&&(i=1.05);var c,h=this.overscaling<=16?122880/(512*this.overscaling):0,f=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),p=void 0,d=void 0,g=void 0,m=void 0;this.e1=this.e2=-1,s&&(c=e[u-2],m=e[l].sub(c)._unit()._perp());for(var y=l;y<u;y++)if(!(d=y===u-1?s?e[l+1]:void 0:e[y+1])||!e[y].equals(d)){m&&(g=m),c&&(p=c),c=e[y],m=d?d.sub(c)._unit()._perp():g;var v=(g=g||m).add(m);0===v.x&&0===v.y||v._unit();var _=g.x*m.x+g.y*m.y,b=v.x*m.x+v.y*m.y,x=0!==b?1/b:1/0,w=2*Math.sqrt(2-2*b),E=b<wu&&p&&d,S=g.x*m.y-g.y*m.x>0;if(E&&y>l){var T=c.dist(p);if(T>2*h){var k=c.sub(c.sub(p)._mult(h/T)._round());this.updateDistance(p,k),this.addCurrentVertex(k,g,0,0,f),p=k}}var C=p&&d,I=C?n:s?"butt":r;if(C&&"round"===I&&(x<o?I="miter":x<=2&&(I="fakeround")),"miter"===I&&x>i&&(I="bevel"),"bevel"===I&&(x>2&&(I="flipbevel"),x<i&&(I="miter")),p&&this.updateDistance(p,c),"miter"===I)v._mult(x),this.addCurrentVertex(c,v,0,0,f);else if("flipbevel"===I){if(x>100)v=m.mult(-1);else{var A=x*g.add(m).mag()/g.sub(m).mag();v._perp()._mult(A*(S?-1:1))}this.addCurrentVertex(c,v,0,0,f),this.addCurrentVertex(c,v.mult(-1),0,0,f)}else if("bevel"===I||"fakeround"===I){var M=-Math.sqrt(x*x-1),L=S?M:0,N=S?0:M;if(p&&this.addCurrentVertex(c,g,L,N,f),"fakeround"===I)for(var P=Math.round(180*w/Math.PI/20),O=1;O<P;O++){var R=O/P;if(.5!==R){var D=R-.5;R+=R*D*(R-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*D*D+(.848013+_*(.215638*_-1.06021)))}var F=m.sub(g)._mult(R)._add(g)._unit()._mult(S?-1:1);this.addHalfVertex(c,F.x,F.y,!1,S,0,f)}d&&this.addCurrentVertex(c,m,-L,-N,f)}else if("butt"===I)this.addCurrentVertex(c,v,0,0,f);else if("square"===I){var z=p?1:-1;this.addCurrentVertex(c,v,z,z,f)}else"round"===I&&(p&&(this.addCurrentVertex(c,g,0,0,f),this.addCurrentVertex(c,g,1,1,f,!0)),d&&(this.addCurrentVertex(c,m,-1,-1,f,!0),this.addCurrentVertex(c,m,0,0,f)));if(E&&y<u-1){var B=c.dist(d);if(B>2*h){var U=c.add(d.sub(c)._mult(h/B)._round());this.updateDistance(c,U),this.addCurrentVertex(U,m,0,0,f),c=U}}}}}},{key:"addCurrentVertex",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,o,!1,n,i),this.addHalfVertex(e,a,s,o,!0,-r,i)}},{key:"addHalfVertex",value:function(e,t,n,r,i,o,a){var s=e.x,u=e.y;this.layoutVertexArray.emplaceBack((s<<1)+(r?1:0),(u<<1)+(i?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);var l=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),a.primitiveLength++),i?this.e2=l:this.e1=l}},{key:"updateScaledDistance",value:function(){if(this.lineClips){var e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}},{key:"updateDistance",value:function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}]),e}();si("LineBucket",Eu,{omit:["layers","patternFeatures"]});var Su=new Hi({"line-cap":new Vi(Ke.layout_line["line-cap"]),"line-join":new ji(Ke.layout_line["line-join"]),"line-miter-limit":new Vi(Ke.layout_line["line-miter-limit"]),"line-round-limit":new Vi(Ke.layout_line["line-round-limit"]),"line-sort-key":new ji(Ke.layout_line["line-sort-key"])}),Tu={paint:new Hi({"line-opacity":new ji(Ke.paint_line["line-opacity"]),"line-color":new ji(Ke.paint_line["line-color"]),"line-translate":new Vi(Ke.paint_line["line-translate"]),"line-translate-anchor":new Vi(Ke.paint_line["line-translate-anchor"]),"line-width":new ji(Ke.paint_line["line-width"]),"line-gap-width":new ji(Ke.paint_line["line-gap-width"]),"line-offset":new ji(Ke.paint_line["line-offset"]),"line-blur":new ji(Ke.paint_line["line-blur"]),"line-dasharray":new Gi(Ke.paint_line["line-dasharray"]),"line-pattern":new qi(Ke.paint_line["line-pattern"]),"line-gradient":new $i(Ke.paint_line["line-gradient"])}),layout:Su},ku=new(function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"possiblyEvaluate",value:function(e,t){return t=new Ni(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),a(s(n.prototype),"possiblyEvaluate",this).call(this,e,t)}},{key:"evaluate",value:function(e,t,r,i){return t=N({},t,{zoom:Math.floor(t.zoom)}),a(s(n.prototype),"evaluate",this).call(this,e,t,r,i)}}]),n}(ji))(Tu.paint.properties["line-width"].specification);function Cu(e,t){return t>0?t+2*e:e}ku.useIntegerZoom=!0;var Iu=Ji([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Au=Ji([{name:"a_projected_pos",components:3,type:"Float32"}],4),Mu=(Ji([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ji([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Lu=Ji([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]),Nu=(Ji([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ji([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Pu=Ji([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ou(e,t){var n=t.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Ni(e+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,o=0;o<r.length&&r[o]<=e;)o++;for(var a=o=Math.max(0,o-1);a<r.length&&r[a]<e+1;)a++;a=Math.min(r.length-1,a);var s=r[o],u=r[a];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:u,minSize:n.evaluate(new Ni(s)),maxSize:n.evaluate(new Ni(u)),interpolationType:i}}function Ru(e,t,n){var r=t.uSize,i=t.uSizeT,o=n.lowerSize,a=n.upperSize;return"source"===e.kind?o/128:"composite"===e.kind?dn(o/128,a/128,i):r}function Du(e,t){var n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){var i=e.interpolationType,o=e.minZoom,a=e.maxZoom,s=i?A(An.interpolationFactor(i,t,o,a),0,1):0;"camera"===e.kind?r=dn(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:r}}Ji([{name:"triangle",components:3,type:"Uint16"}]),Ji([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ji([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ji([{type:"Float32",name:"offsetX"}]),Ji([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Fu=Object.freeze({__proto__:null,getSizeData:Ou,evaluateSizeForFeature:Ru,evaluateSizeForZoom:Du,SIZE_PACK_FACTOR:128});function zu(e,t,n){return e.sections.forEach((function(e){e.text=function(e,t,n){var r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),Li.applyArabicShaping&&(e=Li.applyArabicShaping(e)),e}(e.text,t,n)})),e}var Bu={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Uu=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=e[t+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=l}return(p?-1:1)*a*Math.pow(2,o-r)},Vu=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(t*u-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+p]=255&a,p+=d,a/=256,l-=8);e[n+p-d]|=128*g},ju=qu;function qu(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}qu.Varint=0,qu.Fixed64=1,qu.Bytes=2,qu.Fixed32=5;var Gu="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function $u(e){return e.type===qu.Bytes?e.readVarint()+e.pos:e.pos+1}function Hu(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Xu(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function Wu(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function Yu(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function Zu(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Ju(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Ku(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Qu(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function el(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function tl(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function nl(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function rl(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function il(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function ol(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function al(e,t,n){1===e&&n.readMessage(sl,t)}function sl(e,t,n){if(3===e){var r=n.readMessage(ul,{}),i=r.id,o=r.bitmap,a=r.width,s=r.height,u=r.left,l=r.top,c=r.advance;t.push({id:i,bitmap:new us({width:a+6,height:s+6},o),metrics:{width:a,height:s,left:u,top:l,advance:c}})}}function ul(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function ll(e){var t,n=0,r=0,i=f(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;n+=o.w*o.h,r=Math.max(r,o.w)}}catch(m){i.e(m)}finally{i.f()}e.sort((function(e,t){return t.h-e.h}));var a,s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),r),h:1/0}],u=0,l=0,c=f(e);try{for(c.s();!(a=c.n()).done;)for(var h=a.value,p=s.length-1;p>=0;p--){var d=s[p];if(!(h.w>d.w||h.h>d.h)){if(h.x=d.x,h.y=d.y,l=Math.max(l,h.y+h.h),u=Math.max(u,h.x+h.w),h.w===d.w&&h.h===d.h){var g=s.pop();p<s.length&&(s[p]=g)}else h.h===d.h?(d.x+=h.w,d.w-=h.w):h.w===d.w?(d.y+=h.h,d.h-=h.h):(s.push({x:d.x+h.w,y:d.y,w:d.w-h.w,h:h.h}),d.y+=h.h,d.h-=h.h);break}}}catch(m){c.e(m)}finally{c.f()}return{w:u,h:l,fill:n/(u*l)||0}}qu.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=rl(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=ol(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=rl(this.buf,this.pos)+4294967296*rl(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=rl(this.buf,this.pos)+4294967296*ol(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Uu(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Uu(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return Hu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return Hu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return Hu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return Hu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return Hu(e,r,t);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return Hu(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Gu?function(e,t,n){return Gu.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var o,a,s,u=e[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(a=e[i+2],128==(192&(o=e[i+1]))&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(a=e[i+2],s=e[i+3],128==(192&(o=e[i+1]))&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==qu.Bytes)return e.push(this.readVarint(t));var n=$u(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==qu.Bytes)return e.push(this.readSVarint());var t=$u(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==qu.Bytes)return e.push(this.readBoolean());var t=$u(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==qu.Bytes)return e.push(this.readFloat());var t=$u(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==qu.Bytes)return e.push(this.readDouble());var t=$u(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==qu.Bytes)return e.push(this.readFixed32());var t=$u(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==qu.Bytes)return e.push(this.readSFixed32());var t=$u(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==qu.Bytes)return e.push(this.readFixed64());var t=$u(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==qu.Bytes)return e.push(this.readSFixed64());var t=$u(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===qu.Varint)for(;this.buf[this.pos++]>127;);else if(t===qu.Bytes)this.pos=this.readVarint()+this.pos;else if(t===qu.Fixed32)this.pos+=4;else{if(t!==qu.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),il(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),il(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),il(this.buf,-1&e,this.pos),il(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),il(this.buf,-1&e,this.pos),il(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&Xu(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Vu(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Vu(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&Xu(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,qu.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Wu,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Yu,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Ku,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Zu,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Ju,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Qu,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,el,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,tl,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,nl,t)},writeBytesField:function(e,t){this.writeTag(e,qu.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,qu.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,qu.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,qu.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,qu.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,qu.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,qu.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,qu.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,qu.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,qu.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var cl=function(){function e(t,n){var r=n.pixelRatio,i=n.version,o=n.stretchX,a=n.stretchY,s=n.content;m(this,e),this.paddedRect=t,this.pixelRatio=r,this.stretchX=o,this.stretchY=a,this.content=s,this.version=i}return y(e,[{key:"tl",get:function(){return[this.paddedRect.x+1,this.paddedRect.y+1]}},{key:"br",get:function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}},{key:"tlbr",get:function(){return this.tl.concat(this.br)}},{key:"displaySize",get:function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}]),e}(),hl=function(){function e(t,n){m(this,e);var r={},i={};this.haveRenderCallbacks=[];var o=[];this.addImages(t,r,o),this.addImages(n,i,o);var a=ll(o),s=a.w,u=a.h,l=new ls({width:s||1,height:u||1});for(var c in t){var h=t[c],f=r[c].paddedRect;ls.copy(h.data,l,{x:0,y:0},{x:f.x+1,y:f.y+1},h.data)}for(var p in n){var d=n[p],g=i[p].paddedRect,y=g.x+1,v=g.y+1,_=d.data.width,b=d.data.height;ls.copy(d.data,l,{x:0,y:0},{x:y,y:v},d.data),ls.copy(d.data,l,{x:0,y:b-1},{x:y,y:v-1},{width:_,height:1}),ls.copy(d.data,l,{x:0,y:0},{x:y,y:v+b},{width:_,height:1}),ls.copy(d.data,l,{x:_-1,y:0},{x:y-1,y:v},{width:1,height:b}),ls.copy(d.data,l,{x:0,y:0},{x:y+_,y:v},{width:1,height:b})}this.image=l,this.iconPositions=r,this.patternPositions=i}return y(e,[{key:"addImages",value:function(e,t,n){for(var r in e){var i=e[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),t[r]=new cl(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}},{key:"patchUpdatedImages",value:function(e,t){for(var n in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}},{key:"patchUpdatedImage",value:function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var r=h(e.tl,2),i=r[0],o=r[1];n.update(t.data,void 0,{x:i,y:o})}}}]),e}();si("ImagePosition",cl),si("ImageAtlas",hl);var fl={horizontal:1,vertical:2,horizontalOnly:3},pl=function(){function e(){m(this,e),this.scale=1,this.fontStack="",this.imageName=null}return y(e,null,[{key:"forText",value:function(t,n){var r=new e;return r.scale=t||1,r.fontStack=n,r}},{key:"forImage",value:function(t){var n=new e;return n.imageName=t,n}}]),e}(),dl=function(){function e(){m(this,e),this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}return y(e,[{key:"length",value:function(){return this.text.length}},{key:"getSection",value:function(e){return this.sections[this.sectionIndex[e]]}},{key:"getSectionIndex",value:function(e){return this.sectionIndex[e]}},{key:"getCharCode",value:function(e){return this.text.charCodeAt(e)}},{key:"verticalizePunctuation",value:function(){this.text=function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n+1)||null,i=e.charCodeAt(n-1)||null;t+=r&&_i(r)&&!Bu[e[n+1]]||i&&_i(i)&&!Bu[e[n-1]]||!Bu[e[n]]?e[n]:Bu[e[n]]}return t}(this.text)}},{key:"trim",value:function(){for(var e=0,t=0;t<this.text.length&&ml[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=e&&ml[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)}},{key:"substring",value:function(t,n){var r=new e;return r.text=this.text.substring(t,n),r.sectionIndex=this.sectionIndex.slice(t,n),r.sections=this.sections,r}},{key:"toString",value:function(){return this.text}},{key:"getMaxScale",value:function(){var e=this;return this.sectionIndex.reduce((function(t,n){return Math.max(t,e.sections[n].scale)}),0)}},{key:"addTextSection",value:function(e,t){this.text+=e.text,this.sections.push(pl.forText(e.scale,e.fontStack||t));for(var n=this.sections.length-1,r=0;r<e.text.length;++r)this.sectionIndex.push(n)}},{key:"addImageSection",value:function(e){var t=e.image?e.image.name:"";if(0!==t.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(pl.forImage(t)),this.sectionIndex.push(this.sections.length-1)):q("Reached maximum number of images 6401")}else q("Can't add FormattedSection with an empty image.")}},{key:"getNextImageSectionCharCode",value:function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}],[{key:"fromFeature",value:function(t,n){for(var r=new e,i=0;i<t.sections.length;i++){var o=t.sections[i];o.image?r.addImageSection(o):r.addTextSection(o,n)}return r}}]),e}();function gl(e,t,n,r,i,o,a,s,u,l,c,h,p,d,g,m){var y,v=dl.fromFeature(e,i);h===fl.vertical&&v.verticalizePunctuation();var _=Li.processBidirectionalText,b=Li.processStyledBidirectionalText;if(_&&1===v.sections.length){y=[];var x,w=_(v.toString(),wl(v,l,o,t,r,d,g)),E=f(w);try{for(E.s();!(x=E.n()).done;){var S=x.value,T=new dl;T.text=S,T.sections=v.sections;for(var k=0;k<S.length;k++)T.sectionIndex.push(0);y.push(T)}}catch(O){E.e(O)}finally{E.f()}}else if(b){y=[];var C,I=b(v.text,v.sectionIndex,wl(v,l,o,t,r,d,g)),A=f(I);try{for(A.s();!(C=A.n()).done;){var M=C.value,L=new dl;L.text=M[0],L.sectionIndex=M[1],L.sections=v.sections,y.push(L)}}catch(O){A.e(O)}finally{A.f()}}else y=function(e,t){var n,r=[],i=e.text,o=0,a=f(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;r.push(e.substring(o,s)),o=s}}catch(O){a.e(O)}finally{a.f()}return o<i.length&&r.push(e.substring(o,i.length)),r}(v,wl(v,l,o,t,r,d,g));var N=[],P={positionedLines:N,text:v.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(e,t,n,r,i,o,a,s,u,l,c,h){var p,d,g=0,m=-17,y=0,v=0,_="right"===s?1:"left"===s?0:.5,b=0,x=f(i);try{for(x.s();!(p=x.n()).done;){var w=p.value;w.trim();var E=w.getMaxScale(),S=24*(E-1),T={positionedGlyphs:[],lineOffset:0};e.positionedLines[b]=T;var k=T.positionedGlyphs,C=0;if(w.length()){for(var I=0;I<w.length();I++){var A=w.getSection(I),M=w.getSectionIndex(I),L=w.getCharCode(I),N=0,P=null,R=null,D=null,F=24,z=!(u===fl.horizontal||!c&&!vi(L)||c&&(ml[L]||(d=L,di.Arabic(d)||di["Arabic Supplement"](d)||di["Arabic Extended-A"](d)||di["Arabic Presentation Forms-A"](d)||di["Arabic Presentation Forms-B"](d))));if(A.imageName){var B=r[A.imageName];if(!B)continue;D=A.imageName,e.iconsInText=e.iconsInText||!0,R=B.paddedRect;var U=B.displaySize;A.scale=24*A.scale/h,P={width:U[0],height:U[1],left:1,top:-3,advance:z?U[1]:U[0]},N=S+(24-U[1]*A.scale),F=P.advance;var V=z?U[0]*A.scale-24*E:U[1]*A.scale-24*E;V>0&&V>C&&(C=V)}else{var j=n[A.fontStack],q=j&&j[L];if(q&&q.rect)R=q.rect,P=q.metrics;else{var G=t[A.fontStack],$=G&&G[L];if(!$)continue;P=$.metrics}N=24*(E-A.scale)}z?(e.verticalizable=!0,k.push({glyph:L,imageName:D,x:g,y:m+N,vertical:z,scale:A.scale,fontStack:A.fontStack,sectionIndex:M,metrics:P,rect:R}),g+=F*A.scale+l):(k.push({glyph:L,imageName:D,x:g,y:m+N,vertical:z,scale:A.scale,fontStack:A.fontStack,sectionIndex:M,metrics:P,rect:R}),g+=P.advance*A.scale+l)}0!==k.length&&(y=Math.max(g-l,y),Sl(k,0,k.length-1,_,C)),g=0;var H=o*E+C;T.lineOffset=Math.max(C,S),m+=H,v=Math.max(H,v),++b}else m+=o,++b}}catch(O){x.e(O)}finally{x.f()}var X=m- -17,W=El(a),Y=W.horizontalAlign,Z=W.verticalAlign;(function(e,t,n,r,i,o,a,s,u){var l=(t-n)*i,c=0;c=o!==a?-s*r- -17:(-r*u+.5)*a;var h,p=f(e);try{for(p.s();!(h=p.n()).done;){var d,g=h.value,m=f(g.positionedGlyphs);try{for(m.s();!(d=m.n()).done;){var y=d.value;y.x+=l,y.y+=c}}catch(O){m.e(O)}finally{m.f()}}}catch(O){p.e(O)}finally{p.f()}})(e.positionedLines,_,Y,Z,y,v,o,X,i.length),e.top+=-Z*X,e.bottom=e.top+X,e.left+=-Y*y,e.right=e.left+y}(P,t,n,r,y,a,s,u,h,l,p,m),!function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;)if(0!==t.value.positionedGlyphs.length)return!1}catch(O){n.e(O)}finally{n.f()}return!0}(N)&&P}var ml={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},yl={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function vl(e,t,n,r,i,o){if(t.imageName){var a=r[t.imageName];return a?a.displaySize[0]*t.scale*24/o+i:0}var s=n[t.fontStack],u=s&&s[e];return u?u.metrics.advance*t.scale+i:0}function _l(e,t,n,r){var i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function bl(e,t,n){var r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function xl(e,t,n,r,i,o){var a,s=null,u=_l(t,n,i,o),l=f(r);try{for(l.s();!(a=l.n()).done;){var c=a.value,h=_l(t-c.x,n,i,o)+c.badness;h<=u&&(s=c,u=h)}}catch(p){l.e(p)}finally{l.f()}return{index:e,x:t,priorBreak:s,badness:u}}function wl(e,t,n,r,i,o,a){if("point"!==o)return[];if(!e)return[];for(var s,u=[],l=function(e,t,n,r,i,o){for(var a=0,s=0;s<e.length();s++){var u=e.getSection(s);a+=vl(e.getCharCode(s),u,r,i,t,o)}return a/Math.max(1,Math.ceil(a/n))}(e,t,n,r,i,a),c=e.text.indexOf("\u200b")>=0,h=0,f=0;f<e.length();f++){var p=e.getSection(f),d=e.getCharCode(f);if(ml[d]||(h+=vl(d,p,r,i,t,a)),f<e.length()-1){var g=!((s=d)<11904||!(di["Bopomofo Extended"](s)||di.Bopomofo(s)||di["CJK Compatibility Forms"](s)||di["CJK Compatibility Ideographs"](s)||di["CJK Compatibility"](s)||di["CJK Radicals Supplement"](s)||di["CJK Strokes"](s)||di["CJK Symbols and Punctuation"](s)||di["CJK Unified Ideographs Extension A"](s)||di["CJK Unified Ideographs"](s)||di["Enclosed CJK Letters and Months"](s)||di["Halfwidth and Fullwidth Forms"](s)||di.Hiragana(s)||di["Ideographic Description Characters"](s)||di["Kangxi Radicals"](s)||di["Katakana Phonetic Extensions"](s)||di.Katakana(s)||di["Vertical Forms"](s)||di["Yi Radicals"](s)||di["Yi Syllables"](s)));(yl[d]||g||p.imageName)&&u.push(xl(f+1,h,l,u,bl(d,e.getCharCode(f+1),g&&c),!1))}}return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(xl(e.length(),h,l,u,0,!0))}function El(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Sl(e,t,n,r,i){if(r||i)for(var o=e[n],a=(e[n].x+o.metrics.advance*o.scale)*r,s=t;s<=n;s++)e[s].x-=a,e[s].y+=i}function Tl(e,t,n){var r=El(n),i=r.horizontalAlign,o=r.verticalAlign,a=t[0]-e.displaySize[0]*i,s=t[1]-e.displaySize[1]*o;return{image:e,top:s,bottom:s+e.displaySize[1],left:a,right:a+e.displaySize[0]}}function kl(e,t,n,r,i,o){var a,s=e.image;if(s.content){var u=s.content,l=s.pixelRatio||1;a=[u[0]/l,u[1]/l,s.displaySize[0]-u[2]/l,s.displaySize[1]-u[3]/l]}var c,h,f,p,d=t.left*o,g=t.right*o;"width"===n||"both"===n?(p=i[0]+d-r[3],h=i[0]+g+r[1]):h=(p=i[0]+(d+g-s.displaySize[0])/2)+s.displaySize[0];var m=t.top*o,y=t.bottom*o;return"height"===n||"both"===n?(c=i[1]+m-r[0],f=i[1]+y+r[2]):f=(c=i[1]+(m+y-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:h,bottom:f,left:p,collisionPadding:a}}var Cl=function(e){d(n,e);var t=g(n);function n(e,r,i,o){var a;return m(this,n),(a=t.call(this,e,r)).angle=i,void 0!==o&&(a.segment=o),a}return y(n,[{key:"clone",value:function(){return new n(this.x,this.y,this.angle,this.segment)}}]),n}(v);function Il(e,t,n,r,i){if(void 0===t.segment)return!0;for(var o=t,a=t.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=e[a],h=e[a+1];if(!h)return!1;var f=e[a-1].angleTo(c)-c.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=c.dist(h)}return!0}function Al(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function Ml(e,t,n){return e?.6*t*n:0}function Ll(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Nl(e,t,n,r,i,o){for(var a=Ml(n,i,o),s=Ll(n,r)*o,u=0,l=Al(e)/2,c=0;c<e.length-1;c++){var h=e[c],f=e[c+1],p=h.dist(f);if(u+p>l){var d=(l-u)/p,g=dn(h.x,f.x,d),m=dn(h.y,f.y,d),y=new Cl(g,m,f.angleTo(h),c);return y._round(),!a||Il(e,y,s,a,t)?y:void 0}u+=p}}function Pl(e,t,n,r,i,o,a,s,u){var l=Ml(r,o,a),c=Ll(r,i),h=c*a,f=0===e[0].x||e[0].x===u||0===e[0].y||e[0].y===u;return t-h<t/4&&(t=h+t/4),function e(t,n,r,i,o,a,s,u,l){for(var c=a/2,h=Al(t),f=0,p=n-r,d=[],g=0;g<t.length-1;g++){for(var m=t[g],y=t[g+1],v=m.dist(y),_=y.angleTo(m);p+r<f+v;){var b=((p+=r)-f)/v,x=dn(m.x,y.x,b),w=dn(m.y,y.y,b);if(x>=0&&x<l&&w>=0&&w<l&&p-c>=0&&p+c<=h){var E=new Cl(x,w,_,g);E._round(),i&&!Il(t,E,a,i,o)||d.push(E)}}f+=v}return u||d.length||s||(d=e(t,f/2,r,i,o,a,s,!0,l)),d}(e,f?t/2*s%t:(c/2+2*o)*a*s%t,t,l,n,h,f,!1,u)}function Ol(e,t,n,r,i){for(var o=[],a=0;a<e.length;a++)for(var s=e[a],u=void 0,l=0;l<s.length-1;l++){var c=s[l],h=s[l+1];c.x<t&&h.x<t||(c.x<t?c=new v(t,c.y+(t-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x<t&&(h=new v(t,c.y+(t-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y<n&&h.y<n||(c.y<n?c=new v(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round():h.y<n&&(h=new v(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round()),c.x>=r&&h.x>=r||(c.x>=r?c=new v(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x>=r&&(h=new v(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y>=i&&h.y>=i||(c.y>=i?c=new v(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round():h.y>=i&&(h=new v(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round()),u&&c.equals(u[u.length-1])||(u=[c],o.push(u)),u.push(h)))))}return o}function Rl(e,t,n,r){var i=[],o=e.image,a=o.pixelRatio,s=o.paddedRect.w-2,u=o.paddedRect.h-2,l=e.right-e.left,c=e.bottom-e.top,h=o.stretchX||[[0,s]],f=o.stretchY||[[0,u]],p=function(e,t){return e+t[1]-t[0]},d=h.reduce(p,0),g=f.reduce(p,0),m=s-d,y=u-g,_=0,b=d,x=0,w=g,E=0,S=m,T=0,k=y;if(o.content&&r){var C=o.content;_=Dl(h,0,C[0]),x=Dl(f,0,C[1]),b=Dl(h,C[0],C[2]),w=Dl(f,C[1],C[3]),E=C[0]-_,T=C[1]-x,S=C[2]-C[0]-b,k=C[3]-C[1]-w}var I=function(r,i,s,u){var h=zl(r.stretch-_,b,l,e.left),f=Bl(r.fixed-E,S,r.stretch,d),p=zl(i.stretch-x,w,c,e.top),m=Bl(i.fixed-T,k,i.stretch,g),y=zl(s.stretch-_,b,l,e.left),C=Bl(s.fixed-E,S,s.stretch,d),I=zl(u.stretch-x,w,c,e.top),A=Bl(u.fixed-T,k,u.stretch,g),M=new v(h,p),L=new v(y,p),N=new v(y,I),P=new v(h,I),O=new v(f/a,m/a),R=new v(C/a,A/a),D=t*Math.PI/180;if(D){var F=Math.sin(D),z=Math.cos(D),B=[z,-F,F,z];M._matMult(B),L._matMult(B),P._matMult(B),N._matMult(B)}var U=r.stretch+r.fixed,V=i.stretch+i.fixed;return{tl:M,tr:L,bl:P,br:N,tex:{x:o.paddedRect.x+1+U,y:o.paddedRect.y+1+V,w:s.stretch+s.fixed-U,h:u.stretch+u.fixed-V},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:O,pixelOffsetBR:R,minFontScaleX:S/a/l,minFontScaleY:k/a/c,isSDF:n}};if(r&&(o.stretchX||o.stretchY))for(var A=Fl(h,m,d),M=Fl(f,y,g),L=0;L<A.length-1;L++)for(var N=A[L],P=A[L+1],O=0;O<M.length-1;O++)i.push(I(N,M[O],P,M[O+1]));else i.push(I({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:u+1}));return i}function Dl(e,t,n){var r,i=0,o=f(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;i+=Math.max(t,Math.min(n,a[1]))-Math.max(t,Math.min(n,a[0]))}}catch(s){o.e(s)}finally{o.f()}return i}function Fl(e,t,n){var r,i=[{fixed:-1,stretch:0}],o=f(e);try{for(o.s();!(r=o.n()).done;){var a=h(r.value,2),s=a[0],u=a[1],l=i[i.length-1];i.push({fixed:s-l.stretch,stretch:l.stretch}),i.push({fixed:s-l.stretch,stretch:l.stretch+(u-s)})}}catch(c){o.e(c)}finally{o.f()}return i.push({fixed:t+1,stretch:n}),i}function zl(e,t,n,r){return e/t*n+r}function Bl(e,t,n,r){return e-t*n/r}si("Anchor",Cl);var Ul=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vl;if(m(this,e),this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}return y(e,[{key:"push",value:function(e){this.data.push(e),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r}},{key:"_down",value:function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var o=1+(e<<1),a=t[o],s=o+1;if(s<this.length&&n(t[s],a)<0&&(o=s,a=t[s]),n(a,i)>=0)break;t[e]=a,e=o}t[e]=i}}]),e}();function Vl(e,t){return e<t?-1:e>t?1:0}function jl(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1/0,i=1/0,o=-1/0,a=-1/0,s=e[0],u=0;u<s.length;u++){var l=s[u];(!u||l.x<r)&&(r=l.x),(!u||l.y<i)&&(i=l.y),(!u||l.x>o)&&(o=l.x),(!u||l.y>a)&&(a=l.y)}var c=Math.min(o-r,a-i),h=c/2,f=new Ul([],ql);if(0===c)return new v(r,i);for(var p=r;p<o;p+=c)for(var d=i;d<a;d+=c)f.push(new Gl(p+h,d+h,h,e));for(var g=function(e){for(var t=0,n=0,r=0,i=e[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],l=i[s],c=u.x*l.y-l.x*u.y;n+=(u.x+l.x)*c,r+=(u.y+l.y)*c,t+=3*c}return new Gl(n/t,r/t,0,e)}(e),m=f.length;f.length;){var y=f.pop();(y.d>g.d||!g.d)&&(g=y,n&&console.log("found best %d after %d probes",Math.round(1e4*y.d)/1e4,m)),y.max-g.d<=t||(h=y.h/2,f.push(new Gl(y.p.x-h,y.p.y-h,h,e)),f.push(new Gl(y.p.x+h,y.p.y-h,h,e)),f.push(new Gl(y.p.x-h,y.p.y+h,h,e)),f.push(new Gl(y.p.x+h,y.p.y+h,h,e)),m+=4)}return n&&(console.log("num probes: ".concat(m)),console.log("best distance: ".concat(g.d))),g.p}function ql(e,t){return t.max-e.max}function Gl(e,t,n,r){this.p=new v(e,t),this.h=n,this.d=function(e,t){for(var n=!1,r=1/0,i=0;i<t.length;i++)for(var o=t[i],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u];l.y>e.y!=c.y>e.y&&e.x<(c.x-l.x)*(e.y-l.y)/(c.y-l.y)+l.x&&(n=!n),r=Math.min(r,ya(e,l,c))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}var $l=Number.POSITIVE_INFINITY;function Hl(e,t){return t[1]!==$l?function(e,t,n){var r=0,i=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}return[r,i]}(e,t[0],t[1]):function(e,t){var n=0,r=0;t<0&&(t=0);var i=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=t;break;case"right":n=-t}return[n,r]}(e,t[0])}function Xl(e,t,n,r,i,o,a,s){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var u=e.layers[0].layout,l=e.layers[0]._unevaluatedLayout._values,c={};if("composite"===e.textSizeData.kind){var h=e.textSizeData,p=h.minZoom,d=h.maxZoom;c.compositeTextSizes=[l["text-size"].possiblyEvaluate(new Ni(p),a),l["text-size"].possiblyEvaluate(new Ni(d),a)]}if("composite"===e.iconSizeData.kind){var g=e.iconSizeData,m=g.minZoom,y=g.maxZoom;c.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new Ni(m),a),l["icon-size"].possiblyEvaluate(new Ni(y),a)]}c.layoutTextSize=l["text-size"].possiblyEvaluate(new Ni(s+1),a),c.layoutIconSize=l["icon-size"].possiblyEvaluate(new Ni(s+1),a),c.textMaxSize=l["text-size"].possiblyEvaluate(new Ni(18),a);var v,_=24*u.get("text-line-height"),b="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),x=u.get("text-keep-upright"),w=u.get("text-size"),E=f(e.features);try{var S=function(){var o=v.value,s=u.get("text-font").evaluate(o,{},a).join(","),l=w.evaluate(o,{},a),h=c.layoutTextSize.evaluate(o,{},a),f=(c.layoutIconSize.evaluate(o,{},a),{horizontal:{},vertical:void 0}),p=o.text,d=void 0,g=[0,0];if(p){var m=p.toString(),y=24*u.get("text-letter-spacing").evaluate(o,{},a),E=mi(m)?y:0,S=u.get("text-anchor").evaluate(o,{},a),T=u.get("text-variable-anchor");if(!T){var k=u.get("text-radial-offset").evaluate(o,{},a);g=k?Hl(S,[24*k,$l]):u.get("text-offset").evaluate(o,{},a).map((function(e){return 24*e}))}var C=b?"center":u.get("text-justify").evaluate(o,{},a),I=u.get("symbol-placement"),A="point"===I?24*u.get("text-max-width").evaluate(o,{},a):0,M=function(){e.allowVerticalPlacement&&gi(m)&&(f.vertical=gl(p,t,n,i,s,A,_,S,"left",E,g,fl.vertical,!0,I,h,l))};if(!b&&T){for(var L="auto"===C?T.map((function(e){return Wl(e)})):[C],N=!1,P=0;P<L.length;P++){var O=L[P];if(!f.horizontal[O])if(N)f.horizontal[O]=f.horizontal[0];else{var R=gl(p,t,n,i,s,A,_,"center",O,E,g,fl.horizontal,!1,I,h,l);R&&(f.horizontal[O]=R,N=1===R.positionedLines.length)}}M()}else{"auto"===C&&(C=Wl(S));var D=gl(p,t,n,i,s,A,_,S,C,E,g,fl.horizontal,!1,I,h,l);D&&(f.horizontal[C]=D),M(),gi(m)&&b&&x&&(f.vertical=gl(p,t,n,i,s,A,_,S,C,E,g,fl.vertical,!1,I,h,l))}}var F=!1;if(o.icon&&o.icon.name){var z=r[o.icon.name];z&&(d=Tl(i[o.icon.name],u.get("icon-offset").evaluate(o,{},a),u.get("icon-anchor").evaluate(o,{},a)),F=z.sdf,void 0===e.sdfIcons?e.sdfIcons=z.sdf:e.sdfIcons!==z.sdf&&q("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(z.pixelRatio!==e.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}var B=Jl(f.horizontal)||f.vertical;e.iconsInText=!!B&&B.iconsInText,(B||d)&&Yl(e,o,f,d,r,c,h,0,g,F,a)};for(E.s();!(v=E.n()).done;)S()}catch(T){E.e(T)}finally{E.f()}o&&e.generateCollisionDebugBuffers(s,e.collisionBoxArray)}function Wl(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Yl(e,t,n,r,i,o,a,s,u,l,c){var p=o.textMaxSize.evaluate(t,{},c);void 0===p&&(p=a);var d,g=e.layers[0].layout,m=g.get("icon-offset").evaluate(t,{},c),y=Jl(n.horizontal),v=a/24,_=e.tilePixelRatio*v,b=e.tilePixelRatio*p/24,x=e.tilePixelRatio*g.get("symbol-spacing"),w=g.get("text-padding")*e.tilePixelRatio,E=g.get("icon-padding")*e.tilePixelRatio,S=T(g.get("text-max-angle")),k="map"===g.get("text-rotation-alignment")&&"point"!==g.get("symbol-placement"),C="map"===g.get("icon-rotation-alignment")&&"point"!==g.get("symbol-placement"),I=g.get("symbol-placement"),A=x/2,M=g.get("icon-text-fit");r&&"none"!==M&&(e.allowVerticalPlacement&&n.vertical&&(d=kl(r,n.vertical,M,g.get("icon-text-fit-padding"),m,v)),y&&(r=kl(r,y,M,g.get("icon-text-fit-padding"),m,v)));var L=function(s,f){f.x<0||f.x>=8192||f.y<0||f.y>=8192||function(e,t,n,r,i,o,a,s,u,l,c,f,p,d,g,m,y,v,_,b,x,w,E,S,T){var k,C,I,A,M,L,N,P,O,R=e.addToLineVertexArray(t,n),D=0,F=0,z=0,B=0,U=-1,V=-1,j={},G=Oo(""),$=0,H=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(k=s.layout.get("text-offset").evaluate(x,{},S).map((function(e){return 24*e})),$=(C=h(k,2))[0],H=C[1]):($=24*s.layout.get("text-radial-offset").evaluate(x,{},S),H=$l),e.allowVerticalPlacement&&r.vertical){var X=r.vertical;if(g)P=Ql(X),a&&(O=Ql(a));else{var W=s.layout.get("text-rotate").evaluate(x,{},S)+90;M=Kl(u,t,l,c,f,X,0,d,W),a&&(L=Kl(u,t,l,c,f,a,0,v,W))}}if(i){var Y=s.layout.get("icon-rotate").evaluate(x,{},S),Z="none"!==s.layout.get("icon-text-fit"),J=Rl(i,Y,E,Z),K=a?Rl(a,Y,E,Z):void 0;A=Kl(u,t,l,c,f,i,0,v,Y),D=4*J.length;var Q=e.iconSizeData,ee=null;"source"===Q.kind?(ee=[128*s.layout.get("icon-size").evaluate(x,{},S)])[0]>32640&&q("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')):"composite"===Q.kind&&((ee=[128*w.compositeIconSizes[0].evaluate(x,{},S),128*w.compositeIconSizes[1].evaluate(x,{},S)])[0]>32640||ee[1]>32640)&&q("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')),e.addSymbols(e.icon,J,ee,b,_,x,!1,t,R.lineStartIndex,R.lineLength,-1,S),U=e.icon.placedSymbolArray.length-1,K&&(F=4*K.length,e.addSymbols(e.icon,K,ee,b,_,x,fl.vertical,t,R.lineStartIndex,R.lineLength,-1,S),V=e.icon.placedSymbolArray.length-1)}for(var te in r.horizontal){var ne=r.horizontal[te];I||(G=Oo(ne.text),g?N=Ql(ne):I=Kl(u,t,l,c,f,ne,0,d,s.layout.get("text-rotate").evaluate(x,{},S)));var re=1===ne.positionedLines.length;if(z+=Zl(e,t,ne,o,s,g,x,m,R,r.vertical?fl.horizontal:fl.horizontalOnly,re?Object.keys(r.horizontal):[te],j,U,w,S),re)break}r.vertical&&(B+=Zl(e,t,r.vertical,o,s,g,x,m,R,fl.vertical,["vertical"],j,V,w,S));var ie=-1,oe=function(e,t){return e?Math.max(e,t):t};ie=oe(N,ie),ie=oe(P,ie);var ae=(ie=oe(O,ie))>-1?1:0;ae&&(ie*=T/24),e.glyphOffsetArray.length>=uc.MAX_GLYPHS&&q("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,x.sortKey),e.symbolInstances.emplaceBack(t.x,t.y,j.right>=0?j.right:-1,j.center>=0?j.center:-1,j.left>=0?j.left:-1,j.vertical||-1,U,V,G,void 0!==I?I:e.collisionBoxArray.length,void 0!==I?I+1:e.collisionBoxArray.length,void 0!==M?M:e.collisionBoxArray.length,void 0!==M?M+1:e.collisionBoxArray.length,void 0!==A?A:e.collisionBoxArray.length,void 0!==A?A+1:e.collisionBoxArray.length,L||e.collisionBoxArray.length,L?L+1:e.collisionBoxArray.length,l,z,B,D,F,ae,0,p,$,H,ie)}(e,f,s,n,r,i,d,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,_,w,k,u,0,E,C,m,t,o,l,c,a)};if("line"===I){var N,P=f(Ol(t.geometry,0,0,8192,8192));try{for(P.s();!(N=P.n()).done;){var O,R=N.value,D=Pl(R,x,S,n.vertical||y,r,24,b,e.overscaling,8192),F=f(D);try{for(F.s();!(O=F.n()).done;){var z=O.value;y&&ec(e,y.text,A,z)||L(R,z)}}catch(re){F.e(re)}finally{F.f()}}}catch(re){P.e(re)}finally{P.f()}}else if("line-center"===I){var B,U=f(t.geometry);try{for(U.s();!(B=U.n()).done;){var V=B.value;if(V.length>1){var j=Nl(V,S,n.vertical||y,r,24,b);j&&L(V,j)}}}catch(re){U.e(re)}finally{U.f()}}else if("Polygon"===t.type){var G,$=f($s(t.geometry,0));try{for($.s();!(G=$.n()).done;){var H=G.value,X=jl(H,16);L(H[0],new Cl(X.x,X.y,0))}}catch(re){$.e(re)}finally{$.f()}}else if("LineString"===t.type){var W,Y=f(t.geometry);try{for(Y.s();!(W=Y.n()).done;){var Z=W.value;L(Z,new Cl(Z[0].x,Z[0].y,0))}}catch(re){Y.e(re)}finally{Y.f()}}else if("Point"===t.type){var J,K=f(t.geometry);try{for(K.s();!(J=K.n()).done;){var Q,ee=J.value,te=f(ee);try{for(te.s();!(Q=te.n()).done;){var ne=Q.value;L([ne],new Cl(ne.x,ne.y,0))}}catch(re){te.e(re)}finally{te.f()}}}catch(re){K.e(re)}finally{K.f()}}}function Zl(e,t,n,r,i,a,s,u,l,h,p,d,g,m,y){var _=function(e,t,n,r,i,a,s,u){var l,h=r.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,p=[],d=f(t.positionedLines);try{for(d.s();!(l=d.n()).done;){var g,m=l.value,y=f(m.positionedGlyphs);try{for(y.s();!(g=y.n()).done;){var _=g.value;if(_.rect){var b=_.rect||{},x=4,w=!0,E=1,S=0,T=(i||u)&&_.vertical,k=_.metrics.advance*_.scale/2;if(u&&t.verticalizable){var C=24*(_.scale-1),I=(24-_.metrics.width*_.scale)/2;S=m.lineOffset/2-(_.imageName?-I:C)}if(_.imageName){var A=s[_.imageName];w=A.sdf,x=1/(E=A.pixelRatio)}var M=i?[_.x+k,_.y]:[0,0],L=i?[0,0]:[_.x+k+n[0],_.y+n[1]-S],N=[0,0];T&&(N=L,L=[0,0]);var P=(_.metrics.left-x)*_.scale-k+L[0],O=(-_.metrics.top-x)*_.scale+L[1],R=P+b.w*_.scale/E,D=O+b.h*_.scale/E,F=new v(P,O),z=new v(R,O),B=new v(P,D),U=new v(R,D);if(T){var V=new v(-k,k- -17),j=-Math.PI/2,q=12-k,G=new v(22-q,-(_.imageName?q:0)),$=o(v,c(N));F._rotateAround(j,V)._add(G)._add($),z._rotateAround(j,V)._add(G)._add($),B._rotateAround(j,V)._add(G)._add($),U._rotateAround(j,V)._add(G)._add($)}if(h){var H=Math.sin(h),X=Math.cos(h),W=[X,-H,H,X];F._matMult(W),z._matMult(W),B._matMult(W),U._matMult(W)}var Y=new v(0,0),Z=new v(0,0);p.push({tl:F,tr:z,bl:B,br:U,tex:b,writingMode:t.writingMode,glyphOffset:M,sectionIndex:_.sectionIndex,isSDF:w,pixelOffsetTL:Y,pixelOffsetBR:Z,minFontScaleX:0,minFontScaleY:0})}}}catch(J){y.e(J)}finally{y.f()}}}catch(J){d.e(J)}finally{d.f()}return p}(0,n,u,i,a,s,r,e.allowVerticalPlacement),b=e.textSizeData,x=null;"source"===b.kind?(x=[128*i.layout.get("text-size").evaluate(s,{},y)])[0]>32640&&q("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')):"composite"===b.kind&&((x=[128*m.compositeTextSizes[0].evaluate(s,{},y),128*m.compositeTextSizes[1].evaluate(s,{},y)])[0]>32640||x[1]>32640)&&q("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')),e.addSymbols(e.text,_,x,u,a,s,h,t,l.lineStartIndex,l.lineLength,g,y);var w,E=f(p);try{for(E.s();!(w=E.n()).done;)d[w.value]=e.text.placedSymbolArray.length-1}catch(S){E.e(S)}finally{E.f()}return 4*_.length}function Jl(e){for(var t in e)return e[t];return null}function Kl(e,t,n,r,i,o,a,s,u){var l=o.top,c=o.bottom,h=o.left,f=o.right,p=o.collisionPadding;if(p&&(h-=p[0],l-=p[1],f+=p[2],c+=p[3]),u){var d=new v(h,l),g=new v(f,l),m=new v(h,c),y=new v(f,c),_=T(u);d._rotate(_),g._rotate(_),m._rotate(_),y._rotate(_),h=Math.min(d.x,g.x,m.x,y.x),f=Math.max(d.x,g.x,m.x,y.x),l=Math.min(d.y,g.y,m.y,y.y),c=Math.max(d.y,g.y,m.y,y.y)}return e.emplaceBack(t.x,t.y,h,l,f,c,s,n,r,i),e.length-1}function Ql(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);var t=e.bottom-e.top;return t>0?Math.max(10,t):null}function ec(e,t,n,r){var i=e.compareText;if(t in i){for(var o=i[t],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[t]=[];return i[t].push(r),!1}var tc=lu.VectorTileFeature.types,nc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function rc(e,t,n,r,i,o,a,s,u,l,c,h,f){var p=s?Math.min(32640,Math.round(s[0])):0,d=s?Math.min(32640,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),o,a,(p<<1)+(u?1:0),d,16*l,16*c,256*h,256*f)}function ic(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function oc(e){var t,n=f(e.sections);try{for(n.s();!(t=n.n()).done;)if(wi(t.value.text))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var ac=function(){function e(t){m(this,e),this.layoutVertexArray=new io,this.indexArray=new ho,this.programConfigurations=t,this.segments=new ra,this.dynamicLayoutVertexArray=new oo,this.opacityVertexArray=new ao,this.placedSymbolArray=new So}return y(e,[{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}},{key:"upload",value:function(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Iu.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Au.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,nc,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}]),e}();si("SymbolBuffers",ac);var sc=function(){function e(t,n,r){m(this,e),this.layoutVertexArray=new t,this.layoutAttributes=n,this.indexArray=new r,this.segments=new ra,this.collisionVertexArray=new co,this.collisionVertexArrayExt=new oo}return y(e,[{key:"upload",value:function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Mu.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Lu.members,!0)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}]),e}();si("CollisionBuffers",sc);var uc=function(){function e(t){m(this,e),this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ma([]),this.placementViewportMatrix=Ma([]);var n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ou(this.zoom,n["text-size"]),this.iconSizeData=Ou(this.zoom,n["icon-size"]);var r=this.layers[0].layout,i=r.get("symbol-sort-key"),o=r.get("symbol-z-order");this.canOverlap=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((function(e){return fl[e]}))),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=t.sourceID}return y(e,[{key:"createArrays",value:function(){this.text=new ac(new Ko(this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new ac(new Ko(this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new Co,this.lineVertexArray=new Io,this.symbolInstances=new ko}},{key:"calculateGlyphDependencies",value:function(e,t,n,r,i){for(var o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,(n||r)&&i){var a=Bu[e.charAt(o)];a&&(t[a.charCodeAt(0)]=!0)}}},{key:"populate",value:function(e,t,n){var r=this.layers[0],i=r.layout,o=i.get("text-font"),a=i.get("text-field"),s=i.get("icon-image"),u=("constant"!==a.value.kind||a.value.value instanceof kt&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),l="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,c=i.get("symbol-sort-key");if(this.features=[],u||l){var h,p=t.iconDependencies,d=t.glyphDependencies,g=t.availableImages,m=new Ni(this.zoom),y=f(e);try{for(y.s();!(h=y.n()).done;){var v=h.value,_=v.feature,b=v.id,x=v.index,w=v.sourceLayerIndex,E=r._featureFilter.needGeometry,S=sa(_,E);if(r._featureFilter.filter(m,S,n)){var T=void 0,k=void 0;if(E||(S.geometry=aa(_)),u){var C=r.getValueAndResolveTokens("text-field",S,n,g),I=kt.factory(C);oc(I)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ai()||this.hasRTLText&&Li.isParsed())&&(T=zu(I,r,S))}if(l){var A=r.getValueAndResolveTokens("icon-image",S,n,g);k=A instanceof Ct?A:Ct.fromString(A)}if(T||k){var M=this.sortFeaturesByKey?c.evaluate(S,{},n):void 0;if(this.features.push({id:b,text:T,icon:k,index:x,sourceLayerIndex:w,geometry:S.geometry,properties:_.properties,type:tc[_.type],sortKey:M}),k&&(p[k.name]=!0),T){var L=o.evaluate(S,{},n).join(","),N="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(fl.vertical)>=0;var P,O=f(T.sections);try{for(O.s();!(P=O.n()).done;){var R=P.value;if(R.image)p[R.image.name]=!0;else{var D=gi(T.toString()),F=R.fontStack||L,z=d[F]=d[F]||{};this.calculateGlyphDependencies(R.text,z,N,this.allowVerticalPlacement,D)}}}catch(B){O.e(B)}finally{O.f()}}}}}}catch(B){y.e(B)}finally{y.f()}"line"===i.get("symbol-placement")&&(this.features=function(e){var t={},n={},r=[],i=0;function o(t){r.push(e[t]),i++}function a(e,t,i){var o=n[e];return delete n[e],n[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(e,n,i){var o=t[n];return delete t[n],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function u(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(r.x,":").concat(r.y)}for(var l=0;l<e.length;l++){var c=e[l],h=c.geometry,f=c.text?c.text.toString():null;if(f){var p=u(f,h),d=u(f,h,!0);if(p in n&&d in t&&n[p]!==t[d]){var g=s(p,d,h),m=a(p,d,r[g].geometry);delete t[p],delete n[d],n[u(f,r[m].geometry,!0)]=m,r[g].geometry=null}else p in n?a(p,d,h):d in t?s(p,d,h):(o(l),t[p]=i-1,n[d]=i-1)}else o(l)}return r.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}}},{key:"update",value:function(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))}},{key:"isEmpty",value:function(){return 0===this.symbolInstances.length&&!this.hasRTLText}},{key:"uploadPending",value:function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}},{key:"upload",value:function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}},{key:"destroyDebugData",value:function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}},{key:"destroy",value:function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}},{key:"addToLineVertexArray",value:function(e,t){var n=this.lineVertexArray.length;if(void 0!==e.segment){for(var r=e.dist(t[e.segment+1]),i=e.dist(t[e.segment]),o={},a=e.segment+1;a<t.length;a++)o[a]={x:t[a].x,y:t[a].y,tileUnitDistanceFromAnchor:r},a<t.length-1&&(r+=t[a+1].dist(t[a]));for(var s=e.segment||0;s>=0;s--)o[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=t[s-1].dist(t[s]));for(var u=0;u<t.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}},{key:"addSymbols",value:function(e,t,n,r,i,o,a,s,u,l,c,h){for(var f=e.indexArray,p=e.layoutVertexArray,d=e.segments.prepareSegment(4*t.length,p,f,this.canOverlap?o.sortKey:void 0),g=this.glyphOffsetArray.length,m=d.vertexLength,y=this.allowVerticalPlacement&&a===fl.vertical?Math.PI/2:0,v=o.text&&o.text.sections,_=0;_<t.length;_++){var b=t[_],x=b.tl,w=b.tr,E=b.bl,S=b.br,T=b.tex,k=b.pixelOffsetTL,C=b.pixelOffsetBR,I=b.minFontScaleX,A=b.minFontScaleY,M=b.glyphOffset,L=b.isSDF,N=b.sectionIndex,P=d.vertexLength,O=M[1];rc(p,s.x,s.y,x.x,O+x.y,T.x,T.y,n,L,k.x,k.y,I,A),rc(p,s.x,s.y,w.x,O+w.y,T.x+T.w,T.y,n,L,C.x,k.y,I,A),rc(p,s.x,s.y,E.x,O+E.y,T.x,T.y+T.h,n,L,k.x,C.y,I,A),rc(p,s.x,s.y,S.x,O+S.y,T.x+T.w,T.y+T.h,n,L,C.x,C.y,I,A),ic(e.dynamicLayoutVertexArray,s,y),f.emplaceBack(P,P+1,P+2),f.emplaceBack(P+1,P+2,P+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(M[0]),_!==t.length-1&&N===t[_+1].sectionIndex||e.programConfigurations.populatePaintArrays(p.length,o,o.index,{},h,v&&v[N])}e.placedSymbolArray.emplaceBack(s.x,s.y,g,this.glyphOffsetArray.length-g,m,u,l,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,c)}},{key:"_commitLayoutVertex",value:function(e,t,n,r,i){e.emplaceBack(t.x,t.y,n,r,Math.round(i.x),Math.round(i.y))}},{key:"_addCollisionDebugVertices",value:function(e,t,n,r,i){for(var o=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),a=o.vertexLength,s=i.anchorX,u=i.anchorY,l=0;l<4;l++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,r,s,u,new v(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,s,u,new v(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,s,u,new v(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,s,u,new v(e.x1,e.y2)),o.vertexLength+=4;var c=n.indexArray;c.emplaceBack(a,a+1),c.emplaceBack(a+1,a+2),c.emplaceBack(a+2,a+3),c.emplaceBack(a+3,a),o.primitiveLength+=4}},{key:"_addTextDebugCollisionBoxes",value:function(e,t,n,r,i,o){for(var a=r;a<i;a++){var s=n.get(a),u=this.getSymbolInstanceTextSize(e,o,t,a);this._addCollisionDebugVertices(s,u,this.textCollisionBox,s.anchorPoint,o)}}},{key:"_addIconDebugCollisionBoxes",value:function(e,t,n,r,i,o){for(var a=r;a<i;a++){var s=n.get(a),u=this.getSymbolInstanceIconSize(e,t,a);this._addCollisionDebugVertices(s,u,this.iconCollisionBox,s.anchorPoint,o)}}},{key:"generateCollisionDebugBuffers",value:function(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sc(uo,Nu.members,vo),this.iconCollisionBox=new sc(uo,Nu.members,vo);for(var n=Du(this.iconSizeData,e),r=Du(this.textSizeData,e),i=0;i<this.symbolInstances.length;i++){var o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}},{key:"getSymbolInstanceTextSize",value:function(e,t,n,r){var i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:r),o=Ru(this.textSizeData,e,i)/24;return this.tilePixelRatio*o}},{key:"getSymbolInstanceIconSize",value:function(e,t,n){var r=this.icon.placedSymbolArray.get(n),i=Ru(this.iconSizeData,e,r);return this.tilePixelRatio*i}},{key:"_commitDebugCollisionVertexUpdate",value:function(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}},{key:"_updateTextDebugCollisionBoxes",value:function(e,t,n,r,i,o){for(var a=r;a<i;a++){var s=n.get(a),u=this.getSymbolInstanceTextSize(e,o,t,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,u,s.padding)}}},{key:"_updateIconDebugCollisionBoxes",value:function(e,t,n,r,i){for(var o=r;o<i;o++){var a=n.get(o),s=this.getSymbolInstanceIconSize(e,t,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,s,a.padding)}}},{key:"updateCollisionDebugBuffers",value:function(e,t){if(this.hasDebugData()){this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();for(var n=Du(this.iconSizeData,e),r=Du(this.textSizeData,e),i=0;i<this.symbolInstances.length;i++){var o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}}},{key:"_deserializeCollisionBoxesForSymbol",value:function(e,t,n,r,i,o,a,s,u){for(var l={},c=t;c<n;c++){var h=e.get(c);l.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,padding:h.padding,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},l.textFeatureIndex=h.featureIndex;break}for(var f=r;f<i;f++){var p=e.get(f);l.verticalTextBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,padding:p.padding,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},l.verticalTextFeatureIndex=p.featureIndex;break}for(var d=o;d<a;d++){var g=e.get(d);l.iconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,padding:g.padding,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},l.iconFeatureIndex=g.featureIndex;break}for(var m=s;m<u;m++){var y=e.get(m);l.verticalIconBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,padding:y.padding,anchorPointX:y.anchorPointX,anchorPointY:y.anchorPointY},l.verticalIconFeatureIndex=y.featureIndex;break}return l}},{key:"deserializeCollisionBoxes",value:function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}},{key:"hasTextData",value:function(){return this.text.segments.get().length>0}},{key:"hasIconData",value:function(){return this.icon.segments.get().length>0}},{key:"hasDebugData",value:function(){return this.textCollisionBox&&this.iconCollisionBox}},{key:"hasTextCollisionBoxData",value:function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}},{key:"hasIconCollisionBoxData",value:function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}},{key:"addIndicesForPlacedSymbol",value:function(e,t){for(var n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)e.indexArray.emplaceBack(i,i+1,i+2),e.indexArray.emplaceBack(i+1,i+2,i+3)}},{key:"getSortedSymbolIndexes",value:function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),r=[],i=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);r.push(0|Math.round(t*s.anchorX+n*s.anchorY)),i.push(s.featureIndex)}return o.sort((function(e,t){return r[e]-r[t]||i[t]-i[e]})),o}},{key:"addToSortKeyRanges",value:function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}},{key:"sortFeatures",value:function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];var n,r=f(this.symbolInstanceIndexes);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this.symbolInstances.get(i);this.featureSortOrder.push(o.featureIndex),[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(e,n,r){e>=0&&r.indexOf(e)===n&&t.addIndicesForPlacedSymbol(t.text,e)})),o.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,o.verticalPlacedTextSymbolIndex),o.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.placedIconSymbolIndex),o.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.verticalPlacedIconSymbolIndex)}}catch(a){r.e(a)}finally{r.f()}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}]),e}();si("SymbolBucket",uc,{omit:["layers","collisionBoxArray","features","compareText"]}),uc.MAX_GLYPHS=65535,uc.addDynamicAttributes=ic;var lc=new Hi({"symbol-placement":new Vi(Ke.layout_symbol["symbol-placement"]),"symbol-spacing":new Vi(Ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Vi(Ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ji(Ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Vi(Ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Vi(Ke.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Vi(Ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new Vi(Ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Vi(Ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new ji(Ke.layout_symbol["icon-size"]),"icon-text-fit":new Vi(Ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Vi(Ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new ji(Ke.layout_symbol["icon-image"]),"icon-rotate":new ji(Ke.layout_symbol["icon-rotate"]),"icon-padding":new Vi(Ke.layout_symbol["icon-padding"]),"icon-keep-upright":new Vi(Ke.layout_symbol["icon-keep-upright"]),"icon-offset":new ji(Ke.layout_symbol["icon-offset"]),"icon-anchor":new ji(Ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Vi(Ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Vi(Ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Vi(Ke.layout_symbol["text-rotation-alignment"]),"text-field":new ji(Ke.layout_symbol["text-field"]),"text-font":new ji(Ke.layout_symbol["text-font"]),"text-size":new ji(Ke.layout_symbol["text-size"]),"text-max-width":new ji(Ke.layout_symbol["text-max-width"]),"text-line-height":new Vi(Ke.layout_symbol["text-line-height"]),"text-letter-spacing":new ji(Ke.layout_symbol["text-letter-spacing"]),"text-justify":new ji(Ke.layout_symbol["text-justify"]),"text-radial-offset":new ji(Ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Vi(Ke.layout_symbol["text-variable-anchor"]),"text-anchor":new ji(Ke.layout_symbol["text-anchor"]),"text-max-angle":new Vi(Ke.layout_symbol["text-max-angle"]),"text-writing-mode":new Vi(Ke.layout_symbol["text-writing-mode"]),"text-rotate":new ji(Ke.layout_symbol["text-rotate"]),"text-padding":new Vi(Ke.layout_symbol["text-padding"]),"text-keep-upright":new Vi(Ke.layout_symbol["text-keep-upright"]),"text-transform":new ji(Ke.layout_symbol["text-transform"]),"text-offset":new ji(Ke.layout_symbol["text-offset"]),"text-allow-overlap":new Vi(Ke.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Vi(Ke.layout_symbol["text-ignore-placement"]),"text-optional":new Vi(Ke.layout_symbol["text-optional"])}),cc={paint:new Hi({"icon-opacity":new ji(Ke.paint_symbol["icon-opacity"]),"icon-color":new ji(Ke.paint_symbol["icon-color"]),"icon-halo-color":new ji(Ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new ji(Ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ji(Ke.paint_symbol["icon-halo-blur"]),"icon-translate":new Vi(Ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new Vi(Ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new ji(Ke.paint_symbol["text-opacity"]),"text-color":new ji(Ke.paint_symbol["text-color"],{runtimeType:ct,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new ji(Ke.paint_symbol["text-halo-color"]),"text-halo-width":new ji(Ke.paint_symbol["text-halo-width"]),"text-halo-blur":new ji(Ke.paint_symbol["text-halo-blur"]),"text-translate":new Vi(Ke.paint_symbol["text-translate"]),"text-translate-anchor":new Vi(Ke.paint_symbol["text-translate-anchor"])}),layout:lc},hc=function(){function e(t){m(this,e),this.type=t.property.overrides?t.property.overrides.runtimeType:at,this.defaultValue=t}return y(e,[{key:"evaluate",value:function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}},{key:"eachChild",value:function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return null}}]),e}();si("FormatSectionOverride",hc,{omit:["defaultValue"]});var fc=function(e){d(n,e);var t=g(n);function n(e){return m(this,n),t.call(this,e,cc)}return y(n,[{key:"recalculate",value:function(e,t){if(a(s(n.prototype),"recalculate",this).call(this,e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){var i,o=[],u=f(r);try{for(u.s();!(i=u.n()).done;){var l=i.value;o.indexOf(l)<0&&o.push(l)}}catch(c){u.e(c)}finally{u.f()}this.layout._values["text-writing-mode"]=o}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}},{key:"getValueAndResolveTokens",value:function(e,t,n,r){var i=this.layout.get(e).evaluate(t,{},n,r),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||dr(o.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,(function(t,n){return n in e?String(e[n]):""}))}(t.properties,i)}},{key:"createBucket",value:function(e){return new uc(e)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"_setPaintOverrides",value:function(){var e,t=f(cc.paint.overridableProperties);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(n.hasPaintOverride(this.layout,r)){var i=this.paint.get(r),o=new hc(i),a=new pr(o,i.property.specification),s=null;s="constant"===i.value.kind||"source"===i.value.kind?new mr("source",a):new yr("composite",a,i.value.zoomStops,i.value._interpolationType),this.paint._values[r]=new Bi(i.property,s,i.parameters)}}}catch(u){t.e(u)}finally{t.f()}}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,r){return!(!this.layout||t.isDataDriven()||r.isDataDriven())&&n.hasPaintOverride(this.layout,e)}},{key:"getProgramConfiguration",value:function(e){return new Jo(this,e)}}],[{key:"hasPaintOverride",value:function(e,t){var n=e.get("text-field"),r=cc.paint.properties[t],i=!1,o=function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(r.overrides&&r.overrides.hasOverride(o))return void(i=!0)}}catch(a){n.e(a)}finally{n.f()}};if("constant"===n.value.kind&&n.value.value instanceof kt)o(n.value.value.sections);else if("source"===n.value.kind){var a=function e(t){i||(t instanceof Nt&&Mt(t.value)===dt?o(t.value.sections):t instanceof Dt?o(t.sections):t.eachChild(e))},s=n.value;s._styleExpression&&a(s._styleExpression.expression)}return i}}]),n}(ta),pc={paint:new Hi({"background-color":new Vi(Ke.paint_background["background-color"]),"background-pattern":new Gi(Ke.paint_background["background-pattern"]),"background-opacity":new Vi(Ke.paint_background["background-opacity"])})},dc={paint:new Hi({"raster-opacity":new Vi(Ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new Vi(Ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Vi(Ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Vi(Ke.paint_raster["raster-brightness-max"]),"raster-saturation":new Vi(Ke.paint_raster["raster-saturation"]),"raster-contrast":new Vi(Ke.paint_raster["raster-contrast"]),"raster-resampling":new Vi(Ke.paint_raster["raster-resampling"]),"raster-fade-duration":new Vi(Ke.paint_raster["raster-fade-duration"])})},gc=function(e){d(n,e);var t=g(n);function n(e){var r;return m(this,n),(r=t.call(this,e,{})).implementation=e,r}return y(n,[{key:"is3D",value:function(){return"3d"===this.implementation.renderingMode}},{key:"hasOffscreenPass",value:function(){return void 0!==this.implementation.prerender}},{key:"recalculate",value:function(){}},{key:"updateTransitions",value:function(){}},{key:"hasTransition",value:function(){}},{key:"serialize",value:function(){}},{key:"onAdd",value:function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}},{key:"onRemove",value:function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}]),n}(ta),mc={paint:new Hi({"sky-type":new Vi(Ke.paint_sky["sky-type"]),"sky-atmosphere-sun":new Vi(Ke.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Vi(Ke.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Vi(Ke.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Vi(Ke.paint_sky["sky-gradient-radius"]),"sky-gradient":new $i(Ke.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Vi(Ke.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Vi(Ke.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Vi(Ke.paint_sky["sky-opacity"])})};function yc(e,t,n){var r=Da(0,0,1),i=Za(Ya());return function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);e[0]=r*u-o*s,e[1]=i*u+a*s,e[2]=o*u+r*s,e[3]=a*u-i*s}(i,i,n?-T(e)+Math.PI:T(e)),Ja(i,i,-T(t)),Ga(r,r,i),Va(r,r)}var vc={circle:function(e){d(n,e);var t=g(n);function n(e){return m(this,n),t.call(this,e,Ca)}return y(n,[{key:"createBucket",value:function(e){return new la(e)}},{key:"queryRadius",value:function(e){var t=e;return wa("circle-radius",this,t)+wa("circle-stroke-width",this,t)+Ea(this.paint.get("circle-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,o,a,s){var u=this,l="map"===this.paint.get("circle-pitch-alignment");if(l&&e.queryGeometry.isAboveHorizon)return!1;var c,h=Ta(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),p=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),d=l?p*e.pixelToTileUnitsFactor:p,g=f(r);try{for(g.s();!(c=g.n()).done;){var m,y=c.value,v=f(y);try{var _=function(){var t=m.value,n=t.add(h),r=s&&o.elevation?o.elevation.exaggeration()*s.getElevationAt(n.x,n.y,!0):0,i=l?n:es(n,r,a),c=l?e.tilespaceRays.map((function(e){return rs(e,r)})):e.queryGeometry.screenGeometry,f=d,p=Wa([],[t.x,t.y,r,1],a);if("viewport"===u.paint.get("circle-pitch-scale")&&"map"===u.paint.get("circle-pitch-alignment")?f*=p[3]/o.cameraToCenterDistance:"map"===u.paint.get("circle-pitch-scale")&&"viewport"===u.paint.get("circle-pitch-alignment")&&(f*=o.cameraToCenterDistance/p[3]),ha(c,i,f))return{v:!0}};for(v.s();!(m=v.n()).done;){var b=_();if("object"===typeof b)return b.v}}catch(x){v.e(x)}finally{v.f()}}}catch(x){g.e(x)}finally{g.f()}return!1}},{key:"getProgramIds",value:function(){return["circle"]}},{key:"getProgramConfiguration",value:function(e){return new Jo(this,e)}}]),n}(ta),heatmap:function(e){d(n,e);var t=g(n);function n(e){var r;return m(this,n),(r=t.call(this,e,cs))._updateColorRamp(),r}return y(n,[{key:"createBucket",value:function(e){return new is(e)}}]),y(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"heatmap-color"===e&&this._updateColorRamp()}},{key:"_updateColorRamp",value:function(){this.colorRamp=hs({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}},{key:"resize",value:function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["heatmap","heatmapTexture"]}},{key:"getProgramConfiguration",value:function(e){return new Jo(this,e)}}]),n}(ta),hillshade:function(e){d(n,e);var t=g(n);function n(e){return m(this,n),t.call(this,e,fs)}return y(n,[{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["hillshade","hillshadePrepare"]}},{key:"getProgramConfiguration",value:function(e){return new Jo(this,e)}}]),n}(ta),fill:function(e){d(n,e);var t=g(n);function n(e){return m(this,n),t.call(this,e,Js)}return y(n,[{key:"getProgramIds",value:function(){var e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}},{key:"getProgramConfiguration",value:function(e){return new Jo(this,e)}},{key:"recalculate",value:function(e,t){a(s(n.prototype),"recalculate",this).call(this,e,t);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}},{key:"createBucket",value:function(e){return new Ys(e)}},{key:"queryRadius",value:function(){return Ea(this.paint.get("fill-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,o){return!e.queryGeometry.isAboveHorizon&&fa(Sa(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),r)}},{key:"isTileClipped",value:function(){return!0}}]),n}(ta),"fill-extrusion":function(e){d(n,e);var t=g(n);function n(e){return m(this,n),t.call(this,e,mu)}return y(n,[{key:"createBucket",value:function(e){return new du(e)}},{key:"queryRadius",value:function(){return Ea(this.paint.get("fill-extrusion-translate"))}},{key:"is3D",value:function(){return!0}},{key:"getProgramIds",value:function(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}},{key:"getProgramConfiguration",value:function(e){return new Jo(this,e)}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,o,a){var s=Ta(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(t,n),l=this.paint.get("fill-extrusion-base").evaluate(t,n),c=e.queryGeometry.screenGeometry,h=function(e,t,n,r,i){var o,a=[],s=[],u=i[8]*t,l=i[9]*t,c=i[10]*t,h=i[11]*t,p=i[8]*n,d=i[9]*n,g=i[10]*n,m=i[11]*n,y=f(e);try{for(y.s();!(o=y.n()).done;){var _,b=o.value,x=[],w=[],E=f(b);try{for(E.s();!(_=E.n()).done;){var S=_.value,T=S.x+r.x,k=S.y+r.y,C=i[0]*T+i[4]*k+i[12],I=i[1]*T+i[5]*k+i[13],A=i[2]*T+i[6]*k+i[14],M=i[3]*T+i[7]*k+i[15],L=A+c,N=M+h,P=C+p,O=I+d,R=A+g,D=M+m,F=new v((C+u)/N,(I+l)/N);F.z=L/N,x.push(F);var z=new v(P/D,O/D);z.z=R/D,w.push(z)}}catch(B){E.e(B)}finally{E.f()}a.push(x),s.push(w)}}catch(B){y.e(B)}finally{y.f()}return[a,s]}(r,l,u,s,a);return function(e,t,n){var r=1/0;fa(n,t)&&(r=vu(n,t[0]));for(var i=0;i<t.length;i++)for(var o=t[i],a=e[i],s=0;s<o.length-1;s++){var u=o[s],l=[u,o[s+1],a[s+1],a[s],u];ca(n,l)&&(r=Math.min(r,vu(n,l)))}return r!==1/0&&r}(h[0],h[1],c)}}]),n}(ta),line:function(e){d(n,e);var t=g(n);function n(e){var r;return m(this,n),(r=t.call(this,e,Tu)).gradientVersion=0,r}return y(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"line-gradient"===e&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof pn,this.gradientVersion=(this.gradientVersion+1)%w)}},{key:"gradientExpression",value:function(){return this._transitionablePaint._values["line-gradient"].value.expression}},{key:"recalculate",value:function(e,t){a(s(n.prototype),"recalculate",this).call(this,e,t),this.paint._values["line-floorwidth"]=ku.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}},{key:"createBucket",value:function(e){return new Eu(e)}},{key:"getProgramIds",value:function(){var e=this.paint.get("line-dasharray"),t=this.paint.get("line-pattern").constantOr(1),n=this.paint.get("line-gradient");return[t?"linePattern":e?"lineSDF":n?"lineGradient":"line"]}},{key:"getProgramConfiguration",value:function(e){return new Jo(this,e)}},{key:"queryRadius",value:function(e){var t=e,n=Cu(wa("line-width",this,t),wa("line-gap-width",this,t)),r=wa("line-offset",this,t);return n/2+Math.abs(r)+Ea(this.paint.get("line-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,o){if(e.queryGeometry.isAboveHorizon)return!1;var a=Sa(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*Cu(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),u=this.paint.get("line-offset").evaluate(t,n);return u&&(r=function(e,t){for(var n=[],r=new v(0,0),i=0;i<e.length;i++){for(var o=e[i],a=[],s=0;s<o.length;s++){var u=o[s-1],l=o[s],c=o[s+1],h=0===s?r:l.sub(u)._unit()._perp(),f=s===o.length-1?r:c.sub(l)._unit()._perp(),p=h._add(f)._unit();p._mult(1/(p.x*f.x+p.y*f.y)),a.push(p._mult(t)._add(l))}n.push(a)}return n}(r,u*e.pixelToTileUnitsFactor)),function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];if(e.length>=3)for(var o=0;o<i.length;o++)if(_a(e,i[o]))return!0;if(pa(e,i,n))return!0}return!1}(a,r,s)}},{key:"isTileClipped",value:function(){return!0}}]),n}(ta),symbol:fc,background:function(e){d(n,e);var t=g(n);function n(e){return m(this,n),t.call(this,e,pc)}return y(n,[{key:"getProgramIds",value:function(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}}]),n}(ta),raster:function(e){d(n,e);var t=g(n);function n(e){return m(this,n),t.call(this,e,dc)}return y(n,[{key:"getProgramIds",value:function(){return["raster"]}}]),n}(ta),sky:function(e){d(n,e);var t=g(n);function n(e){var r;return m(this,n),(r=t.call(this,e,mc))._updateColorRamp(),r}return y(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}},{key:"_updateColorRamp",value:function(){this.colorRamp=hs({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}},{key:"needsSkyboxCapture",value:function(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){var t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}}},{key:"getCenter",value:function(e,t){var n=this.paint.get("sky-type");if("atmosphere"===n){var r=this.paint.get("sky-atmosphere-sun"),i=!r,o=e.style.light,a=o.properties.get("position");return i&&"viewport"===o.properties.get("anchor")&&q("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),i?yc(a.azimuthal,90-a.polar,t):yc(r[0],90-r[1],t)}if("gradient"===n){var s=this.paint.get("sky-gradient-center");return yc(s[0],90-s[1],t)}}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!0}},{key:"markSkyboxValid",value:function(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}},{key:"hasOffscreenPass",value:function(){return!0}},{key:"getProgramIds",value:function(){var e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}]),n}(ta)},_c=b.HTMLImageElement,bc=b.HTMLCanvasElement,xc=b.HTMLVideoElement,wc=b.ImageData,Ec=b.ImageBitmap,Sc=function(){function e(t,n,r,i){m(this,e),this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(n,i)}return y(e,[{key:"update",value:function(e,t,n){var r=e.width,i=e.height,o=!(this.size&&this.size[0]===r&&this.size[1]===i||n),a=this.context,s=a.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),o)this.size=[r,i],e instanceof _c||e instanceof bc||e instanceof xc||e instanceof wc||Ec&&e instanceof Ec?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,r,i,0,this.format,s.UNSIGNED_BYTE,e.data);else{var u=n||{x:0,y:0},l=u.x,c=u.y;e instanceof _c||e instanceof bc||e instanceof xc||e instanceof wc||Ec&&e instanceof Ec?s.texSubImage2D(s.TEXTURE_2D,0,l,c,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,l,c,r,i,s.RGBA,s.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}},{key:"bind",value:function(e,t,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)}},{key:"isSizePowerOfTwo",value:function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}},{key:"destroy",value:function(){this.context.gl.deleteTexture(this.texture),this.texture=null}}]),e}(),Tc=function(){function e(t){var n=this;m(this,e),this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){n._triggered=!1,n._callback()})}return y(e,[{key:"trigger",value:function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))}},{key:"remove",value:function(){delete this._channel,this._callback=function(){}}}]),e}(),kc=b.performance,Cc=function(){function e(t){m(this,e),this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},kc.mark(this._marks.start)}return y(e,[{key:"finish",value:function(){kc.mark(this._marks.end);var e=kc.getEntriesByName(this._marks.measure);return 0===e.length&&(kc.measure(this._marks.measure,this._marks.start,this._marks.end),e=kc.getEntriesByName(this._marks.measure),kc.clearMarks(this._marks.start),kc.clearMarks(this._marks.end),kc.clearMeasures(this._marks.measure)),e}}]),e}(),Ic=function(){function e(){m(this,e),this.tasks={},this.taskQueue=[],F(["process"],this),this.invoker=new Tc(this.process),this.nextId=0}return y(e,[{key:"add",value:function(e,t){var n=this,r=this.nextId++;return this.tasks[r]={fn:e,metadata:t,priority:Ac(t),id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:function(){delete n.tasks[r]}}}},{key:"process",value:function(){var e=this;H();try{if(this.taskQueue=this.taskQueue.filter((function(t){return!!e.tasks[t]})),!this.taskQueue.length)return;var t=this.pick();if(null===t)return;var n=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{}}},{key:"pick",value:function(){for(var e=null,t=1/0,n=0;n<this.taskQueue.length;n++){var r=this.tasks[this.taskQueue[n]];r.priority<t&&(t=r.priority,e=n)}if(null===e)return null;var i=this.taskQueue[e];return this.taskQueue.splice(e,1),i}},{key:"remove",value:function(){this.invoker.remove()}}]),e}();function Ac(e){var t=e.type,n=e.isSymbolTile,r=e.zoom;return r=r||0,"message"===t?0:"maybePrepare"!==t||n?"parseTile"!==t||n?"parseTile"===t&&n?300-r:"maybePrepare"===t&&n?400-r:500:200-r:100-r}var Mc=function(){function e(t,n){m(this,e),t&&(n?this.setSouthWest(t).setNorthEast(n):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}return y(e,[{key:"setNorthEast",value:function(e){return this._ne=e instanceof Lc?new Lc(e.lng,e.lat):Lc.convert(e),this}},{key:"setSouthWest",value:function(e){return this._sw=e instanceof Lc?new Lc(e.lng,e.lat):Lc.convert(e),this}},{key:"extend",value:function(t){var n,r,i=this._sw,o=this._ne;if(t instanceof Lc)n=t,r=t;else{if(!(t instanceof e))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(e.convert(t)):this.extend(Lc.convert(t)):this;if(n=t._sw,r=t._ne,!n||!r)return this}return i||o?(i.lng=Math.min(n.lng,i.lng),i.lat=Math.min(n.lat,i.lat),o.lng=Math.max(r.lng,o.lng),o.lat=Math.max(r.lat,o.lat)):(this._sw=new Lc(n.lng,n.lat),this._ne=new Lc(r.lng,r.lat)),this}},{key:"getCenter",value:function(){return new Lc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"getNorthWest",value:function(){return new Lc(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new Lc(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toArray",value:function(){return[this._sw.toArray(),this._ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this._sw&&this._ne)}},{key:"contains",value:function(e){var t=Lc.convert(e),n=t.lng,r=t.lat,i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i}}],[{key:"convert",value:function(t){return!t||t instanceof e?t:new e(t)}}]),e}(),Lc=function(){function e(t,n){if(m(this,e),isNaN(t)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(n,")"));if(this.lng=+t,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return y(e,[{key:"wrap",value:function(){return new e(M(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(e){var t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return 6371008.8*Math.acos(Math.min(i,1))}},{key:"toBounds",value:function(){var t=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new Mc(new e(this.lng-n,this.lat-t),new e(this.lng+n,this.lat+t))}}],[{key:"convert",value:function(t){if(t instanceof e)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new e(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new e(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}(),Nc=2*Math.PI*6371008.8;function Pc(e){return Nc*Math.cos(e*Math.PI/180)}function Oc(e){return(180+e)/360}function Rc(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Dc(e,t){return e/Pc(t)}function Fc(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function zc(e,t){return e*Pc(Fc(t))}var Bc=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;m(this,e),this.x=+t,this.y=+n,this.z=+r}return y(e,[{key:"toLngLat",value:function(){return new Lc(360*this.x-180,Fc(this.y))}},{key:"toAltitude",value:function(){return zc(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/Nc*(e=Fc(this.y),1/Math.cos(e*Math.PI/180));var e}}],[{key:"fromLngLat",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Lc.convert(t);return new e(Oc(r.lng),Rc(r.lat),Dc(n,r.lat))}}]),e}();function Uc(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}var Vc=function(){function e(t,n,r){m(this,e),this.z=t,this.x=n,this.y=r,this.key=Gc(0,t,t,n,r)}return y(e,[{key:"equals",value:function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}},{key:"url",value:function(e,t){var n,r,i,o,a,s=(r=this.y,i=this.z,o=Uc(256*(n=this.x),256*(r=Math.pow(2,i)-r-1),i),a=Uc(256*(n+1),256*(r+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(e,t,n){for(var r,i="",o=e;o>0;o--)i+=(t&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)}},{key:"getTilePoint",value:function(e){var t=Math.pow(2,this.z);return new v(8192*(e.x*t-this.x),8192*(e.y*t-this.y))}},{key:"getTileVec3",value:function(e){var t=Math.pow(2,this.z);return Da(8192*(e.x*t-this.x),8192*(e.y*t-this.y),zc(e.z,e.y))}},{key:"toString",value:function(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}]),e}(),jc=function e(t,n){m(this,e),this.wrap=t,this.canonical=n,this.key=Gc(t,n.z,n.z,n.x,n.y)},qc=function(){function e(t,n,r,i,o){m(this,e),this.overscaledZ=t,this.wrap=n,this.canonical=new Vc(r,+i,+o),this.key=0===n&&t===r?this.canonical.key:Gc(n,t,r,i,o)}return y(e,[{key:"equals",value:function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}},{key:"scaledTo",value:function(t){var n=this.canonical.z-t;return t>this.canonical.z?new e(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new e(t,this.wrap,t,this.canonical.x>>n,this.canonical.y>>n)}},{key:"calculateScaledKey",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return Gc(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);var n=this.canonical.z-e;return Gc(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}},{key:"isChildOf",value:function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}},{key:"children",value:function(t){if(this.overscaledZ>=t)return[new e(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var n=this.canonical.z+1,r=2*this.canonical.x,i=2*this.canonical.y;return[new e(n,this.wrap,n,r,i),new e(n,this.wrap,n,r+1,i),new e(n,this.wrap,n,r,i+1),new e(n,this.wrap,n,r+1,i+1)]}},{key:"isLessThan",value:function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}},{key:"wrapped",value:function(){return new e(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"unwrapTo",value:function(t){return new e(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"overscaleFactor",value:function(){return Math.pow(2,this.overscaledZ-this.canonical.z)}},{key:"toUnwrapped",value:function(){return new jc(this.wrap,this.canonical)}},{key:"toString",value:function(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}},{key:"getTilePoint",value:function(e){return this.canonical.getTilePoint(new Bc(e.x-this.wrap,e.y))}},{key:"getTileVec3",value:function(e){return this.canonical.getTileVec3(new Bc(e.x-this.wrap,e.y,e.z))}}]),e}();function Gc(e,t,n,r,i){var o=1<<Math.min(n,22),a=o*(i%o)+r%o;return e&&n<22&&(a+=o*o*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*a+n)+(t-n)}si("CanonicalTileID",Vc),si("OverscaledTileID",qc,{omit:["posMatrix"]});var $c=function(){function e(t){m(this,e),this._stringToNumber={},this._numberToString=[];for(var n=0;n<t.length;n++){var r=t[n];this._stringToNumber[r]=n,this._numberToString[n]=r}}return y(e,[{key:"encode",value:function(e){return this._stringToNumber[e]}},{key:"decode",value:function(e){return this._numberToString[e]}}]),e}(),Hc=function(){function e(t,n,r,i,o){m(this,e),this.type="Feature",this._vectorTileFeature=t,t._z=n,t._x=r,t._y=i,this.properties=t.properties,this.id=o}return y(e,[{key:"toJSON",value:function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}},{key:"geometry",get:function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},set:function(e){this._geometry=e}}]),e}(),Xc=Ji([{name:"a_pos",type:"Int16",components:2}]),Wc=function(){function e(t,n,r){m(this,e),this.tileID=t,this.uid=O(),this.uses=0,this.tileSize=n,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}return y(e,[{key:"registerFadeDuration",value:function(e){var t=e+this.timeAdded;t<oe.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}},{key:"wasRequested",value:function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}},{key:"loadVectorData",value:function(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var n={};if(!t)return n;var r,i=f(e);try{var o=function(){var e=r.value,i=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==i.length){e.layers=i,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return i.filter((function(t){return t.id===e}))[0]})));var o,a=f(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;n[s.id]=e}}catch(u){a.e(u)}finally{a.f()}}};for(i.s();!(r=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof uc){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof uc&&a.hasRTLText){this.hasRTLText=!0,Li.isLoading()||Li.isLoaded()||"deferred"!==Ai()||Mi();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(s).queryRadius(u))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new wo}},{key:"unloadVectorData",value:function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}},{key:"getBucket",value:function(e){return this.buckets[e.id]}},{key:"upload",value:function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Sc(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Sc(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)}},{key:"prepare",value:function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}},{key:"queryRenderedFeatures",value:function(e,t,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:a,transform:o,params:i},e,t,n):{}}},{key:"querySourceFeatures",value:function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),i=t?t.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(o)for(var a=Ir(t&&t.filter),s=this.tileID.canonical,u=s.z,l=s.x,c=s.y,h={z:u,x:l,y:c},f=0;f<o.length;f++){var p=o.feature(f);if(a.needGeometry){var d=sa(p,!0);if(!a.filter(new Ni(this.tileID.overscaledZ),d,this.tileID.canonical))continue}else if(!a.filter(new Ni(this.tileID.overscaledZ),p))continue;var g=n.getId(p,i),m=new Hc(p,u,l,c,g);m.tile=h,e.push(m)}}}},{key:"hasData",value:function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}},{key:"patternsLoaded",value:function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}},{key:"setExpiryData",value:function(e){var t=this.expirationTime;if(e.cacheControl){var n=X(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var o=this.expirationTime-t;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}},{key:"getExpiryTimeout",value:function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}},{key:"setFeatureState",value:function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(t.style.hasLayer(r)){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=e[o];if(a&&s&&0!==Object.keys(s).length){i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=t&&t.style&&t.style.getLayer(r);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(i)))}}}}},{key:"holdingForFade",value:function(){return void 0!==this.symbolFadeHoldUntil}},{key:"symbolFadeFinished",value:function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<oe.now()}},{key:"clearFadeHold",value:function(){this.symbolFadeHoldUntil=void 0}},{key:"setHoldDuration",value:function(e){this.symbolFadeHoldUntil=oe.now()+e}},{key:"setDependencies",value:function(e,t){var n,r={},i=f(t);try{for(i.s();!(n=i.n()).done;)r[n.value]=!0}catch(o){i.e(o)}finally{i.f()}this.dependencies[e]=r}},{key:"hasDependency",value:function(e,t){var n,r=f(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this.dependencies[i];if(o){var a,s=f(t);try{for(s.s();!(a=s.n()).done;)if(o[a.value])return!0}catch(u){s.e(u)}finally{s.f()}}}}catch(u){r.e(u)}finally{r.f()}return!1}},{key:"clearQueryDebugViz",value:function(){}}]),e}(),Yc=function(){function e(){m(this,e),this.state={},this.stateChanges={},this.deletedStates={}}return y(e,[{key:"updateState",value:function(e,t,n){var r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},N(this.stateChanges[e][r],n),null===this.deletedStates[e])for(var i in this.deletedStates[e]={},this.state[e])i!==r&&(this.deletedStates[e][i]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][r])for(var o in this.deletedStates[e][r]={},this.state[e][r])n[o]||(this.deletedStates[e][r][o]=null);else for(var a in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][a]&&delete this.deletedStates[e][r][a]}},{key:"removeFeatureState",value:function(e,t,n){if(null!==this.deletedStates[e]){var r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}}},{key:"getState",value:function(e,t){var n=String(t),r=N({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var i=this.deletedStates[e][t];if(null===i)return{};for(var o in i)delete r[o]}return r}},{key:"initializeTileState",value:function(e,t){e.setFeatureState(this.state,t)}},{key:"coalesceChanges",value:function(e,t){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),N(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var u in this.state[a])s[u]={},this.state[a][u]={};else for(var l in this.deletedStates[a]){if(null===this.deletedStates[a][l])this.state[a][l]={};else for(var c=0,h=Object.keys(this.deletedStates[a][l]);c<h.length;c++){var f=h[c];delete this.state[a][l][f]}s[l]=this.state[a][l]}n[a]=n[a]||{},N(n[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var p in e)e[p].setFeatureState(n,t)}}]),e}(),Zc=function(){function e(t){m(this,e),this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}return y(e,[{key:"getElevation",value:function(e,t){var n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}},{key:"isLeaf",value:function(e,t){return this.leaves[this.toIdx(e,t)]}},{key:"toIdx",value:function(e,t){return t*this.size+e}}]),e}();function Jc(e,t,n,r){for(var i=0,o=Number.MAX_VALUE,a=0;a<3;a++)if(Math.abs(r[a])<1e-15){if(n[a]<e[a]||n[a]>t[a])return null}else{var s=1/r[a],u=(e[a]-n[a])*s,l=(t[a]-n[a])*s;if(u>l){var c=u;u=l,l=c}if(u>i&&(i=u),l<o&&(o=l),i>o)return null}return i}function Kc(e,t,n,r,i,o,a,s,u,l,c){var h=r-e,f=i-t,p=o-n,d=a-e,g=s-t,m=u-n,y=c[1]*m-c[2]*g,v=c[2]*d-c[0]*m,_=c[0]*g-c[1]*d,b=h*y+f*v+p*_;if(Math.abs(b)<1e-15)return null;var x=1/b,w=l[0]-e,E=l[1]-t,S=l[2]-n,T=(w*y+E*v+S*_)*x;if(T<0||T>1)return null;var k=E*p-S*f,C=S*h-w*p,I=w*f-E*h,A=(c[0]*k+c[1]*C+c[2]*I)*x;return A<0||T+A>1?null:(d*k+g*C+m*I)*x}function Qc(e,t,n){return(e-t)/(n-t)}function eh(e,t,n,r,i,o,a,s,u){var l=1<<n,c=o-r,h=a-i,f=(e+1)/l*c+r,p=(t+0)/l*h+i,d=(t+1)/l*h+i;s[0]=(e+0)/l*c+r,s[1]=p,u[0]=f,u[1]=d}var th=function(){function e(t){if(m(this,e),this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],this.dem){var n=function(e){for(var t=Math.ceil(Math.log2(e.dim/8)),n=[],r=Math.ceil(Math.pow(2,t)),i=1/r,o=function(e,t,n,r,i){var o=r?1:0,a=(e+1)*n-o,s=t*n,u=(t+1)*n-o;i[0]=e*n,i[1]=s,i[2]=a,i[3]=u},a=new Zc(r),s=[],u=0;u<r*r;u++){o(u%r,Math.floor(u/r),i,!1,s);var l=rh(s[0],s[1],e),c=rh(s[2],s[1],e),h=rh(s[2],s[3],e),f=rh(s[0],s[3],e);a.minimums.push(Math.min(l,c,h,f)),a.maximums.push(Math.max(l,c,h,f)),a.leaves.push(1)}for(n.push(a),r/=2;r>=1;r/=2){var p=n[n.length-1];a=new Zc(r);for(var d=0;d<r*r;d++){o(d%r,Math.floor(d/r),2,!0,s);var g=p.getElevation(s[0],s[1]),m=p.getElevation(s[2],s[1]),y=p.getElevation(s[2],s[3]),v=p.getElevation(s[0],s[3]),_=p.isLeaf(s[0],s[1]),b=p.isLeaf(s[2],s[1]),x=p.isLeaf(s[2],s[3]),w=p.isLeaf(s[0],s[3]),E=Math.min(g.min,m.min,y.min,v.min),S=Math.max(g.max,m.max,y.max,v.max),T=_&&b&&x&&w;a.maximums.push(S),a.minimums.push(E),a.leaves.push(S-E<=5&&T?1:0)}n.push(a)}return n}(this.dem),r=n.length-1,i=n[r];this._addNode(i.minimums[0],i.maximums[0],i.leaves[0]),this._construct(n,0,0,r,0)}}return y(e,[{key:"raycastRoot",value:function(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Jc([e,t,-100],[n,r,this.maximums[0]*a],i,o)}},{key:"raycast",value:function(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;var s=this.raycastRoot(e,t,n,r,i,o,a);if(null==s)return null;for(var u=[],l=[],c=[],h=[],f=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];f.length>0;){var p=f.pop(),d=p.idx,g=p.t,m=p.nodex,y=p.nodey,v=p.depth;if(this.leaves[d]){eh(m,y,v,e,t,n,r,c,h);var _=1<<v,b=(m+0)/_,x=(m+1)/_,w=(y+0)/_,E=(y+1)/_,S=rh(b,w,this.dem)*a,T=rh(x,w,this.dem)*a,k=rh(x,E,this.dem)*a,C=rh(b,E,this.dem)*a,I=Kc(c[0],c[1],S,h[0],c[1],T,h[0],h[1],k,i,o),A=Kc(h[0],h[1],k,c[0],h[1],C,c[0],c[1],S,i,o),M=Math.min(null!==I?I:Number.MAX_VALUE,null!==A?A:Number.MAX_VALUE);if(M!==Number.MAX_VALUE)return M;var L=Ua([],i,o,g);if(nh(S,T,C,k,Qc(L[0],c[0],h[0]),Qc(L[1],c[1],h[1]))>=L[2])return g}else{for(var N=0,P=0;P<this._siblingOffset.length;P++){eh((m<<1)+this._siblingOffset[P][0],(y<<1)+this._siblingOffset[P][1],v+1,e,t,n,r,c,h),c[2]=-100,h[2]=this.maximums[this.childOffsets[d]+P]*a;var O=Jc(c,h,i,o);if(null!=O){var R=O;u[P]=R;for(var D=!1,F=0;F<N&&!D;F++)R>=u[l[F]]&&(l.splice(F,0,P),D=!0);D||(l[N]=P),N++}}for(var z=0;z<N;z++){var B=l[z];f.push({idx:this.childOffsets[d]+B,t:u[B],nodex:(m<<1)+this._siblingOffset[B][0],nodey:(y<<1)+this._siblingOffset[B][1],depth:v+1})}}}return null}},{key:"_addNode",value:function(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}},{key:"_construct",value:function(e,t,n,r,i){if(1!==e[r].isLeaf(t,n)){this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);for(var o,a=r-1,s=e[a],u=0,l=0;l<this._siblingOffset.length;l++){var c=2*t+this._siblingOffset[l][0],h=2*n+this._siblingOffset[l][1],f=s.getElevation(c,h),p=s.isLeaf(c,h),d=this._addNode(f.min,f.max,p);p&&(u|=1<<l),o||(o=d)}for(var g=0;g<this._siblingOffset.length;g++)u&1<<g||this._construct(e,2*t+this._siblingOffset[g][0],2*n+this._siblingOffset[g][1],a,o+g)}}}]),e}();function nh(e,t,n,r,i,o){return dn(dn(e,n,o),dn(t,r,o),i)}function rh(e,t,n){var r=n.dim,i=A(e*r-.5,0,r-1),o=A(t*r-.5,0,r-1),a=Math.floor(i),s=Math.floor(o),u=Math.min(a+1,r-1),l=Math.min(s+1,r-1);return nh(n.get(a,s),n.get(u,s),n.get(a,l),n.get(u,l),i-a,o-s)}var ih={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]},oh=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(m(this,e),this.uid=t,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return q('"'.concat(r,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=n.height;var a=this.dim=n.height-2;if(this.data=new Uint32Array(n.data.buffer),this.encoding=r||"mapbox",this.borderReady=i,!i){for(var s=0;s<a;s++)this.data[this._idx(-1,s)]=this.data[this._idx(0,s)],this.data[this._idx(a,s)]=this.data[this._idx(a-1,s)],this.data[this._idx(s,-1)]=this.data[this._idx(s,0)],this.data[this._idx(s,a)]=this.data[this._idx(s,a-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(a,-1)]=this.data[this._idx(a-1,0)],this.data[this._idx(-1,a)]=this.data[this._idx(0,a-1)],this.data[this._idx(a,a)]=this.data[this._idx(a-1,a-1)],o&&this._buildQuadTree()}}return y(e,[{key:"tree",get:function(){return this._tree||this._buildQuadTree(),this._tree}}]),y(e,[{key:"_buildQuadTree",value:function(){this._tree=new th(this)}},{key:"get",value:function(e,t){var n=new Uint8Array(this.data.buffer),r=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])}},{key:"_idx",value:function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}},{key:"_unpackMapbox",value:function(e,t,n){return(256*e*256+256*t+n)/10-1e4}},{key:"_unpackTerrarium",value:function(e,t,n){return 256*e+t+n/256-32768}},{key:"getPixels",value:function(){return new ls({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}},{key:"backfillBorder",value:function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var r=t*this.dim,i=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-t*this.dim,u=-n*this.dim,l=o;l<a;l++)for(var c=r;c<i;c++)this.data[this._idx(c,l)]=e.data[this._idx(c+s,l+u)]}},{key:"onDeserialize",value:function(){this._tree&&(this._tree.dem=this)}},{key:"unpackVector",get:function(){return ih[this.encoding]}}],[{key:"getUnpackVector",value:function(e){return ih[e]}},{key:"pack",value:function(t,n){var r=[0,0,0,0],i=e.getUnpackVector(n),o=Math.floor((t+i[3])/i[2]);return r[2]=o%256,o=Math.floor(o/256),r[1]=o%256,o=Math.floor(o/256),r[0]=o,r}}]),e}();si("DEMData",oh),si("DemMinMaxQuadTree",th,{omit:["dem"]});var ah=function(){function e(t,n){m(this,e),this.max=t,this.onRemove=n,this.reset()}return y(e,[{key:"reset",value:function(){for(var e in this.data){var t,n=f(this.data[e]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}}catch(i){n.e(i)}finally{n.f()}}return this.data={},this.order=[],this}},{key:"add",value:function(e,t,n){var r=this,i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:t,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout((function(){r.remove(e,o)}),n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}},{key:"has",value:function(e){return e.wrapped().key in this.data}},{key:"getAndRemove",value:function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}},{key:"_getAndRemoveByKey",value:function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}},{key:"getByKey",value:function(e){var t=this.data[e];return t?t[0].value:null}},{key:"get",value:function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}},{key:"remove",value:function(e,t){if(!this.has(e))return this;var n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}},{key:"setMaxSize",value:function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}},{key:"filter",value:function(e){var t=[];for(var n in this.data){var r,i=f(this.data[n]);try{for(i.s();!(r=i.n()).done;){var o=r.value;e(o.value)||t.push(o)}}catch(l){i.e(l)}finally{i.f()}}for(var a=0,s=t;a<s.length;a++){var u=s[a];this.remove(u.value.tileID,u)}}}]),e}(),sh=function(){function e(t,n,r){m(this,e),this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}return y(e,[{key:"bind",value:function(){this.context.bindElementBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),uh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},lh=function(){function e(t,n,r,i){m(this,e),this.length=n.length,this.attributes=r,this.itemSize=n.bytesPerElement,this.dynamicDraw=i,this.context=t;var o=t.gl;this.buffer=o.createBuffer(),t.bindVertexBuffer.set(this.buffer),o.bufferData(o.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}return y(e,[{key:"bind",value:function(){this.context.bindVertexBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"enableAttributes",value:function(e,t){for(var n=0;n<this.attributes.length;n++){var r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}},{key:"setVertexAttribPointers",value:function(e,t,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[uh[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),ch=function(){function e(t){m(this,e),this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}return y(e,[{key:"get",value:function(){return this.current}},{key:"set",value:function(e){}},{key:"getDefault",value:function(){return this.default}},{key:"setDefault",value:function(){this.set(this.default)}}]),e}(),hh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return Et.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),n}(ch),fh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return 1}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}]),n}(ch),ph=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return 0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}]),n}(ch),dh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return[!0,!0,!0,!0]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}(ch),gh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return!0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}]),n}(ch),mh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return 255}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}]),n}(ch),yh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return{func:this.gl.ALWAYS,ref:0,mask:255}}},{key:"set",value:function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}]),n}(ch),vh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}]),n}(ch),_h=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}}]),n}(ch),bh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return[0,1]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}(ch),xh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}}]),n}(ch),wh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return this.gl.LESS}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}]),n}(ch),Eh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}}]),n}(ch),Sh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.ONE,e.ZERO]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}(ch),Th=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return Et.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),n}(ch),kh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return this.gl.FUNC_ADD}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}]),n}(ch),Ch=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}}]),n}(ch),Ih=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return this.gl.BACK}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}]),n}(ch),Ah=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return this.gl.CCW}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}]),n}(ch),Mh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}]),n}(ch),Lh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return this.gl.TEXTURE0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}]),n}(ch),Nh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}(ch),Ph=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(ch),Oh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(ch),Rh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}}]),n}(ch),Dh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}}]),n}(ch),Fh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}]),n}(ch),zh=function(e){d(n,e);var t=g(n);function n(e){var r;return m(this,n),(r=t.call(this,e)).vao=e.extVertexArrayObject,r}return y(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}]),n}(ch),Bh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return 4}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}}]),n}(ch),Uh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}(ch),Vh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}(ch),jh=function(e){d(n,e);var t=g(n);function n(e,r){var i;return m(this,n),(i=t.call(this,e)).context=e,i.parent=r,i}return y(n,[{key:"getDefault",value:function(){return null}}]),n}(ch),qh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"setDirty",value:function(){this.dirty=!0}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}}]),n}(jh),Gh=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"attachment",value:function(){return this.gl.DEPTH_ATTACHMENT}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(jh),$h=function(){function e(t,n,r,i){m(this,e),this.context=t,this.width=n,this.height=r;var o=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new qh(t,o),i&&(this.depthAttachment=new Gh(t,o))}return y(e,[{key:"destroy",value:function(){var e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n)}e.deleteFramebuffer(this.framebuffer)}}]),e}(),Hh=function e(t,n,r){m(this,e),this.func=t,this.mask=n,this.range=r};Hh.ReadOnly=!1,Hh.ReadWrite=!0,Hh.disabled=new Hh(519,Hh.ReadOnly,[0,1]);var Xh=function e(t,n,r,i,o,a){m(this,e),this.test=t,this.ref=n,this.mask=r,this.fail=i,this.depthFail=o,this.pass=a};Xh.disabled=new Xh({func:519,mask:0},0,0,7680,7680,7680);var Wh=function e(t,n,r){m(this,e),this.blendFunction=t,this.blendColor=n,this.mask=r};Wh.Replace=[1,0],Wh.disabled=new Wh(Wh.Replace,Et.transparent,[!1,!1,!1,!1]),Wh.unblended=new Wh(Wh.Replace,Et.transparent,[!0,!0,!0,!0]),Wh.alphaBlended=new Wh([1,771],Et.transparent,[!0,!0,!0,!0]);var Yh=function e(t,n,r){m(this,e),this.enable=t,this.mode=n,this.frontFace=r};Yh.disabled=new Yh(!1,1029,2305),Yh.backCCW=new Yh(!0,1029,2305),Yh.backCW=new Yh(!0,1029,2304),Yh.frontCW=new Yh(!0,1028,2304),Yh.frontCCW=new Yh(!0,1028,2305);var Zh=function(e){d(n,e);var t=g(n);function n(e,r,o){var a;return m(this,n),(a=t.call(this)).id=e,a._onlySymbols=o,r.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(a._sourceLoaded=!0),a._sourceLoaded&&!a._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(a.reload(),a.transform&&a.update(a.transform))})),r.on("error",(function(){a._sourceErrored=!0})),a._source=r,a._tiles={},a._cache=new ah(0,a._unloadTile.bind(i(a))),a._timers={},a._cacheTimers={},a._maxTileCacheSize=null,a._loadedParentTiles={},a._coveredTiles={},a._state=new Yc,a}return y(n,[{key:"onAdd",value:function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null}},{key:"loaded",value:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}},{key:"getSource",value:function(){return this._source}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}}},{key:"_loadTile",value:function(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}},{key:"_unloadTile",value:function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))}},{key:"_abortTile",value:function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))}},{key:"serialize",value:function(){return this._source.serialize()}},{key:"prepare",value:function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}},{key:"getIds",value:function(){return L(this._tiles).map((function(e){return e.tileID})).sort(Jh).map((function(e){return e.key}))}},{key:"getRenderableIds",value:function(e){var t=this,n=[];for(var r in this._tiles)this._isIdRenderable(+r,e)&&n.push(this._tiles[r]);return e?n.sort((function(e,n){var r=e.tileID,i=n.tileID,o=new v(r.canonical.x,r.canonical.y)._rotate(t.transform.angle),a=new v(i.canonical.x,i.canonical.y)._rotate(t.transform.angle);return r.overscaledZ-i.overscaledZ||a.y-o.y||a.x-o.x})).map((function(e){return e.tileID.key})):n.map((function(e){return e.tileID})).sort(Jh).map((function(e){return e.key}))}},{key:"hasRenderableParent",value:function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}},{key:"_isIdRenderable",value:function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}},{key:"reload",value:function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}},{key:"_reloadTile",value:function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}},{key:"_tileLoaded",value:function(e,t,n,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new Ze(r,{tile:e})):this.update(this.transform));e.timeAdded=oe.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Ye("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}},{key:"_backfillDEM",value:function(e){for(var t=this.getRenderableIds(),n=0;n<t.length;n++){var r=t[n];if(e.neighboringTiles&&e.neighboringTiles[r]){var i=this.getTileByID(r);o(e,i),o(i,e)}}function o(e,t){if(e.dem&&!e.dem.borderReady){e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}}},{key:"getTile",value:function(e){return this.getTileByID(e.key)}},{key:"getTileByID",value:function(e){return this._tiles[e]}},{key:"_retainLoadedChildren",value:function(e,t,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>t+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>t;)if(e[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}}},{key:"findLoadedParent",value:function(e,t){if(e.key in this._loadedParentTiles){var n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(var r=e.overscaledZ-1;r>=t;r--){var i=e.scaledTo(r),o=this._getLoadedTile(i);if(o)return o}}},{key:"_getLoadedTile",value:function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}},{key:"updateCacheSize",value:function(e,t){t=t||this._source.tileSize;var n=Math.ceil(e.width/t)+1,r=Math.ceil(e.height/t)+1,i=Math.floor(n*r*5),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(o)}},{key:"handleWrapJump",value:function(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),n[i.tileID.key]=i}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(+a,this._tiles[a])}}},{key:"update",value:function(e,t,r){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused&&!this.transform.freezeTileCoverage&&(!this.usedForTerrain||r)){var o;this.updateCacheSize(e,t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?o=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new qc(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(o=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!!this.transform.elevation&&!this.usedForTerrain}),this._source.hasTile&&(o=o.filter((function(e){return i._source.hasTile(e)})))):o=[];var a=this._updateRetainedTiles(o);if(Kh(this._source.type)&&0!==o.length){for(var s={},u={},l=0,c=Object.keys(a);l<c.length;l++){var h=c[l],p=a[h],d=this._tiles[h];if(d&&!(d.fadeEndTime&&d.fadeEndTime<=oe.now())){var g=this.findLoadedParent(p,Math.max(p.overscaledZ-n.maxOverzooming,this._source.minzoom));g&&(this._addTile(g.tileID),s[g.tileID.key]=g.tileID),u[h]=p}}var m=o[o.length-1].overscaledZ;for(var y in this._tiles){var v=this._tiles[y];if(!a[y]&&v.hasData())for(var _=v.tileID;_.overscaledZ>m;){_=_.scaledTo(_.overscaledZ-1);var b=this._tiles[_.key];if(b&&b.hasData()&&u[_.key]){a[y]=v.tileID;break}}}for(var x in s)a[x]||(this._coveredTiles[x]=!0,a[x]=s[x])}for(var w in a)this._tiles[w].clearFadeHold();var E,S=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n}(this._tiles,a),T=f(S);try{for(T.s();!(E=T.n()).done;){var k=E.value,C=this._tiles[k];C.hasSymbolBuckets&&!C.holdingForFade()?C.setHoldDuration(this.map._fadeDuration):C.hasSymbolBuckets&&!C.symbolFadeFinished()||this._removeTile(+k)}}catch(I){T.e(I)}finally{T.f()}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}}},{key:"releaseSymbolFadeTiles",value:function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}},{key:"_updateRetainedTiles",value:function(e){var t={};if(0===e.length)return t;var r,i={},o=e[e.length-1].overscaledZ,a=e[0].overscaledZ,s=Math.max(a-n.maxOverzooming,this._source.minzoom),u=Math.max(a+n.maxUnderzooming,this._source.minzoom),l={},c=f(e);try{for(c.s();!(r=c.n()).done;){var h=r.value,p=this._addTile(h);t[h.key]=h,p.hasData()||o<this._source.maxzoom&&(l[h.key]=h)}}catch(S){c.e(S)}finally{c.f()}this._retainLoadedChildren(l,o,u,t);var d,g=f(e);try{for(g.s();!(d=g.n()).done;){var m=d.value,y=this._tiles[m.key];if(!y.hasData()){if(m.canonical.z>=this._source.maxzoom){var v=m.children(this._source.maxzoom)[0],_=this.getTile(v);if(_&&_.hasData()){t[v.key]=v;continue}}else{var b=m.children(this._source.maxzoom);if(t[b[0].key]&&t[b[1].key]&&t[b[2].key]&&t[b[3].key])continue}for(var x=y.wasRequested(),w=m.overscaledZ-1;w>=s;--w){var E=m.scaledTo(w);if(i[E.key])break;if(i[E.key]=!0,!(y=this.getTile(E))&&x&&(y=this._addTile(E)),y&&(t[E.key]=E,x=y.wasRequested(),y.hasData()))break}}}}catch(S){g.e(S)}finally{g.f()}return t}},{key:"_updateLoadedParentTileCache",value:function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],n=void 0,r=this._tiles[e].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var o=0,a=t;o<a.length;o++){var s=a[o];this._loadedParentTiles[s]=n}}}},{key:"_addTile",value:function(e){var t=this._tiles[e.key];if(t)return t;(t=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));var n=Boolean(t);return n||(t=new Wc(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))),t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new Ye("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}},{key:"_setTileReloadTimer",value:function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((function(){n._reloadTile(e,"expired"),delete n._timers[e]}),r))}},{key:"_removeTile",value:function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}},{key:"clearTiles",value:function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(+e);this._cache.reset()}},{key:"tilesIn",value:function(e,t,n){var r=[],i=this.transform;if(!i)return r;for(var o in this._tiles){var a=this._tiles[o];if(n&&a.clearQueryDebugViz(),!a.holdingForFade()){var s=e.containsTile(a,i,t);s&&r.push(s)}}return r}},{key:"getVisibleCoordinates",value:function(e){var t,n=this,r=this.getRenderableIds(e).map((function(e){return n._tiles[e].tileID})),i=f(r);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"hasTransition",value:function(){if(this._source.hasTransition())return!0;if(Kh(this._source.type))for(var e in this._tiles){var t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=oe.now())return!0}return!1}},{key:"setFeatureState",value:function(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}},{key:"removeFeatureState",value:function(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}},{key:"getFeatureState",value:function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}},{key:"setDependencies",value:function(e,t,n){var r=this._tiles[e];r&&r.setDependencies(t,n)}},{key:"reloadTilesForDependencies",value:function(e,t){for(var n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter((function(n){return!n.hasDependency(e,t)}))}}]),n}(Je);function Jh(e,t){var n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Kh(e){return"raster"===e||"image"===e||"video"===e}Zh.maxOverzooming=10,Zh.maxUnderzooming=3;var Qh=function(){function e(t,n,r){m(this,e),this._dem=t,this._scale=n,this._offset=r}return y(e,[{key:"getElevationAt",value:function(e,t,n){var r=e*this._scale+this._offset[0],i=t*this._scale+this._offset[1],o=Math.floor(r),a=Math.floor(i),s=this._dem;return n?dn(dn(s.get(o,a),s.get(o,a+1),i-a),dn(s.get(o+1,a),s.get(o+1,a+1),i-a),r-o):s.get(o,a)}}],[{key:"create",value:function(t,n,r){var i=r||t.findDEMTileFor(n);if(i&&i.dem){var o=i.dem,a=i.tileID,s=1<<n.canonical.z-a.canonical.z;return new e(o,i.tileSize/8192/s,[(n.canonical.x/s-a.canonical.x)*o.dim,(n.canonical.y/s-a.canonical.y)*o.dim])}}}]),e}(),ef=function(){function e(t,n){m(this,e),this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ni(8192,16,0),this.featureIndexArray=new Mo,this.promoteId=n}return y(e,[{key:"insert",value:function(e,t,n,r,i){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var a=this.grid,s=0;s<t.length;s++){for(var u=t[s],l=[1/0,1/0,-1/0,-1/0],c=0;c<u.length;c++){var h=u[c];l[0]=Math.min(l[0],h.x),l[1]=Math.min(l[1],h.y),l[2]=Math.max(l[2],h.x),l[3]=Math.max(l[3],h.y)}l[0]<8192&&l[1]<8192&&l[2]>=0&&l[3]>=0&&a.insert(o,l[0],l[1],l[2],l[3])}}},{key:"loadVTLayers",value:function(){return this.vtLayers||(this.vtLayers=new lu.VectorTile(new ju(this.rawTileData)).layers,this.sourceLayerCoder=new $c(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}},{key:"query",value:function(e,t,n,r){var i=this;this.loadVTLayers();var o=e.params||{},a=Ir(o.filter),s=e.tileResult,u=e.transform,l=s.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,(function(e,t,n,r){return ba(s.bufferedTilespaceGeometry,e,t,n,r)}));c.sort(nf);var h=null;u.elevation&&c.length>0&&(h=Qh.create(u.elevation,this.tileID));for(var f,p={},d=function(u){var l=c[u];if(l===f)return"continue";f=l;var d=i.featureIndexArray.get(l),g=null;i.loadMatchingFeature(p,d.bucketIndex,d.sourceLayerIndex,d.featureIndex,a,o.layers,o.availableImages,t,n,r,(function(t,n,r){return g||(g=aa(t)),n.queryIntersectsFeature(s,t,r,g,i.z,e.transform,e.pixelPosMatrix,h)}))},g=0;g<c.length;g++)d(g);return p}},{key:"loadMatchingFeature",value:function(e,t,n,r,i,o,a,s,u,l,c){var h=this.bucketLayerIDs[t];if(!o||function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(o,h)){var f=this.sourceLayerCoder.decode(n),p=this.vtLayers[f].feature(r);if(i.needGeometry){var d=sa(p,!0);if(!i.filter(new Ni(this.tileID.overscaledZ),d,this.tileID.canonical))return}else if(!i.filter(new Ni(this.tileID.overscaledZ),p))return;for(var g=this.getId(p,f),m=0;m<h.length;m++){var y=h[m];if(!(o&&o.indexOf(y)<0)){var v=s[y];if(v){var _={};void 0!==g&&l&&(_=l.getState(v.sourceLayer||"_geojsonTileLayer",g));var b=N({},u[y]);b.paint=tf(b.paint,v.paint,p,_,a),b.layout=tf(b.layout,v.layout,p,_,a);var x=!c||c(p,v,_);if(x){var w=new Hc(p,this.z,this.x,this.y,g);w.layer=b;var E=e[y];void 0===E&&(E=e[y]=[]),E.push({featureIndex:r,feature:w,intersectionZ:x})}}}}}}},{key:"lookupSymbolFeatures",value:function(e,t,n,r,i,o,a,s){var u={};this.loadVTLayers();var l,c=Ir(i),h=f(e);try{for(h.s();!(l=h.n()).done;){var p=l.value;this.loadMatchingFeature(u,n,r,p,c,o,a,s,t)}}catch(d){h.e(d)}finally{h.f()}return u}},{key:"hasLayer",value:function(e){var t,n=f(this.bucketLayerIDs);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,o=f(i);try{for(o.s();!(r=o.n()).done;)if(e===r.value)return!0}catch(a){o.e(a)}finally{o.f()}}}catch(a){n.e(a)}finally{n.f()}return!1}},{key:"getId",value:function(e,t){var n=e.id;return this.promoteId&&"boolean"==typeof(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]])&&(n=Number(n)),n}}]),e}();function tf(e,t,n,r,i){return B(e,(function(e,o){var a=t instanceof Ui?t.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function nf(e,t){return t-e}si("FeatureIndex",ef,{omit:["rawTileData","sourceLayerCoder"]});var rf=function e(t){m(this,e);var n={},r=[];for(var i in t){var o=t[i],a=n[i]={};for(var s in o){var u=o[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};r.push(l),a[s]={rect:l,metrics:u.metrics}}}}var c=ll(r),h=c.w,f=c.h,p=new us({width:h||1,height:f||1});for(var d in t){var g=t[d];for(var y in g){var v=g[+y];if(v&&0!==v.bitmap.width&&0!==v.bitmap.height){var _=n[d][y].rect;us.copy(v.bitmap,p,{x:0,y:0},{x:_.x+1,y:_.y+1},v.bitmap)}}}this.image=p,this.positions=n};si("GlyphAtlas",rf);var of=function(){function e(t){m(this,e),this.tileID=new qc(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile}return y(e,[{key:"parse",value:function(e,t,n,r,i){var o=this;this.status="parsing",this.data=e,this.collisionBoxArray=new wo;var a=new $c(Object.keys(e.layers).sort()),s=new ef(this.tileID,this.promoteId);s.bucketLayerIDs=[];var u,l,c,h,p={},d={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:n},g=t.familiesBySource[this.source];for(var m in g){var y=e.layers[m];if(y){var v,_=!1,b=!1,x=f(g[m]);try{for(x.s();!(v=x.n()).done;)"symbol"===v.value[0].type?_=!0:b=!0}catch(F){x.e(F)}finally{x.f()}if((!0!==this.isSymbolTile||_)&&(!1!==this.isSymbolTile||b)){1===y.version&&q('Vector tile source "'.concat(this.source,'" layer "').concat(m,'" ')+"does not use vector tile spec v2 and therefore may have some rendering errors.");for(var w=a.encode(m),E=[],S=0;S<y.length;S++){var T=y.feature(S),k=s.getId(T,m);E.push({feature:T,id:k,index:S,sourceLayerIndex:w})}var C,I=f(g[m]);try{for(I.s();!(C=I.n()).done;){var A=C.value,M=A[0];void 0!==this.isSymbolTile&&"symbol"===M.type!==this.isSymbolTile||M.minzoom&&this.zoom<Math.floor(M.minzoom)||M.maxzoom&&this.zoom>=M.maxzoom||"none"!==M.visibility&&(af(A,this.zoom,n),(p[M.id]=M.createBucket({index:s.bucketLayerIDs.length,layers:A,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:w,sourceID:this.source,enableTerrain:this.enableTerrain})).populate(E,d,this.tileID.canonical),s.bucketLayerIDs.push(A.map((function(e){return e.id}))))}}catch(F){I.e(F)}finally{I.f()}}}}var N={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},P=B(d.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(P).length?r.send("getGlyphs",{uid:this.uid,stacks:P},(function(e,t){u||(u=e,l=t,D.call(o))}),void 0,void 0,N):l={};var O=Object.keys(d.iconDependencies);O.length?r.send("getImages",{icons:O,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){u||(u=e,c=t,D.call(o))}),void 0,void 0,N):c={};var R=Object.keys(d.patternDependencies);function D(){if(u)return i(u);if(l&&c&&h){var e=new rf(l),t=new hl(c,h);for(var r in p){var o=p[r];o instanceof uc?(af(o.layers,this.zoom,n),Xl(o,l,e.positions,c,t.iconPositions,this.showCollisionBoxes,this.tileID.canonical,this.tileZoom)):o.hasPattern&&(o instanceof Eu||o instanceof Ys||o instanceof du)&&(af(o.layers,this.zoom,n),o.addFeatures(d,this.tileID.canonical,t.patternPositions))}this.status="done",i(null,{buckets:L(p).filter((function(e){return!e.isEmpty()})),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:t,glyphMap:this.returnDependencies?l:null,iconMap:this.returnDependencies?c:null,glyphPositions:this.returnDependencies?e.positions:null})}}R.length?r.send("getImages",{icons:R,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){u||(u=e,h=t,D.call(o))}),void 0,void 0,N):h={},D.call(this)}}]),e}();function af(e,t,n){var r,i=new Ni(t),o=f(e);try{for(o.s();!(r=o.n()).done;)r.value.recalculate(i,n)}catch(a){o.e(a)}finally{o.f()}}var sf=function(){function e(t){m(this,e),this.entries={},this.scheduler=t}return y(e,[{key:"request",value:function(e,t,n,r){var i=this,o=this.entries[e]=this.entries[e]||{callbacks:[]};if(o.result){var a=h(o.result,2),s=a[0],u=a[1];return this.scheduler?this.scheduler.add((function(){r(s,u)}),t):r(s,u),function(){}}return o.callbacks.push(r),o.cancel||(o.cancel=n((function(n,r){o.result=[n,r];var a,s=f(o.callbacks);try{var u=function(){var e=a.value;i.scheduler?i.scheduler.add((function(){e(n,r)}),t):e(n,r)};for(s.s();!(a=s.n()).done;)u()}catch(l){s.e(l)}finally{s.f()}setTimeout((function(){return delete i.entries[e]}),3e3)}))),function(){o.result||(o.callbacks=o.callbacks.filter((function(e){return e!==r})),o.callbacks.length||(o.cancel(),delete i.entries[e]))}}}]),e}();function uf(e,t,n){var r=JSON.stringify(e.request);return e.data&&(this.deduped.entries[r]={result:[null,e.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(function(t){var r=Be(e.request,(function(e,r,i,o){e?t(e):r&&t(null,{vectorTile:n?void 0:new lu.VectorTile(new ju(r)),rawData:r,cacheControl:i,expires:o})}));return function(){r.cancel(),t()}}),t)}e.AUTH_ERR_MSG="NO_ACCESS_TOKEN",e.Aabb=Qa,e.Actor=function(){function e(t,n,r){m(this,e),this.target=t,this.parent=n,this.mapId=r,this.callbacks={},this.cancelCallbacks={},F(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=H()?t:b,this.scheduler=new Ic}return y(e,[{key:"send",value:function(e,t,n,r){var i=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0,s=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=a,this.callbacks[s]=n);var u=Y(this.globalScope)?void 0:[];return this.target.postMessage({id:s,type:e,hasCallback:!!n,targetMapId:r,mustQueue:o,sourceMapId:this.mapId,data:hi(t,u)},u),{cancel:function(){n&&delete i.callbacks[s],i.target.postMessage({id:s,type:"<cancel>",targetMapId:r,sourceMapId:i.mapId})}}}},{key:"receive",value:function(e){var t=this,n=e.data,r=n.id;if(r&&(!n.targetMapId||this.mapId===n.targetMapId))if("<cancel>"===n.type){var i=this.cancelCallbacks[r];delete this.cancelCallbacks[r],i&&i.cancel()}else if(H()||n.mustQueue){var o=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add((function(){return t.processTask(r,n)}),o&&o.metadata||{type:"message"})}else this.processTask(r,n)}},{key:"processTask",value:function(e,t){var n=this;if("<response>"===t.type){var r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(fi(t.error)):r(null,fi(t.data)))}else{var i=Y(this.globalScope)?void 0:[],o=t.hasCallback?function(t,r){delete n.cancelCallbacks[e],n.target.postMessage({id:e,type:"<response>",sourceMapId:n.mapId,error:t?hi(t):null,data:hi(r,i)},i)}:function(e){},a=fi(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,a,o);else if(this.parent.getWorkerSource){var s=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,s[0],a.source)[s[1]](a,o)}else o(new Error("Could not find function ".concat(t.type)))}}},{key:"remove",value:function(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}]),e}(),e.AlphaImage=us,e.CanonicalTileID=Vc,e.Color=Et,e.ColorMode=Wh,e.Context=function(){function e(t){m(this,e),this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new hh(this),this.clearDepth=new fh(this),this.clearStencil=new ph(this),this.colorMask=new dh(this),this.depthMask=new gh(this),this.stencilMask=new mh(this),this.stencilFunc=new yh(this),this.stencilOp=new vh(this),this.stencilTest=new _h(this),this.depthRange=new bh(this),this.depthTest=new xh(this),this.depthFunc=new wh(this),this.blend=new Eh(this),this.blendFunc=new Sh(this),this.blendColor=new Th(this),this.blendEquation=new kh(this),this.cullFace=new Ch(this),this.cullFaceSide=new Ih(this),this.frontFace=new Ah(this),this.program=new Mh(this),this.activeTexture=new Lh(this),this.viewport=new Nh(this),this.bindFramebuffer=new Ph(this),this.bindRenderbuffer=new Oh(this),this.bindTexture=new Rh(this),this.bindVertexBuffer=new Dh(this),this.bindElementBuffer=new Fh(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new zh(this),this.pixelStoreUnpack=new Bh(this),this.pixelStoreUnpackPremultiplyAlpha=new Uh(this),this.pixelStoreUnpackFlipY=new Vh(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}return y(e,[{key:"setDefault",value:function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}},{key:"setDirty",value:function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}},{key:"createIndexBuffer",value:function(e,t){return new sh(this,e,t)}},{key:"createVertexBuffer",value:function(e,t,n){return new lh(this,e,t,n)}},{key:"createRenderbuffer",value:function(e,t,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}},{key:"createFramebuffer",value:function(e,t,n){return new $h(this,e,t,n)}},{key:"clear",value:function(e){var t=e.color,n=e.depth,r=e.stencil,i=this.gl,o=0;t&&(o|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(o|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==r&&(o|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),i.clear(o)}},{key:"setCullFace",value:function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}},{key:"setDepthMode",value:function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}},{key:"setStencilMode",value:function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}},{key:"setColorMode",value:function(e){x(e.blendFunction,Wh.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}},{key:"unbindVAO",value:function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}]),e}(),e.CullFaceMode=Yh,e.DEMData=oh,e.DataConstantProperty=Vi,e.DedupedRequest=sf,e.DepthMode=Hh,e.DepthStencilAttachment=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"attachment",value:function(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}]),n}(Gh),e.EXTENT=8192,e.Elevation=function(){function e(){m(this,e)}return y(e,[{key:"getAtPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._source();if(!n)return t;if(e.y<0||e.y>1)return t;var r=n.getSource().maxzoom,i=1<<r,o=Math.floor(e.x),a=e.x-o,s=new qc(r,o,r,Math.floor(a*i),Math.floor(e.y*i)),u=this.findDEMTileFor(s);if(!u||!u.dem)return t;var l=u.dem,c=1<<u.tileID.canonical.z,h=(a*c-u.tileID.canonical.x)*l.dim,f=(e.y*c-u.tileID.canonical.y)*l.dim,p=Math.floor(h),d=Math.floor(f);return this.exaggeration()*dn(dn(l.get(p,d),l.get(p,d+1),f-d),dn(l.get(p+1,d),l.get(p+1,d+1),f-d),h-p)}},{key:"getAtTileOffset",value:function(e,t,n){var r=1<<e.canonical.z;return this.getAtPoint(new Bc(e.wrap+(e.canonical.x+t/8192)/r,(e.canonical.y+n/8192)/r))}},{key:"getForTilePoints",value:function(e,t,n,r){var i=this,o=Qh.create(this,e,r);return!!o&&(t.forEach((function(e){e[2]=i.exaggeration()*o.getElevationAt(e[0],e[1],n)})),!0)}},{key:"getMinMaxForTile",value:function(e){var t=this.findDEMTileFor(e);if(!t||!t.dem)return null;for(var n=t.dem.tree,r=t.tileID,i=1<<e.canonical.z-r.canonical.z,o=e.canonical.x/i-r.canonical.x,a=e.canonical.y/i-r.canonical.y,s=0,u=0;u<e.canonical.z-r.canonical.z&&!n.leaves[s];u++){o*=2,a*=2;var l=2*Math.floor(a)+Math.floor(o);s=n.childOffsets[s]+l,o%=1,a%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}},{key:"raycast",value:function(e,t,n){throw new Error("Pure virtual method called.")}},{key:"pointCoordinate",value:function(e){throw new Error("Pure virtual method called.")}},{key:"_source",value:function(){throw new Error("Pure virtual method called.")}},{key:"exaggeration",value:function(){throw new Error("Pure virtual method called.")}},{key:"findDEMTileFor",value:function(e){throw new Error("Pure virtual method called.")}},{key:"visibleDemTiles",get:function(){throw new Error("Getter must be implemented in subclass.")}}]),e}(),e.ErrorEvent=Ze,e.EvaluationParameters=Ni,e.Event=Ye,e.Evented=Je,e.Frustum=Ka,e.ImagePosition=cl,e.LngLat=Lc,e.LngLatBounds=Mc,e.MAX_SAFE_INTEGER=w,e.MercatorCoordinate=Bc,e.ONE_EM=24,e.OverscaledTileID=qc,e.Point=v,e.Point$1=v,e.Properties=Hi,e.RGBAImage=ls,e.Ray=function(){function e(t,n){m(this,e),this.pos=t,this.dir=n}return y(e,[{key:"intersectsPlane",value:function(e,t,n){var r=ja(t,this.dir);if(Math.abs(r)<1e-6)return!1;var i=ja(Ha(Pa(),e,this.pos),t)/r;return function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2]}(n,Ua(Pa(),this.pos,this.dir,i)),!0}}]),e}(),e.RequestManager=function(){function e(t,n){m(this,e),this._transformRequestFn=t,this._customAccessToken=n,this._createSkuToken()}return y(e,[{key:"_createSkuToken",value:function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",he,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}},{key:"_isSkuTokenExpired",value:function(){return Date.now()>this._skuTokenExpiresAt}},{key:"transformRequest",value:function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}},{key:"normalizeStyleURL",value:function(e,t){if(!fe(e))return e;var n=me(e);return n.path="/styles/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeGlyphsURL",value:function(e,t){if(!fe(e))return e;var n=me(e);return n.path="/fonts/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeSourceURL",value:function(e,t){if(!fe(e))return e;var n=me(e);return n.path="/v4/".concat(n.authority,".json"),n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeSpriteURL",value:function(e,t,n,r){var i=me(e);return fe(e)?(i.path="/styles/v1".concat(i.path,"/sprite").concat(t).concat(n),this._makeAPIURL(i,this._customAccessToken||r)):(i.path+="".concat(t).concat(n),ye(i))}},{key:"normalizeTileURL",value:function(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!fe(e))return e;var r=me(e);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(t||n&&"raster"!==r.authority&&512===n?"@2x":"").concat(se.supported?".webp":"$1")),"raster"===r.authority?r.path="/".concat(ae.RASTER_URL_PREFIX).concat(r.path):(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path="/".concat(ae.TILE_URL_VERSION).concat(r.path));var i=this._customAccessToken||function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value.match(/^access_token=(.*)$/);if(r)return r[1]}}catch(i){n.e(i)}finally{n.f()}return null}(r.params)||ae.ACCESS_TOKEN;return ae.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&r.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(r,i)}},{key:"canonicalizeTileURL",value:function(e,t){var n=me(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;var r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+="raster/".concat(n.path.replace("/".concat(ae.RASTER_URL_PREFIX,"/"),"")):r+="tiles/".concat(n.path.replace("/".concat(ae.TILE_URL_VERSION,"/"),""));var i=n.params;return t&&(i=i.filter((function(e){return!e.match(/^access_token=/)}))),i.length&&(r+="?".concat(i.join("&"))),r}},{key:"canonicalizeTileset",value:function(e,t){var n,r=!!t&&fe(t),i=[],o=f(e.tiles||[]);try{for(o.s();!(n=o.n()).done;){var a=n.value;de(a)?i.push(this.canonicalizeTileURL(a,r)):i.push(a)}}catch(s){o.e(s)}finally{o.f()}return i}},{key:"_makeAPIURL",value:function(e,t){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=me(ae.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"http"===e.protocol){var i=e.params.indexOf("secure");i>=0&&e.params.splice(i,1)}if("/"!==r.path&&(e.path="".concat(r.path).concat(e.path)),!ae.REQUIRE_ACCESS_TOKEN)return ye(e);if(!(t=t||ae.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. ".concat(n));if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(n));return e.params=e.params.filter((function(e){return-1===e.indexOf("access_token")})),e.params.push("access_token=".concat(t)),ye(e)}}]),e}(),e.RequestPerformance=Cc,e.ResourceType=Re,e.SegmentVector=ra,e.SourceCache=Zh,e.StencilMode=Xh,e.StructArrayLayout1ui2=_o,e.StructArrayLayout2f1f2i16=lo,e.StructArrayLayout2i4=Qi,e.StructArrayLayout3f12=oo,e.StructArrayLayout3ui6=ho,e.StructArrayLayout4i8=eo,e.Texture=Sc,e.Tile=Wc,e.Transitionable=Ri,e.Uniform1f=Uo,e.Uniform1i=function(e){d(n,e);var t=g(n);function n(e,r){var i;return m(this,n),(i=t.call(this,e,r)).current=0,i}return y(n,[{key:"set",value:function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}}]),n}(Bo),e.Uniform2f=function(e){d(n,e);var t=g(n);function n(e,r){var i;return m(this,n),(i=t.call(this,e,r)).current=[0,0],i}return y(n,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}}]),n}(Bo),e.Uniform3f=function(e){d(n,e);var t=g(n);function n(e,r){var i;return m(this,n),(i=t.call(this,e,r)).current=[0,0,0],i}return y(n,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}}]),n}(Bo),e.Uniform4f=Vo,e.UniformColor=jo,e.UniformMatrix3f=function(e){d(n,e);var t=g(n);function n(e,r){var i;return m(this,n),(i=t.call(this,e,r)).current=Go,i}return y(n,[{key:"set",value:function(e){for(var t=0;t<9;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix3fv(this.location,!1,e);break}}}]),n}(Bo),e.UniformMatrix4f=function(e){d(n,e);var t=g(n);function n(e,r){var i;return m(this,n),(i=t.call(this,e,r)).current=qo,i}return y(n,[{key:"set",value:function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}}]),n}(Bo),e.UnwrappedTileID=jc,e.ValidationError=Qe,e.VectorTileWorkerSource=function(){function e(t,n,r,i){m(this,e),this.actor=t,this.layerIndex=n,this.availableImages=r,this.loadVectorData=i||uf,this.loading={},this.loaded={},this.deduped=new sf(t.scheduler)}return y(e,[{key:"loadTile",value:function(e,t){var n=this,r=e.uid,i=!!(e&&e.request&&e.request.collectResourceTiming)&&new Cc(e.request),o=this.loading[r]=new of(e);o.abort=this.loadVectorData(e,(function(e,a){var s=!n.loading[r];if(delete n.loading[r],s||e||!a)return o.status="done",s||(n.loaded[r]=o),t(e);var u=a.rawData,l={};a.expires&&(l.expires=a.expires),a.cacheControl&&(l.cacheControl=a.cacheControl);var c={};if(i){var h=i.finish();h&&(c.resourceTiming=JSON.parse(JSON.stringify(h)))}o.vectorTile=a.vectorTile||new lu.VectorTile(new ju(u)),o.parse(o.vectorTile,n.layerIndex,n.availableImages,n.actor,(function(e,n){if(e||!n)return t(e);t(null,N({rawTileData:u.slice(0)},n,l,c))})),n.loaded=n.loaded||{},n.loaded[r]=o}))}},{key:"reloadTile",value:function(e,t){var n=this,r=this.loaded,i=e.uid,o=this;if(r&&r[i]){var a=r[i];a.showCollisionBoxes=e.showCollisionBoxes,a.enableTerrain=!!e.enableTerrain;var s=function(e,r){var i=a.reloadCallback;i&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,n.availableImages,o.actor,i)),t(e,r)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}},{key:"abortTile",value:function(e,t){var n=e.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),t()}},{key:"removeTile",value:function(e,t){var n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()}}]),e}(),e.WritingMode=fl,e.ZoomHistory=pi,e.add=Fa,e.addDynamicAttributes=ic,e.altitudeFromMercatorZ=zc,e.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),o=null;e.forEach((function(e,a){t(e,(function(e,t){e&&(o=e),i[a]=t,0==--r&&n(o,i)}))}))},e.bezier=C,e.bindAll=F,e.browser=oe,e.bufferConvexPolygon=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=M(r-1,-1,e.length-1),o=M(r+1,-1,e.length-1),a=e[r],s=e[o],u=e[i].sub(a).unit(),l=s.sub(a).unit(),c=l.angleWithSep(u.x,u.y),h=u.add(l).unit().mult(-1*t/Math.sin(c/2));n.push(a.add(h))}return n},e.cacheEntryPossiblyAdded=function(e){++Pe>Ae&&(e.getActor().send("enforceCacheSizeLimit",Ie),Pe=0)},e.clamp=A,e.clearTileCache=function(e){var t=b.caches.delete("mapbox-tiles");e&&t.catch(e).then((function(){return e()}))},e.clipLine=Ol,e.clone=function(e){var t=new Ia(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=V,e.collisionCircleLayout=Pu,e.config=ae,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new Ia(16);return Ia!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=Aa,e.create$2=function(){var e=new Ia(4);return Ia!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},e.createCommonjsModule=t,e.createExpression=gr,e.createLayout=Ji,e.createStyleLayer=function(e){return"custom"===e.type?new gc(e):new vc[e.type](e)},e.cross=qa,e.deepEqual=x,e.degToRad=T,e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.dot=ja,e.ease=I,e.easeCubicInOut=k,e.emitValidationErrors=ti,e.endsWith=z,e.enforceCacheSizeLimit=function(e){Me(),_e&&_e.then((function(t){t.keys().then((function(n){for(var r=0;r<n.length-e;r++)t.delete(n[r])}))}))},e.evaluateSizeForFeature=Ru,e.evaluateSizeForZoom=Du,e.evaluateVariableOffset=Hl,e.evented=Ii,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.extend=N,e.featureFilter=Ir,e.filterObject=U,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,h=r*s,f=i*a,p=i*s,d=i*u,g=o*a,m=o*s,y=o*u;return e[0]=1-h-d,e[1]=c+y,e[2]=f-m,e[3]=0,e[4]=c-y,e[5]=1-l-d,e[6]=p+g,e[7]=0,e[8]=f+m,e[9]=p-g,e[10]=1-l-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.getAnchorAlignment=El,e.getAnchorJustification=Wl,e.getArrayBuffer=Be,e.getBounds=function(e){var t,n=1/0,r=1/0,i=-1/0,o=-1/0,a=f(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;n=Math.min(n,s.x),r=Math.min(r,s.y),i=Math.max(i,s.x),o=Math.max(o,s.y)}}catch(u){a.e(u)}finally{a.f()}return{min:new v(n,r),max:new v(i,o)}},e.getImage=He,e.getJSON=function(e,t){return ze(N(e,{type:"json"}),t)},e.getMapSessionAPI=Ce,e.getRTLTextPluginStatus=Ai,e.getReferrer=Fe,e.getVideo=function(e,t){var n=b.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(var r=0;r<e.length;r++){var i=b.document.createElement("source");je(e[r])||(n.crossOrigin="Anonymous"),i.src=e[r],n.appendChild(i)}return{cancel:function(){}}},e.identity=Ma,e.identity$1=Za,e.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],f=t[10],p=t[11],d=t[12],g=t[13],m=t[14],y=t[15],v=n*s-r*a,_=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,E=i*l-o*u,S=c*g-h*d,T=c*m-f*d,k=c*y-p*d,C=h*m-f*g,I=h*y-p*g,A=f*y-p*m,M=v*A-_*I+b*C+x*k-w*T+E*S;return M?(e[0]=(s*A-u*I+l*C)*(M=1/M),e[1]=(i*I-r*A-o*C)*M,e[2]=(g*E-m*w+y*x)*M,e[3]=(f*w-h*E-p*x)*M,e[4]=(u*k-a*A-l*T)*M,e[5]=(n*A-i*k+o*T)*M,e[6]=(m*b-d*E-y*_)*M,e[7]=(c*E-f*b+p*_)*M,e[8]=(a*I-s*k+l*S)*M,e[9]=(r*k-n*I-o*S)*M,e[10]=(d*w-g*b+y*v)*M,e[11]=(h*b-c*w-p*v)*M,e[12]=(s*T-a*C-u*S)*M,e[13]=(n*C-r*T+i*S)*M,e[14]=(g*_-d*x-m*v)*M,e[15]=(c*x-h*_+f*v)*M,e):null},e.isChar=di,e.isMapboxURL=fe,e.latFromMercatorY=Fc,e.len=Xa,e.length=Ra,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.loadVectorTile=uf,e.makeRequest=ze,e.mercatorXfromLng=Oc,e.mercatorYfromLat=Rc,e.mercatorZfromAltitude=Dc,e.mul=Na,e.mul$1=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},e.multiply=La,e.mvt=lu,e.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.normalize=Va,e.normalize$1=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e},e.number=dn,e.offscreenCanvasSupported=Oe,e.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(a+o)*l,e[15]=1,e},e.parseGlyphPBF=function(e){return new ju(e).readFields(al,[])},e.pbf=ju,e.perspective=function(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(o=1/(r-i)),e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=Li,e.polygonIntersectsBox=ba,e.polygonIntersectsPolygon=ca,e.polygonizeBounds=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new v(n,n),i=e.sub(r),o=t.add(r);return[i,new v(o.x,i.y),o,new v(i.x,o.y),i]},e.posAttributes=Xc,e.postMapLoadEvent=Te,e.postTurnstileEvent=Ee,e.potpack=ll,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=function(e){return e*S},e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:Si,pluginURL:Ti}),Ii.on("pluginStateChange",e),e},e.renderColorRamp=hs,e.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=r*-s+o*u,e[3]=i*-s+a*u,e},e.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*r,e[5]=a*i+c*r,e[6]=s*i+h*r,e[7]=u*i+f*r,e[8]=l*i-o*r,e[9]=c*i-a*r,e[10]=h*i-s*r,e[11]=f*i-u*r,e},e.rotateX$1=Ja,e.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],l=t[8],c=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-l*r,e[1]=a*i-c*r,e[2]=s*i-h*r,e[3]=u*i-f*r,e[8]=o*r+l*i,e[9]=a*r+c*i,e[10]=s*r+h*i,e[11]=u*r+f*i,e},e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*r,e[1]=a*i+c*r,e[2]=s*i+h*r,e[3]=u*i+f*r,e[4]=l*i-o*r,e[5]=c*i-a*r,e[6]=h*i-s*r,e[7]=f*i-u*r,e},e.rotateZ$1=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=o*u+a*s,e[3]=a*u-o*s,e},e.scale=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.scale$1=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},e.scale$2=Ba,e.scaleAndAdd=Ua,e.setCacheLimits=function(e,t){Ie=e,Ae=t},e.setRTLTextPlugin=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("deferred"===Si||"loading"===Si||"loaded"===Si)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ti=oe.resolveURL(e),Si="deferred",Ei=t,Ci(),n||Mi()},e.styleSpec=Ke,e.sub=Ha,e.subtract=za,e.symbolSize=Fu,e.transformMat3=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},e.transformMat4=Wa,e.transformQuat=Ga,e.translate=function(e,t,n){var r,i,o,a,s,u,l,c,h,f,p,d,g=n[0],m=n[1],y=n[2];return t===e?(e[12]=t[0]*g+t[4]*m+t[8]*y+t[12],e[13]=t[1]*g+t[5]*m+t[9]*y+t[13],e[14]=t[2]*g+t[6]*m+t[10]*y+t[14],e[15]=t[3]*g+t[7]*m+t[11]*y+t[15]):(i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=t[9],p=t[10],d=t[11],e[0]=r=t[0],e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=h,e[9]=f,e[10]=p,e[11]=d,e[12]=r*g+s*m+h*y+t[12],e[13]=i*g+u*m+f*y+t[13],e[14]=o*g+l*m+p*y+t[14],e[15]=a*g+c*m+d*y+t[15]),e},e.triggerPluginCompletionEvent=ki,e.uniqueId=O,e.validateCustomStyleLayer=function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(n,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),t},e.validateLight=Kr,e.validateStyle=Jr,e.values=L,e.vectorTile=lu,e.version="2.0.0",e.warnOnce=q,e.webpSupported=se,e.window=b,e.wrap=M})),v(["./shared"],(function(e){function t(e){var n=typeof e;if("number"===n||"boolean"===n||"string"===n||null==e)return JSON.stringify(e);if(Array.isArray(e)){var r,i="[",o=f(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;i+="".concat(t(a),",")}}catch(c){o.e(c)}finally{o.f()}return"".concat(i,"]")}for(var s=Object.keys(e).sort(),u="{",l=0;l<s.length;l++)u+="".concat(JSON.stringify(s[l]),":").concat(t(e[s[l]]),",");return"".concat(u,"}")}function n(n){var r,i="",o=f(e.refProperties);try{for(o.s();!(r=o.n()).done;){var a=r.value;i+="/".concat(t(n[a]))}}catch(s){o.e(s)}finally{o.f()}return i}var r=function(){function t(e){m(this,t),this.keyCache={},e&&this.replace(e)}return y(t,[{key:"replace",value:function(e){this._layerConfigs={},this._layers={},this.update(e,[])}},{key:"update",value:function(t,r){var i,o=this,a=f(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;this._layerConfigs[s.id]=s;var u=this._layers[s.id]=e.createStyleLayer(s);u._featureFilter=e.featureFilter(u.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}}catch(w){a.e(w)}finally{a.f()}var l,c=f(r);try{for(c.s();!(l=c.n()).done;){var h=l.value;delete this.keyCache[h],delete this._layerConfigs[h],delete this._layers[h]}}catch(w){c.e(w)}finally{c.f()}this.familiesBySource={};var p,d=function(e,t){for(var r={},i=0;i<e.length;i++){var o=t&&t[e[i].id]||n(e[i]);t&&(t[e[i].id]=o);var a=r[o];a||(a=r[o]=[]),a.push(e[i])}var s=[];for(var u in r)s.push(r[u]);return s}(e.values(this._layerConfigs),this.keyCache),g=f(d);try{for(g.s();!(p=g.n()).done;){var m=p.value.map((function(e){return o._layers[e.id]})),y=m[0];if("none"!==y.visibility){var v=y.source||"",_=this.familiesBySource[v];_||(_=this.familiesBySource[v]={});var b=y.sourceLayer||"_geojsonTileLayer",x=_[b];x||(x=_[b]=[]),x.push(m)}}}catch(w){g.e(w)}finally{g.f()}}}]),t}(),i=e.window.ImageBitmap,o=function(){function t(){m(this,t)}return y(t,[{key:"loadTile",value:function(t,n){var r=t.uid,o=t.encoding,a=t.rawImageData,s=t.padding,u=t.buildQuadTree,l=i&&a instanceof i?this.getImageData(a,s):a;n(null,new e.DEMData(r,l,o,s<1,u))}},{key:"getImageData",value:function(t,n){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);var r=this.offscreenCanvasContext.getImageData(-n,-n,t.width+2*n,t.height+2*n);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:r.width,height:r.height},r.data)}}]),t}();function u(e,t){if(0!==e.length){l(e[0],t);for(var n=1;n<e.length;n++)l(e[n],!t)}}function l(e,t){for(var n=0,r=0,i=e.length,o=i-1;r<i;o=r++)n+=(e[r][0]-e[o][0])*(e[o][1]+e[r][1]);n>=0!=!!t&&e.reverse()}var c=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,p=function(){function t(n){m(this,t),this._feature=n,this.extent=e.EXTENT,this.type=n.type,this.properties=n.tags,"id"in n&&!isNaN(n.id)&&(this.id=parseInt(n.id,10))}return y(t,[{key:"loadGeometry",value:function(){if(1===this._feature.type){var t,n=[],r=f(this._feature.geometry);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push([new e.Point$1(i[0],i[1])])}}catch(d){r.e(d)}finally{r.f()}return n}var o,a=[],s=f(this._feature.geometry);try{for(s.s();!(o=s.n()).done;){var u,l=o.value,c=[],h=f(l);try{for(h.s();!(u=h.n()).done;){var p=u.value;c.push(new e.Point$1(p[0],p[1]))}}catch(d){h.e(d)}finally{h.f()}a.push(c)}}catch(d){s.e(d)}finally{s.f()}return a}},{key:"toGeoJSON",value:function(e,t,n){return c.call(this,e,t,n)}}]),t}(),v=function(){function t(n){m(this,t),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=n.length,this._features=n}return y(t,[{key:"feature",value:function(e){return new p(this._features[e])}}]),t}(),_=e.vectorTile.VectorTileFeature,b=x;function x(e,t){this.options=t||{},this.features=e,this.length=e.length}function w(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}x.prototype.feature=function(e){return new w(this.features[e],this.options.extent)},w.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var n=0;n<t.length;n++){for(var r=t[n],i=[],o=0;o<r.length;o++)i.push(new e.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},w.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var u=a[s];t=Math.min(t,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[t,r,n,i]},w.prototype.toGeoJSON=_.prototype.toGeoJSON;var E=T,S=b;function T(t){var n=new e.pbf;return function(e,t){for(var n in e.layers)t.writeMessage(3,k,e.layers[n])}(t,n),n.finish()}function k(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,C,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,N,o[n])}function C(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,I,e),t.writeVarintField(3,n.type),t.writeMessage(4,L,n)}function I(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),o[s]=u=r.length-1),t.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,f=a[h];void 0===f&&(i.push(l),a[h]=f=i.length-1),t.writeVarint(f)}}function A(e,t){return(t<<3)+(7&e)}function M(e){return e<<1^e>>31}function L(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],l=1;1===r&&(l=u.length),t.writeVarint(A(1,l));for(var c=3===r?u.length-1:u.length,h=0;h<c;h++){1===h&&1!==r&&t.writeVarint(A(2,c-1));var f=u[h].x-i,p=u[h].y-o;t.writeVarint(M(f)),t.writeVarint(M(p)),i+=f,o+=p}3===r&&t.writeVarint(A(7,1))}}function N(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function P(e,t,n,r){O(e,n,r),O(t,2*n,2*r),O(t,2*n+1,2*r+1)}function O(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function R(e,t,n,r){var i=e-n,o=t-r;return i*i+o*o}E.fromVectorTileJs=T,E.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new b(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return T({layers:n})},E.GeoJSONWrapper=S;var D=function(e){return e[0]},F=function(e){return e[1]},z=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;m(this,e),this.nodeSize=i,this.points=t;for(var a=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new a(t.length),u=this.coords=new o(2*t.length),l=0;l<t.length;l++)s[l]=l,u[2*l]=n(t[l]),u[2*l+1]=r(t[l]);!function e(t,n,r,i,o,a){if(!(o-i<=r)){var s=i+o>>1;!function e(t,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);e(t,n,r,Math.max(i,Math.floor(r-u*c/s+h)),Math.min(o,Math.floor(r+(s-u)*c/s+h)),a)}var f=n[2*r+a],p=i,d=o;for(P(t,n,i,r),n[2*o+a]>f&&P(t,n,i,o);p<d;){for(P(t,n,p,d),p++,d--;n[2*p+a]<f;)p++;for(;n[2*d+a]>f;)d--}n[2*i+a]===f?P(t,n,i,d):P(t,n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,n,s,i,o,a%2),e(t,n,r,i,s-1,a+1),e(t,n,r,s+1,o,a+1)}}(s,u,i,0,s.length-1,0)}return y(e,[{key:"range",value:function(e,t,n,r){return function(e,t,n,r,i,o,a){for(var s,u,l=[0,e.length-1,0],c=[];l.length;){var h=l.pop(),f=l.pop(),p=l.pop();if(f-p<=a)for(var d=p;d<=f;d++)s=t[2*d],u=t[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(e[d]);else{var g=Math.floor((p+f)/2);s=t[2*g],u=t[2*g+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(e[g]);var m=(h+1)%2;(0===h?n<=s:r<=u)&&(l.push(p),l.push(g-1),l.push(m)),(0===h?i>=s:o>=u)&&(l.push(g+1),l.push(f),l.push(m))}}return c}(this.ids,this.coords,e,t,n,r,this.nodeSize)}},{key:"within",value:function(e,t,n){return function(e,t,n,r,i,o){for(var a=[0,e.length-1,0],s=[],u=i*i;a.length;){var l=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o)for(var f=h;f<=c;f++)R(t[2*f],t[2*f+1],n,r)<=u&&s.push(e[f]);else{var p=Math.floor((h+c)/2),d=t[2*p],g=t[2*p+1];R(d,g,n,r)<=u&&s.push(e[p]);var m=(l+1)%2;(0===l?n-i<=d:r-i<=g)&&(a.push(h),a.push(p-1),a.push(m)),(0===l?n+i>=d:r+i>=g)&&(a.push(p+1),a.push(c),a.push(m))}}return s}(this.ids,this.coords,e,t,n,this.nodeSize)}}]),e}(),B={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},U=function(){function e(t){m(this,e),this.options=W(Object.create(B),t),this.trees=new Array(this.options.maxZoom+1)}return y(e,[{key:"load",value:function(e){var t=this.options,n=t.log,r=t.minZoom,i=t.maxZoom,o=t.nodeSize;n&&console.time("total time");var a="prepare ".concat(e.length," points");n&&console.time(a),this.points=e;for(var s=[],u=0;u<e.length;u++)e[u].geometry&&s.push(j(e[u],u));this.trees[i+1]=new z(s,Y,Z,o,Float32Array),n&&console.timeEnd(a);for(var l=i;l>=r;l--){var c=+Date.now();s=this._cluster(s,l),this.trees[l]=new z(s,Y,Z,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],t),s=this.getClusters([-180,r,i,o],t);return a.concat(s)}var u,l=this.trees[this._limitZoom(t)],c=l.range($(n),H(o),$(i),H(r)),h=[],p=f(c);try{for(p.s();!(u=p.n()).done;){var d=u.value,g=l.points[d];h.push(g.numPoints?q(g):this.points[g.index])}}catch(m){p.e(m)}finally{p.f()}return h}},{key:"getChildren",value:function(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[t];if(!o)throw new Error(r);var a,s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),u=i.within(o.x,o.y,s),l=[],c=f(u);try{for(c.s();!(a=c.n()).done;){var h=a.value,p=i.points[h];p.parentId===e&&l.push(p.numPoints?q(p):this.points[p.index])}}catch(d){c.e(d)}finally{c.f()}if(0===l.length)throw new Error(r);return l}},{key:"getLeaves",value:function(e,t,n){var r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r}},{key:"getTile",value:function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),o=this.options,a=o.extent,s=o.radius/a,u=(n-s)/i,l=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((t-s)/i,u,(t+1+s)/i,l),r.points,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-s/i,u,1,l),r.points,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,u,s/i,l),r.points,-1,n,i,c),c.features.length?c:null}},{key:"getClusterExpansionZoom",value:function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}},{key:"_appendLeaves",value:function(e,t,n,r,i){var o,a=this.getChildren(t),s=f(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=u.properties;if(l&&l.cluster?i+l.point_count<=r?i+=l.point_count:i=this._appendLeaves(e,l.cluster_id,n,r,i):i<r?i++:e.push(u),e.length===n)break}}catch(c){s.e(c)}finally{s.f()}return i}},{key:"_addTileFeatures",value:function(e,t,n,r,i,o){var a,s=f(e);try{for(s.s();!(a=s.n()).done;){var u=t[a.value],l=u.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(u.x*i-n)),Math.round(this.options.extent*(u.y*i-r))]],tags:l?G(u):this.points[u.index].properties},h=void 0;l?h=u.id:this.options.generateId?h=u.index:this.points[u.index].id&&(h=this.points[u.index].id),void 0!==h&&(c.id=h),o.features.push(c)}}catch(p){s.e(p)}finally{s.f()}}},{key:"_limitZoom",value:function(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))}},{key:"_cluster",value:function(e,t){for(var n=[],r=this.options,i=r.radius,o=r.extent,a=r.reduce,s=r.minPoints,u=i/(o*Math.pow(2,t)),l=0;l<e.length;l++){var c=e[l];if(!(c.zoom<=t)){c.zoom=t;var h,p=this.trees[t+1],d=p.within(c.x,c.y,u),g=c.numPoints||1,m=g,y=f(d);try{for(y.s();!(h=y.n()).done;){var v=h.value,_=p.points[v];_.zoom>t&&(m+=_.numPoints||1)}}catch(P){y.e(P)}finally{y.f()}if(m>=s){var b,x=c.x*g,w=c.y*g,E=a&&g>1?this._map(c,!0):null,S=(l<<5)+(t+1)+this.points.length,T=f(d);try{for(T.s();!(b=T.n()).done;){var k=b.value,C=p.points[k];if(!(C.zoom<=t)){C.zoom=t;var I=C.numPoints||1;x+=C.x*I,w+=C.y*I,C.parentId=S,a&&(E||(E=this._map(c,!0)),a(E,this._map(C)))}}}catch(P){T.e(P)}finally{T.f()}c.parentId=S,n.push(V(x/m,w/m,S,m,E))}else if(n.push(c),m>1){var A,M=f(d);try{for(M.s();!(A=M.n()).done;){var L=A.value,N=p.points[L];N.zoom<=t||(N.zoom=t,n.push(N))}}catch(P){M.e(P)}finally{M.f()}}}}return n}},{key:"_getOriginId",value:function(e){return e-this.points.length>>5}},{key:"_getOriginZoom",value:function(e){return(e-this.points.length)%32}},{key:"_map",value:function(e,t){if(e.numPoints)return t?W({},e.properties):e.properties;var n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?W({},r):r}}]),e}();function V(e,t,n,r,i){return{x:e,y:t,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function j(e,t){var n=h(e.geometry.coordinates,2),r=n[0],i=n[1];return{x:$(r),y:H(i),zoom:1/0,index:t,parentId:-1}}function q(e){return{type:"Feature",id:e.id,properties:G(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),X(e.y)]}};var t}function G(e){var t=e.numPoints,n=t>=1e4?"".concat(Math.round(t/1e3),"k"):t>=1e3?"".concat(Math.round(t/100)/10,"k"):t;return W(W({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function $(e){return e/360+.5}function H(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function X(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function W(e,t){for(var n in t)e[n]=t[n];return e}function Y(e){return e.x}function Z(e){return e.y}function J(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((e-n)*a+(t-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=e-n)*a+(s=t-r)*s}function K(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)Q(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)Q(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)Q(e,t[r][i])}(i),i}function Q(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function ee(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=t.id;if(n.promoteId?u=t.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)te(i,s);else if("MultiPoint"===o)for(var l=0;l<i.length;l++)te(i[l],s);else if("LineString"===o)ne(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(l=0;l<i.length;l++)ne(i[l],s=[],a,!1),e.push(K(u,"LineString",s,t.properties));return}re(i,s,a,!1)}else if("Polygon"===o)re(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(l=0;l<t.geometry.geometries.length;l++)ee(e,{id:u,geometry:t.geometry.geometries[l],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<i.length;l++){var c=[];re(i[l],c,a,!0),s.push(c)}}e.push(K(u,o,s,t.properties))}}function te(e,t){t.push(ie(e[0])),t.push(oe(e[1])),t.push(0)}function ne(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var u=ie(e[s][0]),l=oe(e[s][1]);t.push(u),t.push(l),t.push(0),s>0&&(a+=r?(i*l-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-o,2))),i=u,o=l}var c=t.length-3;t[2]=1,function e(t,n,r,i){for(var o,a=i,s=r-n>>1,u=r-n,l=t[n],c=t[n+1],h=t[r],f=t[r+1],p=n+3;p<r;p+=3){var d=J(t[p],t[p+1],l,c,h,f);if(d>a)o=p,a=d;else if(d===a){var g=Math.abs(p-s);g<u&&(o=p,u=g)}}a>i&&(o-n>3&&e(t,n,o,i),t[o+2]=a,r-o>3&&e(t,o,r,i))}(t,0,c,n),t[c+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function re(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];ne(e[i],o,n,r),t.push(o)}}function ie(e){return e/360+.5}function oe(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function ae(e,t,n,r,i,o,a,s){if(r/=t,o>=(n/=t)&&a<r)return e;if(a<n||o>=r)return null;for(var u=[],l=0;l<e.length;l++){var c=e[l],h=c.geometry,f=c.type,p=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(p>=n&&d<r)u.push(c);else if(!(d<n||p>=r)){var g=[];if("Point"===f||"MultiPoint"===f)se(h,g,n,r,i);else if("LineString"===f)ue(h,g,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===f)ce(h,g,n,r,i,!1);else if("Polygon"===f)ce(h,g,n,r,i,!0);else if("MultiPolygon"===f)for(var m=0;m<h.length;m++){var y=[];ce(h[m],y,n,r,i,!0),y.length&&g.push(y)}if(g.length){if(s.lineMetrics&&"LineString"===f){for(m=0;m<g.length;m++)u.push(K(c.id,f,g[m],c.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===g.length?(f="LineString",g=g[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===g.length?"Point":"MultiPoint"),u.push(K(c.id,f,g,c.tags))}}}return u.length?u:null}function se(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=n&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function ue(e,t,n,r,i,o,a){for(var s,u,l=le(e),c=0===i?fe:pe,h=e.start,f=0;f<e.length-3;f+=3){var p=e[f],d=e[f+1],g=e[f+2],m=e[f+3],y=e[f+4],v=0===i?p:d,_=0===i?m:y,b=!1;a&&(s=Math.sqrt(Math.pow(p-m,2)+Math.pow(d-y,2))),v<n?_>n&&(u=c(l,p,d,m,y,n),a&&(l.start=h+s*u)):v>r?_<r&&(u=c(l,p,d,m,y,r),a&&(l.start=h+s*u)):he(l,p,d,g),_<n&&v>=n&&(u=c(l,p,d,m,y,n),b=!0),_>r&&v<=r&&(u=c(l,p,d,m,y,r),b=!0),!o&&b&&(a&&(l.end=h+s*u),t.push(l),l=le(e)),a&&(h+=s)}var x=e.length-3;p=e[x],d=e[x+1],g=e[x+2],(v=0===i?p:d)>=n&&v<=r&&he(l,p,d,g),x=l.length-3,o&&x>=3&&(l[x]!==l[0]||l[x+1]!==l[1])&&he(l,l[0],l[1],l[2]),l.length&&t.push(l)}function le(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ce(e,t,n,r,i,o){for(var a=0;a<e.length;a++)ue(e[a],t,n,r,i,o,!1)}function he(e,t,n,r){e.push(t),e.push(n),e.push(r)}function fe(e,t,n,r,i,o){var a=(o-t)/(r-t);return e.push(o),e.push(n+(i-n)*a),e.push(1),a}function pe(e,t,n,r,i,o){var a=(o-n)/(i-n);return e.push(t+(r-t)*a),e.push(o),e.push(1),a}function de(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=ge(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(ge(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(ge(o.geometry[s][l],t));i.push(u)}n.push(K(o.id,a,i,o.tags))}return n}function ge(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function me(e,t){if(e.transformed)return e;var n,r,i,o=1<<e.z,a=e.x,s=e.y;for(n=0;n<e.features.length;n++){var u=e.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push(ye(l[r],l[r+1],t,o,a,s));else for(r=0;r<l.length;r++){var h=[];for(i=0;i<l[r].length;i+=2)h.push(ye(l[r][i],l[r][i+1],t,o,a,s));u.geometry.push(h)}}return e.transformed=!0,e}function ye(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function ve(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,_e(a,e[s],o,i);var u=e[s].minX,l=e[s].minY,c=e[s].maxX,h=e[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function _e(e,t,n,r){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)be(a,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)be(a,i[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var l=i[u];for(s=0;s<l.length;s++)be(a,l[s],e,n,!0,0===s)}if(a.length){var c=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in c={},t.tags)c[h]=t.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var f={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==t.id&&(f.id=t.id),e.features.push(f)}}function be(e,t,n,r,i,o){var a=r*r;if(r>0&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],u=0;u<t.length;u+=3)(0===r||t[u+2]>a)&&(n.numSimplified++,s.push(t[u]),s.push(t[u+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}(s,o),e.push(s)}}function xe(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)ee(n,e.features[r],t,r);else ee(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(e,t){var n=t.buffer/t.extent,r=e,i=ae(e,1,-1-n,n,0,-1,2,t),o=ae(e,1,1-n,2+n,0,-1,2,t);return(i||o)&&(r=ae(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=de(i,1).concat(r)),o&&(r=r.concat(de(o,-1)))),r}(r,t)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function we(e,t,n){return 32*((1<<e)*n+t)+e}function Ee(e,t){var n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);var i=new v(r.features),o=E(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:i,rawData:o.buffer})}xe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},xe.prototype.splitTile=function(e,t,n,r,i,o,a){for(var s=[e,t,n,r],u=this.options,l=u.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,h=we(t,n,r),f=this.tiles[h];if(!f&&(l>1&&console.time("creation"),f=this.tiles[h]=ve(e,t,n,r,u),this.tileCoords.push({z:t,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(f.source=e,i){if(t===u.maxZoom||t===i)continue;var d=1<<i-t;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(t===u.indexMaxZoom||f.numPoints<=u.indexMaxPoints)continue;if(f.source=null,0!==e.length){l>1&&console.time("clipping");var g,m,y,v,_,b,x=.5*u.buffer/u.extent,w=.5-x,E=.5+x,S=1+x;g=m=y=v=null,_=ae(e,c,n-x,n+E,0,f.minX,f.maxX,u),b=ae(e,c,n+w,n+S,0,f.minX,f.maxX,u),e=null,_&&(g=ae(_,c,r-x,r+E,1,f.minY,f.maxY,u),m=ae(_,c,r+w,r+S,1,f.minY,f.maxY,u),_=null),b&&(y=ae(b,c,r-x,r+E,1,f.minY,f.maxY,u),v=ae(b,c,r+w,r+S,1,f.minY,f.maxY,u),b=null),l>1&&console.timeEnd("clipping"),s.push(g||[],t+1,2*n,2*r),s.push(m||[],t+1,2*n,2*r+1),s.push(y||[],t+1,2*n+1,2*r),s.push(v||[],t+1,2*n+1,2*r+1)}}},xe.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug;if(e<0||e>24)return null;var a=1<<e,s=we(e,t=(t%a+a)%a,n);if(this.tiles[s])return me(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var u,l=e,c=t,h=n;!u&&l>0;)l--,c=Math.floor(c/2),h=Math.floor(h/2),u=this.tiles[we(l,c,h)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,c,h),o>1&&console.time("drilling down"),this.splitTile(u.source,l,c,h,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?me(this.tiles[s],i):null):null};var Se=function(t){d(r,t);var n=g(r);function r(e,t,i,o){var a;return m(this,r),a=n.call(this,e,t,i,Ee),o&&(a.loadGeoJSON=o),a}return y(r,[{key:"loadData",value:function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}},{key:"_loadData",value:function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new e.RequestPerformance(r.request);this.loadGeoJSON(r,(function(o,a){if(o||!a)return n(o);if("object"!=typeof a)return n(new Error("Input data given to '".concat(r.source,"' is not a valid GeoJSON object.")));!function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)u(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)u(t.coordinates[r],n);return t}(a,!0);try{if(r.filter){var s=e.createExpression(r.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===s.result)throw new Error(s.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));var l=a.features.filter((function(e){return s.value.evaluate({zoom:0},e)}));a={type:"FeatureCollection",features:l}}t._geoJSONIndex=r.cluster?new U(function(t){var n=t.superclusterOptions,r=t.clusterProperties;if(!r||!n)return n;for(var i={},o={},a={accumulated:null,zoom:0},s={properties:null},u=Object.keys(r),l=0,c=u;l<c.length;l++){var p=c[l],d=h(r[p],2),g=d[0],m=d[1],y=e.createExpression(m),v=e.createExpression("string"==typeof g?[g,["accumulated"],["get",p]]:g);i[p]=y.value,o[p]=v.value}return n.map=function(e){s.properties=e;var t,n={},r=f(u);try{for(r.s();!(t=r.n()).done;){var o=t.value;n[o]=i[o].evaluate(a,s)}}catch(l){r.e(l)}finally{r.f()}return n},n.reduce=function(e,t){s.properties=t;var n,r=f(u);try{for(r.s();!(n=r.n()).done;){var i=n.value;a.accumulated=e[i],e[i]=o[i].evaluate(a,s)}}catch(l){r.e(l)}finally{r.f()}},n}(r)).load(a.features):function(e,t){return new xe(e,t)}(a,r.geojsonVtOptions)}catch(o){return n(o)}t.loaded={};var c={};if(i){var p=i.finish();p&&(c.resourceTiming={},c.resourceTiming[r.source]=JSON.parse(JSON.stringify(p)))}n(null,c)}))}}},{key:"coalesce",value:function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())}},{key:"reloadTile",value:function(e,t){var n=this.loaded;return n&&n[e.uid]?a(s(r.prototype),"reloadTile",this).call(this,e,t):this.loadTile(e,t)}},{key:"loadGeoJSON",value:function(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")))}}}},{key:"removeSource",value:function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()}},{key:"getClusterExpansionZoom",value:function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}},{key:"getClusterChildren",value:function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}},{key:"getClusterLeaves",value:function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}]),r}(e.VectorTileWorkerSource),Te=function(){function t(n){var r=this;m(this,t),this.self=n,this.actor=new e.Actor(n,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:Se},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(r.workerSourceTypes[e])throw new Error('Worker source with name "'.concat(e,'" already registered.'));r.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}return y(t,[{key:"checkIfReady",value:function(e,t,n){n()}},{key:"setReferrer",value:function(e,t){this.referrer=t}},{key:"setImages",value:function(e,t,n){for(var r in this.availableImages[e]=t,this.workerSources[e]){var i=this.workerSources[e][r];for(var o in i)i[o].availableImages=t}n()}},{key:"enableTerrain",value:function(e,t,n){this.terrain=t,n()}},{key:"setLayers",value:function(e,t,n){this.getLayerIndex(e).replace(t),n()}},{key:"updateLayers",value:function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}},{key:"loadTile",value:function(t,n,r){var i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;this.getWorkerSource(t,n.type,n.source).loadTile(i,r)}},{key:"loadDEMTile",value:function(t,n,r){var i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(t,n.source).loadTile(i,r)}},{key:"reloadTile",value:function(t,n,r){var i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;this.getWorkerSource(t,n.type,n.source).reloadTile(i,r)}},{key:"abortTile",value:function(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}},{key:"removeTile",value:function(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}},{key:"removeSource",value:function(e,t,n){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}}},{key:"loadWorkerSource",value:function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}},{key:"syncRTLPluginState",value:function(t,n,r){try{e.plugin.setState(n);var i=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=i){this.self.importScripts(i);var o=e.plugin.isParsed();r(o?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(i)),o)}}catch(e){r(e.toString())}}},{key:"getAvailableImages",value:function(e){var t=this.availableImages[e];return t||(t=[]),t}},{key:"getLayerIndex",value:function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t}},{key:"getWorkerSource",value:function(e,t,n){var r=this;return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][n]||(this.workerSources[e][t][n]=new this.workerSourceTypes[t]({send:function(t,n,i,o,a,s){r.actor.send(t,n,i,e,o,s)},scheduler:this.actor.scheduler},this.getLayerIndex(e),this.getAvailableImages(e))),this.workerSources[e][t][n]}},{key:"getDEMWorkerSource",value:function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new o),this.demWorkerSources[e][t]}},{key:"enforceCacheSizeLimit",value:function(t,n){e.enforceCacheSizeLimit(n)}},{key:"getWorkerPerformanceMetrics",value:function(e,t,n){n(void 0,void 0)}}]),t}();return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Te(self)),Te})),v(["./shared"],(function(e){var t=e.createCommonjsModule((function(e){function t(e){return!n(e)}function n(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===r[n=e&&e.failIfMajorPerformanceCaveat]&&(r[n]=function(e){var n=function(e){var n=document.createElement("canvas"),r=Object.create(t.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(e);if(!n)return!1;var r=n.createShader(n.VERTEX_SHADER);return!(!r||n.isContextLost())&&(n.shaderSource(r,"void main() {}"),n.compileShader(r),!0===n.getShaderParameter(r,n.COMPILE_STATUS))}(n)),r[n]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var n}e.exports?e.exports=t:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=t,window.mapboxgl.notSupportedReason=n);var r={};t.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),n={create:function(t,n,r){var i=e.window.document.createElement(t);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(t,n){return e.window.document.createElementNS(t,n)}},o=e.window.document&&e.window.document.documentElement.style;function l(e){if(!o)return e[0];for(var t=0;t<e.length;t++)if(e[t]in o)return e[t];return e[0]}var p,v=l(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){o&&v&&(p=o[v],o[v]="none")},n.enableDrag=function(){o&&v&&(o[v]=p)};var _=l(["transform","WebkitTransform"]);n.setTransform=function(e,t){e.style[_]=t};var b=!1;try{var x=Object.defineProperty({},"passive",{get:function(){b=!0}});e.window.addEventListener("test",x,x),e.window.removeEventListener("test",x,x)}catch(e){b=!1}n.addEventListener=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.addEventListener(t,n,"passive"in r&&b?r:r.capture)},n.removeEventListener=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.removeEventListener(t,n,"passive"in r&&b?r:r.capture)};var w=function t(n){n.preventDefault(),n.stopPropagation(),e.window.removeEventListener("click",t,!0)};function E(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}n.suppressClick=function(){e.window.addEventListener("click",w,!0),e.window.setTimeout((function(){e.window.removeEventListener("click",w,!0)}),0)},n.mousePos=function(t,n){var r=t.getBoundingClientRect();return new e.Point(n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop)},n.touchPos=function(t,n){for(var r=t.getBoundingClientRect(),i=[],o=0;o<n.length;o++)i.push(new e.Point(n[o].clientX-r.left-t.clientLeft,n[o].clientY-r.top-t.clientTop));return i},n.mouseButton=function(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},n.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var S=function(t){d(r,t);var n=g(r);function r(){var t;return m(this,r),(t=n.call(this)).images={},t.updatedImages={},t.callbackDispatchedThisFrame={},t.loaded=!1,t.requestors=[],t.patterns={},t.atlasImage=new e.RGBAImage({width:1,height:1}),t.dirty=!0,t}return y(r,[{key:"isLoaded",value:function(){return this.loaded}},{key:"setLoaded",value:function(e){if(this.loaded!==e&&(this.loaded=e,e)){var t,n=f(this.requestors);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.ids,o=r.callback;this._notify(i,o)}}catch(a){n.e(a)}finally{n.f()}this.requestors=[]}}},{key:"getImage",value:function(e){return this.images[e]}},{key:"addImage",value:function(e,t){this._validate(e,t)&&(this.images[e]=t)}},{key:"_validate",value:function(t,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchX" value')))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchY" value')))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "content" value')))),r=!1),r}},{key:"_validateStretch",value:function(e,t){if(!e)return!0;var n,r=0,i=f(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o[0]<r||o[1]<o[0]||t<o[1])return!1;r=o[1]}}catch(a){i.e(a)}finally{i.f()}return!0}},{key:"_validateContent",value:function(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}},{key:"updateImage",value:function(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}},{key:"removeImage",value:function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}},{key:"listImages",value:function(){return Object.keys(this.images)}},{key:"getImages",value:function(e,t){var n=!0;if(!this.isLoaded()){var r,i=f(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.images[o]||(n=!1)}}catch(a){i.e(a)}finally{i.f()}}this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}},{key:"_notify",value:function(t,n){var r,i={},o=f(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;this.images[a]||this.fire(new e.Event("styleimagemissing",{id:a}));var s=this.images[a];s?i[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:e.warnOnce('Image "'.concat(a,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}}catch(u){o.e(u)}finally{o.f()}n(null,i)}},{key:"getPixelSize",value:function(){var e=this.atlasImage;return{width:e.width,height:e.height}}},{key:"getPattern",value:function(t){var n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new e.ImagePosition(i,r);this.patterns[t]={bin:i,position:o}}return this._updatePatternAtlas(),this.patterns[t].position}},{key:"bind",value:function(t){var n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}},{key:"_updatePatternAtlas",value:function(){var t=[];for(var n in this.patterns)t.push(this.patterns[n].bin);var r=e.potpack(t),i=r.w,o=r.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var u=this.patterns[s].bin,l=u.x+1,c=u.y+1,h=this.images[s].data,f=h.width,p=h.height;e.RGBAImage.copy(h,a,{x:0,y:0},{x:l,y:c},{width:f,height:p}),e.RGBAImage.copy(h,a,{x:0,y:p-1},{x:l,y:c-1},{width:f,height:1}),e.RGBAImage.copy(h,a,{x:0,y:0},{x:l,y:c+p},{width:f,height:1}),e.RGBAImage.copy(h,a,{x:f-1,y:0},{x:l-1,y:c},{width:1,height:p}),e.RGBAImage.copy(h,a,{x:0,y:0},{x:l+f,y:c},{width:1,height:p})}this.dirty=!0}},{key:"beginFrame",value:function(){this.callbackDispatchedThisFrame={}}},{key:"dispatchRenderCallbacks",value:function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var i=this.images[r];E(i)&&this.updateImage(r,i)}}}catch(o){n.e(o)}finally{n.f()}}}]),r}(e.Evented),T=I,k=I,C=1e20;function I(e,t,n,r,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function A(e,t,n,r,i,o,a){for(var s=0;s<t;s++){for(var u=0;u<n;u++)r[u]=e[u*t+s];for(M(r,i,o,a,n),u=0;u<n;u++)e[u*t+s]=i[u]}for(u=0;u<n;u++){for(s=0;s<t;s++)r[s]=e[u*t+s];for(M(r,i,o,a,t),s=0;s<t;s++)e[u*t+s]=Math.sqrt(i[s])}}function M(e,t,n,r,i){n[0]=0,r[0]=-C,r[1]=+C;for(var o=1,a=0;o<i;o++){for(var s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+C}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;t[o]=(o-n[a])*(o-n[a])+e[n[a]]}}I.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=t.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?C:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?C:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(A(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),A(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)n[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return n},T.default=k;var L=function(){function t(e,n){m(this,t),this.requestManager=e,this.localIdeographFontFamily=n,this.entries={}}return y(t,[{key:"setURL",value:function(e){this.url=e}},{key:"getGlyphs",value:function(n,r){var i=this,o=[];for(var a in n){var s,u=f(n[a]);try{for(u.s();!(s=u.n()).done;){var l=s.value;o.push({stack:a,id:l})}}catch(c){u.e(c)}finally{u.f()}}e.asyncAll(o,(function(e,n){var r=e.stack,o=e.id,a=i.entries[r];a||(a=i.entries[r]={glyphs:{},requests:{},ranges:{}});var s=a.glyphs[o];if(void 0===s){if(s=i._tinySDF(a,r,o))return a.glyphs[o]=s,void n(null,{stack:r,id:o,glyph:s});var u=Math.floor(o/256);if(256*u>65535)n(new Error("glyphs > 65535 not supported"));else if(a.ranges[u])n(null,{stack:r,id:o,glyph:s});else{var l=a.requests[u];l||(l=a.requests[u]=[],t.loadGlyphRange(r,u,i.url,i.requestManager,(function(e,t){if(t){for(var n in t)i._doesCharSupportLocalGlyph(+n)||(a.glyphs[+n]=t[+n]);a.ranges[u]=!0}var r,o=f(l);try{for(o.s();!(r=o.n()).done;)(0,r.value)(e,t)}catch(c){o.e(c)}finally{o.f()}delete a.requests[u]}))),l.push((function(e,t){e?n(e):t&&n(null,{stack:r,id:o,glyph:t[o]||null})}))}}else n(null,{stack:r,id:o,glyph:s})}),(function(e,t){if(e)r(e);else if(t){var n,i={},o=f(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=a.stack,u=a.id,l=a.glyph;(i[s]||(i[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}}catch(c){o.e(c)}finally{o.f()}r(null,i)}}))}},{key:"_doesCharSupportLocalGlyph",value:function(t){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](t)||e.isChar["Hangul Syllables"](t)||e.isChar.Hiragana(t)||e.isChar.Katakana(t))}},{key:"_tinySDF",value:function(n,r,i){var o=this.localIdeographFontFamily;if(o&&this._doesCharSupportLocalGlyph(i)){var a=n.tinySDF;if(!a){var s="400";/bold/i.test(r)?s="900":/medium/i.test(r)?s="500":/light/i.test(r)&&(s="200"),a=n.tinySDF=new t.TinySDF(24,3,8,.25,o,s)}return{id:i,bitmap:new e.AlphaImage({width:30,height:30},a.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}}}]),t}();L.loadGlyphRange=function(t,n,r,i,o){var a=256*n,s=a+255,u=i.transformRequest(i.normalizeGlyphsURL(r).replace("{fontstack}",t).replace("{range}","".concat(a,"-").concat(s)),e.ResourceType.Glyphs);e.getArrayBuffer(u,(function(t,n){if(t)o(t);else if(n){var r,i={},a=f(e.parseGlyphPBF(n));try{for(a.s();!(r=a.n()).done;){var s=r.value;i[s.id]=s}}catch(u){a.e(u)}finally{a.f()}o(null,i)}}))},L.TinySDF=T;var N=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new(function(){function t(){m(this,t),this.specification=e.styleSpec.light.position}return y(t,[{key:"possiblyEvaluate",value:function(t,n){return function(t){var n=h(t,3),r=n[0],i=n[1],o=n[2],a=e.degToRad(i+90),s=e.degToRad(o);return{x:r*Math.cos(a)*Math.sin(s),y:r*Math.sin(a)*Math.sin(s),z:r*Math.cos(s),azimuthal:i,polar:o}}(t.expression.evaluate(n))}},{key:"interpolate",value:function(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r),azimuthal:e.number(t.azimuthal,n.azimuthal,r),polar:e.number(t.polar,n.polar,r)}}}]),t}()),color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),P=function(t){d(r,t);var n=g(r);function r(t){var i;return m(this,r),(i=n.call(this))._transitionable=new e.Transitionable(N),i.setLight(t),i._transitioning=i._transitionable.untransitioned(),i}return y(r,[{key:"getLight",value:function(){return this._transitionable.serialize()}},{key:"setLight",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateLight,t,n))for(var r in t){var i=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),i):this._transitionable.setValue(r,i)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))}}]),r}(e.Evented),O=new e.Properties({source:new e.DataConstantProperty(e.styleSpec.terrain.source),exaggeration:new e.DataConstantProperty(e.styleSpec.terrain.exaggeration)}),R=function(t){d(r,t);var n=g(r);function r(t){var i;return m(this,r),(i=n.call(this))._transitionable=new e.Transitionable(O),i.set(t),i._transitioning=i._transitionable.untransitioned(),i}return y(r,[{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(t){for(var n in t){var r=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-"-transition".length),r):this._transitionable.setValue(n,r)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}}]),r}(e.Evented),D=function(){function t(e,n){m(this,t),this.width=e,this.height=n,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}return y(t,[{key:"getDash",value:function(e,t){var n=e.join(",")+String(t);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(e,t)),this.dashEntry[n]}},{key:"getDashRanges",value:function(e,t,n){var r=[],i=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===e[0]});for(var s=e[0],u=1;u<e.length;u++){a=!a;var l=e[u];i=s*n,o=(s+=l)*n,r.push({left:i,right:o,isDash:a,zeroLength:0===l})}return r}},{key:"addRoundDash",value:function(e,t,n){for(var r=t/2,i=-n;i<=n;i++)for(var o=this.width*(this.nextRow+n+i),a=0,s=e[a],u=0;u<this.width;u++){u/s.right>1&&(s=e[++a]);var l=Math.abs(u-s.left),c=Math.abs(u-s.right),h=Math.min(l,c),f=void 0,p=i/n*(r+1);if(s.isDash){var d=r-Math.abs(p);f=Math.sqrt(h*h+d*d)}else f=r-Math.sqrt(h*h+p*p);this.data[o+u]=Math.max(0,Math.min(255,f+128))}}},{key:"addRegularDash",value:function(e){for(var t=e.length-1;t>=0;--t){var n=e[t],r=e[t+1];n.zeroLength?e.splice(t,1):r&&r.isDash===n.isDash&&(r.left=n.left,e.splice(t,1))}var i=e[0],o=e[e.length-1];i.isDash===o.isDash&&(i.left=o.left-this.width,o.right=i.right+this.width);for(var a=this.width*this.nextRow,s=0,u=e[s],l=0;l<this.width;l++){l/u.right>1&&(u=e[++s]);var c=Math.abs(l-u.left),h=Math.abs(l-u.right),f=Math.min(c,h);this.data[a+l]=Math.max(0,Math.min(255,(u.isDash?f:-f)+128))}}},{key:"addDash",value:function(t,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return e.warnOnce("LineAtlas out of space"),null;0===t.length&&t.push(1);for(var o=0,a=0;a<t.length;a++)t[a]<0&&(e.warnOnce("Negative value is found in line dasharray, replacing values with 0"),t[a]=0),o+=t[a];if(0!==o){var s=this.width/o,u=this.getDashRanges(t,this.width,s);n?this.addRoundDash(u,s,r):this.addRegularDash(u)}var l={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,l}},{key:"bind",value:function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}]),t}(),F=function(){function t(n,r){var i=this;m(this,t),this.workerPool=n,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var o=this.workerPool.acquire(this.id),a=0;a<o.length;a++){var s=new t.Actor(o[a],r,this.id);s.name="Worker ".concat(a),this.actors.push(s)}this.ready=!1,this.broadcast("checkIfReady",null,(function(){i.ready=!0}))}return y(t,[{key:"broadcast",value:function(t,n,r){e.asyncAll(this.actors,(function(e,r){e.send(t,n,r)}),r=r||function(){})}},{key:"getActor",value:function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}},{key:"remove",value:function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)}}]),t}();function z(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}F.Actor=e.Actor;var B=function(){function t(e,n,r,i){m(this,t),this.screenBounds=e,this.cameraPoint=n,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=r,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map((function(e){return i.pointCoordinate3D(e)})),this.cameraGeometry=this.bufferedCameraGeometry(0)}return y(t,[{key:"bufferedScreenGeometry",value:function(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}},{key:"bufferedCameraGeometry",value:function(t){var n=[this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,0)):this.screenBounds[1],this.cameraPoint];return e.bufferConvexPolygon(n,t)}},{key:"containsTile",value:function(t,n,r){var i,o=t.queryPadding+1,a=r?this._bufferedCameraMercator(o,n).map((function(e){return t.tileID.getTilePoint(e)})):this._bufferedScreenMercator(o,n).map((function(e){return t.tileID.getTilePoint(e)})),s=this.screenGeometryMercator.map((function(e){return t.tileID.getTileVec3(e)})),u=s.map((function(t){return new e.Point(t[0],t[1])})),l=n.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),c=t.tileID.getTileVec3(l),h=s.map((function(t){var n=e.sub(t,t,c);return e.normalize(n,n),new e.Ray(c,n)})),f=z(t,1,n.zoom);if(e.polygonIntersectsBox(a,0,0,e.EXTENT,e.EXTENT))return{queryGeometry:this,tilespaceGeometry:u,tilespaceRays:h,bufferedTilespaceGeometry:a,bufferedTilespaceBounds:(i=e.getBounds(a),i.min.x=e.clamp(i.min.x,0,e.EXTENT),i.min.y=e.clamp(i.min.y,0,e.EXTENT),i.max.x=e.clamp(i.max.x,0,e.EXTENT),i.max.y=e.clamp(i.max.y,0,e.EXTENT),i),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:f}}},{key:"_bufferedScreenMercator",value:function(e,t){var n=U(e);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];var r=this.bufferedScreenGeometry(e).map((function(e){return t.pointCoordinate3D(e)}));return this._screenRaycastCache[n]=r,r}},{key:"_bufferedCameraMercator",value:function(e,t){var n=U(e);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];var r=this.bufferedCameraGeometry(e).map((function(e){return t.pointCoordinate3D(e)}));return this._cameraRaycastCache[n]=r,r}}],[{key:"createFromScreenPoints",value:function(n,r){var i,o;if(n instanceof e.Point||"number"==typeof n[0]){var a=e.Point.convert(n);i=[e.Point.convert(n)],o=r.isPointAboveHorizon(a)}else{var s=e.Point.convert(n[0]),u=e.Point.convert(n[1]);i=[s,u],o=e.polygonizeBounds(s,u).every((function(e){return r.isPointAboveHorizon(e)}))}return new t(i,r.getCameraPoint(),o,r)}}]),t}();function U(e){return 100*e|0}function V(t,n,r){var i=function(i,o){if(i)return r(i);if(o){var a=e.pick(e.extend(o,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(a.vectorLayers=o.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(e){return e.id}))),a.tiles=n.canonicalizeTileset(a,t.url),r(null,a)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url),e.ResourceType.Source),i):e.browser.frame((function(){return i(null,t)}))}var j=function(){function t(n,r,i){m(this,t),this.bounds=e.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=r||0,this.maxzoom=i||24}return y(t,[{key:"validateBounds",value:function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}},{key:"contains",value:function(t){var n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<o&&t.y>=i&&t.y<a}}]),t}(),q=function(t){d(r,t);var n=g(r);function r(t,o,a,s){var u;return m(this,r),(u=n.call(this)).id=t,u.dispatcher=a,u.setEventedParent(s),u.type="raster",u.minzoom=0,u.maxzoom=22,u.roundZoom=!0,u.scheme="xyz",u.tileSize=512,u._loaded=!1,u._options=e.extend({type:"raster"},o),e.extend(i(u),e.pick(o,["url","scheme","tileSize"])),u}return y(r,[{key:"load",value:function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=V(this._options,this.map._requestManager,(function(n,r){t._tileJSONRequest=null,t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new j(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(t,n){var r=this,i=e.browser.devicePixelRatio>=2,o=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),i,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(o,e.ResourceType.Tile),(function(i,o){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(i)t.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&t.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,s=a.gl;t.texture=r.map.painter.getTileTexture(o.width),t.texture?t.texture.update(o,{useMipmap:!0}):(t.texture=new e.Texture(a,o,s.RGBA,{useMipmap:!0}),t.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(r.dispatcher),n(null)}}))}},{key:"abortTile",value:function(e,t){e.request&&(e.request.cancel(),delete e.request),t()}},{key:"unloadTile",value:function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}},{key:"hasTransition",value:function(){return!1}}]),r}(e.Evented),G=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),$=function(t){d(r,t);var n=g(r);function r(e,t,i,o){var a;return m(this,r),(a=n.call(this)).id=e,a.dispatcher=i,a.coordinates=t.coordinates,a.type="image",a.minzoom=0,a.maxzoom=22,a.tileSize=512,a.tiles={},a._loaded=!1,a.setEventedParent(o),a.options=t,a}return y(r,[{key:"load",value:function(t,n){var r=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(function(i,o){r._loaded=!0,i?r.fire(new e.ErrorEvent(i)):o&&(r.image=o,t&&(r.coordinates=t),n&&n(),r._finishLoading())}))}},{key:"loaded",value:function(){return this._loaded}},{key:"updateImage",value:function(e){var t=this;return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,(function(){t.texture=null})),this):this}},{key:"_finishLoading",value:function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"setCoordinates",value:function(t){var n=this;this.coordinates=t;var r=t.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(t){var n,r=1/0,i=1/0,o=-1/0,a=-1/0,s=f(t);try{for(s.s();!(n=s.n()).done;){var u=n.value;r=Math.min(r,u.x),i=Math.min(i,u.y),o=Math.max(o,u.x),a=Math.max(a,u.y)}}catch(p){s.e(p)}finally{s.f()}var l=Math.max(o-r,a-i),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),h=Math.pow(2,c);return new e.CanonicalTileID(c,Math.floor((r+o)/2*h),Math.floor((i+a)/2*h))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map((function(e){return n.tileID.getTilePoint(e)._round()}));return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}},{key:"prepare",value:function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,n=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}}},{key:"loadTile",value:function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}},{key:"serialize",value:function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return!1}}]),r}(e.Evented),H={vector:function(t){d(r,t);var n=g(r);function r(t,o,a,s){var l;if(m(this,r),(l=n.call(this)).id=t,l.dispatcher=a,l.type="vector",l.minzoom=0,l.maxzoom=22,l.scheme="xyz",l.tileSize=512,l.reparseOverscaled=!0,l.isTileClipped=!0,l._loaded=!1,e.extend(i(l),e.pick(o,["url","scheme","tileSize","promoteId"])),l._options=e.extend({type:"vector"},o),l._collectResourceTiming=o.collectResourceTiming,512!==l.tileSize)throw new Error("vector tile sources must have a tileSize of 512");return l.setEventedParent(s),l._tileWorkers={},l._deduped=new e.DedupedRequest,u(l)}return y(r,[{key:"load",value:function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=V(this._options,this.map._requestManager,(function(n,r){t._tileJSONRequest=null,t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new j(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles,t.map._requestManager._customAccessToken),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"setSourceProperty",value:function(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e();var t,n=this.map.style._getSourceCaches(this.id),r=f(n);try{for(r.s();!(t=r.n()).done;)t.value.clearTiles()}catch(i){r.e(i)}finally{r.f()}this.load()}},{key:"setTiles",value:function(e){var t=this;return this.setSourceProperty((function(){t._options.tiles=e})),this}},{key:"setUrl",value:function(e){var t=this;return this.setSourceProperty((function(){t.url=e,t._options.url=e})),this}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"loadTile",value:function(t,n){var r=this,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),o={request:this.map._requestManager.transformRequest(i,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(o.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",o,s.bind(this));else if(t.actor=this._tileWorkers[i]=this._tileWorkers[i]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",o,s.bind(this));else{var a=e.loadVectorTile.call({deduped:this._deduped},o,(function(e,n){e||!n?s.call(r,e):(o.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},t.actor&&t.actor.send("loadTile",o,s.bind(r)))}),!0);t.request={cancel:a}}function s(r,i){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0)}},{key:"unloadTile",value:function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0)}},{key:"hasTransition",value:function(){return!1}},{key:"afterUpdate",value:function(){this._tileWorkers={}}}]),r}(e.Evented),raster:q,"raster-dem":function(t){d(r,t);var n=g(r);function r(t,i,o,a){var s;return m(this,r),(s=n.call(this,t,i,o,a)).type="raster-dem",s.maxzoom=22,s._options=e.extend({type:"raster-dem"},i),s.encoding=i.encoding||"mapbox",s}return y(r,[{key:"serialize",value:function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}},{key:"loadTile",value:function(t,n){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,o){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&t.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported(),s=1-(o.width-e.prevPowerOfTwo(o.width))/2;s<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));var u=a?o:e.browser.getImageData(o,s),l={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:u,encoding:this.encoding,padding:s};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",l,i.bind(this)))}}.bind(this))}},{key:"_getNeighboringTiles",value:function(t){var n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?t.wrap-1:t.wrap,a=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,u={};return u[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u}},{key:"unloadTile",value:function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}}]),r}(q),geojson:function(t){d(r,t);var n=g(r);function r(t,i,o,a){var s;m(this,r),(s=n.call(this)).id=t,s.type="geojson",s.minzoom=0,s.maxzoom=18,s.tileSize=512,s.isTileClipped=!0,s.reparseOverscaled=!0,s._removed=!1,s._loaded=!1,s.actor=o.getActor(),s.setEventedParent(a),s._data=i.data,s._options=e.extend({},i),s._collectResourceTiming=i.collectResourceTiming,s._resourceTiming=[],void 0!==i.maxzoom&&(s.maxzoom=i.maxzoom),i.type&&(s.type=i.type),i.attribution&&(s.attribution=i.attribution),s.promoteId=i.promoteId;var u=e.EXTENT/s.tileSize;return s.workerOptions=e.extend({source:s.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*u,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*u,extent:e.EXTENT,maxZoom:s.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,s.maxzoom-1):s.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:e.EXTENT,radius:(i.clusterRadius||50)*u,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions),s}return y(r,[{key:"load",value:function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(n){if(n)t.fire(new e.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(r.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire(new e.Event("data",r))}}))}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"setData",value:function(t){var n=this;return this._data=t,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(t){if(t)n.fire(new e.ErrorEvent(t));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new e.Event("data",r))}})),this}},{key:"getClusterExpansionZoom",value:function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}},{key:"getClusterChildren",value:function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}},{key:"getClusterLeaves",value:function(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this}},{key:"_updateWorkerData",value:function(t){var n=this;this._loaded=!1;var r=e.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._requestManager.transformRequest(e.browser.resolveURL(i),e.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.actor.send("".concat(this.type,".loadData"),r,(function(e,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.actor.send("".concat(n.type,".coalesce"),{source:r.source},null),t(e))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"loadTile",value:function(t,n){var r=this,i=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(i,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(e,o){return delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))}))}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}},{key:"unloadTile",value:function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"onRemove",value:function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}},{key:"serialize",value:function(){return e.extend({},this._options,{type:this.type,data:this._data})}},{key:"hasTransition",value:function(){return!1}}]),r}(e.Evented),video:function(t){d(r,t);var n=g(r);function r(e,t,i,o){var a;return m(this,r),(a=n.call(this,e,t,i,o)).roundZoom=!0,a.type="video",a.options=t,a}return y(r,[{key:"load",value:function(){var t=this;this._loaded=!1;var n=this.options;this.urls=[];var r,i=f(n.urls);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.urls.push(this.map._requestManager.transformRequest(o,e.ResourceType.Source).url)}}catch(a){i.e(a)}finally{i.f()}e.getVideo(this.urls,(function(n,r){t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(t.video=r,t.video.loop=!0,t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}))}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"play",value:function(){this.video&&this.video.play()}},{key:"seek",value:function(t){if(this.video){var n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=t}}},{key:"getVideo",value:function(){return this.video}},{key:"onAdd",value:function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}},{key:"prepare",value:function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,n=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}}},{key:"serialize",value:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this.video&&!this.video.paused}}]),r}($),image:$,canvas:function(t){d(r,t);var n=g(r);function r(t,i,o,a){var s;return m(this,r),s=n.call(this,t,i,o,a),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof e.window.HTMLCanvasElement||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "canvas"'))),s.options=i,s.animate=void 0===i.animate||i.animate,s}return y(r,[{key:"load",value:function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}},{key:"getCanvas",value:function(){return this.canvas}},{key:"onAdd",value:function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}},{key:"onRemove",value:function(){this.pause()}},{key:"prepare",value:function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}}},{key:"serialize",value:function(){return{type:"canvas",coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this._playing}},{key:"_hasInvalidDimensions",value:function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e++){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1}}]),r}($)},X=function(t,n,r,i){var o=new H[n.type](t,n,r,i);if(o.id!==t)throw new Error("Expected Source id to be ".concat(t," instead of ").concat(o.id));return e.bindAll(["load","abort","unload","serialize","prepare"],o),o};function W(t,n){var r=e.identity([]);return e.scale(r,r,[.5*t.width,.5*-t.height,1]),e.translate(r,r,[1,-1,0]),e.multiply(r,r,t.calculatePosMatrix(n.toUnwrapped()))}function Y(e,t,n,r,i,o,a){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=e.tilesIn(r,a,s);u.sort(J);var l,c=[],h=f(u);try{for(h.s();!(l=h.n()).done;){var p=l.value;c.push({wrappedTileID:p.tile.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(t,n,e._state,p,i,o,W(e.transform,p.tile.tileID),s)})}}catch(m){h.e(m)}finally{h.f()}var d=function(e){var t,n={},r={},i=f(e);try{for(i.s();!(t=i.n()).done;){var o=t.value,a=o.queryResults,s=o.wrappedTileID,u=r[s]=r[s]||{};for(var l in a){var c,h=a[l],p=u[l]=u[l]||{},d=n[l]=n[l]||[],g=f(h);try{for(g.s();!(c=g.n()).done;){var y=c.value;p[y.featureIndex]||(p[y.featureIndex]=!0,d.push(y))}}catch(m){g.e(m)}finally{g.f()}}}}catch(m){i.e(m)}finally{i.f()}return n}(c);for(var g in d)d[g].forEach((function(t){var n=t.feature,r=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return d}function Z(e,t){for(var n=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,t))}return r}function J(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function K(){return new e.window.Worker(Di.workerUrl)}var Q,ee="mapboxgl_preloaded_worker_pool",te=function(){function e(){m(this,e),this.active={}}return y(e,[{key:"acquire",value:function(t){if(!this.workers)for(this.workers=[];this.workers.length<e.workerCount;)this.workers.push(new K);return this.active[t]=!0,this.workers.slice()}},{key:"release",value:function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)}},{key:"isPreloaded",value:function(){return!!this.active[ee]}},{key:"numActive",value:function(){return Object.keys(this.active).length}}]),e}();function ne(){return Q||(Q=new te),Q}function re(t,n){var r={};for(var i in t)"ref"!==i&&(r[i]=t[i]);return e.refProperties.forEach((function(e){e in n&&(r[e]=n[e])})),r}function ie(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=re(e[r],t[e[r].ref]));return e}te.workerCount=2;var oe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain"};function ae(e,t,n){n.push({command:oe.addSource,args:[e,t[e]]})}function se(e,t,n){t.push({command:oe.removeSource,args:[e]}),n[e]=!0}function ue(e,t,n,r){se(e,n,r),ae(e,t,n)}function le(t,n,r){var i;for(i in t[r])if(t[r].hasOwnProperty(i)&&"data"!==i&&!e.deepEqual(t[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!e.deepEqual(t[r][i],n[r][i]))return!1;return!0}function ce(t,n,r,i,o,a){var s;for(s in n=n||{},t=t||{})t.hasOwnProperty(s)&&(e.deepEqual(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(e.deepEqual(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function he(e){return e.id}function fe(e,t){return e[t.id]=t,e}var pe=function(){function t(e,n){m(this,t),this.reset(e,n)}return y(t,[{key:"reset",value:function(e,t){this.points=e||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}},{key:"lerp",value:function(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);for(var n=1,r=this._distances[n],i=t*this.paddedLength+this.padding;r<i&&n<this._distances.length;)r=this._distances[++n];var o=n-1,a=this._distances[o],s=r-a,u=s>0?(i-a)/s:0;return this.points[o].mult(1-u).add(this.points[n].mult(u))}}]),t}(),de=function(){function e(t,n,r){m(this,e);var i=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(n/r);for(var a=0;a<this.xCellCount*this.yCellCount;a++)i.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=n,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}return y(e,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"insertCircle",value:function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}},{key:"_insertBoxCell",value:function(e,t,n,r,i,o){this.boxCells[i].push(o)}},{key:"_insertCircleCell",value:function(e,t,n,r,i,o){this.circleCells[i].push(o)}},{key:"_query",value:function(e,t,n,r,i,o){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],h=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-h,y1:c-h,x2:l+h,y2:c+h})}return o?a.filter(o):a}return this._forEachCell(e,t,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a}},{key:"_queryCircle",value:function(e,t,n,r,i){var o=e-n,a=e+n,s=t-n,u=t+n;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var l=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,l,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),r?l.length>0:l}},{key:"query",value:function(e,t,n,r,i){return this._query(e,t,n,r,!1,i)}},{key:"hitTest",value:function(e,t,n,r,i){return this._query(e,t,n,r,!0,i)}},{key:"hitTestCircle",value:function(e,t,n,r){return this._queryCircle(e,t,n,!0,r)}},{key:"_queryCell",value:function(e,t,n,r,i,o,a,s){var u=a.seenUids,l=this.boxCells[i];if(null!==l){var c,h=this.bboxes,p=f(l);try{for(p.s();!(c=p.n()).done;){var d=c.value;if(!u.box[d]){u.box[d]=!0;var g=4*d;if(e<=h[g+2]&&t<=h[g+3]&&n>=h[g+0]&&r>=h[g+1]&&(!s||s(this.boxKeys[d]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[d],x1:h[g],y1:h[g+1],x2:h[g+2],y2:h[g+3]})}}}}catch(T){p.e(T)}finally{p.f()}}var m=this.circleCells[i];if(null!==m){var y,v=this.circles,_=f(m);try{for(_.s();!(y=_.n()).done;){var b=y.value;if(!u.circle[b]){u.circle[b]=!0;var x=3*b;if(this._circleAndRectCollide(v[x],v[x+1],v[x+2],e,t,n,r)&&(!s||s(this.circleKeys[b]))){if(a.hitTest)return o.push(!0),!0;var w=v[x],E=v[x+1],S=v[x+2];o.push({key:this.circleKeys[b],x1:w-S,y1:E-S,x2:w+S,y2:E+S})}}}}catch(T){_.e(T)}finally{_.f()}}}},{key:"_queryCellCircle",value:function(e,t,n,r,i,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[i];if(null!==c){var h,p=this.bboxes,d=f(c);try{for(d.s();!(h=d.n()).done;){var g=h.value;if(!l.box[g]){l.box[g]=!0;var m=4*g;if(this._circleAndRectCollide(u.x,u.y,u.radius,p[m+0],p[m+1],p[m+2],p[m+3])&&(!s||s(this.boxKeys[g])))return o.push(!0),!0}}}catch(E){d.e(E)}finally{d.f()}}var y=this.circleCells[i];if(null!==y){var v,_=this.circles,b=f(y);try{for(b.s();!(v=b.n()).done;){var x=v.value;if(!l.circle[x]){l.circle[x]=!0;var w=3*x;if(this._circlesCollide(_[w],_[w+1],_[w+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[x])))return o.push(!0),!0}}}catch(E){b.e(E)}finally{b.f()}}}},{key:"_forEachCell",value:function(e,t,n,r,i,o,a,s){for(var u=this._convertToXCellCoord(e),l=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r),f=u;f<=c;f++)for(var p=l;p<=h;p++)if(i.call(this,e,t,n,r,this.xCellCount*p+f,o,a,s))return}},{key:"_convertToXCellCoord",value:function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}},{key:"_convertToYCellCoord",value:function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}},{key:"_circlesCollide",value:function(e,t,n,r,i,o){var a=r-e,s=i-t,u=n+o;return u*u>a*a+s*s}},{key:"_circleAndRectCollide",value:function(e,t,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(e-(r+s));if(u>s+n)return!1;var l=(a-i)/2,c=Math.abs(t-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var h=u-s,f=c-l;return h*h+f*f<=n*n}}]),e}();function ge(t,n,r,i,o){var a=e.create();return n?(e.scale(a,a,[1/o,1/o,1]),r||e.rotateZ(a,a,i.angle)):e.multiply(a,i.labelPlaneMatrix,t),a}function me(t,n,r,i,o){if(n){var a=e.clone(t);return e.scale(a,a,[o,o,1]),r||e.rotateZ(a,a,-i.angle),a}return i.glCoordMatrix}function ye(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[t.x,t.y,r,1];r?e.transformMat4(i,i,n):Ie(i,i,n);var o=i[3];return{point:new e.Point(i[0]/o,i[1]/o),signedDistanceFromCamera:o}}function ve(e,t){return Math.min(.5+e/t*.5,1.5)}function _e(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function be(t,n,r,i,o,a,s,u,l){var c=i?t.textSizeData:t.iconSizeData,h=e.evaluateSizeForZoom(c,r.transform.zoom),f=[256/r.width*2+1,256/r.height*2+1],p=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;p.clear();for(var d=t.lineVertexArray,g=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,m=r.transform.width/r.transform.height,y=!1,v=0;v<g.length;v++){var _=g.get(v);if(_.hidden||_.writingMode===e.WritingMode.vertical&&!y)Ce(_.numGlyphs,p);else{y=!1;var b=l?l({x:_.anchorX,y:_.anchorY}):0,x=[_.anchorX,_.anchorY,b,1];if(e.transformMat4(x,x,n),_e(x,f)){var w=ve(r.transform.cameraToCenterDistance,x[3]),E=e.evaluateSizeForFeature(c,h,_),S=s?E/w:E*w,T=new e.Point(_.anchorX,_.anchorY),k=ye(T,o,b);if(k.signedDistanceFromCamera<=0)Ce(_.numGlyphs,p);else{var C=k.point,I={},A=s?null:l,M=Ee(_,S,!1,u,n,o,a,t.glyphOffsetArray,d,p,C,T,I,m,A);y=M.useVertical,A&&M.needsFlipping&&(I={}),(M.notEnoughRoom||y||M.needsFlipping&&Ee(_,S,!0,u,n,o,a,t.glyphOffsetArray,d,p,C,T,I,m,A).notEnoughRoom)&&Ce(_.numGlyphs,p)}}else Ce(_.numGlyphs,p)}}i?t.text.dynamicLayoutVertexBuffer.updateData(p):t.icon.dynamicLayoutVertexBuffer.updateData(p)}function xe(e,t,n,r,i,o,a,s,u,l,c,h,f){var p=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,g=s.lineStartIndex+s.lineLength,m=t.getoffsetX(s.glyphStartIndex),y=t.getoffsetX(p-1),v=Te(e*m,n,r,i,o,a,s.segment,d,g,u,l,c,h,f,!0);if(!v)return null;var _=Te(e*y,n,r,i,o,a,s.segment,d,g,u,l,c,h,f,!0);return _?{first:v,last:_}:null}function we(t,n,r,i){return t===e.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(t===e.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function Ee(t,n,r,i,o,a,s,u,l,c,h,p,d,g,m){var y,v=n/24,_=t.lineOffsetX*v,b=t.lineOffsetY*v;if(t.numGlyphs>1){var x=t.glyphStartIndex+t.numGlyphs,w=t.lineStartIndex,E=t.lineStartIndex+t.lineLength,S=xe(v,u,_,b,r,h,p,t,l,a,d,m);if(!S)return{notEnoughRoom:!0};var T=ye(S.first.point,s).point,k=ye(S.last.point,s).point;if(i&&!r){var C=we(t.writingMode,T,k,g);if(C)return C}y=[S.first];for(var I=t.glyphStartIndex+1;I<x-1;I++)y.push(Te(v*u.getoffsetX(I),_,b,r,h,p,t.segment,w,E,l,a,d,m));y.push(S.last)}else{if(i&&!r){var A=ye(p,o).point,M=t.lineStartIndex+t.segment+1,L=new e.Point(l.getx(M),l.gety(M)),N=ye(L,o),P=N.signedDistanceFromCamera>0?N.point:Se(p,L,A,1,o),O=we(t.writingMode,A,P,g);if(O)return O}var R=Te(v*u.getoffsetX(t.glyphStartIndex),_,b,r,h,p,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,l,a,d,m);if(!R)return{notEnoughRoom:!0};y=[R]}var D,F=f(y);try{for(F.s();!(D=F.n()).done;){var z=D.value;e.addDynamicAttributes(c,z.point,z.angle)}}catch(B){F.e(B)}finally{F.f()}return{}}function Se(e,t,n,r,i,o){var a=e.add(e.sub(t)._unit()),s=ye(a,i,o?o(a):0).point,u=n.sub(s);return n.add(u._mult(r/u.mag()))}function Te(t,n,r,i,o,a,s,u,l,c,h,f,p,d,g){var m=i?t-n:t+n,y=m>0?1:-1,v=0;i&&(y*=-1,v=Math.PI),y<0&&(v+=Math.PI);for(var _=y>0?u+s:u+s+1,b=o,x=o,w=0,E=0,S=Math.abs(m),T=[],k=[],C=a,I=function(){var t=_-y;return 0===w?a:new e.Point(c.getx(t),c.gety(t))},A=function(){return Se(I(),C,x,S-w+1,h,p)};w+E<=S;){if((_+=y)<u||_>=l)return null;if(x=b,T.push(b),d&&k.push(C||I()),void 0===(b=f[_])){var M=ye(C=new e.Point(c.getx(_),c.gety(_)),h,p?p(C):0);b=M.signedDistanceFromCamera>0?f[_]=M.point:A()}else C=null;w+=E,E=x.dist(b)}g&&p&&(C=C||new e.Point(c.getx(_),c.gety(_)),f[_]=b=void 0===f[_]?b:A(),E=x.dist(b));var L=(S-w)/E,N=b.sub(x),P=N.mult(L)._add(x);r&&P._add(N._unit()._perp()._mult(r*y));var O=v+Math.atan2(b.y-x.y,b.x-x.x);return T.push(P),d&&(C=C||new e.Point(c.getx(_),c.gety(_)),k.push(function(t,n,r){var i=1-r;return new e.Point(t.x*i+n.x*r,t.y*i+n.y*r)}(k.length>0?k[k.length-1]:C,C,L))),{point:P,angle:O,path:T,tilePath:k}}var ke=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ce(e,t){for(var n=0;n<e;n++){var r=t.length;t.resize(r+4),t.float32.set(ke,3*r)}}function Ie(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}var Ae=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new de(e.width+200,e.height+200,25),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new de(e.width+200,e.height+200,25);m(this,t),this.transform=e,this.grid=n,this.ignoredGrid=r,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200}return y(t,[{key:"placeCollisionBox",value:function(e,t,n,r,i,o,a){var s=this.projectAndGetPerspectiveRatio(o,t.anchorPointX,t.anchorPointY,t.elevation),u=i*s.perspectiveRatio,l=(t.x1*e+n.x-t.padding)*u+s.point.x,c=(t.y1*e+n.y-t.padding)*u+s.point.y,h=(t.x2*e+n.x+t.padding)*u+s.point.x,f=(t.y2*e+n.y+t.padding)*u+s.point.y,p=s.perspectiveRatio<=.55;return!this.isInsideGrid(l,c,h,f)||!r&&this.grid.hitTest(l,c,h,f,a)||p?{box:[],offscreen:!1}:{box:[l,c,h,f],offscreen:this.isOffscreen(l,c,h,f)}}},{key:"placeCollisionCircles",value:function(t,n,r,i,o,a,s,u,l,c,h,p,d,g){var m=[],y=this.transform.elevation,v=y?function(e){return y.getAtTileOffset(g,e.x,e.y)}:function(e){return 0},_=new e.Point(n.anchorX,n.anchorY),b=v(_),x=ye(_,a,b),w=ve(this.transform.cameraToCenterDistance,x.signedDistanceFromCamera),E=(c?o/w:o*w)/e.ONE_EM,S=ye(_,s,b).point,T=x.signedDistanceFromCamera>0?xe(E,i,n.lineOffsetX*E,n.lineOffsetY*E,!1,S,_,n,r,s,{},y&&!c?v:null,c&&!!y):null,k=!1,C=!1,I=!0;if(T){for(var A=.5*p*w+d,M=new e.Point(-100,-100),L=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),N=new pe,P=T.first,O=T.last,R=[],D=P.path.length-1;D>=1;D--)R.push(P.path[D]);for(var F=1;F<O.path.length;F++)R.push(O.path[F]);var z=2.5*A;if(u){var B=R.map(y?function(e,t){var n=v(t<P.path.length-1?P.tilePath[P.path.length-1-t]:O.tilePath[t-P.path.length+2]);return ye(e,u,n)}:function(e){return ye(e,u)});R=B.some((function(e){return e.signedDistanceFromCamera<=0}))?[]:B.map((function(e){return e.point}))}var U=[];if(R.length>0){for(var V=R[0].clone(),j=R[0].clone(),q=1;q<R.length;q++)V.x=Math.min(V.x,R[q].x),V.y=Math.min(V.y,R[q].y),j.x=Math.max(j.x,R[q].x),j.y=Math.max(j.y,R[q].y);U=V.x>=M.x&&j.x<=L.x&&V.y>=M.y&&j.y<=L.y?[R]:j.x<M.x||V.x>L.x||j.y<M.y||V.y>L.y?[]:e.clipLine([R],M.x,M.y,L.x,L.y)}var G,$=f(U);try{for($.s();!(G=$.n()).done;){var H=G.value;N.reset(H,.25*A);var X=0;X=N.length<=.5*A?1:Math.ceil(N.paddedLength/z)+1;for(var W=0;W<X;W++){var Y=W/Math.max(X-1,1),Z=N.lerp(Y),J=Z.x+100,K=Z.y+100;m.push(J,K,A,0);var Q=J-A,ee=K-A,te=J+A,ne=K+A;if(I=I&&this.isOffscreen(Q,ee,te,ne),C=C||this.isInsideGrid(Q,ee,te,ne),!t&&this.grid.hitTestCircle(J,K,A,h)&&(k=!0,!l))return{circles:[],offscreen:!1,collisionDetected:k}}}}catch(re){$.e(re)}finally{$.f()}}return{circles:!l&&k||!C?[]:m,offscreen:I,collisionDetected:k}}},{key:"queryRenderedSymbols",value:function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var n,r=[],i=1/0,o=1/0,a=-1/0,s=-1/0,u=f(t);try{for(u.s();!(n=u.n()).done;){var l=n.value,c=new e.Point(l.x+100,l.y+100);i=Math.min(i,c.x),o=Math.min(o,c.y),a=Math.max(a,c.x),s=Math.max(s,c.y),r.push(c)}}catch(b){u.e(b)}finally{u.f()}var h,p=this.grid.query(i,o,a,s).concat(this.ignoredGrid.query(i,o,a,s)),d={},g={},m=f(p);try{for(m.s();!(h=m.n()).done;){var y=h.value,v=y.key;if(void 0===d[v.bucketInstanceId]&&(d[v.bucketInstanceId]={}),!d[v.bucketInstanceId][v.featureIndex]){var _=[new e.Point(y.x1,y.y1),new e.Point(y.x2,y.y1),new e.Point(y.x2,y.y2),new e.Point(y.x1,y.y2)];e.polygonIntersectsPolygon(r,_)&&(d[v.bucketInstanceId][v.featureIndex]=!0,void 0===g[v.bucketInstanceId]&&(g[v.bucketInstanceId]=[]),g[v.bucketInstanceId].push(v.featureIndex))}}}catch(b){m.e(b)}finally{m.f()}return g}},{key:"insertCollisionBox",value:function(e,t,n,r,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},e[0],e[1],e[2],e[3])}},{key:"insertCollisionCircles",value:function(e,t,n,r,i){for(var o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<e.length;s+=4)o.insertCircle(a,e[s],e[s+1],e[s+2])}},{key:"projectAndGetPerspectiveRatio",value:function(t,n,r,i){var o=[n,r,0,1];return i?(o[2]=i,e.transformMat4(o,o,t)):Ie(o,o,t),{point:new e.Point((o[0]/o[3]+1)/2*this.transform.width+100,(-o[1]/o[3]+1)/2*this.transform.height+100),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/o[3]*.5,1.5)}}},{key:"isOffscreen",value:function(e,t,n,r){return n<100||e>=this.screenRightBoundary||r<100||t>this.screenBottomBoundary}},{key:"isInsideGrid",value:function(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}},{key:"getViewportMatrix",value:function(){var t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}]),t}(),Me=function(){function e(t,n,r,i){m(this,e),this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?n:-n))):i&&r?1:0,this.placed=r}return y(e,[{key:"isHidden",value:function(){return 0===this.opacity&&!this.placed}}]),e}(),Le=function(){function e(t,n,r,i,o){m(this,e),this.text=new Me(t?t.text:null,n,r,o),this.icon=new Me(t?t.icon:null,n,i,o)}return y(e,[{key:"isHidden",value:function(){return this.text.isHidden()&&this.icon.isHidden()}}]),e}(),Ne=function e(t,n,r){m(this,e),this.text=t,this.icon=n,this.skipFade=r},Pe=function t(){m(this,t),this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Oe=function e(t,n,r,i,o){m(this,e),this.bucketInstanceId=t,this.featureIndex=n,this.sourceLayerIndex=r,this.bucketIndex=i,this.tileID=o},Re=function(){function e(t){m(this,e),this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}return y(e,[{key:"get",value:function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]}}]),e}();function De(t,n,r,i,o){var a=e.getAnchorAlignment(t),s=-(a.horizontalAlign-.5)*n,u=-(a.verticalAlign-.5)*r,l=e.evaluateVariableOffset(t,i);return new e.Point(s+l[0]*o,u+l[1]*o)}function Fe(t,n,r,i,o){var a=new e.Point(t,n);return r&&a._rotate(i?o:-o),a}var ze=function(){function t(e,n,r,i){m(this,t),this.transform=e.clone(),this.collisionIndex=new Ae(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new Re(r),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}return y(t,[{key:"getBucketParts",value:function(t,n,r,i){var o=r.getBucket(n),a=r.latestFeatureIndex;if(o&&a&&n.id===o.layerIds[0]){var s=r.collisionBoxArray,u=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/e.EXTENT,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),p="map"===u.get("text-pitch-alignment"),d="map"===u.get("text-rotation-alignment"),g=z(r,1,this.transform.zoom),m=ge(h,p,d,this.transform,g),y=null;if(p){var v=me(h,p,d,this.transform,g);y=e.multiply([],this.transform.labelPlaneMatrix,v)}this.retainedQueryData[o.bucketInstanceId]=new Oe(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);var _={bucket:o,layout:u,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:y,scale:l,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i){var b,x=f(o.sortKeyRanges);try{for(x.s();!(b=x.n()).done;){var w=b.value,E=w.sortKey,S=w.symbolInstanceStart,T=w.symbolInstanceEnd;t.push({sortKey:E,symbolInstanceStart:S,symbolInstanceEnd:T,parameters:_})}}catch(k){x.e(k)}finally{x.f()}}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:_})}}},{key:"attemptAnchorPlacement",value:function(e,t,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y){var v,_=[h.textOffset0,h.textOffset1],b=p.getSymbolInstanceTextSize(m,h,this.transform.zoom,f),x=De(e,n,r,_,i),w=this.collisionIndex.placeCollisionBox(b,t,Fe(x.x,x.y,o,a,this.transform.angle),c,s,u,l.predicate);if((!g||0!==this.collisionIndex.placeCollisionBox(p.getSymbolInstanceIconSize(y,this.transform.zoom,f),g,Fe(x.x,x.y,o,a,this.transform.angle),c,s,u,l.predicate).box.length)&&w.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(v=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:_,width:n,height:r,anchor:e,textBoxScale:i,prevAnchor:v},this.markUsedJustification(p,e,h,d),p.allowVerticalPlacement&&(this.markUsedOrientation(p,d,h),this.placedOrientations[h.crossTileID]=d),{shift:x,placedGlyphBoxes:w}}},{key:"placeLayerBucketPart",value:function(t,n,r){var i=this,o=t.parameters,a=o.bucket,s=o.layout,u=o.posMatrix,l=o.textLabelPlaneMatrix,c=o.labelToScreenMatrix,h=o.textPixelRatio,p=o.holdingForFade,d=o.collisionBoxArray,g=o.partiallyEvaluatedTextSize,m=o.partiallyEvaluatedIconSize,y=o.collisionGroup,v=s.get("text-optional"),_=s.get("icon-optional"),b=s.get("text-allow-overlap"),x=s.get("icon-allow-overlap"),w="map"===s.get("text-rotation-alignment"),E="map"===s.get("text-pitch-alignment"),S="none"!==s.get("icon-text-fit"),T="viewport-y"===s.get("symbol-z-order"),k=b&&(x||!a.hasIconData()||_),C=x&&(b||!a.hasTextData()||v);!a.collisionArrays&&d&&a.deserializeCollisionBoxes(d),r&&a.updateCollisionDebugBuffers(this.transform.zoom,d);var I=function(t,o,d){if(!n[t.crossTileID])if(p)i.placements[t.crossTileID]=new Ne(!1,!1,!1);else{var T=!1,I=!1,A=!0,M=null,L={box:null,offscreen:null},N={box:null,offscreen:null},P=null,O=null,R=null,D=0,F=0,z=0;d.textFeatureIndex?D=d.textFeatureIndex:t.useRuntimeCollisionCircles&&(D=t.featureIndex),d.verticalTextFeatureIndex&&(F=d.verticalTextFeatureIndex);var B=function(e){(i.transform.elevation||e.elevation)&&(e.elevation=i.transform.elevation?i.transform.elevation.getAtTileOffset(i.retainedQueryData[a.bucketInstanceId].tileID,e.anchorPointX,e.anchorPointY):0)},U=d.textBox;if(U){B(U);var V=function(n){var r=e.WritingMode.horizontal;if(a.allowVerticalPlacement&&!n&&i.prevPlacement){var o=i.prevPlacement.placedOrientations[t.crossTileID];o&&(i.placedOrientations[t.crossTileID]=o,r=o,i.markUsedOrientation(a,r,t))}return r},j=function(n,r){if(a.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&d.verticalTextBox){var i,o=f(a.writingModes);try{for(o.s();!(i=o.n()).done&&(i.value===e.WritingMode.vertical?(L=r(),N=L):L=n(),!(L&&L.box&&L.box.length)););}catch(s){o.e(s)}finally{o.f()}}else L=n()};if(s.get("text-variable-anchor")){var q=s.get("text-variable-anchor");if(i.prevPlacement&&i.prevPlacement.variableOffsets[t.crossTileID]){var G=i.prevPlacement.variableOffsets[t.crossTileID];q.indexOf(G.anchor)>0&&(q=q.filter((function(e){return e!==G.anchor}))).unshift(G.anchor)}var $=function(e,n,r){var s=t.textBoxScale,l=(e.x2-e.x1)*s+2*e.padding,c=(e.y2-e.y1)*s+2*e.padding,f=S&&!x?n:null;f&&B(f);for(var p={box:[],offscreen:!1},d=b?2*q.length:q.length,v=0;v<d;++v){var _=i.attemptAnchorPlacement(q[v%q.length],e,l,c,s,w,E,h,u,y,v>=q.length,t,o,a,r,f,g,m);if(_&&(p=_.placedGlyphBoxes)&&p.box&&p.box.length){T=!0,M=_.shift;break}}return p};j((function(){return $(U,d.iconBox,e.WritingMode.horizontal)}),(function(){var n=d.verticalTextBox;return n&&B(n),a.allowVerticalPlacement&&!(L&&L.box&&L.box.length)&&t.numVerticalGlyphVertices>0&&n?$(n,d.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}})),L&&(T=L.box,A=L.offscreen);var H=V(L&&L.box);if(!T&&i.prevPlacement){var X=i.prevPlacement.variableOffsets[t.crossTileID];X&&(i.variableOffsets[t.crossTileID]=X,i.markUsedJustification(a,X.anchor,t,H))}}else{var W=function(n,r){var s=a.getSymbolInstanceTextSize(g,t,i.transform.zoom,o),l=i.collisionIndex.placeCollisionBox(s,n,new e.Point(0,0),b,h,u,y.predicate);return l&&l.box&&l.box.length&&(i.markUsedOrientation(a,r,t),i.placedOrientations[t.crossTileID]=r),l};j((function(){return W(U,e.WritingMode.horizontal)}),(function(){var n=d.verticalTextBox;return a.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&n?(B(n),W(n,e.WritingMode.vertical)):{box:null,offscreen:null}})),V(L&&L.box&&L.box.length)}}if(T=(P=L)&&P.box&&P.box.length>0,A=P&&P.offscreen,t.useRuntimeCollisionCircles){var Y=a.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),Z=e.evaluateSizeForFeature(a.textSizeData,g,Y),J=s.get("text-padding");O=i.collisionIndex.placeCollisionCircles(b,Y,a.lineVertexArray,a.glyphOffsetArray,Z,u,l,c,r,E,y.predicate,t.collisionCircleDiameter,J,i.retainedQueryData[a.bucketInstanceId].tileID),T=b||O.circles.length>0&&!O.collisionDetected,A=A&&O.offscreen}if(d.iconFeatureIndex&&(z=d.iconFeatureIndex),d.iconBox){var K=function(t){B(t);var n=S&&M?Fe(M.x,M.y,w,E,i.transform.angle):new e.Point(0,0),r=a.getSymbolInstanceIconSize(m,i.transform.zoom,o);return i.collisionIndex.placeCollisionBox(r,t,n,x,h,u,y.predicate)};I=N&&N.box&&N.box.length&&d.verticalIconBox?(R=K(d.verticalIconBox)).box.length>0:(R=K(d.iconBox)).box.length>0,A=A&&R.offscreen}var Q=v||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,ee=_||0===t.numIconVertices;if(Q||ee?ee?Q||(I=I&&T):T=I&&T:I=T=I&&T,T&&P&&P.box&&i.collisionIndex.insertCollisionBox(P.box,s.get("text-ignore-placement"),a.bucketInstanceId,N&&N.box&&F?F:D,y.ID),I&&R&&i.collisionIndex.insertCollisionBox(R.box,s.get("icon-ignore-placement"),a.bucketInstanceId,z,y.ID),O&&(T&&i.collisionIndex.insertCollisionCircles(O.circles,s.get("text-ignore-placement"),a.bucketInstanceId,D,y.ID),r)){var te=a.bucketInstanceId,ne=i.collisionCircleArrays[te];void 0===ne&&(ne=i.collisionCircleArrays[te]=new Pe);for(var re=0;re<O.circles.length;re+=4)ne.circles.push(O.circles[re+0]),ne.circles.push(O.circles[re+1]),ne.circles.push(O.circles[re+2]),ne.circles.push(O.collisionDetected?1:0)}i.placements[t.crossTileID]=new Ne(T||k,I||C,A||a.justReloaded),n[t.crossTileID]=!0}};if(T)for(var A=a.getSortedSymbolIndexes(this.transform.angle),M=A.length-1;M>=0;--M){var L=A[M];I(a.symbolInstances.get(L),L,a.collisionArrays[L])}else for(var N=t.symbolInstanceStart;N<t.symbolInstanceEnd;N++)I(a.symbolInstances.get(N),N,a.collisionArrays[N]);if(r&&a.bucketInstanceId in this.collisionCircleArrays){var P=this.collisionCircleArrays[a.bucketInstanceId];e.invert(P.invProjMatrix,u),P.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1}},{key:"markUsedJustification",value:function(t,n,r,i){var o;o=i===e.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(n)];for(var a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];a<s.length;a++){var u=s[a];u>=0&&(t.text.placedSymbolArray.get(u).crossTileID=o>=0&&u!==o?0:r.crossTileID)}}},{key:"markUsedOrientation",value:function(t,n,r){for(var i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,o=n===e.WritingMode.vertical?n:0,a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];a<s.length;a++){var u=s[a];t.text.placedSymbolArray.get(u).placedOrientation=i}r.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)}},{key:"commit",value:function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],l=i[s];l?(this.opacities[s]=new Le(l,r,u.text,u.icon),n=n||u.text!==l.text.placed||u.icon!==l.icon.placed):(this.opacities[s]=new Le(null,r,u.text,u.icon,u.skipFade),n=n||u.text||u.icon)}for(var c in i){var h=i[c];if(!this.opacities[c]){var f=new Le(h,r,!1,!1);f.isHidden()||(this.opacities[c]=f,n=n||h.text.placed||h.icon.placed)}}for(var p in o)this.variableOffsets[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.variableOffsets[p]=o[p]);for(var d in a)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=a[d]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}},{key:"updateLayerOpacities",value:function(e,t){var n,r={},i=f(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.getBucket(e);a&&o.latestFeatureIndex&&e.id===a.layerIds[0]&&this.updateBucketOpacities(a,r,o.collisionBoxArray)}}catch(s){i.e(s)}finally{i.f()}}},{key:"updateBucketOpacities",value:function(t,n,r){var i=this;t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var o=t.layers[0].layout,a=new Le(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),u=o.get("icon-allow-overlap"),l=o.get("text-variable-anchor"),c="map"===o.get("text-rotation-alignment"),h="map"===o.get("text-pitch-alignment"),f="none"!==o.get("icon-text-fit"),p=new Le(null,0,s&&(u||!t.hasIconData()||o.get("icon-optional")),u&&(s||!t.hasTextData()||o.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);for(var d=function(e,t,n){for(var r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)},g=function(r){var o=t.symbolInstances.get(r),s=o.numHorizontalGlyphVertices,u=o.numVerticalGlyphVertices,g=o.crossTileID,m=i.opacities[g];n[g]?m=a:m||(m=p,i.opacities[g]=m),n[g]=!0;var y=o.numIconVertices>0,v=i.placedOrientations[o.crossTileID],_=v===e.WritingMode.vertical,b=v===e.WritingMode.horizontal||v===e.WritingMode.horizontalOnly;if(s>0||u>0){var x=Xe(m.text);d(t.text,s,_?We:x),d(t.text,u,b?We:x);var w=m.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(e){e>=0&&(t.text.placedSymbolArray.get(e).hidden=w||_?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=w||b?1:0);var E=i.variableOffsets[o.crossTileID];E&&i.markUsedJustification(t,E.anchor,o,v);var S=i.placedOrientations[o.crossTileID];S&&(i.markUsedJustification(t,"left",o,S),i.markUsedOrientation(t,S,o))}if(y){var T=Xe(m.icon),k=!(f&&o.verticalPlacedIconSymbolIndex&&_);o.placedIconSymbolIndex>=0&&(d(t.icon,o.numIconVertices,k?T:We),t.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=m.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(d(t.icon,o.numVerticalIconVertices,k?We:T),t.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var C=t.collisionArrays[r];if(C){var I=new e.Point(0,0);if(C.textBox||C.verticalTextBox){var A=!0;if(l){var M=i.variableOffsets[g];M?(I=De(M.anchor,M.width,M.height,M.textOffset,M.textBoxScale),c&&I._rotate(h?i.transform.angle:-i.transform.angle)):A=!1}C.textBox&&Be(t.textCollisionBox.collisionVertexArray,m.text.placed,!A||_,I.x,I.y),C.verticalTextBox&&Be(t.textCollisionBox.collisionVertexArray,m.text.placed,!A||b,I.x,I.y)}var L=Boolean(!b&&C.verticalIconBox);C.iconBox&&Be(t.iconCollisionBox.collisionVertexArray,m.icon.placed,L,f?I.x:0,f?I.y:0),C.verticalIconBox&&Be(t.iconCollisionBox.collisionVertexArray,m.icon.placed,!L,f?I.x:0,f?I.y:0)}}},m=0;m<t.symbolInstances.length;m++)g(m);if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){var y=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=y.invProjMatrix,t.placementViewportMatrix=y.viewportMatrix,t.collisionCircleArray=y.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}},{key:"symbolFadeChange",value:function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}},{key:"zoomAdjustment",value:function(e){return Math.max(0,(this.transform.zoom-e)/1.5)}},{key:"hasTransitions",value:function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}},{key:"stillRecent",value:function(e,t){var n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}},{key:"setStale",value:function(){this.stale=!0}}]),t}();function Be(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}var Ue=Math.pow(2,25),Ve=Math.pow(2,24),je=Math.pow(2,17),qe=Math.pow(2,16),Ge=Math.pow(2,9),$e=Math.pow(2,8),He=Math.pow(2,1);function Xe(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*Ue+t*Ve+n*je+t*qe+n*Ge+t*$e+n*He+t}var We=0,Ye=function(){function e(t){m(this,e),this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}return y(e,[{key:"continuePlacement",value:function(e,t,n,r,i){for(var o=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(o,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<o.length;)if(t.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1}}]),e}(),Ze=function(){function t(e,n,r,i,o,a,s){m(this,t),this.placement=new ze(e,o,a,s),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1}return y(t,[{key:"isDone",value:function(){return this._done}},{key:"continuePlacement",value:function(t,n,r){for(var i=this,o=e.browser.now(),a=function(){var t=e.browser.now()-o;return!i._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var s=n[t[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new Ye(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}},{key:"commit",value:function(e){return this.placement.commit(e),this.placement}}]),t}(),Je=512/e.EXTENT/2,Ke=function(){function t(e,n,r){m(this,t),this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var i=0;i<n.length;i++){var o=n.get(i),a=o.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:o.crossTileID,coord:this.getScaledCoordinates(o,e)})}}return y(t,[{key:"getScaledCoordinates",value:function(t,n){var r=Je/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*e.EXTENT+t.anchorX)*r),y:Math.floor((n.canonical.y*e.EXTENT+t.anchorY)*r)}}},{key:"findMatches",value:function(e,t,n){for(var r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),i=0;i<e.length;i++){var o=e.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a){var s,u=this.getScaledCoordinates(o,t),l=f(a);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(Math.abs(c.coord.x-u.x)<=r&&Math.abs(c.coord.y-u.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}catch(h){l.e(h)}finally{l.f()}}}}}}]),t}(),Qe=function(){function e(){m(this,e),this.maxCrossTileID=0}return y(e,[{key:"generate",value:function(){return++this.maxCrossTileID}}]),e}(),et=function(){function e(){m(this,e),this.indexes={},this.usedCrossTileIDs={},this.lng=0}return y(e,[{key:"handleWrapJump",value:function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+t),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=e}},{key:"addBucket",value:function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var i=this.usedCrossTileIDs[e.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>e.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(e)&&u.findMatches(t.symbolInstances,e,i)}else{var l=a[e.scaledTo(Number(o)).key];l&&l.findMatches(t.symbolInstances,e,i)}}for(var c=0;c<t.symbolInstances.length;c++){var h=t.symbolInstances.get(c);h.crossTileID||(h.crossTileID=n.generate(),i[h.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Ke(e,t.symbolInstances,t.bucketInstanceId),!0}},{key:"removeBucketCrossTileIDs",value:function(e,t){for(var n in t.indexedSymbolInstances){var r,i=f(t.indexedSymbolInstances[n]);try{for(i.s();!(r=i.n()).done;){var o=r.value;delete this.usedCrossTileIDs[e][o.crossTileID]}}catch(a){i.e(a)}finally{i.f()}}}},{key:"removeStaleBuckets",value:function(e){var t=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}]),e}(),tt=function(){function e(){m(this,e),this.layerIndexes={},this.crossTileIDs=new Qe,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}return y(e,[{key:"addLayer",value:function(e,t,n){var r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new et);var i=!1,o={};r.handleWrapJump(n);var a,s=f(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=u.getBucket(e);l&&e.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(i=!0),o[l.bucketInstanceId]=!0)}}catch(c){s.e(c)}finally{s.f()}return r.removeStaleBuckets(o)&&(i=!0),i}},{key:"pruneUnusedLayers",value:function(e){var t={};for(var n in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[n]||delete this.layerIndexes[n]}}]),e}(),nt=function(t,n){return e.emitValidationErrors(t,n&&n.filter((function(e){return"source.canvas"!==e.identifier})))},rt=e.pick(oe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain"]),it=e.pick(oe,["setCenter","setZoom","setBearing","setPitch"]),ot=function(){var t={},n=e.styleSpec.$version;for(var r in e.styleSpec.$root){var i=e.styleSpec.$root[r];if(i.required){var o=null;null!=(o="version"===r?n:"array"===i.type?[]:{})&&(t[r]=o)}}return t}(),at=function(t){d(r,t);var n=g(r);function r(t){var o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(this,r),(o=n.call(this)).map=t,o.dispatcher=new F(ne(),i(o)),o.imageManager=new S,o.imageManager.setEventedParent(i(o)),o.glyphManager=new L(t._requestManager,a.localIdeographFontFamily),o.lineAtlas=new D(256,512),o.crossTileSymbolIndex=new tt,o._layers={},o._num3DLayers=0,o._serializedLayers={},o._order=[],o._sourceCaches={},o._otherSourceCaches={},o._symbolSourceCaches={},o.zoomHistory=new e.ZoomHistory,o._loaded=!1,o._availableImages=[],o._resetUpdates(),o.dispatcher.broadcast("setReferrer",e.getReferrer());var s=i(o);return o._rtlTextPluginCallback=r.registerForPluginStateChange((function(t){s.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,n){if(e.triggerPluginCompletionEvent(t),n&&n.every((function(e){return e})))for(var r in s._sourceCaches){var i=s._sourceCaches[r],o=i.getSource().type;"vector"!==o&&"geojson"!==o||i.reload()}}))})),o.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=o.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(var n in o._layers){var r=o._layers[n];r.source===t.id&&o._validateLayer(r)}}})),o}return y(r,[{key:"loadURL",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof r.validate?r.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,r.accessToken);var o=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(o,(function(t,r){n._request=null,t?n.fire(new e.ErrorEvent(t)):r&&n._load(r,i)}))}},{key:"loadJSON",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame((function(){n._request=null,n._load(t,!1!==r.validate)}))}},{key:"loadEmpty",value:function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(ot,!1)}},{key:"_load",value:function(t,n){if(!n||!nt(this,e.validateStyle(t))){for(var r in this._loaded=!0,this.stylesheet=t,t.sources)this.addSource(r,t.sources[r],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var i=ie(this.stylesheet.layers);this._order=i.map((function(e){return e.id})),this._layers={},this._serializedLayers={};var o,a=f(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;(s=e.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize(),s.is3D()&&this._num3DLayers++}}catch(u){a.e(u)}finally{a.f()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new P(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}}},{key:"_loadSprite",value:function(t){var n=this;this._spriteRequest=function(t,n,r){var i,o,a,s=e.browser.devicePixelRatio>1?"@2x":"",u=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),(function(e,t){u=null,a||(a=e,i=t,c())})),l=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),(function(e,t){l=null,a||(a=e,o=t,c())}));function c(){if(a)r(a);else if(i&&o){var t=e.browser.getImageData(o),n={};for(var s in i){var u=i[s],l=u.width,c=u.height,h=u.x,f=u.y,p=u.sdf,d=u.pixelRatio,g=u.stretchX,m=u.stretchY,y=u.content,v=new e.RGBAImage({width:l,height:c});e.RGBAImage.copy(t,v,{x:h,y:f},{x:0,y:0},{width:l,height:c}),n[s]={data:v,pixelRatio:d,sdf:p,stretchX:g,stretchY:m,content:y}}r(null,n)}}return{cancel:function(){u&&(u.cancel(),u=null),l&&(l.cancel(),l=null)}}}(t,this.map._requestManager,(function(t,r){if(n._spriteRequest=null,t)n.fire(new e.ErrorEvent(t));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new e.Event("data",{dataType:"style"}))}))}},{key:"_validateLayer",value:function(t){var n=this.getSource(t.source);if(n){var r=t.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error('Source layer "'.concat(r,'" ')+'does not exist on source "'.concat(n.id,'" ')+'as specified by style layer "'.concat(t.id,'"'))))}}},{key:"loaded",value:function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}},{key:"_serializeLayers",value:function(e){var t,n=[],r=f(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=this._layers[i];"custom"!==o.type&&n.push(o.serialize())}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"hasTransitions",value:function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}},{key:"_checkLoaded",value:function(){if(!this._loaded)throw new Error("Style is not done loading")}},{key:"update",value:function(t){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}var u={};for(var l in this._sourceCaches){var c=this._sourceCaches[l];u[l]=c.used,c.used=!1}var h,p=f(this._order);try{for(p.s();!(h=p.n()).done;){var d=h.value,g=this._layers[d];if(g.recalculate(t,this._availableImages),!g.isHidden(t.zoom)){var m=this._getLayerSourceCache(g);m&&(m.used=!0)}var y=this.map.painter;if(y){var v=g.getProgramIds();if(!v)continue;var _,b=g.getProgramConfiguration(t.zoom),x=f(v);try{for(x.s();!(_=x.n()).done;){var w=_.value;y.useProgram(w,b)}}catch(T){x.e(T)}finally{x.f()}}}}catch(T){p.e(T)}finally{p.f()}for(var E in u){var S=this._sourceCaches[E];u[E]!==S.used&&S.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:S.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.z=t.zoom,n&&this.fire(new e.Event("data",{dataType:"style"}))}}},{key:"_updateTilesForChangedImages",value:function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}},{key:"_updateWorkerLayers",value:function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}},{key:"_resetUpdates",value:function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}},{key:"setState",value:function(t){var n=this;if(this._checkLoaded(),nt(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=ie(t.layers);var r=function(t,n){if(!t)return[{command:oe.setStyle,args:[n]}];var r=[];try{if(!e.deepEqual(t.version,n.version))return[{command:oe.setStyle,args:[n]}];e.deepEqual(t.center,n.center)||r.push({command:oe.setCenter,args:[n.center]}),e.deepEqual(t.zoom,n.zoom)||r.push({command:oe.setZoom,args:[n.zoom]}),e.deepEqual(t.bearing,n.bearing)||r.push({command:oe.setBearing,args:[n.bearing]}),e.deepEqual(t.pitch,n.pitch)||r.push({command:oe.setPitch,args:[n.pitch]}),e.deepEqual(t.sprite,n.sprite)||r.push({command:oe.setSprite,args:[n.sprite]}),e.deepEqual(t.glyphs,n.glyphs)||r.push({command:oe.setGlyphs,args:[n.glyphs]}),e.deepEqual(t.transition,n.transition)||r.push({command:oe.setTransition,args:[n.transition]}),e.deepEqual(t.light,n.light)||r.push({command:oe.setLight,args:[n.light]}),e.deepEqual(t.terrain,n.terrain)||r.push({command:oe.setTerrain,args:[n.terrain]});var i={},o=[];!function(t,n,r,i){var o;for(o in n=n||{},t=t||{})t.hasOwnProperty(o)&&(n.hasOwnProperty(o)||se(o,r,i));for(o in n)n.hasOwnProperty(o)&&(t.hasOwnProperty(o)?e.deepEqual(t[o],n[o])||("geojson"===t[o].type&&"geojson"===n[o].type&&le(t,n,o)?r.push({command:oe.setGeoJSONSourceData,args:[o,n[o].data]}):ue(o,n,r,i)):ae(o,n,r))}(t.sources,n.sources,o,i);var a=[];t.layers&&t.layers.forEach((function(e){i[e.source]?r.push({command:oe.removeLayer,args:[e.id]}):a.push(e)})),r=r.concat(o),function(t,n,r){n=n||[];var i,o,a,s,u,l,c,h=(t=t||[]).map(he),f=n.map(he),p=t.reduce(fe,{}),d=n.reduce(fe,{}),g=h.slice(),m=Object.create(null);for(i=0,o=0;i<h.length;i++)a=h[i],d.hasOwnProperty(a)?o++:(r.push({command:oe.removeLayer,args:[a]}),g.splice(g.indexOf(a,o),1));for(i=0,o=0;i<f.length;i++)a=f[f.length-1-i],g[g.length-1-i]!==a&&(p.hasOwnProperty(a)?(r.push({command:oe.removeLayer,args:[a]}),g.splice(g.lastIndexOf(a,g.length-o),1)):o++,l=g[g.length-i],r.push({command:oe.addLayer,args:[d[a],l]}),g.splice(g.length-i,0,a),m[a]=!0);for(i=0;i<f.length;i++)if(s=p[a=f[i]],u=d[a],!m[a]&&!e.deepEqual(s,u))if(e.deepEqual(s.source,u.source)&&e.deepEqual(s["source-layer"],u["source-layer"])&&e.deepEqual(s.type,u.type)){for(c in ce(s.layout,u.layout,r,a,null,oe.setLayoutProperty),ce(s.paint,u.paint,r,a,null,oe.setPaintProperty),e.deepEqual(s.filter,u.filter)||r.push({command:oe.setFilter,args:[a,u.filter]}),e.deepEqual(s.minzoom,u.minzoom)&&e.deepEqual(s.maxzoom,u.maxzoom)||r.push({command:oe.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?ce(s[c],u[c],r,a,c.slice(6),oe.setPaintProperty):e.deepEqual(s[c],u[c])||r.push({command:oe.setLayerProperty,args:[a,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?ce(s[c],u[c],r,a,c.slice(6),oe.setPaintProperty):e.deepEqual(s[c],u[c])||r.push({command:oe.setLayerProperty,args:[a,c,u[c]]}))}else r.push({command:oe.removeLayer,args:[a]}),l=g[g.lastIndexOf(a)+1],r.push({command:oe.addLayer,args:[u,l]})}(a,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:oe.setStyle,args:[n]}]}return r}(this.serialize(),t).filter((function(e){return!(e.command in it)}));if(0===r.length)return!1;var i=r.filter((function(e){return!(e.command in rt)}));if(i.length>0)throw new Error("Unimplemented: ".concat(i.map((function(e){return e.command})).join(", "),"."));return r.forEach((function(e){"setTransition"!==e.command&&n[e.command].apply(n,e.args)})),this.stylesheet=t,!0}},{key:"addImage",value:function(t,n){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,n),this._afterImageUpdated(t)}},{key:"updateImage",value:function(e,t){this.imageManager.updateImage(e,t)}},{key:"getImage",value:function(e){return this.imageManager.getImage(e)}},{key:"removeImage",value:function(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)}},{key:"_afterImageUpdated",value:function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}},{key:"listImages",value:function(){return this._checkLoaded(),this.imageManager.listImages()}},{key:"addSource",value:function(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateStyle.source,"sources.".concat(t),n,null,i))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=X(t,n,this.dispatcher,this);o.setEventedParent(this,(function(){return{isSourceLoaded:r.loaded(),source:o.serialize(),sourceId:t}}));var a=function(n){var i=(n?"symbol:":"other:")+t,a=r._sourceCaches[i]=new e.SourceCache(i,o,n);(n?r._symbolSourceCaches:r._otherSourceCaches)[t]=a,a.style=r,a.onAdd(r.map)};a(!1),"vector"!==n.type&&"geojson"!==n.type||a(!0),o.onAdd&&o.onAdd(this.map),this._changed=!0}}},{key:"removeSource",value:function(t){this._checkLoaded();var n=this.getSource(t);if(void 0===n)throw new Error("There is no source with this ID");for(var r in this._layers)if(this._layers[r].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while layer "').concat(r,'" is using it.'))));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while terrain is using it.'))));var i,o=this._getSourceCaches(t),a=f(o);try{for(a.s();!(i=a.n()).done;){var s=i.value;delete this._sourceCaches[s.id],delete this._updatedSources[s.id],s.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:s.getSource().id})),s.setEventedParent(null),s.clearTiles()}}catch(u){a.e(u)}finally{a.f()}delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0}},{key:"setGeoJSONSourceData",value:function(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}},{key:"getSource",value:function(e){var t=this._getSourceCache(e);return t&&t.getSource()}},{key:"addLayer",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var i=t.id;if(this.getLayer(i))this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(i,'" already exists on this map'))));else{var o;if("custom"===t.type){if(nt(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateStyle.layer,"layers.".concat(i),t,{arrayIndex:-1},r))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize(),o.is3D()&&this._num3DLayers++}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.'))));else{this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o;var s=this._getLayerSourceCache(o);if(this._removedLayers[i]&&o.source&&s&&"custom"!==o.type){var u=this._removedLayers[i];delete this._removedLayers[i],u.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}}},{key:"moveLayer",value:function(t,n){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==n){var r=this._order.indexOf(t);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.')))):(this._order.splice(i,0,t),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be moved."))))}},{key:"removeLayer",value:function(t){this._checkLoaded();var n=this._layers[t];if(n){n.setEventedParent(null),n.is3D()&&this._num3DLayers--;var r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be removed."))))}},{key:"getLayer",value:function(e){return this._layers[e]}},{key:"hasLayer",value:function(e){return e in this._layers}},{key:"setLayerZoomRange",value:function(t,n,r){this._checkLoaded();var i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot have zoom extent."))))}},{key:"setFilter",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var i=this.getLayer(t);if(i){if(!e.deepEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(e.validateStyle.filter,"layers.".concat(i.id,".filter"),n,null,r)||(i.filter=e.clone$1(n),this._updateLayer(i)))}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be filtered."))))}},{key:"getFilter",value:function(t){return e.clone$1(this.getLayer(t).filter)}},{key:"setLayoutProperty",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var o=this.getLayer(t);o?e.deepEqual(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._updateLayer(o)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be styled."))))}},{key:"getLayoutProperty",value:function(t,n){var r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style."))))}},{key:"setPaintProperty",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var o=this.getLayer(t);o?e.deepEqual(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be styled."))))}},{key:"getPaintProperty",value:function(e,t){return this.getLayer(e).getPaintProperty(t)}},{key:"setFeatureState",value:function(t,n){this._checkLoaded();var r=t.source,i=t.sourceLayer,o=this.getSource(r);if(void 0!==o){var a=o.type;if("geojson"===a&&i)this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));else if("vector"!==a||i){void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));var s,u=this._getSourceCaches(r),l=f(u);try{for(l.s();!(s=l.n()).done;)s.value.setFeatureState(i,t.id,n)}catch(c){l.e(c)}finally{l.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"removeFeatureState",value:function(t,n){this._checkLoaded();var r=t.source,i=this.getSource(r);if(void 0!==i){var o=i.type,a="vector"===o?t.sourceLayer:void 0;if("vector"!==o||a)if(n&&"string"!=typeof t.id&&"number"!=typeof t.id)this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));else{var s,u=this._getSourceCaches(r),l=f(u);try{for(l.s();!(s=l.n()).done;)s.value.removeFeatureState(a,t.id,n)}catch(c){l.e(c)}finally{l.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"getFeatureState",value:function(t){this._checkLoaded();var n=t.source,r=t.sourceLayer,i=this.getSource(n);if(void 0!==i){if("vector"!==i.type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"getTransition",value:function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}},{key:"serialize",value:function(){var t={};for(var n in this._sourceCaches){var r=this._sourceCaches[n].getSource();t[r.id]||(t[r.id]=r.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t,layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))}},{key:"_updateLayer",value:function(e){this._updatedLayers[e.id]=!0;var t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0}},{key:"_flattenAndSortRenderedFeatures",value:function(e){for(var t=this,n=function(e){return"fill-extrusion"===t._layers[e].type},r={},i=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(n(a)){r[a]=o;var s,u=f(e);try{for(u.s();!(s=u.n()).done;){var l=s.value[a];if(l){var c,h=f(l);try{for(h.s();!(c=h.n()).done;){var p=c.value;i.push(p)}}catch(T){h.e(T)}finally{h.f()}}}}catch(T){u.e(T)}finally{u.f()}}}i.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var d=[],g=this._order.length-1;g>=0;g--){var m=this._order[g];if(n(m))for(var y=i.length-1;y>=0;y--){var v=i[y].feature;if(r[v.layer.id]<g)break;d.push(v),i.pop()}else{var _,b=f(e);try{for(b.s();!(_=b.n()).done;){var x=_.value[m];if(x){var w,E=f(x);try{for(E.s();!(w=E.n()).done;){var S=w.value;d.push(S.feature)}}catch(T){E.e(T)}finally{E.f()}}}}catch(T){b.e(T)}finally{b.f()}}}return d}},{key:"queryRenderedFeatures",value:function(t,n,r){var i=this;n&&n.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);var o={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];var a,s=f(n.layers);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=this._layers[u];if(!l)return this.fire(new e.ErrorEvent(new Error("The layer '".concat(u,"' does not exist in the map's style and cannot be queried for features.")))),[];o[l.source]=!0}}catch(m){s.e(m)}finally{s.f()}}var c=[];n.availableImages=this._availableImages;var h=n&&n.layers?n.layers.some((function(e){var t=i.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),p=B.createFromScreenPoints(t,r);for(var d in this._sourceCaches){var g=this._sourceCaches[d].getSource().id;n.layers&&!o[g]||c.push(Y(this._sourceCaches[d],this._layers,this._serializedLayers,p,n,r,h,!!this.map._showQueryGeometry))}return this.placement&&c.push(function(e,t,n,r,i,o,a){var s,u={},l=o.queryRenderedSymbols(r),c=[],h=f(Object.keys(l).map(Number));try{for(h.s();!(s=h.n()).done;){var p=s.value;c.push(a[p])}}catch(m){h.e(m)}finally{h.f()}c.sort(J);for(var d=function(){var n=y[g],r=n.featureIndex.lookupSymbolFeatures(l[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(var o in r){var a=u[o]=u[o]||[],s=r[o];s.sort((function(e,t){var r=n.featureSortOrder;if(r){var i=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex}));var c,h=f(s);try{for(h.s();!(c=h.n()).done;){var p=c.value;a.push(p)}}catch(m){h.e(m)}finally{h.f()}}},g=0,y=c;g<y.length;g++)d();var v=function(t){u[t].forEach((function(r){var i=r.feature,o=n(e[t]).getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}))};for(var _ in u)v(_);return u}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),p.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)}},{key:"querySourceFeatures",value:function(t,n){n&&n.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);var r,i=this._getSourceCaches(t),o=[],a=f(i);try{for(a.s();!(r=a.n()).done;){var s=r.value;o=o.concat(Z(s,n))}}catch(u){a.e(u)}finally{a.f()}return o}},{key:"addSourceType",value:function(e,t,n){return r.getSourceType(e)?n(new Error('A source type called "'.concat(e,'" already exists.'))):(r.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}},{key:"getLight",value:function(){return this.light.getLight()}},{key:"setLight",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();var r=this.light.getLight(),i=!1;for(var o in t)if(!e.deepEqual(t[o],r[o])){i=!0;break}if(i){var a={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,n),this.light.updateTransitions(a)}}},{key:"setTerrain",value:function(t){if(this._checkLoaded(),!t)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),void this._force3DLayerUpdate();if("object"==typeof t.source){var n="terrain-dem-src";this.addSource(n,t.source),t=e.clone$1(t),t=e.extend(t,{source:n})}if(!this._validate(e.validateStyle.terrain,"terrain",t))if(this.terrain){var r=this.terrain,i=r.get();for(var o in t)if(!e.deepEqual(t[o],i[o])){r.set(t),this.stylesheet.terrain=t;var a={now:e.browser.now(),transition:e.extend({duration:0},this.stylesheet.transition)};r.updateTransitions(a);break}}else this._createTerrain(t)}},{key:"_createTerrain",value:function(t){var n=this.terrain=new R(t);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();var r={now:e.browser.now(),transition:e.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(r)}},{key:"_force3DLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}},{key:"_validate",value:function(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!o||!1!==o.validate)&&nt(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.styleSpec},i)))}},{key:"_remove",value:function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var n in this._sourceCaches)this._sourceCaches[n].clearTiles(),this._sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}},{key:"_clearSource",value:function(e){var t,n=this._getSourceCaches(e),r=f(n);try{for(r.s();!(t=r.n()).done;)t.value.clearTiles()}catch(i){r.e(i)}finally{r.f()}}},{key:"_reloadSource",value:function(e){var t,n=this._getSourceCaches(e),r=f(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.resume(),i.reload()}}catch(o){r.e(o)}finally{r.f()}}},{key:"_updateSources",value:function(e){for(var t in this._sourceCaches)this._sourceCaches[t].update(e)}},{key:"_generateCollisionBoxes",value:function(){for(var e in this._sourceCaches){var t=this._sourceCaches[e];t.resume(),t.reload()}}},{key:"_updatePlacement",value:function(t,n,r,i){var o,a=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=!1,l=!1,c={},h=f(this._order);try{for(h.s();!(o=h.n()).done;){var p=o.value,d=this._layers[p];if("symbol"===d.type){if(!c[d.source]&&"continue"===function(){var e=a._getLayerSourceCache(d);if(!e)return"continue";c[d.source]=e.getRenderableIds(!0).map((function(t){return e.getTileByID(t)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}())continue;var g=this.crossTileSymbolIndex.addLayer(d,c[d.source],t.center.lng);u=u||g}}}catch(b){h.e(b)}finally{h.f()}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((s=s||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),t.zoom))&&(this.pauseablePlacement=new Ze(t,this._order,s,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),l=!0),u&&this.pauseablePlacement.placement.setStale()),l||u){var m,y=f(this._order);try{for(y.s();!(m=y.n()).done;){var v=m.value,_=this._layers[v];"symbol"===_.type&&this.placement.updateLayerOpacities(_,c[_.source])}}catch(b){y.e(b)}finally{y.f()}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())}},{key:"_releaseSymbolFadeTiles",value:function(){for(var e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}},{key:"getImages",value:function(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();var r=function(e){e&&e.setDependencies(t.tileID.key,t.type,t.icons)};r(this._otherSourceCaches[t.source]),r(this._symbolSourceCaches[t.source])}},{key:"getGlyphs",value:function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}},{key:"getResource",value:function(t,n,r){return e.makeRequest(n,r)}},{key:"_getSourceCache",value:function(e){return this._otherSourceCaches[e]}},{key:"_getLayerSourceCache",value:function(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}},{key:"_getSourceCaches",value:function(e){var t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}},{key:"has3DLayers",value:function(){return this._num3DLayers>0}}]),r}(e.Evented);at.getSourceType=function(e){return H[e]},at.setSourceType=function(e,t){H[e]=t},at.registerForPluginStateChange=e.registerForPluginStateChange;var st="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ut={};ut=Ut("","#ifdef TERRAIN\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}float prevElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*word/7.3;}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0);var lt=Ut("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nconst float PI=3.141592653589793;","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const float PI=3.141592653589793;const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),ct=Ut("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ht=Ut("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),ft=Ut("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),pt=Ut("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),dt=Ut("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}"),gt=Ut("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),mt=Ut("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=u_matrix*vec4(a_pos,elevation(a_pos),1.0);gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),yt=Ut("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),vt=Ut("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),_t=Ut("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),bt=Ut("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),xt=Ut("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),wt=Ut("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Et=Ut("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,t > 0.0 ? height : base,1);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),St=Ut("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,z,1);\n#endif\nvec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Tt=Ut("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),kt=Ut("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ct=Ut("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),It=Ut("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),At=Ut("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Mt=Ut("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),Lt=Ut("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Nt=Ut("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}"),Pt=Ut("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),Ot=Ut("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),Rt=Ut("uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;const float skirtOffset=24575.0;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);}"),Dt=Ut("#ifdef GL_ES\nprecision highp float;\n#endif\nvec4 pack_depth(float ndc_z) {float depth=ndc_z*0.5+0.5;const vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),Ft=Ut("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",st),zt=Ut("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform lowp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5))*u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",st),Bt=Ut("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}");function Ut(e,t,n){var r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),o=e.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=t.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g),s=a?a.concat(o):o;n||(s=ut.staticUniforms.concat(s));var u={};return{fragmentSource:e=e.replace(r,(function(e,t,n,r,i){return u[i]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\nvarying ").concat(n," ").concat(r," ").concat(i,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(i,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(i,"\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n")})),vertexSource:t=t.replace(r,(function(e,t,n,r,i){var o="float"===r?"vec2":"vec4",a=i.match(/color/)?"color":o;return u[i]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\nuniform lowp float u_").concat(i,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(i,";\nvarying ").concat(n," ").concat(r," ").concat(i,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(i,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(i," = a_").concat(i,";\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(i," = unpack_mix_").concat(a,"(a_").concat(i,", u_").concat(i,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\nuniform lowp float u_").concat(i,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(i,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(i,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(n," ").concat(r," ").concat(i," = a_").concat(i,";\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(n," ").concat(r," ").concat(i," = unpack_mix_").concat(a,"(a_").concat(i,", u_").concat(i,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n")})),staticAttributes:i,staticUniforms:s}}var Vt=Object.freeze({__proto__:null,get preludeTerrain(){return ut},prelude:lt,background:ct,backgroundPattern:ht,circle:ft,clippingMask:pt,heatmap:dt,heatmapTexture:gt,collisionBox:mt,collisionCircle:yt,debug:vt,fill:_t,fillOutline:bt,fillOutlinePattern:xt,fillPattern:wt,fillExtrusion:Et,fillExtrusionPattern:St,hillshadePrepare:Tt,hillshade:kt,line:Ct,lineGradient:It,linePattern:At,lineSDF:Mt,raster:Lt,symbolIcon:Nt,symbolSDF:Pt,symbolTextAndIcon:Ot,terrainRaster:Rt,terrainDepth:Dt,skybox:Ft,skyboxGradient:zt,skyboxCapture:Bt}),jt=function(){function e(){m(this,e),this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}return y(e,[{key:"bind",value:function(e,t,n,r,i,o,a,s){this.context=e;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(t,n,r,i,o,a,s)}},{key:"freshBind",value:function(e,t,n,r,i,o,a){var s,u=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var h=u;h<s;h++)c.disableVertexAttribArray(h)}t.enableAttributes(c,e);var p,d=f(n);try{for(d.s();!(p=d.n()).done;)p.value.enableAttributes(c,e)}catch(v){d.e(v)}finally{d.f()}o&&o.enableAttributes(c,e),a&&a.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);var g,m=f(n);try{for(m.s();!(g=m.n()).done;){var y=g.value;y.bind(),y.setVertexAttribPointers(c,e,i)}}catch(v){m.e(v)}finally{m.f()}o&&(o.bind(),o.setVertexAttribPointers(c,e,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,e,i)),l.currentNumAttributes=u}},{key:"destroy",value:function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}]),e}();function qt(t,n){var r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new e.MercatorCoordinate(0,i/r).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function Gt(t,n,r,i,o,a,s){var u=t.context,l=u.gl,c=r.fbo;if(c){t.prepareDrawTile(n);var h=t.useProgram("hillshade");u.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get());var f=function(e,t,n,r){var i=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color"),s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var u=!e.options.moving;return{u_matrix:r||e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),u),u_image:0,u_latrange:qt(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}}(t,r,i,t.terrain?n.posMatrix:null);h.draw(u,l.TRIANGLES,o,a,s,e.CullFaceMode.disabled,f,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function $t(t,n,r){if(n.needsDEMTextureUpload){var i=t.context,o=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(r.stride);var a=r.getPixels();n.demTexture?n.demTexture.update(a,{premultiply:!1}):n.demTexture=new e.Texture(i,a,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}}function Ht(t,n,r,i,o,a){var s=t.context,u=s.gl;if(n.dem){var l=n.dem;if(s.activeTexture.set(u.TEXTURE1),$t(t,n,l),n.demTexture){n.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);var c=l.dim;s.activeTexture.set(u.TEXTURE0);var h=n.fbo;if(!h){var f=new e.Texture(s,{width:c,height:c,data:null},u.RGBA);f.bind(u.LINEAR,u.CLAMP_TO_EDGE),(h=n.fbo=s.createFramebuffer(c,c,!0)).colorAttachment.set(f.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,c,c]),t.useProgram("hillshadePrepare").draw(s,u.TRIANGLES,i,o,a,e.CullFaceMode.disabled,function(t,n){var r=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:n.unpackVector}}(n.tileID,l),r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),n.needsHillshadePrepare=!1}}}var Xt=function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image0:new e.Uniform1i(t,n.u_image0),u_skirt_height:new e.Uniform1f(t,n.u_skirt_height)}},Wt=function(e,t){return{u_matrix:e,u_image0:0,u_skirt_height:t}},Yt=new(function(){function e(){m(this,e),this.operations={}}return y(e,[{key:"newMorphing",value:function(e,t,n,r,i){if(e in this.operations){var o=this.operations[e];o.to.tileID.key!==n.tileID.key&&(o.queued=n)}else this.operations[e]={startTime:r,phase:0,duration:i,from:t,to:n,queued:null}}},{key:"getMorphValuesForProxy",value:function(e){if(!(e in this.operations))return null;var t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}},{key:"update",value:function(e){for(var t in this.operations){var n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}},{key:"_nextOp",value:function(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}},{key:"_validOp",value:function(e){return e.from.hasData()&&e.to.hasData()}}]),e}()),Zt={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Jt(t,n,r,i,o){var a=t.context,s=a.gl,u=t.useProgram("terrainRaster"),l=0,c=t.colorModeForRenderPass(),h=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Yt.update(o);var p,d,g,m,y=t.transform,v=6*Math.pow(1.5,22-y.zoom)*n.exaggeration(),_=f(i);try{for(_.s();!(m=_.n()).done;){var b=m.value,x=r.getTile(b),w=e.StencilMode.disabled,E=n.prevTerrainTileForTile[b.key],S=n.terrainTileForTile[b.key];g=S,null!=(d=E)&&null!=g&&d.hasData()&&g.hasData()&&null!=d.demTexture&&null!=g.demTexture&&d.tileID.key!==g.tileID.key&&Yt.newMorphing(b.key,E,S,o,250),a.activeTexture.set(s.TEXTURE0),x.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);var T=Yt.getMorphValuesForProxy(b.key),k=T?1:0,C=void 0;T&&(C={morphing:{srcDemTile:T.from,dstDemTile:T.to,phase:e.easeCubicInOut(T.phase)}});var I=Wt(b.posMatrix,Kt(b.canonical,y.renderWorldCopies)?v/10:v);l!==(p=k)&&(u=t.useProgram("terrainRaster",null,Zt[p]),l=p),n.setupElevationDraw(x,u,C),u.draw(a,s.TRIANGLES,h,w,c,e.CullFaceMode.backCCW,I,"terrain_raster",n.gridBuffer,n.gridIndexBuffer,n.gridSegments)}}catch(A){_.e(A)}finally{_.f()}}function Kt(e,t){var n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}var Qt=function(e){return{u_matrix:e}};function en(t,n,r,i,o){if(o>0){var a=e.browser.now(),s=(a-t.timeAdded)/o,u=n?(a-n.timeAdded)/o:-1,l=r.getSource(),c=i.coveringZoomLevel({tileSize:l.tileSize,roundZoom:l.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),f=h&&t.refreshedUponExpiration?1:e.clamp(h?s:1-u,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}var tn={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0},nn=function(t){d(r,t);var n=g(r);function r(e){var t;m(this,r);var o=X("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new F(ne(),null),e.style);return t=n.call(this,"proxy",o,!1),o.setEventedParent(i(t)),t.map=t.getSource().map=e,t.used=t._sourceLoaded=!0,t.renderCache=[],t.renderCachePool=[],t.proxyCachedFBO={},t}return y(r,[{key:"update",value:function(t,n,r){var i=this;if(!t.freezeTileCoverage){this.transform=t;var o=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!0}).reduce((function(n,r){if(n[r.key]="",!i._tiles[r.key]){var o=new e.Tile(r,i._source.tileSize*r.overscaleFactor(),t.tileZoom);o.state="loaded",i._tiles[r.key]=o}return n}),{});for(var a in this._tiles)a in o||(this.freeFBO(a),this._tiles[a].state="unloaded",delete this._tiles[a])}}},{key:"freeFBO",value:function(e){var t=this.proxyCachedFBO[e];void 0!==t&&(this.renderCachePool.push(t),delete this.proxyCachedFBO[e])}},{key:"deallocRenderCache",value:function(){this.renderCache.forEach((function(e){return e.fb.destroy()})),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}]),r}(e.SourceCache),rn=function(e){d(n,e);var t=g(n);function n(e,r,i){var o;return m(this,n),(o=t.call(this,e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)).proxyTileKey=r,o.posMatrix=i,o}return n}(e.OverscaledTileID),on=function(t){d(r,t);var n=g(r);function r(t,o){var a;m(this,r),(a=n.call(this)).painter=t,a.terrainTileForTile={},a.prevTerrainTileForTile={};var s=function(t){var n=new e.StructArrayLayout4i8,r=new e.StructArrayLayout3ui6;n.reserve(17161),r.reserve(33800);for(var i=e.EXTENT/128,o=e.EXTENT+i/2,a=o+i,s=-i;s<a;s+=i)for(var u=-i;u<a;u+=i){var l=u<0||u>o||s<0||s>o?24575:0,c=e.clamp(Math.round(u),0,e.EXTENT),h=e.clamp(Math.round(s),0,e.EXTENT);n.emplaceBack(c+l,h,c,h)}for(var f=function(e,t){var n=131*t+e;r.emplaceBack(n+1,n,n+131),r.emplaceBack(n+131,n+131+1,n+1)},p=1;p<129;p++)for(var d=1;d<129;d++)f(d,p);return[0,129].forEach((function(e){for(var t=0;t<130;t++)f(t,e),f(e,t)})),[n,r,32768]}(),u=h(s,3),l=u[0],c=u[1],f=u[2],p=t.context;a.gridBuffer=p.createVertexBuffer(l,G.members),a.gridIndexBuffer=p.createIndexBuffer(c),a.gridSegments=e.SegmentVector.simpleSegment(0,0,l.length,c.length),a.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,l.length,f),a.proxyCoords=[],a.proxiedCoords={},a._visibleDemTiles=[],a._sourceTilesOverlap={},a.proxySourceCache=new nn(o.map),a.orthoMatrix=e.create(),e.ortho(a.orthoMatrix,0,e.EXTENT,0,e.EXTENT,0,1);var d=p.gl;return a._overlapStencilMode=new e.StencilMode({func:d.GEQUAL,mask:255},0,255,d.KEEP,d.KEEP,d.REPLACE),a._previousZoom=t.transform.zoom,a.pool=[],a._findCoveringTileCache={},a._tilesDirty={},a.style=o,o.on("data",a._onStyleDataEvent.bind(i(a))),a}return y(r,[{key:"update",value:function(t,n,r){var i=this;if(t&&t.terrain){this.style!==t&&(t.on("data",this._onStyleDataEvent.bind(this)),this.style=t),this.enabled=!0;var o=t.terrain.properties;this.sourceCache=t._getSourceCache(o.get("source")),this._exaggeration=o.get("exaggeration");var a=function(){i.sourceCache.used&&e.warnOnce("Raster DEM source '".concat(i.sourceCache.id,"' is used both for terrain and as layer source.\n")+"This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.");var t=i.sourceCache.getSource().tileSize/128,r=i.proxySourceCache.getSource().tileSize;i.sourceCache.update(n,t*r,!0),i._findCoveringTileCache[i.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,a(),this._initializing=!0),a(),n.updateElevation(!r),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(n),this._depthDone=!1,this._emptyDEMTextureDirty=!0}else this._disable()}},{key:"_onStyleDataEvent",value:function(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}},{key:"_disable",value:function(){if(this.enabled&&(this.enabled=!1,this.proxySourceCache.deallocRenderCache(),this.painter.style))for(var e in this.painter.style._sourceCaches)this.painter.style._sourceCaches[e].usedForTerrain=!1}},{key:"destroy",value:function(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach((function(e){return e.fb.destroy()})),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}},{key:"_source",value:function(){return this.enabled?this.sourceCache:null}},{key:"exaggeration",value:function(){return this._exaggeration}},{key:"updateTileBinding",value:function(t){var n=this;if(this.enabled){this.prevTerrainTileForTile=this.terrainTileForTile;var r=this.proxySourceCache,i=this.painter.transform;this._initializing&&(this._initializing=0===i._centerAltitude&&-1===this.getAtPoint(e.MercatorCoordinate.fromLngLat(i.center),-1),this._emptyDEMTextureDirty=!this._initializing);var o=this.painter.options;this.drapeFirst=(o.zooming||o.moving||o.rotating||!!this.forceDrapeFirst)&&!this._invalidateRenderCache,this._invalidateRenderCache=!1;var a=this.proxyCoords=r.getIds().map((function(e){var t=r.getTileByID(e).tileID;return t.posMatrix=i.calculatePosMatrix(t.toUnwrapped()),t}));!function(t,n){var r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new e.Point(r.x,r.y);t.sort((function(t,n){if(n.overscaledZ-t.overscaledZ)return n.overscaledZ-t.overscaledZ;var r=new e.Point(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),o=new e.Point(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),a=i.mult(1<<t.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(r)-a.distSqr(o)}))}(a,this.painter),this._previousZoom=i.zoom;var s=this.proxyToSource||{};this.proxyToSource={},a.forEach((function(e){n.proxyToSource[e.key]={}})),this.terrainTileForTile={};var u=this.painter.style._sourceCaches;for(var l in u){var c=u[l];if(c.used&&(c!==this.sourceCache&&(this._findCoveringTileCache[c.id]={}),this._setupProxiedCoordsForOrtho(c,t[l],s),!c.usedForTerrain)){var h=t[l];c.getSource().reparseOverscaled&&this._assignTerrainTiles(h)}}this.proxiedCoords[r.id]=a.map((function(e){return new rn(e,e.key,n.orthoMatrix)})),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupRenderCache(s),this.drapeFirstPending=this.drapeFirst,this.renderingToTexture=!1,this._initFBOPool(),this._updateTimestamp=e.browser.now();var p={};this._visibleDemTiles=[];var d,g=f(this.proxyCoords);try{for(g.s();!(d=g.n()).done;){var m=d.value,y=this.terrainTileForTile[m.key];if(y){var v=y.tileID.key;v in p||(this._visibleDemTiles.push(y),p[v]=v)}}}catch(_){g.e(_)}finally{g.f()}}}},{key:"_assignTerrainTiles",value:function(e){var t=this;this._initializing||e.forEach((function(e){if(!t.terrainTileForTile[e.key]){var n=t._findTileCoveringTileID(e,t.sourceCache);n&&(t.terrainTileForTile[e.key]=n)}}))}},{key:"_prepareDEMTextures",value:function(){var e=this.painter.context,t=e.gl;for(var n in this.terrainTileForTile){var r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),$t(this.painter,r,i))}}},{key:"_prepareDemTileUniforms",value:function(e,t,n,r){if(!t||null==t.demTexture)return!1;var i=e.tileID.canonical,o=Math.pow(2,t.tileID.canonical.z-i.z),a=r||"";return n["u_dem_tl".concat(a)]=[i.x*o%1,i.y*o%1],n["u_dem_scale".concat(a)]=o,!0}},{key:"_getLoadedAreaMinimum",value:function(){var e=0,t=this._visibleDemTiles.reduce((function(t,n){if(!n.dem)return t;var r=n.dem.tree.minimums[0];return r>0&&e++,t+r}),0);return e?t/e:0}},{key:"_updateEmptyDEMTexture",value:function(){var t=this.painter.context,n=t.gl;t.activeTexture.set(n.TEXTURE2);var r=this._getLoadedAreaMinimum(),i={width:1,height:1,data:new Uint8Array(e.DEMData.pack(r,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;var o=this._emptyDEMTexture;return o?o.update(i,{premultiply:!1}):o=this._emptyDEMTexture=new e.Texture(t,i,n.RGBA,{premultiply:!1}),o}},{key:"setupElevationDraw",value:function(t,n,r){var i,o=this.painter.context,a=o.gl,s=(i=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(i),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});s.u_dem_size=this.sourceCache.getSource().tileSize,s.u_exaggeration=this.exaggeration();var u=null,l=null,c=1;if(r&&r.morphing){var h=r.morphing.srcDemTile,f=r.morphing.dstDemTile;c=r.morphing.phase,h&&f&&(this._prepareDemTileUniforms(t,h,s,"_prev")&&(l=h),this._prepareDemTileUniforms(t,f,s)&&(u=f))}if(l&&u?(o.activeTexture.set(a.TEXTURE2),u.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),o.activeTexture.set(a.TEXTURE4),l.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),s.u_dem_lerp=c):(u=this.terrainTileForTile[t.tileID.key],o.activeTexture.set(a.TEXTURE2),(this._prepareDemTileUniforms(t,u,s)?u.demTexture:this.emptyDEMTexture).bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST)),r&&r.useDepthForOcclusion&&(o.activeTexture.set(a.TEXTURE3),this._depthTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),s.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),r&&r.useMeterToDem&&u){var p=(1<<u.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;s.u_meter_to_dem=p}r&&r.labelPlaneMatrixInv&&(s.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(o,s)}},{key:"renderLayer",value:function(e,t){return"translucent"!==this.painter.renderPass?(this._depthDone||"symbol"!==e.type&&"circle"!==e.type||this.drawDepth(),!0):this.drapeFirst&&this.drapeFirstPending?(this.render(),this.drapeFirstPending=!1,!0):!!this._isLayerDrapedOverTerrain(e)&&(this.drapeFirst&&!this.renderingToTexture||this.render(),!0)}},{key:"render",value:function(){var t=this;this.renderingToTexture=!0;for(var n=this.painter,r=this.painter.context,i=this.proxySourceCache,o=this.proxiedCoords[i.id],a=function(){r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),t.renderingToTexture=!1},s=n.currentLayer,u=s,l=[],c=n.style._order,h=0,f=0;f<o.length;f++){var p=o[f],d=i.getTileByID(p.proxyTileKey),g=i.proxyCachedFBO[p.key],m=this.currentFBO=void 0!==g?i.renderCache[g]:this.pool[h++];if(d.texture=m.tex,void 0===g||m.dirty){var y=void 0;for(r.bindFramebuffer.set(m.fb.framebuffer),this.renderedToTile=!1,m.dirty&&(r.clear({color:e.Color.transparent}),m.dirty=!1),n.currentLayer=s;n.currentLayer<c.length;n.currentLayer++){var v=n.style._layers[c[n.currentLayer]],_=v.isHidden(n.transform.zoom),b=this._isLayerDrapedOverTerrain(v);if(!this.drapeFirst||b){if(n.currentLayer>u){if(!_&&!b)break;u++}if(!_){var x=this.painter.style._getLayerSourceCache(v),w=x?this.proxyToSource[p.key][x.id]:[p];if(w){var E=w;r.viewport.set([0,0,m.fb.width,m.fb.height]),y!==(x?x.id:null)&&(this._setupStencil(w,v,x),y=x?x.id:null),n.renderLayer(n,x,v,E)}}}}m.dirty=this.renderedToTile,this.renderedToTile&&l.push(d.tileID),5===h&&(h=0,l.length>0&&(a(),Jt(n,this,i,l,this._updateTimestamp),this.renderingToTexture=!0,l=[]))}else l.push(d.tileID)}a(),l.length>0&&Jt(n,this,i,l,this._updateTimestamp),n.currentLayer=this.drapeFirst?-1:u}},{key:"raycast",value:function(e,t,n){if(!this._visibleDemTiles)return null;var r=this._visibleDemTiles.filter((function(e){return e.dem})).map((function(r){var i=r.tileID,o=Math.pow(2,i.overscaledZ),a=i.canonical,s=a.x,u=a.y,l=s/o,c=(s+1)/o,h=u/o,f=(u+1)/o;return{minx:l,miny:h,maxx:c,maxy:f,t:r.dem.tree.raycastRoot(l,h,c,f,e,t,n),tile:r}}));r.sort((function(e,t){return(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)}));var i,o=f(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(null==a.t)return null;var s=a.tile.dem.tree.raycast(a.minx,a.miny,a.maxx,a.maxy,e,t,n);if(null!=s)return s}}catch(u){o.e(u)}finally{o.f()}return null}},{key:"_createFBO",value:function(){var t=this.painter.context,n=t.gl,r=this.drapeBufferSize;t.activeTexture.set(n.TEXTURE0);var i=new e.Texture(t,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);var o=t.createFramebuffer(r[0],r[1],!1);return o.colorAttachment.set(i.texture),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:o,tex:i,dirty:!1,ref:1}}},{key:"_initFBOPool",value:function(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}},{key:"_shouldDisableRenderCache",value:function(){var e=this;return!this.drapeFirst||this.painter.style._order.some((function(t){var n=e.painter.style._layers[t],r=!n.isHidden(e.painter.transform.zoom),i=n.getCrossfadeParameters();return"custom"!==n.type&&!r&&!!i&&1!==i.t}))}},{key:"_clearRasterFadeFromRenderCache",value:function(){for(var e in this.painter.style._sourceCaches)if(!(this.painter.style._sourceCaches[e]._source instanceof q))return;for(var t=0;t<this.painter.style._order.length;++t){var n=this.painter.style._layers[this.painter.style._order[t]],r=n.isHidden(this.painter.transform.zoom),i=this.painter.style._getLayerSourceCache(n);if("raster"===n.type&&!r&&i){var o,a=n.paint.get("raster-fade-duration"),s=f(this.proxyCoords);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=this.proxyToSource[u.key][i.id];if(l){var c,h=f(l);try{for(h.s();!(c=h.n()).done;){var p=c.value,d=en(i.getTile(p),i.findLoadedParent(p,0),i,this.painter.transform,a);(1!==d.opacity||0!==d.mix)&&this._clearRenderCacheForTile(i.id,p)}}catch(g){h.e(g)}finally{h.f()}}}}catch(g){s.e(g)}finally{s.f()}}}}},{key:"_setupRenderCache",value:function(e){var t=this.proxySourceCache;if(this._shouldDisableRenderCache()){if(t.renderCache.length>t.renderCachePool.length){var n=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={},t.renderCachePool=t.renderCachePool.concat(n)}}else{this._clearRasterFadeFromRenderCache();for(var r=this.proxyCoords,i=this._tilesDirty,o=r.length-1;o>=0;o--){var a=r[o];if(t.getTileByID(a.key),void 0!==t.proxyCachedFBO[a.key]){var s=e[a.key],u=this.proxyToSource[a.key],l=0,c=function(e){var t=u[e],n=s[e];if(!n||n.length!==t.length||t.some((function(t,r){return t!==n[r]||i[e]&&i[e].hasOwnProperty(t.key)})))return l=-1,"break";++l};for(var h in u)if("break"===c(h))break;t.renderCache[t.proxyCachedFBO[a.key]].dirty=l<0||l!==Object.values(s).length}else{var f=t.renderCachePool.pop();void 0===f&&t.renderCache.length<50&&(f=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==f&&(t.proxyCachedFBO[a.key]=f,t.renderCache[f].dirty=!0)}}this._tilesDirty={}}}},{key:"_setupStencil",value:function(t,n,r){if(r&&this._sourceTilesOverlap[r.id]){var i=this.painter.context,o=i.gl;if(t.length<=1)this._overlapStencilType=!1;else{var a,s=this.currentFBO,u=s.fb;if(n.isTileClipped())a=t.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}if(!u.depthAttachment){var l=i.createRenderbuffer(i.gl.DEPTH_STENCIL,u.width,u.height);u.depthAttachment=new e.DepthStencilAttachment(i,u.framebuffer),u.depthAttachment.set(l),i.clear({stencil:0})}s.ref+a>255&&(i.clear({stencil:0}),s.ref=0),s.ref+=a,this._overlapStencilMode.ref=s.ref,n.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}}else this._overlapStencilType&&(this._overlapStencilType=!1)}},{key:"stencilModeForRTTOverlap",value:function(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}},{key:"_renderTileClippingMasks",value:function(t,n){var r=this.painter,i=this.painter.context,o=i.gl;r._tileClippingMaskIDs={},i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);var a,s=r.useProgram("clippingMask"),u=f(t);try{for(u.s();!(a=u.n()).done;){var l=a.value,c=r._tileClippingMaskIDs[l.key]=--n;s.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},c,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Qt(l.posMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}catch(h){u.e(h)}finally{u.f()}}},{key:"pointCoordinate",value:function(t){var n=this.painter.transform;if(t.x<0||t.x>n.width||t.y<0||t.y>n.height)return null;var r=[t.x,t.y,1,1];e.transformMat4(r,r,n.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;var i=n._camera.position,o=e.mercatorZfromAltitude(1,n.center.lat),a=[i[0],i[1],i[2]/o,0],s=e.subtract([],r.slice(0,3),a);e.normalize(s,s);var u=this.raycast(a,s,this._exaggeration);return null!==u&&u?(e.scaleAndAdd(a,a,s,u),a[3]=a[2],a[2]*=o,a):null}},{key:"drawDepth",value:function(){var t=this.painter,n=t.context,r=this.proxySourceCache,i=Math.ceil(t.width),o=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===o||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){var a=n.gl,s=n.createFramebuffer(i,o,!0);n.activeTexture.set(a.TEXTURE0);var u=new e.Texture(n,{width:i,height:o,data:null},a.RGBA);u.bind(a.NEAREST,a.CLAMP_TO_EDGE),s.colorAttachment.set(u.texture);var l=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,o);s.depthAttachment.set(l),this._depthFBO=s,this._depthTexture=u}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,o]),function(t,n,r,i){var o=t.context,a=o.gl;o.clear({depth:1});var s,u=t.useProgram("terrainDepth"),l=new e.DepthMode(a.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D),c=f(i);try{for(c.s();!(s=c.n()).done;){var h=s.value,p=r.getTile(h),d=Wt(h.posMatrix,0);n.setupElevationDraw(p,u),u.draw(o,a.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,d,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}catch(g){c.e(g)}finally{c.f()}}(t,this,r,this.proxyCoords),n.bindFramebuffer.set(null),n.viewport.set([0,0,t.width,t.height]),this._depthDone=!0}},{key:"_isLayerDrapedOverTerrain",value:function(e){return!!this.enabled&&tn.hasOwnProperty(e.type)}},{key:"_setupProxiedCoordsForOrtho",value:function(e,t,n){if(e.getSource()instanceof $)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};for(var r=this.proxiedCoords[e.id]=[],i=this.proxyCoords,o=0;o<i.length;o++){var a=i[o],s=this._findTileCoveringTileID(a,e);if(s){var u=this._createProxiedId(a,s,n[a.key]&&n[a.key][e.id]);r.push(u),this.proxyToSource[a.key][e.id]=[u]}}for(var l=!1,c=0;c<t.length;c++){var h=e.getTile(t[c]);if(h&&h.hasData()){var f=this._findTileCoveringTileID(h.tileID,this.proxySourceCache);if(f&&f.tileID.canonical.z!==h.tileID.canonical.z){var p=this.proxyToSource[f.tileID.key][e.id],d=this._createProxiedId(f.tileID,h,n[f.tileID.key]&&n[f.tileID.key][e.id]);p?p.splice(p.length-1,0,d):this.proxyToSource[f.tileID.key][e.id]=[d],r.push(d),l=!0}}}this._sourceTilesOverlap[e.id]=l}},{key:"_setupProxiedCoordsForImageSource",value:function(t,n,r){if(t.getSource().loaded())for(var i=this.proxiedCoords[t.id]=[],o=this.proxyCoords,a=t.getSource(),s=new e.Point(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),u=a.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce((function(e,t){return e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e}),{min:new e.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),l=function(t,n){var r=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),o=e.EXTENT/(1<<t.canonical.z),a=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return r+o<a+u.min.x||r>a+u.max.x||i+o<s+u.min.y||i>s+u.max.y},c=0;c<o.length;c++)for(var h=o[c],f=0;f<n.length;f++){var p=t.getTile(n[f]);if(p&&p.hasData()&&!l(h,p.tileID)){var d=this._createProxiedId(h,p,r[h.key]&&r[h.key][t.id]),g=this.proxyToSource[h.key][t.id];g?g.push(d):this.proxyToSource[h.key][t.id]=[d],i.push(d)}}}},{key:"_createProxiedId",value:function(t,n,r){var i=this.orthoMatrix;if(r){var o=r.find((function(e){return e.key===n.tileID.key}));if(o)return o}if(n.tileID.key!==t.key){var a,s,u,l=t.canonical.z-n.tileID.canonical.z;i=e.create();var c=n.tileID.wrap-t.wrap<<t.overscaledZ;l>0?(s=(a=e.EXTENT>>l)*((n.tileID.canonical.x<<l)-t.canonical.x+c),u=a*((n.tileID.canonical.y<<l)-t.canonical.y)):(a=e.EXTENT<<-l,s=e.EXTENT*(n.tileID.canonical.x-(t.canonical.x+c<<-l)),u=e.EXTENT*(n.tileID.canonical.y-(t.canonical.y<<-l))),e.ortho(i,0,a,0,a,0,1),e.translate(i,i,[s,u,0])}return new rn(n.tileID,t.key,i)}},{key:"_findTileCoveringTileID",value:function(t,n){var r=n.getTile(t);if(r&&r.hasData())return r;var i=this._findCoveringTileCache[n.id],o=i[t.key];if((r=o?n.getTileByID(o):null)&&r.hasData()||null===o)return r;var a=r?r.tileID:t,s=a.overscaledZ,u=n.getSource().minzoom,l=[];if(!o){var c=n.getSource().maxzoom;if(t.canonical.z>=c){var h=t.canonical.z-c;n.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,n.transform.tileZoom),a=new e.OverscaledTileID(s,t.wrap,c,t.canonical.x>>h,t.canonical.y>>h)):0!==h&&(s=c,a=new e.OverscaledTileID(s,t.wrap,c,t.canonical.x>>h,t.canonical.y>>h))}a.key!==t.key&&(l.push(a.key),r=n.getTile(a))}var f=function(e){l.forEach((function(t){i[t]=e})),l.length=0};for(s-=1;s>=u&&(!r||!r.hasData());s--){r&&f(r.tileID.key);var p=a.calculateScaledKey(s);if((r=n.getTileByID(p))&&r.hasData())break;var d=i[p];if(null===d)break;void 0===d?l.push(p):r=n.getTileByID(d)}return f(r?r.tileID.key:null),r&&r.hasData()?r:null}},{key:"findDEMTileFor",value:function(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}},{key:"prepareDrawTile",value:function(e){this.renderedToTile||(this.renderedToTile=!0)}},{key:"_clearRenderCacheForTile",value:function(e,t){var n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}},{key:"visibleDemTiles",get:function(){return this._visibleDemTiles}},{key:"drapeBufferSize",get:function(){var e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}},{key:"emptyDEMTexture",get:function(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}}]),r}(e.Elevation);function an(e){for(var t=[],n=0;n<e.length;n++)if(null!==e[n]){var r=e[n].split(" ");t.push(r.pop())}return t}var sn=function(){function t(n,r,i,o,a,s){m(this,t);var u=n.gl;this.program=u.createProgram();var l,c=an(i.staticAttributes),h=o?o.getBinderAttributes():[],p=c.concat(h),d=i.staticUniforms?an(i.staticUniforms):[],g=o?o.getBinderUniforms():[],y=d.concat(g),v=[],_=f(y);try{for(_.s();!(l=_.n()).done;){var b=l.value;v.indexOf(b)<0&&v.push(b)}}catch(L){_.e(L)}finally{_.f()}var x=o?o.defines():[],w=(x=x.concat(s.map((function(e){return"#define ".concat(e)})))).concat(lt.fragmentSource,i.fragmentSource).join("\n"),E=x.concat(lt.vertexSource,ut.vertexSource,i.vertexSource).join("\n"),S=u.createShader(u.FRAGMENT_SHADER);if(u.isContextLost())this.failedToCreate=!0;else{u.shaderSource(S,w),u.compileShader(S),u.attachShader(this.program,S);var T=u.createShader(u.VERTEX_SHADER);if(u.isContextLost())this.failedToCreate=!0;else{u.shaderSource(T,E),u.compileShader(T),u.attachShader(this.program,T),this.attributes={};var k={};this.numAttributes=p.length;for(var C=0;C<this.numAttributes;C++)p[C]&&(u.bindAttribLocation(this.program,C,p[C]),this.attributes[p[C]]=C);u.linkProgram(this.program),u.deleteShader(T),u.deleteShader(S);for(var I=0;I<v.length;I++){var A=v[I];if(A&&!k[A]){var M=u.getUniformLocation(this.program,A);M&&(k[A]=M)}}this.fixedUniforms=a(n,k),this.binderUniforms=o?o.getUniforms(n,k):[],-1!==s.indexOf("TERRAIN")&&(this.terrainUniforms=function(t,n){return{u_dem:new e.Uniform1i(t,n.u_dem),u_dem_prev:new e.Uniform1i(t,n.u_dem_prev),u_dem_unpack:new e.Uniform4f(t,n.u_dem_unpack),u_dem_tl:new e.Uniform2f(t,n.u_dem_tl),u_dem_scale:new e.Uniform1f(t,n.u_dem_scale),u_dem_tl_prev:new e.Uniform2f(t,n.u_dem_tl_prev),u_dem_scale_prev:new e.Uniform1f(t,n.u_dem_scale_prev),u_dem_size:new e.Uniform1f(t,n.u_dem_size),u_dem_lerp:new e.Uniform1f(t,n.u_dem_lerp),u_exaggeration:new e.Uniform1f(t,n.u_exaggeration),u_depth:new e.Uniform1i(t,n.u_depth),u_depth_size_inv:new e.Uniform2f(t,n.u_depth_size_inv),u_meter_to_dem:new e.Uniform1f(t,n.u_meter_to_dem),u_label_plane_matrix_inv:new e.UniformMatrix4f(t,n.u_label_plane_matrix_inv)}}(n,k))}}}return y(t,null,[{key:"cacheKey",value:function(e,t,n){var r,i="".concat(e).concat(n?n.cacheKey:""),o=f(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;i+="/".concat(a)}}catch(s){o.e(s)}finally{o.f()}return i}}]),y(t,[{key:"setTerrainUniformValues",value:function(e,t){if(this.terrainUniforms){var n=this.terrainUniforms;if(!this.failedToCreate)for(var r in e.program.set(this.program),t)n[r].set(t[r])}}},{key:"draw",value:function(e,t,n,i,o,a,s,u,l,c,h,p,d,g,m,y){var v,_=e.gl;if(!this.failedToCreate){for(var b in e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(i),e.setColorMode(o),e.setCullFace(a),this.fixedUniforms)this.fixedUniforms[b].set(s[b]);g&&g.setUniforms(e,this.binderUniforms,p,{zoom:d});var x,w=(v={},r(v,_.LINES,2),r(v,_.TRIANGLES,3),r(v,_.LINE_STRIP,1),v)[t],E=f(h.get());try{for(E.s();!(x=E.n()).done;){var S=x.value,T=S.vaos||(S.vaos={});(T[u]||(T[u]=new jt)).bind(e,this,l,g?g.getPaintVertexBuffers():[],c,S.vertexOffset,m,y),_.drawElements(t,S.primitiveLength*w,_.UNSIGNED_SHORT,S.primitiveOffset*w*2)}}catch(k){E.e(k)}finally{E.f()}}}}]),t}();function un(e,t,n){var r=1/z(n,1,t.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,t.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}var ln=function(t,n,r,i){var o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],u=e.create$1();"viewport"===o.properties.get("anchor")&&(e.fromRotation(u,-n.transform.angle),e.transformMat3(s,s,u));var l=o.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+r,u_opacity:i}},cn=function(t,n,r,i,o,a,s){return e.extend(ln(t,n,r,i),un(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},hn=function(e){return{u_matrix:e}},fn=function(t,n,r,i){return e.extend(hn(t),un(r,n,i))},pn=function(e,t){return{u_matrix:e,u_world:t}},dn=function(t,n,r,i,o){return e.extend(fn(t,n,r,i),{u_world:o})},gn=function(t,n,r,i){var o,a=t.transform;if("map"===i.paint.get("circle-pitch-alignment")){var s=z(r,1,a.zoom);o=[s,s]}else o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_matrix:t.translatePosMatrix(n.posMatrix,r,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:o}},mn=function(e){var t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},yn=function(t,n,r){var i=e.EXTENT/r.tileSize;return{u_matrix:t,u_camera_to_center_distance:n.cameraToCenterDistance,u_extrude_scale:[n.pixelsToGLUnits[0]/i,n.pixelsToGLUnits[1]/i]}},vn=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},_n=function(e,t,n,r){return{u_matrix:e,u_extrude_scale:z(t,1,n),u_intensity:r}},bn=function(t,n,r,i){var o=t.transform;return{u_matrix:Tn(t,n,r,i),u_ratio:1/z(n,1,o.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},xn=function(t,n,r,i,o){return e.extend(bn(t,n,r,i),{u_image:0,u_image_height:o})},wn=function(t,n,r,i,o){var a=t.transform,s=Sn(n,a);return{u_matrix:Tn(t,n,r,o),u_texsize:n.imageAtlasTexture.size,u_ratio:1/z(n,1,a.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[s,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},En=function(t,n,r,i,o,a){var s=t.lineAtlas,u=Sn(n,t.transform),l="round"===r.layout.get("line-cap"),c=s.getDash(i.from,l),h=s.getDash(i.to,l),f=c.width*o.fromScale,p=h.width*o.toScale;return e.extend(bn(t,n,r,a),{u_patternscale_a:[u/f,-c.height/2],u_patternscale_b:[u/p,-h.height/2],u_sdfgamma:s.width/(256*Math.min(f,p)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:h.y,u_mix:o.t})};function Sn(e,t){return 1/z(e,1,t.tileZoom)}function Tn(e,t,n,r){return e.translatePosMatrix(r||t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var kn=function(e,t,n,r,i){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Cn(i.paint.get("raster-hue-rotate"))};var o,a};function Cn(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}var In,An=function(e,t,n,r,i,o,a,s,u,l){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:l,u_texture:0}},Mn=function(t,n,r,i,o,a,s,u,l,c,h){var f=o.transform;return e.extend(An(t,n,r,i,o,a,s,u,l,c),{u_gamma_scale:i?Math.cos(f._pitch)*f.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+h})},Ln=function(t,n,r,i,o,a,s,u,l,c){return e.extend(Mn(t,n,r,i,o,a,s,u,!0,l,!0),{u_texsize_icon:c,u_texture_icon:1})},Nn=function(e,t,n){return{u_matrix:e,u_opacity:t,u_color:n}},Pn=function(t,n,r,i,o,a){return e.extend(function(e,t,n,r){var i=n.imageManager.getPattern(e.from.toString()),o=n.imageManager.getPattern(e.to.toString()),a=n.imageManager.getPixelSize(),s=a.width,u=a.height,l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,h=c*(r.tileID.canonical.x+r.tileID.wrap*l),f=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/z(r,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,f>>16],u_pixel_coord_lower:[65535&h,65535&f]}}(i,a,r,o),{u_matrix:t,u_opacity:n})},On={fillExtrusion:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_opacity:new e.Uniform1f(t,n.u_opacity)}},fillExtrusionPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,n.u_height_factor),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade),u_opacity:new e.Uniform1f(t,n.u_opacity)}},fill:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},fillPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},fillOutline:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world)}},fillOutlinePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},circle:function(t,n){return{u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},collisionBox:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale)}},collisionCircle:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,n.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,n.u_viewport_size)}},debug:function(t,n){return{u_color:new e.UniformColor(t,n.u_color),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_overlay:new e.Uniform1i(t,n.u_overlay),u_overlay_scale:new e.Uniform1f(t,n.u_overlay_scale)}},clippingMask:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},heatmap:function(t,n){return{u_extrude_scale:new e.Uniform1f(t,n.u_extrude_scale),u_intensity:new e.Uniform1f(t,n.u_intensity),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},heatmapTexture:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_opacity:new e.Uniform1f(t,n.u_opacity)}},hillshade:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_latrange:new e.Uniform2f(t,n.u_latrange),u_light:new e.Uniform2f(t,n.u_light),u_shadow:new e.UniformColor(t,n.u_shadow),u_highlight:new e.UniformColor(t,n.u_highlight),u_accent:new e.UniformColor(t,n.u_accent)}},hillshadePrepare:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_dimension:new e.Uniform2f(t,n.u_dimension),u_zoom:new e.Uniform1f(t,n.u_zoom),u_unpack:new e.Uniform4f(t,n.u_unpack)}},line:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels)}},lineGradient:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_image:new e.Uniform1i(t,n.u_image),u_image_height:new e.Uniform1f(t,n.u_image_height)}},linePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_texsize:new e.Uniform2f(t,n.u_texsize),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_image:new e.Uniform1i(t,n.u_image),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},lineSDF:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,n.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,n.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,n.u_sdfgamma),u_image:new e.Uniform1i(t,n.u_image),u_tex_y_a:new e.Uniform1f(t,n.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,n.u_tex_y_b),u_mix:new e.Uniform1f(t,n.u_mix)}},raster:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_tl_parent:new e.Uniform2f(t,n.u_tl_parent),u_scale_parent:new e.Uniform1f(t,n.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,n.u_buffer_scale),u_fade_t:new e.Uniform1f(t,n.u_fade_t),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image0:new e.Uniform1i(t,n.u_image0),u_image1:new e.Uniform1i(t,n.u_image1),u_brightness_low:new e.Uniform1f(t,n.u_brightness_low),u_brightness_high:new e.Uniform1f(t,n.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,n.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,n.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,n.u_spin_weights)}},symbolIcon:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture)}},symbolSDF:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}},symbolTextAndIcon:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texsize_icon:new e.Uniform2f(t,n.u_texsize_icon),u_texture:new e.Uniform1i(t,n.u_texture),u_texture_icon:new e.Uniform1i(t,n.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}},background:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_color:new e.UniformColor(t,n.u_color)}},backgroundPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image:new e.Uniform1i(t,n.u_image),u_pattern_tl_a:new e.Uniform2f(t,n.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,n.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,n.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,n.u_pattern_br_b),u_texsize:new e.Uniform2f(t,n.u_texsize),u_mix:new e.Uniform1f(t,n.u_mix),u_pattern_size_a:new e.Uniform2f(t,n.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,n.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,n.u_scale_a),u_scale_b:new e.Uniform1f(t,n.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,n.u_tile_units_to_pixels)}},terrainRaster:Xt,terrainDepth:Xt,skybox:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_sun_direction:new e.Uniform3f(t,n.u_sun_direction),u_cubemap:new e.Uniform1i(t,n.u_cubemap),u_opacity:new e.Uniform1f(t,n.u_opacity),u_temporal_offset:new e.Uniform1f(t,n.u_temporal_offset)}},skyboxGradient:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_center_direction:new e.Uniform3f(t,n.u_center_direction),u_radius:new e.Uniform1f(t,n.u_radius),u_opacity:new e.Uniform1f(t,n.u_opacity),u_temporal_offset:new e.Uniform1f(t,n.u_temporal_offset)}},skyboxCapture:function(t,n){return{u_matrix_3f:new e.UniformMatrix3f(t,n.u_matrix_3f),u_sun_direction:new e.Uniform3f(t,n.u_sun_direction),u_sun_intensity:new e.Uniform1f(t,n.u_sun_intensity),u_color_tint_r:new e.Uniform4f(t,n.u_color_tint_r),u_color_tint_m:new e.Uniform4f(t,n.u_color_tint_m),u_luminance:new e.Uniform1f(t,n.u_luminance)}}};function Rn(t,n,r,i,o,a,s){for(var u=t.context,l=u.gl,c=t.useProgram("collisionBox"),h=[],f=0,p=0,d=0;d<i.length;d++){var g=i[d],m=n.getTile(g),y=m.getBucket(r);if(y){var v=g.posMatrix;0===o[0]&&0===o[1]||(v=t.translatePosMatrix(g.posMatrix,m,o,a));var _=s?y.textCollisionBox:y.iconCollisionBox,b=y.collisionCircleArray;if(b.length>0){var x=e.create(),w=v;e.mul(x,y.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(x,x,y.placementViewportMatrix),h.push({circleArray:b,circleOffset:p,transform:w,invTransform:x}),p=f+=b.length/4}_&&(t.terrain&&t.terrain.setupElevationDraw(m,c),c.draw(u,l.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,yn(v,t.transform,m),r.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,t.transform.zoom,null,_.collisionVertexBuffer,_.collisionVertexBufferExt))}}if(s&&h.length){var E=t.useProgram("collisionCircle"),S=new e.StructArrayLayout2f1f2i16;S.resize(4*f),S._trim();for(var T=0,k=0,C=h;k<C.length;k++)for(var I=C[k],A=0;A<I.circleArray.length/4;A++){var M=4*A,L=I.circleArray[M+0],N=I.circleArray[M+1],P=I.circleArray[M+2],O=I.circleArray[M+3];S.emplace(T++,L,N,P,O,0),S.emplace(T++,L,N,P,O,1),S.emplace(T++,L,N,P,O,2),S.emplace(T++,L,N,P,O,3)}(!In||In.length<2*f)&&(In=function(t){var n=2*t,r=new e.StructArrayLayout3ui6;r.resize(n),r._trim();for(var i=0;i<n;i++){var o=6*i;r.uint16[o+0]=4*i+0,r.uint16[o+1]=4*i+1,r.uint16[o+2]=4*i+2,r.uint16[o+3]=4*i+2,r.uint16[o+4]=4*i+3,r.uint16[o+5]=4*i+0}return r}(f));for(var R,D=u.createIndexBuffer(In,!0),F=u.createVertexBuffer(S,e.collisionCircleLayout.members,!0),z=0,B=h;z<B.length;z++){var U=B[z],V={u_matrix:U.transform,u_inv_matrix:U.invTransform,u_camera_to_center_distance:(R=t.transform).cameraToCenterDistance,u_viewport_size:[R.width,R.height]};E.draw(u,l.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,V,r.id,F,D,e.SegmentVector.simpleSegment(0,2*U.circleOffset,U.circleArray.length,U.circleArray.length/2),null,t.transform.zoom,null,null,null)}F.destroy(),D.destroy()}}var Dn=e.identity(new Float32Array(16));function Fn(t,n,r,i,o,a){var s=e.getAnchorAlignment(t),u=-(s.horizontalAlign-.5)*n,l=-(s.verticalAlign-.5)*r,c=e.evaluateVariableOffset(t,i);return new e.Point((u/o+c[0])*a,(l/o+c[1])*a)}function zn(t,n,r,i,o,a,s,u,l,c,h,f){var p=t.text.placedSymbolArray,d=t.text.dynamicLayoutVertexArray,g=t.icon.dynamicLayoutVertexArray,m={};d.clear();for(var y=0;y<p.length;y++){var v=p.get(y),_=t.allowVerticalPlacement&&!v.placedOrientation,b=v.hidden||!v.crossTileID||_?null:i[v.crossTileID];if(b){var x=new e.Point(v.anchorX,v.anchorY),w=f(x),E=ye(x,r?u:s,w),S=ve(a.cameraToCenterDistance,E.signedDistanceFromCamera),T=o.evaluateSizeForFeature(t.textSizeData,c,v)*S/e.ONE_EM;r&&(T*=t.tilePixelRatio/l);for(var k=b.width,C=b.height,I=Fn(b.anchor,k,C,b.textOffset,b.textBoxScale,T),A=r?ye(x.add(I),s,w).point:E.point.add(n?I.rotate(-a.angle):I),M=t.allowVerticalPlacement&&v.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,L=0;L<v.numGlyphs;L++)e.addDynamicAttributes(d,A,M);h&&v.associatedIconIndex>=0&&(m[v.associatedIconIndex]={shiftedAnchor:A,angle:M})}else Ce(v.numGlyphs,d)}if(h){g.clear();for(var N=t.icon.placedSymbolArray,P=0;P<N.length;P++){var O=N.get(P);if(O.hidden)Ce(O.numGlyphs,g);else{var R=m[P];if(R)for(var D=0;D<O.numGlyphs;D++)e.addDynamicAttributes(g,R.shiftedAnchor,R.angle);else Ce(O.numGlyphs,g)}}t.icon.dynamicLayoutVertexBuffer.updateData(g)}t.text.dynamicLayoutVertexBuffer.updateData(d)}function Bn(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function Un(t,n,r,i,o,a,s,u,l,c,h,p){var d,g=t.context,m=g.gl,y=t.transform,v="map"===u,_="map"===l,b=v&&"point"!==r.layout.get("symbol-placement"),x=v&&!_&&!b,w=void 0!==r.layout.get("symbol-sort-key").constantOr(1),E=!1,S=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),T=r.layout.get("text-variable-anchor"),k=[],C=t.terrain&&_?["PITCH_WITH_MAP_TERRAIN"]:null,I=f(i);try{var A=function(){var i=d.value,u=n.getTile(i),l=u.getBucket(r);if(!l)return"continue";var h=o?l.text:l.icon;if(!h||!h.segments.get().length)return"continue";var p=h.programConfigurations.get(r.id),g=o||l.sdfIcons,S=o?l.textSizeData:l.iconSizeData,I=_||0!==y.pitch,A=t.useProgram(Bn(g,o,l),p,C),M=e.evaluateSizeForZoom(S,y.zoom),L=void 0,N=void 0,P=void 0,O=void 0,R=[0,0],D=null;if(o){if(N=u.glyphAtlasTexture,P=m.LINEAR,L=u.glyphAtlasTexture.size,l.iconsInText){R=u.imageAtlasTexture.size,D=u.imageAtlasTexture;var F="composite"===S.kind||"camera"===S.kind;O=I||t.options.rotating||t.options.zooming||F?m.LINEAR:m.NEAREST}}else{var B=1!==r.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;N=u.imageAtlasTexture,P=g||t.options.rotating||t.options.zooming||B||I?m.LINEAR:m.NEAREST,L=u.imageAtlasTexture.size}var U=z(u,1,t.transform.zoom),V=ge(i.posMatrix,_,v,t.transform,U),j=t.terrain&&_&&b?e.invert(new Float32Array(16),V):Dn,q=me(i.posMatrix,_,v,t.transform,U),G=T&&l.hasTextData(),$="none"!==r.layout.get("icon-text-fit")&&G&&l.hasIconData();if(b){var H=y.elevation;be(l,i.posMatrix,t,o,V,q,_,c,H?function(e){return H.getAtTileOffset(i,e.x,e.y)}:null)}var X=t.translatePosMatrix(i.posMatrix,u,a,s),W=b||o&&T||$?Dn:V,Y=t.translatePosMatrix(q,u,a,s,!0),Z=g&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),J={program:A,buffers:h,uniformValues:g?l.iconsInText?Ln(S.kind,M,x,_,t,X,W,Y,L,R):Mn(S.kind,M,x,_,t,X,W,Y,o,L,!0):An(S.kind,M,x,_,t,X,W,Y,o,L),atlasTexture:N,atlasTextureIcon:D,atlasInterpolation:P,atlasInterpolationIcon:O,isSDF:g,hasHalo:Z,tile:u,labelPlaneMatrixInv:j};if(w&&l.canOverlap){E=!0;var K,Q=h.segments.get(),ee=f(Q);try{for(ee.s();!(K=ee.n()).done;){var te=K.value;k.push({segments:new e.SegmentVector([te]),sortKey:te.sortKey,state:J})}}catch(ne){ee.e(ne)}finally{ee.f()}}else k.push({segments:h.segments,sortKey:0,state:J})};for(I.s();!(d=I.n()).done;)A()}catch(R){I.e(R)}finally{I.f()}E&&k.sort((function(e,t){return e.sortKey-t.sortKey}));for(var M=0,L=k;M<L.length;M++){var N=L[M],P=N.state;if(t.terrain&&t.terrain.setupElevationDraw(P.tile,P.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:P.labelPlaneMatrixInv}),g.activeTexture.set(m.TEXTURE0),P.atlasTexture.bind(P.atlasInterpolation,m.CLAMP_TO_EDGE),P.atlasTextureIcon&&(g.activeTexture.set(m.TEXTURE1),P.atlasTextureIcon&&P.atlasTextureIcon.bind(P.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),P.isSDF){var O=P.uniformValues;P.hasHalo&&(O.u_is_halo=1,Vn(P.buffers,N.segments,r,t,P.program,S,h,p,O)),O.u_is_halo=0}Vn(P.buffers,N.segments,r,t,P.program,S,h,p,P.uniformValues)}}function Vn(t,n,r,i,o,a,s,u,l){var c=i.context;o.draw(c,c.gl.TRIANGLES,a,s,u,e.CullFaceMode.disabled,l,r.id,t.layoutVertexBuffer,t.indexBuffer,n,r.paint,i.transform.zoom,t.programConfigurations.get(r.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function jn(t,n,r,i,o,a,s){var u,l,c,h,p,d=t.context.gl,g=r.paint.get("fill-pattern"),m=g&&g.constantOr(1),y=r.getCrossfadeParameters();s?(l=m&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",u=d.LINES):(l=m?"fillPattern":"fill",u=d.TRIANGLES);var v,_=f(i);try{for(_.s();!(v=_.n()).done;){var b=v.value,x=n.getTile(b);if(!m||x.patternsLoaded()){var w=x.getBucket(r);if(w){t.prepareDrawTile(b);var E=w.programConfigurations.get(r.id),S=t.useProgram(l,E);m&&(t.context.activeTexture.set(d.TEXTURE0),x.imageAtlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),E.updatePaintBuffers(y));var T=g.constantOr(null);if(T&&x.imageAtlas){var k=x.imageAtlas,C=k.patternPositions[T.to.toString()],I=k.patternPositions[T.from.toString()];C&&I&&E.setConstantPatternPositions(C,I)}var A=t.translatePosMatrix(b.posMatrix,x,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(s){h=w.indexBuffer2,p=w.segments2;var M=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[d.drawingBufferWidth,d.drawingBufferHeight];c="fillOutlinePattern"===l&&m?dn(A,t,y,x,M):pn(A,M)}else h=w.indexBuffer,p=w.segments,c=m?fn(A,t,y,x):hn(A);S.draw(t.context,u,o,t.stencilModeForClipping(b),a,e.CullFaceMode.disabled,c,r.id,w.layoutVertexBuffer,h,p,r.paint,t.transform.zoom,E)}}}}catch(L){_.e(L)}finally{_.f()}}function qn(t,n,r,i,o,a,s){var u,l=t.context,c=l.gl,h=r.paint.get("fill-extrusion-pattern"),p=h.constantOr(1),d=r.getCrossfadeParameters(),g=r.paint.get("fill-extrusion-opacity"),m=f(i);try{for(m.s();!(u=m.n()).done;){var y=u.value,v=n.getTile(y),_=v.getBucket(r);if(_){var b=_.programConfigurations.get(r.id),x=t.useProgram(p?"fillExtrusionPattern":"fillExtrusion",b);if(t.terrain){var w=t.terrain;if(!_.enableTerrain)continue;if(w.setupElevationDraw(v,x,{useMeterToDem:!0}),Gn(l,n,y,_,r,w),!_.centroidVertexBuffer){var E=x.attributes.a_centroid_pos;void 0!==E&&c.vertexAttrib2f(E,0,0)}}p&&(t.context.activeTexture.set(c.TEXTURE0),v.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),b.updatePaintBuffers(d));var S=h.constantOr(null);if(S&&v.imageAtlas){var T=v.imageAtlas,k=T.patternPositions[S.to.toString()],C=T.patternPositions[S.from.toString()];k&&C&&b.setConstantPatternPositions(k,C)}var I=t.translatePosMatrix(y.posMatrix,v,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),A=r.paint.get("fill-extrusion-vertical-gradient"),M=p?cn(I,t,A,g,y,d,v):ln(I,t,A,g);x.draw(l,l.gl.TRIANGLES,o,a,s,e.CullFaceMode.backCCW,M,r.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,r.paint,t.transform.zoom,b,t.terrain?_.centroidVertexBuffer:null)}}}catch(L){m.e(L)}finally{m.f()}}function Gn(t,n,r,i,o,a){for(var s,u,l,c=[function(t){var n=t.canonical.x-1,r=t.wrap;return n<0&&(n=(1<<t.canonical.z)-1,r--),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},function(t){var n=t.canonical.x+1,r=t.wrap;return n===1<<t.canonical.z&&(n=0,r++),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)}],h=function(e){for(var t=n.getSource().maxzoom,r=0,i=[0,-1,1];r<i.length;r++){var a=i[r];if(!(e.overscaledZ+a<t)&&!(a>0&&e.overscaledZ<t)){var s=n.getTileByID(e.calculateScaledKey(e.overscaledZ+a));if(s&&s.hasData()){var u=s.getBucket(o);if(u)return u}}}},f=[0,0,0],p=function(t,n){return f[0]=Math.min(t.min.y,n.min.y),f[1]=Math.max(t.max.y,n.max.y),f[2]=e.EXTENT-n.min.x>t.max.x?n.min.x-e.EXTENT:t.max.x,f},d=function(t,n){return f[0]=Math.min(t.min.x,n.min.x),f[1]=Math.max(t.max.x,n.max.x),f[2]=e.EXTENT-n.min.y>t.max.y?n.min.y-e.EXTENT:t.max.y,f},g=[function(e,t){return p(e,t)},function(e,t){return p(t,e)},function(e,t){return d(e,t)},function(e,t){return d(t,e)}],m=new e.Point(0,0),y=function(t,n,i,o,c){var h=[[o?i:t,o?t:i,0],[o?i:n,o?n:i,0]],f=c<0?e.EXTENT+c:c,p=[o?f:(t+n)/2,o?(t+n)/2:f,0];return 0===i&&c<0||0!==i&&c>0?a.getForTilePoints(l,[p],!0,u):h.push(p),a.getForTilePoints(r,h,!0,s),Math.max(h[0][2],h[1][2],p[2])/a.exaggeration()},v=0;v<4;v++){var _=i.borders[v];if(0===_.length&&(i.borderDone[v]=!0),!i.borderDone[v]){var b=l=c[v](r),x=h(b);if(x&&x.enableTerrain&&(u=a.findDEMTileFor(b))&&u.dem){if(!s){var w=a.findDEMTileFor(r);if(!w||!w.dem)return;s=w}for(var E=(v<2?1:5)-v,S=x.borders[E],T=0,k=0;k<_.length;k++){for(var C=i.featuresOnBorder[_[k]],I=C.borders[v],A=void 0;T<S.length&&!((A=x.featuresOnBorder[S[T]]).borders[E][1]>I[0]+3);)x.borderDone[E]||x.encodeCentroid(void 0,A,!1),T++;if(A&&T<S.length){for(var M=T,L=0;!(A.borders[E][0]>I[1]-3)&&(L++,++T!==S.length);)A=x.featuresOnBorder[S[T]];if(A=x.featuresOnBorder[S[M]],C.intersectsCount()>1||A.intersectsCount()>1||1!==L){1!==L&&(T=M),i.encodeCentroid(void 0,C,!1),x.borderDone[E]||x.encodeCentroid(void 0,A,!1);continue}var N=g[v](C,A),P=v%2?e.EXTENT-1:0;m.x=y(N[0],Math.min(e.EXTENT-1,N[1]),P,v<2,N[2]),m.y=0,i.encodeCentroid(m,C,!1),x.borderDone[E]||x.encodeCentroid(m,A,!1)}else i.encodeCentroid(void 0,C,!1)}i.borderDone[v]=i.needsCentroidUpdate=!0,x.borderDone[E]||(x.borderDone[E]=x.needsCentroidUpdate=!0)}}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}var $n=new e.Color(1,0,0,1),Hn=new e.Color(0,1,0,1),Xn=new e.Color(0,0,1,1),Wn=new e.Color(1,0,1,1),Yn=new e.Color(0,1,1,1);function Zn(e,t,n,r){Kn(e,0,t+n/2,e.transform.width,n,r)}function Jn(e,t,n,r){Kn(e,t-n/2,0,n,e.transform.height,r)}function Kn(t,n,r,i,o,a){var s=t.context,u=s.gl;u.enable(u.SCISSOR_TEST),u.scissor(n*e.browser.devicePixelRatio,r*e.browser.devicePixelRatio,i*e.browser.devicePixelRatio,o*e.browser.devicePixelRatio),s.clear({color:a}),u.disable(u.SCISSOR_TEST)}function Qn(t,n,r){var i=t.context,o=i.gl,a=r.posMatrix,s=t.useProgram("debug"),u=n.getTileByID(r.key);t.terrain&&t.terrain.setupElevationDraw(u,s);var l=e.DepthMode.disabled,c=e.StencilMode.disabled,h=t.colorModeForRenderPass();i.activeTexture.set(o.TEXTURE0),t.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(i,o.LINE_STRIP,l,c,h,e.CullFaceMode.disabled,vn(a,e.Color.red),"$debug",t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);var f=u.latestRawTileData,p=Math.floor((f&&f.byteLength||0)/1024),d=n.getTile(r).tileSize,g=512/Math.min(d,512)*(r.overscaledZ/t.transform.zoom)*.5,m=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(m+=" => ".concat(r.overscaledZ)),function(e,t){e.initDebugOverlayCanvas();var n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,"".concat(m," ").concat(p,"kb")),s.draw(i,o.TRIANGLES,l,c,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,vn(a,e.Color.transparent,g),"$debug",t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}var er=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]).members;function tr(e,t,n,r){e.emplaceBack(t,n,r)}var nr=function t(n){m(this,t),this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,tr(this.vertexArray,-1,-1,1),tr(this.vertexArray,1,-1,1),tr(this.vertexArray,-1,1,1),tr(this.vertexArray,1,1,1),tr(this.vertexArray,-1,-1,-1),tr(this.vertexArray,1,-1,-1),tr(this.vertexArray,-1,1,-1),tr(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=n.createVertexBuffer(this.vertexArray,er),this.indexBuffer=n.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)};function rr(t,n,r,i,o,a){var s=t.gl,u=n.paint.get("sky-atmosphere-color"),l=n.paint.get("sky-atmosphere-halo-color"),c=n.paint.get("sky-atmosphere-sun-intensity"),h=function(e,t,n,r,i){return{u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}}(e.fromMat4([],i),o,c,u,l);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,n.skyboxTexture,0),r.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}var ir={symbol:function(t,n,r,i,o){if("translucent"===t.renderPass){var a=e.StencilMode.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,n,r,i,o,a,s){var u,l=n.transform,c="map"===o,h="map"===a,p=f(t);try{var d=function(){var t=u.value,o=i.getTile(t),a=o.getBucket(r);if(!a||!a.text||!a.text.segments.get().length)return"continue";var f=e.evaluateSizeForZoom(a.textSizeData,l.zoom),p=z(o,1,n.transform.zoom),d=ge(t.posMatrix,h,c,n.transform,p),g="none"!==r.layout.get("icon-text-fit")&&a.hasIconData();if(f){var m=Math.pow(2,l.zoom-o.tileID.overscaledZ),y=l.elevation;zn(a,c,h,s,e.symbolSize,l,d,t.posMatrix,m,f,g,y?function(e){return y.getAtTileOffset(t,e.x,e.y)}:function(e){return 0})}};for(p.s();!(u=p.n()).done;)d()}catch(g){p.e(g)}finally{p.f()}}(i,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&Un(t,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&Un(t,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(Rn(t,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Rn(t,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(t,n,r,i){if("translucent"===t.renderPass){var o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),u=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var l=t.context,c=l.gl,h=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),p=e.StencilMode.disabled,d=t.colorModeForRenderPass(),g=[],m=0;m<i.length;m++){var y=i[m],v=n.getTile(y),_=v.getBucket(r);if(_){var b=_.programConfigurations.get(r.id),x=mn(r),w={programConfiguration:b,program:t.useProgram("circle",b,x),layoutVertexBuffer:_.layoutVertexBuffer,indexBuffer:_.indexBuffer,uniformValues:gn(t,y,v,r),tile:v};if(u){var E,S=_.segments.get(),T=f(S);try{for(T.s();!(E=T.n()).done;){var k=E.value;g.push({segments:new e.SegmentVector([k]),sortKey:k.sortKey,state:w})}}catch(z){T.e(z)}finally{T.f()}}else g.push({segments:_.segments,sortKey:0,state:w})}}u&&g.sort((function(e,t){return e.sortKey-t.sortKey}));for(var C=0,I=g;C<I.length;C++){var A=I[C],M=A.state,L=M.programConfiguration,N=M.program,P=M.layoutVertexBuffer,O=M.indexBuffer,R=M.uniformValues,D=M.tile,F=A.segments;t.terrain&&t.terrain.setupElevationDraw(D,N,{useDepthForOcclusion:!0}),N.draw(l,c.TRIANGLES,h,p,d,e.CullFaceMode.disabled,R,r.id,P,O,F,r.paint,t.transform.zoom,L)}}}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var o=t.context,a=o.gl,s=e.StencilMode.disabled,u=new e.ColorMode([a.ONE,a.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n){var r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,n,r){var i=e.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t.width/4,t.height/4,0,i.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,t,o,i)}}(o,t,r),o.clear({color:e.Color.transparent});for(var l=0;l<i.length;l++){var c=i[l];if(!n.hasRenderableParent(c)){var h=n.getTile(c),f=h.getBucket(r);if(f){var p=f.programConfigurations.get(r.id),d=t.useProgram("heatmap",p),g=t.transform.zoom;t.terrain&&t.terrain.setupElevationDraw(h,d),d.draw(o,a.TRIANGLES,e.DepthMode.disabled,s,u,e.CullFaceMode.disabled,_n(c.posMatrix,h,g,r.paint.get("heatmap-intensity")),r.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,r.paint,t.transform.zoom,p)}}}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){var r=t.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new e.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,function(t,n,r,i){var o=e.create();e.ortho(o,0,t.width,t.height,0,0,1);var a=t.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(t,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}}(t,r))},line:function(t,n,r,i){if("translucent"===t.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var s,u=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=r.paint.get("line-dasharray"),h=r.paint.get("line-pattern"),p=h.constantOr(1),d=r.paint.get("line-gradient"),g=r.getCrossfadeParameters(),m=p?"linePattern":c?"lineSDF":d?"lineGradient":"line",y=t.context,v=y.gl,_=!0,b=f(i);try{for(b.s();!(s=b.n()).done;){var x=s.value,w=n.getTile(x);if(!p||w.patternsLoaded()){var E=w.getBucket(r);if(E){t.prepareDrawTile(x);var S=E.programConfigurations.get(r.id),T=t.context.program.get(),k=t.useProgram(m,S),C=_||k.program!==T,I=h.constantOr(null);if(I&&w.imageAtlas){var A=w.imageAtlas,M=A.patternPositions[I.to.toString()],L=A.patternPositions[I.from.toString()];M&&L&&S.setConstantPatternPositions(M,L)}var N=t.terrain?x.posMatrix:null,P=p?wn(t,w,r,g,N):c?En(t,w,r,c,g,N):d?xn(t,w,r,N,E.lineClipsArray.length):bn(t,w,r,N);if(p)y.activeTexture.set(v.TEXTURE0),w.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),S.updatePaintBuffers(g);else if(c&&(C||t.lineAtlas.dirty))y.activeTexture.set(v.TEXTURE0),t.lineAtlas.bind(y);else if(d){var O=E.gradients[r.id],R=O.texture;if(r.gradientVersion!==O.version){var D=256;if(r.stepInterpolant){var F=n.getSource().maxzoom,z=x.canonical.z===F?Math.ceil(1<<t.transform.maxZoom-x.canonical.z):1;D=e.clamp(e.nextPowerOfTwo(E.maxLineLength/e.EXTENT*1024*z),256,y.maxTextureSize)}O.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:D,image:O.gradient||void 0,clips:E.lineClipsArray}),O.texture?O.texture.update(O.gradient):O.texture=new e.Texture(y,O.gradient,v.RGBA),O.version=r.gradientVersion,R=O.texture}y.activeTexture.set(v.TEXTURE0),R.bind(r.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}k.draw(y,v.TRIANGLES,u,t.stencilModeForClipping(x),l,e.CullFaceMode.disabled,P,r.id,E.layoutVertexBuffer,E.indexBuffer,E.segments,r.paint,t.transform.zoom,S,E.layoutVertexBuffer2),_=!1}}}}catch(B){b.e(B)}finally{b.f()}}}},fill:function(t,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=t.colorModeForRenderPass(),u=r.paint.get("fill-pattern"),l=t.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===o.constantOr(e.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(t.renderPass===l){var c=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);jn(t,n,r,i,c,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){var h=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);jn(t,n,r,i,h,s,!0)}}},"fill-extrusion":function(t,n,r,i){var o=r.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===t.renderPass){var a=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==o||r.paint.get("fill-extrusion-pattern").constantOr(1))qn(t,n,r,i,a,e.StencilMode.disabled,e.ColorMode.disabled),qn(t,n,r,i,a,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var s=t.colorModeForRenderPass();qn(t,n,r,i,a,e.StencilMode.disabled,s)}}},hillshade:function(t,n,r,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var o,a=t.context,s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),u=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,c="translucent"!==t.renderPass||l?[{},i]:t.stencilConfigForOverlap(i),p=h(c,2),d=p[0],g=p[1],m=f(g);try{for(m.s();!(o=m.n()).done;){var y=o.value,v=n.getTile(y);if(v.needsHillshadePrepare&&"offscreen"===t.renderPass)Ht(t,v,r,s,e.StencilMode.disabled,u);else if("translucent"===t.renderPass){var _=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(y):d[y.overscaledZ];Gt(t,y,v,r,s,_,u)}}}catch(b){m.e(b)}finally{m.f()}a.viewport.set([0,0,t.width,t.height])}},raster:function(t,n,r,i,o,a){if("translucent"===t.renderPass&&0!==r.paint.get("raster-opacity")&&i.length){var s,u=t.context,l=u.gl,c=n.getSource(),p=t.useProgram("raster"),d=t.colorModeForRenderPass(),g=t.terrain&&t.terrain.renderingToTexture,m=c instanceof $||g?[{},i]:t.stencilConfigForOverlap(i),y=h(m,2),v=y[0],_=y[1],b=_[_.length-1].overscaledZ,x=!t.options.moving,w=f(_);try{for(w.s();!(s=w.n()).done;){var E=s.value,S=g?e.DepthMode.disabled:t.depthModeForSublayer(E.overscaledZ-b,1===r.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),T=n.getTile(E);if(!g||T&&T.hasData()){var k=g?E.posMatrix:t.transform.calculatePosMatrix(E.toUnwrapped(),x),C=t.terrain&&g?t.terrain.stencilModeForRTTOverlap(E):v[E.overscaledZ],I=a?0:r.paint.get("raster-fade-duration");T.registerFadeDuration(I);var A=n.findLoadedParent(E,0),M=en(T,A,n,t.transform,I),L=void 0,N=void 0;t.terrain&&t.terrain.prepareDrawTile(E);var P="nearest"===r.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;u.activeTexture.set(l.TEXTURE0),T.texture.bind(P,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),u.activeTexture.set(l.TEXTURE1),A?(A.texture.bind(P,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),L=Math.pow(2,A.tileID.overscaledZ-T.tileID.overscaledZ),N=[T.tileID.canonical.x*L%1,T.tileID.canonical.y*L%1]):T.texture.bind(P,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);var O=kn(k,N||[0,0],L||1,M,r);c instanceof $?p.draw(u,l.TRIANGLES,S,e.StencilMode.disabled,d,e.CullFaceMode.disabled,O,r.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments):p.draw(u,l.TRIANGLES,S,C,d,e.CullFaceMode.disabled,O,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}}catch(R){w.e(R)}finally{w.f()}}},background:function(t,n,r,i){var o=r.paint.get("background-color"),a=r.paint.get("background-opacity");if(0!==a){var s=t.context,u=s.gl,l=t.transform,c=l.tileSize,h=r.paint.get("background-pattern");if(!t.isPatternMissing(h)){var p=!h&&1===o.a&&1===a&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===p){var d=e.StencilMode.disabled,g=t.depthModeForSublayer(0,"opaque"===p?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),m=t.colorModeForRenderPass(),y=t.useProgram(h?"backgroundPattern":"background"),v=i||l.coveringTiles({tileSize:c});h&&(s.activeTexture.set(u.TEXTURE0),t.imageManager.bind(t.context));var _,b=r.getCrossfadeParameters(),x=f(v);try{for(x.s();!(_=x.n()).done;){var w=_.value,E=i?w.posMatrix:t.transform.calculatePosMatrix(w.toUnwrapped());t.prepareDrawTile(w);var S=h?Pn(E,a,t,h,{tileID:w,tileSize:c},b):Nn(E,a,o);y.draw(s,u.TRIANGLES,g,d,m,e.CullFaceMode.disabled,S,r.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}catch(T){x.e(T)}finally{x.f()}}}}},sky:function(t,n,r){var i=r.paint.get("sky-opacity");if(0!==i){var o=t.context,a=r.paint.get("sky-type"),s=new e.DepthMode(o.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),u=t.frameCounter/1e3%1;"atmosphere"===a?"offscreen"===t.renderPass?r.needsSkyboxCapture(t)&&(function(t,n,r,i){var o=t.context,a=o.gl,s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(32,32,!1),n.skyboxGeometry=new nr(o),n.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(var u=0;u<6;++u)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+u,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);var l=n.getCenter(t,!0),c=t.useProgram("skyboxCapture"),h=new Float64Array(16);e.identity(h),e.rotateY(h,h,.5*-Math.PI),rr(o,n,c,h,l,0),e.identity(h),e.rotateY(h,h,.5*Math.PI),rr(o,n,c,h,l,1),e.identity(h),e.rotateX(h,h,.5*-Math.PI),rr(o,n,c,h,l,2),e.identity(h),e.rotateX(h,h,.5*Math.PI),rr(o,n,c,h,l,3),e.identity(h),rr(o,n,c,h,l,4),e.identity(h),e.rotateY(h,h,Math.PI),rr(o,n,c,h,l,5),o.viewport.set([0,0,t.width,t.height])}(t,r),r.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,n,r,i,o){var a=t.context,s=a.gl,u=t.transform,l=t.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);var c=function(e,t,n,r,i){return{u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:r,u_temporal_offset:i}}(u.skyboxMatrix,n.getCenter(t,!1),0,i,o);l.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,c,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,s,i,u):"gradient"===a&&"sky"===t.renderPass&&function(t,n,r,i,o){var a=t.context,s=a.gl,u=t.transform,l=t.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new nr(a)),a.activeTexture.set(s.TEXTURE0);var c=n.colorRampTexture;c||(c=n.colorRampTexture=new e.Texture(a,n.colorRamp,s.RGBA)),c.bind(s.LINEAR,s.CLAMP_TO_EDGE);var h=function(t,n,r,i,o){return{u_matrix:t,u_color_ramp:0,u_center_direction:n,u_radius:e.degToRad(r),u_opacity:i,u_temporal_offset:o}}(u.skyboxMatrix,n.getCenter(t,!1),n.paint.get("sky-gradient-radius"),i,o);l.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,s,i,u)}},debug:function(e,t,n){for(var r=0;r<n.length;r++)Qn(e,t,n[r])},custom:function(t,n,r){var i=t.context,o=r.implementation;if("offscreen"===t.renderPass){var a=o.prerender;a&&(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),a.call(o,i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(e.StencilMode.disabled);var s="3d"===o.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);i.setDepthMode(s),o.render(i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}},or=function(){function t(n,r){m(this,t),this.context=new e.Context(n),this.transform=r,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new tt,this.gpuTimers={},this.frameCounter=0}return y(t,[{key:"updateTerrain",value:function(e,t){var n=!!e&&!!e.terrain;if(n||this._terrain&&this._terrain.enabled){this._terrain||(this._terrain=new on(this,e));var r=this._terrain;this.transform.elevation=n?r:null,r.update(e,this.transform,t)}}},{key:"resize",value:function(t,n){if(this.width=t*e.browser.devicePixelRatio,this.height=n*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style){var r,i=f(this.style._order);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.style._layers[o].resize()}}catch(a){i.e(a)}finally{i.f()}}}},{key:"setup",value:function(){var t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var i=new e.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(e.EXTENT,0,e.EXTENT,0),i.emplaceBack(0,e.EXTENT,0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(i,G.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var o=new e.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(o,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var a=new e.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(a);var s=new e.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);var u=this.context.gl;this.stencilClearMode=new e.StencilMode({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO),this.loadTimeStamps.push(e.window.performance.now())}},{key:"clearStencil",value:function(){var t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=e.create();e.ortho(r,0,this.width,this.height,0,0,1),e.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,n.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Qt(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}},{key:"_renderTileClippingMasks",value:function(t,n,r){if(n&&this.currentStencilSource!==n.id&&t.isTileClipped()&&r&&r.length){this.currentStencilSource=n.id;var i=this.context,o=i.gl;this.nextStencilID+r.length>256&&this.clearStencil(),i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);var a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};var s,u=f(r);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=this._tileClippingMaskIDs[l.key]=this.nextStencilID++;a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},c,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Qt(l.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}catch(h){u.e(h)}finally{u.f()}}}},{key:"stencilModeFor3D",value:function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,n=this.context.gl;return new e.StencilMode({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}},{key:"stencilModeForClipping",value:function(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);var n=this.context.gl;return new e.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,n.KEEP,n.KEEP,n.REPLACE)}},{key:"stencilConfigForOverlap",value:function(t){var n=this.context.gl,i=t.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),o=i[i.length-1].overscaledZ,a=i[0].overscaledZ-o+1;if(a>1){this.currentStencilSource=void 0,this.nextStencilID+a>256&&this.clearStencil();for(var s={},u=0;u<a;u++)s[u+o]=new e.StencilMode({func:n.GEQUAL,mask:255},u+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=a,[s,i]}return[r({},o,e.StencilMode.disabled),i]}},{key:"colorModeForRenderPass",value:function(){var t=this.context.gl;if(this._showOverdrawInspector){var n=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}},{key:"depthModeForSublayer",value:function(t,n,r){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}},{key:"opaquePassEnabledForLayer",value:function(){return this.currentLayer<this.opaquePassCutoff}},{key:"render",value:function(t,n){var r=this;this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var i=this.style._order,o=this.style._sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var u={},l={},c={};for(var h in o){var p=o[h];u[h]=p.getVisibleCoordinates(),l[h]=u[h].slice().reverse(),c[h]=p.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var d=0;d<i.length;d++)if(this.style._layers[i[d]].is3D()){this.opaquePassCutoff=d;break}this.terrain&&(this.terrain.updateTileBinding(c),this.opaquePassCutoff=0),this.renderPass="offscreen";var g,m=f(i);try{for(m.s();!(g=m.n()).done;){var y=g.value,v=this.style._layers[y],_=t._getLayerSourceCache(v);if(v.hasOffscreenPass()&&!v.isHidden(this.transform.zoom)){var b=_?l[_.id]:void 0;("custom"===v.type||v.isSky()||b&&b.length)&&this.renderLayer(this,_,v,b)}}}catch(M){m.e(M)}finally{m.f()}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var x=this.style._layers[i[this.currentLayer]],w=t._getLayerSourceCache(x);if(!(this.terrain&&this.terrain.renderLayer(x,w)||x.isSky())){var E=w?l[w.id]:void 0;this._renderTileClippingMasks(x,w,E),this.renderLayer(this,w,x,E)}}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var S=this.style._layers[i[this.currentLayer]],T=t._getLayerSourceCache(S);S.isSky()&&this.renderLayer(this,T,S,T?l[T.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var k=this.style._layers[i[this.currentLayer]],C=t._getLayerSourceCache(k);if(!(this.terrain&&this.terrain.renderLayer(k,C)||k.isSky())){var I=C?("symbol"===k.type?c:l)[C.id]:void 0;this._renderTileClippingMasks(k,C,C?u[C.id]:void 0),this.renderLayer(this,C,k,I)}}if(this.options.showTileBoundaries||this.options.showQueryGeometry){var A=null;e.values(this.style._layers).forEach((function(e){var n=t._getLayerSourceCache(e);n&&!e.isHidden(r.transform.zoom)&&(!A||A.getSource().maxzoom<n.getSource().maxzoom)&&(A=n)})),A&&this.options.showTileBoundaries&&ir.debug(this,A,A.getVisibleCoordinates())}this.options.showPadding&&function(e){var t=e.transform.padding;Zn(e,e.transform.height-(t.top||0),3,$n),Zn(e,t.bottom||0,3,Hn),Jn(e,t.left||0,3,Xn),Jn(e,e.transform.width-(t.right||0),3,Wn);var n=e.transform.centerPoint;!function(e,t,n,r){Kn(e,t-1,n-10,2,20,r),Kn(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,Yn)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%e.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}},{key:"renderLayer",value:function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),ir[n.type](e,t,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}},{key:"gpuTimingStart",value:function(e){if(this.options.gpuTiming){var t=this.context.extTimerQuery,n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}}},{key:"gpuTimingEnd",value:function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"collectGpuTimers",value:function(){var e=this.gpuTimers;return this.gpuTimers={},e}},{key:"queryGpuTimers",value:function(e){var t={};for(var n in e){var r=e[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),t[n]=o}return t}},{key:"translatePosMatrix",value:function(t,n,r,i,o){if(!r[0]&&!r[1])return t;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var l=[o?r[0]:z(n,r[0],this.transform.zoom),o?r[1]:z(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return e.translate(c,t,l),c}},{key:"saveTileTexture",value:function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}},{key:"getTileTexture",value:function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null}},{key:"isPatternMissing",value:function(e){if(!e)return!1;if(!e.from||!e.to)return!0;var t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n}},{key:"currentGlobalDefines",value:function(){var e=this.terrain&&this.terrain.renderingToTexture,t=[];return this.terrain&&!this.terrain.renderingToTexture&&t.push("TERRAIN"),e&&t.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&t.push("OVERDRAW_INSPECTOR"),t}},{key:"useProgram",value:function(e,t,n){this.cache=this.cache||{};var r=n||[],i=this.currentGlobalDefines().concat(r),o=sn.cacheKey(e,i,t);return this.cache[o]||(this.cache[o]=new sn(this.context,e,Vt[e],t,On[e],i)),this.cache[o]}},{key:"setCustomLayerDefaults",value:function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}},{key:"setBaseState",value:function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}},{key:"initDebugOverlayCanvas",value:function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}},{key:"destroy",value:function(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}},{key:"prepareDrawTile",value:function(e){this.terrain&&this.terrain.prepareDrawTile(e)}},{key:"setTileLoadedFlag",value:function(e){this.tileLoaded=e}},{key:"saveCanvasCopy",value:function(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}},{key:"canvasCopy",value:function(){var e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}},{key:"getCanvasCopiesAndTimestamps",value:function(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}},{key:"terrain",get:function(){return this._terrain&&this._terrain.enabled?this._terrain:null}}]),t}(),ar=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(m(this,t),isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=n,this.left=r,this.right=i}return y(t,[{key:"interpolate",value:function(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this}},{key:"getCenter",value:function(t,n){var r=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.Point(r,i)}},{key:"equals",value:function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}},{key:"clone",value:function(){return new t(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),t}();function sr(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}function ur(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]}function lr(t,n){var r=sr(t,3);e.fromQuat(t,n),ur(t,3,r)}function cr(e,t){ur(e,3,[t[0],t[1],t[2],1])}function hr(t,n){var r=e.identity$1([]);return e.rotateZ$1(r,r,-n),e.rotateX$1(r,r,-t),r}function fr(t,n){var r=[t[0],t[1],0],i=[n[0],n[1],0];if(e.length(r)>=1e-15){var o=e.normalize([],r);e.scale$2(i,o,e.dot(i,o)),n[0]=i[0],n[1]=i[1]}var a=e.cross([],n,t);if(e.len(a)<1e-15)return null;var s=Math.atan2(-a[1],a[0]);return hr(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),s)}var pr=function(){function t(e,n){m(this,t),this.position=e,this.orientation=n}return y(t,[{key:"lookAtPoint",value:function(t,n){if(this.orientation=null,this.position){var r=this._elevation?this._elevation.getAtPoint(e.MercatorCoordinate.fromLngLat(t)):0,i=this.position,o=e.MercatorCoordinate.fromLngLat(t,r),a=[o.x-i.x,o.y-i.y,o.z-i.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=fr(a,n)}}},{key:"setPitchBearing",value:function(t,n){this.orientation=hr(e.degToRad(t),e.degToRad(-n))}},{key:"position",get:function(){return this._position},set:function(t){this._position=this._renderWorldCopies?function(t){if(t){var n=Array.isArray(t)?new e.MercatorCoordinate(t[0],t[1],t[2]):t;return n.x=e.wrap(n.x,0,1),n}}(t):t}}]),t}(),dr=function(){function t(n,r){m(this,t),this._transform=e.identity([]),this._orientation=e.identity$1([]),r&&(this._orientation=r,lr(this._transform,this._orientation)),n&&cr(this._transform,n)}return y(t,[{key:"getPitchBearing",value:function(){var e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}},{key:"setPitchBearing",value:function(e,t){this._orientation=hr(e,t),lr(this._transform,this._orientation)}},{key:"forward",value:function(){var e=sr(this._transform,2);return[-e[0],-e[1],-e[2]]}},{key:"up",value:function(){var e=sr(this._transform,1);return[-e[0],-e[1],-e[2]]}},{key:"right",value:function(){var e=sr(this._transform,0);return[e[0],e[1],e[2]]}},{key:"getCameraToWorld",value:function(t,n){var r=new Float64Array(16);return e.invert(r,this.getWorldToCamera(t,n)),r}},{key:"getWorldToCamera",value:function(t,n){var r=new Float64Array(16),i=new Float64Array(4),o=this.position;return e.conjugate(i,this._orientation),e.scale$2(o,o,-t),e.fromQuat(r,i),e.translate(r,r,o),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}},{key:"getCameraToClipPerspective",value:function(t,n,r,i){var o=new Float64Array(16);return e.perspective(o,t,n,r,i),o}},{key:"clone",value:function(){return new t(c(this.position),c(this.orientation))}},{key:"mercatorPosition",get:function(){var t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}},{key:"position",get:function(){var e=sr(this._transform,3);return[e[0],e[1],e[2]]},set:function(e){cr(this._transform,e)}},{key:"orientation",get:function(){return this._orientation},set:function(e){this._orientation=e,lr(this._transform,this._orientation)}}]),t}(),gr=function(){function t(n,r,i,o,a){m(this,t),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===a||a,this._minZoom=n||0,this._maxZoom=r||22,this._minPitch=null==i?0:i,this._maxPitch=null==o?60:o,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ar,this._posMatrixCache={},this._alignedPosMatrixCache={},this._camera=new dr,this._centerAltitude=0,this.cameraElevationReference="ground"}return y(t,[{key:"clone",value:function(){var e=new t(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._cameraZoom=this._cameraZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e}},{key:"updateElevation",value:function(e){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),e&&this._constrainCameraAltitude(),this._calcMatrices()}},{key:"_setZoom",value:function(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}},{key:"_updateCenterElevation",value:function(){if(!this._elevation)return!1;var t=this._elevation.getAtPoint(e.MercatorCoordinate.fromLngLat(this.center),-1);return-1===t?(this._cameraZoom=null,!1):(this._centerAltitude=t,!0)}},{key:"_updateCameraOnTerrain",value:function(){var t=this.cameraToCenterDistance/this.worldSize,n=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(n+t)}},{key:"_updateZoomFromElevation",value:function(){if(null!=this._cameraZoom&&this._elevation){var t=this._cameraZoom,n=this._elevation.getAtPoint(e.MercatorCoordinate.fromLngLat(this.center)),r=e.mercatorZfromAltitude(n,this.center.lat),i=this._mercatorZfromZoom(t),o=this._mercatorZfromZoom(this._maxZoom),a=Math.max(i-r,o);this._setZoom(this._zoomFromMercatorZ(a))}}},{key:"computeZoomRelativeTo",value:function(t){var n,r=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));n=t.z<this._camera.position[2]?[r.x,r.y,r.z]:[t.x,t.y,t.z];var i=e.length(e.sub([],this._camera.position,n));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}},{key:"setFreeCameraOptions",value:function(t){if(this.height&&(t.position||t.orientation)){this._updateCameraState();var n=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(t.orientation)),t.position){var r=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}}},{key:"getFreeCameraOptions",value:function(){this._updateCameraState();var t=this._camera.position,n=new pr;return n.position=new e.MercatorCoordinate(t[0],t[1],t[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this._renderWorldCopies,n}},{key:"_setCameraOrientation",value:function(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);var n=e.transformQuat([],[0,0,-1],t),r=e.transformQuat([],[0,-1,0],t);if(r[2]<0)return!1;var i=fr(n,r);return!!i&&(this._camera.orientation=i,!0)}},{key:"_setCameraPosition",value:function(t){var n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/r,i/n),this._camera.position=t}},{key:"isPaddingEqual",value:function(e){return this._edgeInsets.equals(e)}},{key:"interpolatePadding",value:function(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}},{key:"coveringZoomLevel",value:function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}},{key:"getVisibleUnwrappedCoordinates",value:function(t){var n=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new e.Point(0,0)),i=this.pointCoordinate(new e.Point(this.width,0)),o=this.pointCoordinate(new e.Point(this.width,this.height)),a=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),u=Math.floor(Math.max(r.x,i.x,o.x,a.x)),l=1,c=s-l;c<=u+l;c++)0!==c&&n.push(new e.UnwrappedTileID(c,t));return n}},{key:"coveringTiles",value:function(t){var n=this,r=this.coveringZoomLevel(t),i=r,o=!!t.useElevationData;if(void 0!==t.minzoom&&r<t.minzoom)return[];void 0!==t.maxzoom&&r>t.maxzoom&&(r=t.maxzoom);var a=e.MercatorCoordinate.fromLngLat(this.center),s=1<<r,u=[s*a.x,s*a.y,0],l=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r),c=this.pointCoordinate(this.getCameraPoint()),h=s*e.mercatorZfromAltitude(1,this.center.lat),f=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),p=[s*c.x,s*c.y,f],d=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),g=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?r:0,m=this.elevation?1e4*this.elevation.exaggeration():0,y=function(t){return{aabb:new e.Aabb([t*s,0,-m],[(t+1)*s,s,m]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},v=[],_=[],b=r,x=t.reparseOverscaled?i:r,w=function(e,t){if(n._elevation){var r=n._elevation.getMinMaxForTile(t);r&&(e.min[2]=r.min,e.max[2]=r.max,e.center[2]=(e.min[2]+e.max[2])/2)}},E=function(e){return e*e},S=E((f-this._centerAltitude)*h),T=function(e,t){if(t*E(.707)<e)return 1;var n=Math.sqrt(t/e);return n/(1/.707+(Math.pow(1.1,n-1/.707+1)-1)/(1.1-1)-1)};if(this._renderWorldCopies)for(var k=1;k<=3;k++)v.push(y(-k)),v.push(y(k));for(v.push(y(0));v.length>0;){var C=v.pop(),I=C.x,A=C.y,M=C.fullyVisible;if(!M){var L=C.aabb.intersects(l);if(0===L)continue;M=2===L}var N=!0;if(g<=C.zoom&&C.zoom<b){var P=C.aabb.distanceX(p),O=C.aabb.distanceY(p),R=S;o&&(R=E(C.aabb.distanceZ(p)*h));var D=P*P+O*O+R;N=D<E((1<<b-C.zoom)*d*T(Math.max(R,S),D))}if(C.zoom!==b&&N)for(var F=0;F<4;F++){var z=(I<<1)+F%2,B=(A<<1)+(F>>1),U=C.aabb.quadrant(F),V=null;o&&C.zoom>b-6&&w(U,V=new e.OverscaledTileID(C.zoom+1===b?x:C.zoom+1,C.wrap,C.zoom+1,z,B)),v.push({aabb:U,zoom:C.zoom+1,x:z,y:B,wrap:C.wrap,fullyVisible:M,tileID:V})}else{var j=C.zoom===b?x:C.zoom;if(t.minzoom&&t.minzoom>j)continue;var q=u[0]-(.5+I+(C.wrap<<C.zoom))*(1<<r-C.zoom),G=u[1]-.5-A,$=C.tileID?C.tileID:new e.OverscaledTileID(j,C.wrap,C.zoom,I,A);_.push({tileID:$,distanceSq:q*q+G*G})}}return _.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}},{key:"zoomScale",value:function(e){return Math.pow(2,e)}},{key:"scaleZoom",value:function(e){return Math.log(e)/Math.LN2}},{key:"project",value:function(t){var n=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(n)*this.worldSize)}},{key:"unproject",value:function(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(t,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(t),a=new e.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"setLocation",value:function(e){this.center=this.coordinateLocation(e),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"locationPoint",value:function(e){return this._coordinatePoint(this.locationCoordinate(e),!1)}},{key:"locationPoint3D",value:function(e){return this._coordinatePoint(this.locationCoordinate(e),!0)}},{key:"pointLocation",value:function(e){return this.coordinateLocation(this.pointCoordinate(e))}},{key:"pointLocation3D",value:function(e){return this.coordinateLocation(this.pointCoordinate3D(e))}},{key:"locationCoordinate",value:function(t){return e.MercatorCoordinate.fromLngLat(t)}},{key:"coordinateLocation",value:function(e){return e.toLngLat()}},{key:"pointRayIntersection",value:function(t,n){var r=null!=n?n:this._centerAltitude,i=[t.x,t.y,0,1],o=[t.x,t.y,1,1];e.transformMat4(i,i,this.pixelMatrixInverse),e.transformMat4(o,o,this.pixelMatrixInverse);var a=o[3];e.scale$1(i,i,1/i[3]),e.scale$1(o,o,1/a);var s=i[2],u=o[2];return{p0:i,p1:o,t:s===u?0:(r-s)/(u-s)}}},{key:"screenPointToMercatorRay",value:function(t){var n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];return e.transformMat4(n,n,this.pixelMatrixInverse),e.transformMat4(r,r,this.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),e.scale$1(r,r,1/r[3]),n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,e.scale$1(n,n,1/this.worldSize),e.scale$1(r,r,1/this.worldSize),new e.Ray([n[0],n[1],n[2]],e.normalize([],e.sub([],r,n)))}},{key:"rayIntersectionCoordinate",value:function(t){var n=t.p0,r=t.p1,i=t.t,o=e.mercatorZfromAltitude(n[2],this._center.lat),a=e.mercatorZfromAltitude(r[2],this._center.lat);return new e.MercatorCoordinate(e.number(n[0],r[0],i)/this.worldSize,e.number(n[1],r[1],i)/this.worldSize,e.number(o,a,i))}},{key:"pointCoordinate",value:function(t){var n=this.horizonLineFromTop(),r=n>t.y?new e.Point(t.x,n):t;return this.rayIntersectionCoordinate(this.pointRayIntersection(r))}},{key:"pointCoordinate3D",value:function(t){if(!this.elevation)return this.pointCoordinate(t);var n=this.elevation,r=this.elevation.pointCoordinate(t);if(r)return new e.MercatorCoordinate(r[0],r[1],r[2]);var i=0,o=this.horizonLineFromTop();if(t.y>o)return this.pointCoordinate(t);for(var a=.02*o,s=t.clone(),u=0;u<10&&o-i>a;u++){s.y=e.number(i,o,.66);var l=n.pointCoordinate(s);l?(o=s.y,r=l):i=s.y}return r?new e.MercatorCoordinate(r[0],r[1],r[2]):this.pointCoordinate(t)}},{key:"isPointAboveHorizon",value:function(e){if(this.elevation)return!this.elevation.pointCoordinate(e);var t=this.horizonLineFromTop();return e.y<t}},{key:"_coordinatePoint",value:function(t,n){var r=n&&this.elevation?this.elevation.getAtPoint(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,r+t.toAltitude(),1];return e.transformMat4(i,i,this.pixelMatrix),i[3]>0?new e.Point(i[0]/i[3],i[1]/i[3]):new e.Point(Number.MAX_VALUE,Number.MAX_VALUE)}},{key:"getBounds",value:function(){return this._terrainEnabled()?this._getBounds3D():(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))}},{key:"_getBounds3D",value:function(){var t=this,n=this.elevation,r=n.visibleDemTiles.reduce((function(e,t){if(t.dem){var n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});r.min*=n.exaggeration(),r.max*=n.exaggeration();var i=this.horizonLineFromTop();return[new e.Point(0,i),new e.Point(this.width,i),new e.Point(this.width,this.height),new e.Point(0,this.height)].reduce((function(e,n){return e.extend(t.coordinateLocation(t.rayIntersectionCoordinate(t.pointRayIntersection(n,r.min)))).extend(t.coordinateLocation(t.rayIntersectionCoordinate(t.pointRayIntersection(n,r.max))))}),new e.LngLatBounds)}},{key:"horizonLineFromTop",value:function(){var e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y;return Math.max(0,this.height/2-.97*e)}},{key:"getMaxBounds",value:function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}},{key:"setMaxBounds",value:function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"calculatePosMatrix",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=t.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*t.wrap,u=e.identity(new Float64Array(16));return e.translate(u,u,[s*a,o.y*a,0]),e.scale(u,u,[a/e.EXTENT,a/e.EXTENT,1]),e.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),i[r]=new Float32Array(u),i[r]}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"recenterOnTerrain",value:function(){if(this._elevation){var t=this._elevation;this._updateCameraState();var n=this._camera.position,r=this._camera.forward();if(!(n.z<=0||r[2]>=0)){var i=e.mercatorZfromAltitude(1,this._center.lat);n[2]/=i,r[2]/=i,e.normalize(r,r);var o=t.raycast(n,r,t.exaggeration());if(o){var a=e.scaleAndAdd([],n,r,o),s=new e.MercatorCoordinate(a[0],a[1],e.mercatorZfromAltitude(a[2],e.latFromMercatorY(a[1]))),u=this._camera.position,l=s.z+e.length([s.x-u[0],s.y-u[1],s.z-u[2]]);this._cameraZoom=this._zoomFromMercatorZ(l),this._centerAltitude=s.toAltitude(),this._center=s.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}}}},{key:"_constrainCameraAltitude",value:function(){if(this._elevation){var t=this._elevation;this._updateCameraState();var n=t.getAtPoint(this._camera.mercatorPosition),r=this._minimumHeightOverTerrain()*Math.cos(e.degToRad(this._maxPitch)),i=e.mercatorZfromAltitude(n,this._center.lat),o=this._camera.position[2]-i;if(o<r){var a=e.MercatorCoordinate.fromLngLat(this._center,this._centerAltitude),s=this._camera.mercatorPosition,u=[a.x-s.x,a.y-s.y,a.z-s.z],l=e.length(u);u[2]-=r-o;var c=e.length(u);if(0===c)return;e.scale$2(u,u,l/c),this._camera.position=[a.x-u[0],a.y-u[1],a.z-u[2]],this._camera.orientation=fr(u,this._camera.up()),this._updateStateFromCamera()}}}},{key:"_constrain",value:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,n,r,i,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;o=e.mercatorYfromLat(h[1])*this.worldSize,t=(a=e.mercatorYfromLat(h[0])*this.worldSize)-o<l.y?l.y/(a-o):0}if(this.lngRange){var f=this.lngRange;s=e.mercatorXfromLng(f[0])*this.worldSize,n=(u=e.mercatorXfromLng(f[1])*this.worldSize)-s<l.x?l.x/(u-s):0}var p=this.point,d=Math.max(n||0,t||0);if(d)return this.center=this.unproject(new e.Point(n?(u+s)/2:p.x,t?(a+o)/2:p.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var g=p.y,m=l.y/2;g-m<o&&(i=o+m),g+m>a&&(i=a-m)}if(this.lngRange){var y=p.x,v=l.x/2;y-v<s&&(r=s+v),y+v>u&&(r=u-v)}void 0===r&&void 0===i||(this.center=this.unproject(new e.Point(void 0!==r?r:p.x,void 0!==i?i:p.y))),this._constrainCameraAltitude(),this._unmodified=c,this._constraining=!1}}},{key:"_minZoomForBounds",value:function(){var t=this,n=function(e,n){return Math.log2(e/(t.tileSize*Math.abs(n[1]-n[0])))},r=0;if(this.latRange){var i=this.latRange;r=n(this.height,[e.mercatorYfromLat(i[0]),e.mercatorYfromLat(i[1])])}var o=0;if(this.lngRange){var a=this.lngRange;o=n(this.width,[e.mercatorXfromLng(a[0]),e.mercatorXfromLng(a[1])])}return Math.max(r,o)}},{key:"_maxCameraBoundsDistance",value:function(){return this._mercatorZfromZoom(this._minZoomForBounds())}},{key:"_calcMatrices",value:function(){if(this.height){var t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var n=e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;this._updateCameraState();var r=Math.PI/2+this._pitch,i=this.fovAboveCenter,o=this._camera.position[2]*this.worldSize/Math.cos(this._pitch),a=Math.sin(i)*o/Math.sin(e.clamp(Math.PI-r-i,.01,Math.PI-.01)),s=this.point,u=s.x,l=s.y,c=1.01*(Math.cos(Math.PI/2-this._pitch)*a+o),h=this.height/50,f=this._camera.getWorldToCamera(this.worldSize,n),p=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,h,c);p[8]=2*-t.x/this.width,p[9]=2*t.y/this.height;var d=e.mul([],p,f);this.mercatorMatrix=e.scale([],d,[this.worldSize,this.worldSize,this.worldSize/n]),this.projMatrix=d,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);var g=new Float32Array(16);e.identity(g),e.scale(g,g,[1,-1,1]),e.rotateX(g,g,this._pitch),e.rotateZ(g,g,this.angle);var m=e.perspective(new Float32Array(16),this._fov,this.width/this.height,h,c);this.skyboxMatrix=e.multiply(g,m,g);var y=this.width%2/2,v=this.height%2/2,_=Math.cos(this.angle),b=Math.sin(this.angle),x=u-Math.round(u)+_*y+b*v,w=l-Math.round(l)+_*v+b*y,E=new Float64Array(d);if(e.translate(E,E,[x>.5?x-1:x,w>.5?w-1:w,0]),this.alignedProjMatrix=E,d=e.create(),e.scale(d,d,[this.width/2,-this.height/2,1]),e.translate(d,d,[1,-1,0]),this.labelPlaneMatrix=d,d=e.create(),e.scale(d,d,[1,-1,1]),e.translate(d,d,[-1,-1,0]),e.scale(d,d,[2/this.width,2/this.height,1]),this.glCoordMatrix=d,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(d=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=d,this._posMatrixCache={},this._alignedPosMatrixCache={}}}},{key:"_updateCameraState",value:function(){if(this.height){this._camera.setPitchBearing(this._pitch,this.angle);var t=this._camera.forward(),n=this.cameraToCenterDistance,r=this.point,i=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-e.mercatorZfromAltitude(this._centerAltitude,this.center.lat),o=this.cameraToCenterDistance/i;this._camera.position=[r.x/this.worldSize-t[0]*n/o,r.y/this.worldSize-t[1]*n/o,e.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-t[2]*n/o]}}},{key:"_translateCameraConstrained",value:function(t){var n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=t[2],i=1;r>0&&(i=Math.min((n-this._camera.position[2])/r,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,i),this._updateStateFromCamera()}},{key:"_updateStateFromCamera",value:function(){var t=this._camera.position,n=this._camera.forward(),r=this._camera.getPitchBearing(),i=r.pitch,o=r.bearing,a=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat),s=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),u=Math.max((t[2]-a)/Math.cos(i),s),l=this._zoomFromMercatorZ(u);e.scaleAndAdd(t,t,n,u),this._pitch=e.clamp(i,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(o,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new e.MercatorCoordinate(t[0],t[1],t[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}},{key:"_worldSizeFromZoom",value:function(e){return Math.pow(2,e)*this.tileSize}},{key:"_mercatorZfromZoom",value:function(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}},{key:"_minimumHeightOverTerrain",value:function(){var e=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(e)}},{key:"_zoomFromMercatorZ",value:function(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}},{key:"_terrainEnabled",value:function(){return!!this._elevation}},{key:"isHorizonVisibleForPoints",value:function(t,n){for(var r=Math.min(t.x,n.x),i=Math.max(t.x,n.x),o=Math.min(t.y,n.y),a=Math.max(t.y,n.y),s=[new e.Point(r,o),new e.Point(i,a),new e.Point(r,a),new e.Point(i,o)],u=this._renderWorldCopies?-3:0,l=this._renderWorldCopies?4:1,c=0,h=s;c<h.length;c++){var f=h[c],p=this.pointRayIntersection(f);if(p.t<0)return!0;var d=this.rayIntersectionCoordinate(p);if(d.x<u||d.y<0||d.x>l||d.y>1)return!0}return!1}},{key:"isHorizonVisible",value:function(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.isHorizonVisibleForPoints(new e.Point(0,0),new e.Point(this.width,this.height))}},{key:"zoomDeltaToMovement",value:function(t,n){var r=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}},{key:"getCameraPoint",value:function(){var t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))}},{key:"elevation",get:function(){return this._elevation},set:function(e){this._elevation!==e&&(this._elevation=e,e?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}},{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}},{key:"minPitch",get:function(){return this._minPitch},set:function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new e.Point(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(t){var n=-e.wrap(t,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(t){var n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}},{key:"center",get:function(){return this._center},set:function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}},{key:"padding",get:function(){return this._edgeInsets.toJSON()},set:function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}},{key:"centerPoint",get:function(){return this._edgeInsets.getCenter(this.width,this.height)}},{key:"fovAboveCenter",get:function(){return this._fov*(.5+this.centerOffset.y/this.height)}},{key:"unmodified",get:function(){return this._unmodified}},{key:"point",get:function(){return this.project(this.center)}}]),t}(),mr=function(){function t(n){m(this,t),this._hashName=n&&encodeURIComponent(n),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(e,t){var n=!1,r=null,i=function t(){r=null,n&&(e(),r=setTimeout(t,300),n=!1)};return function(){return n=!0,r||i(),r}}(this._updateHashUnthrottled.bind(this))}return y(t,[{key:"addTo",value:function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}},{key:"remove",value:function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}},{key:"getHashString",value:function(t){var n=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,u=this._map.getBearing(),l=this._map.getPitch(),c="";if(c+=t?"/".concat(a,"/").concat(s,"/").concat(r):"".concat(r,"/").concat(s,"/").concat(a),(u||l)&&(c+="/".concat(Math.round(10*u)/10)),l&&(c+="/".concat(Math.round(l))),this._hashName){var h=this._hashName,f=!1,p=e.window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===h?(f=!0,"".concat(t,"=").concat(c)):e})).filter((function(e){return e}));return f||p.push("".concat(h,"=").concat(c)),"#".concat(p.join("&"))}return"#".concat(c)}},{key:"_getCurrentHash",value:function(){var t,n=this,r=e.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(e){return e.split("=")})).forEach((function(e){e[0]===n._hashName&&(t=e)})),(t&&t[1]||"").split("/")):r.split("/")}},{key:"_onHashChange",value:function(){var e=this._getCurrentHash();if(e.length>=3&&!e.some((function(e){return isNaN(e)}))){var t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1}},{key:"_updateHashUnthrottled",value:function(){var t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());try{e.window.history.replaceState(e.window.history.state,null,t)}catch(e){}}}]),t}(),yr={linearity:.3,easing:e.bezier(0,0,.3,1)},vr=e.extend({deceleration:2500,maxSpeed:1400},yr),_r=e.extend({deceleration:20,maxSpeed:1400},yr),br=e.extend({deceleration:1e3,maxSpeed:360},yr),xr=e.extend({deceleration:1e3,maxSpeed:90},yr),wr=function(){function t(e){m(this,t),this._map=e,this.clear()}return y(t,[{key:"clear",value:function(){this._inertiaBuffer=[]}},{key:"record",value:function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:t})}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertiaBuffer,n=e.browser.now();t.length>0&&n-t[0].time>160;)t.shift()}},{key:"_onMoveEnd",value:function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var n,r={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},i=f(this._inertiaBuffer);try{for(i.s();!(n=i.n()).done;){var o=n.value.settings;r.zoom+=o.zoomDelta||0,r.bearing+=o.bearingDelta||0,r.pitch+=o.pitchDelta||0,o.panDelta&&r.pan._add(o.panDelta),o.around&&(r.around=o.around),o.pinchAround&&(r.pinchAround=o.pinchAround)}}catch(d){i.e(d)}finally{i.f()}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(r.pan.mag()){var u=Sr(r.pan.mag(),a,e.extend({},vr,t||{}));s.offset=r.pan.mult(u.amount/r.pan.mag()),s.center=this._map.transform.center,Er(s,u)}if(r.zoom){var l=Sr(r.zoom,a,_r);s.zoom=this._map.transform.zoom+l.amount,Er(s,l)}if(r.bearing){var c=Sr(r.bearing,a,br);s.bearing=this._map.transform.bearing+e.clamp(c.amount,-179,179),Er(s,c)}if(r.pitch){var h=Sr(r.pitch,a,xr);s.pitch=this._map.transform.pitch+h.amount,Er(s,h)}if(s.zoom||s.bearing){var p=void 0===r.pinchAround?r.around:r.pinchAround;s.around=p?this._map.unproject(p):this._map.getCenter()}return this.clear(),e.extend(s,{noMoveStart:!0})}}}]),t}();function Er(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Sr(t,n,r){var i=r.maxSpeed,o=r.linearity,a=r.deceleration,s=e.clamp(t*o/(n/1e3),-i,i),u=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*u,amount:s*(u/2)}}var Tr=function(t){d(i,t);var r=g(i);function i(t,o,a){var s,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};m(this,i);var l=n.mousePos(o.getCanvasContainer(),a),c=o.unproject(l);return(s=r.call(this,t,e.extend({point:l,lngLat:c,originalEvent:a},u)))._defaultPrevented=!1,s.target=o,s}return y(i,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),i}(e.Event),kr=function(t){d(i,t);var r=g(i);function i(t,o,a){var s;m(this,i);var u="touchend"===t?a.changedTouches:a.touches,l=n.touchPos(o.getCanvasContainer(),u),c=l.map((function(e){return o.unproject(e)})),h=l.reduce((function(e,t,n,r){return e.add(t.div(r.length))}),new e.Point(0,0));return(s=r.call(this,t,{points:l,point:h,lngLats:c,lngLat:o.unproject(h),originalEvent:a}))._defaultPrevented=!1,s}return y(i,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),i}(e.Event),Cr=function(e){d(n,e);var t=g(n);function n(e,r,i){var o;return m(this,n),(o=t.call(this,e,{originalEvent:i}))._defaultPrevented=!1,o}return y(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(e.Event),Ir=function(){function e(t,n){m(this,e),this._map=t,this._clickTolerance=n.clickTolerance}return y(e,[{key:"reset",value:function(){delete this._mousedownPos}},{key:"wheel",value:function(e){return this._firePreventable(new Cr(e.type,this._map,e))}},{key:"mousedown",value:function(e,t){return this._mousedownPos=t,this._firePreventable(new Tr(e.type,this._map,e))}},{key:"mouseup",value:function(e){this._map.fire(new Tr(e.type,this._map,e))}},{key:"click",value:function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new Tr(e.type,this._map,e))}},{key:"dblclick",value:function(e){return this._firePreventable(new Tr(e.type,this._map,e))}},{key:"mouseover",value:function(e){this._map.fire(new Tr(e.type,this._map,e))}},{key:"mouseout",value:function(e){this._map.fire(new Tr(e.type,this._map,e))}},{key:"touchstart",value:function(e){return this._firePreventable(new kr(e.type,this._map,e))}},{key:"touchmove",value:function(e){this._map.fire(new kr(e.type,this._map,e))}},{key:"touchend",value:function(e){this._map.fire(new kr(e.type,this._map,e))}},{key:"touchcancel",value:function(e){this._map.fire(new kr(e.type,this._map,e))}},{key:"_firePreventable",value:function(e){if(this._map.fire(e),e.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),Ar=function(){function e(t){m(this,e),this._map=t}return y(e,[{key:"reset",value:function(){this._delayContextMenu=!1,delete this._contextMenuEvent}},{key:"mousemove",value:function(e){this._map.fire(new Tr(e.type,this._map,e))}},{key:"mousedown",value:function(){this._delayContextMenu=!0}},{key:"mouseup",value:function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Tr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}},{key:"contextmenu",value:function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new Tr(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),Mr=function(){function t(e,n){m(this,t),this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1}return y(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"mousedown",value:function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(n.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}},{key:"mousemoveWindow",value:function(e,t){if(this._active){var r=t;if(!(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)){var i=this._startPos;this._lastPos=r,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var o=Math.min(i.x,r.x),a=Math.max(i.x,r.x),s=Math.min(i.y,r.y),u=Math.max(i.y,r.y);n.setTransform(this._box,"translate(".concat(o,"px,").concat(s,"px)")),this._box.style.width="".concat(a-o,"px"),this._box.style.height="".concat(u-s,"px")}}}},{key:"mouseupWindow",value:function(t,r){var i=this;if(this._active&&0===t.button){var o=this._startPos,a=r;if(this.reset(),n.suppressClick(),o.x!==a.x||o.y!==a.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:function(e){return e.fitScreenCoordinates(o,a,i._map.getBearing(),{linear:!1})}};this._fireEvent("boxzoomcancel",t)}}},{key:"keydown",value:function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}},{key:"reset",value:function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos}},{key:"_fireEvent",value:function(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}]),t}();function Lr(e,t){for(var n={},r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}var Nr=function(){function t(e){m(this,t),this.reset(),this.numTouches=e.numTouches}return y(t,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){var n,r=new e.Point(0,0),i=f(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;r._add(o)}}catch(a){i.e(a)}finally{i.f()}return r.div(t.length)}(n),this.touches=Lr(r,n)))}},{key:"touchmove",value:function(e,t,n){if(!this.aborted&&this.centroid){var r=Lr(n,t);for(var i in this.touches){var o=this.touches[i],a=r[i];(!a||a.dist(o)>30)&&(this.aborted=!0)}}}},{key:"touchend",value:function(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}}}]),t}(),Pr=function(){function e(t){m(this,e),this.singleTap=new Nr(t),this.numTaps=t.numTaps,this.reset()}return y(e,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(e,t,n){this.singleTap.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this.singleTap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var r=this.singleTap.touchend(e,t,n);if(r){var i=e.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(r)<30;if(i&&o||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}]),e}(),Or=function(){function e(){m(this,e),this._zoomIn=new Pr({numTouches:1,numTaps:2}),this._zoomOut=new Pr({numTouches:2,numTaps:1}),this.reset()}return y(e,[{key:"reset",value:function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}},{key:"touchstart",value:function(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var r=this,i=this._zoomIn.touchend(e,t,n),o=this._zoomOut.touchend(e,t,n);return i?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(i)},{originalEvent:e})}}):o?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(o)},{originalEvent:e})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Rr={0:1,2:2},Dr=function(){function e(t){m(this,e),this.reset(),this._clickTolerance=t.clickTolerance||1}return y(e,[{key:"reset",value:function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}},{key:"_correctButton",value:function(e,t){return!1}},{key:"_move",value:function(e,t){return{}}},{key:"mousedown",value:function(e,t){if(!this._lastPoint){var r=n.mouseButton(e);this._correctButton(e,r)&&(this._lastPoint=t,this._eventButton=r)}}},{key:"mousemoveWindow",value:function(e,t){var n=this._lastPoint;if(n)if(e.preventDefault(),function(e,t){var n=Rr[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}},{key:"mouseupWindow",value:function(e){this._lastPoint&&n.mouseButton(e)===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Fr=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"mousedown",value:function(e,t){a(s(n.prototype),"mousedown",this).call(this,e,t),this._lastPoint&&(this._active=!0)}},{key:"_correctButton",value:function(e,t){return 0===t&&!e.ctrlKey}},{key:"_move",value:function(e,t){return{around:t,panDelta:t.sub(e)}}}]),n}(Dr),zr=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(Dr),Br=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(Dr),Ur=function(){function t(e){m(this,t),this._minTouches=1,this._clickTolerance=e.clickTolerance||1,this.reset()}return y(t,[{key:"reset",value:function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)}},{key:"touchstart",value:function(e,t,n){return this._calculateTransform(e,t,n)}},{key:"touchmove",value:function(e,t,n){if(this._active&&!(n.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,n)}},{key:"touchend",value:function(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"_calculateTransform",value:function(t,n,r){r.length>0&&(this._active=!0);var i=Lr(r,n),o=new e.Point(0,0),a=new e.Point(0,0),s=0;for(var u in i){var l=i[u],c=this._touches[u];c&&(o._add(l),a._add(l.sub(c)),s++,i[u]=l)}if(this._touches=i,!(s<this._minTouches)&&a.mag()){var h=a.div(s);return this._sum._add(h),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:h}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}(),Vr=function(){function e(){m(this,e),this.reset()}return y(e,[{key:"reset",value:function(){this._active=!1,delete this._firstTwoTouches}},{key:"_start",value:function(e){}},{key:"_move",value:function(e,t,n){return{}}},{key:"touchstart",value:function(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}},{key:"touchmove",value:function(e,t,n){if(this._firstTwoTouches){e.preventDefault();var r=h(this._firstTwoTouches,2),i=r[0],o=r[1],a=jr(n,t,i),s=jr(n,t,o);if(a&&s){var u=this._aroundCenter?null:a.add(s).div(2);return this._move([a,s],u,e)}}}},{key:"touchend",value:function(e,t,r){if(this._firstTwoTouches){var i=h(this._firstTwoTouches,2),o=i[0],a=i[1],s=jr(r,t,o),u=jr(r,t,a);s&&u||(this._active&&n.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}();function jr(e,t,n){for(var r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function qr(e,t){return Math.log(e/t)/Math.LN2}var Gr=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"reset",value:function(){a(s(n.prototype),"reset",this).call(this),delete this._distance,delete this._startDistance}},{key:"_start",value:function(e){this._startDistance=this._distance=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(qr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:qr(this._distance,n),pinchAround:t}}}]),n}(Vr);function $r(e,t){return 180*e.angleWith(t)/Math.PI}var Hr=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"reset",value:function(){a(s(n.prototype),"reset",this).call(this),delete this._minDiameter,delete this._startVector,delete this._vector}},{key:"_start",value:function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$r(this._vector,n),pinchAround:t}}},{key:"_isBelowThreshold",value:function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,n=$r(e,this._startVector);return Math.abs(n)<t}}]),n}(Vr);function Xr(e){return Math.abs(e.y)>Math.abs(e.x)}var Wr=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"reset",value:function(){a(s(n.prototype),"reset",this).call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints}},{key:"_start",value:function(e){this._lastPoints=e,Xr(e[0].sub(e[1]))&&(this._valid=!1)}},{key:"_move",value:function(e,t,n){var r=e[0].sub(this._lastPoints[0]),i=e[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid)return this._lastPoints=e,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}}},{key:"gestureBeginsVertically",value:function(e,t,n){if(void 0!==this._valid)return this._valid;var r=e.mag()>=2,i=t.mag()>=2;if(r||i){if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var o=e.y>0==t.y>0;return Xr(e)&&Xr(t)&&o}}}]),n}(Vr),Yr={panStep:100,bearingStep:15,pitchStep:10},Zr=function(){function e(){m(this,e);var t=Yr;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}return y(e,[{key:"reset",value:function(){this._active=!1}},{key:"keydown",value:function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var n=0,r=0,i=0,o=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),o=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),o=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:function(s){var u=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:Jr,zoom:n?Math.round(u)+n*(e.shiftKey?2:1):u,bearing:s.getBearing()+r*t._bearingStep,pitch:s.getPitch()+i*t._pitchStep,offset:[-o*t._panStep,-a*t._panStep],center:s.getCenter()},{originalEvent:e})}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}}]),e}();function Jr(e){return e*(2-e)}var Kr=function(){function t(n,r){m(this,t),this._map=n,this._el=n.getCanvasContainer(),this._handler=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onTimeout"],this)}return y(t,[{key:"setZoomRate",value:function(e){this._defaultZoomRate=e}},{key:"setWheelZoomRate",value:function(e){this._wheelZoomRate=e}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active||void 0!==this._finishTimeout}},{key:"isZooming",value:function(){return!!this._zooming}},{key:"enable",value:function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"wheel",value:function(t){if(this.isEnabled()){var n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,r=e.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}}},{key:"_onTimeout",value:function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}},{key:"_start",value:function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var t=n.mousePos(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}}},{key:"renderFrame",value:function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform,r=function(){return n._terrainEnabled()?n.computeZoomRelativeTo(t._aroundCoord):n.zoom};if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,o=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==o&&(o=1/o);var a=r(),s=Math.pow(2,a),u="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):s;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(u*o))),"wheel"===this._type&&(this._startZoom=r(),this._easing=this._smoothOutEasing(200)),this._delta=0}var l,c="number"==typeof this._targetZoom?this._targetZoom:r(),h=this._startZoom,f=this._easing,p=!1;if("wheel"===this._type&&h&&f){var d=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),g=f(d);l=e.number(h,c,g),d<1?this._frameId||(this._frameId=!0):p=!0}else l=c,p=!0;return this._active=!0,p&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!p,zoomDelta:l-r(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}}},{key:"_smoothOutEasing",value:function(t){var n=e.ease;if(this._prevEase){var r=this._prevEase,i=(e.browser.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=e.bezier(a,s,.25,1)}return this._prevEase={start:e.browser.now(),duration:t,easing:n},n}},{key:"reset",value:function(){this._active=!1}}]),t}(),Qr=function(){function e(t,n){m(this,e),this._clickZoom=t,this._tapZoom=n}return y(e,[{key:"enable",value:function(){this._clickZoom.enable(),this._tapZoom.enable()}},{key:"disable",value:function(){this._clickZoom.disable(),this._tapZoom.disable()}},{key:"isEnabled",value:function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}},{key:"isActive",value:function(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}]),e}(),ei=function(){function e(){m(this,e),this.reset()}return y(e,[{key:"reset",value:function(){this._active=!1}},{key:"dblclick",value:function(e,t){return e.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),ti=function(){function e(){m(this,e),this._tap=new Pr({numTouches:1,numTaps:1}),this.reset()}return y(e,[{key:"reset",value:function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}},{key:"touchstart",value:function(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}},{key:"touchmove",value:function(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),ni=function(){function e(t,n,r){m(this,e),this._el=t,this._mousePan=n,this._touchPan=r}return y(e,[{key:"enable",value:function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}},{key:"disable",value:function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}},{key:"isEnabled",value:function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}},{key:"isActive",value:function(){return this._mousePan.isActive()||this._touchPan.isActive()}}]),e}(),ri=function(){function e(t,n,r){m(this,e),this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=n,this._mousePitch=r}return y(e,[{key:"enable",value:function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}},{key:"disable",value:function(){this._mouseRotate.disable(),this._mousePitch.disable()}},{key:"isEnabled",value:function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}},{key:"isActive",value:function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}]),e}(),ii=function(){function e(t,n,r,i){m(this,e),this._el=t,this._touchZoom=n,this._touchRotate=r,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}return y(e,[{key:"enable",value:function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}},{key:"disable",value:function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this._rotationDisabled=!0,this._touchRotate.disable()}},{key:"enableRotation",value:function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}]),e}(),oi=function(e){return e.zoom||e.drag||e.pitch||e.rotate},ai=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return n}(e.Event),si=function(){function t(){m(this,t),this.constants=[1,1,.01],this.radius=0}return y(t,[{key:"setup",value:function(t,n){var r=e.sub([],n,t);this.radius=e.length(r[2]<0?e.div([],r,this.constants):[r[0],r[1],0])}},{key:"projectRay",value:function(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);var n=e.scale$2([],t,this.radius);if(n[2]>0){var r=e.scale$2([],[0,0,1],e.dot(n,[0,0,1])),i=e.scale$2([],e.normalize([],[n[0],n[1],0]),this.radius),o=e.add([],n,e.scale$2([],e.sub([],e.add([],i,r),n),2));n[0]=o[0],n[1]=o[1]}return n}}]),t}();function ui(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var li=function(){function t(r,i){m(this,t),this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new wr(r),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new si,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(i),e.bindAll(["handleEvent","handleWindowEvent"],this);var o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[e.window,"blur",void 0]];var a,s=f(this._listeners);try{for(s.s();!(a=s.n()).done;){var u=h(a.value,3),l=u[0],c=u[1],p=u[2];n.addEventListener(l,c,l===e.window.document?this.handleWindowEvent:this.handleEvent,p)}}catch(d){s.e(d)}finally{s.f()}}return y(t,[{key:"destroy",value:function(){var t,r=f(this._listeners);try{for(r.s();!(t=r.n()).done;){var i=h(t.value,3),o=i[0],a=i[1],s=i[2];n.removeEventListener(o,a,o===e.window.document?this.handleWindowEvent:this.handleEvent,s)}}catch(u){r.e(u)}finally{r.f()}}},{key:"_addDefaultHandlers",value:function(e){var t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new Ir(t,e));var r=t.boxZoom=new Mr(t,e);this._add("boxZoom",r);var i=new Or,o=new ei;t.doubleClickZoom=new Qr(o,i),this._add("tapZoom",i),this._add("clickZoom",o);var a=new ti;this._add("tapDragZoom",a);var s=t.touchPitch=new Wr;this._add("touchPitch",s);var u=new zr(e),l=new Br(e);t.dragRotate=new ri(e,u,l),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",l,["mouseRotate"]);var c=new Fr(e),h=new Ur(e);t.dragPan=new ni(n,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);var f=new Hr,p=new Gr;t.touchZoomRotate=new ii(n,p,f,a),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]);var d=t.scrollZoom=new Kr(t,this);this._add("scrollZoom",d,["mousePan"]);var g=t.keyboard=new Zr;this._add("keyboard",g),this._add("blockableMapEvent",new Ar(t));for(var m=0,y=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<y.length;m++){var v=y[m];e.interactive&&e[v]&&t[v].enable(e[v])}}},{key:"_add",value:function(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}},{key:"stop",value:function(e){if(!this._updatingCamera){var t,n=f(this._handlers);try{for(n.s();!(t=n.n()).done;)t.value.handler.reset()}catch(r){n.e(r)}finally{n.f()}this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}},{key:"isActive",value:function(){var e,t=f(this._handlers);try{for(t.s();!(e=t.n()).done;)if(e.value.handler.isActive())return!0}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"isZooming",value:function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this._eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(oi(this._eventsInProgress))||this.isZooming()}},{key:"_blockedByActive",value:function(e,t,n){for(var r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}},{key:"handleWindowEvent",value:function(e){this.handleEvent(e,"".concat(e.type,"Window"))}},{key:"_getMapTouches",value:function(e){var t,n=[],r=f(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this._el.contains(i.target)&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"handleEvent",value:function(e,t){if("blur"!==e.type){this._updatingCamera=!0;var r,i="renderFrame"===e.type?void 0:e,o={needsRenderFrame:!1},a={},s={},u=e.touches?this._getMapTouches(e.touches):void 0,l=u?n.touchPos(this._el,u):n.mousePos(this._el,e),c=f(this._handlers);try{for(c.s();!(r=c.n()).done;){var h=r.value,p=h.handlerName,d=h.handler,g=h.allowed;if(d.isEnabled()){var m=void 0;this._blockedByActive(s,g,p)?d.reset():d[t||e.type]&&(m=d[t||e.type](e,l,u),this.mergeHandlerResult(o,a,m,p,i),m&&m.needsRenderFrame&&this._triggerRenderFrame()),(m||d.isActive())&&(s[p]=d)}}}catch(b){c.e(b)}finally{c.f()}var y={};for(var v in this._previousActiveHandlers)s[v]||(y[v]=i);this._previousActiveHandlers=s,(Object.keys(y).length||ui(o))&&(this._changes.push([o,a,y]),this._triggerRenderFrame()),(Object.keys(s).length||ui(o))&&this._map._stop(!0),this._updatingCamera=!1;var _=o.cameraAnimation;_&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_(this._map))}else this.stop(!0)}},{key:"mergeHandlerResult",value:function(t,n,r,i,o){if(r){e.extend(t,r);var a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}}},{key:"_applyChanges",value:function(){var t,n={},r={},i={},o=f(this._changes);try{for(o.s();!(t=o.n()).done;){var a=h(t.value,3),s=a[0],u=a[1],l=a[2];s.panDelta&&(n.panDelta=(n.panDelta||new e.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(n.around=s.around),void 0!==s.aroundCoord&&(n.aroundCoord=s.aroundCoord),void 0!==s.pinchAround&&(n.pinchAround=s.pinchAround),s.noInertia&&(n.noInertia=s.noInertia),e.extend(r,u),e.extend(i,l)}}catch(c){o.e(c)}finally{o.f()}this._updateMapTransform(n,r,i),this._changes=[]}},{key:"_updateMapTransform",value:function(t,n,r){var i=this,o=this._map,a=o.transform,s=function(e){return[e.x,e.y,e.z]};if(function(e){var t=i._eventsInProgress.drag;return t&&!i._handlersById[t.handlerName].isActive()}()&&!ui(t)){var u=a.zoom;a.cameraElevationReference="sea",a.recenterOnTerrain(),a.cameraElevationReference="ground",u!==a.zoom&&this._map._update(!0)}if(!ui(t))return this._fireEvents(n,r,!0);var l=t.panDelta,c=t.zoomDelta,h=t.bearingDelta,f=t.pitchDelta,p=t.around,d=t.aroundCoord,g=t.pinchAround;void 0!==g&&(p=g),n.drag&&!i._eventsInProgress.drag&&p&&(this._dragOrigin=s(a.pointCoordinate3D(p)),this._trackingEllipsoid.setup(a._camera.position,this._dragOrigin)),a.cameraElevationReference="sea",o._stop(!0),p=p||o.transform.centerPoint,h&&(a.bearing+=h),f&&(a.pitch+=f),a._updateCameraState();var m=[0,0,0];if(l){var y=a.screenPointToMercatorRay(p),v=a.screenPointToMercatorRay(p.sub(l)),_=this._trackingEllipsoid.projectRay(y.dir),b=this._trackingEllipsoid.projectRay(v.dir);m[0]=b[0]-_[0],m[1]=b[1]-_[1]}var x=a.zoom,w=[0,0,0];if(c){var E=s(d||a.pointCoordinate3D(p)),S={dir:e.normalize([],e.sub([],E,a._camera.position))},T=a.screenPointToMercatorRay(a.centerPoint);if(S.dir[2]<0){var k=e.altitudeFromMercatorZ(E[2],E[1]),C=a.rayIntersectionCoordinate(a.pointRayIntersection(a.centerPoint,k)),I=a.zoomDeltaToMovement(s(C),c)*(T.dir[2]/S.dir[2]);e.scale$2(w,S.dir,I)}else if(a._terrainEnabled()){var A=a.zoomDeltaToMovement(E,c);e.scale$2(w,S.dir,A)}}var M=e.add(m,m,w);a._translateCameraConstrained(M),c&&Math.abs(a.zoom-x)>1e-4&&a.recenterOnTerrain(),a.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,r,!0)}},{key:"_fireEvents",value:function(t,n,r){var i=this,o=oi(this._eventsInProgress),a=oi(t),s={};for(var u in t){var l=t[u].originalEvent;this._eventsInProgress[u]||(s["".concat(u,"start")]=l),this._eventsInProgress[u]=t[u]}for(var c in!o&&a&&this._fireEvent("movestart",a.originalEvent),s)this._fireEvent(c,s[c]);for(var h in a&&this._fireEvent("move",a.originalEvent),t){var f=t[h].originalEvent;this._fireEvent(h,f)}var p,d={};for(var g in this._eventsInProgress){var m=this._eventsInProgress[g],y=m.handlerName,v=m.originalEvent;this._handlersById[y].isActive()||(delete this._eventsInProgress[g],p=n[y]||v,d["".concat(g,"end")]=p)}for(var _ in d)this._fireEvent(_,d[_]);var b=oi(this._eventsInProgress);if(r&&(o||a)&&!b){this._updatingCamera=!0;var x=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),w=function(e){return 0!==e&&-i._bearingSnap<e&&e<i._bearingSnap};x?(w(x.bearing||this._map.getBearing())&&(x.bearing=0),this._map.easeTo(x,{originalEvent:p})):(this._map.fire(new e.Event("moveend",{originalEvent:p})),w(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}},{key:"_fireEvent",value:function(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}},{key:"_requestFrame",value:function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(t){delete e._frameId,e.handleEvent(new ai("renderFrame",{timeStamp:t})),e._applyChanges()}))}},{key:"_triggerRenderFrame",value:function(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}]),t}(),ci=function(t){d(r,t);var n=g(r);function r(t,o){var a;return m(this,r),(a=n.call(this))._moving=!1,a._zooming=!1,a.transform=t,a._bearingSnap=o.bearingSnap,e.bindAll(["_renderFrameCallback"],i(a)),a}return y(r,[{key:"getCenter",value:function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}},{key:"setCenter",value:function(e,t){return this.jumpTo({center:e},t)}},{key:"panBy",value:function(t,n,r){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)}},{key:"panTo",value:function(t,n,r){return this.easeTo(e.extend({center:t},n),r)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setZoom",value:function(e,t){return this.jumpTo({zoom:e},t),this}},{key:"zoomTo",value:function(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)}},{key:"zoomIn",value:function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}},{key:"zoomOut",value:function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"setBearing",value:function(e,t){return this.jumpTo({bearing:e},t),this}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(e,t){return this.jumpTo({padding:e},t),this}},{key:"rotateTo",value:function(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)}},{key:"resetNorth",value:function(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}},{key:"resetNorthPitch",value:function(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}},{key:"snapToNorth",value:function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setPitch",value:function(e,t){return this.jumpTo({pitch:e},t),this}},{key:"cameraForBounds",value:function(t,n){t=e.LngLatBounds.convert(t);var r=n&&n.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),r,n)}},{key:"_extendCameraOptions",value:function(t){var n={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){var r=t.padding;t.padding={top:r,bottom:r,right:r,left:r}}return t.padding=e.extend(n,t.padding),t}},{key:"_cameraForBoxAndBearing",value:function(t,n,r,i){var o=this._extendCameraOptions(i),a=this.transform,s=a.padding,u=a.project(e.LngLat.convert(t)),l=a.project(e.LngLat.convert(n)),c=u.rotate(-e.degToRad(r)),h=l.rotate(-e.degToRad(r)),f=new e.Point(Math.max(c.x,h.x),Math.max(c.y,h.y)),p=new e.Point(Math.min(c.x,h.x),Math.min(c.y,h.y)),d=f.sub(p),g=(a.width-(s.left+s.right+o.padding.left+o.padding.right))/d.x,m=(a.height-(s.top+s.bottom+o.padding.top+o.padding.bottom))/d.y;if(!(m<0||g<0)){var y=Math.min(a.scaleZoom(a.scale*Math.min(g,m)),o.maxZoom),v="number"==typeof o.offset.x?new e.Point(o.offset.x,o.offset.y):e.Point.convert(o.offset),_=new e.Point((o.padding.left-o.padding.right)/2,(o.padding.top-o.padding.bottom)/2).rotate(r*Math.PI/180),b=v.add(_).mult(a.scale/a.zoomScale(y));return{center:a.unproject(u.add(l).div(2).sub(b)),zoom:y,bearing:r}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}},{key:"_cameraForBox",value:function(t,n,r,i,o){var a=this._extendCameraOptions(o);r=r||0,i=i||0,t=e.LngLat.convert(t),n=e.LngLat.convert(n);var s=this.transform.clone();s.padding=a.padding;var u=this.getFreeCameraOptions(),l=new e.LngLat(.5*(t.lng+n.lng),.5*(t.lat+n.lat)),c=.5*(r+i);if(!(s._camera.position[2]<e.mercatorZfromAltitude(c,l.lat))){u.lookAtPoint(l),s.setFreeCameraOptions(u);var h,f,p=e.MercatorCoordinate.fromLngLat(t),d=e.MercatorCoordinate.fromLngLat(n),g=s.pointRayIntersection(s.centerPoint,c),m=[(h=s.rayIntersectionCoordinate(g)).x,h.y,h.z],y=s.screenPointToMercatorRay(s.centerPoint),v=0;do{var _=Math.floor(s.zoom),b=1<<_,x=Math.min(b*p.x,b*d.x),w=Math.min(b*p.y,b*d.y),E=Math.max(b*p.x,b*d.x),S=Math.max(b*p.y,b*d.y),T=new e.Aabb([x,w,r],[E,S,i]),k=e.Frustum.fromInvProjectionMatrix(s.invProjMatrix,s.worldSize,_);if(2!==T.intersects(k)){f&&(s._camera.position=e.scaleAndAdd([],s._camera.position,y.dir,-f),s._updateStateFromCamera());break}var C=e.sub([],s._camera.position,m);f=.5*e.length(C),s._camera.position=e.scaleAndAdd([],s._camera.position,y.dir,f);try{s._updateStateFromCamera()}catch(t){return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++v<10);return{center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}},{key:"fitBounds",value:function(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)}},{key:"_raycastElevationBox",value:function(t,n){var r=this.transform.elevation;if(r){var i=new e.Point(t.x,n.y),o=new e.Point(n.x,t.y),a=r.pointCoordinate(t);if(a){var s=r.pointCoordinate(n);if(s){var u=r.pointCoordinate(i);if(u){var l=r.pointCoordinate(o);if(l){var c=new e.MercatorCoordinate(a[0],a[1]).toLngLat(),h=new e.MercatorCoordinate(s[0],s[1]).toLngLat(),f=new e.MercatorCoordinate(u[0],u[1]).toLngLat(),p=new e.MercatorCoordinate(l[0],l[1]).toLngLat(),d=Math.min(c.lng,Math.min(h.lng,Math.min(f.lng,p.lng))),g=Math.min(c.lat,Math.min(h.lat,Math.min(f.lat,p.lat))),m=Math.max(c.lng,Math.max(h.lng,Math.max(f.lng,p.lng))),y=Math.max(c.lat,Math.max(h.lat,Math.max(f.lat,p.lat))),v=Math.min(a[3],Math.min(s[3],Math.min(u[3],l[3]))),_=Math.max(a[3],Math.max(s[3],Math.max(u[3],l[3])));return{minLngLat:new e.LngLat(d,g),maxLngLat:new e.LngLat(m,y),minAltitude:v,maxAltitude:_}}}}}}}},{key:"fitScreenCoordinates",value:function(t,n,r,i,o){var a,s,u,l,c=e.Point.convert(t),h=e.Point.convert(n),f=this._raycastElevationBox(c,h);if(f)a=f.minLngLat,s=f.maxLngLat,u=f.minAltitude,l=f.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(c,h))return this;a=this.transform.pointLocation(c),s=this.transform.pointLocation(h)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(t)),this.transform.pointLocation(e.Point.convert(n)),r,i):this._cameraForBox(a,s,u,l,i),i,o)}},{key:"_fitInternal",value:function(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}},{key:"jumpTo",value:function(t,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),o&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),a&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n))}},{key:"getFreeCameraOptions",value:function(){return this.transform.getFreeCameraOptions()}},{key:"setFreeCameraOptions",value:function(t,n){this.stop();var r=this.transform,i=r.zoom,o=r.pitch,a=r.bearing;r.setFreeCameraOptions(t);var s=i!==r.zoom,u=o!==r.pitch,l=a!==r.bearing;return this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),s&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),l&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),u&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)),this}},{key:"easeTo",value:function(t,n){var r=this;this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.browser.prefersReducedMotion)&&(t.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u=this.getPadding(),l="zoom"in t?+t.zoom:o,c="bearing"in t?this._normalizeBearing(t.bearing,a):a,h="pitch"in t?+t.pitch:s,f="padding"in t?t.padding:i.padding,p=e.Point.convert(t.offset),d=i.centerPoint.add(p),g=i.pointLocation(d),m=e.LngLat.convert(t.center||g);this._normalizeCenter(m);var y,v,_=i.project(g),b=i.project(m).sub(_),x=i.zoomScale(l-o);t.around&&(y=e.LngLat.convert(t.around),v=i.locationPoint(y));var w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==o,this._rotating=this._rotating||a!==c,this._pitching=this._pitching||h!==s,this._padding=!i.isPaddingEqual(f),this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,w),this._ease((function(t){if(r._zooming&&(i.zoom=e.number(o,l,t)),r._rotating&&(i.bearing=e.number(a,c,t)),r._pitching&&(i.pitch=e.number(s,h,t)),r._padding&&(i.interpolatePadding(u,f,t),d=i.centerPoint.add(p)),y)i.setLocationAtPoint(y,v);else{var g=i.zoomScale(i.zoom-o),m=l>o?Math.min(2,x):Math.max(.5,x),w=Math.pow(m,1-t),E=i.unproject(_.add(b.mult(t*w)).mult(g));i.setLocationAtPoint(i.renderWorldCopies?E.wrap():E,d)}r._fireMoveEvents(n)}),(function(e){i.recenterOnTerrain(),r._afterEase(n,e)}),t),this}},{key:"_prepareEase",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))}},{key:"_fireMoveEvents",value:function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}},{key:"_afterEase",value:function(t,n){if(!this._easeId||!n||this._easeId!==n){delete this._easeId,this.transform.cameraElevationReference="ground";var r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),o&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}}},{key:"flyTo",value:function(t,n){var r=this;if(!t.essential&&e.browser.prefersReducedMotion){var i=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var o=this.transform,a=this.getZoom(),s=this.getBearing(),u=this.getPitch(),l=this.getPadding(),c="zoom"in t?e.clamp(+t.zoom,o.minZoom,o.maxZoom):a,h="bearing"in t?this._normalizeBearing(t.bearing,s):s,f="pitch"in t?+t.pitch:u,p="padding"in t?t.padding:o.padding,d=o.zoomScale(c-a),g=e.Point.convert(t.offset),m=o.centerPoint.add(g),y=o.pointLocation(m),v=e.LngLat.convert(t.center||y);this._normalizeCenter(v);var _=o.project(y),b=o.project(v).sub(_),x=t.curve,w=Math.max(o.width,o.height),E=w/d,S=b.mag();if("minZoom"in t){var T=e.clamp(Math.min(t.minZoom,a,c),o.minZoom,o.maxZoom),k=w/o.zoomScale(T-a);x=Math.sqrt(k/S*2)}var C=x*x;function I(e){var t=(E*E-w*w+(e?-1:1)*C*C*S*S)/(2*(e?E:w)*C*S);return Math.log(Math.sqrt(t*t+1)-t)}function A(e){return(Math.exp(e)-Math.exp(-e))/2}function M(e){return(Math.exp(e)+Math.exp(-e))/2}var L=I(0),N=function(e){return M(L)/M(L+x*e)},P=function(e){return w*((M(L)*(A(t=L+x*e)/M(t))-A(L))/C)/S;var t},O=(I(1)-L)/x;if(Math.abs(S)<1e-6||!isFinite(O)){if(Math.abs(w-E)<1e-6)return this.easeTo(t,n);var R=E<w?-1:1;O=Math.abs(Math.log(E/w))/x,P=function(){return 0},N=function(e){return Math.exp(R*x*e)}}return t.duration="duration"in t?+t.duration:1e3*O/("screenSpeed"in t?+t.screenSpeed/x:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=s!==h,this._pitching=f!==u,this._padding=!o.isPaddingEqual(p),this._prepareEase(n,!1),this._ease((function(t){var i=t*O,d=1/N(i);o.zoom=1===t?c:a+o.scaleZoom(d),r._rotating&&(o.bearing=e.number(s,h,t)),r._pitching&&(o.pitch=e.number(u,f,t)),r._padding&&(o.interpolatePadding(l,p,t),m=o.centerPoint.add(g));var y=1===t?v:o.unproject(_.add(b.mult(P(i))).mult(d));o.setLocationAtPoint(o.renderWorldCopies?y.wrap():y,m),o._updateCenterElevation(),r._fireMoveEvents(n)}),(function(){return r._afterEase(n)}),t),this}},{key:"isEasing",value:function(){return!!this._easeFrameId}},{key:"stop",value:function(){return this._stop()}},{key:"_stop",value:function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this,t)}if(!e){var r=this.handlers;r&&r.stop(!1)}return this}},{key:"_ease",value:function(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.browser.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}},{key:"_renderFrameCallback",value:function(){var t=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}},{key:"_normalizeBearing",value:function(t,n){t=e.wrap(t,-180,180);var r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t}},{key:"_normalizeCenter",value:function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}}}]),r}(e.Evented),hi=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(this,t),this.options=n,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}return y(t,[{key:"getDefaultPosition",value:function(){return"bottom-right"}},{key:"onAdd",value:function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=n.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}},{key:"onRemove",value:function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}},{key:"_setElementTitle",value:function(e,t){var n=this._map._getUIString("AttributionControl.".concat(t));e.title=n,e.setAttribute("aria-label",n)}},{key:"_toggleAttribution",value:function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}},{key:"_updateEditLink",value:function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){var r=n.reduce((function(e,t,r){return t.value&&(e+="".concat(t.key,"=").concat(t.value).concat(r<n.length-1?"&":"")),e}),"?");t.href="".concat(e.config.FEEDBACK_URL,"/").concat(r).concat(this._map._hash?this._map._hash.getHashString(!0):""),t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}},{key:"_updateData",value:function(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}},{key:"_updateAttributions",value:function(){if(this._map.style){var e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((function(e){return"string"!=typeof e?"":e}))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style._sourceCaches;for(var r in n){var i=n[r];if(i.used){var o=i.getSource();o.attribution&&e.indexOf(o.attribution)<0&&e.push(o.attribution)}}e.sort((function(e,t){return e.length-t.length}));var a=(e=e.filter((function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}))).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,e.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}}},{key:"_updateCompact",value:function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}]),t}(),fi=function(){function t(){m(this,t),e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)}return y(t,[{key:"onAdd",value:function(e){this._map=e,this._container=n.create("div","mapboxgl-ctrl");var t=n.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}},{key:"onRemove",value:function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}},{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_updateLogo",value:function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}},{key:"_logoRequired",value:function(){if(this._map.style){var e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(var t in e){var n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}}},{key:"_updateCompact",value:function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}]),t}(),pi=function(){function e(){m(this,e),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}return y(e,[{key:"add",value:function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}},{key:"remove",value:function(e){var t,n=this._currentlyRunning,r=n?this._queue.concat(n):this._queue,i=f(r);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o.id===e)return void(o.cancelled=!0)}}catch(a){i.e(a)}finally{i.f()}}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._currentlyRunning=this._queue;this._queue=[];var n,r=f(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.cancelled&&(i.callback(e),this._cleared))break}}catch(o){r.e(o)}finally{r.f()}this._cleared=!1,this._currentlyRunning=!1}},{key:"clear",value:function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}]),e}(),di={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},gi=e.window,mi=gi.HTMLImageElement,yi=gi.HTMLElement,vi=gi.ImageBitmap,_i={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function bi(e){e.parentNode&&e.parentNode.removeChild(e)}var xi={showCompass:!0,showZoom:!0,visualizePitch:!1},wi=function(){function t(r,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];m(this,t),this._clickTolerance=10,this.element=i,this.mouseRotate=new zr({clickTolerance:r.dragRotate._mouseRotate._clickTolerance}),this.map=r,o&&(this.mousePitch=new Br({clickTolerance:r.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(i,"mousedown",this.mousedown),n.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(i,"touchmove",this.touchmove),n.addEventListener(i,"touchend",this.touchend),n.addEventListener(i,"touchcancel",this.reset)}return y(t,[{key:"down",value:function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),n.disableDrag()}},{key:"move",value:function(e,t){var n=this.map,r=this.mouseRotate.mousemoveWindow(e,t);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){var i=this.mousePitch.mousemoveWindow(e,t);i&&i.pitchDelta&&n.setPitch(n.getPitch()+i.pitchDelta)}}},{key:"off",value:function(){var e=this.element;n.removeEventListener(e,"mousedown",this.mousedown),n.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(e,"touchmove",this.touchmove),n.removeEventListener(e,"touchend",this.touchend),n.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}},{key:"offTemp",value:function(){n.enableDrag(),n.removeEventListener(e.window,"mousemove",this.mousemove),n.removeEventListener(e.window,"mouseup",this.mouseup)}},{key:"mousedown",value:function(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),n.mousePos(this.element,t)),n.addEventListener(e.window,"mousemove",this.mousemove),n.addEventListener(e.window,"mouseup",this.mouseup)}},{key:"mousemove",value:function(e){this.move(e,n.mousePos(this.element,e))}},{key:"mouseup",value:function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}},{key:"touchstart",value:function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))}},{key:"touchmove",value:function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=n.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))}},{key:"touchend",value:function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}},{key:"reset",value:function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}]),t}();function Ei(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){var i=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),a=360*Math.ceil(Math.abs(t.lng-r.center.lng)/360),s=r.locationPoint(t).distSqr(n),u=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<s&&(u||Math.abs(i.lng-r.center.lng)<a)?t=i:r.locationPoint(o).distSqr(n)<s&&(u||Math.abs(o.lng-r.center.lng)<a)&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){var l=r.locationPoint(t);if(l.x>=0&&l.y>=0&&l.x<=r.width&&l.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}var Si={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ti(e,t,n){var r=e.classList;for(var i in Si)r.remove("mapboxgl-".concat(n,"-anchor-").concat(i));r.add("mapboxgl-".concat(n,"-anchor-").concat(t))}var ki,Ci=function(t){d(o,t);var r=g(o);function o(t,a){var s;if(m(this,o),s=r.call(this),(t instanceof e.window.HTMLElement||a)&&(t=e.extend({element:t},a)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],i(s)),s._anchor=t&&t.anchor||"center",s._color=t&&t.color||"#3FB1CE",s._scale=t&&t.scale||1,s._draggable=t&&t.draggable||!1,s._clickTolerance=t&&t.clickTolerance||0,s._isDragging=!1,s._state="inactive",s._rotation=t&&t.rotation||0,s._rotationAlignment=t&&t.rotationAlignment||"auto",s._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:s._rotationAlignment,t&&t.element)s._element=t.element,s._offset=e.Point.convert(t&&t.offset||[0,0]);else{s._defaultMarker=!0,s._element=n.create("div"),s._element.setAttribute("aria-label","Map marker");var l=n.createNS("http://www.w3.org/2000/svg","svg"),c=41,h=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height","".concat(c,"px")),l.setAttributeNS(null,"width","".concat(h,"px")),l.setAttributeNS(null,"viewBox","0 0 ".concat(h," ").concat(c));var f=n.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"stroke","none"),f.setAttributeNS(null,"stroke-width","1"),f.setAttributeNS(null,"fill","none"),f.setAttributeNS(null,"fill-rule","evenodd");var p=n.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill-rule","nonzero");var d=n.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(3.0, 29.0)"),d.setAttributeNS(null,"fill","#000000");for(var g=0,y=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];g<y.length;g++){var v=y[g],_=n.createNS("http://www.w3.org/2000/svg","ellipse");_.setAttributeNS(null,"opacity","0.04"),_.setAttributeNS(null,"cx","10.5"),_.setAttributeNS(null,"cy","5.80029008"),_.setAttributeNS(null,"rx",v.rx),_.setAttributeNS(null,"ry",v.ry),d.appendChild(_)}var b=n.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill",s._color);var x=n.createNS("http://www.w3.org/2000/svg","path");x.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),b.appendChild(x);var w=n.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"opacity","0.25"),w.setAttributeNS(null,"fill","#000000");var E=n.createNS("http://www.w3.org/2000/svg","path");E.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),w.appendChild(E);var S=n.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"transform","translate(6.0, 7.0)"),S.setAttributeNS(null,"fill","#FFFFFF");var T=n.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(8.0, 8.0)");var k=n.createNS("http://www.w3.org/2000/svg","circle");k.setAttributeNS(null,"fill","#000000"),k.setAttributeNS(null,"opacity","0.25"),k.setAttributeNS(null,"cx","5.5"),k.setAttributeNS(null,"cy","5.5"),k.setAttributeNS(null,"r","5.4999962");var C=n.createNS("http://www.w3.org/2000/svg","circle");C.setAttributeNS(null,"fill","#FFFFFF"),C.setAttributeNS(null,"cx","5.5"),C.setAttributeNS(null,"cy","5.5"),C.setAttributeNS(null,"r","5.4999962"),T.appendChild(k),T.appendChild(C),p.appendChild(d),p.appendChild(b),p.appendChild(w),p.appendChild(S),p.appendChild(T),l.appendChild(p),l.setAttributeNS(null,"height","".concat(c*s._scale,"px")),l.setAttributeNS(null,"width","".concat(h*s._scale,"px")),s._element.appendChild(l),s._offset=e.Point.convert(t&&t.offset||[0,-14])}return s._element.classList.add("mapboxgl-marker"),s._element.addEventListener("dragstart",(function(e){e.preventDefault()})),s._element.addEventListener("mousedown",(function(e){e.preventDefault()})),Ti(s._element,s._anchor,"marker"),s._popup=null,u(s)}return y(o,[{key:"addTo",value:function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}},{key:"remove",value:function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}},{key:"getElement",value:function(){return this._element}},{key:"setPopup",value:function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var t=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}},{key:"_onKeyPress",value:function(e){var t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}},{key:"_onMapClick",value:function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}},{key:"getPopup",value:function(){return this._popup}},{key:"togglePopup",value:function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this}},{key:"_updateOcclusion",value:function(){this._occlusionTimer||(this._occlusionTimer=setTimeout(this._onOcclusionTimer.bind(this),60))}},{key:"_onOcclusionTimer",value:function(){var e=this._map.transform,t=this._pos?this._pos.sub(this._transformedOffset()):null;if(t&&t.x>=0&&t.x<e.width&&t.y>=0&&t.y<e.height){var n=this._map.unproject(t),r=this._map.getFreeCameraOptions();if(r.position){var i=r.position.toLngLat(),o=i.distanceTo(n),a=i.distanceTo(this._lngLat);this._element.classList.toggle("mapboxgl-marker-occluded",o<.9*a)}}this._occlusionTimer=null}},{key:"_update",value:function(e){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ei(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset()),this._map.transform.elevation&&this._updateOcclusion();var t="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?t="rotateZ(".concat(this._rotation,"deg)"):"map"===this._rotationAlignment&&(t="rotateZ(".concat(this._rotation-this._map.getBearing(),"deg)"));var r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r="rotateX(".concat(this._map.getPitch(),"deg)")),e&&"moveend"!==e.type||(this._pos=this._pos.round()),n.setTransform(this._element,"".concat(Si[this._anchor]," translate(").concat(this._pos.x,"px, ").concat(this._pos.y,"px) ").concat(r," ").concat(t))}}},{key:"_transformedOffset",value:function(){if(!this._defaultMarker)return this._offset;var e=this._map.transform,t=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&t._rotate(e.angle),"map"===this._pitchAlignment&&(t.y*=Math.cos(e._pitch)),t}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(t){return this._offset=e.Point.convert(t),this._update(),this}},{key:"_onMove",value:function(t){if(!this._isDragging){var n=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=n}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))}},{key:"_onUp",value:function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}},{key:"_addDragHandler",value:function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}},{key:"setDraggable",value:function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}},{key:"isDraggable",value:function(){return this._draggable}},{key:"setRotation",value:function(e){return this._rotation=e||0,this._update(),this}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotationAlignment",value:function(e){return this._rotationAlignment=e||"auto",this._update(),this}},{key:"getRotationAlignment",value:function(){return this._rotationAlignment}},{key:"setPitchAlignment",value:function(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}},{key:"getPitchAlignment",value:function(){return this._pitchAlignment}}]),o}(e.Evented),Ii={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ai=0,Mi=!1,Li={maxWidth:100,unit:"metric"};function Ni(e,t,n){var r=n&&n.maxWidth||100,i=e._container.clientHeight/2,o=e.unproject([0,i]),a=e.unproject([r,i]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){var u=3.2808*s;u>5280?Pi(t,r,u/5280,e._getUIString("ScaleControl.Miles")):Pi(t,r,u,e._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?Pi(t,r,s/1852,e._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Pi(t,r,s/1e3,e._getUIString("ScaleControl.Kilometers")):Pi(t,r,s,e._getUIString("ScaleControl.Meters"))}function Pi(e,t,n,r){var i=function(e){var t=Math.pow(10,"".concat(Math.floor(e)).length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n))}(n);e.style.width="".concat(t*(i/n),"px"),e.innerHTML="".concat(i,"&nbsp;").concat(r)}var Oi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ri=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Di={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:function(l){d(h,l);var c=g(h);function h(t){var n;if(m(this,h),null!=(t=e.extend({},_i,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if((n=c.call(this,new gr(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t))._interactive=t.interactive,n._maxTileCacheSize=t.maxTileCacheSize,n._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,n._preserveDrawingBuffer=t.preserveDrawingBuffer,n._antialias=t.antialias,n._trackResize=t.trackResize,n._bearingSnap=t.bearingSnap,n._refreshExpiredTiles=t.refreshExpiredTiles,n._fadeDuration=t.fadeDuration,n._isInitialLoad=!0,n._crossSourceCollisions=t.crossSourceCollisions,n._crossFadingFactor=1,n._collectResourceTiming=t.collectResourceTiming,n._renderTaskQueue=new pi,n._controls=[],n._mapId=e.uniqueId(),n._locale=e.extend({},di,t.locale),n._clickTolerance=t.clickTolerance,n._requestManager=new e.RequestManager(t.transformRequest,t.accessToken),"string"==typeof t.container){if(n._container=e.window.document.getElementById(t.container),!n._container)throw new Error("Container '".concat(t.container,"' not found."))}else{if(!(t.container instanceof yi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");n._container=t.container}if(t.maxBounds&&n.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],i(n)),n._setupContainer(),n._setupPainter(),void 0===n.painter)throw new Error("Failed to initialize WebGL.");return n.on("move",(function(){return n._update(!1)})),n.on("moveend",(function(){return n._update(!1)})),n.on("zoom",(function(){return n._update(!0)})),void 0!==e.window&&(e.window.addEventListener("online",n._onWindowOnline,!1),e.window.addEventListener("resize",n._onWindowResize,!1),e.window.addEventListener("orientationchange",n._onWindowResize,!1)),n.handlers=new li(i(n),t),n._hash=t.hash&&new mr("string"==typeof t.hash&&t.hash||void 0).addTo(i(n)),n._hash&&n._hash._onHashChange()||(n.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(n.resize(),n.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),n.resize(),n._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&n.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&n.addControl(new hi({customAttribution:t.customAttribution})),n._logoControl=new fi,n.addControl(n._logoControl,t.logoPosition),n.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),n.on("data",(function(t){n._update("style"===t.dataType),n.fire(new e.Event("".concat(t.dataType,"data"),t))})),n.on("dataloading",(function(t){n.fire(new e.Event("".concat(t.dataType,"dataloading"),t))})),u(n)}return y(h,[{key:"_getMapId",value:function(){return this._mapId}},{key:"addControl",value:function(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=t.onAdd(this);this._controls.push(t);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}},{key:"removeControl",value:function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}},{key:"hasControl",value:function(e){return this._controls.indexOf(e)>-1}},{key:"resize",value:function(t){var n=this._containerDimensions(),r=n[0],i=n[1];this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i);var o=!this._moving;return o&&(this.stop(),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t))),this.fire(new e.Event("resize",t)),o&&this.fire(new e.Event("moveend",t)),this}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}},{key:"setMinZoom",value:function(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(e){if((e=null==e?85:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(e){return this.transform.renderWorldCopies=e,this._update()}},{key:"project",value:function(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}},{key:"unproject",value:function(t){return this.transform.pointLocation3D(e.Point.convert(t))}},{key:"isMoving",value:function(){return this._moving||this.handlers&&this.handlers.isMoving()}},{key:"isZooming",value:function(){return this._zooming||this.handlers&&this.handlers.isZooming()}},{key:"isRotating",value:function(){return this._rotating||this.handlers&&this.handlers.isRotating()}},{key:"_createDelegatedListener",value:function(e,t,n){var i=this;if("mouseenter"===e||"mouseover"===e){var o=!1,a=function(r){var a=i.getLayer(t)?i.queryRenderedFeatures(r.point,{layers:[t]}):[];a.length?o||(o=!0,n.call(i,new Tr(e,i,r.originalEvent,{features:a}))):o=!1};return{layer:t,listener:n,delegates:{mousemove:a,mouseout:function(){o=!1}}}}if("mouseleave"===e||"mouseout"===e){var s=!1,u=function(r){(i.getLayer(t)?i.queryRenderedFeatures(r.point,{layers:[t]}):[]).length?s=!0:s&&(s=!1,n.call(i,new Tr(e,i,r.originalEvent)))},l=function(t){s&&(s=!1,n.call(i,new Tr(e,i,t.originalEvent)))};return{layer:t,listener:n,delegates:{mousemove:u,mouseout:l}}}var c=function(e){var r=i.getLayer(t)?i.queryRenderedFeatures(e.point,{layers:[t]}):[];r.length&&(e.features=r,n.call(i,e),delete e.features)};return{layer:t,listener:n,delegates:r({},e,c)}}},{key:"on",value:function(e,t,n){if(void 0===n)return a(s(h.prototype),"on",this).call(this,e,t);var r=this._createDelegatedListener(e,t,n);for(var i in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r),r.delegates)this.on(i,r.delegates[i]);return this}},{key:"once",value:function(e,t,n){if(void 0===n)return a(s(h.prototype),"once",this).call(this,e,t);var r=this._createDelegatedListener(e,t,n);for(var i in r.delegates)this.once(i,r.delegates[i]);return this}},{key:"off",value:function(e,t,n){var r=this;return void 0===n?a(s(h.prototype),"off",this).call(this,e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&function(i){for(var o=r._delegatedListeners[e],a=0;a<o.length;a++){var s=o[a];if(s.layer===t&&s.listener===n){for(var u in s.delegates)r.off(u,s.delegates[u]);return o.splice(a,1),r}}}(),this)}},{key:"queryRenderedFeatures",value:function(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.Point||Array.isArray(t)||(n=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}},{key:"querySourceFeatures",value:function(e,t){return this.style.querySourceFeatures(e,t)}},{key:"setStyle",value:function(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(t,n))}},{key:"_getUIString",value:function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}},{key:"_updateStyle",value:function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),e&&(this.style=new at(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}},{key:"_lazyInitEmptyStyle",value:function(){this.style||(this.style=new at(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}},{key:"_diffStyle",value:function(t,n){var r=this;if("string"==typeof t){var i=this._requestManager.normalizeStyleURL(t),o=this._requestManager.transformRequest(i,e.ResourceType.Style);e.getJSON(o,(function(t,i){t?r.fire(new e.ErrorEvent(t)):i&&r._updateDiff(i,n)}))}else"object"==typeof t&&this._updateDiff(t,n)}},{key:"_updateDiff",value:function(t,n){try{this.style.setState(t)&&(this._update(!0),this._updateTerrain())}catch(o){e.warnOnce("Unable to perform style diff: ".concat(o.message||o.error||o,".  Rebuilding the style from scratch.")),this._updateStyle(t,n)}}},{key:"getStyle",value:function(){if(this.style)return this.style.serialize()}},{key:"isStyleLoaded",value:function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")}},{key:"addSource",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}},{key:"isSourceLoaded",value:function(t){var n=this.style&&this.style._getSourceCaches(t);if(0!==n.length)return n.every((function(e){return e.loaded()}));this.fire(new e.ErrorEvent(new Error("There is no source with ID '".concat(t,"'"))))}},{key:"areTilesLoaded",value:function(){var e=this.style&&this.style._sourceCaches;for(var t in e){var n=e[t]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0}},{key:"addSourceType",value:function(e,t,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}},{key:"removeSource",value:function(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}},{key:"getSource",value:function(e){return this.style.getSource(e)}},{key:"addImage",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.pixelRatio,o=void 0===i?1:i,a=r.sdf,s=void 0!==a&&a,u=r.stretchX,l=r.stretchY,c=r.content;if(this._lazyInitEmptyStyle(),n instanceof mi||vi&&n instanceof vi){var h=e.browser.getImageData(n),f=h.width,p=h.height,d=h.data;this.style.addImage(t,{data:new e.RGBAImage({width:f,height:p},d),pixelRatio:o,stretchX:u,stretchY:l,content:c,sdf:s,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var g=n.width,m=n.height,y=n.data,v=n;this.style.addImage(t,{data:new e.RGBAImage({width:g,height:m},new Uint8Array(y)),pixelRatio:o,stretchX:u,stretchY:l,content:c,sdf:s,version:0,userImage:v}),v.onAdd&&v.onAdd(this,t)}}},{key:"updateImage",value:function(t,n){var r=this.style.getImage(t);if(!r)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var i=n instanceof mi||vi&&n instanceof vi?e.browser.getImageData(n):n,o=i.width,a=i.height,s=i.data;return void 0===o||void 0===a?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==r.data.width||a!==r.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(s,!(n instanceof mi||vi&&n instanceof vi)),void this.style.updateImage(t,r))}},{key:"hasImage",value:function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}},{key:"removeImage",value:function(e){this.style.removeImage(e)}},{key:"loadImage",value:function(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),n)}},{key:"listImages",value:function(){return this.style.listImages()}},{key:"addLayer",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}},{key:"moveLayer",value:function(e,t){return this.style.moveLayer(e,t),this._update(!0)}},{key:"removeLayer",value:function(e){return this.style.removeLayer(e),this._update(!0)}},{key:"getLayer",value:function(e){return this.style.getLayer(e)}},{key:"setLayerZoomRange",value:function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}},{key:"setFilter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,n),this._update(!0)}},{key:"getFilter",value:function(e){return this.style.getFilter(e)}},{key:"setPaintProperty",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,n,r),this._update(!0)}},{key:"getPaintProperty",value:function(e,t){return this.style.getPaintProperty(e,t)}},{key:"setLayoutProperty",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}},{key:"getLayoutProperty",value:function(e,t){return this.style.getLayoutProperty(e,t)}},{key:"setLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}},{key:"getLight",value:function(){return this.style.getLight()}},{key:"setTerrain",value:function(e){return this._lazyInitEmptyStyle(),this.style.setTerrain(e),this._update(!0)}},{key:"setFeatureState",value:function(e,t){return this.style.setFeatureState(e,t),this._update()}},{key:"removeFeatureState",value:function(e,t){return this.style.removeFeatureState(e,t),this._update()}},{key:"getFeatureState",value:function(e){return this.style.getFeatureState(e)}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"getCanvas",value:function(){return this._canvas}},{key:"_containerDimensions",value:function(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}},{key:"_detectMissingCSS",value:function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}},{key:"_setupContainer",value:function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=n.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var i=this._controlContainer=n.create("div","mapboxgl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){o[e]=n.create("div","mapboxgl-ctrl-".concat(e),i)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}},{key:"_resizeCanvas",value:function(t,n){var r=e.browser.devicePixelRatio||1;this._canvas.width=r*t,this._canvas.height=r*n,this._canvas.style.width="".concat(t,"px"),this._canvas.style.height="".concat(n,"px")}},{key:"_setupPainter",value:function(){var n=this,r=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",r)||this._canvas.getContext("experimental-webgl",r);i?(this.painter=new or(i,this.transform),this.on("data",(function(e){"source"===e.dataType&&n.painter.setTileLoadedFlag(!0)})),e.webpSupported.testSupport(i)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}},{key:"_contextLost",value:function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}},{key:"_contextRestored",value:function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}},{key:"_onMapScroll",value:function(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}},{key:"loaded",value:function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}},{key:"_update",value:function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}},{key:"_requestRenderFrame",value:function(e){return this._update(),this._renderTaskQueue.add(e)}},{key:"_cancelRenderFrame",value:function(e){this._renderTaskQueue.remove(e)}},{key:"_render",value:function(t){var n,r=this,i=0,o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,n),i=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),!this._removed){var a=!1,s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;var u=this.transform.zoom,l=e.browser.now();this.style.zoomHistory.update(u,l);var c=new e.EvaluationParameters(u,{now:l,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),h=c.crossFadingFactor();1===h&&h===this._crossFadingFactor||(a=!0,this._crossFadingFactor=h),this.style.update(c)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var f=e.browser.now()-i;o.endQueryEXT(o.TIME_ELAPSED_EXT,n),setTimeout((function(){var t=o.getQueryObjectEXT(n,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(n),r.fire(new e.Event("gpu-timing-frame",{cpuTime:f,gpuTime:t}))}),50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout((function(){var t=r.painter.queryGpuTimers(p);r.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))}),50)}var d=this._sourcesDirty||this._styleDirty||this._placementDirty;if(d||this._repaint)this.triggerRepaint();else if(this._triggerFrame(!1),!this.isMoving()&&this.loaded()&&(this.fire(new e.Event("idle")),this._isInitialLoad&&this._authenticate(),this._isInitialLoad=!1,this.speedIndexTiming)){var g=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:g})),this.speedIndexTiming=!1}return!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0),this}}},{key:"_authenticate",value:function(){var t=this;e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(n){if(n&&(n.message===e.AUTH_ERR_MSG||401===n.status)){console.error("Error: A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/"),e.browser.setErrorState();var r=t.painter.context.gl;t._logoControl instanceof fi&&t._logoControl._updateLogo(),r&&r.clear(r.DEPTH_BUFFER_BIT|r.COLOR_BUFFER_BIT|r.STENCIL_BUFFER_BIT)}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(){}))}},{key:"_updateTerrain",value:function(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}},{key:"_calculateSpeedIndex",value:function(){var e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());var n=this.painter.context.gl,r=n.createFramebuffer();function i(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);var t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}},{key:"_canvasPixelComparison",value:function(e,t,n){for(var r=n[1]-n[0],i=e.length/4,o=0;o<t.length;o++){for(var a=t[o],s=0,u=0;u<a.length;u+=4)a[u]===e[u]&&a[u+1]===e[u+1]&&a[u+2]===e[u+2]&&a[u+3]===e[u+3]&&(s+=1);r+=(n[o+2]-n[o+1])*(1-s/i)}return r}},{key:"remove",value:function(){this._hash&&this._hash.remove();var t,n=f(this._controls);try{for(n.s();!(t=n.n()).done;)t.value.onRemove(this)}catch(i){n.e(i)}finally{n.f()}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),bi(this._canvasContainer),bi(this._controlContainer),bi(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))}},{key:"triggerRepaint",value:function(){this._triggerFrame(!0)}},{key:"_triggerFrame",value:function(t){var n=this;this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.browser.frame((function(e){var t=!!n._renderNextFrame;n._frame=null,n._renderNextFrame=null,t&&n._render(e)})))}},{key:"_onWindowOnline",value:function(){this._update()}},{key:"_onWindowResize",value:function(e){this._trackResize&&this.resize({originalEvent:e})._update()}},{key:"_setCacheLimits",value:function(t,n){e.setCacheLimits(t,n)}},{key:"showTileBoundaries",get:function(){return!!this._showTileBoundaries},set:function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}},{key:"speedIndexTiming",get:function(){return!!this._speedIndexTiming},set:function(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}},{key:"showPadding",get:function(){return!!this._showPadding},set:function(e){this._showPadding!==e&&(this._showPadding=e,this._update())}},{key:"showCollisionBoxes",get:function(){return!!this._showCollisionBoxes},set:function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}},{key:"showOverdrawInspector",get:function(){return!!this._showOverdrawInspector},set:function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}},{key:"repaint",get:function(){return!!this._repaint},set:function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}},{key:"vertices",get:function(){return!!this._vertices},set:function(e){this._vertices=e,this._update()}},{key:"version",get:function(){return e.version}}]),h}(ci),NavigationControl:function(){function t(r){var i=this;m(this,t),this.options=e.extend({},xi,r),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){return i._map.zoomIn({},{originalEvent:e})})),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){return i._map.zoomOut({},{originalEvent:e})})),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){i.options.visualizePitch?i._map.resetNorthPitch({},{originalEvent:e}):i._map.resetNorth({},{originalEvent:e})})),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}return y(t,[{key:"_updateZoomButtons",value:function(){var e=this._map.getZoom(),t=e===this._map.getMaxZoom(),n=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}},{key:"_rotateCompassArrow",value:function(){var e=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(this._map.transform.pitch,"deg) rotateZ(").concat(this._map.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(this._map.transform.angle*(180/Math.PI),"deg)");this._compassIcon.style.transform=e}},{key:"onAdd",value:function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new wi(this._map,this._compass,this.options.visualizePitch)),this._container}},{key:"onRemove",value:function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}},{key:"_createButton",value:function(e,t){var r=n.create("button",e,this._container);return r.type="button",r.addEventListener("click",t),r}},{key:"_setButtonTitle",value:function(e,t){var n=this._map._getUIString("NavigationControl.".concat(t));e.title=n,e.setAttribute("aria-label",n)}}]),t}(),GeolocateControl:function(t){d(o,t);var r=g(o);function o(t){var n;return m(this,o),(n=r.call(this)).options=e.extend({},Ii,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],i(n)),n}return y(o,[{key:"onAdd",value:function(t){var r;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==ki?r(ki):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((function(e){ki="denied"!==e.state,r(ki)})):(ki=!!e.window.navigator.geolocation,r(ki)),this._container}},{key:"onRemove",value:function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ai=0,Mi=!1}},{key:"_isOutOfMapMaxBounds",value:function(e){var t=this._map.getMaxBounds(),n=e.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}},{key:"_setErrorState",value:function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}},{key:"_onSuccess",value:function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}},{key:"_updateCamera",value:function(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,i=this._map.getBearing(),o=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}},{key:"_updateMarker",value:function(t){if(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}},{key:"_updateCircleRadius",value:function(){var e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]),n=this._map.unproject([1,e]),r=t.distanceTo(n),i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width="".concat(i,"px"),this._circleElement.style.height="".concat(i,"px")}},{key:"_onZoom",value:function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}},{key:"_onError",value:function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&Mi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}},{key:"_finish",value:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}},{key:"_setupUI",value:function(t){var r=this;if(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{var o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ci(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ci({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==r._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new e.Event("trackuserlocationend")))}))}},{key:"trigger",value:function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ai--,Mi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Ai>1?(t={maximumAge:6e5,timeout:0},Mi=!0):(t=this.options.positionOptions,Mi=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}},{key:"_clearWatch",value:function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}]),o}(e.Evented),AttributionControl:hi,ScaleControl:function(){function t(n){m(this,t),this.options=e.extend({},Li,n),e.bindAll(["_onMove","setUnit"],this)}return y(t,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_onMove",value:function(){Ni(this._map,this._container,this.options)}},{key:"onAdd",value:function(e){return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}},{key:"onRemove",value:function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},{key:"setUnit",value:function(e){this.options.unit=e,Ni(this._map,this._container,this.options)}}]),t}(),FullscreenControl:function(){function t(n){m(this,t),this._fullscreen=!1,n&&n.container&&(n.container instanceof e.window.HTMLElement?this._container=n.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")}return y(t,[{key:"onAdd",value:function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}},{key:"onRemove",value:function(){n.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_checkFullscreenSupport",value:function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)}},{key:"_setupUI",value:function(){var t=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_updateTitle",value:function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}},{key:"_getTitle",value:function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}},{key:"_isFullscreen",value:function(){return this._fullscreen}},{key:"_changeIcon",value:function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}},{key:"_onClickFullscreen",value:function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}}]),t}(),Popup:function(t){d(o,t);var r=g(o);function o(t){var n;return m(this,o),(n=r.call(this)).options=e.extend(Object.create(Oi),t),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],i(n)),n}return y(o,[{key:"addTo",value:function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this}},{key:"isOpen",value:function(){return!!this._map}},{key:"remove",value:function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}},{key:"trackPointer",value:function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}},{key:"getElement",value:function(){return this._container}},{key:"setText",value:function(t){return this.setDOMContent(e.window.document.createTextNode(t))}},{key:"setHTML",value:function(t){var n,r=e.window.document.createDocumentFragment(),i=e.window.document.createElement("body");for(i.innerHTML=t;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)}},{key:"getMaxWidth",value:function(){return this._container&&this._container.style.maxWidth}},{key:"setMaxWidth",value:function(e){return this.options.maxWidth=e,this._update(),this}},{key:"setDOMContent",value:function(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=n.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}},{key:"addClassName",value:function(e){this._container&&this._container.classList.add(e)}},{key:"removeClassName",value:function(e){this._container&&this._container.classList.remove(e)}},{key:"setOffset",value:function(e){return this.options.offset=e,this._update(),this}},{key:"toggleClassName",value:function(e){if(this._container)return this._container.classList.toggle(e)}},{key:"_createCloseButton",value:function(){this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}},{key:"_onMouseUp",value:function(e){this._update(e.point)}},{key:"_onMouseMove",value:function(e){this._update(e.point)}},{key:"_onDrag",value:function(e){this._update(e.point)}},{key:"_update",value:function(t){var r=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(e){return r._container.classList.add(e)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ei(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t)){var i=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),o=this.options.anchor,a=function t(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new e.Point(0,0),top:new e.Point(0,n),"top-left":new e.Point(r,r),"top-right":new e.Point(-r,r),bottom:new e.Point(0,-n),"bottom-left":new e.Point(r,-r),"bottom-right":new e.Point(-r,-r),left:new e.Point(n,0),right:new e.Point(-n,0)}}if(n instanceof e.Point||Array.isArray(n)){var i=e.Point.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:e.Point.convert(n.center||[0,0]),top:e.Point.convert(n.top||[0,0]),"top-left":e.Point.convert(n["top-left"]||[0,0]),"top-right":e.Point.convert(n["top-right"]||[0,0]),bottom:e.Point.convert(n.bottom||[0,0]),"bottom-left":e.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(n["bottom-right"]||[0,0]),left:e.Point.convert(n.left||[0,0]),right:e.Point.convert(n.right||[0,0])}}return t(new e.Point(0,0))}(this.options.offset);if(!o){var s,u=this._container.offsetWidth,l=this._container.offsetHeight;s=i.y+a.bottom.y<l?["top"]:i.y>this._map.transform.height-l?["bottom"]:[],i.x<u/2?s.push("left"):i.x>this._map.transform.width-u/2&&s.push("right"),o=0===s.length?"bottom":s.join("-")}var c=i.add(a[o]).round();n.setTransform(this._container,"".concat(Si[o]," translate(").concat(c.x,"px,").concat(c.y,"px)")),Ti(this._container,o,"popup")}}},{key:"_focusFirstElement",value:function(){if(this.options.focusAfterOpen&&this._container){var e=this._container.querySelector(Ri);e&&e.focus()}}},{key:"_onClose",value:function(){this.remove()}}]),o}(e.Evented),Marker:Ci,Style:at,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:pr,Evented:e.Evented,config:e.config,prewarm:function(){ne().acquire(ee)},clearPrewarmedResources:function(){var e=Q;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(ee),Q=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return te.workerCount},set workerCount(e){te.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){e.clearTileCache(t)},workerUrl:""};return Di})),n}()},function(e,t,n){!function(e){"use strict";function t(){}function n(e){this.message=e||""}function r(e){this.message=e||""}function i(e){this.message=e||""}function o(){}function a(e){return null===e?Oe:e.color}function s(e){return null===e?null:e.parent}function u(e,t){null!==e&&(e.color=t)}function l(e){return null===e?null:e.left}function c(e){return null===e?null:e.right}function h(){this.root_=null,this.size_=0}function f(){}function p(){this.array_=[],arguments[0]instanceof be&&this.addAll(arguments[0])}function d(){}function g(e){this.message=e||""}function m(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var t=Object(this),n=Math.max(Math.min(t.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)t[r]=e,++r;return t},writable:!0}),Number.isFinite=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(e){return e!=e},Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var y=function(){};y.prototype.interfaces_=function(){return[]},y.prototype.getClass=function(){return y},y.prototype.equalsWithTolerance=function(e,t,n){return Math.abs(e-t)<=n};var v=function(e){function t(t){e.call(this,t),this.name="IllegalArgumentException",this.message=t,this.stack=(new e).stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),_=function(){},b={MAX_VALUE:{configurable:!0}};_.isNaN=function(e){return Number.isNaN(e)},_.doubleToLongBits=function(e){return e},_.longBitsToDouble=function(e){return e},_.isInfinite=function(e){return!Number.isFinite(e)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_,b);var x=function(){},w=function(){},E=function(){},S=function e(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},T={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};S.prototype.setOrdinate=function(e,t){switch(e){case S.X:this.x=t;break;case S.Y:this.y=t;break;case S.Z:this.z=t;break;default:throw new v("Invalid ordinate index: "+e)}},S.prototype.equals2D=function(){if(1===arguments.length){var e=arguments[0];return this.x===e.x&&this.y===e.y}if(2===arguments.length){var t=arguments[0],n=arguments[1];return!!y.equalsWithTolerance(this.x,t.x,n)&&!!y.equalsWithTolerance(this.y,t.y,n)}},S.prototype.getOrdinate=function(e){switch(e){case S.X:return this.x;case S.Y:return this.y;case S.Z:return this.z}throw new v("Invalid ordinate index: "+e)},S.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||_.isNaN(this.z))&&_.isNaN(e.z)},S.prototype.equals=function(e){return e instanceof S&&this.equals2D(e)},S.prototype.equalInZ=function(e,t){return y.equalsWithTolerance(this.z,e.z,t)},S.prototype.compareTo=function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},S.prototype.clone=function(){},S.prototype.copy=function(){return new S(this)},S.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},S.prototype.distance3D=function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)},S.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},S.prototype.hashCode=function(){var e=17;return 37*(e=37*e+S.hashCode(this.x))+S.hashCode(this.y)},S.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z},S.prototype.interfaces_=function(){return[x,w,t]},S.prototype.getClass=function(){return S},S.hashCode=function(){if(1===arguments.length){var e=arguments[0],t=_.doubleToLongBits(e);return Math.trunc((t^t)>>>32)}},T.DimensionalComparator.get=function(){return k},T.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},T.NULL_ORDINATE.get=function(){return _.NaN},T.X.get=function(){return 0},T.Y.get=function(){return 1},T.Z.get=function(){return 2},Object.defineProperties(S,T);var k=function(e){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new v("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}};k.prototype.compare=function(e,t){var n=e,r=t,i=k.compare(n.x,r.x);if(0!==i)return i;var o=k.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:k.compare(n.z,r.z)},k.prototype.interfaces_=function(){return[E]},k.prototype.getClass=function(){return k},k.compare=function(e,t){return e<t?-1:e>t?1:_.isNaN(e)?_.isNaN(t)?0:-1:_.isNaN(t)?1:0};var C=function(){};C.prototype.create=function(){},C.prototype.interfaces_=function(){return[]},C.prototype.getClass=function(){return C};var I=function(){},A={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};I.prototype.interfaces_=function(){return[]},I.prototype.getClass=function(){return I},I.toLocationSymbol=function(e){switch(e){case I.EXTERIOR:return"e";case I.BOUNDARY:return"b";case I.INTERIOR:return"i";case I.NONE:return"-"}throw new v("Unknown location value: "+e)},A.INTERIOR.get=function(){return 0},A.BOUNDARY.get=function(){return 1},A.EXTERIOR.get=function(){return 2},A.NONE.get=function(){return-1},Object.defineProperties(I,A);var M=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1},L=function(){},N={LOG_10:{configurable:!0}};L.prototype.interfaces_=function(){return[]},L.prototype.getClass=function(){return L},L.log10=function(e){var t=Math.log(e);return _.isInfinite(t)||_.isNaN(t)?t:t/L.LOG_10},L.min=function(e,t,n,r){var i=e;return t<i&&(i=t),n<i&&(i=n),r<i&&(i=r),i},L.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},L.wrap=function(e,t){return e<0?t- -e%t:e%t},L.max=function(){if(3===arguments.length){var e=arguments[1],t=arguments[2],n=arguments[0];return e>n&&(n=e),t>n&&(n=t),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}},L.average=function(e,t){return(e+t)/2},N.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(L,N);var P=function(e){this.str=e};P.prototype.append=function(e){this.str+=e},P.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)},P.prototype.toString=function(e){return this.str};var O=function(e){this.value=e};O.prototype.intValue=function(){return this.value},O.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0},O.isNaN=function(e){return Number.isNaN(e)};var R=function(){};R.isWhitespace=function(e){return e<=32&&e>=0||127===e},R.toUpperCase=function(e){return e.toUpperCase()};var D=function e(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&e.call(this,e.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},F={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};D.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo},D.prototype.extractSignificantDigits=function(e,t){var n=this.abs(),r=D.magnitude(n._hi),i=D.TEN.pow(r);(n=n.divide(i)).gt(D.TEN)?(n=n.divide(D.TEN),r+=1):n.lt(D.ONE)&&(n=n.multiply(D.TEN),r-=1);for(var o=r+1,a=new P,s=D.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){e&&u===o&&a.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,a.append(h),n=n.subtract(D.valueOf(l)).multiply(D.TEN),c&&n.selfAdd(D.TEN);var f=!0,p=D.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-u&&(f=!1),!f)break}return t[0]=r,a.toString()},D.prototype.sqr=function(){return this.multiply(this)},D.prototype.doubleValue=function(){return this._hi+this._lo},D.prototype.subtract=function(){if(arguments[0]instanceof D){var e=arguments[0];return this.add(e.negate())}if("number"==typeof arguments[0]){var t=arguments[0];return this.add(-t)}},D.prototype.equals=function(){if(1===arguments.length){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}},D.prototype.isZero=function(){return 0===this._hi&&0===this._lo},D.prototype.selfSubtract=function(){if(arguments[0]instanceof D){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}if("number"==typeof arguments[0]){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}},D.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},D.prototype.min=function(e){return this.le(e)?this:e},D.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof D){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}if("number"==typeof arguments[0]){var t=arguments[0];return this.selfDivide(t,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null,c=null,h=null;return u=this._hi/n,h=(i=(l=D.SPLIT*u)-(i=l-u))*(a=(h=D.SPLIT*n)-(a=h-n))-(c=u*n)+i*(s=n-a)+(o=u-i)*a+o*s,h=u+(l=(this._hi-c-h+this._lo-u*r)/n),this._hi=h,this._lo=u-h+l,this}},D.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},D.prototype.divide=function(){if(arguments[0]instanceof D){var e=arguments[0],t=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;return n=(o=this._hi/e._hi)-(t=(a=D.SPLIT*o)-(t=a-o)),u=t*(r=(u=D.SPLIT*e._hi)-(r=u-e._hi))-(s=o*e._hi)+t*(i=e._hi-r)+n*r+n*i,a=(this._hi-s-u+this._lo-o*e._lo)/e._hi,new D(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var l=arguments[0];return _.isNaN(l)?D.createNaN():D.copy(this).selfDivide(l,0)}},D.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo},D.prototype.pow=function(e){if(0===e)return D.valueOf(1);var t=new D(this),n=D.valueOf(1),r=Math.abs(e);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(t),(r/=2)>0&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n},D.prototype.ceil=function(){if(this.isNaN())return D.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new D(e,t)},D.prototype.compareTo=function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},D.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},D.prototype.setValue=function(){if(arguments[0]instanceof D){var e=arguments[0];return this.init(e),this}if("number"==typeof arguments[0]){var t=arguments[0];return this.init(t),this}},D.prototype.max=function(e){return this.ge(e)?this:e},D.prototype.sqrt=function(){if(this.isZero())return D.valueOf(0);if(this.isNegative())return D.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=D.valueOf(t),r=this.subtract(n.sqr())._hi*(.5*e);return n.add(r)},D.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof D){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}if("number"==typeof arguments[0]){var t=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+t)-(a=i-this._hi),r=(s=(o=t-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,h=null,f=null,p=null,d=null,g=null,m=null;p=this._hi+u,h=this._lo+l,d=p-(g=p-this._hi),f=h-(m=h-this._lo);var y=(c=p+(g=(d=u-g+(this._hi-d))+h))+(g=(f=l-m+(this._lo-f))+(g+(p-c))),v=g+(c-y);return this._hi=y,this._lo=v,this}},D.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof D){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}if("number"==typeof arguments[0]){var t=arguments[0];return this.selfMultiply(t,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null;i=(u=D.SPLIT*this._hi)-this._hi,l=D.SPLIT*n,i=u-i,o=this._hi-i,a=l-n;var c=(u=this._hi*n)+(l=i*(a=l-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),h=l+(i=u-c);return this._hi=c,this._lo=h,this}},D.prototype.selfSqr=function(){return this.selfMultiply(this)},D.prototype.floor=function(){if(this.isNaN())return D.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new D(e,t)},D.prototype.negate=function(){return this.isNaN()?this:new D(-this._hi,-this._lo)},D.prototype.clone=function(){},D.prototype.multiply=function(){if(arguments[0]instanceof D){var e=arguments[0];return e.isNaN()?D.createNaN():D.copy(this).selfMultiply(e)}if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)?D.createNaN():D.copy(this).selfMultiply(t,0)}},D.prototype.isNaN=function(){return _.isNaN(this._hi)},D.prototype.intValue=function(){return Math.trunc(this._hi)},D.prototype.toString=function(){var e=D.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()},D.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(null!==e)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),r=t[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+D.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+D.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},D.prototype.reciprocal=function(){var e=null,t=null,n=null,r=null,i=null,o=null,a=null,s=null;t=(i=1/this._hi)-(e=(o=D.SPLIT*i)-(e=o-i)),n=(s=D.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(a=i*this._hi)-(s=e*(n=s-n)-a+e*(r=this._hi-n)+t*n+t*r)-i*this._lo)/this._hi);return new D(u,i-u+o)},D.prototype.toSciNotation=function(){if(this.isZero())return D.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(null!==e)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),r=D.SCI_NOT_EXPONENT_CHAR+t[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},D.prototype.abs=function(){return this.isNaN()?D.NaN:this.isNegative()?this.negate():new D(this)},D.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},D.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo},D.prototype.add=function(){if(arguments[0]instanceof D){var e=arguments[0];return D.copy(this).selfAdd(e)}if("number"==typeof arguments[0]){var t=arguments[0];return D.copy(this).selfAdd(t)}},D.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof D){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},D.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo},D.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},D.prototype.trunc=function(){return this.isNaN()?D.NaN:this.isPositive()?this.floor():this.ceil()},D.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},D.prototype.interfaces_=function(){return[t,x,w]},D.prototype.getClass=function(){return D},D.sqr=function(e){return D.valueOf(e).selfMultiply(e)},D.valueOf=function(){if("string"==typeof arguments[0]){var e=arguments[0];return D.parse(e)}if("number"==typeof arguments[0])return new D(arguments[0])},D.sqrt=function(e){return D.valueOf(e).sqrt()},D.parse=function(e){for(var t=0,n=e.length;R.isWhitespace(e.charAt(t));)t++;var r=!1;if(t<n){var i=e.charAt(t);"-"!==i&&"+"!==i||(t++,"-"===i&&(r=!0))}for(var o=new D,a=0,s=0,u=0;!(t>=n);){var l=e.charAt(t);if(t++,R.isDigit(l)){var c=l-"0";o.selfMultiply(D.TEN),o.selfAdd(c),a++}else{if("."!==l){if("e"===l||"E"===l){var h=e.substring(t);try{u=O.parseInt(h)}catch(t){throw t instanceof Error?new Error("Invalid exponent "+h+" in string "+e):t}break}throw new Error("Unexpected character '"+l+"' at position "+t+" in string "+e)}s=a}}var f=o,p=a-s-u;if(0===p)f=o;else if(p>0){var d=D.TEN.pow(p);f=o.divide(d)}else if(p<0){var g=D.TEN.pow(-p);f=o.multiply(g)}return r?f.negate():f},D.createNaN=function(){return new D(_.NaN,_.NaN)},D.copy=function(e){return new D(e)},D.magnitude=function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=t&&(r+=1),r},D.stringOfChar=function(e,t){for(var n=new P,r=0;r<t;r++)n.append(e);return n.toString()},F.PI.get=function(){return new D(3.141592653589793,12246467991473532e-32)},F.TWO_PI.get=function(){return new D(6.283185307179586,24492935982947064e-32)},F.PI_2.get=function(){return new D(1.5707963267948966,6123233995736766e-32)},F.E.get=function(){return new D(2.718281828459045,14456468917292502e-32)},F.NaN.get=function(){return new D(_.NaN,_.NaN)},F.EPS.get=function(){return 123259516440783e-46},F.SPLIT.get=function(){return 134217729},F.MAX_PRINT_DIGITS.get=function(){return 32},F.TEN.get=function(){return D.valueOf(10)},F.ONE.get=function(){return D.valueOf(1)},F.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},F.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(D,F);var z=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};z.prototype.interfaces_=function(){return[]},z.prototype.getClass=function(){return z},z.orientationIndex=function(e,t,n){var r=z.orientationIndexFilter(e,t,n);if(r<=1)return r;var i=D.valueOf(t.x).selfAdd(-e.x),o=D.valueOf(t.y).selfAdd(-e.y),a=D.valueOf(n.x).selfAdd(-t.x),s=D.valueOf(n.y).selfAdd(-t.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},z.signOfDet2x2=function(e,t,n,r){return e.multiply(r).selfSubtract(t.multiply(n)).signum()},z.intersection=function(e,t,n,r){var i=D.valueOf(r.y).selfSubtract(n.y).selfMultiply(D.valueOf(t.x).selfSubtract(e.x)),o=D.valueOf(r.x).selfSubtract(n.x).selfMultiply(D.valueOf(t.y).selfSubtract(e.y)),a=i.subtract(o),s=D.valueOf(r.x).selfSubtract(n.x).selfMultiply(D.valueOf(e.y).selfSubtract(n.y)),u=D.valueOf(r.y).selfSubtract(n.y).selfMultiply(D.valueOf(e.x).selfSubtract(n.x)),l=s.subtract(u).selfDivide(a).doubleValue(),c=D.valueOf(e.x).selfAdd(D.valueOf(t.x).selfSubtract(e.x).selfMultiply(l)).doubleValue(),h=D.valueOf(t.x).selfSubtract(e.x).selfMultiply(D.valueOf(e.y).selfSubtract(n.y)),f=D.valueOf(t.y).selfSubtract(e.y).selfMultiply(D.valueOf(e.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(a).doubleValue(),d=D.valueOf(n.y).selfAdd(D.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new S(c,d)},z.orientationIndexFilter=function(e,t,n){var r=null,i=(e.x-n.x)*(t.y-n.y),o=(e.y-n.y)*(t.x-n.x),a=i-o;if(i>0){if(o<=0)return z.signum(a);r=i+o}else{if(!(i<0))return z.signum(a);if(o>=0)return z.signum(a);r=-i-o}var s=z.DP_SAFE_EPSILON*r;return a>=s||-a>=s?z.signum(a):2},z.signum=function(e){return e>0?1:e<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(z,B);var U=function(){},V={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};V.X.get=function(){return 0},V.Y.get=function(){return 1},V.Z.get=function(){return 2},V.M.get=function(){return 3},U.prototype.setOrdinate=function(e,t,n){},U.prototype.size=function(){},U.prototype.getOrdinate=function(e,t){},U.prototype.getCoordinate=function(){},U.prototype.getCoordinateCopy=function(e){},U.prototype.getDimension=function(){},U.prototype.getX=function(e){},U.prototype.clone=function(){},U.prototype.expandEnvelope=function(e){},U.prototype.copy=function(){},U.prototype.getY=function(e){},U.prototype.toCoordinateArray=function(){},U.prototype.interfaces_=function(){return[w]},U.prototype.getClass=function(){return U},Object.defineProperties(U,V);var j=function(){},q=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(j),G=function(){};G.arraycopy=function(e,t,n,r,i){for(var o=0,a=t;a<t+i;a++)n[r+o]=e[a],o++},G.getProperty=function(e){return{"line.separator":"\n"}[e]};var $=function e(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof S&&arguments[1]instanceof S){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=h.y-f.y,m=f.x-h.x,y=h.x*f.y-f.x*h.y,v=p.y-d.y,_=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=m*b-_*y,this.y=v*y-g*b,this.w=g*_-v*m}};$.prototype.getY=function(){var e=this.y/this.w;if(_.isNaN(e)||_.isInfinite(e))throw new q;return e},$.prototype.getX=function(){var e=this.x/this.w;if(_.isNaN(e)||_.isInfinite(e))throw new q;return e},$.prototype.getCoordinate=function(){var e=new S;return e.x=this.getX(),e.y=this.getY(),e},$.prototype.interfaces_=function(){return[]},$.prototype.getClass=function(){return $},$.intersection=function(e,t,n,r){var i=e.y-t.y,o=t.x-e.x,a=e.x*t.y-t.x*e.y,s=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*u-s*o,h=(o*l-u*a)/c,f=(s*a-i*l)/c;if(_.isNaN(h)||_.isInfinite(h)||_.isNaN(f)||_.isInfinite(f))throw new q;return new S(h,f)};var H=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},X={serialVersionUID:{configurable:!0}};H.prototype.getArea=function(){return this.getWidth()*this.getHeight()},H.prototype.equals=function(e){if(!(e instanceof H))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()},H.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new H;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny,r=this._maxx<e._maxx?this._maxx:e._maxx,i=this._maxy<e._maxy?this._maxy:e._maxy;return new H(t,r,n,i)},H.prototype.isNull=function(){return this._maxx<this._minx},H.prototype.getMaxX=function(){return this._maxx},H.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof S){var e=arguments[0];return this.covers(e.x,e.y)}if(arguments[0]instanceof H){var t=arguments[0];return!this.isNull()&&!t.isNull()&&t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},H.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof H){var e=arguments[0];return!this.isNull()&&!e.isNull()&&!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}if(arguments[0]instanceof S){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},H.prototype.getMinY=function(){return this._miny},H.prototype.getMinX=function(){return this._minx},H.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof S){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof H){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},H.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t},H.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},H.prototype.compareTo=function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0},H.prototype.translate=function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)},H.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},H.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},H.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},H.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t},H.prototype.expandBy=function(){if(1===arguments.length){var e=arguments[0];this.expandBy(e,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},H.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof H){var e=arguments[0];return this.covers(e)}if(arguments[0]instanceof S){var t=arguments[0];return this.covers(t)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},H.prototype.centre=function(){return this.isNull()?null:new S((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},H.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof S){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof H){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},H.prototype.getMaxY=function(){return this._maxy},H.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),0===t?n:0===n?t:Math.sqrt(t*t+n*n)},H.prototype.hashCode=function(){var e=17;return 37*(e=37*(e=37*(e=37*e+S.hashCode(this._minx))+S.hashCode(this._maxx))+S.hashCode(this._miny))+S.hashCode(this._maxy)},H.prototype.interfaces_=function(){return[x,t]},H.prototype.getClass=function(){return H},H.intersects=function(){if(3===arguments.length){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u)&&!(c<s)&&(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),!(l>u)&&!(c<s))}},X.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(H,X);var W={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Y=function(e){this.geometryFactory=e||new yt};Y.prototype.read=function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=W.typeStr.exec(e);if(-1!==e.search("EMPTY")&&((i=W.emptyTypeStr.exec(e))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],J[n]&&(t=J[n].apply(this,[r]))),void 0===t)throw new Error("Could not parse WKT "+e);return t},Y.prototype.write=function(e){return this.extractGeometry(e)},Y.prototype.extractGeometry=function(e){var t=e.getGeometryType().toLowerCase();if(!Z[t])return null;var n=t.toUpperCase();return e.isEmpty()?n+" EMPTY":n+"("+Z[t].apply(this,[e])+")"};var Z={coordinate:function(e){return e.x+" "+e.y},point:function(e){return Z.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var t=[],n=0,r=e._geometries.length;n<r;++n)t.push("("+Z.point.apply(this,[e._geometries[n]])+")");return t.join(",")},linestring:function(e){for(var t=[],n=0,r=e._points._coordinates.length;n<r;++n)t.push(Z.coordinate.apply(this,[e._points._coordinates[n]]));return t.join(",")},linearring:function(e){for(var t=[],n=0,r=e._points._coordinates.length;n<r;++n)t.push(Z.coordinate.apply(this,[e._points._coordinates[n]]));return t.join(",")},multilinestring:function(e){for(var t=[],n=0,r=e._geometries.length;n<r;++n)t.push("("+Z.linestring.apply(this,[e._geometries[n]])+")");return t.join(",")},polygon:function(e){var t=[];t.push("("+Z.linestring.apply(this,[e._shell])+")");for(var n=0,r=e._holes.length;n<r;++n)t.push("("+Z.linestring.apply(this,[e._holes[n]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],n=0,r=e._geometries.length;n<r;++n)t.push("("+Z.polygon.apply(this,[e._geometries[n]])+")");return t.join(",")},geometrycollection:function(e){for(var t=[],n=0,r=e._geometries.length;n<r;++n)t.push(this.extractGeometry(e._geometries[n]));return t.join(",")}},J={point:function(e){if(void 0===e)return this.geometryFactory.createPoint();var t=e.trim().split(W.spaces);return this.geometryFactory.createPoint(new S(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){if(void 0===e)return this.geometryFactory.createMultiPoint();for(var t,n=e.trim().split(","),r=[],i=0,o=n.length;i<o;++i)t=n[i].replace(W.trimParens,"$1"),r.push(J.point.apply(this,[t]));return this.geometryFactory.createMultiPoint(r)},linestring:function(e){if(void 0===e)return this.geometryFactory.createLineString();for(var t,n=e.trim().split(","),r=[],i=0,o=n.length;i<o;++i)t=n[i].trim().split(W.spaces),r.push(new S(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLineString(r)},linearring:function(e){if(void 0===e)return this.geometryFactory.createLinearRing();for(var t,n=e.trim().split(","),r=[],i=0,o=n.length;i<o;++i)t=n[i].trim().split(W.spaces),r.push(new S(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(e){if(void 0===e)return this.geometryFactory.createMultiLineString();for(var t,n=e.trim().split(W.parenComma),r=[],i=0,o=n.length;i<o;++i)t=n[i].replace(W.trimParens,"$1"),r.push(J.linestring.apply(this,[t]));return this.geometryFactory.createMultiLineString(r)},polygon:function(e){if(void 0===e)return this.geometryFactory.createPolygon();for(var t,n,r,i,o=e.trim().split(W.parenComma),a=[],s=0,u=o.length;s<u;++s)t=o[s].replace(W.trimParens,"$1"),n=J.linestring.apply(this,[t]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(e){if(void 0===e)return this.geometryFactory.createMultiPolygon();for(var t,n=e.trim().split(W.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)t=n[i].replace(W.trimParens,"$1"),r.push(J.polygon.apply(this,[t]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(e){if(void 0===e)return this.geometryFactory.createGeometryCollection();for(var t=(e=e.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=t.length;r<i;++r)n.push(this.read(t[r]));return this.geometryFactory.createGeometryCollection(n)}},K=function(e){this.parser=new Y(e)};K.prototype.write=function(e){return this.parser.write(e)},K.toLineString=function(e,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"};var Q=function(e){function t(t){e.call(this,t),this.name="RuntimeException",this.message=t,this.stack=(new e).stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),ee=function(e){function t(){if(e.call(this),0===arguments.length)e.call(this);else if(1===arguments.length){var t=arguments[0];e.call(this,t)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Q),te=function(){};te.prototype.interfaces_=function(){return[]},te.prototype.getClass=function(){return te},te.shouldNeverReachHere=function(){if(0===arguments.length)te.shouldNeverReachHere(null);else if(1===arguments.length){var e=arguments[0];throw new ee("Should never reach here"+(null!==e?": "+e:""))}},te.isTrue=function(){var e,t;if(1===arguments.length)e=arguments[0],te.isTrue(e,null);else if(2===arguments.length&&(t=arguments[1],!(e=arguments[0])))throw null===t?new ee:new ee(t)},te.equals=function(){var e,t,n;if(2===arguments.length)e=arguments[0],t=arguments[1],te.equals(e,t,null);else if(3===arguments.length&&(e=arguments[0],n=arguments[2],!(t=arguments[1]).equals(e)))throw new ee("Expected "+e+" but encountered "+t+(null!==n?": "+n:""))};var ne=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new S,this._intPt[1]=new S,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},re={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ne.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]},ne.prototype.getTopologySummary=function(){var e=new P;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()},ne.prototype.computeIntersection=function(e,t,n,r){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(e,t,n,r)},ne.prototype.getIntersectionNum=function(){return this._result},ne.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var e=arguments[0];this.getEdgeDistance(e,0)>this.getEdgeDistance(e,1)?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}},ne.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ne.prototype.setPrecisionModel=function(e){this._precisionModel=e},ne.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],t=0;t<this._result;t++)if(!this._intPt[t].equals2D(this._inputLines[e][0])&&!this._intPt[t].equals2D(this._inputLines[e][1]))return!0;return!1}},ne.prototype.getIntersection=function(e){return this._intPt[e]},ne.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ne.prototype.hasIntersection=function(){return this._result!==ne.NO_INTERSECTION},ne.prototype.getEdgeDistance=function(e,t){return ne.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1])},ne.prototype.isCollinear=function(){return this._result===ne.COLLINEAR_INTERSECTION},ne.prototype.toString=function(){return K.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+K.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ne.prototype.getEndpoint=function(e,t){return this._inputLines[e][t]},ne.prototype.isIntersection=function(e){for(var t=0;t<this._result;t++)if(this._intPt[t].equals2D(e))return!0;return!1},ne.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]},ne.prototype.interfaces_=function(){return[]},ne.prototype.getClass=function(){return ne},ne.computeEdgeDistance=function(e,t,n){var r=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),o=-1;if(e.equals(t))o=0;else if(e.equals(n))o=r>i?r:i;else{var a=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);0!==(o=r>i?a:s)||e.equals(t)||(o=Math.max(a,s))}return te.isTrue(!(0===o&&!e.equals(t)),"Bad distance calculation"),o},ne.nonRobustComputeEdgeDistance=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=Math.sqrt(r*r+i*i);return te.isTrue(!(0===o&&!e.equals(t)),"Invalid distance calculation"),o},re.DONT_INTERSECT.get=function(){return 0},re.DO_INTERSECT.get=function(){return 1},re.COLLINEAR.get=function(){return 2},re.NO_INTERSECTION.get=function(){return 0},re.POINT_INTERSECTION.get=function(){return 1},re.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ne,re);var ie=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(e){var t=new H(this._inputLines[0][0],this._inputLines[0][1]),n=new H(this._inputLines[1][0],this._inputLines[1][1]);return t.contains(e)&&n.contains(e)},t.prototype.computeIntersection=function(){if(3!==arguments.length)return e.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,H.intersects(n,r,t)&&0===se.orientationIndex(n,r,t)&&0===se.orientationIndex(r,n,t))return this._isProper=!0,(t.equals(n)||t.equals(r))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION},t.prototype.normalizeToMinimum=function(e,t,n,r,i){i.x=this.smallestInAbsValue(e.x,t.x,n.x,r.x),i.y=this.smallestInAbsValue(e.y,t.y,n.y,r.y),e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},t.prototype.safeHCoordinateIntersection=function(e,n,r,i){var o=null;try{o=$.intersection(e,n,r,i)}catch(a){if(!(a instanceof q))throw a;o=t.nearestEndpoint(e,n,r,i)}return o},t.prototype.intersection=function(e,n,r,i){var o=this.intersectionWithNormalization(e,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new S(t.nearestEndpoint(e,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},t.prototype.smallestInAbsValue=function(e,t,n,r){var i=e,o=Math.abs(i);return Math.abs(t)<o&&(i=t,o=Math.abs(t)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},t.prototype.checkDD=function(e,t,n,r,i){var o=z.intersection(e,t,n,r),a=this.isInSegmentEnvelopes(o);G.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&G.out.println("Distance = "+i.distance(o))},t.prototype.intersectionWithNormalization=function(e,t,n,r){var i=new S(e),o=new S(t),a=new S(n),s=new S(r),u=new S;this.normalizeToEnvCentre(i,o,a,s,u);var l=this.safeHCoordinateIntersection(i,o,a,s);return l.x+=u.x,l.y+=u.y,l},t.prototype.computeCollinearIntersection=function(t,n,r,i){var o=H.intersects(t,n,r),a=H.intersects(t,n,i),s=H.intersects(r,i,t),u=H.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,e.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=t,this._intPt[1]=n,e.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||a||u?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||o||u?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):e.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(e,t,n,r,i){var o=e.x<t.x?e.x:t.x,a=e.y<t.y?e.y:t.y,s=e.x>t.x?e.x:t.x,u=e.y>t.y?e.y:t.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,p=((o>l?o:l)+(s<h?s:h))/2,d=((a>c?a:c)+(u<f?u:f))/2;i.x=p,i.y=d,e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},t.prototype.computeIntersect=function(t,n,r,i){if(this._isProper=!1,!H.intersects(t,n,r,i))return e.NO_INTERSECTION;var o=se.orientationIndex(t,n,r),a=se.orientationIndex(t,n,i);if(o>0&&a>0||o<0&&a<0)return e.NO_INTERSECTION;var s=se.orientationIndex(r,i,t),u=se.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?e.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(t,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,t.equals2D(r)||t.equals2D(i)?this._intPt[0]=t:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new S(r):0===a?this._intPt[0]=new S(i):0===s?this._intPt[0]=new S(t):0===u&&(this._intPt[0]=new S(n))):(this._isProper=!0,this._intPt[0]=this.intersection(t,n,r,i)),e.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(e,t,n,r){var i=e,o=se.distancePointLine(e,n,r),a=se.distancePointLine(t,n,r);return a<o&&(o=a,i=t),(a=se.distancePointLine(n,e,t))<o&&(o=a,i=n),(a=se.distancePointLine(r,e,t))<o&&(o=a,i=r),i},t}(ne),oe=function(){};oe.prototype.interfaces_=function(){return[]},oe.prototype.getClass=function(){return oe},oe.orientationIndex=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-t.x,a=n.y-t.y;return oe.signOfDet2x2(r,i,o,a)},oe.signOfDet2x2=function(e,t,n,r){var i=null,o=null,a=null;if(i=1,0===e||0===r)return 0===t||0===n?0:t>0?n>0?-i:i:n>0?i:-i;if(0===t||0===n)return r>0?e>0?i:-i:e>0?-i:i;if(t>0?r>0?t<=r||(i=-i,o=e,e=n,n=o,o=t,t=r,r=o):t<=-r?(i=-i,n=-n,r=-r):(o=e,e=-n,n=o,o=t,t=-r,r=o):r>0?-t<=r?(i=-i,e=-e,t=-t):(o=-e,e=n,n=o,o=-t,t=r,r=o):t>=r?(e=-e,t=-t,n=-n,r=-r):(i=-i,o=-e,e=-n,n=o,o=-t,t=-r,r=o),e>0){if(!(n>0))return i;if(!(e<=n))return i}else{if(n>0)return-i;if(!(e>=n))return-i;i=-i,e=-e,n=-n}for(;;){if((r-=(a=Math.floor(n/e))*t)<0)return-i;if(r>t)return i;if(e>(n-=a*e)+n){if(t<r+r)return i}else{if(t>r+r)return-i;n=e-n,r=t-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((t-=(a=Math.floor(e/n))*r)<0)return i;if(t>r)return-i;if(n>(e-=a*n)+e){if(r<t+t)return-i}else{if(r>t+t)return i;e=n-e,t=r-t,i=-i}if(0===t)return 0===e?0:i;if(0===e)return-i}};var ae=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e};ae.prototype.countSegment=function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,r=t.x;return n>r&&(n=t.x,r=e.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var i=e.x-this._p.x,o=e.y-this._p.y,a=t.x-this._p.x,s=t.y-this._p.y,u=oe.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},ae.prototype.isPointInPolygon=function(){return this.getLocation()!==I.EXTERIOR},ae.prototype.getLocation=function(){return this._isPointOnSegment?I.BOUNDARY:this._crossingCount%2==1?I.INTERIOR:I.EXTERIOR},ae.prototype.isOnSegment=function(){return this._isPointOnSegment},ae.prototype.interfaces_=function(){return[]},ae.prototype.getClass=function(){return ae},ae.locatePointInRing=function(){if(arguments[0]instanceof S&&M(arguments[1],U)){for(var e=arguments[1],t=new ae(arguments[0]),n=new S,r=new S,i=1;i<e.size();i++)if(e.getCoordinate(i,n),e.getCoordinate(i-1,r),t.countSegment(n,r),t.isOnSegment())return t.getLocation();return t.getLocation()}if(arguments[0]instanceof S&&arguments[1]instanceof Array){for(var o=arguments[1],a=new ae(arguments[0]),s=1;s<o.length;s++){var u=o[s],l=o[s-1];if(a.countSegment(u,l),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var se=function(){},ue={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};se.prototype.interfaces_=function(){return[]},se.prototype.getClass=function(){return se},se.orientationIndex=function(e,t,n){return z.orientationIndex(e,t,n)},se.signedArea=function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,r=1;r<e.length-1;r++){var i=e[r].x-n,o=e[r+1].y;t+=i*(e[r-1].y-o)}return t/2}if(M(arguments[0],U)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new S,l=new S,c=new S;a.getCoordinate(0,l),a.getCoordinate(1,c);var h=l.x;c.x-=h;for(var f=0,p=1;p<s-1;p++)u.y=l.y,l.x=c.x,l.y=c.y,a.getCoordinate(p+1,c),c.x-=h,f+=l.x*(u.y-c.y);return f/2}},se.distanceLineLine=function(e,t,n,r){if(e.equals(t))return se.distancePointLine(e,n,r);if(n.equals(r))return se.distancePointLine(r,e,t);var i=!1;if(H.intersects(e,t,n,r)){var o=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y),s=((e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?L.min(se.distancePointLine(e,n,r),se.distancePointLine(t,n,r),se.distancePointLine(n,e,t),se.distancePointLine(r,e,t)):0},se.isPointInRing=function(e,t){return se.locatePointInRing(e,t)!==I.EXTERIOR},se.computeLength=function(e){var t=e.size();if(t<=1)return 0;var n=0,r=new S;e.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<t;a++){e.getCoordinate(a,r);var s=r.x,u=r.y,l=s-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=s,o=u}return n},se.isCCW=function(e){var t=e.length-1;if(t<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],r=0,i=1;i<=t;i++){var o=e[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=t)}while(e[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%t}while(e[s].equals2D(n)&&s!==r);var u=e[a],l=e[s];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=se.computeOrientation(u,n,l);return 0===c?u.x>l.x:c>0},se.locatePointInRing=function(e,t){return ae.locatePointInRing(e,t)},se.distancePointLinePerpendicular=function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(i)*Math.sqrt(r)},se.computeOrientation=function(e,t,n){return se.orientationIndex(e,t,n)},se.distancePointLine=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];if(0===t.length)throw new v("Line array must contain at least one vertex");for(var n=e.distance(t[0]),r=0;r<t.length-1;r++){var i=se.distancePointLine(e,t[r],t[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),l=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(l<=0)return o.distance(a);if(l>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(c)*Math.sqrt(u)}},se.isOnLine=function(e,t){for(var n=new ie,r=1;r<t.length;r++){var i=t[r-1],o=t[r];if(n.computeIntersection(e,i,o),n.hasIntersection())return!0}return!1},ue.CLOCKWISE.get=function(){return-1},ue.RIGHT.get=function(){return se.CLOCKWISE},ue.COUNTERCLOCKWISE.get=function(){return 1},ue.LEFT.get=function(){return se.COUNTERCLOCKWISE},ue.COLLINEAR.get=function(){return 0},ue.STRAIGHT.get=function(){return se.COLLINEAR},Object.defineProperties(se,ue);var le=function(){};le.prototype.filter=function(e){},le.prototype.interfaces_=function(){return[]},le.prototype.getClass=function(){return le};var ce=function(){var e=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()},he={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ce.prototype.isGeometryCollection=function(){return this.getSortIndex()===ce.SORTINDEX_GEOMETRYCOLLECTION},ce.prototype.getFactory=function(){return this._factory},ce.prototype.getGeometryN=function(e){return this},ce.prototype.getArea=function(){return 0},ce.prototype.isRectangle=function(){return!1},ce.prototype.equals=function(){if(arguments[0]instanceof ce){var e=arguments[0];return null!==e&&this.equalsTopo(e)}if(arguments[0]instanceof Object){var t=arguments[0];if(!(t instanceof ce))return!1;var n=t;return this.equalsExact(n)}},ce.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)},ce.prototype.geometryChanged=function(){this.apply(ce.geometryChangedFilter)},ce.prototype.geometryChangedAction=function(){this._envelope=null},ce.prototype.equalsNorm=function(e){return null!==e&&this.norm().equalsExact(e.norm())},ce.prototype.getLength=function(){return 0},ce.prototype.getNumGeometries=function(){return 1},ce.prototype.compareTo=function(){if(1===arguments.length){var e=arguments[0],t=e;return this.getSortIndex()!==t.getSortIndex()?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},ce.prototype.getUserData=function(){return this._userData},ce.prototype.getSRID=function(){return this._SRID},ce.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ce.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===ce.SORTINDEX_GEOMETRYCOLLECTION)throw new v("This method does not support GeometryCollection arguments")},ce.prototype.equal=function(e,t,n){return 0===n?e.equals(t):e.distance(t)<=n},ce.prototype.norm=function(){var e=this.copy();return e.normalize(),e},ce.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ce.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new H(this._envelope)},ce.prototype.setSRID=function(e){this._SRID=e},ce.prototype.setUserData=function(e){this._userData=e},ce.prototype.compare=function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},ce.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ce.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ce.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ce.SORTINDEX_MULTIPOINT||this.getSortIndex()===ce.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ce.SORTINDEX_MULTIPOLYGON},ce.prototype.interfaces_=function(){return[w,x,t]},ce.prototype.getClass=function(){return ce},ce.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1},ce.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1},he.serialVersionUID.get=function(){return 0x799ea46522854c00},he.SORTINDEX_POINT.get=function(){return 0},he.SORTINDEX_MULTIPOINT.get=function(){return 1},he.SORTINDEX_LINESTRING.get=function(){return 2},he.SORTINDEX_LINEARRING.get=function(){return 3},he.SORTINDEX_MULTILINESTRING.get=function(){return 4},he.SORTINDEX_POLYGON.get=function(){return 5},he.SORTINDEX_MULTIPOLYGON.get=function(){return 6},he.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},he.geometryChangedFilter.get=function(){return fe},Object.defineProperties(ce,he);var fe=function(){};fe.interfaces_=function(){return[le]},fe.filter=function(e){e.geometryChangedAction()};var pe=function(){};pe.prototype.filter=function(e){},pe.prototype.interfaces_=function(){return[]},pe.prototype.getClass=function(){return pe};var de=function(){},ge={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};de.prototype.isInBoundary=function(e){},de.prototype.interfaces_=function(){return[]},de.prototype.getClass=function(){return de},ge.Mod2BoundaryNodeRule.get=function(){return me},ge.EndPointBoundaryNodeRule.get=function(){return ye},ge.MultiValentEndPointBoundaryNodeRule.get=function(){return ve},ge.MonoValentEndPointBoundaryNodeRule.get=function(){return _e},ge.MOD2_BOUNDARY_RULE.get=function(){return new me},ge.ENDPOINT_BOUNDARY_RULE.get=function(){return new ye},ge.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ve},ge.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _e},ge.OGC_SFS_BOUNDARY_RULE.get=function(){return de.MOD2_BOUNDARY_RULE},Object.defineProperties(de,ge);var me=function(){};me.prototype.isInBoundary=function(e){return e%2==1},me.prototype.interfaces_=function(){return[de]},me.prototype.getClass=function(){return me};var ye=function(){};ye.prototype.isInBoundary=function(e){return e>0},ye.prototype.interfaces_=function(){return[de]},ye.prototype.getClass=function(){return ye};var ve=function(){};ve.prototype.isInBoundary=function(e){return e>1},ve.prototype.interfaces_=function(){return[de]},ve.prototype.getClass=function(){return ve};var _e=function(){};_e.prototype.isInBoundary=function(e){return 1===e},_e.prototype.interfaces_=function(){return[de]},_e.prototype.getClass=function(){return _e};var be=function(){};be.prototype.add=function(){},be.prototype.addAll=function(){},be.prototype.isEmpty=function(){},be.prototype.iterator=function(){},be.prototype.size=function(){},be.prototype.toArray=function(){},be.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var xe=function(){};xe.prototype.hasNext=function(){},xe.prototype.next=function(){},xe.prototype.remove=function(){};var we=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(be);(r.prototype=new Error).name="NoSuchElementException";var Ee=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof be&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,be]},t.prototype.add=function(e){return 1===arguments.length?this.array_.push(e):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},t.prototype.set=function(e,t){var n=this.array_[e];return this.array_[e]=t,n},t.prototype.iterator=function(){return new Se(this)},t.prototype.get=function(e){if(e<0||e>=this.size())throw new n;return this.array_[e]},t.prototype.isEmpty=function(){return 0===this.array_.length},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e},t.prototype.remove=function(e){for(var t=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===e){this.array_.splice(n,1),t=!0;break}return t},t}(we),Se=function(e){function t(t){e.call(this),this.arrayList_=t,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(e){return this.arrayList_.set(this.position_-1,e)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(xe),Te=function(e){function t(){if(e.call(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(e){return this.get(e)},t.prototype.addAll=function(){if(2===arguments.length){for(var t=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),t),n=!0;return n}return e.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=0;n<this.size();n++)t.add(n,this.get(n).copy());return t},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){if(1===arguments.length){var t=arguments[0];e.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof S&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;e.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var l=0;l<s.length;l++)this.add(s[l],u);else for(var c=s.length-1;c>=0;c--)this.add(s[c],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof S){var h=arguments[0],f=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(h>0&&this.get(h-1).equals2D(f))return null;if(h<p&&this.get(h).equals2D(f))return null}}e.prototype.add.call(this,h,f)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],m=arguments[2],y=arguments[3],v=1;m>y&&(v=-1);for(var _=m;_!==y;_+=v)this.add(d[_],g);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new S(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,n),t}(Ee),ke=function(){},Ce={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Ce.ForwardComparator.get=function(){return Ie},Ce.BidirectionalComparator.get=function(){return Ae},Ce.coordArrayType.get=function(){return new Array(0).fill(null)},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke},ke.isRing=function(e){return!(e.length<4)&&!!e[0].equals2D(e[e.length-1])},ke.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(ke.indexOf(r,t)<0)return r}return null},ke.scroll=function(e,t){var n=ke.indexOf(t,e);if(n<0)return null;var r=new Array(e.length).fill(null);G.arraycopy(e,n,r,0,e.length-n),G.arraycopy(e,0,r,e.length-n,n),G.arraycopy(r,0,e,0,e.length)},ke.equals=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},ke.intersection=function(e,t){for(var n=new Te,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()},ke.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1},ke.removeRepeatedPoints=function(e){return ke.hasRepeatedPoints(e)?new Te(e,!1).toCoordinateArray():e},ke.reverse=function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;r<=n;r++){var i=e[r];e[r]=e[t-r],e[t-r]=i}},ke.removeNull=function(e){for(var t=0,n=0;n<e.length;n++)null!==e[n]&&t++;var r=new Array(t).fill(null);if(0===t)return r;for(var i=0,o=0;o<e.length;o++)null!==e[o]&&(r[i++]=e[o]);return r},ke.copyDeep=function(){if(1===arguments.length){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=new S(e[n]);return t}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new S(r[i+u])},ke.isEqualReversed=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[e.length-n-1];if(0!==r.compareTo(i))return!1}return!0},ke.envelope=function(e){for(var t=new H,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t},ke.toCoordinateArray=function(e){return e.toArray(ke.coordArrayType)},ke.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]},ke.indexOf=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1},ke.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(0!==r)return r}return 1},ke.compare=function(e,t){for(var n=0;n<e.length&&n<t.length;){var r=e[n].compareTo(t[n]);if(0!==r)return r;n++}return n<t.length?-1:n<e.length?1:0},ke.minCoordinate=function(e){for(var t=null,n=0;n<e.length;n++)(null===t||t.compareTo(e[n])>0)&&(t=e[n]);return t},ke.extract=function(e,t,n){t=L.clamp(t,0,e.length);var r=(n=L.clamp(n,-1,e.length))-t+1;n<0&&(r=0),t>=e.length&&(r=0),n<t&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=t;a<=n;a++)i[o++]=e[a];return i},Object.defineProperties(ke,Ce);var Ie=function(){};Ie.prototype.compare=function(e,t){return ke.compare(e,t)},Ie.prototype.interfaces_=function(){return[E]},Ie.prototype.getClass=function(){return Ie};var Ae=function(){};Ae.prototype.compare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=ke.compare(n,r);return ke.isEqualReversed(n,r)?0:i},Ae.prototype.OLDcompare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=ke.increasingDirection(n),o=ke.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[a].compareTo(r[s]);if(0!==l)return l;a+=i,s+=o}return 0},Ae.prototype.interfaces_=function(){return[E]},Ae.prototype.getClass=function(){return Ae};var Me=function(){};Me.prototype.get=function(){},Me.prototype.put=function(){},Me.prototype.size=function(){},Me.prototype.values=function(){},Me.prototype.entrySet=function(){};var Le=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Me);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new be).contains=function(){};var Ne=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof be&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.contains=function(e){for(var t=0,n=this.array_.length;t<n;t++)if(this.array_[t]===e)return!0;return!1},t.prototype.add=function(e){return!this.contains(e)&&(this.array_.push(e),!0)},t.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},t.prototype.remove=function(e){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return 0===this.array_.length},t.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e},t.prototype.iterator=function(){return new Pe(this)},t}(o),Pe=function(e){function t(t){e.call(this),this.hashSet_=t,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new i},t}(xe),Oe=0;(h.prototype=new Le).get=function(e){for(var t=this.root_;null!==t;){var n=e.compareTo(t.key);if(n<0)t=t.left;else{if(!(n>0))return t.value;t=t.right}}return null},h.prototype.put=function(e,t){if(null===this.root_)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:Oe,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=e.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=t,o}i=i.right}}while(null!==i);var a={key:e,left:null,right:null,value:t,parent:n,color:Oe,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},h.prototype.fixAfterInsertion=function(e){for(e.color=1;null!=e&&e!==this.root_&&1===e.parent.color;)if(s(e)===l(s(s(e)))){var t=c(s(s(e)));1===a(t)?(u(s(e),Oe),u(t,Oe),u(s(s(e)),1),e=s(s(e))):(e===c(s(e))&&(e=s(e),this.rotateLeft(e)),u(s(e),Oe),u(s(s(e)),1),this.rotateRight(s(s(e))))}else{var n=l(s(s(e)));1===a(n)?(u(s(e),Oe),u(n,Oe),u(s(s(e)),1),e=s(s(e))):(e===l(s(e))&&(e=s(e),this.rotateRight(e)),u(s(e),Oe),u(s(s(e)),1),this.rotateLeft(s(s(e))))}this.root_.color=Oe},h.prototype.values=function(){var e=new Ee,t=this.getFirstEntry();if(null!==t)for(e.add(t.value);null!==(t=h.successor(t));)e.add(t.value);return e},h.prototype.entrySet=function(){var e=new Ne,t=this.getFirstEntry();if(null!==t)for(e.add(t);null!==(t=h.successor(t));)e.add(t);return e},h.prototype.rotateLeft=function(e){if(null!=e){var t=e.right;e.right=t.left,null!=t.left&&(t.left.parent=e),t.parent=e.parent,null===e.parent?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}},h.prototype.rotateRight=function(e){if(null!=e){var t=e.left;e.left=t.right,null!=t.right&&(t.right.parent=e),t.parent=e.parent,null===e.parent?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}},h.prototype.getFirstEntry=function(){var e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e},h.successor=function(e){if(null===e)return null;if(null!==e.right){for(var t=e.right;null!==t.left;)t=t.left;return t}for(var n=e.parent,r=e;null!==n&&r===n.right;)r=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var Re=function(){};Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re},f.prototype=new o,(p.prototype=new f).contains=function(e){for(var t=0,n=this.array_.length;t<n;t++)if(0===this.array_[t].compareTo(e))return!0;return!1},p.prototype.add=function(e){if(this.contains(e))return!1;for(var t=0,n=this.array_.length;t<n;t++)if(1===this.array_[t].compareTo(e))return this.array_.splice(t,0,e),!0;return this.array_.push(e),!0},p.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},p.prototype.remove=function(e){throw new i},p.prototype.size=function(){return this.array_.length},p.prototype.isEmpty=function(){return 0===this.array_.length},p.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e},p.prototype.iterator=function(){return new De(this)};var De=function(e){this.treeSet_=e,this.position_=0};De.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},De.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},De.prototype.remove=function(){throw new i};var Fe=function(){};Fe.sort=function(){var e,t,n,r,i=arguments[0];if(1===arguments.length)r=function(e,t){return e.compareTo(t)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(e,t){return n.compare(e,t)},i.sort(r);else if(3===arguments.length){(t=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(t,i.slice(arguments[2],i.length));for(i.splice(0,i.length),e=0;e<o.length;e++)i.push(o[e])}else if(4===arguments.length)for(t=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(e,t){return n.compare(e,t)},t.sort(r),o=i.slice(0,arguments[1]).concat(t,i.slice(arguments[2],i.length)),i.splice(0,i.length),e=0;e<o.length;e++)i.push(o[e])},Fe.asList=function(e){for(var t=new Ee,n=0,r=e.length;n<r;n++)t.add(e[n]);return t};var ze=function(){},Be={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Be.P.get=function(){return 0},Be.L.get=function(){return 1},Be.A.get=function(){return 2},Be.FALSE.get=function(){return-1},Be.TRUE.get=function(){return-2},Be.DONTCARE.get=function(){return-3},Be.SYM_FALSE.get=function(){return"F"},Be.SYM_TRUE.get=function(){return"T"},Be.SYM_DONTCARE.get=function(){return"*"},Be.SYM_P.get=function(){return"0"},Be.SYM_L.get=function(){return"1"},Be.SYM_A.get=function(){return"2"},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze},ze.toDimensionSymbol=function(e){switch(e){case ze.FALSE:return ze.SYM_FALSE;case ze.TRUE:return ze.SYM_TRUE;case ze.DONTCARE:return ze.SYM_DONTCARE;case ze.P:return ze.SYM_P;case ze.L:return ze.SYM_L;case ze.A:return ze.SYM_A}throw new v("Unknown dimension value: "+e)},ze.toDimensionValue=function(e){switch(R.toUpperCase(e)){case ze.SYM_FALSE:return ze.FALSE;case ze.SYM_TRUE:return ze.TRUE;case ze.SYM_DONTCARE:return ze.DONTCARE;case ze.SYM_P:return ze.P;case ze.SYM_L:return ze.L;case ze.SYM_A:return ze.A}throw new v("Unknown dimension symbol: "+e)},Object.defineProperties(ze,Be);var Ue=function(){};Ue.prototype.filter=function(e){},Ue.prototype.interfaces_=function(){return[]},Ue.prototype.getClass=function(){return Ue};var Ve=function(){};Ve.prototype.filter=function(e,t){},Ve.prototype.isDone=function(){},Ve.prototype.isGeometryChanged=function(){},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve};var je=function(e){function t(t,n){if(e.call(this,n),this._geometries=t||[],e.hasNullElements(this._geometries))throw new v("geometries must not contain null elements")}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var e=new H,t=0;t<this._geometries.length;t++)e.expandToInclude(this._geometries[t].getEnvelopeInternal());return e},t.prototype.getGeometryN=function(e){return this._geometries[e]},t.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var e=new Array(this.getNumPoints()).fill(null),t=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)e[++t]=r[i];return e},t.prototype.getArea=function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getArea();return e},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var r=t;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();Fe.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var e=ze.FALSE,t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getBoundaryDimension());return e},t.prototype.getDimension=function(){for(var e=ze.FALSE,t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getDimension());return e},t.prototype.getLength=function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getLength();return e},t.prototype.getNumPoints=function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getNumPoints();return e},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var e=this._geometries.length,t=new Array(e).fill(null),n=0;n<this._geometries.length;n++)t[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(t)},t.prototype.compareToSameClass=function(){if(1===arguments.length){var e=arguments[0],t=new p(Fe.asList(this._geometries)),n=new p(Fe.asList(e._geometries));return this.compare(t,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var u=this.getGeometryN(s),l=i.getGeometryN(s),c=u.compareToSameClass(l,r);if(0!==c)return c;s++}return s<o?1:s<a?-1:0}},t.prototype.apply=function(){if(M(arguments[0],pe))for(var e=arguments[0],t=0;t<this._geometries.length;t++)this._geometries[t].apply(e);else if(M(arguments[0],Ve)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(M(arguments[0],Ue)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(M(arguments[0],le)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),te.shouldNeverReachHere(),null},t.prototype.clone=function(){var t=e.prototype.clone.call(this);t._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)t._geometries[n]=this._geometries[n].clone();return t},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)},t.prototype.isEmpty=function(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(t,n),t}(ce),qe=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ce.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&e.prototype.equalsExact.call(this,t,n)}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?ze.FALSE:0},t.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var e=this._geometries.length,t=new Array(e).fill(null),n=0;n<this._geometries.length;n++)t[e-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(t)},t.prototype.getBoundary=function(){return new Ge(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)},t.prototype.interfaces_=function(){return[Re]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(t,n),t}(je),Ge=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var e=arguments[0],t=de.MOD2_BOUNDARY_RULE;this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Ge.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return 1===t.length?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)},Ge.prototype.getBoundary=function(){return this._geom instanceof Ye?this.boundaryLineString(this._geom):this._geom instanceof qe?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Ge.prototype.boundaryLineString=function(e){return this._geom.isEmpty()?this.getEmptyMultiPoint():e.isClosed()?this._bnRule.isInBoundary(2)?e.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])},Ge.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Ge.prototype.computeBoundaryCoordinates=function(e){var t=new Ee;this._endpointMap=new h;for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&t.add(o.getKey())}return ke.toCoordinateArray(t)},Ge.prototype.addEndpoint=function(e){var t=this._endpointMap.get(e);null===t&&(t=new $e,this._endpointMap.put(e,t)),t.count++},Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge},Ge.getBoundary=function(){return 1===arguments.length?new Ge(arguments[0]).getBoundary():2===arguments.length?new Ge(arguments[0],arguments[1]).getBoundary():void 0};var $e=function(){this.count=null};$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var He=function(){},Xe={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He},He.chars=function(e,t){for(var n=new Array(t).fill(null),r=0;r<t;r++)n[r]=e;return String(n)},He.getStackTrace=function(){if(1===arguments.length){var e=arguments[0],t=new function(){},n=new function(){}(t);return e.printStackTrace(n),t.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(He.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+He.NEWLINE}catch(e){if(!(e instanceof d))throw e;te.shouldNeverReachHere()}return o}},He.split=function(e,t){for(var n=t.length,r=new Ee,i=""+e,o=i.indexOf(t);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(t)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},He.toString=function(){if(1===arguments.length){var e=arguments[0];return He.SIMPLE_ORDINATE_FORMAT.format(e)}},He.spaces=function(e){return He.chars(" ",e)},Xe.NEWLINE.get=function(){return G.getProperty("line.separator")},Xe.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(He,Xe);var We=function(){};We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We},We.copyCoord=function(e,t,n,r){for(var i=Math.min(e.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,e.getOrdinate(t,o))},We.isRing=function(e){var t=e.size();return 0===t||!(t<=3)&&e.getOrdinate(0,U.X)===e.getOrdinate(t-1,U.X)&&e.getOrdinate(0,U.Y)===e.getOrdinate(t-1,U.Y)},We.isEqual=function(e,t){var n=e.size();if(n!==t.size())return!1;for(var r=Math.min(e.getDimension(),t.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=e.getOrdinate(i,o),s=t.getOrdinate(i,o);if(e.getOrdinate(i,o)!==t.getOrdinate(i,o)&&(!_.isNaN(a)||!_.isNaN(s)))return!1}return!0},We.extend=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();if(We.copy(t,0,r,0,i),i>0)for(var o=i;o<n;o++)We.copy(t,i-1,r,o,1);return r},We.reverse=function(e){for(var t=e.size()-1,n=Math.trunc(t/2),r=0;r<=n;r++)We.swap(e,r,t-r)},We.swap=function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var i=e.getOrdinate(t,r);e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,i)}},We.copy=function(e,t,n,r,i){for(var o=0;o<i;o++)We.copyCoord(e,t+o,n,r+o)},We.toString=function(){if(1===arguments.length){var e=arguments[0],t=e.size();if(0===t)return"()";var n=e.getDimension(),r=new P;r.append("(");for(var i=0;i<t;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(He.toString(e.getOrdinate(i,o)))}return r.append(")"),r.toString()}},We.ensureValidRing=function(e,t){var n=t.size();return 0===n?t:n<=3?We.createClosedRing(e,t,4):t.getOrdinate(0,U.X)===t.getOrdinate(n-1,U.X)&&t.getOrdinate(0,U.Y)===t.getOrdinate(n-1,U.Y)?t:We.createClosedRing(e,t,n+1)},We.createClosedRing=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();We.copy(t,0,r,0,i);for(var o=i;o<n;o++)We.copy(t,0,r,o,1);return r};var Ye=function(e){function t(t,n){e.call(this,n),this._points=null,this.init(t)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new H:this._points.expandEnvelope(new H)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var r=t;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var t=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(t)))return this._points.getCoordinate(e).compareTo(this._points.getCoordinate(t))>0&&We.reverse(this._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?ze.FALSE:0},t.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return se.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var e=this._points.copy();return We.reverse(e),this.getFactory().createLineString(e)},t.prototype.compareToSameClass=function(){if(1===arguments.length){for(var e=arguments[0],t=0,n=0;t<this._points.size()&&n<e._points.size();){var r=this._points.getCoordinate(t).compareTo(e._points.getCoordinate(n));if(0!==r)return r;t++,n++}return t<this._points.size()?1:n<e._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},t.prototype.apply=function(){if(M(arguments[0],pe))for(var e=arguments[0],t=0;t<this._points.size();t++)e.filter(this._points.getCoordinate(t));else if(M(arguments[0],Ve)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(M(arguments[0],Ue)||M(arguments[0],le))&&arguments[0].filter(this)},t.prototype.getBoundary=function(){return new Ge(this).getBoundary()},t.prototype.isEquivalentClass=function(e){return e instanceof t},t.prototype.clone=function(){var t=e.prototype.clone.call(this);return t._points=this._points.clone(),t},t.prototype.getCoordinateN=function(e){return this._points.getCoordinate(e)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return 0===this._points.size()},t.prototype.init=function(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new v("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e},t.prototype.isCoordinate=function(e){for(var t=0;t<this._points.size();t++)if(this._points.getCoordinate(t).equals(e))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))},t.prototype.interfaces_=function(){return[Re]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,n),t}(ce),Ze=function(){};Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Je=function(e){function t(t,n){e.call(this,n),this._coordinates=t||null,this.init(this._coordinates)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new H;var e=new H;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e},t.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),n))}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return ze.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(1===arguments.length){var e=arguments[0];return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}},t.prototype.apply=function(){if(M(arguments[0],pe)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(M(arguments[0],Ve)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else(M(arguments[0],Ue)||M(arguments[0],le))&&arguments[0].filter(this)},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var t=e.prototype.clone.call(this);return t._coordinates=this._coordinates.clone(),t},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return 0===this._coordinates.size()},t.prototype.init=function(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),te.isTrue(e.size()<=1),this._coordinates=e},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[Ze]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(t,n),t}(ce),Ke=function(){};Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};var Qe=function(e){function t(t,n,r){if(e.call(this,r),this._shell=null,this._holes=null,null===t&&(t=this.getFactory().createLinearRing()),null===n&&(n=[]),e.hasNullElements(n))throw new v("holes must not contain null elements");if(t.isEmpty()&&e.hasNonEmptyElements(n))throw new v("shell is empty but holes are not");this._shell=t,this._holes=n}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),t=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)e[++t]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)e[++t]=o[a];return e},t.prototype.getArea=function(){var e=0;e+=Math.abs(se.signedArea(this._shell.getCoordinateSequence()));for(var t=0;t<this._holes.length;t++)e-=Math.abs(se.signedArea(this._holes[t].getCoordinateSequence()));return e},t.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var e=this._shell.getCoordinateSequence(),t=this.getEnvelopeInternal(),n=0;n<5;n++){var r=e.getX(n);if(r!==t.getMinX()&&r!==t.getMaxX())return!1;var i=e.getY(n);if(i!==t.getMinY()&&i!==t.getMaxY())return!1}for(var o=e.getX(0),a=e.getY(0),s=1;s<=4;s++){var u=e.getX(s),l=e.getY(s);if(u!==o===(l!==a))return!1;o=u,a=l}return!0},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var r=t,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)this.normalize(this._holes[e],!1);Fe.sort(this._holes)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(t.isEmpty())return null;var r=new Array(t.getCoordinates().length-1).fill(null);G.arraycopy(t.getCoordinates(),0,r,0,r.length);var i=ke.minCoordinate(t.getCoordinates());ke.scroll(r,i),G.arraycopy(r,0,t.getCoordinates(),0,r.length),t.getCoordinates()[r.length]=r[0],se.isCCW(t.getCoordinates())===n&&ke.reverse(t.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var e=0;e+=this._shell.getLength();for(var t=0;t<this._holes.length;t++)e+=this._holes[t].getLength();return e},t.prototype.getNumPoints=function(){for(var e=this._shell.getNumPoints(),t=0;t<this._holes.length;t++)e+=this._holes[t].getNumPoints();return e},t.prototype.reverse=function(){var e=this.copy();e._shell=this._shell.copy().reverse(),e._holes=new Array(this._holes.length).fill(null);for(var t=0;t<this._holes.length;t++)e._holes[t]=this._holes[t].copy().reverse();return e},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){if(1===arguments.length){var e=arguments[0],t=this._shell,n=e._shell;return t.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var u=this.getNumInteriorRing(),l=i.getNumInteriorRing(),c=0;c<u&&c<l;){var h=this.getInteriorRingN(c),f=i.getInteriorRingN(c),p=h.compareToSameClass(f,r);if(0!==p)return p;c++}return c<u?1:c<l?-1:0}},t.prototype.apply=function(e){if(M(e,pe)){this._shell.apply(e);for(var t=0;t<this._holes.length;t++)this._holes[t].apply(e)}else if(M(e,Ve)){if(this._shell.apply(e),!e.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(e),!e.isDone());n++);e.isGeometryChanged()&&this.geometryChanged()}else if(M(e,Ue))e.filter(this);else if(M(e,le)){e.filter(this),this._shell.apply(e);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(e)}},t.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var t=0;t<this._holes.length;t++)e[t+1]=this._holes[t];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)},t.prototype.clone=function(){var t=e.prototype.clone.call(this);t._shell=this._shell.clone(),t._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)t._holes[n]=this._holes[n].clone();return t},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var e=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new t(e,n,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(e){return this._holes[e]},t.prototype.interfaces_=function(){return[Ke]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,n),t}(ce),et=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ce.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&e.prototype.equalsExact.call(this,t,n)}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._geometries[t].getCoordinate()}return e.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return ze.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)},t.prototype.interfaces_=function(){return[Ze]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(t,n),t}(je),tt=function(e){function t(t,n){t instanceof S&&n instanceof yt&&(t=n.getCoordinateSequenceFactory().create(t)),e.call(this,t,n),this.validateConstruction()}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ce.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return ze.FALSE},t.prototype.isClosed=function(){return!!this.isEmpty()||e.prototype.isClosed.call(this)},t.prototype.reverse=function(){var e=this._points.copy();return We.reverse(e),this.getFactory().createLinearRing(e)},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new v("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new v("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,n),t}(Ye),nt=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ce.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&e.prototype.equalsExact.call(this,t,n)}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var e=this._geometries.length,t=new Array(e).fill(null),n=0;n<this._geometries.length;n++)t[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(t)},t.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new Ee,t=0;t<this._geometries.length;t++)for(var n=this._geometries[t].getBoundary(),r=0;r<n.getNumGeometries();r++)e.add(n.getGeometryN(r));var i=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(i))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)},t.prototype.interfaces_=function(){return[Ke]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,n),t}(je),rt=function(e){this._factory=e||null,this._isUserDataCopied=!1},it={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};rt.prototype.setCopyUserData=function(e){this._isUserDataCopied=e},rt.prototype.edit=function(e,t){if(null===e)return null;var n=this.editInternal(e,t);return this._isUserDataCopied&&n.setUserData(e.getUserData()),n},rt.prototype.editInternal=function(e,t){return null===this._factory&&(this._factory=e.getFactory()),e instanceof je?this.editGeometryCollection(e,t):e instanceof Qe?this.editPolygon(e,t):e instanceof Je||e instanceof Ye?t.edit(e,this._factory):(te.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)},rt.prototype.editGeometryCollection=function(e,t){for(var n=t.edit(e,this._factory),r=new Ee,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),t);null===o||o.isEmpty()||r.add(o)}return n.getClass()===et?this._factory.createMultiPoint(r.toArray([])):n.getClass()===qe?this._factory.createMultiLineString(r.toArray([])):n.getClass()===nt?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},rt.prototype.editPolygon=function(e,t){var n=t.edit(e,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),t);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Ee,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),t);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},rt.prototype.interfaces_=function(){return[]},rt.prototype.getClass=function(){return rt},rt.GeometryEditorOperation=function(){},it.NoOpGeometryOperation.get=function(){return ot},it.CoordinateOperation.get=function(){return at},it.CoordinateSequenceOperation.get=function(){return st},Object.defineProperties(rt,it);var ot=function(){};ot.prototype.edit=function(e,t){return e},ot.prototype.interfaces_=function(){return[rt.GeometryEditorOperation]},ot.prototype.getClass=function(){return ot};var at=function(){};at.prototype.edit=function(e,t){var n=this.editCoordinates(e.getCoordinates(),e);return null===n?e:e instanceof tt?t.createLinearRing(n):e instanceof Ye?t.createLineString(n):e instanceof Je?n.length>0?t.createPoint(n[0]):t.createPoint():e},at.prototype.interfaces_=function(){return[rt.GeometryEditorOperation]},at.prototype.getClass=function(){return at};var st=function(){};st.prototype.edit=function(e,t){return e instanceof tt?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof Ye?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof Je?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e},st.prototype.interfaces_=function(){return[rt.GeometryEditorOperation]},st.prototype.getClass=function(){return st};var ut=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var t=0;t<e;t++)this._coordinates[t]=new S}else if(M(arguments[0],U)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new S}},lt={serialVersionUID:{configurable:!0}};ut.prototype.setOrdinate=function(e,t,n){switch(t){case U.X:this._coordinates[e].x=n;break;case U.Y:this._coordinates[e].y=n;break;case U.Z:this._coordinates[e].z=n;break;default:throw new v("invalid ordinateIndex")}},ut.prototype.size=function(){return this._coordinates.length},ut.prototype.getOrdinate=function(e,t){switch(t){case U.X:return this._coordinates[e].x;case U.Y:return this._coordinates[e].y;case U.Z:return this._coordinates[e].z}return _.NaN},ut.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._coordinates[e]}if(2===arguments.length){var t=arguments[0],n=arguments[1];n.x=this._coordinates[t].x,n.y=this._coordinates[t].y,n.z=this._coordinates[t].z}},ut.prototype.getCoordinateCopy=function(e){return new S(this._coordinates[e])},ut.prototype.getDimension=function(){return this._dimension},ut.prototype.getX=function(e){return this._coordinates[e].x},ut.prototype.clone=function(){for(var e=new Array(this.size()).fill(null),t=0;t<this._coordinates.length;t++)e[t]=this._coordinates[t].clone();return new ut(e,this._dimension)},ut.prototype.expandEnvelope=function(e){for(var t=0;t<this._coordinates.length;t++)e.expandToInclude(this._coordinates[t]);return e},ut.prototype.copy=function(){for(var e=new Array(this.size()).fill(null),t=0;t<this._coordinates.length;t++)e[t]=this._coordinates[t].copy();return new ut(e,this._dimension)},ut.prototype.toString=function(){if(this._coordinates.length>0){var e=new P(17*this._coordinates.length);e.append("("),e.append(this._coordinates[0]);for(var t=1;t<this._coordinates.length;t++)e.append(", "),e.append(this._coordinates[t]);return e.append(")"),e.toString()}return"()"},ut.prototype.getY=function(e){return this._coordinates[e].y},ut.prototype.toCoordinateArray=function(){return this._coordinates},ut.prototype.interfaces_=function(){return[U,t]},ut.prototype.getClass=function(){return ut},lt.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ut,lt);var ct=function(){},ht={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ct.prototype.readResolve=function(){return ct.instance()},ct.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ut(arguments[0]);if(M(arguments[0],U))return new ut(arguments[0])}else if(2===arguments.length){var e=arguments[0],t=arguments[1];return t>3&&(t=3),t<2?new ut(e):new ut(e,t)}},ct.prototype.interfaces_=function(){return[C,t]},ct.prototype.getClass=function(){return ct},ct.instance=function(){return ct.instanceObject},ht.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},ht.instanceObject.get=function(){return new ct},Object.defineProperties(ct,ht);var ft=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return this.map_.get(e)||null},t.prototype.put=function(e,t){return this.map_.set(e,t),t},t.prototype.values=function(){for(var e=new Ee,t=this.map_.values(),n=t.next();!n.done;)e.add(n.value),n=t.next();return e},t.prototype.entrySet=function(){var e=new Ne;return this.map_.entries().forEach((function(t){return e.add(t)})),e},t.prototype.size=function(){return this.map_.size()},t}(Me),pt=function e(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=e.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof gt){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},dt={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};pt.prototype.equals=function(e){if(!(e instanceof pt))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale},pt.prototype.compareTo=function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new O(n).compareTo(new O(r))},pt.prototype.getScale=function(){return this._scale},pt.prototype.isFloating=function(){return this._modelType===pt.FLOATING||this._modelType===pt.FLOATING_SINGLE},pt.prototype.getType=function(){return this._modelType},pt.prototype.toString=function(){var e="UNKNOWN";return this._modelType===pt.FLOATING?e="Floating":this._modelType===pt.FLOATING_SINGLE?e="Floating-Single":this._modelType===pt.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e},pt.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)||this._modelType===pt.FLOATING_SINGLE?e:this._modelType===pt.FIXED?Math.round(e*this._scale)/this._scale:e}if(arguments[0]instanceof S){var t=arguments[0];if(this._modelType===pt.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}},pt.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===pt.FLOATING?e=16:this._modelType===pt.FLOATING_SINGLE?e=6:this._modelType===pt.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e},pt.prototype.setScale=function(e){this._scale=Math.abs(e)},pt.prototype.interfaces_=function(){return[t,x]},pt.prototype.getClass=function(){return pt},pt.mostPrecise=function(e,t){return e.compareTo(t)>=0?e:t},dt.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},dt.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pt,dt);var gt=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},mt={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};gt.prototype.readResolve=function(){return gt.nameToTypeMap.get(this._name)},gt.prototype.toString=function(){return this._name},gt.prototype.interfaces_=function(){return[t]},gt.prototype.getClass=function(){return gt},mt.serialVersionUID.get=function(){return-552860263173159e4},mt.nameToTypeMap.get=function(){return new ft},Object.defineProperties(gt,mt),pt.Type=gt,pt.FIXED=new gt("FIXED"),pt.FLOATING=new gt("FLOATING"),pt.FLOATING_SINGLE=new gt("FLOATING SINGLE");var yt=function e(){this._precisionModel=new pt,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?M(arguments[0],C)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pt&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},vt={serialVersionUID:{configurable:!0}};yt.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new S(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new S(e.getMinX(),e.getMinY()),new S(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new S(e.getMinX(),e.getMinY()),new S(e.getMinX(),e.getMaxY()),new S(e.getMaxX(),e.getMaxY()),new S(e.getMaxX(),e.getMinY()),new S(e.getMinX(),e.getMinY())]),null)},yt.prototype.createLineString=function(e){return e?e instanceof Array?new Ye(this.getCoordinateSequenceFactory().create(e),this):M(e,U)?new Ye(e,this):void 0:new Ye(this.getCoordinateSequenceFactory().create([]),this)},yt.prototype.createMultiLineString=function(){return 0===arguments.length?new qe(null,this):1===arguments.length?new qe(arguments[0],this):void 0},yt.prototype.buildGeometry=function(e){for(var t=null,n=!1,r=!1,i=e.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===t&&(t=a),a!==t&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===t)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(yt.toGeometryArray(e));var s=e.iterator().next();if(e.size()>1){if(s instanceof Qe)return this.createMultiPolygon(yt.toPolygonArray(e));if(s instanceof Ye)return this.createMultiLineString(yt.toLineStringArray(e));if(s instanceof Je)return this.createMultiPoint(yt.toPointArray(e));te.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},yt.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)},yt.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof S){var e=arguments[0];return this.createPoint(null!==e?this.getCoordinateSequenceFactory().create([e]):null)}if(M(arguments[0],U))return new Je(arguments[0],this)}},yt.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},yt.prototype.createPolygon=function(){if(0===arguments.length)return new Qe(null,null,this);if(1===arguments.length){if(M(arguments[0],U)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof tt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Qe(arguments[0],arguments[1],this)},yt.prototype.getSRID=function(){return this._SRID},yt.prototype.createGeometryCollection=function(){return 0===arguments.length?new je(null,this):1===arguments.length?new je(arguments[0],this):void 0},yt.prototype.createGeometry=function(e){return new rt(this).edit(e,{edit:function(){if(2===arguments.length){var e=arguments[0];return this._coordinateSequenceFactory.create(e)}}})},yt.prototype.getPrecisionModel=function(){return this._precisionModel},yt.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(M(arguments[0],U))return new tt(arguments[0],this)}},yt.prototype.createMultiPolygon=function(){return 0===arguments.length?new nt(null,this):1===arguments.length?new nt(arguments[0],this):void 0},yt.prototype.createMultiPoint=function(){if(0===arguments.length)return new et(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new et(arguments[0],this);if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(M(arguments[0],U)){var t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(t.size()).fill(null),r=0;r<t.size();r++){var i=this.getCoordinateSequenceFactory().create(1,t.getDimension());We.copy(t,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},yt.prototype.interfaces_=function(){return[t]},yt.prototype.getClass=function(){return yt},yt.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.toGeometryArray=function(e){if(null===e)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.getDefaultCoordinateSequenceFactory=function(){return ct.instance()},yt.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)},vt.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(yt,vt);var _t=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],bt=function(e){this.geometryFactory=e||new yt};bt.prototype.read=function(e){var t,n=(t="string"==typeof e?JSON.parse(e):e).type;if(!xt[n])throw new Error("Unknown GeoJSON type: "+t.type);return-1!==_t.indexOf(n)?xt[n].apply(this,[t.coordinates]):"GeometryCollection"===n?xt[n].apply(this,[t.geometries]):xt[n].apply(this,[t])},bt.prototype.write=function(e){var t=e.getGeometryType();if(!wt[t])throw new Error("Geometry is not supported");return wt[t].apply(this,[e])};var xt={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!xt[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=xt.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t={};if(e.features){t.features=[];for(var n=0;n<e.features.length;++n)t.features.push(this.read(e.features[n]))}return e.bbox&&(t.bbox=this.parse.bbox.apply(this,[e.bbox])),t},coordinates:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(new S(r[0],r[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new S(e[0],e[1]),new S(e[2],e[1]),new S(e[2],e[3]),new S(e[0],e[3]),new S(e[0],e[1])])},Point:function(e){var t=new S(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=[],n=0;n<e.length;++n)t.push(xt.Point.apply(this,[e[n]]));return this.geometryFactory.createMultiPoint(t)},LineString:function(e){var t=xt.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=[],n=0;n<e.length;++n)t.push(xt.LineString.apply(this,[e[n]]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(e){for(var t=xt.coordinates.apply(this,[e[0]]),n=this.geometryFactory.createLinearRing(t),r=[],i=1;i<e.length;++i){var o=e[i],a=xt.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(xt.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(this.read(r))}return this.geometryFactory.createGeometryCollection(t)}},wt={coordinate:function(e){return[e.x,e.y]},Point:function(e){return{type:"Point",coordinates:wt.coordinate.apply(this,[e.getCoordinate()])}},MultiPoint:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=wt.Point.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(e){for(var t=[],n=e.getCoordinates(),r=0;r<n.length;++r){var i=n[r];t.push(wt.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:t}},MultiLineString:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=wt.LineString.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(e){var t=[],n=wt.LineString.apply(this,[e._shell]);t.push(n.coordinates);for(var r=0;r<e._holes.length;++r){var i=e._holes[r],o=wt.LineString.apply(this,[i]);t.push(o.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=wt.Polygon.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=r.getGeometryType();t.push(wt[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:t}}},Et=function(e){this.geometryFactory=e||new yt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new bt(this.geometryFactory)};Et.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===pt.FIXED&&this.reducePrecision(t),t},Et.prototype.reducePrecision=function(e){var t,n;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(t=0,n=e.points.length;t<n;t++)this.precisionModel.makePrecise(e.points[t]);else if(e.geometries)for(t=0,n=e.geometries.length;t<n;t++)this.reducePrecision(e.geometries[t])};var St=function(){this.parser=new bt(this.geometryFactory)};St.prototype.write=function(e){return this.parser.write(e)};var Tt=function(){},kt={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Tt.prototype.interfaces_=function(){return[]},Tt.prototype.getClass=function(){return Tt},Tt.opposite=function(e){return e===Tt.LEFT?Tt.RIGHT:e===Tt.RIGHT?Tt.LEFT:e},kt.ON.get=function(){return 0},kt.LEFT.get=function(){return 1},kt.RIGHT.get=function(){return 2},Object.defineProperties(Tt,kt),(g.prototype=new Error).name="EmptyStackException",(m.prototype=new we).add=function(e){return this.array_.push(e),!0},m.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]},m.prototype.push=function(e){return this.array_.push(e),e},m.prototype.pop=function(e){if(0===this.array_.length)throw new g;return this.array_.pop()},m.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},m.prototype.empty=function(){return 0===this.array_.length},m.prototype.isEmpty=function(){return this.empty()},m.prototype.search=function(e){return this.array_.indexOf(e)},m.prototype.size=function(){return this.array_.length},m.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e};var Ct=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ct.prototype.getCoordinate=function(){return this._minCoord},Ct.prototype.getRightmostSide=function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n},Ct.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();te.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],r=se.computeOrientation(this._minCoord,n,t),i=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&r===se.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&r===se.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Ct.prototype.getRightmostSideOfSegment=function(e,t){var n=e.getEdge().getCoordinates();if(t<0||t+1>=n.length)return-1;if(n[t].y===n[t+1].y)return-1;var r=Tt.LEFT;return n[t].y<n[t+1].y&&(r=Tt.RIGHT),r},Ct.prototype.getEdge=function(){return this._orientedDe},Ct.prototype.checkForRightmostCoordinate=function(e){for(var t=e.getEdge().getCoordinates(),n=0;n<t.length-1;n++)(null===this._minCoord||t[n].x>this._minCoord.x)&&(this._minDe=e,this._minIndex=n,this._minCoord=t[n])},Ct.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode().getEdges();this._minDe=e.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ct.prototype.findEdge=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.isForward()&&this.checkForRightmostCoordinate(n)}te.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Tt.LEFT&&(this._orientedDe=this._minDe.getSym())},Ct.prototype.interfaces_=function(){return[]},Ct.prototype.getClass=function(){return Ct};var It=function(e){function t(n,r){e.call(this,t.msgWithCoord(n,r)),this.pt=r?new S(r):null,this.name="TopologyException"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(e,t){return t?e:e+" [ "+t+" ]"},t}(Q),At=function(){this.array_=[]};At.prototype.addLast=function(e){this.array_.push(e)},At.prototype.removeFirst=function(){return this.array_.shift()},At.prototype.isEmpty=function(){return 0===this.array_.length};var Mt=function(){this._finder=null,this._dirEdgeList=new Ee,this._nodes=new Ee,this._rightMostCoord=null,this._env=null,this._finder=new Ct};Mt.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();)e.next().setVisited(!1)},Mt.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Mt.prototype.computeNodeDepth=function(e){for(var t=null,n=e.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){t=r;break}}if(null===t)throw new It("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(var i=e.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Mt.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(Tt.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)},Mt.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Mt.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(Tt.RIGHT)>=1&&t.getDepth(Tt.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}},Mt.prototype.computeDepths=function(e){var t=new Ne,n=new At,r=e.getNode();for(n.addLast(r),t.add(r),e.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();t.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();t.contains(s)||(n.addLast(s),t.add(s))}}}},Mt.prototype.compareTo=function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},Mt.prototype.getEnvelope=function(){if(null===this._env){for(var e=new H,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)e.expandToInclude(n[r]);this._env=e}return this._env},Mt.prototype.addReachable=function(e){var t=new m;for(t.add(e);!t.empty();){var n=t.pop();this.add(n,t)}},Mt.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(Tt.LEFT,e.getDepth(Tt.RIGHT)),t.setDepth(Tt.RIGHT,e.getDepth(Tt.LEFT))},Mt.prototype.add=function(e,t){e.setVisited(!0),this._nodes.add(e);for(var n=e.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||t.push(i)}},Mt.prototype.getNodes=function(){return this._nodes},Mt.prototype.getDirectedEdges=function(){return this._dirEdgeList},Mt.prototype.interfaces_=function(){return[x]},Mt.prototype.getClass=function(){return Mt};var Lt=function e(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Tt.ON]=n}else if(arguments[0]instanceof e){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Tt.ON]=o,this.location[Tt.LEFT]=a,this.location[Tt.RIGHT]=s}};Lt.prototype.setAllLocations=function(e){for(var t=0;t<this.location.length;t++)this.location[t]=e},Lt.prototype.isNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==I.NONE)return!1;return!0},Lt.prototype.setAllLocationsIfNull=function(e){for(var t=0;t<this.location.length;t++)this.location[t]===I.NONE&&(this.location[t]=e)},Lt.prototype.isLine=function(){return 1===this.location.length},Lt.prototype.merge=function(e){if(e.location.length>this.location.length){var t=new Array(3).fill(null);t[Tt.ON]=this.location[Tt.ON],t[Tt.LEFT]=I.NONE,t[Tt.RIGHT]=I.NONE,this.location=t}for(var n=0;n<this.location.length;n++)this.location[n]===I.NONE&&n<e.location.length&&(this.location[n]=e.location[n])},Lt.prototype.getLocations=function(){return this.location},Lt.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[Tt.LEFT];this.location[Tt.LEFT]=this.location[Tt.RIGHT],this.location[Tt.RIGHT]=e},Lt.prototype.toString=function(){var e=new P;return this.location.length>1&&e.append(I.toLocationSymbol(this.location[Tt.LEFT])),e.append(I.toLocationSymbol(this.location[Tt.ON])),this.location.length>1&&e.append(I.toLocationSymbol(this.location[Tt.RIGHT])),e.toString()},Lt.prototype.setLocations=function(e,t,n){this.location[Tt.ON]=e,this.location[Tt.LEFT]=t,this.location[Tt.RIGHT]=n},Lt.prototype.get=function(e){return e<this.location.length?this.location[e]:I.NONE},Lt.prototype.isArea=function(){return this.location.length>1},Lt.prototype.isAnyNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===I.NONE)return!0;return!1},Lt.prototype.setLocation=function(){if(1===arguments.length){var e=arguments[0];this.setLocation(Tt.ON,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.location[t]=n}},Lt.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations(I.NONE)},Lt.prototype.isEqualOnSide=function(e,t){return this.location[t]===e.location[t]},Lt.prototype.allPositionsEqual=function(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0},Lt.prototype.interfaces_=function(){return[]},Lt.prototype.getClass=function(){return Lt};var Nt=function e(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Lt(t),this.elt[1]=new Lt(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new Lt(n.elt[0]),this.elt[1]=new Lt(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Lt(I.NONE),this.elt[1]=new Lt(I.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Lt(o,a,s),this.elt[1]=new Lt(o,a,s)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Lt(I.NONE,I.NONE,I.NONE),this.elt[1]=new Lt(I.NONE,I.NONE,I.NONE),this.elt[u].setLocations(l,c,h)}};Nt.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e},Nt.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)},Nt.prototype.isNull=function(e){return this.elt[e].isNull()},Nt.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}},Nt.prototype.isLine=function(e){return this.elt[e].isLine()},Nt.prototype.merge=function(e){for(var t=0;t<2;t++)null===this.elt[t]&&null!==e.elt[t]?this.elt[t]=new Lt(e.elt[t]):this.elt[t].merge(e.elt[t])},Nt.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Nt.prototype.getLocation=function(){if(1===arguments.length){var e=arguments[0];return this.elt[e].get(Tt.ON)}if(2===arguments.length){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}},Nt.prototype.toString=function(){var e=new P;return null!==this.elt[0]&&(e.append("A:"),e.append(this.elt[0].toString())),null!==this.elt[1]&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()},Nt.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var e=arguments[0];return this.elt[e].isArea()}},Nt.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()},Nt.prototype.setLocation=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(Tt.ON,t)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Nt.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)},Nt.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)},Nt.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new Lt(this.elt[e].location[0]))},Nt.prototype.interfaces_=function(){return[]},Nt.prototype.getClass=function(){return Nt},Nt.toLineLabel=function(e){for(var t=new Nt(I.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t};var Pt=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Ee,this._pts=new Ee,this._label=new Nt(I.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Ee,this._geometryFactory=null;var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()};Pt.prototype.computeRing=function(){if(null!==this._ring)return null;for(var e=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)e[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(e),this._isHole=se.isCCW(this._ring.getCoordinates())},Pt.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Pt.prototype.computePoints=function(e){this._startDe=e;var t=e,n=!0;do{if(null===t)throw new It("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new It("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var r=t.getLabel();te.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(t.getEdge(),t.isForward(),n),n=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)},Pt.prototype.getLinearRing=function(){return this._ring},Pt.prototype.getCoordinate=function(e){return this._pts.get(e)},Pt.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var e=this._startDe;do{var t=e.getNode().getEdges().getOutgoingDegree(this);t>this._maxNodeDegree&&(this._maxNodeDegree=t),e=this.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Pt.prototype.addPoints=function(e,t,n){var r=e.getCoordinates();if(t){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},Pt.prototype.isHole=function(){return this._isHole},Pt.prototype.setInResult=function(){var e=this._startDe;do{e.getEdge().setInResult(!0),e=e.getNext()}while(e!==this._startDe)},Pt.prototype.containsPoint=function(e){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(e))return!1;if(!se.isPointInRing(e,t.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(e))return!1;return!0},Pt.prototype.addHole=function(e){this._holes.add(e)},Pt.prototype.isShell=function(){return null===this._shell},Pt.prototype.getLabel=function(){return this._label},Pt.prototype.getEdges=function(){return this._edges},Pt.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Pt.prototype.getShell=function(){return this._shell},Pt.prototype.mergeLabel=function(){if(1===arguments.length){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(2===arguments.length){var t=arguments[1],n=arguments[0].getLocation(t,Tt.RIGHT);if(n===I.NONE)return null;if(this._label.getLocation(t)===I.NONE)return this._label.setLocation(t,n),null}},Pt.prototype.setShell=function(e){this._shell=e,null!==e&&e.addHole(this)},Pt.prototype.toPolygon=function(e){for(var t=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)t[n]=this._holes.get(n).getLinearRing();return e.createPolygon(this.getLinearRing(),t)},Pt.prototype.interfaces_=function(){return[]},Pt.prototype.getClass=function(){return Pt};var Ot=function(e){function t(){var t=arguments[0],n=arguments[1];e.call(this,t,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(e,t){e.setMinEdgeRing(t)},t.prototype.getNext=function(e){return e.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Pt),Rt=function(e){function t(){var t=arguments[0],n=arguments[1];e.call(this,t,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var e=new Ee,t=this._startDe;do{if(null===t.getMinEdgeRing()){var n=new Ot(t,this._geometryFactory);e.add(n)}t=t.getNext()}while(t!==this._startDe);return e},t.prototype.setEdgeRing=function(e,t){e.setEdgeRing(t)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var e=this._startDe;do{e.getNode().getEdges().linkMinimalDirectedEdges(this),e=e.getNext()}while(e!==this._startDe)},t.prototype.getNext=function(e){return e.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Pt),Dt=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this._label=e}};Dt.prototype.setVisited=function(e){this._isVisited=e},Dt.prototype.setInResult=function(e){this._isInResult=e},Dt.prototype.isCovered=function(){return this._isCovered},Dt.prototype.isCoveredSet=function(){return this._isCoveredSet},Dt.prototype.setLabel=function(e){this._label=e},Dt.prototype.getLabel=function(){return this._label},Dt.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0},Dt.prototype.updateIM=function(e){te.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)},Dt.prototype.isInResult=function(){return this._isInResult},Dt.prototype.isVisited=function(){return this._isVisited},Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt};var Ft=function(e){function t(){e.call(this),this._coord=null,this._edges=null;var t=arguments[0],n=arguments[1];this._coord=t,this._edges=n,this._label=new Nt(0,I.NONE)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();)if(e.next().getEdge().isInResult())return!0;return!1},t.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(e){e.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(e){},t.prototype.computeMergedLocation=function(e,t){var n=I.NONE;if(n=this._label.getLocation(t),!e.isNull(t)){var r=e.getLocation(t);n!==I.BOUNDARY&&(n=r)}return n},t.prototype.setLabel=function(){if(2!==arguments.length)return e.prototype.setLabel.apply(this,arguments);var t=arguments[0],n=arguments[1];null===this._label?this._label=new Nt(t,n):this._label.setLocation(t,n)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){if(arguments[0]instanceof t){var e=arguments[0];this.mergeLabel(e._label)}else if(arguments[0]instanceof Nt)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===I.NONE&&this._label.setLocation(r,i)}},t.prototype.add=function(e){this._edges.insert(e),e.setNode(this)},t.prototype.setLabelBoundary=function(e){if(null===this._label)return null;var t=I.NONE;null!==this._label&&(t=this._label.getLocation(e));var n=null;switch(t){case I.BOUNDARY:n=I.INTERIOR;break;case I.INTERIOR:default:n=I.BOUNDARY}this._label.setLocation(e,n)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Dt),zt=function(){this.nodeMap=new h,this.nodeFact=null;var e=arguments[0];this.nodeFact=e};zt.prototype.find=function(e){return this.nodeMap.get(e)},zt.prototype.addNode=function(){if(arguments[0]instanceof S){var e=arguments[0],t=this.nodeMap.get(e);return null===t&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}if(arguments[0]instanceof Ft){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},zt.prototype.print=function(e){for(var t=this.iterator();t.hasNext();)t.next().print(e)},zt.prototype.iterator=function(){return this.nodeMap.values().iterator()},zt.prototype.values=function(){return this.nodeMap.values()},zt.prototype.getBoundaryNodes=function(e){for(var t=new Ee,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(e)===I.BOUNDARY&&t.add(r)}return t},zt.prototype.add=function(e){var t=e.getCoordinate();this.addNode(t).add(e)},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt};var Bt=function(){},Ut={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Bt.prototype.interfaces_=function(){return[]},Bt.prototype.getClass=function(){return Bt},Bt.isNorthern=function(e){return e===Bt.NE||e===Bt.NW},Bt.isOpposite=function(e,t){return e!==t&&2===(e-t+4)%4},Bt.commonHalfPlane=function(e,t){if(e===t)return e;if(2===(e-t+4)%4)return-1;var n=e<t?e:t;return 0===n&&3===(e>t?e:t)?3:n},Bt.isInHalfPlane=function(e,t){return t===Bt.SE?e===Bt.SE||e===Bt.SW:e===t||e===t+1},Bt.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1];if(0===e&&0===t)throw new v("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?Bt.NE:Bt.SE:t>=0?Bt.NW:Bt.SW}if(arguments[0]instanceof S&&arguments[1]instanceof S){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new v("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Bt.NE:Bt.SE:r.y>=n.y?Bt.NW:Bt.SW}},Ut.NE.get=function(){return 0},Ut.NW.get=function(){return 1},Ut.SW.get=function(){return 2},Ut.SE.get=function(){return 3},Object.defineProperties(Bt,Ut);var Vt=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var e=arguments[0];this._edge=e}else if(3===arguments.length){var t=arguments[0],n=arguments[1],r=arguments[2];this._edge=t,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};Vt.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:se.computeOrientation(e._p0,e._p1,this._p1)},Vt.prototype.getDy=function(){return this._dy},Vt.prototype.getCoordinate=function(){return this._p0},Vt.prototype.setNode=function(e){this._node=e},Vt.prototype.print=function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);e.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)},Vt.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)},Vt.prototype.getDirectedCoordinate=function(){return this._p1},Vt.prototype.getDx=function(){return this._dx},Vt.prototype.getLabel=function(){return this._label},Vt.prototype.getEdge=function(){return this._edge},Vt.prototype.getQuadrant=function(){return this._quadrant},Vt.prototype.getNode=function(){return this._node},Vt.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf(".");return"  "+t.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label},Vt.prototype.computeLabel=function(e){},Vt.prototype.init=function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=Bt.quadrant(this._dx,this._dy),te.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Vt.prototype.interfaces_=function(){return[x]},Vt.prototype.getClass=function(){return Vt};var jt=function(e){function t(){var t=arguments[0],n=arguments[1];if(e.call(this,t),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var r=t.getNumPoints()-1;this.init(t.getCoordinate(r),t.getCoordinate(r-1))}this.computeDirectedLabel()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(e){return this._depth[e]},t.prototype.setVisited=function(e){this._isVisited=e},t.prototype.computeDirectedLabel=function(){this._label=new Nt(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(e,t){if(-999!==this._depth[e]&&this._depth[e]!==t)throw new It("assigned depths do not match",this.getCoordinate());this._depth[e]=t},t.prototype.isInteriorAreaEdge=function(){for(var e=!0,t=0;t<2;t++)this._label.isArea(t)&&this._label.getLocation(t,Tt.LEFT)===I.INTERIOR&&this._label.getLocation(t,Tt.RIGHT)===I.INTERIOR||(e=!1);return e},t.prototype.setNextMin=function(e){this._nextMin=e},t.prototype.print=function(t){e.prototype.print.call(this,t),t.print(" "+this._depth[Tt.LEFT]+"/"+this._depth[Tt.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},t.prototype.setMinEdgeRing=function(e){this._minEdgeRing=e},t.prototype.isLineEdge=function(){var e=this._label.isLine(0)||this._label.isLine(1),t=!this._label.isArea(0)||this._label.allPositionsEqual(0,I.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,I.EXTERIOR);return e&&t&&n},t.prototype.setEdgeRing=function(e){this._edgeRing=e},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e},t.prototype.setInResult=function(e){this._isInResult=e},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)},t.prototype.setSym=function(e){this._sym=e},t.prototype.setVisitedEdge=function(e){this.setVisited(e),this._sym.setVisited(e)},t.prototype.setEdgeDepths=function(e,t){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;e===Tt.LEFT&&(r=-1);var i=Tt.opposite(e),o=t+n*r;this.setDepth(e,t),this.setDepth(i,o)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(e){this._next=e},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(e,t){return e===I.EXTERIOR&&t===I.INTERIOR?1:e===I.INTERIOR&&t===I.EXTERIOR?-1:0},t}(Vt),qt=function(){};qt.prototype.createNode=function(e){return new Ft(e,null)},qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt};var Gt=function(){if(this._edges=new Ee,this._nodes=null,this._edgeEndList=new Ee,0===arguments.length)this._nodes=new zt(new qt);else if(1===arguments.length){var e=arguments[0];this._nodes=new zt(e)}};Gt.prototype.printEdges=function(e){e.println("Edges:");for(var t=0;t<this._edges.size();t++){e.println("edge "+t+":");var n=this._edges.get(t);n.print(e),n.eiList.print(e)}},Gt.prototype.find=function(e){return this._nodes.find(e)},Gt.prototype.addNode=function(){if(arguments[0]instanceof Ft){var e=arguments[0];return this._nodes.addNode(e)}if(arguments[0]instanceof S){var t=arguments[0];return this._nodes.addNode(t)}},Gt.prototype.getNodeIterator=function(){return this._nodes.iterator()},Gt.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()},Gt.prototype.debugPrintln=function(e){G.out.println(e)},Gt.prototype.isBoundaryNode=function(e,t){var n=this._nodes.find(t);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(e)===I.BOUNDARY},Gt.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkAllDirectedEdges()},Gt.prototype.matchInSameDirection=function(e,t,n,r){return!!e.equals(n)&&se.computeOrientation(e,t,r)===se.COLLINEAR&&Bt.quadrant(e,t)===Bt.quadrant(n,r)},Gt.prototype.getEdgeEnds=function(){return this._edgeEndList},Gt.prototype.debugPrint=function(e){G.out.print(e)},Gt.prototype.getEdgeIterator=function(){return this._edges.iterator()},Gt.prototype.findEdgeInSameDirection=function(e,t){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(e,t,i[0],i[1]))return r;if(this.matchInSameDirection(e,t,i[i.length-1],i[i.length-2]))return r}return null},Gt.prototype.insertEdge=function(e){this._edges.add(e)},Gt.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null},Gt.prototype.addEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this._edges.add(n);var r=new jt(n,!0),i=new jt(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Gt.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)},Gt.prototype.getNodes=function(){return this._nodes.values()},Gt.prototype.findEdge=function(e,t){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(e.equals(i[0])&&t.equals(i[1]))return r}return null},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt},Gt.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()};var $t=function(){this._geometryFactory=null,this._shellList=new Ee;var e=arguments[0];this._geometryFactory=e};$t.prototype.sortShellsAndHoles=function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):t.add(i)}},$t.prototype.computePolygons=function(e){for(var t=new Ee,n=e.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);t.add(r)}return t},$t.prototype.placeFreeHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,e);if(null===i)throw new It("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},$t.prototype.buildMinimalEdgeRings=function(e,t,n){for(var r=new Ee,i=e.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),t.add(s)):n.addAll(a)}else r.add(o)}return r},$t.prototype.containsPoint=function(e){for(var t=this._shellList.iterator();t.hasNext();)if(t.next().containsPoint(e))return!0;return!1},$t.prototype.buildMaximalEdgeRings=function(e){for(var t=new Ee,n=e.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Rt(r,this._geometryFactory);t.add(i),i.setInResult()}}return t},$t.prototype.placePolygonHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}},$t.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},$t.prototype.findEdgeRingContaining=function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=t.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&se.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=u)}return o},$t.prototype.findShell=function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,t++)}return te.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n},$t.prototype.add=function(){if(1===arguments.length){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(2===arguments.length){var t=arguments[0],n=arguments[1];Gt.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(t),i=new Ee,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t};var Ht=function(){};Ht.prototype.getBounds=function(){},Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht};var Xt=function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t};Xt.prototype.getItem=function(){return this._item},Xt.prototype.getBounds=function(){return this._bounds},Xt.prototype.interfaces_=function(){return[Ht,t]},Xt.prototype.getClass=function(){return Xt};var Wt=function(){this._size=null,this._items=null,this._size=0,this._items=new Ee,this._items.add(null)};Wt.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e},Wt.prototype.size=function(){return this._size},Wt.prototype.reorder=function(e){for(var t=null,n=this._items.get(e);2*e<=this._size&&((t=2*e)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(n)<0);e=t)this._items.set(e,this._items.get(t));this._items.set(e,n)},Wt.prototype.clear=function(){this._size=0,this._items.clear()},Wt.prototype.isEmpty=function(){return 0===this._size},Wt.prototype.add=function(e){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,e)},Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt};var Yt=function(){};Yt.prototype.visitItem=function(e){},Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt};var Zt=function(){};Zt.prototype.insert=function(e,t){},Zt.prototype.remove=function(e,t){},Zt.prototype.query=function(){},Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var Jt=function(){if(this._childBoundables=new Ee,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this._level=e}},Kt={serialVersionUID:{configurable:!0}};Jt.prototype.getLevel=function(){return this._level},Jt.prototype.size=function(){return this._childBoundables.size()},Jt.prototype.getChildBoundables=function(){return this._childBoundables},Jt.prototype.addChildBoundable=function(e){te.isTrue(null===this._bounds),this._childBoundables.add(e)},Jt.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Jt.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Jt.prototype.interfaces_=function(){return[Ht,t]},Jt.prototype.getClass=function(){return Jt},Kt.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Jt,Kt);var Qt=function(){};Qt.reverseOrder=function(){return{compare:function(e,t){return t.compareTo(e)}}},Qt.min=function(e){return Qt.sort(e),e.get(0)},Qt.sort=function(e,t){var n=e.toArray();t?Fe.sort(n,t):Fe.sort(n);for(var r=e.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Qt.singletonList=function(e){var t=new Ee;return t.add(e),t};var en=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()};en.prototype.expandToQueue=function(e,t){var n=en.isComposite(this._boundable1),r=en.isComposite(this._boundable2);if(n&&r)return en.area(this._boundable1)>en.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,t),null):(this.expand(this._boundable2,this._boundable1,e,t),null);if(n)return this.expand(this._boundable1,this._boundable2,e,t),null;if(r)return this.expand(this._boundable2,this._boundable1,e,t),null;throw new v("neither boundable is composite")},en.prototype.isLeaves=function(){return!(en.isComposite(this._boundable1)||en.isComposite(this._boundable2))},en.prototype.compareTo=function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0},en.prototype.expand=function(e,t,n,r){for(var i=e.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new en(o,t,this._itemDistance);a.getDistance()<r&&n.add(a)}},en.prototype.getBoundable=function(e){return 0===e?this._boundable1:this._boundable2},en.prototype.getDistance=function(){return this._distance},en.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},en.prototype.interfaces_=function(){return[x]},en.prototype.getClass=function(){return en},en.area=function(e){return e.getBounds().getArea()},en.isComposite=function(e){return e instanceof Jt};var tn=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new Ee,this._nodeCapacity=null,0===arguments.length){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(1===arguments.length){var n=arguments[0];te.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};tn.prototype.getNodeCapacity=function(){return this._nodeCapacity},tn.prototype.lastNode=function(e){return e.get(e.size()-1)},tn.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=0,t=arguments[0].getChildBoundables().iterator();t.hasNext();){var n=t.next();n instanceof Jt?e+=this.size(n):n instanceof Xt&&(e+=1)}return e}},tn.prototype.removeItem=function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Xt&&i.getItem()===t&&(n=i)}return null!==n&&(e.getChildBoundables().remove(n),!0)},tn.prototype.itemsTree=function(){if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new Ee:e}if(1===arguments.length){for(var t=arguments[0],n=new Ee,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Jt){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Xt?n.add(i.getItem()):te.shouldNeverReachHere()}return n.size()<=0?null:n}},tn.prototype.insert=function(e,t){te.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Xt(e,t))},tn.prototype.boundablesAtLevel=function(){if(1===arguments.length){var e=arguments[0],t=new Ee;return this.boundablesAtLevel(e,this._root,t),t}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(te.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Jt?this.boundablesAtLevel(n,a,i):(te.isTrue(a instanceof Xt),-1===n&&i.add(a))}return null}},tn.prototype.query=function(){if(1===arguments.length){var e=arguments[0];this.build();var t=new Ee;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,t),t}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(M(arguments[2],Yt)&&arguments[0]instanceof Object&&arguments[1]instanceof Jt)for(var i=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var u=a.get(s);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof Jt?this.query(i,u,o):u instanceof Xt?o.visitItem(u.getItem()):te.shouldNeverReachHere())}else if(M(arguments[2],we)&&arguments[0]instanceof Object&&arguments[1]instanceof Jt)for(var l=arguments[0],c=arguments[2],h=arguments[1].getChildBoundables(),f=0;f<h.size();f++){var p=h.get(f);this.getIntersectsOp().intersects(p.getBounds(),l)&&(p instanceof Jt?this.query(l,p,c):p instanceof Xt?c.add(p.getItem()):te.shouldNeverReachHere())}},tn.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},tn.prototype.getRoot=function(){return this.build(),this._root},tn.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,t)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Jt&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},tn.prototype.createHigherLevels=function(e,t){te.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,t+1)},tn.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=0,t=arguments[0].getChildBoundables().iterator();t.hasNext();){var n=t.next();if(n instanceof Jt){var r=this.depth(n);r>e&&(e=r)}}return e+1}},tn.prototype.createParentBoundables=function(e,t){te.isTrue(!e.isEmpty());var n=new Ee;n.add(this.createNode(t));var r=new Ee(e);Qt.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(t)),this.lastNode(n).addChildBoundable(o)}return n},tn.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},tn.prototype.interfaces_=function(){return[t]},tn.prototype.getClass=function(){return tn},tn.compareDoubles=function(e,t){return e>t?1:e<t?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(tn,nn);var rn=function(){},on=function(){};on.prototype.distance=function(e,t){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var an=function(e){function n(t){t=t||n.DEFAULT_NODE_CAPACITY,e.call(this,t)}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(e,t){te.isTrue(e.length>0);for(var n=new Ee,r=0;r<e.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(e[r],t));return n},n.prototype.createNode=function(e){return new sn(e)},n.prototype.size=function(){return 0===arguments.length?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return e.prototype.insert.apply(this,arguments);var t=arguments[0],n=arguments[1];if(t.isNull())return null;e.prototype.insert.call(this,t,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(e,t){for(var n=Math.trunc(Math.ceil(e.size()/t)),r=new Array(t).fill(null),i=e.iterator(),o=0;o<t;o++){r[o]=new Ee;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},n.prototype.query=function(){if(1===arguments.length){var t=arguments[0];return e.prototype.query.call(this,t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];e.prototype.query.call(this,n,r)}else if(3===arguments.length)if(M(arguments[2],Yt)&&arguments[0]instanceof Object&&arguments[1]instanceof Jt){var i=arguments[0],o=arguments[1],a=arguments[2];e.prototype.query.call(this,i,o,a)}else if(M(arguments[2],we)&&arguments[0]instanceof Object&&arguments[1]instanceof Jt){var s=arguments[0],u=arguments[1],l=arguments[2];e.prototype.query.call(this,s,u,l)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(t,n){return e.prototype.createParentBoundables.call(this,t,n)},n.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return e.prototype.remove.call(this,t,n)}return e.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(e,t){te.isTrue(!e.isEmpty());var r=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),i=new Ee(e);Qt.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,t)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(M(arguments[0],on)){var e=arguments[0],t=new en(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(t)}if(arguments[0]instanceof en){var r=arguments[0];return this.nearestNeighbour(r,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&M(arguments[1],on)){var i=arguments[0],o=arguments[1],a=new en(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof en&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],l=null,c=new Wt;for(c.add(s);!c.isEmpty()&&u>0;){var h=c.poll(),f=h.getDistance();if(f>=u)break;h.isLeaves()?(u=f,l=h):h.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],d=new Xt(arguments[0],arguments[1]),g=new en(this.getRoot(),d,p);return this.nearestNeighbour(g)[0]}},n.prototype.interfaces_=function(){return[Zt,t]},n.prototype.getClass=function(){return n},n.centreX=function(e){return n.avg(e.getMinX(),e.getMaxX())},n.avg=function(e,t){return(e+t)/2},n.centreY=function(e){return n.avg(e.getMinY(),e.getMaxY())},r.STRtreeNode.get=function(){return sn},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(t,r){return e.compareDoubles(n.centreX(t.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(t,r){return e.compareDoubles(n.centreY(t.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(e,t){return e.intersects(t)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(tn),sn=function(e){function t(){var t=arguments[0];e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var e=null,t=this.getChildBoundables().iterator();t.hasNext();){var n=t.next();null===e?e=new H(n.getBounds()):e.expandToInclude(n.getBounds())}return e},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Jt),un=function(){};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.relativeSign=function(e,t){return e<t?-1:e>t?1:0},un.compare=function(e,t,n){if(t.equals2D(n))return 0;var r=un.relativeSign(t.x,n.x),i=un.relativeSign(t.y,n.y);switch(e){case 0:return un.compareValue(r,i);case 1:return un.compareValue(i,r);case 2:return un.compareValue(i,-r);case 3:return un.compareValue(-r,i);case 4:return un.compareValue(-r,-i);case 5:return un.compareValue(-i,-r);case 6:return un.compareValue(-i,r);case 7:return un.compareValue(r,-i)}return te.shouldNeverReachHere("invalid octant value"),0},un.compareValue=function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0};var ln=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._segString=e,this.coord=new S(t),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!t.equals2D(e.getCoordinate(n))};ln.prototype.getCoordinate=function(){return this.coord},ln.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)},ln.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:un.compare(this._segmentOctant,this.coord,t.coord)},ln.prototype.isEndPoint=function(e){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===e},ln.prototype.isInterior=function(){return this._isInterior},ln.prototype.interfaces_=function(){return[x]},ln.prototype.getClass=function(){return ln};var cn=function(){this._nodeMap=new h,this._edge=null;var e=arguments[0];this._edge=e};cn.prototype.getSplitCoordinates=function(){var e=new Te;this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next();this.addEdgeCoordinates(n,r,e),n=r}return e.toCoordinateArray()},cn.prototype.addCollapsedNodes=function(){var e=new Ee;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var t=e.iterator();t.hasNext();){var n=t.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cn.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(e)},cn.prototype.findCollapsesFromExistingVertices=function(e){for(var t=0;t<this._edge.size()-2;t++){var n=this._edge.getCoordinate(t),r=this._edge.getCoordinate(t+2);n.equals2D(r)&&e.add(new O(t+1))}},cn.prototype.addEdgeCoordinates=function(e,t,n){var r=this._edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(r);n.add(new S(e.coord),!1);for(var o=e.segmentIndex+1;o<=t.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new S(t.coord))},cn.prototype.iterator=function(){return this._nodeMap.values().iterator()},cn.prototype.addSplitEdges=function(e){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}},cn.prototype.findCollapseIndex=function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,1===r&&(n[0]=e.segmentIndex+1,!0)},cn.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,t)&&e.add(new O(t[0])),r=i}},cn.prototype.getEdge=function(){return this._edge},cn.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)},cn.prototype.createSplitEdge=function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this._edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new S(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new S(t.coord)),new dn(o,this._edge.getData())},cn.prototype.add=function(e,t){var n=new ln(this._edge,e,t,this._edge.getSegmentOctant(t)),r=this._nodeMap.get(n);return null!==r?(te.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},cn.prototype.checkSplitEdgesCorrectness=function(e){var t=this._edge.getCoordinates(),n=e.get(0).getCoordinate(0);if(!n.equals2D(t[0]))throw new Q("bad split edge start point at "+n);var r=e.get(e.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(t[t.length-1]))throw new Q("bad split edge end point at "+i)},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1];if(0===e&&0===t)throw new v("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),r=Math.abs(t);return e>=0?t>=0?n>=r?0:1:n>=r?7:6:t>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof S&&arguments[1]instanceof S){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new v("Cannot compute the octant for two identical points "+i);return hn.octant(a,s)}};var fn=function(){};fn.prototype.getCoordinates=function(){},fn.prototype.size=function(){},fn.prototype.getCoordinate=function(e){},fn.prototype.isClosed=function(){},fn.prototype.setData=function(e){},fn.prototype.getData=function(){},fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn};var pn=function(){};pn.prototype.addIntersection=function(e,t){},pn.prototype.interfaces_=function(){return[fn]},pn.prototype.getClass=function(){return pn};var dn=function(){this._nodeList=new cn(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(e){return this._pts[e]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))},dn.prototype.setData=function(e){this._data=e},dn.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:hn.octant(e,t)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new S(arguments[0].getIntersection(r));this.addIntersection(i,n)}},dn.prototype.toString=function(){return K.toLineString(new ut(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(e,t){var n=t,r=n+1;if(r<this._pts.length){var i=this._pts[r];e.equals2D(i)&&(n=r)}return this._nodeList.add(e,n)},dn.prototype.addIntersections=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)},dn.prototype.interfaces_=function(){return[pn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var e=arguments[0],t=new Ee;return dn.getNodedSubstrings(e,t),t}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new S,this.p1=new S;else if(1===arguments.length){var e=arguments[0];this.p0=new S(e.p0),this.p1=new S(e.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new S(t,n),this.p1=new S(r,i)}},mn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var e=arguments[0],t=se.orientationIndex(this.p0,this.p1,e.p0),n=se.orientationIndex(this.p0,this.p1,e.p1);return t>=0&&n>=0||t<=0&&n<=0?Math.max(t,n):0}if(arguments[0]instanceof S){var r=arguments[0];return se.orientationIndex(this.p0,this.p1,r)}},gn.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(e){if(!(e instanceof gn))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)},gn.prototype.intersection=function(e){var t=new ie;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof S){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new S(e);var t=this.projectionFactor(e),n=new S;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new gn(a,s)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(e){return 0===e?this.p0:this.p1},gn.prototype.distancePerpendicular=function(e){return se.distancePointLinePerpendicular(e,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;return r<=0?_.NaN:((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r},gn.prototype.closestPoints=function(e){var t=this.intersection(e);if(null!==t)return[t,t];var n=new Array(2).fill(null),r=_.MAX_VALUE,i=null,o=this.closestPoint(e.p0);r=o.distance(e.p0),n[0]=o,n[1]=e.p0;var a=this.closestPoint(e.p1);(i=a.distance(e.p1))<r&&(r=i,n[0]=a,n[1]=e.p1);var s=e.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=e.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},gn.prototype.closestPoint=function(e){var t=this.projectionFactor(e);return t>0&&t<1?this.project(e):this.p0.distance(e)<this.p1.distance(e)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(e){var t=e,n=this.p0.compareTo(t.p0);return 0!==n?n:this.p1.compareTo(t.p1)},gn.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e},gn.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)},gn.prototype.lineIntersection=function(e){try{return $.intersection(this.p0,this.p1,e.p0,e.p1)}catch(e){if(!(e instanceof q))throw e}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==t){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=t*i/a,u=t*o/a}return new S(n-u,r+s)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||_.isNaN(t))&&(t=1),t},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var e=arguments[0];return se.distanceLineLine(this.p0,this.p1,e.p0,e.p1)}if(arguments[0]instanceof S){var t=arguments[0];return se.distancePointLine(t,this.p0,this.p1)}},gn.prototype.pointAlong=function(e){var t=new S;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t},gn.prototype.hashCode=function(){var e=_.doubleToLongBits(this.p0.x);e^=31*_.doubleToLongBits(this.p0.y);var t=Math.trunc(e)^Math.trunc(e>>32),n=_.doubleToLongBits(this.p1.x);return n^=31*_.doubleToLongBits(this.p1.y),t^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[x,t]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(e,t){return new S((e.x+t.x)/2,(e.y+t.y)/2)},mn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,mn);var yn=function(){this.tempEnv1=new H,this.tempEnv2=new H,this._overlapSeg1=new gn,this._overlapSeg2=new gn};yn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var e=arguments[1],t=arguments[2],n=arguments[3];arguments[0].getLineSegment(e,this._overlapSeg1),t.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn};var vn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=r};vn.prototype.getLineSegment=function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]},vn.prototype.computeSelect=function(e,t,n,r){var i=this._pts[t],o=this._pts[n];if(r.tempEnv1.init(i,o),n-t==1)return r.select(this,t),null;if(!e.intersects(r.tempEnv1))return null;var a=Math.trunc((t+n)/2);t<a&&this.computeSelect(e,t,a,r),a<n&&this.computeSelect(e,a,n,r)},vn.prototype.getCoordinates=function(){for(var e=new Array(this._end-this._start+1).fill(null),t=0,n=this._start;n<=this._end;n++)e[t++]=this._pts[n];return e},vn.prototype.computeOverlaps=function(e,t){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,t)},vn.prototype.setId=function(e){this._id=e},vn.prototype.select=function(e,t){this.computeSelect(e,this._start,this._end,t)},vn.prototype.getEnvelope=function(){if(null===this._env){var e=this._pts[this._start],t=this._pts[this._end];this._env=new H(e,t)}return this._env},vn.prototype.getEndIndex=function(){return this._end},vn.prototype.getStartIndex=function(){return this._start},vn.prototype.getContext=function(){return this._context},vn.prototype.getId=function(){return this._id},vn.prototype.computeOverlapsInternal=function(e,t,n,r,i,o){var a=this._pts[e],s=this._pts[t],u=n._pts[r],l=n._pts[i];if(t-e==1&&i-r==1)return o.overlap(this,e,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((e+t)/2),h=Math.trunc((r+i)/2);e<c&&(r<h&&this.computeOverlapsInternal(e,c,n,r,h,o),h<i&&this.computeOverlapsInternal(e,c,n,h,i,o)),c<t&&(r<h&&this.computeOverlapsInternal(c,t,n,r,h,o),h<i&&this.computeOverlapsInternal(c,t,n,h,i,o))},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var _n=function(){};_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n.getChainStartIndices=function(e){var t=0,n=new Ee;n.add(new O(t));do{var r=_n.findChainEnd(e,t);n.add(new O(r)),t=r}while(t<e.length-1);return _n.toIntArray(n)},_n.findChainEnd=function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=Bt.quadrant(e[n],e[n+1]),i=t+1;i<e.length&&(e[i-1].equals2D(e[i])||Bt.quadrant(e[i-1],e[i])===r);)i++;return i-1},_n.getChains=function(){if(1===arguments.length){var e=arguments[0];return _n.getChains(e,null)}if(2===arguments.length){for(var t=arguments[0],n=arguments[1],r=new Ee,i=_n.getChainStartIndices(t),o=0;o<i.length-1;o++){var a=new vn(t,i[o],i[o+1],n);r.add(a)}return r}},_n.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var bn=function(){};bn.prototype.computeNodes=function(e){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var xn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setSegmentIntersector(e)}};xn.prototype.setSegmentIntersector=function(e){this._segInt=e},xn.prototype.interfaces_=function(){return[bn]},xn.prototype.getClass=function(){return xn};var wn=function(e){function t(t){t?e.call(this,t):e.call(this),this._monoChains=new Ee,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(e){for(var t=_n.getChains(e.getCoordinates(),e).iterator();t.hasNext();){var n=t.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},t.prototype.computeNodes=function(e){this._nodedSegStrings=e;for(var t=e.iterator();t.hasNext();)this.add(t.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var e=new En(this._segInt),t=this._monoChains.iterator();t.hasNext();)for(var n=t.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,e),this._nOverlaps++),this._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return En},Object.defineProperties(t,n),t}(xn),En=function(e){function t(){e.call(this),this._si=null;var t=arguments[0];this._si=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(4!==arguments.length)return e.prototype.overlap.apply(this,arguments);var t=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,t,o,r)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(yn),Sn=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Tn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Sn.prototype.getEndCapStyle=function(){return this._endCapStyle},Sn.prototype.isSingleSided=function(){return this._isSingleSided},Sn.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,0===this._quadrantSegments&&(this._joinStyle=Sn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Sn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==Sn.JOIN_ROUND&&(this._quadrantSegments=Sn.DEFAULT_QUADRANT_SEGMENTS)},Sn.prototype.getJoinStyle=function(){return this._joinStyle},Sn.prototype.setJoinStyle=function(e){this._joinStyle=e},Sn.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e},Sn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Sn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Sn.prototype.setEndCapStyle=function(e){this._endCapStyle=e},Sn.prototype.getMitreLimit=function(){return this._mitreLimit},Sn.prototype.setMitreLimit=function(e){this._mitreLimit=e},Sn.prototype.setSingleSided=function(e){this._isSingleSided=e},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},Sn.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)},Tn.CAP_ROUND.get=function(){return 1},Tn.CAP_FLAT.get=function(){return 2},Tn.CAP_SQUARE.get=function(){return 3},Tn.JOIN_ROUND.get=function(){return 1},Tn.JOIN_MITRE.get=function(){return 2},Tn.JOIN_BEVEL.get=function(){return 3},Tn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Tn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Tn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Sn,Tn);var kn=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=se.COUNTERCLOCKWISE,this._inputLine=e||null},Cn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};kn.prototype.isDeletable=function(e,t,n,r){var i=this._inputLine[e],o=this._inputLine[t],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,e,n,r)},kn.prototype.deleteShallowConcavities=function(){for(var e=1,t=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(t),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(e,t,n,this._distanceTol)&&(this._isDeleted[t]=kn.DELETE,i=!0,r=!0),e=i?n:t,t=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(t)}return r},kn.prototype.isShallowConcavity=function(e,t,n,r){return se.computeOrientation(e,t,n)===this._angleOrientation&&se.distancePointLine(t,e,n)<r},kn.prototype.isShallowSampled=function(e,t,n,r,i){var o=Math.trunc((r-n)/kn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(e,t,this._inputLine[a],i))return!1;return!0},kn.prototype.isConcave=function(e,t,n){return se.computeOrientation(e,t,n)===this._angleOrientation},kn.prototype.simplify=function(e){this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=se.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var t=!1;do{t=this.deleteShallowConcavities()}while(t);return this.collapseLine()},kn.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===kn.DELETE;)t++;return t},kn.prototype.isShallow=function(e,t,n,r){return se.distancePointLine(t,e,n)<r},kn.prototype.collapseLine=function(){for(var e=new Te,t=0;t<this._inputLine.length;t++)this._isDeleted[t]!==kn.DELETE&&e.add(this._inputLine[t]);return e.toCoordinateArray()},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},kn.simplify=function(e,t){return new kn(e).simplify(t)},Cn.INIT.get=function(){return 0},Cn.DELETE.get=function(){return 1},Cn.KEEP.get=function(){return 1},Cn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(kn,Cn);var In=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Ee},An={COORDINATE_ARRAY_TYPE:{configurable:!0}};In.prototype.getCoordinates=function(){return this._ptList.toArray(In.COORDINATE_ARRAY_TYPE)},In.prototype.setPrecisionModel=function(e){this._precisionModel=e},In.prototype.addPt=function(e){var t=new S(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)},In.prototype.revere=function(){},In.prototype.addPts=function(e,t){if(t)for(var n=0;n<e.length;n++)this.addPt(e[n]);else for(var r=e.length-1;r>=0;r--)this.addPt(e[r])},In.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1);return e.distance(t)<this._minimimVertexDistance},In.prototype.toString=function(){return(new yt).createLineString(this.getCoordinates()).toString()},In.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new S(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)},In.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In},An.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(In,An);var Mn=function(){},Ln={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},Mn.toDegrees=function(e){return 180*e/Math.PI},Mn.normalize=function(e){for(;e>Math.PI;)e-=Mn.PI_TIMES_2;for(;e<=-Math.PI;)e+=Mn.PI_TIMES_2;return e},Mn.angle=function(){if(1===arguments.length){var e=arguments[0];return Math.atan2(e.y,e.x)}if(2===arguments.length){var t=arguments[0],n=arguments[1],r=n.x-t.x,i=n.y-t.y;return Math.atan2(i,r)}},Mn.isAcute=function(e,t,n){var r=e.x-t.x,i=e.y-t.y;return r*(n.x-t.x)+i*(n.y-t.y)>0},Mn.isObtuse=function(e,t,n){var r=e.x-t.x,i=e.y-t.y;return r*(n.x-t.x)+i*(n.y-t.y)<0},Mn.interiorAngle=function(e,t,n){var r=Mn.angle(t,e),i=Mn.angle(t,n);return Math.abs(i-r)},Mn.normalizePositive=function(e){if(e<0){for(;e<0;)e+=Mn.PI_TIMES_2;e>=Mn.PI_TIMES_2&&(e=0)}else{for(;e>=Mn.PI_TIMES_2;)e-=Mn.PI_TIMES_2;e<0&&(e=0)}return e},Mn.angleBetween=function(e,t,n){var r=Mn.angle(t,e),i=Mn.angle(t,n);return Mn.diff(r,i)},Mn.diff=function(e,t){var n=null;return(n=e<t?t-e:e-t)>Math.PI&&(n=2*Math.PI-n),n},Mn.toRadians=function(e){return e*Math.PI/180},Mn.getTurn=function(e,t){var n=Math.sin(t-e);return n>0?Mn.COUNTERCLOCKWISE:n<0?Mn.CLOCKWISE:Mn.NONE},Mn.angleBetweenOriented=function(e,t,n){var r=Mn.angle(t,e),i=Mn.angle(t,n)-r;return i<=-Math.PI?i+Mn.PI_TIMES_2:i>Math.PI?i-Mn.PI_TIMES_2:i},Ln.PI_TIMES_2.get=function(){return 2*Math.PI},Ln.PI_OVER_2.get=function(){return Math.PI/2},Ln.PI_OVER_4.get=function(){return Math.PI/4},Ln.COUNTERCLOCKWISE.get=function(){return se.COUNTERCLOCKWISE},Ln.CLOCKWISE.get=function(){return se.CLOCKWISE},Ln.NONE.get=function(){return se.COLLINEAR},Object.defineProperties(Mn,Ln);var Nn=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new ie,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Sn.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Pn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Nn.prototype.addNextSegment=function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=se.computeOrientation(this._s0,this._s1,this._s2),r=n===se.CLOCKWISE&&this._side===Tt.LEFT||n===se.COUNTERCLOCKWISE&&this._side===Tt.RIGHT;0===n?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)},Nn.prototype.addLineEndCap=function(e,t){var n=new gn(e,t),r=new gn;this.computeOffsetSegment(n,Tt.LEFT,this._distance,r);var i=new gn;this.computeOffsetSegment(n,Tt.RIGHT,this._distance,i);var o=t.x-e.x,a=t.y-e.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(t,s+Math.PI/2,s-Math.PI/2,se.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Sn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Sn.CAP_SQUARE:var u=new S;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var l=new S(r.p1.x+u.x,r.p1.y+u.y),c=new S(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Nn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Nn.prototype.addMitreJoin=function(e,t,n,r){var i=!0,o=null;try{o=$.intersection(t.p0,t.p1,n.p0,n.p1),(r<=0?1:o.distance(e)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(e){if(!(e instanceof q))throw e;o=new S(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(t,n,r,this._bufParams.getMitreLimit())},Nn.prototype.addFilletCorner=function(e,t,n,r,i){var o=t.x-e.x,a=t.y-e.y,s=Math.atan2(a,o),u=n.x-e.x,l=n.y-e.y,c=Math.atan2(l,u);r===se.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(t),this.addFilletArc(e,s,c,r,i),this._segList.addPt(n)},Nn.prototype.addOutsideTurn=function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Nn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))},Nn.prototype.createSquare=function(e){this._segList.addPt(new S(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new S(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new S(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new S(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()},Nn.prototype.addSegments=function(e,t){this._segList.addPts(e,t)},Nn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Nn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Nn.prototype.initSideSegments=function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Nn.prototype.addLimitedMitreJoin=function(e,t,n,r){var i=this._seg0.p1,o=Mn.angle(i,this._seg0.p0),a=Mn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Mn.normalize(o+a),u=Mn.normalize(s+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(a)),h=i.x+l*Math.cos(u),f=i.y+l*Math.sin(u),p=new S(h,f),d=new gn(i,p),g=d.pointAlongOffset(1,c),m=d.pointAlongOffset(1,-c);this._side===Tt.LEFT?(this._segList.addPt(g),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(g))},Nn.prototype.computeOffsetSegment=function(e,t,n,r){var i=t===Tt.LEFT?1:-1,o=e.p1.x-e.p0.x,a=e.p1.y-e.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,l=i*n*a/s;r.p0.x=e.p0.x-l,r.p0.y=e.p0.y+u,r.p1.x=e.p1.x-l,r.p1.y=e.p1.y+u},Nn.prototype.addFilletArc=function(e,t,n,r,i){var o=r===se.CLOCKWISE?-1:1,a=Math.abs(t-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,l=0,c=new S;l<a;){var h=t+o*l;c.x=e.x+i*Math.cos(h),c.y=e.y+i*Math.sin(h),this._segList.addPt(c),l+=u}},Nn.prototype.addInsideTurn=function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Nn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new S((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new S((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Nn.prototype.createCircle=function(e){var t=new S(e.x+this._distance,e.y);this._segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Nn.prototype.addBevelJoin=function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)},Nn.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new In,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*Nn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Nn.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,se.CLOCKWISE,this._distance))},Nn.prototype.closeRing=function(){this._segList.closeRing()},Nn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Pn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Pn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Pn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Pn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Nn,Pn);var On=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t};On.prototype.getOffsetCurve=function(e,t){if(this._distance=t,0===t)return null;var n=t<0,r=Math.abs(t),i=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var o=i.getCoordinates();return n&&ke.reverse(o),o},On.prototype.computeSingleSidedBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var i=kn.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Tt.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(e,!1);var s=kn.simplify(e,r),u=s.length-1;n.initSideSegments(s[0],s[1],Tt.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment(),n.closeRing()},On.prototype.computeRingBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);t===Tt.RIGHT&&(r=-r);var i=kn.simplify(e,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],t);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},On.prototype.computeLineBufferCurve=function(e,t){var n=this.simplifyTolerance(this._distance),r=kn.simplify(e,n),i=r.length-1;t.initSideSegments(r[0],r[1],Tt.LEFT);for(var o=2;o<=i;o++)t.addNextSegment(r[o],!0);t.addLastSegment(),t.addLineEndCap(r[i-1],r[i]);var a=kn.simplify(e,-n),s=a.length-1;t.initSideSegments(a[s],a[s-1],Tt.LEFT);for(var u=s-2;u>=0;u--)t.addNextSegment(a[u],!0);t.addLastSegment(),t.addLineEndCap(a[1],a[0]),t.closeRing()},On.prototype.computePointCurve=function(e,t){switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:t.createCircle(e);break;case Sn.CAP_SQUARE:t.createSquare(e)}},On.prototype.getLineCurve=function(e,t){if(this._distance=t,t<0&&!this._bufParams.isSingleSided())return null;if(0===t)return null;var n=Math.abs(t),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this._bufParams.isSingleSided()){var i=t<0;this.computeSingleSidedBufferCurve(e,i,r)}else this.computeLineBufferCurve(e,r);return r.getCoordinates()},On.prototype.getBufferParameters=function(){return this._bufParams},On.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()},On.prototype.getRingCurve=function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(0===n)return On.copyCoordinates(e);var r=this.getSegGen(n);return this.computeRingBufferCurve(e,t,r),r.getCoordinates()},On.prototype.computeOffsetCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){var i=kn.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Tt.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=kn.simplify(e,r),u=s.length-1;n.initSideSegments(s[0],s[1],Tt.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment()},On.prototype.getSegGen=function(e){return new Nn(this._precisionModel,this._bufParams,e)},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},On.copyCoordinates=function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new S(e[n]);return t};var Rn=function(){this._subgraphs=null,this._seg=new gn,this._cga=new se;var e=arguments[0];this._subgraphs=e},Dn={DepthSegment:{configurable:!0}};Rn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var e=arguments[0],t=new Ee,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();e.y<i.getMinY()||e.y>i.getMaxY()||this.findStabbedSegments(e,r.getDirectedEdges(),t)}return t}if(3===arguments.length)if(M(arguments[2],we)&&arguments[0]instanceof S&&arguments[1]instanceof jt){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||se.computeOrientation(this._seg.p0,this._seg.p1,o)===se.RIGHT)){var c=a.getDepth(Tt.LEFT);this._seg.p0.equals(u[l])||(c=a.getDepth(Tt.RIGHT));var h=new Fn(this._seg,c);s.add(h)}}else if(M(arguments[2],we)&&arguments[0]instanceof S&&M(arguments[1],we))for(var f=arguments[0],p=arguments[2],d=arguments[1].iterator();d.hasNext();){var g=d.next();g.isForward()&&this.findStabbedSegments(f,g,p)}},Rn.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);return 0===t.size()?0:Qt.min(t)._leftDepth},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Dn.DepthSegment.get=function(){return Fn},Object.defineProperties(Rn,Dn);var Fn=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new gn(e),this._leftDepth=t};Fn.prototype.compareTo=function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return 0!==n||0!=(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(t._upwardSeg)},Fn.prototype.compareX=function(e,t){var n=e.p0.compareTo(t.p0);return 0!==n?n:e.p1.compareTo(t.p1)},Fn.prototype.toString=function(){return this._upwardSeg.toString()},Fn.prototype.interfaces_=function(){return[x]},Fn.prototype.getClass=function(){return Fn};var zn=function(e,t,n){this.p0=e||null,this.p1=t||null,this.p2=n||null};zn.prototype.area=function(){return zn.area(this.p0,this.p1,this.p2)},zn.prototype.signedArea=function(){return zn.signedArea(this.p0,this.p1,this.p2)},zn.prototype.interpolateZ=function(e){if(null===e)throw new v("Supplied point is null.");return zn.interpolateZ(e,this.p0,this.p1,this.p2)},zn.prototype.longestSideLength=function(){return zn.longestSideLength(this.p0,this.p1,this.p2)},zn.prototype.isAcute=function(){return zn.isAcute(this.p0,this.p1,this.p2)},zn.prototype.circumcentre=function(){return zn.circumcentre(this.p0,this.p1,this.p2)},zn.prototype.area3D=function(){return zn.area3D(this.p0,this.p1,this.p2)},zn.prototype.centroid=function(){return zn.centroid(this.p0,this.p1,this.p2)},zn.prototype.inCentre=function(){return zn.inCentre(this.p0,this.p1,this.p2)},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn},zn.area=function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)},zn.signedArea=function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2},zn.det=function(e,t,n,r){return e*r-t*n},zn.interpolateZ=function(e,t,n,r){var i=t.x,o=t.y,a=n.x-i,s=r.x-i,u=n.y-o,l=r.y-o,c=a*l-s*u,h=e.x-i,f=e.y-o,p=(l*h-s*f)/c,d=(-u*h+a*f)/c;return t.z+p*(n.z-t.z)+d*(r.z-t.z)},zn.longestSideLength=function(e,t,n){var r=e.distance(t),i=t.distance(n),o=n.distance(e),a=r;return i>a&&(a=i),o>a&&(a=o),a},zn.isAcute=function(e,t,n){return!!Mn.isAcute(e,t,n)&&!!Mn.isAcute(t,n,e)&&!!Mn.isAcute(n,e,t)},zn.circumcentre=function(e,t,n){var r=n.x,i=n.y,o=e.x-r,a=e.y-i,s=t.x-r,u=t.y-i,l=2*zn.det(o,a,s,u),c=zn.det(a,o*o+a*a,u,s*s+u*u),h=zn.det(o,o*o+a*a,s,s*s+u*u);return new S(r-c/l,i+h/l)},zn.perpendicularBisector=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=new $(e.x+n/2,e.y+r/2,1),o=new $(e.x-r+n/2,e.y+n+r/2,1);return new $(i,o)},zn.angleBisector=function(e,t,n){var r=t.distance(e),i=r/(r+t.distance(n)),o=n.x-e.x,a=n.y-e.y;return new S(e.x+i*o,e.y+i*a)},zn.area3D=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=t.z-e.z,a=n.x-e.x,s=n.y-e.y,u=n.z-e.z,l=i*u-o*s,c=o*a-r*u,h=r*s-i*a,f=l*l+c*c+h*h;return Math.sqrt(f)/2},zn.centroid=function(e,t,n){var r=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3;return new S(r,i)},zn.inCentre=function(e,t,n){var r=t.distance(n),i=e.distance(n),o=e.distance(t),a=r+i+o,s=(r*e.x+i*t.x+o*n.x)/a,u=(r*e.y+i*t.y+o*n.y)/a;return new S(s,u)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Ee;var e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n};Bn.prototype.addPoint=function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,I.EXTERIOR,I.INTERIOR)},Bn.prototype.addPolygon=function(e){var t=this._distance,n=Tt.LEFT;this._distance<0&&(t=-this._distance,n=Tt.RIGHT);var r=e.getExteriorRing(),i=ke.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,t,n,I.EXTERIOR,I.INTERIOR);for(var o=0;o<e.getNumInteriorRing();o++){var a=e.getInteriorRingN(o),s=ke.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,t,Tt.opposite(n),I.INTERIOR,I.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(e,t){var n=new zn(e[0],e[1],e[2]),r=n.inCentre();return se.distancePointLine(r,n.p0,n.p1)<Math.abs(t)},Bn.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=ke.removeRepeatedPoints(e.getCoordinates()),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,I.EXTERIOR,I.INTERIOR)},Bn.prototype.addCurve=function(e,t,n){if(null===e||e.length<2)return null;var r=new dn(e,new Nt(0,I.BOUNDARY,t,n));this._curveList.add(r)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(e,t,n,r,i){if(0===t&&e.length<tt.MINIMUM_VALID_SIZE)return null;var o=r,a=i;e.length>=tt.MINIMUM_VALID_SIZE&&se.isCCW(e)&&(o=i,a=r,n=Tt.opposite(n));var s=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(s,o,a)},Bn.prototype.add=function(e){if(e.isEmpty())return null;e instanceof Qe?this.addPolygon(e):e instanceof Ye?this.addLineString(e):e instanceof Je?this.addPoint(e):(e instanceof et||e instanceof qe||e instanceof nt||e instanceof je)&&this.addCollection(e)},Bn.prototype.isErodedCompletely=function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(4===n.length)return this.isTriangleErodedCompletely(n,t);var r=e.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return t<0&&2*Math.abs(t)>i},Bn.prototype.addCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var Un=function(){};Un.prototype.locate=function(e){},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un};var Vn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};Vn.prototype.next=function(){if(this._atStart)return this._atStart=!1,Vn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var e=this._parent.getGeometryN(this._index++);return e instanceof je?(this._subcollectionIterator=new Vn(e),this._subcollectionIterator.next()):e},Vn.prototype.remove=function(){throw new Error(this.getClass().getName())},Vn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Vn.prototype.interfaces_=function(){return[xe]},Vn.prototype.getClass=function(){return Vn},Vn.isAtomic=function(e){return!(e instanceof je)};var jn=function(){this._geom=null;var e=arguments[0];this._geom=e};jn.prototype.locate=function(e){return jn.locate(e,this._geom)},jn.prototype.interfaces_=function(){return[Un]},jn.prototype.getClass=function(){return jn},jn.isPointInRing=function(e,t){return!!t.getEnvelopeInternal().intersects(e)&&se.isPointInRing(e,t.getCoordinates())},jn.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var n=t.getExteriorRing();if(!jn.isPointInRing(e,n))return!1;for(var r=0;r<t.getNumInteriorRing();r++){var i=t.getInteriorRingN(r);if(jn.isPointInRing(e,i))return!1}return!0},jn.containsPoint=function(e,t){if(t instanceof Qe)return jn.containsPointInPolygon(e,t);if(t instanceof je)for(var n=new Vn(t);n.hasNext();){var r=n.next();if(r!==t&&jn.containsPoint(e,r))return!0}return!1},jn.locate=function(e,t){return t.isEmpty()?I.EXTERIOR:jn.containsPoint(e,t)?I.INTERIOR:I.EXTERIOR};var qn=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[I.NONE,I.NONE]};qn.prototype.getNextCW=function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return 0===t&&(n=this._edgeList.size()-1),this._edgeList.get(n)},qn.prototype.propagateSideLabels=function(e){for(var t=I.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(e)&&r.getLocation(e,Tt.LEFT)!==I.NONE&&(t=r.getLocation(e,Tt.LEFT))}if(t===I.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(e,Tt.ON)===I.NONE&&s.setLocation(e,Tt.ON,i),s.isArea(e)){var u=s.getLocation(e,Tt.LEFT),l=s.getLocation(e,Tt.RIGHT);if(l!==I.NONE){if(l!==i)throw new It("side location conflict",a.getCoordinate());u===I.NONE&&te.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else te.isTrue(s.getLocation(e,Tt.LEFT)===I.NONE,"found single null side"),s.setLocation(e,Tt.RIGHT,i),s.setLocation(e,Tt.LEFT,i)}}},qn.prototype.getCoordinate=function(){var e=this.iterator();return e.hasNext()?e.next().getCoordinate():null},qn.prototype.print=function(e){G.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(e)},qn.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},qn.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel().getLocation(e,Tt.LEFT);te.isTrue(r!==I.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();te.isTrue(a.isArea(e),"Found non-area edge");var s=a.getLocation(e,Tt.LEFT),u=a.getLocation(e,Tt.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},qn.prototype.findIndex=function(e){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===e)return t;return-1},qn.prototype.iterator=function(){return this.getEdges().iterator()},qn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Ee(this._edgeMap.values())),this._edgeList},qn.prototype.getLocation=function(e,t,n){return this._ptInAreaLocation[e]===I.NONE&&(this._ptInAreaLocation[e]=jn.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]},qn.prototype.toString=function(){var e=new P;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append("\n");for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append("\n")}return e.toString()},qn.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(e)},qn.prototype.computeLabelling=function(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===I.BOUNDARY&&(t[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var l=I.NONE;if(t[u])l=I.EXTERIOR;else{var c=a.getCoordinate();l=this.getLocation(u,c,e)}s.setAllLocationsIfNull(u,l)}},qn.prototype.getDegree=function(){return this._edgeMap.size()},qn.prototype.insertEdgeEnd=function(e,t){this._edgeMap.put(e,t),this._edgeList=null},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var Gn=function(e){function t(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var e=null,t=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===e&&i.isInResult()&&(e=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;t=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;t.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===e)throw new It("no outgoing dirEdge found",this.getCoordinate());te.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),t.setNext(e)}},t.prototype.insert=function(e){var t=e;this.insertEdgeEnd(t,t)},t.prototype.getRightmostEdge=function(){var e=this.getEdges(),t=e.size();if(t<1)return null;var n=e.get(0);if(1===t)return n;var r=e.get(t-1),i=n.getQuadrant(),o=r.getQuadrant();return Bt.isNorthern(i)&&Bt.isNorthern(o)?n:Bt.isNorthern(i)||Bt.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(te.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},t.prototype.print=function(e){G.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();e.print("out "),n.print(e),e.println(),e.print("in "),n.getSym().print(e),e.println()}},t.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Ee;for(var e=this.iterator();e.hasNext();){var t=e.next();(t.isInResult()||t.getSym().isInResult())&&this._resultAreaEdgeList.add(t)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next().getLabel();n.setAllLocationsIfNull(0,e.getLocation(0)),n.setAllLocationsIfNull(1,e.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var e=null,t=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===t&&(t=i),null!==e&&i.setNext(e),e=r}t.setNext(e)},t.prototype.computeDepths=function(){if(1===arguments.length){var e=arguments[0],t=this.findIndex(e),n=e.getDepth(Tt.LEFT),r=e.getDepth(Tt.RIGHT),i=this.computeDepths(t+1,this._edgeList.size(),n);if(this.computeDepths(0,t,i)!==r)throw new It("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var u=this._edgeList.get(s);u.setEdgeDepths(Tt.RIGHT,a),a=u.getDepth(Tt.LEFT)}return a}},t.prototype.mergeSymLabels=function(){for(var e=this.iterator();e.hasNext();){var t=e.next();t.getLabel().merge(t.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(e){for(var t=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===t&&o.getEdgeRing()===e&&(t=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==e)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==e)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(te.isTrue(null!==t,"found null for first outgoing dirEdge"),te.isTrue(t.getEdgeRing()===e,"unable to link last incoming dirEdge"),n.setNextMin(t))},t.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var e=0,t=this.iterator();t.hasNext();)t.next().isInResult()&&e++;return e}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var e=I.NONE,t=this.iterator();t.hasNext();){var n=t.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){e=I.INTERIOR;break}if(r.isInResult()){e=I.EXTERIOR;break}}}if(e===I.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===I.INTERIOR):(a.isInResult()&&(i=I.EXTERIOR),s.isInResult()&&(i=I.INTERIOR))}},t.prototype.computeLabelling=function(t){e.prototype.computeLabelling.call(this,t),this._label=new Nt(I.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==I.INTERIOR&&o!==I.BOUNDARY||this._label.setLocation(i,I.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(qn),$n=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createNode=function(e){return new Ft(e,new Gn)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(qt),Hn=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};Hn.prototype.compareTo=function(e){var t=e;return Hn.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},Hn.prototype.interfaces_=function(){return[x]},Hn.prototype.getClass=function(){return Hn},Hn.orientation=function(e){return 1===ke.increasingDirection(e)},Hn.compareOriented=function(e,t,n,r){for(var i=t?1:-1,o=r?1:-1,a=t?e.length:-1,s=r?n.length:-1,u=t?0:e.length-1,l=r?0:n.length-1;;){var c=e[u].compareTo(n[l]);if(0!==c)return c;var h=(u+=i)===a,f=(l+=o)===s;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var Xn=function(){this._edges=new Ee,this._ocaMap=new h};Xn.prototype.print=function(e){e.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var n=this._edges.get(t);t>0&&e.print(","),e.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&e.print(","),e.print(r[i].x+" "+r[i].y);e.println(")")}e.print(")  ")},Xn.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next())},Xn.prototype.findEdgeIndex=function(e){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(e))return t;return-1},Xn.prototype.iterator=function(){return this._edges.iterator()},Xn.prototype.getEdges=function(){return this._edges},Xn.prototype.get=function(e){return this._edges.get(e)},Xn.prototype.findEqualEdge=function(e){var t=new Hn(e.getCoordinates());return this._ocaMap.get(t)},Xn.prototype.add=function(e){this._edges.add(e);var t=new Hn(e.getCoordinates());this._ocaMap.put(t,e)},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};var Wn=function(){};Wn.prototype.processIntersections=function(e,t,n,r){},Wn.prototype.isDone=function(){},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var Yn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e};Yn.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&1===this._li.getIntersectionNum()){if(Yn.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.size()-1;if(0===t&&r===i||0===r&&t===i)return!0}}return!1},Yn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Yn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Yn.prototype.getLineIntersector=function(){return this._li},Yn.prototype.hasProperIntersection=function(){return this._hasProper},Yn.prototype.processIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Yn.prototype.hasIntersection=function(){return this._hasIntersection},Yn.prototype.isDone=function(){return!1},Yn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Yn.prototype.interfaces_=function(){return[Wn]},Yn.prototype.getClass=function(){return Yn},Yn.isAdjacentSegments=function(e,t){return 1===Math.abs(e-t)};var Zn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new S(e),this.segmentIndex=t,this.dist=n};Zn.prototype.getSegmentIndex=function(){return this.segmentIndex},Zn.prototype.getCoordinate=function(){return this.coord},Zn.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)},Zn.prototype.compareTo=function(e){var t=e;return this.compare(t.segmentIndex,t.dist)},Zn.prototype.isEndPoint=function(e){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===e},Zn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zn.prototype.getDistance=function(){return this.dist},Zn.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0},Zn.prototype.interfaces_=function(){return[x]},Zn.prototype.getClass=function(){return Zn};var Jn=function(){this._nodeMap=new h,this.edge=null;var e=arguments[0];this.edge=e};Jn.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(e)},Jn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Jn.prototype.addSplitEdges=function(e){this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}},Jn.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)},Jn.prototype.createSplitEdge=function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this.edge.pts[t.segmentIndex],i=t.dist>0||!t.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new S(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=t.coord),new nr(o,new Nt(this.edge._label))},Jn.prototype.add=function(e,t,n){var r=new Zn(e,t,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Jn.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(e))return!0;return!1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn};var Kn=function(){};Kn.prototype.getChainStartIndices=function(e){var t=0,n=new Ee;n.add(new O(t));do{var r=this.findChainEnd(e,t);n.add(new O(r)),t=r}while(t<e.length-1);return Kn.toIntArray(n)},Kn.prototype.findChainEnd=function(e,t){for(var n=Bt.quadrant(e[t],e[t+1]),r=t+1;r<e.length&&Bt.quadrant(e[r-1],e[r])===n;)r++;return r-1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn},Kn.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var Qn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new H,this.env2=new H;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new Kn;this.startIndex=t.getChainStartIndices(this.pts)};Qn.prototype.getCoordinates=function(){return this.pts},Qn.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n},Qn.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n},Qn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],h=this.pts[o],f=a.pts[s],p=a.pts[u];if(o-i==1&&u-s==1)return l.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,l),g<u&&this.computeIntersectsForChain(i,d,a,g,u,l)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,l),g<u&&this.computeIntersectsForChain(d,o,a,g,u,l))}},Qn.prototype.getStartIndexes=function(){return this.startIndex},Qn.prototype.computeIntersects=function(e,t){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<e.startIndex.length-1;r++)this.computeIntersectsForChain(n,e,r,t)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var er=function e(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var t=0;t<2;t++)for(var n=0;n<3;n++)this._depth[t][n]=e.NULL_VALUE},tr={NULL_VALUE:{configurable:!0}};er.prototype.getDepth=function(e,t){return this._depth[e][t]},er.prototype.setDepth=function(e,t,n){this._depth[e][t]=n},er.prototype.isNull=function(){if(0===arguments.length){for(var e=0;e<2;e++)for(var t=0;t<3;t++)if(this._depth[e][t]!==er.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===er.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===er.NULL_VALUE}},er.prototype.normalize=function(){for(var e=0;e<2;e++)if(!this.isNull(e)){var t=this._depth[e][1];this._depth[e][2]<t&&(t=this._depth[e][2]),t<0&&(t=0);for(var n=1;n<3;n++){var r=0;this._depth[e][n]>t&&(r=1),this._depth[e][n]=r}}},er.prototype.getDelta=function(e){return this._depth[e][Tt.RIGHT]-this._depth[e][Tt.LEFT]},er.prototype.getLocation=function(e,t){return this._depth[e][t]<=0?I.EXTERIOR:I.INTERIOR},er.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},er.prototype.add=function(){if(1===arguments.length)for(var e=arguments[0],t=0;t<2;t++)for(var n=1;n<3;n++){var r=e.getLocation(t,n);r!==I.EXTERIOR&&r!==I.INTERIOR||(this.isNull(t,n)?this._depth[t][n]=er.depthAtLocation(r):this._depth[t][n]+=er.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===I.INTERIOR&&this._depth[i][o]++}},er.prototype.interfaces_=function(){return[]},er.prototype.getClass=function(){return er},er.depthAtLocation=function(e){return e===I.EXTERIOR?0:e===I.INTERIOR?1:er.NULL_VALUE},tr.NULL_VALUE.get=function(){return-1},Object.defineProperties(er,tr);var nr=function(e){function t(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new Jn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new er,this._depthDelta=0,1===arguments.length){var n=arguments[0];t.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new t(e,Nt.toLineLabel(this._label))},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(e){this._isIsolated=e},t.prototype.setName=function(e){this._name=e},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},t.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var e=arguments[0];return this.pts[e]}},t.prototype.print=function(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.print(","),e.print(this.pts[t].x+" "+this.pts[t].y);e.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(e){t.updateIM(this._label,e)},t.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(e){e.print("edge "+this._name+": ");for(var t=this.pts.length-1;t>=0;t--)e.print(this.pts[t]+" ");e.println("")},t.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qn(this)),this._mce},t.prototype.getEnvelope=function(){if(null===this._env){this._env=new H;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env},t.prototype.addIntersection=function(e,t,n,r){var i=new S(e.getIntersection(r)),o=t,a=e.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},t.prototype.toString=function(){var e=new P;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.append(","),e.append(this.pts[t].x+" "+this.pts[t].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()},t.prototype.isPointwiseEqual=function(e){if(this.pts.length!==e.pts.length)return!1;for(var t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(e.pts[t]))return!1;return!0},t.prototype.setDepthDelta=function(e){this._depthDelta=e},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(2!==arguments.length)return e.prototype.updateIM.apply(this,arguments);var t=arguments[0],n=arguments[1];n.setAtLeastIfValid(t.getLocation(0,Tt.ON),t.getLocation(1,Tt.ON),1),t.isArea()&&(n.setAtLeastIfValid(t.getLocation(0,Tt.LEFT),t.getLocation(1,Tt.LEFT),2),n.setAtLeastIfValid(t.getLocation(0,Tt.RIGHT),t.getLocation(1,Tt.RIGHT),2))},t}(Dt),rr=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xn,this._bufParams=e||null};rr.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e},rr.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(null!==t){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new Nt(e.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=t.getDepthDelta()+i;t.setDepthDelta(o)}else this._edgeList.add(e),e.setDepthDelta(rr.depthDelta(e.getLabel()))},rr.prototype.buildSubgraphs=function(e,t){for(var n=new Ee,r=e.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Rn(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),t.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(e){for(var t=new Ee,n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Mt;i.create(r),t.add(i)}}return Qt.sort(t,Qt.reverseOrder()),t},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(e){if(null!==this._workingNoder)return this._workingNoder;var t=new wn,n=new ie;return n.setPrecisionModel(e),t.setSegmentIntersector(new Yn(n)),t},rr.prototype.buffer=function(e,t){var n=this._workingPrecisionModel;null===n&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var r=new On(n,this._bufParams),i=new Bn(e,t,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Gt(new $n),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new $t(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rr.prototype.computeNodedEdges=function(e,t){var n=this.getNoder(t);n.computeNodes(e);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new nr(i.getCoordinates(),new Nt(a));this.insertUniqueEdge(s)}}},rr.prototype.setNoder=function(e){this._workingNoder=e},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(e){var t=e.getLocation(0,Tt.LEFT),n=e.getLocation(0,Tt.RIGHT);return t===I.INTERIOR&&n===I.EXTERIOR?1:t===I.EXTERIOR&&n===I.INTERIOR?-1:0},rr.convertSegStrings=function(e){for(var t=new yt,n=new Ee;e.hasNext();){var r=e.next(),i=t.createLineString(r.getCoordinates());n.add(i)}return t.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var e=arguments[0],t=arguments[1];this._noder=e,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(M(arguments[0],be))for(var e=arguments[0].iterator();e.hasNext();){var t=e.next();this.rescale(t.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&G.out.println(n)}},ir.prototype.scale=function(){if(M(arguments[0],be)){for(var e=arguments[0],t=new Ee,n=e.iterator();n.hasNext();){var r=n.next();t.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return t}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new S(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return ke.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e},ir.prototype.computeNodes=function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)},ir.prototype.interfaces_=function(){return[bn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new ie,this._segStrings=null;var e=arguments[0];this._segStrings=e},ar={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var t=e.next().getCoordinates();this.checkEndPtVertexIntersections(t[0],this._segStrings),this.checkEndPtVertexIntersections(t[t.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var t=e.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(t,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var l=0;l<s.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3];if(c===f&&h===p)return null;var d=c.getCoordinates()[h],g=c.getCoordinates()[h+1],m=f.getCoordinates()[p],y=f.getCoordinates()[p+1];if(this._li.computeIntersection(d,g,m,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,m,y)))throw new Q("found non-noded intersection at "+d+"-"+g+" and "+m+"-"+y)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var t=e.next();this.checkCollapses(t)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var i=e.getIntersection(r);if(!i.equals(t)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(e,t,n){if(e.equals(n))throw new Q("found non-noded collapse at "+or.fact.createLineString([e,t,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},ar.fact.get=function(){return new yt},Object.defineProperties(or,ar);var sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new v("Scale factor must be non-zero");1!==t&&(this._pt=new S(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new S,this._p1Scaled=new S),this.initCorners(this._pt)},ur={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sr.prototype.intersectsScaled=function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.y,t.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(e,t);return te.isTrue(!(a&&s),"Found bad envelope test"),s},sr.prototype.initCorners=function(e){this._minx=e.x-.5,this._maxx=e.x+.5,this._miny=e.y-.5,this._maxy=e.y+.5,this._corner[0]=new S(this._maxx,this._maxy),this._corner[1]=new S(this._minx,this._maxy),this._corner[2]=new S(this._minx,this._miny),this._corner[3]=new S(this._maxx,this._miny)},sr.prototype.intersects=function(e,t){return 1===this._scaleFactor?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sr.prototype.scale=function(e){return Math.round(e*this._scaleFactor)},sr.prototype.getCoordinate=function(){return this._originalPt},sr.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)},sr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var e=sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new H(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv},sr.prototype.intersectsPixelClosure=function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},sr.prototype.intersectsToleranceSquare=function(e,t){var n=!1,r=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!e.equals(this._pt)||!!t.equals(this._pt))))},sr.prototype.addSnappedNode=function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return!!this.intersects(n,r)&&(e.addIntersection(this.getCoordinate(),t),!0)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},ur.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sr,ur);var lr=function(){this.tempEnv1=new H,this.selectedSegment=new gn};lr.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var e=arguments[1];arguments[0].getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var cr=function(){this._index=null;var e=arguments[0];this._index=e},hr={HotPixelSnapAction:{configurable:!0}};cr.prototype.snap=function(){if(1===arguments.length){var e=arguments[0];return this.snap(e,null,-1)}if(3===arguments.length){var t=arguments[0],n=arguments[1],r=arguments[2],i=t.getSafeEnvelope(),o=new fr(t,n,r);return this._index.query(i,{interfaces_:function(){return[Yt]},visitItem:function(e){e.select(i,o)}}),o.isNodeAdded()}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},hr.HotPixelSnapAction.get=function(){return fr},Object.defineProperties(cr,hr);var fr=function(e){function t(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=t,this._parentEdge=n,this._hotPixelVertexIndex=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(2!==arguments.length)return e.prototype.select.apply(this,arguments);var t=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&t===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,t)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(lr),pr=function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new Ee};pr.prototype.processIntersections=function(e,t,n,r){if(e===n&&t===r)return null;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)}},pr.prototype.isDone=function(){return!1},pr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pr.prototype.interfaces_=function(){return[Wn]},pr.prototype.getClass=function(){return pr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new ie,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};dr.prototype.checkCorrectness=function(e){var t=dn.getNodedSubstrings(e),n=new or(t);try{n.checkValid()}catch(e){if(!(e instanceof j))throw e;e.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)},dr.prototype.findInteriorIntersections=function(e,t){var n=new pr(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(M(arguments[0],be))for(var e=arguments[0].iterator();e.hasNext();){var t=e.next();this.computeVertexSnaps(t)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new wn,this._pointSnapper=new cr(this._noder.getIndex()),this.snapRound(e,this._li)},dr.prototype.computeIntersectionSnaps=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=new sr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[bn]},dr.prototype.getClass=function(){return dr};var gr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Sn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var e=arguments[0];this._argGeom=e}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}},mr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gr.prototype.bufferFixedPrecision=function(e){var t=new ir(new dr(new pt(1)),e.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gr.prototype.bufferReducedPrecision=function(){var e=this;if(0===arguments.length){for(var t=gr.MAX_PRECISION_DIGITS;t>=0;t--){try{e.bufferReducedPrecision(t)}catch(t){if(!(t instanceof It))throw t;e._saveException=t}if(null!==e._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=gr.precisionScaleFactor(this._argGeom,this._distance,n),i=new pt(r);this.bufferFixedPrecision(i)}},gr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===pt.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()},gr.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)},gr.prototype.bufferOriginalPrecision=function(){try{var e=new rr(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof Q))throw e;this._saveException=e}},gr.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry},gr.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},gr.bufferOp=function(){if(2===arguments.length){var e=arguments[1];return new gr(arguments[0]).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ce&&"number"==typeof arguments[1]){var t=arguments[1],n=arguments[2],r=new gr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(t)}if(arguments[2]instanceof Sn&&arguments[0]instanceof ce&&"number"==typeof arguments[1]){var i=arguments[1];return new gr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],u=new gr(arguments[0]);return u.setQuadrantSegments(a),u.setEndCapStyle(s),u.getResultGeometry(o)}},gr.precisionScaleFactor=function(e,t,n){var r=e.getEnvelopeInternal(),i=L.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(t>0?t:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},mr.CAP_ROUND.get=function(){return Sn.CAP_ROUND},mr.CAP_BUTT.get=function(){return Sn.CAP_FLAT},mr.CAP_FLAT.get=function(){return Sn.CAP_FLAT},mr.CAP_SQUARE.get=function(){return Sn.CAP_SQUARE},mr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gr,mr);var yr=function(){this._pt=[new S,new S],this._distance=_.NaN,this._isNull=!0};yr.prototype.getCoordinates=function(){return this._pt},yr.prototype.getCoordinate=function(e){return this._pt[e]},yr.prototype.setMinimum=function(){if(1===arguments.length){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}},yr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},yr.prototype.getDistance=function(){return this._distance},yr.prototype.setMaximum=function(){if(1===arguments.length){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr};var vr=function(){};vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},vr.computeDistance=function(){if(arguments[2]instanceof yr&&arguments[0]instanceof Ye&&arguments[1]instanceof S)for(var e=arguments[1],t=arguments[2],n=arguments[0].getCoordinates(),r=new gn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(e);t.setMinimum(o,e)}else if(arguments[2]instanceof yr&&arguments[0]instanceof Qe&&arguments[1]instanceof S){var a=arguments[0],s=arguments[1],u=arguments[2];vr.computeDistance(a.getExteriorRing(),s,u);for(var l=0;l<a.getNumInteriorRing();l++)vr.computeDistance(a.getInteriorRingN(l),s,u)}else if(arguments[2]instanceof yr&&arguments[0]instanceof ce&&arguments[1]instanceof S){var c=arguments[0],h=arguments[1],f=arguments[2];if(c instanceof Ye)vr.computeDistance(c,h,f);else if(c instanceof Qe)vr.computeDistance(c,h,f);else if(c instanceof je)for(var p=c,d=0;d<p.getNumGeometries();d++){var g=p.getGeometryN(d);vr.computeDistance(g,h,f)}else f.setMinimum(c.getCoordinate(),h)}else if(arguments[2]instanceof yr&&arguments[0]instanceof gn&&arguments[1]instanceof S){var m=arguments[1],y=arguments[2],v=arguments[0].closestPoint(m);y.setMinimum(v,m)}};var _r=function(e){this._maxPtDist=new yr,this._inputGeom=e||null},br={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_r.prototype.computeMaxMidpointDistance=function(e){var t=new wr(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())},_r.prototype.computeMaxVertexDistance=function(e){var t=new xr(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())},_r.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()},_r.prototype.getDistancePoints=function(){return this._maxPtDist},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},br.MaxPointDistanceFilter.get=function(){return xr},br.MaxMidpointDistanceFilter.get=function(){return wr},Object.defineProperties(_r,br);var xr=function(e){this._maxPtDist=new yr,this._minPtDist=new yr,this._geom=e||null};xr.prototype.filter=function(e){this._minPtDist.initialize(),vr.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xr.prototype.getMaxPointDistance=function(){return this._maxPtDist},xr.prototype.interfaces_=function(){return[pe]},xr.prototype.getClass=function(){return xr};var wr=function(e){this._maxPtDist=new yr,this._minPtDist=new yr,this._geom=e||null};wr.prototype.filter=function(e,t){if(0===t)return null;var n=e.getCoordinate(t-1),r=e.getCoordinate(t),i=new S((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),vr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wr.prototype.isDone=function(){return!1},wr.prototype.isGeometryChanged=function(){return!1},wr.prototype.getMaxPointDistance=function(){return this._maxPtDist},wr.prototype.interfaces_=function(){return[Ve]},wr.prototype.getClass=function(){return wr};var Er=function(e){this._comps=e||null};Er.prototype.filter=function(e){e instanceof Qe&&this._comps.add(e)},Er.prototype.interfaces_=function(){return[Ue]},Er.prototype.getClass=function(){return Er},Er.getPolygons=function(){if(1===arguments.length){var e=arguments[0];return Er.getPolygons(e,new Ee)}if(2===arguments.length){var t=arguments[0],n=arguments[1];return t instanceof Qe?n.add(t):t instanceof je&&t.apply(new Er(n)),n}};var Sr=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var e=arguments[0];this._lines=e}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this._lines=t,this._isForcedToLineString=n}};Sr.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof tt){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof Ye&&this._lines.add(e)},Sr.prototype.setForceToLineString=function(e){this._isForcedToLineString=e},Sr.prototype.interfaces_=function(){return[le]},Sr.prototype.getClass=function(){return Sr},Sr.getGeometry=function(){if(1===arguments.length){var e=arguments[0];return e.getFactory().buildGeometry(Sr.getLines(e))}if(2===arguments.length){var t=arguments[0],n=arguments[1];return t.getFactory().buildGeometry(Sr.getLines(t,n))}},Sr.getLines=function(){if(1===arguments.length){var e=arguments[0];return Sr.getLines(e,!1)}if(2===arguments.length){if(M(arguments[0],be)&&M(arguments[1],be)){for(var t=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Sr.getLines(r,t)}return t}if(arguments[0]instanceof ce&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=new Ee;return i.apply(new Sr(a,o)),a}if(arguments[0]instanceof ce&&M(arguments[1],be)){var s=arguments[0],u=arguments[1];return s instanceof Ye?u.add(s):s.apply(new Sr(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&M(arguments[0],be)&&M(arguments[1],be)){for(var l=arguments[1],c=arguments[2],h=arguments[0].iterator();h.hasNext();){var f=h.next();Sr.getLines(f,l,c)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ce&&M(arguments[1],be)){var p=arguments[1],d=arguments[2];return arguments[0].apply(new Sr(p,d)),p}}};var Tr=function(){if(this._boundaryRule=de.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(null===e)throw new v("Rule must be non-null");this._boundaryRule=e}};Tr.prototype.locateInternal=function(){if(arguments[0]instanceof S&&arguments[1]instanceof Qe){var e=arguments[0],t=arguments[1];if(t.isEmpty())return I.EXTERIOR;var n=t.getExteriorRing(),r=this.locateInPolygonRing(e,n);if(r===I.EXTERIOR)return I.EXTERIOR;if(r===I.BOUNDARY)return I.BOUNDARY;for(var i=0;i<t.getNumInteriorRing();i++){var o=t.getInteriorRingN(i),a=this.locateInPolygonRing(e,o);if(a===I.INTERIOR)return I.EXTERIOR;if(a===I.BOUNDARY)return I.BOUNDARY}return I.INTERIOR}if(arguments[0]instanceof S&&arguments[1]instanceof Ye){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return I.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!s.equals(l[0])&&!s.equals(l[l.length-1])?se.isOnLine(s,l)?I.INTERIOR:I.EXTERIOR:I.BOUNDARY}if(arguments[0]instanceof S&&arguments[1]instanceof Je){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?I.INTERIOR:I.EXTERIOR}},Tr.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?se.locatePointInRing(e,t.getCoordinates()):I.EXTERIOR},Tr.prototype.intersects=function(e,t){return this.locate(e,t)!==I.EXTERIOR},Tr.prototype.updateLocationInfo=function(e){e===I.INTERIOR&&(this._isIn=!0),e===I.BOUNDARY&&this._numBoundaries++},Tr.prototype.computeLocation=function(e,t){if(t instanceof Je&&this.updateLocationInfo(this.locateInternal(e,t)),t instanceof Ye)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Qe)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof qe)for(var n=t,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(e,i))}else if(t instanceof nt)for(var o=t,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(e,s))}else if(t instanceof je)for(var u=new Vn(t);u.hasNext();){var l=u.next();l!==t&&this.computeLocation(e,l)}},Tr.prototype.locate=function(e,t){return t.isEmpty()?I.EXTERIOR:t instanceof Ye||t instanceof Qe?this.locateInternal(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?I.BOUNDARY:this._numBoundaries>0||this._isIn?I.INTERIOR:I.EXTERIOR)},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr};var kr=function e(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)e.call(this,arguments[0],e.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var t=arguments[0],n=arguments[1],r=arguments[2];this._component=t,this._segIndex=n,this._pt=r}},Cr={INSIDE_AREA:{configurable:!0}};kr.prototype.isInsideArea=function(){return this._segIndex===kr.INSIDE_AREA},kr.prototype.getCoordinate=function(){return this._pt},kr.prototype.getGeometryComponent=function(){return this._component},kr.prototype.getSegmentIndex=function(){return this._segIndex},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},Cr.INSIDE_AREA.get=function(){return-1},Object.defineProperties(kr,Cr);var Ir=function(e){this._pts=e||null};Ir.prototype.filter=function(e){e instanceof Je&&this._pts.add(e)},Ir.prototype.interfaces_=function(){return[Ue]},Ir.prototype.getClass=function(){return Ir},Ir.getPoints=function(){if(1===arguments.length){var e=arguments[0];return e instanceof Je?Qt.singletonList(e):Ir.getPoints(e,new Ee)}if(2===arguments.length){var t=arguments[0],n=arguments[1];return t instanceof Je?n.add(t):t instanceof je&&t.apply(new Ir(n)),n}};var Ar=function(){this._locations=null;var e=arguments[0];this._locations=e};Ar.prototype.filter=function(e){(e instanceof Je||e instanceof Ye||e instanceof Qe)&&this._locations.add(new kr(e,0,e.getCoordinate()))},Ar.prototype.interfaces_=function(){return[Ue]},Ar.prototype.getClass=function(){return Ar},Ar.getLocations=function(e){var t=new Ee;return e.apply(new Ar(t)),t};var Mr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Tr,this._minDistanceLocation=null,this._minDistance=_.MAX_VALUE,2===arguments.length){var e=arguments[0],t=arguments[1];this._geom=[e,t],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Mr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1],r=1-t,i=Er.getPolygons(this._geom[t]);if(i.size()>0){var o=Ar.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[t]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&M(arguments[0],we)&&M(arguments[1],we)){for(var a=arguments[0],s=arguments[1],u=arguments[2],l=0;l<a.size();l++)for(var c=a.get(l),h=0;h<s.size();h++)if(this.computeContainmentDistance(c,s.get(h),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof kr&&arguments[1]instanceof Qe){var f=arguments[0],p=arguments[1],d=arguments[2],g=f.getCoordinate();if(I.EXTERIOR!==this._ptLocator.locate(g,p))return this._minDistance=0,d[0]=f,d[1]=new kr(p,g),null}},Mr.prototype.computeMinDistanceLinesPoints=function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),o=0;o<t.size();o++){var a=t.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Mr.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),t=Sr.getLines(this._geom[0]),n=Sr.getLines(this._geom[1]),r=Ir.getPoints(this._geom[0]),i=Ir.getPoints(this._geom[1]);return this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,r,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistancePoints(r,i,e),void this.updateMinDistance(e,!1))))},Mr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Mr.prototype.updateMinDistance=function(e,t){if(null===e[0])return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])},Mr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Mr.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Ye&&arguments[1]instanceof Je){var e=arguments[0],t=arguments[1],n=arguments[2];if(e.getEnvelopeInternal().distance(t.getEnvelopeInternal())>this._minDistance)return null;for(var r=e.getCoordinates(),i=t.getCoordinate(),o=0;o<r.length-1;o++){var a=se.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new gn(r[o],r[o+1]).closestPoint(i);n[0]=new kr(e,o,s),n[1]=new kr(t,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ye&&arguments[1]instanceof Ye){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var h=u.getCoordinates(),f=l.getCoordinates(),p=0;p<h.length-1;p++)for(var d=0;d<f.length-1;d++){var g=se.distanceLineLine(h[p],h[p+1],f[d],f[d+1]);if(g<this._minDistance){this._minDistance=g;var m=new gn(h[p],h[p+1]),y=new gn(f[d],f[d+1]),v=m.closestPoints(y);c[0]=new kr(u,p,v[0]),c[1]=new kr(l,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},Mr.prototype.computeMinDistancePoints=function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),o=0;o<t.size();o++){var a=t.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new kr(i,0,i.getCoordinate()),n[1]=new kr(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Mr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new v("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Mr.prototype.computeMinDistanceLines=function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),o=0;o<t.size();o++){var a=t.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr.distance=function(e,t){return new Mr(e,t).distance()},Mr.isWithinDistance=function(e,t,n){return new Mr(e,t,n).distance()<=n},Mr.nearestPoints=function(e,t){return new Mr(e,t).nearestPoints()};var Lr=function(){this._pt=[new S,new S],this._distance=_.NaN,this._isNull=!0};Lr.prototype.getCoordinates=function(){return this._pt},Lr.prototype.getCoordinate=function(e){return this._pt[e]},Lr.prototype.setMinimum=function(){if(1===arguments.length){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}},Lr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Lr.prototype.toString=function(){return K.toLineString(this._pt[0],this._pt[1])},Lr.prototype.getDistance=function(){return this._distance},Lr.prototype.setMaximum=function(){if(1===arguments.length){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr};var Nr=function(){};Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},Nr.computeDistance=function(){if(arguments[2]instanceof Lr&&arguments[0]instanceof Ye&&arguments[1]instanceof S)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=new gn,i=e.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(t);n.setMinimum(a,t)}else if(arguments[2]instanceof Lr&&arguments[0]instanceof Qe&&arguments[1]instanceof S){var s=arguments[0],u=arguments[1],l=arguments[2];Nr.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)Nr.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Lr&&arguments[0]instanceof ce&&arguments[1]instanceof S){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Ye)Nr.computeDistance(h,f,p);else if(h instanceof Qe)Nr.computeDistance(h,f,p);else if(h instanceof je)for(var d=h,g=0;g<d.getNumGeometries();g++){var m=d.getGeometryN(g);Nr.computeDistance(m,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Lr&&arguments[0]instanceof gn&&arguments[1]instanceof S){var y=arguments[1],v=arguments[2],_=arguments[0].closestPoint(y);v.setMinimum(_,y)}};var Pr=function(){this._g0=null,this._g1=null,this._ptDist=new Lr,this._densifyFrac=0;var e=arguments[0],t=arguments[1];this._g0=e,this._g1=t},Or={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Pr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Pr.prototype.setDensifyFraction=function(e){if(e>1||e<=0)throw new v("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e},Pr.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)},Pr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Pr.prototype.computeOrientedDistance=function(e,t,n){var r=new Rr(t);if(e.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Dr(t,this._densifyFrac);e.apply(i),n.setMaximum(i.getMaxPointDistance())}},Pr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.distance=function(){if(2===arguments.length)return new Pr(arguments[0],arguments[1]).distance();if(3===arguments.length){var e=arguments[2],t=new Pr(arguments[0],arguments[1]);return t.setDensifyFraction(e),t.distance()}},Or.MaxPointDistanceFilter.get=function(){return Rr},Or.MaxDensifiedByFractionDistanceFilter.get=function(){return Dr},Object.defineProperties(Pr,Or);var Rr=function(){this._maxPtDist=new Lr,this._minPtDist=new Lr,this._euclideanDist=new Nr,this._geom=null;var e=arguments[0];this._geom=e};Rr.prototype.filter=function(e){this._minPtDist.initialize(),Nr.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Rr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Rr.prototype.interfaces_=function(){return[pe]},Rr.prototype.getClass=function(){return Rr};var Dr=function(){this._maxPtDist=new Lr,this._minPtDist=new Lr,this._geom=null,this._numSubSegs=0;var e=arguments[0],t=arguments[1];this._geom=e,this._numSubSegs=Math.trunc(Math.round(1/t))};Dr.prototype.filter=function(e,t){if(0===t)return null;for(var n=e.getCoordinate(t-1),r=e.getCoordinate(t),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,u=n.y+a*o,l=new S(s,u);this._minPtDist.initialize(),Nr.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Dr.prototype.isDone=function(){return!1},Dr.prototype.isGeometryChanged=function(){return!1},Dr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Dr.prototype.interfaces_=function(){return[Ve]},Dr.prototype.getClass=function(){return Dr};var Fr=function(e,t,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=t||null,this._result=n||null},zr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Fr.prototype.checkMaximumDistance=function(e,t,n){var r=new Pr(t,e);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+K.toLineString(i[0],i[1])+")"}},Fr.prototype.isValid=function(){var e=Math.abs(this._bufDistance),t=Fr.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-t,this._maxValidDistance=e+t,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Fr.VERBOSE&&G.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Fr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qe||this._input instanceof nt||this._input instanceof je))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)},Fr.prototype.getErrorIndicator=function(){return this._errorIndicator},Fr.prototype.checkMinimumDistance=function(e,t,n){var r=new Mr(e,t,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+K.toLineString(i[0],i[1])+" )"}},Fr.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)},Fr.prototype.getErrorLocation=function(){return this._errorLocation},Fr.prototype.getPolygonLines=function(e){for(var t=new Ee,n=new Sr(t),r=Er.getPolygons(e).iterator();r.hasNext();)r.next().apply(n);return e.getFactory().buildGeometry(t)},Fr.prototype.getErrorMessage=function(){return this._errMsg},Fr.prototype.interfaces_=function(){return[]},Fr.prototype.getClass=function(){return Fr},zr.VERBOSE.get=function(){return!1},zr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Fr,zr);var Br=function(e,t,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=t||null,this._result=n||null},Ur={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Br.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Br.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*Br.MAX_ENV_DIFF_FRAC;0===e&&(e=.001);var t=new H(this._input.getEnvelopeInternal());t.expandBy(this._distance);var n=new H(this._result.getEnvelopeInternal());n.expandBy(e),n.contains(t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Br.prototype.checkDistance=function(){var e=new Fr(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")},Br.prototype.checkArea=function(){var e=this._input.getArea(),t=this._result.getArea();this._distance>0&&e>t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Br.prototype.checkPolygonal=function(){this._result instanceof Qe||this._result instanceof nt||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Br.prototype.getErrorIndicator=function(){return this._errorIndicator},Br.prototype.getErrorLocation=function(){return this._errorLocation},Br.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Br.prototype.report=function(e){if(!Br.VERBOSE)return null;G.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))},Br.prototype.getErrorMessage=function(){return this._errorMsg},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.isValidMsg=function(e,t,n){var r=new Br(e,t,n);return r.isValid()?null:r.getErrorMessage()},Br.isValid=function(e,t,n){return!!new Br(e,t,n).isValid()},Ur.VERBOSE.get=function(){return!1},Ur.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Br,Ur);var Vr=function(){this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Vr.prototype.getCoordinates=function(){return this._pts},Vr.prototype.size=function(){return this._pts.length},Vr.prototype.getCoordinate=function(e){return this._pts[e]},Vr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Vr.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:hn.octant(this.getCoordinate(e),this.getCoordinate(e+1))},Vr.prototype.setData=function(e){this._data=e},Vr.prototype.getData=function(){return this._data},Vr.prototype.toString=function(){return K.toLineString(new ut(this._pts))},Vr.prototype.interfaces_=function(){return[fn]},Vr.prototype.getClass=function(){return Vr};var jr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Ee,this._intersectionCount=0,this._keepIntersections=!0;var e=arguments[0];this._li=e,this._interiorIntersection=null};jr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},jr.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e},jr.prototype.getIntersectionSegments=function(){return this._intSegments},jr.prototype.count=function(){return this._intersectionCount},jr.prototype.getIntersections=function(){return this._intersections},jr.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e},jr.prototype.setKeepIntersections=function(e){this._keepIntersections=e},jr.prototype.processIntersections=function(e,t,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(e===n&&t===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(e,t)&&!this.isEndSegment(n,r))return null;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},jr.prototype.isEndSegment=function(e,t){return 0===t||t>=e.size()-2},jr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},jr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},jr.prototype.interfaces_=function(){return[Wn]},jr.prototype.getClass=function(){return jr},jr.createAllIntersectionsFinder=function(e){var t=new jr(e);return t.setFindAllIntersections(!0),t},jr.createAnyIntersectionFinder=function(e){return new jr(e)},jr.createIntersectionCounter=function(e){var t=new jr(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};var qr=function(){this._li=new ie,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var e=arguments[0];this._segStrings=e};qr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},qr.prototype.getIntersections=function(){return this._segInt.getIntersections()},qr.prototype.isValid=function(){return this.execute(),this._isValid},qr.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e},qr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new jr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new wn;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},qr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new It(this.getErrorMessage(),this._segInt.getInteriorIntersection())},qr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+K.toLineString(e[0],e[1])+" and "+K.toLineString(e[2],e[3])},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr},qr.computeIntersections=function(e){var t=new qr(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};var Gr=function e(){this._nv=null;var t=arguments[0];this._nv=new qr(e.toSegmentStrings(t))};Gr.prototype.checkValid=function(){this._nv.checkValid()},Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr},Gr.toSegmentStrings=function(e){for(var t=new Ee,n=e.iterator();n.hasNext();){var r=n.next();t.add(new Vr(r.getCoordinates(),r))}return t},Gr.checkValid=function(e){new Gr(e).checkValid()};var $r=function(e){this._mapOp=e};$r.prototype.map=function(e){for(var t=new Ee,n=0;n<e.getNumGeometries();n++){var r=this._mapOp.map(e.getGeometryN(n));r.isEmpty()||t.add(r)}return e.getFactory().createGeometryCollection(yt.toGeometryArray(t))},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.map=function(e,t){return new $r(t).map(e)};var Hr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Ee,this._resultLineList=new Ee;var e=arguments[0],t=arguments[1],n=arguments[2];this._op=e,this._geometryFactory=t,this._ptLocator=n};Hr.prototype.collectLines=function(e){for(var t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();){var n=t.next();this.collectLineEdge(n,e,this._lineEdgesList),this.collectBoundaryTouchEdge(n,e,this._lineEdgesList)}},Hr.prototype.labelIsolatedLine=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,n)},Hr.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList},Hr.prototype.collectLineEdge=function(e,t,n){var r=e.getLabel(),i=e.getEdge();e.isLineEdge()&&(e.isVisited()||!ki.isResultOfOp(r,t)||i.isCovered()||(n.add(i),e.setVisitedEdge(!0)))},Hr.prototype.findCoveredLineEdges=function(){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();)e.next().getEdges().findCoveredLineEdges();for(var t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();){var n=t.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Hr.prototype.labelIsolatedLines=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Hr.prototype.buildLines=function(e){for(var t=this._lineEdgesList.iterator();t.hasNext();){var n=t.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Hr.prototype.collectBoundaryTouchEdge=function(e,t,n){var r=e.getLabel();return e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult()?null:(te.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),void(ki.isResultOfOp(r,t)&&t===ki.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))))},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var Xr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Ee;var e=arguments[0],t=arguments[1];this._op=e,this._geometryFactory=t};Xr.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){var n=this._geometryFactory.createPoint(t);this._resultPointList.add(n)}},Xr.prototype.extractNonCoveredResultNodes=function(e){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||e===ki.INTERSECTION)){var r=n.getLabel();ki.isResultOfOp(r,e)&&this.filterCoveredNodeToPoint(n)}}},Xr.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var Wr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Wr.prototype.transformPoint=function(e,t){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))},Wr.prototype.transformPolygon=function(e,t){var n=!0,r=this.transformLinearRing(e.getExteriorRing(),e);null!==r&&r instanceof tt&&!r.isEmpty()||(n=!1);for(var i=new Ee,o=0;o<e.getNumInteriorRing();o++){var a=this.transformLinearRing(e.getInteriorRingN(o),e);null===a||a.isEmpty()||(a instanceof tt||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new Ee;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Wr.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)},Wr.prototype.getInputGeometry=function(){return this._inputGeom},Wr.prototype.transformMultiLineString=function(e,t){for(var n=new Ee,r=0;r<e.getNumGeometries();r++){var i=this.transformLineString(e.getGeometryN(r),e);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Wr.prototype.transformCoordinates=function(e,t){return this.copy(e)},Wr.prototype.transformLineString=function(e,t){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))},Wr.prototype.transformMultiPoint=function(e,t){for(var n=new Ee,r=0;r<e.getNumGeometries();r++){var i=this.transformPoint(e.getGeometryN(r),e);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Wr.prototype.transformMultiPolygon=function(e,t){for(var n=new Ee,r=0;r<e.getNumGeometries();r++){var i=this.transformPolygon(e.getGeometryN(r),e);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Wr.prototype.copy=function(e){return e.copy()},Wr.prototype.transformGeometryCollection=function(e,t){for(var n=new Ee,r=0;r<e.getNumGeometries();r++){var i=this.transform(e.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(yt.toGeometryArray(n)):this._factory.buildGeometry(n)},Wr.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof Je)return this.transformPoint(e,null);if(e instanceof et)return this.transformMultiPoint(e,null);if(e instanceof tt)return this.transformLinearRing(e,null);if(e instanceof Ye)return this.transformLineString(e,null);if(e instanceof qe)return this.transformMultiLineString(e,null);if(e instanceof Qe)return this.transformPolygon(e,null);if(e instanceof nt)return this.transformMultiPolygon(e,null);if(e instanceof je)return this.transformGeometryCollection(e,null);throw new v("Unknown Geometry subtype: "+e.getClass().getName())},Wr.prototype.transformLinearRing=function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var Yr=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Ye&&"number"==typeof arguments[1]){var t=arguments[1];e.call(this,arguments[0].getCoordinates(),t)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=e.isClosed(n),this._snapTolerance=r}};Yr.prototype.snapVertices=function(e,t){for(var n=this._isClosed?e.size()-1:e.size(),r=0;r<n;r++){var i=e.get(r),o=this.findSnapForVertex(i,t);null!==o&&(e.set(r,new S(o)),0===r&&this._isClosed&&e.set(e.size()-1,new S(o)))}},Yr.prototype.findSnapForVertex=function(e,t){for(var n=0;n<t.length;n++){if(e.equals2D(t[n]))return null;if(e.distance(t[n])<this._snapTolerance)return t[n]}return null},Yr.prototype.snapTo=function(e){var t=new Te(this._srcPts);return this.snapVertices(t,e),this.snapSegments(t,e),t.toCoordinateArray()},Yr.prototype.snapSegments=function(e,t){if(0===t.length)return null;var n=t.length;t[0].equals2D(t[t.length-1])&&(n=t.length-1);for(var r=0;r<n;r++){var i=t[r],o=this.findSegmentIndexToSnap(i,e);o>=0&&e.add(o+1,new S(i),!1)}},Yr.prototype.findSegmentIndexToSnap=function(e,t){for(var n=_.MAX_VALUE,r=-1,i=0;i<t.size()-1;i++){if(this._seg.p0=t.get(i),this._seg.p1=t.get(i+1),this._seg.p0.equals2D(e)||this._seg.p1.equals2D(e)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(e);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Yr.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr},Yr.isClosed=function(e){return!(e.length<=1)&&e[0].equals2D(e[e.length-1])};var Zr=function(e){this._srcGeom=e||null},Jr={SNAP_PRECISION_FACTOR:{configurable:!0}};Zr.prototype.snapTo=function(e,t){var n=this.extractTargetCoordinates(e);return new Kr(t,n).transform(this._srcGeom)},Zr.prototype.snapToSelf=function(e,t){var n=this.extractTargetCoordinates(this._srcGeom),r=new Kr(e,n,!0).transform(this._srcGeom),i=r;return t&&M(i,Ke)&&(i=r.buffer(0)),i},Zr.prototype.computeSnapTolerance=function(e){return this.computeMinimumSegmentLength(e)/10},Zr.prototype.extractTargetCoordinates=function(e){for(var t=new p,n=e.getCoordinates(),r=0;r<n.length;r++)t.add(n[r]);return t.toArray(new Array(0).fill(null))},Zr.prototype.computeMinimumSegmentLength=function(e){for(var t=_.MAX_VALUE,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);r<t&&(t=r)}return t},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.snap=function(e,t,n){var r=new Array(2).fill(null),i=new Zr(e);r[0]=i.snapTo(t,n);var o=new Zr(t);return r[1]=o.snapTo(r[0],n),r},Zr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var e=arguments[0],t=Zr.computeSizeBasedSnapTolerance(e),n=e.getPrecisionModel();if(n.getType()===pt.FIXED){var r=1/n.getScale()*2/1.415;r>t&&(t=r)}return t}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Zr.computeOverlaySnapTolerance(i),Zr.computeOverlaySnapTolerance(o))}},Zr.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal();return Math.min(t.getHeight(),t.getWidth())*Zr.SNAP_PRECISION_FACTOR},Zr.snapToSelf=function(e,t,n){return new Zr(e).snapToSelf(t,n)},Jr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Zr,Jr);var Kr=function(e){function t(t,n,r){e.call(this),this._snapTolerance=t||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(e,t){var n=new Yr(e,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(t)},t.prototype.transformCoordinates=function(e,t){var n=e.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Wr),Qr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qr.prototype.getCommon=function(){return _.longBitsToDouble(this._commonBits)},Qr.prototype.add=function(e){var t=_.doubleToLongBits(e);return this._isFirst?(this._commonBits=t,this._commonSignExp=Qr.signExpBits(this._commonBits),this._isFirst=!1,null):Qr.signExpBits(t)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qr.numCommonMostSigMantissaBits(this._commonBits,t),void(this._commonBits=Qr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qr.prototype.toString=function(){if(1===arguments.length){var e=arguments[0],t=_.longBitsToDouble(e),n="0000000000000000000000000000000000000000000000000000000000000000"+_.toBinaryString(e),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+t+" ]"}},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.getBit=function(e,t){return 0!=(e&1<<t)?1:0},Qr.signExpBits=function(e){return e>>52},Qr.zeroLowerBits=function(e,t){return e&~((1<<t)-1)},Qr.numCommonMostSigMantissaBits=function(e,t){for(var n=0,r=52;r>=0;r--){if(Qr.getBit(e,r)!==Qr.getBit(t,r))return n;n++}return 52};var ei=function(){this._commonCoord=null,this._ccFilter=new ni},ti={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ei.prototype.addCommonBits=function(e){var t=new ri(this._commonCoord);e.apply(t),e.geometryChanged()},ei.prototype.removeCommonBits=function(e){if(0===this._commonCoord.x&&0===this._commonCoord.y)return e;var t=new S(this._commonCoord);t.x=-t.x,t.y=-t.y;var n=new ri(t);return e.apply(n),e.geometryChanged(),e},ei.prototype.getCommonCoordinate=function(){return this._commonCoord},ei.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ei.prototype.interfaces_=function(){return[]},ei.prototype.getClass=function(){return ei},ti.CommonCoordinateFilter.get=function(){return ni},ti.Translater.get=function(){return ri},Object.defineProperties(ei,ti);var ni=function(){this._commonBitsX=new Qr,this._commonBitsY=new Qr};ni.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)},ni.prototype.getCommonCoordinate=function(){return new S(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[pe]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var e=arguments[0];this.trans=e};ri.prototype.filter=function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,r=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[Ve]},ri.prototype.getClass=function(){return ri};var ii=function(e,t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};ii.prototype.selfSnap=function(e){return new Zr(e).snapTo(e,this._snapTolerance)},ii.prototype.removeCommonBits=function(e){this._cbr=new ei,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t},ii.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e},ii.prototype.getResultGeometry=function(e){var t=this.snap(this._geom),n=ki.overlayOp(t[0],t[1],e);return this.prepareResult(n)},ii.prototype.checkValid=function(e){e.isValid()||G.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Zr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(e){var t=this.removeCommonBits(e);return Zr.snap(t[0],t[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(e,t,n){return new ii(e,t).getResultGeometry(n)},ii.union=function(e,t){return ii.overlayOp(e,t,ki.UNION)},ii.intersection=function(e,t){return ii.overlayOp(e,t,ki.INTERSECTION)},ii.symDifference=function(e,t){return ii.overlayOp(e,t,ki.SYMDIFFERENCE)},ii.difference=function(e,t){return ii.overlayOp(e,t,ki.DIFFERENCE)};var oi=function(e,t){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t};oi.prototype.getResultGeometry=function(e){var t=null,n=!1,r=null;try{t=ki.overlayOp(this._geom[0],this._geom[1],e),n=!0}catch(e){if(!(e instanceof Q))throw e;r=e}if(!n)try{t=ii.overlayOp(this._geom[0],this._geom[1],e)}catch(e){throw e instanceof Q?r:e}return t},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(e,t,n){return new oi(e,t).getResultGeometry(n)},oi.union=function(e,t){return oi.overlayOp(e,t,ki.UNION)},oi.intersection=function(e,t){return oi.overlayOp(e,t,ki.INTERSECTION)},oi.symDifference=function(e,t){return oi.overlayOp(e,t,ki.SYMDIFFERENCE)},oi.difference=function(e,t){return oi.overlayOp(e,t,ki.DIFFERENCE)};var ai=function(){this.mce=null,this.chainIndex=null;var e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t};ai.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai};var si=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var t=arguments[0],n=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=e.INSERT,this._label=r,this._xValue=i,this._obj=o}},ui={INSERT:{configurable:!0},DELETE:{configurable:!0}};si.prototype.isDelete=function(){return this._eventType===si.DELETE},si.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e},si.prototype.getObject=function(){return this._obj},si.prototype.compareTo=function(e){var t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},si.prototype.getInsertEvent=function(){return this._insertEvent},si.prototype.isInsert=function(){return this._eventType===si.INSERT},si.prototype.isSameLabel=function(e){return null!==this._label&&this._label===e._label},si.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},si.prototype.interfaces_=function(){return[x]},si.prototype.getClass=function(){return si},ui.INSERT.get=function(){return 1},ui.DELETE.get=function(){return 2},Object.defineProperties(si,ui);var li=function(){};li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li};var ci=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=n};ci.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&1===this._li.getIntersectionNum()){if(ci.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.getNumPoints()-1;if(0===t&&r===i||0===r&&t===i)return!0}}return!1},ci.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ci.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e},ci.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ci.prototype.isBoundaryPointInternal=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next().getCoordinate();if(e.isIntersection(r))return!0}return!1},ci.prototype.hasProperIntersection=function(){return this._hasProper},ci.prototype.hasIntersection=function(){return this._hasIntersection},ci.prototype.isDone=function(){return this._isDone},ci.prototype.isBoundaryPoint=function(e,t){return null!==t&&(!!this.isBoundaryPointInternal(e,t[0])||!!this.isBoundaryPointInternal(e,t[1]))},ci.prototype.setBoundaryNodes=function(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t},ci.prototype.addIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.isAdjacentSegments=function(e,t){return 1===Math.abs(e-t)};var hi=function(e){function t(){e.call(this),this.events=new Ee,this.nOverlaps=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){Qt.sort(this.events);for(var e=0;e<this.events.size();e++){var t=this.events.get(e);t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(e)}},t.prototype.computeIntersections=function(){if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var t=0;t<this.events.size();t++){var n=this.events.get(t);if(n.isInsert()&&this.processOverlaps(t,n.getDeleteEventIndex(),n,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ci&&M(arguments[0],we)&&M(arguments[1],we)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&M(arguments[0],we)&&arguments[1]instanceof ci){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},t.prototype.addEdge=function(e,t){for(var n=e.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ai(n,i),a=new si(t,n.getMinX(i),o);this.events.add(a),this.events.add(new si(n.getMaxX(i),a))}},t.prototype.processOverlaps=function(e,t,n,r){for(var i=n.getObject(),o=e;o<t;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},t.prototype.addEdges=function(){if(1===arguments.length)for(var e=arguments[0].iterator();e.hasNext();){var t=e.next();this.addEdge(t,t)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(li),fi=function(){this._min=_.POSITIVE_INFINITY,this._max=_.NEGATIVE_INFINITY},pi={NodeComparator:{configurable:!0}};fi.prototype.getMin=function(){return this._min},fi.prototype.intersects=function(e,t){return!(this._min>t||this._max<e)},fi.prototype.getMax=function(){return this._max},fi.prototype.toString=function(){return K.toLineString(new S(this._min,0),new S(this._max,0))},fi.prototype.interfaces_=function(){return[]},fi.prototype.getClass=function(){return fi},pi.NodeComparator.get=function(){return di},Object.defineProperties(fi,pi);var di=function(){};di.prototype.compare=function(e,t){var n=e,r=t,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[E]},di.prototype.getClass=function(){return di};var gi=function(e){function t(){e.call(this),this._item=null;var t=arguments[0],n=arguments[1],r=arguments[2];this._min=t,this._max=n,this._item=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.query=function(e,t,n){if(!this.intersects(e,t))return null;n.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(fi),mi=function(e){function t(){e.call(this),this._node1=null,this._node2=null;var t=arguments[0],n=arguments[1];this._node1=t,this._node2=n,this.buildExtent(this._node1,this._node2)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(e,t){this._min=Math.min(e._min,t._min),this._max=Math.max(e._max,t._max)},t.prototype.query=function(e,t,n){if(!this.intersects(e,t))return null;null!==this._node1&&this._node1.query(e,t,n),null!==this._node2&&this._node2.query(e,t,n)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(fi),yi=function(){this._leaves=new Ee,this._root=null,this._level=0};yi.prototype.buildTree=function(){Qt.sort(this._leaves,new fi.NodeComparator);for(var e=this._leaves,t=null,n=new Ee;;){if(this.buildLevel(e,n),1===n.size())return n.get(0);t=e,e=n,n=t}},yi.prototype.insert=function(e,t,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gi(e,t,n))},yi.prototype.query=function(e,t,n){this.init(),this._root.query(e,t,n)},yi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},yi.prototype.printNode=function(e){G.out.println(K.toLineString(new S(e._min,this._level),new S(e._max,this._level)))},yi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},yi.prototype.buildLevel=function(e,t){this._level++,t.clear();for(var n=0;n<e.size();n+=2){var r=e.get(n);if(null===(n+1<e.size()?e.get(n):null))t.add(r);else{var i=new mi(e.get(n),e.get(n+1));t.add(i)}}},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi};var vi=function(){this._items=new Ee};vi.prototype.visitItem=function(e){this._items.add(e)},vi.prototype.getItems=function(){return this._items},vi.prototype.interfaces_=function(){return[Yt]},vi.prototype.getClass=function(){return vi};var _i=function(){this._index=null;var e=arguments[0];if(!M(e,Ke))throw new v("Argument must be Polygonal");this._index=new wi(e)},bi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_i.prototype.locate=function(e){var t=new ae(e),n=new xi(t);return this._index.query(e.y,e.y,n),t.getLocation()},_i.prototype.interfaces_=function(){return[Un]},_i.prototype.getClass=function(){return _i},bi.SegmentVisitor.get=function(){return xi},bi.IntervalIndexedGeometry.get=function(){return wi},Object.defineProperties(_i,bi);var xi=function(){this._counter=null;var e=arguments[0];this._counter=e};xi.prototype.visitItem=function(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))},xi.prototype.interfaces_=function(){return[Yt]},xi.prototype.getClass=function(){return xi};var wi=function(){this._index=new yi;var e=arguments[0];this.init(e)};wi.prototype.init=function(e){for(var t=Sr.getLines(e).iterator();t.hasNext();){var n=t.next().getCoordinates();this.addLine(n)}},wi.prototype.addLine=function(e){for(var t=1;t<e.length;t++){var n=new gn(e[t-1],e[t]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wi.prototype.query=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],n=new vi;return this._index.query(e,t,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var Ei=function(e){function t(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new ft,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Tr,2===arguments.length){var t=arguments[0],n=arguments[1],r=de.OGC_SFS_BOUNDARY_RULE;this._argIndex=t,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(e,n){var r=this._nodes.addNode(n).getLabel(),i=1;I.NONE,r.getLocation(e,Tt.ON)===I.BOUNDARY&&i++;var o=t.determineBoundary(this._boundaryNodeRule,i);r.setLocation(e,o)},t.prototype.computeSelfNodes=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];return this.computeSelfNodes(e,t,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new ci(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof tt||this._parentGeom instanceof Qe||this._parentGeom instanceof nt,s=n||!a;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},t.prototype.computeSplitEdges=function(e){for(var t=this._edges.iterator();t.hasNext();)t.next().eiList.addSplitEdges(e)},t.prototype.computeEdgeIntersections=function(e,t,n){var r=new ci(t,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),e.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,e._edges,r),r},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){if(arguments[0]instanceof Je){var e=arguments[0].getCoordinate();this.insertPoint(this._argIndex,e,I.INTERIOR)}else if(arguments[0]instanceof S){var t=arguments[0];this.insertPoint(this._argIndex,t,I.INTERIOR)}},t.prototype.addPolygon=function(e){this.addPolygonRing(e.getExteriorRing(),I.EXTERIOR,I.INTERIOR);for(var t=0;t<e.getNumInteriorRing();t++){var n=e.getInteriorRingN(t);this.addPolygonRing(n,I.INTERIOR,I.EXTERIOR)}},t.prototype.addEdge=function(e){this.insertEdge(e);var t=e.getCoordinates();this.insertPoint(this._argIndex,t[0],I.BOUNDARY),this.insertPoint(this._argIndex,t[t.length-1],I.BOUNDARY)},t.prototype.addLineString=function(e){var t=ke.removeRepeatedPoints(e.getCoordinates());if(t.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=t[0],null;var n=new nr(t,new Nt(this._argIndex,I.INTERIOR));this._lineEdgeMap.put(e,n),this.insertEdge(n),te.isTrue(t.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,t[0]),this.insertBoundaryPoint(this._argIndex,t[t.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var e=this.getBoundaryNodes(),t=new Array(e.size()).fill(null),n=0,r=e.iterator();r.hasNext();){var i=r.next();t[n++]=i.getCoordinate().copy()}return t},t.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(e,t,n){if(this.isBoundaryNode(e,t))return null;n===I.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(e,t):this.insertPoint(e,t,n)},t.prototype.addPolygonRing=function(e,t,n){if(e.isEmpty())return null;var r=ke.removeRepeatedPoints(e.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=t,o=n;se.isCCW(r)&&(i=n,o=t);var a=new nr(r,new Nt(this._argIndex,I.BOUNDARY,i,o));this._lineEdgeMap.put(e,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],I.BOUNDARY)},t.prototype.insertPoint=function(e,t,n){var r=this._nodes.addNode(t),i=r.getLabel();null===i?r._label=new Nt(e,n):i.setLocation(e,n)},t.prototype.createEdgeSetIntersector=function(){return new hi},t.prototype.addSelfIntersectionNodes=function(e){for(var t=this._edges.iterator();t.hasNext();)for(var n=t.next(),r=n.getLabel().getLocation(e),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(e,o.coord,r)}},t.prototype.add=function(){if(1!==arguments.length)return e.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof nt&&(this._useBoundaryDeterminationRule=!1),t instanceof Qe)this.addPolygon(t);else if(t instanceof Ye)this.addLineString(t);else if(t instanceof Je)this.addPoint(t);else if(t instanceof et)this.addCollection(t);else if(t instanceof qe)this.addCollection(t);else if(t instanceof nt)this.addCollection(t);else{if(!(t instanceof je))throw new Error(t.getClass().getName());this.addCollection(t)}},t.prototype.addCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}},t.prototype.locate=function(e){return M(this._parentGeom,Ke)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _i(this._parentGeom)),this._areaPtLocator.locate(e)):this._ptLocator.locate(e,this._parentGeom)},t.prototype.findEdge=function(){if(1===arguments.length){var t=arguments[0];return this._lineEdgeMap.get(t)}return e.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(e,t){return e.isInBoundary(t)?I.BOUNDARY:I.INTERIOR},t}(Gt),Si=function(){if(this._li=new ie,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ei(0,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1],r=de.OGC_SFS_BOUNDARY_RULE;t.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ei(0,t,r),this._arg[1]=new Ei(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ei(0,i,a),this._arg[1]=new Ei(1,o,a)}};Si.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()},Si.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si};var Ti=function(){};Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti},Ti.map=function(){if(arguments[0]instanceof ce&&M(arguments[1],Ti.MapOp)){for(var e=arguments[0],t=arguments[1],n=new Ee,r=0;r<e.getNumGeometries();r++){var i=t.map(e.getGeometryN(r));null!==i&&n.add(i)}return e.getFactory().buildGeometry(n)}if(M(arguments[0],be)&&M(arguments[1],Ti.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Ee,u=o.iterator();u.hasNext();){var l=u.next(),c=a.map(l);null!==c&&s.add(c)}return s}},Ti.MapOp=function(){};var ki=function(e){function t(){var t=arguments[0],n=arguments[1];e.call(this,t,n),this._ptLocator=new Tr,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xn,this._resultPolyList=new Ee,this._resultLineList=new Ee,this._resultPointList=new Ee,this._graph=new Gt(new $n),this._geomFact=t.getFactory()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(null!==t){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new Nt(e.getLabel())).flip();var i=t.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(e)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var t=e.next(),n=t.getSym();t.isInResult()&&n.isInResult()&&(t.setInResult(!1),n.setInResult(!1))}},t.prototype.isCoveredByLA=function(e){return!!this.isCovered(e,this._resultLineList)||!!this.isCovered(e,this._resultPolyList)},t.prototype.computeGeometry=function(e,n,r,i){var o=new Ee;return o.addAll(e),o.addAll(n),o.addAll(r),o.isEmpty()?t.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},t.prototype.mergeSymLabels=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();)e.next().getEdges().mergeSymLabels()},t.prototype.isCovered=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(e,r)!==I.EXTERIOR)return!0}return!1},t.prototype.replaceCollapsedEdges=function(){for(var e=new Ee,t=this._edgeList.iterator();t.hasNext();){var n=t.next();n.isCollapsed()&&(t.remove(),e.add(n.getCollapsedEdge()))}this._edgeList.addAll(e)},t.prototype.updateNodeLabelling=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getEdges().getLabel();t.getLabel().merge(n)}},t.prototype.getResultGeometry=function(e){return this.computeOverlay(e),this._resultGeom},t.prototype.insertUniqueEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.insertUniqueEdge(n)}},t.prototype.computeOverlay=function(e){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var t=new Ee;this._arg[0].computeSplitEdges(t),this._arg[1].computeSplitEdges(t),this.insertUniqueEdges(t),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Gr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(e),this.cancelDuplicateResultEdges();var n=new $t(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Hr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(e);var i=new Xr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(e),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,e)},t.prototype.labelIncompleteNode=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._arg[t].getGeometry());e.getLabel().setLocation(t,n)},t.prototype.copyPoints=function(e){for(var t=this._arg[e].getNodeIterator();t.hasNext();){var n=t.next();this._graph.addNode(n.getCoordinate()).setLabel(e,n.getLabel().getLocation(e))}},t.prototype.findResultAreaEdges=function(e){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&t.isResultOfOp(i.getLocation(0,Tt.RIGHT),i.getLocation(1,Tt.RIGHT),e)&&r.setInResult(!0)}},t.prototype.computeLabelsFromDepths=function(){for(var e=this._edgeList.iterator();e.hasNext();){var t=e.next(),n=t.getLabel(),r=t.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(te.isTrue(!r.isNull(i,Tt.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Tt.LEFT,r.getLocation(i,Tt.LEFT)),te.isTrue(!r.isNull(i,Tt.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Tt.RIGHT,r.getLocation(i,Tt.RIGHT))))}}},t.prototype.computeLabelling=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();)e.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getLabel();t.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(t,0):this.labelIncompleteNode(t,1)),t.getEdges().updateLabelling(n)}},t.prototype.isCoveredByA=function(e){return!!this.isCovered(e,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Si);ki.overlayOp=function(e,t,n){return new ki(e,t).getResultGeometry(n)},ki.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return ki.createEmptyResult(ki.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var n=t;return $r.map(e,{interfaces_:function(){return[Ti.MapOp]},map:function(e){return e.intersection(n)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),oi.overlayOp(e,t,ki.INTERSECTION)},ki.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return ki.createEmptyResult(ki.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),oi.overlayOp(e,t,ki.SYMDIFFERENCE)},ki.resultDimension=function(e,t,n){var r=t.getDimension(),i=n.getDimension(),o=-1;switch(e){case ki.INTERSECTION:o=Math.min(r,i);break;case ki.UNION:o=Math.max(r,i);break;case ki.DIFFERENCE:o=r;break;case ki.SYMDIFFERENCE:o=Math.max(r,i)}return o},ki.createEmptyResult=function(e,t,n,r){var i=null;switch(ki.resultDimension(e,t,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},ki.difference=function(e,t){return e.isEmpty()?ki.createEmptyResult(ki.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),oi.overlayOp(e,t,ki.DIFFERENCE))},ki.isResultOfOp=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],n=e.getLocation(0),r=e.getLocation(1);return ki.isResultOfOp(n,r,t)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===I.BOUNDARY&&(i=I.INTERIOR),o===I.BOUNDARY&&(o=I.INTERIOR),a){case ki.INTERSECTION:return i===I.INTERIOR&&o===I.INTERIOR;case ki.UNION:return i===I.INTERIOR||o===I.INTERIOR;case ki.DIFFERENCE:return i===I.INTERIOR&&o!==I.INTERIOR;case ki.SYMDIFFERENCE:return i===I.INTERIOR&&o!==I.INTERIOR||i!==I.INTERIOR&&o===I.INTERIOR}return!1}},ki.INTERSECTION=1,ki.UNION=2,ki.DIFFERENCE=3,ki.SYMDIFFERENCE=4;var Ci=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Tr,this._seg=new gn;var e=arguments[0],t=arguments[1];this._g=e,this._boundaryDistanceTolerance=t,this._linework=this.extractLinework(e)};Ci.prototype.isWithinToleranceOfBoundary=function(e){for(var t=0;t<this._linework.getNumGeometries();t++)for(var n=this._linework.getGeometryN(t).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(e)<=this._boundaryDistanceTolerance)return!0;return!1},Ci.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?I.BOUNDARY:this._ptLocator.locate(e,this._g)},Ci.prototype.extractLinework=function(e){var t=new Ii;e.apply(t);var n=t.getLinework(),r=yt.toLineStringArray(n);return e.getFactory().createMultiLineString(r)},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci};var Ii=function(){this._linework=null,this._linework=new Ee};Ii.prototype.getLinework=function(){return this._linework},Ii.prototype.filter=function(e){if(e instanceof Qe){var t=e;this._linework.add(t.getExteriorRing());for(var n=0;n<t.getNumInteriorRing();n++)this._linework.add(t.getInteriorRingN(n))}},Ii.prototype.interfaces_=function(){return[Ue]},Ii.prototype.getClass=function(){return Ii};var Ai=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var e=arguments[0];this._g=e};Ai.prototype.extractPoints=function(e,t,n){for(var r=e.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],t,n)},Ai.prototype.setSidesToGenerate=function(e,t){this._doLeft=e,this._doRight=t},Ai.prototype.getPoints=function(e){for(var t=new Ee,n=Sr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,e,t)}return t},Ai.prototype.computeOffsetPoints=function(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,l=(t.x+e.x)/2,c=(t.y+e.y)/2;if(this._doLeft){var h=new S(l-u,c+s);r.add(h)}if(this._doRight){var f=new S(l+u,c-s);r.add(f)}},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai};var Mi=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new Ee;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,n),this._geom=[t,n,r],this._locFinder=[new Ci(this._geom[0],this._boundaryDistanceTolerance),new Ci(this._geom[1],this._boundaryDistanceTolerance),new Ci(this._geom[2],this._boundaryDistanceTolerance)]},Li={TOLERANCE:{configurable:!0}};Mi.prototype.reportResult=function(e,t,n){G.out.println("Overlay result invalid - A:"+I.toLocationSymbol(t[0])+" B:"+I.toLocationSymbol(t[1])+" expected:"+(n?"i":"e")+" actual:"+I.toLocationSymbol(t[2]))},Mi.prototype.isValid=function(e){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(e)},Mi.prototype.checkValid=function(){if(1===arguments.length){for(var e=arguments[0],t=0;t<this._testCoords.size();t++){var n=this._testCoords.get(t);if(!this.checkValid(e,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Mi.hasLocation(this._location,I.BOUNDARY)||this.isValidResult(r,this._location)}},Mi.prototype.addTestPts=function(e){var t=new Ai(e);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))},Mi.prototype.isValidResult=function(e,t){var n=ki.isResultOfOp(t[0],t[1],e),r=!(n^t[2]===I.INTERIOR);return r||this.reportResult(e,t,n),r},Mi.prototype.getInvalidLocation=function(){return this._invalidLocation},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.hasLocation=function(e,t){for(var n=0;n<3;n++)if(e[n]===t)return!0;return!1},Mi.computeBoundaryDistanceTolerance=function(e,t){return Math.min(Zr.computeSizeBasedSnapTolerance(e),Zr.computeSizeBasedSnapTolerance(t))},Mi.isValid=function(e,t,n,r){return new Mi(e,t,r).isValid(n)},Li.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Mi,Li);var Ni=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};Ni.prototype.extractElements=function(e,t){if(null===e)return null;for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);this._skipEmpty&&r.isEmpty()||t.add(r)}},Ni.prototype.combine=function(){for(var e=new Ee,t=this._inputGeoms.iterator();t.hasNext();){var n=t.next();this.extractElements(n,e)}return 0===e.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(e)},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni},Ni.combine=function(){if(1===arguments.length)return new Ni(arguments[0]).combine();if(2===arguments.length){var e=arguments[0],t=arguments[1];return new Ni(Ni.createList(e,t)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Ni(Ni.createList(n,r,i)).combine()}},Ni.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()},Ni.createList=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],n=new Ee;return n.add(e),n.add(t),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new Ee;return a.add(r),a.add(i),a.add(o),a}};var Pi=function(){this._inputPolys=null,this._geomFactory=null;var e=arguments[0];this._inputPolys=e,null===this._inputPolys&&(this._inputPolys=new Ee)},Oi={STRTREE_NODE_CAPACITY:{configurable:!0}};Pi.prototype.reduceToGeometries=function(e){for(var t=new Ee,n=e.iterator();n.hasNext();){var r=n.next(),i=null;M(r,we)?i=this.unionTree(r):r instanceof ce&&(i=r),t.add(i)}return t},Pi.prototype.extractByEnvelope=function(e,t,n){for(var r=new Ee,i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);o.getEnvelopeInternal().intersects(e)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Pi.prototype.unionOptimized=function(e,t){var n=e.getEnvelopeInternal(),r=t.getEnvelopeInternal();if(!n.intersects(r))return Ni.combine(e,t);if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(e,t,i)},Pi.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new an(Pi.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();){var n=t.next();e.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=e.itemsTree();return this.unionTree(r)},Pi.prototype.binaryUnion=function(){if(1===arguments.length){var e=arguments[0];return this.binaryUnion(e,0,e.size())}if(3===arguments.length){var t=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Pi.getGeometry(t,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Pi.getGeometry(t,n),Pi.getGeometry(t,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(t,n,o),s=this.binaryUnion(t,o,r);return this.unionSafe(a,s)}},Pi.prototype.repeatedUnion=function(e){for(var t=null,n=e.iterator();n.hasNext();){var r=n.next();t=null===t?r.copy():t.union(r)}return t},Pi.prototype.unionSafe=function(e,t){return null===e&&null===t?null:null===e?t.copy():null===t?e.copy():this.unionOptimized(e,t)},Pi.prototype.unionActual=function(e,t){return Pi.restrictToPolygons(e.union(t))},Pi.prototype.unionTree=function(e){var t=this.reduceToGeometries(e);return this.binaryUnion(t)},Pi.prototype.unionUsingEnvelopeIntersection=function(e,t,n){var r=new Ee,i=this.extractByEnvelope(n,e,r),o=this.extractByEnvelope(n,t,r),a=this.unionActual(i,o);return r.add(a),Ni.combine(r)},Pi.prototype.bufferUnion=function(){if(1===arguments.length){var e=arguments[0];return e.get(0).getFactory().buildGeometry(e).buffer(0)}if(2===arguments.length){var t=arguments[0],n=arguments[1];return t.getFactory().createGeometryCollection([t,n]).buffer(0)}},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.restrictToPolygons=function(e){if(M(e,Ke))return e;var t=Er.getPolygons(e);return 1===t.size()?t.get(0):e.getFactory().createMultiPolygon(yt.toPolygonArray(t))},Pi.getGeometry=function(e,t){return t>=e.size()?null:e.get(t)},Pi.union=function(e){return new Pi(e).union()},Oi.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Pi,Oi);var Ri=function(){};Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.union=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return ki.createEmptyResult(ki.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),oi.overlayOp(e,t,ki.UNION)},e.GeoJSONReader=Et,e.GeoJSONWriter=St,e.OverlayOp=ki,e.UnionOp=Ri,e.BufferOp=gr,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){e.exports=n(124)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){if(this._items={},this._nums={},this._length=e?e.length:0,e)for(var t=0,n=e.length;t<n;t++)this.add(e[t]),void 0!==e[t]&&("string"===typeof e[t]?this._items[e[t]]=t:this._nums[e[t]]=t)}r.prototype.add=function(e){return this.has(e)||(this._length++,"string"===typeof e?this._items[e]=this._length:this._nums[e]=this._length),this},r.prototype.delete=function(e){return!1===this.has(e)||(this._length--,delete this._items[e],delete this._nums[e]),this},r.prototype.has=function(e){return("string"===typeof e||"number"===typeof e)&&(void 0!==this._items[e]||void 0!==this._nums[e])},r.prototype.values=function(){var e=this,t=[];return Object.keys(this._items).forEach((function(n){t.push({k:n,v:e._items[n]})})),Object.keys(this._nums).forEach((function(n){t.push({k:JSON.parse(n),v:e._nums[n]})})),t.sort((function(e,t){return e.v-t.v})).map((function(e){return e.k}))},r.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this},t.a=r},function(e,t){var n=e.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),e<=0)return"0";for(var r=Math.log(Math.pow(2,e))/Math.log(t),i=2;r===1/0;i*=2)r=Math.log(Math.pow(2,e/i))/Math.log(t)*i;var o=r-Math.floor(r),a="";for(i=0;i<Math.floor(r);i++){a=Math.floor(Math.random()*t).toString(t)+a}if(o){var s=Math.pow(t,o);a=Math.floor(Math.random()*s).toString(t)+a}var u=parseInt(a,t);return u!==1/0&&u>=Math.pow(2,e)?n(e,t):a};n.rack=function(e,t,r){var i=function(i){var a=0;do{if(a++>10){if(!r)throw new Error("too many ID collisions, use more bits");e+=r}var s=n(e,t)}while(Object.hasOwnProperty.call(o,s));return o[s]=i,s},o=i.hats={};return i.get=function(e){return i.hats[e]},i.set=function(e,t){return i.hats[e]=t,i},i.bits=e||128,i.base=t||16,i}},function(e,t,n){"use strict";var r=n(0);t.a=function(e,t,n,i){return{type:r.k.FEATURE,properties:{meta:r.m.VERTEX,parent:e,coord_path:n,active:i?r.g.ACTIVE:r.g.INACTIVE},geometry:{type:r.k.POINT,coordinates:t}}}},function(e,t,n){var r,i,o;i=[n(2)],void 0===(o="function"===typeof(r=function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,u,"next",e)}function u(e){r(a,i,o,s,u,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){var r,i;!function(){var o={version:"3.5.10"},a=[].slice,s=function(e){return a.call(e)},u=this.document;function l(e){return e&&(e.ownerDocument||e.document||e).documentElement}function c(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(u)try{s(u.documentElement.childNodes)[0].nodeType}catch(hu){s=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),u)try{u.createElement("DIV").style.setProperty("opacity",0,"")}catch(fu){var h=this.Element.prototype,f=h.setAttribute,p=h.setAttributeNS,d=this.CSSStyleDeclaration.prototype,g=d.setProperty;h.setAttribute=function(e,t){f.call(this,e,t+"")},h.setAttributeNS=function(e,t,n){p.call(this,e,t,n+"")},d.setProperty=function(e,t,n){g.call(this,e,t+"",n)}}function m(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function y(e){return null===e?NaN:+e}function v(e){return!isNaN(e)}function _(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}o.ascending=m,o.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},o.min=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},o.max=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},o.extent=function(e,t){var n,r,i,o=-1,a=e.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=e[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=t.call(e,e[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t.call(e,e[o],o))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},o.sum=function(e,t){var n,r=0,i=e.length,o=-1;if(1===arguments.length)for(;++o<i;)v(n=+e[o])&&(r+=n);else for(;++o<i;)v(n=+t.call(e,e[o],o))&&(r+=n);return r},o.mean=function(e,t){var n,r=0,i=e.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)v(n=y(e[o]))?r+=n:--a;else for(;++o<i;)v(n=y(t.call(e,e[o],o)))?r+=n:--a;if(a)return r/a},o.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],o=n-r;return o?i+o*(e[r]-i):i},o.median=function(e,t){var n,r=[],i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)v(n=y(e[a]))&&r.push(n);else for(;++a<i;)v(n=y(t.call(e,e[a],a)))&&r.push(n);if(r.length)return o.quantile(r.sort(m),.5)},o.variance=function(e,t){var n,r,i=e.length,o=0,a=0,s=-1,u=0;if(1===arguments.length)for(;++s<i;)v(n=y(e[s]))&&(a+=(r=n-o)*(n-(o+=r/++u)));else for(;++s<i;)v(n=y(t.call(e,e[s],s)))&&(a+=(r=n-o)*(n-(o+=r/++u)));if(u>1)return a/(u-1)},o.deviation=function(){var e=o.variance.apply(this,arguments);return e?Math.sqrt(e):e};var b=_(m);function x(e){return e.length}o.bisectLeft=b.left,o.bisect=o.bisectRight=b.right,o.bisector=function(e){return _(1===e.length?function(t,n){return m(e(t),n)}:e)},o.shuffle=function(e,t,n){(o=arguments.length)<3&&(n=e.length,o<2&&(t=0));for(var r,i,o=n-t;o;)i=Math.random()*o--|0,r=e[o+t],e[o+t]=e[i+t],e[i+t]=r;return e},o.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},o.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],i=new Array(n<0?0:n);t<n;)i[t]=[r,r=e[++t]];return i},o.zip=function(){if(!(r=arguments.length))return[];for(var e=-1,t=o.min(arguments,x),n=new Array(t);++e<t;)for(var r,i=-1,a=n[e]=new Array(r);++i<r;)a[i]=arguments[i][e];return n},o.transpose=function(e){return o.zip.apply(o,e)},o.keys=function(e){var t=[];for(var n in e)t.push(n);return t},o.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},o.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},o.merge=function(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--a]=r[t];return n};var w=Math.abs;function E(e){for(var t=1;e*t%1;)t*=10;return t}function S(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function T(){this._=Object.create(null)}o.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var r,i=[],o=E(w(n)),a=-1;if(e*=o,t*=o,(n*=o)<0)for(;(r=e+n*++a)>t;)i.push(r/o);else for(;(r=e+n*++a)<t;)i.push(r/o);return i},o.map=function(e,t){var n=new T;if(e instanceof T)e.forEach((function(e,t){n.set(e,t)}));else if(Array.isArray(e)){var r,i=-1,o=e.length;if(1===arguments.length)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t.call(e,r=e[i],i),r)}else for(var a in e)n.set(a,e[a]);return n};function k(e){return"__proto__"===(e+="")||"\0"===e[0]?"\0"+e:e}function C(e){return"\0"===(e+="")[0]?e.slice(1):e}function I(e){return k(e)in this._}function A(e){return(e=k(e))in this._&&delete this._[e]}function M(){var e=[];for(var t in this._)e.push(C(t));return e}function L(){var e=0;for(var t in this._)++e;return e}function N(){for(var e in this._)return!1;return!0}function P(){this._=Object.create(null)}function O(e){return e}function R(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function D(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=F.length;n<r;++n){var i=F[n]+t;if(i in e)return i}}S(T,{has:I,get:function(e){return this._[k(e)]},set:function(e,t){return this._[k(e)]=t},remove:A,keys:M,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:C(t),value:this._[t]});return e},size:L,empty:N,forEach:function(e){for(var t in this._)e.call(this,C(t),this._[t])}}),o.nest=function(){var e,t,n={},r=[],i=[];function a(i,o,s){if(s>=r.length)return t?t.call(n,o):e?o.sort(e):o;for(var u,l,c,h,f=-1,p=o.length,d=r[s++],g=new T;++f<p;)(h=g.get(u=d(l=o[f])))?h.push(l):g.set(u,[l]);return i?(l=i(),c=function(e,t){l.set(e,a(i,t,s))}):(l={},c=function(e,t){l[e]=a(i,t,s)}),g.forEach(c),l}function s(e,t){if(t>=r.length)return e;var n=[],o=i[t++];return e.forEach((function(e,r){n.push({key:e,values:s(r,t)})})),o?n.sort((function(e,t){return o(e.key,t.key)})):n}return n.map=function(e,t){return a(t,e,0)},n.entries=function(e){return s(a(o.map,e,0),0)},n.key=function(e){return r.push(e),n},n.sortKeys=function(e){return i[r.length-1]=e,n},n.sortValues=function(t){return e=t,n},n.rollup=function(e){return t=e,n},n},o.set=function(e){var t=new P;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},S(P,{has:I,add:function(e){return this._[k(e+="")]=!0,e},remove:A,values:M,size:L,empty:N,forEach:function(e){for(var t in this._)e.call(this,C(t))}}),o.behavior={},o.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=R(e,t,t[n]);return e};var F=["webkit","ms","moz","Moz","o","O"];function z(){}function B(){}function U(e){var t=[],n=new T;function r(){for(var n,r=t,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return e}return r.on=function(r,i){var o,a=n.get(r);return arguments.length<2?a&&a.on:(a&&(a.on=null,t=t.slice(0,o=t.indexOf(a)).concat(t.slice(o+1)),n.remove(r)),i&&t.push(n.set(r,{on:i})),e)},r}function V(){o.event.preventDefault()}function j(){for(var e,t=o.event;e=t.sourceEvent;)t=e;return t}function q(e){for(var t=new B,n=0,r=arguments.length;++n<r;)t[arguments[n]]=U(t);return t.of=function(n,r){return function(i){try{var a=i.sourceEvent=o.event;i.target=e,o.event=i,t[i.type].apply(n,r)}finally{o.event=a}}},t}o.dispatch=function(){for(var e=new B,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=U(e);return e},B.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},o.event=null,o.requote=function(e){return e.replace(G,"\\$&")};var G=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,$={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function H(e){return $(e,Z),e}var X=function(e,t){return t.querySelector(e)},W=function(e,t){return t.querySelectorAll(e)},Y=function(e,t){var n=e.matches||e[D(e,"matchesSelector")];return(Y=function(e,t){return n.call(e,t)})(e,t)};"function"===typeof Sizzle&&(X=function(e,t){return Sizzle(e,t)[0]||null},W=Sizzle,Y=Sizzle.matchesSelector),o.selection=function(){return o.select(u.documentElement)};var Z=o.selection.prototype=[];function J(e){return"function"===typeof e?e:function(){return X(e,this)}}function K(e){return"function"===typeof e?e:function(){return W(e,this)}}Z.select=function(e){var t,n,r,i,o=[];e=J(e);for(var a=-1,s=this.length;++a<s;){o.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var u=-1,l=r.length;++u<l;)(i=r[u])?(t.push(n=e.call(i,i.__data__,u,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return H(o)},Z.selectAll=function(e){var t,n,r=[];e=K(e);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],u=-1,l=a.length;++u<l;)(n=a[u])&&(r.push(t=s(e.call(n,n.__data__,u,i))),t.parentNode=n);return H(r)};var Q={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ee(e,t){return e=o.ns.qualify(e),null==t?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"===typeof t?e.local?function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function te(e){return e.trim().replace(/\s+/g," ")}function ne(e){return new RegExp("(?:^|\\s+)"+o.requote(e)+"(?:\\s+|$)","g")}function re(e){return(e+"").trim().split(/^|\s+/)}function ie(e,t){var n=(e=re(e).map(oe)).length;return"function"===typeof t?function(){for(var r=-1,i=t.apply(this,arguments);++r<n;)e[r](this,i)}:function(){for(var r=-1;++r<n;)e[r](this,t)}}function oe(e){var t=ne(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",te(i+" "+e))):n.setAttribute("class",te(i.replace(t," ")))}}function ae(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"===typeof t?function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}:function(){this.style.setProperty(e,t,n)}}function se(e,t){return null==t?function(){delete this[e]}:"function"===typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function ue(e){return"function"===typeof e?e:(e=o.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n?t.createElementNS(n,e):t.createElement(e)}}function le(){var e=this.parentNode;e&&e.removeChild(this)}function ce(e){return{__data__:e}}function he(e){return function(){return Y(this,e)}}function fe(e){return arguments.length||(e=m),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function pe(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,o=e[n],a=0,s=o.length;a<s;a++)(i=o[a])&&t(i,a,n);return e}function de(e){return $(e,ge),e}o.ns={prefix:Q,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),Q.hasOwnProperty(n)?{space:Q[n],local:e}:e}},Z.attr=function(e,t){if(arguments.length<2){if("string"===typeof e){var n=this.node();return(e=o.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(ee(t,e[t]));return this}return this.each(ee(e,t))},Z.classed=function(e,t){if(arguments.length<2){if("string"===typeof e){var n=this.node(),r=(e=re(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!ne(e[i]).test(t))return!1;return!0}for(t in e)this.each(ie(t,e[t]));return this}return this.each(ie(e,t))},Z.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!==typeof e){for(n in r<2&&(t=""),e)this.each(ae(n,e[n],t));return this}if(r<2){var i=this.node();return c(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(ae(e,t,n))},Z.property=function(e,t){if(arguments.length<2){if("string"===typeof e)return this.node()[e];for(t in e)this.each(se(t,e[t]));return this}return this.each(se(e,t))},Z.text=function(e){return arguments.length?this.each("function"===typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Z.html=function(e){return arguments.length?this.each("function"===typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Z.append=function(e){return e=ue(e),this.select((function(){return this.appendChild(e.apply(this,arguments))}))},Z.insert=function(e,t){return e=ue(e),t=J(t),this.select((function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)}))},Z.remove=function(){return this.each(le)},Z.data=function(e,t){var n,r,i=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(n=this[0]).length);++i<o;)(r=n[i])&&(e[i]=r.__data__);return e}function a(e,n){var r,i,o,a=e.length,c=n.length,h=Math.min(a,c),f=new Array(c),p=new Array(c),d=new Array(a);if(t){var g,m=new T,y=new Array(a);for(r=-1;++r<a;)(i=e[r])&&(m.has(g=t.call(i,i.__data__,r))?d[r]=i:m.set(g,i),y[r]=g);for(r=-1;++r<c;)(i=m.get(g=t.call(n,o=n[r],r)))?!0!==i&&(f[r]=i,i.__data__=o):p[r]=ce(o),m.set(g,!0);for(r=-1;++r<a;)r in y&&!0!==m.get(y[r])&&(d[r]=e[r])}else{for(r=-1;++r<h;)i=e[r],o=n[r],i?(i.__data__=o,f[r]=i):p[r]=ce(o);for(;r<c;++r)p[r]=ce(n[r]);for(;r<a;++r)d[r]=e[r]}p.update=f,p.parentNode=f.parentNode=d.parentNode=e.parentNode,s.push(p),u.push(f),l.push(d)}var s=de([]),u=H([]),l=H([]);if("function"===typeof e)for(;++i<o;)a(n=this[i],e.call(n,n.parentNode.__data__,i));else for(;++i<o;)a(n=this[i],e);return u.enter=function(){return s},u.exit=function(){return l},u},Z.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Z.filter=function(e){var t,n,r,i=[];"function"!==typeof e&&(e=he(e));for(var o=0,a=this.length;o<a;o++){i.push(t=[]),t.parentNode=(n=this[o]).parentNode;for(var s=0,u=n.length;s<u;s++)(r=n[s])&&e.call(r,r.__data__,s,o)&&t.push(r)}return H(i)},Z.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Z.sort=function(e){e=fe.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Z.each=function(e){return pe(this,(function(t,n,r){e.call(t,t.__data__,n,r)}))},Z.call=function(e){var t=s(arguments);return e.apply(t[0]=this,t),this},Z.empty=function(){return!this.node()},Z.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},Z.size=function(){var e=0;return pe(this,(function(){++e})),e};var ge=[];function me(e){var t,n;return function(r,i,o){var a,s=e[o].update,u=s.length;for(o!=n&&(n=o,t=0),i>=t&&(t=i+1);!(a=s[t])&&++t<u;);return a}}function ye(e,t,n){var r="__on"+e,i=e.indexOf("."),a=_e;i>0&&(e=e.slice(0,i));var u=ve.get(e);function l(){var t=this[r];t&&(this.removeEventListener(e,t,t.$),delete this[r])}return u&&(e=u,a=be),i?t?function(){var i=a(t,s(arguments));l.call(this),this.addEventListener(e,this[r]=i,i.$=n),i._=t}:l:t?z:function(){var t,n=new RegExp("^__on([^.]+)"+o.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}}o.selection.enter=de,o.selection.enter.prototype=ge,ge.append=Z.append,ge.empty=Z.empty,ge.node=Z.node,ge.call=Z.call,ge.size=Z.size,ge.select=function(e){for(var t,n,r,i,o,a=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,a.push(t=[]),t.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(o=i[l])?(t.push(r[l]=n=e.call(i.parentNode,o.__data__,l,s)),n.__data__=o.__data__):t.push(null)}return H(a)},ge.insert=function(e,t){return arguments.length<2&&(t=me(this)),Z.insert.call(this,e,t)},o.select=function(e){var t;return"string"===typeof e?(t=[X(e,u)]).parentNode=u.documentElement:(t=[e]).parentNode=l(e),H([t])},o.selectAll=function(e){var t;return"string"===typeof e?(t=s(W(e,u))).parentNode=u.documentElement:(t=s(e)).parentNode=null,H([t])},Z.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!==typeof e){for(n in r<2&&(t=!1),e)this.each(ye(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(ye(e,t,n))};var ve=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function _e(e,t){return function(n){var r=o.event;o.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{o.event=r}}}function be(e,t){var n=_e(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}u&&ve.forEach((function(e){"on"+e in u&&ve.remove(e)}));var xe,we=0;function Ee(e){var t=".dragsuppress-"+ ++we,n="click"+t,r=o.select(c(e)).on("touchmove"+t,V).on("dragstart"+t,V).on("selectstart"+t,V);if(null==xe&&(xe=!("onselectstart"in e)&&D(e.style,"userSelect")),xe){var i=l(e).style,a=i[xe];i[xe]="none"}return function(e){if(r.on(t,null),xe&&(i[xe]=a),e){var o=function(){r.on(n,null)};r.on(n,(function(){V(),o()}),!0),setTimeout(o,0)}}}o.mouse=function(e){return Te(e,j())};var Se=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Te(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(Se<0){var i=c(e);if(i.scrollX||i.scrollY){var a=(n=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Se=!(a.f||a.e),n.remove()}}return Se?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function ke(){return o.event.changedTouches[0].identifier}o.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=j().changedTouches),t)for(var r,i=0,o=t.length;i<o;++i)if((r=t[i]).identifier===n)return Te(e,r)},o.behavior.drag=function(){var e=q(i,"drag","dragstart","dragend"),t=null,n=a(z,o.mouse,c,"mousemove","mouseup"),r=a(ke,o.touch,O,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function a(n,r,i,a,s){return function(){var u,l=this,c=o.event.target,h=l.parentNode,f=e.of(l,arguments),p=0,d=n(),g=".drag"+(null==d?"":"-"+d),m=o.select(i(c)).on(a+g,_).on(s+g,b),y=Ee(c),v=r(h,d);function _(){var e,t,n=r(h,d);n&&(e=n[0]-v[0],t=n[1]-v[1],p|=e|t,v=n,f({type:"drag",x:n[0]+u[0],y:n[1]+u[1],dx:e,dy:t}))}function b(){r(h,d)&&(m.on(a+g,null).on(s+g,null),y(p),f({type:"dragend"}))}u=t?[(u=t.apply(l,arguments)).x-v[0],u.y-v[1]]:[0,0],f({type:"dragstart"})}}return i.origin=function(e){return arguments.length?(t=e,i):t},o.rebind(i,e,"on")},o.touches=function(e,t){return arguments.length<2&&(t=j().touches),t?s(t).map((function(t){var n=Te(e,t);return n.identifier=t.identifier,n})):[]};var Ce=1e-6,Ie=Ce*Ce,Ae=Math.PI,Me=2*Ae,Le=Me-Ce,Ne=Ae/2,Pe=Ae/180,Oe=180/Ae;function Re(e){return e>0?1:e<0?-1:0}function De(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Fe(e){return e>1?0:e<-1?Ae:Math.acos(e)}function ze(e){return e>1?Ne:e<-1?-Ne:Math.asin(e)}function Be(e){return((e=Math.exp(e))+1/e)/2}function Ue(e){return(e=Math.sin(e/2))*e}var Ve=Math.SQRT2;o.interpolateZoom=function(e,t){var n,r,i=e[0],o=e[1],a=e[2],s=t[0],u=t[1],l=t[2],c=s-i,h=u-o,f=c*c+h*h;if(f<Ie)r=Math.log(l/a)/Ve,n=function(e){return[i+e*c,o+e*h,a*Math.exp(Ve*e*r)]};else{var p=Math.sqrt(f),d=(l*l-a*a+4*f)/(2*a*2*p),g=(l*l-a*a-4*f)/(2*l*2*p),m=Math.log(Math.sqrt(d*d+1)-d),y=Math.log(Math.sqrt(g*g+1)-g);r=(y-m)/Ve,n=function(e){var t,n=e*r,s=Be(m),u=a/(2*p)*(s*(t=Ve*n+m,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(m));return[i+u*c,o+u*h,a*s/Be(Ve*n+m)]}}return n.duration=1e3*r,n},o.behavior.zoom=function(){var e,t,n,r,i,a,s,l,h,f={x:0,y:0,k:1},p=[960,500],d=Ge,g=250,m=0,y="mousedown.zoom",v="mousemove.zoom",_="mouseup.zoom",b="touchstart.zoom",x=q(w,"zoomstart","zoom","zoomend");function w(e){e.on(y,L).on(qe+".zoom",P).on("dblclick.zoom",O).on(b,N)}function E(e){return[(e[0]-f.x)/f.k,(e[1]-f.y)/f.k]}function S(e){f.k=Math.max(d[0],Math.min(d[1],e))}function T(e,t){t=function(e){return[e[0]*f.k+f.x,e[1]*f.k+f.y]}(t),f.x+=e[0]-t[0],f.y+=e[1]-t[1]}function k(e,n,r,i){e.__chart__={x:f.x,y:f.y,k:f.k},S(Math.pow(2,i)),T(t=n,r),e=o.select(e),g>0&&(e=e.transition().duration(g)),e.call(w.event)}function C(){s&&s.domain(a.range().map((function(e){return(e-f.x)/f.k})).map(a.invert)),h&&h.domain(l.range().map((function(e){return(e-f.y)/f.k})).map(l.invert))}function I(e){m++||e({type:"zoomstart"})}function A(e){C(),e({type:"zoom",scale:f.k,translate:[f.x,f.y]})}function M(e){--m||(e({type:"zoomend"}),t=null)}function L(){var e=this,t=x.of(e,arguments),n=0,r=o.select(c(e)).on(v,s).on(_,u),i=E(o.mouse(e)),a=Ee(e);function s(){n=1,T(o.mouse(e),i),A(t)}function u(){r.on(v,null).on(_,null),a(n),M(t)}Os.call(e),I(t)}function N(){var e,t=this,n=x.of(t,arguments),r={},a=0,s=".zoom-"+o.event.changedTouches[0].identifier,u="touchmove"+s,l="touchend"+s,c=[],h=o.select(t),p=Ee(t);function d(){var n=o.touches(t);return e=f.k,n.forEach((function(e){e.identifier in r&&(r[e.identifier]=E(e))})),n}function g(){var e=o.event.target;o.select(e).on(u,m).on(l,v),c.push(e);for(var n=o.event.changedTouches,s=0,h=n.length;s<h;++s)r[n[s].identifier]=null;var p=d(),g=Date.now();if(1===p.length){if(g-i<500){var y=p[0];k(t,y,r[y.identifier],Math.floor(Math.log(f.k)/Math.LN2)+1),V()}i=g}else if(p.length>1){y=p[0];var _=p[1],b=y[0]-_[0],x=y[1]-_[1];a=b*b+x*x}}function m(){var s,u,l,c,h=o.touches(t);Os.call(t);for(var f=0,p=h.length;f<p;++f,c=null)if(l=h[f],c=r[l.identifier]){if(u)break;s=l,u=c}if(c){var d=(d=l[0]-s[0])*d+(d=l[1]-s[1])*d,g=a&&Math.sqrt(d/a);s=[(s[0]+l[0])/2,(s[1]+l[1])/2],u=[(u[0]+c[0])/2,(u[1]+c[1])/2],S(g*e)}i=null,T(s,u),A(n)}function v(){if(o.event.touches.length){for(var e=o.event.changedTouches,t=0,i=e.length;t<i;++t)delete r[e[t].identifier];for(var a in r)return void d()}o.selectAll(c).on(s,null),h.on(y,L).on(b,N),p(),M(n)}g(),I(n),h.on(y,null).on(b,g)}function P(){var i=x.of(this,arguments);r?clearTimeout(r):(Os.call(this),e=E(t=n||o.mouse(this)),I(i)),r=setTimeout((function(){r=null,M(i)}),50),V(),S(Math.pow(2,.002*je())*f.k),T(t,e),A(i)}function O(){var e=o.mouse(this),t=Math.log(f.k)/Math.LN2;k(this,e,E(e),o.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return qe||(qe="onwheel"in u?(je=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in u?(je=function(){return o.event.wheelDelta},"mousewheel"):(je=function(){return-o.event.detail},"MozMousePixelScroll")),w.event=function(e){e.each((function(){var e=x.of(this,arguments),n=f;Fs?o.select(this).transition().each("start.zoom",(function(){f=this.__chart__||{x:0,y:0,k:1},I(e)})).tween("zoom:zoom",(function(){var r=p[0],i=p[1],a=t?t[0]:r/2,s=t?t[1]:i/2,u=o.interpolateZoom([(a-f.x)/f.k,(s-f.y)/f.k,r/f.k],[(a-n.x)/n.k,(s-n.y)/n.k,r/n.k]);return function(t){var n=u(t),i=r/n[2];this.__chart__=f={x:a-n[0]*i,y:s-n[1]*i,k:i},A(e)}})).each("interrupt.zoom",(function(){M(e)})).each("end.zoom",(function(){M(e)})):(this.__chart__=f,I(e),A(e),M(e))}))},w.translate=function(e){return arguments.length?(f={x:+e[0],y:+e[1],k:f.k},C(),w):[f.x,f.y]},w.scale=function(e){return arguments.length?(f={x:f.x,y:f.y,k:null},S(+e),C(),w):f.k},w.scaleExtent=function(e){return arguments.length?(d=null==e?Ge:[+e[0],+e[1]],w):d},w.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],w):n},w.size=function(e){return arguments.length?(p=e&&[+e[0],+e[1]],w):p},w.duration=function(e){return arguments.length?(g=+e,w):g},w.x=function(e){return arguments.length?(s=e,a=e.copy(),f={x:0,y:0,k:1},w):s},w.y=function(e){return arguments.length?(h=e,l=e.copy(),f={x:0,y:0,k:1},w):h},o.rebind(w,x,"on")};var je,qe,Ge=[0,1/0];function $e(){}function He(e,t,n){return this instanceof He?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof He?new He(e.h,e.s,e.l):pt(""+e,dt,He):new He(e,t,n)}o.color=$e,$e.prototype.toString=function(){return this.rgb()+""},o.hsl=He;var Xe=He.prototype=new $e;function We(e,t,n){var r,i;function o(e){return Math.round(255*function(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}(e))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:t>1?1:t,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+t):n+t-n*t),new ut(o(e+120),o(e),o(e-120))}function Ye(e,t,n){return this instanceof Ye?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof Ye?new Ye(e.h,e.c,e.l):it(e instanceof Ke?e.l:(e=gt((e=o.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Ye(e,t,n)}Xe.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new He(this.h,this.s,this.l/e)},Xe.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new He(this.h,this.s,e*this.l)},Xe.rgb=function(){return We(this.h,this.s,this.l)},o.hcl=Ye;var Ze=Ye.prototype=new $e;function Je(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Ke(n,Math.cos(e*=Pe)*t,Math.sin(e)*t)}function Ke(e,t,n){return this instanceof Ke?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof Ke?new Ke(e.l,e.a,e.b):e instanceof Ye?Je(e.h,e.c,e.l):gt((e=ut(e)).r,e.g,e.b):new Ke(e,t,n)}Ze.brighter=function(e){return new Ye(this.h,this.c,Math.min(100,this.l+Qe*(arguments.length?e:1)))},Ze.darker=function(e){return new Ye(this.h,this.c,Math.max(0,this.l-Qe*(arguments.length?e:1)))},Ze.rgb=function(){return Je(this.h,this.c,this.l).rgb()},o.lab=Ke;var Qe=18,et=.95047,tt=1.08883,nt=Ke.prototype=new $e;function rt(e,t,n){var r=(e+16)/116,i=r+t/500,o=r-n/200;return new ut(st(3.2404542*(i=ot(i)*et)-1.5371385*(r=1*ot(r))-.4985314*(o=ot(o)*tt)),st(-.969266*i+1.8760108*r+.041556*o),st(.0556434*i-.2040259*r+1.0572252*o))}function it(e,t,n){return e>0?new Ye(Math.atan2(n,t)*Oe,Math.sqrt(t*t+n*n),e):new Ye(NaN,NaN,e)}function ot(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function at(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function st(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function ut(e,t,n){return this instanceof ut?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof ut?new ut(e.r,e.g,e.b):pt(""+e,ut,We):new ut(e,t,n)}function lt(e){return new ut(e>>16,e>>8&255,255&e)}function ct(e){return lt(e)+""}nt.brighter=function(e){return new Ke(Math.min(100,this.l+Qe*(arguments.length?e:1)),this.a,this.b)},nt.darker=function(e){return new Ke(Math.max(0,this.l-Qe*(arguments.length?e:1)),this.a,this.b)},nt.rgb=function(){return rt(this.l,this.a,this.b)},o.rgb=ut;var ht=ut.prototype=new $e;function ft(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function pt(e,t,n){var r,i,o,a=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(yt(i[0]),yt(i[1]),yt(i[2]))}return(o=vt.get(e))?t(o.r,o.g,o.b):(null==e||"#"!==e.charAt(0)||isNaN(o=parseInt(e.slice(1),16))||(4===e.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,u=15&o,u|=u<<4):7===e.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,u=255&o)),t(a,s,u))}function dt(e,t,n){var r,i,o=Math.min(e/=255,t/=255,n/=255),a=Math.max(e,t,n),s=a-o,u=(a+o)/2;return s?(i=u<.5?s/(a+o):s/(2-a-o),r=e==a?(t-n)/s+(t<n?6:0):t==a?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=u>0&&u<1?0:r),new He(r,i,u)}function gt(e,t,n){var r=at((.4124564*(e=mt(e))+.3575761*(t=mt(t))+.1804375*(n=mt(n)))/et),i=at((.2126729*e+.7151522*t+.072175*n)/1);return Ke(116*i-16,500*(r-i),200*(i-at((.0193339*e+.119192*t+.9503041*n)/tt)))}function mt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function yt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}ht.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new ut(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new ut(i,i,i)},ht.darker=function(e){return new ut((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},ht.hsl=function(){return dt(this.r,this.g,this.b)},ht.toString=function(){return"#"+ft(this.r)+ft(this.g)+ft(this.b)};var vt=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function _t(e){return"function"===typeof e?e:function(){return e}}function bt(e){return function(t,n,r){return 2===arguments.length&&"function"===typeof n&&(r=n,n=null),xt(t,n,e,r)}}function xt(e,t,n,r){var i={},a=o.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,c=null;function h(){var e,t=l.status;if(!t&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(l)||t>=200&&t<300||304===t){try{e=n.call(i,l)}catch(hu){return void a.error.call(i,hu)}a.load.call(i,e)}else a.error.call(i,l)}return this.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(e)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=h:l.onreadystatechange=function(){l.readyState>3&&h()},l.onprogress=function(e){var t=o.event;o.event=e;try{a.progress.call(i,l)}finally{o.event=t}},i.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u[e]:(null==t?delete u[e]:u[e]=t+"",i)},i.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",i):t},i.responseType=function(e){return arguments.length?(c=e,i):c},i.response=function(e){return n=e,i},["get","post"].forEach((function(e){i[e]=function(){return i.send.apply(i,[e].concat(s(arguments)))}})),i.send=function(n,r,o){if(2===arguments.length&&"function"===typeof r&&(o=r,r=null),l.open(n,e,!0),null==t||"accept"in u||(u.accept=t+",*/*"),l.setRequestHeader)for(var s in u)l.setRequestHeader(s,u[s]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=c&&(l.responseType=c),null!=o&&i.on("error",o).on("load",(function(e){o(null,e)})),a.beforesend.call(i,l),l.send(null==r?null:r),i},i.abort=function(){return l.abort(),i},o.rebind(i,a,"on"),null==r?i:i.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(r))}vt.forEach((function(e,t){vt.set(e,lt(t))})),o.functor=_t,o.xhr=bt(O),o.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);function i(e,n,r){arguments.length<3&&(r=n,n=null);var i=xt(e,t,null==n?o:a(n),r);return i.row=function(e){return arguments.length?i.response(null==(n=e)?o:a(e)):n},i}function o(e){return i.parse(e.responseText)}function a(e){return function(t){return i.parse(t.responseText,e)}}function s(t){return t.map(u).join(e)}function u(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return i.parse=function(e,t){var n;return i.parseRows(e,(function(e,r){if(n)return n(e,r-1);var i=new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+"]"})).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i}))},i.parseRows=function(e,t){var n,i,o={},a={},s=[],u=e.length,l=0,c=0;function h(){if(l>=u)return a;if(i)return i=!1,o;var t=l;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return l=n+2,13===(s=e.charCodeAt(n+1))?(i=!0,10===e.charCodeAt(n+2)&&++l):10===s&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;l<u;){var s,c=1;if(10===(s=e.charCodeAt(l++)))i=!0;else if(13===s)i=!0,10===e.charCodeAt(l)&&(++l,++c);else if(s!==r)continue;return e.slice(t,l-c)}return e.slice(t)}for(;(n=h())!==a;){for(var f=[];n!==o&&n!==a;)f.push(n),n=h();t&&null==(f=t(f,c++))||s.push(f)}return s},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var n=new P,r=[];return t.forEach((function(e){for(var t in e)n.has(t)||r.push(n.add(t))})),[r.map(u).join(e)].concat(t.map((function(t){return r.map((function(e){return u(t[e])})).join(e)}))).join("\n")},i.formatRows=function(e){return e.map(s).join("\n")},i},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("\t","text/tab-separated-values");var wt,Et,St,Tt,kt=this[D(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function Ct(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i=n+t,o={c:e,t:i,n:null};return Et?Et.n=o:wt=o,Et=o,St||(Tt=clearTimeout(Tt),St=1,kt(It)),o}function It(){var e=At(),t=Mt()-e;t>24?(isFinite(t)&&(clearTimeout(Tt),Tt=setTimeout(It,t)),St=0):(St=1,kt(It))}function At(){for(var e=Date.now(),t=wt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Mt(){for(var e,t=wt,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:wt=t.n;return Et=e,n}function Lt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}o.timer=function(){Ct.apply(this,arguments)},o.timer.flush=function(){At(),Mt()},o.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Nt=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map((function(e,t){var n=Math.pow(10,3*w(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}));function Pt(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,a=r&&n?function(e,t){for(var i=e.length,o=[],a=0,s=r[0],u=0;i>0&&s>0&&(u+s+1>t&&(s=Math.max(1,t-u)),o.push(e.substring(i-=s,i+s)),!((u+=s+1)>t));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}:O;return function(e){var n=Ot.exec(e),r=n[1]||" ",s=n[2]||">",u=n[3]||"-",l=n[4]||"",c=n[5],h=+n[6],f=n[7],p=n[8],d=n[9],g=1,m="",y="",v=!1,_=!0;switch(p&&(p=+p.substring(1)),(c||"0"===r&&"="===s)&&(c=r="0",s="="),d){case"n":f=!0,d="g";break;case"%":g=100,y="%",d="f";break;case"p":g=100,y="%",d="r";break;case"b":case"o":case"x":case"X":"#"===l&&(m="0"+d.toLowerCase());case"c":_=!1;case"d":v=!0,p=0;break;case"s":g=-1,d="r"}"$"===l&&(m=i[0],y=i[1]),"r"!=d||p||(d="g"),null!=p&&("g"==d?p=Math.max(1,Math.min(21,p)):"e"!=d&&"f"!=d||(p=Math.max(0,Math.min(20,p)))),d=Rt.get(d)||Dt;var b=c&&f;return function(e){var n=y;if(v&&e%1)return"";var i=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===u?"":u;if(g<0){var l=o.formatPrefix(e,p);e=l.scale(e),n=l.symbol+y}else e*=g;var x,w,E=(e=d(e,p)).lastIndexOf(".");if(E<0){var S=_?e.lastIndexOf("e"):-1;S<0?(x=e,w=""):(x=e.substring(0,S),w=e.substring(S))}else x=e.substring(0,E),w=t+e.substring(E+1);!c&&f&&(x=a(x,1/0));var T=m.length+x.length+w.length+(b?0:i.length),k=T<h?new Array(T=h-T+1).join(r):"";return b&&(x=a(k+x,k.length?h-w.length:1/0)),i+=m,e=x+w,("<"===s?i+e+k:">"===s?k+i+e:"^"===s?k.substring(0,T>>=1)+i+e+k.substring(T):i+(b?e:k+e))+n}}}o.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=o.round(e,Lt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Nt[8+n/3]};var Ot=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Rt=o.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=o.round(e,Lt(e,t))).toFixed(Math.max(0,Math.min(20,Lt(e*(1+1e-15),t))))}});function Dt(e){return e+""}var Ft=o.time={},zt=Date;function Bt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Bt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ut.setUTCDate.apply(this._,arguments)},setDay:function(){Ut.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ut.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ut.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ut.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ut.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ut.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ut.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ut.setTime.apply(this._,arguments)}};var Ut=Date.prototype;function Vt(e,t,n){function r(t){var n=e(t),r=o(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new zt(n-1)),1),n}function o(e,n){return t(e=new zt(+e),n),e}function a(e,r,o){var a=i(e),s=[];if(o>1)for(;a<r;)n(a)%o||s.push(new Date(+a)),t(a,1);else for(;a<r;)s.push(new Date(+a)),t(a,1);return s}e.floor=e,e.round=r,e.ceil=i,e.offset=o,e.range=a;var s=e.utc=jt(e);return s.floor=s,s.round=jt(r),s.ceil=jt(i),s.offset=jt(o),s.range=function(e,t,n){try{zt=Bt;var r=new Bt;return r._=e,a(r,t,n)}finally{zt=Date}},e}function jt(e){return function(t,n){try{zt=Bt;var r=new Bt;return r._=t,e(r,n)._}finally{zt=Date}}}function qt(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,s=e.shortDays,u=e.months,l=e.shortMonths;function c(e){var t=e.length;function n(n){for(var r,i,o,a=[],s=-1,u=0;++s<t;)37===e.charCodeAt(s)&&(a.push(e.slice(u,s)),null!=(i=Gt[r=e.charAt(++s)])&&(r=e.charAt(++s)),(o=x[r])&&(r=o(n,null==i?"e"===r?" ":"0":i)),a.push(r),u=s+1);return a.push(e.slice(u,s)),a.join("")}return n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(h(n,e,t,0)!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&zt!==Bt,i=new(r?Bt:zt);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?i._:i},n.toString=function(){return e},n}function h(e,t,n,r){for(var i,o,a,s=0,u=t.length,l=n.length;s<u;){if(r>=l)return-1;if(37===(i=t.charCodeAt(s++))){if(a=t.charAt(s++),!(o=w[a in Gt?t.charAt(s++):a])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}c.utc=function(e){var t=c(e);function n(e){try{var n=new(zt=Bt);return n._=e,t(n)}finally{zt=Date}}return n.parse=function(e){try{zt=Bt;var n=t.parse(e);return n&&n._}finally{zt=Date}},n.toString=t.toString,n},c.multi=c.utc.multi=fn;var f=o.map(),p=Wt(a),d=Yt(a),g=Wt(s),m=Yt(s),y=Wt(u),v=Yt(u),_=Wt(l),b=Yt(l);i.forEach((function(e,t){f.set(e.toLowerCase(),t)}));var x={a:function(e){return s[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:c(t),d:function(e,t){return Xt(e.getDate(),t,2)},e:function(e,t){return Xt(e.getDate(),t,2)},H:function(e,t){return Xt(e.getHours(),t,2)},I:function(e,t){return Xt(e.getHours()%12||12,t,2)},j:function(e,t){return Xt(1+Ft.dayOfYear(e),t,3)},L:function(e,t){return Xt(e.getMilliseconds(),t,3)},m:function(e,t){return Xt(e.getMonth()+1,t,2)},M:function(e,t){return Xt(e.getMinutes(),t,2)},p:function(e){return i[+(e.getHours()>=12)]},S:function(e,t){return Xt(e.getSeconds(),t,2)},U:function(e,t){return Xt(Ft.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Xt(Ft.mondayOfYear(e),t,2)},x:c(n),X:c(r),y:function(e,t){return Xt(e.getFullYear()%100,t,2)},Y:function(e,t){return Xt(e.getFullYear()%1e4,t,4)},Z:cn,"%":function(){return"%"}},w={a:function(e,t,n){g.lastIndex=0;var r=g.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){p.lastIndex=0;var r=p.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){_.lastIndex=0;var r=_.exec(t.slice(n));return r?(e.m=b.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){y.lastIndex=0;var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,t,n){return h(e,x.c.toString(),t,n)},d:rn,e:rn,H:an,I:an,j:on,L:ln,m:nn,M:sn,p:function(e,t,n){var r=f.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)},S:un,U:Jt,w:Zt,W:Kt,x:function(e,t,n){return h(e,x.x.toString(),t,n)},X:function(e,t,n){return h(e,x.X.toString(),t,n)},y:en,Y:Qt,Z:tn,"%":hn};return c}Ft.year=Vt((function(e){return(e=Ft.day(e)).setMonth(0,1),e}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e){return e.getFullYear()})),Ft.years=Ft.year.range,Ft.years.utc=Ft.year.utc.range,Ft.day=Vt((function(e){var t=new zt(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e){return e.getDate()-1})),Ft.days=Ft.day.range,Ft.days.utc=Ft.day.utc.range,Ft.dayOfYear=function(e){var t=Ft.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach((function(e,t){t=7-t;var n=Ft[e]=Vt((function(e){return(e=Ft.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e}),(function(e,t){e.setDate(e.getDate()+7*Math.floor(t))}),(function(e){var n=Ft.year(e).getDay();return Math.floor((Ft.dayOfYear(e)+(n+t)%7)/7)-(n!==t)}));Ft[e+"s"]=n.range,Ft[e+"s"].utc=n.utc.range,Ft[e+"OfYear"]=function(e){var n=Ft.year(e).getDay();return Math.floor((Ft.dayOfYear(e)+(n+t)%7)/7)}})),Ft.week=Ft.sunday,Ft.weeks=Ft.sunday.range,Ft.weeks.utc=Ft.sunday.utc.range,Ft.weekOfYear=Ft.sundayOfYear;var Gt={"-":"",_:" ",0:"0"},$t=/^\s*\d+/,Ht=/^%/;function Xt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Wt(e){return new RegExp("^(?:"+e.map(o.requote).join("|")+")","i")}function Yt(e){for(var t=new T,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Zt(e,t,n){$t.lastIndex=0;var r=$t.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Jt(e,t,n){$t.lastIndex=0;var r=$t.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Kt(e,t,n){$t.lastIndex=0;var r=$t.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Qt(e,t,n){$t.lastIndex=0;var r=$t.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function en(e,t,n){$t.lastIndex=0;var r,i=$t.exec(t.slice(n,n+2));return i?(e.y=(r=+i[0])+(r>68?1900:2e3),n+i[0].length):-1}function tn(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function nn(e,t,n){$t.lastIndex=0;var r=$t.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function rn(e,t,n){$t.lastIndex=0;var r=$t.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function on(e,t,n){$t.lastIndex=0;var r=$t.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function an(e,t,n){$t.lastIndex=0;var r=$t.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function sn(e,t,n){$t.lastIndex=0;var r=$t.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function un(e,t,n){$t.lastIndex=0;var r=$t.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ln(e,t,n){$t.lastIndex=0;var r=$t.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function cn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=w(t)/60|0,i=w(t)%60;return n+Xt(r,"0",2)+Xt(i,"0",2)}function hn(e,t,n){Ht.lastIndex=0;var r=Ht.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function fn(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}o.locale=function(e){return{numberFormat:Pt(e),timeFormat:qt(e)}};var pn=o.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function dn(){}o.format=pn.numberFormat,o.geo={},dn.prototype={s:0,t:0,add:function(e){mn(e,this.t,gn),mn(gn.s,this.s,this),this.s?this.t+=gn.t:this.s=gn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var gn=new dn;function mn(e,t,n){var r=n.s=e+t,i=r-e,o=r-i;n.t=e-o+(t-i)}function yn(e,t){e&&_n.hasOwnProperty(e.type)&&_n[e.type](e,t)}o.geo.stream=function(e,t){e&&vn.hasOwnProperty(e.type)?vn[e.type](e,t):yn(e,t)};var vn={Feature:function(e,t){yn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)yn(n[r].geometry,t)}},_n={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){bn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)bn(n[r],t,0)},Polygon:function(e,t){xn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)xn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)yn(n[r],t)}};function bn(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function xn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)bn(e[n],t,1);t.polygonEnd()}o.geo.area=function(e){return wn=0,o.geo.stream(e,Rn),wn};var wn,En,Sn,Tn,kn,Cn,In,An,Mn,Ln,Nn,Pn,On=new dn,Rn={sphere:function(){wn+=4*Ae},point:z,lineStart:z,lineEnd:z,polygonStart:function(){On.reset(),Rn.lineStart=Dn},polygonEnd:function(){var e=2*On;wn+=e<0?4*Ae+e:e,Rn.lineStart=Rn.lineEnd=Rn.point=z}};function Dn(){var e,t,n,r,i;function o(e,t){t=t*Pe/2+Ae/4;var o=(e*=Pe)-n,a=o>=0?1:-1,s=a*o,u=Math.cos(t),l=Math.sin(t),c=i*l,h=r*u+c*Math.cos(s),f=c*a*Math.sin(s);On.add(Math.atan2(f,h)),n=e,r=u,i=l}Rn.point=function(a,s){Rn.point=o,n=(e=a)*Pe,r=Math.cos(s=(t=s)*Pe/2+Ae/4),i=Math.sin(s)},Rn.lineEnd=function(){o(e,t)}}function Fn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function zn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Bn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Un(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Vn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function jn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function qn(e){return[Math.atan2(e[1],e[0]),ze(e[2])]}function Gn(e,t){return w(e[0]-t[0])<Ce&&w(e[1]-t[1])<Ce}o.geo.bounds=function(){var e,t,n,r,i,a,s,u,l,c,h,f={point:p,lineStart:g,lineEnd:m,polygonStart:function(){f.point=y,f.lineStart=v,f.lineEnd=_,l=0,Rn.polygonStart()},polygonEnd:function(){Rn.polygonEnd(),f.point=p,f.lineStart=g,f.lineEnd=m,On<0?(e=-(n=180),t=-(r=90)):l>Ce?r=90:l<-Ce&&(t=-90),h[0]=e,h[1]=n}};function p(i,o){c.push(h=[e=i,n=i]),o<t&&(t=o),o>r&&(r=o)}function d(o,a){var s=Fn([o*Pe,a*Pe]);if(u){var l=Bn(u,s),c=Bn([l[1],-l[0],0],l);jn(c),c=qn(c);var h=o-i,f=h>0?1:-1,d=c[0]*Oe*f,g=w(h)>180;if(g^(f*i<d&&d<f*o))(m=c[1]*Oe)>r&&(r=m);else if(g^(f*i<(d=(d+360)%360-180)&&d<f*o)){var m;(m=-c[1]*Oe)<t&&(t=m)}else a<t&&(t=a),a>r&&(r=a);g?o<i?b(e,o)>b(e,n)&&(n=o):b(o,n)>b(e,n)&&(e=o):n>=e?(o<e&&(e=o),o>n&&(n=o)):o>i?b(e,o)>b(e,n)&&(n=o):b(o,n)>b(e,n)&&(e=o)}else p(o,a);u=s,i=o}function g(){f.point=d}function m(){h[0]=e,h[1]=n,f.point=p,u=null}function y(e,t){if(u){var n=e-i;l+=w(n)>180?n+(n>0?360:-360):n}else a=e,s=t;Rn.point(e,t),d(e,t)}function v(){Rn.lineStart()}function _(){y(a,s),Rn.lineEnd(),w(l)>Ce&&(e=-(n=180)),h[0]=e,h[1]=n,u=null}function b(e,t){return(t-=e)<0?t+360:t}function x(e,t){return e[0]-t[0]}function E(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(i){if(r=n=-(e=t=1/0),c=[],o.geo.stream(i,f),l=c.length){c.sort(x);for(var a=1,s=[g=c[0]];a<l;++a)E((p=c[a])[0],g)||E(p[1],g)?(b(g[0],p[1])>b(g[0],g[1])&&(g[1]=p[1]),b(p[0],g[1])>b(g[0],g[1])&&(g[0]=p[0])):s.push(g=p);for(var u,l,p,d=-1/0,g=(a=0,s[l=s.length-1]);a<=l;g=p,++a)p=s[a],(u=b(g[1],p[0]))>d&&(d=u,e=p[0],n=g[1])}return c=h=null,e===1/0||t===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,t],[n,r]]}}(),o.geo.centroid=function(e){En=Sn=Tn=kn=Cn=In=An=Mn=Ln=Nn=Pn=0,o.geo.stream(e,$n);var t=Ln,n=Nn,r=Pn,i=t*t+n*n+r*r;return i<Ie&&(t=In,n=An,r=Mn,Sn<Ce&&(t=Tn,n=kn,r=Cn),(i=t*t+n*n+r*r)<Ie)?[NaN,NaN]:[Math.atan2(n,t)*Oe,ze(r/Math.sqrt(i))*Oe]};var $n={sphere:z,point:Hn,lineStart:Wn,lineEnd:Yn,polygonStart:function(){$n.lineStart=Zn},polygonEnd:function(){$n.lineStart=Wn}};function Hn(e,t){e*=Pe;var n=Math.cos(t*=Pe);Xn(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Xn(e,t,n){++En,Tn+=(e-Tn)/En,kn+=(t-kn)/En,Cn+=(n-Cn)/En}function Wn(){var e,t,n;function r(r,i){r*=Pe;var o=Math.cos(i*=Pe),a=o*Math.cos(r),s=o*Math.sin(r),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=t*u-n*s)*l+(l=n*a-e*u)*l+(l=e*s-t*a)*l),e*a+t*s+n*u);Sn+=l,In+=l*(e+(e=a)),An+=l*(t+(t=s)),Mn+=l*(n+(n=u)),Xn(e,t,n)}$n.point=function(i,o){i*=Pe;var a=Math.cos(o*=Pe);e=a*Math.cos(i),t=a*Math.sin(i),n=Math.sin(o),$n.point=r,Xn(e,t,n)}}function Yn(){$n.point=Hn}function Zn(){var e,t,n,r,i;function o(e,t){e*=Pe;var o=Math.cos(t*=Pe),a=o*Math.cos(e),s=o*Math.sin(e),u=Math.sin(t),l=r*u-i*s,c=i*a-n*u,h=n*s-r*a,f=Math.sqrt(l*l+c*c+h*h),p=n*a+r*s+i*u,d=f&&-Fe(p)/f,g=Math.atan2(f,p);Ln+=d*l,Nn+=d*c,Pn+=d*h,Sn+=g,In+=g*(n+(n=a)),An+=g*(r+(r=s)),Mn+=g*(i+(i=u)),Xn(n,r,i)}$n.point=function(a,s){e=a,t=s,$n.point=o,a*=Pe;var u=Math.cos(s*=Pe);n=u*Math.cos(a),r=u*Math.sin(a),i=Math.sin(s),Xn(n,r,i)},$n.lineEnd=function(){o(e,t),$n.lineEnd=Yn,$n.point=Hn}}function Jn(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Kn(){return!0}function Qn(e,t,n,r,i){var o=[],a=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Gn(n,r)){i.lineStart();for(var s=0;s<t;++s)i.point((n=e[s])[0],n[1]);i.lineEnd()}else{var u=new tr(n,e,null,!0),l=new tr(n,null,u,!1);u.o=l,o.push(u),a.push(l),u=new tr(r,e,null,!1),l=new tr(r,null,u,!0),u.o=l,o.push(u),a.push(l)}}})),a.sort(t),er(o),er(a),o.length){for(var s=0,u=n,l=a.length;s<l;++s)a[s].e=u=!u;for(var c,h,f=o[0];;){for(var p=f,d=!0;p.v;)if((p=p.n)===f)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(s=0,l=c.length;s<l;++s)i.point((h=c[s])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d)for(s=(c=p.p.z).length-1;s>=0;--s)i.point((h=c[s])[0],h[1]);else r(p.x,p.p.x,-1,i);p=p.p}c=(p=p.o).z,d=!d}while(!p.v);i.lineEnd()}}}function er(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function tr(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function nr(e,t,n,r){return function(i,a){var s,u=t(a),l=i.invert(r[0],r[1]),c={point:h,lineStart:p,lineEnd:d,polygonStart:function(){c.point=b,c.lineStart=x,c.lineEnd=w,s=[],g=[]},polygonEnd:function(){c.point=h,c.lineStart=p,c.lineEnd=d,s=o.merge(s);var e=function(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;On.reset();for(var s=0,u=t.length;s<u;++s){var l=t[s],c=l.length;if(c)for(var h=l[0],f=h[0],p=h[1]/2+Ae/4,d=Math.sin(p),g=Math.cos(p),m=1;;){m===c&&(m=0);var y=(e=l[m])[0],v=e[1]/2+Ae/4,_=Math.sin(v),b=Math.cos(v),x=y-f,w=x>=0?1:-1,E=w*x,S=E>Ae,T=d*_;if(On.add(Math.atan2(T*w*Math.sin(E),g*b+T*Math.cos(E))),o+=S?x+w*Me:x,S^f>=n^y>=n){var k=Bn(Fn(h),Fn(e));jn(k);var C=Bn(i,k);jn(C);var I=(S^x>=0?-1:1)*ze(C[2]);(r>I||r===I&&(k[0]||k[1]))&&(a+=S^x>=0?1:-1)}if(!m++)break;f=y,d=_,g=b,h=e}}return(o<-Ce||o<Ce&&On<0)^1&a}(l,g);s.length?(_||(a.polygonStart(),_=!0),Qn(s,or,e,n,a)):e&&(_||(a.polygonStart(),_=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),_&&(a.polygonEnd(),_=!1),s=g=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function h(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&a.point(t,n)}function f(e,t){var n=i(e,t);u.point(n[0],n[1])}function p(){c.point=f,u.lineStart()}function d(){c.point=h,u.lineEnd()}var g,m,y=ir(),v=t(y),_=!1;function b(e,t){m.push([e,t]);var n=i(e,t);v.point(n[0],n[1])}function x(){v.lineStart(),m=[]}function w(){b(m[0][0],m[0][1]),v.lineEnd();var e,t=v.clean(),n=y.buffer(),r=n.length;if(m.pop(),g.push(m),m=null,r)if(1&t){var i,o=-1;if((r=(e=n[0]).length-1)>0){for(_||(a.polygonStart(),_=!0),a.lineStart();++o<r;)a.point((i=e[o])[0],i[1]);a.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),s.push(n.filter(rr))}return c}}function rr(e){return e.length>1}function ir(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:z,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function or(e,t){return((e=e.x)[0]<0?e[1]-Ne-Ce:Ne-e[1])-((t=t.x)[0]<0?t[1]-Ne-Ce:Ne-t[1])}var ar=nr(Kn,(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?Ae:-Ae,u=w(o-n);w(u-Ae)<Ce?(e.point(n,r=(r+a)/2>0?Ne:-Ne),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&u>=Ae&&(w(n-i)<Ce&&(n-=i*Ce),w(o-s)<Ce&&(o-=s*Ce),r=function(e,t,n,r){var i,o,a=Math.sin(e-n);return w(a)>Ce?Math.atan((Math.sin(t)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*o*a)):(t+r)/2}(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*Ne,r.point(-Ae,i),r.point(0,i),r.point(Ae,i),r.point(Ae,0),r.point(Ae,-i),r.point(0,-i),r.point(-Ae,-i),r.point(-Ae,0),r.point(-Ae,i);else if(w(e[0]-t[0])>Ce){var o=e[0]<t[0]?Ae:-Ae;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}),[-Ae,-Ae/2]);function sr(e){var t=Math.cos(e),n=t>0,r=w(t)>Ce;return nr(i,(function(e){var t,s,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var p,d=[h,f],g=i(h,f),m=n?g?0:a(h,f):g?a(h+(h<0?Ae:-Ae),f):0;if(!t&&(l=u=g)&&e.lineStart(),g!==u&&(p=o(t,d),(Gn(t,p)||Gn(d,p))&&(d[0]+=Ce,d[1]+=Ce,g=i(d[0],d[1]))),g!==u)c=0,g?(e.lineStart(),p=o(d,t),e.point(p[0],p[1])):(p=o(t,d),e.point(p[0],p[1]),e.lineEnd()),t=p;else if(r&&t&&n^g){var y;m&s||!(y=o(d,t,!0))||(c=0,n?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1])))}!g||t&&Gn(t,d)||e.point(d[0],d[1]),t=d,u=g,s=m},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return c|(l&&u)<<1}}}),Gr(e,6*Pe),n?[0,-e]:[-Ae,e-Ae]);function i(e,n){return Math.cos(e)*Math.cos(n)>t}function o(e,n,r){var i=[1,0,0],o=Bn(Fn(e),Fn(n)),a=zn(o,o),s=o[0],u=a-s*s;if(!u)return!r&&e;var l=t*a/u,c=-t*s/u,h=Bn(i,o),f=Vn(i,l);Un(f,Vn(o,c));var p=h,d=zn(f,p),g=zn(p,p),m=d*d-g*(zn(f,f)-1);if(!(m<0)){var y=Math.sqrt(m),v=Vn(p,(-d-y)/g);if(Un(v,f),v=qn(v),!r)return v;var _,b=e[0],x=n[0],E=e[1],S=n[1];x<b&&(_=b,b=x,x=_);var T=x-b,k=w(T-Ae)<Ce;if(!k&&S<E&&(_=E,E=S,S=_),k||T<Ce?k?E+S>0^v[1]<(w(v[0]-b)<Ce?E:S):E<=v[1]&&v[1]<=S:T>Ae^(b<=v[0]&&v[0]<=x)){var C=Vn(p,(-d+y)/g);return Un(C,f),[v,qn(C)]}}}function a(t,r){var i=n?e:Ae-e,o=0;return t<-i?o|=1:t>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}}function ur(e,t,n,r){return function(i){var o,a=i.a,s=i.b,u=a.x,l=a.y,c=0,h=1,f=s.x-u,p=s.y-l;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=n-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}if(o=t-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=r-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}return c>0&&(i.a={x:u+c*f,y:l+c*p}),h<1&&(i.b={x:u+h*f,y:l+h*p}),i}}}}}}var lr=1e9;function cr(e,t,n,r){return function(u){var l,c,h,f,p,d,g,m,y,v,_,b=u,x=ir(),w=ur(e,t,n,r),E={point:k,lineStart:function(){E.point=C,c&&c.push(h=[]);v=!0,y=!1,g=m=NaN},lineEnd:function(){l&&(C(f,p),d&&y&&x.rejoin(),l.push(x.buffer()));E.point=k,y&&u.lineEnd()},polygonStart:function(){u=x,l=[],c=[],_=!0},polygonEnd:function(){u=b,l=o.merge(l);var t=function(e){for(var t=0,n=c.length,r=e[1],i=0;i<n;++i)for(var o,a=1,s=c[i],u=s.length,l=s[0];a<u;++a)o=s[a],l[1]<=r?o[1]>r&&De(l,o,e)>0&&++t:o[1]<=r&&De(l,o,e)<0&&--t,l=o;return 0!==t}([e,r]),n=_&&t,i=l.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),S(null,null,1,u),u.lineEnd()),i&&Qn(l,a,t,S,u),u.polygonEnd()),l=c=h=null}};function S(o,a,u,l){var c=0,h=0;if(null==o||(c=i(o,u))!==(h=i(a,u))||s(o,a)<0^u>0)do{l.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+u+4)%4)!==h);else l.point(a[0],a[1])}function T(i,o){return e<=i&&i<=n&&t<=o&&o<=r}function k(e,t){T(e,t)&&u.point(e,t)}function C(e,t){var n=T(e=Math.max(-1e9,Math.min(lr,e)),t=Math.max(-1e9,Math.min(lr,t)));if(c&&h.push([e,t]),v)f=e,p=t,d=n,v=!1,n&&(u.lineStart(),u.point(e,t));else if(n&&y)u.point(e,t);else{var r={a:{x:g,y:m},b:{x:e,y:t}};w(r)?(y||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),_=!1):n&&(u.lineStart(),u.point(e,t),_=!1)}g=e,m=t,y=n}return E};function i(r,i){return w(r[0]-e)<Ce?i>0?0:3:w(r[0]-n)<Ce?i>0?2:1:w(r[1]-t)<Ce?i>0?1:0:i>0?3:2}function a(e,t){return s(e.x,t.x)}function s(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}}function hr(e){var t=0,n=Ae/3,r=Dr(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Ae/180,n=e[1]*Ae/180):[t/Ae*180,n/Ae*180]},i}function fr(e,t){var n=Math.sin(e),r=(n+Math.sin(t))/2,i=1+n*(2*r-n),o=Math.sqrt(i)/r;function a(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),o-n*Math.cos(e)]}return a.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/r,ze((i-(e*e+n*n)*r*r)/(2*r))]},a}o.geo.clipExtent=function(){var e,t,n,r,i,o,a={stream:function(e){return i&&(i.valid=!1),(i=o(e)).valid=!0,i},extent:function(s){return arguments.length?(o=cr(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[e,t],[n,r]]}};return a.extent([[0,0],[960,500]])},(o.geo.conicEqualArea=function(){return hr(fr)}).raw=fr,o.geo.albers=function(){return o.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},o.geo.albersUsa=function(){var e,t,n,r,i=o.geo.albers(),a=o.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=o.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};function l(i){var o=i[0],a=i[1];return e=null,t(o,a),e||(n(o,a),e)||r(o,a),e}return l.invert=function(e){var t=i.scale(),n=i.translate(),r=(e[0]-n[0])/t,o=(e[1]-n[1])/t;return(o>=.12&&o<.234&&r>=-.425&&r<-.214?a:o>=.166&&o<.234&&r>=-.214&&r<-.115?s:i).invert(e)},l.stream=function(e){var t=i.stream(e),n=a.stream(e),r=s.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},l.precision=function(e){return arguments.length?(i.precision(e),a.precision(e),s.precision(e),l):i.precision()},l.scale=function(e){return arguments.length?(i.scale(e),a.scale(.35*e),s.scale(e),l.translate(i.translate())):i.scale()},l.translate=function(e){if(!arguments.length)return i.translate();var o=i.scale(),c=+e[0],h=+e[1];return t=i.translate(e).clipExtent([[c-.455*o,h-.238*o],[c+.455*o,h+.238*o]]).stream(u).point,n=a.translate([c-.307*o,h+.201*o]).clipExtent([[c-.425*o+Ce,h+.12*o+Ce],[c-.214*o-Ce,h+.234*o-Ce]]).stream(u).point,r=s.translate([c-.205*o,h+.212*o]).clipExtent([[c-.214*o+Ce,h+.166*o+Ce],[c-.115*o-Ce,h+.234*o-Ce]]).stream(u).point,l},l.scale(1070)};var pr,dr,gr,mr,yr,vr,_r={point:z,lineStart:z,lineEnd:z,polygonStart:function(){dr=0,_r.lineStart=br},polygonEnd:function(){_r.lineStart=_r.lineEnd=_r.point=z,pr+=w(dr/2)}};function br(){var e,t,n,r;function i(e,t){dr+=r*e-n*t,n=e,r=t}_r.point=function(o,a){_r.point=i,e=n=o,t=r=a},_r.lineEnd=function(){i(e,t)}}var xr={point:function(e,t){e<gr&&(gr=e);e>yr&&(yr=e);t<mr&&(mr=t);t>vr&&(vr=t)},lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z};function wr(){var e=Er(4.5),t=[],n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(t){return e=Er(t),n},result:function(){if(t.length){var e=t.join("");return t=[],e}}};function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r),n.point=o}function o(e,n){t.push("L",e,",",n)}function a(){n.point=r}function s(){t.push("Z")}return n}function Er(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Sr,Tr={point:kr,lineStart:Cr,lineEnd:Ir,polygonStart:function(){Tr.lineStart=Ar},polygonEnd:function(){Tr.point=kr,Tr.lineStart=Cr,Tr.lineEnd=Ir}};function kr(e,t){Tn+=e,kn+=t,++Cn}function Cr(){var e,t;function n(n,r){var i=n-e,o=r-t,a=Math.sqrt(i*i+o*o);In+=a*(e+n)/2,An+=a*(t+r)/2,Mn+=a,kr(e=n,t=r)}Tr.point=function(r,i){Tr.point=n,kr(e=r,t=i)}}function Ir(){Tr.point=kr}function Ar(){var e,t,n,r;function i(e,t){var i=e-n,o=t-r,a=Math.sqrt(i*i+o*o);In+=a*(n+e)/2,An+=a*(r+t)/2,Mn+=a,Ln+=(a=r*e-n*t)*(n+e),Nn+=a*(r+t),Pn+=3*a,kr(n=e,r=t)}Tr.point=function(o,a){Tr.point=i,kr(e=n=o,t=r=a)},Tr.lineEnd=function(){i(e,t)}}function Mr(e){var t=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(e){return t=e,n},result:z};function r(n,r){e.moveTo(n+t,r),e.arc(n,r,t,0,Me)}function i(t,r){e.moveTo(t,r),n.point=o}function o(t,n){e.lineTo(t,n)}function a(){n.point=r}function s(){e.closePath()}return n}function Lr(e){var t=.5,n=Math.cos(30*Pe),r=16;function i(e){return(r?a:o)(e)}function o(t){return Or(t,(function(n,r){n=e(n,r),t.point(n[0],n[1])}))}function a(t){var n,i,o,a,u,l,c,h,f,p,d,g,m={point:y,lineStart:v,lineEnd:b,polygonStart:function(){t.polygonStart(),m.lineStart=x},polygonEnd:function(){t.polygonEnd(),m.lineStart=v}};function y(n,r){n=e(n,r),t.point(n[0],n[1])}function v(){h=NaN,m.point=_,t.lineStart()}function _(n,i){var o=Fn([n,i]),a=e(n,i);s(h,f,c,p,d,g,h=a[0],f=a[1],c=n,p=o[0],d=o[1],g=o[2],r,t),t.point(h,f)}function b(){m.point=y,t.lineEnd()}function x(){v(),m.point=w,m.lineEnd=E}function w(e,t){_(n=e,t),i=h,o=f,a=p,u=d,l=g,m.point=_}function E(){s(h,f,c,p,d,g,i,o,n,a,u,l,r,t),m.lineEnd=b,b()}return m}function s(r,i,o,a,u,l,c,h,f,p,d,g,m,y){var v=c-r,_=h-i,b=v*v+_*_;if(b>4*t&&m--){var x=a+p,E=u+d,S=l+g,T=Math.sqrt(x*x+E*E+S*S),k=Math.asin(S/=T),C=w(w(S)-1)<Ce||w(o-f)<Ce?(o+f)/2:Math.atan2(E,x),I=e(C,k),A=I[0],M=I[1],L=A-r,N=M-i,P=_*L-v*N;(P*P/b>t||w((v*L+_*N)/b-.5)>.3||a*p+u*d+l*g<n)&&(s(r,i,o,a,u,l,A,M,C,x/=T,E/=T,S,m,y),y.point(A,M),s(A,M,C,x,E,S,c,h,f,p,d,g,m,y))}}return i.precision=function(e){return arguments.length?(r=(t=e*e)>0&&16,i):Math.sqrt(t)},i}function Nr(e){var t=Lr((function(t,n){return e([t*Oe,n*Oe])}));return function(e){return Fr(t(e))}}function Pr(e){this.stream=e}function Or(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Rr(e){return Dr((function(){return e}))()}function Dr(e){var t,n,r,i,a,s,u=Lr((function(e,n){return[(e=t(e,n))[0]*l+i,a-e[1]*l]})),l=150,c=480,h=250,f=0,p=0,d=0,g=0,m=0,y=ar,v=O,_=null,b=null;function x(e){return[(e=r(e[0]*Pe,e[1]*Pe))[0]*l+i,a-e[1]*l]}function w(e){return(e=r.invert((e[0]-i)/l,(a-e[1])/l))&&[e[0]*Oe,e[1]*Oe]}function E(){r=Jn(n=Ur(d,g,m),t);var e=t(f,p);return i=c-e[0]*l,a=h+e[1]*l,S()}function S(){return s&&(s.valid=!1,s=null),x}return x.stream=function(e){return s&&(s.valid=!1),(s=Fr(y(n,u(v(e))))).valid=!0,s},x.clipAngle=function(e){return arguments.length?(y=null==e?(_=e,ar):sr((_=+e)*Pe),S()):_},x.clipExtent=function(e){return arguments.length?(b=e,v=e?cr(e[0][0],e[0][1],e[1][0],e[1][1]):O,S()):b},x.scale=function(e){return arguments.length?(l=+e,E()):l},x.translate=function(e){return arguments.length?(c=+e[0],h=+e[1],E()):[c,h]},x.center=function(e){return arguments.length?(f=e[0]%360*Pe,p=e[1]%360*Pe,E()):[f*Oe,p*Oe]},x.rotate=function(e){return arguments.length?(d=e[0]%360*Pe,g=e[1]%360*Pe,m=e.length>2?e[2]%360*Pe:0,E()):[d*Oe,g*Oe,m*Oe]},o.rebind(x,u,"precision"),function(){return t=e.apply(this,arguments),x.invert=t.invert&&w,E()}}function Fr(e){return Or(e,(function(t,n){e.point(t*Pe,n*Pe)}))}function zr(e,t){return[e,t]}function Br(e,t){return[e>Ae?e-Me:e<-Ae?e+Me:e,t]}function Ur(e,t,n){return e?t||n?Jn(jr(e),qr(t,n)):jr(e):t||n?qr(t,n):Br}function Vr(e){return function(t,n){return[(t+=e)>Ae?t-Me:t<-Ae?t+Me:t,n]}}function jr(e){var t=Vr(e);return t.invert=Vr(-e),t}function qr(e,t){var n=Math.cos(e),r=Math.sin(e),i=Math.cos(t),o=Math.sin(t);function a(e,t){var a=Math.cos(t),s=Math.cos(e)*a,u=Math.sin(e)*a,l=Math.sin(t),c=l*n+s*r;return[Math.atan2(u*i-c*o,s*n-l*r),ze(c*i+u*o)]}return a.invert=function(e,t){var a=Math.cos(t),s=Math.cos(e)*a,u=Math.sin(e)*a,l=Math.sin(t),c=l*i-u*o;return[Math.atan2(u*i+l*o,s*n+c*r),ze(c*n-s*r)]},a}function Gr(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,o,a,s){var u=a*t;null!=i?(i=$r(n,i),o=$r(n,o),(a>0?i<o:i>o)&&(i+=a*Me)):(i=e+a*Me,o=e-.5*u);for(var l,c=i;a>0?c>o:c<o;c-=u)s.point((l=qn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function $r(e,t){var n=Fn(t);n[0]-=e,jn(n);var r=Fe(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ce)%(2*Math.PI)}function Hr(e,t,n){var r=o.range(e,t-Ce,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function Xr(e,t,n){var r=o.range(e,t-Ce,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function Wr(e){return e.source}function Yr(e){return e.target}o.geo.path=function(){var e,t,n,r,i,a=4.5;function s(e){return e&&("function"===typeof a&&r.pointRadius(+a.apply(this,arguments)),i&&i.valid||(i=n(r)),o.geo.stream(e,i)),r.result()}function u(){return i=null,s}return s.area=function(e){return pr=0,o.geo.stream(e,n(_r)),pr},s.centroid=function(e){return Tn=kn=Cn=In=An=Mn=Ln=Nn=Pn=0,o.geo.stream(e,n(Tr)),Pn?[Ln/Pn,Nn/Pn]:Mn?[In/Mn,An/Mn]:Cn?[Tn/Cn,kn/Cn]:[NaN,NaN]},s.bounds=function(e){return yr=vr=-(gr=mr=1/0),o.geo.stream(e,n(xr)),[[gr,mr],[yr,vr]]},s.projection=function(t){return arguments.length?(n=(e=t)?t.stream||Nr(t):O,u()):e},s.context=function(e){return arguments.length?(r=null==(t=e)?new wr:new Mr(e),"function"!==typeof a&&r.pointRadius(a),u()):t},s.pointRadius=function(e){return arguments.length?(a="function"===typeof e?e:(r.pointRadius(+e),+e),s):a},s.projection(o.geo.albersUsa()).context(null)},o.geo.transform=function(e){return{stream:function(t){var n=new Pr(t);for(var r in e)n[r]=e[r];return n}}},Pr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},o.geo.projection=Rr,o.geo.projectionMutator=Dr,(o.geo.equirectangular=function(){return Rr(zr)}).raw=zr.invert=zr,o.geo.rotation=function(e){function t(t){return(t=e(t[0]*Pe,t[1]*Pe))[0]*=Oe,t[1]*=Oe,t}return e=Ur(e[0]%360*Pe,e[1]*Pe,e.length>2?e[2]*Pe:0),t.invert=function(t){return(t=e.invert(t[0]*Pe,t[1]*Pe))[0]*=Oe,t[1]*=Oe,t},t},Br.invert=zr,o.geo.circle=function(){var e,t,n=[0,0],r=6;function i(){var e="function"===typeof n?n.apply(this,arguments):n,r=Ur(-e[0]*Pe,-e[1]*Pe,0).invert,i=[];return t(null,null,1,{point:function(e,t){i.push(e=r(e,t)),e[0]*=Oe,e[1]*=Oe}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(e){return arguments.length?(n=e,i):n},i.angle=function(n){return arguments.length?(t=Gr((e=+n)*Pe,r*Pe),i):e},i.precision=function(n){return arguments.length?(t=Gr(e*Pe,(r=+n)*Pe),i):r},i.angle(90)},o.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Pe,i=e[1]*Pe,o=t[1]*Pe,a=Math.sin(r),s=Math.cos(r),u=Math.sin(i),l=Math.cos(i),c=Math.sin(o),h=Math.cos(o);return Math.atan2(Math.sqrt((n=h*a)*n+(n=l*c-u*h*s)*n),u*c+l*h*s)},o.geo.graticule=function(){var e,t,n,r,i,a,s,u,l,c,h,f,p=10,d=p,g=90,m=360,y=2.5;function v(){return{type:"MultiLineString",coordinates:_()}}function _(){return o.range(Math.ceil(r/g)*g,n,g).map(h).concat(o.range(Math.ceil(u/m)*m,s,m).map(f)).concat(o.range(Math.ceil(t/p)*p,e,p).filter((function(e){return w(e%g)>Ce})).map(l)).concat(o.range(Math.ceil(a/d)*d,i,d).filter((function(e){return w(e%m)>Ce})).map(c))}return v.lines=function(){return _().map((function(e){return{type:"LineString",coordinates:e}}))},v.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(f(s).slice(1),h(n).reverse().slice(1),f(u).reverse().slice(1))]}},v.extent=function(e){return arguments.length?v.majorExtent(e).minorExtent(e):v.minorExtent()},v.majorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],s=+e[1][1],r>n&&(e=r,r=n,n=e),u>s&&(e=u,u=s,s=e),v.precision(y)):[[r,u],[n,s]]},v.minorExtent=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],a=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),a>i&&(n=a,a=i,i=n),v.precision(y)):[[t,a],[e,i]]},v.step=function(e){return arguments.length?v.majorStep(e).minorStep(e):v.minorStep()},v.majorStep=function(e){return arguments.length?(g=+e[0],m=+e[1],v):[g,m]},v.minorStep=function(e){return arguments.length?(p=+e[0],d=+e[1],v):[p,d]},v.precision=function(o){return arguments.length?(y=+o,l=Hr(a,i,90),c=Xr(t,e,y),h=Hr(u,s,90),f=Xr(r,n,y),v):y},v.majorExtent([[-180,-90+Ce],[180,90-Ce]]).minorExtent([[-180,-80-Ce],[180,80+Ce]])},o.geo.greatArc=function(){var e,t,n=Wr,r=Yr;function i(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),t||r.apply(this,arguments)]}}return i.distance=function(){return o.geo.distance(e||n.apply(this,arguments),t||r.apply(this,arguments))},i.source=function(t){return arguments.length?(n=t,e="function"===typeof t?null:t,i):n},i.target=function(e){return arguments.length?(r=e,t="function"===typeof e?null:e,i):r},i.precision=function(){return arguments.length?i:0},i},o.geo.interpolate=function(e,t){return function(e,t,n,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(r),s=Math.sin(r),u=i*Math.cos(e),l=i*Math.sin(e),c=a*Math.cos(n),h=a*Math.sin(n),f=2*Math.asin(Math.sqrt(Ue(r-t)+i*a*Ue(n-e))),p=1/Math.sin(f),d=f?function(e){var t=Math.sin(e*=f)*p,n=Math.sin(f-e)*p,r=n*u+t*c,i=n*l+t*h,a=n*o+t*s;return[Math.atan2(i,r)*Oe,Math.atan2(a,Math.sqrt(r*r+i*i))*Oe]}:function(){return[e*Oe,t*Oe]};return d.distance=f,d}(e[0]*Pe,e[1]*Pe,t[0]*Pe,t[1]*Pe)},o.geo.length=function(e){return Sr=0,o.geo.stream(e,Zr),Sr};var Zr={sphere:z,point:z,lineStart:function(){var e,t,n;function r(r,i){var o=Math.sin(i*=Pe),a=Math.cos(i),s=w((r*=Pe)-e),u=Math.cos(s);Sr+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=n*o-t*a*u)*s),t*o+n*a*u),e=r,t=o,n=a}Zr.point=function(i,o){e=i*Pe,t=Math.sin(o*=Pe),n=Math.cos(o),Zr.point=r},Zr.lineEnd=function(){Zr.point=Zr.lineEnd=z}},lineEnd:z,polygonStart:z,polygonEnd:z};function Jr(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),o=e(r*i);return[o*i*Math.sin(t),o*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(e*o,r*a),Math.asin(r&&n*o/r)]},n}var Kr=Jr((function(e){return Math.sqrt(2/(1+e))}),(function(e){return 2*Math.asin(e/2)}));(o.geo.azimuthalEqualArea=function(){return Rr(Kr)}).raw=Kr;var Qr=Jr((function(e){var t=Math.acos(e);return t&&t/Math.sin(t)}),O);function ei(e,t){var n=Math.cos(e),r=function(e){return Math.tan(Ae/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),o=n*Math.pow(r(e),i)/i;if(!i)return ri;function a(e,t){o>0?t<-Ne+Ce&&(t=-Ne+Ce):t>Ne-Ce&&(t=Ne-Ce);var n=o/Math.pow(r(t),i);return[n*Math.sin(i*e),o-n*Math.cos(i*e)]}return a.invert=function(e,t){var n=o-t,r=Re(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(o/r,1/i))-Ne]},a}function ti(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;if(w(r)<Ce)return zr;function o(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}return o.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-Re(r)*Math.sqrt(e*e+n*n)]},o}(o.geo.azimuthalEquidistant=function(){return Rr(Qr)}).raw=Qr,(o.geo.conicConformal=function(){return hr(ei)}).raw=ei,(o.geo.conicEquidistant=function(){return hr(ti)}).raw=ti;var ni=Jr((function(e){return 1/e}),Math.atan);function ri(e,t){return[e,Math.log(Math.tan(Ae/4+t/2))]}function ii(e){var t,n=Rr(e),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var a=o.apply(n,arguments);if(a===n){if(t=null==e){var s=Ae*r(),u=i();o([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else t&&(a=null);return a},n.clipExtent(null)}(o.geo.gnomonic=function(){return Rr(ni)}).raw=ni,ri.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ne]},(o.geo.mercator=function(){return ii(ri)}).raw=ri;var oi=Jr((function(){return 1}),Math.asin);(o.geo.orthographic=function(){return Rr(oi)}).raw=oi;var ai=Jr((function(e){return 1/(1+e)}),(function(e){return 2*Math.atan(e)}));function si(e,t){return[Math.log(Math.tan(Ae/4+t/2)),-e]}function ui(e){return e[0]}function li(e){return e[1]}function ci(e){for(var t=e.length,n=[0,1],r=2,i=2;i<t;i++){for(;r>1&&De(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function hi(e,t){return e[0]-t[0]||e[1]-t[1]}(o.geo.stereographic=function(){return Rr(ai)}).raw=ai,si.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ne]},(o.geo.transverseMercator=function(){var e=ii(si),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=si,o.geom={},o.geom.hull=function(e){var t=ui,n=li;if(arguments.length)return r(e);function r(e){if(e.length<3)return[];var r,i=_t(t),o=_t(n),a=e.length,s=[],u=[];for(r=0;r<a;r++)s.push([+i.call(this,e[r],r),+o.call(this,e[r],r),r]);for(s.sort(hi),r=0;r<a;r++)u.push([s[r][0],-s[r][1]]);var l=ci(s),c=ci(u),h=c[0]===l[0],f=c[c.length-1]===l[l.length-1],p=[];for(r=l.length-1;r>=0;--r)p.push(e[s[l[r]][2]]);for(r=+h;r<c.length-f;++r)p.push(e[s[c[r]][2]]);return p}return r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},o.geom.polygon=function(e){return $(e,fi),e};var fi=o.geom.polygon.prototype=[];function pi(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function di(e,t,n,r){var i=e[0],o=n[0],a=t[0]-i,s=r[0]-o,u=e[1],l=n[1],c=t[1]-u,h=r[1]-l,f=(s*(u-l)-h*(i-o))/(h*a-s*c);return[i+f*a,u+f*c]}function gi(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}fi.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},fi.centroid=function(e){var t,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o*e,a*e]},fi.clip=function(e){for(var t,n,r,i,o,a,s=gi(e),u=-1,l=this.length-gi(this),c=this[l-1];++u<l;){for(t=e.slice(),e.length=0,i=this[u],o=t[(r=t.length-s)-1],n=-1;++n<r;)pi(a=t[n],c,i)?(pi(o,c,i)||e.push(di(o,a,c,i)),e.push(a)):pi(o,c,i)&&e.push(di(o,a,c,i)),o=a;s&&e.push(e[0]),c=i}return e};var mi,yi,vi,_i,bi,xi=[],wi=[];function Ei(){ji(this),this.edge=this.site=this.circle=null}function Si(e){var t=xi.pop()||new Ei;return t.site=e,t}function Ti(e){Oi(e),vi.remove(e),xi.push(e),ji(e)}function ki(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},o=e.P,a=e.N,s=[e];Ti(e);for(var u=o;u.circle&&w(n-u.circle.x)<Ce&&w(r-u.circle.cy)<Ce;)o=u.P,s.unshift(u),Ti(u),u=o;s.unshift(u),Oi(u);for(var l=a;l.circle&&w(n-l.circle.x)<Ce&&w(r-l.circle.cy)<Ce;)a=l.N,s.push(l),Ti(l),l=a;s.push(l),Oi(l);var c,h=s.length;for(c=1;c<h;++c)l=s[c],u=s[c-1],Bi(l.edge,u.site,l.site,i);u=s[0],(l=s[h-1]).edge=Fi(u.site,l.site,null,i),Pi(u),Pi(l)}function Ci(e){for(var t,n,r,i,o=e.x,a=e.y,s=vi._;s;)if((r=Ii(s,a)-o)>Ce)s=s.L;else{if(!((i=o-Ai(s,a))>Ce)){r>-Ce?(t=s.P,n=s):i>-Ce?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var u=Si(e);if(vi.insert(t,u),t||n){if(t===n)return Oi(t),n=Si(t.site),vi.insert(u,n),u.edge=n.edge=Fi(t.site,u.site),Pi(t),void Pi(n);if(n){Oi(t),Oi(n);var l=t.site,c=l.x,h=l.y,f=e.x-c,p=e.y-h,d=n.site,g=d.x-c,m=d.y-h,y=2*(f*m-p*g),v=f*f+p*p,_=g*g+m*m,b={x:(m*v-p*_)/y+c,y:(f*_-g*v)/y+h};Bi(n.edge,l,d,b),u.edge=Fi(l,e,null,b),n.edge=Fi(e,d,null,b),Pi(t),Pi(n)}else u.edge=Fi(t.site,u.site)}}function Ii(e,t){var n=e.site,r=n.x,i=n.y,o=i-t;if(!o)return r;var a=e.P;if(!a)return-1/0;var s=(n=a.site).x,u=n.y,l=u-t;if(!l)return s;var c=s-r,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+r:(r+s)/2}function Ai(e,t){var n=e.N;if(n)return Ii(n,t);var r=e.site;return r.y===t?r.x:1/0}function Mi(e){this.site=e,this.edges=[]}function Li(e,t){return t.angle-e.angle}function Ni(){ji(this),this.x=this.y=this.arc=this.site=this.cy=null}function Pi(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,o=n.site;if(r!==o){var a=i.x,s=i.y,u=r.x-a,l=r.y-s,c=o.x-a,h=2*(u*(m=o.y-s)-l*c);if(!(h>=-Ie)){var f=u*u+l*l,p=c*c+m*m,d=(m*f-l*p)/h,g=(u*p-c*f)/h,m=g+s,y=wi.pop()||new Ni;y.arc=e,y.site=i,y.x=d+a,y.y=m+Math.sqrt(d*d+g*g),y.cy=m,e.circle=y;for(var v=null,_=bi._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){v=_.P;break}_=_.L}else{if(!_.R){v=_;break}_=_.R}bi.insert(v,y),v||(_i=y)}}}}function Oi(e){var t=e.circle;t&&(t.P||(_i=t.N),bi.remove(t),wi.push(t),ji(t),e.circle=null)}function Ri(e,t){var n=e.b;if(n)return!0;var r,i,o=e.a,a=t[0][0],s=t[1][0],u=t[0][1],l=t[1][1],c=e.l,h=e.r,f=c.x,p=c.y,d=h.x,g=h.y,m=(f+d)/2,y=(p+g)/2;if(g===p){if(m<a||m>=s)return;if(f>d){if(o){if(o.y>=l)return}else o={x:m,y:u};n={x:m,y:l}}else{if(o){if(o.y<u)return}else o={x:m,y:l};n={x:m,y:u}}}else if(i=y-(r=(f-d)/(g-p))*m,r<-1||r>1)if(f>d){if(o){if(o.y>=l)return}else o={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else{if(o){if(o.y<u)return}else o={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else if(p<g){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return e.a=o,e.b=n,!0}function Di(e,t){this.l=e,this.r=t,this.a=this.b=null}function Fi(e,t,n,r){var i=new Di(e,t);return mi.push(i),n&&Bi(i,e,t,n),r&&Bi(i,t,e,r),yi[e.i].edges.push(new Ui(i,e,t)),yi[t.i].edges.push(new Ui(i,t,e)),i}function zi(e,t,n){var r=new Di(e,null);return r.a=t,r.b=n,mi.push(r),r}function Bi(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function Ui(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Vi(){this._=null}function ji(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function qi(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Gi(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function $i(e){for(;e.L;)e=e.L;return e}function Hi(e,t){var n,r,i,o=e.sort(Xi).pop();for(mi=[],yi=new Array(e.length),vi=new Vi,bi=new Vi;;)if(i=_i,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(yi[o.i]=new Mi(o),Ci(o),n=o.x,r=o.y),o=e.pop();else{if(!i)break;ki(i.arc)}t&&(function(e){for(var t,n=mi,r=ur(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)(!Ri(t=n[i],e)||!r(t)||w(t.a.x-t.b.x)<Ce&&w(t.a.y-t.b.y)<Ce)&&(t.a=t.b=null,n.splice(i,1))}(t),function(e){for(var t,n,r,i,o,a,s,u,l,c,h=e[0][0],f=e[1][0],p=e[0][1],d=e[1][1],g=yi,m=g.length;m--;)if((o=g[m])&&o.prepare())for(u=(s=o.edges).length,a=0;a<u;)r=(c=s[a].end()).x,i=c.y,t=(l=s[++a%u].start()).x,n=l.y,(w(r-t)>Ce||w(i-n)>Ce)&&(s.splice(a,0,new Ui(zi(o.site,c,w(r-h)<Ce&&d-i>Ce?{x:h,y:w(t-h)<Ce?n:d}:w(i-d)<Ce&&f-r>Ce?{x:w(n-d)<Ce?t:f,y:d}:w(r-f)<Ce&&i-p>Ce?{x:f,y:w(t-f)<Ce?n:p}:w(i-p)<Ce&&r-h>Ce?{x:w(n-p)<Ce?t:h,y:p}:null),o.site,null)),++u)}(t));var a={cells:yi,edges:mi};return vi=bi=mi=yi=null,a}function Xi(e,t){return t.y-e.y||t.x-e.x}Mi.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Li),t.length},Ui.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Vi.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=$i(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(qi(this,n),n=(e=n).U),n.C=!1,r.C=!0,Gi(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Gi(this,n),n=(e=n).U),n.C=!1,r.C=!0,qi(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,o=e.L,a=e.R;if(n=o?a?$i(a):o:a,i?i.L===e?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=a,a.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,qi(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Gi(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,qi(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,Gi(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,qi(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,Gi(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},o.geom.voronoi=function(e){var t=ui,n=li,r=t,i=n,o=Wi;if(e)return a(e);function a(e){var t=new Array(e.length),n=o[0][0],r=o[0][1],i=o[1][0],a=o[1][1];return Hi(s(e),o).cells.forEach((function(o,s){var u=o.edges,l=o.site;(t[s]=u.length?u.map((function(e){var t=e.start();return[t.x,t.y]})):l.x>=n&&l.x<=i&&l.y>=r&&l.y<=a?[[n,a],[i,a],[i,r],[n,r]]:[]).point=e[s]})),t}function s(e){return e.map((function(e,t){return{x:Math.round(r(e,t)/Ce)*Ce,y:Math.round(i(e,t)/Ce)*Ce,i:t}}))}return a.links=function(e){return Hi(s(e)).edges.filter((function(e){return e.l&&e.r})).map((function(t){return{source:e[t.l.i],target:e[t.r.i]}}))},a.triangles=function(e){var t=[];return Hi(s(e)).cells.forEach((function(n,r){for(var i,o,a,s,u=n.site,l=n.edges.sort(Li),c=-1,h=l.length,f=l[h-1].edge,p=f.l===u?f.r:f.l;++c<h;)f,i=p,p=(f=l[c].edge).l===u?f.r:f.l,r<i.i&&r<p.i&&(a=i,s=p,((o=u).x-s.x)*(a.y-o.y)-(o.x-a.x)*(s.y-o.y)<0)&&t.push([e[r],e[i.i],e[p.i]])})),t},a.x=function(e){return arguments.length?(r=_t(t=e),a):t},a.y=function(e){return arguments.length?(i=_t(n=e),a):n},a.clipExtent=function(e){return arguments.length?(o=null==e?Wi:e,a):o===Wi?null:o},a.size=function(e){return arguments.length?a.clipExtent(e&&[[0,0],e]):o===Wi?null:o&&o[1]},a};var Wi=[[-1e6,-1e6],[1e6,1e6]];function Yi(e){return e.x}function Zi(e){return e.y}function Ji(e,t,n,r,i,o){if(!e(t,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),u=t.nodes;u[0]&&Ji(e,u[0],n,r,a,s),u[1]&&Ji(e,u[1],a,r,i,s),u[2]&&Ji(e,u[2],n,s,a,o),u[3]&&Ji(e,u[3],a,s,i,o)}}function Ki(e,t,n,r,i,o,a){var s,u=1/0;return function e(l,c,h,f,p){if(!(c>o||h>a||f<r||p<i)){if(d=l.point){var d,g=t-l.x,m=n-l.y,y=g*g+m*m;if(y<u){var v=Math.sqrt(u=y);r=t-v,i=n-v,o=t+v,a=n+v,s=d}}for(var _=l.nodes,b=.5*(c+f),x=.5*(h+p),w=(n>=x)<<1|t>=b,E=w+4;w<E;++w)if(l=_[3&w])switch(3&w){case 0:e(l,c,h,b,x);break;case 1:e(l,b,h,f,x);break;case 2:e(l,c,x,b,p);break;case 3:e(l,b,x,f,p)}}}(e,r,i,o,a),s}function Qi(e,t){e=o.rgb(e),t=o.rgb(t);var n=e.r,r=e.g,i=e.b,a=t.r-n,s=t.g-r,u=t.b-i;return function(e){return"#"+ft(Math.round(n+a*e))+ft(Math.round(r+s*e))+ft(Math.round(i+u*e))}}function eo(e,t){var n,r={},i={};for(n in e)n in t?r[n]=oo(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function to(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function no(e,t){var n,r,i,o=ro.lastIndex=io.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=ro.exec(e))&&(r=io.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:to(n,r)})),o=io.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?(t=u[0].x,function(e){return t(e)+""}):function(){return t}:(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}o.geom.delaunay=function(e){return o.geom.voronoi().triangles(e)},o.geom.quadtree=function(e,t,n,r,i){var o,a=ui,s=li;if(o=arguments.length)return a=Yi,s=Zi,3===o&&(i=n,r=t,n=t=0),u(e);function u(e){var u,l,c,h,f,p,d,g,m,y=_t(a),v=_t(s);if(null!=t)p=t,d=n,g=r,m=i;else if(g=m=-(p=d=1/0),l=[],c=[],f=e.length,o)for(h=0;h<f;++h)(u=e[h]).x<p&&(p=u.x),u.y<d&&(d=u.y),u.x>g&&(g=u.x),u.y>m&&(m=u.y),l.push(u.x),c.push(u.y);else for(h=0;h<f;++h){var _=+y(u=e[h],h),b=+v(u,h);_<p&&(p=_),b<d&&(d=b),_>g&&(g=_),b>m&&(m=b),l.push(_),c.push(b)}var x=g-p,E=m-d;function S(e,t,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var u=e.x,l=e.y;if(null!=u)if(w(u-n)+w(l-r)<.01)T(e,t,n,r,i,o,a,s);else{var c=e.point;e.x=e.y=e.point=null,T(e,c,u,l,i,o,a,s),T(e,t,n,r,i,o,a,s)}else e.x=n,e.y=r,e.point=t}else T(e,t,n,r,i,o,a,s)}function T(e,t,n,r,i,o,a,s){var u=.5*(i+a),l=.5*(o+s),c=n>=u,h=r>=l,f=h<<1|c;e.leaf=!1,c?i=u:a=u,h?o=l:s=l,S(e=e.nodes[f]||(e.nodes[f]={leaf:!0,nodes:[],point:null,x:null,y:null}),t,n,r,i,o,a,s)}x>E?m=d+x:g=p+E;var k={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){S(k,e,+y(e,++h),+v(e,h),p,d,g,m)},visit:function(e){Ji(e,k,p,d,g,m)},find:function(e){return Ki(k,e[0],e[1],p,d,g,m)}};if(h=-1,null==t){for(;++h<f;)S(k,e[h],l[h],c[h],p,d,g,m);--h}else e.forEach(k.add);return l=c=e=u=null,k}return u.x=function(e){return arguments.length?(a=e,u):a},u.y=function(e){return arguments.length?(s=e,u):s},u.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),u):null==t?null:[[t,n],[r,i]]},u.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),u):null==t?null:[r-t,i-n]},u},o.interpolateRgb=Qi,o.interpolateObject=eo,o.interpolateNumber=to,o.interpolateString=no;var ro=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,io=new RegExp(ro.source,"g");function oo(e,t){for(var n,r=o.interpolators.length;--r>=0&&!(n=o.interpolators[r](e,t)););return n}function ao(e,t){var n,r=[],i=[],o=e.length,a=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)r.push(oo(e[n],t[n]));for(;n<o;++n)i[n]=e[n];for(;n<a;++n)i[n]=t[n];return function(e){for(n=0;n<s;++n)i[n]=r[n](e);return i}}o.interpolate=oo,o.interpolators=[function(e,t){var n=typeof t;return("string"===n?vt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?Qi:no:t instanceof $e?Qi:Array.isArray(t)?ao:"object"===n&&isNaN(t)?eo:to)(e,t)}],o.interpolateArray=ao;var so=function(){return O},uo=o.map({linear:so,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return po},cubic:function(){return go},sin:function(){return yo},exp:function(){return vo},circle:function(){return _o},elastic:function(e,t){var n;arguments.length<2&&(t=.45);arguments.length?n=t/Me*Math.asin(1/e):(e=1,n=t/4);return function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Me/t)}},back:function(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return bo}}),lo=o.map({in:O,out:ho,"in-out":fo,"out-in":function(e){return fo(ho(e))}});function co(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function ho(e){return function(t){return 1-e(1-t)}}function fo(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function po(e){return e*e}function go(e){return e*e*e}function mo(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function yo(e){return 1-Math.cos(e*Ne)}function vo(e){return Math.pow(2,10*(e-1))}function _o(e){return 1-Math.sqrt(1-e*e)}function bo(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function xo(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function wo(e){var t,n,r,i=[e.a,e.b],o=[e.c,e.d],a=So(i),s=Eo(i,o),u=So(((t=o)[0]+=(r=-s)*(n=i)[0],t[1]+=r*n[1],t))||0;i[0]*o[1]<o[0]*i[1]&&(i[0]*=-1,i[1]*=-1,a*=-1,s*=-1),this.rotate=(a?Math.atan2(i[1],i[0]):Math.atan2(-o[0],o[1]))*Oe,this.translate=[e.e,e.f],this.scale=[a,u],this.skew=u?Math.atan2(s,u)*Oe:0}function Eo(e,t){return e[0]*t[0]+e[1]*t[1]}function So(e){var t=Math.sqrt(Eo(e,e));return t&&(e[0]/=t,e[1]/=t),t}o.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=uo.get(n)||so,co((r=lo.get(r)||O)(n.apply(null,a.call(arguments,1))))},o.interpolateHcl=function(e,t){e=o.hcl(e),t=o.hcl(t);var n=e.h,r=e.c,i=e.l,a=t.h-n,s=t.c-r,u=t.l-i;isNaN(s)&&(s=0,r=isNaN(r)?t.c:r);isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:a<-180&&(a+=360);return function(e){return Je(n+a*e,r+s*e,i+u*e)+""}},o.interpolateHsl=function(e,t){e=o.hsl(e),t=o.hsl(t);var n=e.h,r=e.s,i=e.l,a=t.h-n,s=t.s-r,u=t.l-i;isNaN(s)&&(s=0,r=isNaN(r)?t.s:r);isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:a<-180&&(a+=360);return function(e){return We(n+a*e,r+s*e,i+u*e)+""}},o.interpolateLab=function(e,t){e=o.lab(e),t=o.lab(t);var n=e.l,r=e.a,i=e.b,a=t.l-n,s=t.a-r,u=t.b-i;return function(e){return rt(n+a*e,r+s*e,i+u*e)+""}},o.interpolateRound=xo,o.transform=function(e){var t=u.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new wo(n?n.matrix:To)})(e)},wo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var To={a:1,b:0,c:0,d:1,e:0,f:0};function ko(e){return e.length?e.pop()+",":""}function Co(e,t){var n=[],r=[];return e=o.transform(e),t=o.transform(t),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:to(e[0],t[0])},{i:i-2,x:to(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(e.translate,t.translate,n,r),function(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(ko(n)+"rotate(",null,")")-2,x:to(e,t)})):t&&n.push(ko(n)+"rotate("+t+")")}(e.rotate,t.rotate,n,r),function(e,t,n,r){e!==t?r.push({i:n.push(ko(n)+"skewX(",null,")")-2,x:to(e,t)}):t&&n.push(ko(n)+"skewX("+t+")")}(e.skew,t.skew,n,r),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(ko(n)+"scale(",null,",",null,")");r.push({i:i-4,x:to(e[0],t[0])},{i:i-2,x:to(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(ko(n)+"scale("+t+")")}(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,o=r.length;++i<o;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function Io(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Ao(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Mo(e){for(var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;var n=Lo(e),r=Lo(t),i=n.pop(),o=r.pop(),a=null;for(;i===o;)a=i,i=n.pop(),o=r.pop();return a}(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Lo(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function No(e){e.fixed|=2}function Po(e){e.fixed&=-7}function Oo(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Ro(e){e.fixed&=-5}function Do(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var o,a=e.nodes,s=a.length,u=-1;++u<s;)null!=(o=a[u])&&(Do(o,t,n),e.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var l=t*n[e.point.index];e.charge+=e.pointCharge=l,r+=l*e.point.x,i+=l*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}o.interpolateTransform=Co,o.layout={},o.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Mo(e[n]));return t}},o.layout.chord=function(){var e,t,n,r,i,a,s,u={},l=0;function c(){var u,c,f,p,d,g={},m=[],y=o.range(r),v=[];for(e=[],t=[],u=0,p=-1;++p<r;){for(c=0,d=-1;++d<r;)c+=n[p][d];m.push(c),v.push(o.range(r)),u+=c}for(i&&y.sort((function(e,t){return i(m[e],m[t])})),a&&v.forEach((function(e,t){e.sort((function(e,r){return a(n[t][e],n[t][r])}))})),u=(Me-l*r)/u,c=0,p=-1;++p<r;){for(f=c,d=-1;++d<r;){var _=y[p],b=v[_][d],x=n[_][b],w=c,E=c+=x*u;g[_+"-"+b]={index:_,subindex:b,startAngle:w,endAngle:E,value:x}}t[_]={index:_,startAngle:f,endAngle:c,value:(c-f)/u},c+=l}for(p=-1;++p<r;)for(d=p-1;++d<r;){var S=g[p+"-"+d],T=g[d+"-"+p];(S.value||T.value)&&e.push(S.value<T.value?{source:T,target:S}:{source:S,target:T})}s&&h()}function h(){e.sort((function(e,t){return s((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)}))}return u.matrix=function(i){return arguments.length?(r=(n=i)&&n.length,e=t=null,u):n},u.padding=function(n){return arguments.length?(l=n,e=t=null,u):l},u.sortGroups=function(n){return arguments.length?(i=n,e=t=null,u):i},u.sortSubgroups=function(t){return arguments.length?(a=t,e=null,u):a},u.sortChords=function(t){return arguments.length?(s=t,e&&h(),u):s},u.chords=function(){return e||c(),e},u.groups=function(){return t||c(),t},u},o.layout.force=function(){var e,t,n,r,i,a,s={},u=o.dispatch("start","tick","end"),l=[1,1],c=.9,h=Fo,f=zo,p=-30,d=Bo,g=.1,m=.64,y=[],v=[];function _(e){return function(t,n,r,i){if(t.point!==e){var o=t.cx-e.x,a=t.cy-e.y,s=i-n,u=o*o+a*a;if(s*s/m<u){if(u<d){var l=t.charge/u;e.px-=o*l,e.py-=a*l}return!0}if(t.point&&u&&u<d){l=t.pointCharge/u;e.px-=o*l,e.py-=a*l}}return!t.charge}}function b(e){e.px=o.event.x,e.py=o.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return e=null,u.end({type:"end",alpha:n=0}),!0;var t,s,h,f,d,m,b,x,w,E=y.length,S=v.length;for(s=0;s<S;++s)f=(h=v[s]).source,(m=(x=(d=h.target).x-f.x)*x+(w=d.y-f.y)*w)&&(x*=m=n*i[s]*((m=Math.sqrt(m))-r[s])/m,w*=m,d.x-=x*(b=f.weight+d.weight?f.weight/(f.weight+d.weight):.5),d.y-=w*b,f.x+=x*(b=1-b),f.y+=w*b);if((b=n*g)&&(x=l[0]/2,w=l[1]/2,s=-1,b))for(;++s<E;)(h=y[s]).x+=(x-h.x)*b,h.y+=(w-h.y)*b;if(p)for(Do(t=o.geom.quadtree(y),n,a),s=-1;++s<E;)(h=y[s]).fixed||t.visit(_(h));for(s=-1;++s<E;)(h=y[s]).fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*c,h.y-=(h.py-(h.py=h.y))*c);u.tick({type:"tick",alpha:n})},s.nodes=function(e){return arguments.length?(y=e,s):y},s.links=function(e){return arguments.length?(v=e,s):v},s.size=function(e){return arguments.length?(l=e,s):l},s.linkDistance=function(e){return arguments.length?(h="function"===typeof e?e:+e,s):h},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(f="function"===typeof e?e:+e,s):f},s.friction=function(e){return arguments.length?(c=+e,s):c},s.charge=function(e){return arguments.length?(p="function"===typeof e?e:+e,s):p},s.chargeDistance=function(e){return arguments.length?(d=e*e,s):Math.sqrt(d)},s.gravity=function(e){return arguments.length?(g=+e,s):g},s.theta=function(e){return arguments.length?(m=e*e,s):Math.sqrt(m)},s.alpha=function(t){return arguments.length?(t=+t,n?t>0?n=t:(e.c=null,e.t=NaN,e=null,u.end({type:"end",alpha:n=0})):t>0&&(u.start({type:"start",alpha:n=t}),e=Ct(s.tick)),s):n},s.start=function(){var e,t,n,o=y.length,u=v.length,c=l[0],d=l[1];for(e=0;e<o;++e)(n=y[e]).index=e,n.weight=0;for(e=0;e<u;++e)"number"==typeof(n=v[e]).source&&(n.source=y[n.source]),"number"==typeof n.target&&(n.target=y[n.target]),++n.source.weight,++n.target.weight;for(e=0;e<o;++e)n=y[e],isNaN(n.x)&&(n.x=g("x",c)),isNaN(n.y)&&(n.y=g("y",d)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"===typeof h)for(e=0;e<u;++e)r[e]=+h.call(this,v[e],e);else for(e=0;e<u;++e)r[e]=h;if(i=[],"function"===typeof f)for(e=0;e<u;++e)i[e]=+f.call(this,v[e],e);else for(e=0;e<u;++e)i[e]=f;if(a=[],"function"===typeof p)for(e=0;e<o;++e)a[e]=+p.call(this,y[e],e);else for(e=0;e<o;++e)a[e]=p;function g(n,r){if(!t){for(t=new Array(o),l=0;l<o;++l)t[l]=[];for(l=0;l<u;++l){var i=v[l];t[i.source.index].push(i.target),t[i.target.index].push(i.source)}}for(var a,s=t[e],l=-1,c=s.length;++l<c;)if(!isNaN(a=s[l][n]))return a;return Math.random()*r}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(t||(t=o.behavior.drag().origin(O).on("dragstart.force",No).on("drag.force",b).on("dragend.force",Po)),!arguments.length)return t;this.on("mouseover.force",Oo).on("mouseout.force",Ro).call(t)},o.rebind(s,u,"on")};var Fo=20,zo=1,Bo=1/0;function Uo(e,t){return o.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=Ho,e}function Vo(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function jo(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(o=e.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(e=r.pop());)t(e)}function qo(e){return e.children}function Go(e){return e.value}function $o(e,t){return t.value-e.value}function Ho(e){return o.merge(e.map((function(e){return(e.children||[]).map((function(t){return{source:e,target:t}}))})))}o.layout.hierarchy=function(){var e=$o,t=qo,n=Go;function r(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(l=t.call(r,o,o.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)a.push(c=l[u]),c.parent=o,c.depth=o.depth+1;n&&(o.value=0),o.children=l}else n&&(o.value=+n.call(r,o,o.depth)||0),delete o.children;return jo(i,(function(t){var r,i;e&&(r=t.children)&&r.sort(e),n&&(i=t.parent)&&(i.value+=t.value)})),s}return r.sort=function(t){return arguments.length?(e=t,r):e},r.children=function(e){return arguments.length?(t=e,r):t},r.value=function(e){return arguments.length?(n=e,r):n},r.revalue=function(e){return n&&(Vo(e,(function(e){e.children&&(e.value=0)})),jo(e,(function(e){var t;e.children||(e.value=+n.call(r,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)}))),e},r},o.layout.partition=function(){var e=o.layout.hierarchy(),t=[1,1];function n(e,t,r,i){var o=e.children;if(e.x=t,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(a=o.length)){var a,s,u,l=-1;for(r=e.value?r/e.value:0;++l<a;)n(s=o[l],t,u=s.value*r,i),t+=u}}function r(e){var t=e.children,n=0;if(t&&(i=t.length))for(var i,o=-1;++o<i;)n=Math.max(n,r(t[o]));return 1+n}function i(i,o){var a=e.call(this,i,o);return n(a[0],0,t[0],t[1]/r(a[0])),a}return i.size=function(e){return arguments.length?(t=e,i):t},Uo(i,e)},o.layout.pie=function(){var e=Number,t=Xo,n=0,r=Me,i=0;function a(s){var u,l=s.length,c=s.map((function(t,n){return+e.call(a,t,n)})),h=+("function"===typeof n?n.apply(this,arguments):n),f=("function"===typeof r?r.apply(this,arguments):r)-h,p=Math.min(Math.abs(f)/l,+("function"===typeof i?i.apply(this,arguments):i)),d=p*(f<0?-1:1),g=o.sum(c),m=g?(f-l*d)/g:0,y=o.range(l),v=[];return null!=t&&y.sort(t===Xo?function(e,t){return c[t]-c[e]}:function(e,n){return t(s[e],s[n])}),y.forEach((function(e){v[e]={data:s[e],value:u=c[e],startAngle:h,endAngle:h+=u*m+d,padAngle:p}})),v}return a.value=function(t){return arguments.length?(e=t,a):e},a.sort=function(e){return arguments.length?(t=e,a):t},a.startAngle=function(e){return arguments.length?(n=e,a):n},a.endAngle=function(e){return arguments.length?(r=e,a):r},a.padAngle=function(e){return arguments.length?(i=e,a):i},a};var Xo={};function Wo(e){return e.x}function Yo(e){return e.y}function Zo(e,t,n){e.y0=t,e.y=n}o.layout.stack=function(){var e=O,t=Qo,n=ea,r=Zo,i=Wo,a=Yo;function s(u,l){if(!(p=u.length))return u;var c=u.map((function(t,n){return e.call(s,t,n)})),h=c.map((function(e){return e.map((function(e,t){return[i.call(s,e,t),a.call(s,e,t)]}))})),f=t.call(s,h,l);c=o.permute(c,f),h=o.permute(h,f);var p,d,g,m,y=n.call(s,h,l),v=c[0].length;for(g=0;g<v;++g)for(r.call(s,c[0][g],m=y[g],h[0][g][1]),d=1;d<p;++d)r.call(s,c[d][g],m+=h[d-1][g][1],h[d][g][1]);return u}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(e){return arguments.length?(t="function"===typeof e?e:Jo.get(e)||Qo,s):t},s.offset=function(e){return arguments.length?(n="function"===typeof e?e:Ko.get(e)||ea,s):n},s.x=function(e){return arguments.length?(i=e,s):i},s.y=function(e){return arguments.length?(a=e,s):a},s.out=function(e){return arguments.length?(r=e,s):r},s};var Jo=o.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(ta),a=e.map(na),s=o.range(r).sort((function(e,t){return i[e]-i[t]})),u=0,l=0,c=[],h=[];for(t=0;t<r;++t)n=s[t],u<l?(u+=a[n],c.push(n)):(l+=a[n],h.push(n));return h.reverse().concat(c)},reverse:function(e){return o.range(e.length).reverse()},default:Qo}),Ko=o.map({silhouette:function(e){var t,n,r,i=e.length,o=e[0].length,a=[],s=0,u=[];for(n=0;n<o;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];r>s&&(s=r),a.push(r)}for(n=0;n<o;++n)u[n]=(s-a[n])/2;return u},wiggle:function(e){var t,n,r,i,o,a,s,u,l,c=e.length,h=e[0],f=h.length,p=[];for(p[0]=u=l=0,n=1;n<f;++n){for(t=0,i=0;t<c;++t)i+=e[t][n][1];for(t=0,o=0,s=h[n][0]-h[n-1][0];t<c;++t){for(r=0,a=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)a+=(e[r][n][1]-e[r][n-1][1])/s;o+=a*e[t][n][1]}p[n]=u-=i?o/i*s:0,u<l&&(l=u)}for(n=0;n<f;++n)p[n]-=l;return p},expand:function(e){var t,n,r,i=e.length,o=e[0].length,a=1/i,s=[];for(n=0;n<o;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];if(r)for(t=0;t<i;t++)e[t][n][1]/=r;else for(t=0;t<i;t++)e[t][n][1]=a}for(n=0;n<o;++n)s[n]=0;return s},zero:ea});function Qo(e){return o.range(e.length)}function ea(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function ta(e){for(var t,n=1,r=0,i=e[0][1],o=e.length;n<o;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function na(e){return e.reduce(ra,0)}function ra(e,t){return e+t[1]}function ia(e,t){return oa(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function oa(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,o=[];++n<=t;)o[n]=i*n+r;return o}function aa(e){return[o.min(e),o.max(e)]}function sa(e,t){return e.value-t.value}function ua(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function la(e,t){e._pack_next=t,t._pack_prev=e}function ca(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function ha(e){if((t=e.children)&&(u=t.length)){var t,n,r,i,o,a,s,u,l=1/0,c=-1/0,h=1/0,f=-1/0;if(t.forEach(fa),(n=t[0]).x=-n.r,n.y=0,_(n),u>1&&((r=t[1]).x=r.r,r.y=0,_(r),u>2))for(ga(n,r,i=t[2]),_(i),ua(n,i),n._pack_prev=i,ua(i,r),r=n._pack_next,o=3;o<u;o++){ga(n,r,i=t[o]);var p=0,d=1,g=1;for(a=r._pack_next;a!==r;a=a._pack_next,d++)if(ca(a,i)){p=1;break}if(1==p)for(s=n._pack_prev;s!==a._pack_prev&&!ca(s,i);s=s._pack_prev,g++);p?(d<g||d==g&&r.r<n.r?la(n,r=a):la(n=s,r),o--):(ua(n,i),r=i,_(i))}var m=(l+c)/2,y=(h+f)/2,v=0;for(o=0;o<u;o++)(i=t[o]).x-=m,i.y-=y,v=Math.max(v,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=v,t.forEach(pa)}function _(e){l=Math.min(e.x-e.r,l),c=Math.max(e.x+e.r,c),h=Math.min(e.y-e.r,h),f=Math.max(e.y+e.r,f)}}function fa(e){e._pack_next=e._pack_prev=e}function pa(e){delete e._pack_next,delete e._pack_prev}function da(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var o=-1,a=i.length;++o<a;)da(i[o],t,n,r)}function ga(e,t,n){var r=e.r+n.r,i=t.x-e.x,o=t.y-e.y;if(r&&(i||o)){var a=t.r+n.r,s=i*i+o*o,u=.5+((r*=r)-(a*=a))/(2*s),l=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=e.x+u*i+l*o,n.y=e.y+u*o-l*i}else n.x=e.x+r,n.y=e.y}function ma(e,t){return e.parent==t.parent?1:2}function ya(e){var t=e.children;return t.length?t[0]:e.t}function va(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function _a(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function ba(e,t,n){return e.a.parent===t.parent?e.a:n}function xa(e){var t=e.children;return t&&t.length?xa(t[0]):e}function wa(e){var t,n=e.children;return n&&(t=n.length)?wa(n[t-1]):e}function Ea(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Sa(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],o=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function Ta(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function ka(e){return e.rangeExtent?e.rangeExtent():Ta(e.range())}function Ca(e,t,n,r){var i=n(e[0],e[1]),o=r(t[0],t[1]);return function(e){return o(i(e))}}function Ia(e,t){var n,r=0,i=e.length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}o.layout.histogram=function(){var e=!0,t=Number,n=aa,r=ia;function i(i,a){for(var s,u,l=[],c=i.map(t,this),h=n.call(this,c,a),f=r.call(this,h,c,a),p=(a=-1,c.length),d=f.length-1,g=e?1:1/p;++a<d;)(s=l[a]=[]).dx=f[a+1]-(s.x=f[a]),s.y=0;if(d>0)for(a=-1;++a<p;)(u=c[a])>=h[0]&&u<=h[1]&&((s=l[o.bisect(f,u,1,d)-1]).y+=g,s.push(i[a]));return l}return i.value=function(e){return arguments.length?(t=e,i):t},i.range=function(e){return arguments.length?(n=_t(e),i):n},i.bins=function(e){return arguments.length?(r="number"===typeof e?function(t){return oa(t,e)}:_t(e),i):r},i.frequency=function(t){return arguments.length?(e=!!t,i):e},i},o.layout.pack=function(){var e,t=o.layout.hierarchy().sort(sa),n=0,r=[1,1];function i(i,o){var a=t.call(this,i,o),s=a[0],u=r[0],l=r[1],c=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};if(s.x=s.y=0,jo(s,(function(e){e.r=+c(e.value)})),jo(s,ha),n){var h=n*(e?1:Math.max(2*s.r/u,2*s.r/l))/2;jo(s,(function(e){e.r+=h})),jo(s,ha),jo(s,(function(e){e.r-=h}))}return da(s,u/2,l/2,e?1:1/Math.max(2*s.r/u,2*s.r/l)),a}return i.size=function(e){return arguments.length?(r=e,i):r},i.radius=function(t){return arguments.length?(e=null==t||"function"===typeof t?t:+t,i):e},i.padding=function(e){return arguments.length?(n=+e,i):n},Uo(i,t)},o.layout.tree=function(){var e=o.layout.hierarchy().sort(null).value(null),t=ma,n=[1,1],r=null;function i(i,o){var l=e.call(this,i,o),c=l[0],h=function(e){var t,n={A:null,children:[e]},r=[n];for(;null!=(t=r.pop());)for(var i,o=t.children,a=0,s=o.length;a<s;++a)r.push((o[a]=i={_:o[a],parent:t,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}(c);if(jo(h,a),h.parent.m=-h.z,Vo(h,s),r)Vo(c,u);else{var f=c,p=c,d=c;Vo(c,(function(e){e.x<f.x&&(f=e),e.x>p.x&&(p=e),e.depth>d.depth&&(d=e)}));var g=t(f,p)/2-f.x,m=n[0]/(p.x+t(p,f)/2+g),y=n[1]/(d.depth||1);Vo(c,(function(e){e.x=(e.x+g)*m,e.y=e.depth*y}))}return l}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n.length){!function(e){var t,n=0,r=0,i=e.children,o=i.length;for(;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,s=n,u=o.parent.children[0],l=o.m,c=a.m,h=s.m,f=u.m;s=va(s),o=ya(o),s&&o;)u=ya(u),(a=va(a)).a=e,(i=s.z+h-o.z-l+t(s._,o._))>0&&(_a(ba(s,e,r),e,i),l+=i,c+=i),h+=s.m,l+=o.m,f+=u.m,c+=a.m;s&&!va(a)&&(a.t=s,a.m+=h-c),o&&!ya(u)&&(u.t=o,u.m+=l-f,r=e)}return r}(e,i,e.parent.A||r[0])}function s(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function u(e){e.x*=n[0],e.y=e.depth*n[1]}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(r=null==(n=e)?u:null,i):r?null:n},i.nodeSize=function(e){return arguments.length?(r=null==(n=e)?null:u,i):r?n:null},Uo(i,e)},o.layout.cluster=function(){var e=o.layout.hierarchy().sort(null).value(null),t=ma,n=[1,1],r=!1;function i(i,a){var s,u=e.call(this,i,a),l=u[0],c=0;jo(l,(function(e){var n=e.children;n&&n.length?(e.x=function(e){return e.reduce((function(e,t){return e+t.x}),0)/e.length}(n),e.y=function(e){return 1+o.max(e,(function(e){return e.y}))}(n)):(e.x=s?c+=t(e,s):0,e.y=0,s=e)}));var h=xa(l),f=wa(l),p=h.x-t(h,f)/2,d=f.x+t(f,h)/2;return jo(l,r?function(e){e.x=(e.x-l.x)*n[0],e.y=(l.y-e.y)*n[1]}:function(e){e.x=(e.x-p)/(d-p)*n[0],e.y=(1-(l.y?e.y/l.y:1))*n[1]}),u}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(r=null==(n=e),i):r?null:n},i.nodeSize=function(e){return arguments.length?(r=null!=(n=e),i):r?n:null},Uo(i,e)},o.layout.treemap=function(){var e,t=o.layout.hierarchy(),n=Math.round,r=[1,1],i=null,a=Ea,s=!1,u="squarify",l=.5*(1+Math.sqrt(5));function c(e,t){for(var n,r,i=-1,o=e.length;++i<o;)r=(n=e[i]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function h(e){var t=e.children;if(t&&t.length){var n,r,i,o=a(e),s=[],l=t.slice(),f=1/0,g="slice"===u?o.dx:"dice"===u?o.dy:"slice-dice"===u?1&e.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(c(l,o.dx*o.dy/e.value),s.area=0;(i=l.length)>0;)s.push(n=l[i-1]),s.area+=n.area,"squarify"!==u||(r=p(s,g))<=f?(l.pop(),f=r):(s.area-=s.pop().area,d(s,g,o,!1),g=Math.min(o.dx,o.dy),s.length=s.area=0,f=1/0);s.length&&(d(s,g,o,!0),s.length=s.area=0),t.forEach(h)}}function f(e){var t=e.children;if(t&&t.length){var n,r=a(e),i=t.slice(),o=[];for(c(i,r.dx*r.dy/e.value),o.area=0;n=i.pop();)o.push(n),o.area+=n.area,null!=n.z&&(d(o,n.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);t.forEach(f)}}function p(e,t){for(var n,r=e.area,i=0,o=1/0,a=-1,s=e.length;++a<s;)(n=e[a].area)&&(n<o&&(o=n),n>i&&(i=n));return t*=t,(r*=r)?Math.max(t*i*l/r,r/(t*o*l)):1/0}function d(e,t,r,i){var o,a=-1,s=e.length,u=r.x,l=r.y,c=t?n(e.area/t):0;if(t==r.dx){for((i||c>r.dy)&&(c=r.dy);++a<s;)(o=e[a]).x=u,o.y=l,o.dy=c,u+=o.dx=Math.min(r.x+r.dx-u,c?n(o.area/c):0);o.z=!0,o.dx+=r.x+r.dx-u,r.y+=c,r.dy-=c}else{for((i||c>r.dx)&&(c=r.dx);++a<s;)(o=e[a]).x=u,o.y=l,o.dx=c,l+=o.dy=Math.min(r.y+r.dy-l,c?n(o.area/c):0);o.z=!1,o.dy+=r.y+r.dy-l,r.x+=c,r.dx-=c}}function g(n){var i=e||t(n),o=i[0];return o.x=o.y=0,o.value?(o.dx=r[0],o.dy=r[1]):o.dx=o.dy=0,e&&t.revalue(o),c([o],o.dx*o.dy/o.value),(e?f:h)(o),s&&(e=i),i}return g.size=function(e){return arguments.length?(r=e,g):r},g.padding=function(e){if(!arguments.length)return i;function t(t){var n=e.call(g,t,t.depth);return null==n?Ea(t):Sa(t,"number"===typeof n?[n,n,n,n]:n)}function n(t){return Sa(t,e)}var r;return a=null==(i=e)?Ea:"function"===(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,g},g.round=function(e){return arguments.length?(n=e?Math.round:Number,g):n!=Number},g.sticky=function(t){return arguments.length?(s=t,e=null,g):s},g.ratio=function(e){return arguments.length?(l=e,g):l},g.mode=function(e){return arguments.length?(u=e+"",g):u},Uo(g,t)},o.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=o.random.normal.apply(o,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=o.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},o.scale={};var Aa={floor:O,ceil:O};function Ma(e,t,n,r){var i=[],a=[],s=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<=u;)i.push(n(e[s-1],e[s])),a.push(r(t[s-1],t[s]));return function(t){var n=o.bisect(e,t,1,u)-1;return a[n](i[n](t))}}function La(e,t,n,r){var i,o;function a(){var a=Math.min(e.length,t.length)>2?Ma:Ca,u=r?Ao:Io;return i=a(e,t,u,n),o=a(t,e,u,oo),s}function s(e){return i(e)}return s.invert=function(e){return o(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),a()):e},s.range=function(e){return arguments.length?(t=e,a()):t},s.rangeRound=function(e){return s.range(e).interpolate(xo)},s.clamp=function(e){return arguments.length?(r=e,a()):r},s.interpolate=function(e){return arguments.length?(n=e,a()):n},s.ticks=function(t){return Ra(e,t)},s.tickFormat=function(t,n){return Da(e,t,n)},s.nice=function(t){return Pa(e,t),a()},s.copy=function(){return La(e,t,n,r)},a()}function Na(e,t){return o.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Pa(e,t){return Ia(e,(n=Oa(e,t)[2])?{floor:function(e){return Math.floor(e/n)*n},ceil:function(e){return Math.ceil(e/n)*n}}:Aa);var n}function Oa(e,t){null==t&&(t=10);var n=Ta(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),o=t/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Ra(e,t){return o.range.apply(o,Oa(e,t))}function Da(e,t,n){var r=Oa(e,t);if(n){var i=Ot.exec(n);if(i.shift(),"s"===i[8]){var a=o.formatPrefix(Math.max(w(r[0]),w(r[1])));return i[7]||(i[7]="."+za(a.scale(r[2]))),i[8]="f",n=o.format(i.join("")),function(e){return n(a.scale(e))+a.symbol}}i[7]||(i[7]="."+function(e,t){var n=za(t[2]);return e in Fa?Math.abs(n-za(Math.max(w(t[0]),w(t[1]))))+ +("e"!==e):n-2*("%"===e)}(i[8],r)),n=i.join("")}else n=",."+za(r[2])+"f";return o.format(n)}o.scale.linear=function(){return La([0,1],[0,1],oo,!1)};var Fa={s:1,g:1,p:1,r:1,e:1};function za(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Ba(e,t,n,r){function i(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function s(t){return e(i(t))}return s.invert=function(t){return a(e.invert(t))},s.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),s):r},s.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),s):t},s.nice=function(){var t=Ia(r.map(i),n?Math:Va);return e.domain(t),r=t.map(a),s},s.ticks=function(){var e=Ta(r),o=[],s=e[0],u=e[1],l=Math.floor(i(s)),c=Math.ceil(i(u)),h=t%1?2:t;if(isFinite(c-l)){if(n){for(;l<c;l++)for(var f=1;f<h;f++)o.push(a(l)*f);o.push(a(l))}else for(o.push(a(l));l++<c;)for(f=h-1;f>0;f--)o.push(a(l)*f);for(l=0;o[l]<s;l++);for(c=o.length;o[c-1]>u;c--);o=o.slice(l,c)}return o},s.tickFormat=function(e,t){if(!arguments.length)return Ua;arguments.length<2?t=Ua:"function"!==typeof t&&(t=o.format(t));var r,u=Math.max(.1,e/s.ticks().length),l=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(e){return e/a(l(i(e)+r))<=u?t(e):""}},s.copy=function(){return Ba(e.copy(),t,n,r)},Na(s,e)}o.scale.log=function(){return Ba(o.scale.linear().domain([0,1]),10,!0,[1,10])};var Ua=o.format(".0e"),Va={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function ja(e,t,n){var r=qa(t),i=qa(1/t);function o(t){return e(r(t))}return o.invert=function(t){return i(e.invert(t))},o.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),o):n},o.ticks=function(e){return Ra(n,e)},o.tickFormat=function(e,t){return Da(n,e,t)},o.nice=function(e){return o.domain(Pa(n,e))},o.exponent=function(a){return arguments.length?(r=qa(t=a),i=qa(1/t),e.domain(n.map(r)),o):t},o.copy=function(){return ja(e.copy(),t,n)},Na(o,e)}function qa(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Ga(e,t){var n,r,i;function a(i){return r[((n.get(i)||("range"===t.t?n.set(i,e.push(i)):NaN))-1)%r.length]}function s(t,n){return o.range(e.length).map((function(e){return t+n*e}))}return a.domain=function(r){if(!arguments.length)return e;e=[],n=new T;for(var i,o=-1,s=r.length;++o<s;)n.has(i=r[o])||n.set(i,e.push(i));return a[t.t].apply(a,t.a)},a.range=function(e){return arguments.length?(r=e,i=0,t={t:"range",a:arguments},a):r},a.rangePoints=function(n,o){arguments.length<2&&(o=0);var u=n[0],l=n[1],c=e.length<2?(u=(u+l)/2,0):(l-u)/(e.length-1+o);return r=s(u+c*o/2,c),i=0,t={t:"rangePoints",a:arguments},a},a.rangeRoundPoints=function(n,o){arguments.length<2&&(o=0);var u=n[0],l=n[1],c=e.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(e.length-1+o)|0;return r=s(u+Math.round(c*o/2+(l-u-(e.length-1+o)*c)/2),c),i=0,t={t:"rangeRoundPoints",a:arguments},a},a.rangeBands=function(n,o,u){arguments.length<2&&(o=0),arguments.length<3&&(u=o);var l=n[1]<n[0],c=n[l-0],h=n[1-l],f=(h-c)/(e.length-o+2*u);return r=s(c+f*u,f),l&&r.reverse(),i=f*(1-o),t={t:"rangeBands",a:arguments},a},a.rangeRoundBands=function(n,o,u){arguments.length<2&&(o=0),arguments.length<3&&(u=o);var l=n[1]<n[0],c=n[l-0],h=n[1-l],f=Math.floor((h-c)/(e.length-o+2*u));return r=s(c+Math.round((h-c-(e.length-o)*f)/2),f),l&&r.reverse(),i=Math.round(f*(1-o)),t={t:"rangeRoundBands",a:arguments},a},a.rangeBand=function(){return i},a.rangeExtent=function(){return Ta(t.a[0])},a.copy=function(){return Ga(e,t)},a.domain(e)}o.scale.pow=function(){return ja(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return Ga([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range($a)},o.scale.category20=function(){return o.scale.ordinal().range(Ha)},o.scale.category20b=function(){return o.scale.ordinal().range(Xa)},o.scale.category20c=function(){return o.scale.ordinal().range(Wa)};var $a=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ct),Ha=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ct),Xa=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ct),Wa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ct);function Ya(e,t){var n;function r(){var r=0,a=t.length;for(n=[];++r<a;)n[r-1]=o.quantile(e,r/a);return i}function i(e){if(!isNaN(e=+e))return t[o.bisect(n,e)]}return i.domain=function(t){return arguments.length?(e=t.map(y).filter(v).sort(m),r()):e},i.range=function(e){return arguments.length?(t=e,r()):t},i.quantiles=function(){return n},i.invertExtent=function(r){return(r=t.indexOf(r))<0?[NaN,NaN]:[r>0?n[r-1]:e[0],r<n.length?n[r]:e[e.length-1]]},i.copy=function(){return Ya(e,t)},r()}function Za(e,t,n){var r,i;function o(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function a(){return r=n.length/(t-e),i=n.length-1,o}return o.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],a()):[e,t]},o.range=function(e){return arguments.length?(n=e,a()):n},o.invertExtent=function(t){return[t=(t=n.indexOf(t))<0?NaN:t/r+e,t+1/r]},o.copy=function(){return Za(e,t,n)},a()}function Ja(e,t){function n(n){if(n<=n)return t[o.bisect(e,n)]}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return Ja(e,t)},n}function Ka(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Ra(e,t)},t.tickFormat=function(t,n){return Da(e,t,n)},t.copy=function(){return Ka(e)},t}function Qa(){return 0}o.scale.quantile=function(){return Ya([],[])},o.scale.quantize=function(){return Za(0,1,[0,1])},o.scale.threshold=function(){return Ja([.5],[0,1])},o.scale.identity=function(){return Ka([0,1])},o.svg={},o.svg.arc=function(){var e=ts,t=ns,n=Qa,r=es,i=rs,o=is,a=os;function s(){var s=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+t.apply(this,arguments)),c=i.apply(this,arguments)-Ne,h=o.apply(this,arguments)-Ne,f=Math.abs(h-c),p=c>h?0:1;if(l<s&&(d=l,l=s,s=d),f>=Le)return u(l,p)+(s?u(s,1-p):"")+"Z";var d,g,m,y,v,_,b,x,w,E,S,T,k=0,C=0,I=[];if((y=(+a.apply(this,arguments)||0)/2)&&(m=r===es?Math.sqrt(s*s+l*l):+r.apply(this,arguments),p||(C*=-1),l&&(C=ze(m/l*Math.sin(y))),s&&(k=ze(m/s*Math.sin(y)))),l){v=l*Math.cos(c+C),_=l*Math.sin(c+C),b=l*Math.cos(h-C),x=l*Math.sin(h-C);var A=Math.abs(h-c-2*C)<=Ae?0:1;if(C&&as(v,_,b,x)===p^A){var M=(c+h)/2;v=l*Math.cos(M),_=l*Math.sin(M),b=x=null}}else v=_=0;if(s){w=s*Math.cos(h-k),E=s*Math.sin(h-k),S=s*Math.cos(c+k),T=s*Math.sin(c+k);var L=Math.abs(c-h+2*k)<=Ae?0:1;if(k&&as(w,E,S,T)===1-p^L){var N=(c+h)/2;w=s*Math.cos(N),E=s*Math.sin(N),S=T=null}}else w=E=0;if(f>Ce&&(d=Math.min(Math.abs(l-s)/2,+n.apply(this,arguments)))>.001){g=s<l^p?0:1;var P=d,O=d;if(f<Ae){var R=null==S?[w,E]:null==b?[v,_]:di([v,_],[S,T],[b,x],[w,E]),D=v-R[0],F=_-R[1],z=b-R[0],B=x-R[1],U=1/Math.sin(Math.acos((D*z+F*B)/(Math.sqrt(D*D+F*F)*Math.sqrt(z*z+B*B)))/2),V=Math.sqrt(R[0]*R[0]+R[1]*R[1]);O=Math.min(d,(s-V)/(U-1)),P=Math.min(d,(l-V)/(U+1))}if(null!=b){var j=ss(null==S?[w,E]:[S,T],[v,_],l,P,p),q=ss([b,x],[w,E],l,P,p);d===P?I.push("M",j[0],"A",P,",",P," 0 0,",g," ",j[1],"A",l,",",l," 0 ",1-p^as(j[1][0],j[1][1],q[1][0],q[1][1]),",",p," ",q[1],"A",P,",",P," 0 0,",g," ",q[0]):I.push("M",j[0],"A",P,",",P," 0 1,",g," ",q[0])}else I.push("M",v,",",_);if(null!=S){var G=ss([v,_],[S,T],s,-O,p),$=ss([w,E],null==b?[v,_]:[b,x],s,-O,p);d===O?I.push("L",$[0],"A",O,",",O," 0 0,",g," ",$[1],"A",s,",",s," 0 ",p^as($[1][0],$[1][1],G[1][0],G[1][1]),",",1-p," ",G[1],"A",O,",",O," 0 0,",g," ",G[0]):I.push("L",$[0],"A",O,",",O," 0 0,",g," ",G[0])}else I.push("L",w,",",E)}else I.push("M",v,",",_),null!=b&&I.push("A",l,",",l," 0 ",A,",",p," ",b,",",x),I.push("L",w,",",E),null!=S&&I.push("A",s,",",s," 0 ",L,",",1-p," ",S,",",T);return I.push("Z"),I.join("")}function u(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return s.innerRadius=function(t){return arguments.length?(e=_t(t),s):e},s.outerRadius=function(e){return arguments.length?(t=_t(e),s):t},s.cornerRadius=function(e){return arguments.length?(n=_t(e),s):n},s.padRadius=function(e){return arguments.length?(r=e==es?es:_t(e),s):r},s.startAngle=function(e){return arguments.length?(i=_t(e),s):i},s.endAngle=function(e){return arguments.length?(o=_t(e),s):o},s.padAngle=function(e){return arguments.length?(a=_t(e),s):a},s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Ne;return[Math.cos(r)*n,Math.sin(r)*n]},s};var es="auto";function ts(e){return e.innerRadius}function ns(e){return e.outerRadius}function rs(e){return e.startAngle}function is(e){return e.endAngle}function os(e){return e&&e.padAngle}function as(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function ss(e,t,n,r,i){var o=e[0]-t[0],a=e[1]-t[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),u=s*a,l=-s*o,c=e[0]+u,h=e[1]+l,f=t[0]+u,p=t[1]+l,d=(c+f)/2,g=(h+p)/2,m=f-c,y=p-h,v=m*m+y*y,_=n-r,b=c*p-f*h,x=(y<0?-1:1)*Math.sqrt(Math.max(0,_*_*v-b*b)),w=(b*y-m*x)/v,E=(-b*m-y*x)/v,S=(b*y+m*x)/v,T=(-b*m+y*x)/v,k=w-d,C=E-g,I=S-d,A=T-g;return k*k+C*C>I*I+A*A&&(w=S,E=T),[[w-u,E-l],[w*n/_,E*n/_]]}function us(e){var t=ui,n=li,r=Kn,i=cs,o=i.key,a=.7;function s(o){var s,u=[],l=[],c=-1,h=o.length,f=_t(t),p=_t(n);function d(){u.push("M",i(e(l),a))}for(;++c<h;)r.call(this,s=o[c],c)?l.push([+f.call(this,s,c),+p.call(this,s,c)]):l.length&&(d(),l=[]);return l.length&&d(),u.length?u.join(""):null}return s.x=function(e){return arguments.length?(t=e,s):t},s.y=function(e){return arguments.length?(n=e,s):n},s.defined=function(e){return arguments.length?(r=e,s):r},s.interpolate=function(e){return arguments.length?(o="function"===typeof e?i=e:(i=ls.get(e)||cs).key,s):o},s.tension=function(e){return arguments.length?(a=e,s):a},s}o.svg.line=function(){return us(O)};var ls=o.map({linear:cs,"linear-closed":hs,step:function(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];for(;++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);n>1&&i.push("H",r[0]);return i.join("")},"step-before":fs,"step-after":ps,basis:ms,"basis-open":function(e){if(e.length<4)return cs(e);var t,n=[],r=-1,i=e.length,o=[0],a=[0];for(;++r<3;)t=e[r],o.push(t[0]),a.push(t[1]);n.push(ys(bs,o)+","+ys(bs,a)),--r;for(;++r<i;)t=e[r],o.shift(),o.push(t[0]),a.shift(),a.push(t[1]),xs(n,o,a);return n.join("")},"basis-closed":function(e){var t,n,r=-1,i=e.length,o=i+4,a=[],s=[];for(;++r<4;)n=e[r%i],a.push(n[0]),s.push(n[1]);t=[ys(bs,a),",",ys(bs,s)],--r;for(;++r<o;)n=e[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),xs(t,a,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,i,o=e[0][0],a=e[0][1],s=e[n][0]-o,u=e[n][1]-a,l=-1;++l<=n;)r=e[l],i=l/n,r[0]=t*r[0]+(1-t)*(o+i*s),r[1]=t*r[1]+(1-t)*(a+i*u);return ms(e)},cardinal:function(e,t){return e.length<3?cs(e):e[0]+ds(e,gs(e,t))},"cardinal-open":function(e,t){return e.length<4?cs(e):e[1]+ds(e.slice(1,-1),gs(e,t))},"cardinal-closed":function(e,t){return e.length<3?hs(e):e[0]+ds((e.push(e[0]),e),gs([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?cs(e):e[0]+ds(e,function(e){var t,n,r,i,o=[],a=function(e){var t=0,n=e.length-1,r=[],i=e[0],o=e[1],a=r[0]=ws(i,o);for(;++t<n;)r[t]=(a+(a=ws(i=o,o=e[t+1])))/2;return r[t]=a,r}(e),s=-1,u=e.length-1;for(;++s<u;)t=ws(e[s],e[s+1]),w(t)<Ce?a[s]=a[s+1]=0:(i=(n=a[s]/t)*n+(r=a[s+1]/t)*r)>9&&(i=3*t/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r);s=-1;for(;++s<=u;)i=(e[Math.min(u,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}(e))}});function cs(e){return e.length>1?e.join("L"):e+"Z"}function hs(e){return e.join("L")+"Z"}function fs(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function ps(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function ds(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return cs(e);var n=e.length!=t.length,r="",i=e[0],o=e[1],a=t[0],s=a,u=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=e[1],u=2),t.length>1){s=t[1],o=e[u],u++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var l=2;l<t.length;l++,u++)o=e[u],s=t[l],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=e[u];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function gs(e,t){for(var n,r=[],i=(1-t)/2,o=e[0],a=e[1],s=1,u=e.length;++s<u;)n=o,o=a,a=e[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function ms(e){if(e.length<3)return cs(e);var t=1,n=e.length,r=e[0],i=r[0],o=r[1],a=[i,i,i,(r=e[1])[0]],s=[o,o,o,r[1]],u=[i,",",o,"L",ys(bs,a),",",ys(bs,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),xs(u,a,s);return e.pop(),u.push("L",r),u.join("")}function ys(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}ls.forEach((function(e,t){t.key=e,t.closed=/-closed$/.test(e)}));var vs=[0,2/3,1/3,0],_s=[0,1/3,2/3,0],bs=[0,1/6,2/3,1/6];function xs(e,t,n){e.push("C",ys(vs,t),",",ys(vs,n),",",ys(_s,t),",",ys(_s,n),",",ys(bs,t),",",ys(bs,n))}function ws(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Es(e){for(var t,n,r,i=-1,o=e.length;++i<o;)n=(t=e[i])[0],r=t[1]-Ne,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function Ss(e){var t=ui,n=ui,r=0,i=li,o=Kn,a=cs,s=a.key,u=a,l="L",c=.7;function h(s){var h,f,p,d=[],g=[],m=[],y=-1,v=s.length,_=_t(t),b=_t(r),x=t===n?function(){return f}:_t(n),w=r===i?function(){return p}:_t(i);function E(){d.push("M",a(e(m),c),l,u(e(g.reverse()),c),"Z")}for(;++y<v;)o.call(this,h=s[y],y)?(g.push([f=+_.call(this,h,y),p=+b.call(this,h,y)]),m.push([+x.call(this,h,y),+w.call(this,h,y)])):g.length&&(E(),g=[],m=[]);return g.length&&E(),d.length?d.join(""):null}return h.x=function(e){return arguments.length?(t=n=e,h):n},h.x0=function(e){return arguments.length?(t=e,h):t},h.x1=function(e){return arguments.length?(n=e,h):n},h.y=function(e){return arguments.length?(r=i=e,h):i},h.y0=function(e){return arguments.length?(r=e,h):r},h.y1=function(e){return arguments.length?(i=e,h):i},h.defined=function(e){return arguments.length?(o=e,h):o},h.interpolate=function(e){return arguments.length?(s="function"===typeof e?a=e:(a=ls.get(e)||cs).key,u=a.reverse||a,l=a.closed?"M":"L",h):s},h.tension=function(e){return arguments.length?(c=e,h):c},h}function Ts(e){return e.radius}function ks(e){return[e.x,e.y]}function Cs(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Ne;return[n*Math.cos(r),n*Math.sin(r)]}}function Is(){return 64}function As(){return"circle"}function Ms(e){var t=Math.sqrt(e/Ae);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}o.svg.line.radial=function(){var e=us(Es);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},fs.reverse=ps,ps.reverse=fs,o.svg.area=function(){return Ss(O)},o.svg.area.radial=function(){var e=Ss(Es);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},o.svg.chord=function(){var e=Wr,t=Yr,n=Ts,r=rs,i=is;function o(n,r){var i,o,l=a(this,e,n,r),c=a(this,t,n,r);return"M"+l.p0+s(l.r,l.p1,l.a1-l.a0)+(o=c,((i=l).a0==o.a0&&i.a1==o.a1?u(l.r,l.p1,l.r,l.p0):u(l.r,l.p1,c.r,c.p0)+s(c.r,c.p1,c.a1-c.a0)+u(c.r,c.p1,l.r,l.p0))+"Z")}function a(e,t,o,a){var s=t.call(e,o,a),u=n.call(e,s,a),l=r.call(e,s,a)-Ne,c=i.call(e,s,a)-Ne;return{r:u,a0:l,a1:c,p0:[u*Math.cos(l),u*Math.sin(l)],p1:[u*Math.cos(c),u*Math.sin(c)]}}function s(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Ae)+",1 "+t}function u(e,t,n,r){return"Q 0,0 "+r}return o.radius=function(e){return arguments.length?(n=_t(e),o):n},o.source=function(t){return arguments.length?(e=_t(t),o):e},o.target=function(e){return arguments.length?(t=_t(e),o):t},o.startAngle=function(e){return arguments.length?(r=_t(e),o):r},o.endAngle=function(e){return arguments.length?(i=_t(e),o):i},o},o.svg.diagonal=function(){var e=Wr,t=Yr,n=ks;function r(r,i){var o=e.call(this,r,i),a=t.call(this,r,i),s=(o.y+a.y)/2,u=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(u=u.map(n))[0]+"C"+u[1]+" "+u[2]+" "+u[3]}return r.source=function(t){return arguments.length?(e=_t(t),r):e},r.target=function(e){return arguments.length?(t=_t(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},o.svg.diagonal.radial=function(){var e=o.svg.diagonal(),t=ks,n=e.projection;return e.projection=function(e){return arguments.length?n(Cs(t=e)):t},e},o.svg.symbol=function(){var e=As,t=Is;function n(n,r){return(Ls.get(e.call(this,n,r))||Ms)(t.call(this,n,r))}return n.type=function(t){return arguments.length?(e=_t(t),n):e},n.size=function(e){return arguments.length?(t=_t(e),n):t},n};var Ls=o.map({circle:Ms,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ps)),n=t*Ps;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Ns),n=t*Ns/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Ns),n=t*Ns/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});o.svg.symbolTypes=Ls.keys();var Ns=Math.sqrt(3),Ps=Math.tan(30*Pe);Z.transition=function(e){for(var t,n,r=Fs||++Us,i=qs(e),o=[],a=zs||{time:Date.now(),ease:mo,delay:0,duration:250},s=-1,u=this.length;++s<u;){o.push(t=[]);for(var l=this[s],c=-1,h=l.length;++c<h;)(n=l[c])&&Gs(n,c,i,r,a),t.push(n)}return Ds(o,i,r)},Z.interrupt=function(e){return this.each(null==e?Os:Rs(qs(e)))};var Os=Rs(qs());function Rs(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Ds(e,t,n){return $(e,Bs),e.namespace=t,e.id=n,e}var Fs,zs,Bs=[],Us=0;function Vs(e,t,n,r){var i=e.id,o=e.namespace;return pe(e,"function"===typeof n?function(e,a,s){e[o][i].tween.set(t,r(n.call(e,e.__data__,a,s)))}:(n=r(n),function(e){e[o][i].tween.set(t,n)}))}function js(e){return null==e&&(e=""),function(){this.textContent=e}}function qs(e){return null==e?"__transition__":"__transition_"+e+"__"}function Gs(e,t,n,r,i){var o,a,s,u,l,c=e[n]||(e[n]={active:0,count:0}),h=c[r];function f(n){var i=c.active,f=c[i];for(var d in f&&(f.timer.c=null,f.timer.t=NaN,--c.count,delete c[i],f.event&&f.event.interrupt.call(e,e.__data__,f.index)),c)if(+d<r){var g=c[d];g.timer.c=null,g.timer.t=NaN,--c.count,delete c[d]}a.c=p,Ct((function(){return a.c&&p(n||1)&&(a.c=null,a.t=NaN),1}),0,o),c.active=r,h.event&&h.event.start.call(e,e.__data__,t),l=[],h.tween.forEach((function(n,r){(r=r.call(e,e.__data__,t))&&l.push(r)})),u=h.ease,s=h.duration}function p(i){for(var o=i/s,a=u(o),f=l.length;f>0;)l[--f].call(e,a);if(o>=1)return h.event&&h.event.end.call(e,e.__data__,t),--c.count?delete c[r]:delete e[n],1}h||(o=i.time,a=Ct((function(e){var t=h.delay;if(a.t=t+o,t<=e)return f(e-t);a.c=f}),0,o),h=c[r]={tween:new T,time:o,timer:a,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++c.count)}Bs.call=Z.call,Bs.empty=Z.empty,Bs.node=Z.node,Bs.size=Z.size,o.transition=function(e,t){return e&&e.transition?Fs?e.transition(t):e:o.selection().transition(e)},o.transition.prototype=Bs,Bs.select=function(e){var t,n,r,i=this.id,o=this.namespace,a=[];e=J(e);for(var s=-1,u=this.length;++s<u;){a.push(t=[]);for(var l=this[s],c=-1,h=l.length;++c<h;)(r=l[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Gs(n,c,o,i,r[o][i]),t.push(n)):t.push(null)}return Ds(a,o,i)},Bs.selectAll=function(e){var t,n,r,i,o,a=this.id,s=this.namespace,u=[];e=K(e);for(var l=-1,c=this.length;++l<c;)for(var h=this[l],f=-1,p=h.length;++f<p;)if(r=h[f]){o=r[s][a],n=e.call(r,r.__data__,f,l),u.push(t=[]);for(var d=-1,g=n.length;++d<g;)(i=n[d])&&Gs(i,d,s,a,o),t.push(i)}return Ds(u,s,a)},Bs.filter=function(e){var t,n,r=[];"function"!==typeof e&&(e=he(e));for(var i=0,o=this.length;i<o;i++){r.push(t=[]);for(var a,s=0,u=(a=this[i]).length;s<u;s++)(n=a[s])&&e.call(n,n.__data__,s,i)&&t.push(n)}return Ds(r,this.namespace,this.id)},Bs.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):pe(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Bs.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var n="transform"==e?Co:oo,r=o.ns.qualify(e);function i(){this.removeAttribute(r)}function a(){this.removeAttributeNS(r.space,r.local)}function s(e){return null==e?i:(e+="",function(){var t,i=this.getAttribute(r);return i!==e&&(t=n(i,e),function(e){this.setAttribute(r,t(e))})})}function u(e){return null==e?a:(e+="",function(){var t,i=this.getAttributeNS(r.space,r.local);return i!==e&&(t=n(i,e),function(e){this.setAttributeNS(r.space,r.local,t(e))})})}return Vs(this,"attr."+e,t,r.local?u:s)},Bs.attrTween=function(e,t){var n=o.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,r){var i=t.call(this,e,r,this.getAttributeNS(n.space,n.local));return i&&function(e){this.setAttributeNS(n.space,n.local,i(e))}}:function(e,r){var i=t.call(this,e,r,this.getAttribute(n));return i&&function(e){this.setAttribute(n,i(e))}})},Bs.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!==typeof e){for(n in r<2&&(t=""),e)this.style(n,e[n],t);return this}n=""}function i(){this.style.removeProperty(e)}function o(t){return null==t?i:(t+="",function(){var r,i=c(this).getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=oo(i,t),function(t){this.style.setProperty(e,r(t),n)})})}return Vs(this,"style."+e,t,o)},Bs.styleTween=function(e,t,n){function r(r,i){var o=t.call(this,r,i,c(this).getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Bs.text=function(e){return Vs(this,"text",e,js)},Bs.remove=function(){var e=this.namespace;return this.each("end.transition",(function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)}))},Bs.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!==typeof e&&(e=o.ease.apply(o,arguments)),pe(this,(function(r){r[n][t].ease=e})))},Bs.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:pe(this,"function"===typeof e?function(r,i,o){r[n][t].delay=+e.call(r,r.__data__,i,o)}:(e=+e,function(r){r[n][t].delay=e}))},Bs.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:pe(this,"function"===typeof e?function(r,i,o){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,o))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Bs.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=zs,a=Fs;try{Fs=n,pe(this,(function(t,i,o){zs=t[r][n],e.call(t,t.__data__,i,o)}))}finally{zs=i,Fs=a}}else pe(this,(function(i){var a=i[r][n];(a.event||(a.event=o.dispatch("start","end","interrupt"))).on(e,t)}));return this},Bs.transition=function(){for(var e,t,n,r=this.id,i=++Us,o=this.namespace,a=[],s=0,u=this.length;s<u;s++){a.push(e=[]);for(var l,c=0,h=(l=this[s]).length;c<h;c++)(t=l[c])&&Gs(t,c,o,i,{time:(n=t[o][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return Ds(a,o,i)},o.svg.axis=function(){var e,t=o.scale.linear(),n=$s,r=6,i=6,a=3,u=[10],l=null;function c(s){s.each((function(){var s,c=o.select(this),h=this.__chart__||t,f=this.__chart__=t.copy(),p=null==l?f.ticks?f.ticks.apply(f,u):f.domain():l,d=null==e?f.tickFormat?f.tickFormat.apply(f,u):O:e,g=c.selectAll(".tick").data(p,f),m=g.enter().insert("g",".domain").attr("class","tick").style("opacity",Ce),y=o.transition(g.exit()).style("opacity",Ce).remove(),v=o.transition(g.order()).style("opacity",1),_=Math.max(r,0)+a,b=ka(f),x=c.selectAll(".domain").data([0]),w=(x.enter().append("path").attr("class","domain"),o.transition(x));m.append("line"),m.append("text");var E,S,T,k,C=m.select("line"),I=v.select("line"),A=g.select("text").text(d),M=m.select("text"),L=v.select("text"),N="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(s=Xs,E="x",T="y",S="x2",k="y2",A.attr("dy",N<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+b[0]+","+N*i+"V0H"+b[1]+"V"+N*i)):(s=Ws,E="y",T="x",S="y2",k="x2",A.attr("dy",".32em").style("text-anchor",N<0?"end":"start"),w.attr("d","M"+N*i+","+b[0]+"H0V"+b[1]+"H"+N*i)),C.attr(k,N*r),M.attr(T,N*_),I.attr(S,0).attr(k,N*r),L.attr(E,0).attr(T,N*_),f.rangeBand){var P=f,R=P.rangeBand()/2;h=f=function(e){return P(e)+R}}else h.rangeBand?h=f:y.call(s,f,h);m.call(s,h,f),v.call(s,f,f)}))}return c.scale=function(e){return arguments.length?(t=e,c):t},c.orient=function(e){return arguments.length?(n=e in Hs?e+"":$s,c):n},c.ticks=function(){return arguments.length?(u=s(arguments),c):u},c.tickValues=function(e){return arguments.length?(l=e,c):l},c.tickFormat=function(t){return arguments.length?(e=t,c):e},c.tickSize=function(e){var t=arguments.length;return t?(r=+e,i=+arguments[t-1],c):r},c.innerTickSize=function(e){return arguments.length?(r=+e,c):r},c.outerTickSize=function(e){return arguments.length?(i=+e,c):i},c.tickPadding=function(e){return arguments.length?(a=+e,c):a},c.tickSubdivide=function(){return arguments.length&&c},c};var $s="bottom",Hs={top:1,right:1,bottom:1,left:1};function Xs(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"}))}function Ws(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"}))}o.svg.brush=function(){var e,t,n=q(f,"brushstart","brush","brushend"),r=null,i=null,a=[0,0],s=[0,0],u=!0,l=!0,h=Zs[0];function f(e){e.each((function(){var e=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(h,O);n.exit().remove(),n.enter().append("g").attr("class",(function(e){return"resize "+e})).style("cursor",(function(e){return Ys[e]})).append("rect").attr("x",(function(e){return/[ew]$/.test(e)?-3:null})).attr("y",(function(e){return/^[ns]/.test(e)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",f.empty()?"none":null);var a,s=o.transition(e),u=o.transition(t);r&&(a=ka(r),u.attr("x",a[0]).attr("width",a[1]-a[0]),d(s)),i&&(a=ka(i),u.attr("y",a[0]).attr("height",a[1]-a[0]),g(s)),p(s)}))}function p(e){e.selectAll(".resize").attr("transform",(function(e){return"translate("+a[+/e$/.test(e)]+","+s[+/^s/.test(e)]+")"}))}function d(e){e.select(".extent").attr("x",a[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",a[1]-a[0])}function g(e){e.select(".extent").attr("y",s[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function m(){var h,m,y=this,v=o.select(o.event.target),_=n.of(y,arguments),b=o.select(y),x=v.datum(),w=!/^(n|s)$/.test(x)&&r,E=!/^(e|w)$/.test(x)&&i,S=v.classed("extent"),T=Ee(y),k=o.mouse(y),C=o.select(c(y)).on("keydown.brush",M).on("keyup.brush",L);if(o.event.changedTouches?C.on("touchmove.brush",N).on("touchend.brush",O):C.on("mousemove.brush",N).on("mouseup.brush",O),b.interrupt().selectAll("*").interrupt(),S)k[0]=a[0]-k[0],k[1]=s[0]-k[1];else if(x){var I=+/w$/.test(x),A=+/^n/.test(x);m=[a[1-I]-k[0],s[1-A]-k[1]],k[0]=a[I],k[1]=s[A]}else o.event.altKey&&(h=k.slice());function M(){32==o.event.keyCode&&(S||(h=null,k[0]-=a[1],k[1]-=s[1],S=2),V())}function L(){32==o.event.keyCode&&2==S&&(k[0]+=a[1],k[1]+=s[1],S=0,V())}function N(){var e=o.mouse(y),t=!1;m&&(e[0]+=m[0],e[1]+=m[1]),S||(o.event.altKey?(h||(h=[(a[0]+a[1])/2,(s[0]+s[1])/2]),k[0]=a[+(e[0]<h[0])],k[1]=s[+(e[1]<h[1])]):h=null),w&&P(e,r,0)&&(d(b),t=!0),E&&P(e,i,1)&&(g(b),t=!0),t&&(p(b),_({type:"brush",mode:S?"move":"resize"}))}function P(n,r,i){var o,c,f=ka(r),p=f[0],d=f[1],g=k[i],m=i?s:a,y=m[1]-m[0];if(S&&(p-=g,d-=y+g),o=(i?l:u)?Math.max(p,Math.min(d,n[i])):n[i],S?c=(o+=g)+y:(h&&(g=Math.max(p,Math.min(d,2*h[i]-o))),g<o?(c=o,o=g):c=g),m[0]!=o||m[1]!=c)return i?t=null:e=null,m[0]=o,m[1]=c,!0}function O(){N(),b.style("pointer-events","all").selectAll(".resize").style("display",f.empty()?"none":null),o.select("body").style("cursor",null),C.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),T(),_({type:"brushend"})}b.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",v.style("cursor")),_({type:"brushstart"}),N()}return f.event=function(r){r.each((function(){var r=n.of(this,arguments),i={x:a,y:s,i:e,j:t},u=this.__chart__||i;this.__chart__=i,Fs?o.select(this).transition().each("start.brush",(function(){e=u.i,t=u.j,a=u.x,s=u.y,r({type:"brushstart"})})).tween("brush:brush",(function(){var n=ao(a,i.x),o=ao(s,i.y);return e=t=null,function(e){a=i.x=n(e),s=i.y=o(e),r({type:"brush",mode:"resize"})}})).each("end.brush",(function(){e=i.i,t=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})})):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))}))},f.x=function(e){return arguments.length?(h=Zs[!(r=e)<<1|!i],f):r},f.y=function(e){return arguments.length?(h=Zs[!r<<1|!(i=e)],f):i},f.clamp=function(e){return arguments.length?(r&&i?(u=!!e[0],l=!!e[1]):r?u=!!e:i&&(l=!!e),f):r&&i?[u,l]:r?u:i?l:null},f.extent=function(n){var o,u,l,c,h;return arguments.length?(r&&(o=n[0],u=n[1],i&&(o=o[0],u=u[0]),e=[o,u],r.invert&&(o=r(o),u=r(u)),u<o&&(h=o,o=u,u=h),o==a[0]&&u==a[1]||(a=[o,u])),i&&(l=n[0],c=n[1],r&&(l=l[1],c=c[1]),t=[l,c],i.invert&&(l=i(l),c=i(c)),c<l&&(h=l,l=c,c=h),l==s[0]&&c==s[1]||(s=[l,c])),f):(r&&(e?(o=e[0],u=e[1]):(o=a[0],u=a[1],r.invert&&(o=r.invert(o),u=r.invert(u)),u<o&&(h=o,o=u,u=h))),i&&(t?(l=t[0],c=t[1]):(l=s[0],c=s[1],i.invert&&(l=i.invert(l),c=i.invert(c)),c<l&&(h=l,l=c,c=h))),r&&i?[[o,l],[u,c]]:r?[o,u]:i&&[l,c])},f.clear=function(){return f.empty()||(a=[0,0],s=[0,0],e=t=null),f},f.empty=function(){return!!r&&a[0]==a[1]||!!i&&s[0]==s[1]},o.rebind(f,n,"on")};var Ys={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Js=Ft.format=pn.timeFormat,Ks=Js.utc,Qs=Ks("%Y-%m-%dT%H:%M:%S.%LZ");function eu(e){return e.toISOString()}function tu(e,t,n){function r(t){return e(t)}function i(e,n){var r=(e[1]-e[0])/n,i=o.bisect(ru,r);return i==ru.length?[t.year,Oa(e.map((function(e){return e/31536e6})),n)[2]]:i?t[r/ru[i-1]<ru[i]/r?i-1:i]:[au,Oa(e,n)[2]]}return r.invert=function(t){return nu(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(nu)},r.nice=function(e,t){var n=r.domain(),o=Ta(n),a=null==e?i(o,10):"number"===typeof e&&i(o,e);function s(n){return!isNaN(n)&&!e.range(n,nu(+n+1),t).length}return a&&(e=a[0],t=a[1]),r.domain(Ia(n,t>1?{floor:function(t){for(;s(t=e.floor(t));)t=nu(t-1);return t},ceil:function(t){for(;s(t=e.ceil(t));)t=nu(+t+1);return t}}:e))},r.ticks=function(e,t){var n=Ta(r.domain()),o=null==e?i(n,10):"number"===typeof e?i(n,e):!e.range&&[{range:e},t];return o&&(e=o[0],t=o[1]),e.range(n[0],nu(+n[1]+1),t<1?1:t)},r.tickFormat=function(){return n},r.copy=function(){return tu(e.copy(),t,n)},Na(r,e)}function nu(e){return new Date(e)}Js.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?eu:Qs,eu.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},eu.toString=Qs.toString,Ft.second=Vt((function(e){return new zt(1e3*Math.floor(e/1e3))}),(function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))}),(function(e){return e.getSeconds()})),Ft.seconds=Ft.second.range,Ft.seconds.utc=Ft.second.utc.range,Ft.minute=Vt((function(e){return new zt(6e4*Math.floor(e/6e4))}),(function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))}),(function(e){return e.getMinutes()})),Ft.minutes=Ft.minute.range,Ft.minutes.utc=Ft.minute.utc.range,Ft.hour=Vt((function(e){var t=e.getTimezoneOffset()/60;return new zt(36e5*(Math.floor(e/36e5-t)+t))}),(function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))}),(function(e){return e.getHours()})),Ft.hours=Ft.hour.range,Ft.hours.utc=Ft.hour.utc.range,Ft.month=Vt((function(e){return(e=Ft.day(e)).setDate(1),e}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e){return e.getMonth()})),Ft.months=Ft.month.range,Ft.months.utc=Ft.month.utc.range;var ru=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],iu=[[Ft.second,1],[Ft.second,5],[Ft.second,15],[Ft.second,30],[Ft.minute,1],[Ft.minute,5],[Ft.minute,15],[Ft.minute,30],[Ft.hour,1],[Ft.hour,3],[Ft.hour,6],[Ft.hour,12],[Ft.day,1],[Ft.day,2],[Ft.week,1],[Ft.month,1],[Ft.month,3],[Ft.year,1]],ou=Js.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Kn]]),au={range:function(e,t,n){return o.range(Math.ceil(e/n)*n,+t,n).map(nu)},floor:O,ceil:O};iu.year=Ft.year,Ft.scale=function(){return tu(o.scale.linear(),iu,ou)};var su=iu.map((function(e){return[e[0].utc,e[1]]})),uu=Ks.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Kn]]);function lu(e){return JSON.parse(e.responseText)}function cu(e){var t=u.createRange();return t.selectNode(u.body),t.createContextualFragment(e.responseText)}su.year=Ft.year.utc,Ft.scale.utc=function(){return tu(o.scale.linear(),su,uu)},o.text=bt((function(e){return e.responseText})),o.json=function(e,t){return xt(e,"application/json",lu,t)},o.html=function(e,t){return xt(e,"text/html",cu,t)},o.xml=bt((function(e){return e.responseXML})),this.d3=o,void 0===(i="function"===typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i)}()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(4);e.exports={isOfMetaType:function(e){return function(t){var n=t.featureTarget;return!!n&&(!!n.properties&&n.properties.meta===e)}},isShiftMousedown:function(e){return!!e.originalEvent&&(!!e.originalEvent.shiftKey&&0===e.originalEvent.button)},isActiveFeature:function(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&(e.featureTarget.properties.active===r.activeStates.ACTIVE&&e.featureTarget.properties.meta===r.meta.FEATURE))},isInactiveFeature:function(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&(e.featureTarget.properties.active===r.activeStates.INACTIVE&&e.featureTarget.properties.meta===r.meta.FEATURE))},noTarget:function(e){return void 0===e.featureTarget},isFeature:function(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&e.featureTarget.properties.meta===r.meta.FEATURE)},isVertex:function(e){var t=e.featureTarget;return!!t&&(!!t.properties&&t.properties.meta===r.meta.VERTEX)},isShiftDown:function(e){return!!e.originalEvent&&!0===e.originalEvent.shiftKey},isEscapeKey:function(e){return 27===e.keyCode},isEnterKey:function(e){return 13===e.keyCode},true:function(){return!0}}},function(e,t){e.exports={enable:function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()}),0)},disable:function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),0)}}},function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function i(e,t,n){return void 0===n&&(n={}),r({type:"Point",coordinates:e},t,n)}function o(e,t,n){void 0===n&&(n={});for(var i=0,o=e;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:e},t,n)}function a(e,t,n){if(void 0===n&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:e},t,n)}function s(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function u(e,t,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:e},t,n)}function l(e,t,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:e},t,n)}function c(e,t,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:e},t,n)}function h(e,n){void 0===n&&(n="kilometers");var r=t.factors[n];if(!r)throw new Error(n+" units is invalid");return e*r}function f(e,n){void 0===n&&(n="kilometers");var r=t.factors[n];if(!r)throw new Error(n+" units is invalid");return e/r}function p(e){return 180*(e%(2*Math.PI))/Math.PI}function d(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=r,t.geometry=function(e,t,n){switch(void 0===n&&(n={}),e){case"Point":return i(t).geometry;case"LineString":return a(t).geometry;case"Polygon":return o(t).geometry;case"MultiPoint":return l(t).geometry;case"MultiLineString":return u(t).geometry;case"MultiPolygon":return c(t).geometry;default:throw new Error(e+" is invalid")}},t.point=i,t.points=function(e,t,n){return void 0===n&&(n={}),s(e.map((function(e){return i(e,t)})),n)},t.polygon=o,t.polygons=function(e,t,n){return void 0===n&&(n={}),s(e.map((function(e){return o(e,t)})),n)},t.lineString=a,t.lineStrings=function(e,t,n){return void 0===n&&(n={}),s(e.map((function(e){return a(e,t)})),n)},t.featureCollection=s,t.multiLineString=u,t.multiPoint=l,t.multiPolygon=c,t.geometryCollection=function(e,t,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:e},t,n)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n},t.radiansToLength=h,t.lengthToRadians=f,t.lengthToDegrees=function(e,t){return p(f(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=p,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,n){if(void 0===t&&(t="kilometers"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return h(f(e,t),n)},t.convertArea=function(e,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=t.areaFactors[n];if(!i)throw new Error("invalid original units");var o=t.areaFactors[r];if(!o)throw new Error("invalid final units");return e/i*o},t.isNumber=d,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!d(e))throw new Error("bbox must only contain numbers")}))},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(e,t,n){"use strict";var r=n(42),i=n(0);t.a=function(e,t){var n=Object(r.a)(e.map((function(e){return e.toGeoJSON()})),t);e.forEach((function(e){var t,r=e.getCoordinates(),o=function(e){var t={lng:e[0]+n.lng,lat:e[1]+n.lat};return[t.lng,t.lat]},a=function(e){return e.map((function(e){return o(e)}))};e.type===i.k.POINT?t=o(r):e.type===i.k.LINE_STRING||e.type===i.k.MULTI_POINT?t=r.map(o):e.type===i.k.POLYGON||e.type===i.k.MULTI_LINE_STRING?t=r.map(a):e.type===i.k.MULTI_POLYGON&&(t=r.map((function(e){return e.map((function(e){return a(e)}))}))),e.incomingCoords(t)}))}},function(e,t,n){"use strict";var r=n(15),i=n(0),o=function(e,t,n,r){var o=t.geometry.coordinates,a=n.geometry.coordinates;if(o[1]>i.c||o[1]<i.d||a[1]>i.c||a[1]<i.d)return null;var s=r.project([o[0],o[1]]),u=r.project([a[0],a[1]]),l=r.unproject([(s.x+u.x)/2,(s.y+u.y)/2]);return{type:i.k.FEATURE,properties:{meta:i.m.MIDPOINT,parent:e,lng:l.lng,lat:l.lat,coord_path:n.properties.coord_path},geometry:{type:i.k.POINT,coordinates:[l.lng,l.lat]}}};t.a=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=t.geometry,u=s.type,l=s.coordinates,c=t.properties&&t.properties.id,h=[];function f(e,t){var i="",a=null;e.forEach((function(e,s){var u=void 0!==t&&null!==t?"".concat(t,".").concat(s):String(s),l=Object(r.a)(c,e,u,p(u));if(n.midpoints&&a){var f=o(c,a,l,n.map);f&&h.push(f)}a=l;var d=JSON.stringify(e);i!==d&&h.push(l),0===s&&(i=d)}))}function p(e){return!!n.selectedPaths&&-1!==n.selectedPaths.indexOf(e)}function d(){var r=u.replace(i.k.MULTI_PREFIX,"");l.forEach((function(o,a){var s={type:i.k.FEATURE,properties:t.properties,geometry:{type:r,coordinates:o}};h=h.concat(e(s,n,a))}))}return u===i.k.POINT?h.push(Object(r.a)(c,l,a,p(a))):u===i.k.POLYGON?l.forEach((function(e,t){f(e,null!==a?"".concat(a,".").concat(t):String(t))})):u===i.k.LINE_STRING?f(l,a):0===u.indexOf(i.k.MULTI_PREFIX)&&d(),h}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(69);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t,n){var r=n(141),i=n(157),o=n(166),a=n(4);e.exports=function(e){!function(e,t){var n={options:e=i(e)};t=o(n,t),n.api=t;var s=r(n);t.onAdd=s.onAdd,t.onRemove=s.onRemove,t.types=a.types,t.options=e}(e,this)},e.exports.modes=n(78)},function(e,t,n){var r=n(145),i=n(146),o=n(4),a=n(34),s=[o.meta.FEATURE,o.meta.MIDPOINT,o.meta.VERTEX];function u(e,t,n,o){if(null===n.map)return[];var u=e?i(e,o):t,l={};n.options.styles&&(l.layers=n.options.styles.map((function(e){return e.id})));var c=n.map.queryRenderedFeatures(u,l).filter((function(e){return-1!==s.indexOf(e.properties.meta)})),h=new a,f=[];return c.forEach((function(e){var t=e.properties.id;h.has(t)||(h.add(t),f.push(e))})),r(f)}e.exports={click:function(e,t,n){return u(e,t,n,n.options.clickBuffer)},touch:function(e,t,n){return u(e,t,n,n.options.touchBuffer)}}},function(e,t){function n(e){if(this._items={},this._nums={},this._length=e?e.length:0,e)for(var t=0,n=e.length;t<n;t++)this.add(e[t]),void 0!==e[t]&&("string"===typeof e[t]?this._items[e[t]]=t:this._nums[e[t]]=t)}n.prototype.add=function(e){return this.has(e)||(this._length++,"string"===typeof e?this._items[e]=this._length:this._nums[e]=this._length),this},n.prototype.delete=function(e){return!1===this.has(e)||(this._length--,delete this._items[e],delete this._nums[e]),this},n.prototype.has=function(e){return("string"===typeof e||"number"===typeof e)&&(void 0!==this._items[e]||void 0!==this._nums[e])},n.prototype.values=function(){var e=this,t=[];return Object.keys(this._items).forEach((function(n){t.push({k:n,v:e._items[n]})})),Object.keys(this._nums).forEach((function(n){t.push({k:JSON.parse(n),v:e._nums[n]})})),t.sort((function(e,t){return e.v-t.v})).map((function(e){return e.k}))},n.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this},e.exports=n},function(e,t,n){var r=n(14),i=n(4),o=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||r(),this.type=t.geometry.type};o.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},o.prototype.incomingCoords=function(e){this.setCoordinates(e)},o.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},o.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},o.prototype.setProperty=function(e,t){this.properties[e]=t},o.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:i.geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},o.prototype.internal=function(e){var t={id:this.id,meta:i.meta.FEATURE,"meta:type":this.type,active:i.activeStates.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(var n in this.properties)t["user_".concat(n)]=this.properties[n];return{type:i.geojsonTypes.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}},e.exports=o},function(e,t,n){var r=n(35),i=n(4),o=n(14),a={MultiPoint:n(50),MultiLineString:n(51),MultiPolygon:n(52)},s=function(e,t,n,r,i){var o=n.split("."),a=parseInt(o[0],10),s=o[1]?o.slice(1).join("."):null;return e[a][t](s,r,i)},u=function(e,t){if(r.call(this,e,t),delete this.coordinates,this.model=a[t.geometry.type],void 0===this.model)throw new TypeError("".concat(t.geometry.type," is not a valid type"));this.features=this._coordinatesToFeatures(t.geometry.coordinates)};(u.prototype=Object.create(r.prototype))._coordinatesToFeatures=function(e){var t=this,n=this.model.bind(this);return e.map((function(e){return new n(t.ctx,{id:o(),type:i.geojsonTypes.FEATURE,properties:{},geometry:{coordinates:e,type:t.type.replace("Multi","")}})}))},u.prototype.isValid=function(){return this.features.every((function(e){return e.isValid()}))},u.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()},u.prototype.getCoordinate=function(e){return s(this.features,"getCoordinate",e)},u.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(e){return e.type===i.geojsonTypes.POLYGON?e.getCoordinates():e.coordinates}))))},u.prototype.updateCoordinate=function(e,t,n){s(this.features,"updateCoordinate",e,t,n),this.changed()},u.prototype.addCoordinate=function(e,t,n){s(this.features,"addCoordinate",e,t,n),this.changed()},u.prototype.removeCoordinate=function(e){s(this.features,"removeCoordinate",e),this.changed()},u.prototype.getFeatures=function(){return this.features},e.exports=u},function(e,t,n){var r=n(38),i=n(161),o=n(4);e.exports=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=t.geometry,u=s.type,l=s.coordinates,c=t.properties&&t.properties.id,h=[];function f(e,t){var o="",a=null;e.forEach((function(e,s){var u=void 0!==t&&null!==t?"".concat(t,".").concat(s):String(s),l=r(c,e,u,p(u));if(n.midpoints&&a){var f=i(c,a,l,n.map);f&&h.push(f)}a=l;var d=JSON.stringify(e);o!==d&&h.push(l),0===s&&(o=d)}))}function p(e){return!!n.selectedPaths&&-1!==n.selectedPaths.indexOf(e)}function d(){var r=u.replace(o.geojsonTypes.MULTI_PREFIX,"");l.forEach((function(i,a){var s={type:o.geojsonTypes.FEATURE,properties:t.properties,geometry:{type:r,coordinates:i}};h=h.concat(e(s,n,a))}))}return u===o.geojsonTypes.POINT?h.push(r(c,l,a,p(a))):u===o.geojsonTypes.POLYGON?l.forEach((function(e,t){f(e,null!==a?"".concat(a,".").concat(t):String(t))})):u===o.geojsonTypes.LINE_STRING?f(l,a):0===u.indexOf(o.geojsonTypes.MULTI_PREFIX)&&d(),h}},function(e,t,n){var r=n(4);e.exports=function(e,t,n,i){return{type:r.geojsonTypes.FEATURE,properties:{meta:r.meta.VERTEX,parent:e,coord_path:n,active:i?r.activeStates.ACTIVE:r.activeStates.INACTIVE},geometry:{type:r.geojsonTypes.POINT,coordinates:t}}}},function(e,t,n){var r=n(53),i=n(4);e.exports=function(e,t){var n=r(e.map((function(e){return e.toGeoJSON()})),t);e.forEach((function(e){var t,r=e.getCoordinates(),o=function(e){var t={lng:e[0]+n.lng,lat:e[1]+n.lat};return[t.lng,t.lat]},a=function(e){return e.map((function(e){return o(e)}))};e.type===i.geojsonTypes.POINT?t=o(r):e.type===i.geojsonTypes.LINE_STRING||e.type===i.geojsonTypes.MULTI_POINT?t=r.map(o):e.type===i.geojsonTypes.POLYGON||e.type===i.geojsonTypes.MULTI_LINE_STRING?t=r.map(a):e.type===i.geojsonTypes.MULTI_POLYGON&&(t=r.map((function(e){return e.map((function(e){return a(e)}))}))),e.incomingCoords(t)}))}},function(e,t,n){"use strict";e.exports={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}},function(e,t){e.exports=function(e){if(!e||!e.type)return null;var t=n[e.type];if(!t)return null;if("geometry"===t)return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if("feature"===t)return{type:"FeatureCollection",features:[e]};if("featurecollection"===t)return e};var n={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},function(e,t,n){"use strict";var r=n(57),i=n.n(r),o=n(0),a=o.b,s=o.a,u=o.d,l=o.c,c=o.f,h=o.e;t.a=function(e,t){var n=a,r=s,o=a,f=s,p=h,d=c;e.forEach((function(e){var t=i()(e),a=t[1],s=t[3],u=t[0],l=t[2];a>n&&(n=a),s<r&&(r=s),s>o&&(o=s),a<f&&(f=a),u<p&&(p=u),l>d&&(d=l)}));var g=t;return n+g.lat>l&&(g.lat=l-n),o+g.lat>s&&(g.lat=s-o),r+g.lat<u&&(g.lat=u-r),f+g.lat<a&&(g.lat=a-f),p+g.lng<=c&&(g.lng+=360*Math.ceil(Math.abs(g.lng)/360)),d+g.lng>=h&&(g.lng-=360*Math.ceil(Math.abs(g.lng)/360)),g}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(29);function i(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return s}));var o=n(18);function a(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(o.a)(e):t}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!c){var e=s(f);c=!0;for(var t=l.length;t;){for(u=l,l=[];++h<t;)u&&u[h].run();h=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new d(e,t)),1!==l.length||c||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r=n(62);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){var r=n(35),i=function(e,t){r.call(this,e,t)};(i.prototype=Object.create(r.prototype)).isValid=function(){return"number"===typeof this.coordinates[0]&&"number"===typeof this.coordinates[1]},i.prototype.updateCoordinate=function(e,t,n){this.coordinates=3===arguments.length?[t,n]:[e,t],this.changed()},i.prototype.getCoordinate=function(){return this.getCoordinates()},e.exports=i},function(e,t,n){var r=n(35),i=function(e,t){r.call(this,e,t)};(i.prototype=Object.create(r.prototype)).isValid=function(){return this.coordinates.length>1},i.prototype.addCoordinate=function(e,t,n){this.changed();var r=parseInt(e,10);this.coordinates.splice(r,0,[t,n])},i.prototype.getCoordinate=function(e){var t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))},i.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)},i.prototype.updateCoordinate=function(e,t,n){var r=parseInt(e,10);this.coordinates[r]=[t,n],this.changed()},e.exports=i},function(e,t,n){var r=n(35),i=function(e,t){r.call(this,e,t),this.coordinates=this.coordinates.map((function(e){return e.slice(0,-1)}))};(i.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((function(e){return e.length>2}))},i.prototype.incomingCoords=function(e){this.coordinates=e.map((function(e){return e.slice(0,-1)})),this.changed()},i.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},i.prototype.addCoordinate=function(e,t,n){this.changed();var r=e.split(".").map((function(e){return parseInt(e,10)}));this.coordinates[r[0]].splice(r[1],0,[t,n])},i.prototype.removeCoordinate=function(e){this.changed();var t=e.split(".").map((function(e){return parseInt(e,10)})),n=this.coordinates[t[0]];n&&(n.splice(t[1],1),n.length<3&&this.coordinates.splice(t[0],1))},i.prototype.getCoordinate=function(e){var t=e.split(".").map((function(e){return parseInt(e,10)})),n=this.coordinates[t[0]];return JSON.parse(JSON.stringify(n[t[1]]))},i.prototype.getCoordinates=function(){return this.coordinates.map((function(e){return e.concat([e[0]])}))},i.prototype.updateCoordinate=function(e,t,n){this.changed();var r=e.split("."),i=parseInt(r[0],10),o=parseInt(r[1],10);void 0===this.coordinates[i]&&(this.coordinates[i]=[]),this.coordinates[i][o]=[t,n]},e.exports=i},function(e,t,n){var r=n(57),i=n(4),o=i.LAT_MIN,a=i.LAT_MAX,s=i.LAT_RENDERED_MIN,u=i.LAT_RENDERED_MAX,l=i.LNG_MIN,c=i.LNG_MAX;e.exports=function(e,t){var n=o,i=a,h=o,f=a,p=c,d=l;e.forEach((function(e){var t=r(e),o=t[1],a=t[3],s=t[0],u=t[2];o>n&&(n=o),a<i&&(i=a),a>h&&(h=a),o<f&&(f=o),s<p&&(p=s),u>d&&(d=u)}));var g=t;return n+g.lat>u&&(g.lat=u-n),h+g.lat>a&&(g.lat=a-h),i+g.lat<s&&(g.lat=s-i),f+g.lat<o&&(g.lat=o-f),p+g.lng<=l&&(g.lng+=360*Math.ceil(Math.abs(g.lng)/360)),d+g.lng>=c&&(g.lng-=360*Math.ceil(Math.abs(g.lng)/360)),g}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(171),i=n(25);t.default=function(e,t,n){void 0===n&&(n={});for(var o=n.steps||64,a=n.properties?n.properties:!Array.isArray(e)&&"Feature"===e.type&&e.properties?e.properties:{},s=[],u=0;u<o;u++)s.push(r.default(e,t,-360*u/o,n).geometry.coordinates);return s.push(s[0]),i.polygon([s],a)}},function(e,t,n){var r=n(125);function i(e){var t=0;if(e&&e.length>0){t+=Math.abs(o(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(o(e[n]))}return t}function o(e){var t,n,i,o,s,u,l=0,c=e.length;if(c>2){for(u=0;u<c;u++)u===c-2?(i=c-2,o=c-1,s=0):u===c-1?(i=c-1,o=0,s=1):(i=u,o=u+1,s=u+2),t=e[i],n=e[o],l+=(a(e[s][0])-a(t[0]))*Math.sin(a(n[1]));l=l*r.RADIUS*r.RADIUS/2}return l}function a(e){return e*Math.PI/180}e.exports.geometry=function e(t){var n,r=0;switch(t.type){case"Polygon":return i(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)r+=i(t.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<t.geometries.length;n++)r+=e(t.geometries[n]);return r}},e.exports.ring=o},function(e,t,n){"use strict";function r(e,t){this.x=e,this.y=t}e.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},function(e,t,n){var r=n(126),i=n(129),o=n(130),a={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},s=Object.keys(a);function u(e){for(var t=o(),n=r(e),i=0;i<n.length;i++)t.include(n[i]);return t}e.exports=function(e){return u(e).bbox()},e.exports.polygon=function(e){return u(e).polygon()},e.exports.bboxify=function(e){return i(e).map((function(e){e&&(s.some((function(t){return!!e[t]&&-1!==a[t].indexOf(e.type)}))&&(e.bbox=u(e).bbox(),this.update(e)))}))}},function(e,t,n){(function(e,n){var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object Array]",s="[object Boolean]",u="[object Date]",l="[object Error]",c="[object Function]",h="[object Map]",f="[object Number]",p="[object Object]",d="[object Promise]",g="[object RegExp]",m="[object Set]",y="[object String]",v="[object Symbol]",_="[object WeakMap]",b="[object ArrayBuffer]",x="[object DataView]",w=/^\[object .+?Constructor\]$/,E=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[o]=S[a]=S[b]=S[s]=S[x]=S[u]=S[l]=S[c]=S[h]=S[f]=S[p]=S[g]=S[m]=S[y]=S[_]=!1;var T="object"==typeof e&&e&&e.Object===Object&&e,k="object"==typeof self&&self&&self.Object===Object&&self,C=T||k||Function("return this")(),I=t&&!t.nodeType&&t,A=I&&"object"==typeof n&&n&&!n.nodeType&&n,M=A&&A.exports===I,L=M&&T.process,N=function(){try{return L&&L.binding&&L.binding("util")}catch(e){}}(),P=N&&N.isTypedArray;function O(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function R(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function D(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var F,z,B=Array.prototype,U=Function.prototype,V=Object.prototype,j=C["__core-js_shared__"],q=U.toString,G=V.hasOwnProperty,$=function(){var e=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),H=V.toString,X=RegExp("^"+q.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),W=M?C.Buffer:void 0,Y=C.Symbol,Z=C.Uint8Array,J=V.propertyIsEnumerable,K=B.splice,Q=Y?Y.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=W?W.isBuffer:void 0,ne=(F=Object.keys,z=Object,function(e){return F(z(e))}),re=Le(C,"DataView"),ie=Le(C,"Map"),oe=Le(C,"Promise"),ae=Le(C,"Set"),se=Le(C,"WeakMap"),ue=Le(Object,"create"),le=Re(re),ce=Re(ie),he=Re(oe),fe=Re(ae),pe=Re(se),de=Y?Y.prototype:void 0,ge=de?de.valueOf:void 0;function me(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ve(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _e(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ve;++t<n;)this.add(e[t])}function be(e){var t=this.__data__=new ye(e);this.size=t.size}function xe(e,t){var n=ze(e),r=!n&&Fe(e),i=!n&&!r&&Be(e),o=!n&&!r&&!i&&Ge(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length;for(var l in e)!t&&!G.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Oe(l,u))||s.push(l);return s}function we(e,t){for(var n=e.length;n--;)if(De(e[n][0],t))return n;return-1}function Ee(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Q&&Q in Object(e)?function(e){var t=G.call(e,Q),n=e[Q];try{e[Q]=void 0;var r=!0}catch(o){}var i=H.call(e);r&&(t?e[Q]=n:delete e[Q]);return i}(e):function(e){return H.call(e)}(e)}function Se(e){return qe(e)&&Ee(e)==o}function Te(e,t,n,r,i){return e===t||(null==e||null==t||!qe(e)&&!qe(t)?e!==e&&t!==t:function(e,t,n,r,i,c){var d=ze(e),_=ze(t),w=d?a:Pe(e),E=_?a:Pe(t),S=(w=w==o?p:w)==p,T=(E=E==o?p:E)==p,k=w==E;if(k&&Be(e)){if(!Be(t))return!1;d=!0,S=!1}if(k&&!S)return c||(c=new be),d||Ge(e)?Ie(e,t,n,r,i,c):function(e,t,n,r,i,o,a){switch(n){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!o(new Z(e),new Z(t)));case s:case u:case f:return De(+e,+t);case l:return e.name==t.name&&e.message==t.message;case g:case y:return e==t+"";case h:var c=R;case m:var p=1&r;if(c||(c=D),e.size!=t.size&&!p)return!1;var d=a.get(e);if(d)return d==t;r|=2,a.set(e,t);var _=Ie(c(e),c(t),r,i,o,a);return a.delete(e),_;case v:if(ge)return ge.call(e)==ge.call(t)}return!1}(e,t,w,n,r,i,c);if(!(1&n)){var C=S&&G.call(e,"__wrapped__"),I=T&&G.call(t,"__wrapped__");if(C||I){var A=C?e.value():e,M=I?t.value():t;return c||(c=new be),i(A,M,n,r,c)}}if(!k)return!1;return c||(c=new be),function(e,t,n,r,i,o){var a=1&n,s=Ae(e),u=s.length,l=Ae(t).length;if(u!=l&&!a)return!1;var c=u;for(;c--;){var h=s[c];if(!(a?h in t:G.call(t,h)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var p=!0;o.set(e,t),o.set(t,e);var d=a;for(;++c<u;){var g=e[h=s[c]],m=t[h];if(r)var y=a?r(m,g,h,t,e,o):r(g,m,h,e,t,o);if(!(void 0===y?g===m||i(g,m,n,r,o):y)){p=!1;break}d||(d="constructor"==h)}if(p&&!d){var v=e.constructor,_=t.constructor;v==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,c)}(e,t,n,r,Te,i))}function ke(e){return!(!je(e)||function(e){return!!$&&$ in e}(e))&&(Ue(e)?X:w).test(Re(e))}function Ce(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||V;return e===n}(e))return ne(e);var t=[];for(var n in Object(e))G.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ie(e,t,n,r,i,o){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(e);if(l&&o.get(t))return l==t;var c=-1,h=!0,f=2&n?new _e:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var p=e[c],d=t[c];if(r)var g=a?r(d,p,c,t,e,o):r(p,d,c,e,t,o);if(void 0!==g){if(g)continue;h=!1;break}if(f){if(!O(t,(function(e,t){if(a=t,!f.has(a)&&(p===e||i(p,e,n,r,o)))return f.push(t);var a}))){h=!1;break}}else if(p!==d&&!i(p,d,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Ae(e){return function(e,t,n){var r=t(e);return ze(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,$e,Ne)}function Me(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Le(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ke(n)?n:void 0}me.prototype.clear=function(){this.__data__=ue?ue(null):{},this.size=0},me.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},me.prototype.get=function(e){var t=this.__data__;if(ue){var n=t[e];return n===r?void 0:n}return G.call(t,e)?t[e]:void 0},me.prototype.has=function(e){var t=this.__data__;return ue?void 0!==t[e]:G.call(t,e)},me.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ue&&void 0===t?r:t,this},ye.prototype.clear=function(){this.__data__=[],this.size=0},ye.prototype.delete=function(e){var t=this.__data__,n=we(t,e);return!(n<0)&&(n==t.length-1?t.pop():K.call(t,n,1),--this.size,!0)},ye.prototype.get=function(e){var t=this.__data__,n=we(t,e);return n<0?void 0:t[n][1]},ye.prototype.has=function(e){return we(this.__data__,e)>-1},ye.prototype.set=function(e,t){var n=this.__data__,r=we(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ve.prototype.clear=function(){this.size=0,this.__data__={hash:new me,map:new(ie||ye),string:new me}},ve.prototype.delete=function(e){var t=Me(this,e).delete(e);return this.size-=t?1:0,t},ve.prototype.get=function(e){return Me(this,e).get(e)},ve.prototype.has=function(e){return Me(this,e).has(e)},ve.prototype.set=function(e,t){var n=Me(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},_e.prototype.add=_e.prototype.push=function(e){return this.__data__.set(e,r),this},_e.prototype.has=function(e){return this.__data__.has(e)},be.prototype.clear=function(){this.__data__=new ye,this.size=0},be.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},be.prototype.get=function(e){return this.__data__.get(e)},be.prototype.has=function(e){return this.__data__.has(e)},be.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ye){var r=n.__data__;if(!ie||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ve(r)}return n.set(e,t),this.size=n.size,this};var Ne=ee?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(ee(e),(function(t){return J.call(e,t)})))}:function(){return[]},Pe=Ee;function Oe(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||E.test(e))&&e>-1&&e%1==0&&e<t}function Re(e){if(null!=e){try{return q.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function De(e,t){return e===t||e!==e&&t!==t}(re&&Pe(new re(new ArrayBuffer(1)))!=x||ie&&Pe(new ie)!=h||oe&&Pe(oe.resolve())!=d||ae&&Pe(new ae)!=m||se&&Pe(new se)!=_)&&(Pe=function(e){var t=Ee(e),n=t==p?e.constructor:void 0,r=n?Re(n):"";if(r)switch(r){case le:return x;case ce:return h;case he:return d;case fe:return m;case pe:return _}return t});var Fe=Se(function(){return arguments}())?Se:function(e){return qe(e)&&G.call(e,"callee")&&!J.call(e,"callee")},ze=Array.isArray;var Be=te||function(){return!1};function Ue(e){if(!je(e))return!1;var t=Ee(e);return t==c||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ve(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function je(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function qe(e){return null!=e&&"object"==typeof e}var Ge=P?function(e){return function(t){return e(t)}}(P):function(e){return qe(e)&&Ve(e.length)&&!!S[Ee(e)]};function $e(e){return null!=(t=e)&&Ve(t.length)&&!Ue(t)?xe(e):Ce(e);var t}n.exports=function(e,t){return Te(e,t)}}).call(this,n(22),n(28)(e))},function(e,t,n){"use strict";n.r(t);var r=n(3),i=n(56),o=n.n(i);var a=function(e,t){var n=t.getBoundingClientRect();return new o.a(e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0))},s=n(27),u=n(13),l=n(5),c=n(26),h=n(0),f={onSetup:function(e){var t=this,n={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(n.initiallySelectedFeatureIds.filter((function(e){return void 0!==t.getFeature(e)}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),n},fireUpdate:function(){this.map.fire(h.j.UPDATE,{action:h.q.MOVE,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},fireActionable:function(){var e=this,t=this.getSelected(),n=t.filter((function(t){return e.isInstanceOf("MultiFeature",t)})),r=!1;if(t.length>1){r=!0;var i=t[0].type.replace("Multi","");t.forEach((function(e){e.type.replace("Multi","")!==i&&(r=!1)}))}var o=n.length>0,a=t.length>0;this.setActionableState({combineFeatures:r,uncombineFeatures:o,trash:a})},getUniqueIds:function(e){return e.length?e.map((function(e){return e.properties.id})).filter((function(e){return void 0!==e})).reduce((function(e,t){return e.add(t),e}),new u.a).values():[]},stopExtendedInteractions:function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1},onStop:function(){l.a.enable(this)},onMouseMove:function(e){return this.stopExtendedInteractions(e)},onMouseOut:function(e){if(e.dragMoving)return this.fireUpdate()}};f.onTap=f.onClick=function(e,t){return r.j(t)?this.clickAnywhere(e,t):r.f(h.m.VERTEX)(t)?this.clickOnVertex(e,t):r.d(t)?this.clickOnFeature(e,t):void 0},f.clickAnywhere=function(e){var t=this,n=this.getSelectedIds();n.length&&(this.clearSelectedFeatures(),n.forEach((function(e){return t.doRender(e)}))),l.a.enable(this),this.stopExtendedInteractions(e)},f.clickOnVertex=function(e,t){this.changeMode(h.n.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:h.i.MOVE})},f.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},f.clickOnFeature=function(e,t){var n=this;l.a.disable(this),this.stopExtendedInteractions(e);var i=r.g(t),o=this.getSelectedIds(),a=t.featureTarget.properties.id,s=this.isSelected(a);if(!i&&s&&this.getFeature(a).type!==h.k.POINT)return this.changeMode(h.n.DIRECT_SELECT,{featureId:a});s&&i?(this.deselect(a),this.updateUIClasses({mouse:h.i.POINTER}),1===o.length&&l.a.enable(this)):!s&&i?(this.select(a),this.updateUIClasses({mouse:h.i.MOVE})):s||i||(o.forEach((function(e){return n.doRender(e)})),this.setSelected(a),this.updateUIClasses({mouse:h.i.MOVE})),this.doRender(a)},f.onMouseDown=function(e,t){return r.a(t)?this.startOnActiveFeature(e,t):this.drawConfig.boxSelect&&r.h(t)?this.startBoxSelect(e,t):void 0},f.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=a(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0},f.onTouchStart=function(e,t){if(r.a(t))return this.startOnActiveFeature(e,t)},f.onDrag=function(e,t){return e.canDragMove?this.dragMove(e,t):this.drawConfig.boxSelect&&e.canBoxSelect?this.whileBoxSelect(e,t):void 0},f.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:h.i.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(h.h.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));var n=a(t.originalEvent,this.map.getContainer()),r=Math.min(e.boxSelectStartLocation.x,n.x),i=Math.max(e.boxSelectStartLocation.x,n.x),o=Math.min(e.boxSelectStartLocation.y,n.y),s=Math.max(e.boxSelectStartLocation.y,n.y),u="translate(".concat(r,"px, ").concat(o,"px)");e.boxSelectElement.style.transform=u,e.boxSelectElement.style.WebkitTransform=u,e.boxSelectElement.style.width="".concat(i-r,"px"),e.boxSelectElement.style.height="".concat(s-o,"px")},f.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();var n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};Object(c.a)(this.getSelected(),n),e.dragMoveLocation=t.lngLat},f.onMouseUp=function(e,t){var n=this;if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){var r=[e.boxSelectStartLocation,a(t.originalEvent,this.map.getContainer())],i=this.featuresAt(null,r,"click"),o=this.getUniqueIds(i).filter((function(e){return!n.isSelected(e)}));o.length&&(this.select(o),o.forEach((function(e){return n.doRender(e)})),this.updateUIClasses({mouse:h.i.MOVE}))}this.stopExtendedInteractions(e)},f.toDisplayFeatures=function(e,t,n){t.properties.active=this.isSelected(t.properties.id)?h.g.ACTIVE:h.g.INACTIVE,n(t),this.fireActionable(),t.properties.active===h.g.ACTIVE&&t.geometry.type!==h.k.POINT&&Object(s.a)(t).forEach(n)},f.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},f.onCombineFeatures=function(){var e=this.getSelected();if(!(0===e.length||e.length<2)){for(var t=[],n=[],r=e[0].type.replace("Multi",""),i=0;i<e.length;i++){var o=e[i];if(o.type.replace("Multi","")!==r)return;o.type.includes("Multi")?o.getCoordinates().forEach((function(e){t.push(e)})):t.push(o.getCoordinates()),n.push(o.toGeoJSON())}if(n.length>1){var a=this.newFeature({type:h.k.FEATURE,properties:n[0].properties,geometry:{type:"Multi".concat(r),coordinates:t}});this.addFeature(a),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([a.id]),this.map.fire(h.j.COMBINE_FEATURES,{createdFeatures:[a.toGeoJSON()],deletedFeatures:n})}this.fireActionable()}},f.onUncombineFeatures=function(){var e=this,t=this.getSelected();if(0!==t.length){for(var n=[],r=[],i=function(i){var o=t[i];e.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach((function(t){e.addFeature(t),t.properties=o.properties,n.push(t.toGeoJSON()),e.select([t.id])})),e.deleteFeature(o.id,{silent:!0}),r.push(o.toGeoJSON()))},o=0;o<t.length;o++)i(o);n.length>1&&this.map.fire(h.j.UNCOMBINE_FEATURES,{createdFeatures:n,deletedFeatures:r}),this.fireActionable()}};t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t){return e(t={exports:{}},t.exports),t.exports}Object.defineProperty(t,"__esModule",{value:!0});var o=i((function(e,t){function n(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function r(e,t,r){return void 0===r&&(r={}),n({type:"Point",coordinates:e},t,r)}function i(e,t,r){void 0===r&&(r={});for(var i=0,o=e;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:e},t,r)}function o(e,t,r){if(void 0===r&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:e},t,r)}function a(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function s(e,t,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:e},t,r)}function u(e,t,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:e},t,r)}function l(e,t,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:e},t,r)}function c(e,n){void 0===n&&(n="kilometers");var r=t.factors[n];if(!r)throw new Error(n+" units is invalid");return e*r}function h(e,n){void 0===n&&(n="kilometers");var r=t.factors[n];if(!r)throw new Error(n+" units is invalid");return e/r}function f(e){return e%(2*Math.PI)*180/Math.PI}function p(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=n,t.geometry=function(e,t,n){switch(e){case"Point":return r(t).geometry;case"LineString":return o(t).geometry;case"Polygon":return i(t).geometry;case"MultiPoint":return u(t).geometry;case"MultiLineString":return s(t).geometry;case"MultiPolygon":return l(t).geometry;default:throw new Error(e+" is invalid")}},t.point=r,t.points=function(e,t,n){return void 0===n&&(n={}),a(e.map((function(e){return r(e,t)})),n)},t.polygon=i,t.polygons=function(e,t,n){return void 0===n&&(n={}),a(e.map((function(e){return i(e,t)})),n)},t.lineString=o,t.lineStrings=function(e,t,n){return void 0===n&&(n={}),a(e.map((function(e){return o(e,t)})),n)},t.featureCollection=a,t.multiLineString=s,t.multiPoint=u,t.multiPolygon=l,t.geometryCollection=function(e,t,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:e},t,r)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n},t.radiansToLength=c,t.lengthToRadians=h,t.lengthToDegrees=function(e,t){return f(h(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=f,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,n){if(void 0===t&&(t="kilometers"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return c(h(e,t),n)},t.convertArea=function(e,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=t.areaFactors[n];if(!i)throw new Error("invalid original units");var o=t.areaFactors[r];if(!o)throw new Error("invalid final units");return e/i*o},t.isNumber=p,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!p(e))throw new Error("bbox must only contain numbers")}))},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}}));r(o),o.earthRadius,o.factors,o.unitsFactors,o.areaFactors,o.feature,o.geometry,o.point,o.points,o.polygon,o.polygons,o.lineString,o.lineStrings,o.featureCollection,o.multiLineString,o.multiPoint,o.multiPolygon,o.geometryCollection,o.round,o.radiansToLength,o.lengthToRadians,o.lengthToDegrees,o.bearingToAzimuth,o.radiansToDegrees,o.degreesToRadians,o.convertLength,o.convertArea,o.isNumber,o.isObject,o.validateBBox,o.validateId,o.radians2degrees,o.degrees2radians,o.distanceToDegrees,o.distanceToRadians,o.radiansToDistance,o.bearingToAngle,o.convertDistance;var a=i((function(e,t){function n(e,t,r){if(null!==e)for(var i,o,a,s,u,l,c,h,f=0,p=0,d=e.type,g="FeatureCollection"===d,m="Feature"===d,y=g?e.features.length:1,v=0;v<y;v++){u=(h=!!(c=g?e.features[v].geometry:m?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var _=0;_<u;_++){var b=0,x=0;if(null!==(s=h?c.geometries[_]:c)){l=s.coordinates;var w=s.type;switch(f=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===t(l,p,v,b,x))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===t(l[i],p,v,b,x))return!1;p++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(o=0;o<l[i].length-f;o++){if(!1===t(l[i][o],p,v,b,x))return!1;p++}"MultiLineString"===w&&b++,"Polygon"===w&&x++}"Polygon"===w&&b++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,o=0;o<l[i].length;o++){for(a=0;a<l[i][o].length-f;a++){if(!1===t(l[i][o][a],p,v,b,x))return!1;p++}x++}b++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===n(s.geometries[i],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function r(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&!1!==t(e.features[n].properties,n);n++);break;case"Feature":t(e.properties,0)}}function i(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}function a(e,t){var n,r,i,o,a,s,u,l,c,h,f=0,p="FeatureCollection"===e.type,d="Feature"===e.type,g=p?e.features.length:1;for(n=0;n<g;n++){for(s=p?e.features[n].geometry:d?e.geometry:e,l=p?e.features[n].properties:d?e.properties:{},c=p?e.features[n].bbox:d?e.bbox:void 0,h=p?e.features[n].id:d?e.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,f,l,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===t(o.geometries[r],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,f,l,c,h))return!1;f++}}function s(e,t){a(e,(function(e,n,r,i,a){var s,u=null===e?null:e.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==t(o.feature(e,r,{bbox:i,id:a}),n,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c={type:s,coordinates:e.coordinates[l]};if(!1===t(o.feature(c,r),n,l))return!1}}))}function u(e,t){s(e,(function(e,r,i){var a=0;if(e.geometry){var s=e.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,l=0,c=0,h=0;return!1!==n(e,(function(n,s,f,p,d){if(void 0===u||r>l||p>c||d>h)return u=n,l=r,c=p,h=d,void(a=0);var g=o.lineString([u,n],e.properties);if(!1===t(g,r,i,d,a))return!1;a++,u=n}))&&void 0}}}))}function l(e,t){if(!e)throw new Error("geojson is required");s(e,(function(e,n,r){if(null!==e.geometry){var i=e.geometry.type,a=e.geometry.coordinates;switch(i){case"LineString":if(!1===t(e,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===t(o.lineString(a[s],e.properties),n,r,s))return!1}}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.coordEach=n,t.coordReduce=function(e,t,r,i){var o=r;return n(e,(function(e,n,i,a,s){o=0===n&&void 0===r?e:t(o,e,n,i,a,s)}),i),o},t.propEach=r,t.propReduce=function(e,t,n){var i=n;return r(e,(function(e,r){i=0===r&&void 0===n?e:t(i,e,r)})),i},t.featureEach=i,t.featureReduce=function(e,t,n){var r=n;return i(e,(function(e,i){r=0===i&&void 0===n?e:t(r,e,i)})),r},t.coordAll=function(e){var t=[];return n(e,(function(e){t.push(e)})),t},t.geomEach=a,t.geomReduce=function(e,t,n){var r=n;return a(e,(function(e,i,o,a,s){r=0===i&&void 0===n?e:t(r,e,i,o,a,s)})),r},t.flattenEach=s,t.flattenReduce=function(e,t,n){var r=n;return s(e,(function(e,i,o){r=0===i&&0===o&&void 0===n?e:t(r,e,i,o)})),r},t.segmentEach=u,t.segmentReduce=function(e,t,n){var r=n,i=!1;return u(e,(function(e,o,a,s,u){r=!1===i&&void 0===n?e:t(r,e,o,a,s,u),i=!0})),r},t.lineEach=l,t.lineReduce=function(e,t,n){var r=n;return l(e,(function(e,i,o,a){r=0===i&&void 0===n?e:t(r,e,i,o,a)})),r},t.findSegment=function(e,t){if(t=t||{},!o.isObject(t))throw new Error("options is invalid");var n,r=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.segmentIndex||0,u=t.properties;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),u=u||e.features[r].properties,n=e.features[r].geometry;break;case"Feature":u=u||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),o.lineString([l[s],l[s+1]],u,t);case"Polygon":return a<0&&(a=l.length+a),s<0&&(s=l[a].length+s-1),o.lineString([l[a][s],l[a][s+1]],u,t);case"MultiLineString":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s-1),o.lineString([l[i][s],l[i][s+1]],u,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),s<0&&(s=l[i][a].length-s-1),o.lineString([l[i][a][s],l[i][a][s+1]],u,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!o.isObject(t))throw new Error("options is invalid");var n,r=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.coordIndex||0,u=t.properties;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),u=u||e.features[r].properties,n=e.features[r].geometry;break;case"Feature":u=u||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return o.point(l,u,t);case"MultiPoint":return i<0&&(i=l.length+i),o.point(l[i],u,t);case"LineString":return s<0&&(s=l.length+s),o.point(l[s],u,t);case"Polygon":return a<0&&(a=l.length+a),s<0&&(s=l[a].length+s),o.point(l[a][s],u,t);case"MultiLineString":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s),o.point(l[i][s],u,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),s<0&&(s=l[i][a].length-s),o.point(l[i][a][s],u,t)}throw new Error("geojson is invalid")}}));r(a),a.coordEach,a.coordReduce,a.propEach,a.propReduce,a.featureEach,a.featureReduce,a.coordAll,a.geomEach,a.geomReduce,a.flattenEach,a.flattenReduce,a.segmentEach,a.segmentReduce,a.lineEach,a.lineReduce,a.findSegment,a.findPoint;var s=r(i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=6378137;function r(e){var t=0;if(e&&e.length>0){t+=Math.abs(i(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(i(e[n]))}return t}function i(e){var t,r,i,a,s,u,l=0,c=e.length;if(c>2){for(u=0;u<c;u++)u===c-2?(i=c-2,a=c-1,s=0):u===c-1?(i=c-1,a=0,s=1):(i=u,a=u+1,s=u+2),t=e[i],r=e[a],l+=(o(e[s][0])-o(t[0]))*Math.sin(o(r[1]));l=l*n*n/2}return l}function o(e){return e*Math.PI/180}t.default=function(e){return a.geomReduce(e,(function(e,t){return e+function(e){var t,n=0;switch(e.type){case"Polygon":return r(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=r(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)}),0)}}))),u="add",l="pointer",c="none",h="polygon",f="Feature",p="Polygon",d="Point",g="simple_select",m="draw.create",y="feature",v="vertex",_="true",b="false",x=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function w(e){return{enable:function(t){setTimeout((function(){t.map&&t.map[e]&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue(e)&&t.map[e].enable()}),0)},disable:function(t){setTimeout((function(){t.map&&t.map[e]&&t.map[e].disable()}),0)}}}var E=w("doubleClickZoom"),S=w("dragPan"),T={onSetup:function(e){var t=e.areaLimit,n=e.areaChangedCallback,r=e.exceedCallback,i=e.exceedCallsOnEachMove,o=void 0!==i&&i,a=e.allowCreateExceeded,s=void 0!==a&&a,l=e.escapeKeyStopsDrawing,c=void 0===l||l,d=this.newFeature({type:f,properties:{},geometry:{type:p,coordinates:[[]]}});return this.addFeature(d),this.clearSelectedFeatures(),E.disable(this),S.disable(this),this.updateUIClasses({mouse:u}),this.activateUIButton(h),this.setActionableState({trash:!0}),t&&(this.areaLimit=t),this.allowCreateExceeded=s,this.exceedCallsOnEachMove=o,this.escapeStopsDrawing=c,r&&(this.exceedCallback=r),n&&(this.areaChangedCallback=n),{rectangle:d,dragMoving:!1,sizeExceeded:!1,currentArea:0}},onClick:function(e,t){if(e.startPoint)e.startPoint&&e.startPoint[0]!==t.lngLat.lng&&e.startPoint[1]!==t.lngLat.lat&&e.dragMoving&&(!e.sizeExceeded||this.allowCreateExceeded)&&(this.updateUIClasses({mouse:"pointer"}),e.endPoint=[t.lngLat.lng,t.lngLat.lat],this.changeMode(g,{featureIds:[e.rectangle.id]}));else{var n=[t.lngLat.lng,t.lngLat.lat];e.startPoint=n,this.updateUIClasses({mouse:u}),e.rectangle.updateCoordinate("0.0",t.lngLat.lng,t.lngLat.lat),e.rectangle.updateCoordinate("0.1",t.lngLat.lng,t.lngLat.lat)}}};T.onMouseUp=T.onClick,T.onMouseDown=T.onClick,T.onTouchStart=T.onClick,T.onTouchEnd=function(e,t){e.startPoint&&e.startPoint[0]!==t.lngLat.lng&&e.startPoint[1]!==t.lngLat.lat?(T.onMouseMove(e,t),this.updateUIClasses({mouse:"pointer"}),e.endPoint=[t.lngLat.lng,t.lngLat.lat],this.changeMode(g,{featureIds:[e.rectangle.id]})):T.onClick(e,t)},T.onTap=function(e,t){e.startPoint||this.onClick(e,t)},T.onMouseMove=function(e,t){if(e.dragMoving=!0,function(e){var t=e.featureTarget;return!!t&&!!t.properties&&t.properties.meta===v}(t)&&this.updateUIClasses({mouse:l}),e.startPoint?(e.rectangle.updateCoordinate("0.1",t.lngLat.lng,e.startPoint[1]),e.rectangle.updateCoordinate("0.2",t.lngLat.lng,t.lngLat.lat),e.rectangle.updateCoordinate("0.3",e.startPoint[0],t.lngLat.lat),e.rectangle.updateCoordinate("0.4",e.startPoint[0],e.startPoint[1])):e.rectangle.updateCoordinate("0.0",t.lngLat.lng,t.lngLat.lat),this.areaLimit){var n=function(e){return s(e)}(e.rectangle);n>0&&e.currentArea!==n&&this.areaChangedCallback&&this.areaChangedCallback(n),e.currentArea=n,n>this.areaLimit?(e.sizeExceeded&&!this.exceedCallsOnEachMove||this.exceedCallback&&this.exceedCallback(n),e.sizeExceeded=!0,e.rectangle.properties.size_exceed=!0):(e.sizeExceeded=!1,e.rectangle.properties.size_exceed=!1)}},T.onDrag=T.onMouseMove,T.onTouchMove=T.onMouseMove,T.onStop=function(e){this.updateUIClasses({mouse:c}),E.enable(this),S.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.rectangle.id)&&(e.rectangle.removeCoordinate("0.5"),e.rectangle.isValid()?this.map.fire(m,{features:[e.rectangle.toGeoJSON()]}):(this.deleteFeature([e.rectangle.id],{silent:!0}),this.changeMode(g,{},{silent:!0})))},T.onKeyUp=function(e,t){(function(e){return 27===e.keyCode})(t)&&(this.escapeStopsDrawing?(this.deleteFeature([e.rectangle.id],{silent:!0}),this.changeMode(g)):function(e){return 13===e.keyCode}(t)&&this.changeMode(g,{featureIds:[e.rectangle.id]}))},T.onTrash=function(e){this.deleteFeature([e.rectangle.id],{silent:!0}),this.changeMode(g)},T.toDisplayFeatures=function(e,t,n){var r,i,o=t.properties.id===e.rectangle.id;return t.properties.active=o?_:b,o?0!==t.geometry.coordinates.length?t.geometry.coordinates[0].length<3||(n((r=e.rectangle.id,i=t.geometry.coordinates[0][0],"0.0",!1,{type:f,properties:{meta:v,parent:r,coord_path:"0.0",active:b},geometry:{type:d,coordinates:i}})),t.properties.meta=y,!e.startPoint)?void 0:n(t):void 0:n(t)};var k=[{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":["case",["!",["to-boolean",["get","user_size_exceed"]]],"#fbb03b","#ff0000"],"fill-opacity":.2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["!",["to-boolean",["get","user_size_exceed"]]],"#fbb03b","#ff0000"],"line-dasharray":[.2,2],"line-width":2}}];function C(e){return x.filter((function(t){return!e.map((function(e){return e.id})).includes(t.id)})).concat(e)}var I=C(k);t.ActivePolygonStyles=k,t.DrawStyles=I,t.default=T,t.overrideDefaultStyles=C},function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var r=u,i=u,o=u,a=l,s=c;function u(e){for(var t=new Array(e),n=-1;++n<e;)t[n]=0;return t}function l(e,t){for(var n=e.length;n<t;)e[n++]=0;return e}function c(e,t){if(t>32)throw new Error("invalid array width!");return e}function h(e){this.length=e,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=r(e)}"undefined"!==typeof Uint8Array&&(r=function(e){return new Uint8Array(e)},i=function(e){return new Uint16Array(e)},o=function(e){return new Uint32Array(e)},a=function(e,t){if(e.length>=t)return e;var n=new e.constructor(t);return n.set(e),n},s=function(e,t){var n;switch(t){case 16:n=i(e.length);break;case 32:n=o(e.length);break;default:throw new Error("invalid array width!")}return n.set(e),n}),h.prototype.lengthen=function(e){var t,n;for(t=0,n=this.subarrays;t<n;++t)this[t]=a(this[t],e);this.length=e},h.prototype.add=function(){var e,t,n,i,o;for(i=0,o=this.subarrays;i<o;++i)if(n=(~(e=this.masks[i])&e+1)>>>0,!((t=this.width-32*i)>=32)||n)return t<32&&n&1<<t&&(this[i]=s(this[i],t<<=1),this.width=32*i+t),this.masks[i]|=n,{offset:i,one:n};return this[this.subarrays]=r(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},h.prototype.copy=function(e,t){var n,r;for(n=0,r=this.subarrays;n<r;++n)this[n][e]=this[n][t]},h.prototype.truncate=function(e){var t,n;for(t=0,n=this.subarrays;t<n;++t)for(var r=this.length-1;r>=e;r--)this[t][r]=0;this.length=e},h.prototype.zero=function(e){var t,n;for(t=0,n=this.subarrays;t<n;++t)if(this[t][e])return!1;return!0},h.prototype.zeroExcept=function(e,t,n){var r,i;for(r=0,i=this.subarrays;r<i;++r)if(r===t?this[r][e]&n:this[r][e])return!1;return!0},h.prototype.zeroExceptMask=function(e,t){var n,r;for(n=0,r=this.subarrays;n<r;++n)if(this[n][e]&t[n])return!1;return!0},h.prototype.only=function(e,t,n){var r,i;for(r=0,i=this.subarrays;r<i;++r)if(this[r][e]!=(r===t?n:0))return!1;return!0},h.prototype.onlyExcept=function(e,t,n,r,i){var o,a,s;for(a=0,s=this.subarrays;a<s;++a)if(o=this[a][e],a===t&&(o=(o&n)>>>0),o!=(a===r?i:0))return!1;return!0};var f={array8:u,array16:u,array32:u,arrayLengthen:l,arrayWiden:c,bitarray:h},p=function(e,t){return function(n){var r=n.length;return[e.left(n,t,0,r),e.right(n,t,0,r)]}},d=function(e,t){var n=t[0],r=t[1];return function(t){var i=t.length;return[e.left(t,n,0,i),e.left(t,r,0,i)]}},g=function(e){return[0,e.length]},m=function(e){return e},y=function(){return null},v=function(){return 0};function _(e){function t(e,t,r){for(var i=r-t,o=1+(i>>>1);--o>0;)n(e,o,i,t);return e}function n(t,n,r,i){for(var o,a=t[--i+n],s=e(a);(o=n<<1)<=r&&(o<r&&e(t[i+o])>e(t[i+o+1])&&o++,!(s<=e(t[i+o])));)t[i+n]=t[i+o],n=o;t[i+n]=a}return t.sort=function(e,t,r){for(var i,o=r-t;--o>0;)i=e[t],e[t]=e[t+o],e[t+o]=i,n(e,1,o,t);return e},t}var b=_(m);b.by=_;var x=b;function w(e){var t=x.by(e);return function(n,r,i,o){var a,s,u,l=new Array(o=Math.min(i-r,o));for(s=0;s<o;++s)l[s]=n[r++];if(t(l,0,o),r<i){a=e(l[0]);do{e(u=n[r])>a&&(l[0]=u,a=e(t(l,0,o)[0]))}while(++r<i)}return l}}var E=w(m);E.by=w;var S=E;function T(e){function t(t,n,r,i){for(;r<i;){var o=r+i>>>1;n<e(t[o])?i=o:r=o+1}return r}return t.right=t,t.left=function(t,n,r,i){for(;r<i;){var o=r+i>>>1;e(t[o])<n?r=o+1:i=o}return r},t}var k=T(m);k.by=T;var C=k,I=function(e,t,n){for(var r=0,i=t.length,o=n?JSON.parse(JSON.stringify(e)):new Array(i);r<i;++r)o[r]=e[t[r]];return o},A=function(e){return e+1},M=function(e){return e-1},L=function(e){return function(t,n){return t+ +e(n)}},N=function(e){return function(t,n){return t-e(n)}},P=function(e,t){var n=e[t];return"function"===typeof n?n.call(e):n},O=/\[([\w\d]+)\]/g,R=function(e,t){return function(e,t,n,r,i){for(i in r=(n=n.split(".")).splice(-1,1),n)t=t[n[i]]=t[n[i]]||{};return e(t,r)}(P,e,t.replace(O,".$1"))},D=-1;z.heap=x,z.heapselect=S,z.bisect=C,z.permute=I;var F=z;function z(){var e,t={add:u,remove:l,dimension:_,groupAll:b,size:w,all:E,allFiltered:T,onChange:k,isElementFiltered:h},n=[],r=0,i=[],o=[],a=[],s=[];function u(i){var a=r,s=i.length;return s&&(n=n.concat(i),e.lengthen(r+=s),o.forEach((function(e){e(i,a,s)})),P("dataAdded")),t}function l(t){for(var o,s=new Array(r),u=[],l="function"===typeof t,c=0,h=0;c<r;++c)o=c,(l?t(n[o],o):e.zero(o))?(u.push(c),s[c]=D):s[c]=h++;i.forEach((function(e){e(-1,-1,[],u,!0)})),a.forEach((function(e){e(s)}));for(var f=0,p=0;f<r;++f)s[f]!==D&&(f!==p&&(e.copy(p,f),n[p]=n[f]),++p);n.length=r=p,e.truncate(p),P("dataRemoved")}function c(t){var n,r,i,o,a=Array(e.subarrays);for(n=0;n<e.subarrays;n++)a[n]=-1;for(r=0,i=t.length;r<i;r++)a[(o=t[r].id())>>7]&=~(1<<(63&o));return a}function h(t,n){var r=c(n||[]);return e.zeroExceptMask(t,r)}function _(t,s){if("string"===typeof t){var u=t;t=function(e){return R(e,u)}}var l,c,h,_,b,w,E,T,k,O,F,z,j,q,G={filter:function(e){return null==e?ae():Array.isArray(e)?oe(e):"function"===typeof e?se(e):ie(e)},filterExact:ie,filterRange:oe,filterFunction:se,filterAll:ae,currentFilter:function(){return z},hasCurrentFilter:function(){return j},top:function(t,r){var i,o=[],a=J,u=0;r&&r>0&&(u=r);for(;--a>=Z&&t>0;)e.zero(i=w[a])&&(u>0?--u:(o.push(n[i]),--t));if(s)for(a=0;a<$.length&&t>0;a++)e.zero(i=$[a])&&(u>0?--u:(o.push(n[i]),--t));return o},bottom:function(t,r){var i,o,a=[],u=0;r&&r>0&&(u=r);if(s)for(i=0;i<$.length&&t>0;i++)e.zero(o=$[i])&&(u>0?--u:(a.push(n[o]),--t));i=Z;for(;i<J&&t>0;)e.zero(o=w[i])&&(u>0?--u:(a.push(n[o]),--t)),i++;return a},group:le,groupAll:function(){var e=le(y),t=e.all;return delete e.all,delete e.top,delete e.order,delete e.orderNatural,delete e.size,e.value=function(){return t()[0].value},e},dispose:ce,remove:ce,accessor:t,id:function(){return _}},$=[],H=function(e){return U(e).sort((function(e,t){var n=E[e],r=E[t];return n<r?-1:n>r?1:e-t}))},X=g,W=[],Y=[],Z=0,J=0,K=0;o.unshift(ee),o.push(te),a.push(ne);var Q=e.add();function ee(n,i,o){var a,u;if(s){K=0,D=0,q=[];for(var c=0;c<n.length;c++)for(D=0,q=t(n[c]);D<q.length;D++)K++;E=[],a=U(n.length),u=B(K,1);for(var p=U(K),d=0,g=0;g<n.length;g++)if((q=t(n[g])).length)for(a[g]=q.length,D=0;D<q.length;D++)E.push(q[D]),p[d]=g,d++;else a[g]=0,$.push(g+i);var m=H(K);E=I(E,m),T=I(p,m)}else E=n.map(t),T=H(o),E=I(E,T);var y,v,_,x=X(E),S=x[0],C=x[1];if(s)if(o=K,F)for(y=0;y<o;++y)F(E[y],y)||(0===--a[T[y]]&&(e[h][T[y]+i]|=l),u[y]=1);else{for(v=0;v<S;++v)0===--a[T[v]]&&(e[h][T[v]+i]|=l),u[v]=1;for(_=C;_<o;++_)0===--a[T[_]]&&(e[h][T[_]+i]|=l),u[_]=1}else if(F)for(y=0;y<o;++y)F(E[y],y)||(e[h][T[y]+i]|=l);else{for(v=0;v<S;++v)e[h][T[v]+i]|=l;for(_=C;_<o;++_)e[h][T[_]+i]|=l}if(!i)return b=E,w=T,k=a,O=u,Z=S,void(J=C);var A,M=b,L=w,N=O,P=0;if(c=0,s&&(A=i,i=M.length,o=K),b=new Array(s?i+o:r),w=s?new Array(i+o):B(r,r),s&&(O=B(i+o,1)),s){var R=k.length;k=f.arrayLengthen(k,r);for(var D=0;D+R<r;D++)k[D+R]=a[D]}for(var z=0;c<i&&P<o;++z)M[c]<E[P]?(b[z]=M[c],s&&(O[z]=N[c]),w[z]=L[c++]):(b[z]=E[P],s&&(O[z]=u[P]),w[z]=T[P++]+(s?A:i));for(;c<i;++c,++z)b[z]=M[c],s&&(O[z]=N[c]),w[z]=L[c];for(;P<o;++P,++z)b[z]=E[P],s&&(O[z]=u[P]),w[z]=T[P]+(s?A:i);x=X(b),Z=x[0],J=x[1]}function te(e,t,n){W.forEach((function(e){e(E,T,t,n)})),E=T=null}function ne(e){if(s){for(var t=0,n=0;t<$.length;t++)e[$[t]]!==D&&($[n]=e[$[t]],n++);for($.length=n,t=0,n=0;t<r;t++)e[t]!==D&&(n!==t&&(k[n]=k[t]),n++);k=k.slice(0,n)}for(var i,o=b.length,a=0,u=0;a<o;++a)e[i=w[a]]!==D&&(a!==u&&(b[u]=b[a]),w[u]=e[i],s&&(O[u]=O[a]),++u);for(b.length=u,s&&(O=O.slice(0,u));u<o;)w[u++]=0;var l=X(b);Z=l[0],J=l[1]}function re(t){var n=t[0],r=t[1];if(F)return F=null,ue((function(e,t){return n<=t&&t<r}),0===t[0]&&t[1]===b.length),Z=n,J=r,G;var o,a,u,c=[],f=[],p=[],d=[];if(n<Z)for(o=n,a=Math.min(Z,r);o<a;++o)c.push(w[o]),p.push(o);else if(n>Z)for(o=Z,a=Math.min(n,J);o<a;++o)f.push(w[o]),d.push(o);if(r>J)for(o=Math.max(n,J),a=r;o<a;++o)c.push(w[o]),p.push(o);else if(r<J)for(o=Math.max(Z,r),a=J;o<a;++o)f.push(w[o]),d.push(o);if(s){var m=[],y=[];for(o=0;o<c.length;o++)k[c[o]]++,O[p[o]]=0,1===k[c[o]]&&(e[h][c[o]]^=l,m.push(c[o]));for(o=0;o<f.length;o++)k[f[o]]--,O[d[o]]=1,0===k[f[o]]&&(e[h][f[o]]^=l,y.push(f[o]));if(c=m,f=y,X===g)for(o=0;o<$.length;o++)e[h][u=$[o]]&l&&(e[h][u]^=l,c.push(u));else for(o=0;o<$.length;o++)e[h][u=$[o]]&l||(e[h][u]^=l,f.push(u))}else{for(o=0;o<c.length;o++)e[h][c[o]]^=l;for(o=0;o<f.length;o++)e[h][f[o]]^=l}return Z=n,J=r,i.forEach((function(e){e(l,h,c,f)})),P("filtered"),G}function ie(e){return z=e,j=!0,re((X=p(C,e))(b))}function oe(e){return z=e,j=!0,re((X=d(C,e))(b))}function ae(){return z=void 0,j=!1,re((X=g)(b))}function se(e){z=e,j=!0,F=e,X=g,ue(e,!1);var t=X(b);return Z=t[0],J=t[1],G}function ue(t,n){var r,o,a,u=[],f=[],p=[],d=[],g=b.length;if(!s)for(r=0;r<g;++r)!(e[h][o=w[r]]&l)^!!(a=t(b[r],r))&&(a?u.push(o):f.push(o));if(s)for(r=0;r<g;++r)t(b[r],r)?(u.push(w[r]),p.push(r)):(f.push(w[r]),d.push(r));if(s){var m=[],y=[];for(r=0;r<u.length;r++)1===O[p[r]]&&(k[u[r]]++,O[p[r]]=0,1===k[u[r]]&&(e[h][u[r]]^=l,m.push(u[r])));for(r=0;r<f.length;r++)0===O[d[r]]&&(k[f[r]]--,O[d[r]]=1,0===k[f[r]]&&(e[h][f[r]]^=l,y.push(f[r])));if(u=m,f=y,n)for(r=0;r<$.length;r++)e[h][o=$[r]]&l&&(e[h][o]^=l,u.push(o));else for(r=0;r<$.length;r++)e[h][o=$[r]]&l||(e[h][o]^=l,f.push(o))}else{for(r=0;r<u.length;r++)e[h][u[r]]&l&&(e[h][u[r]]&=c);for(r=0;r<f.length;r++)e[h][f[r]]&l||(e[h][f[r]]|=l)}i.forEach((function(e){e(l,h,u,f)})),P("filtered")}function le(t){var o={top:Z,all:X,reduce:J,reduceCount:K,reduceSum:Q,order:ee,orderNatural:te,size:ne,dispose:re,remove:re};Y.push(o);var u,p,d,g,_,E,T,k,C=8,I=V(C),P=0,O=y,R=y,F=!0,z=t===y;function U(o,a,l,d){s&&(k=l,l=b.length-o.length,d=o.length);var g,m,v,x,w,S,A=u,M=s?[]:B(P,I),L=_,N=E,D=T,U=P,j=0,X=0;for(F&&(L=D=y),F&&(N=D=y),u=new Array(P),P=0,p=s?U?p:[]:U>1?f.arrayLengthen(p,r):B(r,I),U&&(v=(m=A[0]).key);X<d&&!((x=t(o[X]))>=x);)++X;for(;X<d;){for(m&&v<=x?(w=m,S=v,M[j]=P,(m=A[++j])&&(v=m.key)):(w={key:x,value:D()},S=x),u[P]=w;x<=S&&(g=a[X]+(s?k:l),s?p[g]?p[g].push(P):p[g]=[P]:p[g]=P,w.value=L(w.value,n[g],!0),e.zeroExcept(g,h,c)||(w.value=N(w.value,n[g],!1)),!(++X>=d));)x=t(o[X]);Y()}for(;j<U;)u[M[j]=P]=A[j++],Y();if(s)for(var W=0;W<r;W++)p[W]||(p[W]=[]);if(P>j)if(s)for(j=0;j<k;++j)for(W=0;W<p[j].length;W++)p[j][W]=M[p[j][W]];else for(j=0;j<l;++j)p[j]=M[p[j]];function Y(){s?P++:++P===I&&(M=f.arrayWiden(M,C<<=1),p=f.arrayWiden(p,C),I=V(C))}g=i.indexOf(O),P>1||s?(O=q,R=$):(!P&&z&&(P=1,u=[{key:null,value:D()}]),1===P?(O=G,R=H):(O=y,R=y),p=null),i[g]=O}function j(e){if(P>1||s){var t,n,o,a=P,l=u,c=B(a,a);if(s){for(t=0,o=0;t<r;++t)if(e[t]!==D){for(p[o]=p[t],n=0;n<p[o].length;n++)c[p[o][n]]=1;++o}p=p.slice(0,o)}else for(t=0,o=0;t<r;++t)e[t]!==D&&(c[p[o]=p[t]]=1,++o);for(u=[],P=0,t=0;t<a;++t)c[t]&&(c[t]=P++,u.push(l[t]));if(P>1||s)if(s)for(t=0;t<o;++t)for(n=0;n<p[t].length;++n)p[t][n]=c[p[t][n]];else for(t=0;t<o;++t)p[t]=c[p[t]];else p=null;i[i.indexOf(O)]=P>1||s?(R=$,O=q):1===P?(R=H,O=G):R=O=y}else if(1===P){if(z)return;for(var h=0;h<r;++h)if(e[h]!==D)return;u=[],P=0,i[i.indexOf(O)]=O=R=y}}function q(t,r,i,o,a){var f,d,g,m,y;if(!(t===l&&r===h||F))if(s){for(f=0,m=i.length;f<m;++f)if(e.zeroExcept(g=i[f],h,c))for(d=0;d<p[g].length;d++)(y=u[p[g][d]]).value=_(y.value,n[g],!1,d);for(f=0,m=o.length;f<m;++f)if(e.onlyExcept(g=o[f],h,c,r,t))for(d=0;d<p[g].length;d++)(y=u[p[g][d]]).value=E(y.value,n[g],a,d)}else{for(f=0,m=i.length;f<m;++f)e.zeroExcept(g=i[f],h,c)&&((y=u[p[g]]).value=_(y.value,n[g],!1));for(f=0,m=o.length;f<m;++f)e.onlyExcept(g=o[f],h,c,r,t)&&((y=u[p[g]]).value=E(y.value,n[g],a))}}function G(t,r,i,o,a){if(!(t===l&&r===h||F)){var s,f,p,d=u[0];for(s=0,p=i.length;s<p;++s)e.zeroExcept(f=i[s],h,c)&&(d.value=_(d.value,n[f],!1));for(s=0,p=o.length;s<p;++s)e.onlyExcept(f=o[s],h,c,r,t)&&(d.value=E(d.value,n[f],a))}}function $(){var t,i,o;for(t=0;t<P;++t)u[t].value=T();if(s){for(t=0;t<r;++t)for(i=0;i<p[t].length;i++)(o=u[p[t][i]]).value=_(o.value,n[t],!0,i);for(t=0;t<r;++t)if(!e.zeroExcept(t,h,c))for(i=0;i<p[t].length;i++)(o=u[p[t][i]]).value=E(o.value,n[t],!1,i)}else{for(t=0;t<r;++t)(o=u[p[t]]).value=_(o.value,n[t],!0);for(t=0;t<r;++t)e.zeroExcept(t,h,c)||((o=u[p[t]]).value=E(o.value,n[t],!1))}}function H(){var t,i=u[0];for(i.value=T(),t=0;t<r;++t)i.value=_(i.value,n[t],!0);for(t=0;t<r;++t)e.zeroExcept(t,h,c)||(i.value=E(i.value,n[t],!1))}function X(){return F&&(R(),F=!1),u}function Z(e){var t=d(X(),0,u.length,e);return g.sort(t,0,t.length)}function J(e,t,n){return _=e,E=t,T=n,F=!0,o}function K(){return J(A,M,v)}function Q(e){return J(L(e),N(e),v)}function ee(e){function t(t){return e(t.value)}return d=S.by(t),g=x.by(t),o}function te(){return ee(m)}function ne(){return P}function re(){var e=i.indexOf(O);return e>=0&&i.splice(e,1),(e=W.indexOf(U))>=0&&W.splice(e,1),(e=a.indexOf(j))>=0&&a.splice(e,1),(e=Y.indexOf(o))>=0&&Y.splice(e,1),o}return arguments.length<1&&(t=m),i.push(O),W.push(U),a.push(j),U(b,w,0,r),K().orderNatural()}function ce(){Y.forEach((function(e){e.dispose()}));var t=o.indexOf(ee);return t>=0&&o.splice(t,1),(t=o.indexOf(te))>=0&&o.splice(t,1),(t=a.indexOf(ne))>=0&&a.splice(t,1),e.masks[h]&=c,ae()}return h=Q.offset,l=Q.one,c=~l,_=h<<7|Math.log(l)/Math.log(2),ee(n,0,r),te(n,0,r),G}function b(){var t,a,s,u,l={reduce:p,reduceCount:d,reduceSum:function(e){return p(L(e),N(e),v)},value:function(){c&&(function(){var i;for(t=u(),i=0;i<r;++i)t=a(t,n[i],!0),e.zero(i)||(t=s(t,n[i],!1))}(),c=!1);return t},dispose:g,remove:g},c=!0;function h(i,o){var u;if(!c)for(u=o;u<r;++u)t=a(t,n[u],!0),e.zero(u)||(t=s(t,n[u],!1))}function f(r,i,o,u,l){var h,f,p;if(!c){for(h=0,p=o.length;h<p;++h)e.zero(f=o[h])&&(t=a(t,n[f],l));for(h=0,p=u.length;h<p;++h)e.only(f=u[h],i,r)&&(t=s(t,n[f],l))}}function p(e,t,n){return a=e,s=t,u=n,c=!0,l}function d(){return p(A,M,v)}function g(){var e=i.indexOf(f);return e>=0&&i.splice(e,1),(e=o.indexOf(h))>=0&&o.splice(e,1),l}return i.push(f),o.push(h),h(n,0),d()}function w(){return r}function E(){return n}function T(t){var i=[],o=0,a=c(t||[]);for(o=0;o<r;o++)e.zeroExceptMask(o,a)&&i.push(n[o]);return i}function k(e){if("function"===typeof e)return s.push(e),function(){s.splice(s.indexOf(e),1)};console.warn("onChange callback parameter must be a function!")}function P(e){for(var t=0;t<s.length;t++)s[t](e)}return e=new f.bitarray(0),arguments.length?u(arguments[0]):t}function B(e,t){return(t<257?f.array8:t<65537?f.array16:f.array32)(e)}function U(e){for(var t=B(e,e),n=-1;++n<e;)t[n]=n;return t}function V(e){return 8===e?256:16===e?65536:4294967296}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var r=n(47),i=n(65);function o(t,n,a){return i()?e.exports=o=Reflect.construct:e.exports=o=function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o},o.apply(null,arguments)}e.exports=o},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,n){var r=n(107),i=n(63);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?i(e):t}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var r=n(109),i=n(68),o=n(31),a=n(110);e.exports=function(e){return r(e)||i(e)||o(e)||a()}},function(e,t,n){var r=n(67),i=n(111),o=n(31),a=n(70);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()}},function(e,t,n){var r=n(31);e.exports=function(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){(function(e,r){var i=function(){var e=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},t=[1,12],n=[1,13],r=[1,9],i=[1,10],o=[1,11],a=[1,14],s=[1,15],u=[14,18,22,24],l=[18,22],c=[22,24],h={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(e,t,n,r,i,o,a){var s=o.length-1;switch(i){case 1:this.$=e.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(e);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=o[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[s-2],o[s]];break;case 16:this.$={},this.$[o[s][0]]=o[s][1];break;case 17:this.$=o[s-2],void 0!==o[s-2][o[s][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(o[s][0])),o[s-2][o[s][0]]=o[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[s]];break;case 21:this.$=o[s-2],o[s-2].push(o[s])}},table:[{3:5,4:t,5:6,6:n,7:3,8:r,9:4,10:i,11:o,12:1,13:2,15:7,16:8,17:a,23:s},{1:[3]},{14:[1,16]},e(u,[2,7]),e(u,[2,8]),e(u,[2,9]),e(u,[2,10]),e(u,[2,11]),e(u,[2,12]),e(u,[2,3]),e(u,[2,4]),e(u,[2,5]),e([14,18,21,22,24],[2,1]),e(u,[2,2]),{3:20,4:t,18:[1,17],19:18,20:19},{3:5,4:t,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:23,15:7,16:8,17:a,23:s,24:[1,21],25:22},{1:[2,6]},e(u,[2,13]),{18:[1,24],22:[1,25]},e(l,[2,16]),{21:[1,26]},e(u,[2,18]),{22:[1,28],24:[1,27]},e(c,[2,20]),e(u,[2,14]),{3:20,4:t,20:29},{3:5,4:t,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:30,15:7,16:8,17:a,23:s},e(u,[2,19]),{3:5,4:t,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:31,15:7,16:8,17:a,23:s},e(l,[2,17]),e(l,[2,15]),e(c,[2,21])],defaultActions:{16:[2,6]},parseError:function(e,t){if(!t.recoverable){var n=function(e,t){this.message=e,this.hash=t};throw n.prototype=Error,new n(e,t)}this.trace(e)},parse:function(e){var t=this,n=[0],r=[null],i=[],o=this.table,a="",s=0,u=0,l=0,c=2,h=1,f=i.slice.call(arguments,1),p=Object.create(this.lexer),d={yy:{}};for(var g in this.yy)Object.prototype.hasOwnProperty.call(this.yy,g)&&(d.yy[g]=this.yy[g]);p.setInput(e,d.yy),d.yy.lexer=p,d.yy.parser=this,"undefined"==typeof p.yylloc&&(p.yylloc={});var m=p.yylloc;i.push(m);var y=p.options&&p.options.ranges;"function"===typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var v,_,b,x,w,E,S,T,k,C=function(){var e;return"number"!==typeof(e=p.lex()||h)&&(e=t.symbols_[e]||e),e},I={};;){if(b=n[n.length-1],this.defaultActions[b]?x=this.defaultActions[b]:(null!==v&&"undefined"!=typeof v||(v=C()),x=o[b]&&o[b][v]),"undefined"===typeof x||!x.length||!x[0]){var A="";for(E in k=[],o[b])this.terminals_[E]&&E>c&&k.push("'"+this.terminals_[E]+"'");A=p.showPosition?"Parse error on line "+(s+1)+":\n"+p.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(s+1)+": Unexpected "+(v==h?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(A,{text:p.match,token:this.terminals_[v]||v,line:p.yylineno,loc:m,expected:k})}if(x[0]instanceof Array&&x.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+v);switch(x[0]){case 1:n.push(v),r.push(p.yytext),i.push(p.yylloc),n.push(x[1]),v=null,_?(v=_,_=null):(u=p.yyleng,a=p.yytext,s=p.yylineno,m=p.yylloc,l>0&&l--);break;case 2:if(S=this.productions_[x[1]][1],I.$=r[r.length-S],I._$={first_line:i[i.length-(S||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(S||1)].first_column,last_column:i[i.length-1].last_column},y&&(I._$.range=[i[i.length-(S||1)].range[0],i[i.length-1].range[1]]),"undefined"!==typeof(w=this.performAction.apply(I,[a,u,s,d.yy,x[1],r,i].concat(f))))return w;S&&(n=n.slice(0,-1*S*2),r=r.slice(0,-1*S),i=i.slice(0,-1*S)),n.push(this.productions_[x[1]][0]),r.push(I.$),i.push(I._$),T=o[n[n.length-2]][n[n.length-1]],n.push(T);break;case 3:return!0}}return!0}},f={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!t||n[0].length>t[0].length)){if(t=n,r=o,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,i[o])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,i[r]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,r){switch(n){case 0:break;case 1:return 6;case 2:return t.yytext=t.yytext.substr(1,t.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function p(){this.yy={}}return h.lexer=f,p.prototype=h,h.Parser=p,new p}();t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)},t.main=function(r){r[1]||(console.log("Usage: "+r[0]+" FILE"),e.exit(1));var i=n(131).readFileSync(n(132).normalize(r[1]),"utf8");return t.parser.parse(i)},n.c[n.s]===r&&t.main(e.argv.slice(1))}).call(this,n(48),n(28)(e))},function(e,t){e.exports=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}},function(e,t,n){e.exports={simple_select:n(159),direct_select:n(162),draw_point:n(163),draw_polygon:n(164),draw_line_string:n(165)}},function(e,t){e.exports=function(e,t){return!!e.lngLat&&(e.lngLat.lng===t[0]&&e.lngLat.lat===t[1])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25);t.getCoord=function(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")},t.getCoords=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},t.containsNumber=function e(t){if(t.length>1&&r.isNumber(t[0])&&r.isNumber(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return e(t[0]);throw new Error("coordinates must only contain numbers")},t.geojsonType=function(e,t,n){if(!t||!n)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.type)},t.featureOf=function(e,t,n){if(!e)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.geometry.type)},t.collectionOf=function(e,t,n){if(!e)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=e.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+o.geometry.type)}},t.getGeom=function(e){return"Feature"===e.type?e.geometry:e},t.getType=function(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(80),i=n(25);t.default=function(e,t,n){void 0===n&&(n={});var o=r.getCoord(e),a=r.getCoord(t),s=i.degreesToRadians(a[1]-o[1]),u=i.degreesToRadians(a[0]-o[0]),l=i.degreesToRadians(o[1]),c=i.degreesToRadians(a[1]),h=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(l)*Math.cos(c);return i.radiansToLength(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),n.units)}},function(e,t,n){var r=n(38);e.exports=function(e){var t=e.properties,n=e.geometry;if(!t.user_isCircle)return null;for(var i=[],o=n.coordinates[0].slice(0,-1),a=0;a<o.length;a+=Math.round(o.length/4))i.push(r(t.id,o[a],"0.".concat(a),!1));return i}},function(e,t,n){"use strict";var r=n(186),i=n(84);function o(e){i.call(this,e)}o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.sendRequest=r.browserSend,o.prototype.abortRequest=r.browserAbort,e.exports=function(e){return new o(e)}},function(e,t,n){"use strict";var r=n(85),i=n(192),o=n(40);function a(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");r(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||o.API_ORIGIN}a.prototype.createRequest=function(e){return new i(this,e)},e.exports=a},function(e,t,n){"use strict";var r=n(191),i={};function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e){if(i[e])return i[e];var t=e.split("."),n=t[0],a=t[1];if(!a)throw new Error("Invalid token");var s=function(e){try{return JSON.parse(r.decode(e))}catch(t){throw new Error("Invalid token")}}(a),u={usage:n,user:s.u};return o(s,"a")&&(u.authorization=s.a),o(s,"exp")&&(u.expires=1e3*s.exp),o(s,"iat")&&(u.created=1e3*s.iat),o(s,"scopes")&&(u.scopes=s.scopes),o(s,"client")&&(u.client=s.client),o(s,"ll")&&(u.lastLogin=s.ll),o(s,"iu")&&(u.impersonator=s.iu),i[e]=u,u}},function(e,t,n){var r,i,o;i=[n(2),n(16)],void 0===(o="function"===typeof(r=function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[n(2),n(16)],void 0===(o="function"===typeof(r=function(e){return function(){var t,n=Math.max,r=Math.abs,i=/left|center|right/,o=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,u=/%$/,l=e.fn.position;function c(e,t,n){return[parseFloat(e[0])*(u.test(e[0])?t/100:1),parseFloat(e[1])*(u.test(e[1])?n/100:1)]}function h(t,n){return parseInt(e.css(t,n),10)||0}function f(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.position={scrollbarWidth:function(){if(void 0!==t)return t;var n,r,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=i.children()[0];return e("body").append(i),n=o.offsetWidth,i.css("overflow","scroll"),n===(r=o.offsetWidth)&&(r=i[0].clientWidth),i.remove(),t=n-r},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth;return{width:"scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]),i=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:r,isDocument:i,offset:r||i?{left:0,top:0}:e(t).offset(),scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return l.apply(this,arguments);t=e.extend({},t);var u,p,d,g,m,y,v=e(t.of),_=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(_),x=(t.collision||"flip").split(" "),w={};return y=f(v),v[0].preventDefault&&(t.at="left top"),p=y.width,d=y.height,g=y.offset,m=e.extend({},g),e.each(["my","at"],(function(){var e,n,r=(t[this]||"").split(" ");1===r.length&&(r=i.test(r[0])?r.concat(["center"]):o.test(r[0])?["center"].concat(r):["center","center"]),r[0]=i.test(r[0])?r[0]:"center",r[1]=o.test(r[1])?r[1]:"center",e=a.exec(r[0]),n=a.exec(r[1]),w[this]=[e?e[0]:0,n?n[0]:0],t[this]=[s.exec(r[0])[0],s.exec(r[1])[0]]})),1===x.length&&(x[1]=x[0]),"right"===t.at[0]?m.left+=p:"center"===t.at[0]&&(m.left+=p/2),"bottom"===t.at[1]?m.top+=d:"center"===t.at[1]&&(m.top+=d/2),u=c(w.at,p,d),m.left+=u[0],m.top+=u[1],this.each((function(){var i,o,a=e(this),s=a.outerWidth(),l=a.outerHeight(),f=h(this,"marginLeft"),y=h(this,"marginTop"),E=s+f+h(this,"marginRight")+b.width,S=l+y+h(this,"marginBottom")+b.height,T=e.extend({},m),k=c(w.my,a.outerWidth(),a.outerHeight());"right"===t.my[0]?T.left-=s:"center"===t.my[0]&&(T.left-=s/2),"bottom"===t.my[1]?T.top-=l:"center"===t.my[1]&&(T.top-=l/2),T.left+=k[0],T.top+=k[1],i={marginLeft:f,marginTop:y},e.each(["left","top"],(function(n,r){e.ui.position[x[n]]&&e.ui.position[x[n]][r](T,{targetWidth:p,targetHeight:d,elemWidth:s,elemHeight:l,collisionPosition:i,collisionWidth:E,collisionHeight:S,offset:[u[0]+k[0],u[1]+k[1]],my:t.my,at:t.at,within:_,elem:a})})),t.using&&(o=function(e){var i=g.left-T.left,o=i+p-s,u=g.top-T.top,c=u+d-l,h={target:{element:v,left:g.left,top:g.top,width:p,height:d},element:{element:a,left:T.left,top:T.top,width:s,height:l},horizontal:o<0?"left":i>0?"right":"center",vertical:c<0?"top":u>0?"bottom":"middle"};p<s&&r(i+o)<p&&(h.horizontal="center"),d<l&&r(u+c)<d&&(h.vertical="middle"),n(r(i),r(o))>n(r(u),r(c))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(T,{using:o}))}))},e.ui.position={fit:{left:function(e,t){var r,i=t.within,o=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,s=e.left-t.collisionPosition.marginLeft,u=o-s,l=s+t.collisionWidth-a-o;t.collisionWidth>a?u>0&&l<=0?(r=e.left+u+t.collisionWidth-a-o,e.left+=u-r):e.left=l>0&&u<=0?o:u>l?o+a-t.collisionWidth:o:u>0?e.left+=u:l>0?e.left-=l:e.left=n(e.left-s,e.left)},top:function(e,t){var r,i=t.within,o=i.isWindow?i.scrollTop:i.offset.top,a=t.within.height,s=e.top-t.collisionPosition.marginTop,u=o-s,l=s+t.collisionHeight-a-o;t.collisionHeight>a?u>0&&l<=0?(r=e.top+u+t.collisionHeight-a-o,e.top+=u-r):e.top=l>0&&u<=0?o:u>l?o+a-t.collisionHeight:o:u>0?e.top+=u:l>0?e.top-=l:e.top=n(e.top-s,e.top)}},flip:{left:function(e,t){var n,i,o=t.within,a=o.offset.left+o.scrollLeft,s=o.width,u=o.isWindow?o.scrollLeft:o.offset.left,l=e.left-t.collisionPosition.marginLeft,c=l-u,h=l+t.collisionWidth-s-u,f="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,d=-2*t.offset[0];c<0?((n=e.left+f+p+d+t.collisionWidth-s-a)<0||n<r(c))&&(e.left+=f+p+d):h>0&&((i=e.left-t.collisionPosition.marginLeft+f+p+d-u)>0||r(i)<h)&&(e.left+=f+p+d)},top:function(e,t){var n,i,o=t.within,a=o.offset.top+o.scrollTop,s=o.height,u=o.isWindow?o.scrollTop:o.offset.top,l=e.top-t.collisionPosition.marginTop,c=l-u,h=l+t.collisionHeight-s-u,f="top"===t.my[1],p=f?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,d="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,g=-2*t.offset[1];c<0?((i=e.top+p+d+g+t.collisionHeight-s-a)<0||i<r(c))&&(e.top+=p+d+g):h>0&&((n=e.top-t.collisionPosition.marginTop+p+d+g-u)>0||r(n)<h)&&(e.top+=p+d+g)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}(),e.ui.position})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[n(2),n(16)],void 0===(o="function"===typeof(r=function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[n(2),n(16)],void 0===(o="function"===typeof(r=function(e){var t,n=0,r=Array.prototype.slice;return e.cleanData=(t=e.cleanData,function(n){var r,i,o;for(o=0;null!=(i=n[o]);o++)try{(r=e._data(i,"events"))&&r.remove&&e(i).triggerHandler("remove")}catch(a){}t(n)}),e.widget=function(t,n,r){var i,o,a,s={},u=t.split(".")[0],l=u+"-"+(t=t.split(".")[1]);return r||(r=n,n=e.Widget),e.isArray(r)&&(r=e.extend.apply(null,[{}].concat(r))),e.expr[":"][l.toLowerCase()]=function(t){return!!e.data(t,l)},e[u]=e[u]||{},i=e[u][t],o=e[u][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,i,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),(a=new n).options=e.widget.extend({},a.options),e.each(r,(function(t,r){e.isFunction(r)?s[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function i(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=i,t=r.apply(this,arguments),this._super=n,this._superApply=o,t}}():s[t]=r})),o.prototype=e.widget.extend(a,{widgetEventPrefix:i&&a.widgetEventPrefix||t},s,{constructor:o,namespace:u,widgetName:t,widgetFullName:l}),i?(e.each(i._childConstructors,(function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)})),delete i._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,i,o=r.call(arguments,1),a=0,s=o.length;a<s;a++)for(n in o[a])i=o[a][n],o[a].hasOwnProperty(n)&&void 0!==i&&(e.isPlainObject(i)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],i):e.widget.extend({},i):t[n]=i);return t},e.widget.bridge=function(t,n){var i=n.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"===typeof o,s=r.call(arguments,1),u=this;return a?this.length||"instance"!==o?this.each((function(){var n,r=e.data(this,i);return"instance"===o?(u=r,!1):r?e.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,s))!==r&&void 0!==n?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")})):u=void 0:(s.length&&(o=e.widget.extend.apply(null,[o].concat(s))),this.each((function(){var t=e.data(this,i);t?(t.option(o||{}),t._init&&t._init()):e.data(this,i,new n(o,this))}))),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,n){t._removeClass(n,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r,i,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"===typeof t)if(a={},r=t.split("."),t=r.shift(),r.length){for(i=a[t]=e.widget.extend({},this.options[t]),o=0;o<r.length-1;o++)i[r[o]]=i[r[o]]||{},i=i[r[o]];if(t=r.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,r,i;for(n in t)i=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&i&&i.length&&(r=e(i.get()),this._removeClass(i,n),r.addClass(this._classes({element:r,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var n=[],r=this;function i(i,o){var a,s;for(s=0;s<i.length;s++)a=r.classesElementLookup[i[s]]||e(),a=t.add?e(e.unique(a.get().concat(t.element.get()))):e(a.not(t.element).get()),r.classesElementLookup[i[s]]=a,n.push(i[s]),o&&t.classes[i[s]]&&n.push(t.classes[i[s]])}return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&i(t.keys.match(/\S+/g)||[],!0),t.extra&&i(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,(function(r,i){-1!==e.inArray(t.target,i)&&(n.classesElementLookup[r]=e(i.not(t.target).get()))}))},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,r){r="boolean"===typeof r?r:n;var i="string"===typeof e||null===e,o={extra:i?t:n,keys:i?e:t,element:i?this.element:e,add:r};return o.element.toggleClass(this._classes(o),r),this},_on:function(t,n,r){var i,o=this;"boolean"!==typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,(function(r,a){function s(){if(t||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"===typeof a?o[a]:a).apply(o,arguments)}"string"!==typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var u=r.match(/^([\w:-]*)\s*(.*)$/),l=u[1]+o.eventNamespace,c=u[2];c?i.on(l,c,s):n.on(l,s)}))},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"===typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,r){var i,o,a=this.options[t];if(r=r||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(i in o)i in n||(n[i]=o[i]);return this.element.trigger(n,r),!(e.isFunction(a)&&!1===a.apply(this.element[0],[n].concat(r))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,n){e.Widget.prototype["_"+t]=function(r,i,o){var a;"string"===typeof i&&(i={effect:i});var s=i?!0===i||"number"===typeof i?n:i.effect||n:t;"number"===typeof(i=i||{})&&(i={duration:i}),a=!e.isEmptyObject(i),i.complete=o,i.delay&&r.delay(i.delay),a&&e.effects&&e.effects.effect[s]?r[t](i):s!==t&&r[s]?r[s](i.duration,i.easing,o):r.queue((function(n){e(this)[t](),o&&o.call(r[0]),n()}))}})),e.widget})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(101)},function(e,t,n){var r=n(76),i=n(133);e.exports.hint=function(e,t){var n,o=[];if("object"===typeof e)n=e;else{if("string"!==typeof e)return[{message:"Expected string or object as input",line:0}];try{n=r.parse(e)}catch(s){var a=s.message.match(/line (\d+)/);return[{line:parseInt(a[1],10)-1,message:s.message,error:s}]}}return o=o.concat(i.hint(n,t))}},function(e,t,n){(function(e,n){var r="__lodash_hash_undefined__",i=1/0,o=9007199254740991,a="[object Arguments]",s="[object Array]",u="[object Boolean]",l="[object Date]",c="[object Error]",h="[object Function]",f="[object Map]",p="[object Number]",d="[object Object]",g="[object Promise]",m="[object RegExp]",y="[object Set]",v="[object String]",_="[object Symbol]",b="[object WeakMap]",x="[object ArrayBuffer]",w="[object DataView]",E=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S=/^\w*$/,T=/^\./,k=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/\\(\\)?/g,I=/^\[object .+?Constructor\]$/,A=/^(?:0|[1-9]\d*)$/,M={};M["[object Float32Array]"]=M["[object Float64Array]"]=M["[object Int8Array]"]=M["[object Int16Array]"]=M["[object Int32Array]"]=M["[object Uint8Array]"]=M["[object Uint8ClampedArray]"]=M["[object Uint16Array]"]=M["[object Uint32Array]"]=!0,M[a]=M[s]=M[x]=M[u]=M[w]=M[l]=M[c]=M[h]=M[f]=M[p]=M[d]=M[m]=M[y]=M[v]=M[b]=!1;var L="object"==typeof e&&e&&e.Object===Object&&e,N="object"==typeof self&&self&&self.Object===Object&&self,P=L||N||Function("return this")(),O=t&&!t.nodeType&&t,R=O&&"object"==typeof n&&n&&!n.nodeType&&n,D=R&&R.exports===O&&L.process,F=function(){try{return D&&D.binding("util")}catch(e){}}(),z=F&&F.isTypedArray;function B(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function U(e,t){return!!(e?e.length:0)&&function(e,t,n){if(t!==t)return function(e,t,n,r){var i=e.length,o=n+(r?1:-1);for(;r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,G,n);var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,0)>-1}function V(e,t,n){for(var r=-1,i=e?e.length:0;++r<i;)if(n(t,e[r]))return!0;return!1}function j(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function q(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function G(e){return e!==e}function $(e,t){return e.has(t)}function H(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function X(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function W(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Y,Z,J=Array.prototype,K=Function.prototype,Q=Object.prototype,ee=P["__core-js_shared__"],te=function(){var e=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ne=K.toString,re=Q.hasOwnProperty,ie=Q.toString,oe=RegExp("^"+ne.call(re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ae=P.Symbol,se=P.Uint8Array,ue=Q.propertyIsEnumerable,le=J.splice,ce=ae?ae.isConcatSpreadable:void 0,he=(Y=Object.keys,Z=Object,function(e){return Y(Z(e))}),fe=Math.max,pe=$e(P,"DataView"),de=$e(P,"Map"),ge=$e(P,"Promise"),me=$e(P,"Set"),ye=$e(P,"WeakMap"),ve=$e(Object,"create"),_e=et(pe),be=et(de),xe=et(ge),we=et(me),Ee=et(ye),Se=ae?ae.prototype:void 0,Te=Se?Se.valueOf:void 0,ke=Se?Se.toString:void 0;function Ce(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ie(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Me(e){var t=-1,n=e?e.length:0;for(this.__data__=new Ae;++t<n;)this.add(e[t])}function Le(e){this.__data__=new Ie(e)}function Ne(e,t){var n=ot(e)||it(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var o in e)!t&&!re.call(e,o)||i&&("length"==o||We(o,r))||n.push(o);return n}function Pe(e,t){for(var n=e.length;n--;)if(rt(e[n][0],t))return n;return-1}function Oe(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Xe),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?Oe(s,t-1,n,r,i):j(i,s):r||(i[i.length]=s)}return i}function Re(e,t){for(var n=0,r=(t=Ye(t,e)?[t]:Ve(t)).length;null!=e&&n<r;)e=e[Qe(t[n++])];return n&&n==r?e:void 0}function De(e,t){return null!=e&&t in Object(e)}function Fe(e,t,n,r,i){return e===t||(null==e||null==t||!ct(e)&&!ht(t)?e!==e&&t!==t:function(e,t,n,r,i,o){var h=ot(e),g=ot(t),b=s,E=s;h||(b=(b=He(e))==a?d:b);g||(E=(E=He(t))==a?d:E);var S=b==d&&!H(e),T=E==d&&!H(t),k=b==E;if(k&&!S)return o||(o=new Le),h||pt(e)?qe(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case x:return!(e.byteLength!=t.byteLength||!r(new se(e),new se(t)));case u:case l:case p:return rt(+e,+t);case c:return e.name==t.name&&e.message==t.message;case m:case v:return e==t+"";case f:var s=X;case y:var h=2&o;if(s||(s=W),e.size!=t.size&&!h)return!1;var d=a.get(e);if(d)return d==t;o|=1,a.set(e,t);var g=qe(s(e),s(t),r,i,o,a);return a.delete(e),g;case _:if(Te)return Te.call(e)==Te.call(t)}return!1}(e,t,b,n,r,i,o);if(!(2&i)){var C=S&&re.call(e,"__wrapped__"),I=T&&re.call(t,"__wrapped__");if(C||I){var A=C?e.value():e,M=I?t.value():t;return o||(o=new Le),n(A,M,r,i,o)}}if(!k)return!1;return o||(o=new Le),function(e,t,n,r,i,o){var a=2&i,s=dt(e),u=s.length,l=dt(t).length;if(u!=l&&!a)return!1;var c=u;for(;c--;){var h=s[c];if(!(a?h in t:re.call(t,h)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var p=!0;o.set(e,t),o.set(t,e);var d=a;for(;++c<u;){var g=e[h=s[c]],m=t[h];if(r)var y=a?r(m,g,h,t,e,o):r(g,m,h,e,t,o);if(!(void 0===y?g===m||n(g,m,r,i,o):y)){p=!1;break}d||(d="constructor"==h)}if(p&&!d){var v=e.constructor,_=t.constructor;v==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,o)}(e,t,Fe,n,r,i))}function ze(e){return!(!ct(e)||function(e){return!!te&&te in e}(e))&&(ut(e)||H(e)?oe:I).test(et(e))}function Be(e){return"function"==typeof e?e:null==e?gt:"object"==typeof e?ot(e)?function(e,t){if(Ye(e)&&Ze(t))return Je(Qe(e),t);return function(n){var r=function(e,t,n){var r=null==e?void 0:Re(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?function(e,t){return null!=e&&function(e,t,n){t=Ye(t,e)?[t]:Ve(t);var r,i=-1,o=t.length;for(;++i<o;){var a=Qe(t[i]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}if(r)return r;return!!(o=e?e.length:0)&&lt(o)&&We(a,o)&&(ot(e)||it(e))}(e,t,De)}(n,e):Fe(t,r,void 0,3)}}(e[0],e[1]):function(e){var t=function(e){var t=dt(e),n=t.length;for(;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ze(i)]}return t}(e);if(1==t.length&&t[0][2])return Je(t[0][0],t[0][1]);return function(n){return n===e||function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],l=e[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in e))return!1}else{var h=new Le;if(r)var f=r(l,c,u,e,t,h);if(!(void 0===f?Fe(c,l,r,3,h):f))return!1}}return!0}(n,e,t)}}(e):function(e){return Ye(e)?(t=Qe(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return Re(t,e)}}(e);var t}(e)}function Ue(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||Q;return e===n}(e))return he(e);var t=[];for(var n in Object(e))re.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ve(e){return ot(e)?e:Ke(e)}Ce.prototype.clear=function(){this.__data__=ve?ve(null):{}},Ce.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ce.prototype.get=function(e){var t=this.__data__;if(ve){var n=t[e];return n===r?void 0:n}return re.call(t,e)?t[e]:void 0},Ce.prototype.has=function(e){var t=this.__data__;return ve?void 0!==t[e]:re.call(t,e)},Ce.prototype.set=function(e,t){return this.__data__[e]=ve&&void 0===t?r:t,this},Ie.prototype.clear=function(){this.__data__=[]},Ie.prototype.delete=function(e){var t=this.__data__,n=Pe(t,e);return!(n<0)&&(n==t.length-1?t.pop():le.call(t,n,1),!0)},Ie.prototype.get=function(e){var t=this.__data__,n=Pe(t,e);return n<0?void 0:t[n][1]},Ie.prototype.has=function(e){return Pe(this.__data__,e)>-1},Ie.prototype.set=function(e,t){var n=this.__data__,r=Pe(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Ae.prototype.clear=function(){this.__data__={hash:new Ce,map:new(de||Ie),string:new Ce}},Ae.prototype.delete=function(e){return Ge(this,e).delete(e)},Ae.prototype.get=function(e){return Ge(this,e).get(e)},Ae.prototype.has=function(e){return Ge(this,e).has(e)},Ae.prototype.set=function(e,t){return Ge(this,e).set(e,t),this},Me.prototype.add=Me.prototype.push=function(e){return this.__data__.set(e,r),this},Me.prototype.has=function(e){return this.__data__.has(e)},Le.prototype.clear=function(){this.__data__=new Ie},Le.prototype.delete=function(e){return this.__data__.delete(e)},Le.prototype.get=function(e){return this.__data__.get(e)},Le.prototype.has=function(e){return this.__data__.has(e)},Le.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ie){var r=n.__data__;if(!de||r.length<199)return r.push([e,t]),this;n=this.__data__=new Ae(r)}return n.set(e,t),this};var je=me&&1/W(new me([,-0]))[1]==i?function(e){return new me(e)}:function(){};function qe(e,t,n,r,i,o){var a=2&i,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(e);if(l&&o.get(t))return l==t;var c=-1,h=!0,f=1&i?new Me:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var p=e[c],d=t[c];if(r)var g=a?r(d,p,c,t,e,o):r(p,d,c,e,t,o);if(void 0!==g){if(g)continue;h=!1;break}if(f){if(!q(t,(function(e,t){if(!f.has(t)&&(p===e||n(p,e,r,i,o)))return f.add(t)}))){h=!1;break}}else if(p!==d&&!n(p,d,r,i,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Ge(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function $e(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ze(n)?n:void 0}var He=function(e){return ie.call(e)};function Xe(e){return ot(e)||it(e)||!!(ce&&e&&e[ce])}function We(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||A.test(e))&&e>-1&&e%1==0&&e<t}function Ye(e,t){if(ot(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ft(e))||(S.test(e)||!E.test(e)||null!=t&&e in Object(t))}function Ze(e){return e===e&&!ct(e)}function Je(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}(pe&&He(new pe(new ArrayBuffer(1)))!=w||de&&He(new de)!=f||ge&&He(ge.resolve())!=g||me&&He(new me)!=y||ye&&He(new ye)!=b)&&(He=function(e){var t=ie.call(e),n=t==d?e.constructor:void 0,r=n?et(n):void 0;if(r)switch(r){case _e:return w;case be:return f;case xe:return g;case we:return y;case Ee:return b}return t});var Ke=nt((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(ft(e))return ke?ke.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return T.test(e)&&n.push(""),e.replace(k,(function(e,t,r,i){n.push(r?i.replace(C,"$1"):t||e)})),n}));function Qe(e){if("string"==typeof e||ft(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function et(e){if(null!=e){try{return ne.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var tt=function(e,t){return t=fe(void 0===t?e.length-1:t,0),function(){for(var n=arguments,r=-1,i=fe(n.length-t,0),o=Array(i);++r<i;)o[r]=n[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=n[r];return a[t]=o,B(e,this,a)}}((function(e){var t=function(e){var t=e?e.length:0;return t?e[t-1]:void 0}(e);return st(t)&&(t=void 0),function(e,t,n){var r=-1,i=U,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=V;else if(o>=200){var l=t?null:je(e);if(l)return W(l);a=!1,i=$,u=new Me}else u=t?[]:s;e:for(;++r<o;){var c=e[r],h=t?t(c):c;if(c=n||0!==c?c:0,a&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue e;t&&u.push(h),s.push(c)}else i(u,h,n)||(u!==s&&u.push(h),s.push(c))}return s}(Oe(e,1,st,!0),Be(t))}));function nt(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(nt.Cache||Ae),n}function rt(e,t){return e===t||e!==e&&t!==t}function it(e){return st(e)&&re.call(e,"callee")&&(!ue.call(e,"callee")||ie.call(e)==a)}nt.Cache=Ae;var ot=Array.isArray;function at(e){return null!=e&&lt(e.length)&&!ut(e)}function st(e){return ht(e)&&at(e)}function ut(e){var t=ct(e)?ie.call(e):"";return t==h||"[object GeneratorFunction]"==t}function lt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function ct(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ht(e){return!!e&&"object"==typeof e}function ft(e){return"symbol"==typeof e||ht(e)&&ie.call(e)==_}var pt=z?function(e){return function(t){return e(t)}}(z):function(e){return ht(e)&&lt(e.length)&&!!M[ie.call(e)]};function dt(e){return at(e)?Ne(e):Ue(e)}function gt(e){return e}n.exports=tt}).call(this,n(22),n(28)(e))},function(e,t,n){var r=n(72),i=n(49),o=n(136);e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),a="Feature",s="Point",u={enable:function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()}),0)},disable:function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),0)}};function l(e,t,n){if(!(r=n=n||{})||r.constructor!==Object)throw new Error("options is invalid");var r,i=n.bbox,o=n.id;if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");i&&h(i),o&&function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}(o);var a={type:"Feature"};return o&&(a.id=o),i&&(a.bbox=i),a.properties=t||{},a.geometry=e,a}function c(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function h(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!c(e))throw new Error("bbox must only contain numbers")}))}function f(e){h(e);var t=Number(e[0]),n=Number(e[1]),r=Number(e[2]),i=Number(e[3]);if(6===e.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[t,n];return function(e,t,n){if(!e)throw new Error("coordinates is required");for(var r=0;r<e.length;r++){var i=e[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<i[i.length-1].length;o++){if(0===r&&0===o&&!c(i[0][0])||!c(i[0][1]))throw new Error("coordinates must contain numbers");if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}}return l({type:"Polygon",coordinates:e},t,n)}([[o,[r,n],[r,i],[t,i],o]])}function p(e,t,n){if(null!==e)for(var r,i,o,a,s,u,l,c,h=0,f=0,d=e.type,g="FeatureCollection"===d,m="Feature"===d,y=g?e.features.length:1,v=0;v<y;v++){s=(c=!!(l=g?e.features[v].geometry:m?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var _=0;_<s;_++){var b=0,x=0;if(null!==(a=c?l.geometries[_]:l)){u=a.coordinates;var w=a.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":t(u,f,v,b,x),f++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)t(u[r],f,v,b,x),f++,"MultiPoint"===w&&b++;"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++)t(u[r][i],f,v,b,x),f++;"MultiLineString"===w&&b++,"Polygon"===w&&x++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===w&&(x=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++)t(u[r][i][o],f,v,b,x),f++;x++}b++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)p(a.geometries[r],t,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function d(e){var t=[];return p(e,(function(e){t.push(e)})),t}function g(e){if(!e)throw new Error("obj is required");var t;if(e.length?t=e:e.coordinates?t=e.coordinates:e.geometry&&e.geometry.coordinates&&(t=e.geometry.coordinates),t)return m(t),t;throw new Error("No valid coordinates")}function m(e){if(e.length>1&&c(e[0])&&c(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return m(e[0]);throw new Error("coordinates must only contain numbers")}function y(e,t,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var i=function(e){if(!e)throw new Error("obj is required");var t=g(e);if(t.length>1&&c(t[0])&&c(t[1]))return t;throw new Error("Coordinate is not a valid Point")}(e),o=g(t),a=t.geometry?t.geometry.type:t.type,s=t.bbox;if(s&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(i,s))return!1;"Polygon"===a&&(o=[o]);for(var u=0,l=!1;u<o.length&&!l;u++)if(v(i,o[u][0],r)){for(var h=!1,f=1;f<o[u].length&&!h;)v(i,o[u][f],!r)&&(h=!0),f++;h||(l=!0)}return l}function v(e,t,n){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,o=t.length-1;i<t.length;o=i++){var a=t[i][0],s=t[i][1],u=t[o][0],l=t[o][1];if(e[1]*(a-u)+s*(u-e[0])+l*(e[0]-a)==0&&(a-e[0])*(u-e[0])<=0&&(s-e[1])*(l-e[1])<=0)return!n;s>e[1]!=l>e[1]&&e[0]<(u-a)*(e[1]-s)/(l-s)+a&&(r=!r)}return r}var _=n.default,b=_.onMouseDown,x=_.onMouseUp,w=_.onDrag,E=_.fireUpdate,S=_.clickAnywhere,T=o(_,["onMouseDown","onMouseUp","onDrag","fireUpdate","clickAnywhere"]),k=i({originalOnMouseDown:b,originalOnMouseUp:x,originalOnDrag:w,originalFireUpdate:E,originalClickAnywhere:S},T);return k.onSetup=function(){var e=this,t=this.getSelected();this.clearSelectedFeatures(),u.disable(this);var n={map:this.map,draw:this._ctx.api,selectedFeatures:t,selectedPointID:null},r=function(){var t=function(){var e=n.map,t=e.getCanvas(),r=t.width,i=t.height,o=(e.unproject([0,0]).toArray(),e.unproject([r,0]).toArray());return e.unproject([r,i]).toArray(),f([e.unproject([0,i]).toArray(),o].flat())}(),r=[],i=n.draw.getAll();i.features=i.features.filter((function(e){return d(e).some((function(e,n){return y(e,t)}))}));var o=e;i.features.forEach((function(t){d(t).forEach(function(n,i){var o=r.findIndex((function(e){var t=e.vertex.coordinates;return t[0]===n[0]&&t[1]===n[1]}));-1!==o?r[o].vertex.properties.featureIDs.push([t.id,i]):r.push({vertex:e.newFeature({type:a,properties:{featureIDs:[[t.id,i]]},id:t.id+"-"+i,geometry:{type:s,coordinates:n}})})}.bind(o))})),r.forEach(function(t){return e.addFeature(t.vertex)}.bind(e)),n.features=i,n.vertices=r,n.points=r};return r(),n.moveendCallback=r,this.map.on("moveend",r),n},k.fireUpdate=function(){},k.onMouseDown=function(e,t){t.featureTarget&&(e.selectedPointID=t.featureTarget.properties.id),this.originalOnMouseDown.call(this,e,t)},k.update=function(e,t){if(e.selectedPointID){var n=this.getSelected()[0];n.properties.featureIDs.forEach((function(t){var i=r(t,2),o=i[0],a=i[1],s=e.draw.get(o);s.geometry.coordinates[0][a]=n.coordinates,e.draw.add(s)}))}},k.onMouseUp=function(e,t){e.selectedPointID=null,this.update(e,t),this.originalOnMouseUp.call(this,e,t)},k.onDrag=function(e,t){this.originalOnDrag.call(this,e,t),this.update(e,t)},k.clickAnywhere=function(e){this.onStop(e),this.originalClickAnywhere(e)},k.onStop=function(e){this.map.off("moveend",e.moveendCallback),this.deleteFeature(e.vertices.map((function(e){return e.vertex.id})),{silent:!0}),u.enable(this)},k}(n(59))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()}),0)},i=function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),0)},o={onSetup:function(e){var t=this.newFeature({type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),i(this),this.updateUIClasses({mouse:"add"}),this.setActionableState({trash:!0}),{rectangle:t,currentVertexPosition:0}},onTap:function(e,t){this.onClick(e,t)},onClick:function(e,t){if(2===e.currentVertexPosition){var n=this.calculatepXY3(e,t,!1);return n&&e.rectangle.updateCoordinate("0."+(e.currentVertexPosition+1),n[0],n[1]),this.updateUIClasses({mouse:"pointer"}),this.changeMode("simple_select",{featuresId:e.rectangle.id})}e.rectangle.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.rectangle.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)},onMouseMove:function(e,t){if(e.rectangle.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition&&e.currentVertexPosition>0&&this.calculateOrientedAnglePolygon(e),2===e.currentVertexPosition){var n=this.calculatepXY3(e,t,!0);n&&e.rectangle.updateCoordinate("0."+(e.currentVertexPosition+1),n[0],n[1])}},deegrees2meters:function(e){var t=20037508.34*e[0]/180,n=Math.log(Math.tan((90+e[1])*Math.PI/360))/(Math.PI/180);return[t,n=20037508.34*n/180]},meters2degress:function(e){return[180*e[0]/20037508.34,360*Math.atan(Math.exp(e[1]*Math.PI/20037508.34))/Math.PI-90]},calculateOrientedAnglePolygon:function(e){var t=e.rectangle.getCoordinate("0.0"),n=this.deegrees2meters(t),r=e.rectangle.getCoordinate("0.1"),i=this.deegrees2meters(r),o=-1*(180*Math.atan2(i[1]-n[1],i[0]-n[0])/Math.PI+90),a=o<0?o+360:o;e.angle=parseFloat(a.toFixed(2))},calculatepXY3:function(e,t,n){var r=e.rectangle.getCoordinate("0.0"),i=this.deegrees2meters(r),o=e.rectangle.getCoordinate("0.1"),a=this.deegrees2meters(o),s=this.deegrees2meters([t.lngLat.lng,t.lngLat.lat]),u=this.deegrees2meters([t.lngLat.lng,t.lngLat.lat]);if(i[0]===a[0])s=[u[0],a[1]];else if(i[1]===a[1])s=[a[0],u[1]];else{var l=-1/((a[1]-i[1])/(a[0]-i[0]));Math.abs(l)<1?s[1]=l*(u[0]-a[0])+a[1]:s[0]=a[0]+(s[1]-a[1])/l}var c=[a[0]-i[0],a[1]-i[1]],h=[s[0]-c[0],s[1]-c[1]],f=this.meters2degress(s),p=this.meters2degress(h);return e.rectangle.updateCoordinate("0.2",f[0],f[1]),e.rectangle.updateCoordinate("0.3",p[0],p[1]),p},onKeyUp:function(e,t){if(27===t.keyCode)return this.changeMode("simple_select")},onStop:function(e){r(this),this.updateUIClasses({mouse:"none"}),this.activateUIButton(),void 0!==this.getFeature(e.rectangle.id)&&(e.rectangle.removeCoordinate("0.4"),e.rectangle.isValid()?this.map.fire("draw.create",{features:[e.rectangle.toGeoJSON()]}):(this.deleteFeature([e.rectangle.id],{silent:!0}),this.changeMode("simple_select",{},{silent:!0})))},toDisplayFeatures:function(e,t,n){var r=t.properties.id===e.rectangle.id;if(t.properties.active=r?"true":"false",t.properties.angle=e.angle,t.angle=e.angle,!r)return n(t);var i=t.geometry.coordinates[0].length;if(!(i<3)){if(i>=3&&i<=4){var o=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(n({type:"Feature",properties:t.properties,angle:e.angle,geometry:{coordinates:o,type:"LineString"}}),3===i)return}return n(t)}var a=t.geometry.coordinates[0][0],s={type:"Feature",properties:t.properties,angle:e.angle,geometry:{coordinates:t.geometry.coordinates[0][0],type:"Point"}};a&&n(s)},onTrash:function(e){this.deleteFeature([e.rectangle.id],{silent:!0}),this.changeMode("simple_select")}};t.default=o},function(e,t,n){"use strict";var r=n(178),i=n(182),o=n(8),a=n(183).EventEmitter,s=n(184),u=n(185),l=n(195),c=n(203),h=n(205),f=n(206);function p(e){this._eventEmitter=new a,this.options=o({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null}p.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(e,t){if(!document.body.contains(t))throw new Error("Element provided to #addTo() exists, but is not in the DOM");var n=e.onAdd();t.appendChild(n)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else{if("string"!=typeof e)throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element");var n=document.querySelectorAll(e);if(0===n.length)throw new Error("Element ",e,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,n[0])}},onAdd:function(e){if(e&&"string"!=typeof e&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=l(u({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new c(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",i(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(e){this.eventManager.keyevent(e,this)}.bind(this));var o=document.createElement("div");o.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var a=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(a),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),o.appendChild(this._clearEl),o.appendChild(this._loadingEl),t.appendChild(n),t.appendChild(this._inputEl),t.appendChild(o),this._typeahead=new r(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},createIcon:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");if(n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),"innerHTML"in n)n.innerHTML=t;else{var r=document.createElement("div");r.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";var i=r.firstChild.firstChild;n.appendChild(i)}return n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,n=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var r=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target;if(!(r?r.value:""))return this.fresh=!0,e.keyCode!==n&&this.clear(e),this._clearEl.style.display="none";e.metaKey||-1!==[n,t,37,39,13,38,40].indexOf(e.keyCode)||r.value.length>=this.options.minLength&&this._geocode(r.value)},_showButton:function(){this._typeahead.selected&&(this._clearEl.style.display="block")},_hideButton:function(){this._typeahead.selected&&(this._clearEl.style.display="none")},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;if(e&&JSON.stringify(e)!==this.lastSelected){var t;if(this._clearEl.style.display="none",this.options.flyTo)if(e.properties&&s[e.properties.short_code])t=o({},this.options.flyTo),this._map&&this._map.fitBounds(s[e.properties.short_code].bbox,t);else if(e.bbox){var n=e.bbox;t=o({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],t)}else{var r={zoom:this.options.zoom};(t=o({},r,this.options.flyTo)).center=e.center,this._map&&this._map.flyTo(t)}this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this)}},_geocode:function(e){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:e}),this.inputString=e;var t,n=this,r=null,i=["bbox","limit","proximity","countries","types","language","reverseMode","mode"].reduce((function(e,t){return n.options[t]&&(["countries","types","language"].indexOf(t)>-1?e[t]=n.options[t].split(/[\s,]+/):e[t]=n.options[t],"proximity"===t&&n.options[t]&&"number"===typeof n.options[t].longitude&&"number"===typeof n.options[t].latitude&&(e[t]=[n.options[t].longitude,n.options[t].latitude])),e}),{});if(this.options.localGeocoderOnly)t=Promise.resolve();else if(this.options.reverseGeocode&&/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(e)){var a=e.split(/[\s(,)?]+/).map((function(e){return parseFloat(e,10)})).reverse();!i.types||i.types[0],"proximity"in(i=o(i,{query:a,limit:1}))&&delete i.proximity,t=this.geocoderService.reverseGeocode(i).send()}else i=o(i,{query:e}),t=this.geocoderService.forwardGeocode(i).send();var s=[];this.options.localGeocoder&&((s=this.options.localGeocoder(e))||(s=[]));var u=[];return t.catch(function(e){r=e}.bind(this)).then(function(t){this._loadingEl.style.display="none";var n={};return t?"200"==t.statusCode&&((n=t.body).request=t.request,n.headers=t.headers):n={type:"FeatureCollection",features:[]},n.config=i,this.fresh&&(this.eventManager.start(this),this.fresh=!1),n.features=n.features?s.concat(n.features):s,this.options.externalGeocoder?(u=this.options.externalGeocoder(e,n.features)||[]).then((function(e){return n.features=n.features?e.concat(n.features):e,n}),(function(){return n})):n}.bind(this)).then(function(e){if(r)throw r;this.options.filter&&e.features.length&&(e.features=e.features.filter(this.options.filter)),e.features.length?(this._clearEl.style.display="block",this._eventEmitter.emit("results",e),this._typeahead.update(e.features)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",e))}.bind(this)).catch(function(e){this._loadingEl.style.display="none",s.length&&this.options.localGeocoder||u.length&&this.options.externalGeocoder?(this._clearEl.style.display="block",this._typeahead.update(s)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:s}),this._eventEmitter.emit("error",{error:e})}.bind(this)),t},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){e.relatedTarget&&this._clear(e)},_onQueryResult:function(e){var t=e.body;if(t.features.length){var n=t.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(this._map)if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)},_collapse:function(){this._inputEl.value||this._inputEl===document.activeElement||this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>")},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=f.language(e),n=h.placeholder[t];if(n)return n}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e){return this.options.proximity=e,this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&"function"==typeof e&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=l(u({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},_handleMarker:function(e){if(this._map){this._removeMarker();var t=o({},{color:"#4668F2"},this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(t),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&"Point"===e.geometry.type&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}},e.exports=p},function(e,t,n){"use strict";var r=n(73),i=n(74),o=n(75);Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(t,n){i(this,e),this.styles=t||e.DEFAULT_STYLES,this.defaultStyle=n||e.DEFAULT_STYLE,this.onDocumentClick=this.onDocumentClick.bind(this)}return o(e,[{key:"getDefaultPosition",value:function(){return"top-right"}},{key:"onAdd",value:function(e){var t=this;this.map=e,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("mapboxgl-ctrl"),this.controlContainer.classList.add("mapboxgl-ctrl-group"),this.mapStyleContainer=document.createElement("div"),this.styleButton=document.createElement("button"),this.styleButton.type="button",this.mapStyleContainer.classList.add("mapboxgl-style-list");var n,i=r(this.styles);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=document.createElement("button");a.type="button",a.innerText=o.title,a.classList.add(o.title.replace(/[^a-z0-9-]/gi,"_")),a.dataset.uri=JSON.stringify(o.uri),a.addEventListener("click",(function(e){var n=e.srcElement;if(!n.classList.contains("active")){t.map.setStyle(JSON.parse(n.dataset.uri)),t.mapStyleContainer.style.display="none",t.styleButton.style.display="block";for(var r=t.mapStyleContainer.getElementsByClassName("active");r[0];)r[0].classList.remove("active");n.classList.add("active")}})),o.title===this.defaultStyle&&a.classList.add("active"),this.mapStyleContainer.appendChild(a)}}catch(s){i.e(s)}finally{i.f()}return this.styleButton.classList.add("mapboxgl-ctrl-icon"),this.styleButton.classList.add("mapboxgl-style-switcher"),this.styleButton.addEventListener("click",(function(){t.styleButton.style.display="none",t.mapStyleContainer.style.display="block"})),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.styleButton),this.controlContainer.appendChild(this.mapStyleContainer),this.controlContainer}},{key:"onRemove",value:function(){this.controlContainer&&this.controlContainer.parentNode&&this.map&&this.styleButton&&(this.styleButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}},{key:"onDocumentClick",value:function(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.mapStyleContainer&&this.styleButton&&(this.mapStyleContainer.style.display="none",this.styleButton.style.display="block")}}]),e}();a.DEFAULT_STYLE="Streets",a.DEFAULT_STYLES=[{title:"Dark",uri:"mapbox://styles/mapbox/dark-v10"},{title:"Light",uri:"mapbox://styles/mapbox/light-v10"},{title:"Outdoors",uri:"mapbox://styles/mapbox/outdoors-v11"},{title:"Satellite",uri:"mapbox://styles/mapbox/satellite-streets-v11"},{title:"Streets",uri:"mapbox://styles/mapbox/streets-v11"}],t.MapboxStyleSwitcherControl=a},function(e,t,n){"use strict";(function(e,r,i){var o,a,s;a=[],o=function(){var o=function(e,t,n,r){if(t=t||[],"function"!=typeof importScripts&&o.webworker){var i=o.lastid++;return o.buffer[i]=n,void o.webworker.postMessage({id:i,sql:e,params:t})}return 0===arguments.length?new z.Select({columns:[new z.Column({columnid:"*"})],from:[new z.ParamValue({param:0})]}):1===arguments.length&&e.constructor===Array?o.promise(e):("function"==typeof t&&(r=n,n=t,t=[]),"object"!=typeof t&&(t=[t]),"string"==typeof e&&"#"===e[0]&&"object"==typeof document?e=document.querySelector(e).textContent:"object"==typeof e&&e instanceof HTMLElement?e=e.textContent:"function"==typeof e&&(e=e.toString(),e=(/\/\*([\S\s]+)\*\//m.exec(e)||["","Function given as SQL. Plese Provide SQL string or have a /* ... */ syle comment with SQL in the function."])[1]),o.exec(e,t,n,r))};function a(){return null}o.version="0.6.5-develop-8f4550a8undefined",o.debug=void 0;var u=function(){var e=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},t=[2,13],n=[1,104],r=[1,102],i=[1,103],a=[1,6],s=[1,42],u=[1,79],l=[1,76],c=[1,94],h=[1,93],f=[1,69],p=[1,101],d=[1,85],g=[1,64],m=[1,71],v=[1,84],_=[1,66],b=[1,70],x=[1,68],w=[1,61],E=[1,74],S=[1,62],T=[1,67],k=[1,83],C=[1,77],I=[1,86],A=[1,87],M=[1,81],L=[1,82],N=[1,80],P=[1,88],O=[1,89],R=[1,90],D=[1,91],F=[1,92],z=[1,98],B=[1,65],U=[1,78],V=[1,72],j=[1,96],q=[1,97],G=[1,63],$=[1,73],H=[1,108],X=[1,107],W=[10,308,604,765],Y=[10,308,312,604,765],Z=[1,115],J=[1,116],K=[1,117],Q=[1,118],ee=[1,119],te=[130,355,412],ne=[1,127],re=[1,126],ie=[1,134],oe=[1,164],ae=[1,175],se=[1,178],ue=[1,173],le=[1,181],ce=[1,185],he=[1,160],fe=[1,182],pe=[1,169],de=[1,171],ge=[1,174],me=[1,183],ye=[1,199],ve=[1,200],_e=[1,166],be=[1,193],xe=[1,188],we=[1,189],Ee=[1,194],Se=[1,195],Te=[1,196],ke=[1,197],Ce=[1,198],Ie=[1,201],Ae=[1,202],Me=[1,176],Le=[1,177],Ne=[1,179],Pe=[1,180],Oe=[1,186],Re=[1,192],De=[1,184],Fe=[1,187],ze=[1,172],Be=[1,170],Ue=[1,191],Ve=[1,203],je=[2,4,5],qe=[2,474],Ge=[1,206],$e=[1,211],He=[1,220],Xe=[1,216],We=[10,72,78,93,98,118,128,162,168,169,183,198,232,249,251,308,312,604,765],Ye=[2,4,5,10,72,76,77,78,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,183,185,187,198,244,245,284,285,286,287,288,289,290,308,312,422,426,604,765],Ze=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],Je=[1,249],Ke=[1,256],Qe=[1,265],et=[1,270],tt=[1,269],nt=[2,4,5,10,72,77,78,93,98,107,118,128,131,132,137,143,145,149,152,154,156,162,168,169,179,180,181,183,198,232,244,245,249,251,269,270,274,275,277,284,285,286,287,288,289,290,292,293,294,295,296,297,298,299,300,301,304,305,308,312,314,319,422,426,604,765],rt=[2,162],it=[1,281],ot=[10,74,78,308,312,507,604,765],at=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,193,198,206,208,222,223,224,225,226,227,228,229,230,231,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,299,302,304,308,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,345,346,358,370,371,372,375,376,388,391,398,402,403,404,405,406,407,408,410,411,419,420,422,426,428,435,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,516,517,518,519,604,765],st=[2,4,5,10,53,72,89,124,146,156,189,270,271,292,308,337,340,341,398,402,403,406,408,410,411,419,420,436,438,439,441,442,443,444,445,449,450,453,454,507,509,510,519,604,765],ut=[1,562],lt=[1,564],ct=[2,506],ht=[1,569],ft=[1,580],pt=[1,583],dt=[1,584],gt=[10,78,89,132,137,146,189,298,308,312,472,604,765],mt=[10,74,308,312,604,765],yt=[2,570],vt=[1,602],_t=[2,4,5,156],bt=[1,640],xt=[1,612],wt=[1,646],Et=[1,647],St=[1,620],Tt=[1,631],kt=[1,618],Ct=[1,626],It=[1,619],At=[1,627],Mt=[1,629],Lt=[1,621],Nt=[1,622],Pt=[1,641],Ot=[1,638],Rt=[1,639],Dt=[1,615],Ft=[1,617],zt=[1,609],Bt=[1,610],Ut=[1,611],Vt=[1,613],jt=[1,614],qt=[1,616],Gt=[1,623],$t=[1,624],Ht=[1,628],Xt=[1,630],Wt=[1,632],Yt=[1,633],Zt=[1,634],Jt=[1,635],Kt=[1,636],Qt=[1,642],en=[1,643],tn=[1,644],nn=[1,645],rn=[2,290],on=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,231,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,299,302,308,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,345,358,370,371,375,376,398,402,403,406,408,410,411,419,420,422,426,428,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],an=[2,362],sn=[1,668],un=[1,678],ln=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,231,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,428,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],cn=[1,694],hn=[1,703],fn=[1,702],pn=[2,4,5,10,72,74,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,230,231,232,249,251,308,312,604,765],dn=[10,72,74,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,230,231,232,249,251,308,312,604,765],gn=[2,202],mn=[1,725],yn=[10,72,78,93,98,118,128,162,168,169,183,232,249,251,308,312,604,765],vn=[2,163],_n=[1,728],bn=[2,4,5,112],xn=[1,741],wn=[1,760],En=[1,740],Sn=[1,739],Tn=[1,734],kn=[1,735],Cn=[1,737],In=[1,738],An=[1,742],Mn=[1,743],Ln=[1,744],Nn=[1,745],Pn=[1,746],On=[1,747],Rn=[1,748],Dn=[1,749],Fn=[1,750],zn=[1,751],Bn=[1,752],Un=[1,753],Vn=[1,754],jn=[1,755],qn=[1,756],Gn=[1,757],$n=[1,759],Hn=[1,761],Xn=[1,762],Wn=[1,763],Yn=[1,764],Zn=[1,765],Jn=[1,766],Kn=[1,767],Qn=[1,770],er=[1,771],tr=[1,772],nr=[1,773],rr=[1,774],ir=[1,775],or=[1,776],ar=[1,777],sr=[1,778],ur=[1,779],lr=[1,780],cr=[1,781],hr=[74,89,189],fr=[10,74,78,154,187,230,299,308,312,345,358,370,371,375,376,604,765],pr=[1,798],dr=[10,74,78,302,308,312,604,765],gr=[1,799],mr=[1,805],yr=[1,806],vr=[1,810],_r=[10,74,78,308,312,604,765],br=[2,4,5,77,131,132,137,143,145,149,152,154,156,179,180,181,244,245,269,270,274,275,277,284,285,286,287,288,289,290,292,293,294,295,296,297,298,299,300,301,304,305,314,319,422,426],xr=[10,72,78,93,98,107,118,128,162,168,169,183,198,232,249,251,308,312,604,765],wr=[2,4,5,10,72,77,78,93,98,107,118,128,131,132,137,143,145,149,152,154,156,162,164,168,169,179,180,181,183,185,187,195,198,232,244,245,249,251,269,270,274,275,277,284,285,286,287,288,289,290,292,293,294,295,296,297,298,299,300,301,304,305,308,312,314,319,422,426,604,765],Er=[2,4,5,132,298],Sr=[1,844],Tr=[10,74,76,78,308,312,604,765],kr=[2,741],Cr=[10,74,76,78,132,139,141,145,152,308,312,422,426,604,765],Ir=[2,1164],Ar=[10,74,76,78,139,141,145,152,308,312,422,426,604,765],Mr=[10,74,76,78,139,141,145,308,312,422,426,604,765],Lr=[10,74,78,139,141,308,312,604,765],Nr=[10,78,89,132,146,189,298,308,312,472,604,765],Pr=[337,340,341],Or=[2,767],Rr=[1,869],Dr=[1,870],Fr=[1,871],zr=[1,872],Br=[1,881],Ur=[1,880],Vr=[164,166,336],jr=[2,447],qr=[1,936],Gr=[2,4,5,77,131,156,292,293,294,295],$r=[1,951],Hr=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,124,128,129,130,131,132,134,135,137,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,313,315,316,317,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],Xr=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,313,314,315,316,317,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],Wr=[2,378],Yr=[1,958],Zr=[308,310,312],Jr=[74,302],Kr=[74,302,428],Qr=[1,965],ei=[2,4,5,10,53,72,74,76,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],ti=[74,428],ni=[1,978],ri=[1,977],ii=[1,984],oi=[10,72,78,93,98,118,128,162,168,169,232,249,251,308,312,604,765],ai=[1,1010],si=[10,72,78,308,312,604,765],ui=[1,1016],li=[1,1017],ci=[1,1018],hi=[2,4,5,10,72,74,76,77,78,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,198,244,245,284,285,286,287,288,289,290,308,312,422,426,604,765],fi=[1,1068],pi=[1,1067],di=[1,1081],gi=[1,1080],mi=[1,1088],yi=[10,72,74,78,93,98,107,118,128,162,168,169,183,198,232,249,251,308,312,604,765],vi=[1,1119],_i=[10,78,89,146,189,308,312,472,604,765],bi=[1,1139],xi=[1,1138],wi=[1,1137],Ei=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,299,302,308,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,345,358,370,371,375,376,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],Si=[1,1153],Ti=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,313,315,316,317,322,323,324,325,326,327,328,332,333,334,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],ki=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,313,315,317,322,323,324,325,326,327,328,332,333,334,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],Ci=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,124,128,129,130,131,132,133,134,135,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,313,315,316,317,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],Ii=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,124,128,129,130,131,132,134,135,137,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,313,315,316,317,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],Ai=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,316,322,323,324,325,326,327,328,332,333,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],Mi=[2,409],Li=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,107,118,122,128,129,130,131,132,134,135,137,143,145,146,148,149,150,152,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,316,332,333,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],Ni=[2,288],Pi=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,428,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],Oi=[10,78,308,312,604,765],Ri=[1,1189],Di=[10,77,78,143,145,152,181,304,308,312,422,426,604,765],Fi=[10,74,78,308,310,312,466,604,765],zi=[1,1200],Bi=[10,72,78,118,128,162,168,169,232,249,251,308,312,604,765],Ui=[10,72,74,78,93,98,118,128,162,168,169,183,198,232,249,251,308,312,604,765],Vi=[2,4,5,72,76,77,78,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,185,187,244,245,284,285,286,287,288,289,290,422,426],ji=[2,4,5,72,74,76,77,78,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,185,187,244,245,284,285,286,287,288,289,290,422,426],qi=[2,1088],Gi=[2,4,5,72,74,76,77,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,185,187,244,245,284,285,286,287,288,289,290,422,426],$i=[1,1252],Hi=[10,74,78,128,308,310,312,466,604,765],Xi=[115,116,124],Wi=[2,587],Yi=[1,1280],Zi=[76,139],Ji=[2,727],Ki=[1,1297],Qi=[1,1298],eo=[2,4,5,10,53,72,76,89,124,146,156,189,230,270,271,292,308,312,337,340,341,398,402,403,406,408,410,411,419,420,436,438,439,441,442,443,444,445,449,450,453,454,507,509,510,519,604,765],to=[2,333],no=[1,1322],ro=[1,1336],io=[1,1338],oo=[2,490],ao=[74,78],so=[10,308,310,312,466,604,765],uo=[10,72,78,118,162,168,169,232,249,251,308,312,604,765],lo=[1,1354],co=[1,1358],ho=[1,1359],fo=[1,1361],po=[1,1362],go=[1,1363],mo=[1,1364],yo=[1,1365],vo=[1,1366],_o=[1,1367],bo=[1,1368],xo=[10,72,74,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,232,249,251,308,312,604,765],wo=[1,1393],Eo=[10,72,78,118,162,168,169,249,251,308,312,604,765],So=[10,72,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,232,249,251,308,312,604,765],To=[1,1490],ko=[1,1492],Co=[2,4,5,77,143,145,152,156,181,292,293,294,295,304,422,426],Io=[1,1506],Ao=[10,72,74,78,162,168,169,249,251,308,312,604,765],Mo=[1,1524],Lo=[1,1526],No=[1,1527],Po=[1,1523],Oo=[1,1522],Ro=[1,1521],Do=[1,1528],Fo=[1,1518],zo=[1,1519],Bo=[1,1520],Uo=[1,1545],Vo=[2,4,5,10,53,72,89,124,146,156,189,270,271,292,308,312,337,340,341,398,402,403,406,408,410,411,419,420,436,438,439,441,442,443,444,445,449,450,453,454,507,509,510,519,604,765],jo=[1,1556],qo=[1,1564],Go=[1,1563],$o=[10,72,78,162,168,169,249,251,308,312,604,765],Ho=[10,72,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,230,231,232,249,251,308,312,604,765],Xo=[2,4,5,10,72,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,230,231,232,249,251,308,312,604,765],Wo=[1,1623],Yo=[1,1625],Zo=[1,1622],Jo=[1,1624],Ko=[187,193,370,371,372,375],Qo=[2,518],ea=[1,1630],ta=[1,1649],na=[10,72,78,162,168,169,308,312,604,765],ra=[1,1659],ia=[1,1660],oa=[1,1661],aa=[1,1682],sa=[4,10,247,308,312,345,358,604,765],ua=[1,1730],la=[10,72,74,78,118,162,168,169,239,249,251,308,312,604,765],ca=[2,4,5,77],ha=[1,1824],fa=[1,1836],pa=[1,1855],da=[10,72,78,162,168,169,308,312,417,604,765],ga=[10,74,78,230,308,312,604,765],ma=(e={trace:function(){},yy:{},symbols_:{error:2,Literal:3,LITERAL:4,BRALITERAL:5,NonReserved:6,LiteralWithSpaces:7,main:8,Statements:9,EOF:10,Statements_group0:11,AStatement:12,ExplainStatement:13,EXPLAIN:14,QUERY:15,PLAN:16,Statement:17,AlterTable:18,AttachDatabase:19,Call:20,CreateDatabase:21,CreateIndex:22,CreateGraph:23,CreateTable:24,CreateView:25,CreateEdge:26,CreateVertex:27,Declare:28,Delete:29,DetachDatabase:30,DropDatabase:31,DropIndex:32,DropTable:33,DropView:34,If:35,Insert:36,Merge:37,Reindex:38,RenameTable:39,Select:40,ShowCreateTable:41,ShowColumns:42,ShowDatabases:43,ShowIndex:44,ShowTables:45,TruncateTable:46,WithSelect:47,CreateTrigger:48,DropTrigger:49,BeginTransaction:50,CommitTransaction:51,RollbackTransaction:52,EndTransaction:53,UseDatabase:54,Update:55,JavaScript:56,Source:57,Assert:58,While:59,Continue:60,Break:61,BeginEnd:62,Print:63,Require:64,SetVariable:65,ExpressionStatement:66,AddRule:67,Query:68,Echo:69,CreateFunction:70,CreateAggregate:71,WITH:72,WithTablesList:73,COMMA:74,WithTable:75,AS:76,LPAR:77,RPAR:78,SelectClause:79,Select_option0:80,IntoClause:81,FromClause:82,Select_option1:83,WhereClause:84,GroupClause:85,OrderClause:86,LimitClause:87,UnionClause:88,SEARCH:89,Select_repetition0:90,Select_option2:91,PivotClause:92,PIVOT:93,Expression:94,FOR:95,PivotClause_option0:96,PivotClause_option1:97,UNPIVOT:98,IN:99,ColumnsList:100,PivotClause_option2:101,PivotClause2:102,AsList:103,AsLiteral:104,AsPart:105,RemoveClause:106,REMOVE:107,RemoveClause_option0:108,RemoveColumnsList:109,RemoveColumn:110,Column:111,LIKE:112,StringValue:113,ArrowDot:114,ARROW:115,DOT:116,SearchSelector:117,ORDER:118,BY:119,OrderExpressionsList:120,SearchSelector_option0:121,DOTDOT:122,CARET:123,EQ:124,SearchSelector_repetition_plus0:125,SearchSelector_repetition_plus1:126,SearchSelector_option1:127,WHERE:128,OF:129,CLASS:130,NUMBER:131,STRING:132,SLASH:133,VERTEX:134,EDGE:135,EXCLAMATION:136,SHARP:137,MODULO:138,GT:139,LT:140,GTGT:141,LTLT:142,DOLLAR:143,Json:144,AT:145,SET:146,SetColumnsList:147,TO:148,VALUE:149,ROW:150,ExprList:151,COLON:152,PlusStar:153,NOT:154,SearchSelector_repetition2:155,IF:156,SearchSelector_repetition3:157,Aggregator:158,SearchSelector_repetition4:159,SearchSelector_group0:160,SearchSelector_repetition5:161,UNION:162,SearchSelectorList:163,ALL:164,SearchSelector_repetition6:165,ANY:166,SearchSelector_repetition7:167,INTERSECT:168,EXCEPT:169,AND:170,OR:171,PATH:172,RETURN:173,ResultColumns:174,REPEAT:175,SearchSelector_repetition8:176,SearchSelectorList_repetition0:177,SearchSelectorList_repetition1:178,PLUS:179,STAR:180,QUESTION:181,SearchFrom:182,FROM:183,SelectModifier:184,DISTINCT:185,TopClause:186,UNIQUE:187,SelectClause_option0:188,SELECT:189,COLUMN:190,MATRIX:191,TEXTSTRING:192,INDEX:193,RECORDSET:194,TOP:195,NumValue:196,TopClause_option0:197,INTO:198,Table:199,FuncValue:200,ParamValue:201,VarValue:202,FromTablesList:203,JoinTablesList:204,ApplyClause:205,CROSS:206,APPLY:207,OUTER:208,FromTable:209,FromTable_option0:210,FromTable_option1:211,INDEXED:212,INSERTED:213,FromString:214,JoinTable:215,JoinMode:216,JoinTableAs:217,OnClause:218,JoinTableAs_option0:219,JoinTableAs_option1:220,JoinModeMode:221,NATURAL:222,JOIN:223,INNER:224,LEFT:225,RIGHT:226,FULL:227,SEMI:228,ANTI:229,ON:230,USING:231,GROUP:232,GroupExpressionsList:233,HavingClause:234,GroupExpression:235,GROUPING:236,ROLLUP:237,CUBE:238,HAVING:239,CORRESPONDING:240,OrderExpression:241,NullsOrder:242,NULLS:243,FIRST:244,LAST:245,DIRECTION:246,COLLATE:247,NOCASE:248,LIMIT:249,OffsetClause:250,OFFSET:251,LimitClause_option0:252,FETCH:253,LimitClause_option1:254,LimitClause_option2:255,LimitClause_option3:256,ResultColumn:257,Star:258,AggrValue:259,Op:260,LogicValue:261,NullValue:262,ExistsValue:263,CaseValue:264,CastClause:265,ArrayValue:266,NewClause:267,Expression_group0:268,CURRENT_TIMESTAMP:269,JAVASCRIPT:270,CREATE:271,FUNCTION:272,AGGREGATE:273,NEW:274,CAST:275,ColumnType:276,CONVERT:277,PrimitiveValue:278,OverClause:279,OVER:280,OverPartitionClause:281,OverOrderByClause:282,PARTITION:283,SUM:284,COUNT:285,MIN:286,MAX:287,AVG:288,AGGR:289,ARRAY:290,FuncValue_option0:291,REPLACE:292,DATEADD:293,DATEDIFF:294,INTERVAL:295,TRUE:296,FALSE:297,NSTRING:298,NULL:299,EXISTS:300,ARRAYLBRA:301,RBRA:302,ParamValue_group0:303,BRAQUESTION:304,CASE:305,WhensList:306,ElseClause:307,END:308,When:309,WHEN:310,THEN:311,ELSE:312,REGEXP:313,TILDA:314,GLOB:315,ESCAPE:316,NOT_LIKE:317,BARBAR:318,MINUS:319,AMPERSAND:320,BAR:321,GE:322,LE:323,EQEQ:324,EQEQEQ:325,NE:326,NEEQEQ:327,NEEQEQEQ:328,CondOp:329,AllSome:330,ColFunc:331,BETWEEN:332,NOT_BETWEEN:333,IS:334,DOUBLECOLON:335,SOME:336,UPDATE:337,SetColumn:338,SetColumn_group0:339,DELETE:340,INSERT:341,Into:342,Values:343,ValuesListsList:344,DEFAULT:345,VALUES:346,ValuesList:347,Value:348,DateValue:349,TemporaryClause:350,TableClass:351,IfNotExists:352,CreateTableDefClause:353,CreateTableOptionsClause:354,TABLE:355,CreateTableOptions:356,CreateTableOption:357,IDENTITY:358,TEMP:359,ColumnDefsList:360,ConstraintsList:361,Constraint:362,ConstraintName:363,PrimaryKey:364,ForeignKey:365,UniqueKey:366,IndexKey:367,Check:368,CONSTRAINT:369,CHECK:370,PRIMARY:371,KEY:372,PrimaryKey_option0:373,ColsList:374,FOREIGN:375,REFERENCES:376,ForeignKey_option0:377,OnForeignKeyClause:378,ParColsList:379,OnDeleteClause:380,OnUpdateClause:381,NO:382,ACTION:383,UniqueKey_option0:384,UniqueKey_option1:385,ColumnDef:386,ColumnConstraintsClause:387,ColumnConstraints:388,SingularColumnType:389,NumberMax:390,ENUM:391,MAXNUM:392,ColumnConstraintsList:393,ColumnConstraint:394,ParLiteral:395,ColumnConstraint_option0:396,ColumnConstraint_option1:397,DROP:398,DropTable_group0:399,IfExists:400,TablesList:401,ALTER:402,RENAME:403,ADD:404,MODIFY:405,ATTACH:406,DATABASE:407,DETACH:408,AsClause:409,USE:410,SHOW:411,VIEW:412,CreateView_option0:413,CreateView_option1:414,SubqueryRestriction:415,READ:416,ONLY:417,OPTION:418,SOURCE:419,ASSERT:420,JsonObject:421,ATLBRA:422,JsonArray:423,JsonValue:424,JsonPrimitiveValue:425,LCUR:426,JsonPropertiesList:427,RCUR:428,JsonElementsList:429,JsonProperty:430,OnOff:431,SetPropsList:432,AtDollar:433,SetProp:434,OFF:435,COMMIT:436,TRANSACTION:437,ROLLBACK:438,BEGIN:439,ElseStatement:440,WHILE:441,CONTINUE:442,BREAK:443,PRINT:444,REQUIRE:445,StringValuesList:446,PluginsList:447,Plugin:448,ECHO:449,DECLARE:450,DeclaresList:451,DeclareItem:452,TRUNCATE:453,MERGE:454,MergeInto:455,MergeUsing:456,MergeOn:457,MergeMatchedList:458,OutputClause:459,MergeMatched:460,MergeNotMatched:461,MATCHED:462,MergeMatchedAction:463,MergeNotMatchedAction:464,TARGET:465,OUTPUT:466,CreateVertex_option0:467,CreateVertex_option1:468,CreateVertex_option2:469,CreateVertexSet:470,SharpValue:471,CONTENT:472,CreateEdge_option0:473,GRAPH:474,GraphList:475,GraphVertexEdge:476,GraphElement:477,GraphVertexEdge_option0:478,GraphVertexEdge_option1:479,GraphElementVar:480,GraphVertexEdge_option2:481,GraphVertexEdge_option3:482,GraphVertexEdge_option4:483,GraphVar:484,GraphAsClause:485,GraphAtClause:486,GraphElement2:487,GraphElement2_option0:488,GraphElement2_option1:489,GraphElement2_option2:490,GraphElement2_option3:491,GraphElement_option0:492,GraphElement_option1:493,GraphElement_option2:494,SharpLiteral:495,GraphElement_option3:496,GraphElement_option4:497,GraphElement_option5:498,ColonLiteral:499,DeleteVertex:500,DeleteVertex_option0:501,DeleteEdge:502,DeleteEdge_option0:503,DeleteEdge_option1:504,DeleteEdge_option2:505,Term:506,COLONDASH:507,TermsList:508,QUESTIONDASH:509,CALL:510,TRIGGER:511,BeforeAfter:512,InsertDeleteUpdate:513,CreateTrigger_option0:514,CreateTrigger_option1:515,BEFORE:516,AFTER:517,INSTEAD:518,REINDEX:519,A:520,ABSENT:521,ABSOLUTE:522,ACCORDING:523,ADA:524,ADMIN:525,ALWAYS:526,ASC:527,ASSERTION:528,ASSIGNMENT:529,ATTRIBUTE:530,ATTRIBUTES:531,BASE64:532,BERNOULLI:533,BLOCKED:534,BOM:535,BREADTH:536,C:537,CASCADE:538,CATALOG:539,CATALOG_NAME:540,CHAIN:541,CHARACTERISTICS:542,CHARACTERS:543,CHARACTER_SET_CATALOG:544,CHARACTER_SET_NAME:545,CHARACTER_SET_SCHEMA:546,CLASS_ORIGIN:547,COBOL:548,COLLATION:549,COLLATION_CATALOG:550,COLLATION_NAME:551,COLLATION_SCHEMA:552,COLUMNS:553,COLUMN_NAME:554,COMMAND_FUNCTION:555,COMMAND_FUNCTION_CODE:556,COMMITTED:557,CONDITION_NUMBER:558,CONNECTION:559,CONNECTION_NAME:560,CONSTRAINTS:561,CONSTRAINT_CATALOG:562,CONSTRAINT_NAME:563,CONSTRAINT_SCHEMA:564,CONSTRUCTOR:565,CONTROL:566,CURSOR_NAME:567,DATA:568,DATETIME_INTERVAL_CODE:569,DATETIME_INTERVAL_PRECISION:570,DB:571,DEFAULTS:572,DEFERRABLE:573,DEFERRED:574,DEFINED:575,DEFINER:576,DEGREE:577,DEPTH:578,DERIVED:579,DESC:580,DESCRIPTOR:581,DIAGNOSTICS:582,DISPATCH:583,DOCUMENT:584,DOMAIN:585,DYNAMIC_FUNCTION:586,DYNAMIC_FUNCTION_CODE:587,EMPTY:588,ENCODING:589,ENFORCED:590,EXCLUDE:591,EXCLUDING:592,EXPRESSION:593,FILE:594,FINAL:595,FLAG:596,FOLLOWING:597,FORTRAN:598,FOUND:599,FS:600,G:601,GENERAL:602,GENERATED:603,GO:604,GOTO:605,GRANTED:606,HEX:607,HIERARCHY:608,ID:609,IGNORE:610,IMMEDIATE:611,IMMEDIATELY:612,IMPLEMENTATION:613,INCLUDING:614,INCREMENT:615,INDENT:616,INITIALLY:617,INPUT:618,INSTANCE:619,INSTANTIABLE:620,INTEGRITY:621,INVOKER:622,ISOLATION:623,K:624,KEY_MEMBER:625,KEY_TYPE:626,LENGTH:627,LEVEL:628,LIBRARY:629,LINK:630,LOCATION:631,LOCATOR:632,M:633,MAP:634,MAPPING:635,MAXVALUE:636,MESSAGE_LENGTH:637,MESSAGE_OCTET_LENGTH:638,MESSAGE_TEXT:639,MINVALUE:640,MORE:641,MUMPS:642,NAME:643,NAMES:644,NAMESPACE:645,NESTING:646,NEXT:647,NFC:648,NFD:649,NFKC:650,NFKD:651,NIL:652,NORMALIZED:653,NULLABLE:654,OBJECT:655,OCTETS:656,OPTIONS:657,ORDERING:658,ORDINALITY:659,OTHERS:660,OVERRIDING:661,P:662,PAD:663,PARAMETER_MODE:664,PARAMETER_NAME:665,PARAMETER_ORDINAL_POSITION:666,PARAMETER_SPECIFIC_CATALOG:667,PARAMETER_SPECIFIC_NAME:668,PARAMETER_SPECIFIC_SCHEMA:669,PARTIAL:670,PASCAL:671,PASSING:672,PASSTHROUGH:673,PERMISSION:674,PLACING:675,PLI:676,PRECEDING:677,PRESERVE:678,PRIOR:679,PRIVILEGES:680,PUBLIC:681,RECOVERY:682,RELATIVE:683,REPEATABLE:684,REQUIRING:685,RESPECT:686,RESTART:687,RESTORE:688,RESTRICT:689,RETURNED_CARDINALITY:690,RETURNED_LENGTH:691,RETURNED_OCTET_LENGTH:692,RETURNED_SQLSTATE:693,RETURNING:694,ROLE:695,ROUTINE:696,ROUTINE_CATALOG:697,ROUTINE_NAME:698,ROUTINE_SCHEMA:699,ROW_COUNT:700,SCALE:701,SCHEMA:702,SCHEMA_NAME:703,SCOPE_CATALOG:704,SCOPE_NAME:705,SCOPE_SCHEMA:706,SECTION:707,SECURITY:708,SELECTIVE:709,SELF:710,SEQUENCE:711,SERIALIZABLE:712,SERVER:713,SERVER_NAME:714,SESSION:715,SETS:716,SIMPLE:717,SIZE:718,SPACE:719,SPECIFIC_NAME:720,STANDALONE:721,STATE:722,STATEMENT:723,STRIP:724,STRUCTURE:725,STYLE:726,SUBCLASS_ORIGIN:727,T:728,TABLE_NAME:729,TEMPORARY:730,TIES:731,TOKEN:732,TOP_LEVEL_COUNT:733,TRANSACTIONS_COMMITTED:734,TRANSACTIONS_ROLLED_BACK:735,TRANSACTION_ACTIVE:736,TRANSFORM:737,TRANSFORMS:738,TRIGGER_CATALOG:739,TRIGGER_NAME:740,TRIGGER_SCHEMA:741,TYPE:742,UNBOUNDED:743,UNCOMMITTED:744,UNDER:745,UNLINK:746,UNNAMED:747,UNTYPED:748,URI:749,USAGE:750,USER_DEFINED_TYPE_CATALOG:751,USER_DEFINED_TYPE_CODE:752,USER_DEFINED_TYPE_NAME:753,USER_DEFINED_TYPE_SCHEMA:754,VALID:755,VERSION:756,WHITESPACE:757,WORK:758,WRAPPER:759,WRITE:760,XMLDECLARATION:761,XMLSCHEMA:762,YES:763,ZONE:764,SEMICOLON:765,PERCENT:766,ROWS:767,FuncValue_option0_group0:768,$accept:0,$end:1},terminals_:{2:"error",4:"LITERAL",5:"BRALITERAL",10:"EOF",14:"EXPLAIN",15:"QUERY",16:"PLAN",53:"EndTransaction",72:"WITH",74:"COMMA",76:"AS",77:"LPAR",78:"RPAR",89:"SEARCH",93:"PIVOT",95:"FOR",98:"UNPIVOT",99:"IN",107:"REMOVE",112:"LIKE",115:"ARROW",116:"DOT",118:"ORDER",119:"BY",122:"DOTDOT",123:"CARET",124:"EQ",128:"WHERE",129:"OF",130:"CLASS",131:"NUMBER",132:"STRING",133:"SLASH",134:"VERTEX",135:"EDGE",136:"EXCLAMATION",137:"SHARP",138:"MODULO",139:"GT",140:"LT",141:"GTGT",142:"LTLT",143:"DOLLAR",145:"AT",146:"SET",148:"TO",149:"VALUE",150:"ROW",152:"COLON",154:"NOT",156:"IF",162:"UNION",164:"ALL",166:"ANY",168:"INTERSECT",169:"EXCEPT",170:"AND",171:"OR",172:"PATH",173:"RETURN",175:"REPEAT",179:"PLUS",180:"STAR",181:"QUESTION",183:"FROM",185:"DISTINCT",187:"UNIQUE",189:"SELECT",190:"COLUMN",191:"MATRIX",192:"TEXTSTRING",193:"INDEX",194:"RECORDSET",195:"TOP",198:"INTO",206:"CROSS",207:"APPLY",208:"OUTER",212:"INDEXED",213:"INSERTED",222:"NATURAL",223:"JOIN",224:"INNER",225:"LEFT",226:"RIGHT",227:"FULL",228:"SEMI",229:"ANTI",230:"ON",231:"USING",232:"GROUP",236:"GROUPING",237:"ROLLUP",238:"CUBE",239:"HAVING",240:"CORRESPONDING",243:"NULLS",244:"FIRST",245:"LAST",246:"DIRECTION",247:"COLLATE",248:"NOCASE",249:"LIMIT",251:"OFFSET",253:"FETCH",269:"CURRENT_TIMESTAMP",270:"JAVASCRIPT",271:"CREATE",272:"FUNCTION",273:"AGGREGATE",274:"NEW",275:"CAST",277:"CONVERT",280:"OVER",283:"PARTITION",284:"SUM",285:"COUNT",286:"MIN",287:"MAX",288:"AVG",289:"AGGR",290:"ARRAY",292:"REPLACE",293:"DATEADD",294:"DATEDIFF",295:"INTERVAL",296:"TRUE",297:"FALSE",298:"NSTRING",299:"NULL",300:"EXISTS",301:"ARRAYLBRA",302:"RBRA",304:"BRAQUESTION",305:"CASE",308:"END",310:"WHEN",311:"THEN",312:"ELSE",313:"REGEXP",314:"TILDA",315:"GLOB",316:"ESCAPE",317:"NOT_LIKE",318:"BARBAR",319:"MINUS",320:"AMPERSAND",321:"BAR",322:"GE",323:"LE",324:"EQEQ",325:"EQEQEQ",326:"NE",327:"NEEQEQ",328:"NEEQEQEQ",332:"BETWEEN",333:"NOT_BETWEEN",334:"IS",335:"DOUBLECOLON",336:"SOME",337:"UPDATE",340:"DELETE",341:"INSERT",345:"DEFAULT",346:"VALUES",349:"DateValue",355:"TABLE",358:"IDENTITY",359:"TEMP",369:"CONSTRAINT",370:"CHECK",371:"PRIMARY",372:"KEY",375:"FOREIGN",376:"REFERENCES",382:"NO",383:"ACTION",388:"ColumnConstraints",391:"ENUM",392:"MAXNUM",398:"DROP",402:"ALTER",403:"RENAME",404:"ADD",405:"MODIFY",406:"ATTACH",407:"DATABASE",408:"DETACH",410:"USE",411:"SHOW",412:"VIEW",416:"READ",417:"ONLY",418:"OPTION",419:"SOURCE",420:"ASSERT",422:"ATLBRA",426:"LCUR",428:"RCUR",435:"OFF",436:"COMMIT",437:"TRANSACTION",438:"ROLLBACK",439:"BEGIN",441:"WHILE",442:"CONTINUE",443:"BREAK",444:"PRINT",445:"REQUIRE",449:"ECHO",450:"DECLARE",453:"TRUNCATE",454:"MERGE",462:"MATCHED",465:"TARGET",466:"OUTPUT",472:"CONTENT",474:"GRAPH",507:"COLONDASH",509:"QUESTIONDASH",510:"CALL",511:"TRIGGER",516:"BEFORE",517:"AFTER",518:"INSTEAD",519:"REINDEX",520:"A",521:"ABSENT",522:"ABSOLUTE",523:"ACCORDING",524:"ADA",525:"ADMIN",526:"ALWAYS",527:"ASC",528:"ASSERTION",529:"ASSIGNMENT",530:"ATTRIBUTE",531:"ATTRIBUTES",532:"BASE64",533:"BERNOULLI",534:"BLOCKED",535:"BOM",536:"BREADTH",537:"C",538:"CASCADE",539:"CATALOG",540:"CATALOG_NAME",541:"CHAIN",542:"CHARACTERISTICS",543:"CHARACTERS",544:"CHARACTER_SET_CATALOG",545:"CHARACTER_SET_NAME",546:"CHARACTER_SET_SCHEMA",547:"CLASS_ORIGIN",548:"COBOL",549:"COLLATION",550:"COLLATION_CATALOG",551:"COLLATION_NAME",552:"COLLATION_SCHEMA",553:"COLUMNS",554:"COLUMN_NAME",555:"COMMAND_FUNCTION",556:"COMMAND_FUNCTION_CODE",557:"COMMITTED",558:"CONDITION_NUMBER",559:"CONNECTION",560:"CONNECTION_NAME",561:"CONSTRAINTS",562:"CONSTRAINT_CATALOG",563:"CONSTRAINT_NAME",564:"CONSTRAINT_SCHEMA",565:"CONSTRUCTOR",566:"CONTROL",567:"CURSOR_NAME",568:"DATA",569:"DATETIME_INTERVAL_CODE",570:"DATETIME_INTERVAL_PRECISION",571:"DB",572:"DEFAULTS",573:"DEFERRABLE",574:"DEFERRED",575:"DEFINED",576:"DEFINER",577:"DEGREE",578:"DEPTH",579:"DERIVED",580:"DESC",581:"DESCRIPTOR",582:"DIAGNOSTICS",583:"DISPATCH",584:"DOCUMENT",585:"DOMAIN",586:"DYNAMIC_FUNCTION",587:"DYNAMIC_FUNCTION_CODE",588:"EMPTY",589:"ENCODING",590:"ENFORCED",591:"EXCLUDE",592:"EXCLUDING",593:"EXPRESSION",594:"FILE",595:"FINAL",596:"FLAG",597:"FOLLOWING",598:"FORTRAN",599:"FOUND",600:"FS",601:"G",602:"GENERAL",603:"GENERATED",604:"GO",605:"GOTO",606:"GRANTED",607:"HEX",608:"HIERARCHY",609:"ID",610:"IGNORE",611:"IMMEDIATE",612:"IMMEDIATELY",613:"IMPLEMENTATION",614:"INCLUDING",615:"INCREMENT",616:"INDENT",617:"INITIALLY",618:"INPUT",619:"INSTANCE",620:"INSTANTIABLE",621:"INTEGRITY",622:"INVOKER",623:"ISOLATION",624:"K",625:"KEY_MEMBER",626:"KEY_TYPE",627:"LENGTH",628:"LEVEL",629:"LIBRARY",630:"LINK",631:"LOCATION",632:"LOCATOR",633:"M",634:"MAP",635:"MAPPING",636:"MAXVALUE",637:"MESSAGE_LENGTH",638:"MESSAGE_OCTET_LENGTH",639:"MESSAGE_TEXT",640:"MINVALUE",641:"MORE",642:"MUMPS",643:"NAME",644:"NAMES",645:"NAMESPACE",646:"NESTING",647:"NEXT",648:"NFC",649:"NFD",650:"NFKC",651:"NFKD",652:"NIL",653:"NORMALIZED",654:"NULLABLE",655:"OBJECT",656:"OCTETS",657:"OPTIONS",658:"ORDERING",659:"ORDINALITY",660:"OTHERS",661:"OVERRIDING",662:"P",663:"PAD",664:"PARAMETER_MODE",665:"PARAMETER_NAME",666:"PARAMETER_ORDINAL_POSITION",667:"PARAMETER_SPECIFIC_CATALOG",668:"PARAMETER_SPECIFIC_NAME",669:"PARAMETER_SPECIFIC_SCHEMA",670:"PARTIAL",671:"PASCAL",672:"PASSING",673:"PASSTHROUGH",674:"PERMISSION",675:"PLACING",676:"PLI",677:"PRECEDING",678:"PRESERVE",679:"PRIOR",680:"PRIVILEGES",681:"PUBLIC",682:"RECOVERY",683:"RELATIVE",684:"REPEATABLE",685:"REQUIRING",686:"RESPECT",687:"RESTART",688:"RESTORE",689:"RESTRICT",690:"RETURNED_CARDINALITY",691:"RETURNED_LENGTH",692:"RETURNED_OCTET_LENGTH",693:"RETURNED_SQLSTATE",694:"RETURNING",695:"ROLE",696:"ROUTINE",697:"ROUTINE_CATALOG",698:"ROUTINE_NAME",699:"ROUTINE_SCHEMA",700:"ROW_COUNT",701:"SCALE",702:"SCHEMA",703:"SCHEMA_NAME",704:"SCOPE_CATALOG",705:"SCOPE_NAME",706:"SCOPE_SCHEMA",707:"SECTION",708:"SECURITY",709:"SELECTIVE",710:"SELF",711:"SEQUENCE",712:"SERIALIZABLE",713:"SERVER",714:"SERVER_NAME",715:"SESSION",716:"SETS",717:"SIMPLE",718:"SIZE",719:"SPACE",720:"SPECIFIC_NAME",721:"STANDALONE",722:"STATE",723:"STATEMENT",724:"STRIP",725:"STRUCTURE",726:"STYLE",727:"SUBCLASS_ORIGIN",728:"T",729:"TABLE_NAME",730:"TEMPORARY",731:"TIES",732:"TOKEN",733:"TOP_LEVEL_COUNT",734:"TRANSACTIONS_COMMITTED",735:"TRANSACTIONS_ROLLED_BACK",736:"TRANSACTION_ACTIVE",737:"TRANSFORM",738:"TRANSFORMS",739:"TRIGGER_CATALOG",740:"TRIGGER_NAME",741:"TRIGGER_SCHEMA",742:"TYPE",743:"UNBOUNDED",744:"UNCOMMITTED",745:"UNDER",746:"UNLINK",747:"UNNAMED",748:"UNTYPED",749:"URI",750:"USAGE",751:"USER_DEFINED_TYPE_CATALOG",752:"USER_DEFINED_TYPE_CODE",753:"USER_DEFINED_TYPE_NAME",754:"USER_DEFINED_TYPE_SCHEMA",755:"VALID",756:"VERSION",757:"WHITESPACE",758:"WORK",759:"WRAPPER",760:"WRITE",761:"XMLDECLARATION",762:"XMLSCHEMA",763:"YES",764:"ZONE",765:"SEMICOLON",766:"PERCENT",767:"ROWS"},productions_:[0,[3,1],[3,1],[3,2],[7,1],[7,2],[8,2],[9,3],[9,1],[9,1],[13,2],[13,4],[12,1],[17,0],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[47,3],[73,3],[73,1],[75,5],[40,10],[40,4],[92,8],[92,11],[102,4],[104,2],[104,1],[103,3],[103,1],[105,1],[105,3],[106,3],[109,3],[109,1],[110,1],[110,2],[114,1],[114,1],[117,1],[117,5],[117,5],[117,1],[117,2],[117,1],[117,2],[117,2],[117,3],[117,4],[117,4],[117,4],[117,4],[117,4],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,2],[117,2],[117,2],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,2],[117,3],[117,4],[117,3],[117,1],[117,4],[117,2],[117,2],[117,4],[117,4],[117,4],[117,4],[117,4],[117,5],[117,4],[117,4],[117,4],[117,4],[117,4],[117,4],[117,4],[117,4],[117,6],[163,3],[163,1],[153,1],[153,1],[153,1],[182,2],[79,4],[79,4],[79,4],[79,3],[184,1],[184,2],[184,2],[184,2],[184,2],[184,2],[184,2],[184,2],[186,3],[186,4],[186,0],[81,0],[81,2],[81,2],[81,2],[81,2],[81,2],[82,2],[82,3],[82,5],[82,0],[205,6],[205,7],[205,6],[205,7],[203,1],[203,3],[209,4],[209,5],[209,3],[209,3],[209,2],[209,3],[209,1],[209,3],[209,2],[209,3],[209,1],[209,1],[209,2],[209,3],[209,1],[209,1],[209,2],[209,3],[209,1],[209,2],[209,3],[214,1],[199,3],[199,1],[204,2],[204,2],[204,1],[204,1],[215,3],[217,1],[217,2],[217,3],[217,3],[217,2],[217,3],[217,4],[217,5],[217,1],[217,2],[217,3],[217,1],[217,2],[217,3],[216,1],[216,2],[221,1],[221,2],[221,2],[221,3],[221,2],[221,3],[221,2],[221,3],[221,2],[221,2],[221,2],[218,2],[218,2],[218,0],[84,0],[84,2],[85,0],[85,4],[233,1],[233,3],[235,5],[235,4],[235,4],[235,1],[234,0],[234,2],[88,0],[88,2],[88,3],[88,2],[88,2],[88,3],[88,4],[88,3],[88,3],[86,0],[86,3],[120,1],[120,3],[242,2],[242,2],[241,1],[241,2],[241,3],[241,3],[241,4],[87,0],[87,3],[87,8],[250,0],[250,2],[174,3],[174,1],[257,3],[257,2],[257,3],[257,2],[257,3],[257,2],[257,1],[258,5],[258,3],[258,1],[111,5],[111,3],[111,3],[111,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,3],[94,3],[94,3],[94,1],[94,1],[56,1],[70,5],[71,5],[267,2],[267,2],[265,6],[265,8],[265,6],[265,8],[278,1],[278,1],[278,1],[278,1],[278,1],[278,1],[278,1],[259,5],[259,6],[259,6],[279,0],[279,4],[279,4],[279,5],[281,3],[282,3],[158,1],[158,1],[158,1],[158,1],[158,1],[158,1],[158,1],[158,1],[158,1],[200,5],[200,3],[200,4],[200,4],[200,8],[200,8],[200,8],[200,8],[200,3],[151,1],[151,3],[196,1],[261,1],[261,1],[113,1],[113,1],[262,1],[202,2],[263,4],[266,3],[201,2],[201,2],[201,1],[201,1],[264,5],[264,4],[306,2],[306,1],[309,4],[307,2],[307,0],[260,3],[260,3],[260,3],[260,3],[260,5],[260,3],[260,5],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,5],[260,3],[260,3],[260,3],[260,5],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,6],[260,6],[260,3],[260,3],[260,2],[260,2],[260,2],[260,2],[260,2],[260,3],[260,5],[260,6],[260,5],[260,6],[260,4],[260,5],[260,3],[260,4],[260,3],[260,4],[260,3],[260,3],[260,3],[260,3],[260,3],[331,1],[331,1],[331,4],[329,1],[329,1],[329,1],[329,1],[329,1],[329,1],[330,1],[330,1],[330,1],[55,6],[55,4],[147,1],[147,3],[338,3],[338,4],[29,5],[29,3],[36,5],[36,4],[36,7],[36,6],[36,5],[36,4],[36,5],[36,8],[36,7],[36,4],[36,6],[36,7],[343,1],[343,1],[342,0],[342,1],[344,3],[344,1],[344,1],[344,5],[344,3],[344,3],[347,1],[347,3],[348,1],[348,1],[348,1],[348,1],[348,1],[348,1],[100,1],[100,3],[24,9],[24,5],[351,1],[351,1],[354,0],[354,1],[356,2],[356,1],[357,1],[357,3],[357,3],[357,3],[350,0],[350,1],[352,0],[352,3],[353,3],[353,1],[353,2],[361,1],[361,3],[362,2],[362,2],[362,2],[362,2],[362,2],[363,0],[363,2],[368,4],[364,6],[365,9],[379,3],[378,0],[378,2],[380,4],[381,4],[366,6],[367,5],[367,5],[374,1],[374,1],[374,3],[374,3],[360,1],[360,3],[386,3],[386,2],[386,1],[389,6],[389,4],[389,1],[389,4],[276,2],[276,1],[390,1],[390,1],[387,0],[387,1],[393,2],[393,1],[395,3],[394,2],[394,5],[394,3],[394,6],[394,1],[394,2],[394,4],[394,2],[394,1],[394,2],[394,1],[394,1],[394,3],[394,5],[33,4],[401,3],[401,1],[400,0],[400,2],[18,6],[18,6],[18,6],[18,8],[18,6],[39,5],[19,4],[19,7],[19,6],[19,9],[30,3],[21,4],[21,6],[21,9],[21,6],[409,0],[409,2],[54,3],[54,2],[31,4],[31,5],[31,5],[22,8],[22,9],[32,3],[43,2],[43,4],[43,3],[43,5],[45,2],[45,4],[45,4],[45,6],[42,4],[42,6],[44,4],[44,6],[41,4],[41,6],[25,11],[25,8],[415,3],[415,3],[415,5],[34,4],[66,2],[57,2],[58,2],[58,2],[58,4],[144,4],[144,2],[144,2],[144,2],[144,2],[144,1],[144,2],[144,2],[424,1],[424,1],[425,1],[425,1],[425,1],[425,1],[425,1],[425,1],[425,1],[425,3],[421,3],[421,4],[421,2],[423,2],[423,3],[423,1],[427,3],[427,1],[430,3],[430,3],[430,3],[429,3],[429,1],[65,4],[65,3],[65,4],[65,5],[65,5],[65,6],[433,1],[433,1],[432,3],[432,2],[434,1],[434,1],[434,3],[431,1],[431,1],[51,2],[52,2],[50,2],[35,4],[35,3],[440,2],[59,3],[60,1],[61,1],[62,3],[63,2],[63,2],[64,2],[64,2],[448,1],[448,1],[69,2],[446,3],[446,1],[447,3],[447,1],[28,2],[451,1],[451,3],[452,3],[452,4],[452,5],[452,6],[46,3],[37,6],[455,1],[455,2],[456,2],[457,2],[458,2],[458,2],[458,1],[458,1],[460,4],[460,6],[463,1],[463,3],[461,5],[461,7],[461,7],[461,9],[461,7],[461,9],[464,3],[464,6],[464,3],[464,6],[459,0],[459,2],[459,5],[459,4],[459,7],[27,6],[471,2],[470,0],[470,2],[470,2],[470,1],[26,8],[23,3],[23,4],[475,3],[475,1],[476,3],[476,7],[476,6],[476,3],[476,4],[480,1],[480,1],[484,2],[485,3],[486,2],[487,4],[477,4],[477,3],[477,2],[477,1],[499,2],[495,2],[495,2],[500,4],[502,6],[67,3],[67,2],[508,3],[508,1],[506,1],[506,4],[68,2],[20,2],[48,9],[48,8],[48,9],[512,0],[512,1],[512,1],[512,1],[512,2],[513,1],[513,1],[513,1],[49,3],[38,2],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[11,1],[11,1],[80,0],[80,1],[83,0],[83,1],[90,0],[90,2],[91,0],[91,1],[96,0],[96,1],[97,0],[97,1],[101,0],[101,1],[108,0],[108,1],[121,0],[121,1],[125,1],[125,2],[126,1],[126,2],[127,0],[127,1],[155,0],[155,2],[157,0],[157,2],[159,0],[159,2],[160,1],[160,1],[161,0],[161,2],[165,0],[165,2],[167,0],[167,2],[176,0],[176,2],[177,0],[177,2],[178,0],[178,2],[188,0],[188,1],[197,0],[197,1],[210,0],[210,1],[211,0],[211,1],[219,0],[219,1],[220,0],[220,1],[252,0],[252,1],[254,0],[254,1],[255,0],[255,1],[256,0],[256,1],[268,1],[268,1],[768,1],[768,1],[291,0],[291,1],[303,1],[303,1],[339,1],[339,1],[373,0],[373,1],[377,0],[377,1],[384,0],[384,1],[385,0],[385,1],[396,0],[396,1],[397,0],[397,1],[399,1],[399,1],[413,0],[413,1],[414,0],[414,1],[467,0],[467,1],[468,0],[468,1],[469,0],[469,1],[473,0],[473,1],[478,0],[478,1],[479,0],[479,1],[481,0],[481,1],[482,0],[482,1],[483,0],[483,1],[488,0],[488,1],[489,0],[489,1],[490,0],[490,1],[491,0],[491,1],[492,0],[492,1],[493,0],[493,1],[494,0],[494,1],[496,0],[496,1],[497,0],[497,1],[498,0],[498,1],[501,0],[501,2],[503,0],[503,2],[504,0],[504,2],[505,0],[505,2],[514,0],[514,1],[515,0],[515,1]],performAction:function(e,t,n,r,i,a){var s=a.length-1;switch(i){case 1:o.options.casesensitive?this.$=a[s]:this.$=a[s].toLowerCase();break;case 2:this.$=y(a[s].substr(1,a[s].length-2));break;case 3:this.$=a[s].toLowerCase();break;case 4:this.$=a[s];break;case 5:this.$=a[s]?a[s-1]+" "+a[s]:a[s-1];break;case 6:return new r.Statements({statements:a[s-1]});case 7:this.$=a[s-2],a[s]&&a[s-2].push(a[s]);break;case 8:case 9:case 70:case 80:case 85:case 143:case 177:case 205:case 206:case 242:case 261:case 276:case 357:case 375:case 454:case 477:case 478:case 482:case 490:case 531:case 532:case 569:case 652:case 662:case 686:case 688:case 690:case 704:case 705:case 735:case 759:this.$=[a[s]];break;case 10:case 11:this.$=a[s],a[s].explain=!0;break;case 12:this.$=a[s],r.exists&&(this.$.exists=r.exists),delete r.exists,r.queries&&(this.$.queries=r.queries),delete r.queries;break;case 13:case 162:case 172:case 237:case 238:case 240:case 248:case 250:case 259:case 270:case 273:case 378:case 494:case 504:case 506:case 518:case 524:case 525:case 570:this.$=void 0;break;case 68:this.$=new r.WithSelect({withs:a[s-1],select:a[s]});break;case 69:case 568:a[s-2].push(a[s]),this.$=a[s-2];break;case 71:this.$={name:a[s-4],select:a[s-1]};break;case 72:r.extend(this.$,a[s-9]),r.extend(this.$,a[s-8]),r.extend(this.$,a[s-7]),r.extend(this.$,a[s-6]),r.extend(this.$,a[s-5]),r.extend(this.$,a[s-4]),r.extend(this.$,a[s-3]),r.extend(this.$,a[s-2]),r.extend(this.$,a[s-1]),r.extend(this.$,a[s]),this.$=a[s-9];break;case 73:this.$=new r.Search({selectors:a[s-2],from:a[s]}),r.extend(this.$,a[s-1]);break;case 74:this.$={pivot:{expr:a[s-5],columnid:a[s-3],inlist:a[s-2],as:a[s]}};break;case 75:this.$={unpivot:{tocolumnid:a[s-8],forcolumnid:a[s-6],inlist:a[s-3],as:a[s]}};break;case 76:case 523:case 552:case 588:case 622:case 639:case 640:case 643:case 665:this.$=a[s-1];break;case 77:case 78:case 86:case 147:case 185:case 247:case 283:case 291:case 292:case 293:case 294:case 295:case 296:case 297:case 298:case 299:case 300:case 301:case 302:case 303:case 304:case 307:case 308:case 323:case 324:case 325:case 326:case 327:case 328:case 377:case 443:case 444:case 445:case 446:case 447:case 448:case 519:case 545:case 549:case 551:case 626:case 627:case 628:case 629:case 630:case 631:case 635:case 637:case 638:case 647:case 663:case 664:case 726:case 741:case 742:case 744:case 745:case 751:case 752:this.$=a[s];break;case 79:case 84:case 734:case 758:this.$=a[s-2],this.$.push(a[s]);break;case 81:this.$={expr:a[s]};break;case 82:this.$={expr:a[s-2],as:a[s]};break;case 83:this.$={removecolumns:a[s]};break;case 87:this.$={like:a[s]};break;case 90:case 104:this.$={srchid:"PROP",args:[a[s]]};break;case 91:this.$={srchid:"ORDERBY",args:a[s-1]};break;case 92:i=(i=a[s-1])||"ASC",this.$={srchid:"ORDERBY",args:[{expression:new r.Column({columnid:"_"}),direction:i}]};break;case 93:this.$={srchid:"PARENT"};break;case 94:this.$={srchid:"APROP",args:[a[s]]};break;case 95:this.$={selid:"ROOT"};break;case 96:this.$={srchid:"EQ",args:[a[s]]};break;case 97:this.$={srchid:"LIKE",args:[a[s]]};break;case 98:case 99:this.$={selid:"WITH",args:a[s-1]};break;case 100:this.$={srchid:a[s-3].toUpperCase(),args:a[s-1]};break;case 101:this.$={srchid:"WHERE",args:[a[s-1]]};break;case 102:this.$={selid:"OF",args:[a[s-1]]};break;case 103:this.$={srchid:"CLASS",args:[a[s-1]]};break;case 105:this.$={srchid:"NAME",args:[a[s].substr(1,a[s].length-2)]};break;case 106:this.$={srchid:"CHILD"};break;case 107:this.$={srchid:"VERTEX"};break;case 108:this.$={srchid:"EDGE"};break;case 109:this.$={srchid:"REF"};break;case 110:this.$={srchid:"SHARP",args:[a[s]]};break;case 111:this.$={srchid:"ATTR",args:void 0===a[s]?void 0:[a[s]]};break;case 112:this.$={srchid:"ATTR"};break;case 113:this.$={srchid:"OUT"};break;case 114:this.$={srchid:"IN"};break;case 115:this.$={srchid:"OUTOUT"};break;case 116:this.$={srchid:"ININ"};break;case 117:this.$={srchid:"CONTENT"};break;case 118:this.$={srchid:"EX",args:[new r.Json({value:a[s]})]};break;case 119:this.$={srchid:"AT",args:[a[s]]};break;case 120:this.$={srchid:"AS",args:[a[s]]};break;case 121:this.$={srchid:"SET",args:a[s-1]};break;case 122:this.$={selid:"TO",args:[a[s]]};break;case 123:this.$={srchid:"VALUE"};break;case 124:this.$={srchid:"ROW",args:a[s-1]};break;case 125:this.$={srchid:"CLASS",args:[a[s]]};break;case 126:this.$={selid:a[s],args:[a[s-1]]};break;case 127:this.$={selid:"NOT",args:a[s-1]};break;case 128:this.$={selid:"IF",args:a[s-1]};break;case 129:this.$={selid:a[s-3],args:a[s-1]};break;case 130:this.$={selid:"DISTINCT",args:a[s-1]};break;case 131:this.$={selid:"UNION",args:a[s-1]};break;case 132:this.$={selid:"UNIONALL",args:a[s-1]};break;case 133:this.$={selid:"ALL",args:[a[s-1]]};break;case 134:this.$={selid:"ANY",args:[a[s-1]]};break;case 135:this.$={selid:"INTERSECT",args:a[s-1]};break;case 136:this.$={selid:"EXCEPT",args:a[s-1]};break;case 137:this.$={selid:"AND",args:a[s-1]};break;case 138:this.$={selid:"OR",args:a[s-1]};break;case 139:this.$={selid:"PATH",args:[a[s-1]]};break;case 140:this.$={srchid:"RETURN",args:a[s-1]};break;case 141:this.$={selid:"REPEAT",sels:a[s-3],args:a[s-1]};break;case 142:this.$=a[s-2],this.$.push(a[s]);break;case 144:this.$="PLUS";break;case 145:this.$="STAR";break;case 146:this.$="QUESTION";break;case 148:case 149:this.$=new r.Select({columns:a[s],distinct:!0}),r.extend(this.$,a[s-3]),r.extend(this.$,a[s-1]);break;case 150:this.$=new r.Select({columns:a[s],all:!0}),r.extend(this.$,a[s-3]),r.extend(this.$,a[s-1]);break;case 151:a[s]?(this.$=new r.Select({columns:a[s]}),r.extend(this.$,a[s-2]),r.extend(this.$,a[s-1])):this.$=new r.Select({columns:[new r.Column({columnid:"_"})],modifier:"COLUMN"});break;case 152:"SELECT"==a[s]?this.$=void 0:this.$={modifier:a[s]};break;case 153:this.$={modifier:"VALUE"};break;case 154:this.$={modifier:"ROW"};break;case 155:this.$={modifier:"COLUMN"};break;case 156:this.$={modifier:"MATRIX"};break;case 157:this.$={modifier:"TEXTSTRING"};break;case 158:this.$={modifier:"INDEX"};break;case 159:this.$={modifier:"RECORDSET"};break;case 160:this.$={top:a[s-1],percent:void 0!==a[s]||void 0};break;case 161:this.$={top:a[s-1]};break;case 163:case 333:case 526:case 527:case 727:this.$=void 0;break;case 164:case 165:case 166:case 167:this.$={into:a[s]};break;case 168:var u=(c=(c=a[s]).substr(1,c.length-2)).substr(-3).toUpperCase(),l=c.substr(-4).toUpperCase();"#"==c[0]?this.$={into:new r.FuncValue({funcid:"HTML",args:[new r.StringValue({value:c}),new r.Json({value:{headers:!0}})]})}:"XLS"==u||"CSV"==u||"TAB"==u?this.$={into:new r.FuncValue({funcid:u,args:[new r.StringValue({value:c}),new r.Json({value:{headers:!0}})]})}:"XLSX"!=l&&"JSON"!=l||(this.$={into:new r.FuncValue({funcid:l,args:[new r.StringValue({value:c}),new r.Json({value:{headers:!0}})]})});break;case 169:this.$={from:a[s]};break;case 170:this.$={from:a[s-1],joins:a[s]};break;case 171:this.$={from:a[s-2],joins:a[s-1]};break;case 173:this.$=new r.Apply({select:a[s-2],applymode:"CROSS",as:a[s]});break;case 174:this.$=new r.Apply({select:a[s-3],applymode:"CROSS",as:a[s]});break;case 175:this.$=new r.Apply({select:a[s-2],applymode:"OUTER",as:a[s]});break;case 176:this.$=new r.Apply({select:a[s-3],applymode:"OUTER",as:a[s]});break;case 178:case 243:case 455:case 533:case 534:this.$=a[s-2],a[s-2].push(a[s]);break;case 179:this.$=a[s-2],this.$.as=a[s];break;case 180:this.$=a[s-3],this.$.as=a[s];break;case 181:this.$=a[s-1],this.$.as="default";break;case 182:this.$=new r.Json({value:a[s-2]}),a[s-2].as=a[s];break;case 183:this.$=a[s-1],a[s-1].as=a[s];break;case 184:this.$=a[s-2],a[s-2].as=a[s];break;case 186:case 641:case 644:this.$=a[s-2];break;case 187:case 191:case 195:case 198:this.$=a[s-1],a[s-1].as=a[s];break;case 188:case 192:case 196:case 199:this.$=a[s-2],a[s-2].as=a[s];break;case 189:case 190:case 194:case 197:this.$=a[s],a[s].as="default";break;case 193:this.$={inserted:!0};break;case 200:var c;if(u=(c=(c=a[s]).substr(1,c.length-2)).substr(-3).toUpperCase(),l=c.substr(-4).toUpperCase(),"#"==c[0])h=new r.FuncValue({funcid:"HTML",args:[new r.StringValue({value:c}),new r.Json({value:{headers:!0}})]});else if("XLS"==u||"CSV"==u||"TAB"==u)h=new r.FuncValue({funcid:u,args:[new r.StringValue({value:c}),new r.Json({value:{headers:!0}})]});else{if("XLSX"!=l&&"JSON"!=l)throw new Error("Unknown string in FROM clause");h=new r.FuncValue({funcid:l,args:[new r.StringValue({value:c}),new r.Json({value:{headers:!0}})]})}this.$=h;break;case 201:"INFORMATION_SCHEMA"==a[s-2]?this.$=new r.FuncValue({funcid:a[s-2],args:[new r.StringValue({value:a[s]})]}):this.$=new r.Table({databaseid:a[s-2],tableid:a[s]});break;case 202:this.$=new r.Table({tableid:a[s]});break;case 203:case 204:this.$=a[s-1],a[s-1].push(a[s]);break;case 207:this.$=new r.Join(a[s-2]),r.extend(this.$,a[s-1]),r.extend(this.$,a[s]);break;case 208:this.$={table:a[s]};break;case 209:this.$={table:a[s-1],as:a[s]};break;case 210:this.$={table:a[s-2],as:a[s]};break;case 211:this.$={json:new r.Json({value:a[s-2],as:a[s]})};break;case 212:this.$={param:a[s-1],as:a[s]};break;case 213:this.$={param:a[s-2],as:a[s]};break;case 214:this.$={select:a[s-2],as:a[s]};break;case 215:this.$={select:a[s-3],as:a[s]};break;case 216:this.$={func:a[s],as:"default"};break;case 217:this.$={func:a[s-1],as:a[s]};break;case 218:this.$={func:a[s-2],as:a[s]};break;case 219:this.$={variable:a[s],as:"default"};break;case 220:this.$={variable:a[s-1],as:a[s]};break;case 221:this.$={variable:a[s-2],as:a[s]};break;case 222:this.$={joinmode:a[s]};break;case 223:this.$={joinmode:a[s-1],natural:!0};break;case 224:case 225:this.$="INNER";break;case 226:case 227:this.$="LEFT";break;case 228:case 229:this.$="RIGHT";break;case 230:case 231:this.$="OUTER";break;case 232:this.$="SEMI";break;case 233:this.$="ANTI";break;case 234:this.$="CROSS";break;case 235:this.$={on:a[s]};break;case 236:case 700:this.$={using:a[s]};break;case 239:this.$={where:new r.Expression({expression:a[s]})};break;case 241:this.$={group:a[s-1]},r.extend(this.$,a[s]);break;case 244:this.$=new r.GroupExpression({type:"GROUPING SETS",group:a[s-1]});break;case 245:this.$=new r.GroupExpression({type:"ROLLUP",group:a[s-1]});break;case 246:this.$=new r.GroupExpression({type:"CUBE",group:a[s-1]});break;case 249:this.$={having:a[s]};break;case 251:this.$={union:a[s]};break;case 252:this.$={unionall:a[s]};break;case 253:this.$={except:a[s]};break;case 254:this.$={intersect:a[s]};break;case 255:this.$={union:a[s],corresponding:!0};break;case 256:this.$={unionall:a[s],corresponding:!0};break;case 257:this.$={except:a[s],corresponding:!0};break;case 258:this.$={intersect:a[s],corresponding:!0};break;case 260:this.$={order:a[s]};break;case 262:this.$=a[s-2],a[s-2].push(a[s]);break;case 263:this.$={nullsOrder:"FIRST"};break;case 264:this.$={nullsOrder:"LAST"};break;case 265:this.$=new r.Expression({expression:a[s],direction:"ASC"});break;case 266:this.$=new r.Expression({expression:a[s-1],direction:a[s].toUpperCase()});break;case 267:this.$=new r.Expression({expression:a[s-2],direction:a[s-1].toUpperCase()}),r.extend(this.$,a[s]);break;case 268:this.$=new r.Expression({expression:a[s-2],direction:"ASC",nocase:!0});break;case 269:this.$=new r.Expression({expression:a[s-3],direction:a[s].toUpperCase(),nocase:!0});break;case 271:this.$={limit:a[s-1]},r.extend(this.$,a[s]);break;case 272:this.$={limit:a[s-2],offset:a[s-6]};break;case 274:this.$={offset:a[s]};break;case 275:case 512:case 536:case 651:case 661:case 685:case 687:case 691:a[s-2].push(a[s]),this.$=a[s-2];break;case 277:case 279:case 281:a[s-2].as=a[s],this.$=a[s-2];break;case 278:case 280:case 282:a[s-1].as=a[s],this.$=a[s-1];break;case 284:this.$=new r.Column({columid:a[s],tableid:a[s-2],databaseid:a[s-4]});break;case 285:this.$=new r.Column({columnid:a[s],tableid:a[s-2]});break;case 286:this.$=new r.Column({columnid:a[s]});break;case 287:this.$=new r.Column({columnid:a[s],tableid:a[s-2],databaseid:a[s-4]});break;case 288:case 289:this.$=new r.Column({columnid:a[s],tableid:a[s-2]});break;case 290:this.$=new r.Column({columnid:a[s]});break;case 305:this.$=new r.DomainValueValue;break;case 306:this.$=new r.Json({value:a[s]});break;case 309:case 310:case 311:r.queries||(r.queries=[]),r.queries.push(a[s-1]),a[s-1].queriesidx=r.queries.length,this.$=a[s-1];break;case 312:this.$=a[s];break;case 313:this.$=new r.FuncValue({funcid:"CURRENT_TIMESTAMP"});break;case 314:this.$=new r.JavaScript({value:a[s].substr(2,a[s].length-4)});break;case 315:this.$=new r.JavaScript({value:'alasql.fn["'+a[s-2]+'"] = '+a[s].substr(2,a[s].length-4)});break;case 316:this.$=new r.JavaScript({value:'alasql.aggr["'+a[s-2]+'"] = '+a[s].substr(2,a[s].length-4)});break;case 317:this.$=new r.FuncValue({funcid:a[s],newid:!0});break;case 318:this.$=a[s],r.extend(this.$,{newid:!0});break;case 319:this.$=new r.Convert({expression:a[s-3]}),r.extend(this.$,a[s-1]);break;case 320:this.$=new r.Convert({expression:a[s-5],style:a[s-1]}),r.extend(this.$,a[s-3]);break;case 321:this.$=new r.Convert({expression:a[s-1]}),r.extend(this.$,a[s-3]);break;case 322:this.$=new r.Convert({expression:a[s-3],style:a[s-1]}),r.extend(this.$,a[s-5]);break;case 329:this.$=new r.FuncValue({funcid:"CURRENT_TIMESTAMP"});break;case 330:1<a[s-2].length&&("MAX"==a[s-4].toUpperCase()||"MIN"==a[s-4].toUpperCase())?this.$=new r.FuncValue({funcid:a[s-4],args:a[s-2]}):this.$=new r.AggrValue({aggregatorid:a[s-4].toUpperCase(),expression:a[s-2].pop(),over:a[s]});break;case 331:this.$=new r.AggrValue({aggregatorid:a[s-5].toUpperCase(),expression:a[s-2],distinct:!0,over:a[s]});break;case 332:this.$=new r.AggrValue({aggregatorid:a[s-5].toUpperCase(),expression:a[s-2],over:a[s]});break;case 334:case 335:this.$=new r.Over,r.extend(this.$,a[s-1]);break;case 336:this.$=new r.Over,r.extend(this.$,a[s-2]),r.extend(this.$,a[s-1]);break;case 337:this.$={partition:a[s]};break;case 338:this.$={order:a[s]};break;case 339:this.$="SUM";break;case 340:this.$="COUNT";break;case 341:this.$="MIN";break;case 342:case 547:this.$="MAX";break;case 343:this.$="AVG";break;case 344:this.$="FIRST";break;case 345:this.$="LAST";break;case 346:this.$="AGGR";break;case 347:this.$="ARRAY";break;case 348:var h=a[s-4],f=a[s-1];1<f.length&&("MIN"==h.toUpperCase()||"MAX"==h.toUpperCase())||!o.aggr[a[s-4]]?this.$=new r.FuncValue({funcid:h,args:f}):this.$=new r.AggrValue({aggregatorid:"REDUCE",funcid:h,expression:f.pop(),distinct:"DISTINCT"==a[s-2]});break;case 349:this.$=new r.FuncValue({funcid:a[s-2]});break;case 350:this.$=new r.FuncValue({funcid:"IIF",args:a[s-1]});break;case 351:this.$=new r.FuncValue({funcid:"REPLACE",args:a[s-1]});break;case 352:this.$=new r.FuncValue({funcid:"DATEADD",args:[new r.StringValue({value:a[s-5]}),a[s-3],a[s-1]]});break;case 353:this.$=new r.FuncValue({funcid:"DATEADD",args:[a[s-5],a[s-3],a[s-1]]});break;case 354:this.$=new r.FuncValue({funcid:"DATEDIFF",args:[new r.StringValue({value:a[s-5]}),a[s-3],a[s-1]]});break;case 355:this.$=new r.FuncValue({funcid:"DATEDIFF",args:[a[s-5],a[s-3],a[s-1]]});break;case 356:this.$=new r.FuncValue({funcid:"INTERVAL",args:[a[s-1],new r.StringValue({value:a[s].toLowerCase()})]});break;case 358:a[s-2].push(a[s]),this.$=a[s-2];break;case 359:this.$=new r.NumValue({value:+a[s]});break;case 360:this.$=new r.LogicValue({value:!0});break;case 361:this.$=new r.LogicValue({value:!1});break;case 362:this.$=new r.StringValue({value:a[s].substr(1,a[s].length-2).replace(/(\\\')/g,"'").replace(/(\'\')/g,"'")});break;case 363:this.$=new r.StringValue({value:a[s].substr(2,a[s].length-3).replace(/(\\\')/g,"'").replace(/(\'\')/g,"'")});break;case 364:this.$=new r.NullValue({value:void 0});break;case 365:this.$=new r.VarValue({variable:a[s]});break;case 366:r.exists||(r.exists=[]),this.$=new r.ExistsValue({value:a[s-1],existsidx:r.exists.length}),r.exists.push(a[s-1]);break;case 367:this.$=new r.ArrayValue({value:a[s-1]});break;case 368:case 369:this.$=new r.ParamValue({param:a[s]});break;case 370:void 0===r.question&&(r.question=0),this.$=new r.ParamValue({param:r.question++});break;case 371:void 0===r.question&&(r.question=0),this.$=new r.ParamValue({param:r.question++,array:!0});break;case 372:this.$=new r.CaseValue({expression:a[s-3],whens:a[s-2],elses:a[s-1]});break;case 373:this.$=new r.CaseValue({whens:a[s-2],elses:a[s-1]});break;case 374:case 702:case 703:this.$=a[s-1],this.$.push(a[s]);break;case 376:this.$={when:a[s-2],then:a[s]};break;case 379:case 380:this.$=new r.Op({left:a[s-2],op:"REGEXP",right:a[s]});break;case 381:this.$=new r.Op({left:a[s-2],op:"GLOB",right:a[s]});break;case 382:this.$=new r.Op({left:a[s-2],op:"LIKE",right:a[s]});break;case 383:this.$=new r.Op({left:a[s-4],op:"LIKE",right:a[s-2],escape:a[s]});break;case 384:this.$=new r.Op({left:a[s-2],op:"NOT LIKE",right:a[s]});break;case 385:this.$=new r.Op({left:a[s-4],op:"NOT LIKE",right:a[s-2],escape:a[s]});break;case 386:this.$=new r.Op({left:a[s-2],op:"||",right:a[s]});break;case 387:this.$=new r.Op({left:a[s-2],op:"+",right:a[s]});break;case 388:this.$=new r.Op({left:a[s-2],op:"-",right:a[s]});break;case 389:this.$=new r.Op({left:a[s-2],op:"*",right:a[s]});break;case 390:this.$=new r.Op({left:a[s-2],op:"/",right:a[s]});break;case 391:this.$=new r.Op({left:a[s-2],op:"%",right:a[s]});break;case 392:this.$=new r.Op({left:a[s-2],op:"^",right:a[s]});break;case 393:this.$=new r.Op({left:a[s-2],op:">>",right:a[s]});break;case 394:this.$=new r.Op({left:a[s-2],op:"<<",right:a[s]});break;case 395:this.$=new r.Op({left:a[s-2],op:"&",right:a[s]});break;case 396:this.$=new r.Op({left:a[s-2],op:"|",right:a[s]});break;case 397:case 398:case 400:this.$=new r.Op({left:a[s-2],op:"->",right:a[s]});break;case 399:this.$=new r.Op({left:a[s-4],op:"->",right:a[s-1]});break;case 401:case 402:case 404:this.$=new r.Op({left:a[s-2],op:"!",right:a[s]});break;case 403:this.$=new r.Op({left:a[s-4],op:"!",right:a[s-1]});break;case 405:this.$=new r.Op({left:a[s-2],op:">",right:a[s]});break;case 406:this.$=new r.Op({left:a[s-2],op:">=",right:a[s]});break;case 407:this.$=new r.Op({left:a[s-2],op:"<",right:a[s]});break;case 408:this.$=new r.Op({left:a[s-2],op:"<=",right:a[s]});break;case 409:this.$=new r.Op({left:a[s-2],op:"=",right:a[s]});break;case 410:this.$=new r.Op({left:a[s-2],op:"==",right:a[s]});break;case 411:this.$=new r.Op({left:a[s-2],op:"===",right:a[s]});break;case 412:this.$=new r.Op({left:a[s-2],op:"!=",right:a[s]});break;case 413:this.$=new r.Op({left:a[s-2],op:"!==",right:a[s]});break;case 414:this.$=new r.Op({left:a[s-2],op:"!===",right:a[s]});break;case 415:r.queries||(r.queries=[]),this.$=new r.Op({left:a[s-5],op:a[s-4],allsome:a[s-3],right:a[s-1],queriesidx:r.queries.length}),r.queries.push(a[s-1]);break;case 416:this.$=new r.Op({left:a[s-5],op:a[s-4],allsome:a[s-3],right:a[s-1]});break;case 417:"BETWEEN1"==a[s-2].op?"AND"==a[s-2].left.op?this.$=new r.Op({left:a[s-2].left.left,op:"AND",right:new r.Op({left:a[s-2].left.right,op:"BETWEEN",right1:a[s-2].right,right2:a[s]})}):this.$=new r.Op({left:a[s-2].left,op:"BETWEEN",right1:a[s-2].right,right2:a[s]}):"NOT BETWEEN1"==a[s-2].op?"AND"==a[s-2].left.op?this.$=new r.Op({left:a[s-2].left.left,op:"AND",right:new r.Op({left:a[s-2].left.right,op:"NOT BETWEEN",right1:a[s-2].right,right2:a[s]})}):this.$=new r.Op({left:a[s-2].left,op:"NOT BETWEEN",right1:a[s-2].right,right2:a[s]}):this.$=new r.Op({left:a[s-2],op:"AND",right:a[s]});break;case 418:this.$=new r.Op({left:a[s-2],op:"OR",right:a[s]});break;case 419:this.$=new r.UniOp({op:"NOT",right:a[s]});break;case 420:this.$=new r.UniOp({op:"-",right:a[s]});break;case 421:this.$=new r.UniOp({op:"+",right:a[s]});break;case 422:this.$=new r.UniOp({op:"~",right:a[s]});break;case 423:this.$=new r.UniOp({op:"#",right:a[s]});break;case 424:this.$=new r.UniOp({right:a[s-1]});break;case 425:r.queries||(r.queries=[]),this.$=new r.Op({left:a[s-4],op:"IN",right:a[s-1],queriesidx:r.queries.length}),r.queries.push(a[s-1]);break;case 426:r.queries||(r.queries=[]),this.$=new r.Op({left:a[s-5],op:"NOT IN",right:a[s-1],queriesidx:r.queries.length}),r.queries.push(a[s-1]);break;case 427:this.$=new r.Op({left:a[s-4],op:"IN",right:a[s-1]});break;case 428:this.$=new r.Op({left:a[s-5],op:"NOT IN",right:a[s-1]});break;case 429:this.$=new r.Op({left:a[s-3],op:"IN",right:[]});break;case 430:this.$=new r.Op({left:a[s-4],op:"NOT IN",right:[]});break;case 431:case 433:this.$=new r.Op({left:a[s-2],op:"IN",right:a[s]});break;case 432:case 434:this.$=new r.Op({left:a[s-3],op:"NOT IN",right:a[s]});break;case 435:this.$=new r.Op({left:a[s-2],op:"BETWEEN1",right:a[s]});break;case 436:this.$=new r.Op({left:a[s-2],op:"NOT BETWEEN1",right:a[s]});break;case 437:this.$=new r.Op({op:"IS",left:a[s-2],right:a[s]});break;case 438:this.$=new r.Op({op:"IS",left:a[s-2],right:new r.UniOp({op:"NOT",right:new r.NullValue({value:void 0})})});break;case 439:this.$=new r.Convert({expression:a[s-2]}),r.extend(this.$,a[s]);break;case 440:case 441:this.$=a[s];break;case 442:this.$=a[s-1];break;case 449:this.$="ALL";break;case 450:this.$="SOME";break;case 451:this.$="ANY";break;case 452:this.$=new r.Update({table:a[s-4],columns:a[s-2],where:a[s]});break;case 453:this.$=new r.Update({table:a[s-2],columns:a[s]});break;case 456:this.$=new r.SetColumn({column:a[s-2],expression:a[s]});break;case 457:this.$=new r.SetColumn({variable:a[s-2],expression:a[s],method:a[s-3]});break;case 458:this.$=new r.Delete({table:a[s-2],where:a[s]});break;case 459:this.$=new r.Delete({table:a[s]});break;case 460:this.$=new r.Insert({into:a[s-2],values:a[s]});break;case 461:this.$=new r.Insert({into:a[s-1],values:a[s]});break;case 462:case 464:this.$=new r.Insert({into:a[s-2],values:a[s],orreplace:!0});break;case 463:case 465:this.$=new r.Insert({into:a[s-1],values:a[s],orreplace:!0});break;case 466:this.$=new r.Insert({into:a[s-2],default:!0});break;case 467:this.$=new r.Insert({into:a[s-5],columns:a[s-3],values:a[s]});break;case 468:this.$=new r.Insert({into:a[s-4],columns:a[s-2],values:a[s]});break;case 469:this.$=new r.Insert({into:a[s-1],select:a[s]});break;case 470:this.$=new r.Insert({into:a[s-1],select:a[s],orreplace:!0});break;case 471:this.$=new r.Insert({into:a[s-4],columns:a[s-2],select:a[s]});break;case 476:this.$=[a[s-1]];break;case 479:this.$=a[s-4],a[s-4].push(a[s-1]);break;case 480:case 481:case 483:case 491:this.$=a[s-2],a[s-2].push(a[s]);break;case 492:this.$=new r.CreateTable({table:a[s-4]}),r.extend(this.$,a[s-7]),r.extend(this.$,a[s-6]),r.extend(this.$,a[s-5]),r.extend(this.$,a[s-2]),r.extend(this.$,a[s]);break;case 493:this.$=new r.CreateTable({table:a[s]}),r.extend(this.$,a[s-3]),r.extend(this.$,a[s-2]),r.extend(this.$,a[s-1]);break;case 495:this.$={class:!0};break;case 505:this.$={temporary:!0};break;case 507:this.$={ifnotexists:!0};break;case 508:this.$={columns:a[s-2],constraints:a[s]};break;case 509:this.$={columns:a[s]};break;case 510:this.$={as:a[s]};break;case 511:case 535:this.$=[a[s]];break;case 513:case 514:case 515:case 516:case 517:a[s].constraintid=a[s-1],this.$=a[s];break;case 520:this.$={type:"CHECK",expression:a[s-1]};break;case 521:this.$={type:"PRIMARY KEY",columns:a[s-1],clustered:(a[s-3]+"").toUpperCase()};break;case 522:this.$={type:"FOREIGN KEY",columns:a[s-5],fktable:a[s-2],fkcolumns:a[s-1]};break;case 528:this.$={type:"UNIQUE",columns:a[s-1],clustered:(a[s-3]+"").toUpperCase()};break;case 537:this.$=new r.ColumnDef({columnid:a[s-2]}),r.extend(this.$,a[s-1]),r.extend(this.$,a[s]);break;case 538:this.$=new r.ColumnDef({columnid:a[s-1]}),r.extend(this.$,a[s]);break;case 539:this.$=new r.ColumnDef({columnid:a[s],dbtypeid:""});break;case 540:this.$={dbtypeid:a[s-5],dbsize:a[s-3],dbprecision:+a[s-1]};break;case 541:this.$={dbtypeid:a[s-3],dbsize:a[s-1]};break;case 542:this.$={dbtypeid:a[s]};break;case 543:this.$={dbtypeid:"ENUM",enumvalues:a[s-1]};break;case 544:this.$=a[s-1],a[s-1].dbtypeid+="["+a[s]+"]";break;case 546:case 753:this.$=+a[s];break;case 548:this.$=void 0;break;case 550:r.extend(a[s-1],a[s]),this.$=a[s-1];break;case 553:this.$={primarykey:!0};break;case 554:case 555:this.$={foreignkey:{table:a[s-1],columnid:a[s]}};break;case 556:this.$={identity:{value:a[s-3],step:a[s-1]}};break;case 557:this.$={identity:{value:1,step:1}};break;case 558:case 560:this.$={default:a[s]};break;case 559:this.$={default:a[s-1]};break;case 561:this.$={null:!0};break;case 562:this.$={notnull:!0};break;case 563:this.$={check:a[s]};break;case 564:this.$={unique:!0};break;case 565:this.$={onupdate:a[s]};break;case 566:this.$={onupdate:a[s-1]};break;case 567:this.$=new r.DropTable({tables:a[s],type:a[s-2]}),r.extend(this.$,a[s-1]);break;case 571:this.$={ifexists:!0};break;case 572:this.$=new r.AlterTable({table:a[s-3],renameto:a[s]});break;case 573:this.$=new r.AlterTable({table:a[s-3],addcolumn:a[s]});break;case 574:this.$=new r.AlterTable({table:a[s-3],modifycolumn:a[s]});break;case 575:this.$=new r.AlterTable({table:a[s-5],renamecolumn:a[s-2],to:a[s]});break;case 576:this.$=new r.AlterTable({table:a[s-3],dropcolumn:a[s]});break;case 577:this.$=new r.AlterTable({table:a[s-2],renameto:a[s]});break;case 578:this.$=new r.AttachDatabase({databaseid:a[s],engineid:a[s-2].toUpperCase()});break;case 579:this.$=new r.AttachDatabase({databaseid:a[s-3],engineid:a[s-5].toUpperCase(),args:a[s-1]});break;case 580:this.$=new r.AttachDatabase({databaseid:a[s-2],engineid:a[s-4].toUpperCase(),as:a[s]});break;case 581:this.$=new r.AttachDatabase({databaseid:a[s-5],engineid:a[s-7].toUpperCase(),as:a[s],args:a[s-3]});break;case 582:this.$=new r.DetachDatabase({databaseid:a[s]});break;case 583:this.$=new r.CreateDatabase({databaseid:a[s]}),r.extend(this.$,a[s]);break;case 584:this.$=new r.CreateDatabase({engineid:a[s-4].toUpperCase(),databaseid:a[s-1],as:a[s]}),r.extend(this.$,a[s-2]);break;case 585:this.$=new r.CreateDatabase({engineid:a[s-7].toUpperCase(),databaseid:a[s-4],args:a[s-2],as:a[s]}),r.extend(this.$,a[s-5]);break;case 586:this.$=new r.CreateDatabase({engineid:a[s-4].toUpperCase(),as:a[s],args:[a[s-1]]}),r.extend(this.$,a[s-2]);break;case 587:this.$=void 0;break;case 589:case 590:this.$=new r.UseDatabase({databaseid:a[s]});break;case 591:this.$=new r.DropDatabase({databaseid:a[s]}),r.extend(this.$,a[s-1]);break;case 592:case 593:this.$=new r.DropDatabase({databaseid:a[s],engineid:a[s-3].toUpperCase()}),r.extend(this.$,a[s-1]);break;case 594:this.$=new r.CreateIndex({indexid:a[s-5],table:a[s-3],columns:a[s-1]});break;case 595:this.$=new r.CreateIndex({indexid:a[s-5],table:a[s-3],columns:a[s-1],unique:!0});break;case 596:this.$=new r.DropIndex({indexid:a[s]});break;case 597:this.$=new r.ShowDatabases;break;case 598:this.$=new r.ShowDatabases({like:a[s]});break;case 599:this.$=new r.ShowDatabases({engineid:a[s-1].toUpperCase()});break;case 600:this.$=new r.ShowDatabases({engineid:a[s-3].toUpperCase(),like:a[s]});break;case 601:this.$=new r.ShowTables;break;case 602:this.$=new r.ShowTables({like:a[s]});break;case 603:this.$=new r.ShowTables({databaseid:a[s]});break;case 604:this.$=new r.ShowTables({like:a[s],databaseid:a[s-2]});break;case 605:this.$=new r.ShowColumns({table:a[s]});break;case 606:this.$=new r.ShowColumns({table:a[s-2],databaseid:a[s]});break;case 607:this.$=new r.ShowIndex({table:a[s]});break;case 608:this.$=new r.ShowIndex({table:a[s-2],databaseid:a[s]});break;case 609:this.$=new r.ShowCreateTable({table:a[s]});break;case 610:this.$=new r.ShowCreateTable({table:a[s-2],databaseid:a[s]});break;case 611:this.$=new r.CreateTable({table:a[s-6],view:!0,select:a[s-1],viewcolumns:a[s-4]}),r.extend(this.$,a[s-9]),r.extend(this.$,a[s-7]);break;case 612:this.$=new r.CreateTable({table:a[s-3],view:!0,select:a[s-1]}),r.extend(this.$,a[s-6]),r.extend(this.$,a[s-4]);break;case 616:this.$=new r.DropTable({tables:a[s],view:!0}),r.extend(this.$,a[s-1]);break;case 617:case 763:this.$=new r.ExpressionStatement({expression:a[s]});break;case 618:this.$=new r.Source({url:a[s].value});break;case 619:this.$=new r.Assert({value:a[s]});break;case 620:this.$=new r.Assert({value:a[s].value});break;case 621:this.$=new r.Assert({value:a[s],message:a[s-2]});break;case 623:case 634:case 636:this.$=a[s].value;break;case 624:case 632:this.$=+a[s].value;break;case 625:this.$=!!a[s].value;break;case 633:this.$=""+a[s].value;break;case 642:this.$={};break;case 645:this.$=[];break;case 646:r.extend(a[s-2],a[s]),this.$=a[s-2];break;case 648:this.$={},this.$[a[s-2].substr(1,a[s-2].length-2)]=a[s];break;case 649:case 650:this.$={},this.$[a[s-2]]=a[s];break;case 653:this.$=new r.SetVariable({variable:a[s-2].toLowerCase(),value:a[s]});break;case 654:this.$=new r.SetVariable({variable:a[s-1].toLowerCase(),value:a[s]});break;case 655:this.$=new r.SetVariable({variable:a[s-2],expression:a[s]});break;case 656:this.$=new r.SetVariable({variable:a[s-3],props:a[s-2],expression:a[s]});break;case 657:this.$=new r.SetVariable({variable:a[s-2],expression:a[s],method:a[s-3]});break;case 658:this.$=new r.SetVariable({variable:a[s-3],props:a[s-2],expression:a[s],method:a[s-4]});break;case 659:this.$="@";break;case 660:this.$="$";break;case 666:this.$=!0;break;case 667:this.$=!1;break;case 668:this.$=new r.CommitTransaction;break;case 669:this.$=new r.RollbackTransaction;break;case 670:this.$=new r.BeginTransaction;break;case 671:this.$=new r.If({expression:a[s-2],thenstat:a[s-1],elsestat:a[s]}),a[s-1].exists&&(this.$.exists=a[s-1].exists),a[s-1].queries&&(this.$.queries=a[s-1].queries);break;case 672:this.$=new r.If({expression:a[s-1],thenstat:a[s]}),a[s].exists&&(this.$.exists=a[s].exists),a[s].queries&&(this.$.queries=a[s].queries);break;case 673:this.$=a[s];break;case 674:this.$=new r.While({expression:a[s-1],loopstat:a[s]}),a[s].exists&&(this.$.exists=a[s].exists),a[s].queries&&(this.$.queries=a[s].queries);break;case 675:this.$=new r.Continue;break;case 676:this.$=new r.Break;break;case 677:this.$=new r.BeginEnd({statements:a[s-1]});break;case 678:this.$=new r.Print({exprs:a[s]});break;case 679:this.$=new r.Print({select:a[s]});break;case 680:this.$=new r.Require({paths:a[s]});break;case 681:this.$=new r.Require({plugins:a[s]});break;case 682:case 683:this.$=a[s].toUpperCase();break;case 684:this.$=new r.Echo({expr:a[s]});break;case 689:this.$=new r.Declare({declares:a[s]});break;case 692:this.$={variable:a[s-1]},r.extend(this.$,a[s]);break;case 693:this.$={variable:a[s-2]},r.extend(this.$,a[s]);break;case 694:this.$={variable:a[s-3],expression:a[s]},r.extend(this.$,a[s-2]);break;case 695:this.$={variable:a[s-4],expression:a[s]},r.extend(this.$,a[s-2]);break;case 696:this.$=new r.TruncateTable({table:a[s]});break;case 697:this.$=new r.Merge,r.extend(this.$,a[s-4]),r.extend(this.$,a[s-3]),r.extend(this.$,a[s-2]),r.extend(this.$,{matches:a[s-1]}),r.extend(this.$,a[s]);break;case 698:case 699:this.$={into:a[s]};break;case 701:this.$={on:a[s]};break;case 706:this.$={matched:!0,action:a[s]};break;case 707:this.$={matched:!0,expr:a[s-2],action:a[s]};break;case 708:this.$={delete:!0};break;case 709:this.$={update:a[s]};break;case 710:case 711:this.$={matched:!1,bytarget:!0,action:a[s]};break;case 712:case 713:this.$={matched:!1,bytarget:!0,expr:a[s-2],action:a[s]};break;case 714:this.$={matched:!1,bysource:!0,action:a[s]};break;case 715:this.$={matched:!1,bysource:!0,expr:a[s-2],action:a[s]};break;case 716:this.$={insert:!0,values:a[s]};break;case 717:this.$={insert:!0,values:a[s],columns:a[s-3]};break;case 718:this.$={insert:!0,defaultvalues:!0};break;case 719:this.$={insert:!0,defaultvalues:!0,columns:a[s-3]};break;case 721:this.$={output:{columns:a[s]}};break;case 722:this.$={output:{columns:a[s-3],intovar:a[s],method:a[s-1]}};break;case 723:this.$={output:{columns:a[s-2],intotable:a[s]}};break;case 724:this.$={output:{columns:a[s-5],intotable:a[s-3],intocolumns:a[s-1]}};break;case 725:this.$=new r.CreateVertex({class:a[s-3],sharp:a[s-2],name:a[s-1]}),r.extend(this.$,a[s]);break;case 728:this.$={sets:a[s]};break;case 729:this.$={content:a[s]};break;case 730:this.$={select:a[s]};break;case 731:this.$=new r.CreateEdge({from:a[s-3],to:a[s-1],name:a[s-5]}),r.extend(this.$,a[s]);break;case 732:this.$=new r.CreateGraph({graph:a[s]});break;case 733:this.$=new r.CreateGraph({from:a[s]});break;case 736:this.$=a[s-2],a[s-1]&&(this.$.json=new r.Json({value:a[s-1]})),a[s]&&(this.$.as=a[s]);break;case 737:this.$={source:a[s-6],target:a[s]},a[s-3]&&(this.$.json=new r.Json({value:a[s-3]})),a[s-2]&&(this.$.as=a[s-2]),r.extend(this.$,a[s-4]);break;case 738:this.$={source:a[s-5],target:a[s]},a[s-2]&&(this.$.json=new r.Json({value:a[s-3]})),a[s-1]&&(this.$.as=a[s-2]);break;case 739:this.$={source:a[s-2],target:a[s]};break;case 743:this.$={vars:a[s],method:a[s-1]};break;case 746:case 747:f=a[s-1],this.$={prop:a[s-3],sharp:a[s-2],name:void 0===f?void 0:f.substr(1,f.length-2),class:a[s]};break;case 748:var p=a[s-1];this.$={sharp:a[s-2],name:void 0===p?void 0:p.substr(1,p.length-2),class:a[s]};break;case 749:p=a[s-1],this.$={name:void 0===p?void 0:p.substr(1,p.length-2),class:a[s]};break;case 750:this.$={class:a[s]};break;case 756:this.$=new r.AddRule({left:a[s-2],right:a[s]});break;case 757:this.$=new r.AddRule({right:a[s]});break;case 760:this.$=new r.Term({termid:a[s]});break;case 761:this.$=new r.Term({termid:a[s-3],args:a[s-1]});break;case 764:this.$=new r.CreateTrigger({trigger:a[s-6],when:a[s-5],action:a[s-4],table:a[s-2],statement:a[s]}),a[s].exists&&(this.$.exists=a[s].exists),a[s].queries&&(this.$.queries=a[s].queries);break;case 765:this.$=new r.CreateTrigger({trigger:a[s-5],when:a[s-4],action:a[s-3],table:a[s-1],funcid:a[s]});break;case 766:this.$=new r.CreateTrigger({trigger:a[s-6],when:a[s-4],action:a[s-3],table:a[s-5],statement:a[s]}),a[s].exists&&(this.$.exists=a[s].exists),a[s].queries&&(this.$.queries=a[s].queries);break;case 767:case 768:case 770:this.$="AFTER";break;case 769:this.$="BEFORE";break;case 771:this.$="INSTEADOF";break;case 772:this.$="INSERT";break;case 773:this.$="DELETE";break;case 774:this.$="UPDATE";break;case 775:this.$=new r.DropTrigger({trigger:a[s]});break;case 776:this.$=new r.Reindex({indexid:a[s]});break;case 1050:case 1070:case 1072:case 1074:case 1078:case 1080:case 1082:case 1084:case 1086:case 1088:this.$=[];break;case 1051:case 1065:case 1067:case 1071:case 1073:case 1075:case 1079:case 1081:case 1083:case 1085:case 1087:case 1089:a[s-1].push(a[s]);break;case 1064:case 1066:this.$=[a[s]]}},table:[e([10,604,765],t,{8:1,9:2,12:3,13:4,17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,506:95,184:99,3:100,2:n,4:r,5:i,14:a,53:s,72:u,89:l,124:c,146:h,156:f,189:p,270:d,271:g,292:m,337:v,340:_,341:b,398:x,402:w,403:E,406:S,408:T,410:k,411:C,419:I,420:A,436:M,438:L,439:N,441:P,442:O,443:R,444:D,445:F,449:z,450:B,453:U,454:V,507:j,509:q,510:G,519:$}),{1:[3]},{10:[1,105],11:106,604:H,765:X},e(W,[2,8]),e(W,[2,9]),e(Y,[2,12]),e(W,t,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,506:95,184:99,3:100,12:109,2:n,4:r,5:i,15:[1,110],53:s,72:u,89:l,124:c,146:h,156:f,189:p,270:d,271:g,292:m,337:v,340:_,341:b,398:x,402:w,403:E,406:S,408:T,410:k,411:C,419:I,420:A,436:M,438:L,439:N,441:P,442:O,443:R,444:D,445:F,449:z,450:B,453:U,454:V,507:j,509:q,510:G,519:$}),e(Y,[2,14]),e(Y,[2,15]),e(Y,[2,16]),e(Y,[2,17]),e(Y,[2,18]),e(Y,[2,19]),e(Y,[2,20]),e(Y,[2,21]),e(Y,[2,22]),e(Y,[2,23]),e(Y,[2,24]),e(Y,[2,25]),e(Y,[2,26]),e(Y,[2,27]),e(Y,[2,28]),e(Y,[2,29]),e(Y,[2,30]),e(Y,[2,31]),e(Y,[2,32]),e(Y,[2,33]),e(Y,[2,34]),e(Y,[2,35]),e(Y,[2,36]),e(Y,[2,37]),e(Y,[2,38]),e(Y,[2,39]),e(Y,[2,40]),e(Y,[2,41]),e(Y,[2,42]),e(Y,[2,43]),e(Y,[2,44]),e(Y,[2,45]),e(Y,[2,46]),e(Y,[2,47]),e(Y,[2,48]),e(Y,[2,49]),e(Y,[2,50]),e(Y,[2,51]),e(Y,[2,52]),e(Y,[2,53]),e(Y,[2,54]),e(Y,[2,55]),e(Y,[2,56]),e(Y,[2,57]),e(Y,[2,58]),e(Y,[2,59]),e(Y,[2,60]),e(Y,[2,61]),e(Y,[2,62]),e(Y,[2,63]),e(Y,[2,64]),e(Y,[2,65]),e(Y,[2,66]),e(Y,[2,67]),{355:[1,111]},{2:n,3:112,4:r,5:i},{2:n,3:114,4:r,5:i,156:Z,200:113,292:J,293:K,294:Q,295:ee},e(te,[2,504],{3:121,350:125,2:n,4:r,5:i,134:ne,135:re,187:[1,123],193:[1,122],272:[1,129],273:[1,130],359:[1,131],407:[1,120],474:[1,124],511:[1,128]}),{145:ie,451:132,452:133},{183:[1,135]},{407:[1,136]},{2:n,3:138,4:r,5:i,130:[1,144],193:[1,139],355:[1,143],399:140,407:[1,137],412:[1,141],511:[1,142]},{2:n,3:168,4:r,5:i,56:165,77:oe,94:145,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(je,qe,{342:204,171:[1,205],198:Ge}),e(je,qe,{342:207,198:Ge}),{2:n,3:219,4:r,5:i,77:$e,132:He,143:le,144:212,145:ce,152:fe,156:Z,181:me,198:[1,210],199:213,200:215,201:214,202:217,209:209,213:Xe,214:218,292:J,293:K,294:Q,295:ee,304:De,421:190,422:Ue,426:Ve,455:208},{2:n,3:221,4:r,5:i},{355:[1,222]},e(We,[2,1046],{80:223,106:224,107:[1,225]}),e(Ye,[2,1050],{90:226}),{2:n,3:230,4:r,5:i,190:[1,228],193:[1,231],271:[1,227],355:[1,232],407:[1,229]},{355:[1,233]},{2:n,3:236,4:r,5:i,73:234,75:235},e([308,604,765],t,{12:3,13:4,17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,506:95,184:99,3:100,9:238,2:n,4:r,5:i,14:a,53:s,72:u,89:l,124:c,146:h,156:f,189:p,270:d,271:g,292:m,337:v,340:_,341:b,398:x,402:w,403:E,406:S,408:T,410:k,411:C,419:I,420:A,436:M,437:[1,237],438:L,439:N,441:P,442:O,443:R,444:D,445:F,449:z,450:B,453:U,454:V,507:j,509:q,510:G,519:$}),{437:[1,239]},{437:[1,240]},{2:n,3:242,4:r,5:i,407:[1,241]},{2:n,3:244,4:r,5:i,199:243},e(Ze,[2,314]),{113:245,132:se,298:Ne},{2:n,3:114,4:r,5:i,113:251,131:ae,132:[1,248],143:le,144:246,145:Je,152:fe,156:Z,181:me,196:250,200:255,201:254,261:252,262:253,269:Ke,278:247,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,304:De,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:257,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Y,[2,675]),e(Y,[2,676]),{2:n,3:168,4:r,5:i,40:259,56:165,77:oe,79:75,89:l,94:260,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,151:258,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,184:99,189:p,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:266,4:r,5:i,113:263,132:se,298:Ne,446:261,447:262,448:264,449:Qe},{2:n,3:267,4:r,5:i,143:et,145:tt,433:268},{2:n,3:168,4:r,5:i,56:165,77:oe,94:271,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{507:[1,272]},{2:n,3:100,4:r,5:i,506:274,508:273},{2:n,3:114,4:r,5:i,156:Z,200:275,292:J,293:K,294:Q,295:ee},{2:n,3:168,4:r,5:i,56:165,77:oe,94:276,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(nt,rt,{186:280,164:[1,279],185:[1,277],187:[1,278],195:it}),e(ot,[2,760],{77:[1,282]}),e([2,4,5,10,72,77,78,93,98,107,118,128,131,132,137,143,145,152,154,156,162,164,168,169,179,180,181,183,185,187,195,198,232,244,245,249,251,269,270,274,275,277,284,285,286,287,288,289,290,292,293,294,295,296,297,298,299,300,301,304,305,308,312,314,319,422,426,604,765],[2,152],{149:[1,283],150:[1,284],190:[1,285],191:[1,286],192:[1,287],193:[1,288],194:[1,289]}),e(at,[2,1]),e(at,[2,2]),{6:290,131:[1,439],172:[1,462],243:[1,438],244:[1,373],245:[1,407],249:[1,411],372:[1,404],383:[1,295],404:[1,297],412:[1,549],416:[1,471],418:[1,443],419:[1,509],435:[1,442],437:[1,525],442:[1,342],462:[1,418],466:[1,448],472:[1,341],516:[1,307],517:[1,299],518:[1,399],520:[1,291],521:[1,292],522:[1,293],523:[1,294],524:[1,296],525:[1,298],526:[1,300],527:[1,301],528:[1,302],529:[1,303],530:[1,304],531:[1,305],532:[1,306],533:[1,308],534:[1,309],535:[1,310],536:[1,311],537:[1,312],538:[1,313],539:[1,314],540:[1,315],541:[1,316],542:[1,317],543:[1,318],544:[1,319],545:[1,320],546:[1,321],547:[1,322],548:[1,323],549:[1,324],550:[1,325],551:[1,326],552:[1,327],553:[1,328],554:[1,329],555:[1,330],556:[1,331],557:[1,332],558:[1,333],559:[1,334],560:[1,335],561:[1,336],562:[1,337],563:[1,338],564:[1,339],565:[1,340],566:[1,343],567:[1,344],568:[1,345],569:[1,346],570:[1,347],571:[1,348],572:[1,349],573:[1,350],574:[1,351],575:[1,352],576:[1,353],577:[1,354],578:[1,355],579:[1,356],580:[1,357],581:[1,358],582:[1,359],583:[1,360],584:[1,361],585:[1,362],586:[1,363],587:[1,364],588:[1,365],589:[1,366],590:[1,367],591:[1,368],592:[1,369],593:[1,370],594:[1,371],595:[1,372],596:[1,374],597:[1,375],598:[1,376],599:[1,377],600:[1,378],601:[1,379],602:[1,380],603:[1,381],604:[1,382],605:[1,383],606:[1,384],607:[1,385],608:[1,386],609:[1,387],610:[1,388],611:[1,389],612:[1,390],613:[1,391],614:[1,392],615:[1,393],616:[1,394],617:[1,395],618:[1,396],619:[1,397],620:[1,398],621:[1,400],622:[1,401],623:[1,402],624:[1,403],625:[1,405],626:[1,406],627:[1,408],628:[1,409],629:[1,410],630:[1,412],631:[1,413],632:[1,414],633:[1,415],634:[1,416],635:[1,417],636:[1,419],637:[1,420],638:[1,421],639:[1,422],640:[1,423],641:[1,424],642:[1,425],643:[1,426],644:[1,427],645:[1,428],646:[1,429],647:[1,430],648:[1,431],649:[1,432],650:[1,433],651:[1,434],652:[1,435],653:[1,436],654:[1,437],655:[1,440],656:[1,441],657:[1,444],658:[1,445],659:[1,446],660:[1,447],661:[1,449],662:[1,450],663:[1,451],664:[1,452],665:[1,453],666:[1,454],667:[1,455],668:[1,456],669:[1,457],670:[1,458],671:[1,459],672:[1,460],673:[1,461],674:[1,463],675:[1,464],676:[1,465],677:[1,466],678:[1,467],679:[1,468],680:[1,469],681:[1,470],682:[1,472],683:[1,473],684:[1,474],685:[1,475],686:[1,476],687:[1,477],688:[1,478],689:[1,479],690:[1,480],691:[1,481],692:[1,482],693:[1,483],694:[1,484],695:[1,485],696:[1,486],697:[1,487],698:[1,488],699:[1,489],700:[1,490],701:[1,491],702:[1,492],703:[1,493],704:[1,494],705:[1,495],706:[1,496],707:[1,497],708:[1,498],709:[1,499],710:[1,500],711:[1,501],712:[1,502],713:[1,503],714:[1,504],715:[1,505],716:[1,506],717:[1,507],718:[1,508],719:[1,510],720:[1,511],721:[1,512],722:[1,513],723:[1,514],724:[1,515],725:[1,516],726:[1,517],727:[1,518],728:[1,519],729:[1,520],730:[1,521],731:[1,522],732:[1,523],733:[1,524],734:[1,526],735:[1,527],736:[1,528],737:[1,529],738:[1,530],739:[1,531],740:[1,532],741:[1,533],742:[1,534],743:[1,535],744:[1,536],745:[1,537],746:[1,538],747:[1,539],748:[1,540],749:[1,541],750:[1,542],751:[1,543],752:[1,544],753:[1,545],754:[1,546],755:[1,547],756:[1,548],757:[1,550],758:[1,551],759:[1,552],760:[1,553],761:[1,554],762:[1,555],763:[1,556],764:[1,557]},{1:[2,6]},e(W,t,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,506:95,184:99,3:100,12:558,2:n,4:r,5:i,53:s,72:u,89:l,124:c,146:h,156:f,189:p,270:d,271:g,292:m,337:v,340:_,341:b,398:x,402:w,403:E,406:S,408:T,410:k,411:C,419:I,420:A,436:M,438:L,439:N,441:P,442:O,443:R,444:D,445:F,449:z,450:B,453:U,454:V,507:j,509:q,510:G,519:$}),e(st,[2,1044]),e(st,[2,1045]),e(W,[2,10]),{16:[1,559]},{2:n,3:244,4:r,5:i,199:560},{407:[1,561]},e(Y,[2,763]),{77:ut},{77:[1,563]},{77:lt},{77:[1,565]},{77:[1,566]},{2:n,3:168,4:r,5:i,56:165,77:oe,94:567,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(je,ct,{352:568,156:ht}),{407:[1,570]},{2:n,3:571,4:r,5:i},{193:[1,572]},{2:n,3:578,4:r,5:i,132:ft,137:pt,143:et,145:tt,152:dt,183:[1,574],433:585,475:573,476:575,477:576,480:577,484:582,495:579,499:581},{130:[1,589],351:586,355:[1,588],412:[1,587]},{113:591,132:se,183:[2,1144],298:Ne,473:590},e(gt,[2,1138],{467:592,3:593,2:n,4:r,5:i}),{2:n,3:594,4:r,5:i},{4:[1,595]},{4:[1,596]},e(te,[2,505]),e(Y,[2,689],{74:[1,597]}),e(mt,[2,690]),{2:n,3:598,4:r,5:i},{2:n,3:244,4:r,5:i,199:599},{2:n,3:600,4:r,5:i},e(je,yt,{400:601,156:vt}),{407:[1,603]},{2:n,3:604,4:r,5:i},e(je,yt,{400:605,156:vt}),e(je,yt,{400:606,156:vt}),{2:n,3:607,4:r,5:i},e(_t,[2,1132]),e(_t,[2,1133]),e(Y,t,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,506:95,184:99,3:100,12:608,114:625,329:637,2:n,4:r,5:i,53:s,72:u,89:l,99:bt,112:xt,115:wt,116:Et,123:St,124:Tt,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,146:h,154:Pt,156:f,170:Ot,171:Rt,179:Dt,180:Ft,189:p,270:d,271:g,292:m,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn,337:v,340:_,341:b,398:x,402:w,403:E,406:S,408:T,410:k,411:C,419:I,420:A,436:M,438:L,439:N,441:P,442:O,443:R,444:D,445:F,449:z,450:B,453:U,454:V,507:j,509:q,510:G,519:$}),e(Ze,[2,291]),e(Ze,[2,292]),e(Ze,[2,293]),e(Ze,[2,294]),e(Ze,[2,295]),e(Ze,[2,296]),e(Ze,[2,297]),e(Ze,[2,298]),e(Ze,[2,299]),e(Ze,[2,300]),e(Ze,[2,301]),e(Ze,[2,302]),e(Ze,[2,303]),e(Ze,[2,304]),e(Ze,[2,305]),e(Ze,[2,306]),e(Ze,[2,307]),e(Ze,[2,308]),{2:n,3:168,4:r,5:i,26:654,27:653,36:649,40:648,56:165,77:oe,79:75,89:l,94:651,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,184:99,189:p,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,268:650,269:_e,270:d,271:[1,655],274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:[1,652],293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,341:b,421:190,422:Ue,426:Ve},e(Ze,[2,312]),e(Ze,[2,313]),{77:[1,656]},e([2,4,5,10,53,72,74,76,78,89,93,95,98,99,107,112,115,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],rn,{77:ut,116:[1,657]}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:658,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:659,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:660,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:661,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:662,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Ze,[2,286]),e([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,231,232,239,244,245,246,247,249,251,253,269,270,271,274,275,277,284,285,286,287,288,289,290,292,293,294,295,296,297,298,299,300,301,302,304,305,308,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,345,358,370,371,375,376,398,402,403,406,408,410,411,417,419,420,422,426,428,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765,766,767],[2,359]),e(on,[2,360]),e(on,[2,361]),e(on,an),e(on,[2,363]),e([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,299,302,308,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,345,358,370,371,375,376,398,402,403,406,408,410,411,419,420,422,426,428,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],[2,364]),{2:n,3:664,4:r,5:i,131:[1,665],303:663},{2:n,3:666,4:r,5:i},e(on,[2,370]),e(on,[2,371]),{2:n,3:667,4:r,5:i,77:sn,113:669,131:ae,132:se,143:le,152:fe,181:me,196:670,201:672,261:671,296:Me,297:Le,298:Ne,304:De,421:673,426:Ve},{77:[1,674]},{2:n,3:168,4:r,5:i,56:165,77:oe,94:675,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,306:676,309:677,310:un,314:ze,319:Be,421:190,422:Ue,426:Ve},{77:[1,679]},{77:[1,680]},e(ln,[2,627]),{2:n,3:695,4:r,5:i,77:cn,111:690,113:688,131:ae,132:se,143:le,144:685,145:Je,152:fe,156:Z,181:me,196:687,200:693,201:692,261:689,262:691,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,302:[1,683],304:De,421:190,422:Ue,423:681,424:684,425:686,426:Ve,429:682},{2:n,3:168,4:r,5:i,56:165,77:oe,94:260,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,151:696,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:697,4:r,5:i,156:Z,200:698,292:J,293:K,294:Q,295:ee},{77:[2,339]},{77:[2,340]},{77:[2,341]},{77:[2,342]},{77:[2,343]},{77:[2,344]},{77:[2,345]},{77:[2,346]},{77:[2,347]},{2:n,3:704,4:r,5:i,131:hn,132:fn,427:699,428:[1,700],430:701},{2:n,3:244,4:r,5:i,199:705},{292:[1,706]},e(je,[2,475]),{2:n,3:244,4:r,5:i,199:707},{231:[1,709],456:708},{231:[2,698]},{2:n,3:219,4:r,5:i,77:$e,132:He,143:le,144:212,145:ce,152:fe,156:Z,181:me,199:213,200:215,201:214,202:217,209:710,213:Xe,214:218,292:J,293:K,294:Q,295:ee,304:De,421:190,422:Ue,426:Ve},{40:711,79:75,89:l,184:99,189:p},e(pn,[2,1094],{210:712,76:[1,713]}),e(dn,[2,185],{3:714,2:n,4:r,5:i,76:[1,715],154:[1,716]}),e(dn,[2,189],{3:717,2:n,4:r,5:i,76:[1,718]}),e(dn,[2,190],{3:719,2:n,4:r,5:i,76:[1,720]}),e(dn,[2,193]),e(dn,[2,194],{3:721,2:n,4:r,5:i,76:[1,722]}),e(dn,[2,197],{3:723,2:n,4:r,5:i,76:[1,724]}),e([2,4,5,10,72,74,76,78,93,98,118,128,154,162,168,169,183,206,208,222,223,224,225,226,227,228,229,230,231,232,249,251,308,312,604,765],gn,{77:ut,116:mn}),e([2,4,5,10,72,74,76,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,230,231,232,249,251,308,312,604,765],[2,200]),e(Y,[2,776]),{2:n,3:244,4:r,5:i,199:726},e(yn,vn,{81:727,198:_n}),e(We,[2,1047]),e(bn,[2,1060],{108:729,190:[1,730]}),e([10,78,183,308,312,604,765],vn,{421:190,81:731,117:732,3:733,114:736,144:758,158:768,160:769,2:n,4:r,5:i,72:xn,76:wn,77:En,112:Sn,115:wt,116:Et,118:Tn,122:kn,123:Cn,124:In,128:An,129:Mn,130:Ln,131:Nn,132:Pn,133:On,134:Rn,135:Dn,136:Fn,137:zn,138:Bn,139:Un,140:Vn,141:jn,142:qn,143:Gn,145:$n,146:Hn,148:Xn,149:Wn,150:Yn,152:Zn,154:Jn,156:Kn,162:Qn,164:er,166:tr,168:nr,169:rr,170:ir,171:or,172:ar,173:sr,175:ur,185:lr,187:cr,198:_n,244:ye,245:ve,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,422:Ue,426:Ve}),{355:[1,782]},{183:[1,783]},e(Y,[2,597],{112:[1,784]}),{407:[1,785]},{183:[1,786]},e(Y,[2,601],{112:[1,787],183:[1,788]}),{2:n,3:244,4:r,5:i,199:789},{40:790,74:[1,791],79:75,89:l,184:99,189:p},e(hr,[2,70]),{76:[1,792]},e(Y,[2,670]),{11:106,308:[1,793],604:H,765:X},e(Y,[2,668]),e(Y,[2,669]),{2:n,3:794,4:r,5:i},e(Y,[2,590]),{146:[1,795]},e([2,4,5,10,53,72,74,76,77,78,89,95,124,128,143,145,146,148,149,152,154,156,181,183,187,189,230,270,271,292,299,304,308,312,337,340,341,345,346,358,370,371,375,376,398,402,403,404,405,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,507,509,510,516,517,518,519,604,765],gn,{116:mn}),e(Y,[2,618]),e(Y,[2,619]),e(Y,[2,620]),e(Y,an,{74:[1,796]}),{77:sn,113:669,131:ae,132:se,143:le,152:fe,181:me,196:670,201:672,261:671,296:Me,297:Le,298:Ne,304:De,421:673,426:Ve},e(fr,[2,323]),e(fr,[2,324]),e(fr,[2,325]),e(fr,[2,326]),e(fr,[2,327]),e(fr,[2,328]),e(fr,[2,329]),e(Y,t,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,506:95,184:99,3:100,114:625,329:637,12:797,2:n,4:r,5:i,53:s,72:u,89:l,99:bt,112:xt,115:wt,116:Et,123:St,124:Tt,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,146:h,154:Pt,156:f,170:Ot,171:Rt,179:Dt,180:Ft,189:p,270:d,271:g,292:m,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn,337:v,340:_,341:b,398:x,402:w,403:E,406:S,408:T,410:k,411:C,419:I,420:A,436:M,438:L,439:N,441:P,442:O,443:R,444:D,445:F,449:z,450:B,453:U,454:V,507:j,509:q,510:G,519:$}),e(Y,[2,678],{74:pr}),e(Y,[2,679]),e(dr,[2,357],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),e(Y,[2,680],{74:[1,800]}),e(Y,[2,681],{74:[1,801]}),e(mt,[2,686]),e(mt,[2,688]),e(mt,[2,682]),e(mt,[2,683]),{114:807,115:wt,116:Et,124:[1,802],230:mr,431:803,432:804,435:yr},{2:n,3:808,4:r,5:i},e(je,[2,659]),e(je,[2,660]),e(Y,[2,617],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),{2:n,3:100,4:r,5:i,506:274,508:809},e(Y,[2,757],{74:vr}),e(_r,[2,759]),e(Y,[2,762]),e(Y,[2,684],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),e(br,rt,{186:811,195:it}),e(br,rt,{186:812,195:it}),e(br,rt,{186:813,195:it}),e(xr,[2,1090],{259:146,200:147,260:148,111:149,258:150,196:151,261:152,113:153,262:154,201:155,202:156,263:157,264:158,265:159,144:161,266:162,267:163,56:165,158:167,3:168,421:190,188:814,174:815,257:816,94:817,2:n,4:r,5:i,77:oe,131:ae,132:se,137:ue,143:le,145:ce,149:he,152:fe,154:pe,156:Z,179:de,180:ge,181:me,244:ye,245:ve,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,422:Ue,426:Ve}),{77:[1,819],131:ae,196:818},{2:n,3:100,4:r,5:i,506:274,508:820},e(wr,[2,153]),e(wr,[2,154]),e(wr,[2,155]),e(wr,[2,156]),e(wr,[2,157]),e(wr,[2,158]),e(wr,[2,159]),e(at,[2,3]),e(at,[2,777]),e(at,[2,778]),e(at,[2,779]),e(at,[2,780]),e(at,[2,781]),e(at,[2,782]),e(at,[2,783]),e(at,[2,784]),e(at,[2,785]),e(at,[2,786]),e(at,[2,787]),e(at,[2,788]),e(at,[2,789]),e(at,[2,790]),e(at,[2,791]),e(at,[2,792]),e(at,[2,793]),e(at,[2,794]),e(at,[2,795]),e(at,[2,796]),e(at,[2,797]),e(at,[2,798]),e(at,[2,799]),e(at,[2,800]),e(at,[2,801]),e(at,[2,802]),e(at,[2,803]),e(at,[2,804]),e(at,[2,805]),e(at,[2,806]),e(at,[2,807]),e(at,[2,808]),e(at,[2,809]),e(at,[2,810]),e(at,[2,811]),e(at,[2,812]),e(at,[2,813]),e(at,[2,814]),e(at,[2,815]),e(at,[2,816]),e(at,[2,817]),e(at,[2,818]),e(at,[2,819]),e(at,[2,820]),e(at,[2,821]),e(at,[2,822]),e(at,[2,823]),e(at,[2,824]),e(at,[2,825]),e(at,[2,826]),e(at,[2,827]),e(at,[2,828]),e(at,[2,829]),e(at,[2,830]),e(at,[2,831]),e(at,[2,832]),e(at,[2,833]),e(at,[2,834]),e(at,[2,835]),e(at,[2,836]),e(at,[2,837]),e(at,[2,838]),e(at,[2,839]),e(at,[2,840]),e(at,[2,841]),e(at,[2,842]),e(at,[2,843]),e(at,[2,844]),e(at,[2,845]),e(at,[2,846]),e(at,[2,847]),e(at,[2,848]),e(at,[2,849]),e(at,[2,850]),e(at,[2,851]),e(at,[2,852]),e(at,[2,853]),e(at,[2,854]),e(at,[2,855]),e(at,[2,856]),e(at,[2,857]),e(at,[2,858]),e(at,[2,859]),e(at,[2,860]),e(at,[2,861]),e(at,[2,862]),e(at,[2,863]),e(at,[2,864]),e(at,[2,865]),e(at,[2,866]),e(at,[2,867]),e(at,[2,868]),e(at,[2,869]),e(at,[2,870]),e(at,[2,871]),e(at,[2,872]),e(at,[2,873]),e(at,[2,874]),e(at,[2,875]),e(at,[2,876]),e(at,[2,877]),e(at,[2,878]),e(at,[2,879]),e(at,[2,880]),e(at,[2,881]),e(at,[2,882]),e(at,[2,883]),e(at,[2,884]),e(at,[2,885]),e(at,[2,886]),e(at,[2,887]),e(at,[2,888]),e(at,[2,889]),e(at,[2,890]),e(at,[2,891]),e(at,[2,892]),e(at,[2,893]),e(at,[2,894]),e(at,[2,895]),e(at,[2,896]),e(at,[2,897]),e(at,[2,898]),e(at,[2,899]),e(at,[2,900]),e(at,[2,901]),e(at,[2,902]),e(at,[2,903]),e(at,[2,904]),e(at,[2,905]),e(at,[2,906]),e(at,[2,907]),e(at,[2,908]),e(at,[2,909]),e(at,[2,910]),e(at,[2,911]),e(at,[2,912]),e(at,[2,913]),e(at,[2,914]),e(at,[2,915]),e(at,[2,916]),e(at,[2,917]),e(at,[2,918]),e(at,[2,919]),e(at,[2,920]),e(at,[2,921]),e(at,[2,922]),e(at,[2,923]),e(at,[2,924]),e(at,[2,925]),e(at,[2,926]),e(at,[2,927]),e(at,[2,928]),e(at,[2,929]),e(at,[2,930]),e(at,[2,931]),e(at,[2,932]),e(at,[2,933]),e(at,[2,934]),e(at,[2,935]),e(at,[2,936]),e(at,[2,937]),e(at,[2,938]),e(at,[2,939]),e(at,[2,940]),e(at,[2,941]),e(at,[2,942]),e(at,[2,943]),e(at,[2,944]),e(at,[2,945]),e(at,[2,946]),e(at,[2,947]),e(at,[2,948]),e(at,[2,949]),e(at,[2,950]),e(at,[2,951]),e(at,[2,952]),e(at,[2,953]),e(at,[2,954]),e(at,[2,955]),e(at,[2,956]),e(at,[2,957]),e(at,[2,958]),e(at,[2,959]),e(at,[2,960]),e(at,[2,961]),e(at,[2,962]),e(at,[2,963]),e(at,[2,964]),e(at,[2,965]),e(at,[2,966]),e(at,[2,967]),e(at,[2,968]),e(at,[2,969]),e(at,[2,970]),e(at,[2,971]),e(at,[2,972]),e(at,[2,973]),e(at,[2,974]),e(at,[2,975]),e(at,[2,976]),e(at,[2,977]),e(at,[2,978]),e(at,[2,979]),e(at,[2,980]),e(at,[2,981]),e(at,[2,982]),e(at,[2,983]),e(at,[2,984]),e(at,[2,985]),e(at,[2,986]),e(at,[2,987]),e(at,[2,988]),e(at,[2,989]),e(at,[2,990]),e(at,[2,991]),e(at,[2,992]),e(at,[2,993]),e(at,[2,994]),e(at,[2,995]),e(at,[2,996]),e(at,[2,997]),e(at,[2,998]),e(at,[2,999]),e(at,[2,1e3]),e(at,[2,1001]),e(at,[2,1002]),e(at,[2,1003]),e(at,[2,1004]),e(at,[2,1005]),e(at,[2,1006]),e(at,[2,1007]),e(at,[2,1008]),e(at,[2,1009]),e(at,[2,1010]),e(at,[2,1011]),e(at,[2,1012]),e(at,[2,1013]),e(at,[2,1014]),e(at,[2,1015]),e(at,[2,1016]),e(at,[2,1017]),e(at,[2,1018]),e(at,[2,1019]),e(at,[2,1020]),e(at,[2,1021]),e(at,[2,1022]),e(at,[2,1023]),e(at,[2,1024]),e(at,[2,1025]),e(at,[2,1026]),e(at,[2,1027]),e(at,[2,1028]),e(at,[2,1029]),e(at,[2,1030]),e(at,[2,1031]),e(at,[2,1032]),e(at,[2,1033]),e(at,[2,1034]),e(at,[2,1035]),e(at,[2,1036]),e(at,[2,1037]),e(at,[2,1038]),e(at,[2,1039]),e(at,[2,1040]),e(at,[2,1041]),e(at,[2,1042]),e(at,[2,1043]),e(W,[2,7]),e(W,t,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,506:95,184:99,3:100,12:821,2:n,4:r,5:i,53:s,72:u,89:l,124:c,146:h,156:f,189:p,270:d,271:g,292:m,337:v,340:_,341:b,398:x,402:w,403:E,406:S,408:T,410:k,411:C,419:I,420:A,436:M,438:L,439:N,441:P,442:O,443:R,444:D,445:F,449:z,450:B,453:U,454:V,507:j,509:q,510:G,519:$}),{398:[1,825],403:[1,822],404:[1,823],405:[1,824]},{2:n,3:826,4:r,5:i},e(br,[2,1114],{291:827,768:829,78:[1,828],164:[1,831],185:[1,830]}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:260,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,151:832,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:260,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,151:833,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:834,4:r,5:i,132:[1,835]},{2:n,3:836,4:r,5:i,132:[1,837]},{2:n,3:838,4:r,5:i,99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{2:n,3:839,4:r,5:i},{154:[1,840]},e(Er,ct,{352:841,156:ht}),{230:[1,842]},{2:n,3:843,4:r,5:i},e(Y,[2,732],{74:Sr}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:845,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(_r,[2,735]),e(Tr,[2,1146],{421:190,478:846,144:847,139:kr,141:kr,145:Je,422:Ue,426:Ve}),{139:[1,848],141:[1,849]},e(Cr,Ir,{492:851,495:852,77:[1,850],137:pt}),e(Ar,[2,1170],{496:853,132:[1,854]}),e(Mr,[2,1174],{498:855,499:856,152:dt}),e(Mr,[2,750]),e(Lr,[2,742]),{2:n,3:857,4:r,5:i,131:[1,858]},{2:n,3:859,4:r,5:i},{2:n,3:860,4:r,5:i},e(je,ct,{352:861,156:ht}),e(je,ct,{352:862,156:ht}),e(_t,[2,494]),e(_t,[2,495]),{183:[1,863]},{183:[2,1145]},e(Nr,[2,1140],{468:864,471:865,137:[1,866]}),e(gt,[2,1139]),e(Pr,Or,{512:867,95:Rr,230:[1,868],516:Dr,517:Fr,518:zr}),{76:[1,873]},{76:[1,874]},{145:ie,452:875},{4:Br,7:879,76:[1,877],276:876,389:878,391:Ur},e(Y,[2,459],{128:[1,882]}),e(Y,[2,582]),{2:n,3:883,4:r,5:i},{300:[1,884]},e(Er,yt,{400:885,156:vt}),e(Y,[2,596]),{2:n,3:244,4:r,5:i,199:887,401:886},{2:n,3:244,4:r,5:i,199:887,401:888},e(Y,[2,775]),e(W,[2,672],{440:889,312:[1,890]}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:891,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:892,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:893,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:894,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:895,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:896,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:897,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:898,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:899,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:900,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:901,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:902,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:903,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:904,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:905,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:906,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:907,4:r,5:i,77:[1,909],131:ae,156:Z,196:908,200:910,292:J,293:K,294:Q,295:ee},{2:n,3:911,4:r,5:i,77:[1,913],131:ae,156:Z,196:912,200:914,292:J,293:K,294:Q,295:ee},e(Vr,[2,443],{259:146,200:147,260:148,111:149,258:150,196:151,261:152,113:153,262:154,201:155,202:156,263:157,264:158,265:159,144:161,266:162,267:163,56:165,158:167,3:168,421:190,94:915,2:n,4:r,5:i,77:oe,131:ae,132:se,137:ue,143:le,145:ce,149:he,152:fe,154:pe,156:Z,179:de,180:ge,181:me,244:ye,245:ve,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,422:Ue,426:Ve}),e(Vr,[2,444],{259:146,200:147,260:148,111:149,258:150,196:151,261:152,113:153,262:154,201:155,202:156,263:157,264:158,265:159,144:161,266:162,267:163,56:165,158:167,3:168,421:190,94:916,2:n,4:r,5:i,77:oe,131:ae,132:se,137:ue,143:le,145:ce,149:he,152:fe,154:pe,156:Z,179:de,180:ge,181:me,244:ye,245:ve,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,422:Ue,426:Ve}),e(Vr,[2,445],{259:146,200:147,260:148,111:149,258:150,196:151,261:152,113:153,262:154,201:155,202:156,263:157,264:158,265:159,144:161,266:162,267:163,56:165,158:167,3:168,421:190,94:917,2:n,4:r,5:i,77:oe,131:ae,132:se,137:ue,143:le,145:ce,149:he,152:fe,154:pe,156:Z,179:de,180:ge,181:me,244:ye,245:ve,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,422:Ue,426:Ve}),e(Vr,[2,446],{259:146,200:147,260:148,111:149,258:150,196:151,261:152,113:153,262:154,201:155,202:156,263:157,264:158,265:159,144:161,266:162,267:163,56:165,158:167,3:168,421:190,94:918,2:n,4:r,5:i,77:oe,131:ae,132:se,137:ue,143:le,145:ce,149:he,152:fe,154:pe,156:Z,179:de,180:ge,181:me,244:ye,245:ve,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,422:Ue,426:Ve}),e(Vr,jr,{259:146,200:147,260:148,111:149,258:150,196:151,261:152,113:153,262:154,201:155,202:156,263:157,264:158,265:159,144:161,266:162,267:163,56:165,158:167,3:168,421:190,94:919,2:n,4:r,5:i,77:oe,131:ae,132:se,137:ue,143:le,145:ce,149:he,152:fe,154:pe,156:Z,179:de,180:ge,181:me,244:ye,245:ve,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,422:Ue,426:Ve}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:920,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:921,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Vr,[2,448],{259:146,200:147,260:148,111:149,258:150,196:151,261:152,113:153,262:154,201:155,202:156,263:157,264:158,265:159,144:161,266:162,267:163,56:165,158:167,3:168,421:190,94:922,2:n,4:r,5:i,77:oe,131:ae,132:se,137:ue,143:le,145:ce,149:he,152:fe,154:pe,156:Z,179:de,180:ge,181:me,244:ye,245:ve,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,422:Ue,426:Ve}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:923,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:924,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{164:[1,926],166:[1,928],330:925,336:[1,927]},{2:n,3:168,4:r,5:i,56:165,77:oe,94:929,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:930,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:695,4:r,5:i,77:[1,931],111:934,145:qr,156:Z,200:935,202:933,292:J,293:K,294:Q,295:ee,331:932},{99:[1,937],299:[1,938]},{2:n,3:168,4:r,5:i,56:165,77:oe,94:939,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:940,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:941,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{4:Br,7:879,276:942,389:878,391:Ur},e(Gr,[2,88]),e(Gr,[2,89]),{78:[1,943]},{78:[1,944]},{78:[1,945]},{78:[1,946],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},e(je,qe,{342:207,77:lt,198:Ge}),{78:[2,1110]},{78:[2,1111]},{134:ne,135:re},{2:n,3:168,4:r,5:i,56:165,77:oe,94:260,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,151:947,152:fe,154:pe,156:Z,158:167,164:[1,949],179:de,180:ge,181:me,185:[1,948],196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:950,4:r,5:i,149:$r,180:[1,952]},e([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,118,122,128,129,130,131,132,134,135,137,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,316,332,333,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],[2,419],{114:625,329:637,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,334:tn}),e(Hr,[2,420],{114:625,329:637,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,180:Ft,314:Bt,318:jt}),e(Hr,[2,421],{114:625,329:637,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,180:Ft,314:Bt,318:jt}),e(Xr,[2,422],{114:625,329:637,318:jt}),e(Xr,[2,423],{114:625,329:637,318:jt}),e(on,[2,368]),e(on,[2,1116]),e(on,[2,1117]),e(on,[2,369]),e([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,231,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],[2,365]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:953,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(ln,[2,623]),e(ln,[2,624]),e(ln,[2,625]),e(ln,[2,626]),e(ln,[2,628]),{40:954,79:75,89:l,184:99,189:p},{99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,306:955,309:677,310:un,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{307:956,308:Wr,309:957,310:un,312:Yr},e(Zr,[2,375]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:959,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:960,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{4:Br,7:879,276:961,389:878,391:Ur},e(ln,[2,629]),{74:[1,963],302:[1,962]},e(ln,[2,645]),e(Jr,[2,652]),e(Kr,[2,630]),e(Kr,[2,631]),e(Kr,[2,632]),e(Kr,[2,633]),e(Kr,[2,634]),e(Kr,[2,635]),e(Kr,[2,636]),e(Kr,[2,637]),e(Kr,[2,638]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:964,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e([2,4,5,10,53,72,74,76,78,89,93,95,98,99,107,112,115,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,428,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],rn,{77:ut,116:Qr}),{74:pr,302:[1,966]},e(ei,[2,317],{77:ut}),e(Ze,[2,318]),{74:[1,968],428:[1,967]},e(ln,[2,642]),e(ti,[2,647]),{152:[1,969]},{152:[1,970]},{152:[1,971]},{40:976,77:[1,975],79:75,89:l,143:le,144:979,145:Je,149:ni,152:fe,181:me,184:99,189:p,201:980,304:De,343:972,344:973,345:[1,974],346:ri,421:190,422:Ue,426:Ve},e(je,qe,{342:981,198:Ge}),{77:ii,143:le,144:979,145:Je,149:ni,152:fe,181:me,201:980,304:De,343:982,344:983,346:ri,421:190,422:Ue,426:Ve},{230:[1,986],457:985},{2:n,3:219,4:r,5:i,77:$e,132:He,143:le,144:212,145:ce,152:fe,156:Z,181:me,199:213,200:215,201:214,202:217,209:987,213:Xe,214:218,292:J,293:K,294:Q,295:ee,304:De,421:190,422:Ue,426:Ve},{231:[2,699]},{78:[1,988]},e(dn,[2,1096],{211:989,3:990,2:n,4:r,5:i}),e(pn,[2,1095]),e(dn,[2,183]),{2:n,3:991,4:r,5:i},{212:[1,992]},e(dn,[2,187]),{2:n,3:993,4:r,5:i},e(dn,[2,191]),{2:n,3:994,4:r,5:i},e(dn,[2,195]),{2:n,3:995,4:r,5:i},e(dn,[2,198]),{2:n,3:996,4:r,5:i},{2:n,3:997,4:r,5:i},{148:[1,998]},e(oi,[2,172],{82:999,183:[1,1e3]}),{2:n,3:219,4:r,5:i,132:[1,1005],143:le,145:[1,1006],152:fe,156:Z,181:me,199:1001,200:1002,201:1003,202:1004,292:J,293:K,294:Q,295:ee,304:De},{2:n,3:1011,4:r,5:i,109:1007,110:1008,111:1009,112:ai},e(bn,[2,1061]),e(si,[2,1052],{91:1012,182:1013,183:[1,1014]}),e(Ye,[2,1051],{153:1015,179:ui,180:li,181:ci}),e([2,4,5,10,72,74,76,78,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,198,244,245,284,285,286,287,288,289,290,308,312,422,426,604,765],[2,90],{77:[1,1019]}),{119:[1,1020]},e(hi,[2,93]),{2:n,3:1021,4:r,5:i},e(hi,[2,95]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1022,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1023,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:733,4:r,5:i,72:xn,76:wn,77:En,112:Sn,114:736,115:wt,116:Et,117:1025,118:Tn,122:kn,123:Cn,124:In,125:1024,128:An,129:Mn,130:Ln,131:Nn,132:Pn,133:On,134:Rn,135:Dn,136:Fn,137:zn,138:Bn,139:Un,140:Vn,141:jn,142:qn,143:Gn,144:758,145:$n,146:Hn,148:Xn,149:Wn,150:Yn,152:Zn,154:Jn,156:Kn,158:768,160:769,162:Qn,164:er,166:tr,168:nr,169:rr,170:ir,171:or,172:ar,173:sr,175:ur,185:lr,187:cr,244:ye,245:ve,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,421:190,422:Ue,426:Ve},{77:[1,1026]},{77:[1,1027]},{77:[1,1028]},{77:[1,1029]},e(hi,[2,104]),e(hi,[2,105]),e(hi,[2,106]),e(hi,[2,107]),e(hi,[2,108]),e(hi,[2,109]),{2:n,3:1030,4:r,5:i},{2:n,3:1031,4:r,5:i,133:[1,1032]},e(hi,[2,113]),e(hi,[2,114]),e(hi,[2,115]),e(hi,[2,116]),e(hi,[2,117]),e(hi,[2,118]),{2:n,3:1033,4:r,5:i,77:sn,113:669,131:ae,132:se,143:le,152:fe,181:me,196:670,201:672,261:671,296:Me,297:Le,298:Ne,304:De,421:673,426:Ve},{145:[1,1034]},{77:[1,1035]},{145:[1,1036]},e(hi,[2,123]),{77:[1,1037]},{2:n,3:1038,4:r,5:i},{77:[1,1039]},{77:[1,1040]},{77:[1,1041]},{77:[1,1042]},{77:[1,1043],164:[1,1044]},{77:[1,1045]},{77:[1,1046]},{77:[1,1047]},{77:[1,1048]},{77:[1,1049]},{77:[1,1050]},{77:[1,1051]},{77:[1,1052]},{77:[1,1053]},{77:[2,1076]},{77:[2,1077]},{2:n,3:244,4:r,5:i,199:1054},{2:n,3:244,4:r,5:i,199:1055},{113:1056,132:se,298:Ne},e(Y,[2,599],{112:[1,1057]}),{2:n,3:244,4:r,5:i,199:1058},{113:1059,132:se,298:Ne},{2:n,3:1060,4:r,5:i},e(Y,[2,696]),e(Y,[2,68]),{2:n,3:236,4:r,5:i,75:1061},{77:[1,1062]},e(Y,[2,677]),e(Y,[2,589]),{2:n,3:1011,4:r,5:i,111:1065,143:fi,145:pi,147:1063,338:1064,339:1066},{144:1069,145:Je,421:190,422:Ue,426:Ve},e(Y,[2,674]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1070,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Vr,jr,{259:146,200:147,260:148,111:149,258:150,196:151,261:152,113:153,262:154,201:155,202:156,263:157,264:158,265:159,144:161,266:162,267:163,56:165,158:167,3:168,421:190,94:1071,2:n,4:r,5:i,77:oe,131:ae,132:se,137:ue,143:le,145:ce,149:he,152:fe,154:pe,156:Z,179:de,180:ge,181:me,244:ye,245:ve,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,422:Ue,426:Ve}),{113:1072,132:se,298:Ne},{2:n,3:266,4:r,5:i,448:1073,449:Qe},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1075,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,230:mr,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve,431:1074,435:yr},e(Y,[2,654]),{114:1077,115:wt,116:Et,124:[1,1076]},e(Y,[2,666]),e(Y,[2,667]),{2:n,3:1079,4:r,5:i,77:di,131:gi,434:1078},{114:807,115:wt,116:Et,124:[1,1082],432:1083},e(Y,[2,756],{74:vr}),{2:n,3:100,4:r,5:i,506:1084},{2:n,3:168,4:r,5:i,56:165,77:oe,94:817,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,174:1085,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,257:816,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:817,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,174:1086,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,257:816,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:817,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,174:1087,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,257:816,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(xr,[2,151]),e(xr,[2,1091],{74:mi}),e(yi,[2,276]),e(yi,[2,283],{114:625,329:637,3:1090,113:1092,2:n,4:r,5:i,76:[1,1089],99:bt,112:xt,115:wt,116:Et,123:St,124:gr,131:[1,1091],132:se,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,298:Ne,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),e(nt,[2,1092],{197:1093,766:[1,1094]}),{131:ae,196:1095},{74:vr,78:[1,1096]},e(W,[2,11]),{148:[1,1097],190:[1,1098]},{190:[1,1099]},{190:[1,1100]},{190:[1,1101]},e(Y,[2,578],{76:[1,1103],77:[1,1102]}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:260,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,151:1104,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(on,[2,349]),e(br,[2,1115]),e(br,[2,1112]),e(br,[2,1113]),{74:pr,78:[1,1105]},{74:pr,78:[1,1106]},{74:[1,1107]},{74:[1,1108]},{74:[1,1109]},{74:[1,1110]},e(on,[2,356]),e(Y,[2,583]),{300:[1,1111]},{2:n,3:1112,4:r,5:i,113:1113,132:se,298:Ne},{2:n,3:244,4:r,5:i,199:1114},{230:[1,1115]},{2:n,3:578,4:r,5:i,132:ft,137:pt,143:et,145:tt,152:dt,433:585,476:1116,477:576,480:577,484:582,495:579,499:581},e(Y,[2,733],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),e(_r,[2,1148],{479:1117,485:1118,76:vi}),e(Tr,[2,1147]),{2:n,3:1122,4:r,5:i,132:ft,137:pt,144:1121,145:Je,152:dt,421:190,422:Ue,426:Ve,477:1120,495:579,499:581},{2:n,3:1122,4:r,5:i,132:ft,137:pt,143:et,145:tt,152:dt,433:585,477:1124,480:1123,484:582,495:579,499:581},{2:n,3:578,4:r,5:i,132:ft,137:pt,143:et,145:tt,152:dt,433:585,475:1125,476:575,477:576,480:577,484:582,495:579,499:581},e(Ar,[2,1166],{493:1126,132:[1,1127]}),e(Cr,[2,1165]),e(Mr,[2,1172],{497:1128,499:1129,152:dt}),e(Ar,[2,1171]),e(Mr,[2,749]),e(Mr,[2,1175]),e(Cr,[2,752]),e(Cr,[2,753]),e(Mr,[2,751]),e(Lr,[2,743]),{2:n,3:244,4:r,5:i,199:1130},{2:n,3:244,4:r,5:i,199:1131},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1132,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(_i,[2,1142],{469:1133,113:1134,132:se,298:Ne}),e(Nr,[2,1141]),{2:n,3:1135,4:r,5:i},{337:bi,340:xi,341:wi,513:1136},{2:n,3:244,4:r,5:i,199:1140},e(Pr,[2,768]),e(Pr,[2,769]),e(Pr,[2,770]),{129:[1,1141]},{270:[1,1142]},{270:[1,1143]},e(mt,[2,691]),e(mt,[2,692],{124:[1,1144]}),{4:Br,7:879,276:1145,389:878,391:Ur},e([2,4,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,299,302,308,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,345,358,370,371,375,376,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],[2,545],{5:[1,1146]}),e([2,5,10,53,72,74,76,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,299,302,308,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,345,358,370,371,375,376,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],[2,542],{4:[1,1148],77:[1,1147]}),{77:[1,1149]},e(Ei,[2,4]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1150,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Y,[2,591]),e(Er,[2,571]),{2:n,3:1151,4:r,5:i,113:1152,132:se,298:Ne},e(Y,[2,567],{74:Si}),e(mt,[2,569]),e(Y,[2,616],{74:Si}),e(Y,[2,671]),e(Y,t,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,506:95,184:99,3:100,12:1154,2:n,4:r,5:i,53:s,72:u,89:l,124:c,146:h,156:f,189:p,270:d,271:g,292:m,337:v,340:_,341:b,398:x,402:w,403:E,406:S,408:T,410:k,411:C,419:I,420:A,436:M,438:L,439:N,441:P,442:O,443:R,444:D,445:F,449:z,450:B,453:U,454:V,507:j,509:q,510:G,519:$}),e(Ti,[2,379],{114:625,329:637,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,314:Bt,318:jt,319:qt,320:Gt,321:$t}),e(Xr,[2,380],{114:625,329:637,318:jt}),e(Ti,[2,381],{114:625,329:637,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,314:Bt,318:jt,319:qt,320:Gt,321:$t}),e(ki,[2,382],{114:625,329:637,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,314:Bt,316:[1,1155],318:jt,319:qt,320:Gt,321:$t}),e(ki,[2,384],{114:625,329:637,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,314:Bt,316:[1,1156],318:jt,319:qt,320:Gt,321:$t}),e(Ze,[2,386],{114:625,329:637}),e(Hr,[2,387],{114:625,329:637,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,180:Ft,314:Bt,318:jt}),e(Hr,[2,388],{114:625,329:637,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,180:Ft,314:Bt,318:jt}),e(Ci,[2,389],{114:625,329:637,115:wt,116:Et,123:St,136:Ct,314:Bt,318:jt}),e(Ci,[2,390],{114:625,329:637,115:wt,116:Et,123:St,136:Ct,314:Bt,318:jt}),e(Ci,[2,391],{114:625,329:637,115:wt,116:Et,123:St,136:Ct,314:Bt,318:jt}),e([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,123,124,128,129,130,131,132,133,134,135,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,313,315,316,317,319,320,321,322,323,324,325,326,327,328,332,333,334,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],[2,392],{114:625,329:637,115:wt,116:Et,136:Ct,314:Bt,318:jt}),e(Ii,[2,393],{114:625,329:637,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,179:Dt,180:Ft,314:Bt,318:jt,319:qt}),e(Ii,[2,394],{114:625,329:637,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,179:Dt,180:Ft,314:Bt,318:jt,319:qt}),e(Ii,[2,395],{114:625,329:637,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,179:Dt,180:Ft,314:Bt,318:jt,319:qt}),e(Ii,[2,396],{114:625,329:637,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,179:Dt,180:Ft,314:Bt,318:jt,319:qt}),e(ei,[2,397],{77:ut}),e(Ze,[2,398]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1157,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Ze,[2,400]),e(ei,[2,401],{77:ut}),e(Ze,[2,402]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1158,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Ze,[2,404]),e(Ai,[2,405],{114:625,329:637,112:xt,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,334:tn}),e(Ai,[2,406],{114:625,329:637,112:xt,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,334:tn}),e(Ai,[2,407],{114:625,329:637,112:xt,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,334:tn}),e(Ai,[2,408],{114:625,329:637,112:xt,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,334:tn}),e([2,4,5,10,53,72,89,99,124,139,140,146,154,156,170,171,189,270,271,292,308,312,322,323,324,325,326,327,328,332,333,335,337,340,341,398,402,403,406,408,410,411,419,420,436,438,439,441,442,443,444,445,449,450,453,454,507,509,510,519,604,765],Mi,{114:625,329:637,112:xt,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,334:tn}),e(Ai,[2,410],{114:625,329:637,112:xt,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,334:tn}),e(Ai,[2,411],{114:625,329:637,112:xt,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,334:tn}),e(Ai,[2,412],{114:625,329:637,112:xt,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,334:tn}),e(Ai,[2,413],{114:625,329:637,112:xt,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,334:tn}),e(Ai,[2,414],{114:625,329:637,112:xt,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,334:tn}),{77:[1,1159]},{77:[2,449]},{77:[2,450]},{77:[2,451]},e(Li,[2,417],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,334:tn}),e([2,4,5,10,53,72,74,76,77,78,89,93,95,98,107,118,122,128,129,130,131,132,134,135,137,143,145,146,148,149,150,152,156,162,164,166,168,169,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,316,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],[2,418],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn}),{2:n,3:168,4:r,5:i,40:1160,56:165,77:oe,78:[1,1162],79:75,89:l,94:260,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,151:1161,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,184:99,189:p,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Ze,[2,431]),e(Ze,[2,433]),e(Ze,[2,440]),e(Ze,[2,441]),{2:n,3:667,4:r,5:i,77:[1,1163]},{2:n,3:695,4:r,5:i,77:[1,1164],111:934,145:qr,156:Z,200:935,202:1166,292:J,293:K,294:Q,295:ee,331:1165},e(Ze,[2,438]),e(Li,[2,435],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,334:tn}),e(Li,[2,436],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,334:tn}),e([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,270,271,284,285,286,287,288,289,290,292,298,302,308,310,311,312,316,322,323,324,325,326,327,328,332,333,334,335,337,340,341,398,402,403,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,466,472,507,509,510,519,604,765],[2,437],{114:625,329:637,112:xt,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t}),e(Ze,[2,439]),e(Ze,[2,309]),e(Ze,[2,310]),e(Ze,[2,311]),e(Ze,[2,424]),{74:pr,78:[1,1167]},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1168,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1169,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Ze,Ni),e(Pi,[2,289]),e(Ze,[2,285]),{78:[1,1171],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{78:[1,1172]},{307:1173,308:Wr,309:957,310:un,312:Yr},{308:[1,1174]},e(Zr,[2,374]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1175,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,311:[1,1176],313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{76:[1,1177],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{74:[1,1178]},e(ln,[2,643]),{2:n,3:695,4:r,5:i,77:cn,111:690,113:688,131:ae,132:se,143:le,144:685,145:Je,152:fe,156:Z,181:me,196:687,200:693,201:692,261:689,262:691,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,302:[1,1179],304:De,421:190,422:Ue,424:1180,425:686,426:Ve},{78:[1,1181],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{2:n,3:1182,4:r,5:i,149:$r},e(Ze,[2,367]),e(ln,[2,640]),{2:n,3:704,4:r,5:i,131:hn,132:fn,428:[1,1183],430:1184},{2:n,3:695,4:r,5:i,77:cn,111:690,113:688,131:ae,132:se,143:le,144:685,145:Je,152:fe,156:Z,181:me,196:687,200:693,201:692,261:689,262:691,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,304:De,421:190,422:Ue,424:1185,425:686,426:Ve},{2:n,3:695,4:r,5:i,77:cn,111:690,113:688,131:ae,132:se,143:le,144:685,145:Je,152:fe,156:Z,181:me,196:687,200:693,201:692,261:689,262:691,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,304:De,421:190,422:Ue,424:1186,425:686,426:Ve},{2:n,3:695,4:r,5:i,77:cn,111:690,113:688,131:ae,132:se,143:le,144:685,145:Je,152:fe,156:Z,181:me,196:687,200:693,201:692,261:689,262:691,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,304:De,421:190,422:Ue,424:1187,425:686,426:Ve},{77:ii,143:le,144:979,145:Je,152:fe,181:me,201:980,304:De,344:1188,421:190,422:Ue,426:Ve},e(Oi,[2,461],{74:Ri}),{149:ni,343:1190,346:ri},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1194,100:1191,111:1193,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,347:1192,421:190,422:Ue,426:Ve},e(Oi,[2,469]),e(Di,[2,472]),e(Di,[2,473]),e(Fi,[2,477]),e(Fi,[2,478]),{2:n,3:244,4:r,5:i,199:1195},{77:ii,143:le,144:979,145:Je,152:fe,181:me,201:980,304:De,344:1196,421:190,422:Ue,426:Ve},e(Oi,[2,465],{74:Ri}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1194,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,347:1192,421:190,422:Ue,426:Ve},{310:zi,458:1197,460:1198,461:1199},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1201,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{230:[2,700]},e(dn,[2,181],{3:1202,2:n,4:r,5:i,76:[1,1203]}),e(dn,[2,182]),e(dn,[2,1097]),e(dn,[2,184]),e(dn,[2,186]),e(dn,[2,188]),e(dn,[2,192]),e(dn,[2,196]),e(dn,[2,199]),e([2,4,5,10,53,72,74,76,77,78,89,93,95,98,118,124,128,143,145,146,148,149,152,154,156,162,168,169,181,183,187,189,206,208,222,223,224,225,226,227,228,229,230,231,232,249,251,270,271,292,299,304,308,312,337,340,341,345,346,358,370,371,375,376,398,402,403,404,405,406,408,410,411,419,420,422,426,436,438,439,441,442,443,444,445,449,450,453,454,507,509,510,516,517,518,519,604,765],[2,201]),{2:n,3:1204,4:r,5:i},e(Bi,[2,1048],{83:1205,92:1206,93:[1,1207],98:[1,1208]}),{2:n,3:219,4:r,5:i,77:[1,1210],132:He,143:le,144:212,145:ce,152:fe,156:Z,181:me,199:213,200:215,201:214,202:217,203:1209,209:1211,213:Xe,214:218,292:J,293:K,294:Q,295:ee,304:De,421:190,422:Ue,426:Ve},e(yn,[2,164]),e(yn,[2,165]),e(yn,[2,166]),e(yn,[2,167]),e(yn,[2,168]),{2:n,3:667,4:r,5:i},e(We,[2,83],{74:[1,1212]}),e(Ui,[2,85]),e(Ui,[2,86]),{113:1213,132:se,298:Ne},e([10,72,74,78,93,98,118,124,128,162,168,169,183,198,206,208,222,223,224,225,226,227,228,229,232,249,251,308,312,604,765],rn,{116:Qr}),e(si,[2,73]),e(si,[2,1053]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1214,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(hi,[2,126]),e(hi,[2,144]),e(hi,[2,145]),e(hi,[2,146]),{2:n,3:168,4:r,5:i,56:165,77:oe,78:[2,1068],94:260,111:149,113:153,127:1215,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,151:1216,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{77:[1,1217]},e(hi,[2,94]),e([2,4,5,10,72,74,76,77,78,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,198,244,245,284,285,286,287,288,289,290,308,312,422,426,604,765],[2,96],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),e([2,4,5,10,72,74,76,77,78,112,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,198,244,245,284,285,286,287,288,289,290,308,312,422,426,604,765],[2,97],{114:625,329:637,99:bt,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),{2:n,3:733,4:r,5:i,72:xn,76:wn,77:En,78:[1,1218],112:Sn,114:736,115:wt,116:Et,117:1219,118:Tn,122:kn,123:Cn,124:In,128:An,129:Mn,130:Ln,131:Nn,132:Pn,133:On,134:Rn,135:Dn,136:Fn,137:zn,138:Bn,139:Un,140:Vn,141:jn,142:qn,143:Gn,144:758,145:$n,146:Hn,148:Xn,149:Wn,150:Yn,152:Zn,154:Jn,156:Kn,158:768,160:769,162:Qn,164:er,166:tr,168:nr,169:rr,170:ir,171:or,172:ar,173:sr,175:ur,185:lr,187:cr,244:ye,245:ve,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,421:190,422:Ue,426:Ve},e(Vi,[2,1064],{153:1015,179:ui,180:li,181:ci}),{2:n,3:733,4:r,5:i,72:xn,76:wn,77:En,112:Sn,114:736,115:wt,116:Et,117:1221,118:Tn,122:kn,123:Cn,124:In,126:1220,128:An,129:Mn,130:Ln,131:Nn,132:Pn,133:On,134:Rn,135:Dn,136:Fn,137:zn,138:Bn,139:Un,140:Vn,141:jn,142:qn,143:Gn,144:758,145:$n,146:Hn,148:Xn,149:Wn,150:Yn,152:Zn,154:Jn,156:Kn,158:768,160:769,162:Qn,164:er,166:tr,168:nr,169:rr,170:ir,171:or,172:ar,173:sr,175:ur,185:lr,187:cr,244:ye,245:ve,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1222,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1223,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:1224,4:r,5:i},e(hi,[2,110]),e(hi,[2,111]),e(hi,[2,112]),e(hi,[2,119]),{2:n,3:1225,4:r,5:i},{2:n,3:1011,4:r,5:i,111:1065,143:fi,145:pi,147:1226,338:1064,339:1066},{2:n,3:1227,4:r,5:i},{2:n,3:168,4:r,5:i,56:165,77:oe,94:260,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,151:1228,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(hi,[2,125]),e(Vi,[2,1070],{155:1229}),e(Vi,[2,1072],{157:1230}),e(Vi,[2,1074],{159:1231}),e(Vi,[2,1078],{161:1232}),e(ji,qi,{163:1233,178:1234}),{77:[1,1235]},e(Vi,[2,1080],{165:1236}),e(Vi,[2,1082],{167:1237}),e(ji,qi,{178:1234,163:1238}),e(ji,qi,{178:1234,163:1239}),e(ji,qi,{178:1234,163:1240}),e(ji,qi,{178:1234,163:1241}),{2:n,3:733,4:r,5:i,72:xn,76:wn,77:En,112:Sn,114:736,115:wt,116:Et,117:1242,118:Tn,122:kn,123:Cn,124:In,128:An,129:Mn,130:Ln,131:Nn,132:Pn,133:On,134:Rn,135:Dn,136:Fn,137:zn,138:Bn,139:Un,140:Vn,141:jn,142:qn,143:Gn,144:758,145:$n,146:Hn,148:Xn,149:Wn,150:Yn,152:Zn,154:Jn,156:Kn,158:768,160:769,162:Qn,164:er,166:tr,168:nr,169:rr,170:ir,171:or,172:ar,173:sr,175:ur,185:lr,187:cr,244:ye,245:ve,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:817,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,174:1243,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,257:816,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Gi,[2,1084],{176:1244}),e(Y,[2,609],{183:[1,1245]}),e(Y,[2,605],{183:[1,1246]}),e(Y,[2,598]),{113:1247,132:se,298:Ne},e(Y,[2,607],{183:[1,1248]}),e(Y,[2,602]),e(Y,[2,603],{112:[1,1249]}),e(hr,[2,69]),{40:1250,79:75,89:l,184:99,189:p},e(Y,[2,453],{74:$i,128:[1,1251]}),e(Hi,[2,454]),{124:[1,1253]},{2:n,3:1254,4:r,5:i},e(je,[2,1118]),e(je,[2,1119]),e(Y,[2,621]),e(dr,[2,358],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),e(Ai,Mi,{114:625,329:637,112:xt,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,334:tn}),e(mt,[2,685]),e(mt,[2,687]),e(Y,[2,653]),e(Y,[2,655],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1255,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:1079,4:r,5:i,77:di,131:gi,434:1256},e(Xi,[2,662]),e(Xi,[2,663]),e(Xi,[2,664]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1257,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1258,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{114:1077,115:wt,116:Et,124:[1,1259]},e(_r,[2,758]),e(xr,[2,148],{74:mi}),e(xr,[2,149],{74:mi}),e(xr,[2,150],{74:mi}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:817,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,257:1260,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:1261,4:r,5:i,113:1263,131:[1,1262],132:se,298:Ne},e(yi,[2,278]),e(yi,[2,280]),e(yi,[2,282]),e(nt,[2,160]),e(nt,[2,1093]),{78:[1,1264]},e(ot,[2,761]),{2:n,3:1265,4:r,5:i},{2:n,3:1266,4:r,5:i},{2:n,3:1268,4:r,5:i,386:1267},{2:n,3:1268,4:r,5:i,386:1269},{2:n,3:1270,4:r,5:i},{2:n,3:168,4:r,5:i,56:165,77:oe,94:260,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,151:1271,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:1272,4:r,5:i},{74:pr,78:[1,1273]},e(on,[2,350]),e(on,[2,351]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1274,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1275,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1276,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1277,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Er,[2,507]),e(Y,Wi,{409:1278,76:Yi,77:[1,1279]}),e(Y,Wi,{409:1281,76:Yi}),{77:[1,1282]},{2:n,3:244,4:r,5:i,199:1283},e(_r,[2,734]),e(_r,[2,736]),e(_r,[2,1149]),{143:et,145:tt,433:1284},e(Zi,[2,1150],{421:190,481:1285,144:1286,145:Je,422:Ue,426:Ve}),{76:vi,139:[2,1154],483:1287,485:1288},e([10,74,76,78,132,139,145,152,308,312,422,426,604,765],Ir,{492:851,495:852,137:pt}),e(_r,[2,739]),e(_r,kr),{74:Sr,78:[1,1289]},e(Mr,[2,1168],{494:1290,499:1291,152:dt}),e(Ar,[2,1167]),e(Mr,[2,748]),e(Mr,[2,1173]),e(Y,[2,493],{77:[1,1292]}),{76:[1,1294],77:[1,1293]},{99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,148:[1,1295],154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},e(Oi,Ji,{79:75,184:99,470:1296,40:1299,89:l,146:Ki,189:p,472:Qi}),e(_i,[2,1143]),e(Nr,[2,726]),{230:[1,1300]},e(eo,[2,772]),e(eo,[2,773]),e(eo,[2,774]),e(Pr,Or,{512:1301,95:Rr,516:Dr,517:Fr,518:zr}),e(Pr,[2,771]),e(Y,[2,315]),e(Y,[2,316]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1302,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(mt,[2,693],{124:[1,1303]}),e(Ei,[2,544]),{131:[1,1305],390:1304,392:[1,1306]},e(Ei,[2,5]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1194,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,347:1307,421:190,422:Ue,426:Ve},e(Y,[2,458],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),e(Y,[2,592]),e(Y,[2,593]),{2:n,3:244,4:r,5:i,199:1308},e(Y,[2,673]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1309,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1310,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{78:[1,1311],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{78:[1,1312],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{2:n,3:168,4:r,5:i,40:1313,56:165,77:oe,79:75,89:l,94:260,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,151:1314,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,184:99,189:p,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{78:[1,1315]},{74:pr,78:[1,1316]},e(Ze,[2,429]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1317,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,40:1318,56:165,77:oe,78:[1,1320],79:75,89:l,94:260,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,151:1319,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,184:99,189:p,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Ze,[2,432]),e(Ze,[2,434]),e(Ze,to,{279:1321,280:no}),{78:[1,1323],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{78:[1,1324],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{2:n,3:1325,4:r,5:i,180:[1,1326]},e(ln,[2,622]),e(Ze,[2,366]),{308:[1,1327]},e(Ze,[2,373]),{99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,308:[2,377],313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1328,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{4:Br,7:879,276:1329,389:878,391:Ur},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1330,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(ln,[2,644]),e(Jr,[2,651]),e(Kr,[2,639]),e(Pi,Ni),e(ln,[2,641]),e(ti,[2,646]),e(ti,[2,648]),e(ti,[2,649]),e(ti,[2,650]),e(Oi,[2,460],{74:Ri}),{77:[1,1332],143:le,144:1333,145:Je,152:fe,181:me,201:1334,304:De,421:190,422:Ue,426:Ve},e(Oi,[2,466]),{74:ro,78:[1,1335]},{74:io,78:[1,1337]},e([74,78,99,112,115,116,123,124,133,136,138,139,140,141,142,154,170,171,179,180,313,314,315,317,318,319,320,321,322,323,324,325,326,327,328,332,333,334,335],oo),e(ao,[2,482],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),{40:1341,77:ii,79:75,89:l,143:le,144:979,145:Je,149:ni,152:fe,181:me,184:99,189:p,201:980,304:De,343:1339,344:1340,346:ri,421:190,422:Ue,426:Ve},e(Oi,[2,464],{74:Ri}),e(Y,[2,720],{459:1342,460:1343,461:1344,310:zi,466:[1,1345]}),e(so,[2,704]),e(so,[2,705]),{154:[1,1347],462:[1,1346]},{99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,310:[2,701],313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},e(dn,[2,179]),{2:n,3:1348,4:r,5:i},e(Y,[2,577]),e(uo,[2,238],{84:1349,128:[1,1350]}),e(Bi,[2,1049]),{77:[1,1351]},{77:[1,1352]},e(oi,[2,169],{204:1353,215:1355,205:1356,216:1357,221:1360,74:lo,206:co,208:ho,222:fo,223:po,224:go,225:mo,226:yo,227:vo,228:_o,229:bo}),{2:n,3:219,4:r,5:i,40:711,77:$e,79:75,89:l,132:He,143:le,144:212,145:ce,152:fe,156:Z,181:me,184:99,189:p,199:213,200:215,201:214,202:217,203:1369,209:1211,213:Xe,214:218,292:J,293:K,294:Q,295:ee,304:De,421:190,422:Ue,426:Ve},e(xo,[2,177]),{2:n,3:1011,4:r,5:i,110:1370,111:1009,112:ai},e(Ui,[2,87]),e(si,[2,147],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),{78:[1,1371]},{74:pr,78:[2,1069]},{2:n,3:168,4:r,5:i,56:165,77:oe,78:[2,1062],94:1376,111:149,113:153,120:1372,121:1373,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,241:1374,244:ye,245:ve,246:[1,1375],258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(hi,[2,98]),e(Vi,[2,1065],{153:1015,179:ui,180:li,181:ci}),{2:n,3:733,4:r,5:i,72:xn,76:wn,77:En,78:[1,1377],112:Sn,114:736,115:wt,116:Et,117:1378,118:Tn,122:kn,123:Cn,124:In,128:An,129:Mn,130:Ln,131:Nn,132:Pn,133:On,134:Rn,135:Dn,136:Fn,137:zn,138:Bn,139:Un,140:Vn,141:jn,142:qn,143:Gn,144:758,145:$n,146:Hn,148:Xn,149:Wn,150:Yn,152:Zn,154:Jn,156:Kn,158:768,160:769,162:Qn,164:er,166:tr,168:nr,169:rr,170:ir,171:or,172:ar,173:sr,175:ur,185:lr,187:cr,244:ye,245:ve,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,421:190,422:Ue,426:Ve},e(Vi,[2,1066],{153:1015,179:ui,180:li,181:ci}),{78:[1,1379],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{78:[1,1380],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{78:[1,1381]},e(hi,[2,120]),{74:$i,78:[1,1382]},e(hi,[2,122]),{74:pr,78:[1,1383]},{2:n,3:733,4:r,5:i,72:xn,76:wn,77:En,78:[1,1384],112:Sn,114:736,115:wt,116:Et,117:1385,118:Tn,122:kn,123:Cn,124:In,128:An,129:Mn,130:Ln,131:Nn,132:Pn,133:On,134:Rn,135:Dn,136:Fn,137:zn,138:Bn,139:Un,140:Vn,141:jn,142:qn,143:Gn,144:758,145:$n,146:Hn,148:Xn,149:Wn,150:Yn,152:Zn,154:Jn,156:Kn,158:768,160:769,162:Qn,164:er,166:tr,168:nr,169:rr,170:ir,171:or,172:ar,173:sr,175:ur,185:lr,187:cr,244:ye,245:ve,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,421:190,422:Ue,426:Ve},{2:n,3:733,4:r,5:i,72:xn,76:wn,77:En,78:[1,1386],112:Sn,114:736,115:wt,116:Et,117:1387,118:Tn,122:kn,123:Cn,124:In,128:An,129:Mn,130:Ln,131:Nn,132:Pn,133:On,134:Rn,135:Dn,136:Fn,137:zn,138:Bn,139:Un,140:Vn,141:jn,142:qn,143:Gn,144:758,145:$n,146:Hn,148:Xn,149:Wn,150:Yn,152:Zn,154:Jn,156:Kn,158:768,160:769,162:Qn,164:er,166:tr,168:nr,169:rr,170:ir,171:or,172:ar,173:sr,175:ur,185:lr,187:cr,244:ye,245:ve,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,421:190,422:Ue,426:Ve},{2:n,3:733,4:r,5:i,72:xn,76:wn,77:En,78:[1,1388],112:Sn,114:736,115:wt,116:Et,117:1389,118:Tn,122:kn,123:Cn,124:In,128:An,129:Mn,130:Ln,131:Nn,132:Pn,133:On,134:Rn,135:Dn,136:Fn,137:zn,138:Bn,139:Un,140:Vn,141:jn,142:qn,143:Gn,144:758,145:$n,146:Hn,148:Xn,149:Wn,150:Yn,152:Zn,154:Jn,156:Kn,158:768,160:769,162:Qn,164:er,166:tr,168:nr,169:rr,170:ir,171:or,172:ar,173:sr,175:ur,185:lr,187:cr,244:ye,245:ve,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,421:190,422:Ue,426:Ve},{2:n,3:733,4:r,5:i,72:xn,76:wn,77:En,78:[1,1390],112:Sn,114:736,115:wt,116:Et,117:1391,118:Tn,122:kn,123:Cn,124:In,128:An,129:Mn,130:Ln,131:Nn,132:Pn,133:On,134:Rn,135:Dn,136:Fn,137:zn,138:Bn,139:Un,140:Vn,141:jn,142:qn,143:Gn,144:758,145:$n,146:Hn,148:Xn,149:Wn,150:Yn,152:Zn,154:Jn,156:Kn,158:768,160:769,162:Qn,164:er,166:tr,168:nr,169:rr,170:ir,171:or,172:ar,173:sr,175:ur,185:lr,187:cr,244:ye,245:ve,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,421:190,422:Ue,426:Ve},{74:wo,78:[1,1392]},e(ao,[2,143],{421:190,3:733,114:736,144:758,158:768,160:769,117:1394,2:n,4:r,5:i,72:xn,76:wn,77:En,112:Sn,115:wt,116:Et,118:Tn,122:kn,123:Cn,124:In,128:An,129:Mn,130:Ln,131:Nn,132:Pn,133:On,134:Rn,135:Dn,136:Fn,137:zn,138:Bn,139:Un,140:Vn,141:jn,142:qn,143:Gn,145:$n,146:Hn,148:Xn,149:Wn,150:Yn,152:Zn,154:Jn,156:Kn,162:Qn,164:er,166:tr,168:nr,169:rr,170:ir,171:or,172:ar,173:sr,175:ur,185:lr,187:cr,244:ye,245:ve,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,422:Ue,426:Ve}),e(ji,qi,{178:1234,163:1395}),{2:n,3:733,4:r,5:i,72:xn,76:wn,77:En,78:[1,1396],112:Sn,114:736,115:wt,116:Et,117:1397,118:Tn,122:kn,123:Cn,124:In,128:An,129:Mn,130:Ln,131:Nn,132:Pn,133:On,134:Rn,135:Dn,136:Fn,137:zn,138:Bn,139:Un,140:Vn,141:jn,142:qn,143:Gn,144:758,145:$n,146:Hn,148:Xn,149:Wn,150:Yn,152:Zn,154:Jn,156:Kn,158:768,160:769,162:Qn,164:er,166:tr,168:nr,169:rr,170:ir,171:or,172:ar,173:sr,175:ur,185:lr,187:cr,244:ye,245:ve,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,421:190,422:Ue,426:Ve},{2:n,3:733,4:r,5:i,72:xn,76:wn,77:En,78:[1,1398],112:Sn,114:736,115:wt,116:Et,117:1399,118:Tn,122:kn,123:Cn,124:In,128:An,129:Mn,130:Ln,131:Nn,132:Pn,133:On,134:Rn,135:Dn,136:Fn,137:zn,138:Bn,139:Un,140:Vn,141:jn,142:qn,143:Gn,144:758,145:$n,146:Hn,148:Xn,149:Wn,150:Yn,152:Zn,154:Jn,156:Kn,158:768,160:769,162:Qn,164:er,166:tr,168:nr,169:rr,170:ir,171:or,172:ar,173:sr,175:ur,185:lr,187:cr,244:ye,245:ve,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,421:190,422:Ue,426:Ve},{74:wo,78:[1,1400]},{74:wo,78:[1,1401]},{74:wo,78:[1,1402]},{74:wo,78:[1,1403]},{78:[1,1404],153:1015,179:ui,180:li,181:ci},{74:mi,78:[1,1405]},{2:n,3:733,4:r,5:i,72:xn,74:[1,1406],76:wn,77:En,112:Sn,114:736,115:wt,116:Et,117:1407,118:Tn,122:kn,123:Cn,124:In,128:An,129:Mn,130:Ln,131:Nn,132:Pn,133:On,134:Rn,135:Dn,136:Fn,137:zn,138:Bn,139:Un,140:Vn,141:jn,142:qn,143:Gn,144:758,145:$n,146:Hn,148:Xn,149:Wn,150:Yn,152:Zn,154:Jn,156:Kn,158:768,160:769,162:Qn,164:er,166:tr,168:nr,169:rr,170:ir,171:or,172:ar,173:sr,175:ur,185:lr,187:cr,244:ye,245:ve,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,421:190,422:Ue,426:Ve},{2:n,3:1408,4:r,5:i},{2:n,3:1409,4:r,5:i},e(Y,[2,600]),{2:n,3:1410,4:r,5:i},{113:1411,132:se,298:Ne},{78:[1,1412]},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1413,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:1011,4:r,5:i,111:1065,143:fi,145:pi,338:1414,339:1066},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1415,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{124:[1,1416]},e(Y,[2,656],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),e(Xi,[2,661]),{78:[1,1417],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},e(Y,[2,657],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1418,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(yi,[2,275]),e(yi,[2,277]),e(yi,[2,279]),e(yi,[2,281]),e(nt,[2,161]),e(Y,[2,572]),{148:[1,1419]},e(Y,[2,573]),e(_r,[2,539],{389:878,7:879,276:1420,4:Br,388:[1,1421],391:Ur}),e(Y,[2,574]),e(Y,[2,576]),{74:pr,78:[1,1422]},e(Y,[2,580]),e(on,[2,348]),{74:[1,1423],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{74:[1,1424],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{74:[1,1425],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{74:[1,1426],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},e(Y,[2,584]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:260,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,151:1427,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:1428,4:r,5:i},e(Y,[2,586]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1376,111:149,113:153,120:1429,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,241:1374,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{77:[1,1430]},{2:n,3:1431,4:r,5:i},{76:vi,139:[2,1152],482:1432,485:1433},e(Zi,[2,1151]),{139:[1,1434]},{139:[2,1155]},e(_r,[2,740]),e(Mr,[2,747]),e(Mr,[2,1169]),{2:n,3:1268,4:r,5:i,76:[1,1437],353:1435,360:1436,386:1438},{2:n,3:1011,4:r,5:i,100:1439,111:1440},{40:1441,79:75,89:l,184:99,189:p},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1442,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Oi,[2,725]),{2:n,3:1011,4:r,5:i,111:1065,143:fi,145:pi,147:1443,338:1064,339:1066},{2:n,3:168,4:r,5:i,56:165,77:oe,94:260,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,151:1444,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Oi,[2,730]),{2:n,3:244,4:r,5:i,199:1445},{337:bi,340:xi,341:wi,513:1446},e(mt,[2,694],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1447,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{74:[1,1448],78:[1,1449]},e(ao,[2,546]),e(ao,[2,547]),{74:io,78:[1,1450]},e(mt,[2,568]),e(Ti,[2,383],{114:625,329:637,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,314:Bt,318:jt,319:qt,320:Gt,321:$t}),e(Ti,[2,385],{114:625,329:637,115:wt,116:Et,123:St,133:kt,136:Ct,138:It,141:Lt,142:Nt,179:Dt,180:Ft,314:Bt,318:jt,319:qt,320:Gt,321:$t}),e(Ze,[2,399]),e(Ze,[2,403]),{78:[1,1451]},{74:pr,78:[1,1452]},e(Ze,[2,425]),e(Ze,[2,427]),{78:[1,1453],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{78:[1,1454]},{74:pr,78:[1,1455]},e(Ze,[2,430]),e(Ze,[2,330]),{77:[1,1456]},e(Ze,to,{279:1457,280:no}),e(Ze,to,{279:1458,280:no}),e(Pi,[2,287]),e(Ze,[2,284]),e(Ze,[2,372]),e(Zr,[2,376],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),{74:[1,1460],78:[1,1459]},{74:[1,1462],78:[1,1461],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{2:n,3:1325,4:r,5:i},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1194,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,347:1463,421:190,422:Ue,426:Ve},e(Fi,[2,480]),e(Fi,[2,481]),{40:1466,77:ii,79:75,89:l,143:le,144:979,145:Je,149:ni,152:fe,181:me,184:99,189:p,201:980,304:De,343:1464,344:1465,346:ri,421:190,422:Ue,426:Ve},{2:n,3:1011,4:r,5:i,111:1467},e(Fi,[2,476]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1468,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{77:ii,143:le,144:979,145:Je,152:fe,181:me,201:980,304:De,344:1469,421:190,422:Ue,426:Ve},e(Oi,[2,463],{74:Ri}),e(Oi,[2,470]),e(Y,[2,697]),e(so,[2,702]),e(so,[2,703]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:817,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,174:1470,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,257:816,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{170:[1,1472],311:[1,1471]},{462:[1,1473]},e(dn,[2,180]),e(Eo,[2,240],{85:1474,232:[1,1475]}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1476,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1477,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:1478,4:r,5:i},e(oi,[2,170],{216:1357,221:1360,215:1479,205:1480,206:co,208:ho,222:fo,223:po,224:go,225:mo,226:yo,227:vo,228:_o,229:bo}),{2:n,3:219,4:r,5:i,77:$e,132:He,143:le,144:212,145:ce,152:fe,156:Z,181:me,199:213,200:215,201:214,202:217,209:1481,213:Xe,214:218,292:J,293:K,294:Q,295:ee,304:De,421:190,422:Ue,426:Ve},e(So,[2,205]),e(So,[2,206]),{2:n,3:219,4:r,5:i,77:[1,1486],143:le,144:1484,145:ce,152:fe,156:Z,181:me,199:1483,200:1487,201:1485,202:1488,217:1482,292:J,293:K,294:Q,295:ee,304:De,421:190,422:Ue,426:Ve},{207:[1,1489],223:To},{207:[1,1491],223:ko},e(Co,[2,222]),{206:[1,1495],208:[1,1494],221:1493,223:po,224:go,225:mo,226:yo,227:vo,228:_o,229:bo},e(Co,[2,224]),{223:[1,1496]},{208:[1,1498],223:[1,1497]},{208:[1,1500],223:[1,1499]},{208:[1,1501]},{223:[1,1502]},{223:[1,1503]},{74:lo,204:1504,205:1356,206:co,208:ho,215:1355,216:1357,221:1360,222:fo,223:po,224:go,225:mo,226:yo,227:vo,228:_o,229:bo},e(Ui,[2,84]),e(hi,[2,100]),{74:Io,78:[1,1505]},{78:[1,1507]},e(Ao,[2,261]),{78:[2,1063]},e(Ao,[2,265],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,246:[1,1508],247:[1,1509],313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),e(hi,[2,99]),e(Vi,[2,1067],{153:1015,179:ui,180:li,181:ci}),e(hi,[2,101]),e(hi,[2,102]),e(hi,[2,103]),e(hi,[2,121]),e(hi,[2,124]),e(hi,[2,127]),e(Vi,[2,1071],{153:1015,179:ui,180:li,181:ci}),e(hi,[2,128]),e(Vi,[2,1073],{153:1015,179:ui,180:li,181:ci}),e(hi,[2,129]),e(Vi,[2,1075],{153:1015,179:ui,180:li,181:ci}),e(hi,[2,130]),e(Vi,[2,1079],{153:1015,179:ui,180:li,181:ci}),e(hi,[2,131]),e(ji,[2,1086],{177:1510}),e(ji,[2,1089],{153:1015,179:ui,180:li,181:ci}),{74:wo,78:[1,1511]},e(hi,[2,133]),e(Vi,[2,1081],{153:1015,179:ui,180:li,181:ci}),e(hi,[2,134]),e(Vi,[2,1083],{153:1015,179:ui,180:li,181:ci}),e(hi,[2,135]),e(hi,[2,136]),e(hi,[2,137]),e(hi,[2,138]),e(hi,[2,139]),e(hi,[2,140]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:260,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,151:1512,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Gi,[2,1085],{153:1015,179:ui,180:li,181:ci}),e(Y,[2,610]),e(Y,[2,606]),e(Y,[2,608]),e(Y,[2,604]),e(hr,[2,71]),e(Y,[2,452],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),e(Hi,[2,455]),e(Hi,[2,456],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1513,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Xi,[2,665]),e(Y,[2,658],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),{2:n,3:1514,4:r,5:i},e(_r,[2,548],{387:1515,393:1516,394:1517,368:1525,154:Mo,187:Lo,230:No,299:Po,345:Oo,358:Ro,370:Do,371:Fo,375:zo,376:Bo}),e(_r,[2,538]),e(Y,[2,579],{76:[1,1529]}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1530,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1531,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1532,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1533,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{74:pr,78:[1,1534]},e(Y,[2,588]),{74:Io,78:[1,1535]},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1376,111:149,113:153,120:1536,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,241:1374,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e([10,74,78,139,308,312,604,765],[2,744]),{139:[1,1537]},{139:[2,1153]},{2:n,3:1122,4:r,5:i,132:ft,137:pt,143:et,145:tt,152:dt,433:585,477:1124,480:1538,484:582,495:579,499:581},{78:[1,1539]},{74:[1,1540],78:[2,509]},{40:1541,79:75,89:l,184:99,189:p},e(ao,[2,535]),{74:ro,78:[1,1542]},e(xo,oo),e(Y,[2,1136],{414:1543,415:1544,72:Uo}),e(Oi,Ji,{79:75,184:99,114:625,329:637,40:1299,470:1546,89:l,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,146:Ki,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,189:p,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn,472:Qi}),e(Oi,[2,728],{74:$i}),e(Oi,[2,729],{74:pr}),e([10,53,72,89,124,146,156,189,270,271,292,308,312,337,340,341,398,402,403,406,408,410,411,419,420,436,438,439,441,442,443,444,445,449,450,453,454,507,509,510,519,604,765],[2,1184],{514:1547,3:1548,2:n,4:r,5:i,76:[1,1549]}),e(Vo,[2,1186],{515:1550,76:[1,1551]}),e(mt,[2,695],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),{131:[1,1552]},e(Ei,[2,541]),e(Ei,[2,543]),e(Ze,[2,415]),e(Ze,[2,416]),e(Ze,[2,442]),e(Ze,[2,426]),e(Ze,[2,428]),{118:jo,281:1553,282:1554,283:[1,1555]},e(Ze,[2,331]),e(Ze,[2,332]),e(Ze,[2,319]),{131:[1,1557]},e(Ze,[2,321]),{131:[1,1558]},{74:io,78:[1,1559]},{77:ii,143:le,144:979,145:Je,152:fe,181:me,201:980,304:De,344:1560,421:190,422:Ue,426:Ve},e(Oi,[2,468],{74:Ri}),e(Oi,[2,471]),e(xo,[2,491]),e(ao,[2,483],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),e(Oi,[2,462],{74:Ri}),e(Y,[2,721],{74:mi,198:[1,1561]}),{337:qo,340:Go,463:1562},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1565,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{119:[1,1567],170:[1,1568],311:[1,1566]},e($o,[2,259],{86:1569,118:[1,1570]}),{119:[1,1571]},e(uo,[2,239],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),{95:[1,1572],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{95:[1,1573]},e(So,[2,203]),e(So,[2,204]),e(xo,[2,178]),e(So,[2,237],{218:1574,230:[1,1575],231:[1,1576]}),e(Ho,[2,208],{3:1577,2:n,4:r,5:i,76:[1,1578]}),e(Xo,[2,1098],{219:1579,76:[1,1580]}),{2:n,3:1581,4:r,5:i,76:[1,1582]},{40:1583,79:75,89:l,184:99,189:p},e(Ho,[2,216],{3:1584,2:n,4:r,5:i,76:[1,1585]}),e(Ho,[2,219],{3:1586,2:n,4:r,5:i,76:[1,1587]}),{77:[1,1588]},e(Co,[2,234]),{77:[1,1589]},e(Co,[2,230]),e(Co,[2,223]),{223:ko},{223:To},e(Co,[2,225]),e(Co,[2,226]),{223:[1,1590]},e(Co,[2,228]),{223:[1,1591]},{223:[1,1592]},e(Co,[2,232]),e(Co,[2,233]),{78:[1,1593],205:1480,206:co,208:ho,215:1479,216:1357,221:1360,222:fo,223:po,224:go,225:mo,226:yo,227:vo,228:_o,229:bo},e(hi,[2,91]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1376,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,241:1594,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(hi,[2,92]),e(Ao,[2,266],{242:1595,243:[1,1596]}),{248:[1,1597]},e(ao,[2,142],{421:190,3:733,114:736,144:758,158:768,160:769,117:1598,2:n,4:r,5:i,72:xn,76:wn,77:En,112:Sn,115:wt,116:Et,118:Tn,122:kn,123:Cn,124:In,128:An,129:Mn,130:Ln,131:Nn,132:Pn,133:On,134:Rn,135:Dn,136:Fn,137:zn,138:Bn,139:Un,140:Vn,141:jn,142:qn,143:Gn,145:$n,146:Hn,148:Xn,149:Wn,150:Yn,152:Zn,154:Jn,156:Kn,162:Qn,164:er,166:tr,168:nr,169:rr,170:ir,171:or,172:ar,173:sr,175:ur,185:lr,187:cr,244:ye,245:ve,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,422:Ue,426:Ve}),e(hi,[2,132]),{74:pr,78:[1,1599]},e(Hi,[2,457],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),e(Y,[2,575]),e(_r,[2,537]),e(_r,[2,549],{368:1525,394:1600,154:Mo,187:Lo,230:No,299:Po,345:Oo,358:Ro,370:Do,371:Fo,375:zo,376:Bo}),e(fr,[2,551]),{372:[1,1601]},{372:[1,1602]},{2:n,3:244,4:r,5:i,199:1603},e(fr,[2,557],{77:[1,1604]}),{2:n,3:114,4:r,5:i,77:[1,1606],113:251,131:ae,132:se,143:le,152:fe,156:Z,181:me,196:250,200:1607,201:254,261:252,262:253,269:Ke,278:1605,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,304:De},e(fr,[2,561]),{299:[1,1608]},e(fr,[2,563]),e(fr,[2,564]),{337:[1,1609]},{77:[1,1610]},{2:n,3:1611,4:r,5:i},{78:[1,1612],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{78:[1,1613],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{78:[1,1614],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{78:[1,1615],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},e(Y,Wi,{409:1616,76:Yi}),e(Y,[2,594]),{74:Io,78:[1,1617]},{2:n,3:1122,4:r,5:i,132:ft,137:pt,143:et,145:tt,152:dt,433:585,477:1124,480:1618,484:582,495:579,499:581},e(_r,[2,738]),e(Y,[2,496],{354:1619,356:1620,357:1621,4:Wo,247:Yo,345:Zo,358:Jo}),e(Ko,Qo,{3:1268,361:1626,386:1627,362:1628,363:1629,2:n,4:r,5:i,369:ea}),{78:[2,510]},{76:[1,1631]},e(Y,[2,612]),e(Y,[2,1137]),{370:[1,1633],416:[1,1632]},e(Oi,[2,731]),e(Y,t,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,506:95,184:99,3:100,12:1634,2:n,4:r,5:i,53:s,72:u,89:l,124:c,146:h,156:f,189:p,270:d,271:g,292:m,337:v,340:_,341:b,398:x,402:w,403:E,406:S,408:T,410:k,411:C,419:I,420:A,436:M,438:L,439:N,441:P,442:O,443:R,444:D,445:F,449:z,450:B,453:U,454:V,507:j,509:q,510:G,519:$}),e(Y,[2,765]),e(Vo,[2,1185]),e(Y,t,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,506:95,184:99,3:100,12:1635,2:n,4:r,5:i,53:s,72:u,89:l,124:c,146:h,156:f,189:p,270:d,271:g,292:m,337:v,340:_,341:b,398:x,402:w,403:E,406:S,408:T,410:k,411:C,419:I,420:A,436:M,438:L,439:N,441:P,442:O,443:R,444:D,445:F,449:z,450:B,453:U,454:V,507:j,509:q,510:G,519:$}),e(Vo,[2,1187]),{78:[1,1636]},{78:[1,1637],118:jo,282:1638},{78:[1,1639]},{119:[1,1640]},{119:[1,1641]},{78:[1,1642]},{78:[1,1643]},e(Fi,[2,479]),e(Oi,[2,467],{74:Ri}),{2:n,3:244,4:r,5:i,143:et,145:tt,199:1645,433:1644},e(so,[2,706]),e(so,[2,708]),{146:[1,1646]},{99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,311:[1,1647],313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},{341:ta,464:1648},{419:[1,1651],465:[1,1650]},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1652,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(na,[2,270],{87:1653,249:[1,1654],251:[1,1655]}),{119:[1,1656]},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1662,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,233:1657,235:1658,236:ra,237:ia,238:oa,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:1663,4:r,5:i},{2:n,3:1664,4:r,5:i},e(So,[2,207]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1665,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:1011,4:r,5:i,100:1666,111:1440},e(Ho,[2,209]),{2:n,3:1667,4:r,5:i},e(Ho,[2,1100],{220:1668,3:1669,2:n,4:r,5:i}),e(Xo,[2,1099]),e(Ho,[2,212]),{2:n,3:1670,4:r,5:i},{78:[1,1671]},e(Ho,[2,217]),{2:n,3:1672,4:r,5:i},e(Ho,[2,220]),{2:n,3:1673,4:r,5:i},{40:1674,79:75,89:l,184:99,189:p},{40:1675,79:75,89:l,184:99,189:p},e(Co,[2,227]),e(Co,[2,229]),e(Co,[2,231]),e(oi,[2,171]),e(Ao,[2,262]),e(Ao,[2,267]),{244:[1,1676],245:[1,1677]},e(Ao,[2,268],{246:[1,1678]}),e(ji,[2,1087],{153:1015,179:ui,180:li,181:ci}),e(hi,[2,141]),e(fr,[2,550]),e(fr,[2,553]),{376:[1,1679]},e(fr,[2,1130],{397:1680,395:1681,77:aa}),{131:ae,196:1683},e(fr,[2,558]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1684,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(fr,[2,560]),e(fr,[2,562]),{2:n,3:114,4:r,5:i,77:[1,1686],113:251,131:ae,132:se,143:le,152:fe,156:Z,181:me,196:250,200:255,201:254,261:252,262:253,269:Ke,278:1685,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,304:De},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1687,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Y,[2,581]),e(on,[2,352]),e(on,[2,353]),e(on,[2,354]),e(on,[2,355]),e(Y,[2,585]),e(Y,[2,595]),e(_r,[2,737]),e(Y,[2,492]),e(Y,[2,497],{357:1688,4:Wo,247:Yo,345:Zo,358:Jo}),e(sa,[2,499]),e(sa,[2,500]),{124:[1,1689]},{124:[1,1690]},{124:[1,1691]},{74:[1,1692],78:[2,508]},e(ao,[2,536]),e(ao,[2,511]),{187:[1,1700],193:[1,1701],364:1693,365:1694,366:1695,367:1696,368:1697,370:Do,371:[1,1698],372:[1,1702],375:[1,1699]},{2:n,3:1703,4:r,5:i},{40:1704,79:75,89:l,184:99,189:p},{417:[1,1705]},{418:[1,1706]},e(Y,[2,764]),e(Y,[2,766]),e(Ei,[2,540]),e(Ze,[2,334]),{78:[1,1707]},e(Ze,[2,335]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1662,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,233:1708,235:1658,236:ra,237:ia,238:oa,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1376,111:149,113:153,120:1709,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,241:1374,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Ze,[2,320]),e(Ze,[2,322]),{2:n,3:1710,4:r,5:i},e(Y,[2,723],{77:[1,1711]}),{2:n,3:1011,4:r,5:i,111:1065,143:fi,145:pi,147:1712,338:1064,339:1066},{337:qo,340:Go,463:1713},e(so,[2,710]),{77:[1,1715],345:[1,1716],346:[1,1714]},{170:[1,1718],311:[1,1717]},{170:[1,1720],311:[1,1719]},{99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,311:[1,1721],313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},e(si,[2,250],{88:1722,162:[1,1723],168:[1,1725],169:[1,1724]}),{131:ae,196:1726},{131:ae,196:1727},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1376,111:149,113:153,120:1728,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,241:1374,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},e(Eo,[2,248],{234:1729,74:ua,239:[1,1731]}),e(la,[2,242]),{146:[1,1732]},{77:[1,1733]},{77:[1,1734]},e(la,[2,247],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),{78:[2,1054],96:1735,99:[1,1737],102:1736},{99:[1,1738]},e(So,[2,235],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),e(So,[2,236],{74:ro}),e(Ho,[2,210]),e(Ho,[2,211]),e(Ho,[2,1101]),e(Ho,[2,213]),{2:n,3:1739,4:r,5:i,76:[1,1740]},e(Ho,[2,218]),e(Ho,[2,221]),{78:[1,1741]},{78:[1,1742]},e(Ao,[2,263]),e(Ao,[2,264]),e(Ao,[2,269]),{2:n,3:244,4:r,5:i,199:1743},e(fr,[2,555]),e(fr,[2,1131]),{2:n,3:1744,4:r,5:i},{74:[1,1745]},{78:[1,1746],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},e(fr,[2,565]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1747,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{78:[1,1748],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},e(sa,[2,498]),{2:n,3:1749,4:r,5:i},{131:ae,196:1750},{2:n,3:1751,4:r,5:i},e(Ko,Qo,{363:1629,362:1752,369:ea}),e(_r,[2,513]),e(_r,[2,514]),e(_r,[2,515]),e(_r,[2,516]),e(_r,[2,517]),{372:[1,1753]},{372:[1,1754]},e(ca,[2,1124],{384:1755,372:[1,1756]}),{2:n,3:1757,4:r,5:i},{2:n,3:1758,4:r,5:i},e(Ko,[2,519]),e(Y,[2,1134],{413:1759,415:1760,72:Uo}),e(Y,[2,613]),e(Y,[2,614],{369:[1,1761]}),e(Ze,[2,336]),e([78,118],[2,337],{74:ua}),{74:Io,78:[2,338]},e(Y,[2,722]),{2:n,3:1011,4:r,5:i,100:1762,111:1440},e(so,[2,709],{74:$i}),e(so,[2,707]),{77:ii,143:le,144:979,145:Je,152:fe,181:me,201:980,304:De,344:1763,421:190,422:Ue,426:Ve},{2:n,3:1011,4:r,5:i,100:1764,111:1440},{346:[1,1765]},{341:ta,464:1766},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1767,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{341:ta,464:1768},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1769,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{341:ta,464:1770},e(si,[2,72]),{40:1771,79:75,89:l,164:[1,1772],184:99,189:p,240:[1,1773]},{40:1774,79:75,89:l,184:99,189:p,240:[1,1775]},{40:1776,79:75,89:l,184:99,189:p,240:[1,1777]},e(na,[2,273],{250:1778,251:[1,1779]}),{252:1780,253:[2,1102],767:[1,1781]},e($o,[2,260],{74:Io}),e(Eo,[2,241]),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1662,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,235:1782,236:ra,237:ia,238:oa,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1783,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{77:[1,1784]},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1662,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,233:1785,235:1658,236:ra,237:ia,238:oa,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1662,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,233:1786,235:1658,236:ra,237:ia,238:oa,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{78:[1,1787]},{78:[2,1055]},{77:[1,1788]},{77:[1,1789]},e(Ho,[2,214]),{2:n,3:1790,4:r,5:i},{2:n,3:1791,4:r,5:i,76:[1,1792]},{2:n,3:1793,4:r,5:i,76:[1,1794]},e(fr,[2,1128],{396:1795,395:1796,77:aa}),{78:[1,1797]},{131:ae,196:1798},e(fr,[2,559]),{78:[1,1799],99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},e(fr,[2,520]),e(sa,[2,501]),e(sa,[2,502]),e(sa,[2,503]),e(ao,[2,512]),{2:n,3:1801,4:r,5:i,77:[2,1120],373:1800},{77:[1,1802]},{2:n,3:1804,4:r,5:i,77:[2,1126],385:1803},e(ca,[2,1125]),{77:[1,1805]},{77:[1,1806]},e(Y,[2,611]),e(Y,[2,1135]),e(Ko,Qo,{363:1629,362:1807,369:ea}),{74:ro,78:[1,1808]},e(so,[2,716],{74:Ri}),{74:ro,78:[1,1809]},e(so,[2,718]),e(so,[2,711]),{99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,311:[1,1810],313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},e(so,[2,714]),{99:bt,112:xt,114:625,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,311:[1,1811],313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,329:637,332:Qt,333:en,334:tn,335:nn},e(so,[2,712]),e(si,[2,251]),{40:1812,79:75,89:l,184:99,189:p,240:[1,1813]},{40:1814,79:75,89:l,184:99,189:p},e(si,[2,253]),{40:1815,79:75,89:l,184:99,189:p},e(si,[2,254]),{40:1816,79:75,89:l,184:99,189:p},e(na,[2,271]),{131:ae,196:1817},{253:[1,1818]},{253:[2,1103]},e(la,[2,243]),e(Eo,[2,249],{114:625,329:637,99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1662,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,233:1819,235:1658,236:ra,237:ia,238:oa,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{74:ua,78:[1,1820]},{74:ua,78:[1,1821]},e(Bi,[2,1056],{97:1822,104:1823,3:1825,2:n,4:r,5:i,76:ha}),{2:n,3:168,4:r,5:i,56:165,77:oe,94:1828,103:1826,105:1827,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:1011,4:r,5:i,100:1829,111:1440},e(Ho,[2,215]),e(So,[2,173]),{2:n,3:1830,4:r,5:i},e(So,[2,175]),{2:n,3:1831,4:r,5:i},e(fr,[2,554]),e(fr,[2,1129]),e(fr,[2,552]),{78:[1,1832]},e(fr,[2,566]),{77:[1,1833]},{77:[2,1121]},{2:n,3:1835,4:r,5:i,132:fa,374:1834},{77:[1,1837]},{77:[2,1127]},{2:n,3:1011,4:r,5:i,100:1838,111:1440},{2:n,3:1011,4:r,5:i,100:1839,111:1440},e(Y,[2,615]),e(Y,[2,724]),{345:[1,1841],346:[1,1840]},{341:ta,464:1842},{337:qo,340:Go,463:1843},e(si,[2,252]),{40:1844,79:75,89:l,184:99,189:p},e(si,[2,255]),e(si,[2,257]),e(si,[2,258]),e(na,[2,274]),{131:[2,1104],254:1845,647:[1,1846]},{74:ua,78:[1,1847]},e(la,[2,245]),e(la,[2,246]),e(Bi,[2,74]),e(Bi,[2,1057]),{2:n,3:1848,4:r,5:i},e(Bi,[2,78]),{74:[1,1850],78:[1,1849]},e(ao,[2,80]),e(ao,[2,81],{114:625,329:637,76:[1,1851],99:bt,112:xt,115:wt,116:Et,123:St,124:gr,133:kt,136:Ct,138:It,139:At,140:Mt,141:Lt,142:Nt,154:Pt,170:Ot,171:Rt,179:Dt,180:Ft,313:zt,314:Bt,315:Ut,317:Vt,318:jt,319:qt,320:Gt,321:$t,322:Ht,323:Xt,324:Wt,325:Yt,326:Zt,327:Jt,328:Kt,332:Qt,333:en,334:tn,335:nn}),{74:ro,78:[1,1852]},e(So,[2,174]),e(So,[2,176]),e(fr,[2,556]),{2:n,3:1835,4:r,5:i,132:fa,374:1853},{74:pa,78:[1,1854]},e(ao,[2,531]),e(ao,[2,532]),{2:n,3:1011,4:r,5:i,100:1856,111:1440},{74:ro,78:[1,1857]},{74:ro,78:[1,1858]},{77:ii,143:le,144:979,145:Je,152:fe,181:me,201:980,304:De,344:1859,421:190,422:Ue,426:Ve},{346:[1,1860]},e(so,[2,713]),e(so,[2,715]),e(si,[2,256]),{131:ae,196:1861},{131:[2,1105]},e(la,[2,244]),e(Bi,[2,77]),{78:[2,76]},{2:n,3:168,4:r,5:i,56:165,77:oe,94:1828,105:1862,111:149,113:153,131:ae,132:se,137:ue,143:le,144:161,145:ce,149:he,152:fe,154:pe,156:Z,158:167,179:de,180:ge,181:me,196:151,200:147,201:155,202:156,244:ye,245:ve,258:150,259:146,260:148,261:152,262:154,263:157,264:158,265:159,266:162,267:163,269:_e,270:d,274:be,275:xe,277:we,284:Ee,285:Se,286:Te,287:ke,288:Ce,289:Ie,290:Ae,292:J,293:K,294:Q,295:ee,296:Me,297:Le,298:Ne,299:Pe,300:Oe,301:Re,304:De,305:Fe,314:ze,319:Be,421:190,422:Ue,426:Ve},{2:n,3:1863,4:r,5:i},{78:[1,1864]},{74:pa,78:[1,1865]},{376:[1,1866]},{2:n,3:1867,4:r,5:i,132:[1,1868]},{74:ro,78:[1,1869]},e(_r,[2,529]),e(_r,[2,530]),e(so,[2,717],{74:Ri}),e(so,[2,719]),e(da,[2,1106],{255:1870,767:[1,1871]}),e(ao,[2,79]),e(ao,[2,82]),e(Bi,[2,1058],{3:1825,101:1872,104:1873,2:n,4:r,5:i,76:ha}),e(_r,[2,521]),{2:n,3:244,4:r,5:i,199:1874},e(ao,[2,533]),e(ao,[2,534]),e(_r,[2,528]),e(na,[2,1108],{256:1875,417:[1,1876]}),e(da,[2,1107]),e(Bi,[2,75]),e(Bi,[2,1059]),e(ga,[2,1122],{377:1877,379:1878,77:[1,1879]}),e(na,[2,272]),e(na,[2,1109]),e(_r,[2,524],{378:1880,380:1881,230:[1,1882]}),e(ga,[2,1123]),{2:n,3:1835,4:r,5:i,132:fa,374:1883},e(_r,[2,522]),{230:[1,1885],381:1884},{340:[1,1886]},{74:pa,78:[1,1887]},e(_r,[2,525]),{337:[1,1888]},{382:[1,1889]},e(ga,[2,523]),{382:[1,1890]},{383:[1,1891]},{383:[1,1892]},{230:[2,526]},e(_r,[2,527])],defaultActions:{105:[2,6],194:[2,339],195:[2,340],196:[2,341],197:[2,342],198:[2,343],199:[2,344],200:[2,345],201:[2,346],202:[2,347],209:[2,698],591:[2,1145],653:[2,1110],654:[2,1111],710:[2,699],780:[2,1076],781:[2,1077],926:[2,449],927:[2,450],928:[2,451],987:[2,700],1288:[2,1155],1375:[2,1063],1433:[2,1153],1541:[2,510],1736:[2,1055],1781:[2,1103],1801:[2,1121],1804:[2,1127],1846:[2,1105],1849:[2,76],1891:[2,526]},parseError:function(e,t){if(!t.recoverable){var n=new Error(e);throw n.hash=t,n}this.trace(e)},parse:function(e){var t,n=this,r=[0],i=[null],o=[],a=this.table,s="",u=0,l=0,c=0,h=o.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(t in this.yy)Object.prototype.hasOwnProperty.call(this.yy,t)&&(p.yy[t]=this.yy[t]);f.setInput(e,p.yy),p.yy.lexer=f,p.yy.parser=this,void 0===f.yylloc&&(f.yylloc={});var d=f.yylloc;o.push(d);var g=f.options&&f.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,y,v,_,b,x,w,E=function(){var e=f.lex()||1;return"number"!=typeof e&&(e=n.symbols_[e]||e),e},S={};;){if(v=r[r.length-1],void 0===(b=this.defaultActions[v]||(null==m&&(m=E()),a[v]&&a[v][m]))||!b.length||!b[0]){var T,k="",C=function(e){for(var t=r.length-1,n=0;;){if(2..toString()in a[e])return n;if(0===e||t<2)return!1;e=r[t-=2],++n}};if(c)1!==y&&(T=C(v));else{for(_ in T=C(v),x=[],a[v])this.terminals_[_]&&2<_&&x.push("'"+this.terminals_[_]+"'");k=f.showPosition?"Parse error on line "+(u+1)+":\n"+f.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(u+1)+": Unexpected "+(1==m?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(k,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:d,expected:x,recoverable:!1!==T})}if(3==c){if(1===m||1===y)throw new Error(k||"Parsing halted while starting to recover from another error.");l=f.yyleng,s=f.yytext,u=f.yylineno,d=f.yylloc,m=E()}if(!1===T)throw new Error(k||"Parsing halted. No suitable error recovery rule available.");w=T,r.length=r.length-2*w,i.length=i.length-w,o.length=o.length-w,y=2==m?null:m,m=2,v=r[r.length-1],b=a[v]&&a[v][2],c=3}if(b[0]instanceof Array&&1<b.length)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+m);switch(b[0]){case 1:r.push(m),i.push(f.yytext),o.push(f.yylloc),r.push(b[1]),m=null,y?(m=y,y=null):(l=f.yyleng,s=f.yytext,u=f.yylineno,d=f.yylloc,0<c&&c--);break;case 2:if(k=this.productions_[b[1]][1],S.$=i[i.length-k],S._$={first_line:o[o.length-(k||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(k||1)].first_column,last_column:o[o.length-1].last_column},g&&(S._$.range=[o[o.length-(k||1)].range[0],o[o.length-1].range[1]]),void 0!==(v=this.performAction.apply(S,[s,l,u,p.yy,b[1],i,o].concat(h))))return v;k&&(r=r.slice(0,-1*k*2),i=i.slice(0,-1*k),o=o.slice(0,-1*k)),r.push(this.productions_[b[1]][0]),i.push(S.$),o.push(S._$),b=a[r[r.length-2]][r[r.length-1]],r.push(b);break;case 3:return!0}}return!0}},["A","ABSENT","ABSOLUTE","ACCORDING","ACTION","ADA","ADD","ADMIN","AFTER","ALWAYS","ASC","ASSERTION","ASSIGNMENT","ATTRIBUTE","ATTRIBUTES","BASE64","BEFORE","BERNOULLI","BLOCKED","BOM","BREADTH","C","CASCADE","CATALOG","CATALOG_NAME","CHAIN","CHARACTERISTICS","CHARACTERS","CHARACTER_SET_CATALOG","CHARACTER_SET_NAME","CHARACTER_SET_SCHEMA","CLASS_ORIGIN","COBOL","COLLATION","COLLATION_CATALOG","COLLATION_NAME","COLLATION_SCHEMA","COLUMNS","COLUMN_NAME","COMMAND_FUNCTION","COMMAND_FUNCTION_CODE","COMMITTED","CONDITION_NUMBER","CONNECTION","CONNECTION_NAME","CONSTRAINTS","CONSTRAINT_CATALOG","CONSTRAINT_NAME","CONSTRAINT_SCHEMA","CONSTRUCTOR","CONTENT","CONTINUE","CONTROL","CURSOR_NAME","DATA","DATETIME_INTERVAL_CODE","DATETIME_INTERVAL_PRECISION","DB","DEFAULTS","DEFERRABLE","DEFERRED","DEFINED","DEFINER","DEGREE","DEPTH","DERIVED","DESC","DESCRIPTOR","DIAGNOSTICS","DISPATCH","DOCUMENT","DOMAIN","DYNAMIC_FUNCTION","DYNAMIC_FUNCTION_CODE","EMPTY","ENCODING","ENFORCED","EXCLUDE","EXCLUDING","EXPRESSION","FILE","FINAL","FIRST","FLAG","FOLLOWING","FORTRAN","FOUND","FS","G","GENERAL","GENERATED","GO","GOTO","GRANTED","HEX","HIERARCHY","ID","IGNORE","IMMEDIATE","IMMEDIATELY","IMPLEMENTATION","INCLUDING","INCREMENT","INDENT","INITIALLY","INPUT","INSTANCE","INSTANTIABLE","INSTEAD","INTEGRITY","INVOKER","ISOLATION","K","KEY","KEY_MEMBER","KEY_TYPE","LAST","LENGTH","LEVEL","LIBRARY","LIMIT","LINK","LOCATION","LOCATOR","M","MAP","MAPPING","MATCHED","MAXVALUE","MESSAGE_LENGTH","MESSAGE_OCTET_LENGTH","MESSAGE_TEXT","MINVALUE","MORE","MUMPS","NAME","NAMES","NAMESPACE","NESTING","NEXT","NFC","NFD","NFKC","NFKD","NIL","NORMALIZED","NULLABLE","NULLS","NUMBER","OBJECT","OCTETS","OFF","OPTION","OPTIONS","ORDERING","ORDINALITY","OTHERS","OUTPUT","OVERRIDING","P","PAD","PARAMETER_MODE","PARAMETER_NAME","PARAMETER_ORDINAL_POSITION","PARAMETER_SPECIFIC_CATALOG","PARAMETER_SPECIFIC_NAME","PARAMETER_SPECIFIC_SCHEMA","PARTIAL","PASCAL","PASSING","PASSTHROUGH","PATH","PERMISSION","PLACING","PLI","PRECEDING","PRESERVE","PRIOR","PRIVILEGES","PUBLIC","READ","RECOVERY","RELATIVE","REPEATABLE","REQUIRING","RESPECT","RESTART","RESTORE","RESTRICT","RETURNED_CARDINALITY","RETURNED_LENGTH","RETURNED_OCTET_LENGTH","RETURNED_SQLSTATE","RETURNING","ROLE","ROUTINE","ROUTINE_CATALOG","ROUTINE_NAME","ROUTINE_SCHEMA","ROW_COUNT","SCALE","SCHEMA","SCHEMA_NAME","SCOPE_CATALOG","SCOPE_NAME","SCOPE_SCHEMA","SECTION","SECURITY","SELECTIVE","SELF","SEQUENCE","SERIALIZABLE","SERVER","SERVER_NAME","SESSION","SETS","SIMPLE","SIZE","SOURCE","SPACE","SPECIFIC_NAME","STANDALONE","STATE","STATEMENT","STRIP","STRUCTURE","STYLE","SUBCLASS_ORIGIN","T","TABLE_NAME","TEMPORARY","TIES","TOKEN","TOP_LEVEL_COUNT","TRANSACTION","TRANSACTIONS_COMMITTED","TRANSACTIONS_ROLLED_BACK","TRANSACTION_ACTIVE","TRANSFORM","TRANSFORMS","TRIGGER_CATALOG","TRIGGER_NAME","TRIGGER_SCHEMA","TYPE","UNBOUNDED","UNCOMMITTED","UNDER","UNLINK","UNNAMED","UNTYPED","URI","USAGE","USER_DEFINED_TYPE_CATALOG","USER_DEFINED_TYPE_CODE","USER_DEFINED_TYPE_NAME","USER_DEFINED_TYPE_SCHEMA","VALID","VERSION","VIEW","WHITESPACE","WORK","WRAPPER","WRITE","XMLDECLARATION","XMLSCHEMA","YES","ZONE"]);function ya(){this.yy={}}return e.parseError=function(e,t){if(!(t.expected&&-1<t.expected.indexOf("'LITERAL'")&&/[a-zA-Z_][a-zA-Z_0-9]*/.test(t.token)&&-1<ma.indexOf(t.token)))throw new SyntaxError(e)},_r={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);return this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1),e=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),(n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t)return t;if(this._backtrack){for(var i in r)this[i]=r[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!t||n[0].length>t[0].length))if(t=n,r=o,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,i[o])))return e;if(!this._backtrack)return!1;t=!1}else if(!this.options.flex)break;return t?!1!==(e=this.test_match(t,i[r]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(e){return 0<=(e=this.conditionStack.length-1-Math.abs(e||0))?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(e,t,n){switch(n){case 0:return 270;case 1:return 304;case 2:return 422;case 3:return 301;case 4:case 5:return 5;case 6:case 7:return 298;case 8:case 9:return 132;case 10:return;case 11:break;case 12:return 318;case 13:return 321;case 14:return t.yytext="VALUE",89;case 15:return t.yytext="VALUE",189;case 16:return t.yytext="ROW",189;case 17:return t.yytext="COLUMN",189;case 18:return t.yytext="MATRIX",189;case 19:return t.yytext="INDEX",189;case 20:return t.yytext="RECORDSET",189;case 21:return t.yytext="TEXT",189;case 22:return t.yytext="SELECT",189;case 23:return 522;case 24:return 383;case 25:return 404;case 26:return 517;case 27:return 289;case 28:case 29:return 273;case 30:return 164;case 31:return 402;case 32:return 170;case 33:return 229;case 34:return 166;case 35:return 207;case 36:return 290;case 37:return 76;case 38:return 420;case 39:return 246;case 40:return 406;case 41:return 358;case 42:return 288;case 43:return 516;case 44:return 439;case 45:return 332;case 46:return 443;case 47:return 333;case 48:return 317;case 49:return 119;case 50:return 112;case 51:return 317;case 52:return 112;case 53:return 317;case 54:return 112;case 55:return 317;case 56:return 510;case 57:return 305;case 58:return 275;case 59:return 370;case 60:return 130;case 61:return"CLOSE";case 62:return 247;case 63:case 64:return 190;case 65:return 436;case 66:return 369;case 67:return 472;case 68:return 442;case 69:return 277;case 70:return 240;case 71:return 285;case 72:return 271;case 73:return 206;case 74:return 238;case 75:return 269;case 76:return"CURSOR";case 77:return 407;case 78:return 293;case 79:return 294;case 80:return 450;case 81:return 345;case 82:return 340;case 83:return"DELETED";case 84:return 246;case 85:return 408;case 86:return 185;case 87:return 398;case 88:return 449;case 89:return 135;case 90:return 308;case 91:return 391;case 92:return 312;case 93:return 316;case 94:return 169;case 95:case 96:return 510;case 97:return 300;case 98:return 14;case 99:return 297;case 100:return 253;case 101:return 244;case 102:return 95;case 103:return 375;case 104:return 183;case 105:return 227;case 106:return 272;case 107:return 315;case 108:return 604;case 109:return 474;case 110:return 232;case 111:return 236;case 112:return 239;case 113:return 156;case 114:return 358;case 115:return 334;case 116:return 99;case 117:return 193;case 118:return 212;case 119:return 224;case 120:return 518;case 121:return 341;case 122:return 213;case 123:return 168;case 124:return 295;case 125:return 198;case 126:return 223;case 127:return 372;case 128:return 245;case 129:return"LET";case 130:return 225;case 131:return 112;case 132:return 249;case 133:return 462;case 134:return 191;case 135:return 287;case 136:return 392;case 137:return 286;case 138:return 454;case 139:return 169;case 140:return 405;case 141:return 222;case 142:return 647;case 143:return 274;case 144:return 248;case 145:return 382;case 146:return 154;case 147:return 299;case 148:return 243;case 149:return 435;case 150:return 230;case 151:return 417;case 152:return 129;case 153:return 251;case 154:return"OPEN";case 155:return 418;case 156:return 171;case 157:return 118;case 158:return 208;case 159:return 280;case 160:return 172;case 161:return 283;case 162:return 766;case 163:return 93;case 164:return 16;case 165:return 371;case 166:return 444;case 167:return 679;case 168:return 15;case 169:return 416;case 170:return 194;case 171:return"REDUCE";case 172:return 376;case 173:return 313;case 174:return 519;case 175:return 683;case 176:return 107;case 177:return 403;case 178:return 175;case 179:return 292;case 180:return 445;case 181:return 688;case 182:case 183:return 173;case 184:return 226;case 185:return 438;case 186:return 237;case 187:return 150;case 188:return 767;case 189:return 407;case 190:return 89;case 191:return 228;case 192:case 193:return 146;case 194:return 411;case 195:return 336;case 196:return 419;case 197:return"STRATEGY";case 198:return"STORE";case 199:return 284;case 200:case 201:return 355;case 202:return 465;case 203:case 204:return 359;case 205:return 192;case 206:return 311;case 207:return"TIMEOUT";case 208:return 148;case 209:return 195;case 210:case 211:return 437;case 212:return 511;case 213:return 296;case 214:return 453;case 215:return 162;case 216:return 187;case 217:return 98;case 218:return 337;case 219:return 410;case 220:return 231;case 221:return 149;case 222:return 346;case 223:return 134;case 224:return 412;case 225:return 310;case 226:return 128;case 227:return 441;case 228:return 72;case 229:return 437;case 230:case 231:return 131;case 232:return 115;case 233:return 137;case 234:return 179;case 235:return 319;case 236:return 180;case 237:return 133;case 238:return 138;case 239:return 328;case 240:return 325;case 241:return 327;case 242:return 324;case 243:return 322;case 244:return 320;case 245:return 321;case 246:return 142;case 247:return 141;case 248:return 139;case 249:return 323;case 250:return 326;case 251:return 140;case 252:return 124;case 253:return 326;case 254:return 77;case 255:return 78;case 256:return 145;case 257:return 426;case 258:return 428;case 259:return 302;case 260:return 507;case 261:return 509;case 262:return 122;case 263:return 116;case 264:return 74;case 265:return 335;case 266:return 152;case 267:return 765;case 268:return 143;case 269:return 181;case 270:return 136;case 271:return 123;case 272:return 314;case 273:return 4;case 274:return 10;case 275:return"INVALID"}},rules:[/^(?:``([^\`])+``)/i,/^(?:\[\?\])/i,/^(?:@\[)/i,/^(?:ARRAY\[)/i,/^(?:\[([^\]])*?\])/i,/^(?:`([^\`])*?`)/i,/^(?:N(['](\\.|[^']|\\')*?['])+)/i,/^(?:X(['](\\.|[^']|\\')*?['])+)/i,/^(?:(['](\\.|[^']|\\')*?['])+)/i,/^(?:(["](\\.|[^"]|\\")*?["])+)/i,/^(?:--(.*?)($|\r\n|\r|\n))/i,/^(?:\s+)/i,/^(?:\|\|)/i,/^(?:\|)/i,/^(?:VALUE\s+OF\s+SEARCH\b)/i,/^(?:VALUE\s+OF\s+SELECT\b)/i,/^(?:ROW\s+OF\s+SELECT\b)/i,/^(?:COLUMN\s+OF\s+SELECT\b)/i,/^(?:MATRIX\s+OF\s+SELECT\b)/i,/^(?:INDEX\s+OF\s+SELECT\b)/i,/^(?:RECORDSET\s+OF\s+SELECT\b)/i,/^(?:TEXT\s+OF\s+SELECT\b)/i,/^(?:SELECT\b)/i,/^(?:ABSOLUTE\b)/i,/^(?:ACTION\b)/i,/^(?:ADD\b)/i,/^(?:AFTER\b)/i,/^(?:AGGR\b)/i,/^(?:AGGREGATE\b)/i,/^(?:AGGREGATOR\b)/i,/^(?:ALL\b)/i,/^(?:ALTER\b)/i,/^(?:AND\b)/i,/^(?:ANTI\b)/i,/^(?:ANY\b)/i,/^(?:APPLY\b)/i,/^(?:ARRAY\b)/i,/^(?:AS\b)/i,/^(?:ASSERT\b)/i,/^(?:ASC\b)/i,/^(?:ATTACH\b)/i,/^(?:AUTO(_)?INCREMENT\b)/i,/^(?:AVG\b)/i,/^(?:BEFORE\b)/i,/^(?:BEGIN\b)/i,/^(?:BETWEEN\b)/i,/^(?:BREAK\b)/i,/^(?:NOT\s+BETWEEN\b)/i,/^(?:NOT\s+LIKE\b)/i,/^(?:BY\b)/i,/^(?:~~\*)/i,/^(?:!~~\*)/i,/^(?:~~)/i,/^(?:!~~)/i,/^(?:ILIKE\b)/i,/^(?:NOT\s+ILIKE\b)/i,/^(?:CALL\b)/i,/^(?:CASE\b)/i,/^(?:CAST\b)/i,/^(?:CHECK\b)/i,/^(?:CLASS\b)/i,/^(?:CLOSE\b)/i,/^(?:COLLATE\b)/i,/^(?:COLUMN\b)/i,/^(?:COLUMNS\b)/i,/^(?:COMMIT\b)/i,/^(?:CONSTRAINT\b)/i,/^(?:CONTENT\b)/i,/^(?:CONTINUE\b)/i,/^(?:CONVERT\b)/i,/^(?:CORRESPONDING\b)/i,/^(?:COUNT\b)/i,/^(?:CREATE\b)/i,/^(?:CROSS\b)/i,/^(?:CUBE\b)/i,/^(?:CURRENT_TIMESTAMP\b)/i,/^(?:CURSOR\b)/i,/^(?:DATABASE(S)?)/i,/^(?:DATEADD\b)/i,/^(?:DATEDIFF\b)/i,/^(?:DECLARE\b)/i,/^(?:DEFAULT\b)/i,/^(?:DELETE\b)/i,/^(?:DELETED\b)/i,/^(?:DESC\b)/i,/^(?:DETACH\b)/i,/^(?:DISTINCT\b)/i,/^(?:DROP\b)/i,/^(?:ECHO\b)/i,/^(?:EDGE\b)/i,/^(?:END\b)/i,/^(?:ENUM\b)/i,/^(?:ELSE\b)/i,/^(?:ESCAPE\b)/i,/^(?:EXCEPT\b)/i,/^(?:EXEC\b)/i,/^(?:EXECUTE\b)/i,/^(?:EXISTS\b)/i,/^(?:EXPLAIN\b)/i,/^(?:FALSE\b)/i,/^(?:FETCH\b)/i,/^(?:FIRST\b)/i,/^(?:FOR\b)/i,/^(?:FOREIGN\b)/i,/^(?:FROM\b)/i,/^(?:FULL\b)/i,/^(?:FUNCTION\b)/i,/^(?:GLOB\b)/i,/^(?:GO\b)/i,/^(?:GRAPH\b)/i,/^(?:GROUP\b)/i,/^(?:GROUPING\b)/i,/^(?:HAVING\b)/i,/^(?:IF\b)/i,/^(?:IDENTITY\b)/i,/^(?:IS\b)/i,/^(?:IN\b)/i,/^(?:INDEX\b)/i,/^(?:INDEXED\b)/i,/^(?:INNER\b)/i,/^(?:INSTEAD\b)/i,/^(?:INSERT\b)/i,/^(?:INSERTED\b)/i,/^(?:INTERSECT\b)/i,/^(?:INTERVAL\b)/i,/^(?:INTO\b)/i,/^(?:JOIN\b)/i,/^(?:KEY\b)/i,/^(?:LAST\b)/i,/^(?:LET\b)/i,/^(?:LEFT\b)/i,/^(?:LIKE\b)/i,/^(?:LIMIT\b)/i,/^(?:MATCHED\b)/i,/^(?:MATRIX\b)/i,/^(?:MAX(\s+)?(?=\())/i,/^(?:MAX(\s+)?(?=(,|\))))/i,/^(?:MIN(\s+)?(?=\())/i,/^(?:MERGE\b)/i,/^(?:MINUS\b)/i,/^(?:MODIFY\b)/i,/^(?:NATURAL\b)/i,/^(?:NEXT\b)/i,/^(?:NEW\b)/i,/^(?:NOCASE\b)/i,/^(?:NO\b)/i,/^(?:NOT\b)/i,/^(?:NULL\b)/i,/^(?:NULLS\b)/i,/^(?:OFF\b)/i,/^(?:ON\b)/i,/^(?:ONLY\b)/i,/^(?:OF\b)/i,/^(?:OFFSET\b)/i,/^(?:OPEN\b)/i,/^(?:OPTION\b)/i,/^(?:OR\b)/i,/^(?:ORDER\b)/i,/^(?:OUTER\b)/i,/^(?:OVER\b)/i,/^(?:PATH\b)/i,/^(?:PARTITION\b)/i,/^(?:PERCENT\b)/i,/^(?:PIVOT\b)/i,/^(?:PLAN\b)/i,/^(?:PRIMARY\b)/i,/^(?:PRINT\b)/i,/^(?:PRIOR\b)/i,/^(?:QUERY\b)/i,/^(?:READ\b)/i,/^(?:RECORDSET\b)/i,/^(?:REDUCE\b)/i,/^(?:REFERENCES\b)/i,/^(?:REGEXP\b)/i,/^(?:REINDEX\b)/i,/^(?:RELATIVE\b)/i,/^(?:REMOVE\b)/i,/^(?:RENAME\b)/i,/^(?:REPEAT\b)/i,/^(?:REPLACE\b)/i,/^(?:REQUIRE\b)/i,/^(?:RESTORE\b)/i,/^(?:RETURN\b)/i,/^(?:RETURNS\b)/i,/^(?:RIGHT\b)/i,/^(?:ROLLBACK\b)/i,/^(?:ROLLUP\b)/i,/^(?:ROW\b)/i,/^(?:ROWS\b)/i,/^(?:SCHEMA(S)?)/i,/^(?:SEARCH\b)/i,/^(?:SEMI\b)/i,/^(?:SET\b)/i,/^(?:SETS\b)/i,/^(?:SHOW\b)/i,/^(?:SOME\b)/i,/^(?:SOURCE\b)/i,/^(?:STRATEGY\b)/i,/^(?:STORE\b)/i,/^(?:SUM\b)/i,/^(?:TABLE\b)/i,/^(?:TABLES\b)/i,/^(?:TARGET\b)/i,/^(?:TEMP\b)/i,/^(?:TEMPORARY\b)/i,/^(?:TEXTSTRING\b)/i,/^(?:THEN\b)/i,/^(?:TIMEOUT\b)/i,/^(?:TO\b)/i,/^(?:TOP\b)/i,/^(?:TRAN\b)/i,/^(?:TRANSACTION\b)/i,/^(?:TRIGGER\b)/i,/^(?:TRUE\b)/i,/^(?:TRUNCATE\b)/i,/^(?:UNION\b)/i,/^(?:UNIQUE\b)/i,/^(?:UNPIVOT\b)/i,/^(?:UPDATE\b)/i,/^(?:USE\b)/i,/^(?:USING\b)/i,/^(?:VALUE\b)/i,/^(?:VALUES\b)/i,/^(?:VERTEX\b)/i,/^(?:VIEW\b)/i,/^(?:WHEN\b)/i,/^(?:WHERE\b)/i,/^(?:WHILE\b)/i,/^(?:WITH\b)/i,/^(?:WORK\b)/i,/^(?:(\d*[.])?\d+[eE]\d+)/i,/^(?:(\d*[.])?\d+)/i,/^(?:->)/i,/^(?:#)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:\*)/i,/^(?:\/)/i,/^(?:%)/i,/^(?:!===)/i,/^(?:===)/i,/^(?:!==)/i,/^(?:==)/i,/^(?:>=)/i,/^(?:&)/i,/^(?:\|)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:<>)/i,/^(?:<)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:\()/i,/^(?:\))/i,/^(?:@)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:\])/i,/^(?::-)/i,/^(?:\?-)/i,/^(?:\.\.)/i,/^(?:\.)/i,/^(?:,)/i,/^(?:::)/i,/^(?::)/i,/^(?:;)/i,/^(?:\$)/i,/^(?:\?)/i,/^(?:!)/i,/^(?:\^)/i,/^(?:~)/i,/^(?:[0-9]*[a-zA-Z_]+[a-zA-Z_0-9]*)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275],inclusive:!0}}},e.lexer=_r,new((ya.prototype=e).Parser=ya)}();void 0!==a&&"undefined"!=typeof t&&(t.parser=u,t.Parser=u.Parser,t.parse=function(){return u.parse.apply(u,arguments)},t.main=function(n){return n[1]||(console.log("Usage: "+n[0]+" FILE"),e.exit(1)),n=a().readFileSync(a().normalize(n[1]),"utf8"),t.parser.parse(n)},a.main===r&&t.main(e.argv.slice(1))),o.prettyflag=!1,o.pretty=function(e,t){var n=o.prettyflag;return o.prettyflag=!t,e=o.parse(e).toString(),o.prettyflag=n,e};var l=o.utils={};function c(e){return"(y="+e+",y===y?y:undefined)"}function h(e,t){return"(y="+e+',typeof y=="undefined"?undefined:'+t+")"}function f(){return!0}function p(){}function d(e){return e[0]===String.fromCharCode(65279)&&(e=e.substr(1)),e}var g=l.escapeq=function(e){return(""+e).replace(/["'\\\n\r\u2028\u2029]/g,(function(e){switch(e){case'"':case"'":case"\\":return"\\"+e;case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}))},m=l.undoubleq=function(e){return e.replace(/(\')/g,"''")},y=l.doubleq=function(e){return e.replace(/(\'\')/g,"\\'")};l.doubleqq=function(e){return e.replace(/\'/g,"'")},l.global="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof i?i:Function("return this")(),l.isNativeFunction=function(e){return"function"==typeof e&&!!~e.toString().indexOf("[native code]")},l.isWebWorker=function(){try{var e=l.global.importScripts;return l.isNativeFunction(e)}catch(e){return!1}}(),l.isNode=function(){try{return l.isNativeFunction(l.global.process.reallyExit)}catch(p){return!1}}(),l.isBrowser=function(){try{return l.isNativeFunction(l.global.location.reload)}catch(p){return!1}}(),l.isBrowserify=l.isBrowser&&"undefined"!=typeof e&&e.browser,l.isRequireJS=l.isBrowser&&"function"==typeof a.specified,l.isMeteor="undefined"!=typeof Meteor&&Meteor.release,l.isMeteorClient=l.isMeteorClient=l.isMeteor&&Meteor.isClient,l.isMeteorServer=l.isMeteor&&Meteor.isServer,l.isCordova="object"==typeof cordova,l.isReactNative=!1,l.hasIndexedDB=!!l.global.indexedDB,l.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)};var v=l.loadFile=function(e,t,n,r){var i,o;l.isNode||l.isMeteorServer||(l.isCordova?l.global.requestFileSystem(LocalFileSystem.PERSISTENT,0,(function(t){t.root.getFile(e,{create:!1},(function(e){e.file((function(e){var t=new FileReader;t.onloadend=function(e){n(d(this.result))},t.readAsText(e)}))}))})):"string"==typeof e?"#"===e.substr(0,1)&&"undefined"!=typeof document?(o=document.querySelector(e).textContent,n(o)):((i=new XMLHttpRequest).onreadystatechange=function(){if(4===i.readyState)if(200===i.status)n&&n(d(i.responseText));else if(r)return r(i)},i.open("GET",e,t),i.responseType="text",i.send()):e instanceof Event&&(o=e.target.files,t=new FileReader,o[0].name,t.onload=function(e){e=e.target.result,n(d(e))},t.readAsText(o[0])))};function _(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("msie")&&parseInt(e.split("msie")[1])}l.loadBinaryFile=function(e,t,n,r){var i,o;l.isNode||l.isMeteorServer||("string"==typeof e?((i=new XMLHttpRequest).open("GET",e,t),i.responseType="arraybuffer",i.onload=function(){for(var e=new Uint8Array(i.response),t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);n(t.join(""))},i.send()):e instanceof Event?(o=e.target.files,t=new FileReader,o[0].name,t.onload=function(e){e=e.target.result,n(e)},t.readAsArrayBuffer(o[0])):e instanceof Blob&&n(e))},l.removeFile=function(e,t){if(!l.isNode)throw new Error("You can remove files only in Node.js and Apache Cordova")},l.deleteFile=function(e,t){},l.autoExtFilename=function(e,t,n){return n=n||{},"string"!=typeof e||e.match(/^[A-z]+:\/\/|\n|\..{2,4}$/)||0===n.autoExt||!1===n.autoExt?e:e+"."+t},l.fileExists=function(e,t){if(!l.isNode)throw new Error("You can use exists() only in Node.js or Apach Cordova")},l.saveFile=function(e,t,n,r){var i,a,s=1;return void 0===e?(s=t,n&&(s=n(s))):l.isNode||(9===_()?(i=(i=(i=t.replace(/\r\n/g,"&#A;&#D;")).replace(/\n/g,"&#D;")).replace(/\t/g,"&#9;"),(a=l.global.open("about:blank","_blank")).document.write(i),a.document.close(),a.document.execCommand("SaveAs",!1,e),a.close()):(a={disableAutoBom:!1},o.utils.extend(a,r),t=new Blob([t],{type:"text/plain;charset=utf-8"}),ue(t,e,a.disableAutoBom),n&&(s=n(s)))),s};var b=l.hash=function(e){for(var t=2166136261,n=e.length;n;)t^=e.charCodeAt(--n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t},x=l.arrayUnion=function(e,t){var n=t.slice(0);return e.forEach((function(e){n.indexOf(e)<0&&n.push(e)})),n},w=l.arrayDiff=function(e,t){return e.filter((function(e){return t.indexOf(e)<0}))},E=l.arrayIntersect=function(e,t){var n=[];return e.forEach((function(e){var r=!1;t.forEach((function(t){r=r||e===t})),r&&n.push(e)})),n},S=l.arrayUnionDeep=function(e,t){var n=t.slice(0);return e.forEach((function(e){var t=!1;n.forEach((function(n){t=t||I(e,n)})),t||n.push(e)})),n},T=l.arrayExceptDeep=function(e,t){var n=[];return e.forEach((function(e){var r=!1;t.forEach((function(t){r=r||I(e,t)})),r||n.push(e)})),n},k=l.arrayIntersectDeep=function(e,t){var n=[];return e.forEach((function(e){var r=!1;t.forEach((function(t){r=r||I(e,t,!0)})),r&&n.push(e)})),n},C=l.cloneDeep=function e(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t);if(t instanceof String)return t.toString();if(t instanceof Number)return+t;var n,r=t.constructor();for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r},I=l.deepEqual=function(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!I(e[n],t[n]))return!1;return!0},A=l.distinctArray=function(e){for(var t={},n=0,r=e.length;n<r;n++)t["object"==typeof e[n]?Object.keys(e[n]).sort().map((function(t){return t+"`"+e[n][t]})).join("`"):e[n]]=e[n];var i,o=[];for(i in t)o.push(t[i]);return o},M=l.extend=function(e,t){for(var n in e=e||{},t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},L=l.flatArray=function(e){if(!e||0===e.length)return[];if("object"==typeof e&&e instanceof o.Recordset)return e.data.map((function(t){return t[e.columns[0].columnid]}));var t=Object.keys(e[0])[0];return void 0===t?[]:e.map((function(e){return e[t]}))};function N(){var e=o.private.externalXlsxLib;if(e)return e;if(l.isNode||l.isBrowserify||l.isMeteorServer||(e=l.global.XLSX||null),null===e)throw new Error("Please include the xlsx.js library");return e}function P(e,t,n,r){return new l.global.Promise((function(i,a){o(e,t,(function(e,t){t?a(t):(n&&r&&!1!==o.options.progress&&o.options.progress(n,r),i(e))}))}))}l.arrayOfArrays=function(e){return e.map((function(e){var t,n=[];for(t in e)n.push(e[t]);return n}))},Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),l.xlsnc=function(e){var t=String.fromCharCode(65+e%26);return 26<=e&&(e=(e/26|0)-1,t=String.fromCharCode(65+e%26)+t,26<e&&(e=(e/26|0)-1,t=String.fromCharCode(65+e%26)+t)),t},l.xlscn=function(e){var t=e.charCodeAt(0)-65;return 1<e.length&&(t=26*(t+1)+e.charCodeAt(1)-65,2<e.length&&(t=26*(t+1)+e.charCodeAt(2)-65)),t},l.domEmptyChildren=function(e){for(var t=e.childNodes.length;t--;)e.removeChild(e.lastChild)},l.like=function(e,t,n){n=n||"";for(var r=0,i="^";r<e.length;){var o=e[r],a="";r<e.length-1&&(a=e[r+1]),o===n?(i+="\\"+a,r++):"["===o&&"^"===a?(i+="[^",r++):"["===o||"]"===o?i+=o:"%"===o?i+=".*":"_"===o?i+=".":-1<"/.*+?|(){}".indexOf(o)?i+="\\"+o:i+=o,r++}return i+="$",-1<(""+(t||"")).toUpperCase().search(RegExp(i.toUpperCase()))},l.glob=function(e,t){for(var n=0,r="^";n<t.length;){var i=t[n],o="";n<t.length-1&&(o=t[n+1]),"["===i&&"^"===o?(r+="[^",n++):"["===i||"]"===i?r+=i:"*"===i?r+=".*":"?"===i?r+=".":-1<"/.*+?|(){}".indexOf(i)?r+="\\"+i:r+=i,n++}return r+="$",-1<(""+(e||"")).toUpperCase().search(RegExp(r.toUpperCase()))},l.findAlaSQLPath=function(){if(l.isWebWorker)return"";if(l.isMeteorClient)return"/packages/dist/";if(l.isMeteorServer)return"assets/packages/dist/";if(l.isNode)return"";if(l.isBrowser)for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){if("alasql-worker.js"===e[t].src.substr(-16).toLowerCase())return e[t].src.substr(0,e[t].src.length-16);if("alasql-worker.min.js"===e[t].src.substr(-20).toLowerCase())return e[t].src.substr(0,e[t].src.length-20);if("alasql.js"===e[t].src.substr(-9).toLowerCase())return e[t].src.substr(0,e[t].src.length-9);if("alasql.min.js"===e[t].src.substr(-13).toLowerCase())return e[t].src.substr(0,e[t].src.length-13)}return""},o.path=o.utils.findAlaSQLPath(),o.utils.uncomment=function(e){for(var t,n=!1,r=!1,i=!1,o=0,a=(e=("__"+e+"__").split("")).length;o<a;o++){var s="\\"!==e[o-1]||"\\"===e[o-2];n?e[o]===t&&s&&(n=!1):r?"*"===e[o]&&"/"===e[o+1]?(e[o]=e[o+1]="",r=!1,o++):e[o]="":i?("\n"!==e[o+1]&&"\r"!==e[o+1]||(i=!1),e[o]=""):'"'===e[o]||"'"===e[o]?(n=!0,t=e[o]):"["===e[o]&&"@"!==e[o-1]?(n=!0,t="]"):"/"===e[o]&&"*"===e[o+1]&&(r=!(e[o]=""))}return e.join("").slice(2,-2)},o.parser=u,o.parser.parseError=function(e,t){throw new Error("Have you used a reserved keyword without `escaping` it?\n"+e)},o.parse=function(e){return u.parse(o.utils.uncomment(e))},o.engines={},o.databases={},o.databasenum=0,o.options={},o.options.errorlog=!1,o.options.valueof=!1,o.options.dropifnotexists=!1,o.options.datetimeformat="sql",o.options.casesensitive=!0,o.options.logtarget="output",o.options.logprompt=!0,o.options.progress=!1,o.options.modifier=void 0,o.options.columnlookup=10,o.options.autovertex=!0,o.options.usedbo=!0,o.options.autocommit=!0,o.options.cache=!0,o.options.tsql=!0,o.options.mysql=!0,o.options.postgres=!0,o.options.oracle=!0,o.options.sqlite=!0,o.options.orientdb=!0,o.options.nocount=!1,o.options.nan=!1,o.options.joinstar="overwrite",o.vars={},o.declares={},o.prompthistory=[],o.plugins={},o.from={},o.into={},o.fn={},o.aggr={},o.busy=0,o.MAXSQLCACHESIZE=1e4,o.DEFAULTDATABASEID="alasql",o.lastid=0,o.buffer={},o.private={externalXlsxLib:null},o.setXLSX=function(e){o.private.externalXlsxLib=e},o.use=function(e){if(e=e||o.DEFAULTDATABASEID,o.useid!==e){if(void 0===o.databases[e])throw Error("Database does not exist: "+e);o.useid=e,e=o.databases[o.useid],o.tables=e.tables,e.resetSqlCache(),o.options.usedbo&&(o.databases.dbo=e)}},o.autoval=function(e,t,n,r){if(!(r=r?o.databases[r]:o.databases[o.useid]).tables[e])throw new Error("Tablename not found: "+e);if(!r.tables[e].identities[t])throw new Error("Colname not found: "+t);return n?r.tables[e].identities[t].value||null:r.tables[e].identities[t].value-r.tables[e].identities[t].step||null},o.exec=function(e,t,n,r){if("function"==typeof t&&(r=n,n=t,t={}),delete o.error,t=t||{},!o.options.errorlog)return o.dexec(o.useid,e,t,n,r);try{return o.dexec(o.useid,e,t,n,r)}catch(e){o.error=e,n&&n(null,o.error)}},o.dexec=function(e,t,n,r,i){var a=o.databases[e];if(o.options.cache){var s=b(t);if((u=a.sqlCache[s])&&a.dbversion===u.dbversion)return u(n,r)}var u,l=o.parse(t);if(l.statements)return 0===l.statements.length?0:1===l.statements.length?l.statements[0].compile?(u=l.statements[0].compile(e,n))?(u.sql=t,u.dbversion=a.dbversion,o.options.cache&&(a.sqlCacheSize>o.MAXSQLCACHESIZE&&a.resetSqlCache(),a.sqlCacheSize++,a.sqlCache[s]=u),o.res=u(n,r,i)):void 0:(o.precompile(l.statements[0],o.useid,n),o.res=l.statements[0].execute(e,n,r,i)):r?void o.adrun(e,l,n,r,i):o.drun(e,l,n,r,i)},o.drun=function(e,t,n,r,i){var a=o.useid;a!==e&&o.use(e);for(var s,u=[],l=0,c=t.statements.length;l<c;l++)t.statements[l]&&(t.statements[l].compile?(s=t.statements[l].compile(o.useid),u.push(o.res=s(n,null,i))):(o.precompile(t.statements[l],o.useid,n),u.push(o.res=t.statements[l].execute(o.useid,n))));return a!==e&&o.use(a),r&&r(u),o.res=u},o.adrun=function(e,t,n,r,i){var a=0,s=t.statements.length;!1!==o.options.progress&&o.options.progress(s,a++);var u=o.useid;u!==e&&o.use(e);var l=[];!function c(h){void 0!==h&&l.push(h),(h=t.statements.shift())?(h.compile?h.compile(o.useid)(n,c,i):(o.precompile(t.statements[0],o.useid,n),h.execute(o.useid,n,c)),!1!==o.options.progress&&o.options.progress(s,a++)):(u!==e&&o.use(u),r(l))}()},o.compile=function(e,t){if(t=t||o.useid,1!==(e=o.parse(e)).statements.length)throw new Error("Cannot compile, because number of statements in SQL is not equal to 1");var n=e.statements[0].compile(t);return n.promise=function(e){return new Promise((function(t,r){n(e,(function(e,n){n?r(n):t(e)}))}))},n},l.global.Promise||l.isNode||function(){function o(e){return"function"==typeof e}function u(){return function(){setTimeout(l,1)}}function l(){for(var e=0;e<N;e+=2)(0,F[e])(F[e+1]),F[e]=void 0,F[e+1]=void 0;N=0}function c(){}function h(e){try{return e.then}catch(e){return $.error=e,$}}function f(e,t,n){P((function(e){var r=!1,i=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,(t!==n?d:m)(e,n))}),(function(t){r||(r=!0,y(e,t))}),e._label);!r&&i&&(r=!0,y(e,i))}),e)}function p(e,t,n){var r,i;t.constructor===e.constructor&&n===B&&constructor.resolve===U?(r=e,(i=t)._state===q?m(r,i._result):i._state===G?y(r,i._result):v(i,void 0,(function(e){d(r,e)}),(function(e){y(r,e)}))):n===$?y(e,$.error):void 0!==n&&o(n)?f(e,t,n):m(e,t)}function d(e,t){var n;e===t?y(e,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=t)||"object"==typeof n&&null!==n?p(e,t,h(t)):m(e,t)}function g(e){e._onerror&&e._onerror(e._result),_(e)}function m(e,t){e._state===j&&(e._result=t,e._state=q,0!==e._subscribers.length&&P(_,e))}function y(e,t){e._state===j&&(e._state=G,e._result=t,P(g,e))}function v(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+q]=n,i[o+G]=r,0===o&&e._state&&P(_,e)}function _(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?x(n,r,i,o):i(o);e._subscribers.length=0}}function b(){this.error=null}function x(e,t,n,r){var i,a,s,u,l=o(n);if(l){if((i=function(e,t){try{return e(t)}catch(e){return H.error=e,H}}(n,r))===H?(u=!0,a=i.error,i=null):s=!0,t===i)return y(t,new TypeError("A promises callback cannot return that same promise.")),0}else i=r,s=!0;t._state!==j||(l&&s?d(t,i):u?y(t,a):e===q?m(t,i):e===G&&y(t,i))}function w(e){e[V]=X++,e._state=void 0,e._result=void 0,e._subscribers=[]}function E(e){this[V]=X++,this._result=this._state=void 0,this._subscribers=[],c!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof E?function(e,t){try{t((function(t){d(e,t)}),(function(t){y(e,t)}))}catch(t){y(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function S(e,t){this._instanceConstructor=e,this.promise=new e(c),this.promise[V]||w(this.promise),Array.isArray(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?m(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&m(this.promise,this._result))):y(this.promise,new Error("Array Methods must be provided an Array"))}var T,k,C,I,A,M,L=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},N=0,P=function(e,t){F[N]=e,F[N+1]=t,2===(N+=2)&&(k?k(l):z())},O=(D=(W="undefined"!=typeof window?window:void 0)||{}).MutationObserver||D.WebKitMutationObserver,R="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),D="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,F=new Array(1e3),z=R?function(){e.nextTick(l)}:O?(I=0,A=new O(l),M=document.createTextNode(""),A.observe(M,{characterData:!0}),function(){M.data=I=++I%2}):D?((C=new MessageChannel).port1.onmessage=l,function(){C.port2.postMessage(0)}):(void 0===W?function(){try{var e=a();return T=e.runOnLoop||e.runOnContext,function(){T(l)}}catch(e){return u()}}:u)(),B=function(e,t){var n=this,r=new this.constructor(c);void 0===r[V]&&w(r);var i,o=n._state;return o?(i=arguments[o-1],P((function(){x(o,r,i,n._result)}))):v(n,r,e,t),r},U=function(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(c);return d(t,e),t},V=Math.random().toString(36).substring(16),j=void 0,q=1,G=2,$=new b,H=new b,X=0,W=(D=function(e){var t=this;return new t(L(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){t(new TypeError("You must pass an array to race."))})},function(e){var t=new this(c);return y(t,e),t}),Y=E;E.all=function(e){return new Z(this,e).promise},E.race=D,E.resolve=U,E.reject=W,E._setScheduler=function(e){k=e},E._setAsap=function(e){P=e},E._asap=P,E.prototype={constructor:E,then:B,catch:function(e){return this.then(null,e)}};var Z=S;S.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===j&&n<e;n++)this._eachEntry(t[n],n)},S.prototype._eachEntry=function(e,t){var n,r,i=this._instanceConstructor,o=i.resolve;o===U?(n=h(e))===B&&e._state!==j?this._settledAt(e._state,t,e._result):"function"!=typeof n?(this._remaining--,this._result[t]=e):i===Y?(p(r=new i(c),e,n),this._willSettleAt(r,t)):this._willSettleAt(new i((function(t){t(e)})),t):this._willSettleAt(o(e),t)},S.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===j&&(this._remaining--,e===G?y(r,n):this._result[t]=n),0===this._remaining&&m(r,this._result)},S.prototype._willSettleAt=function(e,t){var n=this;v(e,void 0,(function(e){n._settledAt(q,t,e)}),(function(e){n._settledAt(G,t,e)}))};var J={Promise:Y,polyfill:W=function(){var e;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=Y)}};void 0!==(s=function(){return J}.call(t,n,t,r))&&(r.exports=s),W()}.call(this),o.promise=function(e,t){if("undefined"==typeof Promise)throw new Error("Please include a Promise/A+ library");if("string"==typeof e)return P(e,t);if(!l.isArray(e)||e.length<1||void 0!==t)throw new Error("Error in .promise parameters");return function(e){if(!(e.length<1)){for(var t,n,r=[],i=0;i<e.length;i++){if("string"==typeof(n=e[i])&&(n=[n]),!l.isArray(n)||n.length<1||2<n.length)throw new Error("Error in .promise parameter");t=n[0],n=n[1]||void 0,r.push(P(t,n,i,e.length))}return l.global.Promise.all(r)}}(e)};var O=o.Database=function(e){var t=this;if(t===o)if(e){if(t=o.databases[e],!(o.databases[e]=t))throw new Error('Database "'+e+'" not found')}else t=o.databases.alasql,o.options.tsql&&(o.databases.tempdb=o.databases.alasql);return e=e||"db"+o.databasenum++,t.databaseid=e,(o.databases[e]=t).dbversion=0,t.tables={},t.views={},t.triggers={},t.indices={},t.objects={},t.counter=0,t.resetSqlCache(),t};O.prototype.resetSqlCache=function(){this.sqlCache={},this.sqlCacheSize=0},O.prototype.exec=function(e,t,n){return o.dexec(this.databaseid,e,t,n)},O.prototype.autoval=function(e,t,n){return o.autoval(e,t,n,this.databaseid)},O.prototype.transaction=function(e){return e(new o.Transaction(this.databaseid))};var R=o.Transaction=function(e){return this.transactionid=Date.now(),this.databaseid=e,this.commited=!1,this.dbversion=o.databases[e].dbversion,this.bank=JSON.stringify(o.databases[e]),this};R.prototype.commit=function(){this.commited=!0,o.databases[this.databaseid].dbversion=Date.now(),delete this.bank},R.prototype.rollback=function(){if(this.commited)throw new Error("Transaction already commited");o.databases[this.databaseid]=JSON.parse(this.bank),delete this.bank},R.prototype.exec=function(e,t,n){return o.dexec(this.databaseid,e,t,n)},R.prototype.executeSQL=R.prototype.exec;var D=o.Table=function(e){this.data=[],this.columns=[],this.xcolumns={},this.inddefs={},this.indices={},this.uniqs={},this.uniqdefs={},this.identities={},this.checks=[],this.checkfns=[],this.beforeinsert={},this.afterinsert={},this.insteadofinsert={},this.beforedelete={},this.afterdelete={},this.insteadofdelete={},this.beforeupdate={},this.afterupdate={},this.insteadofupdate={},M(this,e)};D.prototype.indexColumns=function(){var e=this;e.xcolumns={},e.columns.forEach((function(t){e.xcolumns[t.columnid]=t}))},o.View=function(e){this.columns=[],this.xcolumns={},this.query=[],M(this,e)};var F=o.Query=function(e){this.alasql=o,this.columns=[],this.xcolumns={},this.selectGroup=[],this.groupColumns={},M(this,e)},z=(o.Recordset=function(e){M(this,e)},u.yy=o.yy={});z.extend=M,z.casesensitive=o.options.casesensitive;var B=z.Base=function(e){return z.extend(this,e)};function U(e,t,n){var r,i,a,s,u={},l=C(this.selectors);return void 0!==l&&0<l.length&&(l&&l[0]&&"PROP"===l[0].srchid&&l[0].args&&l[0].args[0]&&("XML"===l[0].args[0].toUpperCase()?(u.mode="XML",l.shift()):"HTML"===l[0].args[0].toUpperCase()?(u.mode="HTML",l.shift()):"JSON"===l[0].args[0].toUpperCase()&&(u.mode="JSON",l.shift())),0<l.length&&"VALUE"===l[0].srchid&&(u.value=!0,l.shift())),this.from instanceof z.Column?(i=this.from.databaseid||e,r=o.databases[i].tables[this.from.columnid].data):this.from instanceof z.FuncValue&&o.from[this.from.funcid.toUpperCase()]?(i=this.from.args.map((function(e){return e=e.toJS(),new Function("params,alasql","var y;return "+e).bind(this)(t,o)})),r=o.from[this.from.funcid.toUpperCase()].apply(this,i)):void 0===this.from?r=o.databases[e].objects:(e=new Function("params,alasql","var y;return "+this.from.toJS()),r=e(t,o),"object"==typeof Mongo&&"object"!=typeof Mongo.Collection&&r instanceof Mongo.Collection&&(r=r.find().fetch())),l=void 0!==l&&0<l.length?function e(n,i,a){var s=n[i];if(s.selid){if("PATH"===s.selid){for(var l=[{node:a,stack:[]}],c={},h=o.databases[o.useid].objects;0<l.length;){var f=l.shift(),p=f.node,d=f.stack;if(0<(M=e(s.args,0,p)).length){if(i+1+1>n.length)return d;var g=[];return d&&0<d.length&&d.forEach((function(t){g=g.concat(e(n,i+1,t))})),g}void 0===c[p.$id]&&(c[p.$id]=!0,p.$out&&0<p.$out.length&&p.$out.forEach((function(e){var t=h[e];(e=d.concat(t)).push(h[t.$out[0]]),l.push({node:h[t.$out[0]],stack:e})})))}return[]}if("NOT"===s.selid)return 0<(y=e(s.args,0,a)).length?[]:i+1+1>n.length?[a]:e(n,i+1,a);if("DISTINCT"===s.selid){if(0===(y=void 0===s.args||0===s.args.length?A(a):e(s.args,0,a)).length)return[];var m=A(y);return i+1+1>n.length?m:e(n,i+1,m)}if("AND"===s.selid)return m=!0,s.args.forEach((function(t){m=m&&0<e(t,0,a).length})),m?i+1+1>n.length?[a]:e(n,i+1,a):[];if("OR"===s.selid)return m=!1,s.args.forEach((function(t){m=m||0<e(t,0,a).length})),m?i+1+1>n.length?[a]:e(n,i+1,a):[];if("ALL"===s.selid)return 0===(y=e(s.args[0],0,a)).length?[]:i+1+1>n.length?y:e(n,i+1,y);if("ANY"===s.selid)return 0===(y=e(s.args[0],0,a)).length?[]:i+1+1>n.length?[y[0]]:e(n,i+1,[y[0]]);if("UNIONALL"===s.selid){var y=[];return s.args.forEach((function(t){y=y.concat(e(t,0,a))})),0===y.length?[]:i+1+1>n.length?y:e(n,i+1,y)}if("UNION"===s.selid)return y=[],s.args.forEach((function(t){y=y.concat(e(t,0,a))})),0===(y=A(y)).length?[]:i+1+1>n.length?y:e(n,i+1,y);if("IF"===s.selid)return 0===(y=e(s.args,0,a)).length?[]:i+1+1>n.length?[a]:e(n,i+1,a);if("REPEAT"===s.selid){var v,_=s.args[0].value,b=s.args[1]?s.args[1].value:_;s.args[2]&&(v=s.args[2].variable);var x=[];if(0===_&&(x=i+1+1>n.length?[a]:(v&&(o.vars[v]=0),x.concat(e(n,i+1,a)))),0<b)for(var w=[{value:a,lvl:1}],E=0;0<w.length;){var S;if(y=w[0],w.shift(),y.lvl<=b&&(v&&(o.vars[v]=y.lvl),(S=e(s.sels,0,y.value)).forEach((function(e){w.push({value:e,lvl:y.lvl+1})})),y.lvl>=_&&(i+1+1>n.length?x=x.concat(S):S.forEach((function(t){x=x.concat(e(n,i+1,t))})))),1e5<++E)throw new Error("Security brake. Number of iterations = "+E)}return x}if("OF"===s.selid){if(i+1+1>n.length)return[a];var T=[];return Object.keys(a).forEach((function(t){o.vars[s.args[0].variable]=t,T=T.concat(e(n,i+1,a[t]))})),T}if("TO"===s.selid){var k=o.vars[s.args[0]],C=[];return(C=void 0!==k?k.slice(0):[]).push(a),i+1+1>n.length?[a]:(o.vars[s.args[0]]=C,T=e(n,i+1,a),o.vars[s.args[0]]=k,T)}if("ARRAY"===s.selid)return 0<(y=e(s.args,0,a)).length?(I=y,i+1+1>n.length?[I]:e(n,i+1,I)):[];if("SUM"===s.selid){if(!(0<(y=e(s.args,0,a)).length))return[];var I=y.reduce((function(e,t){return e+t}),0);return i+1+1>n.length?[I]:e(n,i+1,I)}if("AVG"===s.selid)return 0<(y=e(s.args,0,a)).length?(I=y.reduce((function(e,t){return e+t}),0)/y.length,i+1+1>n.length?[I]:e(n,i+1,I)):[];if("COUNT"===s.selid)return 0<(y=e(s.args,0,a)).length?(I=y.length,i+1+1>n.length?[I]:e(n,i+1,I)):[];if("FIRST"===s.selid)return 0<(y=e(s.args,0,a)).length?(I=y[0],i+1+1>n.length?[I]:e(n,i+1,I)):[];if("LAST"===s.selid)return 0<(y=e(s.args,0,a)).length?(I=y[y.length-1],i+1+1>n.length?[I]:e(n,i+1,I)):[];if("MIN"===s.selid)return 0===(y=e(s.args,0,a)).length?[]:(I=y.reduce((function(e,t){return Math.min(e,t)}),1/0),i+1+1>n.length?[I]:e(n,i+1,I));if("MAX"===s.selid)return 0===(y=e(s.args,0,a)).length?[]:(I=y.reduce((function(e,t){return Math.max(e,t)}),-1/0),i+1+1>n.length?[I]:e(n,i+1,I));if("PLUS"===s.selid){for(x=[],w=e(s.args,0,a).slice(),i+1+1>n.length?x=x.concat(w):w.forEach((function(t){x=x.concat(e(n,i+1,t))})),E=0;0<w.length;)if(y=w.shift(),y=e(s.args,0,y),w=w.concat(y),i+1+1>n.length?x=x.concat(y):y.forEach((function(t){t=e(n,i+1,t),x=x.concat(t)})),1e5<++E)throw new Error("Security brake. Number of iterations = "+E);return x}if("STAR"===s.selid){for(x=[],x=e(n,i+1,a),w=e(s.args,0,a).slice(),i+1+1>n.length?x=x.concat(w):w.forEach((function(t){x=x.concat(e(n,i+1,t))})),E=0;0<w.length;)if(y=w[0],w.shift(),y=e(s.args,0,y),w=w.concat(y),i+1+1<=n.length&&y.forEach((function(t){x=x.concat(e(n,i+1,t))})),1e5<++E)throw new Error("Loop brake. Number of iterations = "+E);return x}if("QUESTION"===s.selid)return x=(x=[]).concat(e(n,i+1,a)),y=e(s.args,0,a),i+1+1<=n.length&&y.forEach((function(t){x=x.concat(e(n,i+1,t))})),x;if("WITH"!==s.selid){if("ROOT"===s.selid)return i+1+1>n.length?[a]:e(n,i+1,r);throw new Error("Wrong selector "+s.selid)}if(0===(y=e(s.args,0,a)).length)return[];var M={status:1,values:y}}else{if(!s.srchid)throw new Error("Selector not found");M=o.srch[s.srchid.toUpperCase()](a,s.args,u,t)}if(void 0===M&&(M={status:1,values:[a]}),m=[],1===M.status){var L=M.values;if(i+1+1>n.length)m=L;else for(E=0;E<M.values.length;E++)m=m.concat(e(n,i+1,L[E]))}return m}(l,0,r):r,this.into?(void 0!==this.into.args[0]&&(a=new Function("params,alasql","var y;return "+this.into.args[0].toJS())(t,o)),void 0!==this.into.args[1]&&(s=new Function("params,alasql","var y;return "+this.into.args[1].toJS())(t,o)),l=o.into[this.into.funcid.toUpperCase()](a,s,l,[],n)):(u.value&&0<l.length&&(l=l[0]),n&&(l=n(l))),l}function V(e,t,n){var r;if(0<=t?((r=n.sources[t]).data=e,"function"==typeof r.data&&(r.getfn=r.data,r.dontcache=r.getfn.dontcache,"OUTER"!=r.joinmode&&"RIGHT"!=r.joinmode&&"ANTI"!=r.joinmode||(r.dontcache=!1),r.data={})):n.queriesdata[-t-1]=L(e),n.sourceslen--,!(0<n.sourceslen))return j(n)}function j(e){var t,n,r,i=e.scope;if(q(e),e.data=[],e.xgroups={},e.groups=[],function e(t,n,r){if(r>=t.sources.length)t.wherefn(n,t.params,o)&&(t.groupfn?t.groupfn(n,t.params,o):t.data.push(t.selectfn(n,t.params,o)));else if(t.sources[r].applyselect)(i=t.sources[r]).applyselect(t.params,(function(o){if(0<o.length)for(var a=0;a<o.length;a++)n[i.alias]=o[a],e(t,n,r+1);else"OUTER"==i.applymode&&(n[i.alias]={},e(t,n,r+1))}),n);else{var i=t.sources[r],a=t.sources[r+1],s=i.alias||i.tableid,u=!1,l=i.data,c=!1;i.getfn&&(!i.getfn||i.dontcache)||"RIGHT"==i.joinmode||"OUTER"==i.joinmode||"ANTI"==i.joinmode||"ix"!=i.optimization||(l=i.ix[i.onleftfn(n,t.params,o)]||[],c=!0);var h=0;if(void 0===l)throw new Error("Data source number "+r+" in undefined");for(var f=l.length;(y=l[h])||!c&&i.getfn&&(y=i.getfn(h))||h<f;){c||!i.getfn||i.dontcache||(l[h]=y),n[s]=y;var p,d,g=!i.onleftfn;g||(p=i.onleftfn(n,t.params,o),d=i.onrightfn(n,t.params,o),(p instanceof String||p instanceof Number)&&(p=p.valueOf()),(d instanceof String||d instanceof Number)&&(d=p.valueOf()),g=p==d),g&&i.onmiddlefn(n,t.params,o)&&("SEMI"!=i.joinmode&&"ANTI"!=i.joinmode&&e(t,n,r+1),"LEFT"!=i.joinmode&&"INNER"!=i.joinmode&&(y._rightjoin=!0),u=!0),h++}if("LEFT"!=i.joinmode&&"OUTER"!=i.joinmode&&"SEMI"!=i.joinmode||u||(n[s]={},e(t,n,r+1)),0==r)for(var m=r+1;m<t.sources.length;m++){if("OUTER"==a.joinmode||"RIGHT"==a.joinmode||"ANTI"==a.joinmode){n[i.alias]={};for(var y,v=0,_=a.data.length;(y=a.data[v])||a.getfn&&(y=a.getfn(v))||v<_;)a.getfn&&!a.dontcache&&(a.data[v]=y),y._rightjoin?delete y._rightjoin:(n[a.alias]=y,e(t,n,m+1)),v++}i=t.sources[m],a=t.sources[m+1]}n[s]=void 0}}(e,i,0),e.groupfn){e.data=[],0===e.groups.length&&(l={},0<e.selectGroup.length&&e.selectGroup.forEach((function(e){"COUNT"==e.aggregatorid||"SUM"==e.aggregatorid?l[e.nick]=0:l[e.nick]=void 0})),e.groups=[l]),0<e.aggrKeys.length&&(t="",e.aggrKeys.forEach((function(e){t+="g['"+e.nick+"']=alasql.aggr['"+e.funcid+"'](undefined,g['"+e.nick+"'],3);"})),n=new Function("g,params,alasql","var y;"+t));for(var a=0,s=e.groups.length;a<s;a++){var u,l=e.groups[a];n&&n(l,e.params,o),e.havingfn&&!e.havingfn(l,e.params,o)||(u=e.selectgfn(l,e.params,o),e.data.push(u))}}if(function(e){if(e.distinct){for(var t,n={},r=Object.keys(e.data[0]||[]),i=0,o=e.data.length;i<o;i++)n[r.map((function(t){return e.data[i][t]})).join("`")]=e.data[i];for(t in e.data=[],n)e.data.push(n[t])}}(e),e.unionallfn){if(e.corresponding)e.unionallfn.query.modifier||(e.unionallfn.query.modifier=void 0),f=e.unionallfn(e.params);else for(e.unionallfn.query.modifier||(e.unionallfn.query.modifier="RECORDSET"),f=[],s=(p=e.unionallfn(e.params)).data.length,a=0;a<s;a++){for(var c={},h=Math.min(e.columns.length,p.columns.length)-1;0<=h;h--)c[e.columns[h].columnid]=p.data[a][p.columns[h].columnid];f.push(c)}e.data=e.data.concat(f)}else if(e.unionfn){if(e.corresponding)e.unionfn.query.modifier||(e.unionfn.query.modifier="ARRAY"),f=e.unionfn(e.params);else for(e.unionfn.query.modifier||(e.unionfn.query.modifier="RECORDSET"),f=[],s=(p=e.unionfn(e.params)).data.length,a=0;a<s;a++){for(c={},d=Math.min(e.columns.length,p.columns.length),h=0;h<d;h++)c[e.columns[h].columnid]=p.data[a][p.columns[h].columnid];f.push(c)}e.data=S(e.data,f)}else if(e.exceptfn){if(e.corresponding){e.exceptfn.query.modifier||(e.exceptfn.query.modifier="ARRAY");var f=e.exceptfn(e.params)}else{var p;for(e.exceptfn.query.modifier||(e.exceptfn.query.modifier="RECORDSET"),f=[],a=0,s=(p=e.exceptfn(e.params)).data.length;a<s;a++){for(c={},h=Math.min(e.columns.length,p.columns.length)-1;0<=h;h--)c[e.columns[h].columnid]=p.data[a][p.columns[h].columnid];f.push(c)}}e.data=T(e.data,f)}else if(e.intersectfn){if(e.corresponding)e.intersectfn.query.modifier||(e.intersectfn.query.modifier=void 0),f=e.intersectfn(e.params);else for(e.intersectfn.query.modifier||(e.intersectfn.query.modifier="RECORDSET"),f=[],s=(p=e.intersectfn(e.params)).data.length,a=0;a<s;a++){for(c={},d=Math.min(e.columns.length,p.columns.length),h=0;h<d;h++)c[e.columns[h].columnid]=p.data[a][p.columns[h].columnid];f.push(c)}e.data=k(e.data,f)}if(e.orderfn&&(e.explain&&(r=Date.now()),e.data=e.data.sort(e.orderfn),e.explain&&e.explaination.push({explid:e.explid++,description:"QUERY BY",ms:Date.now()-r})),function(e){var t,n;e.limit&&(t=0,e.offset&&(t=(t=0|e.offset||0)<0?0:t),n=e.percent?(e.data.length*e.limit/100|0)+t:(0|e.limit)+t,e.data=e.data.slice(t,n))}(e),"undefined"!=typeof angular&&e.removeKeys.push("$$hashKey"),0<e.removeKeys.length){var d,g=e.removeKeys;if(0<(d=g.length))for(s=e.data.length,a=0;a<s;a++)for(h=0;h<d;h++)delete e.data[a][g[h]];0<e.columns.length&&(e.columns=e.columns.filter((function(e){var t=!1;return g.forEach((function(n){e.columnid==n&&(t=!0)})),!t})))}if(void 0!==e.removeLikeKeys&&0<e.removeLikeKeys.length){var m=e.removeLikeKeys;for(a=0,s=e.data.length;a<s;a++)for(var y in c=e.data[a])for(h=0;h<e.removeLikeKeys.length;h++)o.utils.like(e.removeLikeKeys[h],y)&&delete c[y];0<e.columns.length&&(e.columns=e.columns.filter((function(e){var t=!1;return m.forEach((function(n){o.utils.like(n,e.columnid)&&(t=!0)})),!t})))}if(e.pivotfn&&e.pivotfn(),e.unpivotfn&&e.unpivotfn(),e.intoallfn){var v=e.intoallfn(e.columns,e.cb,e.params,e.alasql);return v}if(e.intofn){for(s=e.data.length,a=0;a<s;a++)e.intofn(e.data[a],a,e.params,e.alasql);return e.cb&&e.cb(e.data.length,e.A,e.B),e.data.length}return v=e.data,e.cb&&(v=e.cb(e.data,e.A,e.B)),v}B.prototype.toString=function(){},B.prototype.toType=function(){},B.prototype.toJS=function(){},B.prototype.compile=p,B.prototype.exec=function(){},B.prototype.compile=p,B.prototype.exec=function(){},z.Statements=function(e){return z.extend(this,e)},z.Statements.prototype.toString=function(){return this.statements.map((function(e){return e.toString()})).join("; ")},z.Statements.prototype.compile=function(e){var t=this.statements.map((function(t){return t.compile(e)}));return 1===t.length?t[0]:function(e,n){var r=t.map((function(t){return t(e)}));return n&&n(r),r}},z.Search=function(e){return z.extend(this,e)},z.Search.prototype.toString=function(){var e="SEARCH ";return this.selectors&&(e+=this.selectors.toString()),this.from&&(e+="FROM "+this.from.toString()),e},z.Search.prototype.toJS=function(e){return"this.queriesfn["+(this.queriesidx-1)+"](this.params,null,"+e+")"},z.Search.prototype.compile=function(e){var t=e,n=this,r=function e(r,i){var o;return U.bind(n)(t,r,(function(t){o=G(e.query,t),i&&(o=i(o))})),o};return r.query={},r},o.srch={},o.srch.PROP=function(e,t,n){if("XML"!==n.mode)return"object"!=typeof e||null===e||"object"!=typeof t||void 0===e[t[0]]?{status:-1,values:[]}:{status:1,values:[e[t[0]]]};var r=[];return e.children.forEach((function(e){e.name.toUpperCase()===t[0].toUpperCase()&&r.push(e)})),0<r.length?{status:1,values:r}:{status:-1,values:[]}},o.srch.APROP=function(e,t){return"object"!=typeof e||null===e||"object"!=typeof t||void 0===e[t[0]]?{status:1,values:[void 0]}:{status:1,values:[e[t[0]]]}},o.srch.EQ=function(e,t,n,r){return t=t[0].toJS("x",""),e===new Function("x,alasql,params","return "+t)(e,o,r)?{status:1,values:[e]}:{status:-1,values:[]}},o.srch.LIKE=function(e,t,n,r){return t=t[0].toJS("x",""),t=new Function("x,alasql,params","return "+t),e.toUpperCase().match(new RegExp("^"+t(e,o,r).toUpperCase().replace(/%/g,".*").replace(/\?|_/g,".")+"$"),"g")?{status:1,values:[e]}:{status:-1,values:[]}},o.srch.ATTR=function(e,t,n){if("XML"===n.mode)return void 0===t?{status:1,values:[e.attributes]}:"object"==typeof e&&"object"==typeof e.attributes&&void 0!==e.attributes[t[0]]?{status:1,values:[e.attributes[t[0]]]}:{status:-1,values:[]};throw new Error("ATTR is not using in usual mode")},o.srch.CONTENT=function(e,t,n){if("XML"===n.mode)return{status:1,values:[e.content]};throw new Error("ATTR is not using in usual mode")},o.srch.SHARP=function(e,t){return t=o.databases[o.useid].objects[t[0]],void 0!==e&&e===t?{status:1,values:[e]}:{status:-1,values:[]}},o.srch.PARENT=function(){return console.error("PARENT not implemented",arguments),{status:-1,values:[]}},o.srch.CHILD=function(e,t,n){return"object"==typeof e?Array.isArray(e)?{status:1,values:e}:"XML"===n.mode?{status:1,values:Object.keys(e.children).map((function(t){return e.children[t]}))}:{status:1,values:Object.keys(e).map((function(t){return e[t]}))}:{status:1,values:[]}},o.srch.KEYS=function(e){return"object"==typeof e&&null!==e?{status:1,values:Object.keys(e)}:{status:1,values:[]}},o.srch.WHERE=function(e,t,n,r){return t=t[0].toJS("x",""),new Function("x,alasql,params","return "+t)(e,o,r)?{status:1,values:[e]}:{status:-1,values:[]}},o.srch.NAME=function(e,t){return e.name===t[0]?{status:1,values:[e]}:{status:-1,values:[]}},o.srch.CLASS=function(e,t){return e.$class==t?{status:1,values:[e]}:{status:-1,values:[]}},o.srch.VERTEX=function(e){return"VERTEX"===e.$node?{status:1,values:[e]}:{status:-1,values:[]}},o.srch.INSTANCEOF=function(e,t){return e instanceof o.fn[t[0]]?{status:1,values:[e]}:{status:-1,values:[]}},o.srch.EDGE=function(e){return"EDGE"===e.$node?{status:1,values:[e]}:{status:-1,values:[]}},o.srch.EX=function(e,t,n,r){return t=t[0].toJS("x",""),{status:1,values:[new Function("x,alasql,params","return "+t)(e,o,r)]}},o.srch.RETURN=function(e,t,n,r){var i={};return t&&0<t.length&&t.forEach((function(t){var n=t.toJS("x","");n=new Function("x,alasql,params","return "+n),void 0===t.as&&(t.as=t.toString()),i[t.as]=n(e,o,r)})),{status:1,values:[i]}},o.srch.REF=function(e){return{status:1,values:[o.databases[o.useid].objects[e]]}},o.srch.OUT=function(e){return e.$out&&0<e.$out.length?{status:1,values:e.$out.map((function(e){return o.databases[o.useid].objects[e]}))}:{status:-1,values:[]}},o.srch.OUTOUT=function(e){if(e.$out&&0<e.$out.length){var t=[];return e.$out.forEach((function(e){(e=o.databases[o.useid].objects[e])&&e.$out&&0<e.$out.length&&e.$out.forEach((function(e){t=t.concat(o.databases[o.useid].objects[e])}))})),{status:1,values:t}}return{status:-1,values:[]}},o.srch.IN=function(e){return e.$in&&0<e.$in.length?{status:1,values:e.$in.map((function(e){return o.databases[o.useid].objects[e]}))}:{status:-1,values:[]}},o.srch.ININ=function(e){if(e.$in&&0<e.$in.length){var t=[];return e.$in.forEach((function(e){(e=o.databases[o.useid].objects[e])&&e.$in&&0<e.$in.length&&e.$in.forEach((function(e){t=t.concat(o.databases[o.useid].objects[e])}))})),{status:1,values:t}}return{status:-1,values:[]}},o.srch.AS=function(e,t){return{status:1,values:[o.vars[t[0]]=e]}},o.srch.AT=function(e,t){return{status:1,values:[o.vars[t[0]]]}},o.srch.CLONEDEEP=function(e){return{status:1,values:[C(e)]}},o.srch.SET=function(e,t,n,r){return t=t.map((function(e){return"@"===e.method?"alasql.vars['"+e.variable+"']="+e.expression.toJS("x",""):"$"===e.method?"params['"+e.variable+"']="+e.expression.toJS("x",""):"x['"+e.column.columnid+"']="+e.expression.toJS("x","")})).join(";"),new Function("x,params,alasql",t)(e,r,o),{status:1,values:[e]}},o.srch.ROW=function(e,t,n,r){var i="var y;return [";return i+=t.map((function(e){return e.toJS("x","")})).join(","),i+="]",{status:1,values:[new Function("x,params,alasql",i)(e,r,o)]}},o.srch.D3=function(e){return"VERTEX"!==e.$node&&"EDGE"===e.$node&&(e.source=e.$in[0],e.target=e.$out[0]),{status:1,values:[e]}},o.srch.ORDERBY=function(e,t){return{status:1,values:e.sort(function(e){if(e){if(e&&1===e.length&&e[0].expression&&"function"==typeof e[0].expression){var t=e[0].expression;return function(e,n){return e=t(e),(n=t(n))<e?1:e===n?0:-1}}var n="",r="";return e.forEach((function(e){var t,i="";e.expression instanceof z.NumValue&&(e.expression=self.columns[e.expression.value-1]),e.expression instanceof z.Column?(t=e.expression.columnid,o.options.valueof&&(i=".valueOf()"),e.nocase&&(i+=".toUpperCase()"),"_"===t?(n+="if(a"+i+("ASC"===e.direction?">":"<")+"b"+i+")return 1;",n+="if(a"+i+"==b"+i+"){"):(n+="if((a['"+t+"']||'')"+i+("ASC"===e.direction?">":"<")+"(b['"+t+"']||'')"+i+")return 1;",n+="if((a['"+t+"']||'')"+i+"==(b['"+t+"']||'')"+i+"){")):(i=".valueOf()",e.nocase&&(i+=".toUpperCase()"),n+="if(("+e.toJS("a","")+"||'')"+i+("ASC"===e.direction?">(":"<(")+e.toJS("b","")+"||'')"+i+")return 1;",n+="if(("+e.toJS("a","")+"||'')"+i+"==("+e.toJS("b","")+"||'')"+i+"){"),r+="}"})),n+="return 0;",n+=r+"return -1",new Function("a,b",n)}}(t))}};var q=function(e){for(var t=0,n=e.sources.length;t<n;t++){var r,i=e.sources[t];if(delete i.ix,0<t&&"ix"==i.optimization&&i.onleftfn&&i.onrightfn){if(i.databaseid&&o.databases[i.databaseid].tables[i.tableid]&&(o.databases[i.databaseid].tables[i.tableid].indices||(e.database.tables[i.tableid].indices={}),r=o.databases[i.databaseid].tables[i.tableid].indices[b(i.onrightfns+"`"+i.srcwherefns)],!o.databases[i.databaseid].tables[i.tableid].dirty&&r&&(i.ix=r)),!i.ix){i.ix={};for(var a,s,u={},l=0,c=i.data.length;(a=i.data[l])||i.getfn&&(a=i.getfn(l))||l<c;)i.getfn&&!i.dontcache&&(i.data[l]=a),u[i.alias||i.tableid]=a,i.srcwherefn(u,e.params,o)&&(s=i.onrightfn(u,e.params,o),(i.ix[s]||(i.ix[s]=[])).push(a)),l++;i.databaseid&&o.databases[i.databaseid].tables[i.tableid]&&(o.databases[i.databaseid].tables[i.tableid].indices[b(i.onrightfns+"`"+i.srcwherefns)]=i.ix)}}else if(i.wxleftfn){if(o.databases[i.databaseid].engineid||(r=o.databases[i.databaseid].tables[i.tableid].indices[b(i.wxleftfns+"`")]),!o.databases[i.databaseid].tables[i.tableid].dirty&&r)i.ix=r,i.data=i.ix[i.wxrightfn(null,e.params,o)];else{for(i.ix={},u={},l=0,c=i.data.length;(a=i.data[l])||i.getfn&&(a=i.getfn(l))||l<c;)i.getfn&&!i.dontcache&&(i.data[l]=a),u[i.alias||i.tableid]=i.data[l],s=i.wxleftfn(u,e.params,o),(i.ix[s]||(i.ix[s]=[])).push(i.data[l]),l++;o.databases[i.databaseid].engineid||(o.databases[i.databaseid].tables[i.tableid].indices[b(i.wxleftfns+"`")]=i.ix)}i.srcwherefns&&(i.data?(u={},i.data=i.data.filter((function(t){return u[i.alias]=t,i.srcwherefn(u,e.params,o)}))):i.data=[])}else if(i.srcwherefns&&!i.dontcache)if(i.data){u={},i.data=i.data.filter((function(t){return u[i.alias]=t,i.srcwherefn(u,e.params,o)})),u={},l=0,c=i.data.length;for(var h=[];(a=i.data[l])||i.getfn&&(a=i.getfn(l))||l<c;)i.getfn&&!i.dontcache&&(i.data[l]=a),u[i.alias]=a,i.srcwherefn(u,e.params,o)&&h.push(a),l++;i.data=h}else i.data=[];i.databaseid&&o.databases[i.databaseid].tables[i.tableid]}};function G(e,t){if(void 0===t||"number"==typeof t||"string"==typeof t||"boolean"==typeof t)return t;var n=e.modifier||o.options.modifier,r=e.columns;if(void 0===r||0==r.length)if(0<t.length){for(var i={},a=Math.min(t.length,o.options.columnlookup||10)-1;0<=a;a--)for(var s in t[a])i[s]=!0;r=Object.keys(i).map((function(e){return{columnid:e}}))}else r=[];if("VALUE"===n)t=0<t.length?(s=r&&0<r.length?r[0].columnid:Object.keys(t[0])[0],t[0][s]):void 0;else if("ROW"===n)if(0<t.length){var u=[];for(s in t[0])u.push(t[0][s]);t=u}else t=void 0;else if("COLUMN"===n){var l=[];if(0<t.length){s=r&&0<r.length?r[0].columnid:Object.keys(t[0])[0],a=0;for(var c=t.length;a<c;a++)l.push(t[a][s])}t=l}else if("MATRIX"===n){for(l=[],a=0;a<t.length;a++){u=[];for(var h=t[a],f=0;f<r.length;f++)u.push(h[r[f].columnid]);l.push(u)}t=l}else if("INDEX"===n){l={};var p=r&&0<r.length?(s=r[0].columnid,r[1].columnid):(s=(e=Object.keys(t[0]))[0],e[1]);for(a=0,c=t.length;a<c;a++)l[t[a][s]]=t[a][p];t=l}else if("RECORDSET"===n)t=new o.Recordset({columns:r,data:t});else if("TEXTSTRING"===n){for(s=r&&0<r.length?r[0].columnid:Object.keys(t[0])[0],a=0,c=t.length;a<c;a++)t[a]=t[a][s];t=t.join("\n")}return t}function $(e,t,n){var r="",i=[],a={};return t.forEach((function(t){var s;e.ixsources={},e.sources.forEach((function(t){e.ixsources[t.alias]=t})),e.ixsources[t]&&(s=e.ixsources[t].columns),n&&"json"==o.options.joinstar&&(r+="r['"+t+"']={};"),s&&0<s.length?s.forEach((function(s){var u,l;n&&"underscore"==o.options.joinstar?i.push("'"+t+"_"+s.columnid+"':p['"+t+"']['"+s.columnid+"']"):n&&"json"==o.options.joinstar?r+="r['"+t+"']['"+s.columnid+"']=p['"+t+"']['"+s.columnid+"'];":(u="p['"+t+"']['"+s.columnid+"']",a[s.columnid]?(l=u+" !== undefined ? "+u+" : "+a[s.columnid].value,i[a[s.columnid].id]=a[s.columnid].key+l,a[s.columnid].value=l):(l="'"+s.columnid+"':",i.push(l+u),a[s.columnid]={id:i.length-1,value:u,key:l})),e.selectColumns[g(s.columnid)]=!0,s={columnid:s.columnid,dbtypeid:s.dbtypeid,dbsize:s.dbsize,dbprecision:s.dbprecision,dbenum:s.dbenum},e.columns.push(s),e.xcolumns[s.columnid]=s})):(r+='var w=p["'+t+'"];for(var k in w){r[k]=w[k]};',e.dirtyColumns=!0)})),{s:i.join(","),sp:r}}z.Select=function(e){return z.extend(this,e)},z.Select.prototype.toString=function(){var e="";return this.explain&&(e+="EXPLAIN "),e+="SELECT ",this.modifier&&(e+=this.modifier+" "),this.distinct&&(e+="DISTINCT "),this.top&&(e+="TOP "+this.top.value+" ",this.percent&&(e+="PERCENT ")),e+=this.columns.map((function(e){var t=e.toString();return void 0!==e.as&&(t+=" AS "+e.as),t})).join(", "),this.from&&(e+=" FROM "+this.from.map((function(e){var t=e.toString();return e.as&&(t+=" AS "+e.as),t})).join(",")),this.joins&&(e+=this.joins.map((function(e){var t=" ";if(e.joinmode&&(t+=e.joinmode+" "),e.table)t+="JOIN "+e.table.toString();else if(e.select)t+="JOIN ("+e.select.toString()+")";else{if(!(e instanceof o.yy.Apply))throw new Error("Wrong type in JOIN mode");t+=e.toString()}return e.as&&(t+=" AS "+e.as),e.using&&(t+=" USING "+e.using.toString()),e.on&&(t+=" ON "+e.on.toString()),t})).join("")),this.where&&(e+=" WHERE "+this.where.toString()),this.group&&0<this.group.length&&(e+=" GROUP BY "+this.group.map((function(e){return e.toString()})).join(", ")),this.having&&(e+=" HAVING "+this.having.toString()),this.order&&0<this.order.length&&(e+=" ORDER BY "+this.order.map((function(e){return e.toString()})).join(", ")),this.limit&&(e+=" LIMIT "+this.limit.value),this.offset&&(e+=" OFFSET "+this.offset.value),this.union&&(e+=" UNION "+(this.corresponding?"CORRESPONDING ":"")+this.union.toString()),this.unionall&&(e+=" UNION ALL "+(this.corresponding?"CORRESPONDING ":"")+this.unionall.toString()),this.except&&(e+=" EXCEPT "+(this.corresponding?"CORRESPONDING ":"")+this.except.toString()),this.intersect&&(e+=" INTERSECT "+(this.corresponding?"CORRESPONDING ":"")+this.intersect.toString()),e},z.Select.prototype.toJS=function(e){return"alasql.utils.flatArray(this.queriesfn["+(this.queriesidx-1)+"](this.params,null,"+e+"))[0]"},z.Select.prototype.compile=function(e,t){var n=o.databases[e],r=new F;r.removeKeys=[],r.aggrKeys=[],r.explain=this.explain,r.explaination=[],r.explid=1,r.modifier=this.modifier,r.database=n,this.compileWhereExists(r),this.compileQueries(r),r.defcols=this.compileDefCols(r,e),r.fromfn=this.compileFrom(r),this.joins&&this.compileJoins(r),r.rownums=[],this.compileSelectGroup0(r),this.group||0<r.selectGroup.length?r.selectgfns=this.compileSelectGroup1(r):r.selectfns=this.compileSelect1(r,t),this.compileRemoveColumns(r),this.where&&this.compileWhereJoins(r),r.wherefn=this.compileWhere(r),(this.group||0<r.selectGroup.length)&&(r.groupfn=this.compileGroup(r)),this.having&&(r.havingfn=this.compileHaving(r)),this.order&&(r.orderfn=this.compileOrder(r,t)),this.group||0<r.selectGroup.length?r.selectgfn=this.compileSelectGroup2(r):r.selectfn=this.compileSelect2(r,t),r.distinct=this.distinct,this.pivot&&(r.pivotfn=this.compilePivot(r)),this.unpivot&&(r.pivotfn=this.compileUnpivot(r)),this.top?r.limit=this.top.value:this.limit&&(r.limit=this.limit.value,this.offset&&(r.offset=this.offset.value)),r.percent=this.percent,r.corresponding=this.corresponding,this.union?(r.unionfn=this.union.compile(e),this.union.order?r.orderfn=this.union.compileOrder(r,t):r.orderfn=null):this.unionall?(r.unionallfn=this.unionall.compile(e),this.unionall.order?r.orderfn=this.unionall.compileOrder(r,t):r.orderfn=null):this.except?(r.exceptfn=this.except.compile(e),this.except.order?r.orderfn=this.except.compileOrder(r,t):r.orderfn=null):this.intersect&&(r.intersectfn=this.intersect.compile(e),this.intersect.order?r.intersectfn=this.intersect.compileOrder(r,t):r.orderfn=null),this.into&&(this.into instanceof z.Table?o.options.autocommit&&o.databases[this.into.databaseid||e].engineid?r.intoallfns='return alasql.engines["'+o.databases[this.into.databaseid||e].engineid+'"].intoTable("'+(this.into.databaseid||e)+'","'+this.into.tableid+'",this.data, columns, cb);':r.intofns="alasql.databases['"+(this.into.databaseid||e)+"'].tables['"+this.into.tableid+"'].data.push(r);":this.into instanceof z.VarValue?r.intoallfns='alasql.vars["'+this.into.variable+'"]=this.data;res=this.data.length;if(cb)res=cb(res);return res;':this.into instanceof z.FuncValue?(i="return alasql.into['"+this.into.funcid.toUpperCase()+"'](",this.into.args&&0<this.into.args.length?(i+=this.into.args[0].toJS()+",",1<this.into.args.length?i+=this.into.args[1].toJS()+",":i+="undefined,"):i+="undefined, undefined,",r.intoallfns=i+"this.data,columns,cb)"):this.into instanceof z.ParamValue&&(r.intofns="params['"+this.into.param+"'].push(r)"),r.intofns?r.intofn=new Function("r,i,params,alasql","var y;"+r.intofns):r.intoallfns&&(r.intoallfn=new Function("columns,cb,params,alasql","var y;"+r.intoallfns)));var i=function(e,t,n){return r.params=e,function(e,t,n,r,i){e.sources.length,e.sourceslen=e.sources.length;var a,s=e.sourceslen;return(e.query=e).A=r,e.B=i,e.cb=n,e.oldscope=t,e.queriesfn&&(e.sourceslen+=e.queriesfn.length,s+=e.queriesfn.length,e.queriesdata=[],e.queriesfn.forEach((function(t,n){t.query.params=e.params,V([],-n-1,e)}))),t=t?C(t):{},e.scope=t,e.sources.forEach((function(t,n){t.query=e,void 0!==(n=t.datafn(e,e.params,V,n,o))&&((e.intofn||e.intoallfn)&&Array.isArray(n)&&(n=n.length),a=n),t.queriesdata=e.queriesdata})),0!=e.sources.length&&0!==s||(a=j(e)),a}(r,n,(function(e,n){if(n)return t(n,null);if(0<r.rownums.length)for(var i=0,o=e.length;i<o;i++)for(var a=0,s=r.rownums.length;a<s;a++)e[i][r.rownums[a]]=i+1;return n=G(r,e),t&&t(n),n}))};return i.query=r,i},z.Select.prototype.execute=function(e,t,n){return this.compile(e)(t,n)},z.ExistsValue=function(e){return z.extend(this,e)},z.ExistsValue.prototype.toString=function(){return"EXISTS("+this.value.toString()+")"},z.ExistsValue.prototype.toType=function(){return"boolean"},z.ExistsValue.prototype.toJS=function(e,t,n){return"this.existsfn["+this.existsidx+"](params,null,"+e+").data.length"},z.Select.prototype.compileWhereExists=function(e){this.exists&&(e.existsfn=this.exists.map((function(t){return(t=t.compile(e.database.databaseid)).query.modifier="RECORDSET",t})))},z.Select.prototype.compileQueries=function(e){this.queries&&(e.queriesfn=this.queries.map((function(t){return(t=t.compile(e.database.databaseid)).query.modifier="RECORDSET",t})))},o.precompile=function(e,t,n){e&&(e.params=n,e.queries&&(e.queriesfn=e.queries.map((function(n){return(n=n.compile(t||e.database.databaseid)).query.modifier="RECORDSET",n}))),e.exists&&(e.existsfn=e.exists.map((function(n){return(n=n.compile(t||e.database.databaseid)).query.modifier="RECORDSET",n}))))},z.Select.prototype.compileFrom=function(e){e.sources=[],e.aliases={},this.from&&(this.from.forEach((function(t){var n="",r=t.as||t.tableid;if(t instanceof z.Table)e.aliases[r]={tableid:t.tableid,databaseid:t.databaseid||e.database.databaseid,type:"table"};else if(t instanceof z.Select)e.aliases[r]={type:"subquery"};else if(t instanceof z.Search)e.aliases[r]={type:"subsearch"};else if(t instanceof z.ParamValue)e.aliases[r]={type:"paramvalue"};else if(t instanceof z.FuncValue)e.aliases[r]={type:"funcvalue"};else if(t instanceof z.VarValue)e.aliases[r]={type:"varvalue"};else if(t instanceof z.FromData)e.aliases[r]={type:"fromdata"};else if(t instanceof z.Json)e.aliases[r]={type:"json"};else{if(!t.inserted)throw new Error("Wrong table at FROM");e.aliases[r]={type:"inserted"}}var i={alias:r,databaseid:t.databaseid||e.database.databaseid,tableid:t.tableid,joinmode:"INNER",onmiddlefn:f,srcwherefns:"",srcwherefn:f};if(t instanceof z.Table)i.columns=o.databases[i.databaseid].tables[i.tableid].columns,o.options.autocommit&&o.databases[i.databaseid].engineid&&!o.databases[i.databaseid].tables[i.tableid].view?i.datafn=function(e,t,n,r,o){return o.engines[o.databases[i.databaseid].engineid].fromTable(i.databaseid,i.tableid,n,r,e)}:o.databases[i.databaseid].tables[i.tableid].view?i.datafn=function(e,t,n,r,o){return t=o.databases[i.databaseid].tables[i.tableid].select(t),n&&(t=n(t,r,e)),t}:i.datafn=function(e,t,n,r,o){return o=o.databases[i.databaseid].tables[i.tableid].data,n&&(o=n(o,r,e)),o};else if(t instanceof z.Select)i.subquery=t.compile(e.database.databaseid),void 0===i.subquery.query.modifier&&(i.subquery.query.modifier="RECORDSET"),i.columns=i.subquery.query.columns,i.datafn=function(e,t,n,r,o){var a;return i.subquery(e.params,(function(t){return a=t.data,n&&(a=n(a,r,e)),a})),a};else if(t instanceof z.Search)i.subsearch=t,i.columns=[],i.datafn=function(e,t,n,r,o){var a;return i.subsearch.execute(e.database.databaseid,e.params,(function(t){return a=t,n&&(a=n(a,r,e)),a})),a};else if(t instanceof z.ParamValue)n="var res = alasql.prepareFromData(params['"+t.param+"']",t.array&&(n+=",true"),n+=");if(cb)res=cb(res,idx,query);return res",i.datafn=new Function("query,params,cb,idx,alasql",n);else if(t.inserted)n="var res = alasql.prepareFromData(alasql.inserted",t.array&&(n+=",true"),n+=");if(cb)res=cb(res,idx,query);return res",i.datafn=new Function("query,params,cb,idx,alasql",n);else if(t instanceof z.Json)n="var res = alasql.prepareFromData("+t.toJS(),t.array&&(n+=",true"),n+=");if(cb)res=cb(res,idx,query);return res",i.datafn=new Function("query,params,cb,idx,alasql",n);else if(t instanceof z.VarValue)n="var res = alasql.prepareFromData(alasql.vars['"+t.variable+"']",t.array&&(n+=",true"),n+=");if(cb)res=cb(res,idx,query);return res",i.datafn=new Function("query,params,cb,idx,alasql",n);else if(t instanceof z.FuncValue)n="var res=alasql.from['"+t.funcid.toUpperCase()+"'](",t.args&&0<t.args.length?(t.args[0]?n+=t.args[0].toJS("query.oldscope")+",":n+="null,",t.args[1]?n+=t.args[1].toJS("query.oldscope")+",":n+="null,"):n+="null,null,",n+="cb,idx,query",n+=");/*if(cb)res=cb(res,idx,query);*/return res",i.datafn=new Function("query, params, cb, idx, alasql",n);else{if(!(t instanceof z.FromData))throw new Error("Wrong table at FROM");i.datafn=function(e,n,r,i,o){var a=t.data;return r&&(a=r(a,i,e)),a}}e.sources.push(i)})),e.defaultTableid=e.sources[0].alias)},o.prepareFromData=function(e,t){var n,r,i=e;if("string"==typeof e){if(i=e.split(/\r?\n/),t)for(n=0,r=i.length;n<r;n++)i[n]=[i[n]]}else if(t)for(i=[],n=0,r=e.length;n<r;n++)i.push([e[n]]);else if("object"==typeof e&&!Array.isArray(e))if("undefined"!=typeof Mongo&&void 0!==Mongo.Collection&&e instanceof Mongo.Collection)i=e.find().fetch();else for(var o in i=[],e)e.hasOwnProperty(o)&&i.push([o,e[o]]);return i},z.Select.prototype.compileJoins=function(e){this.joins.forEach((function(t){var n,r,i;if("CROSS"===t.joinmode){if(t.using||t.on)throw new Error("CROSS JOIN cannot have USING or ON clauses");t.joinmode="INNER"}if(t instanceof z.Apply)return(r={alias:t.as,applymode:t.applymode,onmiddlefn:f,srcwherefns:"",srcwherefn:f,columns:[]}).applyselect=t.select.compile(e.database.databaseid),r.columns=r.applyselect.query.columns,r.datafn=function(e,t,n,r,i){var o;return n&&(o=n(o,r,e)),o},void e.sources.push(r);if(t.table){if(n=t.table,r={alias:t.as||n.tableid,databaseid:n.databaseid||e.database.databaseid,tableid:n.tableid,joinmode:t.joinmode,onmiddlefn:f,srcwherefns:"",srcwherefn:f,columns:[]},!o.databases[r.databaseid].tables[r.tableid])throw new Error("Table '"+r.tableid+"' is not exists in database '"+r.databaseid+"'");r.columns=o.databases[r.databaseid].tables[r.tableid].columns,o.options.autocommit&&o.databases[r.databaseid].engineid?r.datafn=function(e,t,n,i,o){return o.engines[o.databases[r.databaseid].engineid].fromTable(r.databaseid,r.tableid,n,i,e)}:o.databases[r.databaseid].tables[r.tableid].view?r.datafn=function(e,t,n,i,o){return t=o.databases[r.databaseid].tables[r.tableid].select(t),n&&(t=n(t,i,e)),t}:r.datafn=function(e,t,n,i,o){return o=o.databases[r.databaseid].tables[r.tableid].data,n&&(o=n(o,i,e)),o},e.aliases[r.alias]={tableid:n.tableid,databaseid:n.databaseid||e.database.databaseid}}else t.select?(n=t.select,(r={alias:t.as,joinmode:t.joinmode,onmiddlefn:f,srcwherefns:"",srcwherefn:f,columns:[]}).subquery=n.compile(e.database.databaseid),void 0===r.subquery.query.modifier&&(r.subquery.query.modifier="RECORDSET"),r.columns=r.subquery.query.columns,r.datafn=function(e,t,n,i,o){return r.subquery(e.params,null,n,i).data},e.aliases[r.alias]={type:"subquery"}):t.param?(r={alias:t.as,joinmode:t.joinmode,onmiddlefn:f,srcwherefns:"",srcwherefn:f},i="var res=alasql.prepareFromData(params['"+t.param.param+"']",t.array&&(i+=",true"),i+=");if(cb)res=cb(res, idx, query);return res",r.datafn=new Function("query,params,cb,idx, alasql",i),e.aliases[r.alias]={type:"paramvalue"}):t.variable?(r={alias:t.as,joinmode:t.joinmode,onmiddlefn:f,srcwherefns:"",srcwherefn:f},i="var res=alasql.prepareFromData(alasql.vars['"+t.variable+"']",t.array&&(i+=",true"),i+=");if(cb)res=cb(res, idx, query);return res",r.datafn=new Function("query,params,cb,idx, alasql",i),e.aliases[r.alias]={type:"varvalue"}):t.func&&(r={alias:t.as,joinmode:t.joinmode,onmiddlefn:f,srcwherefns:"",srcwherefn:f},s="var res=alasql.from['"+t.func.funcid.toUpperCase()+"'](",(a=t.func.args)&&0<a.length?(a[0]?s+=a[0].toJS("query.oldscope")+",":s+="null,",a[1]?s+=a[1].toJS("query.oldscope")+",":s+="null,"):s+="null,null,",s+="cb,idx,query",s+=");/*if(cb)res=cb(res,idx,query);*/return res",r.datafn=new Function("query, params, cb, idx, alasql",s),e.aliases[r.alias]={type:"funcvalue"});var a,s,u=r.alias;if(t.natural){if(t.using||t.on)throw new Error("NATURAL JOIN cannot have USING or ON clauses");if(0<e.sources.length){var l=e.sources[e.sources.length-1],c=o.databases[l.databaseid].tables[l.tableid],h=o.databases[r.databaseid].tables[r.tableid];if(!c||!h)throw new Error("In this version of Alasql NATURAL JOIN works for tables with predefined columns only");var p=c.columns.map((function(e){return e.columnid})),d=h.columns.map((function(e){return e.columnid}));t.using=E(p,d).map((function(e){return{columnid:e}}))}}t.using?(l=e.sources[e.sources.length-1],r.onleftfns=t.using.map((function(e){return"p['"+(l.alias||l.tableid)+"']['"+e.columnid+"']"})).join('+"`"+'),r.onleftfn=new Function("p,params,alasql","var y;return "+r.onleftfns),r.onrightfns=t.using.map((function(e){return"p['"+(r.alias||r.tableid)+"']['"+e.columnid+"']"})).join('+"`"+'),r.onrightfn=new Function("p,params,alasql","var y;return "+r.onrightfns),r.optimization="ix"):t.on&&(t.on instanceof z.Op&&"="===t.on.op&&!t.on.allsome?(c=s=a="",h=!(r.optimization="ix"),p=t.on.left.toJS("p",e.defaultTableid,e.defcols),d=t.on.right.toJS("p",e.defaultTableid,e.defcols),-1<p.indexOf("p['"+u+"']")&&!(-1<d.indexOf("p['"+u+"']"))?(p.match(/p\['.*?'\]/g)||[]).every((function(e){return e==="p['"+u+"']"}))?s=p:h=!0:!(-1<p.indexOf("p['"+u+"']"))&&-1<d.indexOf("p['"+u+"']")&&(d.match(/p\['.*?'\]/g)||[]).every((function(e){return e==="p['"+u+"']"}))?a=p:h=!0,-1<d.indexOf("p['"+u+"']")&&!(-1<p.indexOf("p['"+u+"']"))?(d.match(/p\['.*?'\]/g)||[]).every((function(e){return e==="p['"+u+"']"}))?s=d:h=!0:!(-1<d.indexOf("p['"+u+"']"))&&-1<p.indexOf("p['"+u+"']")&&(p.match(/p\['.*?'\]/g)||[]).every((function(e){return e==="p['"+u+"']"}))?a=d:h=!0,h&&(a=s="",c=t.on.toJS("p",e.defaultTableid,e.defcols),r.optimization="no"),r.onleftfns=a,r.onrightfns=s,r.onmiddlefns=c||"true",r.onleftfn=new Function("p,params,alasql","var y;return "+r.onleftfns),r.onrightfn=new Function("p,params,alasql","var y;return "+r.onrightfns),r.onmiddlefn=new Function("p,params,alasql","var y;return "+r.onmiddlefns)):(r.optimization="no",r.onmiddlefns=t.on.toJS("p",e.defaultTableid,e.defcols),r.onmiddlefn=new Function("p,params,alasql","var y;return "+t.on.toJS("p",e.defaultTableid,e.defcols)))),e.sources.push(r)}))},z.Select.prototype.compileWhere=function(e){if(this.where){if("function"==typeof this.where)return this.where;var t=this.where.toJS("p",e.defaultTableid,e.defcols);return e.wherefns=t,new Function("p,params,alasql","var y;return "+t)}return function(){return!0}},z.Select.prototype.compileWhereJoins=function(e){},z.Select.prototype.compileGroup=function(e){var t;t=0<e.sources.length?e.sources[0].alias:"";var n=e.defcols,r=[[]];this.group&&(r=Z(this.group,e));var i=[];r.forEach((function(e){i=x(i,e)})),e.allgroups=i,e.ingroup=[];var o="";return r.forEach((function(r){o+="var g=this.xgroups[";var a=r.map((function(t){var n=t.split("\t")[0];return t=t.split("\t")[1],""===n?"1":(e.ingroup.push(n),t)}));0===a.length&&(a=["''"]),o+=a.join('+"`"+'),o+="];if(!g) {this.groups.push((g=this.xgroups[",o+=a.join('+"`"+'),o+="] = {",o+=r.map((function(e){var t=e.split("\t")[0];return e=e.split("\t")[1],""===t?"":"'"+t+"':"+e+","})).join(""),r=w(i,r),o+=r.map((function(e){return"'"+e.split("\t")[0]+"':null,"})).join("");var s="";r="",void 0!==e.groupStar&&(r+="for(var f in p['"+e.groupStar+"']) {g[f]=p['"+e.groupStar+"'][f];};"),o+=e.selectGroup.map((function(r){var i=r.expression.toJS("p",t,n),o=r.nick;return r instanceof z.AggrValue?(r.distinct&&(s+=",g['$$_VALUES_"+o+"']={},g['$$_VALUES_"+o+"']["+i+"]=true"),"SUM"===r.aggregatorid?"'"+o+"':("+i+")||0,":"MIN"===r.aggregatorid||"MAX"===r.aggregatorid||"FIRST"===r.aggregatorid||"LAST"===r.aggregatorid?"'"+o+"':"+i+",":"ARRAY"===r.aggregatorid?"'"+o+"':["+i+"],":"COUNT"===r.aggregatorid?"*"===r.expression.columnid?"'"+o+"':1,":"'"+o+"':(typeof "+i+' == "undefined" || '+i+" === null) ? 0 : 1,":"AVG"===r.aggregatorid?(e.removeKeys.push("_SUM_"+o),e.removeKeys.push("_COUNT_"+o),"'"+o+"':"+i+",'_SUM_"+o+"':("+i+")||0,'_COUNT_"+o+"':(typeof "+i+' == "undefined" || '+i+" === null) ? 0 : 1,"):"AGGR"===r.aggregatorid?(s+=",g['"+o+"']="+r.expression.toJS("g",-1),""):"REDUCE"===r.aggregatorid?(e.aggrKeys.push(r),"'"+o+"':alasql.aggr['"+r.funcid+"']("+i+",undefined,1),"):""):""})).join(""),o+="}"+s+",g));"+r+"} else {",o+=e.selectGroup.map((function(e){var r=e.nick,i=e.expression.toJS("p",t,n);if(e instanceof z.AggrValue){var o="",a="";return e.distinct&&(o="if(typeof "+i+'!="undefined" && (!g[\'$$_VALUES_'+r+"']["+i+"])) \t\t\t\t \t\t {",a="g['$$_VALUES_"+r+"']["+i+"]=true;}"),"SUM"===e.aggregatorid?o+"g['"+r+"']+=("+i+"||0);"+a:"COUNT"===e.aggregatorid?"*"===e.expression.columnid?o+"g['"+r+"']++;"+a:o+"if(typeof "+i+'!="undefined" && '+i+" !== null) g['"+r+"']++;"+a:"ARRAY"===e.aggregatorid?o+"g['"+r+"'].push("+i+");"+a:"MIN"===e.aggregatorid?o+"if ((y="+i+") < g['"+r+"']) g['"+r+"'] = y;"+a:"MAX"===e.aggregatorid?o+"if ((y="+i+") > g['"+r+"']) g['"+r+"'] = y;"+a:"FIRST"===e.aggregatorid?"":"LAST"===e.aggregatorid?o+"g['"+r+"']="+i+";"+a:"AVG"===e.aggregatorid?o+"g['_SUM_"+r+"']+=(y="+i+")||0;g['_COUNT_"+r+"']+=(typeof y == \"undefined\" || y === null) ? 0 : 1;g['"+r+"']=g['_SUM_"+r+"']/g['_COUNT_"+r+"'];"+a:"AGGR"===e.aggregatorid?o+"g['"+r+"']="+e.expression.toJS("g",-1)+";"+a:"REDUCE"===e.aggregatorid?o+"g['"+r+"']=alasql.aggr."+e.funcid+"("+i+",g['"+r+"'],2);"+a:""}return""})).join(""),o+="}"})),new Function("p,params,alasql","var y;"+o)},z.Select.prototype.compileSelect1=function(e,t){var n=this;e.columns=[],e.xcolumns={},e.selectColumns={},e.dirtyColumns=!1;var r="var r={",i="",a=[];return this.columns.forEach((function(r){if(r instanceof z.Column)if("*"===r.columnid)r.func?i+="r=params['"+r.param+"'](p['"+e.sources[0].alias+"'],p,params,alasql);":(r.tableid?(l=$(e,[r.tableid],!1)).s&&(a=a.concat(l.s)):(l=$(e,Object.keys(e.aliases),!0)).s&&(a=a.concat(l.s)),i+=l.sp);else{var s=r.tableid,u=r.databaseid||e.sources[0].databaseid||e.database.databaseid;if(s=(s=s||e.defcols[r.columnid])||e.defaultTableid,"_"!==r.columnid?t&&1<t.length&&Array.isArray(t[0])&&1<=t[0].length&&t[0][0].hasOwnProperty("sheetid")?i='var r={};var w=p["'+s+'"];var cols=['+n.columns.map((function(e){return"'"+e.columnid+"'"})).join(",")+"];var colas=["+n.columns.map((function(e){return"'"+(e.as||e.columnid)+"'"})).join(",")+"];for (var i=0;i<Object.keys(p['"+s+"']).length;i++) for(var k=0;k<cols.length;k++){if (!r.hasOwnProperty(i)) r[i]={}; r[i][colas[k]]=w[i][cols[k]];}":a.push("'"+g(r.as||r.columnid)+"':p['"+s+"']['"+r.columnid+"']"):a.push("'"+g(r.as||r.columnid)+"':p['"+s+"']"),e.selectColumns[g(r.as||r.columnid)]=!0,e.aliases[s]&&"table"===e.aliases[s].type){if(!o.databases[u].tables[e.aliases[s].tableid])throw new Error("Table '"+s+"' does not exist in database");var l=o.databases[u].tables[e.aliases[s].tableid].columns;if((s=o.databases[u].tables[e.aliases[s].tableid].xcolumns)&&0<l.length){if(void 0===(h=s[r.columnid]))throw new Error("Column does not exist: "+r.columnid);var h={columnid:r.as||r.columnid,dbtypeid:h.dbtypeid,dbsize:h.dbsize,dbpecision:h.dbprecision,dbenum:h.dbenum};e.columns.push(h),e.xcolumns[h.columnid]=h}else h={columnid:r.as||r.columnid},e.columns.push(h),e.xcolumns[h.columnid]=h,e.dirtyColumns=!0}else h={columnid:r.as||r.columnid},e.columns.push(h),e.xcolumns[h.columnid]=h}else r instanceof z.AggrValue?(n.group||(n.group=[""]),r.as||(r.as=g(r.toString())),"SUM"===r.aggregatorid||"MAX"===r.aggregatorid||"MIN"===r.aggregatorid||"FIRST"===r.aggregatorid||"LAST"===r.aggregatorid||"AVG"===r.aggregatorid||"ARRAY"===r.aggregatorid||"REDUCE"===r.aggregatorid?a.push("'"+g(r.as)+"':"+c(r.expression.toJS("p",e.defaultTableid,e.defcols))):"COUNT"===r.aggregatorid&&a.push("'"+g(r.as)+"':1")):(a.push("'"+g(r.as||r.columnid||r.toString())+"':"+c(r.toJS("p",e.defaultTableid,e.defcols))),e.selectColumns[g(r.as||r.columnid||r.toString())]=!0),h={columnid:r.as||r.columnid||r.toString()},e.columns.push(h),e.xcolumns[h.columnid]=h})),r+(a.join(",")+"};")+i},z.Select.prototype.compileSelect2=function(e,t){var n=e.selectfns;return this.orderColumns&&0<this.orderColumns.length&&this.orderColumns.forEach((function(r,i){i="$$$"+i,r instanceof z.Column&&e.xcolumns[r.columnid]?n+="r['"+i+"']=r['"+r.columnid+"'];":r instanceof z.ParamValue&&e.xcolumns[t[r.param]]?n+="r['"+i+"']=r['"+t[r.param]+"'];":n+="r['"+i+"']="+r.toJS("p",e.defaultTableid,e.defcols)+";",e.removeKeys.push(i)})),new Function("p,params,alasql","var y;"+n+"return r")},z.Select.prototype.compileSelectGroup0=function(e){var t=this;t.columns.forEach((function(n,r){if(n instanceof z.Column&&"*"===n.columnid)e.groupStar=n.tableid||"default";else{for(var i,o=n instanceof z.Column?g(n.columnid):g(n.toString(!0)),a=0;a<r;a++)if(o===t.columns[a].nick){o=t.columns[a].nick+":"+r;break}n.nick=o,!t.group||-1<(i=t.group.findIndex((function(e){return e.columnid===n.columnid&&e.tableid===n.tableid})))&&(t.group[i].nick=o),!n.funcid||"ROWNUM"!==n.funcid.toUpperCase()&&"ROW_NUMBER"!==n.funcid.toUpperCase()||e.rownums.push(n.as)}})),this.columns.forEach((function(t){t.findAggregator&&t.findAggregator(e)})),this.having&&this.having.findAggregator&&this.having.findAggregator(e)},z.Select.prototype.compileSelectGroup1=function(e){var t="var r = {};";return this.columns.forEach((function(n){if(n instanceof z.Column&&"*"===n.columnid)return t+="for(var k in g) {r[k]=g[k]};","";var r=n.as;void 0===r&&(r=n instanceof z.Column?g(n.columnid):n.nick),e.groupColumns[r]=n.nick,t+="r['"+r+"']=",t+=c(n.toJS("g",""))+";";for(var i=0;i<e.removeKeys.length;i++)if(e.removeKeys[i]===r){e.removeKeys.splice(i,1);break}})),t},z.Select.prototype.compileSelectGroup2=function(e){var t=e.selectgfns;return this.columns.forEach((function(n){-1<e.ingroup.indexOf(n.nick)&&(t+="r['"+(n.as||n.nick)+"']=g['"+n.nick+"'];")})),this.orderColumns&&0<this.orderColumns.length&&this.orderColumns.forEach((function(n,r){r="$$$"+r,n instanceof z.Column&&e.groupColumns[n.columnid]?t+="r['"+r+"']=r['"+n.columnid+"'];":t+="r['"+r+"']="+n.toJS("g","")+";",e.removeKeys.push(r)})),new Function("g,params,alasql","var y;"+t+"return r")},z.Select.prototype.compileRemoveColumns=function(e){void 0!==this.removecolumns&&(e.removeKeys=e.removeKeys.concat(this.removecolumns.filter((function(e){return void 0===e.like})).map((function(e){return e.columnid}))),e.removeLikeKeys=this.removecolumns.filter((function(e){return void 0!==e.like})).map((function(e){return e.like.value})))},z.Select.prototype.compileHaving=function(e){if(this.having){var t=this.having.toJS("g",-1);return e.havingfns=t,new Function("g,params,alasql","var y;return "+t)}return function(){return!0}},z.Select.prototype.compileOrder=function(e,t){var n=this;if(n.orderColumns=[],this.order){if(this.order&&1==this.order.length&&this.order[0].expression&&"function"==typeof this.order[0].expression){var r=this.order[0].expression,i="FIRST"==this.order[0].nullsOrder?-1:"LAST"==this.order[0].nullsOrder?1:0;return function(e,t){if(e=r(e),t=r(t),i){if(null==e)return null==t?0:i;if(null==t)return-i}return t<e?1:e==t?0:-1}}var a="",s="";return this.order.forEach((function(r,i){c=r.expression instanceof z.NumValue?n.columns[r.expression.value-1]:r.expression,n.orderColumns.push(c);var u,l,c="$$$"+i;i="",r.expression instanceof z.Column&&(u=r.expression.columnid,e.xcolumns[u]?"DATE"!=(l=e.xcolumns[u].dbtypeid)&&"DATETIME"!=l&&"DATETIME2"!=l||(i=".valueOf()"):o.options.valueof&&(i=".valueOf()")),r.expression instanceof z.ParamValue&&(u=t[r.expression.param],e.xcolumns[u]?"DATE"!=(l=e.xcolumns[u].dbtypeid)&&"DATETIME"!=l&&"DATETIME2"!=l||(i=".valueOf()"):o.options.valueof&&(i=".valueOf()")),r.nocase&&(i+=".toUpperCase()"),r.nullsOrder&&("FIRST"==r.nullsOrder?a+="if((a['"+c+"'] != null) && (b['"+c+"'] == null)) return 1;":"LAST"==r.nullsOrder&&(a+="if((a['"+c+"'] == null) && (b['"+c+"'] != null)) return 1;"),a+="if((a['"+c+"'] == null) == (b['"+c+"'] == null)) {",s+="}"),a+="if((a['"+c+"']||'')"+i+("ASC"==r.direction?">":"<")+"(b['"+c+"']||'')"+i+")return 1;",a+="if((a['"+c+"']||'')"+i+"==(b['"+c+"']||'')"+i+"){",s+="}"})),a+="return 0;",a+=s+"return -1",e.orderfns=a,new Function("a,b","var y;"+a)}},z.Select.prototype.compilePivot=function(e){var t=this,n=t.pivot.columnid,r=t.pivot.expr.aggregatorid,i=t.pivot.inlist,a=null;if(null==(a=(t.pivot.expr.expression.hasOwnProperty("columnid")?t.pivot.expr:t.pivot.expr.expression).expression.columnid))throw"columnid not found";return i=i&&i.map((function(e){return e.expr.columnid})),function(){var e=this,t=e.columns.filter((function(e){return e.columnid!=n&&e.columnid!=a})).map((function(e){return e.columnid})),s=[],u={},l={},c={},h=[];if(e.data.forEach((function(e){if(!i||-1<i.indexOf(e[n])){var f=t.map((function(t){return e[t]})).join("`"),p=l[f];if(p||(p={},l[f]=p,h.push(p),t.forEach((function(t){p[t]=e[t]}))),c[f]||(c[f]={}),c[f][e[n]]?c[f][e[n]]++:c[f][e[n]]=1,u[e[n]]||(u[e[n]]=!0,s.push(e[n])),"SUM"==r||"AVG"==r)void 0===p[e[n]]&&(p[e[n]]=0),p[e[n]]+=+e[a];else if("COUNT"==r)void 0===p[e[n]]&&(p[e[n]]=0),p[e[n]]++;else if("MIN"==r)void 0===p[e[n]]&&(p[e[n]]=e[a]),e[a]<p[e[n]]&&(p[e[n]]=e[a]);else if("MAX"==r)void 0===p[e[n]]&&(p[e[n]]=e[a]),e[a]>p[e[n]]&&(p[e[n]]=e[a]);else if("FIRST"==r)void 0===p[e[n]]&&(p[e[n]]=e[a]);else if("LAST"==r)p[e[n]]=e[a];else{if(!o.aggr[r])throw new Error("Wrong aggregator in PIVOT clause");o.aggr[r](p[e[n]],e[a])}}})),"AVG"==r)for(var f in l){var p,d=l[f];for(p in d)-1==t.indexOf(p)&&p!=a&&(d[p]=d[p]/c[f][p])}e.data=h,i&&(s=i);var g=e.columns.filter((function(e){return e.columnid==a}))[0];e.columns=e.columns.filter((function(e){return!(e.columnid==n||e.columnid==a)})),s.forEach((function(t){var n=C(g);n.columnid=t,e.columns.push(n)}))}},z.Select.prototype.compileUnpivot=function(e){var t=this.unpivot.tocolumnid,n=this.unpivot.forcolumnid,r=this.unpivot.inlist.map((function(e){return e.columnid}));return function(){var i=[],o=e.columns.map((function(e){return e.columnid})).filter((function(e){return-1==r.indexOf(e)&&e!=n&&e!=t}));e.data.forEach((function(e){r.forEach((function(r){var a={};o.forEach((function(t){a[t]=e[t]})),a[n]=r,a[t]=e[r],i.push(a)}))})),e.data=i}};var H=function(e,t){for(var n=[],r=0,i=e.length,o=0;o<i+1;o++){for(var a,s=[],u=0;u<i;u++)a=e[u]instanceof z.Column?(e[u].nick=g(e[u].columnid),t.groupColumns[g(e[u].columnid)]=e[u].nick,e[u].nick+"\t"+e[u].toJS("p",t.sources[0].alias,t.defcols)):(t.groupColumns[g(e[u].toString())]=g(e[u].toString()),g(e[u].toString())+"\t"+e[u].toJS("p",t.sources[0].alias,t.defcols)),r&1<<u&&s.push(a);n.push(s),r=1+(r<<1)}return n},X=function(e,t){for(var n=[],r=e.length,i=1<<r,o=0;o<i;o++){for(var a=[],s=0;s<r;s++)o&1<<s&&(a=a.concat(Z(e[s],t)));n.push(a)}return n},W=function(e,t){return e.reduce((function(e,n){return e.concat(Z(n,t))}),[])},Y=function(e,t){for(var n=[],r=0;r<e.length;r++)for(var i=0;i<t.length;i++)n.push(e[r].concat(t[i]));return n};function Z(e,t){if(Array.isArray(e)){for(var n=[[]],r=0;r<e.length;r++)if(e[r]instanceof z.Column)e[r].nick=e[r].nick?g(e[r].nick):g(e[r].columnid),t.groupColumns[e[r].nick]=e[r].nick,n=n.map((function(n){return n.concat(e[r].nick+"\t"+e[r].toJS("p",t.sources[0].alias,t.defcols))}));else if(e[r]instanceof z.FuncValue)t.groupColumns[g(e[r].toString())]=g(e[r].toString()),n=n.map((function(n){return n.concat(g(e[r].toString())+"\t"+e[r].toJS("p",t.sources[0].alias,t.defcols))}));else if(e[r]instanceof z.GroupExpression)if("ROLLUP"==e[r].type)n=Y(n,H(e[r].group,t));else if("CUBE"==e[r].type)n=Y(n,X(e[r].group,t));else{if("GROUPING SETS"!=e[r].type)throw new Error("Unknown grouping function");n=Y(n,W(e[r].group,t))}else n=""===e[r]?[["1\t1"]]:n.map((function(n){return t.groupColumns[g(e[r].toString())]=g(e[r].toString()),n.concat(g(e[r].toString())+"\t"+e[r].toJS("p",t.sources[0].alias,t.defcols))}));return n}return e instanceof z.FuncValue?(t.groupColumns[g(e.toString())]=g(e.toString()),[e.toString()+"\t"+e.toJS("p",t.sources[0].alias,t.defcols)]):e instanceof z.Column?(e.nick=g(e.columnid),t.groupColumns[e.nick]=e.nick,[e.nick+"\t"+e.toJS("p",t.sources[0].alias,t.defcols)]):(t.groupColumns[g(e.toString())]=g(e.toString()),[g(e.toString())+"\t"+e.toJS("p",t.sources[0].alias,t.defcols)])}z.Select.prototype.compileDefCols=function(e,t){var n={".":{}};return this.from&&this.from.forEach((function(e){if(n["."][e.as||e.tableid]=!0,e instanceof z.Table){var r=e.as||e.tableid,i=o.databases[e.databaseid||t].tables[e.tableid];if(void 0===i)throw new Error("Table does not exist: "+e.tableid);i.columns&&i.columns.forEach((function(e){n[e.columnid]?n[e.columnid]="-":n[e.columnid]=r}))}else if(!(e instanceof z.Select||e instanceof z.Search||e instanceof z.ParamValue||e instanceof z.VarValue||e instanceof z.FuncValue||e instanceof z.FromData||e instanceof z.Json||e.inserted))throw new Error("Unknown type of FROM clause")})),this.joins&&this.joins.forEach((function(e){if(n["."][e.as||e.table.tableid]=!0,e.table){var r=e.table.tableid;e.as&&(r=e.as),r=e.as||e.table.tableid;var i=o.databases[e.table.databaseid||t].tables[e.table.tableid];i.columns&&i.columns.forEach((function(e){n[e.columnid]?n[e.columnid]="-":n[e.columnid]=r}))}else if(!e.select&&!e.param&&!e.func)throw new Error("Unknown type of FROM clause")})),n},z.Union=function(e){return z.extend(this,e)},z.Union.prototype.toString=function(){return"UNION"},z.Union.prototype.compile=function(e){return null},z.Apply=function(e){return z.extend(this,e)},z.Apply.prototype.toString=function(){var e=this.applymode+" APPLY ("+this.select.toString()+")";return this.as&&(e+=" AS "+this.as),e},z.Over=function(e){return z.extend(this,e)},z.Over.prototype.toString=function(){var e="OVER (";return this.partition&&(e+="PARTITION BY "+this.partition.toString(),this.order&&(e+=" ")),this.order&&(e+="ORDER BY "+this.order.toString()),e+")"},z.ExpressionStatement=function(e){return z.extend(this,e)},z.ExpressionStatement.prototype.toString=function(){return this.expression.toString()},z.ExpressionStatement.prototype.execute=function(e,t,n){if(this.expression)return o.precompile(this,e,t),t=new Function("params,alasql,p","var y;return "+this.expression.toJS("({})","",null)).bind(this)(t,o),n&&(t=n(t)),t},z.Expression=function(e){return z.extend(this,e)},z.Expression.prototype.toString=function(e){return e=this.expression.toString(e),this.order&&(e+=" "+this.order.toString()),this.nocase&&(e+=" COLLATE NOCASE"),this.direction&&(e+=" "+this.direction),e},z.Expression.prototype.findAggregator=function(e){this.expression.findAggregator&&this.expression.findAggregator(e)},z.Expression.prototype.toJS=function(e,t,n){return this.expression.reduced?"true":this.expression.toJS(e,t,n)},z.Expression.prototype.compile=function(e,t,n){return!!this.reduced||new Function("p","var y;return "+this.toJS(e,t,n))},z.JavaScript=function(e){return z.extend(this,e)},z.JavaScript.prototype.toString=function(){return"``"+this.value+"``"},z.JavaScript.prototype.toJS=function(){return"("+this.value+")"},z.JavaScript.prototype.execute=function(e,t,n){var r=1;return new Function("params,alasql,p",this.value)(t,o),n&&(r=n(r)),r},z.Literal=function(e){return z.extend(this,e)},z.Literal.prototype.toString=function(e){var t=this.value;return this.value1&&(t=this.value1+"."+t),this.alias&&!e&&(t+=" AS "+this.alias),t},z.Join=function(e){return z.extend(this,e)},z.Join.prototype.toString=function(){var e=" ";return this.joinmode&&(e+=this.joinmode+" "),e+"JOIN "+this.table.toString()},z.Table=function(e){return z.extend(this,e)},z.Table.prototype.toString=function(){var e=this.tableid;return this.databaseid&&(e=this.databaseid+"."+e),e},z.View=function(e){return z.extend(this,e)},z.View.prototype.toString=function(){var e=this.viewid;return this.databaseid&&(e=this.databaseid+"."+e),e},z.Op=function(e){return z.extend(this,e)},z.Op.prototype.toString=function(){if("IN"===this.op||"NOT IN"===this.op)return this.left.toString()+" "+this.op+" ("+this.right.toString()+")";if(this.allsome)return this.left.toString()+" "+this.op+" "+this.allsome+" ("+this.right.toString()+")";if("->"!==this.op&&"!"!==this.op)return"BETWEEN"!==this.op&&"NOT BETWEEN"!==this.op?this.left.toString()+" "+this.op+" "+(this.allsome?this.allsome+" ":"")+this.right.toString():e=this.left.toString()+" "+this.op+" "+this.right1.toString()+" AND "+this.right2.toString();var e=this.left.toString()+this.op;return"string"!=typeof this.right&&"number"!=typeof this.right&&(e+="("),e+=this.right.toString(),"string"!=typeof this.right&&"number"!=typeof this.right&&(e+=")"),e},z.Op.prototype.findAggregator=function(e){this.left&&this.left.findAggregator&&this.left.findAggregator(e),this.right&&this.right.findAggregator&&!this.allsome&&this.right.findAggregator(e)},z.Op.prototype.toType=function(e){if(-1<["-","*","/","%","^"].indexOf(this.op))return"number";if(-1<["||"].indexOf(this.op))return"string";if("+"===this.op){if("string"===this.left.toType(e)||"string"===this.right.toType(e))return"string";if("number"===this.left.toType(e)||"number"===this.right.toType(e))return"number"}return-1<["AND","OR","NOT","=","==","===","!=","!==","!===",">",">=","<","<=","IN","NOT IN","LIKE","NOT LIKE","REGEXP","GLOB"].indexOf(this.op)||"BETWEEN"===this.op||"NOT BETWEEN"===this.op||"IS NULL"===this.op||"IS NOT NULL"===this.op||this.allsome?"boolean":this.op?"unknown":this.left.toType()},z.Op.prototype.toJS=function(e,t,n){function r(r){return r.toJS&&(r=r.toJS(e,t,n)),"y["+(a.push(r)-1)+"]"}var i,o,a=[],s=this.op,u=this,l=function(){return r(u.left)},c=function(){return r(u.right)};if("="===this.op?s="===":"<>"===this.op?s="!=":"OR"===this.op&&(s="||"),"->"===this.op&&(i="("+l()+"||{})",o="string"==typeof this.right?i+'["'+this.right+'"]':"number"==typeof this.right?i+"["+this.right+"]":this.right instanceof z.FuncValue?(o=[],this.right.args&&0!==this.right.args.length&&(o=this.right.args.map(r)),i+"['"+this.right.funcid+"']("+o.join(",")+")"):i+"["+c()+"]"),"!"===this.op&&"string"==typeof this.right&&(o="alasql.databases[alasql.useid].objects["+l()+']["'+this.right+'"]'),"IS"===this.op&&(o="(("+l()+"==null) === ("+c()+"==null))"),"=="===this.op&&(o="alasql.utils.deepEqual("+l()+","+c()+")"),"==="!==this.op&&"!==="!==this.op||(o="("+("!==="===this.op?"!":"")+"(("+l()+").valueOf()===("+c()+").valueOf()))"),"!=="===this.op&&(o="(!alasql.utils.deepEqual("+l()+","+c()+"))"),"||"===this.op&&(o="(''+("+l()+"||'')+("+c()+'||""))'),"LIKE"!==this.op&&"NOT LIKE"!==this.op||(o="("+("NOT LIKE"===this.op?"!":"")+"alasql.utils.like("+c()+","+l(),this.escape&&(o+=","+r(this.escape)),o+="))"),"REGEXP"===this.op&&(o="alasql.stdfn.REGEXP_LIKE("+l()+","+c()+")"),"GLOB"===this.op&&(o="alasql.utils.glob("+l()+","+c()+")"),"BETWEEN"!==this.op&&"NOT BETWEEN"!==this.op||(i=l(),o="("+("NOT BETWEEN"===this.op?"!":"")+"(("+r(this.right1)+"<="+i+") && ("+i+"<="+r(this.right2)+")))"),"IN"===this.op&&(this.right instanceof z.Select?(o="(",o+="alasql.utils.flatArray(this.queriesfn["+this.queriesidx+"](params,null,"+e+"))",o+=".indexOf(",o+=l()+")>-1)"):o=Array.isArray(this.right)?"(["+this.right.map(r).join(",")+"].indexOf("+l()+")>-1)":"("+c()+".indexOf("+l()+")>-1)"),"NOT IN"===this.op&&(this.right instanceof z.Select?(o="(",o+="alasql.utils.flatArray(this.queriesfn["+this.queriesidx+"](params,null,p))",o+=".indexOf(",o+=l()+")<0)"):Array.isArray(this.right)?(o="(["+this.right.map(r).join(",")+"].indexOf(",o+=l()+")<0)"):(o="("+c()+".indexOf(",o+=l()+")==-1)")),"ALL"===this.allsome)if(this.right instanceof z.Select)o="alasql.utils.flatArray(this.query.queriesfn["+this.queriesidx+"](params,null,p))",o+=".every(function(b){return (",o+=l()+")"+s+"b})";else{if(!Array.isArray(this.right))throw new Error("NOT IN operator without SELECT");o=""+(1==this.right.length?r(this.right[0]):"["+this.right.map(r).join(",")+"]"),o+=".every(function(b){return (",o+=l()+")"+s+"b})"}if("SOME"===this.allsome||"ANY"===this.allsome)if(this.right instanceof z.Select)o="alasql.utils.flatArray(this.query.queriesfn["+this.queriesidx+"](params,null,p))",o+=".some(function(b){return (",o+=l()+")"+s+"b})";else{if(!Array.isArray(this.right))throw new Error("SOME/ANY operator without SELECT");o=""+(1==this.right.length?r(this.right[0]):"["+this.right.map(r).join(",")+"]"),o+=".some(function(b){return (",o+=l()+")"+s+"b})"}if("AND"===this.op){if(this.left.reduced){if(this.right.reduced)return"true";o=c()}else this.right.reduced&&(o=l());s="&&"}return l=o||"("+l()+s+c()+")",c="y=[("+a.join("), (")+")]","&&"===s||"||"===s||"IS"===s||"IS NULL"===s||"IS NOT NULL"===s?"("+c+", "+l+")":"("+c+", y.some(function(e){return e == null}) ? void 0 : "+l+")"},z.VarValue=function(e){return z.extend(this,e)},z.VarValue.prototype.toString=function(){return"@"+this.variable},z.VarValue.prototype.toType=function(){return"unknown"},z.VarValue.prototype.toJS=function(){return"alasql.vars['"+this.variable+"']"},z.NumValue=function(e){return z.extend(this,e)},z.NumValue.prototype.toString=function(){return this.value.toString()},z.NumValue.prototype.toType=function(){return"number"},z.NumValue.prototype.toJS=function(){return""+this.value},z.StringValue=function(e){return z.extend(this,e)},z.StringValue.prototype.toString=function(){return"'"+this.value.toString()+"'"},z.StringValue.prototype.toType=function(){return"string"},z.StringValue.prototype.toJS=function(){return"'"+g(this.value)+"'"},z.DomainValueValue=function(e){return z.extend(this,e)},z.DomainValueValue.prototype.toString=function(){return"VALUE"},z.DomainValueValue.prototype.toType=function(){return"object"},z.DomainValueValue.prototype.toJS=function(e,t,n){return e},z.ArrayValue=function(e){return z.extend(this,e)},z.ArrayValue.prototype.toString=function(){return"ARRAY[]"},z.ArrayValue.prototype.toType=function(){return"object"},z.ArrayValue.prototype.toJS=function(e,t,n){return"[("+this.value.map((function(r){return r.toJS(e,t,n)})).join("), (")+")]"},z.LogicValue=function(e){return z.extend(this,e)},z.LogicValue.prototype.toString=function(){return this.value?"TRUE":"FALSE"},z.LogicValue.prototype.toType=function(){return"boolean"},z.LogicValue.prototype.toJS=function(){return this.value?"true":"false"},z.NullValue=function(e){return z.extend(this,e)},z.NullValue.prototype.toString=function(){return"NULL"},z.NullValue.prototype.toJS=function(){return"undefined"},z.ParamValue=function(e){return z.extend(this,e)},z.ParamValue.prototype.toString=function(){return"$"+this.param},z.ParamValue.prototype.toJS=function(){return"string"==typeof this.param?"params['"+this.param+"']":"params["+this.param+"]"},z.UniOp=function(e){return z.extend(this,e)},z.UniOp.prototype.toString=function(){var e=void 0;return"~"===this.op&&(e=this.op+this.right.toString()),"-"===this.op&&(e=this.op+this.right.toString()),"+"===this.op&&(e=this.op+this.right.toString()),"#"===this.op&&(e=this.op+this.right.toString()),"NOT"===this.op&&(e=this.op+"("+this.right.toString()+")"),null===this.op&&(e="("+this.right.toString()+")"),e||"("+this.right.toString()+")"},z.UniOp.prototype.findAggregator=function(e){this.right.findAggregator&&this.right.findAggregator(e)},z.UniOp.prototype.toType=function(){return"-"===this.op||"+"===this.op?"number":"NOT"===this.op?"boolean":void 0},z.UniOp.prototype.toJS=function(e,t,n){return"~"===this.op?"(~("+this.right.toJS(e,t,n)+"))":"-"===this.op?"(-("+this.right.toJS(e,t,n)+"))":"+"===this.op?"("+this.right.toJS(e,t,n)+")":"NOT"===this.op?"!("+this.right.toJS(e,t,n)+")":"#"===this.op?this.right instanceof z.Column?"(alasql.databases[alasql.useid].objects['"+this.right.columnid+"'])":"(alasql.databases[alasql.useid].objects["+this.right.toJS(e,t,n)+"])":null==this.op?"("+this.right.toJS(e,t,n)+")":void 0},z.Column=function(e){return z.extend(this,e)},z.Column.prototype.toString=function(e){var t=this.columnid==+this.columnid?"["+this.columnid+"]":this.columnid;return this.tableid&&(t=+this.columnid===this.columnid?this.tableid+t:this.tableid+"."+t,this.databaseid&&(t=this.databaseid+"."+t)),this.alias&&!e&&(t+=" AS "+this.alias),t},z.Column.prototype.toJS=function(e,t,n){var r="";if(this.tableid||""!==t||n)if("g"===e)r="g['"+this.nick+"']";else if(this.tableid)r="_"!==this.columnid?e+"['"+this.tableid+"']['"+this.columnid+"']":"g"===e?"g['_']":e+"['"+this.tableid+"']";else if(n){if("-"===(n=n[this.columnid]))throw new Error('Cannot resolve column "'+this.columnid+'" because it exists in two source tables');r=n?"_"!==this.columnid?e+"['"+n+"']['"+this.columnid+"']":e+"['"+n+"']":"_"!==this.columnid?e+"['"+(this.tableid||t)+"']['"+this.columnid+"']":e+"['"+(this.tableid||t)+"']"}else r=-1===t?e+"['"+this.columnid+"']":"_"!==this.columnid?e+"['"+(this.tableid||t)+"']['"+this.columnid+"']":e+"['"+(this.tableid||t)+"']";else r="_"!==this.columnid?e+"['"+this.columnid+"']":"g"===e?"g['_']":e;return r},z.AggrValue=function(e){return z.extend(this,e)},z.AggrValue.prototype.toString=function(e){var t="";return"REDUCE"===this.aggregatorid?t+=this.funcid+"(":t+=this.aggregatorid+"(",this.distinct&&(t+="DISTINCT "),this.expression&&(t+=this.expression.toString()),t+=")",this.over&&(t+=" "+this.over.toString()),this.alias&&!e&&(t+=" AS "+this.alias),t},z.AggrValue.prototype.findAggregator=function(e){var t=g(this.toString())+":"+e.selectGroup.length;if(!(n=!1)){if(!this.nick){this.nick=t;for(var n=!1,r=0;r<e.removeKeys.length;r++)if(e.removeKeys[r]===t){n=!0;break}n||e.removeKeys.push(t)}e.selectGroup.push(this)}},z.AggrValue.prototype.toType=function(){return-1<["SUM","COUNT","AVG","MIN","MAX","AGGR","VAR","STDDEV"].indexOf(this.aggregatorid)?"number":-1<["ARRAY"].indexOf(this.aggregatorid)?"array":-1<["FIRST","LAST"].indexOf(this.aggregatorid)?this.expression.toType():void 0},z.AggrValue.prototype.toJS=function(){var e=this.nick;return void 0===e&&(e=this.toString()),"g['"+e+"']"},z.OrderExpression=function(e){return z.extend(this,e)},z.OrderExpression.prototype.toString=z.Expression.prototype.toString,z.GroupExpression=function(e){return z.extend(this,e)},z.GroupExpression.prototype.toString=function(){return this.type+"("+this.group.toString()+")"},z.FromData=function(e){return z.extend(this,e)},z.FromData.prototype.toString=function(){return this.data?"DATA("+(1e16*Math.random()|0)+")":"?"},z.FromData.prototype.toJS=function(){},z.Select.prototype.exec=function(e,t){this.preparams&&(e=this.preparams.concat(e));var n=o.useid,r=o.databases[n],i=this.toString(),a=b(i);if(n=this.compile(n))return n.sql=i,n.dbversion=r.dbversion,r.sqlCacheSize>o.MAXSQLCACHESIZE&&r.resetSqlCache(),r.sqlCacheSize++,r.sqlCache[a]=n,o.res=n(e,t)},z.Select.prototype.Select=function(){var e=this,t=[];if(1<arguments.length)t=Array.prototype.slice.call(arguments);else{if(1!=arguments.length)throw new Error("Wrong number of arguments of Select() function");t=Array.isArray(arguments[0])?arguments[0]:[arguments[0]]}return e.columns=[],t.forEach((function(t){var n;"string"==typeof t?e.columns.push(new z.Column({columnid:t})):"function"==typeof t&&(n=0,e.preparams?n=e.preparams.length:e.preparams=[],e.preparams.push(t),e.columns.push(new z.Column({columnid:"*",func:t,param:n})))})),e},z.Select.prototype.From=function(e){var t=this;if(t.from||(t.from=[]),Array.isArray(e)){var n=0;t.preparams?n=t.preparams.length:t.preparams=[],t.preparams.push(e),t.from.push(new z.ParamValue({param:n}))}else{if("string"!=typeof e)throw new Error("Unknown arguments in From() function");t.from.push(new z.Table({tableid:e}))}return t},z.Select.prototype.OrderBy=function(){var e=this,t=[];if(e.order=[],0==arguments.length)t=["_"];else if(1<arguments.length)t=Array.prototype.slice.call(arguments);else{if(1!=arguments.length)throw new Error("Wrong number of arguments of Select() function");t=Array.isArray(arguments[0])?arguments[0]:[arguments[0]]}return 0<t.length&&t.forEach((function(t){var n=new z.Column({columnid:t});"function"==typeof t&&(n=t),e.order.push(new z.OrderExpression({expression:n,direction:"ASC"}))})),e},z.Select.prototype.Top=function(e){return this.top=new z.NumValue({value:e}),this},z.Select.prototype.GroupBy=function(){var e=this,t=[];if(1<arguments.length)t=Array.prototype.slice.call(arguments);else{if(1!=arguments.length)throw new Error("Wrong number of arguments of Select() function");t=Array.isArray(arguments[0])?arguments[0]:[arguments[0]]}return e.group=[],t.forEach((function(t){t=new z.Column({columnid:t}),e.group.push(t)})),e},z.Select.prototype.Where=function(e){return"function"==typeof e&&(this.where=e),this},z.FuncValue=function(e){return z.extend(this,e)},z.FuncValue.prototype.toString=function(e){var t="";return o.fn[this.funcid]||o.aggr[this.funcid]?t+=this.funcid:(o.stdlib[this.funcid.toUpperCase()]||o.stdfn[this.funcid.toUpperCase()])&&(t+=this.funcid.toUpperCase()),"CURRENT_TIMESTAMP"!==this.funcid&&(t+="(",this.args&&0<this.args.length&&(t+=this.args.map((function(e){return e.toString()})).join(",")),t+=")"),this.as&&!e&&(t+=" AS "+this.as.toString()),t},z.FuncValue.prototype.execute=function(e,t,n){var r=1;return o.precompile(this,e,t),new Function("params,alasql","var y;return "+this.toJS("","",null))(t,o),n&&(r=n(r)),r},z.FuncValue.prototype.findAggregator=function(e){this.args&&0<this.args.length&&this.args.forEach((function(t){t.findAggregator&&t.findAggregator(e)}))},z.FuncValue.prototype.toJS=function(e,t,n){var r="",i=this.funcid;return!o.fn[i]&&o.stdlib[i.toUpperCase()]?this.args&&0<this.args.length?r+=o.stdlib[i.toUpperCase()].apply(this,this.args.map((function(n){return n.toJS(e,t)}))):r+=o.stdlib[i.toUpperCase()]():(!o.fn[i]&&o.stdfn[i.toUpperCase()]?(this.newid&&(r+="new "),r+="alasql.stdfn."+this.funcid.toUpperCase()+"(",this.args&&0<this.args.length&&(r+=this.args.map((function(r){return r.toJS(e,t,n)})).join(","))):(this.newid&&(r+="new "),r+="alasql.fn."+this.funcid+"(",this.args&&0<this.args.length&&(r+=this.args.map((function(r){return r.toJS(e,t,n)})).join(","))),r+=")"),r},R=o.stdlib={},B=o.stdfn={},R.ABS=function(e){return"Math.abs("+e+")"},R.CLONEDEEP=function(e){return"alasql.utils.cloneDeep("+e+")"},B.CONCAT=function(){return Array.prototype.slice.call(arguments).join("")},R.EXP=function(e){return"Math.pow(Math.E,"+e+")"},R.IIF=function(e,t,n){if(3==arguments.length)return"(("+e+")?("+t+"):("+n+"))";throw new Error("Number of arguments of IFF is not equals to 3")},R.IFNULL=function(e,t){return"("+e+"||"+t+")"},R.INSTR=function(e,t){return"(("+e+").indexOf("+t+")+1)"},R.LEN=R.LENGTH=function(e){return h(e,"y.length")},R.LOWER=R.LCASE=function(e){return h(e,"String(y).toLowerCase()")},R.LTRIM=function(e){return h(e,'y.replace(/^[ ]+/,"")')},R.RTRIM=function(e){return h(e,'y.replace(/[ ]+$/,"")')},R.MAX=R.GREATEST=function(){return"["+Array.prototype.join.call(arguments,",")+"].reduce(function (a, b) { return a > b ? a : b; })"},R.MIN=R.LEAST=function(){return"["+Array.prototype.join.call(arguments,",")+"].reduce(function (a, b) { return a < b ? a : b; })"},R.SUBSTRING=R.SUBSTR=R.MID=function(e,t,n){return 2==arguments.length?h(e,"y.substr("+t+"-1)"):3==arguments.length?h(e,"y.substr("+t+"-1,"+n+")"):void 0},B.REGEXP_LIKE=function(e,t,n){return-1<(e||"").search(RegExp(t,n))},R.ISNULL=R.NULLIF=function(e,t){return"("+e+"=="+t+"?undefined:"+e+")"},R.POWER=function(e,t){return"Math.pow("+e+","+t+")"},R.RANDOM=function(e){return 0==arguments.length?"Math.random()":"(Math.random()*("+e+")|0)"},R.ROUND=function(e,t){return 2==arguments.length?"Math.round(("+e+")*Math.pow(10,("+t+")))/Math.pow(10,("+t+"))":"Math.round("+e+")"},R.CEIL=R.CEILING=function(e){return"Math.ceil("+e+")"},R.FLOOR=function(e){return"Math.floor("+e+")"},R.ROWNUM=function(){return"1"},R.ROW_NUMBER=function(){return"1"},R.SQRT=function(e){return"Math.sqrt("+e+")"},R.TRIM=function(e){return h(e,"y.trim()")},R.UPPER=R.UCASE=function(e){return h(e,"String(y).toUpperCase()")},B.CONCAT_WS=function(){var e=Array.prototype.slice.call(arguments);return e.slice(1,e.length).join(e[0])},o.aggr.GROUP_CONCAT=function(e,t,n){return 1===n?""+e:2===n?t+=","+e:t},o.aggr.MEDIAN=function(e,t,n){return 2===n?(null!==e&&t.push(e),t):1===n?null===e?[]:[e]:t.length?(e=((n=t.sort((function(e,t){return e===t?0:t<e?1:-1}))).length+1)/2,Number.isInteger(e)?n[e-1]:"number"==typeof(t=n[Math.floor(e-1)])||t instanceof Number?(t+n[Math.ceil(e-1)])/2:t):t},o.aggr.QUART=function(e,t,n,r){return 2===n?(null!==e&&t.push(e),t):1===n?null===e?[]:[e]:t.length?(r=(r=r||1)*((t=t.sort((function(e,t){return e===t?0:t<e?1:-1}))).length+1)/4,Number.isInteger(r)?t[r-1]:t[Math.floor(r)]):t},o.aggr.QUART2=function(e,t,n){return o.aggr.QUART(e,t,n,2)},o.aggr.QUART3=function(e,t,n){return o.aggr.QUART(e,t,n,3)},o.aggr.VAR=function(e,t,n){if(1===n)return null===e?{arr:[],sum:0}:{arr:[e],sum:e};if(2===n)return null===e||(t.arr.push(e),t.sum+=e),t;for(var r=t.arr.length,i=t.sum/r,o=0,a=0;a<r;a++)o+=(t.arr[a]-i)*(t.arr[a]-i);return o/(r-1)},o.aggr.STDEV=function(e,t,n){return 1===n||2===n?o.aggr.VAR(e,t,n):Math.sqrt(o.aggr.VAR(e,t,n))},o.aggr.VARP=function(e,t,n){if(1==n)return{arr:[e],sum:e};if(2==n)return t.arr.push(e),t.sum+=e,t;for(var r=t.arr.length,i=t.sum/r,o=0,a=0;a<r;a++)o+=(t.arr[a]-i)*(t.arr[a]-i);return o/r},o.aggr.STD=o.aggr.STDDEV=o.aggr.STDEVP=function(e,t,n){return 1==n||2==n?o.aggr.VARP(e,t,n):Math.sqrt(o.aggr.VARP(e,t,n))},o._aggrOriginal=o.aggr,o.aggr={},Object.keys(o._aggrOriginal).forEach((function(e){o.aggr[e]=function(t,n,r){if(3!==r||void 0!==n)return o._aggrOriginal[e].apply(null,arguments)}})),B.REPLACE=function(e,t,n){return(e||"").split(t).join(n)};for(var J=[],K=0;K<256;K++)J[K]=(K<16?"0":"")+K.toString(16);B.NEWID=B.UUID=B.GEN_RANDOM_UUID=function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return J[255&e]+J[e>>8&255]+J[e>>16&255]+J[e>>24&255]+"-"+J[255&t]+J[t>>8&255]+"-"+J[t>>16&15|64]+J[t>>24&255]+"-"+J[63&n|128]+J[n>>8&255]+"-"+J[n>>16&255]+J[n>>24&255]+J[255&r]+J[r>>8&255]+J[r>>16&255]+J[r>>24&255]},z.CaseValue=function(e){return z.extend(this,e)},z.CaseValue.prototype.toString=function(){var e="CASE ";return this.expression&&(e+=this.expression.toString()),this.whens&&(e+=this.whens.map((function(e){return" WHEN "+e.when.toString()+" THEN "+e.then.toString()})).join()),e+" END"},z.CaseValue.prototype.findAggregator=function(e){this.expression&&this.expression.findAggregator&&this.expression.findAggregator(e),this.whens&&0<this.whens.length&&this.whens.forEach((function(t){t.when.findAggregator&&t.when.findAggregator(e),t.then.findAggregator&&t.then.findAggregator(e)})),this.elses&&this.elses.findAggregator&&this.elses.findAggregator(e)},z.CaseValue.prototype.toJS=function(e,t,n){var r="((function("+e+",params,alasql){var y,r;";return this.expression?(r+="v="+this.expression.toJS(e,t,n)+";",r+=(this.whens||[]).map((function(r){return" if(v=="+r.when.toJS(e,t,n)+") {r="+r.then.toJS(e,t,n)+"}"})).join(" else ")):r+=(this.whens||[]).map((function(r){return" if("+r.when.toJS(e,t,n)+") {r="+r.then.toJS(e,t,n)+"}"})).join(" else "),this.elses&&(r+=" else {r="+this.elses.toJS(e,t,n)+"}"),r+";return r;}).bind(this))("+e+",params,alasql)"},z.Json=function(e){return z.extend(this,e)},z.Json.prototype.toString=function(){var e="";return(e+=Q(this.value))+""};var Q=o.utils.JSONtoString=function(e){var t="";if("string"==typeof e)t='"'+e+'"';else if("number"==typeof e)t=e;else if("boolean"==typeof e)t=e;else{if("object"!=typeof e)throw new Error("2Can not show JSON object "+JSON.stringify(e));if(Array.isArray(e))t+="["+e.map((function(e){return Q(e)})).join(",")+"]";else if(!e.toJS||e instanceof z.Json){t="{";var n,r=[];for(n in e){var i="";if("string"==typeof n)i+='"'+n+'"';else if("number"==typeof n)i+=n;else{if("boolean"!=typeof n)throw new Error("THis is not ES6... no expressions on left side yet");i+=n}i+=":"+Q(e[n]),r.push(i)}t+=r.join(",")+"}"}else{if(!e.toString)throw new Error("1Can not show JSON object "+JSON.stringify(e));t=e.toString()}}return t};function ee(e,t,n,r){var i="";if("string"==typeof e)i='"'+e+'"';else if("number"==typeof e)i="("+e+")";else if("boolean"==typeof e)i=e;else{if("object"!=typeof e)throw new Error("2Can not parse JSON object "+JSON.stringify(e));if(Array.isArray(e))i+="["+e.map((function(e){return ee(e,t,n,r)})).join(",")+"]";else if(!e.toJS||e instanceof z.Json){i="{";var o,a=[];for(o in e){var s="";if("string"==typeof o)s+='"'+o+'"';else if("number"==typeof o)s+=o;else{if("boolean"!=typeof o)throw new Error("THis is not ES6... no expressions on left side yet");s+=o}s+=":"+ee(e[o],t,n,r),a.push(s)}i+=a.join(",")+"}"}else{if(!e.toJS)throw new Error("1Can not parse JSON object "+JSON.stringify(e));i=e.toJS(t,n,r)}}return i}z.Json.prototype.toJS=function(e,t,n){return ee(this.value,e,t,n)},z.Convert=function(e){return z.extend(this,e)},z.Convert.prototype.toString=function(){var e="CONVERT(";return e+=this.dbtypeid,void 0!==this.dbsize&&(e+="("+this.dbsize,this.dbprecision&&(e+=","+this.dbprecision),e+=")"),e+=","+this.expression.toString(),this.style&&(e+=","+this.style),e+")"},z.Convert.prototype.toJS=function(e,t,n){return"alasql.stdfn.CONVERT("+this.expression.toJS(e,t,n)+',{dbtypeid:"'+this.dbtypeid+'",dbsize:'+this.dbsize+",dbprecision:"+this.dbprecision+",style:"+this.style+"})"},o.stdfn.CONVERT=function(e,t){var n=e;if(t.style){var r=/\d{8}/.test(n)?new Date(+n.substr(0,4),+n.substr(4,2)-1,+n.substr(6,2)):new Date(n);switch(t.style){case 1:n=("0"+(r.getMonth()+1)).substr(-2)+"/"+("0"+r.getDate()).substr(-2)+"/"+("0"+r.getYear()).substr(-2);break;case 2:n=("0"+r.getYear()).substr(-2)+"."+("0"+(r.getMonth()+1)).substr(-2)+"."+("0"+r.getDate()).substr(-2);break;case 3:n=("0"+r.getDate()).substr(-2)+"/"+("0"+(r.getMonth()+1)).substr(-2)+"/"+("0"+r.getYear()).substr(-2);break;case 4:n=("0"+r.getDate()).substr(-2)+"."+("0"+(r.getMonth()+1)).substr(-2)+"."+("0"+r.getYear()).substr(-2);break;case 5:n=("0"+r.getDate()).substr(-2)+"-"+("0"+(r.getMonth()+1)).substr(-2)+"-"+("0"+r.getYear()).substr(-2);break;case 6:n=("0"+r.getDate()).substr(-2)+" "+r.toString().substr(4,3).toLowerCase()+" "+("0"+r.getYear()).substr(-2);break;case 7:n=r.toString().substr(4,3)+" "+("0"+r.getDate()).substr(-2)+","+("0"+r.getYear()).substr(-2);break;case 8:case 108:n=("0"+r.getHours()).substr(-2)+":"+("0"+r.getMinutes()).substr(-2)+":"+("0"+r.getSeconds()).substr(-2);break;case 10:n=("0"+(r.getMonth()+1)).substr(-2)+"-"+("0"+r.getDate()).substr(-2)+"-"+("0"+r.getYear()).substr(-2);break;case 11:n=("0"+r.getYear()).substr(-2)+"/"+("0"+(r.getMonth()+1)).substr(-2)+"/"+("0"+r.getDate()).substr(-2);break;case 12:n=("0"+r.getYear()).substr(-2)+("0"+(r.getMonth()+1)).substr(-2)+("0"+r.getDate()).substr(-2);break;case 101:n=("0"+(r.getMonth()+1)).substr(-2)+"/"+("0"+r.getDate()).substr(-2)+"/"+r.getFullYear();break;case 102:n=r.getFullYear()+"."+("0"+(r.getMonth()+1)).substr(-2)+"."+("0"+r.getDate()).substr(-2);break;case 103:n=("0"+r.getDate()).substr(-2)+"/"+("0"+(r.getMonth()+1)).substr(-2)+"/"+r.getFullYear();break;case 104:n=("0"+r.getDate()).substr(-2)+"."+("0"+(r.getMonth()+1)).substr(-2)+"."+r.getFullYear();break;case 105:n=("0"+r.getDate()).substr(-2)+"-"+("0"+(r.getMonth()+1)).substr(-2)+"-"+r.getFullYear();break;case 106:n=("0"+r.getDate()).substr(-2)+" "+r.toString().substr(4,3).toLowerCase()+" "+r.getFullYear();break;case 107:n=r.toString().substr(4,3)+" "+("0"+r.getDate()).substr(-2)+","+r.getFullYear();break;case 110:n=("0"+(r.getMonth()+1)).substr(-2)+"-"+("0"+r.getDate()).substr(-2)+"-"+r.getFullYear();break;case 111:n=r.getFullYear()+"/"+("0"+(r.getMonth()+1)).substr(-2)+"/"+("0"+r.getDate()).substr(-2);break;case 112:n=r.getFullYear()+("0"+(r.getMonth()+1)).substr(-2)+("0"+r.getDate()).substr(-2);break;default:throw new Error("The CONVERT style "+t.style+" is not realized yet.")}}if(r=t.dbtypeid.toUpperCase(),"Date"==t.dbtypeid)return new Date(n);if("DATE"==r)return(i=new Date(n)).getFullYear()+"."+("0"+(i.getMonth()+1)).substr(-2)+"."+("0"+i.getDate()).substr(-2);if("DATETIME"==r||"DATETIME2"==r){var i,o=(i=new Date(n)).getFullYear()+"."+("0"+(i.getMonth()+1)).substr(-2)+"."+("0"+i.getDate()).substr(-2);return(o+=" "+("0"+i.getHours()).substr(-2)+":"+("0"+i.getMinutes()).substr(-2)+":"+("0"+i.getSeconds()).substr(-2))+"."+("00"+i.getMilliseconds()).substr(-3)}if(-1<["MONEY"].indexOf(r))return(0|(a=+n))+100*a%100/100;if(-1<["BOOLEAN"].indexOf(r))return!!n;if(-1<["INT","INTEGER","SMALLINT","BIGINT","SERIAL","SMALLSERIAL","BIGSERIAL"].indexOf(t.dbtypeid.toUpperCase()))return 0|n;if(-1<["STRING","VARCHAR","NVARCHAR","CHARACTER VARIABLE"].indexOf(t.dbtypeid.toUpperCase()))return t.dbsize?(""+n).substr(0,t.dbsize):""+n;if(-1<["CHAR","CHARACTER","NCHAR"].indexOf(r))return(n+new Array(t.dbsize+1).join(" ")).substr(0,t.dbsize);if(-1<["NUMBER","FLOAT","DECIMAL","NUMERIC"].indexOf(r)){var a=+n;return a=void 0!==t.dbsize?parseFloat(a.toPrecision(t.dbsize)):a,void 0!==t.dbprecision?parseFloat(a.toFixed(t.dbprecision)):a}if(-1<["JSON"].indexOf(r)){if("object"==typeof n)return n;try{return JSON.parse(n)}catch(e){throw new Error("Cannot convert string to JSON")}}return n},z.ColumnDef=function(e){return z.extend(this,e)},z.ColumnDef.prototype.toString=function(){var e=this.columnid;return this.dbtypeid&&(e+=" "+this.dbtypeid),this.dbsize&&(e+="("+this.dbsize,this.dbprecision&&(e+=","+this.dbprecision),e+=")"),this.primarykey&&(e+=" PRIMARY KEY"),this.notnull&&(e+=" NOT NULL"),e},z.CreateTable=function(e){return z.extend(this,e)},z.CreateTable.prototype.toString=function(){var e="CREATE";return this.temporary&&(e+=" TEMPORARY"),this.view?e+=" VIEW":e+=" "+(this.class?"CLASS":"TABLE"),this.ifnotexists&&(e+=" IF  NOT EXISTS"),e+=" "+this.table.toString(),this.viewcolumns&&(e+="("+this.viewcolumns.map((function(e){return e.toString()})).join(",")+")"),this.as?e+=" AS "+this.as:e+=" ("+this.columns.map((function(e){return e.toString()})).join(",")+")",this.view&&this.select&&(e+=" AS "+this.select.toString()),e},z.CreateTable.prototype.execute=function(e,t,n){var r=o.databases[this.table.databaseid||e],i=this.table.tableid;if(!i)throw new Error("Table name is not defined");var a=this.columns,s=this.constraints||[];if(this.ifnotexists&&r.tables[i])return n?n(0):0;if(r.tables[i])throw new Error("Can not create table '"+i+"', because it already exists in the database '"+r.databaseid+"'");var u=r.tables[i]=new o.Table;this.class&&(u.isclass=!0);var l,c,h=[],f=[];return a&&a.forEach((function(t){var n,r=t.dbtypeid;if(o.fn[r]||(r=r.toUpperCase()),-1<["SERIAL","SMALLSERIAL","BIGSERIAL"].indexOf(r)&&(t.identity={value:1,step:1}),r={columnid:t.columnid,dbtypeid:r,dbsize:t.dbsize,dbprecision:t.dbprecision,notnull:t.notnull,identity:t.identity},t.identity&&(u.identities[t.columnid]={value:+t.identity.value,step:+t.identity.step}),t.check&&u.checks.push({id:t.check.constrantid,fn:new Function("r","var y;return "+t.check.expression.toJS("r",""))}),t.default&&h.push("'"+t.columnid+"':"+t.default.toJS("r","")),t.primarykey&&((n=u.pk={}).columns=[t.columnid],n.onrightfns="r['"+t.columnid+"']",n.onrightfn=new Function("r","var y;return "+n.onrightfns),n.hh=b(n.onrightfns),u.uniqs[n.hh]={}),t.unique&&(n={},u.uk=u.uk||[],u.uk.push(n),n.columns=[t.columnid],n.onrightfns="r['"+t.columnid+"']",n.onrightfn=new Function("r","var y;return "+n.onrightfns),n.hh=b(n.onrightfns),u.uniqs[n.hh]={}),t.foreignkey){var i=t.foreignkey.table,a=o.databases[i.databaseid||e].tables[i.tableid];if(void 0===i.columnid){if(!(a.pk.columns&&0<a.pk.columns.length))throw new Error("FOREIGN KEY allowed only to tables with PRIMARY KEYs");i.columnid=a.pk.columns[0]}u.checks.push({fn:function(e){var n={};if(void 0===e[t.columnid])return!0;if(n[i.columnid]=e[t.columnid],n=a.pk.onrightfn(n),!a.uniqs[a.pk.hh][n])throw new Error("Foreign key violation");return!0}})}t.onupdate&&f.push("r['"+t.columnid+"']="+t.onupdate.toJS("r","")),u.columns.push(r),u.xcolumns[r.columnid]=r})),u.defaultfns=h.join(","),u.onupdatefns=f.join(";"),s.forEach((function(t){var n;if("PRIMARY KEY"===t.type){if(u.pk)throw new Error("Primary key already exists");var r=u.pk={};r.columns=t.columns,r.onrightfns=r.columns.map((function(e){return"r['"+e+"']"})).join("+'`'+"),r.onrightfn=new Function("r","var y;return "+r.onrightfns),r.hh=b(r.onrightfns),u.uniqs[r.hh]={}}else if("CHECK"===t.type)n=new Function("r","var y;return "+t.expression.toJS("r",""));else if("UNIQUE"===t.type){var i={};u.uk=u.uk||[],u.uk.push(i),i.columns=t.columns,i.onrightfns=i.columns.map((function(e){return"r['"+e+"']"})).join("+'`'+"),i.onrightfn=new Function("r","var y;return "+i.onrightfns),i.hh=b(i.onrightfns),u.uniqs[i.hh]={}}else if("FOREIGN KEY"===t.type){var a=t.fktable;if(t.fkcolumns&&0<t.fkcolumns.length&&(a.fkcolumns=t.fkcolumns),i=o.databases[a.databaseid||e].tables[a.tableid],void 0===a.fkcolumns&&(a.fkcolumns=i.pk.columns),a.columns=t.columns,a.fkcolumns.length>a.columns.length)throw new Error("Invalid foreign key on table "+u.tableid);n=function(t){var n={};if(a.fkcolumns.forEach((function(e,r){null!=t[a.columns[r]]&&(n[e]=t[a.columns[r]])})),0===Object.keys(n).length)return!0;if(Object.keys(n).length!==a.columns.length)throw new Error("Invalid foreign key on table "+u.tableid);var r=o.databases[a.databaseid||e].tables[a.tableid],i=r.pk.onrightfn(n);if(!r.uniqs[r.pk.hh][i])throw new Error("Foreign key violation");return!0}}n&&u.checks.push({fn:n,id:t.constraintid,fk:"FOREIGN KEY"===t.type})})),this.view&&this.viewcolumns&&(l=this).viewcolumns.forEach((function(e,t){l.select.columns[t].as=e.columnid})),this.view&&this.select&&(u.view=!0,u.select=this.select.compile(this.table.databaseid||e)),r.engineid?o.engines[r.engineid].createTable(this.table.databaseid||e,i,this.ifnotexists,n):(u.insert=function(n,r){var i=o.inserted;o.inserted=[n];var a=this,s=!1,u=!1;for(g in a.beforeinsert)(l=a.beforeinsert[g])&&(l.funcid?!1===o.fn[l.funcid](n)&&(u=u||!0):l.statement&&!1===l.statement.execute(e)&&(u=u||!0));if(!u){var l,c=!1;for(g in a.insteadofinsert)c=!0,(l=a.insteadofinsert[g])&&(l.funcid?o.fn[l.funcid](n):l.statement&&l.statement.execute(e));if(!c){for(var h in a.identities){var f=a.identities[h];n[h]=f.value}if(a.checks&&0<a.checks.length&&a.checks.forEach((function(e){if(!e.fn(n))throw new Error("Violation of CHECK constraint "+(e.id||""))})),a.columns.forEach((function(e){if(e.notnull&&void 0===n[e.columnid])throw new Error("Wrong NULL value in NOT NULL column "+e.columnid)})),a.pk){var p,d=(p=a.pk).onrightfn(n);if(void 0!==a.uniqs[p.hh][d]){if(!r)throw new Error("Cannot insert record, because it already exists in primary key index");s=a.uniqs[p.hh][d]}}if(a.uk&&a.uk.length&&a.uk.forEach((function(e){var t=e.onrightfn(n);if(void 0!==a.uniqs[e.hh][t]){if(!r)throw new Error("Cannot insert record, because it already exists in unique index");s=a.uniqs[e.hh][t]}})),s)a.update((function(e){for(var t in n)e[t]=n[t]}),a.data.indexOf(s),t);else{for(var h in a.data.push(n),a.identities)(f=a.identities[h]).value+=f.step;a.pk&&(d=(p=a.pk).onrightfn(n),a.uniqs[p.hh][d]=n),a.uk&&a.uk.length&&a.uk.forEach((function(e){var t=e.onrightfn(n);a.uniqs[e.hh][t]=n}))}for(var g in a.afterinsert)(l=a.afterinsert[g])&&(l.funcid?o.fn[l.funcid](n):l.statement&&l.statement.execute(e));o.inserted=i}}},u.delete=function(t){var n=this,r=n.data[t],i=!1;for(a in n.beforedelete)(u=n.beforedelete[a])&&(u.funcid?!1===o.fn[u.funcid](r)&&(i=i||!0):u.statement&&!1===u.statement.execute(e)&&(i=i||!0));if(i)return!1;var a,s=!1;for(a in n.insteadofdelete){var u;s=!0,(u=n.insteadofdelete[a])&&(u.funcid?o.fn[u.funcid](r):u.statement&&u.statement.execute(e))}if(!s){if(this.pk){var l=this.pk;if(t=l.onrightfn(r),void 0===this.uniqs[l.hh][t])throw new Error("Something wrong with primary key index on table");this.uniqs[l.hh][t]=void 0}n.uk&&n.uk.length&&n.uk.forEach((function(e){var t=e.onrightfn(r);if(void 0===n.uniqs[e.hh][t])throw new Error("Something wrong with unique index on table");n.uniqs[e.hh][t]=void 0}))}},u.deleteall=function(){this.data.length=0,this.pk&&(this.uniqs[this.pk.hh]={}),u.uk&&u.uk.length&&u.uk.forEach((function(e){u.uniqs[e.hh]={}}))},u.update=function(t,n,r){var i,a=C(this.data[n]);if(this.pk&&((i=this.pk).pkaddr=i.onrightfn(a,r),void 0===this.uniqs[i.hh][i.pkaddr]))throw new Error("Something wrong with index on table");u.uk&&u.uk.length&&u.uk.forEach((function(e){if(e.ukaddr=e.onrightfn(a),void 0===u.uniqs[e.hh][e.ukaddr])throw new Error("Something wrong with unique index on table")})),t(a,r,o);var s=!1;for(h in u.beforeupdate)(c=u.beforeupdate[h])&&(c.funcid?!1===o.fn[c.funcid](this.data[n],a)&&(s=s||!0):c.statement&&!1===c.statement.execute(e)&&(s=s||!0));if(s)return!1;var l=!1;for(h in u.insteadofupdate){var c;l=!0,(c=u.insteadofupdate[h])&&(c.funcid?o.fn[c.funcid](this.data[n],a):c.statement&&c.statement.execute(e))}if(!l){if(u.checks&&0<u.checks.length&&u.checks.forEach((function(e){if(!e.fn(a))throw new Error("Violation of CHECK constraint "+(e.id||""))})),u.columns.forEach((function(e){if(e.notnull&&void 0===a[e.columnid])throw new Error("Wrong NULL value in NOT NULL column "+e.columnid)})),this.pk&&(i.newpkaddr=i.onrightfn(a),void 0!==this.uniqs[i.hh][i.newpkaddr]&&i.newpkaddr!==i.pkaddr))throw new Error("Record already exists");for(var h in u.uk&&u.uk.length&&u.uk.forEach((function(e){if(e.newukaddr=e.onrightfn(a),void 0!==u.uniqs[e.hh][e.newukaddr]&&e.newukaddr!==e.ukaddr)throw new Error("Record already exists")})),this.pk&&(this.uniqs[i.hh][i.pkaddr]=void 0,this.uniqs[i.hh][i.newpkaddr]=a),u.uk&&u.uk.length&&u.uk.forEach((function(e){u.uniqs[e.hh][e.ukaddr]=void 0,u.uniqs[e.hh][e.newukaddr]=a})),this.data[n]=a,u.afterupdate)(c=u.afterupdate[h])&&(c.funcid?o.fn[c.funcid](this.data[n],a):c.statement&&c.statement.execute(e))}},o.options.nocount||(c=1),n&&(c=n(c)),c)},o.fn.Date=Object,o.fn.Date=Date,o.fn.Number=Number,o.fn.String=String,o.fn.Boolean=Boolean,B.EXTEND=o.utils.extend,B.CHAR=String.fromCharCode.bind(String),B.ASCII=function(e){return e.charCodeAt(0)},B.COALESCE=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e]&&("number"!=typeof arguments[e]||!isNaN(arguments[e])))return arguments[e]},B.USER=function(){return"alasql"},B.OBJECT_ID=function(e){return!!o.tables[e]},B.DATE=function(e){return/\d{8}/.test(e)?new Date(+e.substr(0,4),+e.substr(4,2)-1,+e.substr(6,2)):new Date(e)},B.NOW=function(){var e=new Date,t=e.getFullYear()+"."+("0"+(e.getMonth()+1)).substr(-2)+"."+("0"+e.getDate()).substr(-2);return(t+=" "+("0"+e.getHours()).substr(-2)+":"+("0"+e.getMinutes()).substr(-2)+":"+("0"+e.getSeconds()).substr(-2))+"."+("00"+e.getMilliseconds()).substr(-3)},B.GETDATE=B.NOW,B.CURRENT_TIMESTAMP=B.NOW,B.SECOND=function(e){return(e=new Date(e)).getSeconds()},B.MINUTE=function(e){return(e=new Date(e)).getMinutes()},B.HOUR=function(e){return(e=new Date(e)).getHours()},B.DAYOFWEEK=B.WEEKDAY=function(e){return(e=new Date(e)).getDay()},B.DAY=B.DAYOFMONTH=function(e){return(e=new Date(e)).getDate()},B.MONTH=function(e){return(e=new Date(e)).getMonth()+1},B.YEAR=function(e){return(e=new Date(e)).getFullYear()};var te={year:31536e6,quarter:7884e6,month:2592e6,week:6048e5,day:864e5,dayofyear:864e5,weekday:864e5,hour:36e5,minute:6e4,second:1e3,millisecond:1,microsecond:.001};function ne(e){var t="";if(void 0===e)t+="undefined";else if(Array.isArray(e)){t+="<style>",t+="table {border:1px black solid; border-collapse: collapse; border-spacing: 0px;}",t+="td,th {border:1px black solid; padding-left:5px; padding-right:5px}",t+="th {background-color: #EEE}",t+="</style>",t+="<table>";var n,r=[];for(n in e[0])r.push(n);t+="<tr><th>#",r.forEach((function(e){t+="<th>"+e}));for(var i=0,o=e.length;i<o;i++)t+="<tr><th>"+(i+1),r.forEach((function(n){t+="<td> ",e[i][n]==+e[i][n]?(t+='<div style="text-align:right">',void 0===e[i][n]?t+="NULL":t+=e[i][n],t+="</div>"):void 0===e[i][n]?t+="NULL":"string"==typeof e[i][n]?t+=e[i][n]:t+=Q(e[i][n])}));t+="</table>"}else t+="<p>"+Q(e)+"</p>";return t}function re(e,t,n){var r;n<=0||(r=(t-e.scrollTop)/n*10,setTimeout((function(){e.scrollTop!==t&&(e.scrollTop=e.scrollTop+r,re(e,t,n-10))}),10))}function ie(e,t,n,r,i,a){var s={};function u(e){return e&&!1===o.options.casesensitive?e.toLowerCase():e}n=n||{},o.utils.extend(s,n),void 0===s.headers&&(s.headers=!0),t=o.utils.autoExtFilename(t,"xls",n),o.utils.loadBinaryFile(t,!!r,(function(t){var n,l;n=t instanceof ArrayBuffer?(h=function(e){for(var t="",n=0,r=10240;n<e.byteLength/r;++n)t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(n*r,n*r+r)));return t+String.fromCharCode.apply(null,new Uint8Array(e.slice(n*r)))}(t),e.read(btoa(h),{type:"base64"})):e.read(t,{type:"binary"}),l=void 0===s.sheetid?n.SheetNames[0]:"number"==typeof s.sheetid?n.SheetNames[s.sheetid]:s.sheetid;var c=[];if(void 0===s.range?p=n.Sheets[l]["!ref"]:(p=s.range,n.Sheets[l][p]&&(p=n.Sheets[l][p])),p){for(var h=p.split(":"),f=(t=h[0].match(/[A-Z]+/)[0],+h[0].match(/[0-9]+/)[0]),p=h[1].match(/[A-Z]+/)[0],d=+h[1].match(/[0-9]+/)[0],g={},m=o.utils.xlscn(t),y=o.utils.xlscn(p),v=m;v<=y;v++){var _=o.utils.xlsnc(v);s.headers?n.Sheets[l][_+""+f]?g[_]=u(n.Sheets[l][_+""+f].v):g[_]=u(_):g[_]=_}s.headers&&f++;for(var b=f;b<=d;b++){var x={};for(v=m;v<=y;v++)_=o.utils.xlsnc(v),n.Sheets[l][_+""+b]&&(x[g[_]]=n.Sheets[l][_+""+b].v);c.push(x)}}else c.push([]);0<c.length&&c[c.length-1]&&0==Object.keys(c[c.length-1]).length&&c.pop(),r&&(c=r(c,i,a))}),(function(e){throw e}))}o.stdfn.DATEDIFF=function(e,t,n){return(new Date(n).getTime()-new Date(t).getTime())/te[e.toLowerCase()]},o.stdfn.DATEADD=function(e,t,n){return e=new Date(n).getTime()+t*te[e.toLowerCase()],new Date(e)},o.stdfn.INTERVAL=function(e,t){return e*te[t.toLowerCase()]},o.stdfn.DATE_ADD=o.stdfn.ADDDATE=function(e,t){return t=new Date(e).getTime()+t,new Date(t)},o.stdfn.DATE_SUB=o.stdfn.SUBDATE=function(e,t){return t=new Date(e).getTime()-t,new Date(t)},z.DropTable=function(e){return z.extend(this,e)},z.DropTable.prototype.toString=function(){var e="DROP ";return this.view?e+="VIEW":e+="TABLE",this.ifexists&&(e+=" IF EXISTS"),e+" "+this.tables.toString()},z.DropTable.prototype.execute=function(e,t,n){var r=this.ifexists,i=0,a=0,s=this.tables.length;return this.tables.forEach((function(t){var u=o.databases[t.databaseid||e],l=t.tableid;if(!r||r&&u.tables[l]){if(u.tables[l])u.engineid?o.engines[u.engineid].dropTable(t.databaseid||e,l,r,(function(e){delete u.tables[l],i+=e,++a==s&&n&&n(i)})):(delete u.tables[l],i++,++a==s&&n&&n(i));else if(!o.options.dropifnotexists)throw new Error("Can not drop table '"+t.tableid+"', because it does not exist in the database.")}else++a==s&&n&&n(i)})),i},z.TruncateTable=function(e){return z.extend(this,e)},z.TruncateTable.prototype.toString=function(){return"TRUNCATE TABLE "+this.table.toString()},z.TruncateTable.prototype.execute=function(e,t,n){var r=o.databases[this.table.databaseid||e],i=this.table.tableid;if(r.engineid)return o.engines[r.engineid].truncateTable(this.table.databaseid||e,i,this.ifexists,n);if(!r.tables[i])throw new Error("Cannot truncate table becaues it does not exist");return r.tables[i].data=[],n?n(0):0},z.CreateVertex=function(e){return z.extend(this,e)},z.CreateVertex.prototype.toString=function(){var e="CREATE VERTEX ";return this.class&&(e+=this.class+" "),this.sharp&&(e+="#"+this.sharp+" "),this.sets?e+=this.sets.toString():this.content?e+=this.content.toString():this.select&&(e+=this.select.toString()),e},z.CreateVertex.prototype.toJS=function(e){return"this.queriesfn["+(this.queriesidx-1)+"](this.params,null,"+e+")"},z.CreateVertex.prototype.compile=function(e){var t,n,r,i=e,a=this.sharp;return void 0!==this.name&&(n="x.name="+this.name.toJS(),t=new Function("x",n)),this.sets&&0<this.sets.length&&(n=this.sets.map((function(e){return"x['"+e.column.columnid+"']="+e.expression.toJS("x","")})).join(";"),r=new Function("x,params,alasql",n)),function(e,n){var s=o.databases[i],u={$id:u=void 0!==a?a:s.counter++,$node:"VERTEX"};return s=s.objects[u.$id]=u,t&&t(u),r&&r(u,e,o),n&&(s=n(s)),s}},z.CreateEdge=function(e){return z.extend(this,e)},z.CreateEdge.prototype.toString=function(){var e="CREATE EDGE ";return this.class&&(e+=this.class+" "),e},z.CreateEdge.prototype.toJS=function(e){return"this.queriesfn["+(this.queriesidx-1)+"](this.params,null,"+e+")"},z.CreateEdge.prototype.compile=function(e){var t,n,r,i=e,a=new Function("params,alasql","var y;return "+this.from.toJS()),s=new Function("params,alasql","var y;return "+this.to.toJS());return void 0!==this.name&&(n="x.name="+this.name.toJS(),t=new Function("x",n)),this.sets&&0<this.sets.length&&(n=this.sets.map((function(e){return"x['"+e.column.columnid+"']="+e.expression.toJS("x","")})).join(";"),r=new Function("x,params,alasql","var y;"+n)),function(e,n){var u=0,l=o.databases[i],c={$id:l.counter++,$node:"EDGE"},h=a(e,o),f=s(e,o);return c.$in=[h.$id],c.$out=[f.$id],void 0===h.$out&&(h.$out=[]),h.$out.push(c.$id),f.$in,f.$in.push(c.$id),u=l.objects[c.$id]=c,t&&t(c),r&&r(c,e,o),n&&(u=n(u)),u}},z.CreateGraph=function(e){return z.extend(this,e)},z.CreateGraph.prototype.toString=function(){var e="CREATE GRAPH ";return this.class&&(e+=this.class+" "),e},z.CreateGraph.prototype.execute=function(e,t,n){var r=[];return this.from&&o.from[this.from.funcid]&&(this.graph=o.from[this.from.funcid.toUpperCase()]),this.graph.forEach((function(n){if(n.source){var s={};void 0!==n.as&&(o.vars[n.as]=s),void 0!==n.prop&&(s.name=n.prop),void 0!==n.sharp&&(s.$id=n.sharp),void 0!==n.name&&(s.name=n.name),void 0!==n.class&&(s.$class=n.class);var u,l,c,h,f=o.databases[e];if(void 0===s.$id&&(s.$id=f.counter++),s.$node="EDGE",void 0!==n.json&&M(s,new Function("params,alasql","var y;return "+n.json.toJS())(t,o)),n.source.vars?u="object"==typeof(h=o.vars[n.source.vars])?h:f.objects[h]:(void 0===(l=n.source.sharp)&&(l=n.source.prop),void 0!==(u=o.databases[e].objects[l])||!o.options.autovertex||void 0===n.source.prop&&void 0===n.source.name||void 0===(u=i(n.source.prop||n.source.name))&&(u=a(n.source))),n.source.vars?c="object"==typeof(h=o.vars[n.target.vars])?h:f.objects[h]:(void 0===(h=n.target.sharp)&&(h=n.target.prop),void 0!==(c=o.databases[e].objects[h])||!o.options.autovertex||void 0===n.target.prop&&void 0===n.target.name||void 0===(c=i(n.target.prop||n.target.name))&&(c=a(n.target))),s.$in=[u.$id],s.$out=[c.$id],void 0===u.$out&&(u.$out=[]),u.$out.push(s.$id),void 0===c.$in&&(c.$in=[]),c.$in.push(s.$id),void 0!==(f.objects[s.$id]=s).$class){if(void 0===o.databases[e].tables[s.$class])throw new Error("No such class. Pleace use CREATE CLASS");o.databases[e].tables[s.$class].data.push(s)}r.push(s.$id)}else a(n)})),n&&(r=n(r)),r;function i(e){var t,n=o.databases[o.useid].objects;for(t in n)if(n[t].name===e)return n[t]}function a(n){var i={};void 0!==n.as&&(o.vars[n.as]=i),void 0!==n.prop&&(i.$id=n.prop,i.name=n.prop),void 0!==n.sharp&&(i.$id=n.sharp),void 0!==n.name&&(i.name=n.name),void 0!==n.class&&(i.$class=n.class);var a=o.databases[e];if(void 0===i.$id&&(i.$id=a.counter++),i.$node="VERTEX",void 0!==n.json&&M(i,new Function("params,alasql","var y;return "+n.json.toJS())(t,o)),void 0!==(a.objects[i.$id]=i).$class){if(void 0===o.databases[e].tables[i.$class])throw new Error("No such class. Pleace use CREATE CLASS");o.databases[e].tables[i.$class].data.push(i)}return r.push(i.$id),i}},z.CreateGraph.prototype.compile1=function(e){var t,n,r,i=e,a=new Function("params,alasql","var y;return "+this.from.toJS()),s=new Function("params,alasql","var y;return "+this.to.toJS());return void 0!==this.name&&(n="x.name="+this.name.toJS(),t=new Function("x",n)),this.sets&&0<this.sets.length&&(n=this.sets.map((function(e){return"x['"+e.column.columnid+"']="+e.expression.toJS("x","")})).join(";"),r=new Function("x,params,alasql","var y;"+n)),function(e,n){var u=0,l=o.databases[i],c={$id:l.counter++,$node:"EDGE"},h=a(e,o),f=s(e,o);return c.$in=[h.$id],c.$out=[f.$id],void 0===h.$out&&(h.$out=[]),h.$out.push(c.$id),void 0===f.$in&&(f.$in=[]),f.$in.push(c.$id),u=l.objects[c.$id]=c,t&&t(c),r&&r(c,e,o),n&&(u=n(u)),u}},z.AlterTable=function(e){return z.extend(this,e)},z.AlterTable.prototype.toString=function(){var e="ALTER TABLE "+this.table.toString();return this.renameto&&(e+=" RENAME TO "+this.renameto),e},z.AlterTable.prototype.execute=function(e,t,n){var r=o.databases[e];if(r.dbversion=Date.now(),this.renameto){var i=this.table.tableid,a=this.renameto,s=1;if(r.tables[a])throw new Error("Can not rename a table '"+i+"' to '"+a+"', because the table with this name already exists");if(a===i)throw new Error("Can not rename a table '"+i+"' to itself");return r.tables[a]=r.tables[i],delete r.tables[i],s=1,n&&n(s),s}if(this.addcolumn){(r=o.databases[this.table.databaseid||e]).dbversion++;var u=this.table.tableid,l=r.tables[u],c=this.addcolumn.columnid;if(l.xcolumns[c])throw new Error('Cannot add column "'+c+'", because it already exists in the table "'+u+'"');var h={columnid:c,dbtypeid:this.addcolumn.dbtypeid,dbsize:this.dbsize,dbprecision:this.dbprecision,dbenum:this.dbenum,defaultfns:null};l.columns.push(h),l.xcolumns[c]=h;for(var f=0,p=l.data.length;f<p;f++)l.data[f][c]=void 0;return n?n(1):1}if(this.modifycolumn){if((r=o.databases[this.table.databaseid||e]).dbversion++,u=this.table.tableid,l=r.tables[u],c=this.modifycolumn.columnid,!l.xcolumns[c])throw new Error('Cannot modify column "'+c+'", because it was not found in the table "'+u+'"');return(h=l.xcolumns[c]).dbtypeid=this.dbtypeid,h.dbsize=this.dbsize,h.dbprecision=this.dbprecision,h.dbenum=this.dbenum,n?n(1):1}if(this.renamecolumn){(r=o.databases[this.table.databaseid||e]).dbversion++,u=this.table.tableid,l=r.tables[u],c=this.renamecolumn;var d=this.to;if(!l.xcolumns[c])throw new Error('Column "'+c+'" is not found in the table "'+u+'"');if(l.xcolumns[d])throw new Error('Column "'+d+'" already exists in the table "'+u+'"');if(c==d)return n?n(0):0;for(var g=0;g<l.columns.length;g++)l.columns[g].columnid==c&&(l.columns[g].columnid=d);for(l.xcolumns[d]=l.xcolumns[c],delete l.xcolumns[c],f=0,p=l.data.length;f<p;f++)l.data[f][d]=l.data[f][c],delete l.data[f][c];return l.data.length}if(this.dropcolumn){(r=o.databases[this.table.databaseid||e]).dbversion++,u=this.table.tableid,l=r.tables[u],c=this.dropcolumn;var m=!1;for(g=0;g<l.columns.length;g++)if(l.columns[g].columnid==c){m=!0,l.columns.splice(g,1);break}if(!m)throw new Error('Cannot drop column "'+c+'", because it was not found in the table "'+u+'"');for(delete l.xcolumns[c],f=0,p=l.data.length;f<p;f++)delete l.data[f][c];return n?n(l.data.length):l.data.length}throw Error("Unknown ALTER TABLE method")},z.CreateIndex=function(e){return z.extend(this,e)},z.CreateIndex.prototype.toString=function(){var e="CREATE";return this.unique&&(e+=" UNIQUE"),(e+=" INDEX "+this.indexid+" ON "+this.table.toString())+"("+this.columns.toString()+")"},z.CreateIndex.prototype.execute=function(e,t,n){var r=o.databases[e],i=this.table.tableid,a=r.tables[i];e=this.indexid,r.indices[e]=i;var s=this.columns.map((function(e){return e.expression.toJS("r","")})).join("+'`'+"),u=new Function("r,params,alasql","return "+s);if(this.unique){a.uniqdefs[e]={rightfns:s};var l=a.uniqs[e]={};if(0<a.data.length)for(var c=0,h=a.data.length;c<h;c++)l[p=s(a.data[c])]||(l[p]={num:0}),l[p].num++}else{var f=b(s);a.inddefs[e]={rightfns:s,hh:f},a.indices[f]={};var p,d=a.indices[f]={};if(0<a.data.length)for(c=0,h=a.data.length;c<h;c++)d[p=u(a.data[c],t,o)]||(d[p]=[]),d[p].push(a.data[c])}return f=1,n&&(f=n(f)),f},z.Reindex=function(e){return z.extend(this,e)},z.Reindex.prototype.toString=function(){return"REINDEX "+this.indexid},z.Reindex.prototype.execute=function(e,t,n){var r=o.databases[e];return e=this.indexid,e=r.indices[e],r.tables[e].indexColumns(),e=1,n&&(e=n(e)),e},z.DropIndex=function(e){return z.extend(this,e)},z.DropIndex.prototype.toString=function(){return"DROP INDEX"+this.indexid},z.DropIndex.prototype.compile=function(e){return this.indexid,function(){return 1}},z.WithSelect=function(e){return z.extend(this,e)},z.WithSelect.prototype.toString=function(){var e="WITH ";return(e+=this.withs.map((function(e){return e.name+" AS ("+e.select.toString()+")"})).join(",")+" ")+this.select.toString()},z.WithSelect.prototype.execute=function(e,t,n){var r=this,i=[];return r.withs.forEach((function(n){i.push(o.databases[e].tables[n.name]),(o.databases[e].tables[n.name]=new D({tableid:n.name})).data=n.select.execute(e,t)})),this.select.execute(e,t,(function(t){return r.withs.forEach((function(t,n){i[n]?o.databases[e].tables[t.name]=i[n]:delete o.databases[e].tables[t.name]})),n&&(t=n(t)),t}))},z.If=function(e){return z.extend(this,e)},z.If.prototype.toString=function(){var e="IF ";return e+=this.expression.toString(),e+=" "+this.thenstat.toString(),this.elsestat&&(e+=" ELSE "+this.thenstat.toString()),e},z.If.prototype.execute=function(e,t,n){var r;return new Function("params,alasql,p","var y;return "+this.expression.toJS("({})","",null)).bind(this)(t,o)?r=this.thenstat.execute(e,t,n):this.elsestat?r=this.elsestat.execute(e,t,n):n&&(r=n(r)),r},z.While=function(e){return z.extend(this,e)},z.While.prototype.toString=function(){var e="WHILE ";return(e+=this.expression.toString())+" "+this.loopstat.toString()},z.While.prototype.execute=function(e,t,n){var r=this,i=[],a=new Function("params,alasql,p","var y;return "+this.expression.toJS());if(n){var s=!1;!function u(l){s?i.push(l):s=!0,setTimeout((function(){a(t,o)?r.loopstat.execute(e,t,u):i=n(i)}),0)}()}else for(;a(t,o);){var u=r.loopstat.execute(e,t);i.push(u)}return i},z.Break=function(e){return z.extend(this,e)},z.Break.prototype.toString=function(){return"BREAK"},z.Break.prototype.execute=function(e,t,n,r){var i=1;return n&&(i=n(i)),i},z.Continue=function(e){return z.extend(this,e)},z.Continue.prototype.toString=function(){return"CONTINUE"},z.Continue.prototype.execute=function(e,t,n,r){var i=1;return n&&(i=n(i)),i},z.BeginEnd=function(e){return z.extend(this,e)},z.BeginEnd.prototype.toString=function(){return"BEGIN "+this.statements.toString()+" END"},z.BeginEnd.prototype.execute=function(e,t,n,r){var i=this,o=[],a=0;return function r(){i.statements[a].execute(e,t,(function(e){return o.push(e),++a<i.statements.length?r():void(n&&(o=n(o)))}))}(),o},z.Insert=function(e){return z.extend(this,e)},z.Insert.prototype.toString=function(){var e="INSERT ";return this.orreplace&&(e+="OR REPLACE "),this.replaceonly&&(e="REPLACE "),e+="INTO "+this.into.toString(),this.columns&&(e+="("+this.columns.toString()+")"),this.values&&(e+=" VALUES "+this.values.map((function(e){return"("+e.toString()+")"})).join(",")),this.select&&(e+=" "+this.select.toString()),e},z.Insert.prototype.toJS=function(e,t,n){return"this.queriesfn["+(this.queriesidx-1)+"](this.params,null,"+e+")"},z.Insert.prototype.compile=function(e){var t=this;e=t.into.databaseid||e;var n=o.databases[e],r=t.into.tableid,i=n.tables[r];if(!i)throw"Table '"+r+"' could not be found";var a,s="",u="",l=(s="db.tables['"+r+"'].dirty=true;","var a,aa=[],x;");if(this.values){this.exists&&(this.existsfn=this.exists.map((function(t){return(t=t.compile(e)).query.modifier="RECORDSET",t}))),this.queries&&(this.queriesfn=this.queries.map((function(t){return(t=t.compile(e)).query.modifier="RECORDSET",t}))),t.values.forEach((function(a){var l=[];t.columns?t.columns.forEach((function(e,t){var n="'"+e.columnid+"':";i.xcolumns&&i.xcolumns[e.columnid]?0<=["INT","FLOAT","NUMBER","MONEY"].indexOf(i.xcolumns[e.columnid].dbtypeid)?n+="(x="+a[t].toJS()+",x==undefined?undefined:+x)":o.fn[i.xcolumns[e.columnid].dbtypeid]?(n+="(new "+i.xcolumns[e.columnid].dbtypeid+"(",n+=a[t].toJS(),n+="))"):n+=a[t].toJS():n+=a[t].toJS(),l.push(n)})):Array.isArray(a)&&i.columns&&0<i.columns.length?i.columns.forEach((function(e,t){var n="'"+e.columnid+"':";0<=["INT","FLOAT","NUMBER","MONEY"].indexOf(e.dbtypeid)?n+="+"+a[t].toJS():o.fn[e.dbtypeid]?(n+="(new "+e.dbtypeid+"(",n+=a[t].toJS(),n+="))"):n+=a[t].toJS(),l.push(n)})):u=ee(a),n.tables[r].defaultfns&&l.unshift(n.tables[r].defaultfns),s+=u?"a="+u+";":"a={"+l.join(",")+"};",n.tables[r].isclass&&(s+="var db=alasql.databases['"+e+"'];",s+='a.$class="'+r+'";',s+="a.$id=db.counter++;",s+="db.objects[a.$id]=a;"),n.tables[r].insert?(s+="var db=alasql.databases['"+e+"'];",s+="db.tables['"+r+"'].insert(a,"+(t.orreplace?"true":"false")+");"):s+="aa.push(a);"})),a=l+s,n.tables[r].insert||(s+="alasql.databases['"+e+"'].tables['"+r+"'].data=alasql.databases['"+e+"'].tables['"+r+"'].data.concat(aa);"),n.tables[r].insert&&n.tables[r].isclass?s+="return a.$id;":s+="return "+t.values.length;var c=new Function("db, params, alasql","var y;"+l+s).bind(this)}else if(this.select){this.select.modifier="RECORDSET";var h=this.select.compile(e);if(n.engineid&&o.engines[n.engineid].intoTable)return function(e,t){return e=h(e),o.engines[n.engineid].intoTable(n.databaseid,r,e.data,null,t)};var f="return alasql.utils.extend(r,{"+i.defaultfns+"})",p=new Function("r,db,params,alasql",f);c=function(e,n,i){var o=h(n).data;if(e.tables[r].insert)for(var a=0,s=o.length;a<s;a++){var u=C(o[a]);p(u,e,n,i),e.tables[r].insert(u,t.orreplace)}else e.tables[r].data=e.tables[r].data.concat(o);return i.options.nocount?void 0:o.length}}else{if(!this.default)throw new Error("Wrong INSERT parameters");f="db.tables['"+r+"'].data.push({"+i.defaultfns+"});return 1;",c=new Function("db,params,alasql",f)}return n.engineid&&o.engines[n.engineid].intoTable&&o.options.autocommit?function(e,t){return e=new Function("db,params","var y;"+a+"return aa;")(n,e),o.engines[n.engineid].intoTable(n.databaseid,r,e,null,t)}:function(t,n){var i=o.databases[e];return o.options.autocommit&&i.engineid&&o.engines[i.engineid].loadTableData(e,r),t=c(i,t,o),o.options.autocommit&&i.engineid&&o.engines[i.engineid].saveTableData(e,r),o.options.nocount&&(t=void 0),n&&n(t),t}},z.Insert.prototype.execute=function(e,t,n){return this.compile(e)(t,n)},z.CreateTrigger=function(e){return z.extend(this,e)},z.CreateTrigger.prototype.toString=function(){var e="CREATE TRIGGER "+this.trigger+" ";return this.when&&(e+=this.when+" "),e+=this.action+" ON ",this.table.databaseid&&(e+=this.table.databaseid+"."),(e+=this.table.tableid+" ")+this.statement.toString()},z.CreateTrigger.prototype.execute=function(e,t,n){var r=1,i=this.trigger;e=this.table.databaseid||e;var a=o.databases[e],s=this.table.tableid;return e={action:this.action,when:this.when,statement:this.statement,funcid:this.funcid,tableid:this.table.tableid},"INSERT"==(a.triggers[i]=e).action&&"BEFORE"==e.when?a.tables[s].beforeinsert[i]=e:"INSERT"==e.action&&"AFTER"==e.when?a.tables[s].afterinsert[i]=e:"INSERT"==e.action&&"INSTEADOF"==e.when?a.tables[s].insteadofinsert[i]=e:"DELETE"==e.action&&"BEFORE"==e.when?a.tables[s].beforedelete[i]=e:"DELETE"==e.action&&"AFTER"==e.when?a.tables[s].afterdelete[i]=e:"DELETE"==e.action&&"INSTEADOF"==e.when?a.tables[s].insteadofdelete[i]=e:"UPDATE"==e.action&&"BEFORE"==e.when?a.tables[s].beforeupdate[i]=e:"UPDATE"==e.action&&"AFTER"==e.when?a.tables[s].afterupdate[i]=e:"UPDATE"==e.action&&"INSTEADOF"==e.when&&(a.tables[s].insteadofupdate[i]=e),n&&(r=n(r)),r},z.DropTrigger=function(e){return z.extend(this,e)},z.DropTrigger.prototype.toString=function(){return"DROP TRIGGER "+this.trigger},z.DropTrigger.prototype.execute=function(e,t,n){var r=0,i=o.databases[e],a=this.trigger;if(!i.triggers[a])throw new Error("Trigger not found");if(!(e=i.triggers[a].tableid))throw new Error("Trigger Table not found");return r=1,delete i.tables[e].beforeinsert[a],delete i.tables[e].afterinsert[a],delete i.tables[e].insteadofinsert[a],delete i.tables[e].beforedelete[a],delete i.tables[e].afterdelete[a],delete i.tables[e].insteadofdelete[a],delete i.tables[e].beforeupdate[a],delete i.tables[e].afterupdate[a],delete i.tables[e].insteadofupdate[a],delete i.triggers[a],n&&(r=n(r)),r},z.Delete=function(e){return z.extend(this,e)},z.Delete.prototype.toString=function(){var e="DELETE FROM "+this.table.toString();return this.where&&(e+=" WHERE "+this.where.toString()),e},z.Delete.prototype.compile=function(e){e=this.table.databaseid||e;var t,n=this.table.tableid,r=o.databases[e];return this.where?(this.exists&&(this.existsfn=this.exists.map((function(t){return(t=t.compile(e)).query.modifier="RECORDSET",t}))),this.queries&&(this.queriesfn=this.queries.map((function(t){return(t=t.compile(e)).query.modifier="RECORDSET",t}))),t=new Function("r,params,alasql","var y;return ("+this.where.toJS("r","")+")").bind(this),function(i,a){if(r.engineid&&o.engines[r.engineid].deleteFromTable)return o.engines[r.engineid].deleteFromTable(e,n,t,i,a);o.options.autocommit&&r.engineid&&("LOCALSTORAGE"==r.engineid||"FILESTORAGE"==r.engineid)&&o.engines[r.engineid].loadTableData(e,n);for(var s,u=r.tables[n],l=u.data.length,c=[],h=0,f=u.data.length;h<f;h++)t(u.data[h],i,o)?u.delete&&u.delete(h,i,o):c.push(u.data[h]);for(s in u.data=c,u.afterdelete){var p=u.afterdelete[s];p&&(p.funcid?o.fn[p.funcid]():p.statement&&p.statement.execute(e))}return l-=u.data.length,o.options.autocommit&&r.engineid&&("LOCALSTORAGE"==r.engineid||"FILESTORAGE"==r.engineid)&&o.engines[r.engineid].saveTableData(e,n),a&&a(l),l}):function(t,i){o.options.autocommit&&r.engineid&&o.engines[r.engineid].loadTableData(e,n),r.tables[n].dirty=!0;var a,s=r.tables[n].data.length;for(a in r.tables[n].data.length=0,r.tables[n].uniqs)r.tables[n].uniqs[a]={};for(a in r.tables[n].indices)r.tables[n].indices[a]={};return o.options.autocommit&&r.engineid&&o.engines[r.engineid].saveTableData(e,n),i&&i(s),s}},z.Delete.prototype.execute=function(e,t,n){return this.compile(e)(t,n)},z.Update=function(e){return z.extend(this,e)},z.Update.prototype.toString=function(){var e="UPDATE "+this.table.toString();return this.columns&&(e+=" SET "+this.columns.toString()),this.where&&(e+=" WHERE "+this.where.toString()),e},z.SetColumn=function(e){return z.extend(this,e)},z.SetColumn.prototype.toString=function(){return this.column.toString()+"="+this.expression.toString()},z.Update.prototype.compile=function(e){e=this.table.databaseid||e;var t,n=this.table.tableid;this.where&&(this.exists&&(this.existsfn=this.exists.map((function(t){return(t=t.compile(e)).query.modifier="RECORDSET",t}))),this.queries&&(this.queriesfn=this.queries.map((function(t){return(t=t.compile(e)).query.modifier="RECORDSET",t}))),t=new Function("r,params,alasql","var y;return "+this.where.toJS("r","")).bind(this));var r=o.databases[e].tables[n].onupdatefns||"";r+=";",this.columns.forEach((function(e){r+="r['"+e.column.columnid+"']="+e.expression.toJS("r","")+";"}));var i=new Function("r,params,alasql","var y;"+r);return function(r,a){var s=o.databases[e];if(s.engineid&&o.engines[s.engineid].updateTable)return o.engines[s.engineid].updateTable(e,n,i,t,r,a);o.options.autocommit&&s.engineid&&o.engines[s.engineid].loadTableData(e,n);var u=s.tables[n];if(!u)throw new Error("Table '"+n+"' not exists");for(var l=0,c=0,h=u.data.length;c<h;c++)t&&!t(u.data[c],r,o)||(u.update?u.update(i,c,r):i(u.data[c],r,o),l++);return o.options.autocommit&&s.engineid&&o.engines[s.engineid].saveTableData(e,n),a&&a(l),l}},z.Update.prototype.execute=function(e,t,n){return this.compile(e)(t,n)},z.Merge=function(e){return z.extend(this,e)},z.Merge.prototype.toString=function(){var e="MERGE ";return e+=this.into.tableid+" ",this.into.as&&(e+="AS "+this.into.as+" "),e+="USING "+this.using.tableid+" ",this.using.as&&(e+="AS "+this.using.as+" "),e+="ON "+this.on.toString()+" ",this.matches.forEach((function(t){e+="WHEN ",t.matched||(e+="NOT "),e+="MATCHED ",t.bytarget&&(e+="BY TARGET "),t.bysource&&(e+="BY SOURCE "),t.expr&&(e+="AND "+t.expr.toString()+" "),e+="THEN ",t.action.delete&&(e+="DELETE "),t.action.insert&&(e+="INSERT ",t.action.columns&&(e+="("+t.action.columns.toString()+") "),t.action.values&&(e+="VALUES ("+t.action.values.toString()+") "),t.action.defaultvalues&&(e+="DEFAULT VALUES ")),t.action.update&&(e+="UPDATE ",e+=t.action.update.map((function(e){return e.toString()})).join(",")+" ")})),e},z.Merge.prototype.execute=function(e,t,n){var r=1;return n&&(r=n(r)),r},z.CreateDatabase=function(e){return z.extend(this,e)},z.CreateDatabase.prototype.toString=function(){var e="CREATE";return this.engineid&&(e+=" "+this.engineid),e+=" DATABASE",this.ifnotexists&&(e+=" IF NOT EXISTS"),e+=" "+this.databaseid,this.args&&0<this.args.length&&(e+="("+this.args.map((function(e){return e.toString()})).join(", ")+")"),this.as&&(e+=" AS "+this.as),e},z.CreateDatabase.prototype.execute=function(e,t,n){if(this.args&&0<this.args.length&&this.args.map((function(e){return new Function("params,alasql","var y;return "+e.toJS())(t,o)})),this.engineid)return o.engines[this.engineid].createDatabase(this.databaseid,this.args,this.ifnotexists,this.as,n);var r=this.databaseid;if(o.databases[r])throw new Error("Database '"+r+"' already exists");new o.Database(r);var i=1;return n?n(i):i},z.AttachDatabase=function(e){return z.extend(this,e)},z.AttachDatabase.prototype.toString=function(e){var t="ATTACH";return this.engineid&&(t+=" "+this.engineid),t+=" DATABASE "+this.databaseid,e&&(t+="(",0<e.length&&(t+=e.map((function(e){return e.toString()})).join(", ")),t+=")"),this.as&&(t+=" AS "+this.as),t},z.AttachDatabase.prototype.execute=function(e,t,n){if(!o.engines[this.engineid])throw new Error('Engine "'+this.engineid+'" is not defined.');return o.engines[this.engineid].attachDatabase(this.databaseid,this.as,this.args,t,n)},z.DetachDatabase=function(e){return z.extend(this,e)},z.DetachDatabase.prototype.toString=function(){return"DETACH DATABASE "+this.databaseid},z.DetachDatabase.prototype.execute=function(e,t,n){if(!o.databases[this.databaseid].engineid)throw new Error('Cannot detach database "'+this.engineid+'", because it was not attached.');var r=this.databaseid;if(r===o.DEFAULTDATABASEID)throw new Error("Drop of default database is prohibited");if(o.databases[r]){var i=o.databases[r].engineid&&"FILESTORAGE"==o.databases[r].engineid,a=o.databases[r].filename||"";delete o.databases[r],i&&(o.databases[r]={},o.databases[r].isDetached=!0,o.databases[r].filename=a),r===o.useid&&o.use(),a=1}else{if(!this.ifexists)throw new Error("Database '"+r+"' does not exist");a=0}return n&&n(a),a},z.UseDatabase=function(e){return z.extend(this,e)},z.UseDatabase.prototype.toString=function(){return"USE DATABASE "+this.databaseid},z.UseDatabase.prototype.execute=function(e,t,n){var r=this.databaseid;if(!o.databases[r])throw new Error("Database '"+r+"' does not exist");return o.use(r),n&&n(1),1},z.DropDatabase=function(e){return z.extend(this,e)},z.DropDatabase.prototype.toString=function(){var e="DROP";return this.ifexists&&(e+=" IF EXISTS"),e+" DATABASE "+this.databaseid},z.DropDatabase.prototype.execute=function(e,t,n){if(this.engineid)return o.engines[this.engineid].dropDatabase(this.databaseid,this.ifexists,n);var r,i=this.databaseid;if(i===o.DEFAULTDATABASEID)throw new Error("Drop of default database is prohibited");if(o.databases[i]){if(o.databases[i].engineid)throw new Error("Cannot drop database '"+i+"', because it is attached. Detach it.");delete o.databases[i],i===o.useid&&o.use(),r=1}else{if(!this.ifexists)throw new Error("Database '"+i+"' does not exist");r=0}return n&&n(r),r},z.Declare=function(e){return z.extend(this,e)},z.Declare.prototype.toString=function(){var e="DECLARE ";return this.declares&&0<this.declares.length&&(e=this.declares.map((function(e){var t="";return t+="@"+e.variable+" ",t+=e.dbtypeid,this.dbsize&&(t+="("+this.dbsize,this.dbprecision&&(t+=","+this.dbprecision),t+=")"),e.expression&&(t+=" = "+e.expression.toString()),t})).join(",")),e},z.Declare.prototype.execute=function(e,t,n){var r=1;return this.declares&&0<this.declares.length&&this.declares.map((function(e){var n=e.dbtypeid;o.fn[n]||(n=n.toUpperCase()),o.declares[e.variable]={dbtypeid:n,dbsize:e.dbsize,dbprecision:e.dbprecision},e.expression&&(o.vars[e.variable]=new Function("params,alasql","return "+e.expression.toJS("({})","",null))(t,o),o.declares[e.variable]&&(o.vars[e.variable]=o.stdfn.CONVERT(o.vars[e.variable],o.declares[e.variable])))})),n&&(r=n(r)),r},z.ShowDatabases=function(e){return z.extend(this,e)},z.ShowDatabases.prototype.toString=function(){var e="SHOW DATABASES";return this.like&&(e+="LIKE "+this.like.toString()),e},z.ShowDatabases.prototype.execute=function(e,t,n){if(this.engineid)return o.engines[this.engineid].showDatabases(this.like,n);var r,i=this,a=[];for(r in o.databases)a.push({databaseid:r});return i.like&&a&&0<a.length&&(a=a.filter((function(e){return o.utils.like(i.like.value,e.databaseid)}))),n&&n(a),a},z.ShowTables=function(e){return z.extend(this,e)},z.ShowTables.prototype.toString=function(){var e="SHOW TABLES";return this.databaseid&&(e+=" FROM "+this.databaseid),this.like&&(e+=" LIKE "+this.like.toString()),e},z.ShowTables.prototype.execute=function(e,t,n){e=o.databases[this.databaseid||e];var r,i=this,a=[];for(r in e.tables)a.push({tableid:r});return i.like&&a&&0<a.length&&(a=a.filter((function(e){return o.utils.like(i.like.value,e.tableid)}))),n&&n(a),a},z.ShowColumns=function(e){return z.extend(this,e)},z.ShowColumns.prototype.toString=function(){var e="SHOW COLUMNS";return this.table.tableid&&(e+=" FROM "+this.table.tableid),this.databaseid&&(e+=" FROM "+this.databaseid),e},z.ShowColumns.prototype.execute=function(e,t,n){return(e=o.databases[this.databaseid||e].tables[this.table.tableid])&&e.columns?(e=e.columns.map((function(e){return{columnid:e.columnid,dbtypeid:e.dbtypeid,dbsize:e.dbsize}})),n&&n(e),e):(n&&n([]),[])},z.ShowIndex=function(e){return z.extend(this,e)},z.ShowIndex.prototype.toString=function(){var e="SHOW INDEX";return this.table.tableid&&(e+=" FROM "+this.table.tableid),this.databaseid&&(e+=" FROM "+this.databaseid),e},z.ShowIndex.prototype.execute=function(e,t,n){var r=o.databases[this.databaseid||e].tables[this.table.tableid],i=[];if(r&&r.indices)for(var a in r.indices)i.push({hh:a,len:Object.keys(r.indices[a]).length});return n&&n(i),i},z.ShowCreateTable=function(e){return z.extend(this,e)},z.ShowCreateTable.prototype.toString=function(){var e="SHOW CREATE TABLE "+this.table.tableid;return this.databaseid&&(e+=" FROM "+this.databaseid),e},z.ShowCreateTable.prototype.execute=function(e){var t=o.databases[this.databaseid||e].tables[this.table.tableid];if(t){e="CREATE TABLE "+this.table.tableid+" (";var n=[];return t.columns&&(t.columns.forEach((function(e){var t=e.columnid+" "+e.dbtypeid;e.dbsize&&(t+="("+e.dbsize+")"),e.primarykey&&(t+=" PRIMARY KEY"),n.push(t)})),e+=n.join(", ")),e+")"}throw new Error('There is no such table "'+this.table.tableid+'"')},z.SetVariable=function(e){return z.extend(this,e)},z.SetVariable.prototype.toString=function(){var e="SET ";return void 0!==this.value&&(e+=this.variable.toUpperCase()+" "+(this.value?"ON":"OFF")),this.expression&&(e+=this.method+this.variable+" = "+this.expression.toString()),e},z.SetVariable.prototype.execute=function(e,t,n){var r;void 0!==this.value?("ON"==(r=this.value)?r=!0:"OFF"==r&&(r=!1),o.options[this.variable]=r):this.expression&&(this.exists&&(this.existsfn=this.exists.map((function(t){return(t=t.compile(e)).query&&!t.query.modifier&&(t.query.modifier="RECORDSET"),t}))),this.queries&&(this.queriesfn=this.queries.map((function(t){return(t=t.compile(e)).query&&!t.query.modifier&&(t.query.modifier="RECORDSET"),t}))),i=new Function("params,alasql","return "+this.expression.toJS("({})","",null)).bind(this)(t,o),o.declares[this.variable]&&(i=o.stdfn.CONVERT(i,o.declares[this.variable])),this.props&&0<this.props.length?(r="@"==this.method?"alasql.vars['"+this.variable+"']":"params['"+this.variable+"']",r+=this.props.map((function(e){return"string"==typeof e?"['"+e+"']":"number"==typeof e?"["+e+"]":"["+e.toJS()+"]"})).join(),new Function("value,params,alasql","var y;"+r+"=value")(i,t,o)):"@"==this.method?o.vars[this.variable]=i:t[this.variable]=i);var i=1;return n&&(i=n(i)),i},o.test=function(e,t,n){if(0!==arguments.length){var r=Date.now();if(1===arguments.length)return n(),void o.con.log(Date.now()-r);2===arguments.length&&(n=t,t=1);for(var i=0;i<t;i++)n();o.con.results[e]=Date.now()-r}else o.log(o.con.results)},o.log=function(e,t){var n,r=o.useid,i=o.options.logtarget;if(l.isNode&&(i="console"),n="string"==typeof e?o(e,t):e,"console"===i||l.isNode)"string"==typeof e&&o.options.logprompt&&console.log(r+">",e),Array.isArray(n)&&console.table?console.table(n):console.log(Q(n));else{i="output"===i?document.getElementsByTagName("output")[0]:"string"==typeof i?document.getElementById(i):i;var a="";if("string"==typeof e&&o.options.logprompt&&(a+="<pre><code>"+o.pretty(e)+"</code></pre>"),Array.isArray(n))if(0===n.length)a+="<p>[ ]</p>";else if("object"!=typeof n[0]||Array.isArray(n[0]))for(var s=0,u=n.length;s<u;s++)a+="<p>"+ne(n[s])+"</p>";else a+=ne(n);else a+=ne(n);i.innerHTML+=a}},o.clear=function(){var e=o.options.logtarget;l.isNode||l.isMeteorServer?console.clear&&console.clear():("output"===e?document.getElementsByTagName("output")[0]:"string"==typeof e?document.getElementById(e):e).innerHTML=""},o.write=function(e){var t=o.options.logtarget;l.isNode||l.isMeteorServer?console.log&&console.log(e):("output"===t?document.getElementsByTagName("output")[0]:"string"==typeof t?document.getElementById(t):t).innerHTML+=e},o.prompt=function(e,t,n){if(l.isNode)throw new Error("The prompt not realized for Node.js");var r=0;if("string"==typeof e&&(e=document.getElementById(e)),"string"==typeof t&&(t=document.getElementById(t)),t.textContent=o.useid,n){o.prompthistory.push(n),r=o.prompthistory.length;try{var i=Date.now();o.log(n),o.write('<p style="color:blue">'+(Date.now()-i)+" ms</p>")}catch(i){o.write("<p>"+o.useid+"&gt;&nbsp;<b>"+n+"</b></p>"),o.write('<p style="color:red">'+i+"<p>")}}var a=e.getBoundingClientRect().top+document.getElementsByTagName("body")[0].scrollTop;re(document.getElementsByTagName("body")[0],a,500),e.onkeydown=function(n){if(13===n.which){var i=e.value,a=o.useid;e.value="",o.prompthistory.push(i),r=o.prompthistory.length;try{var s=Date.now();o.log(i),o.write('<p style="color:blue">'+(Date.now()-s)+" ms</p>")}catch(n){o.write("<p>"+a+"&gt;&nbsp;"+o.pretty(i,!1)+"</p>"),o.write('<p style="color:red">'+n+"<p>")}e.focus(),t.textContent=o.useid,a=e.getBoundingClientRect().top+document.getElementsByTagName("body")[0].scrollTop,re(document.getElementsByTagName("body")[0],a,500)}else 38===n.which?(--r<0&&(r=0),o.prompthistory[r]&&(e.value=o.prompthistory[r],n.preventDefault())):40===n.which&&(++r>=o.prompthistory.length?(r=o.prompthistory.length,e.value=""):o.prompthistory[r]&&(e.value=o.prompthistory[r],n.preventDefault()))}},z.BeginTransaction=function(e){return z.extend(this,e)},z.BeginTransaction.prototype.toString=function(){return"BEGIN TRANSACTION"},z.BeginTransaction.prototype.execute=function(e,t,n){return o.databases[e].engineid?o.engines[o.databases[o.useid].engineid].begin(e,n):(n&&n(1),1)},z.CommitTransaction=function(e){return z.extend(this,e)},z.CommitTransaction.prototype.toString=function(){return"COMMIT TRANSACTION"},z.CommitTransaction.prototype.execute=function(e,t,n){return o.databases[e].engineid?o.engines[o.databases[o.useid].engineid].commit(e,n):(n&&n(1),1)},z.RollbackTransaction=function(e){return z.extend(this,e)},z.RollbackTransaction.prototype.toString=function(){return"ROLLBACK TRANSACTION"},z.RollbackTransaction.prototype.execute=function(e,t,n){return o.databases[e].engineid?o.engines[o.databases[e].engineid].rollback(e,n):(n&&n(1),1)},o.options.tsql&&(o.stdfn.OBJECT_ID=function(e,t){void 0===t&&(t="T"),t=t.toUpperCase(),e=e.split(".");var n=o.useid,r=e[0];2==e.length&&(n=e[0],r=e[1]);var i,a=o.databases[n].tables;for(i in n=o.databases[n].databaseid,a)if(i==r)return a[i].view&&"V"==t||!a[i].view&&"T"==t?n+"."+i:void 0}),o.options.mysql,(o.options.mysql||o.options.sqlite)&&(o.from.INFORMATION_SCHEMA=function(e,t,n,r,i){if("VIEWS"!=e&&"TABLES"!=e)throw new Error("Unknown INFORMATION_SCHEMA table");var a,s=[];for(a in o.databases){var u,l=o.databases[a].tables;for(u in l)(l[u].view&&"VIEWS"==e||!l[u].view&&"TABLES"==e)&&s.push({TABLE_CATALOG:a,TABLE_NAME:u})}return n&&(s=n(s,r,i)),s}),o.options.postgres,o.options.oracle,o.options.sqlite,o.into.SQL=function(e,t,n,r,i){"object"==typeof e&&(t=e,e=void 0);var a={};if(o.utils.extend(a,t),void 0===a.tableid)throw new Error("Table for INSERT TO is not defined.");var s="";0===r.length&&"object"==typeof n[0]&&(r=Object.keys(n[0]).map((function(e){return{columnid:e}})));for(var u=0,l=n.length;u<l;u++)s+="INSERT INTO "+t.tableid+"(",s+=r.map((function(e){return e.columnid})).join(","),s+=") VALUES (",s+=r.map((function(e){var t=n[u][e.columnid];return e.typeid?"STRING"!==e.typeid&&"VARCHAR"!==e.typeid&&"NVARCHAR"!==e.typeid&&"CHAR"!==e.typeid&&"NCHAR"!==e.typeid||(t="'"+m(t)+"'"):"string"==typeof t&&(t="'"+m(t)+"'"),t})),s+=");\n";return e=o.utils.autoExtFilename(e,"sql",t),e=o.utils.saveFile(e,s),i&&(e=i(e)),e},o.into.HTML=function(e,t,n,r,i){var o=1;return i&&(o=i(o)),o},o.into.JSON=function(e,t,n,r,i){var a=1;return"object"==typeof e&&(t=e,e=void 0),n=JSON.stringify(n),e=o.utils.autoExtFilename(e,"json",t),a=o.utils.saveFile(e,n),i&&(a=i(a)),a},o.into.TXT=function(e,t,n,r,i){0===r.length&&0<n.length&&(r=Object.keys(n[0]).map((function(e){return{columnid:e}}))),"object"==typeof e&&(t=e,e=void 0);var a,s=n.length,u="";return 0<n.length&&(a=r[0].columnid,u+=n.map((function(e){return e[a]})).join("\n")),e=o.utils.autoExtFilename(e,"txt",t),s=o.utils.saveFile(e,u),i&&(s=i(s)),s},o.into.TAB=o.into.TSV=function(e,t,n,r,i){var a={};return o.utils.extend(a,t),a.separator="\t",e=o.utils.autoExtFilename(e,"tab",t),a.autoExt=!1,o.into.CSV(e,a,n,r,i)},o.into.CSV=function(e,t,n,r,i){0===r.length&&0<n.length&&(r=Object.keys(n[0]).map((function(e){return{columnid:e}}))),"object"==typeof e&&(t=e,e=void 0);var a={headers:!0,separator:";",quote:'"',utf8Bom:!0};t&&!t.headers&&void 0!==t.headers&&(a.utf8Bom=!1),o.utils.extend(a,t);var s=n.length,u=a.utf8Bom?"\ufeff":"";return a.headers&&(u+=a.quote+r.map((function(e){return e.columnid.trim()})).join(a.quote+a.separator+a.quote)+a.quote+"\r\n"),n.forEach((function(e){u+=r.map((function(t){return t=e[t.columnid],""!==a.quote&&(t=(t+"").replace(new RegExp("\\"+a.quote,"g"),a.quote+a.quote)),+t!=t&&(t=a.quote+t+a.quote),t})).join(a.separator)+"\r\n"})),e=o.utils.autoExtFilename(e,"csv",t),s=o.utils.saveFile(e,u,null,{disableAutoBom:!0}),i&&(s=i(s)),s},o.into.XLS=function(e,t,n,r,i){"object"==typeof e&&(t=e,e=void 0);var a={};t&&t.sheets&&(a=t.sheets);var s={headers:!0};return void 0!==a.Sheet1?s=a[0]:void 0!==t&&(s=t),void 0===s.sheetid&&(s.sheetid="Sheet1"),a=function(){var e,i='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" \t\txmlns="http://www.w3.org/TR/REC-html40"><head> \t\t<meta charset="utf-8" /> \t\t\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets> ';return i+=" <x:ExcelWorksheet><x:Name>"+s.sheetid+"</x:Name><x:WorksheetOptions><x:DisplayGridlines/>     </x:WorksheetOptions> \t\t</x:ExcelWorksheet>",i+="</x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head>",i+="<body",void 0!==s.style&&(i+=' style="',"function"==typeof s.style?i+=s.style(s):i+=s.style,i+='"'),i+=">",i+="<table>",void 0!==s.caption&&("string"==typeof(e=s.caption)&&(e={title:e}),i+="<caption",void 0!==e.style&&(i+=' style="',"function"==typeof e.style?i+=e.style(s,e):i+=e.style,i+='" '),i+=">",i+=e.title,i+="</caption>"),void 0!==s.columns?r=s.columns:0==r.length&&0<n.length&&"object"==typeof n[0]&&(r=Array.isArray(n[0])?n[0].map((function(e,t){return{columnid:t}})):Object.keys(n[0]).map((function(e){return{columnid:e}}))),r.forEach((function(e,t){void 0!==s.column&&M(e,s.column),void 0===e.width&&(s.column&&"undefined"!=s.column.width?e.width=s.column.width:e.width="120px"),"number"==typeof e.width&&(e.width=e.width+"px"),void 0===e.columnid&&(e.columnid=t),void 0===e.title&&(e.title=""+e.columnid.trim()),s.headers&&Array.isArray(s.headers)&&(e.title=s.headers[t])})),i+="<colgroups>",r.forEach((function(e){i+='<col style="width: '+e.width+'"></col>'})),i+="</colgroups>",s.headers&&(i+="<thead>",i+="<tr>",r.forEach((function(e,t){i+="<th ",void 0!==e.style&&(i+=' style="',"function"==typeof e.style?i+=e.style(s,e,t):i+=e.style,i+='" '),i+=">",void 0!==e.title&&("function"==typeof e.title?i+=e.title(s,e,t):i+=e.title),i+="</th>"})),i+="</tr>",i+="</thead>"),i+="<tbody>",n&&0<n.length&&n.forEach((function(e,n){var o;n>s.limit||(i+="<tr",M(o={},s.row),s.rows&&s.rows[n]&&M(o,s.rows[n]),void 0!==o&&void 0!==o.style&&(i+=' style="',"function"==typeof o.style?i+=o.style(s,e,n):i+=o.style,i+='" '),i+=">",r.forEach((function(r,a){var u={};M(u,s.cell),M(u,o.cell),void 0!==s.column&&M(u,s.column.cell),M(u,r.cell),s.cells&&s.cells[n]&&s.cells[n][a]&&M(u,s.cells[n][a]);var l=e[r.columnid];"function"==typeof u.value&&(l=u.value(l,s,e,r,u,n,a));var c=u.typeid;"function"==typeof c&&(c=c(l,s,e,r,u,n,a)),void 0===c&&("number"==typeof l?c="number":"string"==typeof l?c="string":"boolean"==typeof l?c="boolean":"object"==typeof l&&l instanceof Date&&(c="date"));var h="";if("money"==c?h='mso-number-format:"\\#\\,\\#\\#0\\\\ _\u0440_\\.";white-space:normal;':"number"==c?h=" ":"date"==c?h='mso-number-format:"Short Date";':t.types&&t.types[c]&&t.types[c].typestyle&&(h=t.types[c].typestyle),i+="<td style='"+(h=h||'mso-number-format:"\\@";')+"' ",void 0!==u.style&&(i+=' style="',"function"==typeof u.style?i+=u.style(l,s,e,r,n,a):i+=u.style,i+='" '),i+=">",u=u.format,void 0===l)i+="";else if(void 0!==u)if("function"==typeof u)i+=u(l);else{if("string"!=typeof u)throw new Error("Unknown format type. Should be function or string");i+=l}else i+="number"==c||"date"==c?l.toString():"money"==c?(+l).toFixed(2):l;i+="</td>"})),i+="</tr>")})),i+="</tbody>",i+="</table>",i+="</body>",i+="</html>"}(),e=o.utils.autoExtFilename(e,"xls",t),a=o.utils.saveFile(e,a),i&&(a=i(a)),a},o.into.XLSXML=function(e,t,n,r,i){t=t||{},"object"==typeof e&&(t=e,e=void 0);var a,s={},u=t&&t.sheets?(s=t.sheets,a=n,r):(s.Sheet1=t,a=[n],[r]);return e=o.utils.autoExtFilename(e,"xls",t),e=o.utils.saveFile(e,function(){var e="",n=" </Styles>",r={},i=62;function o(t){var n,o="";for(n in t){for(var a in o+="<"+n,t[n])o+=" ","x:"==a.substr(0,2)?o+=a:o+="ss:",o+=a+'="'+t[n][a]+'"';o+="/>"}var s=b(o);return r[s]||(r[s]={styleid:i},e+='<Style ss:ID="s'+i+'">',e+=o,e+="</Style>",i++),"s"+r[s].styleid}var l,c=0;for(l in s){var h=s[l],f=void 0!==h.dataidx?h.dataidx:c++,p=function(e){try{return Object.values(e)}catch(l){return Object.keys(e).map((function(t){return e[t]}))}}(a[f]),d=void 0;void 0!==h.columns?d=h.columns:(void 0===(d=u[f])||0==d.length&&0<p.length)&&"object"==typeof p[0]&&(d=Array.isArray(p[0])?p[0].map((function(e,t){return{columnid:t}})):Object.keys(p[0]).map((function(e){return{columnid:e}}))),d.forEach((function(e,t){void 0!==h.column&&M(e,h.column),void 0===e.width&&(h.column&&void 0!==h.column.width?e.width=h.column.width:e.width=120),"number"==typeof e.width&&(e.width=e.width),void 0===e.columnid&&(e.columnid=t),void 0===e.title&&(e.title=""+e.columnid.trim()),h.headers&&Array.isArray(h.headers)&&(e.title=h.headers[t])})),n+='<Worksheet ss:Name="'+l+'"> \t  \t\t\t<Table ss:ExpandedColumnCount="'+d.length+'" ss:ExpandedRowCount="'+((h.headers?1:0)+Math.min(p.length,h.limit||p.length))+'" x:FullColumns="1" \t   \t\t\tx:FullRows="1" ss:DefaultColumnWidth="65" ss:DefaultRowHeight="15">',d.forEach((function(e,t){n+='<Column ss:Index="'+(t+1)+'" ss:AutoFitWidth="0" ss:Width="'+e.width+'"/>'})),h.headers&&(n+='<Row ss:AutoFitHeight="0">',d.forEach((function(e,t){var r;n+="<Cell ",void 0!==e.style&&(r={},"function"==typeof e.style?M(r,e.style(h,e,t)):M(r,e.style),n+='ss:StyleID="'+o(r)+'"'),n+='><Data ss:Type="String">',void 0!==e.title&&("function"==typeof e.title?n+=e.title(h,e,t):n+=e.title),n+="</Data></Cell>"})),n+="</Row>"),p&&0<p.length&&p.forEach((function(e,r){var i,a;r>h.limit||(M(i={},h.row),h.rows&&h.rows[r]&&M(i,h.rows[r]),n+="<Row ",void 0!==i&&(a={},void 0!==i.style&&("function"==typeof i.style?M(a,i.style(h,e,r)):M(a,i.style),n+='ss:StyleID="'+o(a)+'"')),n+=">",d.forEach((function(a,s){var u={};M(u,h.cell),M(u,i.cell),void 0!==h.column&&M(u,h.column.cell),M(u,a.cell),h.cells&&h.cells[r]&&h.cells[r][s]&&M(u,h.cells[r][s]);var l=e[a.columnid];"function"==typeof u.value&&(l=u.value(l,h,e,a,u,r,s));var c=u.typeid;"function"==typeof c&&(c=c(l,h,e,a,u,r,s)),void 0===c&&("number"==typeof l?c="number":"string"==typeof l?c="string":"boolean"==typeof l?c="boolean":"object"==typeof l&&l instanceof Date&&(c="date"));var f="String";"number"==c?f="Number":"date"==c&&(f="Date");var p="";if("money"==c?p='mso-number-format:"\\#\\,\\#\\#0\\\\ _\u0440_\\.";white-space:normal;':"number"==c?p=" ":"date"==c?p='mso-number-format:"Short Date";':t.types&&t.types[c]&&t.types[c].typestyle&&(p=t.types[c].typestyle),p=p||'mso-number-format:"\\@";',n+="<Cell ",p={},void 0!==u.style&&("function"==typeof u.style?M(p,u.style(l,h,e,a,r,s)):M(p,u.style),n+='ss:StyleID="'+o(p)+'"'),n+=">",n+='<Data ss:Type="'+f+'">',u=u.format,void 0===l)n+="";else if(void 0!==u)if("function"==typeof u)n+=u(l);else{if("string"!=typeof u)throw new Error("Unknown format type. Should be function or string");n+=l}else n+="number"==c||"date"==c?l.toString():"money"==c?(+l).toFixed(2):l;n+="</Data></Cell>"})),n+="</Row>")})),n+="</Table></Worksheet>"}return'<?xml version="1.0"?> \t\t<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" \t\t xmlns:o="urn:schemas-microsoft-com:office:office" \t\t xmlns:x="urn:schemas-microsoft-com:office:excel" \t\t xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" \t\t xmlns:html="http://www.w3.org/TR/REC-html40"> \t\t <DocumentProperties xmlns="urn:schemas-microsoft-com:office:office"> \t\t </DocumentProperties> \t\t <OfficeDocumentSettings xmlns="urn:schemas-microsoft-com:office:office"> \t\t  <AllowPNG/> \t\t </OfficeDocumentSettings> \t\t <ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"> \t\t  <ActiveSheet>0</ActiveSheet> \t\t </ExcelWorkbook> \t\t <Styles> \t\t  <Style ss:ID="Default" ss:Name="Normal"> \t\t   <Alignment ss:Vertical="Bottom"/> \t\t   <Borders/> \t\t   <Font ss:FontName="Calibri" x:Family="Swiss" ss:Size="12" ss:Color="#000000"/> \t\t   <Interior/> \t\t   <NumberFormat/> \t\t   <Protection/> \t\t  </Style>'+e+(n+="</Workbook>")}()),i&&(e=i(e)),e},o.into.XLSX=function(e,t,n,r,i){var a=1;t=t||{},I(r,[{columnid:"_"}])&&(n=n.map((function(e){return e._})),r=void 0),e=o.utils.autoExtFilename(e,"xlsx",t);var s=N();"object"==typeof e&&(t=e,e=void 0);var u={SheetNames:[],Sheets:{}};return t.sourcefilename?o.utils.loadBinaryFile(t.sourcefilename,!!i,(function(e){u=s.read(e,{type:"binary"}),c()})):c(),i&&(a=i(a)),a;function c(){"object"==typeof t&&Array.isArray(t)?n&&0<n.length&&n.forEach((function(e,n){h(t[n],e,void 0,n+1)})):h(t,n,r,1),function(){if(void 0===e)a=u;else if(t=N(),l.isNode||l.isMeteorServer)t.writeFile(u,e);else{var t=t.write(u,{bookType:"xlsx",bookSST:!1,type:"binary"});if(9==_())throw new Error("Cannot save XLSX files in IE9. Please use XLS() export function");ue(new Blob([function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}(t)],{type:"application/octet-stream"}),e)}}()}function h(e,t,n,r){r={sheetid:"Sheet "+r,headers:!0},o.utils.extend(r,e);var i=Object.keys(t).length;(!n||0==n.length)&&0<i&&(n=Object.keys(t[0]).map((function(e){return{columnid:e}})));var a={};-1<u.SheetNames.indexOf(r.sheetid)||(u.SheetNames.push(r.sheetid),u.Sheets[r.sheetid]={}),a=u.Sheets[r.sheetid],e="A1",r.range&&(e=r.range);var s=o.utils.xlscn(e.match(/[A-Z]+/)[0]);e=+e.match(/[0-9]+/)[0]-1,c=u.Sheets[r.sheetid]["!ref"]?(c=u.Sheets[r.sheetid]["!ref"],l=o.utils.xlscn(c.match(/[A-Z]+/)[0]),+c.match(/[0-9]+/)[0]-1):l=1;var l=Math.max(s+n.length,l),c=Math.max(e+i+2,c),h=1+e;u.Sheets[r.sheetid]["!ref"]="A1:"+o.utils.xlsnc(l)+c,r.headers&&(n.forEach((function(e,t){a[o.utils.xlsnc(s+t)+""+h]={v:e.columnid.trim()}})),h++);for(var f=0;f<i;f++)n.forEach((function(e,n){var r={v:t[f][e.columnid]};"number"==typeof t[f][e.columnid]?r.t="n":"string"==typeof t[f][e.columnid]?r.t="s":"boolean"==typeof t[f][e.columnid]?r.t="b":"object"==typeof t[f][e.columnid]&&t[f][e.columnid]instanceof Date&&(r.t="d"),a[o.utils.xlsnc(s+n)+""+h]=r})),h++}},o.from.METEOR=function(e,t,n,r,i){return t=e.find(t).fetch(),n&&(t=n(t,r,i)),t},o.from.TABLETOP=function(e,t,n,r,i){var a=[];return e={headers:!0,simpleSheet:!0,key:e},o.utils.extend(e,t),e.callback=function(e){a=e,n&&(a=n(a,r,i))},Tabletop.init(e),null},o.from.HTML=function(e,t,n,r,i){var a={};if(o.utils.extend(a,t),!(e=document.querySelector(e))&&"TABLE"!==e.tagName)throw new Error("Selected HTML element is not a TABLE");var s=[],u=a.headers;if(u&&!Array.isArray(u)){u=[];for(var l=e.querySelector("thead tr").children,c=0;c<l.length;c++)l.item(c).style&&"none"===l.item(c).style.display&&a.skipdisplaynone?u.push(void 0):u.push(l.item(c).textContent)}for(var h=e.querySelectorAll("tbody tr"),f=0;f<h.length;f++){var p=h.item(f).children,d={};for(c=0;c<p.length;c++)p.item(c).style&&"none"===p.item(c).style.display&&a.skipdisplaynone||(u?d[u[c]]=p.item(c).textContent:d[c]=p.item(c).textContent);s.push(d)}return n&&(s=n(s,r,i)),s},o.from.RANGE=function(e,t,n,r,i){for(var o=[],a=e;a<=t;a++)o.push(a);return n&&(o=n(o,r,i)),o},o.from.FILE=function(e,t,n,r,i){if("string"==typeof e)a=e;else{if(!(e instanceof Event))throw new Error("Wrong usage of FILE() function");a=e.target.files[0].name}var a=(a=a.split("."))[a.length-1].toUpperCase();if(o.from[a])return o.from[a](e,t,n,r,i);throw new Error("Cannot recognize file type for loading")},o.from.JSON=function(e,t,n,r,i){var a;return e=o.utils.autoExtFilename(e,"json",t),o.utils.loadFile(e,!!n,(function(e){a=JSON.parse(e),n&&(a=n(a,r,i))})),a},o.from.TXT=function(e,t,n,r,i){var a;return e=o.utils.autoExtFilename(e,"txt",t),o.utils.loadFile(e,!!n,(function(e){""===(a=e.split(/\r?\n/))[a.length-1]&&a.pop();for(var t=0,o=a.length;t<o;t++)a[t]==+a[t]&&(a[t]=+a[t]),a[t]=[a[t]];n&&(a=n(a,r,i))})),a},o.from.TAB=o.from.TSV=function(e,t,n,r,i){return(t=t||{}).separator="\t",e=o.utils.autoExtFilename(e,"tab",t),t.autoext=!1,o.from.CSV(e,t,n,r,i)},o.from.CSV=function(e,t,n,r,i){e=""+e;var a,s={separator:",",quote:'"',headers:!0};o.utils.extend(s,t);var u=[];function l(e){var t,o,l,c=s.separator.charCodeAt(0),h=s.quote.charCodeAt(0),f={},p={},d=[],g=e.length,m=0,y=0;function v(){if(g<=m)return p;if(o)return o=!1,f;var t=m;if(e.charCodeAt(t)===h){for(var n=t;n++<g;)if(e.charCodeAt(n)===h){if(e.charCodeAt(n+1)!==h)break;++n}return m=n+2,13===(r=e.charCodeAt(n+1))?(o=!0,10===e.charCodeAt(n+2)&&++m):10===r&&(o=!0),e.substring(t+1,n).replace(/""/g,'"')}for(;m<g;){var r,i=1;if(10===(r=e.charCodeAt(m++)))o=!0;else if(13===r)o=!0,10===e.charCodeAt(m)&&(++m,++i);else if(r!==c)continue;return e.substring(t,m-i)}return e.substring(t)}for(;(t=v())!==p;){for(var _,b=[];t!==f&&t!==p;)b.push(t.trim()),t=v();s.headers?(0===y?"boolean"==typeof s.headers?u=b:Array.isArray(s.headers)&&(u=s.headers,_={},u.forEach((function(e,t){_[e]=b[t],void 0!==_[e]&&0!==_[e].length&&_[e].trim()==+_[e]&&(_[e]=+_[e])})),d.push(_)):(_={},u.forEach((function(e,t){_[e]=b[t],void 0!==_[e]&&0!==_[e].length&&_[e].trim()==+_[e]&&(_[e]=+_[e])})),d.push(_)),y++):d.push(b)}a=d,s.headers&&i&&i.sources&&i.sources[r]&&(l=i.sources[r].columns=[],u.forEach((function(e){l.push({columnid:e})}))),n&&(a=n(a,r,i))}return new RegExp("\n").test(e)?l(e):(e=o.utils.autoExtFilename(e,"csv",t),o.utils.loadFile(e,!!n,l,i.cb)),a},o.from.XLS=function(e,t,n,r,i){return t=t||{},e=o.utils.autoExtFilename(e,"xls",t),t.autoExt=!1,ie(N(),e,t,n,r,i)},o.from.XLSX=function(e,t,n,r,i){return t=t||{},e=o.utils.autoExtFilename(e,"xlsx",t),t.autoExt=!1,ie(N(),e,t,n,r,i)},o.from.ODS=function(e,t,n,r,i){return t=t||{},e=o.utils.autoExtFilename(e,"ods",t),t.autoExt=!1,ie(N(),e,t,n,r,i)},o.from.XML=function(e,t,n,r,i){var a;return o.utils.loadFile(e,!!n,(function(e){function t(){var e=s(/^([^<]*)/);return e?e[1]:""}function o(){var e=s(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(e)return{name:e[1],value:e[2].replace(/^['"]|['"]$/g,"")}}function s(e){if(e=c.match(e))return c=c.slice(e[0].length),e}function u(){return 0==c.length}function l(e){return 0==c.indexOf(e)}var c;c=(c=(c=e).trim()).replace(/<!--[\s\S]*?-->/g,""),function(){if(s(/^<\?xml\s*/)){for(var e={attributes:{}};!u()&&!l("?>");){var t=o();if(!t)return e;e.attributes[t.name]=t.value}s(/\?>\s*/)}}(),a=function e(){var n=s(/^<([\w-:.]+)\s*/);if(n){for(var r,i={name:n[1],attributes:{},children:[]};!(u()||l(">")||l("?>")||l("/>"));){var a=o();if(!a)return i;i.attributes[a.name]=a.value}if(s(/^\s*\/>\s*/))return i;for(s(/\??>\s*/),i.content=t();r=e();)i.children.push(r);return s(/^<\/[\w-:.]+>\s*/),i}}(),n&&(a=n(a,r,i))})),a},o.from.GEXF=function(e,t,n,r,i){var a;return o("SEARCH FROM XML("+e+")",[],(function(e){a=e,n&&(a=n(a))})),a},z.Print=function(e){return z.extend(this,e)},z.Print.prototype.toString=function(){var e="PRINT";return this.statement&&(e+=" "+this.statement.toString()),e},z.Print.prototype.execute=function(e,t,n){var r,i=this,a=1;return o.precompile(this,e,t),this.exprs&&0<this.exprs.length?(r=this.exprs.map((function(e){return e=new Function("params,alasql,p","var y;return "+e.toJS("({})","",null)).bind(i)(t,o),Q(e)})),console.log.apply(console,r)):this.select?(e=this.select.execute(e,t),console.log(Q(e))):console.log(),n&&(a=n(a)),a},z.Source=function(e){return z.extend(this,e)},z.Source.prototype.toString=function(){var e="SOURCE";return this.url&&(e+=" '"+this.url+" '"),e},z.Source.prototype.execute=function(e,t,n){var r;return v(this.url,!!n,(function(e){return r=o(e),n&&(r=n(r)),r}),(function(e){throw e})),r},z.Require=function(e){return z.extend(this,e)},z.Require.prototype.toString=function(){var e="REQUIRE";return this.paths&&0<this.paths.length&&(e+=this.paths.map((function(e){return e.toString()})).join(",")),this.plugins&&0<this.plugins.length&&(e+=this.plugins.map((function(e){return e.toUpperCase()})).join(",")),e},z.Require.prototype.execute=function(e,t,n){var r=this,i=0,a="";return this.paths&&0<this.paths.length?this.paths.forEach((function(e){v(e.value,!!n,(function(e){a+=e,++i<r.paths.length||(new Function("params,alasql",a)(t,o),n&&(i=n(i)))}))})):this.plugins&&0<this.plugins.length?this.plugins.forEach((function(e){o.plugins[e]||v(o.path+"/alasql-"+e.toLowerCase()+".js",!!n,(function(s){a+=s,++i<r.plugins.length||(new Function("params,alasql",a)(t,o),o.plugins[e]=!0,n&&(i=n(i)))}))})):n&&(i=n(i)),i},z.Assert=function(e){return z.extend(this,e)},z.Source.prototype.toString=function(){var e="ASSERT";return this.value&&(e+=" "+JSON.stringify(this.value)),e},z.Assert.prototype.execute=function(e){if(!I(o.res,this.value))throw new Error((this.message||"Assert wrong")+": "+JSON.stringify(o.res)+" == "+JSON.stringify(this.value));return 1},(B=o.engines.WEBSQL=function(){}).createDatabase=function(e,t,n,r){var i=openDatabase(e,t[0],t[1],t[2]);if(this.dbid&&((t=o.createDatabase(this.dbid)).engineid="WEBSQL",t.wdbid=e,t.wdb=t),!i)throw new Error('Cannot create WebSQL database "'+this.dbid+'"');return r&&r(1),1},B.dropDatabase=function(e){throw new Error("This is impossible to drop WebSQL database.")},B.attachDatabase=function(e,t,n,r,i){if(o.databases[t])throw new Error('Unable to attach database as "'+t+'" because it already exists');return o.openDatabase(e,n[0],n[1],n[2]),1};var oe=o.engines.INDEXEDDB=function(){};l.hasIndexedDB&&("function"==typeof l.global.indexedDB.webkitGetDatabaseNames?oe.getDatabaseNames=l.global.indexedDB.webkitGetDatabaseNames.bind(l.global.indexedDB):(oe.getDatabaseNames=function(){var e={},t={contains:function(e){return!0},notsupported:!0};return setTimeout((function(){var n={target:{result:t}};e.onsuccess(n)}),0),e},oe.getDatabaseNamesNotSupported=!0)),oe.showDatabases=function(e,t){oe.getDatabaseNames().onsuccess=function(n){var r=n.target.result;if(oe.getDatabaseNamesNotSupported)throw new Error("SHOW DATABASE is not supported in this browser");var i,o=[];e&&(i=new RegExp(e.value.replace(/\%/g,".*"),"g"));for(var a=0;a<r.length;a++)e&&!r[a].match(i)||o.push({databaseid:r[a]});t(o)}},oe.createDatabase=function(e,t,n,r,i){var o=l.global.indexedDB;n?o.open(e,1).onsuccess=function(e){e.target.result.close(),i&&i(1)}:((o=o.open(e,1)).onupgradeneeded=function(e){e.target.transaction.abort()},o.onsuccess=function(t){if(!n)throw new Error('IndexedDB: Cannot create new database "'+e+'" because it already exists');i&&i(0)})},oe.createDatabase=function(e,t,n,r,i){var o,a,s,u=l.global.indexedDB;oe.getDatabaseNamesNotSupported?n?(o=!0,(a=u.open(e)).onupgradeneeded=function(e){o=!1},a.onsuccess=function(e){e.target.result.close(),o?i&&i(0):i&&i(1)}):((s=u.open(e)).onupgradeneeded=function(e){e.target.transaction.abort()},s.onabort=function(e){i&&i(1)},s.onsuccess=function(t){throw t.target.result.close(),new Error('IndexedDB: Cannot create new database "'+e+'" because it already exists')}):(s=oe.getDatabaseNames()).onsuccess=function(t){if(t.target.result.contains(e)){if(n)return void(i&&i(0));throw new Error('IndexedDB: Cannot create new database "'+e+'" because it already exists')}u.open(e,1).onsuccess=function(e){e.target.result.close(),i&&i(1)}}},oe.dropDatabase=function(e,t,n){var r=l.global.indexedDB;oe.getDatabaseNames().onsuccess=function(i){if(!i.target.result.contains(e)){if(t)return void(n&&n(0));throw new Error('IndexedDB: Cannot drop new database "'+e+'" because it does not exist')}r.deleteDatabase(e).onsuccess=function(e){n&&n(1)}}},oe.attachDatabase=function(e,t,n,r,i){if(!l.hasIndexedDB)throw new Error("The current browser does not support IndexedDB");var a=l.global.indexedDB;oe.getDatabaseNames().onsuccess=function(n){if(!n.target.result.contains(e))throw new Error('IndexedDB: Cannot attach database "'+e+'" because it does not exist');a.open(e).onsuccess=function(n){var r=n.target.result,a=new o.Database(t||e);a.engineid="INDEXEDDB",a.ixdbid=e,a.tables=[];for(var s=r.objectStoreNames,u=0;u<s.length;u++)a.tables[s[u]]={};n.target.result.close(),i&&i(1)}}},oe.createTable=function(e,t,n,r){var i=l.global.indexedDB,a=o.databases[e].ixdbid;oe.getDatabaseNames().onsuccess=function(n){if(!n.target.result.contains(a))throw new Error('IndexedDB: Cannot create table in database "'+a+'" because it does not exist');(n=i.open(a)).onversionchange=function(e){e.target.result.close()},n.onsuccess=function(n){var o=n.target.result.version;n.target.result.close(),(o=i.open(a,o+1)).onupgradeneeded=function(e){e.target.result.createObjectStore(t,{autoIncrement:!0})},o.onsuccess=function(e){e.target.result.close(),r&&r(1)},o.onerror=function(e){throw e},o.onblocked=function(n){throw new Error('Cannot create table "'+t+'" because database "'+e+'"  is blocked')}}}},oe.dropTable=function(e,t,n,r){var i=l.global.indexedDB,a=o.databases[e].ixdbid;oe.getDatabaseNames().onsuccess=function(s){if(!s.target.result.contains(a))throw new Error('IndexedDB: Cannot drop table in database "'+a+'" because it does not exist');(s=i.open(a)).onversionchange=function(e){e.target.result.close()},s.onsuccess=function(s){var u=s.target.result.version;s.target.result.close(),(u=i.open(a,u+1)).onupgradeneeded=function(r){if((r=r.target.result).objectStoreNames.contains(t))r.deleteObjectStore(t),delete o.databases[e].tables[t];else if(!n)throw new Error('IndexedDB: Cannot drop table "'+t+'" because it does not exist')},u.onsuccess=function(e){e.target.result.close(),r&&r(1)},u.onerror=function(e){throw e},u.onblocked=function(n){throw new Error('Cannot drop table "'+t+'" because database "'+e+'" is blocked')}}}},oe.intoTable=function(e,t,n,r,i){var a=l.global.indexedDB;e=o.databases[e].ixdbid,a.open(e).onsuccess=function(e){for(var r=e.target.result,o=(e=r.transaction([t],"readwrite")).objectStore(t),a=0,s=n.length;a<s;a++)o.add(n[a]);e.oncomplete=function(){r.close(),i&&i(s)}}},oe.fromTable=function(e,t,n,r,i){var a=l.global.indexedDB;e=o.databases[e].ixdbid,a.open(e).onsuccess=function(e){var o=[],a=e.target.result;(e=a.transaction([t]).objectStore(t).openCursor()).onblocked=function(e){},e.onerror=function(e){},e.onsuccess=function(e){(e=e.target.result)?(o.push(e.value),e.continue()):(a.close(),n&&n(o,r,i))}}},oe.deleteFromTable=function(e,t,n,r,i){var a=l.global.indexedDB;e=o.databases[e].ixdbid,a.open(e).onsuccess=function(e){var o=e.target.result,a=(e=o.transaction([t],"readwrite").objectStore(t).openCursor(),0);e.onblocked=function(e){},e.onerror=function(e){},e.onsuccess=function(e){(e=e.target.result)?(n&&!n(e.value,r)||(e.delete(),a++),e.continue()):(o.close(),i&&i(a))}}},oe.updateTable=function(e,t,n,r,i,a){var s=l.global.indexedDB;e=o.databases[e].ixdbid,s.open(e).onsuccess=function(e){var o=e.target.result,s=(e=o.transaction([t],"readwrite").objectStore(t).openCursor(),0);e.onblocked=function(e){},e.onerror=function(e){},e.onsuccess=function(e){var t=e.target.result;t?(r&&!r(t.value,i)||(e=t.value,n(e,i),t.update(e),s++),t.continue()):(o.close(),a&&a(s))}}};var ae=o.engines.LOCALSTORAGE=function(){};ae.get=function(e){var t,n=localStorage.getItem(e);if(void 0!==n){try{t=JSON.parse(n)}catch(e){throw new Error("Cannot parse JSON object from localStorage"+n)}return t}},ae.set=function(e,t){void 0===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t))},ae.storeTable=function(e,t){var n=o.databases[e],r=n.tables[t];(e={}).columns=r.columns,e.data=r.data,e.identities=r.identities,ae.set(n.lsdbid+"."+t,e)},ae.restoreTable=function(e,t){e=o.databases[e];var n,r=ae.get(e.lsdbid+"."+t),i=new o.Table;for(n in r)i[n]=r[n];return(e.tables[t]=i).indexColumns(),i},ae.removeTable=function(e,t){e=o.databases[e],localStorage.removeItem(e.lsdbid+"."+t)},ae.createDatabase=function(e,t,n,r,i){var o=1,a=ae.get("alasql");if(n&&a&&a.databases&&a.databases[e])o=0;else{if((a=a||{databases:{}}).databases&&a.databases[e])throw new Error('localStorage: Cannot create new database "'+e+'" because it already exists');a.databases[e]=!0,ae.set("alasql",a),ae.set(e,{databaseid:e,tables:{}})}return i&&(o=i(o)),o},ae.dropDatabase=function(e,t,n){var r,i=1,o=ae.get("alasql");if(t&&o&&o.databases&&!o.databases[e])i=0;else{if(!o){if(t)return n?n(0):0;throw new Error("There is no any AlaSQL databases in localStorage")}if(o.databases&&!o.databases[e])throw new Error('localStorage: Cannot drop database "'+e+'" because there is no such database');for(r in delete o.databases[e],ae.set("alasql",o),ae.get(e).tables)localStorage.removeItem(e+"."+r);localStorage.removeItem(e)}return n&&(i=n(i)),i},ae.attachDatabase=function(e,t,n,r,i){var a=1;if(o.databases[t])throw new Error('Unable to attach database as "'+t+'" because it already exists');t=t||e;var s=new o.Database(t);if(s.engineid="LOCALSTORAGE",s.lsdbid=e,s.tables=ae.get(e).tables,!o.options.autocommit&&s.tables)for(var u in s.tables)ae.restoreTable(t,u);return i&&(a=i(a)),a},ae.showDatabases=function(e,t){var n,r=[],i=ae.get("alasql");if(e&&(n=new RegExp(e.value.replace(/%/g,".*"),"g")),i&&i.databases){for(var o in i.databases)r.push({databaseid:o});e&&r&&0<r.length&&(r=r.filter((function(e){return e.databaseid.match(n)})))}return t&&(r=t(r)),r},ae.createTable=function(e,t,n,r){var i=1,a=o.databases[e].lsdbid;if(ae.get(a+"."+t)&&!n)throw new Error('Table "'+t+'" alsready exists in localStorage database "'+a+'"');return n=ae.get(a),o.databases[e].tables[t],n.tables[t]=!0,ae.set(a,n),ae.storeTable(e,t),r&&(i=r(i)),i},ae.truncateTable=function(e,t,n,r){var i=1,a=o.databases[e].lsdbid;if(a=o.options.autocommit?ae.get(a):o.databases[e],!n&&!a.tables[t])throw new Error('Cannot truncate table "'+t+'" in localStorage, because it does not exist');return ae.restoreTable(e,t).data=[],ae.storeTable(e,t),r&&(i=r(i)),i},ae.dropTable=function(e,t,n,r){var i=1,a=o.databases[e].lsdbid,s=o.options.autocommit?ae.get(a):o.databases[e];if(!n&&!s.tables[t])throw new Error('Cannot drop table "'+t+'" in localStorage, because it does not exist');return delete s.tables[t],ae.set(a,s),ae.removeTable(e,t),r&&(i=r(i)),i},ae.fromTable=function(e,t,n,r,i){return o.databases[e].lsdbid,t=ae.restoreTable(e,t).data,n&&(t=n(t,r,i)),t},ae.intoTable=function(e,t,n,r,i){o.databases[e].lsdbid;var a,s=n.length,u=ae.restoreTable(e,t);for(a in u.identities){var l,c=u.identities[a];for(l in n)n[l][a]=c.value,c.value+=c.step}return u.data||(u.data=[]),u.data=u.data.concat(n),ae.storeTable(e,t),i&&(s=i(s)),s},ae.loadTableData=function(e,t){o.databases[e],o.databases[e].lsdbid,ae.restoreTable(e,t)},ae.saveTableData=function(e,t){var n=o.databases[e];e=o.databases[e].lsdbid,ae.storeTable(e,t),n.tables[t].data=void 0},ae.commit=function(e,t){var n=o.databases[e],r=o.databases[e].lsdbid,i={databaseid:r,tables:{}};if(n.tables)for(var a in n.tables)i.tables[a]=!0,ae.storeTable(e,a);return ae.set(r,i),t?t(1):1},ae.begin=ae.commit,ae.rollback=function(e,t){},(B=o.engines.SQLITE=function(){}).createDatabase=function(e,t,n,r,i){throw new Error("Connot create SQLITE database in memory. Attach it.")},B.dropDatabase=function(e){throw new Error("This is impossible to drop SQLite database. Detach it.")},B.attachDatabase=function(e,t,n,r,i){var a;if(o.databases[t])throw new Error('Unable to attach database as "'+t+'" because it already exists');if(n[0]&&n[0]instanceof z.StringValue||n[0]instanceof z.ParamValue)return n[0]instanceof z.StringValue?a=n[0].value:n[0]instanceof z.ParamValue&&(a=r[n[0].param]),o.utils.loadBinaryFile(a,!0,(function(n){var r=new o.Database(t||e);r.engineid="SQLITE",r.sqldbid=e,n=r.sqldb=new SQL.Database(n),r.tables=[],n.exec("SELECT * FROM sqlite_master WHERE type='table'")[0].values.forEach((function(e){r.tables[e[1]]={};var t=r.tables[e[1]].columns=[];(e=o.parse(e[4]).statements[0].columns)&&0<e.length&&e.forEach((function(e){t.push(e)}))})),i(1)}),(function(e){throw new Error('Cannot open SQLite database file "'+n[0].value+'"')})),1;throw new Error("Cannot attach SQLite database without a file")},B.fromTable=function(e,t,n,r,i){t=o.databases[e].sqldb.exec("SELECT * FROM "+t);var a=i.sources[r].columns=[];0<t[0].columns.length&&t[0].columns.forEach((function(e){a.push({columnid:e})}));var s=[];0<t[0].values.length&&t[0].values.forEach((function(e){var t={};a.forEach((function(n,r){t[n.columnid]=e[r]})),s.push(t)})),n&&n(s,r,i)},B.intoTable=function(e,t,n,r,i){for(var a=o.databases[e].sqldb,s=0,u=n.length;s<u;s++){var l="INSERT INTO "+t+" (",c=n[s],h=Object.keys(c);l+=h.join(","),l+=") VALUES (",l+=h.map((function(e){return"string"==typeof(e=c[e])&&(e="'"+e+"'"),e})).join(","),l+=")",a.exec(l)}return e=u,i&&i(e),e};var se=o.engines.FILESTORAGE=o.engines.FILE=function(){};if(se.createDatabase=function(e,t,n,r,i){var a=1,s=t[0].value;return o.utils.fileExists(s,(function(e){if(e){if(n)return a=0,i&&(a=i(a)),a;throw new Error("Cannot create new database file, because it already exists")}o.utils.saveFile(s,JSON.stringify({tables:{}}),(function(e){i&&(a=i(a))}))})),a},se.dropDatabase=function(e,t,n){var r,i="";return"object"==typeof e&&e.value?i=e.value:(i=(o.databases[e]||{}).filename||"",delete o.databases[e]),o.utils.fileExists(i,(function(e){if(e)r=1,o.utils.deleteFile(i,(function(){r=1,n&&(r=n(r))}));else{if(!t)throw new Error("Cannot drop database file, because it does not exist");r=0,n&&(r=n(r))}})),r},se.attachDatabase=function(e,t,n,r,i){var a=1;if(o.databases[t])throw new Error('Unable to attach database as "'+t+'" because it already exists');var s=new o.Database(t||e);return s.engineid="FILESTORAGE",s.filename=n[0].value,v(s.filename,!!i,(function(e){try{s.data=JSON.parse(e)}catch(e){throw new Error("Data in FileStorage database are corrupted")}if(s.tables=s.data.tables,!o.options.autocommit&&s.tables)for(var t in s.tables)s.tables[t].data=s.data[t];i&&(a=i(a))})),a},se.createTable=function(e,t,n,r){var i=o.databases[e];if(i.data[t]&&!n)throw new Error('Table "'+t+'" alsready exists in the database "'+fsdbid+'"');return n=o.databases[e].tables[t],i.data.tables[t]={columns:n.columns},i.data[t]=[],se.updateFile(e),r&&r(1),1},se.updateFile=function(e){var t=o.databases[e];t.issaving?t.postsave=!0:(t.issaving=!0,t.postsave=!1,o.utils.saveFile(t.filename,JSON.stringify(t.data),(function(){t.issaving=!1,t.postsave&&setTimeout((function(){se.updateFile(e)}),50)})))},se.dropTable=function(e,t,n,r){var i=o.databases[e];if(!n&&!i.tables[t])throw new Error('Cannot drop table "'+t+'" in fileStorage, because it does not exist');return delete i.tables[t],delete i.data.tables[t],delete i.data[t],se.updateFile(e),r&&r(1),1},se.fromTable=function(e,t,n,r,i){return t=o.databases[e].data[t],n&&(t=n(t,r,i)),t},se.intoTable=function(e,t,n,r,i){var a=o.databases[e],s=n.length,u=(u=a.data[t])||[];return a.data[t]=u.concat(n),se.updateFile(e),i&&i(s),s},se.loadTableData=function(e,t){(e=o.databases[e]).tables[t].data=e.data[t]},se.saveTableData=function(e,t){var n=o.databases[e];n.data[t]=n.tables[t].data,n.tables[t].data=null,se.updateFile(e)},se.commit=function(e,t){var n=o.databases[e];if(n.tables)for(var r in n.tables)n.data.tables[r]={columns:n.tables[r].columns},n.data[r]=n.tables[r].data;return se.updateFile(e),t?t(1):1},se.begin=se.commit,se.rollback=function(e,t){var n=1,r=o.databases[e];r.dbversion++,function i(){setTimeout((function(){return r.issaving?i():void o.loadFile(r.filename,!!t,(function(i){for(var a in r.data=i,r.tables={},r.data.tables){var s=new o.Table({columns:r.data.tables[a].columns});M(s,r.data.tables[a]),r.tables[a]=s,o.options.autocommit||(r.tables[a].data=r.data[a]),r.tables[a].indexColumns()}delete o.databases[e],o.databases[e]=new o.Database(e),M(o.databases[e],r),o.databases[e].engineid="FILESTORAGE",o.databases[e].filename=r.filename,t&&(n=t(n))}))}),100)}()},l.isBrowser&&!l.isWebWorker){if(!(o=o||!1))throw new Error("alasql was not found");o.worker=function(){throw new Error("Can find webworker in this enviroment")},"undefined"!=typeof Worker&&(o.worker=function(e,t,n){if(!0===e&&(e=void 0),void 0===e)for(var r=document.getElementsByTagName("script"),i=0;i<r.length;i++){if("alasql-worker.js"===r[i].src.substr(-16).toLowerCase()){e=r[i].src.substr(0,r[i].src.length-16)+"alasql.js";break}if("alasql-worker.min.js"===r[i].src.substr(-20).toLowerCase()){e=r[i].src.substr(0,r[i].src.length-20)+"alasql.min.js";break}if("alasql.js"===r[i].src.substr(-9).toLowerCase()){e=r[i].src;break}if("alasql.min.js"===r[i].src.substr(-13).toLowerCase()){e=r[i].src.substr(0,r[i].src.length-13)+"alasql.min.js";break}}if(void 0===e)throw new Error("Path to alasql.js is not specified");var a;!1!==e?(a="importScripts('",a+=e,a+="');self.onmessage = function(event) {alasql(event.data.sql,event.data.params, function(data){postMessage({id:event.data.id, data:data});});}",a=new Blob([a],{type:"text/plain"}),o.webworker=new Worker(URL.createObjectURL(a)),o.webworker.onmessage=function(e){var t=e.data.id;o.buffer[t](e.data.data),delete o.buffer[t]},o.webworker.onerror=function(e){throw e},1<arguments.length&&(t="REQUIRE "+t.map((function(e){return'"'+e+'"'})).join(","),o(t,[],n))):!1===e&&delete o.webworker});var ue=ue||function(e){if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(e){setTimeout((function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()}),4e4)},u=function(t,n,r){for(var i=(n=[].concat(n)).length;i--;){var o=t["on"+n[i]];if("function"==typeof o)try{o.call(t,r||t)}catch(t){!function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)}(t)}}},l=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},c=function(t,c,h){function f(){u(d,"writestart progress write writeend".split(" "))}h||(t=l(t));var p,d=this,g="application/octet-stream"===t.type;if(d.readyState=d.INIT,i)return p=n().createObjectURL(t),void setTimeout((function(){var e,t;r.href=p,r.download=c,e=r,t=new MouseEvent("click"),e.dispatchEvent(t),f(),s(p),d.readyState=d.DONE}));!function(){if((a||g&&o)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=a?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,d.readyState=d.DONE,f()},r.readAsDataURL(t),d.readyState=d.INIT}p=p||n().createObjectURL(t),!g&&e.open(p,"_blank")||(e.location.href=p),d.readyState=d.DONE,f(),s(p)}()};return t=c.prototype,"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=l(e)),navigator.msSaveOrOpenBlob(e,t)}:(t.abort=function(){},t.readyState=t.INIT=0,t.WRITING=1,t.DONE=2,t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null,function(e,t,n){return new c(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);r.exports?r.exports.saveAs=ue:null!==n(210)&&null!==n(211)&&void 0!==(s=function(){return ue}.call(t,n,t,r))&&(r.exports=s),(l.isCordova||l.isMeteorServer||l.isNode)&&console.warn("It looks like you are using the browser version of AlaSQL. Please use the alasql.fs.js file instead."),o.utils.saveAs=ue}return new O("alasql"),o.use("alasql"),o},void 0===(s="function"===typeof o?o.apply(t,a):o)||(r.exports=s)}).call(this,n(48),n(28)(e),n(22))},function(e,t,n){"use strict";n.d(t,"a",(function(){return Qo}));var r=n(11),i=n.n(r),o=n(17),a=n(20);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=n(18),c=n(45),h=n(44),f=n(12),p=n(19),d=function(e,t){var n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},r={on:function(e,t,r){if(void 0===n[e])throw new Error("Invalid event type: ".concat(e));n[e].push({selector:t,fn:r})},render:function(e){t.store.featureChanged(e)}},i=function(e,i){for(var o=n[e],a=o.length;a--;){var s=o[a];if(s.selector(i)){s.fn.call(r,i),t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(r),{render:e.render,stop:function(){e.stop&&e.stop()},trash:function(){e.trash&&(e.trash(),t.store.render())},combineFeatures:function(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures:function(){e.uncombineFeatures&&e.uncombineFeatures()},drag:function(e){i("drag",e)},click:function(e){i("click",e)},mousemove:function(e){i("mousemove",e)},mousedown:function(e){i("mousedown",e)},mouseup:function(e){i("mouseup",e)},mouseout:function(e){i("mouseout",e)},keydown:function(e){i("keydown",e)},keyup:function(e){i("keyup",e)},touchstart:function(e){i("touchstart",e)},touchmove:function(e){i("touchmove",e)},touchend:function(e){i("touchend",e)},tap:function(e){i("tap",e)}}},g=n(55),m=n.n(g),y=n(0),v={Point:0,LineString:1,Polygon:2};function _(e,t){var n=v[e.geometry.type]-v[t.geometry.type];return 0===n&&e.geometry.type===y.k.POLYGON?e.area-t.area:n}var b=function(e){return e.map((function(e){return e.geometry.type===y.k.POLYGON&&(e.area=m.a.geometry({type:y.k.FEATURE,property:{},geometry:e.geometry})),e})).sort(_).map((function(e){return delete e.area,e}))};var x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]},w=n(13),E=[y.m.FEATURE,y.m.MIDPOINT,y.m.VERTEX],S={click:function(e,t,n){return T(e,t,n,n.options.clickBuffer)},touch:function(e,t,n){return T(e,t,n,n.options.touchBuffer)}};function T(e,t,n,r){if(null===n.map)return[];var i=e?x(e,r):t,o={};n.options.styles&&(o.layers=n.options.styles.map((function(e){return e.id})));var a=n.map.queryRenderedFeatures(i,o).filter((function(e){return-1!==E.indexOf(e.properties.meta)})),s=new w.a,u=[];return a.forEach((function(e){var t=e.properties.id;s.has(t)||(s.add(t),u.push(e))})),b(u)}function k(e,t){var n=S.click(e,null,t),r={mouse:y.i.NONE};return n[0]&&(r.mouse=n[0].properties.active===y.g.ACTIVE?y.i.MOVE:y.i.POINTER,r.feature=n[0].properties.meta),-1!==t.events.currentModeName().indexOf("draw")&&(r.mouse=y.i.ADD),t.ui.queueMapClasses(r),t.ui.updateMapClasses(),n[0]}var C=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)};function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null!=n.fineTolerance?n.fineTolerance:4,i=null!=n.grossTolerance?n.grossTolerance:12,o=null!=n.interval?n.interval:500;e.point=e.point||t.point,e.time=e.time||t.time;var a=C(e.point,t.point);return a<r||a<i&&t.time-e.time<o}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null!=n.tolerance?n.tolerance:25,i=null!=n.interval?n.interval:250;e.point=e.point||t.point,e.time=e.time||t.time;var o=C(e.point,t.point);return o<r&&t.time-e.time<i}var M=n(14),L=n.n(M),N=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||L()(),this.type=t.geometry.type};N.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},N.prototype.incomingCoords=function(e){this.setCoordinates(e)},N.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},N.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},N.prototype.setProperty=function(e,t){this.properties[e]=t},N.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:y.k.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},N.prototype.internal=function(e){var t={id:this.id,meta:y.m.FEATURE,"meta:type":this.type,active:y.g.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(var n in this.properties)t["user_".concat(n)]=this.properties[n];return{type:y.k.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var P=N,O=function(e,t){P.call(this,e,t)};(O.prototype=Object.create(P.prototype)).isValid=function(){return"number"===typeof this.coordinates[0]&&"number"===typeof this.coordinates[1]},O.prototype.updateCoordinate=function(e,t,n){this.coordinates=3===arguments.length?[t,n]:[e,t],this.changed()},O.prototype.getCoordinate=function(){return this.getCoordinates()};var R=O,D=function(e,t){P.call(this,e,t)};(D.prototype=Object.create(P.prototype)).isValid=function(){return this.coordinates.length>1},D.prototype.addCoordinate=function(e,t,n){this.changed();var r=parseInt(e,10);this.coordinates.splice(r,0,[t,n])},D.prototype.getCoordinate=function(e){var t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))},D.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)},D.prototype.updateCoordinate=function(e,t,n){var r=parseInt(e,10);this.coordinates[r]=[t,n],this.changed()};var F=D,z=function(e,t){P.call(this,e,t),this.coordinates=this.coordinates.map((function(e){return e.slice(0,-1)}))};(z.prototype=Object.create(P.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((function(e){return e.length>2}))},z.prototype.incomingCoords=function(e){this.coordinates=e.map((function(e){return e.slice(0,-1)})),this.changed()},z.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},z.prototype.addCoordinate=function(e,t,n){this.changed();var r=e.split(".").map((function(e){return parseInt(e,10)}));this.coordinates[r[0]].splice(r[1],0,[t,n])},z.prototype.removeCoordinate=function(e){this.changed();var t=e.split(".").map((function(e){return parseInt(e,10)})),n=this.coordinates[t[0]];n&&(n.splice(t[1],1),n.length<3&&this.coordinates.splice(t[0],1))},z.prototype.getCoordinate=function(e){var t=e.split(".").map((function(e){return parseInt(e,10)})),n=this.coordinates[t[0]];return JSON.parse(JSON.stringify(n[t[1]]))},z.prototype.getCoordinates=function(){return this.coordinates.map((function(e){return e.concat([e[0]])}))},z.prototype.updateCoordinate=function(e,t,n){this.changed();var r=e.split("."),i=parseInt(r[0],10),o=parseInt(r[1],10);void 0===this.coordinates[i]&&(this.coordinates[i]=[]),this.coordinates[i][o]=[t,n]};var B=z,U={MultiPoint:R,MultiLineString:F,MultiPolygon:B},V=function(e,t,n,r,i){var o=n.split("."),a=parseInt(o[0],10),s=o[1]?o.slice(1).join("."):null;return e[a][t](s,r,i)},j=function(e,t){if(P.call(this,e,t),delete this.coordinates,this.model=U[t.geometry.type],void 0===this.model)throw new TypeError("".concat(t.geometry.type," is not a valid type"));this.features=this._coordinatesToFeatures(t.geometry.coordinates)};(j.prototype=Object.create(P.prototype))._coordinatesToFeatures=function(e){var t=this,n=this.model.bind(this);return e.map((function(e){return new n(t.ctx,{id:L()(),type:y.k.FEATURE,properties:{},geometry:{coordinates:e,type:t.type.replace("Multi","")}})}))},j.prototype.isValid=function(){return this.features.every((function(e){return e.isValid()}))},j.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()},j.prototype.getCoordinate=function(e){return V(this.features,"getCoordinate",e)},j.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(e){return e.type===y.k.POLYGON?e.getCoordinates():e.coordinates}))))},j.prototype.updateCoordinate=function(e,t,n){V(this.features,"updateCoordinate",e,t,n),this.changed()},j.prototype.addCoordinate=function(e,t,n){V(this.features,"addCoordinate",e,t,n),this.changed()},j.prototype.removeCoordinate=function(e){V(this.features,"removeCoordinate",e),this.changed()},j.prototype.getFeatures=function(){return this.features};var q=j;function G(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}G.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)},G.prototype.setSelectedCoordinates=function(e){var t=this;this._ctx.store.setSelectedCoordinates(e),e.reduce((function(e,n){return void 0===e[n.feature_id]&&(e[n.feature_id]=!0,t._ctx.store.get(n.feature_id).changed()),e}),{})},G.prototype.getSelected=function(){return this._ctx.store.getSelected()},G.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},G.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)},G.prototype.getFeature=function(e){return this._ctx.store.get(e)},G.prototype.select=function(e){return this._ctx.store.select(e)},G.prototype.deselect=function(e){return this._ctx.store.deselect(e)},G.prototype.deleteFeature=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._ctx.store.delete(e,t)},G.prototype.addFeature=function(e){return this._ctx.store.add(e)},G.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},G.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},G.prototype.setActionableState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)},G.prototype.changeMode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._ctx.events.changeMode(e,t,n)},G.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)},G.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)},G.prototype.featuresAt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"click";if("click"!==n&&"touch"!==n)throw new Error("invalid buffer type");return S[n](e,t,this._ctx)},G.prototype.newFeature=function(e){var t=e.geometry.type;return t===y.k.POINT?new R(this._ctx,e):t===y.k.LINE_STRING?new F(this._ctx,e):t===y.k.POLYGON?new B(this._ctx,e):new q(this._ctx,e)},G.prototype.isInstanceOf=function(e,t){if(e===y.k.POINT)return t instanceof R;if(e===y.k.LINE_STRING)return t instanceof F;if(e===y.k.POLYGON)return t instanceof B;if("MultiFeature"===e)return t instanceof q;throw new Error("Unknown feature class: ".concat(e))},G.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)};var H=G;G.prototype.onSetup=function(){},G.prototype.onDrag=function(){},G.prototype.onClick=function(){},G.prototype.onMouseMove=function(){},G.prototype.onMouseDown=function(){},G.prototype.onMouseUp=function(){},G.prototype.onMouseOut=function(){},G.prototype.onKeyUp=function(){},G.prototype.onKeyDown=function(){},G.prototype.onTouchStart=function(){},G.prototype.onTouchMove=function(){},G.prototype.onTouchEnd=function(){},G.prototype.onTap=function(){},G.prototype.onStop=function(){},G.prototype.onTrash=function(){},G.prototype.onCombineFeature=function(){},G.prototype.onUncombineFeature=function(){},G.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var X={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},W=Object.keys(X),Y=function(e){var t=Object.keys(e.options.modes).reduce((function(t,n){return t[n]=function(e){var t=Object.keys(e);return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={},o=t.reduce((function(t,n){return t[n]=e[n],t}),new H(n));function a(e){return function(t){o[e](i,t)}}return{start:function(){var t=this;i=o.onSetup(r),W.forEach((function(n){var r=X[n],i=function(){return!1};e[r]&&(i=function(){return!0}),t.on(n,i,a(r))}))},stop:function(){o.onStop(i)},trash:function(){o.onTrash(i)},combineFeatures:function(){o.onCombineFeatures(i)},uncombineFeatures:function(){o.onUncombineFeatures(i)},render:function(e,t){o.toDisplayFeatures(i,e,t)}}}}(e.options.modes[n]),t}),{}),n={},r={},i={},o=null,a=null;i.drag=function(t,n){n({point:t.point,time:(new Date).getTime()})?(e.ui.queueMapClasses({mouse:y.i.DRAG}),a.drag(t)):t.originalEvent.stopPropagation()},i.mousedrag=function(e){i.drag(e,(function(e){return!I(n,e)}))},i.touchdrag=function(e){i.drag(e,(function(e){return!A(r,e)}))},i.mousemove=function(t){if(1===(void 0!==t.originalEvent.buttons?t.originalEvent.buttons:t.originalEvent.which))return i.mousedrag(t);var n=k(t,e);t.featureTarget=n,a.mousemove(t)},i.mousedown=function(t){n={time:(new Date).getTime(),point:t.point};var r=k(t,e);t.featureTarget=r,a.mousedown(t)},i.mouseup=function(t){var r=k(t,e);t.featureTarget=r,I(n,{point:t.point,time:(new Date).getTime()})?a.click(t):a.mouseup(t)},i.mouseout=function(e){a.mouseout(e)},i.touchstart=function(t){if("static"!==o&&t.originalEvent.preventDefault(),e.options.touchEnabled){r={time:(new Date).getTime(),point:t.point};var n=S.touch(t,null,e)[0];t.featureTarget=n,a.touchstart(t)}},i.touchmove=function(t){if("static"!==o&&t.originalEvent.preventDefault(),e.options.touchEnabled)return a.touchmove(t),i.touchdrag(t)},i.touchend=function(t){if("static"!==o&&t.originalEvent.preventDefault(),e.options.touchEnabled){var n=S.touch(t,null,e)[0];t.featureTarget=n,A(r,{time:(new Date).getTime(),point:t.point})?a.tap(t):a.touchend(t)}};var s=function(e){return!(8===e||46===e||e>=48&&e<=57)};function u(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a.stop();var s=t[n];if(void 0===s)throw new Error("".concat(n," is not valid"));o=n;var u=s(e,r);a=d(u,e),i.silent||e.map.fire(y.j.MODE_CHANGE,{mode:n}),e.store.setDirty(),e.store.render()}i.keydown=function(t){"mapboxgl-canvas"===(t.srcElement||t.target).classList[0]&&(8!==t.keyCode&&46!==t.keyCode||!e.options.controls.trash?s(t.keyCode)?a.keydown(t):49===t.keyCode&&e.options.controls.point?u(y.n.DRAW_POINT):50===t.keyCode&&e.options.controls.line_string?u(y.n.DRAW_LINE_STRING):51===t.keyCode&&e.options.controls.polygon&&u(y.n.DRAW_POLYGON):(t.preventDefault(),a.trash()))},i.keyup=function(e){s(e.keyCode)&&a.keyup(e)},i.zoomend=function(){e.store.changeZoom()},i.data=function(t){if("style"===t.dataType){var n=e.setup,r=e.map,i=e.options,o=e.store;i.styles.some((function(e){return r.getLayer(e.id)}))||(n.addLayers(),o.setDirty(),o.render())}};var l={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){o=e.options.defaultMode,a=d(t[o](e),e)},changeMode:u,actionable:function(t){var n=!1;Object.keys(t).forEach((function(e){if(void 0===l[e])throw new Error("Invalid action type");l[e]!==t[e]&&(n=!0),l[e]=t[e]})),n&&e.map.fire(y.j.ACTIONABLE,{actions:l})},currentModeName:function(){return o},currentModeRender:function(e,t){return a.render(e,t)},fire:function(e,t){i[e]&&i[e](t)},addEventListeners:function(){e.map.on("mousemove",i.mousemove),e.map.on("mousedown",i.mousedown),e.map.on("mouseup",i.mouseup),e.map.on("data",i.data),e.map.on("touchmove",i.touchmove),e.map.on("touchstart",i.touchstart),e.map.on("touchend",i.touchend),e.container.addEventListener("mouseout",i.mouseout),e.options.keybindings&&(e.container.addEventListener("keydown",i.keydown),e.container.addEventListener("keyup",i.keyup))},removeEventListeners:function(){e.map.off("mousemove",i.mousemove),e.map.off("mousedown",i.mousedown),e.map.off("mouseup",i.mouseup),e.map.off("data",i.data),e.map.off("touchmove",i.touchmove),e.map.off("touchstart",i.touchstart),e.map.off("touchend",i.touchend),e.container.removeEventListener("mouseout",i.mouseout),e.options.keybindings&&(e.container.removeEventListener("keydown",i.keydown),e.container.removeEventListener("keyup",i.keyup))},trash:function(e){a.trash(e)},combineFeatures:function(){a.combineFeatures()},uncombineFeatures:function(){a.uncombineFeatures()},getMode:function(){return o}}};var Z=function(e){return[].concat(e).filter((function(e){return void 0!==e}))};function J(){var e=this;if(!(e.ctx.map&&void 0!==e.ctx.map.getSource(y.o.HOT)))return u();var t=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:t});var n=[],r=[];e.isDirty?r=e.getAllIds():(n=e.getChangedIds().filter((function(t){return void 0!==e.get(t)})),r=e.sources.hot.filter((function(t){return t.properties.id&&-1===n.indexOf(t.properties.id)&&void 0!==e.get(t.properties.id)})).map((function(e){return e.properties.id}))),e.sources.hot=[];var i=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter((function(e){var t=e.properties.id||e.properties.parent;return-1===n.indexOf(t)}));var o=i!==e.sources.cold.length||r.length>0;function a(n,r){var i=e.get(n).internal(t);e.ctx.events.currentModeRender(i,(function(t){e.sources[r].push(t)}))}if(n.forEach((function(e){return a(e,"hot")})),r.forEach((function(e){return a(e,"cold")})),o&&e.ctx.map.getSource(y.o.COLD).setData({type:y.k.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(y.o.HOT).setData({type:y.k.FEATURE_COLLECTION,features:e.sources.hot}),e._emitSelectionChange&&(e.ctx.map.fire(y.j.SELECTION_CHANGE,{features:e.getSelected().map((function(e){return e.toGeoJSON()})),points:e.getSelectedCoordinates().map((function(e){return{type:y.k.FEATURE,properties:{},geometry:{type:y.k.POINT,coordinates:e.coordinates}}}))}),e._emitSelectionChange=!1),e._deletedFeaturesToEmit.length){var s=e._deletedFeaturesToEmit.map((function(e){return e.toGeoJSON()}));e._deletedFeaturesToEmit=[],e.ctx.map.fire(y.j.DELETE,{features:s})}function u(){e.isDirty=!1,e.clearChangedIds()}u(),e.ctx.map.fire(y.j.RENDER,{})}function K(e){var t,n=this;this._features={},this._featureIds=new w.a,this._selectedFeatureIds=new w.a,this._selectedCoordinates=[],this._changedFeatureIds=new w.a,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]},this.render=function(){t||(t=requestAnimationFrame((function(){t=null,J.call(n)})))},this.isDirty=!1}function Q(e,t){var n=e._selectedCoordinates.filter((function(t){return e._selectedFeatureIds.has(t.feature_id)}));e._selectedCoordinates.length===n.length||t.silent||(e._emitSelectionChange=!0),e._selectedCoordinates=n}K.prototype.createRenderBatch=function(){var e=this,t=this.render,n=0;return this.render=function(){n++},function(){e.render=t,n>0&&e.render()}},K.prototype.setDirty=function(){return this.isDirty=!0,this},K.prototype.featureChanged=function(e){return this._changedFeatureIds.add(e),this},K.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},K.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},K.prototype.getAllIds=function(){return this._featureIds.values()},K.prototype.add=function(e){return this.featureChanged(e.id),this._features[e.id]=e,this._featureIds.add(e.id),this},K.prototype.delete=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Z(e).forEach((function(e){t._featureIds.has(e)&&(t._featureIds.delete(e),t._selectedFeatureIds.delete(e),n.silent||-1===t._deletedFeaturesToEmit.indexOf(t._features[e])&&t._deletedFeaturesToEmit.push(t._features[e]),delete t._features[e],t.isDirty=!0)})),Q(this,n),this},K.prototype.get=function(e){return this._features[e]},K.prototype.getAll=function(){var e=this;return Object.keys(this._features).map((function(t){return e._features[t]}))},K.prototype.select=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Z(e).forEach((function(e){t._selectedFeatureIds.has(e)||(t._selectedFeatureIds.add(e),t._changedFeatureIds.add(e),n.silent||(t._emitSelectionChange=!0))})),this},K.prototype.deselect=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Z(e).forEach((function(e){t._selectedFeatureIds.has(e)&&(t._selectedFeatureIds.delete(e),t._changedFeatureIds.add(e),n.silent||(t._emitSelectionChange=!0))})),Q(this,n),this},K.prototype.clearSelected=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this},K.prototype.setSelected=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=Z(e),this.deselect(this._selectedFeatureIds.values().filter((function(t){return-1===e.indexOf(t)})),{silent:n.silent}),this.select(e.filter((function(e){return!t._selectedFeatureIds.has(e)})),{silent:n.silent}),this},K.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this},K.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},K.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},K.prototype.getSelected=function(){var e=this;return this._selectedFeatureIds.values().map((function(t){return e.get(t)}))},K.prototype.getSelectedCoordinates=function(){var e=this;return this._selectedCoordinates.map((function(t){return{coordinates:e.get(t.feature_id).getCoordinate(t.coord_path)}}))},K.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)},K.prototype.setFeatureProperty=function(e,t,n){this.get(e).setProperty(t,n),this.featureChanged(e)},K.prototype.storeMapConfig=function(){var e=this;y.l.forEach((function(t){e.ctx.map[t]&&(e._mapInitialConfig[t]=e.ctx.map[t].isEnabled())}))},K.prototype.restoreMapConfig=function(){var e=this;Object.keys(this._mapInitialConfig).forEach((function(t){e._mapInitialConfig[t]?e.ctx.map[t].enable():e.ctx.map[t].disable()}))},K.prototype.getInitialConfigValue=function(e){return void 0===this._mapInitialConfig[e]||this._mapInitialConfig[e]};var ee=n(8),te=n.n(ee),ne=["mode","feature","mouse"],re=function(e){var t=null,n=null,r={onRemove:function(){return e.map.off("load",r.connect),clearInterval(n),r.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.map=null,e.container=null,e.store=null,t&&t.parentNode&&t.parentNode.removeChild(t),t=null,this},connect:function(){e.map.off("load",r.connect),clearInterval(n),r.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd:function(i){var o=i.fire;return i.fire=function(e,t){var n=arguments;return 1===o.length&&1!==arguments.length&&(n=[te()({},{type:e},t)]),o.apply(i,n)},e.map=i,e.events=Y(e),e.ui=function(e){var t={},n=null,r={mode:null,feature:null,mouse:null},i={mode:null,feature:null,mouse:null};function o(e){i=te()(i,e)}function a(){if(e.container){var t,n,o=[],a=[];ne.forEach((function(e){i[e]!==r[e]&&(o.push("".concat(e,"-").concat(r[e])),null!==i[e]&&a.push("".concat(e,"-").concat(i[e])))})),o.length>0&&(t=e.container.classList).remove.apply(t,o),a.length>0&&(n=e.container.classList).add.apply(n,a),r=te()(r,i)}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement("button");return r.className="".concat(y.h.CONTROL_BUTTON," ").concat(t.className),r.setAttribute("title",t.title),t.container.appendChild(r),r.addEventListener("click",(function(r){if(r.preventDefault(),r.stopPropagation(),r.target===n)return u(),void t.onDeactivate();l(e),t.onActivate()}),!0),r}function u(){n&&(n.classList.remove(y.h.ACTIVE_BUTTON),n=null)}function l(e){u();var r=t[e];r&&r&&"trash"!==e&&(r.classList.add(y.h.ACTIVE_BUTTON),n=r)}return{setActiveButton:l,queueMapClasses:o,updateMapClasses:a,clearMapClasses:function(){o({mode:null,feature:null,mouse:null}),a()},addButtons:function(){var n=e.options.controls,r=document.createElement("div");return r.className="".concat(y.h.CONTROL_GROUP," ").concat(y.h.CONTROL_BASE),n?(n[y.p.LINE]&&(t[y.p.LINE]=s(y.p.LINE,{container:r,className:y.h.CONTROL_BUTTON_LINE,title:"LineString tool ".concat(e.options.keybindings?"(l)":""),onActivate:function(){return e.events.changeMode(y.n.DRAW_LINE_STRING)},onDeactivate:function(){return e.events.trash()}})),n[y.p.POLYGON]&&(t[y.p.POLYGON]=s(y.p.POLYGON,{container:r,className:y.h.CONTROL_BUTTON_POLYGON,title:"Polygon tool ".concat(e.options.keybindings?"(p)":""),onActivate:function(){return e.events.changeMode(y.n.DRAW_POLYGON)},onDeactivate:function(){return e.events.trash()}})),n[y.p.POINT]&&(t[y.p.POINT]=s(y.p.POINT,{container:r,className:y.h.CONTROL_BUTTON_POINT,title:"Marker tool ".concat(e.options.keybindings?"(m)":""),onActivate:function(){return e.events.changeMode(y.n.DRAW_POINT)},onDeactivate:function(){return e.events.trash()}})),n.trash&&(t.trash=s("trash",{container:r,className:y.h.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){e.events.trash()}})),n.combine_features&&(t.combine_features=s("combineFeatures",{container:r,className:y.h.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){e.events.combineFeatures()}})),n.uncombine_features&&(t.uncombine_features=s("uncombineFeatures",{container:r,className:y.h.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){e.events.uncombineFeatures()}})),r):r},removeButtons:function(){Object.keys(t).forEach((function(e){var n=t[e];n.parentNode&&n.parentNode.removeChild(n),delete t[e]}))}}}(e),e.container=i.getContainer(),e.store=new K(e),t=e.ui.addButtons(),e.options.boxSelect&&(i.boxZoom.disable(),i.dragPan.disable(),i.dragPan.enable()),i.loaded()?r.connect():(i.on("load",r.connect),n=setInterval((function(){i.loaded()&&r.connect()}),16)),e.events.start(),t},addLayers:function(){e.map.addSource(y.o.COLD,{data:{type:y.k.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(y.o.HOT,{data:{type:y.k.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach((function(t){e.map.addLayer(t)})),e.store.setDirty(!0),e.store.render()},removeLayers:function(){e.options.styles.forEach((function(t){e.map.getLayer(t.id)&&e.map.removeLayer(t.id)})),e.map.getSource(y.o.COLD)&&e.map.removeSource(y.o.COLD),e.map.getSource(y.o.HOT)&&e.map.removeSource(y.o.HOT)}};return e.setup=r,r},ie=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],oe=n(59),ae=n(3),se=n(27),ue=n(42),le=n(5),ce=n(26),he=Object(ae.f)(y.m.VERTEX),fe=Object(ae.f)(y.m.MIDPOINT),pe={fireUpdate:function(){this.map.fire(y.j.UPDATE,{action:y.q.CHANGE_COORDINATES,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},fireActionable:function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})},startDragging:function(e,t){this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},stopDragging:function(e){this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null},onVertex:function(e,t){this.startDragging(e,t);var n=t.featureTarget.properties,r=e.selectedCoordPaths.indexOf(n.coord_path);Object(ae.g)(t)||-1!==r?Object(ae.g)(t)&&-1===r&&e.selectedCoordPaths.push(n.coord_path):e.selectedCoordPaths=[n.coord_path];var i=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(i)},onMidpoint:function(e,t){this.startDragging(e,t);var n=t.featureTarget.properties;e.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),e.selectedCoordPaths=[n.coord_path]},pathsToCoordinates:function(e,t){return t.map((function(t){return{feature_id:e,coord_path:t}}))},onFeature:function(e,t){0===e.selectedCoordPaths.length?this.startDragging(e,t):this.stopDragging(e)},dragFeature:function(e,t,n){Object(ce.a)(this.getSelected(),n),e.dragMoveLocation=t.lngLat},dragVertex:function(e,t,n){for(var r=e.selectedCoordPaths.map((function(t){return e.feature.getCoordinate(t)})),i=r.map((function(e){return{type:y.k.FEATURE,properties:{},geometry:{type:y.k.POINT,coordinates:e}}})),o=Object(ue.a)(i,n),a=0;a<r.length;a++){var s=r[a];e.feature.updateCoordinate(e.selectedCoordPaths[a],s[0]+o.lng,s[1]+o.lat)}},clickNoTarget:function(){this.changeMode(y.n.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(y.n.SIMPLE_SELECT)},clickActiveFeature:function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},onSetup:function(e){var t=e.featureId,n=this.getFeature(t);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===y.k.POINT)throw new TypeError("direct_select mode doesn't handle point features");var r={featureId:t,feature:n,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,r.selectedCoordPaths)),this.setSelected(t),le.a.disable(this),this.setActionableState({trash:!0}),r},onStop:function(){le.a.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(e,t,n){e.featureId===t.properties.id?(t.properties.active=y.g.ACTIVE,n(t),Object(se.a)(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(n)):(t.properties.active=y.g.INACTIVE,n(t)),this.fireActionable(e)},onTrash:function(e){e.selectedCoordPaths.sort((function(e,t){return t.localeCompare(e,"en",{numeric:!0})})).forEach((function(t){return e.feature.removeCoordinate(t)})),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),!1===e.feature.isValid()&&(this.deleteFeature([e.featureId]),this.changeMode(y.n.SIMPLE_SELECT,{}))},onMouseMove:function(e,t){var n=Object(ae.a)(t),r=he(t),i=0===e.selectedCoordPaths.length;n&&i||r&&!i?this.updateUIClasses({mouse:y.i.MOVE}):this.updateUIClasses({mouse:y.i.NONE}),this.stopDragging(e)},onMouseOut:function(e){e.dragMoving&&this.fireUpdate()}};pe.onTouchStart=pe.onMouseDown=function(e,t){return he(t)?this.onVertex(e,t):Object(ae.a)(t)?this.onFeature(e,t):fe(t)?this.onMidpoint(e,t):void 0},pe.onDrag=function(e,t){if(!0===e.canDragMove){e.dragMoving=!0,t.originalEvent.stopPropagation();var n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,n):this.dragFeature(e,t,n),e.dragMoveLocation=t.lngLat}},pe.onClick=function(e,t){return Object(ae.j)(t)?this.clickNoTarget(e,t):Object(ae.a)(t)?this.clickActiveFeature(e,t):Object(ae.e)(t)?this.clickInactive(e,t):void this.stopDragging(e)},pe.onTap=function(e,t){return Object(ae.j)(t)?this.clickNoTarget(e,t):Object(ae.a)(t)?this.clickActiveFeature(e,t):Object(ae.e)(t)?this.clickInactive(e,t):void 0},pe.onTouchEnd=pe.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};var de=pe,ge={onSetup:function(){var e=this.newFeature({type:y.k.FEATURE,properties:{},geometry:{type:y.k.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:y.i.ADD}),this.activateUIButton(y.p.POINT),this.setActionableState({trash:!0}),{point:e}},stopDrawingAndRemove:function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(y.n.SIMPLE_SELECT)}};ge.onTap=ge.onClick=function(e,t){this.updateUIClasses({mouse:y.i.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.map.fire(y.j.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(y.n.SIMPLE_SELECT,{featureIds:[e.point.id]})},ge.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})},ge.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.point.id;if(t.properties.active=r?y.g.ACTIVE:y.g.INACTIVE,!r)return n(t)},ge.onTrash=ge.stopDrawingAndRemove,ge.onKeyUp=function(e,t){if(ae.c(t)||ae.b(t))return this.stopDrawingAndRemove(e,t)};var me=ge;var ye=function(e,t){return!!e.lngLat&&(e.lngLat.lng===t[0]&&e.lngLat.lat===t[1])},ve=n(15),_e={onSetup:function(){var e=this.newFeature({type:y.k.FEATURE,properties:{},geometry:{type:y.k.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),le.a.disable(this),this.updateUIClasses({mouse:y.i.ADD}),this.activateUIButton(y.p.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&ye(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(y.n.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:y.i.ADD}),e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(y.n.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},onMouseMove:function(e,t){e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat),ae.i(t)&&this.updateUIClasses({mouse:y.i.POINTER})}};_e.onTap=_e.onClick=function(e,t){return ae.i(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)},_e.onKeyUp=function(e,t){ae.c(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(y.n.SIMPLE_SELECT)):ae.b(t)&&this.changeMode(y.n.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},_e.onStop=function(e){this.updateUIClasses({mouse:y.i.NONE}),le.a.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.polygon.id)&&(e.polygon.removeCoordinate("0.".concat(e.currentVertexPosition)),e.polygon.isValid()?this.map.fire(y.j.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(y.n.SIMPLE_SELECT,{},{silent:!0})))},_e.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.polygon.id;if(t.properties.active=r?y.g.ACTIVE:y.g.INACTIVE,!r)return n(t);if(0!==t.geometry.coordinates.length){var i=t.geometry.coordinates[0].length;if(!(i<3)){if(t.properties.meta=y.m.FEATURE,n(Object(ve.a)(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),i>3){var o=t.geometry.coordinates[0].length-3;n(Object(ve.a)(e.polygon.id,t.geometry.coordinates[0][o],"0.".concat(o),!1))}if(i<=4){var a=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(n({type:y.k.FEATURE,properties:t.properties,geometry:{coordinates:a,type:y.k.LINE_STRING}}),3===i)return}return n(t)}}},_e.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(y.n.SIMPLE_SELECT)};var be=_e,xe=n(6),we={onSetup:function(e){var t,n,r=(e=e||{}).featureId,i="forward";if(r){if(!(t=this.getFeature(r)))throw new Error("Could not find a feature with the provided featureId");var o=e.from;if(o&&"Feature"===o.type&&o.geometry&&"Point"===o.geometry.type&&(o=o.geometry),o&&"Point"===o.type&&o.coordinates&&2===o.coordinates.length&&(o=o.coordinates),!o||!Array.isArray(o))throw new Error("Please use the `from` property to indicate which point to continue the line from");var a=t.coordinates.length-1;if(t.coordinates[a][0]===o[0]&&t.coordinates[a][1]===o[1]){var s;n=a+1,(s=t).addCoordinate.apply(s,[n].concat(Object(xe.a)(t.coordinates[a])))}else{if(t.coordinates[0][0]!==o[0]||t.coordinates[0][1]!==o[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");var u;i="backwards",n=0,(u=t).addCoordinate.apply(u,[n].concat(Object(xe.a)(t.coordinates[0])))}}else t=this.newFeature({type:y.k.FEATURE,properties:{},geometry:{type:y.k.LINE_STRING,coordinates:[]}}),n=0,this.addFeature(t);return this.clearSelectedFeatures(),le.a.disable(this),this.updateUIClasses({mouse:y.i.ADD}),this.activateUIButton(y.p.LINE),this.setActionableState({trash:!0}),{line:t,currentVertexPosition:n,direction:i}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&ye(t,e.line.coordinates[e.currentVertexPosition-1])||"backwards"===e.direction&&ye(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(y.n.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:y.i.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),"forward"===e.direction?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(y.n.SIMPLE_SELECT,{featureIds:[e.line.id]})},onMouseMove:function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),ae.i(t)&&this.updateUIClasses({mouse:y.i.POINTER})}};we.onTap=we.onClick=function(e,t){if(ae.i(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)},we.onKeyUp=function(e,t){ae.b(t)?this.changeMode(y.n.SIMPLE_SELECT,{featureIds:[e.line.id]}):ae.c(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(y.n.SIMPLE_SELECT))},we.onStop=function(e){le.a.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.line.id)&&(e.line.removeCoordinate("".concat(e.currentVertexPosition)),e.line.isValid()?this.map.fire(y.j.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(y.n.SIMPLE_SELECT,{},{silent:!0})))},we.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(y.n.SIMPLE_SELECT)},we.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.line.id;if(t.properties.active=r?y.g.ACTIVE:y.g.INACTIVE,!r)return n(t);t.geometry.coordinates.length<2||(t.properties.meta=y.m.FEATURE,n(Object(ve.a)(e.line.id,t.geometry.coordinates["forward"===e.direction?t.geometry.coordinates.length-2:1],"".concat("forward"===e.direction?t.geometry.coordinates.length-2:1),!1)),n(t))};var Ee=we,Se={simple_select:oe.default,direct_select:de,draw_point:me,draw_polygon:be,draw_line_string:Ee},Te={defaultMode:y.n.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:ie,modes:Se,controls:{},userProperties:!1},ke={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Ce={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Ie(e,t){return e.map((function(e){return e.source?e:te()(e,{id:"".concat(e.id,".").concat(t),source:"hot"===t?y.o.HOT:y.o.COLD})}))}var Ae=n(58),Me=n.n(Ae),Le=n(41),Ne=n.n(Le),Pe=function(e,t){return e.length===t.length&&JSON.stringify(e.map((function(e){return e})).sort())===JSON.stringify(t.map((function(e){return e})).sort())},Oe=n(91),Re=n.n(Oe),De={Polygon:B,LineString:F,Point:R,MultiPolygon:q,MultiLineString:q,MultiPoint:q},Fe=function(e,t){var n={options:e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=te()(e);return e.controls||(t.controls={}),!1===e.displayControlsDefault?t.controls=te()(Ce,e.controls):t.controls=te()(ke,e.controls),(t=te()(Te,t)).styles=Ie(t.styles,"cold").concat(Ie(t.styles,"hot")),t}(e)};t=function(e,t){return t.modes=y.n,t.getFeatureIdsAt=function(t){return S.click({point:t},null,e).map((function(e){return e.properties.id}))},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:y.k.FEATURE_COLLECTION,features:e.store.getSelectedIds().map((function(t){return e.store.get(t)})).map((function(e){return e.toGeoJSON()}))}},t.getSelectedPoints=function(){return{type:y.k.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map((function(e){return{type:y.k.FEATURE,properties:{},geometry:{type:y.k.POINT,coordinates:e.coordinates}}}))}},t.set=function(n){if(void 0===n.type||n.type!==y.k.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");var r=e.store.createRenderBatch(),i=e.store.getAllIds().slice(),o=t.add(n),a=new w.a(o);return(i=i.filter((function(e){return!a.has(e)}))).length&&t.delete(i),r(),o},t.add=function(t){var n=Re.a.hint(t,{precisionWarning:!1}).filter((function(e){return"message"!==e.level}));if(n.length)throw new Error(n[0].message);var r=JSON.parse(JSON.stringify(Ne()(t))).features.map((function(t){if(t.id=t.id||L()(),null===t.geometry)throw new Error("Invalid geometry: null");if(void 0===e.store.get(t.id)||e.store.get(t.id).type!==t.geometry.type){var n=De[t.geometry.type];if(void 0===n)throw new Error("Invalid geometry type: ".concat(t.geometry.type,"."));var r=new n(e,t);e.store.add(r)}else{var i=e.store.get(t.id);i.properties=t.properties,Me()(i.getCoordinates(),t.geometry.coordinates)||i.incomingCoords(t.geometry.coordinates)}return t.id}));return e.store.render(),r},t.get=function(t){var n=e.store.get(t);if(n)return n.toGeoJSON()},t.getAll=function(){return{type:y.k.FEATURE_COLLECTION,features:e.store.getAll().map((function(e){return e.toGeoJSON()}))}},t.delete=function(n){return e.store.delete(n,{silent:!0}),t.getMode()!==y.n.DIRECT_SELECT||e.store.getSelectedIds().length?e.store.render():e.events.changeMode(y.n.SIMPLE_SELECT,void 0,{silent:!0}),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:!0}),t.getMode()===y.n.DIRECT_SELECT?e.events.changeMode(y.n.SIMPLE_SELECT,void 0,{silent:!0}):e.store.render(),t},t.changeMode=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n===y.n.SIMPLE_SELECT&&t.getMode()===y.n.SIMPLE_SELECT?(Pe(r.featureIds||[],e.store.getSelectedIds())||(e.store.setSelected(r.featureIds,{silent:!0}),e.store.render()),t):(n===y.n.DIRECT_SELECT&&t.getMode()===y.n.DIRECT_SELECT&&r.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(n,r,{silent:!0}),t)},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:!0}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:!0}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:!0}),t},t.setFeatureProperty=function(n,r,i){return e.store.setFeatureProperty(n,r,i),t},t}(n,t),n.api=t;var r=re(n);return t.onAdd=r.onAdd,t.onRemove=r.onRemove,t.types=y.p,t.options=e,t};function ze(e){Fe(e,this)}ze.modes=Se;var Be=ze,Ue=n(92),Ve=n.n(Ue);var je=n(43);function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||Object(je.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ge=6371008.8,$e={meters:Ge,metres:Ge,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:Ge/1852,inches:39.37*Ge,yards:5825721.287490856,feet:20902260.511392,radians:1,degrees:57.22891354143274};function He(e,t,n){if(!ot(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");r&&at(r),i&&st(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=t||{},o.geometry=e,o}function Xe(e,t,n){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!it(e[0])||!it(e[1]))throw new Error("coordinates must contain numbers");return He({type:"Point",coordinates:e},t,n)}function We(e,t,n){if(!e)throw new Error("coordinates is required");for(var r=0;r<e.length;r++){var i=e[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<i[i.length-1].length;o++){if(0===r&&0===o&&!it(i[0][0])||!it(i[0][1]))throw new Error("coordinates must contain numbers");if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}}return He({type:"Polygon",coordinates:e},t,n)}function Ye(e,t,n){if(!e)throw new Error("coordinates is required");if(e.length<2)throw new Error("coordinates must be an array of two or more positions");if(!it(e[0][1])||!it(e[0][1]))throw new Error("coordinates must contain numbers");return He({type:"LineString",coordinates:e},t,n)}function Ze(e,t){if(!ot(t=t||{}))throw new Error("options is invalid");var n=t.bbox,r=t.id;if(!e)throw new Error("No features passed");if(!Array.isArray(e))throw new Error("features must be an Array");n&&at(n),r&&st(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=e,i}function Je(e,t,n){if(!e)throw new Error("coordinates is required");return He({type:"MultiLineString",coordinates:e},t,n)}function Ke(e,t,n){if(!e)throw new Error("coordinates is required");return He({type:"MultiPolygon",coordinates:e},t,n)}function Qe(e,t){if(void 0===e||null===e)throw new Error("radians is required");if(t&&"string"!==typeof t)throw new Error("units must be a string");var n=$e[t||"kilometers"];if(!n)throw new Error(t+" units is invalid");return e*n}function et(e,t){if(void 0===e||null===e)throw new Error("distance is required");if(t&&"string"!==typeof t)throw new Error("units must be a string");var n=$e[t||"kilometers"];if(!n)throw new Error(t+" units is invalid");return e/n}function tt(e){if(null===e||void 0===e)throw new Error("radians is required");return 180*(e%(2*Math.PI))/Math.PI}function nt(e){if(null===e||void 0===e)throw new Error("degrees is required");return e%360*Math.PI/180}function rt(e,t,n){if(null===e||void 0===e)throw new Error("length is required");if(!(e>=0))throw new Error("length must be a positive number");return Qe(et(e,t),n||"kilometers")}function it(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function ot(e){return!!e&&e.constructor===Object}function at(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!it(e))throw new Error("bbox must only contain numbers")}))}function st(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}var ut=function(e){at(e);var t=Number(e[0]),n=Number(e[1]),r=Number(e[2]),i=Number(e[3]);if(6===e.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[t,n];return We([[o,[r,n],[r,i],[t,i],o]])};function lt(e){if(!e)throw new Error("obj is required");var t=ct(e);if(t.length>1&&it(t[0])&&it(t[1]))return t;throw new Error("Coordinate is not a valid Point")}function ct(e){if(!e)throw new Error("obj is required");var t;if(e.length?t=e:e.coordinates?t=e.coordinates:e.geometry&&e.geometry.coordinates&&(t=e.geometry.coordinates),t)return ht(t),t;throw new Error("No valid coordinates")}function ht(e){if(e.length>1&&it(e[0])&&it(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return ht(e[0]);throw new Error("coordinates must only contain numbers")}function ft(e){if(!e)throw new Error("geojson is required");if(void 0!==e.geometry)return e.geometry;if(e.coordinates||e.geometries)return e;throw new Error("geojson must be a valid Feature or Geometry Object")}function pt(e,t){if(!e)throw new Error((t||"geojson")+" is required");if(e.geometry&&e.geometry.type)return e.geometry.type;if(e.type)return e.type;throw new Error((t||"geojson")+" is invalid")}function dt(e,t,n){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,o=t.length-1;i<t.length;o=i++){var a=t[i][0],s=t[i][1],u=t[o][0],l=t[o][1];if(e[1]*(a-u)+s*(u-e[0])+l*(e[0]-a)===0&&(a-e[0])*(u-e[0])<=0&&(s-e[1])*(l-e[1])<=0)return!n;s>e[1]!==l>e[1]&&e[0]<(u-a)*(e[1]-s)/(l-s)+a&&(r=!r)}return r}var gt=function(e,t,n){if("object"!==typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var i=lt(e),o=ct(t),a=t.geometry?t.geometry.type:t.type,s=t.bbox;if(s&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(i,s))return!1;"Polygon"===a&&(o=[o]);for(var u=0,l=!1;u<o.length&&!l;u++)if(dt(i,o[u][0],r)){for(var c=!1,h=1;h<o[u].length&&!c;)dt(i,o[u][h],!r)&&(c=!0),h++;c||(l=!0)}return l};function mt(e,t,n){if(null!==e)for(var r,i,o,a,s,u,l,c,h=0,f=0,p=e.type,d="FeatureCollection"===p,g="Feature"===p,m=d?e.features.length:1,y=0;y<m;y++){s=(c=!!(l=d?e.features[y].geometry:g?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var v=0;v<s;v++){var _=0,b=0;if(null!==(a=c?l.geometries[v]:l)){u=a.coordinates;var x=a.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":t(u,f,y,_,b),f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)t(u[r],f,y,_,b),f++,"MultiPoint"===x&&_++;"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++)t(u[r][i],f,y,_,b),f++;"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===x&&(b=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++)t(u[r][i][o],f,y,_,b),f++;b++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)mt(a.geometries[r],t,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function yt(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)t(e.features[n],n)}function vt(e,t){var n,r,i,o,a,s,u,l,c,h,f=0,p="FeatureCollection"===e.type,d="Feature"===e.type,g=p?e.features.length:1;for(n=0;n<g;n++){for(s=p?e.features[n].geometry:d?e.geometry:e,l=p?e.features[n].properties:d?e.properties:{},c=p?e.features[n].bbox:d?e.bbox:void 0,h=p?e.features[n].id:d?e.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":t(o,f,l,c,h);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)t(o.geometries[r],f,l,c,h);break;default:throw new Error("Unknown Geometry Type")}else t(null,f,l,c,h);f++}}function _t(e,t){vt(e,(function(e,n,r,i,o){var a,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return void t(He(e,r,{bbox:i,id:o}),n,0)}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}e.coordinates.forEach((function(e,i){t(He({type:a,coordinates:e},r),n,i)}))}))}function bt(e,t){_t(e,(function(e,n,r){var i=0;if(e.geometry){var o=e.geometry.type;"Point"!==o&&"MultiPoint"!==o&&function(e,t,n,r){var i=n;mt(e,(function(e,r,o,a,s){i=0===r&&void 0===n?e:t(i,e,r,o,a,s)}),r)}(e,(function(o,a,s,u,l,c){var h=Ye([o,a],e.properties);return t(h,n,r,c,i),i++,a}))}}))}function xt(e,t,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=t-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);xt(e,t,Math.max(n,Math.floor(t-a*u/o+l)),Math.min(r,Math.floor(t+(o-a)*u/o+l)),i)}var c=e[t],h=n,f=r;for(wt(e,n,t),i(e[r],c)>0&&wt(e,n,r);h<f;){for(wt(e,h,f),h++,f--;i(e[h],c)<0;)h++;for(;i(e[f],c)>0;)f--}0===i(e[n],c)?wt(e,n,f):wt(e,++f,r),f<=t&&(n=f+1),t<=f&&(r=f-1)}}function wt(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Et(e,t){return e<t?-1:e>t?1:0}var St=function(e,t,n,r,i){xt(e,t,n||0,r||e.length-1,i||Et)};function Tt(e,t){if(!(this instanceof Tt))return new Tt(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function kt(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function Ct(e,t){It(e,0,e.children.length,t,e)}function It(e,t,n,r,i){i||(i=Ft(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=t;a<n;a++)o=e.children[a],At(i,e.leaf?r(o):o);return i}function At(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Mt(e,t){return e.minX-t.minX}function Lt(e,t){return e.minY-t.minY}function Nt(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Pt(e){return e.maxX-e.minX+(e.maxY-e.minY)}function Ot(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function Rt(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Dt(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Ft(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function zt(e,t,n,r,i){for(var o,a=[t,n];a.length;)(n=a.pop())-(t=a.pop())<=r||(o=t+Math.ceil((n-t)/r/2)*r,St(e,o,t,n,i),a.push(t,o,o,n))}Tt.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(!Dt(e,t))return n;for(var i,o,a,s,u=[];t;){for(i=0,o=t.children.length;i<o;i++)a=t.children[i],Dt(e,s=t.leaf?r(a):a)&&(t.leaf?n.push(a):Rt(e,s)?this._all(a,n):u.push(a));t=u.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!Dt(e,t))return!1;for(var r,i,o,a,s=[];t;){for(r=0,i=t.children.length;r<i;r++)if(o=t.children[r],Dt(e,a=t.leaf?n(o):o)){if(t.leaf||Rt(e,a))return!0;s.push(o)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Ft([]),this},remove:function(e,t){if(!e)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(e),u=[],l=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),a.leaf&&-1!==(i=kt(e,a.children,t)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!Rt(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),l.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(e){return e},compareMinX:Mt,compareMinY:Lt,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,r){var i,o=n-t+1,a=this._maxEntries;if(o<=a)return Ct(i=Ft(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=Ft([])).leaf=!1,i.height=r;var s,u,l,c,h=Math.ceil(o/a),f=h*Math.ceil(Math.sqrt(a));for(zt(e,t,n,f,this.compareMinX),s=t;s<=n;s+=f)for(zt(e,s,l=Math.min(s+f-1,n),h,this.compareMinY),u=s;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(e,u,c,r-1));return Ct(i,this.toBBox),i},_chooseSubtree:function(e,t,n,r){for(var i,o,a,s,u,l,c,h,f,p;r.push(t),!t.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=t.children.length;i<o;i++)u=Nt(a=t.children[i]),f=e,p=a,(l=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u)<h?(h=l,c=u<c?u:c,s=a):l===h&&u<c&&(c=u,s=a);t=s||t.children[0]}return t},_insert:function(e,t,n){var r=this.toBBox,i=n?e:r(e),o=[],a=this._chooseSubtree(i,this.data,t,o);for(a.children.push(e),At(a,i);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(i,o,t)},_split:function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=Ft(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Ct(n,this.toBBox),Ct(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(e,t){this.data=Ft([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Ct(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var r,i,o,a,s,u,l,c;for(u=l=1/0,r=t;r<=n-t;r++)a=Ot(i=It(e,0,r,this.toBBox),o=It(e,r,n,this.toBBox)),s=Nt(i)+Nt(o),a<u?(u=a,c=r,l=s<l?s:l):a===u&&s<l&&(l=s,c=r);return c},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:Mt,i=e.leaf?this.compareMinY:Lt;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);var i,o,a=this.toBBox,s=It(e,0,t,a),u=It(e,n-t,n,a),l=Pt(s)+Pt(u);for(i=t;i<n-t;i++)o=e.children[i],At(s,e.leaf?a(o):o),l+=Pt(s);for(i=n-t-1;i>=t;i--)o=e.children[i],At(u,e.leaf?a(o):o),l+=Pt(u);return l},_adjustParentBBoxes:function(e,t,n){for(var r=n;r>=0;r--)At(t[r],e)},_condense:function(e){for(var t,n=e.length-1;n>=0;n--)0===e[n].children.length?n>0?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():Ct(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};var Bt=Tt;function Ut(e){var t=[e[0],e[1]],n=[e[0],e[3]],r=[e[2],e[3]];return{type:"Feature",bbox:e,properties:{},geometry:{type:"Polygon",coordinates:[[t,[e[2],e[1]],r,n,t]]}}}function Vt(e){var t=[1/0,1/0,-1/0,-1/0];return mt(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}var jt=function(e){var t=Bt(e);return t.insert=function(e){if(Array.isArray(e)){var t=e;(e=Ut(t)).bbox=t}else e.bbox=e.bbox?e.bbox:Vt(e);return Bt.prototype.insert.call(this,e)},t.load=function(e){var t=[];return Array.isArray(e)?e.forEach((function(e){var n=Ut(e);n.bbox=e,t.push(n)})):yt(e,(function(e){e.bbox=e.bbox?e.bbox:Vt(e),t.push(e)})),Bt.prototype.load.call(this,t)},t.remove=function(e){if(Array.isArray(e)){var t=e;(e=Ut(t)).bbox=t}return Bt.prototype.remove.call(this,e)},t.clear=function(){return Bt.prototype.clear.call(this)},t.search=function(e){return{type:"FeatureCollection",features:Bt.prototype.search.call(this,this.toBBox(e))}},t.collides=function(e){return Bt.prototype.collides.call(this,this.toBBox(e))},t.all=function(){return{type:"FeatureCollection",features:Bt.prototype.all.call(this)}},t.toJSON=function(){return Bt.prototype.toJSON.call(this)},t.fromJSON=function(e){return Bt.prototype.fromJSON.call(this,e)},t.toBBox=function(e){var t;return{minX:(t=e.bbox?e.bbox:Array.isArray(e)&&4===e.length?e:Vt(e))[0],minY:t[1],maxX:t[2],maxY:t[3]}},t};var qt=function(e){if(!e)throw new Error("geojson is required");var t=[];return _t(e,(function(e){!function(e,t){var n=[],r=e.geometry;switch(r.type){case"Polygon":n=ct(r);break;case"LineString":n=[ct(r)]}n.forEach((function(n){(function(e,t){var n=[];return e.reduce((function(e,r){var i=Ye([e,r],t);return i.bbox=function(e,t){var n=e[0],r=e[1],i=t[0],o=t[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(e,r),n.push(i),r})),n})(n,e.properties).forEach((function(e){e.id=t.length,t.push(e)}))}))}(e,t)})),Ze(t)};function Gt(e,t){var n=ct(e),r=ct(t);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],a=n[1][0],s=n[1][1],u=r[0][0],l=r[0][1],c=r[1][0],h=r[1][1],f=(h-l)*(a-i)-(c-u)*(s-o),p=(c-u)*(o-l)-(h-l)*(i-u),d=(a-i)*(o-l)-(s-o)*(i-u);if(0===f)return null;var g=p/f,m=d/f;return g>=0&&g<=1&&m>=0&&m<=1?Xe([i+g*(a-i),o+g*(s-o)]):null}var $t=function(e,t){var n={},r=[];if("LineString"===e.type&&(e=He(e)),"LineString"===t.type&&(t=He(t)),"Feature"===e.type&&"Feature"===t.type&&"LineString"===e.geometry.type&&"LineString"===t.geometry.type&&2===e.geometry.coordinates.length&&2===t.geometry.coordinates.length){var i=Gt(e,t);return i&&r.push(i),Ze(r)}var o=jt();return o.load(qt(t)),yt(qt(e),(function(e){yt(o.search(e),(function(t){var i=Gt(e,t);if(i){var o=ct(i).join(",");n[o]||(n[o]=!0,r.push(i))}}))})),Ze(r)};function Ht(e,t){return e.length>1?Je(e,t):Ye(e[0],t)}var Xt=function(e,t){if(!ot(t=t||{}))throw new Error("options is invalid");var n=t.properties,r=pt(e),i=ct(e);if(n=n||e.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return Ht(i,n);case"MultiPolygon":var o=[];return i.forEach((function(e){o.push(Ht(e,n))})),Ze(o);default:throw new Error("geom "+r+" not supported")}};function Wt(e,t){for(var n=0;n<e.coordinates.length-1;n++)if(Zt(e.coordinates[n],e.coordinates[n+1],t.coordinates))return!0;return!1}function Yt(e,t){for(var n=0;n<t.coordinates.length;n++)if(gt(t.coordinates[n],e))return!0;return $t(t,Xt(e)).features.length>0}function Zt(e,t,n){var r=n[0]-e[0],i=n[1]-e[1],o=t[0]-e[0],a=t[1]-e[1];return 0===r*a-i*o&&(Math.abs(o)>=Math.abs(a)?o>0?e[0]<=n[0]&&n[0]<=t[0]:t[0]<=n[0]&&n[0]<=e[0]:a>0?e[1]<=n[1]&&n[1]<=t[1]:t[1]<=n[1]&&n[1]<=e[1])}var Jt=function(e,t){var n;return _t(e,(function(e){_t(t,(function(t){if(!1===n)return!1;n=function(e,t){switch(e.type){case"Point":switch(t.type){case"Point":return n=e.coordinates,r=t.coordinates,!(n[0]===r[0]&&n[1]===r[1]);case"LineString":return!Wt(t,e);case"Polygon":return!gt(e,t)}break;case"LineString":switch(t.type){case"Point":return!Wt(e,t);case"LineString":return!function(e,t){if($t(e,t).features.length>0)return!0;return!1}(e,t);case"Polygon":return!Yt(t,e)}break;case"Polygon":switch(t.type){case"Point":return!gt(t,e);case"LineString":return!Yt(e,t);case"Polygon":return!function(e,t){for(var n=0;n<e.coordinates[0].length;n++)if(gt(e.coordinates[0][n],t))return!0;for(var r=0;r<t.coordinates[0].length;r++)if(gt(t.coordinates[0][r],e))return!0;if($t(Xt(e),Xt(t)).features.length>0)return!0;return!1}(t,e)}}var n,r}(e.geometry,t.geometry)}))})),n};var Kt=function(e,t,n){if(!ot(n=n||{}))throw new Error("options is invalid");var r=n.units,i=lt(e),o=lt(t),a=nt(o[1]-i[1]),s=nt(o[0]-i[0]),u=nt(i[1]),l=nt(o[1]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(u)*Math.cos(l);return Qe(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),r)};function Qt(e,t,n){if(!ot(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return function(e,t){var n=Qt(t,e);return n=(n+180)%360}(e,t);var r=lt(e),i=lt(t),o=nt(r[0]),a=nt(i[0]),s=nt(r[1]),u=nt(i[1]),l=Math.sin(a-o)*Math.cos(u),c=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-o);return tt(Math.atan2(l,c))}var en=Qt;var tn=function(e,t,n,r){if(!ot(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.properties,a=lt(e),s=nt(a[0]),u=nt(a[1]),l=nt(n),c=et(t,i),h=Math.asin(Math.sin(u)*Math.cos(c)+Math.cos(u)*Math.sin(c)*Math.cos(l));return Xe([tt(s+Math.atan2(Math.sin(l)*Math.sin(c)*Math.cos(u),Math.cos(c)-Math.sin(u)*Math.sin(h))),tt(h)],o)};var nn=function(e,t,n){if(!ot(n=n||{}))throw new Error("options is invalid");var r=e.geometry?e.geometry.type:e.type;if("LineString"!==r&&"MultiLineString"!==r)throw new Error("lines must be LineString or MultiLineString");var i=Xe([1/0,1/0],{dist:1/0}),o=0;return _t(e,(function(e){for(var r=ct(e),a=0;a<r.length-1;a++){var s=Xe(r[a]);s.properties.dist=Kt(t,s,n);var u=Xe(r[a+1]);u.properties.dist=Kt(t,u,n);var l=Kt(s,u,n),c=Math.max(s.properties.dist,u.properties.dist),h=en(s,u),f=tn(t,c,h+90,n),p=tn(t,c,h-90,n),d=$t(Ye([f.geometry.coordinates,p.geometry.coordinates]),Ye([s.geometry.coordinates,u.geometry.coordinates])),g=null;d.features.length>0&&((g=d.features[0]).properties.dist=Kt(t,g,n),g.properties.location=o+Kt(s,g,n)),s.properties.dist<i.properties.dist&&((i=s).properties.index=a,i.properties.location=o),u.properties.dist<i.properties.dist&&((i=u).properties.index=a+1,i.properties.location=o+l),g&&g.properties.dist<i.properties.dist&&((i=g).properties.index=a),o+=l}})),i};var rn=function(e,t){var n=Kt(e,t),r=en(e,t);return tn(e,n/2,r)},on="VERTICAL_GUIDE",an="HORIZONTAL_GUIDE",sn=function(e,t,n,r){var i=e.getCanvas(),o=i.width,a=i.height,s=e.project(n),u=s.x,l=s.y;(u>0&&u<o&&l>0&&l<a||r)&&t.push(n)},un=function(e,t,n){var r=t.getAll().features,i=[],o=function(){var t=e.getCanvas(),n=t.width,r=t.height,i=(e.unproject([0,0]).toArray(),e.unproject([n,0]).toArray()),o=(e.unproject([n,r]).toArray(),e.unproject([0,r]).toArray());return ut([o,i].flat())}(),a=[],s=function t(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(n))throw Error("Your array is not an array");Array.isArray(n[0])?n.forEach((function(e){t(e)})):2===n.length&&sn(e,a,n,r)};return r.forEach((function(e){e.id!==n.id?e.id!==an&&e.id!==on&&(s(e.geometry.coordinates),Jt(o,e)||i.push(e)):n.type===y.k.POLYGON&&s(e.geometry.coordinates[0].slice(0,-2),!0)})),[i,a]},ln=function(e,t){var n={};return t.forEach((function(t,r){var i=function(e,t){var n=[e.lng,e.lat],r="Point"===t.geometry.type,i="Polygon"===t.geometry.type,o=void 0,a=ct(t);if(r){var s=qe(a,2);return{latlng:{lng:s[0],lat:s[1]},distance:Kt(a,n)}}o=i?Xt(t):t;var u=nn(o,n),l=qe(u.geometry.coordinates,2),c=l[0],h=l[1],f=u.properties.index;return f+1===o.geometry.coordinates.length&&f--,{latlng:{lng:c,lat:h},segment:o.geometry.coordinates.slice(f,f+2),distance:u.properties.dist,isMarker:r}}(e,t);(void 0===n.distance||i.distance<n.distance)&&((n=i).layer=t)})),n},cn=function(e,t){var n,r,i,o,a,s=t.lngLat.lng,u=t.lngLat.lat;if(t.originalEvent.altKey)return e.showVerticalSnapLine=!1,e.showHorizontalSnapLine=!1,{lng:s,lat:u};if(e.snapList.length<=0)return{lng:s,lat:u};if(e.options.snap){if(n=ln({lng:s,lat:u},e.snapList),0===Object.keys(n).length)return!1;i=n.isMarker?n.latlng:function(e,t){var n=e.segment[0],r=e.segment[1],i=[e.latlng.lng,e.latlng.lat],o=Kt(n,i),a=Kt(r,i),s=o<a?n:r,u=o<a?o:a;if(t&&t.snapToMidPoints){var l=rn(n,r).geometry.coordinates,c=Kt(l,i);c<o&&c<a&&(s=l,u=c)}var h=qe(u<1.25?s:i,2);return{lng:h[0],lat:h[1]}}(n,e.options.snapOptions),r=(e.options.snapOptions&&e.options.snapOptions.snapPx||15)*function(e,t){var n=e*(Math.PI/180);return 40075017*Math.cos(n)/Math.pow(2,t+8)}(i.lat,e.map.getZoom())}if(e.options.guides){var l=function(e,t){var n=[],r=[];return e.forEach((function(e){n.push(e[0]),r.push(e[1])})),{verticalPx:n.find((function(e){return Math.abs(e-t.lng)<.009})),horizontalPx:r.find((function(e){return Math.abs(e-t.lat)<.009}))}}(e.vertices,t.lngLat);if(o=l.verticalPx,a=l.horizontalPx,o){var c={lng:o,lat:t.lngLat.lat+10},h={lng:o,lat:t.lngLat.lat-10};e.verticalGuide.updateCoordinate(0,c.lng,c.lat),e.verticalGuide.updateCoordinate(1,h.lng,h.lat)}if(a){var f={lng:t.lngLat.lng+10,lat:a},p={lng:t.lngLat.lng-10,lat:a};e.horizontalGuide.updateCoordinate(0,f.lng,f.lat),e.horizontalGuide.updateCoordinate(1,p.lng,p.lat)}e.showVerticalSnapLine=!!o,e.showHorizontalSnapLine=!!a}return n&&1e3*n.distance<r?i:o||a?(o&&(s=o),a&&(u=a),{lng:s,lat:u}):{lng:s,lat:u}},hn=function(e){return{id:e,type:y.k.FEATURE,properties:{isSnapGuide:"true"},geometry:{type:y.k.LINE_STRING,coordinates:[]}}},fn=function(e,t){return!(t.properties.id!==on||e.options.guides&&e.showVerticalSnapLine)||!(t.properties.id!==an||e.options.guides&&e.showHorizontalSnapLine)},pn=u({},me);pn.onSetup=function(e){var t=this,n=this.newFeature({type:y.k.FEATURE,properties:{},geometry:{type:y.k.POINT,coordinates:[[]]}}),r=this.newFeature(hn(on)),i=this.newFeature(hn(an));this.addFeature(n),this.addFeature(r),this.addFeature(i);var o=this.getSelected();this.clearSelectedFeatures(),le.a.disable(this);var a=qe(un(this.map,this._ctx.api,n),2),s=a[0],u=a[1],l={map:this.map,point:n,vertices:u,snapList:s,selectedFeatures:o,verticalGuide:r,horizontalGuide:i};l.options=this._ctx.options;var c=function(){var e=qe(un(t.map,t._ctx.api,n),2),r=e[0],i=e[1];l.vertices=i,l.snapList=r};l.moveendCallback=c;var h=function(e){l.options=e};return l.optionsChangedCallBAck=h,this.map.on("moveend",c),this.map.on("draw.snap.options_changed",h),l},pn.onClick=function(e){me.onClick.call(this,e,{lngLat:{lng:e.snappedLng,lat:e.snappedLat}})},pn.onMouseMove=function(e,t){var n=cn(e,t),r=n.lng,i=n.lat;e.snappedLng=r,e.snappedLat=i,e.lastVertex&&e.lastVertex[0]===r&&e.lastVertex[1]===i?this.updateUIClasses({mouse:y.i.POINTER}):this.updateUIClasses({mouse:y.i.ADD})},pn.toDisplayFeatures=function(e,t,n){fn(e,t)||me.toDisplayFeatures(e,t,n)},pn.onStop=function(e){this.deleteFeature(on,{silent:!0}),this.deleteFeature(an,{silent:!0}),this.map.off("moveend",e.moveendCallback),me.onStop.call(this,e)};var dn=pn,gn=u({},Ee);gn.onSetup=function(e){var t=this,n=this.newFeature({type:y.k.FEATURE,properties:{},geometry:{type:y.k.LINE_STRING,coordinates:[[]]}}),r=this.newFeature(hn(on)),i=this.newFeature(hn(an));this.addFeature(n),this.addFeature(r),this.addFeature(i);var o=this.getSelected();this.clearSelectedFeatures(),le.a.disable(this);var a=qe(un(this.map,this._ctx.api,n),2),s=a[0],u=a[1],l={map:this.map,line:n,currentVertexPosition:0,vertices:u,snapList:s,selectedFeatures:o,verticalGuide:r,horizontalGuide:i,direction:"forward"};l.options=this._ctx.options;var c=function(){var e=qe(un(t.map,t._ctx.api,n),2),r=e[0],i=e[1];l.vertices=i,l.snapList=r};l.moveendCallback=c;var h=function(e){l.options=e};return l.optionsChangedCallBAck=h,this.map.on("moveend",c),this.map.on("draw.snap.options_changed",h),l},gn.onClick=function(e){var t=e.snappedLng,n=e.snappedLat;if(e.currentVertexPosition>0){var r=e.line.coordinates[e.currentVertexPosition-1];if(e.lastVertex=r,r[0]===t&&r[1]===n)return this.changeMode(y.n.SIMPLE_SELECT,{featureIds:[e.line.id]})}sn(e.map,e.vertices,{lng:t,lat:n}),e.line.updateCoordinate(e.currentVertexPosition,t,n),e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t,n)},gn.onMouseMove=function(e,t){var n=cn(e,t),r=n.lng,i=n.lat;e.line.updateCoordinate(e.currentVertexPosition,r,i),e.snappedLng=r,e.snappedLat=i,e.lastVertex&&e.lastVertex[0]===r&&e.lastVertex[1]===i?this.updateUIClasses({mouse:y.i.POINTER}):this.updateUIClasses({mouse:y.i.ADD})},gn.toDisplayFeatures=function(e,t,n){fn(e,t)||Ee.toDisplayFeatures(e,t,n)},gn.onStop=function(e){this.deleteFeature(on,{silent:!0}),this.deleteFeature(an,{silent:!0}),this.map.off("moveend",e.moveendCallback),Ee.onStop.call(this,e)};var mn=gn,yn=u({},be);yn.onSetup=function(e){var t=this,n=this.newFeature({type:y.k.FEATURE,properties:{},geometry:{type:y.k.POLYGON,coordinates:[[]]}}),r=this.newFeature(hn(on)),i=this.newFeature(hn(an));this.addFeature(n),this.addFeature(r),this.addFeature(i);var o=this.getSelected();this.clearSelectedFeatures(),le.a.disable(this);var a=qe(un(this.map,this._ctx.api,n),2),s=a[0],u=a[1],l={map:this.map,polygon:n,currentVertexPosition:0,vertices:u,snapList:s,selectedFeatures:o,verticalGuide:r,horizontalGuide:i};l.options=this._ctx.options;var c=function(){var e=qe(un(t.map,t._ctx.api,n),2),r=e[0],i=e[1];l.vertices=i,l.snapList=r};l.moveendCallback=c;var h=function(e){l.options=e};return l.optionsChangedCallBAck=h,this.map.on("moveend",c),this.map.on("draw.snap.options_changed",h),l},yn.onClick=function(e){var t=e.snappedLng,n=e.snappedLat;if(e.currentVertexPosition>0){var r=e.polygon.coordinates[0][e.currentVertexPosition-1];if(e.lastVertex=r,r[0]===t&&r[1]===n)return this.changeMode(y.n.SIMPLE_SELECT,{featureIds:[e.polygon.id]})}sn(e.map,e.vertices,{lng:t,lat:n}),e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t,n),e.currentVertexPosition++,e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t,n)},yn.onMouseMove=function(e,t){var n=cn(e,t),r=n.lng,i=n.lat;e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),r,i),e.snappedLng=r,e.snappedLat=i,e.lastVertex&&e.lastVertex[0]===r&&e.lastVertex[1]===i?this.updateUIClasses({mouse:y.i.POINTER}):this.updateUIClasses({mouse:y.i.ADD})},yn.toDisplayFeatures=function(e,t,n){fn(e,t)||be.toDisplayFeatures(e,t,n)},yn.onStop=function(e){this.deleteFeature(on,{silent:!0}),this.deleteFeature(an,{silent:!0}),this.map.off("moveend",e.moveendCallback),this.map.off("draw.snap.options_changed",e.optionsChangedCallBAck),be.onStop.call(this,e)};var vn=yn,_n=ie.map((function(e){return"gl-draw-line-inactive"===e.id?u(u({},e),{},{filter:[].concat(Object(xe.a)(e.filter),[["!=","user_isSnapGuide","true"]])}):e})),bn=[].concat(Object(xe.a)(_n),[{id:"guide",type:"line",filter:["all",["==","$type","LineString"],["==","user_isSnapGuide","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#c00c00","line-width":1,"line-dasharray":[5,5]}}]),xn=n(93),wn=n.n(xn);function En(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Sn=function(e){var t=e.onSetup,n=e.onClick,r=u({originOnSetup:t,originOnMouseMove:e.onMouseMove,originOnClick:n},En(e,["onSetup","onClick","onMouseMove"]));return r.onSetup=function(e){var t=this.originOnSetup();return t.feature_type="point"in t?"point":"line"in t?"line":"polygon",t.callBack=e,t},r.onTap=r.onClick=function(e,t){"point"===e.feature_type?(this.updateUIClasses({mouse:y.i.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),"function"===typeof e.callBack?e.callBack(e.point.toGeoJSON()):this.map.fire("draw.passing-create",{features:[e.point.toGeoJSON()]}),this.changeMode(y.n.SIMPLE_SELECT,{},{silent:!0})):this.originOnClick(e,t)},r.onMouseMove=function(e,t){this.updateUIClasses({mouse:y.i.ADD}),"point"===e.feature_type?e.point.updateCoordinate(t.lngLat.lng,t.lngLat.lat):this.originOnMouseMove(e,t)},r.onStop=function(e){if("point"in e)this.activateUIButton(),this.deleteFeature([e.point.id],{silent:!0});else if("line"in e||"polygon"in e){var t=e.line||e.polygon;if(this.updateUIClasses({mouse:y.i.NONE}),le.a.enable(this),this.activateUIButton(),void 0===this.getFeature(t.id))return;t.removeCoordinate("".concat(e.currentVertexPosition)),t.isValid()&&("function"===typeof e.callBack?e.callBack(t.toGeoJSON()):this.map.fire("draw.passing-create",{features:[t.toGeoJSON()]})),this.deleteFeature([t.id],{silent:!0}),this.changeMode(y.n.SIMPLE_SELECT,{},{silent:!0})}},r};var Tn=function(e){var t=[1/0,1/0,-1/0,-1/0];return mt(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t};var kn=function(e,t){if(!ot(t=t||{}))throw new Error("options is invalid");var n=t.properties;if(!e)throw new Error("geojson is required");var r=Tn(e);return Xe([(r[0]+r[2])/2,(r[1]+r[3])/2],n)};var Cn=function(e,t){var n=0,r=0,i=0;return mt(e,(function(e){n+=e[0],r+=e[1],i++}),!0),Xe([n/i,r/i],t)};function In(e,t){var n=nt(e[1]),r=nt(t[1]),i=nt(t[0]-e[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(tt(Math.atan2(i,o))+360)%360}var An=function(e,t,n){if(!ot(n=n||{}))throw new Error("options is invalid");var r,i=n.final;if(!e)throw new Error("start point is required");if(!t)throw new Error("end point is required");return(r=i?In(lt(t),lt(e)):In(lt(e),lt(t)))>180?-(360-r):r};var Mn=function(e,t,n){if(!ot(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!e)throw new Error("from point is required");if(!t)throw new Error("to point is required");var i=lt(e),o=lt(t);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,rt(function(e,t,n){var r=n=void 0===n?Ge:Number(n),i=e[1]*Math.PI/180,o=t[1]*Math.PI/180,a=o-i,s=Math.abs(t[0]-e[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),l=Math.abs(u)>1e-11?a/u:Math.cos(i);return Math.sqrt(a*a+l*l*s*s)*r}(i,o),"meters",r)};var Ln=function(e,t,n,r){if(!ot(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.properties;if(!e)throw new Error("origin is required");if(void 0===t||null===t)throw new Error("distance is required");if(void 0===n||null===n)throw new Error("bearing is required");if(!(t>=0))throw new Error("distance must be greater than 0");var a=rt(t,i,"meters"),s=lt(e),u=function(e,t,n,r){r=void 0===r?Ge:Number(r);var i=t/r,o=e[0]*Math.PI/180,a=nt(e[1]),s=nt(n),u=i*Math.cos(s),l=a+u;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var c=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),h=Math.abs(c)>1e-11?u/c:Math.cos(a),f=i*Math.sin(s)/h;return[(180*(o+f)/Math.PI+540)%360-180,180*l/Math.PI]}(s,a,n);return u[0]+=u[0]-s[0]>180?-360:s[0]-u[0]>180?360:0,Xe(u,o)};function Nn(e){var t={type:"Feature"};return Object.keys(e).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:t[n]=e[n]}})),t.properties=Pn(e.properties),t.geometry=On(e.geometry),t}function Pn(e){var t={};return e?(Object.keys(e).forEach((function(n){var r=e[n];"object"===typeof r?null===r?t[n]=null:r.length?t[n]=r.map((function(e){return e})):t[n]=Pn(r):t[n]=r})),t):t}function On(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),"GeometryCollection"===e.type?(t.geometries=e.geometries.map((function(e){return On(e)})),t):(t.coordinates=Rn(e.coordinates),t)}function Rn(e){return"object"!==typeof e[0]?e.slice():e.map((function(e){return Rn(e)}))}var Dn=function(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return Nn(e);case"FeatureCollection":return function(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach((function(n){switch(n){case"type":case"features":return;default:t[n]=e[n]}})),t.features=e.features.map((function(e){return Nn(e)})),t}(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return On(e);default:throw new Error("unknown GeoJSON type")}};var Fn=function(e,t,n){if(!ot(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!e)throw new Error("geojson is required");if(void 0===t||null===t||isNaN(t))throw new Error("angle is required");return 0===t||(r||(r=Cn(e)),!1!==i&&void 0!==i||(e=Dn(e)),mt(e,(function(e){var n=An(r,e)+t,i=Mn(r,e),o=ct(Ln(r,i,n));e[0]=o[0],e[1]=o[1]}))),e};function zn(e,t,n){var r="Point"===pt(e);return n=function(e,t){void 0!==t&&null!==t||(t="centroid");if(Array.isArray(t)||"object"===typeof t)return lt(t);var n=e.bbox?e.bbox:Tn(e),r=n[0],i=n[1],o=n[2],a=n[3];switch(t){case"sw":case"southwest":case"westsouth":case"bottomleft":return Xe([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return Xe([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return Xe([r,a]);case"ne":case"northeast":case"eastnorth":case"topright":return Xe([o,a]);case"center":return kn(e);case void 0:case null:case"centroid":return Cn(e);default:throw new Error("invalid origin")}}(e,n),1===t||r||mt(e,(function(e){var r=Mn(n,e),i=An(n,e),o=ct(Ln(n,r*t,i));e[0]=o[0],e[1]=o[1],3===e.length&&(e[2]*=t)})),e}var Bn=function(e,t,n){if(!ot(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!e)throw new Error("geojson required");if("number"!==typeof t||0===t)throw new Error("invalid factor");var o=Array.isArray(r)||"object"===typeof r;return!0!==i&&(e=Dn(e)),"FeatureCollection"!==e.type||o?zn(e,t,r):(yt(e,(function(n,i){e.features[i]=zn(n,t,r)})),e)},Un=n(138),Vn=n(139),jn={},qn=0,Gn=1,$n=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","user_type","overlay"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.2}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"],["!=","user_type","overlay"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.2}},{id:"gl-draw-overlay-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["==","user_type","overlay"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.01}},{id:"gl-draw-overlay-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"],["==","user_type","overlay"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.01}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","user_type","overlay"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":4,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":2,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-and-line-vertex-scale-icon",type:"symbol",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"],["has","heading"]],layout:{"icon-image":"scale","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-rotation-alignment":"map","icon-rotate":["get","heading"]},paint:{"icon-opacity":1,"icon-opacity-transition":{delay:0,duration:0}}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":4,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":2,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}},{id:"gl-draw-line-rotate-point",type:"line",filter:["all",["==","meta","midpoint"],["==","icon","rotate"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-rotate-point-stroke",type:"circle",filter:["all",["==","meta","midpoint"],["==","icon","rotate"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":4,"circle-color":"#fff"}},{id:"gl-draw-polygon-rotate-point",type:"circle",filter:["all",["==","meta","midpoint"],["==","icon","rotate"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":2,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-rotate-point-icon",type:"symbol",filter:["all",["==","meta","midpoint"],["==","icon","rotate"],["==","$type","Point"],["!=","mode","static"]],layout:{"icon-image":"rotate","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-rotation-alignment":"map","icon-rotate":["get","heading"]},paint:{"icon-opacity":1,"icon-opacity-transition":{delay:0,duration:0}}}];function Hn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qn;if(void 0==e||null==e)return t;if(e===qn||e===Gn)return e;if("center"==e)return qn;if("opposite"==e)return Gn;throw Error("Invalid SRCenter: "+e)}jn.onSetup=function(e){var t=this.getSelected()[0].id,n=this.getFeature(t);if(!n)throw new Error("You must provide a valid featureId to enter SRMode");if(n.type===y.k.POINT||n.type===y.k.MULTI_POINT)throw new TypeError("SRMode can not handle points");var r={featureId:t,feature:n,canTrash:void 0==e.canTrash||e.canTrash,canScale:void 0==e.canScale||e.canScale,canRotate:void 0==e.canRotate||e.canRotate,singleRotationPoint:void 0!=e.singleRotationPoint&&e.singleRotationPoint,rotationPointRadius:void 0!=e.rotationPointRadius?e.rotationPointRadius:1,rotatePivot:Hn(e.rotatePivot,qn),scaleCenter:Hn(e.scaleCenter,qn),canSelectFeatures:void 0==e.canSelectFeatures||e.canSelectFeatures,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};r.canRotate||r.canScale||console.warn("Non of canScale or canRotate is true"),this.setSelectedCoordinates(this.pathsToCoordinates(t,r.selectedCoordPaths)),this.setSelected(t),le.a.disable(this),this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:r.canTrash});var i=this;return this.map.loadImage(Un.default,(function(e,t){if(e)throw e;i.map.addImage("rotate",t)})),this.map.loadImage(Vn.default,(function(e,t){if(e)throw e;i.map.addImage("scale",t)})),r},jn.toDisplayFeatures=function(e,t,n){if(e.featureId===t.properties.id){t.properties.active=y.g.ACTIVE,n(t);var r=Object(se.a)(t,{map:this.map,midpoints:!1,selectedPaths:e.selectedCoordPaths});if(e.canScale&&(this.computeBisectrix(r),r.forEach(n)),e.canRotate)this.createRotationPoints(e,t,r).forEach(n)}else t.properties.active=y.g.INACTIVE,n(t);this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.canTrash})},jn.onStop=function(){le.a.enable(this),this.clearSelectedCoordinates()},jn.pathsToCoordinates=function(e,t){return t.map((function(t){return{feature_id:e,coord_path:t}}))},jn.computeBisectrix=function(e){for(var t=0;t<e.length;t++){var n=(t-1+e.length)%e.length,r=(t+1)%e.length,i=(Ye([e[n].geometry.coordinates,e[t].geometry.coordinates]),Ye([e[t].geometry.coordinates,e[r].geometry.coordinates]),(en(e[n].geometry.coordinates,e[t].geometry.coordinates)+en(e[r].geometry.coordinates,e[t].geometry.coordinates))/2);i<0&&(i+=360),i>360&&(i-=360),e[t].properties.heading=i}},jn._createRotationPoint=function(e,t,n,r,i,o){var a=rn(n,r).geometry.coordinates,s=en(i,a),u=Kt(i,a),l=tn(i,o*u,s,{}).geometry.coordinates;e.push({type:y.k.FEATURE,properties:{meta:y.m.MIDPOINT,icon:"rotate",parent:t,lng:l[0],lat:l[1],coord_path:n.properties.coord_path,heading:s},geometry:{type:y.k.POINT,coordinates:l}})},jn.createRotationPoints=function(e,t,n){var r=this,i=t.geometry,o=i.type,a=(i.coordinates,t.properties&&t.properties.id),s=[];if(o!==y.k.POINT&&o!==y.k.MULTI_POINT){var u=n.slice(0);u[u.length]=u[0];var l=null,c=this.computeRotationCenter(e,t);return e.singleRotationPoint?this._createRotationPoint(s,a,u[0],u[1],c,e.rotationPointRadius):u.forEach((function(t){null!=l&&r._createRotationPoint(s,a,l,t,c,e.rotationPointRadius),l=t})),s}},jn.startDragging=function(e,t){this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},jn.stopDragging=function(e){this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null};var Xn=ae.f(y.m.MIDPOINT),Wn=ae.f(y.m.VERTEX);jn.onTouchStart=jn.onMouseDown=function(e,t){return Wn(t)?this.onVertex(e,t):Xn(t)?this.onRotatePoint(e,t):ae.a(t)?this.onFeature(e,t):void 0};var Yn=1,Zn=2;jn.onVertex=function(e,t){this.computeAxes(e,e.feature.toGeoJSON()),this.startDragging(e,t);var n=t.featureTarget.properties;e.selectedCoordPaths=[n.coord_path],e.txMode=Yn},jn.onRotatePoint=function(e,t){this.computeAxes(e,e.feature.toGeoJSON()),this.startDragging(e,t);var n=t.featureTarget.properties;e.selectedCoordPaths=[n.coord_path],e.txMode=Zn},jn.onFeature=function(e,t){e.selectedCoordPaths=[],this.startDragging(e,t)},jn.coordinateIndex=function(e){if(e.length>=1){var t=e[0].split(".");return parseInt(t[t.length-1])}return 0},jn.computeRotationCenter=function(e,t){return kn(t)},jn.computeAxes=function(e,t){var n,r=this.computeRotationCenter(e,t);if(t.geometry.type===y.k.POLYGON)n=t.geometry.coordinates[0].slice(0);else if(t.geometry.type===y.k.MULTI_POLYGON){var i=[];t.geometry.coordinates.forEach((function(e){e.forEach((function(e){e.forEach((function(e){i.push(e)}))}))})),n=i}else if(t.geometry.type===y.k.LINE_STRING)n=t.geometry.coordinates;else if(t.geometry.type===y.k.MULTI_LINE_STRING){var o=[];t.geometry.coordinates.forEach((function(e){e.forEach((function(e){o.push(e)}))})),n=o}for(var a=n.length-1,s=Math.floor(a/2),u=[],l=[],c=0;c<a;c++){var h=c-1;h<0&&(h+=a);var f=n[h],p=n[c],d=rn(Xe(f),Xe(p)),g=r;if(Gn===e.rotatePivot){var m=(c+s)%a;(E=m-1)<0&&(E+=a);var v=n[E],_=n[m];g=rn(Xe(v),Xe(_))}u[c]=g.geometry.coordinates,l[c]=en(g,d)}e.rotation={feature0:t,centers:u,headings:l};for(var b=[],x=[],w=0;w<a;w++){var E,S=n[w],T=r.geometry.coordinates;if(Gn===e.scaleCenter)T=n[E=(w+s)%a];b[w]=T,x[w]=Kt(Xe(T),Xe(S),{units:"meters"})}e.scaling={feature0:t,centers:b,distances:x}},jn.onDrag=function(e,t){if(!0===e.canDragMove){e.dragMoving=!0,t.originalEvent.stopPropagation();var n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};if(e.selectedCoordPaths.length>0&&e.txMode)switch(e.txMode){case Zn:this.dragRotatePoint(e,t,n);break;case Yn:this.dragScalePoint(e,t,n)}else this.dragFeature(e,t,n);e.dragMoveLocation=t.lngLat}},jn.dragRotatePoint=function(e,t,n){if(void 0===e.rotation||null==e.rotation)throw new Error("state.rotation required");e.feature.toGeoJSON();var r=Xe([t.lngLat.lng,t.lngLat.lat]),i=e.rotation.centers.length,o=(this.coordinateIndex(e.selectedCoordPaths)+1)%i,a=Xe(e.rotation.centers[o]),s=en(a,r)-e.rotation.headings[o];ae.g(t)&&(s=5*Math.round(s/5));var u=Fn(e.rotation.feature0,s,{pivot:a,mutate:!1});e.feature.incomingCoords(u.geometry.coordinates),this.fireUpdate()},jn.dragScalePoint=function(e,t,n){if(void 0===e.scaling||null==e.scaling)throw new Error("state.scaling required");e.feature.toGeoJSON();var r=this.coordinateIndex(e.selectedCoordPaths),i=e.scaling.centers[r],o=Xe(i),a=Xe([t.lngLat.lng,t.lngLat.lat]),s=Kt(o,a,{units:"meters"})/e.scaling.distances[r];ae.g(t)&&(s=.05*Math.round(s/.05));var u=Bn(e.scaling.feature0,s,{origin:i,mutate:!1});e.feature.incomingCoords(u.geometry.coordinates),this.fireUpdate()},jn.dragFeature=function(e,t,n){Object(ce.a)(this.getSelected(),n),e.dragMoveLocation=t.lngLat,this.fireUpdate()},jn.fireUpdate=function(){this.map.fire(y.j.UPDATE,{action:y.q.CHANGE_COORDINATES,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},jn.onMouseOut=function(e){e.dragMoving&&this.fireUpdate()},jn.onTouchEnd=jn.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)},jn.clickActiveFeature=function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},jn.onClick=function(e,t){return ae.j(t)?this.clickNoTarget(e,t):ae.a(t)?this.clickActiveFeature(e,t):ae.e(t)?this.clickInactive(e,t):void this.stopDragging(e)},jn.clickNoTarget=function(e,t){e.canSelectFeatures&&this.changeMode(y.n.SIMPLE_SELECT)},jn.clickInactive=function(e,t){e.canSelectFeatures&&this.changeMode(y.n.SIMPLE_SELECT,{featureIds:[t.featureTarget.properties.id]})},jn.onTrash=function(){this.deleteFeature(this.getSelectedIds())};var Jn=n(10);var Kn=6378137;function Qn(e){var t,n=0;switch(e.type){case"Polygon":return er(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=er(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(t=0;t<e.geometries.length;t++)n+=Qn(e.geometries[t]);return n}}function er(e){var t=0;if(e&&e.length>0){t+=Math.abs(tr(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(tr(e[n]))}return t}function tr(e){var t,n,r,i,o,a,s=0,u=e.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),t=e[r],n=e[i],s+=(nr(e[o][0])-nr(t[0]))*Math.sin(nr(n[1]));s=s*Kn*Kn/2}return s}function nr(e){return e*Math.PI/180}var rr=function(e){return function(e,t,n){var r=n;return vt(e,(function(e,i,o,a,s){r=0===i&&void 0===n?e:t(r,e,i,o,a,s)})),r}(e,(function(e,t){return e+Qn(t)}),0)};function ir(e){switch(e.type){case"Polygon":return rr(e)>1?e:null;case"MultiPolygon":var t=[];if(_t(e,(function(e){rr(e)>1&&t.push(e.geometry.coordinates)})),t.length)return{type:"MultiPolygon",coordinates:t}}}var or=function(e,t){var n=ft(e),r=ft(t),i=e.properties||{};if(n=ir(n),r=ir(r),!n)return null;if(!r)return He(n,i);var o=new Jn.GeoJSONReader,a=o.read(n),s=o.read(r),u=Jn.OverlayOp.difference(a,s);return u.isEmpty()?null:He((new Jn.GeoJSONWriter).write(u),i)},ar={onSetup:function(){var e=this.getSelected().filter((function(e){return"Polygon"===e.type||"MultiPolygon"===e.type})).map((function(e){return e.toGeoJSON()}));if(e.length<1)throw new Error("Please select a feature/features (Polygon or MultiPolygon) to split!");return{main:e}},toDisplayFeatures:function(e,t,n){var r=this;n(t),this.changeMode("passing_mode_polygon",(function(t){e.main.forEach((function(e,n){if(e.geometry.type===y.k.POLYGON||e.geometry.type===y.k.MULTI_POLYGON){var i=or(e,t),o=r.newFeature(i);o.id=e.id,r.addFeature(o)}else console.info("The feature is not Polygon/MultiPolygon!")}))}))}},sr=ar;function ur(e){var t=e[0],n=e[1];return[n[0]-t[0],n[1]-t[1]]}function lr(e,t){return e[0]*t[1]-t[0]*e[1]}function cr(e,t){return!function(e,t){return 0===lr(ur(e),ur(t))}(e,t)&&function(e,t){var n,r,i=e[0],o=ur(e),a=t[0],s=ur(t),u=lr(o,s);return function(e,t){return[e[0]+t[0],e[1]+t[1]]}(i,function(e,t){return[e*t[0],e*t[1]]}(lr((r=i,[(n=a)[0]-r[0],n[1]-r[1]]),s)/u,o))}(e,t)}function hr(e,t,n){var r=[],i=function(e,t){return tt(et(e,t))}(t,n),o=ct(e),a=[];return o.forEach((function(e,t){if(t!==o.length-1){var n=function(e,t,n){var r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),i=e[0]+n*(t[1]-e[1])/r,o=t[0]+n*(t[1]-e[1])/r,a=e[1]+n*(e[0]-t[0])/r,s=t[1]+n*(e[0]-t[0])/r;return[[i,a],[o,s]]}(e,o[t+1],i);if(r.push(n),t>0){var s=r[t-1],u=cr(n,s);!1!==u&&(s[1]=u,n[0]=u),a.push(s[0]),t===o.length-2&&(a.push(n[0]),a.push(n[1]))}2===o.length&&(a.push(n[0]),a.push(n[1]))}})),Ye(a,e.properties)}var fr=function(e,t,n){if(!ot(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!e)throw new Error("geojson is required");if(void 0===t||null===t||isNaN(t))throw new Error("distance is required");var i=pt(e),o=e.properties;switch(i){case"LineString":return hr(e,t,r);case"MultiLineString":var a=[];return _t(e,(function(e){a.push(hr(e,t,r).geometry.coordinates)})),Je(a,o);default:throw new Error("geometry "+i+" is not supported")}};function pr(e,t,n,r){t=t||e.properties||{};var i=ct(e),o=pt(e);if(!i.length)throw new Error("line must contain coordinates");switch(o){case"LineString":return n&&(i=dr(i)),We([i],t);case"MultiLineString":var a=[],s=0;return i.forEach((function(e){if(n&&(e=dr(e)),r){var t=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.abs(t-r)*Math.abs(n-i)}(Tn(Ye(e)));t>s?(a.unshift(e),s=t):a.push(e)}else a.push(e)})),We(a,t);default:throw new Error("geometry type "+o+" is not supported")}}function dr(e){var t=e[0],n=t[0],r=t[1],i=e[e.length-1],o=i[0],a=i[1];return n===o&&r===a||e.push(t),e}var gr=function(e,t){if(!ot(t=t||{}))throw new Error("options is invalid");var n=t.properties,r=t.autoComplete,i=t.orderCoords;if(!e)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,pt(e)){case"FeatureCollection":case"GeometryCollection":var o=[];return(e.features?e.features:e.geometries).forEach((function(e){o.push(ct(pr(e,{},r,i)))})),Ke(o,n)}return pr(e,n,r,i)},mr={onSetup:function(){var e=this.getSelected().filter((function(e){return"Polygon"===e.type||"MultiPolygon"===e.type})).map((function(e){return e.toGeoJSON()}));if(e.length<1)throw new Error("Please select a feature/features (Polygon or MultiPolygon) to split!");return{main:e}}};mr.toDisplayFeatures=function(e,t,n){var r=this;n(t),this.changeMode("passing_mode_line_string",(function(t){e.main.forEach((function(e){if(Jt(e,t))throw new Error("Line must be outside of Polygon");var n=function(e,t,n){var r,i,o,a,s,u,l="kilometers",c=.001,h=[],f=[],p=null;if("Polygon"!=e.type&&"MultiPolygon"!=e.type||"LineString"!=t.type)return p;"undefined"===typeof n&&(n="");if(0==$t(e,t).features.length)return p;if(Jt(t,e))return p;for(f[0]=fr(t,c,{units:l}),f[1]=fr(t,-c,{units:l}),r=0;r<=1;r++){for(o=r,(r+1)%2,h=[],i=0;i<t.coordinates.length;i++)h.push(t.coordinates[i]);for(i=f[o].geometry.coordinates.length-1;i>=0;i--)h.push(f[o].geometry.coordinates[i]);h.push(t.coordinates[0]),a=Ye(h),s=gr(a),u=or(e,s)}return u}(e.geometry,t.geometry,"piece-");n.id=e.id,r._ctx.api.add(n)}))}))};var yr=mr;var vr=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];if(Kt(e.slice(0,2),[r,n])>=Kt(e.slice(0,2),[t,i])){var o=(n+i)/2;return[t,o-(r-t)/2,r,o+(r-t)/2]}var a=(t+r)/2;return[a-(i-n)/2,n,a+(i-n)/2,i]};var _r=function(e,t){if(!ot(t=t||{}))throw new Error("options is invalid");var n=t.precision,r=t.coordinates,i=t.mutate;if(n=void 0===n||null===n||isNaN(n)?6:n,r=void 0===r||null===r||isNaN(r)?3:r,!e)throw new Error("<geojson> is required");if("number"!==typeof n)throw new Error("<precision> must be a number");if("number"!==typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(e=JSON.parse(JSON.stringify(e)));var o=Math.pow(10,n);return mt(e,(function(e){!function(e,t,n){e.length>n&&e.splice(n,e.length);for(var r=0;r<e.length;r++)e[r]=Math.round(e[r]*t)/t}(e,o,r)})),e};function br(e,t){var n=[],r=jt();return _t(t,(function(t){if(n.forEach((function(e,t){e.id=t})),n.length){var i=r.search(t);if(i.features.length){var o=wr(t,i);n=n.filter((function(e){return e.id!==o.id})),r.remove(o),yt(xr(o,t),(function(e){n.push(e),r.insert(e)}))}}else(n=xr(e,t).features).forEach((function(e){e.bbox||(e.bbox=vr(Tn(e)))})),r.load(Ze(n))})),Ze(n)}function xr(e,t){var n=[],r=ct(e)[0],i=ct(e)[e.geometry.coordinates.length-1];if(Er(r,lt(t))||Er(i,lt(t)))return Ze([e]);var o=jt(),a=qt(e);o.load(a);var s=o.search(t);if(!s.features.length)return Ze([e]);var u=wr(t,s),l=function(e,t,n){var r=n;return yt(e,(function(e,i){r=0===i&&void 0===n?e:t(r,e,i)})),r}(a,(function(e,r,i){var o=ct(r)[1],a=lt(t);return i===u.id?(e.push(a),n.push(Ye(e)),Er(a,o)?[a]:[a,o]):(e.push(o),e)}),[r]);return l.length>1&&n.push(Ye(l)),Ze(n)}function wr(e,t){if(!t.features.length)throw new Error("lines must contain features");if(1===t.features.length)return t.features[0];var n,r=1/0;return yt(t,(function(t){var i=nn(t,e).properties.dist;i<r&&(n=t,r=i)})),n}function Er(e,t){return e[0]===t[0]&&e[1]===t[1]}var Sr=function(e,t){if(!e)throw new Error("line is required");if(!t)throw new Error("splitter is required");var n=pt(e),r=pt(t);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=_r(t,{precision:7});switch(r){case"Point":return xr(e,i);case"MultiPoint":return br(e,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return br(e,$t(e,i))}};var Tr=function(e){var t={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},n=Object.keys(t).reduce((function(e,t){return e[t.replace("Multi","")]=t,e}),{});function r(e,n,r){r?t[n].coordinates=t[n].coordinates.concat(e.geometry.coordinates):t[n].coordinates.push(e.geometry.coordinates),t[n].properties.push(e.properties)}return yt(e,(function(e){e.geometry&&(t[e.geometry.type]?r(e,e.geometry.type,!0):n[e.geometry.type]&&r(e,n[e.geometry.type],!1))})),Ze(Object.keys(t).filter((function(e){return t[e].coordinates.length})).sort().map((function(e){return He({type:e,coordinates:t[e].coordinates},{collectedProperties:t[e].properties})})))};var kr=function(e){if(!e)throw new Error("geojson is required");var t=[];return _t(e,(function(e){t.push(e)})),Ze(t)},Cr={onSetup:function(e){var t=e.spliter,n=this.getSelected().map((function(e){return e.toGeoJSON()}));if(n.length<1)throw new Error("Please select a Linestring/MultiLinestring!");return{main:n,spliter:"passing_mode_".concat(t)}},toDisplayFeatures:function(e,t,n){var r=this;n(t),this.changeMode(e.spliter,(function(t){e.main.forEach((function(e,n){var i=[];kr(e).features.forEach((function(e){if(e.geometry.type!==y.k.LINE_STRING&&e.geometry.type!==y.k.MULTI_LINE_STRING)throw new Error("The feature is not Linestring/MultiLinestring!");var n=Sr(e,t);n.features.length<1?i.push(Ze([e])):i.push(n)}));var o=Ze(i.flatMap((function(e){return e.features}))),a=Tr(o).features[0];a.id=e.id,r._ctx.api.add(a)}))}))}},Ir=n(140),Ar=n(172),Mr=n(174),Lr=n(175);function Nr(e){var t,n,r,i,o,a=ct(e);if(2===a.length&&(t=a[0],n=a[1],t[0]!==n[0]||t[1]!==n[1]))return a;var s=[],u=a.length-1;s.push(a[0]);for(var l=1;l<u;l++)r=a[l-1],i=a[l],Pr(r,o=a[l+1],i)||s.push(i);return s.push(o),s}function Pr(e,t,n){var r=n[0],i=n[1],o=e[0],a=e[1],s=t[0],u=t[1],l=s-o,c=u-a;return 0===(r-o)*c-(i-a)*l&&(Math.abs(l)>=Math.abs(c)?l>0?o<=r&&r<=s:s<=r&&r<=o:c>0?a<=i&&i<=u:u<=i&&i<=a)}var Or=function(e,t){var n="object"===typeof t?t.mutate:t;if(!e)throw new Error("geojson is required");var r=pt(e),i=[];switch(r){case"LineString":i=Nr(e);break;case"MultiLineString":case"Polygon":ct(e).forEach((function(e){i.push(Nr(e))}));break;case"MultiPolygon":ct(e).forEach((function(e){var t=[];e.forEach((function(e){t.push(Nr(e))})),i.push(t)}));break;case"Point":return e;case"MultiPoint":var o={};ct(e).forEach((function(e){var t=e.join("-");o.hasOwnProperty(t)||(i.push(e),o[t]=!0)}));break;default:throw new Error(r+" geometry not supported")}return e.coordinates?!0===n?(e.coordinates=i,e):{type:r,coordinates:i}:!0===n?(e.geometry.coordinates=i,e):He({type:r,coordinates:i},e.properties,e.bbox,e.id)};function Rr(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function Dr(e,t,n){var r=t.x,i=t.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((e.x-r)*o+(e.y-i)*a)/(o*o+a*a);s>1?(r=n.x,i=n.y):s>0&&(r+=o*s,i+=a*s)}return(o=e.x-r)*o+(a=e.y-i)*a}function Fr(e,t,n,r,i){for(var o,a=r,s=t+1;s<n;s++){var u=Dr(e[s],e[t],e[n]);u>a&&(o=s,a=u)}a>r&&(o-t>1&&Fr(e,t,o,r,i),i.push(e[o]),n-o>1&&Fr(e,o,n,r,i))}function zr(e,t){var n=e.length-1,r=[e[0]];return Fr(e,0,n,t,r),r.push(e[n]),r}function Br(e,t,n){if(e.length<=2)return e;var r=void 0!==t?t*t:1;return e=zr(e=n?e:function(e,t){for(var n,r=e[0],i=[r],o=1,a=e.length;o<a;o++)Rr(n=e[o],r)>t&&(i.push(n),r=n);return r!==n&&i.push(n),i}(e,r),r)}function Ur(e,t,n){return Br(e.map((function(e){return{x:e[0],y:e[1],z:e[2]}})),t,n).map((function(e){return e.z?[e.x,e.y,e.z]:[e.x,e.y]}))}function Vr(e,t,n){return e.map((function(e){var r=e.map((function(e){return{x:e[0],y:e[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var i=Br(r,t,n).map((function(e){return[e.x,e.y]}));!jr(i);)i=Br(r,t-=.01*t,n).map((function(e){return[e.x,e.y]}));return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i}))}function jr(e){return!(e.length<3)&&!(3===e.length&&e[2][0]===e[0][0]&&e[2][1]===e[0][1])}var qr=function(e,t){if(!ot(t=t||{}))throw new Error("options is invalid");var n=void 0!==t.tolerance?t.tolerance:1,r=t.highQuality||!1,i=t.mutate||!1;if(!e)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(e=Dn(e)),vt(e,(function(e){!function(e,t,n){var r=e.type;if("Point"===r||"MultiPoint"===r)return e;Or(e,!0);var i=e.coordinates;switch(r){case"LineString":e.coordinates=Ur(i,t,n);break;case"MultiLineString":e.coordinates=i.map((function(e){return Ur(e,t,n)}));break;case"Polygon":e.coordinates=Vr(i,t,n);break;case"MultiPolygon":e.coordinates=i.map((function(e){return Vr(e,t,n)}))}}(e,n,r)})),e},Gr=Object.assign({},be);Gr.onSetup=function(){var e=this,t=this.newFeature({type:y.k.FEATURE,properties:{},geometry:{type:y.k.POLYGON,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),le.a.disable(this),setTimeout((function(){e.map&&e.map.dragPan&&e.map.dragPan.disable()}),0),this.updateUIClasses({mouse:y.i.ADD}),this.activateUIButton(y.p.POLYGON),this.setActionableState({trash:!0}),{polygon:t,currentVertexPosition:0,dragMoving:!1}},Gr.onDrag=Gr.onTouchMove=function(e,t){e.dragMoving=!0,this.updateUIClasses({mouse:y.i.ADD}),e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat)},Gr.onMouseUp=function(e,t){if(e.dragMoving){var n=3/(150*(this.map.getZoom()-4))-.001;qr(e.polygon,{mutate:!0,tolerance:n,highQuality:!0}),this.fireUpdate(),this.changeMode(y.n.SIMPLE_SELECT,{featureIds:[e.polygon.id]})}},Gr.onTouchEnd=function(e,t){this.onMouseUp(e,t)},Gr.fireUpdate=function(){this.map.fire(y.j.UPDATE,{action:y.q.MOVE,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})};var $r=Gr,Hr=n(60),Xr=n.n(Hr),Wr=n(94),Yr=n.n(Wr);var Zr=function(){for(var e=new Jn.GeoJSONReader,t=e.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)t=Jn.UnionOp.union(t,e.read(JSON.stringify(arguments[n].geometry)));var r=new Jn.GeoJSONWriter;return{type:"Feature",geometry:t=r.write(t),properties:arguments[0].properties}};function Jr(e,t,n){if(!ot(n=n||{}))throw new Error("options is invalid");var r=n.mutate;if(!e)throw new Error("geojson is required");return Array.isArray(e)&&it(e[0])?e="mercator"===t?Kr(e):Qr(e):(!0!==r&&(e=Dn(e)),mt(e,(function(e){var n="mercator"===t?Kr(e):Qr(e);e[0]=n[0],e[1]=n[1]}))),e}function Kr(e){var t,n=Math.PI/180,r=6378137,i=20037508.342789244,o=[r*(Math.abs(e[0])<=180?e[0]:e[0]-360*((t=e[0])<0?-1:t>0?1:0))*n,r*Math.log(Math.tan(.25*Math.PI+.5*e[1]*n))];return o[0]>i&&(o[0]=i),o[0]<-i&&(o[0]=-i),o[1]>i&&(o[1]=i),o[1]<-i&&(o[1]=-i),o}function Qr(e){var t=180/Math.PI,n=6378137;return[e[0]*t/n,(.5*Math.PI-2*Math.atan(Math.exp(-e[1]/n)))*t]}var ei=function(){return new ti};function ti(){this.reset()}ti.prototype={constructor:ti,reset:function(){this.s=this.t=0},add:function(e){ri(ni,e,this.t),ri(this,ni.s,this.s),this.s?this.t+=ni.t:this.s=ni.t},valueOf:function(){return this.s}};var ni=new ti;function ri(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}var ii=1e-6,oi=Math.PI,ai=oi/2,si=oi/4,ui=2*oi,li=180/oi,ci=oi/180,hi=Math.abs,fi=Math.atan,pi=Math.atan2,di=Math.cos,gi=(Math.ceil,Math.exp),mi=(Math.floor,Math.log),yi=(Math.pow,Math.sin),vi=(Math.sign,Math.sqrt),_i=Math.tan;function bi(e){return e>1?0:e<-1?oi:Math.acos(e)}function xi(e){return e>1?ai:e<-1?-ai:Math.asin(e)}function wi(){}function Ei(e,t){e&&Ti.hasOwnProperty(e.type)&&Ti[e.type](e,t)}var Si={Feature:function(e,t){Ei(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Ei(n[r].geometry,t)}},Ti={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ki(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ki(n[r],t,0)},Polygon:function(e,t){Ci(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Ci(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Ei(n[r],t)}};function ki(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Ci(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ki(e[n],t,1);t.polygonEnd()}var Ii=function(e,t){e&&Si.hasOwnProperty(e.type)?Si[e.type](e,t):Ei(e,t)};ei(),ei();function Ai(e){return[pi(e[1],e[0]),xi(e[2])]}function Mi(e){var t=e[0],n=e[1],r=di(n);return[r*di(t),r*yi(t),yi(n)]}function Li(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ni(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Pi(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Oi(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Ri(e){var t=vi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}ei();var Di=function(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n};function Fi(e,t){return[e>oi?e-ui:e<-oi?e+ui:e,t]}function zi(e,t,n){return(e%=ui)?t||n?Di(Ui(e),Vi(t,n)):Ui(e):t||n?Vi(t,n):Fi}function Bi(e){return function(t,n){return[(t+=e)>oi?t-ui:t<-oi?t+ui:t,n]}}function Ui(e){var t=Bi(e);return t.invert=Bi(-e),t}function Vi(e,t){var n=di(e),r=yi(e),i=di(t),o=yi(t);function a(e,t){var a=di(t),s=di(e)*a,u=yi(e)*a,l=yi(t),c=l*n+s*r;return[pi(u*i-c*o,s*n-l*r),xi(c*i+u*o)]}return a.invert=function(e,t){var a=di(t),s=di(e)*a,u=yi(e)*a,l=yi(t),c=l*i-u*o;return[pi(u*i+l*o,s*n+c*r),xi(c*n-s*r)]},a}Fi.invert=Fi;function ji(e,t,n,r,i,o){if(n){var a=di(t),s=yi(t),u=r*n;null==i?(i=t+r*ui,o=t-u/2):(i=qi(a,i),o=qi(a,o),(r>0?i<o:i>o)&&(i+=r*ui));for(var l,c=i;r>0?c>o:c<o;c-=u)l=Ai([a,-s*di(c),-s*yi(c)]),e.point(l[0],l[1])}}function qi(e,t){(t=Mi(t))[0]-=e,Ri(t);var n=bi(-t[1]);return((-t[2]<0?-n:n)+ui-ii)%ui}var Gi=function(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:wi,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}},$i=function(e,t){return hi(e[0]-t[0])<ii&&hi(e[1]-t[1])<ii};function Hi(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var Xi=function(e,t,n,r,i){var o,a,s=[],u=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],a=e[t];if($i(r,a)){for(i.lineStart(),o=0;o<t;++o)i.point((r=e[o])[0],r[1]);i.lineEnd()}else s.push(n=new Hi(r,e,null,!0)),u.push(n.o=new Hi(r,null,n,!1)),s.push(n=new Hi(a,e,null,!1)),u.push(n.o=new Hi(a,null,n,!0))}})),s.length){for(u.sort(t),Wi(s),Wi(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}};function Wi(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}var Yi=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};var Zi=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return Yi(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}(Yi);Zi.right,Zi.left;var Ji=Array.prototype;Ji.slice,Ji.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var Ki=function(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--a]=r[t];return n};var Qi=1e9,eo=-Qi;function to(e,t,n,r){function i(i,o){return e<=i&&i<=n&&t<=o&&o<=r}function o(i,o,s,l){var c=0,h=0;if(null==i||(c=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+s+4)%4)!==h);else l.point(o[0],o[1])}function a(r,i){return hi(r[0]-e)<ii?i>0?0:3:hi(r[0]-n)<ii?i>0?2:1:hi(r[1]-t)<ii?i>0?1:0:i>0?3:2}function s(e,t){return u(e.x,t.x)}function u(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var u,l,c,h,f,p,d,g,m,y,v,_=a,b=Gi(),x={point:w,lineStart:function(){x.point=E,l&&l.push(c=[]);y=!0,m=!1,d=g=NaN},lineEnd:function(){u&&(E(h,f),p&&m&&b.rejoin(),u.push(b.result()));x.point=w,m&&_.lineEnd()},polygonStart:function(){_=b,u=[],l=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,h=s[0],f=h[0],p=h[1];u<c;++u)o=f,a=p,f=(h=s[u])[0],p=h[1],a<=r?p>r&&(f-o)*(r-a)>(p-a)*(e-o)&&++t:p<=r&&(f-o)*(r-a)<(p-a)*(e-o)&&--t;return t}(),n=v&&t,i=(u=Ki(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Xi(u,s,t,o,a),a.polygonEnd());_=a,u=l=c=null}};function w(e,t){i(e,t)&&_.point(e,t)}function E(o,a){var s=i(o,a);if(l&&c.push([o,a]),y)h=o,f=a,p=s,y=!1,s&&(_.lineStart(),_.point(o,a));else if(s&&m)_.point(o,a);else{var u=[d=Math.max(eo,Math.min(Qi,d)),g=Math.max(eo,Math.min(Qi,g))],b=[o=Math.max(eo,Math.min(Qi,o)),a=Math.max(eo,Math.min(Qi,a))];!function(e,t,n,r,i,o){var a,s=e[0],u=e[1],l=0,c=1,h=t[0]-s,f=t[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}return l>0&&(e[0]=s+l*h,e[1]=u+l*f),c<1&&(t[0]=s+c*h,t[1]=u+c*f),!0}}}}}(u,b,e,t,n,r)?s&&(_.lineStart(),_.point(o,a),v=!1):(m||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),s||_.lineEnd(),v=!1)}d=o,g=a,m=s}return x}}var no=ei(),ro=function(e,t){var n=t[0],r=t[1],i=[yi(n),-di(n),0],o=0,a=0;no.reset();for(var s=0,u=e.length;s<u;++s)if(c=(l=e[s]).length)for(var l,c,h=l[c-1],f=h[0],p=h[1]/2+si,d=yi(p),g=di(p),m=0;m<c;++m,f=v,d=b,g=x,h=y){var y=l[m],v=y[0],_=y[1]/2+si,b=yi(_),x=di(_),w=v-f,E=w>=0?1:-1,S=E*w,T=S>oi,k=d*b;if(no.add(pi(k*E*yi(S),g*x+k*di(S))),o+=T?w+E*ui:w,T^f>=n^v>=n){var C=Ni(Mi(h),Mi(y));Ri(C);var I=Ni(i,C);Ri(I);var A=(T^w>=0?-1:1)*xi(I[2]);(r>A||r===A&&(C[0]||C[1]))&&(a+=T^w>=0?1:-1)}}return(o<-ii||o<ii&&no<-ii)^1&a};ei();var io=function(e){return e};ei(),ei();var oo=1/0,ao=oo,so=-oo,uo=so;var lo={point:function(e,t){e<oo&&(oo=e);e>so&&(so=e);t<ao&&(ao=t);t>uo&&(uo=t)},lineStart:wi,lineEnd:wi,polygonStart:wi,polygonEnd:wi,result:function(){var e=[[oo,ao],[so,uo]];return so=uo=-(ao=oo=1/0),e}};function co(e){this._context=e}co.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ui)}},result:wi};ei();function ho(){this._string=[]}function fo(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}ho.prototype={_radius:4.5,_circle:fo(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=fo(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var po=function(e,t,n,r){return function(i,o){var a,s,u,l=t(o),c=i.invert(r[0],r[1]),h=Gi(),f=t(h),p=!1,d={point:g,lineStart:y,lineEnd:v,polygonStart:function(){d.point=_,d.lineStart=b,d.lineEnd=x,s=[],a=[]},polygonEnd:function(){d.point=g,d.lineStart=y,d.lineEnd=v,s=Ki(s);var e=ro(a,c);s.length?(p||(o.polygonStart(),p=!0),Xi(s,mo,e,n,o)):e&&(p||(o.polygonStart(),p=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&o.point(t,n)}function m(e,t){var n=i(e,t);l.point(n[0],n[1])}function y(){d.point=m,l.lineStart()}function v(){d.point=g,l.lineEnd()}function _(e,t){u.push([e,t]);var n=i(e,t);f.point(n[0],n[1])}function b(){f.lineStart(),u=[]}function x(){_(u[0][0],u[0][1]),f.lineEnd();var e,t,n,r,i=f.clean(),l=h.result(),c=l.length;if(u.pop(),a.push(u),u=null,c)if(1&i){if((t=(n=l[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),e=0;e<t;++e)o.point((r=n[e])[0],r[1]);o.lineEnd()}}else c>1&&2&i&&l.push(l.pop().concat(l.shift())),s.push(l.filter(go))}return d}};function go(e){return e.length>1}function mo(e,t){return((e=e.x)[0]<0?e[1]-ai-ii:ai-e[1])-((t=t.x)[0]<0?t[1]-ai-ii:ai-t[1])}var yo=po((function(){return!0}),(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?oi:-oi,u=hi(o-n);hi(u-oi)<ii?(e.point(n,r=(r+a)/2>0?ai:-ai),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&u>=oi&&(hi(n-i)<ii&&(n-=i*ii),hi(o-s)<ii&&(o-=s*ii),r=function(e,t,n,r){var i,o,a=yi(e-n);return hi(a)>ii?fi((yi(t)*(o=di(r))*yi(n)-yi(r)*(i=di(t))*yi(e))/(i*o*a)):(t+r)/2}(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*ai,r.point(-oi,i),r.point(0,i),r.point(oi,i),r.point(oi,0),r.point(oi,-i),r.point(0,-i),r.point(-oi,-i),r.point(-oi,0),r.point(-oi,i);else if(hi(e[0]-t[0])>ii){var o=e[0]<t[0]?oi:-oi;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}),[-oi,-ai]);var vo=function(e,t){var n=di(e),r=n>0,i=hi(n)>ii;function o(e,t){return di(e)*di(t)>n}function a(e,t,r){var i=[1,0,0],o=Ni(Mi(e),Mi(t)),a=Li(o,o),s=o[0],u=a-s*s;if(!u)return!r&&e;var l=n*a/u,c=-n*s/u,h=Ni(i,o),f=Oi(i,l);Pi(f,Oi(o,c));var p=h,d=Li(f,p),g=Li(p,p),m=d*d-g*(Li(f,f)-1);if(!(m<0)){var y=vi(m),v=Oi(p,(-d-y)/g);if(Pi(v,f),v=Ai(v),!r)return v;var _,b=e[0],x=t[0],w=e[1],E=t[1];x<b&&(_=b,b=x,x=_);var S=x-b,T=hi(S-oi)<ii;if(!T&&E<w&&(_=w,w=E,E=_),T||S<ii?T?w+E>0^v[1]<(hi(v[0]-b)<ii?w:E):w<=v[1]&&v[1]<=E:S>oi^(b<=v[0]&&v[0]<=x)){var k=Oi(p,(-d+y)/g);return Pi(k,f),[v,Ai(k)]}}}function s(t,n){var i=r?e:oi-e,o=0;return t<-i?o|=1:t>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return po(o,(function(e){var t,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var p,d=[h,f],g=o(h,f),m=r?g?0:s(h,f):g?s(h+(h<0?oi:-oi),f):0;if(!t&&(l=u=g)&&e.lineStart(),g!==u&&(!(p=a(t,d))||$i(t,p)||$i(d,p))&&(d[0]+=ii,d[1]+=ii,g=o(d[0],d[1])),g!==u)c=0,g?(e.lineStart(),p=a(d,t),e.point(p[0],p[1])):(p=a(t,d),e.point(p[0],p[1]),e.lineEnd()),t=p;else if(i&&t&&r^g){var y;m&n||!(y=a(d,t,!0))||(c=0,r?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1])))}!g||t&&$i(t,d)||e.point(d[0],d[1]),t=d,u=g,n=m},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return c|(l&&u)<<1}}}),(function(n,r,i,o){ji(o,e,t,i,n,r)}),r?[0,-e]:[-oi,e-oi])};function _o(e){return function(t){var n=new bo;for(var r in e)n[r]=e[r];return n.stream=t,n}}function bo(){}function xo(e,t,n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),null!=o&&e.clipExtent(null),Ii(n,e.stream(lo));var a=lo.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+t[0][0]+(r-s*(a[1][0]+a[0][0]))/2,l=+t[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&e.clipExtent(o),e.scale(150*s).translate([u,l])}function wo(e,t,n){return xo(e,[[0,0],t],n)}bo.prototype={constructor:bo,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Eo=di(30*ci),So=function(e,t){return+t?function(e,t){function n(r,i,o,a,s,u,l,c,h,f,p,d,g,m){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*t&&g--){var b=a+f,x=s+p,w=u+d,E=vi(b*b+x*x+w*w),S=xi(w/=E),T=hi(hi(w)-1)<ii||hi(o-h)<ii?(o+h)/2:pi(x,b),k=e(T,S),C=k[0],I=k[1],A=C-r,M=I-i,L=v*A-y*M;(L*L/_>t||hi((y*A+v*M)/_-.5)>.3||a*f+s*p+u*d<Eo)&&(n(r,i,o,a,s,u,C,I,T,b/=E,x/=E,w,g,m),m.point(C,I),n(C,I,T,b,x,w,l,c,h,f,p,d,g,m))}}return function(t){var r,i,o,a,s,u,l,c,h,f,p,d,g={point:m,lineStart:y,lineEnd:_,polygonStart:function(){t.polygonStart(),g.lineStart=b},polygonEnd:function(){t.polygonEnd(),g.lineStart=y}};function m(n,r){n=e(n,r),t.point(n[0],n[1])}function y(){c=NaN,g.point=v,t.lineStart()}function v(r,i){var o=Mi([r,i]),a=e(r,i);n(c,h,l,f,p,d,c=a[0],h=a[1],l=r,f=o[0],p=o[1],d=o[2],16,t),t.point(c,h)}function _(){g.point=m,t.lineEnd()}function b(){y(),g.point=x,g.lineEnd=w}function x(e,t){v(r=e,t),i=c,o=h,a=f,s=p,u=d,g.point=v}function w(){n(c,h,l,f,p,d,i,o,r,a,s,u,16,t),g.lineEnd=_,_()}return g}}(e,t):function(e){return _o({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)};var To=_o({point:function(e,t){this.stream.point(e*ci,t*ci)}});function ko(e){return Co((function(){return e}))()}function Co(e){var t,n,r,i,o,a,s,u,l,c,h=150,f=480,p=250,d=0,g=0,m=0,y=0,v=0,_=null,b=yo,x=null,w=io,E=.5,S=So(C,E);function T(e){return[(e=o(e[0]*ci,e[1]*ci))[0]*h+n,r-e[1]*h]}function k(e){return(e=o.invert((e[0]-n)/h,(r-e[1])/h))&&[e[0]*li,e[1]*li]}function C(e,i){return[(e=t(e,i))[0]*h+n,r-e[1]*h]}function I(){o=Di(i=zi(m,y,v),t);var e=t(d,g);return n=f-e[0]*h,r=p+e[1]*h,A()}function A(){return l=c=null,T}return T.stream=function(e){return l&&c===e?l:l=To(b(i,S(w(c=e))))},T.clipAngle=function(e){return arguments.length?(b=+e?vo(_=e*ci,6*ci):(_=null,yo),A()):_*li},T.clipExtent=function(e){return arguments.length?(w=null==e?(x=a=s=u=null,io):to(x=+e[0][0],a=+e[0][1],s=+e[1][0],u=+e[1][1]),A()):null==x?null:[[x,a],[s,u]]},T.scale=function(e){return arguments.length?(h=+e,I()):h},T.translate=function(e){return arguments.length?(f=+e[0],p=+e[1],I()):[f,p]},T.center=function(e){return arguments.length?(d=e[0]%360*ci,g=e[1]%360*ci,I()):[d*li,g*li]},T.rotate=function(e){return arguments.length?(m=e[0]%360*ci,y=e[1]%360*ci,v=e.length>2?e[2]%360*ci:0,I()):[m*li,y*li,v*li]},T.precision=function(e){return arguments.length?(S=So(C,E=e*e),A()):vi(E)},T.fitExtent=function(e,t){return xo(T,e,t)},T.fitSize=function(e,t){return wo(T,e,t)},function(){return t=e.apply(this,arguments),T.invert=t.invert&&k,I()}}function Io(e){return function(t,n){var r=di(t),i=di(n),o=e(r*i);return[o*i*yi(t),o*yi(n)]}}function Ao(e){return function(t,n){var r=vi(t*t+n*n),i=e(r),o=yi(i),a=di(i);return[pi(t*o,r*a),xi(r&&n*o/r)]}}var Mo=Io((function(e){return vi(2/(1+e))}));Mo.invert=Ao((function(e){return 2*xi(e/2)}));var Lo=Io((function(e){return(e=bi(e))&&e/yi(e)}));Lo.invert=Ao((function(e){return e}));function No(e,t){return[e,mi(_i((ai+t)/2))]}No.invert=function(e,t){return[e,2*fi(gi(t))-ai]};function Po(e){var t,n,r,i=ko(e),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var o=oi*a(),s=i(function(e){function t(t){return(t=e(t[0]*ci,t[1]*ci))[0]*=li,t[1]*=li,t}return e=zi(e[0]*ci,e[1]*ci,e.length>2?e[2]*ci:0),t.invert=function(t){return(t=e.invert(t[0]*ci,t[1]*ci))[0]*=li,t[1]*=li,t},t}(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:e===No?[[Math.max(s[0]-o,l),t],[Math.min(s[0]+o,n),r]]:[[l,Math.max(s[1]-o,t)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(e){return arguments.length?(a(e),c()):a()},i.translate=function(e){return arguments.length?(s(e),c()):s()},i.center=function(e){return arguments.length?(o(e),c()):o()},i.clipExtent=function(e){return arguments.length?(null==e?l=t=n=r=null:(l=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),c()):null==l?null:[[l,t],[n,r]]},c()}function Oo(e,t){return[e,t]}Oo.invert=Oo;function Ro(e,t){var n=di(t),r=di(e)*n;return[n*yi(e)/r,yi(t)/r]}Ro.invert=Ao(fi);function Do(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}Do.invert=function(e,t){var n,r=t,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-t)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(hi(n)>ii&&--i>0);return[e/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};function Fo(e,t){return[di(t)*yi(e),yi(t)]}Fo.invert=Ao(xi);function zo(e,t){var n=di(t),r=1+di(e)*n;return[n*yi(e)/r,yi(t)/r]}zo.invert=Ao((function(e){return 2*fi(e)}));function Bo(e,t){return[mi(_i((ai+t)/2)),-e]}Bo.invert=function(e,t){return[-t,2*fi(gi(e))-ai]};function Uo(e,t,n,r){var i,o=e.properties||{},a="Feature"===e.type?e.geometry:e;if("GeometryCollection"===a.type){var s=[];return vt(e,(function(e){var i=Uo(e,t,n,r);i&&s.push(i)})),Ze(s)}var u=Tn(e),l=u[1]>50&&u[3]>50;i=l?{type:a.type,coordinates:jo(a.coordinates,Go(a))}:function(e,t){return Jr(e,"mercator",t)}(a);var c,h=(new Jn.GeoJSONReader).read(i),f=Qe(et(t,n),"meters"),p=Jn.BufferOp.bufferOp(h,f);if(!Vo((p=(new Jn.GeoJSONWriter).write(p)).coordinates))return(c=l?{type:p.type,coordinates:qo(p.coordinates,Go(a))}:function(e,t){return Jr(e,"wgs84",t)}(p)).geometry?c:He(c,o)}function Vo(e){return Array.isArray(e[0])?Vo(e[0]):isNaN(e[0])}function jo(e,t){return"object"!==typeof e[0]?t(e):e.map((function(e){return jo(e,t)}))}function qo(e,t){return"object"!==typeof e[0]?t.invert(e):e.map((function(e){return qo(e,t)}))}function Go(e){var t=kn(e).geometry.coordinates.reverse(),n=t.map((function(e){return-e}));return function(){var e=Po(Bo),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}().center(t).rotate(n).scale(Ge)}var $o=function(e,t,n){var r=(n=n||{}).units,i=n.steps||64;if(!e)throw new Error("geojson is required");if("object"!==typeof n)throw new Error("options must be an object");if("number"!==typeof i)throw new Error("steps must be an number");if(void 0===t)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(e.type){case"GeometryCollection":return vt(e,(function(e){var n=Uo(e,t,r,i);n&&o.push(n)})),Ze(o);case"FeatureCollection":return yt(e,(function(e){var n=Uo(e,t,r,i);n&&yt(n,(function(e){e&&o.push(e)}))})),Ze(o)}return Uo(e,t,r,i)};var Ho=function(e,t){if(!ot(t=t||{}))throw new Error("options is invalid");if(!e)throw new Error("geojson is required");return function(e,t,n){var r=n,i=!1;return bt(e,(function(e,o,a,s,u){r=!1===i&&void 0===n?e:t(r,e,o,a,s,u),i=!0})),r}(e,(function(e,n){var r=n.geometry.coordinates;return e+Kt(r[0],r[1],t)}),0)};var Xo=function(e,t,n,r){if(!ot(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,a=r.mutate;if(!e)throw new Error("geojson is required");if(void 0===t||null===t||isNaN(t))throw new Error("distance is required");if(o&&"number"!==typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===t&&0===o)return e;if(void 0===n||null===n||isNaN(n))throw new Error("direction is required");return t<0&&(t=-t,n=-n),!1!==a&&void 0!==a||(e=Dn(e)),mt(e,(function(e){var r=ct(Ln(e,t,n,{units:i}));e[0]=r[0],e[1]=r[1],o&&3===e.length&&(e[2]+=o)})),e};n(176);var Wo={length:[],area:[]},Yo=[].concat(Object(xe.a)(ie),[{id:"gl-draw-line-active-length",type:"symbol",filter:["all",["==","$type","LineString"],["==","active","true"],["==","user_has_length","true"]],layout:{"symbol-placement":"line-center","text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-max-angle":30,"text-max-width":300,"text-field":"{user_length} {user_length_unit}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":["interpolate",["linear"],["zoom"],10,10,12,14,18,18],"text-allow-overlap":!1},paint:{"text-opacity":["interpolate",["linear"],["zoom"],8,1],"text-color":"#000","text-halo-color":["interpolate",["linear"],["zoom"],2,"#ffffff",3,"#ffffff"],"text-halo-width":.3,"text-halo-blur":1}},{id:"gl-draw-polygon-active-length",type:"symbol",filter:["all",["==","$type","Polygon"],["==","active","true"],["==","user_has_length","true"]],layout:{"symbol-placement":"line-center","text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-max-angle":30,"text-max-width":300,"text-field":"{user_length} {user_length_unit}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":["interpolate",["linear"],["zoom"],10,10,12,14,18,18],"text-allow-overlap":!1},paint:{"text-opacity":["interpolate",["linear"],["zoom"],8,1],"text-color":"#000","text-halo-color":["interpolate",["linear"],["zoom"],2,"#ffffff",3,"#ffffff"],"text-halo-width":.3,"text-halo-blur":1}},{id:"gl-draw-polygon-active-area",type:"symbol",filter:["all",["==","$type","Polygon"],["==","active","true"],["==","user_has_area","true"]],layout:{"symbol-placement":"line","text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-max-angle":30,"text-max-width":300,"text-field":"{user_area} meters^2","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":["interpolate",["linear"],["zoom"],10,10,12,14,18,18],"text-allow-overlap":!1},paint:{"text-opacity":["interpolate",["linear"],["zoom"],8,1],"text-color":"#000","text-halo-color":["interpolate",["linear"],["zoom"],2,"#ffffff",3,"#ffffff"],"text-halo-width":.3,"text-halo-blur":1}}]),Zo=function(){function e(t){Object(f.a)(this,e),this.draw=t.draw,this.onRemoveOrig=t.draw.onRemove;var n=this.draw.options,r=n.union,i=n.copy,o=n.buffer,a=n.length,s=n.area;this.initialOptions={union:r,copy:i,buffer:o,length:a,area:s},this.buttons=[{name:"Union",callback:this.unionPolygons,title:"Union tool",classes:["mapbox-gl-draw_union",t.classPrefix?"".concat(t.classPrefix,"-union"):null]},{name:"Buffer",callback:this.bufferFeature,title:"Buffer tool",classes:["mapbox-gl-draw_buffer",t.classPrefix?"".concat(t.classPrefix,"-buffer"):null]},{name:"Copy",callback:this.copyFeature,title:"Copy tool",classes:["mapbox-gl-draw_copy",t.classPrefix?"".concat(t.classPrefix,"-copy"):null]},{name:"Length",callback:this.lengthOfFeature,title:"Length tool",classes:["mapbox-gl-draw_length",t.classPrefix?"".concat(t.classPrefix,"-length"):null]},{name:"Area",callback:this.areaOfPolygon,title:"Area tool",classes:["mapbox-gl-draw_area",t.classPrefix?"".concat(t.classPrefix,"-area"):null]}]}return Object(p.a)(e,[{key:"onAdd",value:function(e){var t=this;return this.map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl-group mapboxgl-ctrl",this.elContainer=this._container,this.buttons.filter((function(e){return!1!==t.initialOptions[e.name.toLowerCase()]})).forEach((function(e){t.addButton(e)})),this._container}},{key:"onRemove",value:function(e){var t=this;this.buttons.filter((function(e){return!1!==t.initialOptions[e.name.toLowerCase()]})).forEach((function(e){t.removeButton(e)})),this.onRemoveOrig(e)}},{key:"addButton",value:function(e){var t=document.createElement("button");t.className="mapbox-gl-draw_ctrl-draw-btn",t.setAttribute("title",e.title),e.classes instanceof Array&&e.classes.forEach((function(e){t.classList.add(e)})),t.addEventListener("click",e.callback.bind(this)),this.elContainer.appendChild(t),e.elButton=t}},{key:"removeButton",value:function(e){e.elButton.removeEventListener("click",e.action),e.elButton.remove()}},{key:"unionPolygons",value:function(){var e=this.draw.getSelected().features;if(e.length){var t;try{t=Zr.apply(void 0,Object(xe.a)(this.draw.getSelected().features))}catch(r){throw new Error(r)}if("GeometryCollection"===t.geometry.type)throw new Error("Selected Features must have the same types!");var n=e.map((function(e){return e.id}));this.draw.delete(n),t.id=n.join("-"),this.draw.add(t),this.draw.changeMode("simple_select",{featureIds:[t.id]})}}},{key:"bufferFeature",value:function(){var e=this,t=this.draw.getSelected().features;if(t.length){var n={};n.units=this.draw.options.bufferUnits||"kilometers",n.steps=this.draw.options.bufferSteps||"64";var r=[];t.forEach((function(t){var i=$o(t,e.draw.options.bufferSize||.5,n);i.id="".concat(t.id,"_buffer_").concat(Math.floor(Math.random()*Math.floor(1e3))),r.push(i.id),e.draw.add(i)})),this.draw.changeMode("simple_select",{featureIds:r})}}},{key:"copyFeature",value:function(){var e=this,t=this.draw.getSelected().features;if(t.length){var n=[];t.forEach((function(t){var r=Xo(t,2,35);r.id="".concat(t.id,"_copy_").concat(Math.floor(Math.random()*Math.floor(1e3))),n.push(r.id),e.draw.add(r)})),this.draw.changeMode("simple_select",{featureIds:n})}}},{key:"lengthOfFeature",value:function(){var e=this;Wo.length=[];var t=this.draw.getSelected().features;t.length&&t.forEach((function(t,n){var r=Ho(t,{units:e.draw.options.lengthUnits||"kilometers"});Wo.length.push({id:t.id,value:r}),e.draw.options.showLength,e.draw.setFeatureProperty(t.id,"has_length","true")&&e.draw.setFeatureProperty(t.id,"length",parseFloat(r).toFixed(4))&&e.draw.setFeatureProperty(t.id,"length_unit",e.draw.options.lengthUnits||"kilometers")}))}},{key:"areaOfPolygon",value:function(){var e=this;Wo.area=[];var t=this.draw.getSelected().features;t.length&&t.forEach((function(t,n){var r=rr(t);Wo.area.push({id:t.id,value:r}),e.draw.options.showArea,e.draw.setFeatureProperty(t.id,"has_area","true")&&e.draw.setFeatureProperty(t.id,"area",parseFloat(r).toFixed(4))}))}}]),e}(),Jo=function(e,t){return new Zo({draw:e,classPrefix:t})};n(135),n(177);var Ko=function(){function e(t){Object(f.a)(this,e);this.checkboxes=t.checkboxes||[],this.onRemoveOrig=t.draw.onRemove}return Object(p.a)(e,[{key:"onAdd",value:function(e){var t=this;t.map=e,t._container=document.createElement("div"),t._container.className="mapboxgl-ctrl-group mapboxgl-ctrl",t._container.id="maptools-snaptools",t.elContainer=t._container,t.checkboxes.forEach((function(e){t.addCheckbox(e)}));var n=document.getElementsByClassName("mapbox-gl-draw_union")[0].parentElement;return n.insertBefore(document.getElementsByClassName("mapbox-gl-draw_uncombine")[0],n.childNodes[0]),n.insertBefore(document.getElementsByClassName("mapbox-gl-draw_combine")[0],n.childNodes[0]),n.id="maptools-additionaltools",t._container}},{key:"onRemove",value:function(e){ctrl.checkboxes.forEach((function(e){ctrl.removeButton(e)})),ctrl.onRemoveOrig(e)}},{key:"addCheckbox",value:function(e){var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("title",e.title),t.checked="checked"===e.initialState,t.className="mapbox-gl-draw_ctrl-draw-btn",e.classes instanceof Array&&e.classes.forEach((function(e){t.classList.add(e)})),t.addEventListener(e.on,e.action),this.elContainer.appendChild(t),e.elCheckbox=t}},{key:"removeButton",value:function(e){e.elCheckbox.removeEventListener(e.on,e.action),e.elCheckbox.remove()}}]),e}(),Qo=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(e){var r;Object(f.a)(this,n);var a=e=e||{},s=a.modes,c=a.styles,h=a.otherOtions,p={onSetup:function(){return this.setActionableState(),{}},toDisplayFeatures:function(e,t,n){n(t)}},d=u(u({},Be.modes),{},{static:p,draw_point:dn,draw_polygon:vn,draw_line_string:mn,pinning_mode:wn.a,passing_mode_point:Sn(Be.modes.draw_point),passing_mode_line_string:Sn(Be.modes.draw_line_string),passing_mode_polygon:Sn(Be.modes.draw_polygon),scaleRotateMode:jn,cutPolygonMode:sr,splitPolygonMode:yr,splitLineMode:Cr,draw_circle:Ir,drag_circle:Ar,direct_select:Mr,simple_select:Lr,freehandMode:$r,draw_rectangle:Xr.a,draw_rectangle_assisted:Yr.a}),g=u(u({},d),s),m=u(u({modes:g,styles:Ve()(c,Hr.DrawStyles,bn,$n,Yo,"id")},{bufferSize:.5,bufferUnit:"kilometers",bufferSteps:64,snap:!0,guides:!1,userProperties:!0}),h);(r=t.call(this,m)).buttons=[{on:"click",action:function(){try{draw.changeMode("drag_circle")}catch(e){console.error(e)}},classes:["draw-circle"],title:"Draw Circle tool"},{on:"click",action:function(){try{draw.changeMode("freehandMode")}catch(e){console.error(e)}},classes:["free-hand"],title:"Free-Hand Draw Mode tool"},{on:"click",action:function(){try{draw.changeMode("draw_rectangle",{areaLimit:parseInt(prompt("Max Area? (empty for no restriction)"))})}catch(e){console.error(e)}},classes:["draw-rectangle"],title:"Rectangle Draw Mode tool"},{on:"click",action:function(){try{draw.changeMode("draw_rectangle_assisted")}catch(e){console.error(e)}},classes:["draw-rectangle-assisted"],title:"Assisted Rectangle Draw Mode tool"},{on:"click",action:function(){try{draw.changeMode("splitLineMode",{spliter:"line_string"})}catch(e){alert(e.message),console.error(e)}},classes:["split-line"],title:"Split Line Mode tool"},{on:"click",action:function(){try{draw.changeMode("splitPolygonMode")}catch(e){alert(e.message),console.error(e)}},classes:["split-polygon"],title:"Split Polygon Mode tool"},{on:"click",action:function(){try{draw.changeMode("cutPolygonMode")}catch(e){alert(e.message),console.error(e)}},classes:["cut-polygon"],title:"Cut Polygon Mode tool"},{on:"click",action:function(){try{draw.changeMode("scaleRotateMode",{canScale:!0,canRotate:!0,canTrash:!1,rotatePivot:qn,scaleCenter:Gn,singleRotationPoint:!0,rotationPointRadius:1.2,canSelectFeatures:!0})}catch(e){alert(e.message),console.error(e)}},classes:["rotate-icon"],title:"Scale and Rotate Mode tool"},{on:"click",action:function(){draw.changeMode("pinning_mode")},classes:["pinning_mode"],title:"Pinning Mode tool"}],r.onAddOrig=r.onAdd,r.onRemoveOrig=r.onRemove;var y=function(){var e=Object(o.a)(i.a.mark((function e(t,n,r){var o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=new Ko({draw:n,checkboxes:[{on:"change",action:function(e){n.options.snap=e.target.checked},classes:["snap_mode","snap"],title:"Snap when Draw",initialState:"checked"},{on:"change",action:function(e){n.options.guides=e.target.checked},classes:["snap_mode","grid"],title:"Show Guides"}]}),setTimeout((function(){t.addControl(Jo(n),r),t.addControl(o,r),t.addControl(new ea(n),r);var e=document.getElementById("maptools-maintools").parentElement;e.insertBefore(document.getElementById("maptools-filetools"),document.getElementById("maptools-maintools")),e.insertBefore(document.getElementById("maptools-maintools"),document.getElementById("maptools-filetools")),e.insertBefore(document.getElementById("maptools-additionaltools"),document.getElementById("maptools-filetools")),e.insertBefore(document.getElementById("maptools-snaptools"),document.getElementById("maptools-filetools")),document.getElementById("maptools-maintools").classList.add("double-cols"),document.getElementById("maptools-additionaltools").classList.add("double-cols"),document.getElementById("maptools-snaptools").classList.add("double-cols"),document.getElementById("maptools-filetools").classList.add("double-cols")}),300);case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return r.onAdd=function(e,t){return r.map=e,r.placement=t,r.elContainer=r.onAddOrig(e,t),r.elContainer.id="maptools-maintools",r.buttons.forEach((function(e){r.addButton(e)})),y(e,Object(l.a)(r),t),r.elContainer},r.onRemove=function(e){r.buttons.forEach((function(e){r.removeButton(e)})),r.onRemoveOrig(e)},r.addButton=function(e){var t=document.createElement("button");t.className="mapbox-gl-draw_ctrl-draw-btn",t.setAttribute("title",e.title),e.classes instanceof Array&&e.classes.forEach((function(e){t.classList.add(e)})),t.addEventListener(e.on,e.action),r.elContainer.appendChild(t),e.elButton=t},r.removeButton=function(e){e.elButton.removeEventListener(e.on,e.action),e.elButton.remove()},r}return n}(Be),ea=function(){function e(t){Object(f.a)(this,e),this.onRemoveOrig=t.onRemove,this.buttons=[{on:"click",action:function(){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var e=document.createElement("input");e.type="file",$(e).on("change",(function(e){var n=e.target.files;if(n&&n.length>0){var r=n[0],i=new FileReader;i.addEventListener("load",(function(e){var n=e.target,r=JSON.parse(n.result);t.set(r),console.log("load data : ",r)})),i.readAsText(r)}})),$(e).trigger("click")}else alert("Unable to load a file in this browser.")},classes:["draw-import"],title:"Import tool : load .geojson"},{on:"click",action:function(e){var n=t.getAll();if(n.features.length>0){var r="text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(n));document.getElementById("export").setAttribute("href","data:"+r),document.getElementById("export").setAttribute("download","data.geojson"),document.getElementById("export").click(),console.log("save data : ",n)}else alert("Wouldn't you like to draw some data?"),document.getElementById("export").setAttribute("href","#"),e.preventDefault()},classes:["draw-export"],title:"Export tool"}]}return Object(p.a)(e,[{key:"onAdd",value:function(e){var t=this;this.map=e,this.elContainer=document.createElement("div"),this.elContainer.className="mapboxgl-ctrl-group mapboxgl-ctrl",this.elContainer.id="maptools-filetools";var n=document.getElementsByClassName("mapbox-gl-draw_trash")[0];return this.elContainer.appendChild(n),n.classList.add("double-cols"),this.buttons.forEach((function(e){t.addButton(e)})),this.elContainer}},{key:"onRemove",value:function(e){var t=this;this.buttons.forEach((function(e){t.removeButton(e)})),this.onRemoveOrig(e)}},{key:"addButton",value:function(e){var t=document.createElement("button");t.className="mapbox-gl-draw_ctrl-draw-btn",t.setAttribute("title",e.title),e.classes instanceof Array&&e.classes.forEach((function(e){t.classList.add(e)})),t.innerHTML="Export tool"===e.title?"<a href='#' id='export'></a>":"<a></a>",t.addEventListener(e.on,e.action),this.elContainer.appendChild(t),e.elButton=t}},{key:"removeButton",value:function(e){e.elButton.removeEventListener(e.on,e.action),e.elButton.remove()}}]),e}()},function(e,t,n){"use strict";n(46);var r=n(7),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:o,_owner:a.current}}t.jsx=l,t.jsxs=l},function(e,t,n){"use strict";var r=n(46),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,u=60112;t.Suspense=60113;var l=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),o=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),t.Suspense=h("react.suspense"),l=h("react.memo"),c=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||d}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||d}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var _=v.prototype=new y;_.constructor=v,r(_,m.prototype),_.isPureReactComponent=!0;var b={current:null},x=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,r)&&!w.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:b.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var T=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case o:u=!0}}if(u)return a=a(u=e),e=""===r?"."+k(u,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),C(a,t,n,"",(function(e){return e}))):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=r+k(s=e[l],l);u+=C(s,t,n,c,a)}else if("function"===typeof(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e)))for(e=c.call(e),l=0;!(s=e.next()).done;)u+=C(s=s.value,t,n,c=r+k(s,l++),a);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function I(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var M={current:null};function L(){var e=M.current;if(null===e)throw Error(p(321));return e}var N={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error(p(143));return e}},t.Component=m,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(p(267,e));var o=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=b.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!w.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];o.children=l}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return L().useCallback(e,t)},t.useContext=function(e,t){return L().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return L().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return L().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return L().useLayoutEffect(e,t)},t.useMemo=function(e,t){return L().useMemo(e,t)},t.useReducer=function(e,t,n){return L().useReducer(e,t,n)},t.useRef=function(e){return L().useRef(e)},t.useState=function(e){return L().useState(e)},t.version="17.0.1"},function(e,t,n){"use strict";var r=n(7),i=n(46),o=n(102);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,d={},g={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!p.call(g,e)||!p.call(d,e)&&(f.test(e)?g[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,_);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,_);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,_);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,E=60106,S=60107,T=60108,k=60114,C=60109,I=60110,A=60112,M=60113,L=60120,N=60115,P=60116,O=60121,R=60128,D=60129,F=60130,z=60131;if("function"===typeof Symbol&&Symbol.for){var B=Symbol.for;w=B("react.element"),E=B("react.portal"),S=B("react.fragment"),T=B("react.strict_mode"),k=B("react.profiler"),C=B("react.provider"),I=B("react.context"),A=B("react.forward_ref"),M=B("react.suspense"),L=B("react.suspense_list"),N=B("react.memo"),P=B("react.lazy"),O=B("react.block"),B("react.scope"),R=B("react.opaque.id"),D=B("react.debug_trace_mode"),F=B("react.offscreen"),z=B("react.legacy_hidden")}var U,V="function"===typeof Symbol&&Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=V&&e[V]||e["@@iterator"])?e:null}function q(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var G=!1;function $(e,t){if(!e||G)return"";G=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{G=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function H(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=$(e.type,!1);case 11:return e=$(e.type.render,!1);case 22:return e=$(e.type._render,!1);case 1:return e=$(e.type,!0);default:return""}}function X(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case k:return"Profiler";case T:return"StrictMode";case M:return"Suspense";case L:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case N:return X(e.type);case O:return X(e._render);case P:t=e._payload,e=e._init;try{return X(e(t))}catch(n){}}return null}function W(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Z(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function le(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ge,me,ye=(me=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((ge=ge||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ge.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ve(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var _e={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function xe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||_e.hasOwnProperty(e)&&_e[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=xe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(_e).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_e[t]=_e[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Se(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ie=null,Ae=null;function Me(e){if(e=ei(e)){if("function"!==typeof Ce)throw Error(a(280));var t=e.stateNode;t&&(t=ni(t),Ce(e.stateNode,e.type,t))}}function Le(e){Ie?Ae?Ae.push(e):Ae=[e]:Ie=e}function Ne(){if(Ie){var e=Ie,t=Ae;if(Ae=Ie=null,Me(e),t)for(e=0;e<t.length;e++)Me(t[e])}}function Pe(e,t){return e(t)}function Oe(e,t,n,r,i){return e(t,n,r,i)}function Re(){}var De=Pe,Fe=!1,ze=!1;function Be(){null===Ie&&null===Ae||(Re(),Ne())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ni(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ve=!1;if(h)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(me){Ve=!1}function qe(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Ge=!1,$e=null,He=!1,Xe=null,We={onError:function(e){Ge=!0,$e=e}};function Ye(e,t,n,r,i,o,a,s,u){Ge=!1,$e=null,qe.apply(We,arguments)}function Ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Ze(e)!==e)throw Error(a(188))}function Qe(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,ot=!1,at=[],st=null,ut=null,lt=null,ct=new Map,ht=new Map,ft=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function gt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=dt(t,n,r,i,o),null!==t&&(null!==(t=ei(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=Qr(e.target);if(null!==t){var n=Ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ei(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function _t(e,t,n){vt(e)&&n.delete(t)}function bt(){for(ot=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ei(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==st&&vt(st)&&(st=null),null!==ut&&vt(ut)&&(ut=null),null!==lt&&vt(lt)&&(lt=null),ct.forEach(_t),ht.forEach(_t)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,bt)))}function wt(e){function t(t){return xt(t,e)}if(0<at.length){xt(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&xt(st,e),null!==ut&&xt(ut,e),null!==lt&&xt(lt,e),ct.forEach(t),ht.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)yt(n),null===n.blockedOn&&ft.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var St={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},Tt={},kt={};function Ct(e){if(Tt[e])return Tt[e];if(!St[e])return e;var t,n=St[e];for(t in n)if(n.hasOwnProperty(t)&&t in kt)return Tt[e]=n[t];return e}h&&(kt=document.createElement("div").style,"AnimationEvent"in window||(delete St.animationend.animation,delete St.animationiteration.animation,delete St.animationstart.animation),"TransitionEvent"in window||delete St.transitionend.transition);var It=Ct("animationend"),At=Ct("animationiteration"),Mt=Ct("animationstart"),Lt=Ct("transitionend"),Nt=new Map,Pt=new Map,Ot=["abort","abort",It,"animationEnd",At,"animationIteration",Mt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lt,"transitionEnd","waiting","waiting"];function Rt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pt.set(r,t),Nt.set(r,i),l(i,[r])}}(0,o.unstable_now)();var Dt=8;function Ft(e){if(0!==(1&e))return Dt=15,1;if(0!==(2&e))return Dt=14,2;if(0!==(4&e))return Dt=13,4;var t=24&e;return 0!==t?(Dt=12,t):0!==(32&e)?(Dt=11,32):0!==(t=192&e)?(Dt=10,t):0!==(256&e)?(Dt=9,256):0!==(t=3584&e)?(Dt=8,t):0!==(4096&e)?(Dt=7,4096):0!==(t=4186112&e)?(Dt=6,t):0!==(t=62914560&e)?(Dt=5,t):67108864&e?(Dt=4,67108864):0!==(134217728&e)?(Dt=3,134217728):0!==(t=805306368&e)?(Dt=2,t):0!==(1073741824&e)?(Dt=1,1073741824):(Dt=8,e)}function zt(e,t){var n=e.pendingLanes;if(0===n)return Dt=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Dt=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Ft(u),i=Dt):0!==(s&=o)&&(r=Ft(s),i=Dt)}else 0!==(o=n&~a)?(r=Ft(o),i=Dt):0!==s&&(r=Ft(s),i=Dt);if(0===r)return 0;if(r=n&((0>(r=31-Gt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&a)){if(Ft(t),i<=Dt)return t;Dt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Gt(t)),r|=e[n],t&=~i;return r}function Bt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?Ut(10,t):e;case 10:return 0===(e=Vt(192&~t))?Ut(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Vt(e){return e&-e}function jt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Gt(t)]=n}var Gt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-($t(e)/Ht|0)|0},$t=Math.log,Ht=Math.LN2;var Xt=o.unstable_UserBlockingPriority,Wt=o.unstable_runWithPriority,Yt=!0;function Zt(e,t,n,r){Fe||Re();var i=Kt,o=Fe;Fe=!0;try{Oe(i,e,t,n,r)}finally{(Fe=o)||Be()}}function Jt(e,t,n,r){Wt(Xt,Kt.bind(null,e,t,n,r))}function Kt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<at.length&&-1<pt.indexOf(e))e=dt(null,e,t,n,r),at.push(e);else{var o=Qt(e,t,n,r);if(null===o)i&&gt(e,r);else{if(i){if(-1<pt.indexOf(e))return e=dt(o,e,t,n,r),void at.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=mt(st,e,t,n,r,i),!0;case"dragenter":return ut=mt(ut,e,t,n,r,i),!0;case"mouseover":return lt=mt(lt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ct.set(o,mt(ct.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ht.set(o,mt(ht.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;gt(e,r)}Nr(e,t,r,null,n)}}}function Qt(e,t,n,r){var i=ke(r);if(null!==(i=Qr(i))){var o=Ze(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Je(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Nr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function on(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var ln,cn,hn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=un(fn),dn=i({},fn,{view:0,detail:0}),gn=un(dn),mn=i({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&"mousemove"===e.type?(ln=e.screenX-hn.screenX,cn=e.screenY-hn.screenY):cn=ln=0,hn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),yn=un(mn),vn=un(i({},mn,{dataTransfer:0})),_n=un(i({},dn,{relatedTarget:0})),bn=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=un(i({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),wn=un(i({},fn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return kn}var In=un(i({},dn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=on(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?on(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?on(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),An=un(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=un(i({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Ln=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=un(i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Pn=[9,13,27,32],On=h&&"CompositionEvent"in window,Rn=null;h&&"documentMode"in document&&(Rn=document.documentMode);var Dn=h&&"TextEvent"in window&&!Rn,Fn=h&&(!On||Rn&&8<Rn&&11>=Rn),zn=String.fromCharCode(32),Bn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function $n(e,t,n,r){Le(r),0<(t=Or(t,"onChange")).length&&(n=new pn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Xn=null;function Wn(e){kr(e,0)}function Yn(e){if(J(ti(e)))return e}function Zn(e,t){if("change"===e)return t}var Jn=!1;if(h){var Kn;if(h){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}Kn=Qn}else Kn=!1;Jn=Kn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Xn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Xn)){var t=[];if($n(t,Xn,e,ke(e)),e=Wn,Fe)e(t);else{Fe=!0;try{Pe(e,t)}finally{Fe=!1,Be()}}}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Xn)}function or(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ur=Object.prototype.hasOwnProperty;function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ur.call(t,n[r])||!sr(e[n[r]],t[n[r]]))return!1;return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=h&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,_r=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==mr||mr!==K(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Or(yr,"onSelect")).length&&(t=new pn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}Rt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rt(Ot,2);for(var xr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),wr=0;wr<xr.length;wr++)Pt.set(xr[wr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Er));function Tr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,l){if(Ye.apply(this,arguments),Ge){if(!Ge)throw Error(a(198));var c=$e;Ge=!1,$e=null,He||(He=!0,Xe=c)}}(r,t,void 0,e),e.currentTarget=null}function kr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Tr(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Tr(i,s,l),o=u}}}if(He)throw e=Xe,He=!1,Xe=null,e}function Cr(e,t){var n=ri(t),r=e+"__bubble";n.has(r)||(Lr(t,e,2,!1),n.add(r))}var Ir="_reactListening"+Math.random().toString(36).slice(2);function Ar(e){e[Ir]||(e[Ir]=!0,s.forEach((function(t){Sr.has(t)||Mr(t,!1,e,null),Mr(t,!0,e,null)})))}function Mr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=ri(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Lr(o,e,i,t),a.add(s))}function Lr(e,t,n,r){var i=Pt.get(t);switch(void 0===i?2:i){case 0:i=Zt;break;case 1:i=Jt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Nr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Qr(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(ze)return e(t,n);ze=!0;try{De(e,t,n)}finally{ze=!1,Be()}}((function(){var r=o,i=ke(n),a=[];e:{var s=Nt.get(e);if(void 0!==s){var u=pn,l=e;switch(e){case"keypress":if(0===on(n))break e;case"keydown":case"keyup":u=In;break;case"focusin":l="focus",u=_n;break;case"focusout":l="blur",u=_n;break;case"beforeblur":case"afterblur":u=_n;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Mn;break;case It:case At:case Mt:u=bn;break;case Lt:u=Ln;break;case"scroll":u=gn;break;case"wheel":u=Nn;break;case"copy":case"cut":case"paste":u=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=An}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var p,d=r;null!==d;){var g=(p=d).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==f&&(null!=(g=Ue(d,f))&&c.push(Pr(d,g,p)))),h)break;d=d.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(l=n.relatedTarget||n.fromElement)||!Qr(l)&&!l[Jr])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?Qr(l):null)&&(l!==(h=Ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=yn,g="onMouseLeave",f="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(c=An,g="onPointerLeave",f="onPointerEnter",d="pointer"),h=null==u?s:ti(u),p=null==l?s:ti(l),(s=new c(g,d+"leave",u,n,i)).target=h,s.relatedTarget=p,g=null,Qr(i)===r&&((c=new c(f,d+"enter",l,n,i)).target=p,c.relatedTarget=h,g=c),h=g,u&&l)e:{for(f=l,d=0,p=c=u;p;p=Rr(p))d++;for(p=0,g=f;g;g=Rr(g))p++;for(;0<d-p;)c=Rr(c),d--;for(;0<p-d;)f=Rr(f),p--;for(;d--;){if(c===f||null!==f&&c===f.alternate)break e;c=Rr(c),f=Rr(f)}c=null}else c=null;null!==u&&Dr(a,s,u,c,!1),null!==l&&null!==h&&Dr(a,h,l,c,!0)}if("select"===(u=(s=r?ti(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Zn;else if(Gn(s))if(Jn)m=ar;else{m=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=or);switch(m&&(m=m(e,r))?$n(a,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ie(s,"number",s.value)),y=r?ti(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(a,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else jn?Un(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==_?"onCompositionEnd"===_&&jn&&(v=rn()):(tn="value"in(en=i)?en.value:en.textContent,jn=!0)),0<(y=Or(r,_)).length&&(_=new wn(_,e,null,n,i),a.push({event:_,listeners:y}),v?_.data=v:null!==(v=Vn(n))&&(_.data=v))),(v=Dn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Bn=!0,zn);case"textInput":return(e=t.data)===zn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!On&&Un(e,t)?(e=rn(),nn=tn=en=null,jn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Or(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}kr(a,t)}))}function Pr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Or(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ue(e,n))&&r.unshift(Pr(e,o,i)),null!=(o=Ue(e,t))&&r.push(Pr(e,o,i))),e=e.return}return r}function Rr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Dr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Ue(n,o))&&a.unshift(Pr(n,u,s)):i||null!=(u=Ue(n,o))&&a.push(Pr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Fr(){}var zr=null,Br=null;function Ur(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Vr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var jr="function"===typeof setTimeout?setTimeout:void 0,qr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function $r(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Hr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Xr=0;var Wr=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Wr,Zr="__reactProps$"+Wr,Jr="__reactContainer$"+Wr,Kr="__reactEvents$"+Wr;function Qr(e){var t=e[Yr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Jr]||n[Yr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Hr(e);null!==e;){if(n=e[Yr])return n;e=Hr(e)}return t}n=(e=n).parentNode}return null}function ei(e){return!(e=e[Yr]||e[Jr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ti(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ni(e){return e[Zr]||null}function ri(e){var t=e[Kr];return void 0===t&&(t=e[Kr]=new Set),t}var ii=[],oi=-1;function ai(e){return{current:e}}function si(e){0>oi||(e.current=ii[oi],ii[oi]=null,oi--)}function ui(e,t){oi++,ii[oi]=e.current,e.current=t}var li={},ci=ai(li),hi=ai(!1),fi=li;function pi(e,t){var n=e.type.contextTypes;if(!n)return li;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){si(hi),si(ci)}function mi(e,t,n){if(ci.current!==li)throw Error(a(168));ui(ci,t),ui(hi,n)}function yi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,X(t)||"Unknown",o));return i({},n,r)}function vi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||li,fi=ci.current,ui(ci,e),ui(hi,hi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=yi(e,t,fi),r.__reactInternalMemoizedMergedChildContext=e,si(hi),si(ci),ui(ci,e)):si(hi),ui(hi,n)}var bi=null,xi=null,wi=o.unstable_runWithPriority,Ei=o.unstable_scheduleCallback,Si=o.unstable_cancelCallback,Ti=o.unstable_shouldYield,ki=o.unstable_requestPaint,Ci=o.unstable_now,Ii=o.unstable_getCurrentPriorityLevel,Ai=o.unstable_ImmediatePriority,Mi=o.unstable_UserBlockingPriority,Li=o.unstable_NormalPriority,Ni=o.unstable_LowPriority,Pi=o.unstable_IdlePriority,Oi={},Ri=void 0!==ki?ki:function(){},Di=null,Fi=null,zi=!1,Bi=Ci(),Ui=1e4>Bi?Ci:function(){return Ci()-Bi};function Vi(){switch(Ii()){case Ai:return 99;case Mi:return 98;case Li:return 97;case Ni:return 96;case Pi:return 95;default:throw Error(a(332))}}function ji(e){switch(e){case 99:return Ai;case 98:return Mi;case 97:return Li;case 96:return Ni;case 95:return Pi;default:throw Error(a(332))}}function qi(e,t){return e=ji(e),wi(e,t)}function Gi(e,t,n){return e=ji(e),Ei(e,t,n)}function $i(){if(null!==Fi){var e=Fi;Fi=null,Si(e)}Hi()}function Hi(){if(!zi&&null!==Di){zi=!0;var e=0;try{var t=Di;qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Di=null}catch(n){throw null!==Di&&(Di=Di.slice(e+1)),Ei(Ai,$i),n}finally{zi=!1}}}var Xi=x.ReactCurrentBatchConfig;function Wi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Yi=ai(null),Zi=null,Ji=null,Ki=null;function Qi(){Ki=Ji=Zi=null}function eo(e){var t=Yi.current;si(Yi),e.type._context._currentValue=t}function to(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function no(e,t){Zi=e,Ki=Ji=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Oa=!0),e.firstContext=null)}function ro(e,t){if(Ki!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Ki=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ji){if(null===Zi)throw Error(a(308));Ji=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else Ji=Ji.next=t;return e._currentValue}var io=!1;function oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ao(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function so(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function uo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function lo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function co(e,t,n,r){var o=e.updateQueue;io=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var h=e.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=c:f.next=c,h.lastBaseUpdate=l)}}if(null!==a){for(f=o.baseState,s=0,h=c=l=null;;){u=a.lane;var p=a.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var d=e,g=a;switch(u=t,p=n,g.tag){case 1:if("function"===typeof(d=g.payload)){f=d.call(p,f,u);break e}f=d;break e;case 3:d.flags=-4097&d.flags|64;case 0:if(null===(u="function"===typeof(d=g.payload)?d.call(p,f,u):d)||void 0===u)break e;f=i({},f,u);break e;case 2:io=!0}}null!==a.callback&&(e.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else p={eventTime:p,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=p,l=f):h=h.next=p,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===h&&(l=f),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=h,zs|=s,e.lanes=s,e.memoizedState=f}}function ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var fo=(new r.Component).refs;function po(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var go={isMounted:function(e){return!!(e=e._reactInternals)&&Ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=lu(),i=cu(e),o=so(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),uo(e,o),hu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=lu(),i=cu(e),o=so(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),uo(e,o),hu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=lu(),r=cu(e),i=so(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),uo(e,i),hu(e,r,n)}};function mo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function yo(e,t,n){var r=!1,i=li,o=t.contextType;return"object"===typeof o&&null!==o?o=ro(o):(i=di(t)?fi:ci.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?pi(e,i):li),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=go,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function vo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&go.enqueueReplaceState(t,t.state,null)}function _o(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=fo,oo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ro(o):(o=di(t)?fi:ci.current,i.context=pi(e,o)),co(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(po(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&go.enqueueReplaceState(i,i.state,null),co(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var bo=Array.isArray;function xo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===fo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function wo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Eo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=qu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xo(e,t,n),r.return=e,r):((r=Gu(n.type,n.key,n.props,null,e.mode,r)).ref=xo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=$u(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Gu(t.type,t.key,t.props,null,e.mode,n)).ref=xo(e,null,t),n.return=e,n;case E:return(t=Wu(t,e.mode,n)).return=e,t}if(bo(t)||j(t))return(t=$u(t,e.mode,n,null)).return=e,t;wo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?n.type===S?h(e,t,n.props.children,r,i):l(e,t,n,r):null;case E:return n.key===i?c(e,t,n,r):null}if(bo(n)||j(n))return null!==i?null:h(e,t,n,r,null);wo(e,n)}return null}function d(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===S?h(t,e,r.props.children,i,r.key):l(t,e,r,i);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(bo(r)||j(r))return h(t,e=e.get(n)||null,r,i,null);wo(t,r)}return null}function g(i,a,s,u){for(var l=null,c=null,h=a,g=a=0,m=null;null!==h&&g<s.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=p(i,h,s[g],u);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),a=o(y,a,g),null===c?l=y:c.sibling=y,c=y,h=m}if(g===s.length)return n(i,h),l;if(null===h){for(;g<s.length;g++)null!==(h=f(i,s[g],u))&&(a=o(h,a,g),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);g<s.length;g++)null!==(m=d(h,i,g,s[g],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),a=o(m,a,g),null===c?l=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),l}function m(i,s,u,l){var c=j(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,g=s,m=s=0,y=null,v=u.next();null!==g&&!v.done;m++,v=u.next()){g.index>m?(y=g,g=null):y=g.sibling;var _=p(i,g,v.value,l);if(null===_){null===g&&(g=y);break}e&&g&&null===_.alternate&&t(i,g),s=o(_,s,m),null===h?c=_:h.sibling=_,h=_,g=y}if(v.done)return n(i,g),c;if(null===g){for(;!v.done;m++,v=u.next())null!==(v=f(i,v.value,l))&&(s=o(v,s,m),null===h?c=v:h.sibling=v,h=v);return c}for(g=r(i,g);!v.done;m++,v=u.next())null!==(v=d(g,i,m,v.value,l))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),s=o(v,s,m),null===h?c=v:h.sibling=v,h=v);return e&&g.forEach((function(e){return t(i,e)})),c}return function(e,r,o,u){var l="object"===typeof o&&null!==o&&o.type===S&&null===o.key;l&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case w:e:{for(c=o.key,l=r;null!==l;){if(l.key===c){switch(l.tag){case 7:if(o.type===S){n(e,l.sibling),(r=i(l,o.props.children)).return=e,e=r;break e}break;default:if(l.elementType===o.type){n(e,l.sibling),(r=i(l,o.props)).ref=xo(e,l,o),r.return=e,e=r;break e}}n(e,l);break}t(e,l),l=l.sibling}o.type===S?((r=$u(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Gu(o.type,o.key,o.props,null,e.mode,u)).ref=xo(e,r,o),u.return=e,e=u)}return s(e);case E:e:{for(l=o.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Wu(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Xu(o,e.mode,u)).return=e,e=r),s(e);if(bo(o))return g(e,r,o,u);if(j(o))return m(e,r,o,u);if(c&&wo(e,o),"undefined"===typeof o&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,X(e.type)||"Component"))}return n(e,r)}}var So=Eo(!0),To=Eo(!1),ko={},Co=ai(ko),Io=ai(ko),Ao=ai(ko);function Mo(e){if(e===ko)throw Error(a(174));return e}function Lo(e,t){switch(ui(Ao,t),ui(Io,e),ui(Co,ko),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:de(null,"");break;default:t=de(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}si(Co),ui(Co,t)}function No(){si(Co),si(Io),si(Ao)}function Po(e){Mo(Ao.current);var t=Mo(Co.current),n=de(t,e.type);t!==n&&(ui(Io,e),ui(Co,n))}function Oo(e){Io.current===e&&(si(Co),si(Io))}var Ro=ai(0);function Do(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fo=null,zo=null,Bo=!1;function Uo(e,t){var n=Vu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Vo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function jo(e){if(Bo){var t=zo;if(t){var n=t;if(!Vo(e,t)){if(!(t=$r(n.nextSibling))||!Vo(e,t))return e.flags=-1025&e.flags|2,Bo=!1,void(Fo=e);Uo(Fo,n)}Fo=e,zo=$r(t.firstChild)}else e.flags=-1025&e.flags|2,Bo=!1,Fo=e}}function qo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Fo=e}function Go(e){if(e!==Fo)return!1;if(!Bo)return qo(e),Bo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Vr(t,e.memoizedProps))for(t=zo;t;)Uo(e,t),t=$r(t.nextSibling);if(qo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){zo=$r(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}zo=null}}else zo=Fo?$r(e.stateNode.nextSibling):null;return!0}function $o(){zo=Fo=null,Bo=!1}var Ho=[];function Xo(){for(var e=0;e<Ho.length;e++)Ho[e]._workInProgressVersionPrimary=null;Ho.length=0}var Wo=x.ReactCurrentDispatcher,Yo=x.ReactCurrentBatchConfig,Zo=0,Jo=null,Ko=null,Qo=null,ea=!1,ta=!1;function na(){throw Error(a(321))}function ra(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ia(e,t,n,r,i,o){if(Zo=o,Jo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wo.current=null===e||null===e.memoizedState?Ma:La,e=n(r,i),ta){o=0;do{if(ta=!1,!(25>o))throw Error(a(301));o+=1,Qo=Ko=null,t.updateQueue=null,Wo.current=Na,e=n(r,i)}while(ta)}if(Wo.current=Aa,t=null!==Ko&&null!==Ko.next,Zo=0,Qo=Ko=Jo=null,ea=!1,t)throw Error(a(300));return e}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Qo?Jo.memoizedState=Qo=e:Qo=Qo.next=e,Qo}function aa(){if(null===Ko){var e=Jo.alternate;e=null!==e?e.memoizedState:null}else e=Ko.next;var t=null===Qo?Jo.memoizedState:Qo.next;if(null!==t)Qo=t,Ko=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Ko=e).memoizedState,baseState:Ko.baseState,baseQueue:Ko.baseQueue,queue:Ko.queue,next:null},null===Qo?Jo.memoizedState=Qo=e:Qo=Qo.next=e}return Qo}function sa(e,t){return"function"===typeof t?t(e):t}function ua(e){var t=aa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Ko,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,l=i;do{var c=l.lane;if((Zo&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var h={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=h,o=r):u=u.next=h,Jo.lanes|=c,zs|=c}l=l.next}while(null!==l&&l!==i);null===u?o=r:u.next=s,sr(r,t.memoizedState)||(Oa=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function la(e){var t=aa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(Oa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ca(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Zo&e)===e)&&(t._workInProgressVersionPrimary=r,Ho.push(t))),e)return n(t._source);throw Ho.push(t),Error(a(350))}function ha(e,t,n,r){var i=Ms;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),u=Wo.current,l=u.useState((function(){return ca(i,t,n)})),c=l[1],h=l[0];l=Qo;var f=e.memoizedState,p=f.refs,d=p.getSnapshot,g=f.source;f=f.subscribe;var m=Jo;return e.memoizedState={refs:p,source:t,subscribe:r},u.useEffect((function(){p.getSnapshot=n,p.setSnapshot=c;var e=o(t._source);if(!sr(s,e)){e=n(t._source),sr(h,e)||(c(e),e=cu(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var u=31-Gt(a),l=1<<u;r[u]|=e,a&=~l}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=cu(m);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),sr(d,n)&&sr(g,t)&&sr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:h}).dispatch=c=Ia.bind(null,Jo,e),l.queue=e,l.baseQueue=null,h=ca(i,t,n),l.memoizedState=l.baseState=h),h}function fa(e,t,n){return ha(aa(),e,t,n)}function pa(e){var t=oa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:e}).dispatch=Ia.bind(null,Jo,e),[t.memoizedState,e]}function da(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Jo.updateQueue)?(t={lastEffect:null},Jo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ga(e){return e={current:e},oa().memoizedState=e}function ma(){return aa().memoizedState}function ya(e,t,n,r){var i=oa();Jo.flags|=e,i.memoizedState=da(1|t,n,void 0,void 0===r?null:r)}function va(e,t,n,r){var i=aa();r=void 0===r?null:r;var o=void 0;if(null!==Ko){var a=Ko.memoizedState;if(o=a.destroy,null!==r&&ra(r,a.deps))return void da(t,n,o,r)}Jo.flags|=e,i.memoizedState=da(1|t,n,o,r)}function _a(e,t){return ya(516,4,e,t)}function ba(e,t){return va(516,4,e,t)}function xa(e,t){return va(4,2,e,t)}function wa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ea(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,va(4,2,wa.bind(null,t,e),n)}function Sa(){}function Ta(e,t){var n=aa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ra(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ka(e,t){var n=aa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ra(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ca(e,t){var n=Vi();qi(98>n?98:n,(function(){e(!0)})),qi(97<n?97:n,(function(){var n=Yo.transition;Yo.transition=1;try{e(!1),t()}finally{Yo.transition=n}}))}function Ia(e,t,n){var r=lu(),i=cu(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===Jo||null!==a&&a===Jo)ta=ea=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,sr(u,s))return}catch(l){}hu(e,i,r)}}var Aa={readContext:ro,useCallback:na,useContext:na,useEffect:na,useImperativeHandle:na,useLayoutEffect:na,useMemo:na,useReducer:na,useRef:na,useState:na,useDebugValue:na,useDeferredValue:na,useTransition:na,useMutableSource:na,useOpaqueIdentifier:na,unstable_isNewReconciler:!1},Ma={readContext:ro,useCallback:function(e,t){return oa().memoizedState=[e,void 0===t?null:t],e},useContext:ro,useEffect:_a,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ya(4,2,wa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ya(4,2,e,t)},useMemo:function(e,t){var n=oa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ia.bind(null,Jo,e),[r.memoizedState,e]},useRef:ga,useState:pa,useDebugValue:Sa,useDeferredValue:function(e){var t=pa(e),n=t[0],r=t[1];return _a((function(){var t=Yo.transition;Yo.transition=1;try{r(e)}finally{Yo.transition=t}}),[e]),n},useTransition:function(){var e=pa(!1),t=e[0];return ga(e=Ca.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oa();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ha(r,e,t,n)},useOpaqueIdentifier:function(){if(Bo){var e=!1,t=function(e){return{$$typeof:R,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Xr++).toString(36))),Error(a(355))})),n=pa(t)[1];return 0===(2&Jo.mode)&&(Jo.flags|=516,da(5,(function(){n("r:"+(Xr++).toString(36))}),void 0,null)),t}return pa(t="r:"+(Xr++).toString(36)),t},unstable_isNewReconciler:!1},La={readContext:ro,useCallback:Ta,useContext:ro,useEffect:ba,useImperativeHandle:Ea,useLayoutEffect:xa,useMemo:ka,useReducer:ua,useRef:ma,useState:function(){return ua(sa)},useDebugValue:Sa,useDeferredValue:function(e){var t=ua(sa),n=t[0],r=t[1];return ba((function(){var t=Yo.transition;Yo.transition=1;try{r(e)}finally{Yo.transition=t}}),[e]),n},useTransition:function(){var e=ua(sa)[0];return[ma().current,e]},useMutableSource:fa,useOpaqueIdentifier:function(){return ua(sa)[0]},unstable_isNewReconciler:!1},Na={readContext:ro,useCallback:Ta,useContext:ro,useEffect:ba,useImperativeHandle:Ea,useLayoutEffect:xa,useMemo:ka,useReducer:la,useRef:ma,useState:function(){return la(sa)},useDebugValue:Sa,useDeferredValue:function(e){var t=la(sa),n=t[0],r=t[1];return ba((function(){var t=Yo.transition;Yo.transition=1;try{r(e)}finally{Yo.transition=t}}),[e]),n},useTransition:function(){var e=la(sa)[0];return[ma().current,e]},useMutableSource:fa,useOpaqueIdentifier:function(){return la(sa)[0]},unstable_isNewReconciler:!1},Pa=x.ReactCurrentOwner,Oa=!1;function Ra(e,t,n,r){t.child=null===e?To(t,null,n,r):So(t,e.child,n,r)}function Da(e,t,n,r,i){n=n.render;var o=t.ref;return no(t,i),r=ia(e,t,n,r,o,i),null===e||Oa?(t.flags|=1,Ra(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ns(e,t,i))}function Fa(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||ju(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gu(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,za(e,t,a,r,i,o))}return a=e.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)?ns(e,t,o):(t.flags|=1,(e=qu(a,r)).ref=t.ref,e.return=t,t.child=e)}function za(e,t,n,r,i,o){if(null!==e&&lr(e.memoizedProps,r)&&e.ref===t.ref){if(Oa=!1,0===(o&i))return t.lanes=e.lanes,ns(e,t,o);0!==(16384&e.flags)&&(Oa=!0)}return Va(e,t,n,r,o)}function Ba(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},_u(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_u(t,e),null;t.memoizedState={baseLanes:0},_u(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,_u(t,r);return Ra(e,t,i,n),t.child}function Ua(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Va(e,t,n,r,i){var o=di(n)?fi:ci.current;return o=pi(t,o),no(t,i),n=ia(e,t,n,r,o,i),null===e||Oa?(t.flags|=1,Ra(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ns(e,t,i))}function ja(e,t,n,r,i){if(di(n)){var o=!0;vi(t)}else o=!1;if(no(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),yo(t,n,r),_o(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=ro(l):l=pi(t,l=di(n)?fi:ci.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&vo(t,a,r,l),io=!1;var f=t.memoizedState;a.state=f,co(t,r,a,i),u=t.memoizedState,s!==r||f!==u||hi.current||io?("function"===typeof c&&(po(t,n,c,r),u=t.memoizedState),(s=io||mo(t,n,s,r,f,u,l))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,ao(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Wi(t.type,s),a.props=l,h=t.pendingProps,f=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=ro(u):u=pi(t,u=di(n)?fi:ci.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||f!==u)&&vo(t,a,r,u),io=!1,f=t.memoizedState,a.state=f,co(t,r,a,i);var d=t.memoizedState;s!==h||f!==d||hi.current||io?("function"===typeof p&&(po(t,n,p,r),d=t.memoizedState),(l=io||mo(t,n,l,r,f,d,u))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=d),a.props=r,a.state=d,a.context=u,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return qa(e,t,n,r,o,i)}function qa(e,t,n,r,i,o){Ua(e,t);var a=0!==(64&t.flags);if(!r&&!a)return i&&_i(t,n,!1),ns(e,t,o);r=t.stateNode,Pa.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=So(t,e.child,null,o),t.child=So(t,null,s,o)):Ra(e,t,s,o),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Ga(e){var t=e.stateNode;t.pendingContext?mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mi(0,t.context,!1),Lo(e,t.containerInfo)}var $a,Ha,Xa,Wa={dehydrated:null,retryLane:0};function Ya(e,t,n){var r,i=t.pendingProps,o=Ro.current,a=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),ui(Ro,1&o),null===e?(void 0!==i.fallback&&jo(t),e=i.children,o=i.fallback,a?(e=Za(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Wa,e):"number"===typeof i.unstable_expectedLoadTime?(e=Za(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Wa,t.lanes=33554432,e):((n=Hu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=Ka(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Wa,i):(n=Ja(e,t,i.children,n),t.memoizedState=null,n))}function Za(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Hu(t,i,0,null),n=$u(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Ja(e,t,n,r){var i=e.child;return e=i.sibling,n=qu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Ka(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=qu(a,s),null!==e?r=qu(e,r):(r=$u(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Qa(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),to(e.return,t)}function es(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function ts(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ra(e,t,r.children,n),0!==(2&(r=Ro.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qa(e,n);else if(19===e.tag)Qa(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ui(Ro,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Do(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),es(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Do(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}es(t,!0,n,null,o,t.lastEffect);break;case"together":es(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ns(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=qu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=qu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function rs(e,t){if(!Bo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function is(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return di(t.type)&&gi(),null;case 3:return No(),si(hi),si(ci),Xo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Go(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Oo(t);var o=Mo(Ao.current);if(n=t.type,null!==e&&null!=t.stateNode)Ha(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Mo(Co.current),Go(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Yr]=t,r[Zr]=s,n){case"dialog":Cr("cancel",r),Cr("close",r);break;case"iframe":case"object":case"embed":Cr("load",r);break;case"video":case"audio":for(e=0;e<Er.length;e++)Cr(Er[e],r);break;case"source":Cr("error",r);break;case"img":case"image":case"link":Cr("error",r),Cr("load",r);break;case"details":Cr("toggle",r);break;case"input":ee(r,s),Cr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Cr("invalid",r);break;case"textarea":ue(r,s),Cr("invalid",r)}for(var l in Se(n,s),e=null,s)s.hasOwnProperty(l)&&(o=s[l],"children"===l?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):u.hasOwnProperty(l)&&null!=o&&"onScroll"===l&&Cr("scroll",r));switch(n){case"input":Z(r),re(r,s,!0);break;case"textarea":Z(r),ce(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Fr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(l=9===o.nodeType?o:o.ownerDocument,e===he&&(e=pe(n)),e===he?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Yr]=t,e[Zr]=r,$a(e,t),t.stateNode=e,l=Te(n,r),n){case"dialog":Cr("cancel",e),Cr("close",e),o=r;break;case"iframe":case"object":case"embed":Cr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Er.length;o++)Cr(Er[o],e);o=r;break;case"source":Cr("error",e),o=r;break;case"img":case"image":case"link":Cr("error",e),Cr("load",e),o=r;break;case"details":Cr("toggle",e),o=r;break;case"input":ee(e,r),o=Q(e,r),Cr("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Cr("invalid",e);break;case"textarea":ue(e,r),o=se(e,r),Cr("invalid",e);break;default:o=r}Se(n,o);var c=o;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?we(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ye(e,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&ve(e,h):"number"===typeof h&&ve(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Cr("scroll",e):null!=h&&b(e,s,h,l))}switch(n){case"input":Z(e),re(e,r,!1);break;case"textarea":Z(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Fr)}Ur(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xa(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=Mo(Ao.current),Mo(Co.current),Go(t)?(r=t.stateNode,n=t.memoizedProps,r[Yr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Yr]=t,t.stateNode=r)}return null;case 13:return si(Ro),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Go(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ro.current)?0===Rs&&(Rs=3):(0!==Rs&&3!==Rs||(Rs=4),null===Ms||0===(134217727&zs)&&0===(134217727&Bs)||gu(Ms,Ns))),(r||n)&&(t.flags|=4),null);case 4:return No(),null===e&&Ar(t.stateNode.containerInfo),null;case 10:return eo(t),null;case 17:return di(t.type)&&gi(),null;case 19:if(si(Ro),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(l=r.rendering))if(s)rs(r,!1);else{if(0!==Rs||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=Do(e))){for(t.flags|=64,rs(r,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ui(Ro,1&Ro.current|2),t.child}e=e.sibling}null!==r.tail&&Ui()>qs&&(t.flags|=64,s=!0,rs(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Do(l))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),rs(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!Bo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ui()-r.renderingStartTime>qs&&1073741824!==n&&(t.flags|=64,s=!0,rs(r,!1),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ui(),n.sibling=null,t=Ro.current,ui(Ro,s?1&t|2:1&t),n):null;case 23:case 24:return bu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function os(e){switch(e.tag){case 1:di(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(No(),si(hi),si(ci),Xo(),0!==(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return Oo(e),null;case 13:return si(Ro),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return si(Ro),null;case 4:return No(),null;case 10:return eo(e),null;case 23:case 24:return bu(),null;default:return null}}function as(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}$a=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ha=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Mo(Co.current);var a,s=null;switch(n){case"input":o=Q(e,o),r=Q(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Fr)}for(h in Se(n,r),n=null,o)if(!r.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var l=o[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(l=null!=o?o[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Cr("scroll",e),s||l===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===R?c.toString():(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Xa=function(e,t,n,r){n!==r&&(t.flags|=4)};var us="function"===typeof WeakMap?WeakMap:Map;function ls(e,t,n){(n=so(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xs||(Xs=!0,Ws=r),ss(0,t)},n}function cs(e,t,n){(n=so(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ss(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ys?Ys=new Set([this]):Ys.add(this),ss(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var hs="function"===typeof WeakSet?WeakSet:Set;function fs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Fu(e,n)}else t.current=null}function ps(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Wi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function ds(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Ou(n,e),Pu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Wi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ho(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}ho(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Ur(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=xe("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ms(e,t){if(xi&&"function"===typeof xi.onCommitFiberUnmount)try{xi.onCommitFiberUnmount(bi,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Ou(t,n);else{r=t;try{i()}catch(o){Fu(r,o)}}n=n.next}while(n!==e)}break;case 1:if(fs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Fu(t,o)}break;case 5:fs(t);break;case 4:ws(e,t)}}function ys(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function vs(e){return 5===e.tag||3===e.tag||4===e.tag}function _s(e){e:{for(var t=e.return;null!==t;){if(vs(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(ve(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||vs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?bs(e,n,t):xs(e,n,t)}function bs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Fr));else if(4!==r&&null!==(e=e.child))for(bs(e,t,n),e=e.sibling;null!==e;)bs(e,t,n),e=e.sibling}function xs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function ws(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,l=u;;)if(ms(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ms(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Es(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Te(e,i),t=Te(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?we(n,u):"dangerouslySetInnerHTML"===s?ye(n,u):"children"===s?ve(n,u):b(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":le(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ae(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(js=Ui(),gs(t.child,!0)),void Ss(t);case 19:return void Ss(t);case 17:return;case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(a(163))}function Ss(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new hs),t.forEach((function(t){var r=Bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ts(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var ks=Math.ceil,Cs=x.ReactCurrentDispatcher,Is=x.ReactCurrentOwner,As=0,Ms=null,Ls=null,Ns=0,Ps=0,Os=ai(0),Rs=0,Ds=null,Fs=0,zs=0,Bs=0,Us=0,Vs=null,js=0,qs=1/0;function Gs(){qs=Ui()+500}var $s,Hs=null,Xs=!1,Ws=null,Ys=null,Zs=!1,Js=null,Ks=90,Qs=[],eu=[],tu=null,nu=0,ru=null,iu=-1,ou=0,au=0,su=null,uu=!1;function lu(){return 0!==(48&As)?Ui():-1!==iu?iu:iu=Ui()}function cu(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Vi()?1:2;if(0===ou&&(ou=Fs),0!==Xi.transition){0!==au&&(au=null!==Vs?Vs.pendingLanes:0),e=ou;var t=4186112&~au;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Vi(),0!==(4&As)&&98===e?e=Ut(12,ou):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ou),e}function hu(e,t,n){if(50<nu)throw nu=0,ru=null,Error(a(185));if(null===(e=fu(e,t)))return null;qt(e,t,n),e===Ms&&(Bs|=t,4===Rs&&gu(e,Ns));var r=Vi();1===t?0!==(8&As)&&0===(48&As)?mu(e):(pu(e,n),0===As&&(Gs(),$i())):(0===(4&As)||98!==r&&99!==r||(null===tu?tu=new Set([e]):tu.add(e)),pu(e,n)),Vs=e}function fu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function pu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Gt(s),l=1<<u,c=o[u];if(-1===c){if(0===(l&r)||0!==(l&i)){c=t,Ft(l);var h=Dt;o[u]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=l);s&=~l}if(r=zt(e,e===Ms?Ns:0),t=Dt,0===r)null!==n&&(n!==Oi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Oi&&Si(n)}15===t?(n=mu.bind(null,e),null===Di?(Di=[n],Fi=Ei(Ai,Hi)):Di.push(n),n=Oi):14===t?n=Gi(99,mu.bind(null,e)):n=Gi(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),du.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function du(e){if(iu=-1,au=ou=0,0!==(48&As))throw Error(a(327));var t=e.callbackNode;if(Nu()&&e.callbackNode!==t)return null;var n=zt(e,e===Ms?Ns:0);if(0===n)return null;var r=n,i=As;As|=16;var o=Eu();for(Ms===e&&Ns===r||(Gs(),xu(e,r));;)try{ku();break}catch(u){wu(e,u)}if(Qi(),Cs.current=o,As=i,null!==Ls?r=0:(Ms=null,Ns=0,r=Rs),0!==(Fs&Bs))xu(e,0);else if(0!==r){if(2===r&&(As|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Bt(e))&&(r=Su(e,n))),1===r)throw t=Ds,xu(e,0),gu(e,n),pu(e,Ui()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:Au(e);break;case 3:if(gu(e,n),(62914560&n)===n&&10<(r=js+500-Ui())){if(0!==zt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){lu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=jr(Au.bind(null,e),r);break}Au(e);break;case 4:if(gu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Gt(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Ui()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ks(n/1960))-n)){e.timeoutHandle=jr(Au.bind(null,e),n);break}Au(e);break;case 5:Au(e);break;default:throw Error(a(329))}}return pu(e,Ui()),e.callbackNode===t?du.bind(null,e):null}function gu(e,t){for(t&=~Us,t&=~Bs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Gt(t),r=1<<n;e[n]=-1,t&=~r}}function mu(e){if(0!==(48&As))throw Error(a(327));if(Nu(),e===Ms&&0!==(e.expiredLanes&Ns)){var t=Ns,n=Su(e,t);0!==(Fs&Bs)&&(n=Su(e,t=zt(e,t)))}else n=Su(e,t=zt(e,0));if(0!==e.tag&&2===n&&(As|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=Bt(e))&&(n=Su(e,t))),1===n)throw n=Ds,xu(e,0),gu(e,t),pu(e,Ui()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Au(e),pu(e,Ui()),null}function yu(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Gs(),$i())}}function vu(e,t){var n=As;As&=-2,As|=8;try{return e(t)}finally{0===(As=n)&&(Gs(),$i())}}function _u(e,t){ui(Os,Ps),Ps|=t,Fs|=t}function bu(){Ps=Os.current,si(Os)}function xu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,qr(n)),null!==Ls)for(n=Ls.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:No(),si(hi),si(ci),Xo();break;case 5:Oo(r);break;case 4:No();break;case 13:case 19:si(Ro);break;case 10:eo(r);break;case 23:case 24:bu()}n=n.return}Ms=e,Ls=qu(e.current,null),Ns=Ps=Fs=t,Rs=0,Ds=null,Us=Bs=zs=0}function wu(e,t){for(;;){var n=Ls;try{if(Qi(),Wo.current=Aa,ea){for(var r=Jo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ea=!1}if(Zo=0,Qo=Ko=Jo=null,ta=!1,Is.current=null,null===n||null===n.return){Rs=1,Ds=t,Ls=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=Ns,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Ro.current),f=a;do{var p;if(p=13===f.tag){var d=f.memoizedState;if(null!==d)p=null!==d.dehydrated;else{var g=f.memoizedProps;p=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!h)}}if(p){var m=f.updateQueue;if(null===m){var y=new Set;y.add(l),f.updateQueue=y}else m.add(l);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=so(-1,1);v.tag=2,uo(s,v)}s.lanes|=1;break e}u=void 0,s=t;var _=o.pingCache;if(null===_?(_=o.pingCache=new us,u=new Set,_.set(l,u)):void 0===(u=_.get(l))&&(u=new Set,_.set(l,u)),!u.has(s)){u.add(s);var b=zu.bind(null,o,l,s);l.then(b,b)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((X(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Rs&&(Rs=2),u=as(u,s),f=a;do{switch(f.tag){case 3:o=u,f.flags|=4096,t&=-t,f.lanes|=t,lo(f,ls(0,o,t));break e;case 1:o=u;var x=f.type,w=f.stateNode;if(0===(64&f.flags)&&("function"===typeof x.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Ys||!Ys.has(w)))){f.flags|=4096,t&=-t,f.lanes|=t,lo(f,cs(f,o,t));break e}}f=f.return}while(null!==f)}Iu(n)}catch(E){t=E,Ls===n&&null!==n&&(Ls=n=n.return);continue}break}}function Eu(){var e=Cs.current;return Cs.current=Aa,null===e?Aa:e}function Su(e,t){var n=As;As|=16;var r=Eu();for(Ms===e&&Ns===t||xu(e,t);;)try{Tu();break}catch(i){wu(e,i)}if(Qi(),As=n,Cs.current=r,null!==Ls)throw Error(a(261));return Ms=null,Ns=0,Rs}function Tu(){for(;null!==Ls;)Cu(Ls)}function ku(){for(;null!==Ls&&!Ti();)Cu(Ls)}function Cu(e){var t=$s(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?Iu(e):Ls=t,Is.current=null}function Iu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=is(n,t,Ps)))return void(Ls=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ps)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=os(t)))return n.flags&=2047,void(Ls=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ls=t);Ls=t=e}while(null!==t);0===Rs&&(Rs=5)}function Au(e){var t=Vi();return qi(99,Mu.bind(null,e,t)),null}function Mu(e,t){do{Nu()}while(null!==Js);if(0!==(48&As))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<o;){var l=31-Gt(o),c=1<<l;i[l]=0,s[l]=-1,u[l]=-1,o&=~c}if(null!==tu&&0===(24&r)&&tu.has(e)&&tu.delete(e),e===Ms&&(Ls=Ms=null,Ns=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=As,As|=32,Is.current=null,zr=Yt,dr(s=pr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,o=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{u.nodeType,l.nodeType}catch(k){u=null;break e}var h=0,f=-1,p=-1,d=0,g=0,m=s,y=null;t:for(;;){for(var v;m!==u||0!==o&&3!==m.nodeType||(f=h+o),m!==l||0!==c&&3!==m.nodeType||(p=h+c),3===m.nodeType&&(h+=m.nodeValue.length),null!==(v=m.firstChild);)y=m,m=v;for(;;){if(m===s)break t;if(y===u&&++d===o&&(f=h),y===l&&++g===c&&(p=h),null!==(v=m.nextSibling))break;y=(m=y).parentNode}m=v}u=-1===f||-1===p?null:{start:f,end:p}}else u=null;u=u||{start:0,end:0}}else u=null;Br={focusedElem:s,selectionRange:u},Yt=!1,su=null,uu=!1,Hs=r;do{try{Lu()}catch(k){if(null===Hs)throw Error(a(330));Fu(Hs,k),Hs=Hs.nextEffect}}while(null!==Hs);su=null,Hs=r;do{try{for(s=e;null!==Hs;){var _=Hs.flags;if(16&_&&ve(Hs.stateNode,""),128&_){var b=Hs.alternate;if(null!==b){var x=b.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&_){case 2:_s(Hs),Hs.flags&=-3;break;case 6:_s(Hs),Hs.flags&=-3,Es(Hs.alternate,Hs);break;case 1024:Hs.flags&=-1025;break;case 1028:Hs.flags&=-1025,Es(Hs.alternate,Hs);break;case 4:Es(Hs.alternate,Hs);break;case 8:ws(s,u=Hs);var w=u.alternate;ys(u),null!==w&&ys(w)}Hs=Hs.nextEffect}}catch(k){if(null===Hs)throw Error(a(330));Fu(Hs,k),Hs=Hs.nextEffect}}while(null!==Hs);if(x=Br,b=pr(),_=x.focusedElem,s=x.selectionRange,b!==_&&_&&_.ownerDocument&&fr(_.ownerDocument.documentElement,_)){null!==s&&dr(_)&&(b=s.start,void 0===(x=s.end)&&(x=b),"selectionStart"in _?(_.selectionStart=b,_.selectionEnd=Math.min(x,_.value.length)):(x=(b=_.ownerDocument||document)&&b.defaultView||window).getSelection&&(x=x.getSelection(),u=_.textContent.length,w=Math.min(s.start,u),s=void 0===s.end?w:Math.min(s.end,u),!x.extend&&w>s&&(u=s,s=w,w=u),u=hr(_,w),o=hr(_,s),u&&o&&(1!==x.rangeCount||x.anchorNode!==u.node||x.anchorOffset!==u.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&((b=b.createRange()).setStart(u.node,u.offset),x.removeAllRanges(),w>s?(x.addRange(b),x.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),x.addRange(b))))),b=[];for(x=_;x=x.parentNode;)1===x.nodeType&&b.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<b.length;_++)(x=b[_]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Yt=!!zr,Br=zr=null,e.current=n,Hs=r;do{try{for(_=e;null!==Hs;){var E=Hs.flags;if(36&E&&ds(_,Hs.alternate,Hs),128&E){b=void 0;var S=Hs.ref;if(null!==S){var T=Hs.stateNode;switch(Hs.tag){case 5:b=T;break;default:b=T}"function"===typeof S?S(b):S.current=b}}Hs=Hs.nextEffect}}catch(k){if(null===Hs)throw Error(a(330));Fu(Hs,k),Hs=Hs.nextEffect}}while(null!==Hs);Hs=null,Ri(),As=i}else e.current=n;if(Zs)Zs=!1,Js=e,Ks=t;else for(Hs=r;null!==Hs;)t=Hs.nextEffect,Hs.nextEffect=null,8&Hs.flags&&((E=Hs).sibling=null,E.stateNode=null),Hs=t;if(0===(r=e.pendingLanes)&&(Ys=null),1===r?e===ru?nu++:(nu=0,ru=e):nu=0,n=n.stateNode,xi&&"function"===typeof xi.onCommitFiberRoot)try{xi.onCommitFiberRoot(bi,n,void 0,64===(64&n.current.flags))}catch(k){}if(pu(e,Ui()),Xs)throw Xs=!1,e=Ws,Ws=null,e;return 0!==(8&As)||$i(),null}function Lu(){for(;null!==Hs;){var e=Hs.alternate;uu||null===su||(0!==(8&Hs.flags)?et(Hs,su)&&(uu=!0):13===Hs.tag&&Ts(e,Hs)&&et(Hs,su)&&(uu=!0));var t=Hs.flags;0!==(256&t)&&ps(e,Hs),0===(512&t)||Zs||(Zs=!0,Gi(97,(function(){return Nu(),null}))),Hs=Hs.nextEffect}}function Nu(){if(90!==Ks){var e=97<Ks?97:Ks;return Ks=90,qi(e,Ru)}return!1}function Pu(e,t){Qs.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Nu(),null})))}function Ou(e,t){eu.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Nu(),null})))}function Ru(){if(null===Js)return!1;var e=Js;if(Js=null,0!==(48&As))throw Error(a(331));var t=As;As|=32;var n=eu;eu=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(l){if(null===o)throw Error(a(330));Fu(o,l)}}for(n=Qs,Qs=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(l){if(null===o)throw Error(a(330));Fu(o,l)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return As=t,$i(),!0}function Du(e,t,n){uo(e,t=ls(0,t=as(n,t),1)),t=lu(),null!==(e=fu(e,1))&&(qt(e,1,t),pu(e,t))}function Fu(e,t){if(3===e.tag)Du(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Du(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ys||!Ys.has(r))){var i=cs(n,e=as(t,e),1);if(uo(n,i),i=lu(),null!==(n=fu(n,1)))qt(n,1,i),pu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Ys||!Ys.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function zu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=lu(),e.pingedLanes|=e.suspendedLanes&n,Ms===e&&(Ns&n)===n&&(4===Rs||3===Rs&&(62914560&Ns)===Ns&&500>Ui()-js?xu(e,0):Us|=n),pu(e,t)}function Bu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Vi()?1:2:(0===ou&&(ou=Fs),0===(t=Vt(62914560&~ou))&&(t=4194304))),n=lu(),null!==(e=fu(e,t))&&(qt(e,t,n),pu(e,n))}function Uu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Vu(e,t,n,r){return new Uu(e,t,n,r)}function ju(e){return!(!(e=e.prototype)||!e.isReactComponent)}function qu(e,t){var n=e.alternate;return null===n?((n=Vu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)ju(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return $u(n.children,i,o,t);case D:s=8,i|=16;break;case T:s=8,i|=1;break;case k:return(e=Vu(12,n,t,8|i)).elementType=k,e.type=k,e.lanes=o,e;case M:return(e=Vu(13,n,t,i)).type=M,e.elementType=M,e.lanes=o,e;case L:return(e=Vu(19,n,t,i)).elementType=L,e.lanes=o,e;case F:return Hu(n,i,o,t);case z:return(e=Vu(24,n,t,i)).elementType=z,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case I:s=9;break e;case A:s=11;break e;case N:s=14;break e;case P:s=16,r=null;break e;case O:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Vu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function $u(e,t,n,r){return(e=Vu(7,e,r,t)).lanes=n,e}function Hu(e,t,n,r){return(e=Vu(23,e,r,t)).elementType=F,e.lanes=n,e}function Xu(e,t,n){return(e=Vu(6,e,null,t)).lanes=n,e}function Wu(e,t,n){return(t=Vu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=jt(0),this.expirationTimes=jt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jt(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Ju(e,t,n,r){var i=t.current,o=lu(),s=cu(i);e:if(n){t:{if(Ze(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(di(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var l=n.type;if(di(l)){n=yi(n,l,u);break e}}n=u}else n=li;return null===t.context?t.context=n:t.pendingContext=n,(t=so(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),uo(i,t),hu(i,s,o),s}function Ku(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function el(e,t){Qu(e,t),(e=e.alternate)&&Qu(e,t)}function tl(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Yu(e,t,null!=n&&!0===n.hydrate),t=Vu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,oo(t),e[Jr]=n.current,Ar(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function nl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function rl(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=Ku(a);s.call(e)}}Ju(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tl(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=Ku(a);u.call(e)}}vu((function(){Ju(t,a,e,i)}))}return Ku(a)}function il(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nl(t))throw Error(a(200));return Zu(e,t,null,n)}$s=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||hi.current)Oa=!0;else{if(0===(n&r)){switch(Oa=!1,t.tag){case 3:Ga(t),$o();break;case 5:Po(t);break;case 1:di(t.type)&&vi(t);break;case 4:Lo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ui(Yi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Ya(e,t,n):(ui(Ro,1&Ro.current),null!==(t=ns(e,t,n))?t.sibling:null);ui(Ro,1&Ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return ts(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ui(Ro,Ro.current),r)break;return null;case 23:case 24:return t.lanes=0,Ba(e,t,n)}return ns(e,t,n)}Oa=0!==(16384&e.flags)}else Oa=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=pi(t,ci.current),no(t,n),i=ia(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,di(r)){var o=!0;vi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&po(t,r,s,e),i.updater=go,t.stateNode=i,i._reactInternals=t,_o(t,r,e,n),t=qa(null,t,r,!0,o,n)}else t.tag=0,Ra(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"===typeof e)return ju(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===N)return 14}return 2}(i),e=Wi(i,e),o){case 0:t=Va(null,t,i,e,n);break e;case 1:t=ja(null,t,i,e,n);break e;case 11:t=Da(null,t,i,e,n);break e;case 14:t=Fa(null,t,i,Wi(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Va(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 1:return r=t.type,i=t.pendingProps,ja(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 3:if(Ga(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ao(e,t),co(t,r,null,n),(r=t.memoizedState.element)===i)$o(),t=ns(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(zo=$r(t.stateNode.containerInfo.firstChild),Fo=t,o=Bo=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Ho.push(o);for(n=To(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ra(e,t,r,n),$o();t=t.child}return t;case 5:return Po(t),null===e&&jo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Vr(r,i)?s=null:null!==o&&Vr(r,o)&&(t.flags|=16),Ua(e,t),Ra(e,t,s,n),t.child;case 6:return null===e&&jo(t),null;case 13:return Ya(e,t,n);case 4:return Lo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=So(t,null,r,n):Ra(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Da(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 7:return Ra(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ra(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var u=t.type._context;if(ui(Yi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=sr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!hi.current){t=ns(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===u.tag&&((c=so(-1,n&-n)).tag=2,uo(u,c)),u.lanes|=n,null!==(c=u.alternate)&&(c.lanes|=n),to(u.return,n),l.lanes|=n;break}c=c.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Ra(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,no(t,n),r=r(i=ro(i,o.unstable_observedBits)),t.flags|=1,Ra(e,t,r,n),t.child;case 14:return o=Wi(i=t.type,t.pendingProps),Fa(e,t,i,o=Wi(i.type,o),r,n);case 15:return za(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,di(r)?(e=!0,vi(t)):e=!1,no(t,n),yo(t,r,i),_o(t,r,i,n),qa(null,t,r,!0,e,n);case 19:return ts(e,t,n);case 23:case 24:return Ba(e,t,n)}throw Error(a(156,t.tag))},tl.prototype.render=function(e){Ju(e,this._internalRoot,null,null)},tl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ju(null,e,null,(function(){t[Jr]=null}))},tt=function(e){13===e.tag&&(hu(e,4,lu()),el(e,4))},nt=function(e){13===e.tag&&(hu(e,67108864,lu()),el(e,67108864))},rt=function(e){if(13===e.tag){var t=lu(),n=cu(e);hu(e,n,t),el(e,n)}},it=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ni(r);if(!i)throw Error(a(90));J(r),ne(r,i)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Pe=yu,Oe=function(e,t,n,r,i){var o=As;As|=4;try{return qi(98,e.bind(null,t,n,r,i))}finally{0===(As=o)&&(Gs(),$i())}},Re=function(){0===(49&As)&&(function(){if(null!==tu){var e=tu;tu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,pu(e,Ui())}))}$i()}(),Nu())},De=function(e,t){var n=As;As|=2;try{return e(t)}finally{0===(As=n)&&(Gs(),$i())}};var ol={Events:[ei,ti,ni,Le,Ne,Nu,{current:!1}]},al={findFiberByHostInstance:Qr,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},sl={bundleType:al.bundleType,version:al.version,rendererPackageName:al.rendererPackageName,rendererConfig:al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:al.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{bi=ul.inject(sl),xi=ul}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ol,t.createPortal=il,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=As;if(0!==(48&n))return e(t);As|=1;try{if(e)return qi(99,e.bind(null,t))}finally{As=n,$i()}},t.hydrate=function(e,t,n){if(!nl(t))throw Error(a(200));return rl(null,e,t,!0,n)},t.render=function(e,t,n){if(!nl(t))throw Error(a(200));return rl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nl(e))throw Error(a(40));return!!e._reactRootContainer&&(vu((function(){rl(null,null,e,!1,(function(){e._reactRootContainer=null,e[Jr]=null}))})),!0)},t.unstable_batchedUpdates=yu,t.unstable_createPortal=function(e,t){return il(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return rl(e,t,n,!1,r)},t.version="17.0.1"},function(e,t,n){"use strict";e.exports=n(103)},function(e,t,n){"use strict";var r,i,o,a;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var u=Date,l=u.now();t.unstable_now=function(){return u.now()-l}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,h=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==c?setTimeout(r,0,e):(c=e,setTimeout(f,0))},i=function(e,t){h=setTimeout(e,t)},o=function(){clearTimeout(h)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var g=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,y=null,v=-1,_=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,w=x.port2;x.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();b=e+_;try{y(!0,e)?w.postMessage(null):(m=!1,y=null)}catch(n){throw w.postMessage(null),n}}else m=!1},r=function(e){y=e,m||(m=!0,w.postMessage(null))},i=function(e,n){v=p((function(){e(t.unstable_now())}),n)},o=function(){d(v),v=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<k(i,t)))break e;e[r]=t,e[n]=i,n=r}}function S(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>k(a,n))void 0!==u&&0>k(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>k(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function k(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],I=[],A=1,M=null,L=3,N=!1,P=!1,O=!1;function R(e){for(var t=S(I);null!==t;){if(null===t.callback)T(I);else{if(!(t.startTime<=e))break;T(I),t.sortIndex=t.expirationTime,E(C,t)}t=S(I)}}function D(e){if(O=!1,R(e),!P)if(null!==S(C))P=!0,r(F);else{var t=S(I);null!==t&&i(D,t.startTime-e)}}function F(e,n){P=!1,O&&(O=!1,o()),N=!0;var r=L;try{for(R(n),M=S(C);null!==M&&(!(M.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=M.callback;if("function"===typeof a){M.callback=null,L=M.priorityLevel;var s=a(M.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?M.callback=s:M===S(C)&&T(C),R(n)}else T(C);M=S(C)}if(null!==M)var u=!0;else{var l=S(I);null!==l&&i(D,l.startTime-n),u=!1}return u}finally{M=null,L=r,N=!1}}var z=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||N||(P=!0,r(F))},t.unstable_getCurrentPriorityLevel=function(){return L},t.unstable_getFirstCallbackNode=function(){return S(C)},t.unstable_next=function(e){switch(L){case 1:case 2:case 3:var t=3;break;default:t=L}var n=L;L=t;try{return e()}finally{L=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=z,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=L;L=e;try{return t()}finally{L=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:A++,callback:n,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(e.sortIndex=a,E(I,e),null===S(C)&&e===S(I)&&(O?o():O=!0,i(D,a-s))):(e.sortIndex=u,E(C,e),P||N||(P=!0,r(F))),e},t.unstable_wrapCallback=function(e){var t=L;return function(){var n=L;L=t;try{return e.apply(this,arguments)}finally{L=n}}}},,function(e,t,n){var r=n(106);function i(t,n,o){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},i(t,n,o||t)}e.exports=i},function(e,t,n){var r=n(30);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){var r=n(67),i=n(68),o=n(31),a=n(70);e.exports=function(e){return r(e)||i(e)||o(e)||a()}},function(e,t,n){var r=n(69);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},function(e,t,n){var r=n(30),i=n(47),o=n(113),a=n(64);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},s(t)}e.exports=s},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var r=n(47);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(30),i=n(65),o=n(66);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var a=r(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}}},,,,,,,,,function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(L){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new I(r||[]);return o._invoke=function(e,t,n){var r=h;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=c(e,t,n);if("normal"===u.type){if(r=n.done?d:f,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}e.wrap=l;var h="suspendedStart",f="suspendedYield",p="executing",d="completed",g={};function m(){}function y(){}function v(){}var _={};_[o]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(A([])));x&&x!==n&&r.call(x,o)&&(_=x);var w=v.prototype=m.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"===typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function T(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=c(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function A(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:M}}function M(){return{value:t,done:!0}}return y.prototype=w.constructor=v,v.constructor=y,y.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),S.prototype[a]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),u(w,s,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},function(e,t,n){var r=n(41),i=n(127),o=n(128);e.exports=function(e){if(!e)return[];var t=i(r(e)),n=[];return t.features.forEach((function(e){e.geometry&&(n=n.concat(o(e.geometry.coordinates)))})),n}},function(e,t){e.exports=function e(t){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce((function(t,n){return t.concat(e(n))}),[]),t;case"Feature":return t.geometry?e(t.geometry).map((function(e){var n={type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e};return void 0!==t.id&&(n.id=t.id),n})):t;case"MultiPoint":return t.coordinates.map((function(e){return{type:"Point",coordinates:e}}));case"MultiPolygon":return t.coordinates.map((function(e){return{type:"Polygon",coordinates:e}}));case"MultiLineString":return t.coordinates.map((function(e){return{type:"LineString",coordinates:e}}));case"GeometryCollection":return t.geometries.map(e).reduce((function(e,t){return e.concat(t)}),[]);case"Point":case"Polygon":case"LineString":return[t]}}},function(e,t){e.exports=function(e){return function e(t){if(Array.isArray(t)&&t.length&&"number"===typeof t[0])return[t];return t.reduce((function(t,n){return Array.isArray(n)&&Array.isArray(n[0])?t.concat(e(n)):(t.push(n),t)}),[])}(e)}},function(e,t){var n=e.exports=function(e){return new r(e)};function r(e){this.value=e}function i(e,t,n){var r=[],i=[],s=!0;return function e(h){var f=n?o(h):h,p={},d=!0,g={node:f,node_:h,path:[].concat(r),parent:i[i.length-1],parents:i,key:r.slice(-1)[0],isRoot:0===r.length,level:r.length,circular:null,update:function(e,t){g.isRoot||(g.parent.node[g.key]=e),g.node=e,t&&(d=!1)},delete:function(e){delete g.parent.node[g.key],e&&(d=!1)},remove:function(e){u(g.parent.node)?g.parent.node.splice(g.key,1):delete g.parent.node[g.key],e&&(d=!1)},keys:null,before:function(e){p.before=e},after:function(e){p.after=e},pre:function(e){p.pre=e},post:function(e){p.post=e},stop:function(){s=!1},block:function(){d=!1}};if(!s)return g;function m(){if("object"===typeof g.node&&null!==g.node){g.keys&&g.node_===g.node||(g.keys=a(g.node)),g.isLeaf=0==g.keys.length;for(var e=0;e<i.length;e++)if(i[e].node_===h){g.circular=i[e];break}}else g.isLeaf=!0,g.keys=null;g.notLeaf=!g.isLeaf,g.notRoot=!g.isRoot}m();var y=t.call(g,g.node);return void 0!==y&&g.update&&g.update(y),p.before&&p.before.call(g,g.node),d?("object"!=typeof g.node||null===g.node||g.circular||(i.push(g),m(),l(g.keys,(function(t,i){r.push(t),p.pre&&p.pre.call(g,g.node[t],t);var o=e(g.node[t]);n&&c.call(g.node,t)&&(g.node[t]=o.node),o.isLast=i==g.keys.length-1,o.isFirst=0==i,p.post&&p.post.call(g,o),r.pop()})),i.pop()),p.after&&p.after.call(g,g.node),g):g}(e).node}function o(e){if("object"===typeof e&&null!==e){var t;if(u(e))t=[];else if("[object Date]"===s(e))t=new Date(e.getTime?e.getTime():e);else if(function(e){return"[object RegExp]"===s(e)}(e))t=new RegExp(e);else if(function(e){return"[object Error]"===s(e)}(e))t={message:e.message};else if(function(e){return"[object Boolean]"===s(e)}(e))t=new Boolean(e);else if(function(e){return"[object Number]"===s(e)}(e))t=new Number(e);else if(function(e){return"[object String]"===s(e)}(e))t=new String(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var n=e.constructor&&e.constructor.prototype||e.__proto__||{},r=function(){};r.prototype=n,t=new r}return l(a(e),(function(n){t[n]=e[n]})),t}return e}r.prototype.get=function(e){for(var t=this.value,n=0;n<e.length;n++){var r=e[n];if(!t||!c.call(t,r)){t=void 0;break}t=t[r]}return t},r.prototype.has=function(e){for(var t=this.value,n=0;n<e.length;n++){var r=e[n];if(!t||!c.call(t,r))return!1;t=t[r]}return!0},r.prototype.set=function(e,t){for(var n=this.value,r=0;r<e.length-1;r++){var i=e[r];c.call(n,i)||(n[i]={}),n=n[i]}return n[e[r]]=t,t},r.prototype.map=function(e){return i(this.value,e,!0)},r.prototype.forEach=function(e){return this.value=i(this.value,e,!1),this.value},r.prototype.reduce=function(e,t){var n=1===arguments.length,r=n?this.value:t;return this.forEach((function(t){this.isRoot&&n||(r=e.call(this,r,t))})),r},r.prototype.paths=function(){var e=[];return this.forEach((function(t){e.push(this.path)})),e},r.prototype.nodes=function(){var e=[];return this.forEach((function(t){e.push(this.node)})),e},r.prototype.clone=function(){var e=[],t=[];return function n(r){for(var i=0;i<e.length;i++)if(e[i]===r)return t[i];if("object"===typeof r&&null!==r){var s=o(r);return e.push(r),t.push(s),l(a(r),(function(e){s[e]=n(r[e])})),e.pop(),t.pop(),s}return r}(this.value)};var a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};function s(e){return Object.prototype.toString.call(e)}var u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)};l(a(r.prototype),(function(e){n[e]=function(t){var n=[].slice.call(arguments,1),i=new r(t);return i[e].apply(i,n)}}));var c=Object.hasOwnProperty||function(e,t){return t in e}},function(e,t){function n(e){if(!(this instanceof n))return new n(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}e.exports=n,n.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this},n.prototype.equals=function(e){var t;return t=e instanceof n?e.bbox():e,this._bbox[0]==t[0]&&this._bbox[1]==t[1]&&this._bbox[2]==t[2]&&this._bbox[3]==t[3]},n.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},n.prototype.union=function(e){var t;return this._valid=!0,t=e instanceof n?e.bbox():e,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this},n.prototype.bbox=function(){return this._valid?this._bbox:null},n.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var t=e[0],n=e[1];return this._bbox[0]<=t&&this._bbox[1]<=n&&this._bbox[2]>=t&&this._bbox[3]>=n},n.prototype.intersect=function(e){return this._valid?(t=e instanceof n?e.bbox():e,!(this._bbox[0]>t[2]||this._bbox[2]<t[0]||this._bbox[3]<t[1]||this._bbox[1]>t[3])):null;var t},n.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)},n.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},function(e,t){},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,i="/"===a.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),a="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&a&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var l=[];for(u=s;u<i.length;u++)l.push("..");return(l=l.concat(o.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(48))},function(e,t,n){var r=n(134);e.exports.hint=function(e,t){var n=[],i=0;function o(e){if(t&&!1===t.noDuplicateMembers||!e.__duplicateProperties__||n.push({message:"An object contained duplicate members, making parsing ambigous: "+e.__duplicateProperties__.join(", "),line:e.__line__}),!s(e,"type","string"))if(p[e.type])e&&p[e.type](e);else{var r=d[e.type.toLowerCase()];void 0!==r?n.push({message:"Expected "+r+" but got "+e.type+" (case sensitive)",line:e.__line__}):n.push({message:"The type "+e.type+" is unknown",line:e.__line__})}}function a(e,t){return e.every((function(e){return null!==e&&typeof e===t}))}function s(e,t,r){if("undefined"===typeof e[t])return n.push({message:'"'+t+'" member required',line:e.__line__});if("array"===r){if(!Array.isArray(e[t]))return n.push({message:'"'+t+'" member should be an array, but is an '+typeof e[t]+" instead",line:e.__line__})}else{if("object"===r&&e[t]&&e[t].constructor!==Object)return n.push({message:'"'+t+'" member should be '+r+", but is an "+e[t].constructor.name+" instead",line:e.__line__});if(r&&typeof e[t]!==r)return n.push({message:'"'+t+'" member should be '+r+", but is an "+typeof e[t]+" instead",line:e.__line__})}}function u(e,r){if(!Array.isArray(e))return n.push({message:"position should be an array, is a "+typeof e+" instead",line:e.__line__||r});if(e.length<2)return n.push({message:"position must have 2 or more elements",line:e.__line__||r});if(e.length>3)return n.push({message:"position should not have more than 3 elements",level:"message",line:e.__line__||r});if(!a(e,"number"))return n.push({message:"each element in a position must be a number",line:e.__line__||r});if(t&&t.precisionWarning){if(10===i)return i+=1,n.push({message:"truncated warnings: we've encountered coordinate precision warning 10 times, no more warnings will be reported",level:"message",line:e.__line__||r});i<10&&e.forEach((function(t){var o=0,a=String(t).split(".")[1];if(void 0!==a&&(o=a.length),o>6)return i+=1,n.push({message:"precision of coordinates should be reduced",level:"message",line:e.__line__||r})}))}}function l(e,t,r,i){if(void 0===i&&void 0!==e.__line__&&(i=e.__line__),0===r)return u(e,i);if(1===r&&t)if("LinearRing"===t){if(!Array.isArray(e[e.length-1]))return n.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:i}),!0;if(e.length<4&&n.push({message:"a LinearRing of coordinates needs to have four or more positions",line:i}),e.length&&(e[e.length-1].length!==e[0].length||!e[e.length-1].every((function(t,n){return e[0][n]===t}))))return n.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:i}),!0}else if("Line"===t&&e.length<2)return n.push({message:"a line needs to have two or more coordinates to be valid",line:i});if(Array.isArray(e))return e.map((function(e){return l(e,t,r-1,e.__line__||i)})).some((function(e){return e}));n.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:i})}function c(e){if(e.crs){"object"===typeof e.crs&&e.crs.properties&&"urn:ogc:def:crs:OGC:1.3:CRS84"===e.crs.properties.name?n.push({message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:e.__line__}):n.push({message:"old-style crs member is not recommended",line:e.__line__})}}function h(e){if(e.bbox)return Array.isArray(e.bbox)?(a(e.bbox,"number")||n.push({message:"each element in a bbox member must be a number",line:e.bbox.__line__}),4!==e.bbox.length&&6!==e.bbox.length&&n.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:e.bbox.__line__}),n.length):void n.push({message:"bbox member must be an array of numbers, but is a "+typeof e.bbox,line:e.__line__})}function f(e){c(e),h(e),void 0!==e.id&&"string"!==typeof e.id&&"number"!==typeof e.id&&n.push({message:'Feature "id" member must have a string or number value',line:e.__line__}),void 0!==e.features&&n.push({message:'Feature object cannot contain a "features" member',line:e.__line__}),void 0!==e.coordinates&&n.push({message:'Feature object cannot contain a "coordinates" member',line:e.__line__}),"Feature"!==e.type&&n.push({message:"GeoJSON features must have a type=feature member",line:e.__line__}),s(e,"properties","object"),s(e,"geometry","object")||e.geometry&&o(e.geometry)}var p={Point:function(e){var t;c(e),h(e),void 0!==(t=e).properties&&n.push({message:'geometry object cannot contain a "properties" member',line:t.__line__}),void 0!==t.geometry&&n.push({message:'geometry object cannot contain a "geometry" member',line:t.__line__}),void 0!==t.features&&n.push({message:'geometry object cannot contain a "features" member',line:t.__line__}),s(e,"coordinates","array")||u(e.coordinates)},Feature:f,MultiPoint:function(e){c(e),h(e),s(e,"coordinates","array")||l(e.coordinates,"",1)},LineString:function(e){c(e),h(e),s(e,"coordinates","array")||l(e.coordinates,"Line",1)},MultiLineString:function(e){c(e),h(e),s(e,"coordinates","array")||l(e.coordinates,"Line",2)},FeatureCollection:function(e){if(c(e),h(e),void 0!==e.properties&&n.push({message:'FeatureCollection object cannot contain a "properties" member',line:e.__line__}),void 0!==e.coordinates&&n.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:e.__line__}),!s(e,"features","array")){if(!a(e.features,"object"))return n.push({message:"Every feature must be an object",line:e.__line__});e.features.forEach(f)}},GeometryCollection:function(e){c(e),h(e),s(e,"geometries","array")||(a(e.geometries,"object")||n.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:e.__line__}),1===e.geometries.length&&n.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:e.geometries.__line__}),e.geometries.forEach((function(t){t&&("GeometryCollection"===t.type&&n.push({message:"GeometryCollection should avoid nested geometry collections",line:e.geometries.__line__}),o(t))})))},Polygon:function(e){c(e),h(e),s(e,"coordinates","array")||l(e.coordinates,"LinearRing",2)||r(e,n)},MultiPolygon:function(e){c(e),h(e),s(e,"coordinates","array")||l(e.coordinates,"LinearRing",3)||r(e,n)}},d=Object.keys(p).reduce((function(e,t){return e[t.toLowerCase()]=t,e}),{});return"object"!==typeof e||null===e||void 0===e?(n.push({message:"The root of a GeoJSON object must be an object.",line:0}),n):(o(e),n.forEach((function(e){({}).hasOwnProperty.call(e,"line")&&void 0===e.line&&delete e.line})),n)}},function(e,t){function n(e){return e*Math.PI/180}function r(e){var t=0;if(e.length>2)for(var r,i,o=0;o<e.length-1;o++)r=e[o],t+=n((i=e[o+1])[0]-r[0])*(2+Math.sin(n(r[1]))+Math.sin(n(i[1])));return t>=0}function i(e){if(e&&e.length>0){if(r(e[0]))return!1;if(!e.slice(1,e.length).every(r))return!1}return!0}e.exports=function(e,t){(function(e){return"Polygon"===e.type?i(e.coordinates):"MultiPolygon"===e.type?e.coordinates.every(i):void 0})(e)||t.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:e.__line__})}},function(e,t,n){},function(e,t,n){var r=n(137);e.exports=function(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}},function(e,t,n){"use strict";n.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1pJREFUeNrElk9IVFEUxs+89yYoDAumxUgkoYIDZfaXCqfA3GSBi8poEYWzjVrUJiqiJFoJZUEQEYYRBAaFpIsgq5F0UThYZJSLdKEtgpRSQd/M6zvXe8c743vznhs78GOGmXfPd+49551zQ47j0BKtGqyV31Pg95JWs6APO8AdMOC42wToBAlg+fkLaTuMgFMgDpLgLbgKDucEOPmdnLm/4rtRXEEULtL/HgLPwBWvDSpBFhsE0UVPwHl65CWlR7uF2CKDoBndR0ZpPRmRrerXbnAWDHsJNoPLmfF3cN5NVqyJQog+PfyU7K8PhWgQY0Fr+yUKrRJxz4Bd4LOb4Buwfy55hjK/BsgsP07OxDfxPfsgnBgl2EkENRNePX+84pkUcaD6jq2qc2RuqFeiVfpOXQVzIoKQiR1LB+6FNz1O9mBrjjDvVK7pA3uzp1DoiPhYV9S26dE+BkdBreQC6OWgwrtvChFl9uBtlfM9MmX+gsa6bWQjj3LhSvBIVmGPpEVWNQvPcGBZUeSdRaUdCCTIRZNG0aTHskcV93i0RRaIEOUaYOP0aLusFkftV3miWNZUkNZZvIyr8STosCqbyJkapxAKiNMi85jSO02z429jIBKgMz1xWZtQ/+sPsmjS5eEfoD2gmOI8eA7adLH81rYsZtAy238V3CSnhCM/6wL6WA86wYRcm09S+s6Zh+Vg2qVg6gIUSFeACv+iZqV6Dxu4k6RHu8j+eINMvEdWLMG/Xwf9wGtcbAQHuZfOvj7tOlXC8bs8RWKyafQYegfJjCXnOwy6i9Yh7hc4zmLVxgKPMPkplMzyxoW5239ROTkB3nvklLtHH3cTMR0qm1Rn8RXkLjvEA1T1QXFMGFfaTl/JwLjzX5O0gxIRLE8Ue8r9VqCZyqEt7yEd1mbcDGb/EOeTF7OoWdZIFgcSLqrBMzX5TrhJa+OocG/O6zRcKQ9EBJ9axbTIv0KEFu4tRNM/5ycCTiNnYJcdE+vZeJ7KY+aFKbfWlhUVkaNqdYeFjNPBk4KvGSpYmaLs1PfqpUdkrmJCGFcHruAMXxH1Y4Njvioa0TiZpYfyr4y67QQfCgmy8ep7clpHA3adXnALjGjDOqnE/AT1C3KDdLBFTW5pk/LVYKcvdMde9k+AAQDas8HyPpQD4AAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";n.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAActJREFUeNpi/P//PwMJwAWIbYH4MBDvIUUjA8giIvGy/6igmQS9RFnEA7fk1+f/v6/NQbZsGbUsAllyDGbJz73x/3+ss/r/61A2mE+KZUwEQnY6EFv+/3ib4de+BAYQDQL/3pxn+HU4h4Hh9xcQNxKIiwlFESGLQBHP8PtEJcP/b89R4xZo6e+zrSjq8AEWAvKg1CXPJOcJNPgOAyO3JMPfOysZmCTtIK4UMUBWR1Gqc0GOeVBCAMURWoIAARNK4wiUV1yBuAlZkJGVB8YsAWJTID5DrXzkAkt5f1+fI8knpOQjbBn2GimWgDAjiUWQIBAbQCP/DykaSbWIbMDEQCdAjkUGtLYoGYiPAfF5KK1Di2oiGZbc/n24BWM+A2IRYlMdMT4ygZVlf4BlG6hw/ff8EIgrSUwZR2zQgSw5DcTxYN9DC9Z/H27D5NdBg5Fii+pBBKggBWE4+POV4c/1ubBqw5KYaoJQPvoAxPw/t7jD6h5UVwJLcVaLdhBzIxAHUOIjcPHPZjuFgQFRkEJcyK/KwKKZRLVqQgZWlYNS24/NbuBqAlSlI1Xlx6hVqKJY9ut4BcntBVJKb7hl5LSAyCm9i5EakL2kaAQIMAAP/aLE8VYEBwAAAABJRU5ErkJggg=="},function(e,t,n){var r=n(49),i=n(32),o=n(4),a=n(24),s=n(54).default,u=r({},i.modes.draw_polygon);u.onSetup=function(e){var t=this.newFeature({type:o.geojsonTypes.FEATURE,properties:{isCircle:!0,center:[]},geometry:{type:o.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),a.disable(this),this.updateUIClasses({mouse:o.cursors.ADD}),this.activateUIButton(o.types.POLYGON),this.setActionableState({trash:!0}),{initialRadiusInKm:e.initialRadiusInKm||2,polygon:t,currentVertexPosition:0}},u.clickAnywhere=function(e,t){if(0===e.currentVertexPosition){e.currentVertexPosition++;var n=[t.lngLat.lng,t.lngLat.lat],r=s(n,e.initialRadiusInKm);e.polygon.incomingCoords(r.geometry.coordinates),e.polygon.properties.center=n,e.polygon.properties.radiusInKm=e.initialRadiusInKm}return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},e.exports=u},function(e,t,n){var r=n(142),i=n(152),o=n(156),a=n(4),s=n(8);e.exports=function(e){var t=null,n=null,u={onRemove:function(){return e.map.off("load",u.connect),clearInterval(n),u.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.map=null,e.container=null,e.store=null,t&&t.parentNode&&t.parentNode.removeChild(t),t=null,this},connect:function(){e.map.off("load",u.connect),clearInterval(n),u.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd:function(a){var l=a.fire;return a.fire=function(e,t){var n=arguments;return 1===l.length&&1!==arguments.length&&(n=[s({},{type:e},t)]),l.apply(a,n)},e.map=a,e.events=r(e),e.ui=o(e),e.container=a.getContainer(),e.store=new i(e),t=e.ui.addButtons(),e.options.boxSelect&&(a.boxZoom.disable(),a.dragPan.disable(),a.dragPan.enable()),a.loaded()?u.connect():(a.on("load",u.connect),n=setInterval((function(){a.loaded()&&u.connect()}),16)),e.events.start(),t},addLayers:function(){e.map.addSource(a.sources.COLD,{data:{type:a.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(a.sources.HOT,{data:{type:a.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach((function(t){e.map.addLayer(t)})),e.store.setDirty(!0),e.store.render()},removeLayers:function(){e.options.styles.forEach((function(t){e.map.getLayer(t.id)&&e.map.removeLayer(t.id)})),e.map.getSource(a.sources.COLD)&&e.map.removeSource(a.sources.COLD),e.map.getSource(a.sources.HOT)&&e.map.removeSource(a.sources.HOT)}};return e.setup=u,u}},function(e,t,n){var r=n(143),i=n(144),o=n(33),a=n(147),s=n(148),u=n(4),l=n(149);e.exports=function(e){var t=Object.keys(e.options.modes).reduce((function(t,n){return t[n]=l(e.options.modes[n]),t}),{}),n={},c={},h={},f=null,p=null;h.drag=function(t,n){n({point:t.point,time:(new Date).getTime()})?(e.ui.queueMapClasses({mouse:u.cursors.DRAG}),p.drag(t)):t.originalEvent.stopPropagation()},h.mousedrag=function(e){h.drag(e,(function(e){return!a(n,e)}))},h.touchdrag=function(e){h.drag(e,(function(e){return!s(c,e)}))},h.mousemove=function(t){if(1===(void 0!==t.originalEvent.buttons?t.originalEvent.buttons:t.originalEvent.which))return h.mousedrag(t);var n=i(t,e);t.featureTarget=n,p.mousemove(t)},h.mousedown=function(t){n={time:(new Date).getTime(),point:t.point};var r=i(t,e);t.featureTarget=r,p.mousedown(t)},h.mouseup=function(t){var r=i(t,e);t.featureTarget=r,a(n,{point:t.point,time:(new Date).getTime()})?p.click(t):p.mouseup(t)},h.mouseout=function(e){p.mouseout(e)},h.touchstart=function(t){if(t.originalEvent.preventDefault(),e.options.touchEnabled){c={time:(new Date).getTime(),point:t.point};var n=o.touch(t,null,e)[0];t.featureTarget=n,p.touchstart(t)}},h.touchmove=function(t){if(t.originalEvent.preventDefault(),e.options.touchEnabled)return p.touchmove(t),h.touchdrag(t)},h.touchend=function(t){if(t.originalEvent.preventDefault(),e.options.touchEnabled){var n=o.touch(t,null,e)[0];t.featureTarget=n,s(c,{time:(new Date).getTime(),point:t.point})?p.tap(t):p.touchend(t)}};var d=function(e){return!(8===e||46===e||e>=48&&e<=57)};function g(n,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};p.stop();var a=t[n];if(void 0===a)throw new Error("".concat(n," is not valid"));f=n;var s=a(e,i);p=r(s,e),o.silent||e.map.fire(u.events.MODE_CHANGE,{mode:n}),e.store.setDirty(),e.store.render()}h.keydown=function(t){"mapboxgl-canvas"===(t.srcElement||t.target).classList[0]&&(8!==t.keyCode&&46!==t.keyCode||!e.options.controls.trash?d(t.keyCode)?p.keydown(t):49===t.keyCode&&e.options.controls.point?g(u.modes.DRAW_POINT):50===t.keyCode&&e.options.controls.line_string?g(u.modes.DRAW_LINE_STRING):51===t.keyCode&&e.options.controls.polygon&&g(u.modes.DRAW_POLYGON):(t.preventDefault(),p.trash()))},h.keyup=function(e){d(e.keyCode)&&p.keyup(e)},h.zoomend=function(){e.store.changeZoom()},h.data=function(t){if("style"===t.dataType){var n=e.setup,r=e.map,i=e.options,o=e.store;i.styles.some((function(e){return r.getLayer(e.id)}))||(n.addLayers(),o.setDirty(),o.render())}};var m={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){f=e.options.defaultMode,p=r(t[f](e),e)},changeMode:g,actionable:function(t){var n=!1;Object.keys(t).forEach((function(e){if(void 0===m[e])throw new Error("Invalid action type");m[e]!==t[e]&&(n=!0),m[e]=t[e]})),n&&e.map.fire(u.events.ACTIONABLE,{actions:m})},currentModeName:function(){return f},currentModeRender:function(e,t){return p.render(e,t)},fire:function(e,t){h[e]&&h[e](t)},addEventListeners:function(){e.map.on("mousemove",h.mousemove),e.map.on("mousedown",h.mousedown),e.map.on("mouseup",h.mouseup),e.map.on("data",h.data),e.map.on("touchmove",h.touchmove),e.map.on("touchstart",h.touchstart),e.map.on("touchend",h.touchend),e.container.addEventListener("mouseout",h.mouseout),e.options.keybindings&&(e.container.addEventListener("keydown",h.keydown),e.container.addEventListener("keyup",h.keyup))},removeEventListeners:function(){e.map.off("mousemove",h.mousemove),e.map.off("mousedown",h.mousedown),e.map.off("mouseup",h.mouseup),e.map.off("data",h.data),e.map.off("touchmove",h.touchmove),e.map.off("touchstart",h.touchstart),e.map.off("touchend",h.touchend),e.container.removeEventListener("mouseout",h.mouseout),e.options.keybindings&&(e.container.removeEventListener("keydown",h.keydown),e.container.removeEventListener("keyup",h.keyup))},trash:function(e){p.trash(e)},combineFeatures:function(){p.combineFeatures()},uncombineFeatures:function(){p.uncombineFeatures()},getMode:function(){return f}}}},function(e,t){e.exports=function(e,t){var n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},r={on:function(e,t,r){if(void 0===n[e])throw new Error("Invalid event type: ".concat(e));n[e].push({selector:t,fn:r})},render:function(e){t.store.featureChanged(e)}},i=function(e,i){for(var o=n[e],a=o.length;a--;){var s=o[a];if(s.selector(i)){s.fn.call(r,i),t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(r),{render:e.render,stop:function(){e.stop&&e.stop()},trash:function(){e.trash&&(e.trash(),t.store.render())},combineFeatures:function(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures:function(){e.uncombineFeatures&&e.uncombineFeatures()},drag:function(e){i("drag",e)},click:function(e){i("click",e)},mousemove:function(e){i("mousemove",e)},mousedown:function(e){i("mousedown",e)},mouseup:function(e){i("mouseup",e)},mouseout:function(e){i("mouseout",e)},keydown:function(e){i("keydown",e)},keyup:function(e){i("keyup",e)},touchstart:function(e){i("touchstart",e)},touchmove:function(e){i("touchmove",e)},touchend:function(e){i("touchend",e)},tap:function(e){i("tap",e)}}}},function(e,t,n){var r=n(33),i=n(4);e.exports=function(e,t){var n=r.click(e,null,t),o={mouse:i.cursors.NONE};return n[0]&&(o.mouse=n[0].properties.active===i.activeStates.ACTIVE?i.cursors.MOVE:i.cursors.POINTER,o.feature=n[0].properties.meta),-1!==t.events.currentModeName().indexOf("draw")&&(o.mouse=i.cursors.ADD),t.ui.queueMapClasses(o),t.ui.updateMapClasses(),n[0]}},function(e,t,n){var r=n(55),i=n(4),o={Point:0,LineString:1,Polygon:2};function a(e,t){var n=o[e.geometry.type]-o[t.geometry.type];return 0===n&&e.geometry.type===i.geojsonTypes.POLYGON?e.area-t.area:n}e.exports=function(e){return e.map((function(e){return e.geometry.type===i.geojsonTypes.POLYGON&&(e.area=r.geometry({type:i.geojsonTypes.FEATURE,property:{},geometry:e.geometry})),e})).sort(a).map((function(e){return delete e.area,e}))}},function(e,t){e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}},function(e,t,n){var r=n(77);e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null!=n.fineTolerance?n.fineTolerance:4,o=null!=n.grossTolerance?n.grossTolerance:12,a=null!=n.interval?n.interval:500;e.point=e.point||t.point,e.time=e.time||t.time;var s=r(e.point,t.point);return s<i||s<o&&t.time-e.time<a}},function(e,t,n){var r=n(77);e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null!=n.tolerance?n.tolerance:25,o=null!=n.interval?n.interval:250;e.point=e.point||t.point,e.time=e.time||t.time;var a=r(e.point,t.point);return a<i&&t.time-e.time<o}},function(e,t,n){var r=n(150),i={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},o=Object.keys(i);e.exports=function(e){var t=Object.keys(e);return function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={},u=t.reduce((function(t,n){return t[n]=e[n],t}),new r(n));function l(e){return function(t){u[e](s,t)}}return{start:function(){var t=this;s=u.onSetup(a),o.forEach((function(n){var r=i[n],o=function(){return!1};e[r]&&(o=function(){return!0}),t.on(n,o,l(r))}))},stop:function(){u.onStop(s)},trash:function(){u.onTrash(s)},combineFeatures:function(){u.onCombineFeatures(s)},uncombineFeatures:function(){u.onUncombineFeatures(s)},render:function(e,t){u.toDisplayFeatures(s,e,t)}}}}},function(e,t,n){var r=e.exports=n(151);r.prototype.onSetup=function(){},r.prototype.onDrag=function(){},r.prototype.onClick=function(){},r.prototype.onMouseMove=function(){},r.prototype.onMouseDown=function(){},r.prototype.onMouseUp=function(){},r.prototype.onMouseOut=function(){},r.prototype.onKeyUp=function(){},r.prototype.onKeyDown=function(){},r.prototype.onTouchStart=function(){},r.prototype.onTouchMove=function(){},r.prototype.onTouchEnd=function(){},r.prototype.onTap=function(){},r.prototype.onStop=function(){},r.prototype.onTrash=function(){},r.prototype.onCombineFeature=function(){},r.prototype.onUncombineFeature=function(){},r.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")}},function(e,t,n){var r=n(4),i=n(33),o=n(50),a=n(51),s=n(52),u=n(36),l=e.exports=function(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e};l.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)},l.prototype.setSelectedCoordinates=function(e){var t=this;this._ctx.store.setSelectedCoordinates(e),e.reduce((function(e,n){return void 0===e[n.feature_id]&&(e[n.feature_id]=!0,t._ctx.store.get(n.feature_id).changed()),e}),{})},l.prototype.getSelected=function(){return this._ctx.store.getSelected()},l.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},l.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)},l.prototype.getFeature=function(e){return this._ctx.store.get(e)},l.prototype.select=function(e){return this._ctx.store.select(e)},l.prototype.deselect=function(e){return this._ctx.store.deselect(e)},l.prototype.deleteFeature=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._ctx.store.delete(e,t)},l.prototype.addFeature=function(e){return this._ctx.store.add(e)},l.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},l.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},l.prototype.setActionableState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)},l.prototype.changeMode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._ctx.events.changeMode(e,t,n)},l.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)},l.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)},l.prototype.featuresAt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"click";if("click"!==n&&"touch"!==n)throw new Error("invalid buffer type");return i[n](e,t,this._ctx)},l.prototype.newFeature=function(e){var t=e.geometry.type;return t===r.geojsonTypes.POINT?new o(this._ctx,e):t===r.geojsonTypes.LINE_STRING?new a(this._ctx,e):t===r.geojsonTypes.POLYGON?new s(this._ctx,e):new u(this._ctx,e)},l.prototype.isInstanceOf=function(e,t){if(e===r.geojsonTypes.POINT)return t instanceof o;if(e===r.geojsonTypes.LINE_STRING)return t instanceof a;if(e===r.geojsonTypes.POLYGON)return t instanceof s;if("MultiFeature"===e)return t instanceof u;throw new Error("Unknown feature class: ".concat(e))},l.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)}},function(e,t,n){var r=n(153),i=n(154),o=n(34),a=n(155),s=n(4).interactions,u=e.exports=function(e){this._features={},this._featureIds=new o,this._selectedFeatureIds=new o,this._selectedCoordinates=[],this._changedFeatureIds=new o,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]},this.render=r(a,16,this),this.isDirty=!1};function l(e){var t=this,n=this._selectedCoordinates.filter((function(e){return t._selectedFeatureIds.has(e.feature_id)}));this._selectedCoordinates.length===n.length||e.silent||(this._emitSelectionChange=!0),this._selectedCoordinates=n}u.prototype.createRenderBatch=function(){var e=this,t=this.render,n=0;return this.render=function(){n++},function(){e.render=t,n>0&&e.render()}},u.prototype.setDirty=function(){return this.isDirty=!0,this},u.prototype.featureChanged=function(e){return this._changedFeatureIds.add(e),this},u.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},u.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},u.prototype.getAllIds=function(){return this._featureIds.values()},u.prototype.add=function(e){return this.featureChanged(e.id),this._features[e.id]=e,this._featureIds.add(e.id),this},u.prototype.delete=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(e).forEach((function(e){t._featureIds.has(e)&&(t._featureIds.delete(e),t._selectedFeatureIds.delete(e),n.silent||-1===t._deletedFeaturesToEmit.indexOf(t._features[e])&&t._deletedFeaturesToEmit.push(t._features[e]),delete t._features[e],t.isDirty=!0)})),l.call(this,n),this},u.prototype.get=function(e){return this._features[e]},u.prototype.getAll=function(){var e=this;return Object.keys(this._features).map((function(t){return e._features[t]}))},u.prototype.select=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(e).forEach((function(e){t._selectedFeatureIds.has(e)||(t._selectedFeatureIds.add(e),t._changedFeatureIds.add(e),n.silent||(t._emitSelectionChange=!0))})),this},u.prototype.deselect=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(e).forEach((function(e){t._selectedFeatureIds.has(e)&&(t._selectedFeatureIds.delete(e),t._changedFeatureIds.add(e),n.silent||(t._emitSelectionChange=!0))})),l.call(this,n),this},u.prototype.clearSelected=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this},u.prototype.setSelected=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=i(e),this.deselect(this._selectedFeatureIds.values().filter((function(t){return-1===e.indexOf(t)})),{silent:n.silent}),this.select(e.filter((function(e){return!t._selectedFeatureIds.has(e)})),{silent:n.silent}),this},u.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this},u.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},u.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},u.prototype.getSelected=function(){var e=this;return this._selectedFeatureIds.values().map((function(t){return e.get(t)}))},u.prototype.getSelectedCoordinates=function(){var e=this;return this._selectedCoordinates.map((function(t){return{coordinates:e.get(t.feature_id).getCoordinate(t.coord_path)}}))},u.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)},u.prototype.setFeatureProperty=function(e,t,n){this.get(e).setProperty(t,n),this.featureChanged(e)},u.prototype.storeMapConfig=function(){var e=this;s.forEach((function(t){e.ctx.map[t]&&(e._mapInitialConfig[t]=e.ctx.map[t].isEnabled())}))},u.prototype.restoreMapConfig=function(){var e=this;Object.keys(this._mapInitialConfig).forEach((function(t){e._mapInitialConfig[t]?e.ctx.map[t].enable():e.ctx.map[t].disable()}))},u.prototype.getInitialConfigValue=function(e){return void 0===this._mapInitialConfig[e]||this._mapInitialConfig[e]}},function(e,t){e.exports=function(e,t,n){var r,i;function o(){r=!1,i&&(a.apply(n,i),i=!1)}function a(){r?i=arguments:(r=!0,e.apply(n,arguments),setTimeout(o,t))}return a}},function(e,t){e.exports=function(e){return[].concat(e).filter((function(e){return void 0!==e}))}},function(e,t,n){var r=n(4);e.exports=function(){var e=this;if(!(e.ctx.map&&void 0!==e.ctx.map.getSource(r.sources.HOT)))return l();var t=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:t});var n=[],i=[];e.isDirty?i=e.getAllIds():(n=e.getChangedIds().filter((function(t){return void 0!==e.get(t)})),i=e.sources.hot.filter((function(t){return t.properties.id&&-1===n.indexOf(t.properties.id)&&void 0!==e.get(t.properties.id)})).map((function(e){return e.properties.id}))),e.sources.hot=[];var o=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter((function(e){var t=e.properties.id||e.properties.parent;return-1===n.indexOf(t)}));var a=o!==e.sources.cold.length||i.length>0;function s(n,r){var i=e.get(n).internal(t);e.ctx.events.currentModeRender(i,(function(t){e.sources[r].push(t)}))}if(n.forEach((function(e){return s(e,"hot")})),i.forEach((function(e){return s(e,"cold")})),a&&e.ctx.map.getSource(r.sources.COLD).setData({type:r.geojsonTypes.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(r.sources.HOT).setData({type:r.geojsonTypes.FEATURE_COLLECTION,features:e.sources.hot}),e._emitSelectionChange&&(e.ctx.map.fire(r.events.SELECTION_CHANGE,{features:e.getSelected().map((function(e){return e.toGeoJSON()})),points:e.getSelectedCoordinates().map((function(e){return{type:r.geojsonTypes.FEATURE,properties:{},geometry:{type:r.geojsonTypes.POINT,coordinates:e.coordinates}}}))}),e._emitSelectionChange=!1),e._deletedFeaturesToEmit.length){var u=e._deletedFeaturesToEmit.map((function(e){return e.toGeoJSON()}));e._deletedFeaturesToEmit=[],e.ctx.map.fire(r.events.DELETE,{features:u})}function l(){e.isDirty=!1,e.clearChangedIds()}l(),e.ctx.map.fire(r.events.RENDER,{})}},function(e,t,n){var r=n(8),i=n(4),o=["mode","feature","mouse"];e.exports=function(e){var t={},n=null,a={mode:null,feature:null,mouse:null},s={mode:null,feature:null,mouse:null};function u(e){s=r(s,e)}function l(){if(e.container){var t=[],n=[];o.forEach((function(e){s[e]!==a[e]&&(t.push("".concat(e,"-").concat(a[e])),null!==s[e]&&n.push("".concat(e,"-").concat(s[e])))})),t.length>0&&e.container.classList.remove.apply(e.container.classList,t),n.length>0&&e.container.classList.add.apply(e.container.classList,n),a=r(a,s)}}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement("button");return r.className="".concat(i.classes.CONTROL_BUTTON," ").concat(t.className),r.setAttribute("title",t.title),t.container.appendChild(r),r.addEventListener("click",(function(r){r.preventDefault(),r.stopPropagation(),r.target!==n?(f(e),t.onActivate()):h()}),!0),r}function h(){n&&(n.classList.remove(i.classes.ACTIVE_BUTTON),n=null)}function f(e){h();var r=t[e];r&&r&&"trash"!==e&&(r.classList.add(i.classes.ACTIVE_BUTTON),n=r)}return{setActiveButton:f,queueMapClasses:u,updateMapClasses:l,clearMapClasses:function(){u({mode:null,feature:null,mouse:null}),l()},addButtons:function(){var n=e.options.controls,r=document.createElement("div");return r.className="".concat(i.classes.CONTROL_GROUP," ").concat(i.classes.CONTROL_BASE),n?(n[i.types.LINE]&&(t[i.types.LINE]=c(i.types.LINE,{container:r,className:i.classes.CONTROL_BUTTON_LINE,title:"LineString tool ".concat(e.options.keybindings?"(l)":""),onActivate:function(){return e.events.changeMode(i.modes.DRAW_LINE_STRING)}})),n[i.types.POLYGON]&&(t[i.types.POLYGON]=c(i.types.POLYGON,{container:r,className:i.classes.CONTROL_BUTTON_POLYGON,title:"Polygon tool ".concat(e.options.keybindings?"(p)":""),onActivate:function(){return e.events.changeMode(i.modes.DRAW_POLYGON)}})),n[i.types.POINT]&&(t[i.types.POINT]=c(i.types.POINT,{container:r,className:i.classes.CONTROL_BUTTON_POINT,title:"Marker tool ".concat(e.options.keybindings?"(m)":""),onActivate:function(){return e.events.changeMode(i.modes.DRAW_POINT)}})),n.trash&&(t.trash=c("trash",{container:r,className:i.classes.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){e.events.trash()}})),n.combine_features&&(t.combine_features=c("combineFeatures",{container:r,className:i.classes.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){e.events.combineFeatures()}})),n.uncombine_features&&(t.uncombine_features=c("uncombineFeatures",{container:r,className:i.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){e.events.uncombineFeatures()}})),r):r},removeButtons:function(){Object.keys(t).forEach((function(e){var n=t[e];n.parentNode&&n.parentNode.removeChild(n),delete t[e]}))}}}},function(e,t,n){var r=n(8),i=n(4),o={defaultMode:i.modes.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:n(158),modes:n(78),controls:{},userProperties:!1},a={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},s={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function u(e,t){return e.map((function(e){return e.source?e:r(e,{id:"".concat(e.id,".").concat(t),source:"hot"===t?i.sources.HOT:i.sources.COLD})}))}e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r(e);return e.controls||(t.controls={}),!1===e.displayControlsDefault?t.controls=r(s,e.controls):t.controls=r(a,e.controls),(t=r(o,t)).styles=u(t.styles,"cold").concat(u(t.styles,"hot")),t}},function(e,t){e.exports=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}]},function(e,t,n){var r=n(23),i=n(160),o=n(37),a=n(34),s=n(24),u=n(39),l=n(4),c={onSetup:function(e){var t=this,n={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoveing:!1,canDragMove:!1,initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(n.initiallySelectedFeatureIds.filter((function(e){return void 0!==t.getFeature(e)}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),n},fireUpdate:function(){this.map.fire(l.events.UPDATE,{action:l.updateActions.MOVE,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},fireActionable:function(){var e=this,t=this.getSelected(),n=t.filter((function(t){return e.isInstanceOf("MultiFeature",t)})),r=!1;if(t.length>1){r=!0;var i=t[0].type.replace("Multi","");t.forEach((function(e){e.type.replace("Multi","")!==i&&(r=!1)}))}var o=n.length>0,a=t.length>0;this.setActionableState({combineFeatures:r,uncombineFeatures:o,trash:a})},getUniqueIds:function(e){return e.length?e.map((function(e){return e.properties.id})).filter((function(e){return void 0!==e})).reduce((function(e,t){return e.add(t),e}),new a).values():[]},stopExtendedInteractions:function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1},onStop:function(){s.enable(this)},onMouseMove:function(e){return this.stopExtendedInteractions(e)},onMouseOut:function(e){if(e.dragMoving)return this.fireUpdate()}};c.onTap=c.onClick=function(e,t){return r.noTarget(t)?this.clickAnywhere(e,t):r.isOfMetaType(l.meta.VERTEX)(t)?this.clickOnVertex(e,t):r.isFeature(t)?this.clickOnFeature(e,t):void 0},c.clickAnywhere=function(e){var t=this,n=this.getSelectedIds();n.length&&(this.clearSelectedFeatures(),n.forEach((function(e){return t.doRender(e)}))),s.enable(this),this.stopExtendedInteractions(e)},c.clickOnVertex=function(e,t){this.changeMode(l.modes.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:l.cursors.MOVE})},c.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},c.clickOnFeature=function(e,t){var n=this;s.disable(this),this.stopExtendedInteractions(e);var i=r.isShiftDown(t),o=this.getSelectedIds(),a=t.featureTarget.properties.id,u=this.isSelected(a);if(!i&&u&&this.getFeature(a).type!==l.geojsonTypes.POINT)return this.changeMode(l.modes.DIRECT_SELECT,{featureId:a});u&&i?(this.deselect(a),this.updateUIClasses({mouse:l.cursors.POINTER}),1===o.length&&s.enable(this)):!u&&i?(this.select(a),this.updateUIClasses({mouse:l.cursors.MOVE})):u||i||(o.forEach((function(e){return n.doRender(e)})),this.setSelected(a),this.updateUIClasses({mouse:l.cursors.MOVE})),this.doRender(a)},c.onMouseDown=function(e,t){return r.isActiveFeature(t)?this.startOnActiveFeature(e,t):this.drawConfig.boxSelect&&r.isShiftMousedown(t)?this.startBoxSelect(e,t):void 0},c.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=i(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0},c.onTouchStart=function(e,t){if(r.isActiveFeature(t))return this.startOnActiveFeature(e,t)},c.onDrag=function(e,t){return e.canDragMove?this.dragMove(e,t):this.drawConfig.boxSelect&&e.canBoxSelect?this.whileBoxSelect(e,t):void 0},c.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:l.cursors.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(l.classes.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));var n=i(t.originalEvent,this.map.getContainer()),r=Math.min(e.boxSelectStartLocation.x,n.x),o=Math.max(e.boxSelectStartLocation.x,n.x),a=Math.min(e.boxSelectStartLocation.y,n.y),s=Math.max(e.boxSelectStartLocation.y,n.y),u="translate(".concat(r,"px, ").concat(a,"px)");e.boxSelectElement.style.transform=u,e.boxSelectElement.style.WebkitTransform=u,e.boxSelectElement.style.width="".concat(o-r,"px"),e.boxSelectElement.style.height="".concat(s-a,"px")},c.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();var n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};u(this.getSelected(),n),e.dragMoveLocation=t.lngLat},c.onMouseUp=function(e,t){var n=this;if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){var r=[e.boxSelectStartLocation,i(t.originalEvent,this.map.getContainer())],o=this.featuresAt(null,r,"click"),a=this.getUniqueIds(o).filter((function(e){return!n.isSelected(e)}));a.length&&(this.select(a),a.forEach((function(e){return n.doRender(e)})),this.updateUIClasses({mouse:l.cursors.MOVE}))}this.stopExtendedInteractions(e)},c.toDisplayFeatures=function(e,t,n){t.properties.active=this.isSelected(t.properties.id)?l.activeStates.ACTIVE:l.activeStates.INACTIVE,n(t),this.fireActionable(),t.properties.active===l.activeStates.ACTIVE&&t.geometry.type!==l.geojsonTypes.POINT&&o(t).forEach(n)},c.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},c.onCombineFeatures=function(){var e=this.getSelected();if(!(0===e.length||e.length<2)){for(var t=[],n=[],r=e[0].type.replace("Multi",""),i=0;i<e.length;i++){var o=e[i];if(o.type.replace("Multi","")!==r)return;o.type.includes("Multi")?o.getCoordinates().forEach((function(e){t.push(e)})):t.push(o.getCoordinates()),n.push(o.toGeoJSON())}if(n.length>1){var a=this.newFeature({type:l.geojsonTypes.FEATURE,properties:n[0].properties,geometry:{type:"Multi".concat(r),coordinates:t}});this.addFeature(a),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([a.id]),this.map.fire(l.events.COMBINE_FEATURES,{createdFeatures:[a.toGeoJSON()],deletedFeatures:n})}this.fireActionable()}},c.onUncombineFeatures=function(){var e=this,t=this.getSelected();if(0!==t.length){for(var n=[],r=[],i=function(i){var o=t[i];e.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach((function(t){e.addFeature(t),t.properties=o.properties,n.push(t.toGeoJSON()),e.select([t.id])})),e.deleteFeature(o.id,{silent:!0}),r.push(o.toGeoJSON()))},o=0;o<t.length;o++)i(o);n.length>1&&this.map.fire(l.events.UNCOMBINE_FEATURES,{createdFeatures:n,deletedFeatures:r}),this.fireActionable()}},e.exports=c},function(e,t,n){var r=n(56);e.exports=function(e,t){var n=t.getBoundingClientRect();return new r(e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0))}},function(e,t,n){var r=n(4);e.exports=function(e,t,n,i){var o=t.geometry.coordinates,a=n.geometry.coordinates;if(o[1]>r.LAT_RENDERED_MAX||o[1]<r.LAT_RENDERED_MIN||a[1]>r.LAT_RENDERED_MAX||a[1]<r.LAT_RENDERED_MIN)return null;var s=i.project([o[0],o[1]]),u=i.project([a[0],a[1]]),l=i.unproject([(s.x+u.x)/2,(s.y+u.y)/2]);return{type:r.geojsonTypes.FEATURE,properties:{meta:r.meta.MIDPOINT,parent:e,lng:l.lng,lat:l.lat,coord_path:n.properties.coord_path},geometry:{type:r.geojsonTypes.POINT,coordinates:[l.lng,l.lat]}}}},function(e,t,n){var r=n(23),i=r.noTarget,o=r.isOfMetaType,a=r.isInactiveFeature,s=r.isShiftDown,u=n(37),l=n(53),c=n(24),h=n(4),f=n(23),p=n(39),d=o(h.meta.VERTEX),g=o(h.meta.MIDPOINT),m={fireUpdate:function(){this.map.fire(h.events.UPDATE,{action:h.updateActions.CHANGE_COORDINATES,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},fireActionable:function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})},startDragging:function(e,t){this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},stopDragging:function(e){this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null},onVertex:function(e,t){this.startDragging(e,t);var n=t.featureTarget.properties,r=e.selectedCoordPaths.indexOf(n.coord_path);s(t)||-1!==r?s(t)&&-1===r&&e.selectedCoordPaths.push(n.coord_path):e.selectedCoordPaths=[n.coord_path];var i=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(i)},onMidpoint:function(e,t){this.startDragging(e,t);var n=t.featureTarget.properties;e.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),e.selectedCoordPaths=[n.coord_path]},pathsToCoordinates:function(e,t){return t.map((function(t){return{feature_id:e,coord_path:t}}))},onFeature:function(e,t){0===e.selectedCoordPaths.length?this.startDragging(e,t):this.stopDragging(e)},dragFeature:function(e,t,n){p(this.getSelected(),n),e.dragMoveLocation=t.lngLat},dragVertex:function(e,t,n){for(var r=e.selectedCoordPaths.map((function(t){return e.feature.getCoordinate(t)})),i=r.map((function(e){return{type:h.geojsonTypes.FEATURE,properties:{},geometry:{type:h.geojsonTypes.POINT,coordinates:e}}})),o=l(i,n),a=0;a<r.length;a++){var s=r[a];e.feature.updateCoordinate(e.selectedCoordPaths[a],s[0]+o.lng,s[1]+o.lat)}},clickNoTarget:function(){this.changeMode(h.modes.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(h.modes.SIMPLE_SELECT)},clickActiveFeature:function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},onSetup:function(e){var t=e.featureId,n=this.getFeature(t);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===h.geojsonTypes.POINT)throw new TypeError("direct_select mode doesn't handle point features");var r={featureId:t,feature:n,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,r.selectedCoordPaths)),this.setSelected(t),c.disable(this),this.setActionableState({trash:!0}),r},onStop:function(){c.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(e,t,n){e.featureId===t.properties.id?(t.properties.active=h.activeStates.ACTIVE,n(t),u(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(n)):(t.properties.active=h.activeStates.INACTIVE,n(t)),this.fireActionable(e)},onTrash:function(e){e.selectedCoordPaths.sort().reverse().forEach((function(t){return e.feature.removeCoordinate(t)})),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),!1===e.feature.isValid()&&(this.deleteFeature([e.featureId]),this.changeMode(h.modes.SIMPLE_SELECT,{}))},onMouseMove:function(e,t){var n=f.isActiveFeature(t),r=d(t),i=0===e.selectedCoordPaths.length;n&&i||r&&!i?this.updateUIClasses({mouse:h.cursors.MOVE}):this.updateUIClasses({mouse:h.cursors.NONE}),this.stopDragging(e)},onMouseOut:function(e){e.dragMoving&&this.fireUpdate()}};m.onTouchStart=m.onMouseDown=function(e,t){return d(t)?this.onVertex(e,t):f.isActiveFeature(t)?this.onFeature(e,t):g(t)?this.onMidpoint(e,t):void 0},m.onDrag=function(e,t){if(!0===e.canDragMove){e.dragMoving=!0,t.originalEvent.stopPropagation();var n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,n):this.dragFeature(e,t,n),e.dragMoveLocation=t.lngLat}},m.onClick=function(e,t){return i(t)?this.clickNoTarget(e,t):f.isActiveFeature(t)?this.clickActiveFeature(e,t):a(t)?this.clickInactive(e,t):void this.stopDragging(e)},m.onTap=function(e,t){return i(t)?this.clickNoTarget(e,t):f.isActiveFeature(t)?this.clickActiveFeature(e,t):a(t)?this.clickInactive(e,t):void 0},m.onTouchEnd=m.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)},e.exports=m},function(e,t,n){var r=n(23),i=n(4),o={onSetup:function(){var e=this.newFeature({type:i.geojsonTypes.FEATURE,properties:{},geometry:{type:i.geojsonTypes.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:i.cursors.ADD}),this.activateUIButton(i.types.POINT),this.setActionableState({trash:!0}),{point:e}},stopDrawingAndRemove:function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(i.modes.SIMPLE_SELECT)}};o.onTap=o.onClick=function(e,t){this.updateUIClasses({mouse:i.cursors.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.map.fire(i.events.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[e.point.id]})},o.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})},o.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.point.id;if(t.properties.active=r?i.activeStates.ACTIVE:i.activeStates.INACTIVE,!r)return n(t)},o.onTrash=o.stopDrawingAndRemove,o.onKeyUp=function(e,t){if(r.isEscapeKey(t)||r.isEnterKey(t))return this.stopDrawingAndRemove(e,t)},e.exports=o},function(e,t,n){var r=n(23),i=n(24),o=n(4),a=n(79),s=n(38),u={onSetup:function(){var e=this.newFeature({type:o.geojsonTypes.FEATURE,properties:{},geometry:{type:o.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),i.disable(this),this.updateUIClasses({mouse:o.cursors.ADD}),this.activateUIButton(o.types.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&a(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:o.cursors.ADD}),e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},onMouseMove:function(e,t){e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat),r.isVertex(t)&&this.updateUIClasses({mouse:o.cursors.POINTER})}};u.onTap=u.onClick=function(e,t){return r.isVertex(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)},u.onKeyUp=function(e,t){r.isEscapeKey(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)):r.isEnterKey(t)&&this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},u.onStop=function(e){this.updateUIClasses({mouse:o.cursors.NONE}),i.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.polygon.id)&&(e.polygon.removeCoordinate("0.".concat(e.currentVertexPosition)),e.polygon.isValid()?this.map.fire(o.events.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT,{},{silent:!0})))},u.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.polygon.id;if(t.properties.active=r?o.activeStates.ACTIVE:o.activeStates.INACTIVE,!r)return n(t);if(0!==t.geometry.coordinates.length){var i=t.geometry.coordinates[0].length;if(!(i<3)){if(t.properties.meta=o.meta.FEATURE,n(s(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),i>3){var a=t.geometry.coordinates[0].length-3;n(s(e.polygon.id,t.geometry.coordinates[0][a],"0.".concat(a),!1))}if(i<=4){var u=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(n({type:o.geojsonTypes.FEATURE,properties:t.properties,geometry:{coordinates:u,type:o.geojsonTypes.LINE_STRING}}),3===i)return}return n(t)}}},u.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)},e.exports=u},function(e,t,n){var r=n(71),i=n(23),o=n(79),a=n(24),s=n(4),u=n(38),l={onSetup:function(e){var t,n,i=(e=e||{}).featureId,o="forward";if(i){if(!(t=this.getFeature(i)))throw new Error("Could not find a feature with the provided featureId");var u=e.from;if(u&&"Feature"===u.type&&u.geometry&&"Point"===u.geometry.type&&(u=u.geometry),u&&"Point"===u.type&&u.coordinates&&2===u.coordinates.length&&(u=u.coordinates),!u||!Array.isArray(u))throw new Error("Please use the `from` property to indicate which point to continue the line from");var l=t.coordinates.length-1;if(t.coordinates[l][0]===u[0]&&t.coordinates[l][1]===u[1]){var c;n=l+1,(c=t).addCoordinate.apply(c,[n].concat(r(t.coordinates[l])))}else{if(t.coordinates[0][0]!==u[0]||t.coordinates[0][1]!==u[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");var h;o="backwards",n=0,(h=t).addCoordinate.apply(h,[n].concat(r(t.coordinates[0])))}}else t=this.newFeature({type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.LINE_STRING,coordinates:[]}}),n=0,this.addFeature(t);return this.clearSelectedFeatures(),a.disable(this),this.updateUIClasses({mouse:s.cursors.ADD}),this.activateUIButton(s.types.LINE),this.setActionableState({trash:!0}),{line:t,currentVertexPosition:n,direction:o}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&o(t,e.line.coordinates[e.currentVertexPosition-1])||"backwards"===e.direction&&o(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:s.cursors.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),"forward"===e.direction?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[e.line.id]})},onMouseMove:function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),i.isVertex(t)&&this.updateUIClasses({mouse:s.cursors.POINTER})}};l.onTap=l.onClick=function(e,t){if(i.isVertex(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)},l.onKeyUp=function(e,t){i.isEnterKey(t)?this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[e.line.id]}):i.isEscapeKey(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT))},l.onStop=function(e){a.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.line.id)&&(e.line.removeCoordinate("".concat(e.currentVertexPosition)),e.line.isValid()?this.map.fire(s.events.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT,{},{silent:!0})))},l.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)},l.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.line.id;if(t.properties.active=r?s.activeStates.ACTIVE:s.activeStates.INACTIVE,!r)return n(t);t.geometry.coordinates.length<2||(t.properties.meta=s.meta.FEATURE,n(u(e.line.id,t.geometry.coordinates["forward"===e.direction?t.geometry.coordinates.length-2:1],"".concat("forward"===e.direction?t.geometry.coordinates.length-2:1),!1)),n(t))},e.exports=l},function(e,t,n){var r=n(58),i=n(41),o=n(14),a=n(33),s=n(167),u=n(168),l=n(4),c=n(34),h={Polygon:n(52),LineString:n(51),Point:n(50),MultiPolygon:n(36),MultiLineString:n(36),MultiPoint:n(36)};e.exports=function(e,t){return t.modes=l.modes,t.getFeatureIdsAt=function(t){return a.click({point:t},null,e).map((function(e){return e.properties.id}))},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:l.geojsonTypes.FEATURE_COLLECTION,features:e.store.getSelectedIds().map((function(t){return e.store.get(t)})).map((function(e){return e.toGeoJSON()}))}},t.getSelectedPoints=function(){return{type:l.geojsonTypes.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map((function(e){return{type:l.geojsonTypes.FEATURE,properties:{},geometry:{type:l.geojsonTypes.POINT,coordinates:e.coordinates}}}))}},t.set=function(n){if(void 0===n.type||n.type!==l.geojsonTypes.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");var r=e.store.createRenderBatch(),i=e.store.getAllIds().slice(),o=t.add(n),a=new c(o);return(i=i.filter((function(e){return!a.has(e)}))).length&&t.delete(i),r(),o},t.add=function(t){var n=u.hint(t,{precisionWarning:!1}).filter((function(e){return"message"!==e.level}));if(n.length)throw new Error(n[0].message);var a=JSON.parse(JSON.stringify(i(t))).features.map((function(t){if(t.id=t.id||o(),null===t.geometry)throw new Error("Invalid geometry: null");if(void 0===e.store.get(t.id)||e.store.get(t.id).type!==t.geometry.type){var n=h[t.geometry.type];if(void 0===n)throw new Error("Invalid geometry type: ".concat(t.geometry.type,"."));var i=new n(e,t);e.store.add(i)}else{var a=e.store.get(t.id);a.properties=t.properties,r(a.getCoordinates(),t.geometry.coordinates)||a.incomingCoords(t.geometry.coordinates)}return t.id}));return e.store.render(),a},t.get=function(t){var n=e.store.get(t);if(n)return n.toGeoJSON()},t.getAll=function(){return{type:l.geojsonTypes.FEATURE_COLLECTION,features:e.store.getAll().map((function(e){return e.toGeoJSON()}))}},t.delete=function(n){return e.store.delete(n,{silent:!0}),t.getMode()!==l.modes.DIRECT_SELECT||e.store.getSelectedIds().length?e.store.render():e.events.changeMode(l.modes.SIMPLE_SELECT,void 0,{silent:!0}),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:!0}),t.getMode()===l.modes.DIRECT_SELECT?e.events.changeMode(l.modes.SIMPLE_SELECT,void 0,{silent:!0}):e.store.render(),t},t.changeMode=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n===l.modes.SIMPLE_SELECT&&t.getMode()===l.modes.SIMPLE_SELECT?(s(r.featureIds||[],e.store.getSelectedIds())||(e.store.setSelected(r.featureIds,{silent:!0}),e.store.render()),t):(n===l.modes.DIRECT_SELECT&&t.getMode()===l.modes.DIRECT_SELECT&&r.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(n,r,{silent:!0}),t)},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:!0}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:!0}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:!0}),t},t.setFeatureProperty=function(n,r,i){return e.store.setFeatureProperty(n,r,i),t},t}},function(e,t){e.exports=function(e,t){return e.length===t.length&&JSON.stringify(e.map((function(e){return e})).sort())===JSON.stringify(t.map((function(e){return e})).sort())}},function(e,t,n){var r=n(76),i=n(169);e.exports.hint=function(e,t){var n,o=[];if("object"===typeof e)n=e;else{if("string"!==typeof e)return[{message:"Expected string or object as input",line:0}];try{n=r.parse(e)}catch(s){var a=s.message.match(/line (\d+)/);return[{line:parseInt(a[1],10)-1,message:s.message,error:s}]}}return o=o.concat(i.hint(n,t))}},function(e,t,n){var r=n(170);e.exports.hint=function(e,t){var n=[],i=0;function o(e){if(t&&!1===t.noDuplicateMembers||!e.__duplicateProperties__||n.push({message:"An object contained duplicate members, making parsing ambigous: "+e.__duplicateProperties__.join(", "),line:e.__line__}),!s(e,"type","string"))if(p[e.type])e&&p[e.type](e);else{var r=d[e.type.toLowerCase()];void 0!==r?n.push({message:"Expected "+r+" but got "+e.type+" (case sensitive)",line:e.__line__}):n.push({message:"The type "+e.type+" is unknown",line:e.__line__})}}function a(e,t){return e.every((function(e){return null!==e&&typeof e===t}))}function s(e,t,r){if("undefined"===typeof e[t])return n.push({message:'"'+t+'" member required',line:e.__line__});if("array"===r){if(!Array.isArray(e[t]))return n.push({message:'"'+t+'" member should be an array, but is an '+typeof e[t]+" instead",line:e.__line__})}else{if("object"===r&&e[t]&&e[t].constructor!==Object)return n.push({message:'"'+t+'" member should be '+r+", but is an "+e[t].constructor.name+" instead",line:e.__line__});if(r&&typeof e[t]!==r)return n.push({message:'"'+t+'" member should be '+r+", but is an "+typeof e[t]+" instead",line:e.__line__})}}function u(e,r){if(!Array.isArray(e))return n.push({message:"position should be an array, is a "+typeof e+" instead",line:e.__line__||r});if(e.length<2)return n.push({message:"position must have 2 or more elements",line:e.__line__||r});if(e.length>3)return n.push({message:"position should not have more than 3 elements",level:"message",line:e.__line__||r});if(!a(e,"number"))return n.push({message:"each element in a position must be a number",line:e.__line__||r});if(t&&t.precisionWarning){if(10===i)return i+=1,n.push({message:"truncated warnings: we've encountered coordinate precision warning 10 times, no more warnings will be reported",level:"message",line:e.__line__||r});i<10&&e.forEach((function(t){var o=0,a=String(t).split(".")[1];if(void 0!==a&&(o=a.length),o>6)return i+=1,n.push({message:"precision of coordinates should be reduced",level:"message",line:e.__line__||r})}))}}function l(e,t,r,i){if(void 0===i&&void 0!==e.__line__&&(i=e.__line__),0===r)return u(e,i);if(1===r&&t)if("LinearRing"===t){if(!Array.isArray(e[e.length-1]))return n.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:i}),!0;if(e.length<4&&n.push({message:"a LinearRing of coordinates needs to have four or more positions",line:i}),e.length&&(e[e.length-1].length!==e[0].length||!e[e.length-1].every((function(t,n){return e[0][n]===t}))))return n.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:i}),!0}else if("Line"===t&&e.length<2)return n.push({message:"a line needs to have two or more coordinates to be valid",line:i});if(Array.isArray(e))return e.map((function(e){return l(e,t,r-1,e.__line__||i)})).some((function(e){return e}));n.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:i})}function c(e){if(e.crs){"object"===typeof e.crs&&e.crs.properties&&"urn:ogc:def:crs:OGC:1.3:CRS84"===e.crs.properties.name?n.push({message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:e.__line__}):n.push({message:"old-style crs member is not recommended",line:e.__line__})}}function h(e){if(e.bbox)return Array.isArray(e.bbox)?(a(e.bbox,"number")||n.push({message:"each element in a bbox member must be a number",line:e.bbox.__line__}),4!==e.bbox.length&&6!==e.bbox.length&&n.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:e.bbox.__line__}),n.length):void n.push({message:"bbox member must be an array of numbers, but is a "+typeof e.bbox,line:e.__line__})}function f(e){c(e),h(e),void 0!==e.id&&"string"!==typeof e.id&&"number"!==typeof e.id&&n.push({message:'Feature "id" member must have a string or number value',line:e.__line__}),void 0!==e.features&&n.push({message:'Feature object cannot contain a "features" member',line:e.__line__}),void 0!==e.coordinates&&n.push({message:'Feature object cannot contain a "coordinates" member',line:e.__line__}),"Feature"!==e.type&&n.push({message:"GeoJSON features must have a type=feature member",line:e.__line__}),s(e,"properties","object"),s(e,"geometry","object")||e.geometry&&o(e.geometry)}var p={Point:function(e){var t;c(e),h(e),void 0!==(t=e).properties&&n.push({message:'geometry object cannot contain a "properties" member',line:t.__line__}),void 0!==t.geometry&&n.push({message:'geometry object cannot contain a "geometry" member',line:t.__line__}),void 0!==t.features&&n.push({message:'geometry object cannot contain a "features" member',line:t.__line__}),s(e,"coordinates","array")||u(e.coordinates)},Feature:f,MultiPoint:function(e){c(e),h(e),s(e,"coordinates","array")||l(e.coordinates,"",1)},LineString:function(e){c(e),h(e),s(e,"coordinates","array")||l(e.coordinates,"Line",1)},MultiLineString:function(e){c(e),h(e),s(e,"coordinates","array")||l(e.coordinates,"Line",2)},FeatureCollection:function(e){if(c(e),h(e),void 0!==e.properties&&n.push({message:'FeatureCollection object cannot contain a "properties" member',line:e.__line__}),void 0!==e.coordinates&&n.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:e.__line__}),!s(e,"features","array")){if(!a(e.features,"object"))return n.push({message:"Every feature must be an object",line:e.__line__});e.features.forEach(f)}},GeometryCollection:function(e){c(e),h(e),s(e,"geometries","array")||(a(e.geometries,"object")||n.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:e.__line__}),1===e.geometries.length&&n.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:e.geometries.__line__}),e.geometries.forEach((function(t){t&&("GeometryCollection"===t.type&&n.push({message:"GeometryCollection should avoid nested geometry collections",line:e.geometries.__line__}),o(t))})))},Polygon:function(e){c(e),h(e),s(e,"coordinates","array")||l(e.coordinates,"LinearRing",2)||r(e,n)},MultiPolygon:function(e){c(e),h(e),s(e,"coordinates","array")||l(e.coordinates,"LinearRing",3)||r(e,n)}},d=Object.keys(p).reduce((function(e,t){return e[t.toLowerCase()]=t,e}),{});return"object"!==typeof e||null===e||void 0===e?(n.push({message:"The root of a GeoJSON object must be an object.",line:0}),n):(o(e),n.forEach((function(e){({}).hasOwnProperty.call(e,"line")&&void 0===e.line&&delete e.line})),n)}},function(e,t){function n(e){return e*Math.PI/180}function r(e){var t=0;if(e.length>2)for(var r,i,o=0;o<e.length-1;o++)r=e[o],t+=n((i=e[o+1])[0]-r[0])*(2+Math.sin(n(r[1]))+Math.sin(n(i[1])));return t>=0}function i(e){if(e&&e.length>0){if(r(e[0]))return!1;if(!e.slice(1,e.length).every(r))return!1}return!0}e.exports=function(e,t){(function(e){return"Polygon"===e.type?i(e.coordinates):"MultiPolygon"===e.type?e.coordinates.every(i):void 0})(e)||t.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:e.__line__})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=n(80);t.default=function(e,t,n,o){void 0===o&&(o={});var a=i.getCoord(e),s=r.degreesToRadians(a[0]),u=r.degreesToRadians(a[1]),l=r.degreesToRadians(n),c=r.lengthToRadians(t,o.units),h=Math.asin(Math.sin(u)*Math.cos(c)+Math.cos(u)*Math.sin(c)*Math.cos(l)),f=s+Math.atan2(Math.sin(l)*Math.sin(c)*Math.cos(u),Math.cos(c)-Math.sin(u)*Math.sin(h)),p=r.radiansToDegrees(f),d=r.radiansToDegrees(h);return r.point([p,d],o.properties)}},function(e,t,n){var r=n(49),i=n(32),o=n(4),a=n(24),s=n(173),u=n(54).default,l=n(81).default,c=n(25),h=r({},i.modes.draw_polygon);h.onSetup=function(e){var t=this.newFeature({type:o.geojsonTypes.FEATURE,properties:{isCircle:!0,center:[]},geometry:{type:o.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),a.disable(this),s.disable(this),this.updateUIClasses({mouse:o.cursors.ADD}),this.activateUIButton(o.types.POLYGON),this.setActionableState({trash:!0}),{polygon:t,currentVertexPosition:0}},h.onMouseDown=h.onTouchStart=function(e,t){0===e.polygon.properties.center.length&&(e.polygon.properties.center=[t.lngLat.lng,t.lngLat.lat])},h.onDrag=h.onMouseMove=function(e,t){var n=e.polygon.properties.center;if(n.length>0){var r=l(c.point(n),c.point([t.lngLat.lng,t.lngLat.lat]),{units:"kilometers"}),i=u(n,r);e.polygon.incomingCoords(i.geometry.coordinates),e.polygon.properties.radiusInKm=r}},h.onMouseUp=h.onTouchEnd=function(e,t){return s.enable(this),this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},h.onClick=h.onTap=function(e,t){e.polygon.properties.center=[]},h.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.polygon.id;return t.properties.active=r?o.activeStates.ACTIVE:o.activeStates.INACTIVE,n(t)},e.exports=h},function(e,t){e.exports={enable:function(e){setTimeout((function(){e.map&&e.map.dragPan&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("dragPan")&&e.map.dragPan.enable()}),0)},disable:function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e.map.dragPan.disable()}),0)}}},function(e,t,n){var r=n(32),i=n(37),o=n(39),a=n(4),s=n(53),u=n(81).default,l=n(25),c=n(54).default,h=n(82),f=r.modes.direct_select;f.dragFeature=function(e,t,n){o(this.getSelected(),n),this.getSelected().filter((function(e){return e.properties.isCircle})).map((function(e){return e.properties.center})).forEach((function(e){e[0]+=n.lng,e[1]+=n.lat})),e.dragMoveLocation=t.lngLat},f.dragVertex=function(e,t,n){if(e.feature.properties.isCircle){var r=e.feature.properties.center,i=[t.lngLat.lng,t.lngLat.lat],o=u(l.point(r),l.point(i),{units:"kilometers"}),h=c(r,o);e.feature.incomingCoords(h.geometry.coordinates),e.feature.properties.radiusInKm=o}else for(var f=e.selectedCoordPaths.map((function(t){return e.feature.getCoordinate(t)})),p=f.map((function(e){return{type:a.geojsonTypes.FEATURE,properties:{},geometry:{type:a.geojsonTypes.POINT,coordinates:e}}})),d=s(p,n),g=0;g<f.length;g++){var m=f[g];e.feature.updateCoordinate(e.selectedCoordPaths[g],m[0]+d.lng,m[1]+d.lat)}},f.toDisplayFeatures=function(e,t,n){e.featureId===t.properties.id?(t.properties.active=a.activeStates.ACTIVE,n(t),(t.properties.user_isCircle?h(t):i(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths})).forEach(n)):(t.properties.active=a.activeStates.INACTIVE,n(t));this.fireActionable(e)},e.exports=f},function(e,t,n){var r=n(32),i=n(37),o=n(39),a=n(4),s=n(82),u=r.modes.simple_select;u.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();var n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};o(this.getSelected(),n),this.getSelected().filter((function(e){return e.properties.isCircle})).map((function(e){return e.properties.center})).forEach((function(e){e[0]+=n.lng,e[1]+=n.lat})),e.dragMoveLocation=t.lngLat},u.toDisplayFeatures=function(e,t,n){(t.properties.active=this.isSelected(t.properties.id)?a.activeStates.ACTIVE:a.activeStates.INACTIVE,n(t),this.fireActionable(),t.properties.active===a.activeStates.ACTIVE&&t.geometry.type!==a.geojsonTypes.POINT)&&(t.properties.user_isCircle?s(t):i(t)).forEach(n)},e.exports=u},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(179);e.exports=r,"undefined"!==typeof window&&(window.Suggestions=r)},function(e,t,n){"use strict";var r=n(8),i=n(180),o=n(181),a=function(e,t,n){return n=n||{},this.options=r({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=e,this.data=t||[],this.list=new o(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(e){this.handleKeyUp(e.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(e){this.handleKeyDown(e)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(e){this.handlePaste(e)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};a.prototype.handleKeyUp=function(e){40!==e&&38!==e&&27!==e&&13!==e&&9!==e&&this.handleInputChange(this.el.value)},a.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},a.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},a.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout((function(){t.handleInputChange(e.target.value)}),100)}},a.prototype.handleInputChange=function(e){this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(e){for(var t=0;t<e.length&&(this.list.add(e[t]),t!==this.options.limit-1);t++);this.list.draw()}.bind(this))},a.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},a.prototype.update=function(e){this.data=e,this.handleKeyUp()},a.prototype.clear=function(){this.data=[],this.list.clear()},a.prototype.normalize=function(e){return e=e.toLowerCase()},a.prototype.match=function(e,t){return e.indexOf(t)>-1},a.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")},a.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(e){return this.getItemValue(e)}.bind(this)};e(this.options.filter?i.filter(this.query,this.data,t).map(function(e){return{original:e.original,string:this.render(e.original,e.string)}}.bind(this)):this.data.map(function(e){return{original:e,string:this.render(e)}}.bind(this)))},a.prototype.getItemValue=function(e){return e},a.prototype.render=function(e,t){if(t)return t;for(var n=e.original?this.getItemValue(e.original):this.getItemValue(e),r=this.normalize(n),i=r.lastIndexOf(this.query);i>-1;){var o=i+this.query.length;n=n.slice(0,i)+"<strong>"+n.slice(i,o)+"</strong>"+n.slice(o),i=r.slice(0,i).lastIndexOf(this.query)}return n},a.prototype.renderError=function(e){this.list.drawError(e)},e.exports=a},function(e,t,n){!function(){var t={};e.exports=t,t.simpleFilter=function(e,n){return n.filter((function(n){return t.test(e,n)}))},t.test=function(e,n){return null!==t.match(e,n)},t.match=function(e,t,n){n=n||{};var r,i=0,o=[],a=t.length,s=0,u=0,l=n.pre||"",c=n.post||"",h=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var f=0;f<a;f++)r=t[f],h[f]===e[i]?(r=l+r+c,i+=1,u+=1+u):u=0,s+=u,o[o.length]=r;return i===e.length?(s=h===e?1/0:s,{rendered:o.join(""),score:s}):null},t.filter=function(e,n,r){return n&&0!==n.length?"string"!==typeof e?n:(r=r||{},n.reduce((function(n,i,o,a){var s=i;r.extract&&(s=r.extract(i));var u=t.match(e,s,r);return null!=u&&(n[n.length]={string:u.rendered,score:u.score,index:o,original:i}),n}),[]).sort((function(e,t){var n=t.score-e.score;return n||e.index-t.index}))):[]}}()},function(e,t,n){"use strict";var r=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};r.prototype.show=function(){this.element.style.display="block"},r.prototype.hide=function(){this.element.style.display="none"},r.prototype.add=function(e){this.items.push(e)},r.prototype.clear=function(){this.items=[],this.active=0},r.prototype.isEmpty=function(){return!this.items.length},r.prototype.isVisible=function(){return"block"===this.element.style.display},r.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()}else this.hide()},r.prototype.drawItem=function(e,t){var n=document.createElement("li"),r=document.createElement("a");t&&(n.className+=" active"),r.innerHTML=e.string,n.appendChild(r),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))},r.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},r.prototype.move=function(e){this.active=e,this.draw()},r.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},r.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},r.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},e.exports=r},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,l=s||u||Function("return this")(),c=Object.prototype.toString,h=Math.max,f=Math.min,p=function(){return l.Date.now()};function d(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==c.call(e)}(e))return NaN;if(d(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=d(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,u,l=0,c=!1,m=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function _(e){return l=e,s=setTimeout(x,t),c?v(e):a}function b(e){var n=e-u;return void 0===u||n>=t||n<0||m&&e-l>=o}function x(){var e=p();if(b(e))return w(e);s=setTimeout(x,function(e){var n=t-(e-u);return m?f(n,o-(e-l)):n}(e))}function w(e){return s=void 0,y&&r?v(e):(r=i=void 0,a)}function E(){var e=p(),n=b(e);if(r=arguments,i=this,u=e,n){if(void 0===s)return _(u);if(m)return s=setTimeout(x,t),v(u)}return void 0===s&&(s=setTimeout(x,t)),a}return t=g(t)||0,d(n)&&(c=!!n.leading,o=(m="maxWait"in n)?h(g(n.maxWait)||0,t):o,y="trailing"in n?!!n.trailing:y),E.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},E.flush=function(){return void 0===s?a:w(p())},E}}).call(this,n(22))},function(e,t,n){"use strict";var r,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,i),r(n)},e.once("error",o)),e.once(t,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,n,r){var i,o,a,s;if(l(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"===typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function g(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"===typeof u)o(u,this,t);else{var l=u.length,c=m(u,l);for(n=0;n<l;++n)o(c[n],this,t)}return!0},s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,a;if(l(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},s.prototype.listenerCount=g,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t){e.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},function(e,t,n){"use strict";var r=n(83);e.exports=r},function(e,t,n){"use strict";var r=n(187),i=n(189),o=n(40),a=n(190),s={};function u(e){var t=e.total,n=e.loaded;return{total:t,transferred:n,percent:100*n/t}}function l(e,t){return new Promise((function(n,r){t.onprogress=function(t){e.emitter.emit(o.EVENT_PROGRESS_DOWNLOAD,u(t))};var a=e.file;a&&(t.upload.onprogress=function(t){e.emitter.emit(o.EVENT_PROGRESS_UPLOAD,u(t))}),t.onerror=function(e){r(e)},t.onabort=function(){var t=new i({request:e,type:o.ERROR_REQUEST_ABORTED});r(t)},t.onload=function(){if(delete s[e.id],t.status<200||t.status>=400){var o=new i({request:e,body:t.response,statusCode:t.status});r(o)}else n(t)};var l=e.body;"string"===typeof l?t.send(l):l?t.send(JSON.stringify(l)):a?t.send(a):t.send(),s[e.id]=t})).then((function(t){return function(e,t){return new r(e,{body:t.response,headers:a(t.getAllResponseHeaders()),statusCode:t.status})}(e,t)}))}function c(e,t){var n=e.url(t),r=new window.XMLHttpRequest;return r.open(e.method,n),Object.keys(e.headers).forEach((function(t){r.setRequestHeader(t,e.headers[t])})),r}e.exports={browserAbort:function(e){var t=s[e.id];t&&(t.abort(),delete s[e.id])},sendRequestXhr:l,browserSend:function(e){return Promise.resolve().then((function(){var t=c(e,e.client.accessToken);return l(e,t)}))},createRequestXhr:c}},function(e,t,n){"use strict";var r=n(188);function i(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch(n){this.body=t.body}this.links=r(this.headers.link)}i.prototype.hasNextPage=function(){return!!this.links.next},i.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return e?e.split(/,\s*</).reduce((function(e,t){var n=function(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var n=t[1],r=t[2].split(";"),i=null,o=r.reduce((function(e,t){var n=function(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}(t);return n?"rel"===n.key?(i||(i=n.value),e):(e[n.key]=n.value,e):e}),{});return i?{url:n,rel:i,params:o}:null}(t);return n?(n.rel.split(/\s+/).forEach((function(t){e[t]||(e[t]={url:n.url,params:n.params})})),e):e}),{}):{}}},function(e,t,n){"use strict";var r=n(40);e.exports=function(e){var t,n=e.type||r.ERROR_HTTP;if(e.body)try{t=JSON.parse(e.body)}catch(o){t=e.body}else t=null;var i=e.message||null;i||("string"===typeof t?i=t:t&&"string"===typeof t.message?i=t.message:n===r.ERROR_REQUEST_ABORTED&&(i="Request aborted")),this.message=i,this.type=n,this.statusCode=e.statusCode||null,this.request=e.request,this.body=t}},function(e,t,n){"use strict";e.exports=function(e){var t={};return e?(e.trim().split(/[\r|\n]+/).forEach((function(e){var n=function(e){var t=e.indexOf(":");return{name:e.substring(0,t).trim().toLowerCase(),value:e.substring(t+1).trim()}}(e);t[n.name]=n.value})),t):t}},function(e,t,n){(function(e,r){var i;!function(o){var a=t,s=(e&&e.exports,"object"==typeof r&&r);s.global!==s&&s.window;var u=function(e){this.message=e};(u.prototype=new Error).name="InvalidCharacterError";var l=function(e){throw new u(e)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=/[\t\n\f\r ]/g,f={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,i,o=e.length%3,a="",s=-1,u=e.length-o;++s<u;)t=e.charCodeAt(s)<<16,n=e.charCodeAt(++s)<<8,r=e.charCodeAt(++s),a+=c.charAt((i=t+n+r)>>18&63)+c.charAt(i>>12&63)+c.charAt(i>>6&63)+c.charAt(63&i);return 2==o?(t=e.charCodeAt(s)<<8,n=e.charCodeAt(++s),a+=c.charAt((i=t+n)>>10)+c.charAt(i>>4&63)+c.charAt(i<<2&63)+"="):1==o&&(i=e.charCodeAt(s),a+=c.charAt(i>>2)+c.charAt(i<<4&63)+"=="),a},decode:function(e){var t=(e=String(e).replace(h,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,i=0,o="",a=-1;++a<t;)r=c.indexOf(e.charAt(a)),n=i%4?64*n+r:r,i++%4&&(o+=String.fromCharCode(255&n>>(-2*i&6)));return o},version:"0.1.0"};void 0===(i=function(){return f}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(28)(e),n(22))},function(e,t,n){"use strict";var r=n(85),i=n(8),o=n(193),a=n(194),s=n(40),u=1;function l(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};t.body&&(n["content-type"]="application/json");var r=i(n,t.headers),a=Object.keys(r).reduce((function(e,t){return e[t.toLowerCase()]=r[t],e}),{});this.id=u++,this._options=t,this.emitter=new o,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=a}l.prototype.url=function(e){var t=a.prependOrigin(this.path,this.origin);t=a.appendQueryObject(t,this.query);var n=this.params,o=null==e?this.client.accessToken:e;if(o){t=a.appendQueryParam(t,"access_token",o);var s=r(o).user;n=i({ownerId:s},n)}return t=a.interpolateRouteParams(t,n),t},l.prototype.send=function(){var e=this;if(e.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return e.sent=!0,e.client.sendRequest(e).then((function(t){return e.response=t,e.emitter.emit(s.EVENT_RESPONSE,t),t}),(function(t){throw e.error=t,e.emitter.emit(s.EVENT_ERROR,t),t}))},l.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},l.prototype.eachPage=function(e){var t=this;function n(n){e(null,n,(function(){delete t._nextPageRequest;var e=n.nextPage();e&&(t._nextPageRequest=e,i(e))}))}function r(t){e(t,null,(function(){}))}function i(e){e.send().then(n,r)}i(this)},l.prototype.clone=function(){return this._extend()},l.prototype._extend=function(e){var t=i(this._options,e);return new l(this.client,t)},e.exports=l},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,r,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||e,o),u=i?i+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function u(e,t){0===--e._eventsCount?e._events=new o:delete e._events[t]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),l.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},l.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},l.prototype.emit=function(e,t,n,r,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,o),!0;case 6:return c.fn.call(c.context,t,n,r,o,a),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;case 4:c[l].fn.call(c[l].context,t,n,r);break;default:if(!u)for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return u(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||u(this,o);else{for(var s=0,l=[],c=a.length;s<c;s++)(a[s].fn!==t||r&&!a[s].once||n&&a[s].context!==n)&&l.push(a[s]);l.length?this._events[o]=1===l.length?l[0]:l:u(this,o)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&u(this,t)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,e.exports=l},function(e,t,n){"use strict";function r(e){return Array.isArray(e)?e.map(encodeURIComponent).join(","):encodeURIComponent(String(e))}function i(e,t,n){if(!1===n||null===n)return e;var i=/\?/.test(e)?"&":"?",o=encodeURIComponent(t);return void 0!==n&&""!==n&&!0!==n&&(o+="="+r(n)),""+e+i+o}e.exports={appendQueryObject:function(e,t){if(!t)return e;var n=e;return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(Array.isArray(r)&&(r=r.filter((function(e){return null!==e&&void 0!==e})).join(",")),n=i(n,e,r))})),n},appendQueryParam:i,prependOrigin:function(e,t){if(!t)return e;if("http"===e.slice(0,4))return e;var n="/"===e[0]?"":"/";return""+t.replace(/\/$/,"")+n+e},interpolateRouteParams:function(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,(function(e,n){var i=t[n];if(void 0===i)throw new Error("Unspecified route parameter "+n);return"/"+r(i)})):e}}},function(e,t,n){"use strict";var r=n(8),i=n(196),o=n(199),a=n(200),s=n(202),u={},l=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];u.forwardGeocode=function(e){i.assertShape({query:i.required(i.string),mode:i.oneOf("mapbox.places","mapbox.places-permanent"),countries:i.arrayOf(i.string),proximity:i.coordinates,types:i.arrayOf(i.oneOf(l)),autocomplete:i.boolean,bbox:i.arrayOf(i.number),limit:i.number,language:i.arrayOf(i.string),routing:i.boolean})(e),e.mode=e.mode||"mapbox.places";var t=a(r({country:e.countries},o(e,["proximity","types","autocomplete","bbox","limit","language","routing"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:o(e,["mode","query"]),query:t})},u.reverseGeocode=function(e){i.assertShape({query:i.required(i.coordinates),mode:i.oneOf("mapbox.places","mapbox.places-permanent"),countries:i.arrayOf(i.string),types:i.arrayOf(i.oneOf(l)),bbox:i.arrayOf(i.number),limit:i.number,language:i.arrayOf(i.string),reverseMode:i.oneOf("distance","score"),routing:i.boolean})(e),e.mode=e.mode||"mapbox.places";var t=a(r({country:e.countries},o(e,["country","types","bbox","limit","language","reverseMode","routing"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:o(e,["mode","query"]),query:t})},e.exports=s(u)},function(e,t,n){"use strict";(function(t){var r=n(8),i=n(197);e.exports=r(i,{file:function(e){if("undefined"!==typeof window){if(e instanceof t.Blob||e instanceof t.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!==typeof e&&void 0===e.pipe)return"Filename or Readable stream"},date:function(e){var t="date";if("boolean"===typeof e)return t;try{var n=new Date(e);if(n.getTime&&isNaN(n.getTime()))return t}catch(r){return t}},coordinates:function(e){return i.tuple(i.number,i.number)(e)},assertShape:function(e,t){return i.assert(i.strictShape(e),t)}})}).call(this,n(22))},function(e,t,n){"use strict";var r=n(198),i=n(8),o="value",a="\n  ",s={};function u(e){var t=Array.isArray(e);return function(n){var r,i=l(s.plainArray,n);if(i)return i;if(t&&n.length!==e.length)return"an array with "+e.length+" items";for(var o=0;o<n.length;o++)if(i=l((r=o,t?e[r]:e),n[o]))return[o].concat(i)}}function l(e,t){if(null!=t||e.hasOwnProperty("__required")){var n=e(t);return n?Array.isArray(n)?n:[n]:void 0}}function c(e,t){var n=e.length,r=e[n-1],a=e.slice(0,n-1);return 0===a.length&&(a=[o]),t=i(t,{path:a}),"function"===typeof r?r(t):f(t,function(e){return"must be "+function(e){if(/^an? /.test(e))return e;if(/^[aeiou]/i.test(e))return"an "+e;if(/^[a-z]/i.test(e))return"a "+e;return e}(e)+"."}(r))}function h(e){return e.length<2?e[0]:2===e.length?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function f(e,t){return(p(e.path)?"Item at position ":"")+(e.path.join(".")+" "+t)}function p(e){return"number"==typeof e[e.length-1]||"number"==typeof e[0]}s.assert=function(e,t){return t=t||{},function(n){var r=l(e,n);if(r){var i=c(r,t);throw t.apiName&&(i=t.apiName+": "+i),new Error(i)}}},s.shape=function(e){var t,n=(t=e,Object.keys(t||{}).map((function(e){return{key:e,value:t[e]}})));return function(e){var t,r=l(s.plainObject,e);if(r)return r;for(var i=[],u=0;u<n.length;u++)t=n[u].key,(r=l(n[u].value,e[t]))&&i.push([t].concat(r));return i.length<2?i[0]:function(e){i=i.map((function(t){return"- "+t[0]+": "+c(t,e).split("\n").join(a)}));var t=e.path.join(".");return"The following properties"+(t===o?"":" of "+t)+" have invalid values:"+a+i.join(a)}}},s.strictShape=function(e){var t=s.shape(e);return function(n){var r=t(n);if(r)return r;var i=Object.keys(n).reduce((function(t,n){return void 0===e[n]&&t.push(n),t}),[]);return 0!==i.length?function(){return"The following keys are invalid: "+i.join(", ")}:void 0}},s.arrayOf=function(e){return u(e)},s.tuple=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return u(e)},s.required=function(e){function t(t){return null==t?function(e){return f(e,p(e.path)?"cannot be undefined/null.":"is required.")}:e.apply(this,arguments)}return t.__required=!0,t},s.oneOfType=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(t){var n=e.map((function(e){return l(e,t)})).filter(Boolean);if(n.length===e.length)return n.every((function(e){return 1===e.length&&"string"===typeof e[0]}))?h(n.map((function(e){return e[0]}))):n.reduce((function(e,t){return t.length>e.length?t:e}))}},s.equal=function(e){return function(t){if(t!==e)return JSON.stringify(e)}},s.oneOf=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),t=e.map((function(e){return s.equal(e)}));return s.oneOfType.apply(this,t)},s.range=function(e){var t=e[0],n=e[1];return function(e){if(l(s.number,e)||e<t||e>n)return"number between "+t+" & "+n+" (inclusive)"}},s.any=function(){},s.boolean=function(e){if("boolean"!==typeof e)return"boolean"},s.number=function(e){if("number"!==typeof e)return"number"},s.plainArray=function(e){if(!Array.isArray(e))return"array"},s.plainObject=function(e){if(!r(e))return"object"},s.string=function(e){if("string"!==typeof e)return"string"},s.func=function(e){if("function"!==typeof e)return"function"},s.validate=l,s.processMessage=c,e.exports=s},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t;return"[object Object]"===r.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))}},function(e,t,n){"use strict";e.exports=function(e,t){var n=function(e,n){return-1!==t.indexOf(e)&&void 0!==n};return"function"===typeof t&&(n=t),Object.keys(e).filter((function(t){return n(t,e[t])})).reduce((function(t,n){return t[n]=e[n],t}),{})}},function(e,t,n){"use strict";var r=n(201);e.exports=function(e){return r(e,(function(e,t){return"boolean"===typeof t?JSON.stringify(t):t}))}},function(e,t,n){"use strict";e.exports=function(e,t){return Object.keys(e).reduce((function(n,r){return n[r]=t(r,e[r]),n}),{})}},function(e,t,n){"use strict";var r=n(84),i=n(83);e.exports=function(e){return function(t){var n;n=r.prototype.isPrototypeOf(t)?t:i(t);var o=Object.create(e);return o.client=n,o}}},function(e,t,n){"use strict";var r=n(204);function i(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}i.prototype={select:function(e,t){var n=this.getSelectedIndex(e,t),r=this.getEventPayload("search.select",t);if(r.resultIndex=n,r.resultPlaceName=e.place_name,r.resultId=e.id,(n!==this.lastSentIndex||r.queryString!==this.lastSentInput)&&-1!=n&&(this.lastSentIndex=n,this.lastSentInput=r.queryString,r.queryString))return this.push(r)},start:function(e){var t=this.getEventPayload("search.start",e);if(t.queryString)return this.push(t)},keyevent:function(e,t){if(e.key&&!e.metaKey&&-1===[9,27,37,39,13,38,40].indexOf(e.keyCode)){var n=this.getEventPayload("search.keystroke",t);if(n.lastAction=e.key,n.queryString)return this.push(n)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var n=this.getRequestOptions(e);this.request(n,function(e){return e?this.handleError(e,t):t?t():void 0}.bind(this))},getRequestOptions:function(e){return Array.isArray(e)||(e=[e]),{method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}},getEventPayload:function(e,t){var n;n=t.options.proximity?[t.options.proximity.longitude,t.options.proximity.latitude]:null;var r=t._map?t._map.getZoom():void 0,i={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",proximity:n,limit:t.options.limit,mapZoom:r,keyboardLocale:this.locale};return"search.select"===e?i.queryString=t.inputString:"search.select"!=e&&t._inputEl?i.queryString=t._inputEl.value:i.queryString=t.inputString,i},request:function(e,t){var n=new XMLHttpRequest;for(var r in n.onreadystatechange=function(){if(4==this.readyState)return 204==this.status?t(null):t(this.statusText)},n.open(e.method,e.host+"/"+e.path,!0),e.headers){var i=e.headers[r];n.setRequestHeader(r,i)}n.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return r()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(t._typeahead){var n=t._typeahead.data,r=e.id;return n.map((function(e){return e.id})).indexOf(r)}},shouldEnableLogging:function(e){return!1!==e.enableEventLogging&&((!e.origin||-1!=e.origin.indexOf("api.mapbox.com"))&&(!e.localGeocoder&&!e.filter))},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}},e.exports=i},function(e,t,n){for(var r=self.crypto||self.msCrypto,i="-_",o=36;o--;)i+=o.toString(36);for(o=36;o---10;)i+=o.toString(36).toUpperCase();e.exports=function(e){var t="",n=r.getRandomValues(new Uint8Array(e||21));for(o=e||21;o--;)t+=i[63&n[o]];return t}},function(e,t,n){"use strict";e.exports={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05dc\u05d7\u05e4\u05e9",ja:"\u30b5\u30fc\u30c1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041f\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641c\u7d22",cs:"Vyhled\xe1v\xe1n\xed",hu:"Keres\xe9s",ka:"\u10eb\u10d8\u10d4\u10d1\u10d0",nb:"S\xf8ke",sk:"Vyh\u013ead\xe1vanie",th:"\u0e04\u0e49\u0e19\u0e2b\u0e32",fi:"Hae",is:"Leita",ko:"\uc218\uc0c9",pl:"Szukaj",sl:"Iskanje",fa:"\u062c\u0633\u062a\u062c\u0648"}}},function(e,t,n){var r,i;r=this,i=function(){var e=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function t(t){return t.match(e)||[]}function n(e){return{language:(e=t(e))[1]||"",extlang:e[2]||"",script:e[3]||"",region:e[4]||""}}function r(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!0})}function i(e,i,o){function a(n){return t(n)[e]||""}r(a,"pattern",i),r(n,o,a)}return i(1,/^[a-zA-Z]{2,3}$/,"language"),i(2,/^[a-zA-Z]{3}$/,"extlang"),i(3,/^[a-zA-Z]{4}$/,"script"),i(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),r(n,"split",(function(e){return t(e).filter((function(e,t){return e&&t}))})),n},e.exports?e.exports=i():r.subtag=i()},function(e,t,n){var r,i,o;i=[n(2),n(208),n(86),n(87),n(88),n(16),n(89)],void 0===(o="function"===typeof(r=function(e){return e.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,r,i=this.element[0].nodeName.toLowerCase(),o="textarea"===i,a="input"===i;this.isMultiLine=o||!a&&this._isContentEditable(this.element),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly"))return t=!0,r=!0,void(n=!0);t=!1,r=!1,n=!1;var o=e.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",i);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case o.UP:t=!0,this._keyEvent("previous",i);break;case o.DOWN:t=!0,this._keyEvent("next",i);break;case o.ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case o.TAB:this.menu.active&&this.menu.select(i);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||r.preventDefault());if(!n){var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}}},input:function(e){if(r)return r=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._addClass(this.menu.element,"mapboxgl-ctrl"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,this.element[0]!==e.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")}))},menufocus:function(t,n){var r,i;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));i=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:i})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value),(r=n.item.attr("aria-label")||i.value)&&e.trim(r).length&&(this.liveRegion.children().hide(),e("<div>").text(r).appendTo(this.liveRegion))},menuselect:function(t,n){var r=n.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=i,this._delay((function(){this.previous=i,this.selectedItem=r}))),!1!==this._trigger("select",t,{item:r})&&this._value(r.value),this.term=this._value(),this.close(t),this.selectedItem=r}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(document.getElementsByClassName("mapboxgl-ctrl-top-left")[0]),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var n=this.menu.element[0];return t.target===this.element[0]||t.target===n||e.contains(n,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=document.getElementsByClassName("mapboxgl-ctrl-top-left")[0]),t},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):"string"===typeof this.options.source?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),r=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||n||r)||(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy((function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}),this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"===typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})}))},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,(function(e,n){r._renderItemData(t,n)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<div>").text(n.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,(function(e){return r.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))}}),e.ui.autocomplete})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[n(2),n(86),n(87),n(88),n(209),n(16),n(89)],void 0===(o="function"===typeof(r=function(e){return e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target),r=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&r.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.target).closest(".ui-menu-item"),r=e(t.currentTarget);n[0]===r[0]&&(this._removeClass(r.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,r))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay((function(){!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]))&&this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each((function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()}))},_keydown:function(t){var n,r,i,o,a=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:a=!1,r=this.previousFilter||"",o=!1,i=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),i===r?o=!0:i=r+i,n=this._filterMenuItems(i),(n=o&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n).length||(i=String.fromCharCode(t.keyCode),n=this._filterMenuItems(i)),n.length?(this.focus(t,n),this.previousFilter=i,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}a&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n,r,i,o=this,a=this.options.icons.submenu,s=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),n=s.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),n=t.prev(),r=e("<span>").data("ui-menu-submenu-caret",!0);o._addClass(r,"ui-menu-icon","ui-icon "+a),n.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",n.attr("id"))})),this._addClass(n,"ui-menu","ui-widget ui-widget-content ui-front"),(t=s.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var t=e(this);o._isDivider(t)&&o._addClass(t,"ui-menu-divider","ui-widget-content")})),i=(r=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(r,"ui-menu-item")._addClass(i,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var n,r,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),r=this.active.children(".ui-menu-item-wrapper"),this._addClass(r,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),i=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(n=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,o,a,s;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),s=t.outerHeight(),i<0?this.activeMenu.scrollTop(o+i):i+s>a&&this.activeMenu.scrollTop(o+i-a+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay((function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this._removeClass(r.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=r}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(r="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),r&&r.length&&this.active||(r=this.activeMenu.find(this.options.items)[t]()),this.focus(n,r)},nextPage:function(t){var n,r,i;this.active?this.isLastItem()||(this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-r-i<0})),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var n,r,i;this.active?this.isFirstItem()||(this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-r+i>0})),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),r=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return r.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))}))}})})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[n(2),n(16)],void 0===(o="function"===typeof(r=function(e){return e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++e)}))}}(),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")}))}})})?r.apply(t,i):r)||(e.exports=o)},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(this,{})}]]);
//# sourceMappingURL=2.af25912a.chunk.js.map