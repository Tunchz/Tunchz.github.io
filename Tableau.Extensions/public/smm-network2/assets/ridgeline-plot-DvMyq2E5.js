import{b as le,c as ne}from"./axis-hLREC-WR.js";import{T as ie,f as se,I as J,k as ue}from"./_plugin-vue2_normalizer-xzsEtbse.js";import{a as ce,c as fe}from"./main-CVmQxpd7.js";import{m as K}from"./mean-DHO-D6Gx.js";import{s as pe}from"./sequential-DeA06p7C.js";import{l as Q}from"./linear-LTQgAPe2.js";import{b as me}from"./band-BVtZk_0J.js";import{l as de}from"./line-C5Si6S0i.js";import{c as he}from"./basis-BqPSjl11.js";import{s as q}from"./selectAll-Cx8JdGyI.js";import"./index-BvYcEE5T.js";import"./range-OtVwhkKS.js";import"./constant-I5scnKCP.js";import"./point-DWREGWZc.js";function De(b,i,o){const w=i[0],y=i[1];let r=[],v=new Map,d=new Set,s=0,f=0;b.sort((h,k)=>h[y].value>k[y].value?1:-1);for(let h of b){let k=new Date(h[w].value),p=h[y].value,m=parseFloat(h[o].value);m>s&&(s=m),m<f&&(f=m);let F=[];if(d.add(p),v.has(p)){F=v.get(p),F.push({date:k,name:p,value:m}),v.set(p,F);continue}else v.set(p,[{date:k,name:p,value:m}])}return r=v,d=Array.from(d),{data:r,columns:d,max:s,min:f}}function Oe(b,i,o){let{width:w,height:y,extraSettings:r,fontSize:v,dimensionColors:d,memberColors:s,useNewColorFormat:f,sequentialColorScheme:h,enableLegend:k,legendPosition:p}=o,m=o.dimensions[1],F=r[0]||7,R=parseInt(r[1])/20||.4,U=parseInt(r[2])||60,g=r[3]||"category",H=r[4]||"colorize",S=isNaN(parseFloat(r[5])/100)?.8:parseFloat(r[5])/100,V=isNaN(parseFloat(r[6]))?2:parseFloat(r[6]),X=isNaN(parseFloat(r[7])/100)?1:parseFloat(r[7])/100,L=isNaN(parseFloat(r[8])/100)?1:parseFloat(r[8])/100,Y=parseInt(r[9])||40,P=o.extraSettings[10]||(o!=null&&o.textColor?o.textColor:"#666666");var u={top:U,right:30,bottom:20,left:110},T=w-u.left-u.right,N=y-u.top-u.bottom;const z=new ie("#tooltip",w,y);var B=b.append("svg").attr("width",T+u.left+u.right).attr("height",N+u.top+u.bottom).append("g").attr("transform","translate("+u.left+","+u.top+")"),c=i.columns,Z=c.length;let D=[],O=0;for(let e in c){let t=c[e],l=i.data.get(t),n=K(l,function(a){return a.value>O&&(O=a.value),+a.value});D.push(n)}let x=o.color;var C=se(J,"name",h);C=C===-1||!f?1:C;let _=J[C].scheme;g==="mean"?x=pe().domain([0,O]).interpolator(_):g==="category"&&(x=o.color);var A=Q().domain([i.min-i.max*.1,i.max+i.max*.1]).range([0,T]);B.append("g").attr("transform","translate(0,"+N+")").attr("opacity",L).attr("color",P).style("font-size",o.fontSize+"rem").call(le(A));var $=Q().domain([0,R]).range([N,0]),E=me().domain(c).range([0,N]).paddingInner(1);B.append("g").attr("opacity",L).attr("color",P).style("font-size",o.fontSize+"rem").call(ne(E));var ee=te(re(F),A.ticks(Y)),W=[];for(let e=0;e<Z;e++){let t=c[e],l=ee(i.data.get(c[e]).map(n=>n.value));W.push({key:t,density:l})}let M=null;B.selectAll("areas").data(W).enter().append("path").attr("transform",function(e){return"translate(0,"+(E(e.key)-N)+")"}).on("click",ae).classed("focus",e=>e.key===M).attr("fill-opacity",S).attr("fill",function(e){let t=e.key,l=c.indexOf(t),n=D[l];if(g==="none")return f?d[0].color:x(1);if(g==="category"&&f){for(var a=0;a<s.length;a++)if(s[a].fieldName===e.key)return s[a].color}return x(n)}).attr("stroke-width",V).attr("stroke-opacity",X).attr("stroke",function(e){let t=e.key,l=c.indexOf(t),n=D[l];if(H==="colorize"){if(g==="none")return f?d[0].color:x(1);if(g==="category"&&f){for(var a=0;a<s.length;a++)if(s[a].fieldName===e.key)return s[a].color}return x(n)}return H==="black"?"#000":"#fff"}).datum(function(e){return e.density}).attr("d",de().curve(he).x(function(e){return A(e[0])}).y(function(e){return $(e[1])})).on("mouseover",(e,t)=>{z.show(o.tooltips.node.content||o.tooltips.node,{Category:c[t]}),G(e)}).on("mousemove",()=>{z.updatePosition()}).on("mouseout",()=>{z.hide(),j()});function te(e,t){return function(l){return t.map(function(n){return[n,K(l,function(a){return e(n-a)})]})}}function re(e){return function(t){return Math.abs(t/=e)<=1?.75*(1-t*t)/e:0}}function oe(){return M=null,q("path").classed("focus",!1),j({unfixHighlight:!0}),fe()}function ae(e,t){event.stopPropagation();let l=ue(this),n=l.classed("focus");oe(),!n&&(M=e.sets,l.classed("focus",!0),G(e),ce(m,c[t]))}let I;function G(e,t,{fixHighlight:l=!1}={}){I||(q("path").style("fill-opacity",n=>n===e?S+.2:S),l&&(I=!0))}function j({unfixHighlight:e=!1}={}){e&&(I=!1),!I&&q("path").style("fill-opacity",t=>S)}}export{Oe as draw,De as parse};
//# sourceMappingURL=ridgeline-plot-DvMyq2E5.js.map
