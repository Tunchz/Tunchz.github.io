import{n as Ie}from"./set-BPvSEdwO.js";import{H as fe,q as Be,l as ie,T as Le,L as Me,v as me,k as Ve,o as Pe}from"./_plugin-vue2_normalizer-xzsEtbse.js";import{a as j,c as De}from"./main-CVmQxpd7.js";import{d as Se,l as se}from"./linear-LTQgAPe2.js";import{f as We}from"./defaultLocale-B8TAAL35.js";import{r as Fe}from"./lineRadial-D88z6XRS.js";import{c as Ge}from"./cardinalClosed-BJLWxcGN.js";import{r as ne}from"./range-OtVwhkKS.js";import{s as z}from"./selectAll-Cx8JdGyI.js";import{m as He}from"./min-D1slsF82.js";import{m as Te}from"./max-DBeXZoyG.js";import"./index-BvYcEE5T.js";import"./line-C5Si6S0i.js";import"./constant-I5scnKCP.js";import"./point-DWREGWZc.js";function tt(p,r,l,u){let d=u.dimensions[0],v=u.dimensions[1],y=u.dimensions[2]||u.dimensions[0],g=fe(u.extraSettings[9]),m=r[0],I=r[1]||0,R=r[2]||r[0],O=l,o=new Set,n=[];for(let a of p){let i=a[I].formattedValue,f=a[m].formattedValue,B=a[R].formattedValue,L=Be(a,O);ie(a[I])||ie(a[m])||(g!==1/0&&L<g&&(L=g),o.add(i),n.push({group:f,groupName:d,colorBy:B,colorByName:y,axis:i,axisName:v,value:L}))}o=Array.from(o).sort();let C=u.extraSettings;if(C.length>10&&C[12]==="0")for(let a of o){let i=0,f=0;for(let B of n)B.axis===a&&(i+=B.value,f++);n.push({group:"Average",groupName:d,colorBy:"Average",colorByName:y,axis:a,axisName:v,value:i/f})}let A=n.reduce((a,i)=>(a[i.group]=a[i.group]+i.value||i.value,a),{}),x=Ie().key(a=>a.group).sortValues((a,i)=>Se(a.axis,i.axis)).sortKeys((a,i)=>A[i]-A[a]).entries(n);return x.forEach(a=>{o.forEach((i,f)=>{(!a.values[f]||a.values[f].axis!==i)&&a.values.splice(f,0,{axis:i,group:a.key,value:null})})}),x}const ue=Math.sin,ce=Math.cos,V=Math.PI/2;let J=null;function rt(p,r,l){let{measureName:u,measureFormat:d,measureStyle:v,color:y,width:g,height:m,isDarkTheme:I,fontSize:R,fontSizeG:O,extraSettings:o,memberColors:n,useNewColorFormat:C,enableLegend:A,legendPosition:x,legendRows:a,legendColumns:i,legendPaddingX:f,legendPaddingY:B}=l,L=o[1]==="0"?0:1,de=o[2]==="0"?0:1;const N=o[3]||5,ge=(o[4]||10)/100;(o[5]||10)/100;const xe=(o[6]||20)/100,U=o[7]||4,he=o[8]||2,X=o[11]||1,ve=o[12]||1,ye=o[13]||(l!=null&&l.textColorAxis?l.textColorAxis:"#666666"),Ce=o[14]||(l!=null&&l.textColorGrid?l.textColorGrid:"#666666"),Ae=o[15]||(l!=null&&l.averageColor?l.averageColor:"#333333"),Ne=o[16]||"#eeeeee",be=o[17]||"#eeeeee";ve==="0"&&n.push({color:Ae,fieldName:"Average"});function Y(e,t,s,c){s==="min"&&t===void 0?t=0:s==="max"&&t===void 0&&(t=null);const w=fe(t),G={min:He,max:Te}[s];return c?G(e,({values:q})=>G(q,K=>K.value)):w!==1/0?parseInt(w):G(e,({values:q})=>G(q,K=>K.value))}let h=Y(r,o[9],"min"),M=Y(r,o[10],"max");const _=new Le("#tooltip",g,m);d||(d=",.0f");let D=We(d);v&&(D=Pe(v)),h===M&&(h=0,M=Y(r,o[10],"max",!0));const Z=r[0].values.map(e=>e.axis),S=L?m/20:m/40,W={top:S,right:S,bottom:S,left:S},F=Math.min(g/2-W.left-W.right,m/2-W.top-W.bottom),b=Math.PI*2/Z.length,k=X==="0"?se().range([0,F]).domain([M,h]):se().range([0,F]).domain([h,M]),ke=Fe().curve(Ge).radius(e=>k(e.value)).angle((e,t)=>t*b);let ee=5,te=g-ee,re=m-ee;if(A&&(x.includes("right")&&(te-=i*100+25),x.includes("bottom")&&(re-=Math.ceil(r.length/i)*18+20)),A){let e=A&&x.includes("right")?te:10,t=A&&x.includes("bottom")?re:20;e+=parseInt(f),t+=parseInt(B),new Me(p,r,I).title(()=>{let s="";for(var c=0;c<r[0].values.length;c++)if(r[0].values[c].hasOwnProperty("groupName")){s=r[0].values[c].groupName;break}return l.legendTitle?l.legendTitle:s}).text(s=>{let c="";for(var w=0;w<s.values.length;w++)if(s.values[w].hasOwnProperty("colorBy")){c=s.values[w].colorBy;break}return c}).offset(e,t).positioning(x).nrRows(a).nrColumns(i).color(s=>{if(C){for(var c=0;c<n.length;c++)if(n[c].fieldName===s)return n[c].color}else return y(s)}).click(pe).highlight(P).clearHighlight(H).draw()}p.selectAll(".legend-item").style("cursor","default"),p.on("click",Q);let E=p.append("g").attr("transform",`translate(${g/2}, ${m/2})`),$=E.append("g").attr("class","axisWrapper");$.selectAll(".levels").data(ne(N,0,-1)).enter().append("circle").attr("class","levels").attr("r",e=>F/N*e).style("fill",I?Ne:"#CDCDCD").style("stroke",I?be:"#CDCDCD").style("fill-opacity",ge);let we=$.selectAll(".axis").data(Z).enter().append("g").attr("class","axis");const le=e=>(t,s)=>X==="0"?k(h-1*1.1)*Math[e](b*s-V):k(M*1.1)*Math[e](b*s-V);if(L&&we.append("text").attr("fill",ye).attr("font-size",R+"rem").attr("text-anchor","middle").attr("dy","0.5em").attr("x",le("cos")).attr("y",le("sin")).text(e=>e),de){const e=Math.abs(M-h);$.selectAll(".axisLabel").data(ne(N,0,-1)).enter().append("text").attr("class","axisLabel").attr("x",4).attr("y",t=>-t*F/N).attr("dy","0.4em").attr("font-size",O+"rem").attr("fill",Ce).text(t=>{if(X==="0"){let s=e*(N-t)/N;return D(s+h)}else{let s=e*t/N;return D(s+h)}})}const ae=E.selectAll(".radarWrapper").data(r).enter().append("g").attr("class","radarWrapper");ae.append("path").attr("class","radarGroup").attr("d",e=>ke(e.values)).style("stroke-width",he).style("stroke",e=>{if(C){for(var t=0;t<n.length;t++)if(n[t].fieldName===e.key)return n[t].color}else return y(e.values[0].colorBy)}).style("fill",e=>{if(C){for(var t=0;t<n.length;t++)if(n[t].fieldName===e.key)return n[t].color}else return y(e.values[0].colorBy)}).style("fill-opacity",xe).on("mouseover",P).on("mouseout",H).on("click",pe),ae.selectAll(".radarCircle").data(e=>e.values).enter().append("circle").attr("class","radarCircle").attr("r",U).attr("cx",(e,t)=>k(e.value)*ce(b*t-V)).attr("cy",(e,t)=>k(e.value)*ue(b*t-V)).style("fill",e=>{if(C){for(var t=0;t<n.length;t++)if(n[t].fieldName===e.colorBy)return n[t].color}else return y(e.colorBy)});const oe=E.selectAll(".tooltipCircleWrapper").data(r).enter().append("g").attr("class","tooltipCircleWrapper");oe.selectAll(".tooltipCircle").data(e=>e.values).enter().append("circle").attr("class","tooltipCircle").style("fill","none").style("pointer-events","all").on("mouseover",e=>{_.show(l.tooltips.node.content||l.tooltips.node,{DimensionName:e.groupName,DimensionValue:e.group.bold(),AxisName:e.axisName,AxisValue:e.axis.bold(),MeasureName:u,MeasureValue:e.value===null?"No Value":D(e.value).bold()}),P(e)}).on("mousemove",()=>{_.updatePosition()}).on("mouseout",()=>{_.hide(),H()}).on("click",ze),oe.selectAll(".tooltipCircle").attr("r",U*1.8).attr("cx",(e,t)=>k(e.value)*ce(b*t-V)).attr("cy",(e,t)=>k(e.value)*ue(b*t-V))}const ze=async function(r){me.stopPropagation();let u=Ve(this).classed("focus");await Q(),!u&&(P(r,{fixHighlight:!0}),r.group!=="Average"&&(j(r.axisName,r.axis),j(r.groupName,r.group)))},pe=async function(r){me.stopPropagation();let l=r.key||r.group,u=r.groupName||r.values[0].groupName,d=J===l;await Q(),!d&&(J=l,z(".tooltipCircle").classed("focus",v=>l===v.group),P(r,{fixHighlight:!0}),r.key!=="Average"&&j(u,l))};function Q(){return J=null,z(".focus").classed("focus",!1),H({unfixHighlight:!0}),De()}let T;function P(p,{fixHighlight:r=!1}={}){if(T)return;let l=p.key||p.group;z(".radarWrapper").style("opacity",u=>l===u.key?1:.3),r&&(T=!0)}function H({unfixHighlight:p=!1}={}){p&&(T=!1),!T&&z(".radarWrapper").style("opacity",1)}export{rt as draw,tt as parse};
//# sourceMappingURL=radar-chart-ZIRsshT1.js.map
