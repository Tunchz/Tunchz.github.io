import{k as Pt,O as Ht,G as Ut,v as Kt,P as Qt,Q as Jt,S as kt,U as jt,W as te,X as ee,Y as ne,Z as re,$ as Gt,c as ie,q as se,T as ae,L as fe,o as ue}from"./_plugin-vue2_normalizer-xzsEtbse.js";import{s as oe,p as Wt,m as le,t as he}from"./touch-Dr12ZUMz.js";import{s as mt}from"./selectAll-Cx8JdGyI.js";import{S as ge,T as ve,i as xe,t as de}from"./index-BNR9-8HJ.js";import{c as Bt,a as Lt}from"./main-CVmQxpd7.js";import{f as ce}from"./defaultLocale-B8TAAL35.js";import"./index-BvYcEE5T.js";function ye(E){return Pt(Ht(E).call(document.documentElement))}var me=0;function Xt(){return new qt}function qt(){this._="@"+(++me).toString(36)}qt.prototype=Xt.prototype={constructor:qt,get:function(E){for(var C=this._;!(C in E);)if(!(E=E.parentNode))return;return E[C]},set:function(E,C){return E[this._]=C},remove:function(E){return this._ in E&&delete E[this._]},toString:function(){return this._}};function pe(E,C){C==null&&(C=oe().touches);for(var S=0,$=C?C.length:0,w=new Array($);S<$;++S)w[S]=Wt(E,C[S]);return w}const Me=Object.freeze(Object.defineProperty({__proto__:null,clientPoint:Wt,create:ye,creator:Ht,customEvent:Ut,get event(){return Kt},local:Xt,matcher:Qt,mouse:le,namespace:Jt,namespaces:kt,select:Pt,selectAll:mt,selection:jt,selector:te,selectorAll:ee,style:ne,touch:he,touches:pe,window:re},Symbol.toStringTag,{value:"Module"}));var ze=[null];function we(E,C){var S=E.__transition,$,w;if(S){C=C==null?null:C+"";for(w in S)if(($=S[w]).state>ge&&$.name===C)return new ve([[E]],ze,C,+w)}return null}const Ie=Object.freeze(Object.defineProperty({__proto__:null,active:we,interrupt:xe,transition:de},Symbol.toStringTag,{value:"Module"}));var Vt={exports:{}};const Ae=Gt(Me),Se=Gt(Ie);(function(E,C){(function(S,$){$(C,Ae,Se)})(ie,function(S,$,w){var nt=1e-10;function U(t,n){var r=ft(t),e=r.filter(function(G){return rt(G,t)}),i=0,s=0,a=[],f;if(e.length>1){var o=j(e);for(f=0;f<e.length;++f){var u=e[f];u.angle=Math.atan2(u.x-o.x,u.y-o.y)}e.sort(function(G,X){return X.angle-G.angle});var l=e[e.length-1];for(f=0;f<e.length;++f){var h=e[f];s+=(l.x+h.x)*(h.y-l.y);for(var d={x:(h.x+l.x)/2,y:(h.y+l.y)/2},y=null,g=0;g<h.parentIndex.length;++g)if(l.parentIndex.indexOf(h.parentIndex[g])>-1){var v=t[h.parentIndex[g]],p=Math.atan2(h.x-v.x,h.y-v.y),x=Math.atan2(l.x-v.x,l.y-v.y),P=x-p;P<0&&(P+=2*Math.PI);var F=x-P/2,A=T(d,{x:v.x+v.radius*Math.sin(F),y:v.y+v.radius*Math.cos(F)});A>v.radius*2&&(A=v.radius*2),(y===null||y.width>A)&&(y={circle:v,width:A,p1:h,p2:l})}y!==null&&(a.push(y),i+=B(y.circle.radius,y.width),l=h)}}else{var M=t[0];for(f=1;f<t.length;++f)t[f].radius<M.radius&&(M=t[f]);var D=!1;for(f=0;f<t.length;++f)if(T(t[f],M)>Math.abs(M.radius-t[f].radius)){D=!0;break}D?i=s=0:(i=M.radius*M.radius*Math.PI,a.push({circle:M,p1:{x:M.x,y:M.y+M.radius},p2:{x:M.x-nt,y:M.y+M.radius},width:M.radius*2}))}return s/=2,n&&(n.area=i+s,n.arcArea=i,n.polygonArea=s,n.arcs=a,n.innerPoints=e,n.intersectionPoints=r),i+s}function rt(t,n){for(var r=0;r<n.length;++r)if(T(t,n[r])>n[r].radius+nt)return!1;return!0}function ft(t){for(var n=[],r=0;r<t.length;++r)for(var e=r+1;e<t.length;++e)for(var i=it(t[r],t[e]),s=0;s<i.length;++s){var a=i[s];a.parentIndex=[r,e],n.push(a)}return n}function B(t,n){return t*t*Math.acos(1-n/t)-(t-n)*Math.sqrt(n*(2*t-n))}function T(t,n){return Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))}function W(t,n,r){if(r>=t+n)return 0;if(r<=Math.abs(t-n))return Math.PI*Math.min(t,n)*Math.min(t,n);var e=t-(r*r-n*n+t*t)/(2*r),i=n-(r*r-t*t+n*n)/(2*r);return B(t,e)+B(n,i)}function it(t,n){var r=T(t,n),e=t.radius,i=n.radius;if(r>=e+i||r<=Math.abs(e-i))return[];var s=(e*e-i*i+r*r)/(2*r),a=Math.sqrt(e*e-s*s),f=t.x+s*(n.x-t.x)/r,o=t.y+s*(n.y-t.y)/r,u=-(n.y-t.y)*(a/r),l=-(n.x-t.x)*(a/r);return[{x:f+u,y:o-l},{x:f-u,y:o+l}]}function j(t){for(var n={x:0,y:0},r=0;r<t.length;++r)n.x+=t[r].x,n.y+=t[r].y;return n.x/=t.length,n.y/=t.length,n}function st(t,n,r,e){e=e||{};var i=e.maxIterations||100,s=e.tolerance||1e-10,a=t(n),f=t(r),o=r-n;if(a*f>0)throw"Initial bisect points must have opposite signs";if(a===0)return n;if(f===0)return r;for(var u=0;u<i;++u){o/=2;var l=n+o,h=t(l);if(h*a>=0&&(n=l),Math.abs(o)<s||h===0)return l}return n+o}function c(t){for(var n=new Array(t),r=0;r<t;++r)n[r]=0;return n}function R(t,n){return c(t).map(function(){return c(n)})}function b(t,n){for(var r=0,e=0;e<t.length;++e)r+=t[e]*n[e];return r}function O(t){return Math.sqrt(b(t,t))}function q(t,n,r){for(var e=0;e<n.length;++e)t[e]=n[e]*r}function Y(t,n,r,e,i){for(var s=0;s<t.length;++s)t[s]=n*r[s]+e*i[s]}function pt(t,n,r){r=r||{};var e=r.maxIterations||n.length*200,i=r.nonZeroDelta||1.05,s=r.zeroDelta||.001,a=r.minErrorDelta||1e-6,f=r.minErrorDelta||1e-5,o=r.rho!==void 0?r.rho:1,u=r.chi!==void 0?r.chi:2,l=r.psi!==void 0?r.psi:-.5,h=r.sigma!==void 0?r.sigma:.5,d,y=n.length,g=new Array(y+1);g[0]=n,g[0].fx=t(n),g[0].id=0;for(var v=0;v<y;++v){var p=n.slice();p[v]=p[v]?p[v]*i:s,g[v+1]=p,g[v+1].fx=t(p),g[v+1].id=v+1}function x(V){for(var _=0;_<V.length;_++)g[y][_]=V[_];g[y].fx=V.fx}for(var P=function(V,_){return V.fx-_.fx},F=n.slice(),A=n.slice(),M=n.slice(),D=n.slice(),G=0;G<e;++G){if(g.sort(P),r.history){var X=g.map(function(V){var _=V.slice();return _.fx=V.fx,_.id=V.id,_});X.sort(function(V,_){return V.id-_.id}),r.history.push({x:g[0].slice(),fx:g[0].fx,simplex:X})}for(d=0,v=0;v<y;++v)d=Math.max(d,Math.abs(g[0][v]-g[1][v]));if(Math.abs(g[0].fx-g[y].fx)<a&&d<f)break;for(v=0;v<y;++v){F[v]=0;for(var tt=0;tt<y;++tt)F[v]+=g[tt][v];F[v]/=y}var Q=g[y];if(Y(A,1+o,F,-o,Q),A.fx=t(A),A.fx<g[0].fx)Y(D,1+u,F,-u,Q),D.fx=t(D),D.fx<A.fx?x(D):x(A);else if(A.fx>=g[y-1].fx){var et=!1;if(A.fx>Q.fx?(Y(M,1+l,F,-l,Q),M.fx=t(M),M.fx<Q.fx?x(M):et=!0):(Y(M,1-l*o,F,l*o,Q),M.fx=t(M),M.fx<A.fx?x(M):et=!0),et){if(h>=1)break;for(v=1;v<g.length;++v)Y(g[v],1-h,g[0],h,g[v]),g[v].fx=t(g[v])}}else x(A)}return g.sort(P),{fx:g[0].fx,x:g[0]}}function gt(t,n,r,e,i,s,a){var f=r.fx,o=b(r.fxprime,n),u=f,l=f,h=o,d=0;i=i||1,s=s||1e-6,a=a||.1;function y(v,p,x){for(var P=0;P<16;++P)if(i=(v+p)/2,Y(e.x,1,r.x,i,n),u=e.fx=t(e.x,e.fxprime),h=b(e.fxprime,n),u>f+s*i*o||u>=x)p=i;else{if(Math.abs(h)<=-a*o)return i;h*(p-v)>=0&&(p=v),v=i,x=u}return 0}for(var g=0;g<10;++g){if(Y(e.x,1,r.x,i,n),u=e.fx=t(e.x,e.fxprime),h=b(e.fxprime,n),u>f+s*i*o||g&&u>=l)return y(d,i,l);if(Math.abs(h)<=-a*o)return i;if(h>=0)return y(i,d,u);l=u,d=i,i*=2}return i}function Mt(t,n,r){var e={x:n.slice(),fx:0,fxprime:n.slice()},i={x:n.slice(),fx:0,fxprime:n.slice()},s=n.slice(),a,f,o=1,u;r=r||{},u=r.maxIterations||n.length*20,e.fx=t(e.x,e.fxprime),a=e.fxprime.slice(),q(a,e.fxprime,-1);for(var l=0;l<u;++l){if(o=gt(t,a,e,i,o),r.history&&r.history.push({x:e.x.slice(),fx:e.fx,fxprime:e.fxprime.slice(),alpha:o}),!o)q(a,e.fxprime,-1);else{Y(s,1,i.fxprime,-1,e.fxprime);var h=b(e.fxprime,e.fxprime),d=Math.max(0,b(s,i.fxprime)/h);Y(a,d,a,-1,i.fxprime),f=e,e=i,i=f}if(O(e.fxprime)<=1e-5)break}return r.history&&r.history.push({x:e.x.slice(),fx:e.fx,fxprime:e.fxprime.slice(),alpha:o}),e}function vt(t,n){n=n||{},n.maxIterations=n.maxIterations||500;var r=n.initialLayout||Ot,e=n.lossFunction||at;t=ot(t);var i=r(t,n),s=[],a=[],f;for(f in i)i.hasOwnProperty(f)&&(s.push(i[f].x),s.push(i[f].y),a.push(f));for(var o=pt(function(h){for(var d={},y=0;y<a.length;++y){var g=a[y];d[g]={x:h[2*y],y:h[2*y+1],radius:i[g].radius}}return e(d,t)},s,n),u=o.x,l=0;l<a.length;++l)f=a[l],i[f].x=u[2*l],i[f].y=u[2*l+1];return i}var Rt=1e-10;function ut(t,n,r){return Math.min(t,n)*Math.min(t,n)*Math.PI<=r+Rt?Math.abs(t-n):st(function(e){return W(t,n,e)-r},0,t+n)}function ot(t){t=t.slice();var n=[],r={},e,i,s,a;for(e=0;e<t.length;++e){var f=t[e];f.sets.length==1?n.push(f.sets[0]):f.sets.length==2&&(s=f.sets[0],a=f.sets[1],r[[s,a]]=!0,r[[a,s]]=!0)}for(n.sort(function(o,u){return o>u}),e=0;e<n.length;++e)for(s=n[e],i=e+1;i<n.length;++i)a=n[i],[s,a]in r||t.push({sets:[s,a],size:0});return t}function Ft(t,n,r){var e=R(n.length,n.length),i=R(n.length,n.length);return t.filter(function(s){return s.sets.length==2}).map(function(s){var a=r[s.sets[0]],f=r[s.sets[1]],o=Math.sqrt(n[a].size/Math.PI),u=Math.sqrt(n[f].size/Math.PI),l=ut(o,u,s.size);e[a][f]=e[f][a]=l;var h=0;s.size+1e-10>=Math.min(n[a].size,n[f].size)?h=1:s.size<=1e-10&&(h=-1),i[a][f]=i[f][a]=h}),{distances:e,constraints:i}}function zt(t,n,r,e){var i=0,s;for(s=0;s<n.length;++s)n[s]=0;for(s=0;s<r.length;++s)for(var a=t[2*s],f=t[2*s+1],o=s+1;o<r.length;++o){var u=t[2*o],l=t[2*o+1],h=r[s][o],d=e[s][o],y=(u-a)*(u-a)+(l-f)*(l-f),g=Math.sqrt(y),v=y-h*h;d>0&&g<=h||d<0&&g>=h||(i+=2*v*v,n[2*s]+=4*v*(a-u),n[2*s+1]+=4*v*(f-l),n[2*o]+=4*v*(u-a),n[2*o+1]+=4*v*(l-f))}return i}function Ot(t,n){var r=wt(t,n),e=n.lossFunction||at;if(t.length>=8){var i=Nt(t,n),s=e(i,t),a=e(r,t);s+1e-8<a&&(r=i)}return r}function Nt(t,n){n=n||{};var r=n.restarts||10,e=[],i={},s;for(s=0;s<t.length;++s){var a=t[s];a.sets.length==1&&(i[a.sets[0]]=e.length,e.push(a))}var f=Ft(t,e,i),o=f.distances,u=f.constraints,l=O(o.map(O))/o.length;o=o.map(function(P){return P.map(function(F){return F/l})});var h=function(P,F){return zt(P,F,o,u)},d,y;for(s=0;s<r;++s){var g=c(o.length*2).map(Math.random);y=Mt(h,g,n),(!d||y.fx<d.fx)&&(d=y)}var v=d.x,p={};for(s=0;s<e.length;++s){var x=e[s];p[x.sets[0]]={x:v[2*s]*l,y:v[2*s+1]*l,radius:Math.sqrt(x.size/Math.PI)}}if(n.history)for(s=0;s<n.history.length;++s)q(n.history[s].x,l);return p}function wt(t,n){for(var r=n&&n.lossFunction?n.lossFunction:at,e={},i={},s,a=0;a<t.length;++a){var f=t[a];f.sets.length==1&&(s=f.sets[0],e[s]={x:1e10,y:1e10,rowid:e.length,size:f.size,radius:Math.sqrt(f.size/Math.PI)},i[s]=[])}for(t=t.filter(function(J){return J.sets.length==2}),a=0;a<t.length;++a){var o=t[a],u=o.hasOwnProperty("weight")?o.weight:1,l=o.sets[0],h=o.sets[1];o.size+Rt>=Math.min(e[l].size,e[h].size)&&(u=0),i[l].push({set:h,size:o.size,weight:u}),i[h].push({set:l,size:o.size,weight:u})}var d=[];for(s in i)if(i.hasOwnProperty(s)){var y=0;for(a=0;a<i[s].length;++a)y+=i[s][a].size*i[s][a].weight;d.push({set:s,size:y})}function g(J,k){return k.size-J.size}d.sort(g);var v={};function p(J){return J.set in v}function x(J,k){e[k].x=J.x,e[k].y=J.y,v[k]=!0}for(x({x:0,y:0},d[0].set),a=1;a<d.length;++a){var P=d[a].set,F=i[P].filter(p);if(s=e[P],F.sort(g),F.length===0)throw"ERROR: missing pairwise overlap information";for(var A=[],M=0;M<F.length;++M){var D=e[F[M].set],G=ut(s.radius,D.radius,F[M].size);A.push({x:D.x+G,y:D.y}),A.push({x:D.x-G,y:D.y}),A.push({y:D.y+G,x:D.x}),A.push({y:D.y-G,x:D.x});for(var X=M+1;X<F.length;++X)for(var tt=e[F[X].set],Q=ut(s.radius,tt.radius,F[X].size),et=it({x:D.x,y:D.y,radius:G},{x:tt.x,y:tt.y,radius:Q}),V=0;V<et.length;++V)A.push(et[V])}var _=1e50,yt=A[0];for(M=0;M<A.length;++M){e[P].x=A[M].x,e[P].y=A[M].y;var Tt=r(e,t);Tt<_&&(_=Tt,yt=A[M])}x(yt,P)}return e}function at(t,n){var r=0;function e(l){return l.map(function(h){return t[h]})}for(var i=0;i<n.length;++i){var s=n[i],a;if(s.sets.length!=1){if(s.sets.length==2){var f=t[s.sets[0]],o=t[s.sets[1]];a=W(f.radius,o.radius,T(f,o))}else a=U(e(s.sets));var u=s.hasOwnProperty("weight")?s.weight:1;r+=u*(a-s.size)*(a-s.size)}}return r}function xt(t,n,r){r===null?t.sort(function(v,p){return p.radius-v.radius}):t.sort(r);var e;if(t.length>0){var i=t[0].x,s=t[0].y;for(e=0;e<t.length;++e)t[e].x-=i,t[e].y-=s}if(t.length==2){var a=T(t[0],t[1]);a<Math.abs(t[1].radius-t[0].radius)&&(t[1].x=t[0].x+t[0].radius-t[1].radius-1e-10,t[1].y=t[0].y)}if(t.length>1){var f=Math.atan2(t[1].x,t[1].y)-n,o=Math.cos(f),u=Math.sin(f),l,h;for(e=0;e<t.length;++e)l=t[e].x,h=t[e].y,t[e].x=o*l-u*h,t[e].y=u*l+o*h}if(t.length>2){for(var d=Math.atan2(t[2].x,t[2].y)-n;d<0;)d+=2*Math.PI;for(;d>2*Math.PI;)d-=2*Math.PI;if(d>Math.PI){var y=t[1].y/(1e-10+t[1].x);for(e=0;e<t.length;++e){var g=(t[e].x+y*t[e].y)/(1+y*y);t[e].x=2*g-t[e].x,t[e].y=2*g*y-t[e].y}}}}function Ct(t){t.map(function(u){u.parent=u});function n(u){return u.parent!==u&&(u.parent=n(u.parent)),u.parent}function r(u,l){var h=n(u),d=n(l);h.parent=d}for(var e=0;e<t.length;++e)for(var i=e+1;i<t.length;++i){var s=t[e].radius+t[i].radius;T(t[e],t[i])+1e-10<s&&r(t[i],t[e])}var a={},f;for(e=0;e<t.length;++e)f=n(t[e]).parent.setid,f in a||(a[f]=[]),a[f].push(t[e]);t.map(function(u){delete u.parent});var o=[];for(f in a)a.hasOwnProperty(f)&&o.push(a[f]);return o}function It(t){var n=function(r){var e=Math.max.apply(null,t.map(function(s){return s[r]+s.radius})),i=Math.min.apply(null,t.map(function(s){return s[r]-s.radius}));return{max:e,min:i}};return{xRange:n("x"),yRange:n("y")}}function Et(t,n,r){n===null&&(n=Math.PI/2);var e=[],i,s;for(s in t)if(t.hasOwnProperty(s)){var a=t[s];e.push({x:a.x,y:a.y,radius:a.radius,setid:s})}var f=Ct(e);for(i=0;i<f.length;++i){xt(f[i],n,r);var o=It(f[i]);f[i].size=(o.xRange.max-o.xRange.min)*(o.yRange.max-o.yRange.min),f[i].bounds=o}f.sort(function(g,v){return v.size-g.size}),e=f[0];var u=e.bounds,l=(u.xRange.max-u.xRange.min)/50;function h(g,v,p){if(g){var x=g.bounds,P,F,A;v?P=u.xRange.max-x.xRange.min+l:(P=u.xRange.max-x.xRange.max,A=(x.xRange.max-x.xRange.min)/2-(u.xRange.max-u.xRange.min)/2,A<0&&(P+=A)),p?F=u.yRange.max-x.yRange.min+l:(F=u.yRange.max-x.yRange.max,A=(x.yRange.max-x.yRange.min)/2-(u.yRange.max-u.yRange.min)/2,A<0&&(F+=A));for(var M=0;M<g.length;++M)g[M].x+=P,g[M].y+=F,e.push(g[M])}}for(var d=1;d<f.length;)h(f[d],!0,!1),h(f[d+1],!1,!0),h(f[d+2],!0,!0),d+=3,u=It(e);var y={};for(i=0;i<e.length;++i)y[e[i].setid]=e[i];return y}function Dt(t,n,r,e){var i=[],s=[];for(var a in t)t.hasOwnProperty(a)&&(s.push(a),i.push(t[a]));n-=2*e,r-=2*e;var f=It(i),o=f.xRange,u=f.yRange;if(o.max==o.min||u.max==u.min)return console.log("not scaling solution: zero size detected"),t;for(var l=n/(o.max-o.min),h=r/(u.max-u.min),d=Math.min(h,l),y=(n-(o.max-o.min)*d)/2,g=(r-(u.max-u.min)*d)/2,v={},p=0;p<i.length;++p){var x=i[p];v[s[p]]={radius:d*x.radius,x:e+y+(x.x-o.min)*d,y:e+g+(x.y-u.min)*d}}return v}function dt(){var t=600,n=350,r=15,e=1e3,i=Math.PI/2,s=!0,a=!0,f=!0,o=null,u=null,l={},h=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],d=0,y=function(x){if(x in l)return l[x];var P=l[x]=h[d];return d+=1,d>=h.length&&(d=0),P},g=vt,v=at;function p(x){var P=x.datum(),F={};P.forEach(function(I){I.size==0&&I.sets.length==1&&(F[I.sets[0]]=1)}),P=P.filter(function(I){return!I.sets.some(function(Z){return Z in F})});var A={},M={};if(P.length>0){var D=g(P,{lossFunction:v});s&&(D=Et(D,i,u)),A=Dt(D,t,n,r),M=N(A,P)}var G={};P.forEach(function(I){I.label&&(G[I.sets]=I.label)});function X(I){if(I.sets in G)return G[I.sets];if(I.sets.length==1)return""+I.sets[0]}x.selectAll("svg").data([A]).enter().append("svg");var tt=x.select("svg").attr("width",t).attr("height",n),Q={},et=!1;tt.selectAll(".venn-area path").each(function(I){var Z=$.select(this).attr("d");I.sets.length==1&&Z&&(et=!0,Q[I.sets[0]]=H(Z))});var V=function(I){return function(Z){var Zt=I.sets.map(function($t){var St=Q[$t],bt=A[$t];return St||(St={x:t/2,y:n/2,radius:1}),bt||(bt={x:t/2,y:n/2,radius:1}),{x:St.x*(1-Z)+bt.x*Z,y:St.y*(1-Z)+bt.y*Z,radius:St.radius*(1-Z)+bt.radius*Z}});return ct(Zt)}},_=tt.selectAll(".venn-area").data(P,function(I){return I.sets}),yt=_.enter().append("g").attr("class",function(I){return"venn-area venn-"+(I.sets.length==1?"circle":"intersection")}).attr("data-venn-sets",function(I){return I.sets.join("_")}),Tt=yt.append("path"),J=yt.append("text").attr("class","label").text(function(I){return X(I)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",t/2).attr("y",n/2);f&&(Tt.style("fill-opacity","0").filter(function(I){return I.sets.length==1}).style("fill",function(I){return y(I.sets)}).style("fill-opacity",".25"),J.style("fill",function(I){return I.sets.length==1?y(I.sets):"#444"}));var k=x;et?(k=x.transition("venn").duration(e),k.selectAll("path").attrTween("d",V)):k.selectAll("path").attr("d",function(I){return ct(I.sets.map(function(Z){return A[Z]}))});var At=k.selectAll("text").filter(function(I){return I.sets in M}).text(function(I){return X(I)}).attr("x",function(I){return Math.floor(M[I.sets].x)}).attr("y",function(I){return Math.floor(M[I.sets].y)});a&&(et?"on"in At?At.on("end",lt(A,X)):At.each("end",lt(A,X)):At.each(lt(A,X)));var _t=_.exit().transition("venn").duration(e).remove();_t.selectAll("path").attrTween("d",V);var Yt=_t.selectAll("text").attr("x",t/2).attr("y",n/2);return o!==null&&(J.style("font-size","0px"),At.style("font-size",o),Yt.style("font-size","0px")),{circles:A,textCentres:M,nodes:_,enter:yt,update:k,exit:_t}}return p.wrap=function(x){return arguments.length?(a=x,p):a},p.width=function(x){return arguments.length?(t=x,p):t},p.height=function(x){return arguments.length?(n=x,p):n},p.padding=function(x){return arguments.length?(r=x,p):r},p.colours=function(x){return arguments.length?(y=x,p):y},p.fontSize=function(x){return arguments.length?(o=x,p):o},p.duration=function(x){return arguments.length?(e=x,p):e},p.layoutFunction=function(x){return arguments.length?(g=x,p):g},p.normalize=function(x){return arguments.length?(s=x,p):s},p.styled=function(x){return arguments.length?(f=x,p):f},p.orientation=function(x){return arguments.length?(i=x,p):i},p.orientationOrder=function(x){return arguments.length?(u=x,p):u},p.lossFunction=function(x){return arguments.length?(v=x,p):v},p}function lt(t,n){return function(){for(var r=$.select(this),e=r.datum(),i=t[e.sets[0]].radius||50,s=n(e)||"",a=s.split(/\s+/).reverse(),f=3,o=(s.length+a.length)/f,u=a.pop(),l=[u],h,d=0,y=1.1,g=r.text(null).append("tspan").text(u);u=a.pop(),!!u;)l.push(u),h=l.join(" "),g.text(h),h.length>o&&g.node().getComputedTextLength()>i&&(l.pop(),g.text(l.join(" ")),l=[u],g=r.append("tspan").text(u),d++);var v=.35-d*y/2,p=r.attr("x"),x=r.attr("y");r.selectAll("tspan").attr("x",p).attr("y",x).attr("dy",function(P,F){return v+F*y+"em"})}}function ht(t,n,r){var e=n[0].radius-T(n[0],t),i,s;for(i=1;i<n.length;++i)s=n[i].radius-T(n[i],t),s<=e&&(e=s);for(i=0;i<r.length;++i)s=T(r[i],t)-r[i].radius,s<=e&&(e=s);return e}function m(t,n){var r=[],e;for(e=0;e<t.length;++e){var i=t[e];r.push({x:i.x,y:i.y}),r.push({x:i.x+i.radius/2,y:i.y}),r.push({x:i.x-i.radius/2,y:i.y}),r.push({x:i.x,y:i.y+i.radius/2}),r.push({x:i.x,y:i.y-i.radius/2})}var s=r[0],a=ht(r[0],t,n);for(e=1;e<r.length;++e){var f=ht(r[e],t,n);f>=a&&(s=r[e],a=f)}var o=pt(function(d){return-1*ht({x:d[0],y:d[1]},t,n)},[s.x,s.y],{maxIterations:500,minErrorDelta:1e-10}).x,u={x:o[0],y:o[1]},l=!0;for(e=0;e<t.length;++e)if(T(u,t[e])>t[e].radius){l=!1;break}for(e=0;e<n.length;++e)if(T(u,n[e])<n[e].radius){l=!1;break}if(!l)if(t.length==1)u={x:t[0].x,y:t[0].y};else{var h={};U(t,h),h.arcs.length===0?u={x:0,y:-1e3,disjoint:!0}:h.arcs.length==1?u={x:h.arcs[0].circle.x,y:h.arcs[0].circle.y}:n.length?u=m(t,[]):u=j(h.arcs.map(function(d){return d.p1}))}return u}function z(t){var n={},r=[];for(var e in t)r.push(e),n[e]=[];for(var i=0;i<r.length;i++)for(var s=t[r[i]],a=i+1;a<r.length;++a){var f=t[r[a]],o=T(s,f);o+f.radius<=s.radius+1e-10?n[r[a]].push(r[i]):o+s.radius<=f.radius+1e-10&&n[r[i]].push(r[a])}return n}function N(t,n){for(var r={},e=z(t),i=0;i<n.length;++i){for(var s=n[i].sets,a={},f={},o=0;o<s.length;++o){a[s[o]]=!0;for(var u=e[s[o]],l=0;l<u.length;++l)f[u[l]]=!0}var h=[],d=[];for(var y in t)y in a?h.push(t[y]):y in f||d.push(t[y]);var g=m(h,d);r[s]=g,g.disjoint&&n[i].size>0&&console.log("WARNING: area "+s+" not represented on screen")}return r}function L(t,n){for(var r=z(t.selectAll("svg").datum()),e={},i=0;i<n.sets.length;++i){var s=n.sets[i];for(var a in r)for(var f=r[a],o=0;o<f.length;++o)if(f[o]==s){e[a]=!0;break}}function u(l){for(var h=0;h<l.length;++h)if(!(l[h]in e))return!1;return!0}t.selectAll("g").sort(function(l,h){return l.sets.length!=h.sets.length?l.sets.length-h.sets.length:l==n?u(h.sets)?-1:1:h==n?u(l.sets)?1:-1:h.size-l.size})}function K(t,n,r){var e=[];return e.push(`
M`,t,n),e.push(`
m`,-r,0),e.push(`
a`,r,r,0,1,0,r*2,0),e.push(`
a`,r,r,0,1,0,-r*2,0),e.join(" ")}function H(t){var n=t.split(" ");return{x:parseFloat(n[1]),y:parseFloat(n[2]),radius:-parseFloat(n[4])}}function ct(t){var n={};U(t,n);var r=n.arcs;if(r.length===0)return"M 0 0";if(r.length==1){var e=r[0].circle;return K(e.x,e.y,e.radius)}else{for(var i=[`
M`,r[0].p2.x,r[0].p2.y],s=0;s<r.length;++s){var a=r[s],f=a.circle.radius,o=a.width>f;i.push(`
A`,f,f,0,o?1:0,1,a.p1.x,a.p1.y)}return i.join(" ")}}S.intersectionArea=U,S.circleCircleIntersection=it,S.circleOverlap=W,S.circleArea=B,S.distance=T,S.venn=vt,S.greedyLayout=wt,S.scaleSolution=Dt,S.normalizeSolution=Et,S.bestInitialLayout=Ot,S.lossFunction=at,S.disjointCluster=Ct,S.distanceFromIntersectArea=ut,S.VennDiagram=dt,S.wrapText=lt,S.computeTextCentres=N,S.computeTextCentre=m,S.sortAreas=L,S.circlePath=K,S.circleFromPath=H,S.intersectionAreaPath=ct,Object.defineProperty(S,"__esModule",{value:!0})})})(Vt,Vt.exports);var be=Vt.exports;function De(E,C,S,$){let w=[],nt=[],U=0,rt=new Map;E.forEach((c,R)=>{for(let b=0;b<c.length;b++){c[b].value===!0&&rt.set(!0,c[b].formattedValue),c[b].value===!1&&rt.set(!1,c[b].formattedValue);let O;for(let q=0;q<C.length;q++)b===C[q]&&(O=$.dimensions[q]);O&&c[b].value&&nt.push({dimension:O,value:c[b].value,measure:se(c,S),rowId:U})}U++});function ft(c,R){return c.reduce(function(b,O){var q=O[R];return b[q]?b[q]=b[q]+O.measure:b[q]=O.measure,b},{})}var B=ft(nt,"dimension");for(var T in B)w.push({sets:[T],size:B[T]});let W=new Map,it=-1;nt.forEach((c,R)=>{if(c.rowId!==it)W.set(c.rowId,{sets:[c.dimension],size:c.measure}),it=c.rowId;else{let b=W.get(c.rowId),O=b.sets;O.push(c.dimension),W.set(c.rowId,{sets:O,size:b.size})}});let j=[],st=[];W.forEach((c,R)=>{if(c.sets.length===1)W.delete(R);else if(c.sets.length>1)for(let b=0;b<c.sets.length;b++)for(let O=b+1;O<c.sets.length;O++)j.push({sets:[c.sets[b],c.sets[O]],size:c.size})});for(let c=0;c<j.length;c++){let R=w.findIndex(b=>b.sets.toString()===j[c].sets.toString());R>=0?w[R].size=w[R].size+j[c].size:w.push(j[c])}for(let c=0;c<st.length;c++)w.findIndex(b=>b.sets.toString()!==st[c].sets.toString())>=0&&w.push(st[c]);for(let c=0;c<w.length;c++){for(let R=c+1;R<w.length;R++)w[c].sets.toString()===w[R].sets.toString()&&(w[c].size+=w[R].size,w.splice(R,1));if(w[c].sets.length>2)for(let R=c+1;R<w.length;R++)w[c].sets.toString()===w[R].sets.toString()&&w[c].size===w[R].size&&w.splice(R,1);if(w[c].sets.length>2)for(let R=c+1;R<w.length;R++)w[c].sets.toString()===w[R].sets.toString()&&w[c].size!==w[R].size&&(w[c].size+=w[R].size)}return w.sort((c,R)=>c.size>R.size?-1:1),tableau.extensions.settings.set("vennData",w),{data:w,values:rt}}function Te(E,C,S){let $=null,{measureFormat:w,measureStyle:nt,color:U,width:rt,height:ft,extraSettings:B,enableLegend:T,legendPosition:W,legendRows:it,vennSetNumber:j,legendColumns:st,legendPaddingX:c,legendPaddingY:R,isDarkTheme:b,dimensionColors:O,useNewColorFormat:q,slotAliases:Y,filterMode:pt}=S;const gt=C.values,Mt=new ae("#tooltip",rt,ft);function vt(m){let z=[];for(let N=0;N<m.length;N++)Y[m[N]]?z.push(Y[m[N]]):z.push(m[N]);return z.length>1?z=z.join(" - "):z=z[0],z}function Rt(m,z){if(z){let N=z.toString();return Object.keys(m).find(L=>m[L]===N)}}C.data.forEach((m,z)=>{m.Alias=vt(m.sets)}),w||(w=",.0f");let ut=ce(w);nt&&(ut=ue(nt));let ot=isNaN(parseFloat(B[0])/100)?.8:parseFloat(B[0])/100,Ft=isNaN(parseFloat(B[1])/100)?.8:parseFloat(B[1])/100,zt=isNaN(parseFloat(B[2]))?2:parseFloat(B[2]),Ot=isNaN(parseFloat(B[3])/100)?1:parseFloat(B[3])/100,Nt=5,wt=rt-Nt,at=ft-Nt;var xt=be.VennDiagram().width(rt-zt).height(ft-zt);if(xt=E.datum(C.data).call(xt),T){W==="right"&&(wt-=st*100+45),W==="bottom"&&(at-=it*18+20);let m=T&&W==="right"?wt:10,z=T&&W==="bottom"?at:20;m+=parseInt(c),z+=parseInt(R),new fe(E,O,b).title(S.legendTitle?S.legendTitle:"Color Legend").text(N=>vt(N.fieldName)!==""?vt([N.fieldName]):N.fieldName).offset(m,z).positioning(W).nrRows(it).nrColumns(st).color(N=>{let L=Rt(Y,N),K=L||N;if(q){for(var H=0;H<O.length;H++)if(O[H].fieldName===K)return O[H].color}else return U(K)}).draw()}if(xt.selectAll(".venn-circle path").style("fill-opacity",ot).style("stroke-width",zt).style("stroke-opacity",Ot).style("stroke",function(m,z){if(q){for(var z=0;z<O.length;z++)if(O[z].fieldName===m.sets[0])return O[z].color}else return U(m.sets[0])}).style("fill",function(m,z){if(q){for(var z=0;z<O.length;z++)if(O[z].fieldName===m.sets[0])return O[z].color}else return U(m.sets[0])}),xt.selectAll("g").classed("focus",m=>m.sets===$).on("click",Dt).on("mouseover",(m,z)=>{let N;m.sets.forEach(L=>{N?N=m.Alias&&m.Alias.length?m.Alias:N+" - "+L:N=m.Alias&&m.Alias.length?m.Alias:L}),Mt.show(S.tooltips.node.content||S.tooltips.node,{DimensionName:N,MeasureValue:ut(m.size).bold()}),lt(m)}).on("mousemove",()=>{Mt.updatePosition()}).on("mouseout",()=>{Mt.hide(),ht()}),E.selectAll(".venn-circle text").style("fill",function(m,z){if(ot>.7)return"#fff";if(q){for(var z=0;z<O.length;z++)if(O[z].fieldName===m.sets[0])return O[z].color}else return U(z)}).text(function(m){return m.Alias&&m.Alias.length?m.Alias:m.sets.toString()}).style("font-size",S.fontSize+"rem").style("opacity",Ft).style("font-weight","400"),j==="true"){var Ct=mt(".venn-intersection");Ct.each(function(m,z){var N=Pt(this).select("text");N.attr("y",function(L,K){var H=Pt(this).attr("y");return H-8}),N.style("font-size",S.fontSize+"rem").style("opacity",Ft).style("font-weight","700").text(parseInt(m.size))})}E.on("click",It);function It(){Bt(),mt("path").classed("focus",!1),ht({unfixHighlight:!0})}function Et(){Bt(),$=null,mt("path").classed("focus",!1),ht({unfixHighlight:!0})}function Dt(m){event.stopPropagation();let z=Pt(this).select("path"),N=z.classed("focus");if(Et(),!N){if($=m.sets,z.classed("focus",!0),lt(m,{fixHighlight:!0}),m.sets.length==1&&!pt&&m.sets.forEach((L,K)=>{Lt(L,gt.get(!0),0)}),m.sets.length!==1)m.sets.forEach((L,K)=>{Lt(L,gt.get(!0),0)});else if(m.sets.length===1&&pt){let L=[];C.data.forEach((H,ct)=>{L.push(H.sets[0])});let K=[];m.sets.forEach((H,ct)=>{L=L.filter(t=>t!==H),K=H}),L.forEach((H,ct)=>{Lt(H,gt.get(!0),1)}),Lt(K,gt.get(!0),0)}}}let dt;function lt(m,{fixHighlight:z=!1}={}){dt||(mt("path").style("fill-opacity",N=>N===m?m.sets.length===1?ot:.25:N.sets.length===1?ot-.3:0),z&&(dt=!0))}function ht({unfixHighlight:m=!1}={}){m&&(dt=!1),!dt&&mt("path").style("fill-opacity",z=>z.sets.length===1?ot:0)}}export{Te as draw,De as parse};
//# sourceMappingURL=venn-diagram-ZYvdRndD.js.map
