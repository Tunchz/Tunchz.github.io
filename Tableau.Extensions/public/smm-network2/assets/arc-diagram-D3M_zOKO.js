import{l as A}from"./_plugin-vue2_normalizer-xzsEtbse.js";import"./main-CVmQxpd7.js";import{p as T}from"./band-BVtZk_0J.js";import"./index-BvYcEE5T.js";import"./range-OtVwhkKS.js";const v="%||%";function M(f,a,p,c){let u=new Map,g=new Set,h=c.extraSettings[11]==="0"?0:1;for(let t=1;t<a.length;t++)for(let r of f){let i=c.dimensions[t-1],s=c.dimensions[t],m=a[t-1],n=a[t],l=r[m].formattedValue,e=r[n].formattedValue;if(h&&A(r[n]))continue;let x=i+v+l,N=s+v+e,d=parseFloat(r[p].value);if(Number.isNaN(d))throw new Error("The selected measure contains non-numeric values.");if(d<=0)throw new Error("The selected measure contains values smaller than or equal to 0.");let y=x+N;u.has(y)&&(d+=u.get(y).value),g.add(x).add(N),u.set(y,{source:x,target:N,value:d})}let o=Array.from(g,t=>{let[r,i]=t.split(v);return{dimension:r,name:i,id:t}}),w=Array.from(u.values());return{nodes:o,links:w}}function q(f,a,p){let{measureName:c,measureFormat:u,color:g,width:h,height:o,backgroundColor:w,extraSettings:t}=p;const r=f.append("g").attr("transform","translate(0,0)");var i=a.nodes.map(function(e){return e.name}),s=T().range([60,h-60]).domain(i);r.selectAll("mynodes").data(a.nodes).enter().append("circle").attr("cx",function(e){return s(e.name)}).attr("cy",o-30).attr("r",10).style("fill","#69b3a2"),r.selectAll("mylabels").data(a.nodes).enter().append("text").attr("x",function(e){return s(e.name)}).attr("y",o-10).text(function(e){return e.name}).style("text-anchor","middle");var m={};a.nodes.forEach(function(e){m[e.id]=e});let n,l;r.selectAll("mylinks").data(a.links).enter().append("path").attr("d",function(e){return n=s(m[e.source].name),l=s(m[e.target].name),["M",n,o-30,"A",(n-l)/2,",",(n-l)/2,0,0,",",n<l?1:0,l,",",o-30].join(" ")}).style("fill","none").attr("stroke","black")}export{q as draw,M as parse};
//# sourceMappingURL=arc-diagram-D3M_zOKO.js.map
