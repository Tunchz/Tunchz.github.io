"use strict";(()=>{var Gw=Object.create;var i1=Object.defineProperty,Rw=Object.defineProperties,Nw=Object.getOwnPropertyDescriptor,zw=Object.getOwnPropertyDescriptors,Fw=Object.getOwnPropertyNames,vf=Object.getOwnPropertySymbols,Bw=Object.getPrototypeOf,o1=Object.prototype.hasOwnProperty,Bv=Object.prototype.propertyIsEnumerable;var Fv=(r,o,t)=>o in r?i1(r,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[o]=t,S=(r,o)=>{for(var t in o||={})o1.call(o,t)&&Fv(r,t,o[t]);if(vf)for(var t of vf(o))Bv.call(o,t)&&Fv(r,t,o[t]);return r},_t=(r,o)=>Rw(r,zw(o));var Hv=r=>typeof r=="symbol"?r:r+"",_n=(r,o)=>{var t={};for(var e in r)o1.call(r,e)&&o.indexOf(e)<0&&(t[e]=r[e]);if(r!=null&&vf)for(var e of vf(r))o.indexOf(e)<0&&Bv.call(r,e)&&(t[e]=r[e]);return t};var Hw=(r,o)=>()=>(r&&(o=r(r=0)),o);var Bn=(r,o)=>()=>(o||r((o={exports:{}}).exports,o),o.exports);var jw=(r,o,t,e)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of Fw(o))!o1.call(r,n)&&n!==t&&i1(r,n,{get:()=>o[n],enumerable:!(e=Nw(o,n))||e.enumerable});return r};var Vw=(r,o,t)=>(t=r!=null?Gw(Bw(r)):{},jw(o||!r||!r.__esModule?i1(t,"default",{value:r,enumerable:!0}):t,r));var G=(r,o,t)=>new Promise((e,n)=>{var i=_=>{try{a(t.next(_))}catch(c){n(c)}},s=_=>{try{a(t.throw(_))}catch(c){n(c)}},a=_=>_.done?e(_.value):Promise.resolve(_.value).then(i,s);a((t=t.apply(r,o)).next())});var l=Hw(()=>{});var PD=Bn((AOt,wD)=>{l();wD.exports=ED;function ED(r,o,t,e){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.addPoint(r,o),this.addPoint(t,e)}ED.prototype={width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},addPoint:function(r,o){r!=null&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=r,this.x2=r),r<this.x1&&(this.x1=r),r>this.x2&&(this.x2=r)),o!=null&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=o,this.y2=o),o<this.y1&&(this.y1=o),o>this.y2&&(this.y2=o))},addX:function(r){this.addPoint(r,null)},addY:function(r){this.addPoint(null,r)},addQuadraticCurve:function(r,o,t,e,n,i){var s=r+.6666666666666666*(t-r),a=o+2/3*(e-o),_=s+1/3*(n-r),c=a+1/3*(i-o);this.addBezierCurve(r,o,s,_,a,c,n,i)},addBezierCurve:function(r,o,t,e,n,i,s,a){var _,c=[r,o],p=[t,e],u=[n,i],d=[s,a];for(this.addPoint(c[0],c[1]),this.addPoint(d[0],d[1]),_=0;_<=1;_++){var m=function(E){return Math.pow(1-E,3)*c[_]+3*Math.pow(1-E,2)*E*p[_]+3*(1-E)*Math.pow(E,2)*u[_]+Math.pow(E,3)*d[_]},h=6*c[_]-12*p[_]+6*u[_],f=-3*c[_]+9*p[_]-9*u[_]+3*d[_],b=3*p[_]-3*c[_];if(f==0){if(h==0)continue;var g=-b/h;0<g&&g<1&&(_==0&&this.addX(m(g)),_==1&&this.addY(m(g)));continue}var v=Math.pow(h,2)-4*b*f;if(!(v<0)){var x=(-h+Math.sqrt(v))/(2*f);0<x&&x<1&&(_==0&&this.addX(m(x)),_==1&&this.addY(m(x)));var I=(-h-Math.sqrt(v))/(2*f);0<I&&I<1&&(_==0&&this.addX(m(I)),_==1&&this.addY(m(I)))}}}}});var TD=Bn((OOt,CD)=>{l();CD.exports=kD;function kD(r){this.x1=this.minX=r.x1||0,this.y1=this.minY=r.y1||0,this.x2=this.maxX=r.x2||0,this.y2=this.maxY=r.y2||0,this.width=r.width()||0,this.height=r.height()||0}kD.prototype={round:function(r){return r=r||0,this.x1=this.minX=+this.x1.toFixed(r),this.y1=this.minY=+this.y1.toFixed(r),this.x2=this.maxX=+this.x2.toFixed(r),this.y2=this.maxY=+this.y2.toFixed(r),this.width=+this.width.toFixed(r),this.height=+this.height.toFixed(r),this},scale:function(r){var o=this;return r=r||1,["x1","minX","y1","minY","x2","maxX","y2","maxY","width","height"].forEach(function(t){o[t]=o[t]*r}),this},toString:function(){return[this.minX,this.minY,this.width,this.height].join(" ")}}});var MD=Bn((LOt,AD)=>{"use strict";l();var D0={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},VT=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function KT(r){return r===10||r===13||r===8232||r===8233||r===32||r===9||r===11||r===12||r===160||r>=5760&&VT.indexOf(r)>=0}function WT(r){switch(r|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function qT(r){return(r|32)===97}function ya(r){return r>=48&&r<=57}function YT(r){return r>=48&&r<=57||r===43||r===45||r===46}function XT(r){this.index=0,this.path=r,this.max=r.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function E0(r){for(;r.index<r.max&&KT(r.path.charCodeAt(r.index));)r.index++}function JT(r){var o=r.path.charCodeAt(r.index);if(o===48){r.param=0,r.index++;return}if(o===49){r.param=1,r.index++;return}r.err="SvgPath: arc flag can be 0 or 1 only (at pos "+r.index+")"}function ZT(r){var o=r.index,t=o,e=r.max,n=!1,i=!1,s=!1,a=!1,_;if(t>=e){r.err="SvgPath: missed param (at pos "+t+")";return}if(_=r.path.charCodeAt(t),(_===43||_===45)&&(t++,_=t<e?r.path.charCodeAt(t):0),!ya(_)&&_!==46){r.err="SvgPath: param should start with 0..9 or `.` (at pos "+t+")";return}if(_!==46){if(n=_===48,t++,_=t<e?r.path.charCodeAt(t):0,n&&t<e&&_&&ya(_)){r.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+o+")";return}for(;t<e&&ya(r.path.charCodeAt(t));)t++,i=!0;_=t<e?r.path.charCodeAt(t):0}if(_===46){for(a=!0,t++;ya(r.path.charCodeAt(t));)t++,s=!0;_=t<e?r.path.charCodeAt(t):0}if(_===101||_===69){if(a&&!i&&!s){r.err="SvgPath: invalid float exponent (at pos "+t+")";return}if(t++,_=t<e?r.path.charCodeAt(t):0,(_===43||_===45)&&t++,t<e&&ya(r.path.charCodeAt(t)))for(;t<e&&ya(r.path.charCodeAt(t));)t++;else{r.err="SvgPath: invalid float exponent (at pos "+t+")";return}}r.index=t,r.param=parseFloat(r.path.slice(o,t))+0}function pv(r){var o,t;o=r.path[r.segmentStart],t=o.toLowerCase();var e=r.data;if(t==="m"&&e.length>2&&(r.result.push([o,e[0],e[1]]),e=e.slice(2),t="l",o=o==="m"?"l":"L"),t==="r")r.result.push([o].concat(e));else for(;e.length>=D0[t]&&(r.result.push([o].concat(e.splice(0,D0[t]))),!!D0[t]););}function QT(r){var o=r.max,t,e,n,i,s;if(r.segmentStart=r.index,t=r.path.charCodeAt(r.index),e=qT(t),!WT(t)){r.err="SvgPath: bad command "+r.path[r.index]+" (at pos "+r.index+")";return}if(i=D0[r.path[r.index].toLowerCase()],r.index++,E0(r),r.data=[],!i){pv(r);return}for(n=!1;;){for(s=i;s>0;s--){if(e&&(s===3||s===4)?JT(r):ZT(r),r.err.length){pv(r);return}r.data.push(r.param),E0(r),n=!1,r.index<o&&r.path.charCodeAt(r.index)===44&&(r.index++,E0(r),n=!0)}if(!n&&(r.index>=r.max||!YT(r.path.charCodeAt(r.index))))break}pv(r)}AD.exports=function(o){var t=new XT(o),e=t.max;for(E0(t);t.index<e&&!t.err.length;)QT(t);return t.result.length&&("mM".indexOf(t.result[0][0])<0?(t.err="SvgPath: string should start with `M` or `m`",t.result=[]):t.result[0][0]="M"),{err:t.err,segments:t.result}}});var cv=Bn((GOt,OD)=>{"use strict";l();function tA(r,o){return[r[0]*o[0]+r[2]*o[1],r[1]*o[0]+r[3]*o[1],r[0]*o[2]+r[2]*o[3],r[1]*o[2]+r[3]*o[3],r[0]*o[4]+r[2]*o[5]+r[4],r[1]*o[4]+r[3]*o[5]+r[5]]}function Pi(){if(!(this instanceof Pi))return new Pi;this.queue=[],this.cache=null}Pi.prototype.matrix=function(r){return r[0]===1&&r[1]===0&&r[2]===0&&r[3]===1&&r[4]===0&&r[5]===0?this:(this.cache=null,this.queue.push(r),this)};Pi.prototype.translate=function(r,o){return(r!==0||o!==0)&&(this.cache=null,this.queue.push([1,0,0,1,r,o])),this};Pi.prototype.scale=function(r,o){return(r!==1||o!==1)&&(this.cache=null,this.queue.push([r,0,0,o,0,0])),this};Pi.prototype.rotate=function(r,o,t){var e,n,i;return r!==0&&(this.translate(o,t),e=r*Math.PI/180,n=Math.cos(e),i=Math.sin(e),this.queue.push([n,i,-i,n,0,0]),this.cache=null,this.translate(-o,-t)),this};Pi.prototype.skewX=function(r){return r!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(r*Math.PI/180),1,0,0])),this};Pi.prototype.skewY=function(r){return r!==0&&(this.cache=null,this.queue.push([1,Math.tan(r*Math.PI/180),0,1,0,0])),this};Pi.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var r=1;r<this.queue.length;r++)this.cache=tA(this.cache,this.queue[r]);return this.cache};Pi.prototype.calc=function(r,o,t){var e;return this.queue.length?(this.cache||(this.cache=this.toArray()),e=this.cache,[r*e[0]+o*e[2]+(t?0:e[4]),r*e[1]+o*e[3]+(t?0:e[5])]):[r,o]};OD.exports=Pi});var LD=Bn((NOt,$D)=>{"use strict";l();var eA=cv(),nA={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},iA=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,oA=/[\s,]+/;$D.exports=function(o){var t=new eA,e,n;return o.split(iA).forEach(function(i){if(i.length){if(typeof nA[i]<"u"){e=i;return}switch(n=i.split(oA).map(function(s){return+s||0}),e){case"matrix":n.length===6&&t.matrix(n);return;case"scale":n.length===1?t.scale(n[0],n[0]):n.length===2&&t.scale(n[0],n[1]);return;case"rotate":n.length===1?t.rotate(n[0],0,0):n.length===3&&t.rotate(n[0],n[1],n[2]);return;case"translate":n.length===1?t.translate(n[0],0):n.length===2&&t.translate(n[0],n[1]);return;case"skewX":n.length===1&&t.skewX(n[0]);return;case"skewY":n.length===1&&t.skewY(n[0]);return}}}),t}});var RD=Bn((FOt,GD)=>{"use strict";l();var gh=Math.PI*2;function UD(r,o,t,e){var n=r*e-o*t<0?-1:1,i=r*t+o*e;return i>1&&(i=1),i<-1&&(i=-1),n*Math.acos(i)}function sA(r,o,t,e,n,i,s,a,_,c){var p=c*(r-t)/2+_*(o-e)/2,u=-_*(r-t)/2+c*(o-e)/2,d=s*s,m=a*a,h=p*p,f=u*u,b=d*m-d*f-m*h;b<0&&(b=0),b/=d*f+m*h,b=Math.sqrt(b)*(n===i?-1:1);var g=b*s/a*u,v=b*-a/s*p,x=c*g-_*v+(r+t)/2,I=_*g+c*v+(o+e)/2,E=(p-g)/s,D=(u-v)/a,w=(-p-g)/s,T=(-u-v)/a,C=UD(1,0,E,D),P=UD(E,D,w,T);return i===0&&P>0&&(P-=gh),i===1&&P<0&&(P+=gh),[x,I,C,P]}function rA(r,o){var t=1.3333333333333333*Math.tan(o/4),e=Math.cos(r),n=Math.sin(r),i=Math.cos(r+o),s=Math.sin(r+o);return[e,n,e-n*t,n+e*t,i+s*t,s-i*t,i,s]}GD.exports=function(o,t,e,n,i,s,a,_,c){var p=Math.sin(c*gh/360),u=Math.cos(c*gh/360),d=u*(o-e)/2+p*(t-n)/2,m=-p*(o-e)/2+u*(t-n)/2;if(d===0&&m===0)return[];if(a===0||_===0)return[];a=Math.abs(a),_=Math.abs(_);var h=d*d/(a*a)+m*m/(_*_);h>1&&(a*=Math.sqrt(h),_*=Math.sqrt(h));var f=sA(o,t,e,n,i,s,a,_,p,u),b=[],g=f[2],v=f[3],x=Math.max(Math.ceil(Math.abs(v)/(gh/4)),1);v/=x;for(var I=0;I<x;I++)b.push(rA(g,v)),g+=v;return b.map(function(E){for(var D=0;D<E.length;D+=2){var w=E[D+0],T=E[D+1];w*=a,T*=_;var C=u*w-p*T,P=p*w+u*T;E[D+0]=C+f[0],E[D+1]=P+f[1]}return E})}});var FD=Bn((HOt,zD)=>{"use strict";l();var bh=1e-10,ND=Math.PI/180;function yh(r,o,t){if(!(this instanceof yh))return new yh(r,o,t);this.rx=r,this.ry=o,this.ax=t}yh.prototype.transform=function(r){var o=Math.cos(this.ax*ND),t=Math.sin(this.ax*ND),e=[this.rx*(r[0]*o+r[2]*t),this.rx*(r[1]*o+r[3]*t),this.ry*(-r[0]*t+r[2]*o),this.ry*(-r[1]*t+r[3]*o)],n=e[0]*e[0]+e[2]*e[2],i=e[1]*e[1]+e[3]*e[3],s=((e[0]-e[3])*(e[0]-e[3])+(e[2]+e[1])*(e[2]+e[1]))*((e[0]+e[3])*(e[0]+e[3])+(e[2]-e[1])*(e[2]-e[1])),a=(n+i)/2;if(s<bh*a)return this.rx=this.ry=Math.sqrt(a),this.ax=0,this;var _=e[0]*e[1]+e[2]*e[3];s=Math.sqrt(s);var c=a+s/2,p=a-s/2;return this.ax=Math.abs(_)<bh&&Math.abs(c-i)<bh?90:Math.atan(Math.abs(_)>Math.abs(c-i)?(c-n)/_:_/(c-i))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(c),this.ry=Math.sqrt(p)):(this.ax+=90,this.rx=Math.sqrt(p),this.ry=Math.sqrt(c)),this};yh.prototype.isDegenerate=function(){return this.rx<bh*this.ry||this.ry<bh*this.rx};zD.exports=yh});var HD=Bn((VOt,BD)=>{"use strict";l();var aA=MD(),_A=LD(),is=cv(),pA=RD(),cA=FD();function Ge(r){if(!(this instanceof Ge))return new Ge(r);var o=aA(r);this.segments=o.segments,this.err=o.err,this.__stack=[]}Ge.from=function(r){if(typeof r=="string")return new Ge(r);if(r instanceof Ge){var o=new Ge("");return o.err=r.err,o.segments=r.segments.map(function(t){return t.slice()}),o.__stack=r.__stack.map(function(t){return is().matrix(t.toArray())}),o}throw new Error("SvgPath.from: invalid param type "+r)};Ge.prototype.__matrix=function(r){var o=this,t;r.queue.length&&this.iterate(function(e,n,i,s){var a,_,c,p;switch(e[0]){case"v":a=r.calc(0,e[1],!0),_=a[0]===0?["v",a[1]]:["l",a[0],a[1]];break;case"V":a=r.calc(i,e[1],!1),_=a[0]===r.calc(i,s,!1)[0]?["V",a[1]]:["L",a[0],a[1]];break;case"h":a=r.calc(e[1],0,!0),_=a[1]===0?["h",a[0]]:["l",a[0],a[1]];break;case"H":a=r.calc(e[1],s,!1),_=a[1]===r.calc(i,s,!1)[1]?["H",a[0]]:["L",a[0],a[1]];break;case"a":case"A":var u=r.toArray(),d=cA(e[1],e[2],e[3]).transform(u);if(u[0]*u[3]-u[1]*u[2]<0&&(e[5]=e[5]?"0":"1"),a=r.calc(e[6],e[7],e[0]==="a"),e[0]==="A"&&e[6]===i&&e[7]===s||e[0]==="a"&&e[6]===0&&e[7]===0){_=[e[0]==="a"?"l":"L",a[0],a[1]];break}d.isDegenerate()?_=[e[0]==="a"?"l":"L",a[0],a[1]]:_=[e[0],d.rx,d.ry,d.ax,e[4],e[5],a[0],a[1]];break;case"m":p=n>0,a=r.calc(e[1],e[2],p),_=["m",a[0],a[1]];break;default:for(c=e[0],_=[c],p=c.toLowerCase()===c,t=1;t<e.length;t+=2)a=r.calc(e[t],e[t+1],p),_.push(a[0],a[1])}o.segments[n]=_},!0)};Ge.prototype.__evaluateStack=function(){var r,o;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(r=is(),o=this.__stack.length;--o>=0;)r.matrix(this.__stack[o].toArray());this.__matrix(r),this.__stack=[]}};Ge.prototype.toString=function(){var r="",o="",t=!1;this.__evaluateStack();for(var e=0,n=this.segments.length;e<n;e++){var i=this.segments[e],s=i[0];s!==o||s==="m"||s==="M"?(s==="m"&&o==="z"&&(r+=" "),r+=s,t=!1):t=!0;for(var a=1;a<i.length;a++){var _=i[a];a===1?t&&_>=0&&(r+=" "):_>=0&&(r+=" "),r+=_}o=s}return r};Ge.prototype.translate=function(r,o){return this.__stack.push(is().translate(r,o||0)),this};Ge.prototype.scale=function(r,o){return this.__stack.push(is().scale(r,!o&&o!==0?r:o)),this};Ge.prototype.rotate=function(r,o,t){return this.__stack.push(is().rotate(r,o||0,t||0)),this};Ge.prototype.skewX=function(r){return this.__stack.push(is().skewX(r)),this};Ge.prototype.skewY=function(r){return this.__stack.push(is().skewY(r)),this};Ge.prototype.matrix=function(r){return this.__stack.push(is().matrix(r)),this};Ge.prototype.transform=function(r){return r.trim()?(this.__stack.push(_A(r)),this):this};Ge.prototype.round=function(r){var o=0,t=0,e=0,n=0,i;return r=r||0,this.__evaluateStack(),this.segments.forEach(function(s){var a=s[0].toLowerCase()===s[0];switch(s[0]){case"H":case"h":a&&(s[1]+=e),e=s[1]-s[1].toFixed(r),s[1]=+s[1].toFixed(r);return;case"V":case"v":a&&(s[1]+=n),n=s[1]-s[1].toFixed(r),s[1]=+s[1].toFixed(r);return;case"Z":case"z":e=o,n=t;return;case"M":case"m":a&&(s[1]+=e,s[2]+=n),e=s[1]-s[1].toFixed(r),n=s[2]-s[2].toFixed(r),o=e,t=n,s[1]=+s[1].toFixed(r),s[2]=+s[2].toFixed(r);return;case"A":case"a":a&&(s[6]+=e,s[7]+=n),e=s[6]-s[6].toFixed(r),n=s[7]-s[7].toFixed(r),s[1]=+s[1].toFixed(r),s[2]=+s[2].toFixed(r),s[3]=+s[3].toFixed(r+2),s[6]=+s[6].toFixed(r),s[7]=+s[7].toFixed(r);return;default:i=s.length,a&&(s[i-2]+=e,s[i-1]+=n),e=s[i-2]-s[i-2].toFixed(r),n=s[i-1]-s[i-1].toFixed(r),s.forEach(function(_,c){c&&(s[c]=+s[c].toFixed(r))});return}}),this};Ge.prototype.iterate=function(r,o){var t=this.segments,e={},n=!1,i=0,s=0,a=0,_=0,c,p,u;if(o||this.__evaluateStack(),t.forEach(function(d,m){var h=r(d,m,i,s);Array.isArray(h)&&(e[m]=h,n=!0);var f=d[0]===d[0].toLowerCase();switch(d[0]){case"m":case"M":i=d[1]+(f?i:0),s=d[2]+(f?s:0),a=i,_=s;return;case"h":case"H":i=d[1]+(f?i:0);return;case"v":case"V":s=d[1]+(f?s:0);return;case"z":case"Z":i=a,s=_;return;default:i=d[d.length-2]+(f?i:0),s=d[d.length-1]+(f?s:0)}}),!n)return this;for(u=[],c=0;c<t.length;c++)if(typeof e[c]<"u")for(p=0;p<e[c].length;p++)u.push(e[c][p]);else u.push(t[c]);return this.segments=u,this};Ge.prototype.abs=function(){return this.iterate(function(r,o,t,e){var n=r[0],i=n.toUpperCase(),s;if(n!==i)switch(r[0]=i,n){case"v":r[1]+=e;return;case"a":r[6]+=t,r[7]+=e;return;default:for(s=1;s<r.length;s++)r[s]+=s%2?t:e}},!0),this};Ge.prototype.rel=function(){return this.iterate(function(r,o,t,e){var n=r[0],i=n.toLowerCase(),s;if(n!==i&&!(o===0&&n==="M"))switch(r[0]=i,n){case"V":r[1]-=e;return;case"A":r[6]-=t,r[7]-=e;return;default:for(s=1;s<r.length;s++)r[s]-=s%2?t:e}},!0),this};Ge.prototype.unarc=function(){return this.iterate(function(r,o,t,e){var n,i,s,a=[],_=r[0];return _!=="A"&&_!=="a"?null:(_==="a"?(i=t+r[6],s=e+r[7]):(i=r[6],s=r[7]),n=pA(t,e,i,s,r[4],r[5],r[1],r[2],r[3]),n.length===0?[[r[0]==="a"?"l":"L",r[6],r[7]]]:(n.forEach(function(c){a.push(["C",c[2],c[3],c[4],c[5],c[6],c[7]])}),a))}),this};Ge.prototype.unshort=function(){var r=this.segments,o,t,e,n,i;return this.iterate(function(s,a,_,c){var p=s[0],u=p.toUpperCase(),d;a&&(u==="T"?(d=p==="t",e=r[a-1],e[0]==="Q"?(o=e[1]-_,t=e[2]-c):e[0]==="q"?(o=e[1]-e[3],t=e[2]-e[4]):(o=0,t=0),n=-o,i=-t,d||(n+=_,i+=c),r[a]=[d?"q":"Q",n,i,s[1],s[2]]):u==="S"&&(d=p==="s",e=r[a-1],e[0]==="C"?(o=e[3]-_,t=e[4]-c):e[0]==="c"?(o=e[3]-e[5],t=e[4]-e[6]):(o=0,t=0),n=-o,i=-t,d||(n+=_,i+=c),r[a]=[d?"c":"C",n,i,s[1],s[2],s[3],s[4]]))}),this};BD.exports=Ge});var VD=Bn((WOt,jD)=>{"use strict";l();jD.exports=HD()});var qD=Bn((YOt,WD)=>{l();var uA=PD(),dA=TD(),lA=VD();WD.exports=KD;function KD(r){this.d=r}KD.prototype={getBoundingBox:function(){var r,o;return r=new lA(this.d),o=new uA,r.abs().unarc().unshort().iterate(function(t,e,n,i){switch(t[0]){case"M":case"L":o.addPoint(t[1],t[2]);break;case"H":o.addX(t[1]);break;case"V":o.addY(t[1]);break;case"Q":o.addQuadraticCurve(n,i,t[1],t[2],t[3],t[4]);break;case"C":o.addBezierCurve(n,i,t[1],t[2],t[3],t[4],t[5],t[6]);break}}),new dA(o)}}});var ZD=Bn((JOt,JD)=>{l();var YD=qD();JD.exports=XD;function XD(r){return new YD(r).getBoundingBox()}XD.Path=YD});var tE=Bn((QOt,QD)=>{l();QD.exports=ZD()});var ZE=Bn((XE,JE)=>{l();(function(){var r=this,o={};typeof XE<"u"?JE.exports=o:r.fuzzy=o,o.simpleFilter=function(t,e){return e.filter(function(n){return o.test(t,n)})},o.test=function(t,e){return o.match(t,e)!==null},o.match=function(t,e,n){n=n||{};var i=0,s=[],a=e.length,_=0,c=0,p=n.pre||"",u=n.post||"",d=n.caseSensitive&&e||e.toLowerCase(),m;t=n.caseSensitive&&t||t.toLowerCase();for(var h=0;h<a;h++)m=e[h],d[h]===t[i]?(m=p+m+u,i+=1,c+=1+c):c=0,_+=c,s[s.length]=m;return i===t.length?(_=d===t?1/0:_,{rendered:s.join(""),score:_}):null},o.filter=function(t,e,n){return!e||e.length===0?[]:typeof t!="string"?e:(n=n||{},e.reduce(function(i,s,a,_){var c=s;n.extract&&(c=n.extract(s));var p=o.match(t,c,n);return p!=null&&(i[i.length]={string:p.rendered,score:p.score,index:a,original:s}),i},[]).sort(function(i,s){var a=s.score-i.score;return a||i.index-s.index}))}})()});l();l();l();l();var Pa=class extends Error{constructor(){super("listener not found")}};l();function fr({obj:r={}}){return{keys:Object.keys(r)}}function J(r){return Object.keys(r)}var Re=class{constructor(){this.__listeners={};this._removeListener=(o,t)=>{let e=this.__listeners[o];if(!e)throw new Pa;let n=e.indexOf(t);if(n<0)throw new Pa;e.splice(n,1),e.length===0&&(delete this.__listeners[o],this.emit("unlisten",{event:o}))}}prependListener(o,t){return this.__listeners[o]=this.__listeners[o]||[],this.__listeners[o].unshift(t),this.emit("listen",{event:o}),()=>{this._removeListener(o,t)}}removeListener(o,t){this._removeListener(o,t)}addListener(o,t){return this.__listeners[o]=this.__listeners[o]||[],this.__listeners[o].push(t),this.emit("listen",{event:o}),()=>{this._removeListener(o,t)}}eventNames(){return J(this.__listeners)}listenerCount(o){return(this.__listeners[o]||[]).length}emit(o,...t){let e=this.__listeners[o];if(e){for(let n of e)n.call(this,...t);this.emit("emit",{event:o})}}};l();function zt(){}l();l();function bn(r,o){r.forEach(o)}function yn(r,o){r.splice(o,1)}function Hn(r,o){let t=r.indexOf(o);yn(r,t)}function vn(r,o){let t=r.indexOf(o);yn(r,t)}function en(r,o){r.push(o)}function Ue(r,o,t){return r.splice(t,0,o),r}function ka(r,...o){return r.unshift(...o)}function Kw(r){return r.length-1}function to(r){let o=Kw(r);return r[o]}function s1(r){return r.slice(0,-1)}function Vv(r){let o=r.length,t=r[o-1],e=r.slice(0,o-1);return[t,e]}function Ca(r){let o=[];for(let t=0;t<r;t++)o.push(t);return o}function jv(r){return new Set(Ca(r.length))}function Kv(r,o,t){return Wv(r,o,jv(r),jv(o),[],t)}function Wv(r,o,t,e,n,i){let s=[];for(let a of t){let _=r[a];for(let c of e){let p=o[c];if(i(_,p)){let u=new Set(t),d=new Set(e);u.delete(a),d.delete(c);let m=Wv(r,o,u,d,n,i);if(m.length>0)for(let h of m)s.push([[a,c],...h]);else s.push([...n,[a,c]])}}}return s}function r1(r,o,t){Hn(r,o),Ue(r,o,t)}function qv(r){return r.reduce((o,t)=>Math.min(o,t),1/0)}function Yv(r){return r.reduce((o,t)=>Math.max(o,t),-1/0)}var Po=class{constructor(o){this._node={emitter:new Re,children:{}};this._dispatch=(o,t,e,n)=>{this._rec_dispatch(t,this._node,o,t,e,n)};this._rec_dispatch=(o,t,e,n,i,s)=>{if(o.length===0)this._end_dispatch(t,e,n,i,s);else{let[a,..._]=o,c=t.children[a];c&&this._rec_dispatch(_,c,e,n,i,s);let p=t.children["*"];p&&this._rec_dispatch(_,p,e,n,i,s)}};this._end_dispatch=(o,t,e,n,i)=>{let{emitter:s}=o;s&&(s.emit(n,t,e,n,i),s.emit("*",t,e,n,i))};this._ensure_emitter=o=>{let t=this._node;for(let e of o)t.children[e]||(t.children[e]={emitter:new Re,children:{}}),t=t.children[e];return t.emitter};this._remove_node=o=>{if(o.length>0){let[t,e]=Vv(o),n=this._node_at_path(e);delete n.children[t]}};this._node_at_path=o=>{let t=this._node;for(let e of o)if(t=t.children[e],!t)return null;return t};this._set_path=(o,t,e)=>{let n=this._obj_at_path(o);n[t]=e,this._dispatch("set",o,t,e)};this._delete=o=>G(this,null,function*(){this._delete_path([],o)});this._delete_path=(o,t)=>{let e=this._obj_at_path(o),n=e[t];delete e[t],this._dispatch("delete",o,t,n)};this._obj=o}_obj_at_path(o){let t=this._obj;for(let e of o)t=t[e];return t}read(){return G(this,null,function*(){return this._obj})}write(o){this._obj=o}get(o){return G(this,null,function*(){if(this._obj[o]===void 0)throw new Error("key value not found");return this._obj[o]})}set(o,t){return G(this,null,function*(){this._set_path([],o,t)})}hasKey(o){return G(this,null,function*(){return this._obj[o]!==void 0})}delete(o){return G(this,null,function*(){return this._delete(o)})}pathGet(o,t){return G(this,null,function*(){return this._obj_at_path(o)[t]})}pathSet(o,t,e){return G(this,null,function*(){this._set_path(o,t,e)})}pathDelete(o,t){return G(this,null,function*(){this._delete_path(o,t)})}keys(){return G(this,null,function*(){return J(this._obj)})}subscribe(o,t,e){let n=this._ensure_emitter(o);return n.addListener(t,e),()=>{n.removeListener(t,e),n.eventNames().length===0&&this._remove_node(o)}}};l();l();l();l();l();l();l();l();function xf(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,9)}function Ti(r){let o;do o=xf();while(r[o]);return o}function If(r){let o;do o=xf();while(r.has(o));return o}function eo(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){let o=Math.random()*16|0;return(r=="x"?o:o&3|8).toString(16)})}function gr(r){let o;do o=eo();while(r[o]);return o}function Xv(r,o){let{global:{ref:t}}=r;return t[o]||null}function Jv(r,o){let{global:{ref:t}}=r,e=Ti(t);return t[e]=o,e}function Zv(r,o){let{global:{ref:t}}=r;delete t[o]}var ht=class extends Re{constructor(t){super();this.__=[];this.__async=!1;this.__system=t,this.__global_id=Jv(this.__system,this)}getGlobalId(){return this.__global_id}getInterface(){return this.__}refSystem(){return this.__system}destroy(){Zv(this.__system,this.__global_id),this.emit("destroy")}raw(){throw new Error("object doens't have raw form")}};l();var $t="_self";l();var Sf=class extends Error{constructor(o){super(`input with name "${o}" already exists`)}};l();var Df=class extends Error{constructor(o){super(`output with name "${o}" already exists`)}};l();var us=class extends Error{constructor(o){super(`input named "${o}" not found`)}};l();var Ta=class extends Error{};l();var Aa=class extends Error{constructor(o){super(`output named "${o}" not found`)}};l();l();var Ww=new Set(["null","string","number","boolean"]);function ko(r){let o=typeof r;if(Ww.has(o))return!0;if(o==="object"){if(Array.isArray(r)){for(let t of r)if(!ko(t))return!1}for(let t in r){let e=r[t];if(!ko(e))return!1}return!0}return!!(o==="function"&&r.__bundle)}var $n=class extends Re{constructor({data:t,constant:e,ignored:n,ref:i}={}){super();this._constant=!1;this._ignored=!1;this._ref=!1;this._invalid=!1;this._idle=!0;this._register=void 0;t!==void 0&&(this._idle=!1),this._register=t,this._constant=e||!1,this._ignored=n||!1,this._ref=i||!1}take(){let t=this._register;return this._register!==void 0&&(this._register=void 0,this.emit("drop",t)),this.end(),t}invalidate(){this._register!==void 0&&!this._invalid&&(this._invalid=!0,this._idle=!0,this.emit("invalid"))}start(){this._idle&&(this._idle=!1,this.emit("start"))}end(){this._register===void 0&&!this._idle&&(this._idle=!0,this.emit("end"))}pull(){let t=this._register;return t!==void 0&&(this._constant||this.take()),t}push(t){this.invalidate(),this._invalid=!1,this.start(),this._register=t,this.emit("data",t),this._ref||this._ignored&&!this._constant&&this.take()}peak(){return this._register}empty(){return this._register===void 0}active(){return!this.empty()}ignored(t){return t!==void 0&&(this._ignored=t,this._ignored&&!this._constant&&!this._ref&&this.take(),this.emit("ignored",this._ignored)),this._ignored}ref(t){return t!==void 0&&(this._ref=t,this.emit("ref",this._ref)),this._ref}constant(t){return t!==void 0&&(this._constant=t),this._constant}invalid(){return this._invalid}snapshot(){return{_register:ko(this._register)?this._register:void 0,_invalid:this._invalid,_constant:this._constant,_ignored:this._ignored,_idle:this._idle}}restore(t){let{_register:e,_invalid:n,_constant:i,_ignored:s,_idle:a}=t;this._register=e,this._invalid=n,this._constant=i,this._ignored=s,this._idle=a}read(){return G(this,null,function*(){if(this._register===void 0)throw new Error("empty");return this._register})}write(t){return G(this,null,function*(){this.push(t)})}};l();l();function ds(r){let o="";for(let t=0;t<r.length;t++){let e=r[t];e==='"'?o+='\\"':o+=e}return o}l();function Ef(r){return`unit://${r}`}l();l();l();l();l();l();l();function li(r,o){let t=typeof r;if(t!==typeof o)return!1;if(t==="string"||t==="number"||t==="boolean"||t==="symbol"||t==="undefined"||t==="function")return r===o;if(t==="object"){if(r===o)return!0;let n=J(r).length,i=J(o).length;if(n!==i)return!1;for(let s in r){let a=r[s],_=o[s];if(!li(a,_))return!1}}return!0}function Ma(r,o=""){if(!r)throw new Error(o)}function qw(r,o){return Ma(r===o)}function wf(r,o){return Ma(li(r,o),`${JSON.stringify(r,null,2)} is not deep equal to ${JSON.stringify(o,null,2)}`)}Ma.equal=qw;Ma.deepEqual=wf;var Qv=Ma;function Wt(r,o){let t={};return new Proxy(t,{get(e,n){var i,s;return(s=(i=t[n])!=null?i:o[n])!=null?s:r[n]},set(e,n,i){return t[n]=i,!0},has(e,n){return n in t||n in o||n in r},deleteProperty(e,n){return t[n]!==void 0?(delete t[n],!0):o[n]!==void 0?(delete o[n],!0):r[n]!==void 0?(delete r[n],!0):!1},ownKeys(){return[...new Set([...Object.getOwnPropertyNames(r),...Object.getOwnPropertyNames(o),...Object.getOwnPropertyNames(t)])]},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0,writable:!0}}})}Qv.deepEqual(Wt({a:1,b:2},{b:3,c:4}),{a:1,b:3,c:4});l();l();l();l();l();var br=r=>typeof r=="object"&&r!==null;function pn(r,o){let t=Array.isArray(r)?[...r]:S({},r);return Xw(t,o),t}function Xw(r,o){for(let t in o)if(r[t]!==void 0&&o[t]!==void 0){let e=br(r[t]),n=br(o[t]);e&&n?r[t]=pn(r[t],o[t]):r[t]=o[t]}else r[t]=o[t]}function a1(r,o){for(let t in r)o(r[t],t)}function Ke(r,o){for(let t in r)o(t,r[t])}function Ne(r,o){let t={};for(let e in r)t[e]=o(r[e],e);return t}function mi(r,o){let t={};for(let e in r)t[e]=o(e,r[e]);return t}function ls(r,o){return Jw(r,o)}function Jw(r,o){let t={};for(let e in r){let n=r[e];t[o(n,e)]=n}return t}function t4(r,o){let t={};for(let e in r){let n=r[e];t[o(e,n)]=n}return t}function Oa(r,o){for(let t in r)if(o(r[t],t))return!0;return!1}function $a(r,o,t){let e=t;for(let n in r)e=o(e,r[n],n);return e}function jn(r,o){let t={};for(let e in r)o(r[e],e)&&(t[e]=r[e]);return t}function ie(r){return J(r).length===0}var jt=r=>J(r)[0];function B(r){if(typeof r!="object"||r===null)return r;if(r instanceof Set)return new Set(B([...r]));let o=Array.isArray(r)?[]:{};for(let t in r)o[t]=B(r[t]);return o}function _1(r){let o={};for(let t in r){let e=r[t];o[e]=t}return o}function Pf(r){return J(r).length}function no(r,o,t){r[o]=t}function io(r,o){return r[o]}function tt(r,o,t){let e=r,n=o.length-1;if(n>=0){let i=o[n];for(let s=0;s<n;s++){let a=o[s];e[a]===void 0&&(e[a]={}),e=e[a]}e[i]=t}}function oe(r,o){let t=r,e=o.length-1;if(e>=0){let n=o[e];for(let i=0;i<e;i++){let s=o[i];if(t[s]===void 0)return;t=t[s]}delete t[n]}}function p1(r,o){if(o.length===1){delete r[o[0]];return}let[t,...e]=o,n=r[t];p1(n,e),ie(n)&&delete r[t]}function kf(r,o,t){tt(r,o,pn(nt(r,o,{}),t))}function nt(r,o,t){let e=r;for(let n=0;n<o.length;n++){let i=o[n];if(e[i]===void 0)return t;e=e[i]}return e}function e4(r,o){let n=r,{[o]:t}=n;return _n(n,[Hv(o)])}function n4(r,o){let t={};for(let e of r)t[e]=o;return t}function c1(r,o,t){let e={};for(let n in r){let i=r[n];i!==void 0&&(e[n]=Zt(i,o,t))}return e}function u1(r,o,t){for(let e in r.input){let n=r.input[e];r.input[e]=c1(n,o,t)}for(let e in r.output){let n=r.output[e];r.output[e]=c1(n,o,t)}r.memory=c1(r.memory,o,t)}function i4(r,o,t){let e=B(r);return u1(e,o,t),e}function ti(r,o){var n;let{unit:{id:t,memory:e}}=o;return n=class extends r{constructor(s){if(o.specs&&s.injectSpecs(o.specs),super(s,t),e){let a=i4(e,s.specs,s.classes);this.restore(a)}}},n.__bundle=o,n}l();l();l();var $=class extends Error{constructor(){super("method not implemented")}};l();function Y(r,o){for(let t in r){let e=r[t];o(e,t)}}function o4(r,o,t={},e){let{inputs:n,outputs:i,id:s}=r;class a extends cn{constructor(p){super({i:J(n),o:J(i)},t,p,r.id);this.__=["U","G"];this.__element=!1;this._merge={input:{},output:{}};this.getSpec=()=>(this._ensure(),this.__graph.getSpec());this.getUnits=()=>(this._ensure(),this.__graph.getUnits());this.exposeOutputSets=p=>(this._ensure(),this.__graph.exposeOutputSets(p));this.exposeOutputSet=(p,u)=>(this._ensure(),this.__graph.exposePinSet("output",u,p));this.exposeOutput=(p,u,d)=>(this._ensure(),this.__graph.exposeOutput(p,u,d));this.coverOutputSet=p=>{this._ensure(),this.__graph.coverOutputSet(p)};this.coverOutput=(p,u)=>(this._ensure(),this.__graph.coverOutput(p,u));this.plugOutput=(p,u,d)=>(this._ensure(),this.__graph.plugOutput(p,u,d));this.unplugOutput=(p,u)=>(this._ensure(),this.__graph.unplugOutput(p,u));this.exposeInputSets=p=>(this._ensure(),this.__graph.exposeInputSets(p));this.exposeInputSet=(p,u)=>(this._ensure(),this.__graph.exposeInputSet(p,u));this.exposePinSet=(p,u,d)=>(this._ensure(),this.__graph.exposePinSet(p,u,d));this.exposePin=(p,u,d,m)=>(this._ensure(),this.__graph.exposePin(p,u,d,m));this.exposeInput=(p,u,d)=>(this._ensure(),this.__graph.exposeInput(p,u,d));this.coverInputSet=p=>(this._ensure(),this.__graph.coverInputSet(p));this.coverInput=(p,u)=>(this._ensure(),this.__graph.coverInput(p,u));this.coverPinSet=(p,u,d=!0)=>(this._ensure(),this.__graph.coverPinSet(p,u,d));this.plugPin=(p,u,d,m)=>(this._ensure(),this.plugPin(p,u,d,m));this.plugInput=(p,u,d)=>(this._ensure(),this.plugInput(p,u,d));this.unplugInput=(p,u)=>(this._ensure(),this.unplugInput(p,u));this.coverPin=(p,u,d)=>(this._ensure(),this.__graph.coverPin(p,u,d));this.getSubPinSpec=(p,u,d)=>(this._ensure(),this.__graph.getSubPinSpec(p,u,d));this.unplugPin=(p,u,d)=>(this._ensure(),this.__graph.unplugPin(p,u,d));this.getExposedInputPin=p=>(this._ensure(),this.__graph.getExposedInputPin(p));this.getExposedOutputPin=p=>(this._ensure(),this.__graph.getExposedOutputPin(p));this.getGraphPinData=()=>(this._ensure(),this.__graph.getGraphPinData());this.getGraphErr=()=>(this._ensure(),this.__graph.getGraphErr());this.getUnitInputData=p=>(this._ensure(),this.__graph.getUnitInputData(p));this.addUnits=p=>(this._ensure(),this.__graph.addUnitSpecs(p));this.addUnit=(p,u)=>(this._ensure(),this.__graph.addUnit(p,u));this.addMerges=p=>(this._ensure(),this.__graph.addMerges(p));this.addMerge=(p,u)=>(this._ensure(),this.__graph.addMerge(p,u));this.addPinToMerge=(p,u,d,m)=>(this._ensure(),this.__graph.addPinToMerge(p,u,d,m));for(let u in this._input)this._input[u].addListener("data",m=>{this._ensure()});this.addListener("play",()=>{this.__graph&&this.__graph.play()}),this.addListener("pause",()=>{this.__graph&&this.__graph.pause()}),this.addListener("take_err",()=>{this.__graph.takeErr()}),this.addListener("reset",()=>{this.__graph&&this.__graph.reset()})}setUnitPinSetId(p,u,d,m,...h){throw new Error("Method not implemented.")}fork(){return this._ensure(),this.__graph.fork()}startTransaction(){return this._ensure(),this.__graph.startTransaction()}endTransaction(){return this._ensure(),this.__graph.endTransaction()}getMergeData(p){return this._ensure(),this.__graph.getPlugSpecs()}getPlugSpecs(){return this._ensure(),this.__graph.getPlugSpecs()}hasMergePin(p,u,d,m){return this._ensure(),this.__graph.hasMergePin(p,u,d,m)}getMergesSpec(){return this._ensure(),this.__graph.getMergesSpec()}getUnitPinData(p,u,d){return this._ensure(),this.__graph.getUnitPinData(p,u,d)}isUnitPinRef(p,u,d){return this._ensure(),this.__graph.isUnitPinRef(p,u,d)}getExposedPinSpecs(){return this._ensure(),this.__graph.getExposedPinSpecs()}getPinPlugCount(p,u){return this._ensure(),this.__graph.getPinPlugCount(p,u)}moveRoot(p,u,d){return this._ensure(),this.__graph.moveRoot(p,u,d)}hasPlug(p,u,d){return this._ensure(),this.__graph.hasPlug(p,u,d)}removePinOrMerge(p,u,d,m,...h){return this._ensure(),this.__graph.removePinOrMerge(p,u,d,m,...h)}removeMergeData(p){return this._ensure(),this.__graph.removeMergeData(p)}setUnitSize(p,u,d){return this._ensure(),this.__graph.setUnitSize(p,u,d)}setSubComponentSize(p,u,d){return this._ensure(),this.__graph.setSubComponentSize(p,u,d)}setComponentSize(p,u,d){return this._ensure(),this.__graph.setComponentSize(p,u,d)}moveSubgraphOutOf(...[p,u,d,m,h,f,b,g,v,x]){return this._ensure(),this.__graph.moveSubgraphOutOf(p,u,d,m,h,f,b,g,v,x)}removeUnitPinData(p,u,d){return this._ensure(),this.__graph.removeUnitPinData(p,u,d)}addUnitSpecs(p){return this._ensure(),this.__graph.addUnitSpecs(p)}addUnitSpec(p,u,d){return this._ensure(),this.__graph.addUnitSpec(p,u)}bulkEdit(p){return this._ensure(),this.__graph.bulkEdit(p)}setUnitId(p,u,d,m){return this._ensure(),this.__graph.setUnitId(p,u,d,m)}isElement(){return this._ensure(),this.__graph.isElement()}getMergeSpec(p){return this._ensure(),this.__graph.getMergeSpec(p)}reorderRoot(p,u){return this._ensure(),this.__graph.reorderRoot(p,u)}reorderParentRoot(p,u){return this._ensure(),this.__graph.reorderParentRoot(p,u)}reorderSubComponent(p,u,d){return this._ensure(),this.__graph.reorderSubComponent(p,u,d)}moveSubComponentRoot(p,u,d){return this._ensure(),this.__graph.moveSubComponentRoot(p,u,d)}appendParentChild(p,u){return this._ensure(),this.__graph.appendParentChild(p,u)}removeParentChild(p){return this._ensure(),this.__graph.removeParentChild(p)}removeRoot(p){return this._ensure(),this.__graph.removeRoot(p)}detach(){throw new $}moveSubgraphInto(...[p,u,d,m,h,f,b,g,v,x]){return this._ensure(),this.__graph.moveSubgraphInto(p,u,d,m,h,f,b,g,v,x)}registerRoot(p){return this._ensure(),this.__graph.registerRoot(p)}unregisterRoot(p){return this._ensure(),this.__graph.unregisterRoot(p)}registerParentRoot(p,u){return this._ensure(),this.__graph.registerParentRoot(p,u)}unregisterParentRoot(p){return this._ensure(),this.__graph.unregisterParentRoot(p)}_load(){let p=e(r,o,t);this.__graph=new p(this.__system),this.__graph.addListener("err",u=>{this.err(u)}),this.__graph.addListener("take_err",()=>{this.takeErr()}),Y(this.__graph.getOutputs(),(u,d)=>{let m=new Ai(this.__system);m.play(),this._merge.output[d]=m,m.setInput(d,u),m.setOutput(d,this._output[d])}),Y(this.__graph.getInputs(),(u,d)=>{let m=new Ai(this.__system);m.play(),this._merge.input[d]=m,m.setInput(d,this._input[d]),m.setOutput(d,u)}),this.__graph.play()}_ensure(){this.__graph||this._load()}getBundleSpec(){return this._ensure(),this.__graph.getUnitBundleSpec()}getUnitState(p){return this._ensure(),this.__graph.getUnitState(p)}getGraphState(){return this._ensure(),this.__graph.getGraphState()}getGraphChildren(){return this._ensure(),this.__graph.getGraphChildren()}pushChild(p){return this._ensure(),this.__graph.pushChild(p)}appendChild(p){return this._ensure(),this.__graph.appendChild(p)}insertChild(p,u){return this._ensure(),this.__graph.insertChild(p,u)}pullChild(p){return this._ensure(),this.__graph.pullChild(p)}removeChild(p){return this._ensure(),this.__graph.removeChild(p)}hasChild(p){return this._ensure(),this.__graph.hasChild(p)}refChild(p){return this._ensure(),this.__graph.refChild(p)}refChildren(){return this._ensure(),this.__graph.refChildren()}refSlot(p){return this._ensure(),this.__graph.refSlot(p)}isExposedOutput(p){return this._ensure(),this.__graph.isExposedOutput(p)}setPinSetId(p,u,d){return this._ensure(),this.__graph.setPinSetId(p,u,d)}setPinSetFunctional(p,u,d){return this._ensure(),this.__graph.setPinSetFunctional(p,u,d)}isExposedInput(p){return this._ensure(),this.__graph.isExposedInput(p)}getExposedPinSpec(p,u){return this._ensure(),this.__graph.getExposedPinSpec(u,p)}isExposedInputPinId(p){return this._ensure(),this.__graph.isExposedInputPinId(p)}isExposedOutputPinId(p){return this._ensure(),this.__graph.isExposedOutputPinId(p)}getExposedInputSpec(p){return this._ensure(),this.__graph.getExposedInputSpec(p)}getExposedOutputSpec(p){return this._ensure(),this.__graph.getExposedOutputSpec(p)}hasUnit(p){return this._ensure(),this.__graph.hasUnit(p)}hasMerge(p){return this._ensure(),this.__graph.hasMerge(p)}getGraphUnitSpec(p){return this._ensure(),this.__graph.getGraphUnitSpec(p)}getUnit(p){return this._ensure(),this.__graph.getUnit(p)}getUnitByPath(p){return this._ensure(),this.__graph.getUnitByPath(p)}getUnitPin(p,u,d){return this._ensure(),this.__graph.getUnitPin(p,u,d)}getUnitData(p,u,d){return this._ensure(),this.__graph.getUnitData(p,u,d)}getUnitInput(p,u){return this._ensure(),this.__graph.getUnitInput(p,u)}getUnitOutput(p,u){return this._ensure(),this.__graph.getUnitOutput(p,u)}setUnitErr(p,u){return this._ensure(),this.__graph.setUnitErr(p,u)}takeUnitErr(p){return this._ensure(),this.__graph.takeUnitErr(p)}getMerges(){return this._ensure(),this.__graph.getMerges()}getMerge(p){return this._ensure(),this.__graph.getMerge(p)}getMergeCount(){return this._ensure(),this.__graph.getMergeCount()}getMergeUnitCount(p){return this._ensure(),this.__graph.getMergeUnitCount(p)}getMergePinCount(p){return this._ensure(),this.__graph.getMergePinCount(p)}moveUnit(p,u,d){return this._ensure(),this.__graph.moveUnit(p,u,d)}removeUnit(p,...u){return this._ensure(),this.__graph.removeUnit(p,...u)}addUnitGhost(p,u,d,m){return this._ensure(),this.__graph.addUnitGhost(p,u,d,m)}removeUnitGhost(p,u,d){return this._ensure(),this.__graph.removeUnitGhost(p,u,d)}swapUnitGhost(p,u,d){this._ensure(),this.__graph.swapUnitGhost(p,u,d)}explodeUnit(p,u,d,m){return this._ensure(),this.__graph.explodeUnit(p,u,d,m)}removeMerge(p){return this._ensure(),this.__graph.removeMerge(p)}removePinFromMerge(p,u,d,m){return this._ensure(),this.__graph.removePinFromMerge(p,u,d,m)}isPinMergedTo(p,u,d,m){return this._ensure(),this.__graph.isPinMergedTo(p,u,d,m)}setUnitPinConstant(p,u,d,m){return this._ensure(),this.__graph.setUnitPinConstant(p,u,d,m)}setUnitInputConstant(p,u,d){return this._ensure(),this.__graph.setUnitInputConstant(p,u,d)}setUnitOutputConstant(p,u,d){return this._ensure(),this.__graph.setUnitOutputConstant(p,u,d)}setUnitInputIgnored(p,u,d){return this._ensure(),this.__graph.setUnitPinIgnored(p,"input",u,d)}setUnitOutputIgnored(p,u,d){return this._ensure(),this.__graph.setUnitPinIgnored(p,"output",u,d)}setUnitPinIgnored(p,u,d,m){return this._ensure(),this.__graph.setUnitPinIgnored(p,u,d,m)}setUnitPinData(p,u,d,m){return this._ensure(),this.__graph.setUnitPinData(p,u,d,m)}setUnitInputData(p,u,d){return this._ensure(),this.__graph.setUnitInputData(p,u,d)}setUnitOutputData(p,u,d){return this._ensure(),this.__graph.setUnitOutputData(p,u,d)}getGraphMergeInputData(){return this._ensure(),this.__graph.getGraphMergeInputData()}setMetadata(p,u){this._ensure(),this.__graph.setMetadata(p,u)}setGraphState(p){this._ensure(),this.__graph.setGraphState(p)}}return a.__bundle={unit:{id:s},specs:{}},a}l();var Cf=class extends Error{constructor(){super("Could not find spec")}};l();l();l();function un(r,o){let{id:t}=r,e=Bt(o,t),{system:n}=e;if(n)return{unit:S({id:t},r)};{let i={[t]:e};return Tf(e,o,i,new Set),{unit:S({id:t},r),specs:i}}}function s4(r,o){let t=Bt(o,r),{base:e}=t;if(e)return{unit:{id:r}};{let n={[r]:t};return Tf(t,o,n,new Set),{unit:{id:r},specs:n}}}function hi(r,o){let t={};return Tf(r,o,t,new Set([])),{spec:r,specs:t}}function Tf(r,o,t,e){if(!r.id)throw new Error("spec id is required");r.system||e.has(r.id)||(e.add(r.id),Zw(r,o,t,e))}function Zw(r,o,t,e){let{units:n={}}=r;for(let i in n){let s=n[i],{id:a}=s,_=Bt(o,a);(!o[a]||!La(o,a))&&(t[a]=_),Tf(_,o,t,new Set(e))}}l();l();var Af=class extends Error{constructor(){super("no child at this position")}};function Mf(r,o,t){let e=Ua(r,o,t),{__bundle:n}=t;return r.emit("append_child",n,[]),e}function r4(r,o){let t=r.refSystem(),e=new o(t),{input:n={},output:i={},memory:s={input:{},output:{},memory:{}}}=o.__bundle.unit;for(let a in n){let{data:_}=n[a];if(_!==void 0){let c=Zt(_,t.specs,t.classes);e.pushInput(a,c)}}return r.paused()&&!e.paused()?e.pause():!r.paused()&&e.paused()&&e.play(),e}function Ua(r,o,t){let e=r4(r,t);return o.push(e),o.length-1}function a4(r,o,t,e){let n=r4(r,t);Ue(o,n,e);let{__bundle:i}=t;r.emit("insert_child",i,e,[])}function Ga(r,o,t){return t>=0&&t<o.length}function Ra(r,o,t){if(!Ga(r,o,t))throw new Af;let[n]=o.splice(t,1);return n}function Of(r,o,t){let e=Ra(r,o,t);return r.emit("remove_child",t,[]),r.emit(`remove_child_at_${t}`,t),e}function $f(r,o,t){return o[t]}function Lf(r,o){return o}function _4(r,o,t){return t[o]||r}function Uf(r,o,t,e){o.push(t),r.emit("register_parent_root",t,e),r.refSlot(e).appendParentChild(r,"default")}function Gf(r,o,t){let e=o.indexOf(t);o.splice(e,1),r.emit("unregister_parent_root",r)}function Rf(r,o,t,e){let n=o.indexOf(t);if(n===-1)throw new Error("root not found");o.splice(n,1),Ue(o,t,e),r.emit("reorder_root",r,e)}function Nf(r,o,t,e){let n=o.indexOf(t);if(n===-1)throw new Error("root not found");o.splice(n,1),Ue(o,t,e),r.emit("reorder_parent_root",r,e)}function zf(r,o,t){let e=o.indexOf(t);o.splice(e,1),r.emit("unregister_root",r)}function Ff(r,o,t){o.push(t),r.emit("register_root",r)}function Bf(r,o,t,e){let n=r.refSlot(e);r===n?(o.push(t),r.emit("append_parent_child",r,e)):n.appendParentChild(t,"default")}function Hf(r,o,t){let e=o.indexOf(t);o.splice(e,1),r.emit("remove_parent_child",r)}l();var Ln=["fork","append_child","remove_child","insert_child","add_unit","clone_unit","remove_unit","move_unit","add_merge","remove_merge","expose_pin","cover_pin","plug_pin","unplug_pin","remove_pin_from_merge","add_pin_to_merge","move_subgraph_into","move_subgraph_into","move_sub_component_root","reorder_sub_component","expose_pin_set","cover_pin_set","set_pin_set_id","set_pin_set_functional","set_unit_pin_constant","set_unit_pin_ignored","set_unit_pin_data","remove_unit_pin_data","set_unit_id","bulk_edit"];l();var ei=class extends Error{constructor(){super("code path not implemented")}};l();var Co=class extends Error{constructor(o){super(o!=null?o:"invalid state")}};l();var jf=class extends Error{constructor(){super("merge not found")}};l();var Vf=class extends Error{constructor(){super("unit not found")}};l();l();var Na="moveSubComponentRoot",za="reorderSubComponent",Qw=r=>({type:Na,data:r}),ms=(r,o,t,e,n)=>Qw({parentId:r,prevParentIdMap:o,children:t,slotMap:e,prevSlotMap:n}),Kf=(r,o,t,e)=>({type:za,data:{parentId:r,childId:o,from:t,to:e}});l();var d1="addDatum",Wf="setDatum",qf="removeDatum",p4=(r,o,t)=>({type:Wf,data:{id:r,value:o,prevValue:t}}),Yf=(r,o)=>({type:d1,data:{id:r,value:o}}),Xf=(r,o)=>({type:qf,data:{id:r,value:o}});var Jf="addUnitSpec",c4="addUnits",Zf="removeUnit",u4="removeUnits",Qf="addMerge",d4="addMerges",tg="addPinToMerge",eg="removePinFromMerge",ng="removeMerge",tP="removeMergeData",eP="removeMerges",nP="exposePin",ig="exposePinSet",og="coverPinSet",iP="coverPin",sg="unplugPin",rg="plugPin",ag="setUnitPinData",oP="removeUnitPinData",_g="setUnitPinConstant",pg="setUnitPinIgnored",cg="exposeUnitPinSet",ug="coverUnitPinSet";var l1="setPinSetFunctional";var dg="bulkEdit",sP="removeUnitMerges";var lg="moveSubgraphInto",mg="moveSubgraphOutOf",hg="setUnitSize",fg="setComponentSize",m1="setSubComponentSize",rP=r=>({type:Jf,data:r}),fi=(r,o,t,e,n,i,s,a)=>rP({unitId:r,bundle:o,position:t,pinPosition:e,layoutPositon:n,parentId:i,merges:s,plugs:a}),gg=r=>({type:lg,data:r}),h1=r=>({type:mg,data:r}),aP=(r,o,t,e,n,i,s,a,_,c,p,u)=>gg({graphId:r,graphBundle:o,nextSpecId:t,nodeIds:e,nextIdMap:n,nextPinIdMap:i,nextMergePinId:a,nextPlugSpec:_,nextUnitPinMergeMap:s,nextSubComponentParentMap:c,nextSubComponentChildrenMap:p,nextSubComponentIndexMap:u}),_P=(r,o,t,e,n,i,s,a,_,c,p,u)=>h1({graphId:r,graphBundle:o,nextSpecId:t,nodeIds:e,nextIdMap:n,nextPinIdMap:s,nextMergePinId:a,nextPlugSpec:_,nextSubComponentParentMap:c,nextSubComponentChildrenMap:p,nextSubComponentIndexMap:u,nextUnitPinMergeMap:i}),pP=r=>({type:c4,data:{units:r}}),cP=r=>({type:Zf,data:r}),yr=(r,o,t,e,n,i,s,a)=>cP({unitId:r,bundle:o,position:t,pinPosition:e,layoutPositon:n,parentId:i,merges:s,plugs:a}),uP=r=>({type:u4,data:{ids:r}}),l4=(r,o,t,e)=>({type:nP,data:{type:r,id:o,subPinId:t,subPin:e}});var m4=(r,o,t)=>({type:l1,data:{type:r,id:o,functional:t}}),dP=r=>({type:cg,data:r}),f1=(r,o,t,e,n)=>dP({type:o,unitId:r,pinId:t,pinSpec:e,position:n}),lP=r=>({type:ig,data:r}),mP=r=>({type:ug,data:r}),g1=(r,o,t,e,n)=>mP({type:o,unitId:r,pinId:t,pinSpec:e,position:n}),vr=(r,o,t,e)=>lP({type:r,pinId:o,pinSpec:t,data:e}),hP=r=>({type:og,data:r}),xr=(r,o,t)=>hP({type:r,pinId:o,pinSpec:t}),fP=r=>({type:rg,data:r}),Fa=(r,o,t,e)=>fP({type:r,pinId:o,subPinId:t,subPinSpec:e}),gP=r=>({type:sg,data:r}),Ba=(r,o,t,e)=>gP({type:r,pinId:o,subPinId:t,subPinSpec:e}),bP=r=>({type:iP,data:r}),b1=(r,o,t,e)=>bP({type:r,pinId:o,subPinId:t,subPinSpec:e}),yP=r=>({type:ag,data:r}),y1=(r,o,t,e)=>yP({unitId:r,type:o,pinId:t,data:e,lastData:void 0}),v1=(r,o,t,e)=>({type:_g,data:{unitId:r,type:o,pinId:t,constant:e}}),x1=(r,o,t,e)=>({type:pg,data:{unitId:r,type:o,pinId:t,ignored:e}}),h4=r=>({type:oP,data:r});var f4=r=>({type:hg,data:r}),I1=(r,o,t,e,n)=>f4({unitId:r,width:o,height:t,prevWidth:e,prevHeight:n}),S1=(r,o,t,e,n)=>f4({unitId:r,width:o,height:t,prevWidth:e,prevHeight:n});var vP=r=>({type:fg,data:r}),D1=(r,o,t,e)=>vP({width:r,height:o,prevWidth:t,prevHeight:e});var xP=r=>({type:Qf,data:r}),hs=(r,o,t)=>xP({mergeId:r,mergeSpec:o,position:t}),IP=r=>({type:ng,data:r}),Ir=(r,o,t)=>IP({mergeId:r,mergeSpec:o,position:t}),g4=r=>({type:tP,data:r}),SP=r=>({type:d4,data:{merges:r}}),DP=r=>({type:eP,data:{ids:r}}),EP=r=>({type:tg,data:r}),bg=(r,o,t,e)=>EP({mergeId:r,unitId:t,type:o,pinId:e}),wP=r=>({type:eg,data:r}),E1=(r,o,t,e)=>wP({mergeId:r,unitId:t,type:o,pinId:e});var PP=r=>({type:dg,data:r}),Mi=r=>PP({actions:r}),w1=({type:r,data:o})=>{switch(r){case Jf:return yr(o.unitId,o.bundle,o.position,o.pinPosition,o.layoutPosition,o.parentId,o.merges,o.plugs);case c4:return uP(J(o.units));case Zf:return fi(o.unitId,o.bundle,o.position,o.pinPosition,o.layoutPosition,o.parentId,o.merges,o.plugs);case u4:return pP(o.ids.reduce((t,e)=>(t[e]=o.units[e],t),{}));case sP:return SP(o.merges);case Qf:return Ir(o.mergeId,o.mergeSpec,o.position);case d4:return DP(J(o.merges));case tg:return E1(o.mergeId,o.type,o.unitId,o.pinId);case ng:return hs(o.mergeId,o.mergeSpec,o.position);case eg:return bg(o.mergeId,o.type,o.unitId,o.pinId);case ig:return xr(o.type,o.pinId,o.pin);case og:return vr(o.type,o.pinId,o.plug,o.data);case rg:return Ba(o.type,o.pinId,o.subPinId,o.subPinSpec);case sg:return Fa(o.type,o.pinId,o.subPinId,o.subPinSpec);case _g:return v1(o.unitId,o.type,o.pinId,!o.constant);case ag:return y1(o.unitId,o.type,o.pinId,void 0);case pg:return x1(o.unitId,o.type,o.pinId,!o.ignored);case cg:return g1(o.unitId,o.type,o.pinId,o.pinSpec);case ug:return f1(o.unitId,o.type,o.pinId,o.pinSpec);case Na:return ms(o.nextParentId,o.parentId,o.children,o.nextSlotMap,o.slotMap);case za:return Kf(o.parentId,o.childId,o.to,o.from);case lg:return _P(o.graphId,o.graphBundle,o.nextSpecId,_t(S({},o.nodeIds),{unit:o.nodeIds.unit.map(t=>{var e;return(e=o.nextIdMap.unit[t])!=null?e:t}),link:o.nodeIds.link.filter(({unitId:t,type:e,pinId:n})=>!!o.nodeIds.unit.includes(t)),plug:o.nodeIds.plug.concat(o.nodeIds.link.filter(({unitId:t,type:e,pinId:n})=>!o.nodeIds.unit.includes(t)).map(({unitId:t,type:e,pinId:n})=>({type:e,pinId:n,subPinId:"0"})))}),o.nextIdMap,o.nextUnitPinMergeMap,o.nextPinIdMap,o.nextMergePinId,o.nextPlugSpec,o.nextSubComponentParentMap,o.nextSubComponentChildrenMap,o.nextSubComponentIndexMap);case mg:return aP(o.graphId,o.graphBundle,o.nextSpecId,_t(S({},o.nodeIds),{unit:o.nodeIds.unit.map(t=>{var e;return(e=o.nextIdMap.unit[t])!=null?e:t})}),o.nextIdMap,o.nextUnitPinMergeMap,o.nextPinIdMap,o.nextMergePinId,o.nextPlugSpec,o.nextSubComponentParentMap,o.nextSubComponentChildrenMap,o.nextSubComponentIndexMap);case dg:return Mi([...o.actions].reverse().map(w1));case fg:return D1(o.prevWidth,o.prevHeight,o.width,o.height);case m1:return S1(o.unitId,o.prevWidth,o.prevHeight,o.width,o.height);case hg:return I1(o.unitId,o.prevWidth,o.prevHeight,o.width,o.height);case d1:return Xf(o.id,o.value);case Wf:return p4(o.id,o.value,o.prevValue);case qf:return Yf(o.id,o.value);default:throw new Error("irreversible")}},P1=(r,o,t)=>{var i;let{type:e,data:n}=r;if(!o[e]&&t)throw new Error(`no method for ${e}`);((i=o[e])!=null?i:t)(n)},b4=(r,o,t)=>{r.forEach(e=>P1(e,o,t))};l();function y4(r,o=!1){let{__system:t}=r,[e,n]=kP(r,o);return[new e(t),n]}function kP(r,o=!1){let{__system:t}=r,e=t.specs,n=B(r.getUnitBundleSpec(o));return[yg(n,e,t.classes),n]}l();l();function nn(r,o){let t=r;for(let e of o)t=r[e],r=t;return t}l();function oo(r,o){return S(S({},r),o)}l();function ni(r,o,t){return _t(S({},r),{[o]:t})}l();function fs(r){r("input"),r("output")}function gs(r,o){r.input!==void 0&&o("input",r.input),r.output!==void 0&&o("output",r.output)}function xe(r,o){gs(r,(t,e)=>{Ke(e,(n,i)=>{o(t,n,i)})})}l();l();l();function k1({a:r}){return{length:C1(r)}}function C1(r){return r.length}function pe(r){let o=J(r);return C1(o)}l();function vg(r){return Te(r)===0}function ii(r,o,t){return`${r}/${o}/${t}`}function Dr(r,o,t,e){return nt(r,[o,t,e,"constant"],!1)}function Er(r,o){return ii(r,"input",o)}function v4(r,o){return ii(r,"output",o)}function oi(r,o){return`${o}/${r}`}function En(r,o){return`${r}/${o}`}function ye(r){return r==="input"?"output":"input"}var x4=(r,o)=>{for(let t in r)if(r[t][o])for(let e in r[t][o])return{unitId:t,pinId:e}},xg=r=>({input:r.inputs,output:r.outputs}),I4=(r,o,t)=>nt(r,[`${o}s`,t],void 0),S4=(r,o)=>{let t={input:{},output:{}};return To(r,(e,n,i)=>{let{plug:s={}}=i;for(let a in s){let _=s[a],{unitId:c,pinId:p,mergeId:u}=_;c===o&&tt(t,[e,p],{type:e,pinId:n,subPinId:a})}}),t},wr=(r,o,t)=>nt(r,[`${o}s`,t],null),Ig=r=>{let o={input:{},output:{}};return D4(r,(t,e,n,i,s)=>{let a=Sg(r,t,e,i);tt(o,[t,e,i],a)}),o},Sg=(r,o,t,e)=>nt(r,[`${o}s`,t,"plug",e],null),A1=(r,o,t,e)=>{var i,s;let{merges:n={}}=r;for(let a in n){let _=n[a];if((s=(i=_==null?void 0:_[o])==null?void 0:i[t])!=null&&s[e])return a}},M1=(r,o,t)=>pe(nt(r,[`${o}s`,t,"plug"],{})),Te=r=>$a(r,(o,t)=>o+ja(t),0);var O1=(r,o)=>$a(r,(t,e)=>t+T1(e,o),0),ja=r=>T1(r,"input")+T1(r,"output"),T1=(r,o)=>{let{[o]:t={}}=r;return Pf(t)},gi=(r,o)=>{Y(r||{},(t,e)=>{Yt(t,(n,i,s,a)=>o(e,n,i,s,a))})},Yt=(r,o)=>{Y(r,({input:t,output:e},n)=>{Y(t||{},(i,s)=>{o(n,"input",s,i)}),Y(e||{},(i,s)=>{o(n,"output",s,i)})})};var To=(r,o)=>{Ha(r,"input",(t,e)=>{o("input",t,e)}),Ha(r,"output",(t,e)=>{o("output",t,e)})},D4=(r,o)=>{To(r,(t,e,n)=>{var i;for(let s in(i=n.plug)!=null?i:{}){let a=n.plug[s];o(t,e,n,s,a)}})};var Ha=(r,o,t)=>{var e;Y((e=r[`${o}s`])!=null?e:{},(n,i)=>{t(i,n)})},$1=(r,o)=>{var t;return!!((t=r.units)!=null&&t[o])},Va=(r,o)=>{var t;return!!((t=r.merges)!=null&&t[o])},Pr=(r,o,t,e,n)=>!!nt(r,["merges",o,t,e,n],!1),L1=(r,o,t)=>!!nt(r,[`${o}s`,t],!1),U1=(r,o,t,e)=>!!nt(r,[`${o}s`,t,"plug",e],!1),G1=(r,o,t)=>{let e=null;return Ha(r,o,(n,i)=>{let{plug:s={}}=i;for(let a in s)s[a].mergeId===t&&(e={pinId:n,type:o,subPinId:a})}),e};function bs(r,o){let t={input:{},output:{}};return D4(r,(e,n,i,s,a)=>{a.unitId===o&&tt(t,[e,a.pinId],{pinId:n,subPinId:s})}),t}var Qt=(r,o,t)=>{if(t.length===0)return o;{let[e,...n]=t,i=o.units[e],s=Bt(r,i.id);return Qt(r,s,n)}};var kr=(r,o,t,e,n,i,s=null)=>{var a;return i||s?!1:pe((a=t.plug)!=null?a:{})>1?!0:n.pinId!==o};function R1(r,o,t,e){let n=!1;if(e.unitId&&e.pinId){let i=o.units[e.unitId],s=Bt(r,i.id);n=Sr({type:t,pinId:e.pinId},s)}else if(e.mergeId){let i=o.merges[e.mergeId];Yt(i,(s,a,_)=>{let c=o.units[s],p=Bt(r,c.id);n!==!0&&(n=Sr({type:a,pinId:e.pinId},p))})}return n}function N1(r,o,t,e){let{plug:n={}}=e;for(let i in n){let s=n[i];if(R1(r,o,t,s))return!0}return!1}function Dg(r,o,t,e,n,{getUnitMerges:i,getUnitPlugs:s,getMerge:a,getPinMergeId:_}){var w,T;let{units:c={},merges:p={},inputs:u={},outputs:d={}}=o,m={unit:J(c),merge:J(p),link:[],plug:[]},h=i(r),f=s(r),b={unit:t,merge:e,plug:Ne(n,C=>Ne(C,P=>Ne(P,k=>({subPinId:k}))))},g={},v={},x={},I=(C,P)=>{for(let k in P){let M=P[k];E(C,k,M)}},E=(C,P,k)=>{var z,F,V,j;let{plug:M,ref:U,defaultIgnored:L}=k,O=_(r,C,P),R=!!O,N=nt(f,[C,P],null);for(let H in M){let K=M[H];if(kr(C,P,k,H,K,R,N)){m.plug.push({type:C,pinId:P,subPinId:H});let q={};K.unitId&&K.pinId?q={unitId:(z=b.unit[K.unitId])!=null?z:K.unitId,pinId:K.pinId}:q={mergeId:(F=b.merge[K.mergeId])!=null?F:K.mergeId},tt(x,[C,P,H],q)}if(K.unitId&&K.pinId)gi(h,(q,Q,at,Dt)=>{var ot;let Et=a(q),Ct=B(Et);delete Ct[r];let Pt=(ot=b.unit[K.unitId])!=null?ot:K.unitId;Ct[Pt]={[at]:{[K.pinId]:!0}},Q===r&&at===C&&Dt===P&&tt(g,[K.unitId,at,K.pinId],{pinId:P,subPinId:H,ref:U,defaultIgnored:L,mergeId:q,merge:Ct})});else if(K.mergeId){let q=p[K.mergeId];if(vg(q)){let Q=_(r,C,P);if(Q){let at=a(Q),Dt=B(at);delete Dt[r],tt(v,[K.mergeId,C],{mergeId:Q,pinId:P,subPinSpec:{mergeId:K.mergeId},oppositeMerge:Dt})}else tt(v,[K.mergeId,C],{mergeId:null,pinId:null,subPinSpec:{},oppositeMerge:{}})}else{let Q=(V=e[K.mergeId])!=null?V:K.mergeId,at=ye(C),Dt=(j=h[O])!=null?j:{};tt(v,[K.mergeId,at],{mergeId:Q,pinId:P,subPinSpec:{},oppositeMerge:Dt})}}}};I("input",u),I("output",d);for(let C in h){let P=a(C),k=B(P),M=k[r];ie((w=M.input)!=null?w:{})&&delete M.input,ie((T=M.output)!=null?T:{})&&delete M.output;let U=jt(M),L=jt(M[U]);if(delete k[r],Te(k)===1){let R=nn(o,[`${U}s`,L]),{plug:N={}}=R,z=!1;for(let F in N){let V=N[F];if(V.mergeId){let j=p[V.mergeId];Te(j)===0&&(z=!0)}}if(!z){let F=jt(k),V=jt(k[F]),j=jt(k[F][V]);m.link.push({unitId:F,type:V,pinId:j}),tt(b,["link",F,V,j],{mergeId:C,oppositePinId:L})}}}return gi(h,(C,P,k,M)=>{let U=a(C)}),{nodeIds:m,nextSpecId:null,nextIdMap:b,nextPinIdMap:g,nextMergePinId:v,nextPlugSpec:x,nextUnitPinMergeMap:{},nextSubComponentParentMap:{},nextSubComponentChildrenMap:{},nextSubComponentIndexMap:{}}}function ys(r,o){let{merges:t}=r,e={};for(let n in t){let i=t[n];i[o]&&(e[n]=i)}return e}function Ao(r,o){return Eg(r.component,o)}function Eg(r,o){let{subComponents:t}=r;for(let e in t){let n=t[e],{children:i=[]}=n;for(let s of i)if(s===o)return e}return null}l();l();function so(r,o,t){let e=S({},r);if(o.length>0){let[n,...i]=o;return e[n]=so(e[n]||{},i,t),e}else return t}var Ka=({childId:r},o)=>{var t;o.children=(t=o.children)!=null?t:[],o.children.push(r)},E4=({childId:r,at:o},t)=>{let e=t.children||[];Ue(e,r,o)},Cr=({childId:r},o)=>{vn(o.children,r)},Wa=({unitId:r,subComponent:o},t)=>{tt(t,["subComponents",r],o)},qa=({unitId:r},o)=>{var s;let t=nt(o,["subComponents",r],{}),e=Eg(o,r),{children:n=[]}=t;oe(o,["subComponents",r]);let i=(s=o==null?void 0:o.slots)==null?void 0:s.findIndex(([a])=>a===r);i>-1&&yn(o.slots,i);for(let a of n)e?wg({parentId:e,childId:a},o):Ka({childId:a},o)};var Tr=({subComponentId:r,childId:o},t)=>{let e=nn(t,["subComponents",r]),{children:n=[],childSlot:i={}}=e;vn(n,o),oe(i,[o])},wg=({parentId:r,childId:o},t)=>{var s;let{subComponents:e}=t;e[r]=(s=e[r])!=null?s:{};let n=e[r];n.children=n.children||[];let{children:i}=n;en(i,o)},w4=({parentId:r,childId:o,at:t},e)=>{var a,_;let{subComponents:n}=e;n[r]=(a=n[r])!=null?a:{};let i=n[r];i.children=(_=i.children)!=null?_:[];let{children:s}=i;Ue(s,o,t)},z1=({parentId:r,childId:o,to:t},e)=>{var n;r?r1((n=e.subComponents[r].children)!=null?n:[],o,t):r1(e.children,o,t)};var P4=({parentId:r,children:o,slotMap:t},e)=>{for(let n of o){let i=Eg(e,n);i?Tr({subComponentId:i,childId:n},e):Cr({childId:n},e),r?wg({parentId:r,childId:n},e):Ka({childId:n},e)}};var Mo=({unitId:r,unit:o},t)=>{tt(t,["units",r],o)};var k4=({id:r,type:o},t)=>{for(let e in t[`${o}s`]){let n=t[`${o}s`][e],{plug:i}=n;for(let s in i){let a=i[s],{unitId:_}=a;_===r&&tt(t,[`${o}s`,e,"plug",s],{})}}},CP=({unitId:r},o)=>{k4({id:r,type:"input"},o),k4({id:r,type:"output"},o)},TP=({unitId:r},o)=>{let{merges:t={}}=B(o),e=new Set;Y(t,(i,s)=>{i[r]&&(oe(o,["merges",s,r]),Te(o.merges[s])<2&&(oe(o,["merges",s]),e.add(s)))});let n=i=>{var a;let s=o[`${i}s`]||{};for(let _ in s){let c=s[_],{plug:p}=c;for(let u in p){let d=p[u],{mergeId:m}=d;if(m&&e.has(m)){let h=B(t[m]);delete h[r];let f=Te(h);if(f>1)continue;if(f===1){let b=jt(h),g=jt(h==null?void 0:h[b]),v=jt((a=h==null?void 0:h[b])==null?void 0:a[g]);tt(o,[`${i}s`,_,"plug",u],{unitId:b,pinId:v})}}}}};n("input"),n("output")},Pg=({unitId:r},o)=>{TP({unitId:r},o),CP({unitId:r},o),delete o.units[r]},vs=({mergeId:r,mergeSpec:o},t)=>(fs(e=>{let n=t[`${e}s`]||{};Y(n,({plug:i},s)=>{Y(i,(a,_)=>{a.unitId&&a.pinId&&nt(o,[a.unitId,e,a.pinId],null)&&(Ar({type:e,pinId:s,subPinId:_},t),Ja({type:e,pinId:s,subPinId:_,subPinSpec:{mergeId:r}},t))})})}),tt(t,["merges",r],o)),kg=({mergeId:r,unitId:o,type:t,pinId:e},n)=>(Y(n[`${t}s`],({name:i,plug:s={}},a)=>{for(let _ in s){let c=s[_],{unitId:p,pinId:u}=c;p===o&&u===e&&(Oi({pinId:a,type:t},n),$i({pinId:a,pinSpec:{name:i,plug:{0:{mergeId:r}}},type:t},n))}}),tt(n,["merges",r,o,t,e],!0)),Ya=({mergeId:r},o)=>{delete o.merges[r],o.inputs=Ne(o.inputs,t=>_t(S({},t),{plug:Ne(t.plug,e=>!e.mergeId||r!==e.mergeId?e:{})})),o.outputs=Ne(o.outputs,t=>_t(S({},t),{plug:Ne(t.plug,e=>!e.mergeId||r!==e.mergeId?e:{})})),o.metadata&&o.metadata.position&&o.metadata.position.merge&&delete o.metadata.position.merge[r]},C4=({a:r,b:o},t)=>{let e=t.merges[r],n=t.merges[o];oe(t,["merges",o]),tt(t,["merges",r],pn(e,n))},AP=({mergeId:r,unitId:o,type:t,pinId:e},n)=>{oe(n,["merges",r,o,t,e]),ie(nt(n,["merges",r,o,t],{}))&&oe(n,["merges",r,o,t]),ie(nt(n,["merges",r,o],{}))&&oe(n,["merges",r,o])},Xa=({mergeId:r,unitId:o,type:t,pinId:e},n)=>{AP({mergeId:r,unitId:o,type:t,pinId:e},n)};var Oi=({pinId:r,type:o},t)=>oe(t,[`${o}s`,r]),Ar=({pinId:r,type:o,subPinId:t},e)=>{oe(e,[`${o}s`,r,"plug",t])},$i=({pinId:r,type:o,pinSpec:t},e)=>tt(e,[`${o}s`,r],t),T4=({unitId:r,newUnitId:o,name:t},e)=>{let n=e.units[r],i=nt(e,["component","subComponents",r],void 0),s=i&&Ao(e,r)||null,a=B(e),_=bs(a,r),c=ys(a,r);if(Pg({unitId:r},e),Mo({unitId:o,unit:n},e),i)if(qa({unitId:r},e.component),Wa({unitId:o,subComponent:i},e.component),s){let p=e.component.subComponents[s].children.indexOf(r);Tr({subComponentId:s,childId:r},e.component),w4({parentId:s,childId:o,at:p},e.component)}else{let p=e.component.children.indexOf(r);Cr({childId:r},e.component),E4({childId:o,at:p},e.component)}for(let p in c){let u=c[p];for(let d in u)d===r&&(u[o]=u[d],delete u[d]);vs({mergeId:p,mergeSpec:u},e)}xe(_,(p,u,{type:d,pinId:m,subPinId:h})=>{let f=nn(a,[`${d!=null?d:p}s`,m,"plug",h]);f.unitId===r&&(f.unitId=o),tt(e,[`${d!=null?d:p}s`,m,"plug",h],f)})},Ja=({pinId:r,type:o,subPinId:t,subPinSpec:e},n)=>tt(n,[`${o}s`,r,"plug",t],e);var xs=({type:r,pinId:o,subPinId:t,subPinSpec:e},n)=>tt(n,[`${r}s`,o,"plug",t],e),MP=({pinId:r,subPinId:o},t)=>Is({type:"input",pinId:r,subPinId:o},t),OP=({pinId:r,subPinId:o},t)=>Is({type:"output",pinId:r,subPinId:o},t),Is=({type:r,pinId:o,subPinId:t},e)=>tt(e,[`${r}s`,o,"plug",t],{});var F1=({type:r,pinId:o,newId:t},e)=>{let n=nn(e,[`${r}s`,o]);oe(e,[`${r}s`,o]),tt(e,[`${r}s`,t],n)},Za=({type:r,pinId:o,functional:t},e)=>tt(e,[`${r}s`,o,"functional"],t),A4=({type:r,pinId:o,dataType:t},e)=>tt(e,[`${r}s`,o,"type"],t),Qa=({type:r,pinId:o,ref:t},e)=>tt(e,[`${r}s`,o,"ref"],t);var Mr=({unitId:r,type:o,pinId:t,data:e},n)=>tt(n,["units",r,o,t,"data"],e),t_=({unitId:r,type:o,pinId:t,constant:e},n)=>tt(n,["units",r,o,t,"constant"],e),B1=({unitId:r,type:o,pinId:t,ignored:e},n)=>{var i,s,a;return e&&(gi((i=n.merges)!=null?i:{},(_,c,p,u)=>{c===r&&p===o&&u===t&&Xa({mergeId:_,unitId:r,type:o,pinId:t},n)}),o==="input"&&Y((s=n.inputs)!=null?s:{},({plug:_},c)=>{Y(_,(p,u)=>{p.unitId===r&&p.pinId===t&&MP({pinId:c,subPinId:u},n)})}),o==="output"&&Y((a=n.outputs)!=null?a:{},({plug:_},c)=>{Y(_,(p,u)=>{p.unitId===r&&p.pinId===t&&OP({pinId:c,subPinId:u},n)})})),tt(n,["units",r,o,t,"ignored"],e),n};var Cg=({unitId:r,type:o,pinId:t},e)=>{oe(e,["units",r,o,t,"data"])},Tg=({path:r,value:o},t)=>{tt(t,r,o)},H1=({id:r,path:o,value:t},e)=>{tt(e,["units",r,"metadata",...o],t)},Ag=({unitId:r,width:o,height:t},e)=>{kf(e,["units",r,"metadata","component"],{width:o,height:t})},Mg=({width:r,height:o},t)=>{kf(t,["component"],{defaultWidth:r,defaultHeight:o})},e_=({unitId:r,width:o,height:t},e)=>{kf(e,["component","subComponents",r],{width:o,height:t})},Sr=({type:r,pinId:o},t)=>nt(t,[`${r}s`,o,"ref"],!1)||r==="output"&&o===$t,M4=({unitId:r,type:o,pinId:t,newPinId:e},n)=>{let{units:i={},merges:s={}}=n;for(let a in i){let _=i[a]}gi(B(s),(a,_,c,p)=>{_===r&&c===o&&p===t&&(oe(n,["merges",a,r,o,t]),tt(n,["merges",a,r,o,e],!0))})};l();l();function n_(r){let{input:o,output:t}=r,e=Oo(o),n=Oo(t);return{input:e,output:n}}function Oo(r){let o={};for(let t in r){let e=r[t];e!==void 0&&(e instanceof ht?o[t]="null":o[t]=Ot(e))}return o}var O4=r=>{let{unit:o,specs:t}=r;V1(o)};function $4(r){let{spec:o}=r;j1(o)}function L4(r){V1(r.unit)}function j1(r){for(let o in r.units)V1(r.units[o])}function V1(r){let{memory:o}=r;o&&Ss(o)}function Ss(r){for(let o in r.input){let t=r.input[o];r.input[o]=Oo(t)}for(let o in r.output){let t=r.output[o];r.output[o]=Oo(t)}r.memory=Oo(r.memory)}l();function i_(r,o,t,e={}){let{unit:{id:n,input:i,output:s}}=o,{classes:a}=r;o.specs&&r.injectSpecs(o.specs);let _=Vn(n,t,a,e),c=new _(r);Y(i||{},(u={},d)=>{let{constant:m,ignored:h}=u;m!=null&&c.setInputConstant(d,m),typeof h=="boolean"&&c.setInputIgnored(d,h)}),Y(s||{},(u={},d)=>{let{ignored:m}=u;typeof m=="boolean"&&c.setOutputIgnored(d,m)});let{unit:{memory:p}}=o;return p&&(u1(p,t,a),c.restore(p)),Y(i||{},(u,d)=>{var h,f;let{data:m}=u!=null?u:{};if(m!==void 0){let b=c.getInput(d),g=Zt(m,r.specs,a),v=g instanceof Function;if(v&&r.injectSpecs((f=(h=g.__bundle)==null?void 0:h.specs)!=null?f:{}),b.ref()){if(v){let x=new g(r);x.play(),b.push(x)}}else b.push(g)}}),c}l();function Tt(r){return()=>{r.forEach(o=>o())}}l();l();var Or=class extends qt{constructor({i:t=[],o:e=[]},n,i,s){super({i:t,o:e},n,i,s);this.__=["U","J","V"];this.stateful=!0;this._defaultState={};this._state={}}subscribe(t,e,n){throw new $}onDataInputData(t,e){this._forwarding=!0,this.set(t,e),this._forwarding=!1}onDataInputDrop(t){this._backwarding||this.set(t,void 0)}onRefInputData(t,e){super.onRefInputData(t,e),this._forwarding=!0,this.set(t,e),this._forwarding=!1}onRefInputDrop(t){this._backwarding||this.set(t,void 0)}get(t){return G(this,null,function*(){var e;return(e=this._state[t])!=null?e:this._defaultState[t]})}read(){return G(this,null,function*(){return this._state})}write(t){this._state=t}set(t,e){return G(this,null,function*(){this._state[t]=e,this.emit("set",t,e),this.emit(t,e)})}hasKey(t){throw new $}delete(t){delete this._state[t]}pathSet(t,e,n){throw new $}pathGet(t,e){throw new $}pathDelete(t,e){throw new $}keys(){throw new $}snapshotSelf(){let t={};for(let e in this._state){let n=this._state[e];n instanceof ht?t[e]=null:t[e]=n}return _t(S({},super.snapshotSelf()),{_state:t})}restoreSelf(t){let i=t,{_state:e}=i,n=_n(i,["_state"]);super.restoreSelf(n),this._state=e||this._defaultState}};var Z=class extends Or{constructor({i:t=[],o:e=[]},n={},i,s){super({i:t,o:e},n,i,s);this.__=["U","C","J","V","EE"];this._children=[];this._root=[];this._parent_root=[];this._parent_children=[];this._slot={};this._state={};this.addListener("play",this._play),this.addListener("pause",this._pause),this.addListener("set",(a,_)=>{var c,p,u,d;!this._forwarding&&_!==void 0&&(this._backwarding=!0,setTimeout(()=>{var m,h;(h=(m=this._input)==null?void 0:m[a])==null||h.pull(),this._backwarding=!1},0)),this._forwarding||(this._forwarding=!0,_===void 0?(p=(c=this._output)==null?void 0:c[a])==null||p.pull():(d=(u=this._output)==null?void 0:u[a])==null||d.push(_),this._forwarding=!1)}),this._slot={default:this}}detach(){throw new $}registerRoot(t){return Ff(this,this._root,t)}unregisterRoot(t){return zf(this,this._root,t)}reorderRoot(t,e){return Rf(this,this._root,t,e)}registerParentRoot(t,e){return Uf(this,this._parent_root,t,e)}unregisterParentRoot(t){return Gf(this,this._parent_root,t)}reorderParentRoot(t,e){return Nf(this,this._parent_root,t,e)}appendParentChild(t,e){return Bf(this,this._parent_children,t,e)}removeParentChild(t){return Hf(this,this._parent_children,t)}appendChild(t){return Mf(this,this._children,t)}insertChild(t,e){throw new $}pushChild(t){return Ua(this,this._children,t)}hasChild(t){return Ga(this,this._children,t)}removeChild(t){return Of(this,this._children,t)}pullChild(t){throw Ra(this,this._children,t)}refChild(t){return $f(this,this._children,t)}refChildren(){return Lf(this,this._children)}refSlot(t){let e=this._slot[t];if(e)return e;throw new $}_play(){bn(this._children,t=>t.play())}_pause(){bn(this._children,t=>t.pause())}};l();l();var A=class extends qt{constructor({i:t,o:e}={},n={},i,s){super({i:t,o:e},n,i,s);this._looping=!1;this._on_data_output_drop=t=>{this._backward_if_ready(),this._forward_if_ready()};this._done=(t,e=null)=>{if(e)this._forwarding=!0,this.err(e),this._forwarding=!1,this._forward_all_empty();else if(t!==void 0){let n=jn(this._output,a=>a.empty()),i=jn(this._output,a=>!a.empty()),s=(a,_)=>{let c=t[_];c===void 0?a.pull():a.push(c)};this._forwarding=!0,Y(n,s),Y(i,s),this._forwarding=!1}this._backward_if_ready()};this.addListener("take_err",()=>{this._looping&&this._backward_if_ready()}),this.addListener("take_caught_err",()=>{this.hasErr()||this._backward_if_ready()})}_on_input_data(t){this._i[t]!==void 0&&this._active_i_count===this._i_count&&(this._looping=!1),this._forward_if_ready()}_on_input_drop(t,e){this._active_i_count===this._i_count-1&&!this._backwarding&&!this._forwarding_empty&&(this._looping=!1,this._catchErr?this.takeCaughtErr():this.takeErr(),this.d(t,e),this._forward_all_empty())}_on_input_invalid(t){this._i_invalid_count===1&&(this.i(t),this._invalidate())}onDataInputData(t){this._on_input_data(t)}onDataInputDrop(t,e){this._on_input_drop(t,e)}onDataInputStart(t){this._i_start_count===this._i_count&&this._start()}onDataInputInvalid(t){this._on_input_invalid(t)}onDataInputEnd(t){this._i_start_count===this._i_count-1&&this._end()}onRefInputData(t){this._on_input_data(t)}onRefInputDrop(t,e){this._on_input_drop(t,e)}onRefInputInvalid(t){this._on_input_invalid(t)}onDataOutputDrop(t){this._on_data_output_drop(t)}f(t,e){}i(t){}d(t,e){}_backward_if_ready(){!this._forwarding_empty&&!this._forwarding&&!this._err&&!this._caughtErr&&this._active_o_count===0&&(this._looping=!1,this._backward_all(),this._forward_if_ready())}_forward_if_ready(){for(;this._active_o_count-this._o_invalid_count===0&&this._active_i_count-this._i_invalid_count===this._i_count&&!this._forwarding&&!this._backwarding&&!this._looping;)this._looping=!0,this._err!==null&&(this._forwarding_empty=!0,this.takeErr(),this._forwarding_empty=!1),this.f(this._i,this._done)}snapshotSelf(){return _t(S({},super.snapshotSelf()),{_looping:this._looping})}restoreSelf(t){let i=t,{_looping:e}=i,n=_n(i,["_looping"]);super.restoreSelf(n),this._looping=e}};var $P="5d09d860-a8fe-428b-befd-7c793bc0783c",o_=class extends A{constructor(o){super({i:[],o:[]},{},o,$P),this.play()}f(o,t){t(o)}};l();function LP(r,o,t,e,n,i,s,a,_,c,p){var L;let{nextIdMap:u,nextPinIdMap:d,nextSubComponentParentMap:m,nextSubComponentChildrenMap:h}=n,f=r.getUnit(e),b=((L=u.unit)==null?void 0:L[e])||e,g=m[e]||null,v=h[e]||[],x=d[e]||{},I=a[e]||{input:new Set,output:new Set},E=r.getSpec(),{units:D,component:w={}}=E,{subComponents:T={}}=w,C=D[e],P=T[e];if(r.removeUnit(e,!1,!1,!1),o.addUnit(b,f,void 0,!1),g&&o.hasUnit(g)&&o.moveRoot(g,b,"default"),v)for(let O of v)o.hasUnit(O)&&o.moveRoot(b,O,"default");if(P){let{metadata:{component:O}={}}=C;O&&typeof O.width=="number"&&typeof O.height=="number"&&o.setUnitSize(b,O.width,O.height)}let k=(O,R)=>{var N,z;if(!I[O].has(R)&&!f.isPinIgnored(O,R)){let{pinId:F,subPinId:V,mergeId:j,merge:H}=nt(x,[O,R],{pinId:void 0,subPinId:void 0}),K=j&&(!_.has(j)||p);if(p||o.hasPinNamed(O,F)||a1(c[O]||{},({plug:q={}},Q)=>{for(let at in q){let Dt=q[at];if(Dt.unitId===e&&Dt.pinId===R){r.unplugPin(O,Q,at,!1,!1);break}}}),F&&V){if(p){j&&o.hasMergePin(j,t,O,F)&&o.removePinOrMerge(j,t,O,F,!1,!1);let{pinId:Q,subPinId:at}=((z=(N=i.plugs)==null?void 0:N[O])==null?void 0:z[R])||{};Q&&at&&Q===F&&(o.hasPinNamed(O,Q)?(o.hasPlug(O,Q,at)&&o.unplugPin(O,Q,at,!1,!1),o.plugPin(O,Q,at,{unitId:b,pinId:R},!1,!1)):o.exposePinSet(O,Q,{plug:{[at]:{unitId:b,pinId:R}}},void 0,!1,!1))}else if(o.hasPinNamed(O,F))o.exposePin(O,F,V,{unitId:b,pinId:R},!1,!1);else{let Q=f.isPinRef(O,R),at=f.getPinData(O,R);o.exposePinSet(O,F,{plug:{0:{unitId:b,pinId:R}},ref:Q},at,!1,!1),Y(c[O]||{},({plug:Dt},Et)=>{for(let Ct in Dt){let Pt=Dt[Ct];if(Pt.unitId===e&&Pt.pinId===R){r.plugPin(O,Et,Ct,{unitId:t,pinId:F},!1);break}}})}f.isPinConstant(O,R)&&(p||(o.setUnitPinConstant(e,O,R,!1,!1),o.setPinConstant(O,F,!0))),K&&(p?(o.hasMergePin(j,t,O,R)&&o.removePinOrMerge(j,t,O,R,!1,!1),o.hasMerge(j)||o.addMerge(H!=null?H:{},j,!1,!1),o.hasMergePin(j,b,O,R)||o.addPinToMerge(j,b,O,R,!1,!1)):(r.hasMerge(j)||r.addMerge(H!=null?H:{},j,!1,!1),r.hasMergePin(j,e,O,R)&&r.removePinFromMerge(j,e,O,R,!1,!1),r.hasMergePin(j,t,O,F)||r.addPinToMerge(j,t,O,F,!1,!1)))}}},M=f.getInputNames();for(let O of M)k("input",O);let U=f.getOutputNames();for(let O of U)k("output",O);k("output",$t)}function U4(r,o,t,e,n,i,s,a,_,c,p,u=new Set,d){var b,g;if(u.has(e)&&t!==e)return;let{nextPinIdMap:m}=a,{mergeId:h,merge:f}=nt(m,[n,i],{pinId:void 0,subPinId:void 0});if(t===e){let v=o.isPinConstant(n,i),x=B(o.getExposedPinSpec(n,i));if(h&&f){let I=f[e],E=Te(f),D=ja(I);E-D>0||o.coverPinSet(n,i,!1)}else o.coverPinSet(n,i,!1);if(v){let{plug:I={}}=x;for(let E in I){let D=I[E];if(D.unitId&&D.pinId)o.setUnitPinConstant(D.unitId,n,D.pinId,!0);else if(D.mergeId){let w=o.getMergeSpec(D.mergeId);Yt(w,(T,C,P)=>{o.setUnitPinConstant(T,C,P,!0)})}}}}else{if(_&&c){let v=ye(n);if(d)r.hasPinNamed(v,c)&&r.coverPinSet(v,c,!1);else{if(!o.hasPinNamed(v,c)){let x=r.getUnit(e);s=s!=null?s:r.getUnitPinData(e,n,i);let I=x.isPinRef(n,i),E={plug:{0:{}},ref:I};o.exposePinSet(v,c,E,s,!1,!1)}if(r.hasMerge(_)){let x=r.getMergeSpec(_);(g=(b=x==null?void 0:x[t])==null?void 0:b[v])!=null&&g[c]||r.addPinToMerge(_,t,v,c,!1,!1),r.addPinToMerge(_,e,n,i,!1,!1)}else{let x={[e]:{[n]:{[i]:!0}},[t]:{[v]:{[c]:!0}}};r.addMerge(x,_,!1,!1)}}}if(p){let x=t!==e?{plug:{0:{unitId:e,pinId:i}}}:{plug:{0:{}}};o.exposePinSet(n,p.pinId,x,void 0,!1,!1),r.plugPin(n,p.pinId,p.subPinId,{unitId:t,pinId:p.pinId})}}}function K1(r,o,t,e,n,i,s,a=new Set,_,c){var C;let{nextIdMap:p,nextMergePinId:u}=i,d=(C=p.merge[e])!=null?C:e,{input:m=null,output:h=null}=u[e]||{},f=0,b=r.getMergeSpec(e),g={},{merges:v}=s,x=Te(n),I=O1(n,"input"),E=O1(n,"output"),D=r.getMergeData(e);r.hasMerge(e)&&r.removeMerge(e,!1,!1),Yt(n,(P,k,M)=>{var F,V;let U=((F=p.unit)==null?void 0:F[P])||P;if(U===t){let j=o.getExposedPinSpec(k,M),{plug:H}=j;for(let K in H){let q=H[K];if(q.unitId&&q.pinId)tt(g,[q.unitId,k,q.pinId],!0);else if(q.mergeId){let Q=o.getMergeSpec(q.mergeId);Yt(Q,(at,Dt,Et)=>{tt(g,[U,Dt,Et],!0)})}}f++}else a.has(P)&&(tt(g,[U,k,M],!0),f++);let O=!(k==="input")&&!a.has(P),{mergeId:R,pinId:N,subPinSpec:z}=(V=O?m:h)!=null?V:{};U4(r,o,t,P,k,M,D,i,R,N,null,a,c)}),c?(x===0||f>1)&&o.addMerge(g,d,!1,!1):(f===0&&(x===0||I>0&&E>0)||f>1)&&(o.addMerge(g,d,!1,!1),c||pe(n!=null?n:{})===1&&jt(n)===t&&Yt(n,(P,k,M)=>{o.coverPinSet(k,M)}));let T=(P,k)=>{var R,N,z;let{mergeId:M,pinId:U,subPinSpec:L,oppositeMerge:O}=k;if(U&&L)if(c){o.hasMergePin(M,t,P,U)&&o.removeMerge(M,!1,!1);for(let F in v){let V=v[F],j=V[t];if((R=j==null?void 0:j.output)!=null&&R[$t])return;for(let H in j){let K=j[H];for(let q in K){if(q!==U)continue;let Q=_[H][q],{plug:at}=Q;for(let Dt in at){let Et=at[Dt];if(Et.mergeId){let Ct=((N=p.merge)==null?void 0:N[Et.mergeId])||Et.mergeId,Pt=B(V);delete Pt[t];let ot=jt(Pt),X=jt(Pt[ot]),rt=jt(Pt[ot][X]);if(o.hasMerge(Ct))Yt(Pt,(et,ct,lt)=>{ct!==P&&!o.hasMergePin(Ct,et,ct,lt)&&o.addPinToMerge(Ct,et,ct,lt,!1)});else{let et={[ot]:{[X]:{[rt]:!0}}};o.hasMerge(Ct)||o.addMerge(et,Ct,!1,!1)}}else if(Et.unitId&&Et.pinId){let Ct=((z=p.unit)==null?void 0:z[Et.unitId])||Et.unitId;if(o.hasMerge(F))o.addPinToMerge(F,Ct,H,Et.pinId,!1);else if(O){let Pt=B(O);delete Pt[Et.unitId];let ot=jt(Pt);if(!ot)continue;let X=jt(Pt[ot]),rt=jt(Pt[ot][X]);o.addMerge({[Ct]:{[H]:{[Et.pinId]:!0}},[ot]:{[X]:{[rt]:!0}}},e,!1,!1,void 0)}}}}}}}else o.hasPinNamed(P,U)?o.exposePin(P,U,"0",L,!1,!1):o.exposePinSet(P,U,{plug:{0:L}},void 0,!1,!1)};m&&T("input",m),h&&T("output",h),gs(_,(P,k)=>{Ke(k,(M,U)=>{var O,R;if(nt(i,["nextPlugSpec",P,M],void 0))return;let{plug:L}=U;for(let N in L)if(L[N].mergeId===e){let{mergeId:F,oppositeMerge:V}=(O=P==="input"?m:h)!=null?O:{};if(c){if(vg(b)){let j=o.getExposedPinSpecs();if(Ke((R=j[P])!=null?R:{},(H,K)=>{let{plug:q={}}=K;for(let Q in q){let at=q[Q];at.unitId===t&&at.pinId===H&&(o.unplugPin(P,H,Q,!1,!1),o.plugPin(P,H,Q,{mergeId:F},!1,!1))}}),!F||!V)continue;o.hasMerge(d)?Yt(V,(H,K,q)=>{H!==t&&(o.hasMergePin(d,H,K,q)||o.addPinToMerge(d,H,K,q,!1,!1))}):o.addMerge(V,d,!1,!1)}}else if(r.hasPlug(P,M,N)){let j=F?{mergeId:F}:{unitId:t,pinId:M},H=o.hasMerge(d),K=r.getPinData(P,M);o.hasPinNamed(P,M)?o.plugPin(P,M,N,H?{mergeId:d}:{},!1,!1):o.exposePinSet(P,M,{plug:{[N]:H?{mergeId:d}:{}}},K,!1,!1),r.hasPinNamed(P,M)?(r.hasPlug(P,M,N)&&r.unplugPin(P,M,N,!1,!1),r.plugPin(P,M,N,j,!1,!1)):r.exposePinSet(P,M,{plug:{[N]:j}},void 0,!1,!1)}}})})}function W1(r,o,t,e,n,i,s,a,_,c,p,u){var x;let d=r.getExposedPinSpec(e,n),m;if(d){let I=pe((x=d.plug)!=null?x:{});m=r.getPinData(e,n),I===1?r.coverPinSet(e,n,!1):r.coverPin(e,n,s,!1)}let h=nt(u,["plug",e,n,s,"type"],e),f=nt(u,["plug",e,n,s,"subPinId"],s),b=nt(_,[e,n,s],void 0);if(!a){r.exposePinSet(e,n,{plug:{[s]:{}}},void 0,!1,!1);return}if(!b)return;let{pinId:g=a.pinId}=b,v=b;if(b.unitId&&b.pinId&&o.hasUnit(b.unitId)||b.mergeId&&o.hasMerge(b.mergeId)||(v={}),o.hasPinNamed(h,n)?o.exposePin(h,n,f,v,!1,!1):o.exposePinSet(h,n,{plug:{[f]:v}},m,!1,!1),!!a){if(a.unitId&&a.pinId){let I=nt(u,["link",a.unitId,a.type,n,"mergeId"],null);I?r.addPinToMerge(I,t,h,g,!1,!1):(I=nt(u,["plug",e,n,s,"mergeId"],null),I&&(r.hasMerge(I)?r.addPinToMerge(I,t,h,g,!1,!1):r.addMerge({[t]:{[h]:{[g]:!0}},[a.unitId]:{[e]:{[a.pinId]:!0}}},I,!1,!1,void 0)))}else if(a.mergeId){let I=nt(p,["merge",a.mergeId,e],null);I&&r.addPinToMerge(I,t,h,g,!1,!1)}}}function Ds(r,o,t,e,n,i=!0){let{nodeIds:s,nextIdMap:a,nextPinIdMap:_,nextMergePinId:c,nextPlugSpec:p,nextSubComponentParentMap:u,nextSubComponentChildrenMap:d}=e,{merge:m=[],link:h=[],unit:f=[],plug:b=[]}=s,g=B(r.getMergesSpec()),v=B(r.getExposedPinSpecs()),x={},I=new Set(f),E=new Set(m),D=(C,P,k)=>{x[C]=x[C]||{input:new Set,output:new Set},x[C][P].add(k)},w=(C,P,k)=>{let M;return xe(v,(U,L,O)=>{let{plug:R}=O;for(let N in R){let z=R[N];z.unitId===C&&z.pinId===k&&(M={type:U,pinId:L,subPinId:N})}}),M};for(let{unitId:C,type:P,pinId:k}of h){let M=w(C,P,k);M&&!b.find(U=>U.type===M.type&&U.pinId===M.pinId&&U.subPinId===M.subPinId)||D(C,P,k)}let T={};for(let C of m)if(r.hasMerge(C)){let P=r.getMergeSpec(C);T[C]=P,Yt(P,(k,M,U)=>{D(k,M,U)})}for(let{unitId:C,type:P,pinId:k}of h){let{mergeId:M,oppositePinId:U}=nt(a,["link",C,P,k],{mergeId:null,oppositePinId:null});U4(r,o,t,C,P,k,void 0,e,M,U,null,I,i)}for(let C of f)LP(r,o,t,C,e,n,I,x,E,v,i);for(let C of m){let P=g[C];K1(r,o,t,C,P,e,n,I,v,i)}for(let{type:C,pinId:P,subPinId:k}of b){let M=nn(v,[C,P]),U=nt(v,[C,P,"plug",k],void 0);W1(r,o,t,C,P,M,k,U,p,_,c,a)}}l();l();function $r(r,o){let t=Array.isArray(r)?[...r]:S({},r);if(o.length>1){let[e,...n]=o;t[e]=$r(t[e]||{},n)}else if(o.length===1){let[e]=o;delete t[e]}return t}l();function ro(r,o){let t=S({},r);return delete t[o],t}l();l();var ao="untitled",Es="call",ws="watch",Og="unwatch",Ps="ref",$g="ref_exec";var $o="init",Lo="terminate",Lg="connect",Ug="disconnect",si="exec";var Li=(r={})=>pn({type:"`U`&`G`&`C`",name:ao,units:{},merges:{},inputs:{},outputs:{},metadata:{icon:null,description:""}},r);var YG=Li();var G4=(r,o,t)=>{let e={};return Y(o,(n,i)=>{e[i]={},Y(n,(s,a)=>{e[i][r===a?t:a]=s})}),e};var ze=class extends qt{constructor(t,e={},n,i){var g;super({i:[],o:[]},{},n,i!=null?i:t.id);this.__=["U","C","G","EE"];this._element=!1;this._unit={};this._merge={};this._pipedFrom={};this._pipedTo={};this._errUnitIds=[];this._pin={};this._unitPins={};this._exposedPin={};this._exposedMerge={};this._exposedEmptySubPin={input:{},output:{}};this._mergeToSelfUnit={};this._selfUniToMerge={};this._pinToMerge={};this._branch={};this._mergePinCount={};this._unitToMerge={};this._unitToMergeCount={};this._children=[];this._waitAll={};this._onPinSetRenamed=(t,e,n,i,s)=>{let a=ye(t),{functional:_}=i,c=oi(e,t),p=oi(n,t),u=this._exposedPin[c],d=this._exposedMerge[c];d.renamePin(t,e,n),_&&this._unplugFromWaitAll(t,e),delete this._exposedPin[c],delete this._exposedMerge[c],this._exposedPin[p]=u,this._exposedMerge[p]=d;let m=nn(this._exposedEmptySubPin,[t,e]);for(let b in S({},m)){let g=m[b];delete m[b],tt(m,[t,n,b],g)}let h=this.getExposedPinSpec(t,n),{plug:f={}}=h;for(let b in f){let g=f[b];g.unitId&&g.pinId&&tt(this._pinToPlug,[g.unitId,t,g.pinId],{pinId:n,subPinId:b})}};this._refMergePin=(t,e)=>{let n=En(t,e);return this._pin[n]};this._plugToWaitAll=(t,e)=>{let n=ye(t),i=new $n,s=this.getExposedInputPin(e),a=this._waitAll[t];a.addPin(t,e,i,{}),a.setPin(n,e,s),this.setPin(t,e,i,{})};this._unplugFromWaitAll=(t,e)=>{let n=ye(t),i=this.getExposedInputPin(e),s=this._waitAll[t];s.removePin(t,e),s.removePin(n,e),this.setPin(t,e,i,{})};this._getExposedSubPinNodeId=(t,e)=>{let{unitId:n,pinId:i,mergeId:s}=e;return s?En(s,t):ii(n,t,i)};this._ensureMergePin=(t,e,n=!1)=>{let i=En(e,t),s=this._pin[i];if(!this._pin[i]){let a=ye(t);s=new $n,this._pin[i]=s,this._setBranch(e,a,i,n)}return s};this._memEnsureMergePin=(t,e)=>{let n=En(e,t);if(!this._pin[n]){let i=ye(t),s=new $n;this._pin[n]=s,this._memSetBranch(e,i,n)}};this._removeMergeOutput=t=>{this._simRemoveMergeOutput(t),this._memRemoveMergeOutput(t)};this._memRemoveMergeOutput=t=>{let e=En(t,"output");this._pin[e]&&(this._memRemoveBranch(t,"input",e),delete this._pin[e])};this._simRemoveMergeOutput=t=>{let e=En(t,"output");this._pin[e]&&this._simRemoveBranch(t,"input",e)};this._plugPinToMerge=(t,e,n,i,s,a=!0)=>{let _=En(i,t);this._ensureMergePin(t,i,a);let c=this._pin[_];this._setExposedSubPin(t,e,n,c,s,a)};this._simPlugPinToMerge=(t,e,n,i,s=!0)=>{let a=En(i,t);this._ensureMergePin(t,i,s);let _=this._pin[a];this._simSetExposedSubPin(t,e,n,_,s)};this._simUnplugPinFromMerge=(t,e,n,i)=>{this._simRemoveExposedSubPin(t,e,n)};this._simUnplugPinFromUnitPin=(t,e,n,i,s)=>{this._simRemoveExposedSubPin(t,e,n)};this._plugPinToUnitPin=(t,e,n,i,s,a,_=!1)=>{this._memPlugPinToUnitPin(t,e,n,i,s),this._simPlugPinToUnitPin(t,e,n,i,s,_)};this._memPlugPinToUnitPin=(t,e,n,i,s)=>{let a=this.getUnitPin(i,t,s);tt(this._pinToPlug,[i,t,s],{pinId:e,subPinId:n}),this._memSetExposedSubPin(t,e,n,a)};this._memPlugPinToMerge=(t,e,n,i)=>{};this._simPlugPinToUnitPin=(t,e,n,i,s,a=!0)=>{let _=this.getUnitPin(i,t,s);this._simSetExposedSubPin(t,e,n,_,a)};this._takeErr=()=>{if(this._errUnitIds.length>0){let t=this._errUnitIds[0];this._unit[t].takeErr()}};this._nextErr=()=>{if(this._errUnitIds.length>0){let t=this._errUnitIds[0],n=this.getUnit(t).getErr();this.err(n)}else this.takeErr()};this._destroy=()=>{Y(this._unit,t=>t.destroy()),Y(this._merge,t=>t.destroy())};this._reset=()=>{};this.specHasMerge=t=>!!this._spec.merges[t];this.getSpec=()=>this._spec;this.getComponentSpec=()=>this._spec.component;this.getUnits=()=>this._unit;this.exposeOutputSets=t=>{this._exposeOutputSets(t)};this._exposeOutputSets=t=>{Y(t,this._exposeOutputSet)};this.exposeOutputSet=(t,e,n)=>{this.exposePinSet("output",e,t,n)};this._exposeOutputSet=(t,e,n)=>{this._exposePinSet("output",e,t,n)};this.exposeOutput=(t,e,n)=>{this.exposePin("output",n,t,e)};this.coverOutputSet=t=>{this.coverPinSet("output",t)};this.coverOutput=(t,e)=>{this.coverPin("output",e,t)};this.plugOutput=(t,e,n)=>{this.plugPin("input",n,t,e)};this.unplugOutput=(t,e)=>{this.unplugPin("output",e,t)};this._unplugOutput=(t,e)=>{this._unplugPin("output",e,t)};this.exposeInputSets=t=>{Y(t,this.exposeInputSet)};this._exposeInputSets=t=>{Y(t,this._exposeInputSet)};this._initInputSets=t=>{Ke(t,this._initPinSet.bind(this,"input"))};this._initOutputSets=t=>{Ke(t,this._initPinSet.bind(this,"output"))};this.exposeInputSet=(t,e,n)=>{this.exposePinSet("input",e,t,n)};this._exposeInputSet=(t,e,n)=>{this._exposePinSet("input",e,t,n)};this.exposePinSet=(t,e,n,i=void 0,s=!0,a=!0)=>{this._exposePinSet(t,e,n,i,a),i=this.getPin(t,e).peak(),s&&this.emit("expose_pin_set",t,e,n,i,[]),this._transacting&&this._transaction.push(vr(t,e,n,i))};this._exposePinSet=(t,e,n,i,s=!0)=>{let a=new $n({data:i}),_=new Ai(this.__system);this._fork(),this._specExposePinSet(t,e,n),this._memExposePinSet(t,e,n,a,_),this._simExposePinSet(t,e,n,a,_,s)};this._initPinSet=(t,e,n,i=!0)=>{let{ref:s}=n,a=new $n({ref:s}),_=new Ai(this.__system);this._memExposePinSet(t,e,n,a,_),this._simExposePinSet(t,e,n,a,_,i)};this._specExposePinSet=(t,e,n)=>{tt(this._spec,[`${t}s`,e],n);let{plug:i}=n;Y(i,(s,a)=>{this._specExposePin(t,e,a,s)})};this._memExposePinSet=(t,e,n,i,s)=>{let{plug:a}=n,_=oi(e,t);this._exposedPin[_]=i,this._exposedMerge[_]=s,Y(a,(c,p)=>{this._memExposePin(t,e,p,c)})};this.isPinSetFunctional=(t,e)=>!!this._spec[`${t}s`][e].functional;this.exposePin=(t,e,n,i,s=!0,a=!0)=>{this._exposePin(t,e,n,i,a),s&&this.emit("expose_pin",t,e,n,i,[]),this._transacting&&this._transaction.push(Fa(t,e,n,i))};this._exposePin=(t,e,n,i,s=!0)=>{this._specExposePin(t,e,n,i),this._memExposePin(t,e,n,i),this._simExposePin(t,e,n,i,s)};this._specExposePin=(t,e,n,i)=>{this._specPlugPin(t,e,n,i)};this._memExposePin=(t,e,n,i)=>{this._memPlugPin(t,e,n,i)};this._simExposePin=(t,e,n,i,s=!0)=>{let{unitId:a,pinId:_,mergeId:c}=i;c||a&&_?this._simPlugPin(t,e,n,i,s):this._simPlugEmptyPin(t,e,n,s)};this.exposeInput=(t,e,n,i=!0)=>{this.exposePin("input",n,t,e,i)};this.coverInputSet=t=>{this.coverPinSet("input",t)};this.coverInput=(t,e)=>{this.coverPin("input",e,t)};this.coverPinSet=(t,e,n=!0)=>{let i=this.getExposedPinSpec(t,e);this._coverPinSet(t,e),n&&this.emit("cover_pin_set",t,e,i,void 0,[]),this._transacting&&this._transaction.push(xr(t,e,i))};this._coverPinSet=(t,e)=>{this._fork(),this._simCoverPinSet(t,e),this._memCoverPinSet(t,e),this._specCoverPinSet(t,e)};this._memCoverPinSet=(t,e)=>{let n=this.getExposedPinSpec(t,e),{plug:i}=n,s=oi(e,t);Y(i,(a,_)=>{this._memCoverPin(t,e,_)}),delete this._exposedPin[s],delete this._exposedMerge[s]};this._specCoverPinSet=(t,e)=>{let n=this.getExposedPinSpec(t,e),{plug:i}=n;Y(i,(s,a)=>{this._specCoverPin(t,e,a)}),Oi({type:t,pinId:e},this._spec)};this._simCoverPinSet=(t,e)=>{let n=this.getExposedPinSpec(t,e),{plug:i}=n;Y(i,(s,a)=>{this._simCoverPin(t,e,a)}),this.removePin(t,e)};this._specSetPinRef=(t,e,n)=>{tt(this._spec,[`${t}s`,e,"ref"],n)};this._memPlugPin=(t,e,n,i)=>{let{mergeId:s,unitId:a,pinId:_}=i,c;if(a&&_)(this.isUnitRefPin(a,t,_)||_===$t)&&(c=!0),this._memPlugPinToUnitPin(t,e,n,a,_);else if(s){let p=this.getMergeSpec(s);Yt(p,(u,d,m)=>{this.getUnit(u).hasRefPinNamed(d,m)&&(c=!0)}),this._mergeToSelfUnit[s]&&(c=!0),this._memPlugPinToMerge(t,e,n,s)}else this._memPlugEmptyPin(t,e,n);return c};this._specPlugPin=(t,e,n,i)=>{let{mergeId:s,unitId:a,pinId:_}=i,c;if(a&&_)(this.isUnitRefPin(a,t,_)||_===$t)&&(c=!0);else if(s){let p=this.getMergeSpec(s);Yt(p,(u,d,m)=>{this.getUnit(u).isPinRef(d,m)&&(c=!0)}),this._mergeToSelfUnit[s]&&(c=!0)}c!==void 0&&this._specSetPinRef(t,e,c),xs({type:t,pinId:e,subPinId:n,subPinSpec:i},this._spec)};this.plugPin=(t,e,n,i,s=!0,a=!0)=>{this._plugPin(t,e,n,i,a),s&&this.emit("plug_pin",t,e,n,i,[])};this._memRemoveEmptyPin=(t,e,n)=>{var i;delete this._exposedEmptySubPin[t][e][n],(i=this._exposedEmptySubPin[t])!=null&&i[e]&&pe(this._exposedEmptySubPin[t][e])===0&&delete this._exposedEmptySubPin[t][e]};this._simUnplugPinFromEmpty=(t,e,n)=>{this._simRemoveExposedSubPin(t,e,n)};this._plugPin=(t,e,n,i,s=!0)=>{let{mergeId:a,unitId:_,pinId:c}=i;nt(this._exposedEmptySubPin,[t,e,n],void 0)&&(this._simUnplugPinFromEmpty(t,e,n),this._memRemoveEmptyPin(t,e,n)),this._specPlugPin(t,e,n,i);let p=this._memPlugPin(t,e,n,i),u={ref:!!p};a?this._plugPinToMerge(t,e,n,a,u,s):_&&c&&this._plugPinToUnitPin(t,e,n,_,c,u,s),p!==void 0&&this.setPinRef(t,e,p)};this._simPlugPin=(t,e,n,i,s=!0)=>{let{mergeId:a,unitId:_,pinId:c}=i;a?this._simPlugPinToMerge(t,e,n,a,s):this._simPlugPinToUnitPin(t,e,n,_,c,s)};this.plugInput=(t,e,n)=>{this.plugPin("input",n,t,e)};this.unplugInput=(t,e)=>{this.unplugPin("input",e,t)};this._unplugInput=(t,e)=>{this._unplugPin("input",e,t)};this.coverPin=(t,e,n,i=!0)=>{let s=this.getSubPinSpec(t,e,n);this._coverPin(t,e,n),i&&this.emit("cover_pin",t,e,n,s,[]),this._transacting&&this._transaction.push(Ba(t,e,n,s))};this._coverPin=(t,e,n)=>{this._fork(),this._simCoverPin(t,e,n),this._memCoverPin(t,e,n),this._specCoverPin(t,e,n)};this._specCoverPin=(t,e,n)=>{Ar({type:t,pinId:e,subPinId:n},this._spec)};this._memCoverPin=(t,e,n)=>{let s=this._spec[`${t}s`][e].plug[n],{mergeId:a}=s;t==="output"&&a&&this._memRemoveMergeOutput(a),this._memUnplugPin(t,e,n)};this._simCoverPin=(t,e,n)=>{let i=this.getSubPinSpec(t,e,n),{mergeId:s,unitId:a,pinId:_}=i;this._simUnplugPin(t,e,n),(s||a&&_)&&this._simRemoveExposedSubPin(t,e,n)};this.getSubPinSpec=(t,e,n)=>{var i,s,a;return(a=(s=(i=this._spec[`${t}s`])==null?void 0:i[e])==null?void 0:s.plug)==null?void 0:a[n]};this.unplugPin=(t,e,n,i=!0,s=!0)=>{let a=this.getSubPinSpec(t,e,n);this._unplugPin(t,e,n,s),i&&this.emit("unplug_pin",t,e,n,a,[])};this._unplugPin=(t,e,n,i=!0)=>{this._fork();let s=this.getSubPinSpec(t,e,n);this._simUnplugPin(t,e,n,i),this._memUnplugPin(t,e,n),this._specUnplugPin(t,e,n);let{mergeId:a}=s;a&&this.getMergePinCount(a)===0&&this._removeMerge(a,!1)};this._specUnplugPin=(t,e,n)=>{Is({type:t,pinId:e,subPinId:n},this._spec)};this._memUnplugPin=(t,e,n)=>{let i=this.getSubPinSpec(t,e,n);if(i.unitId&&i.pinId&&oe(this._pinToPlug,[i.unitId,t,i.pinId]),t==="output"){let{mergeId:a}=i;a&&this._memRemoveMergeOutput(a)}};this._ensureEmptySubPin=(t,e,n)=>{let i=nt(this._exposedEmptySubPin,[t,e,n],null);return i||(i=new $n,tt(this._exposedEmptySubPin,[t,e,n],i)),i};this._memPlugEmptyPin=(t,e,n)=>{let i=this._ensureEmptySubPin(t,e,n);this._memSetExposedSubPin(t,e,n,i)};this._simUnplugPin=(t,e,n,i=!0)=>{this.__simUnplugPin(t,e,n,i),this._simPlugEmptyPin(t,e,n)};this.__simUnplugPin=(t,e,n,i=!0)=>{let s=this.getSubPinSpec(t,e,n),{mergeId:a,unitId:_,pinId:c}=s,p=t==="output";p&&a&&this._simRemoveMergeOutput(a);let u=this.getPin(t,e),d=this.hasRefPinNamed(t,e);if(a)this._simUnplugPinFromMerge(t,e,n,a);else if(_&&c){let m=this.getUnit(_),h=m.isPinRef(t,c);this._simUnplugPinFromUnitPin(t,e,n,_,c),i&&h&&(p?u.take():m.takePin(t,c))}if(d){let m=oi(e,t);this._exposedMerge[m].reset()}};this._simPlugEmptyPin=(t,e,n,i=!0)=>{let s=this._ensureEmptySubPin(t,e,n);this._simSetExposedSubPin(t,e,n,s,i)};this._memUnplugInput=(t,e)=>this._memUnplugPin("input",t,e);this._memUnplugOutput=(t,e)=>this._memUnplugPin("output",t,e);this._simUnplugInput=(t,e)=>this._simUnplugPin("input",t,e);this._simUnplugOutput=(t,e)=>this._simUnplugPin("output",t,e);this.getExposedInputPin=t=>{let e=oi(t,"input");return this._exposedPin[e]};this.getExposedOutputPin=t=>{let e=oi(t,"output");return this._exposedPin[e]};this.getUnitOuterSpec=t=>{let e={merges:{input:{},output:{}},exposed:{input:{},output:{}}},n=this._unitToMerge[t]||new Set,i=this._unitToMergeCount[t]||0;for(let s of n){let a=i[s];this._forEachUnitPinOnMerge(t,s,(_,c)=>{if(this.getMergePinCount(s)-a<2){let u=this.getMergeSpec(s),d=jt(e4(u,t)),m=u[d],h,f;m.input?(h="input",f=jt(m.input)):(h="output",f=jt(m.output)),tt(e.merges,[_,c],{mergeId:s,otherPin:{unitId:d,type:h,pinId:f}})}else tt(e.merges,[_,c],{mergeId:s,otherPin:null})})}return e};this.getGraphPinData=()=>{let t={};return Y(this._unit,(e,n)=>{let i=e.getPinsData();t[n]=i}),t};this.getGraphMergeInputData=()=>{let t={};return Y(this._merge,(e,n)=>{let i=En(n,"input"),s=this._pin[i];if(s){if(this.getMergePinCount(n)===0)return;let a=s.peak();t[n]=a}}),t};this.getGraphErr=()=>{let t={};return Y(this._unit,(e,n)=>{let i=e.getErr();t[n]=i}),t};this.getUnitInputData=t=>this.getUnit(t).getInputData();this.addUnit=(t,e,n,i=!0)=>{this._addUnit(t,e);let s=e.getUnitBundleSpec();i&&this.emit("add_unit",t,s,e,[]),this._transacting&&this._transaction.push(fi(t,s))};this._addUnit=(t,e,n=null)=>{if(this._fork(),this._unit[t])throw new Error("duplicated unit id "+t);return n||(n=e.getUnitBundleSpec(!1)),this.__system.injectSpecs(n.specs),this.emit("before_add_unit",t,e,[]),this._specAddUnit(t,e,n),this._memAddUnit(t,e,n),this._simAddUnit(t,n,e),e};this.addUnitSpecs=t=>{this._addUnitSpecs(t)};this._addUnitSpecs=t=>{Y(t,(e,n)=>{this._addUnitBundleSpec(n,{unit:e})})};this.injectSubComponent=(t,e,n)=>{this._specInjectSubComponent(t),this._simInjectSubComponent(t,e,n)};this._simInjectSubComponent=(t,e,n)=>{let{classes:i}=this.__system,{children:s=[]}=e;for(let a of s){let{id:_}=a,c=Vn(_,this.__system.specs,i);n.appendChild(c)}};this._injectSubComponent=(t,e,n)=>{let{classes:i}=this.__system,{children:s=[]}=e;for(let a of s){let{id:_}=a,c=Vn(_,this.__system.specs,i);n.appendChild(c)}this._specInjectSubComponent(t)};this._specInjectSubComponent=t=>{tt(this._spec,["component","subComponents",t],{children:[]})};this.componentAppend=(t,e)=>{this._specAppendRoot(t),this.emit("component_append",t,e,[])};this._specAppendRoot=t=>{this._spec.component.children=this._spec.component.children||[],this._spec.component.children.push(t)};this.componentRemove=t=>{this._specComponentRemoveChild(t),this.emit("component_remove",t,[])};this._specComponentRemoveChild=t=>{let e=this._spec.component.children.indexOf(t);this._spec.component.children.splice(e,1)};this.removeSubComponent=t=>{this._specRemoveSubComponent(t)};this._specRemoveSubComponent=t=>{let{subComponents:e}=this._spec.component,n=e[t],{children:i=[]}=n;for(let s of i)this._spec.component.children.push(s);delete e[t]};this._getSubComponentParentId=t=>Ao(this._spec,t);this._getSubComponentSlotName=t=>{let e=this._getSubComponentParentId(t);return nt(this._spec,["component","subComponents",e,"childSlot",t],"default")};this._appendSubComponentChild=(t,e,n)=>{this._fork(),this._specSubComponentAppendChild(t,e,n),this._simSubComponentAppendChild(t,e,n)};this._simRemoveSubComponentFromParent=t=>{let e=this._getSubComponentParentId(t);e?this._simSubComponentRemoveChild(e,t):this._simRemoveRoot(t)};this._specRemoveSubComponentChild=(t,e)=>{let n=this._spec.component.subComponents[t],{children:i=[],childSlot:s={}}=n,a=i.indexOf(e);i.splice(a,1),delete s[e],n.children=i,n.childSlot=s};this._specRemoveSubComponentFromParent=t=>{let e=this._getSubComponentParentId(t);e?this._specRemoveSubComponentChild(e,t):this._specRemoveRoot(t)};this._simSubComponentRemoveChild=(t,e)=>{let n=this.getUnit(t),i=this.getUnit(e);n.removeParentChild(i),this.registerRoot(i)};this._specSubComponentAppendChild=(t,e,n)=>{let i=this._spec.component.subComponents[t],{children:s=[],childSlot:a={}}=i;s.push(e),a[e]=n,i.children=s,i.childSlot=a};this._simSubComponentAppendChild=(t,e,n)=>{let i=this.getUnit(t),s=this.getUnit(e);i.registerParentRoot(s,n)};this._unitUnlisten={};this.addUnitBundle=(t,e)=>{this._addUnitBundle(t,e)};this._addUnitBundle=(t,e)=>{};this.setUnitPin=(t,e,n)=>{let i=this.getUnit(t),s=ii(t,e,n),a=i.getPin(e,n);this._pin[s]=a,this._unitPins[s]=a};this.setUnitInput=(t,e)=>{this.setUnitPin(t,"input",e)};this.setUnitOutput=(t,e)=>{this.setUnitPin(t,"output",e)};this._on_unit_element=(t,e,n)=>{this.injectSubComponent(t,e,n)};this._on_unit_not_element=t=>{this._specRemoveSubComponent(t)};this._simRemoveUnit=(t,e=!0)=>{var s;let n=this.getUnit(t);n.hasErr()&&this._removeErrUnit(t);let i=this.getExposedOutput({unitId:t,pinId:$t});if(this._simUnplugUnit(t,e),e&&i&&this.takeOutput(i),n instanceof Z||n instanceof ze&&n.isElement()){let a=(s=this._spec.component)==null?void 0:s.subComponents[t],{children:_=[]}=a;for(let c of _)this._simSubComponentRemoveChild(t,c);this._simRemoveSubComponentFromParent(t)}};this._subComponentRemoveChild=(t,e)=>{this._simSubComponentRemoveChild(t,e),this._specRemoveSubComponentChild(t,e)};this._specUnplugUnit=t=>{let{merges:e}=this._spec,n=B(e);gi(n,(i,s,a,_)=>{var p;let c=B(this.getMergeSpec(i));if(s===t&&c)if(delete c[t],Te(c)<2){let d=this.findMergeExposedSubPin("input",i),m=this.findMergeExposedSubPin("output",i),h=B(this.getMergeSpec(i));delete h[t];let f=jt(h),b=jt(h==null?void 0:h[f]),g=jt((p=h==null?void 0:h[f])==null?void 0:p[b]);this._specRemoveMerge(i),d&&this._specPlugPin("input",d.pinId,d.subPinId,{unitId:f,pinId:g}),m&&this._specPlugPin("output",m.pinId,m.subPinId,{unitId:f,pinId:g})}else this._specRemoveUnitFromMerge(t,i)}),this._forEachSpecPinPlug((i,s,a,_)=>{_.unitId===t&&this._specUnplugPin(i,s,a)})};this._unplugUnit=(t,e)=>{this._simUnplugUnit(t,e),this._memUnplugUnit(t),this._specUnplugUnit(t)};this._simUnplugUnit=(t,e)=>{var s;let n=this._unitToMerge[t]||new Set,i=this._unitToMergeCount[t]||{};for(let a of n){let _=i[a];if(this.getMergePinCount(a)-_<2){let p=this.findMergeExposedSubPin("input",a),u=this.findMergeExposedSubPin("output",a),d=B(this.getMergeSpec(a));delete d[t];let m=jt(d),h=jt(d==null?void 0:d[m]),f=jt((s=d==null?void 0:d[m])==null?void 0:s[h]);this._simRemoveMerge(a,e),p&&this._simPlugPin("input",p.pinId,p.subPinId,{unitId:m,pinId:f},!1),u&&this._simPlugPin("output",u.pinId,u.subPinId,{unitId:m,pinId:f},!1)}else this._simRemoveUnitFromMerge(t,a,e)}this._forEachSpecPinPlug((a,_,c,p)=>{p.unitId===t&&this._simUnplugPin(a,_,c,e)})};this.addMerges=t=>{Y(t,this.addMerge)};this._addUnitMerges=(t,e=!0)=>{Y(t,(n,i)=>{this.hasMerge(i)?Yt(n,(s,a,_)=>{this.hasMergePin(i,s,a,_)||this._addPinToMerge(i,s,a,_,e)}):this._addMerge(n,i,void 0,e)})};this._addMerges=(t,e=!0)=>{Y(t,(n,i)=>{this._addMerge(n,i,void 0,e)})};this._initMerges=t=>{Ke(t,this._initMerge)};this._initMerge=(t,e)=>{let n=this._createMerge(t);this._memAddMerge(t,e,n),this._simAddMerge(t,e,n)};this.addMerge=(t,e,n=!0,i=!0,s)=>{s=this._addMerge(t,e,s,i),n&&this.emit("add_merge",e,t,s,[]),this._transacting&&this._transaction.push(hs(e,t))};this._createMerge=t=>{let e=new Ai(this.__system),n=En(t,"input"),i=new $n;return e.addInput(n,i),e};this._pinToPlug={};this._addMerge=(t,e,n=null,i=!0)=>{this._fork(),n=n!=null?n:this._createMerge(e),this.emit("before_add_merge",e,t,n,[]);let s=[];return Yt(t,(a,_,c)=>{let p=nt(this._pinToPlug,[a,_,c],void 0);p&&(s.push({type:_,pinId:p.pinId,subPinId:p.subPinId}),this._unplugPin(_,p.pinId,p.subPinId,!1))}),this._specAddMerge(e,t,n),this._memAddMerge(e,t,n),this._simAddMerge(e,t,n,i),bn(s,a=>{this._plugPin(a.type,a.pinId,a.subPinId,{mergeId:e},i)}),n};this._specAddMerge=(t,e,n)=>{tt(this._spec,["merges",t],e),Y(e,({input:i,output:s},a)=>{Y(i||{},(_,c)=>{this._specAddPinToMerge(t,a,"input",c)}),Y(s||{},(_,c)=>{this._specAddPinToMerge(t,a,"output",c)})})};this._memAddMerge=(t,e,n)=>{this._merge[t]=n,Y(e,({input:i,output:s},a)=>{Y(i||{},(_,c)=>{this._memAddPinToMerge(t,a,"input",c)}),Y(s||{},(_,c)=>{this._memAddPinToMerge(t,a,"output",c)})})};this.addPinToMerge=(t,e,n,i,s=!0,a=!0)=>{this._addPinToMerge(t,e,n,i,a),s&&this.emit("add_pin_to_merge",t,e,n,i,[])};this._addPinToMerge=(t,e,n,i,s=!0)=>{this._validateMergeId(t),this._validateUnitId(e);let a=nt(this._pinToPlug,[e,n,i],void 0);a&&this._unplugPin(n,a.pinId,a.subPinId,s),this._specAddPinToMerge(t,e,n,i),this._memAddPinToMerge(t,e,n,i),this._simAddPinToMerge(t,e,n,i,s),a&&this._plugPin(n,a.pinId,a.subPinId,{mergeId:t},s)};this._simRemoveAllPlugsFromMerge=t=>{this._forEachSpecPinPlug((e,n,i,s)=>{s.mergeId===t&&this._simUnplugPin(e,n,i)})};this.__simRemoveAllPlugsFromMerge=t=>{this._forEachSpecPinPlug((e,n,i,s)=>{s.mergeId===t&&this._simUnplugPin(e,n,i)})};this._forEachSpecPinPlug=t=>{this._forEachSpecPinOfType("input",(e,n,i)=>{t("input",e,n,i)}),this._forEachSpecPinOfType("output",(e,n,i)=>{t("output",e,n,i)})};this._forEachSpecPinOfType=(t,e)=>{Y(this._spec[`${t}s`]||{},({plug:n},i)=>{for(let s in n){let a=n[s];e(i,s,a)}})};this._simRemoveAllPinsFromMerge=(t,e)=>{let n=B(this._spec.merges[t]);Y(n,({input:i,output:s},a)=>{Y(i||{},(_,c)=>{this._simRemovePinFromMerge(t,a,"input",c,e)}),Y(s||{},(_,c)=>{this._simRemovePinFromMerge(t,a,"output",c,e)})})};this._settingUnitData=!1;this._getUnitPinPlug=(t,e,n)=>{let i;return Ha(this._spec,e,(s,a)=>{let{plug:_}=a;for(let c in _){let p=_[c];p.unitId===t&&p.pinId===s&&(i={type:e,pinId:s,subPinId:c})}}),i};this._newMergeId=()=>{let t=0,e=`${t}`;for(;this.hasMerge(e);)t++,e=`${t}`;return e};this._movePlugInto__inject=(t,e,n,i,s,a,_,c,p)=>{let u=this.getGraph(t),d=nt(p,["plug",e,n,i,"type"],e),m=nt(a,[e,n,i],{})};this._movePlugInto__reconnect=(t,e,n,i,s,a,_,c,p,u)=>{let d=ye(e),m=nt(a,[e,n,i,"pinId"],n),h=nn(u,[e,n,i]),f=nt(p,["plug",e,n,i,"type"],e),b=this.getGraph(t),g=nt(a,[e,n,i],{});if(b.hasPinNamed(f,n)?b.exposePin(f,n,i,g,!1):(b.exposePinSet(f,n,{plug:{[i]:g}},!1),h.active()&&b.setPinData(f,n,h.peak())),s.unitId&&s.pinId){let v=nt(p,["link",s.unitId,s.type,n,"mergeId"],null);v?this._addPinToMerge(v,t,f,m):(v=nt(p,["plug",e,n,i,"mergeId"],null),v&&this._addMerge({[t]:{[f]:{[m]:!0}},[s.unitId]:{[e]:{[s.pinId]:!0}}},v,void 0,!1))}else if(s.mergeId){let v=nt(c,["merge",s.mergeId,e],null);if(v)this._addPinToMerge(v,t,f,m,!1);else{let x=nt(p,["plug",e,n,i,"mergeId"],null);x&&this._addPinToMerge(x,t,f,m)}}};this._transacting=!1;this._transaction=[];this.endTransaction=()=>{if(!this._transacting)throw new Error("transaction not started");this.emit("bulk_edit",this._transaction,!0,[]),this._transacting=!1};this._isUnitComponent=t=>{let e=this.getUnit(t);return e instanceof Z||e instanceof ze&&e.isElement()};this._root=[];this._parent_root=[];this._parent_children=[];this._slot={};this._spec=t,this._spec.id||n.newSpec(this._spec);let s=_t(S({},(g=t.specs)!=null?g:{}),{[i]:t});this._specs=this.__system.specs;let{inputs:a={},outputs:_={},units:c={},merges:p={},component:u={},render:d=!1}=this._spec;this._branch=e,this._initAddUnits(c),this._initMerges(p),this._initInputSets(a),this._initOutputSets(_),this._initSetComponent(u),this._element=d,this.addListener("reset",this._reset),this.addListener("play",this._play),this.addListener("pause",this._pause),this.addListener("destroy",this._destroy),this.addListener("take_err",this._takeErr),this.addListener("take_caught_err",this._takeErr);let m=jn(a,({functional:v})=>!!v),h=J(m),f=jn(_,({functional:v})=>!!v),b=J(f);this._waitAll={input:new o_(this.__system),output:new o_(this.__system)},bn(h,v=>{this._plugToWaitAll("input",v)}),bn(b,v=>{this._plugToWaitAll("output",v)})}onInputRenamed(t,e,n,i){super.onInputRenamed(t,e,n,i),this._onPinSetRenamed("input",t,e,n,i)}onOutputRenamed(t,e,n,i){super.onOutputRenamed(t,e,n,i),this._onPinSetRenamed("output",t,e,n,i)}isUnitPinRef(t,e,n){return this.getUnit(t).isPinRef(e,n)}getUnitPinData(t,e,n){return this.getUnit(t).getPinData(e,n)}removeUnitPinData(t,e,n){this._removeUnitPinData(t,e,n),this.emit("remove_unit_pin_data",t,e,n,[])}removeMergeData(t){this._removeMergeData(t)}setMergeData(t,e){this._setMergeData(t,e)}_setMergeData(t,e){this._ensureMergePin("input",t).push(e)}_removeMergeData(t){this._ensureMergePin("input",t).take()}_removeUnitPinData(t,e,n){this.getUnit(t).removePinData(e,n)}_setBranch(t,e,n,i){this._memSetBranch(t,e,n),this._simSetBranch(t,e,n,i)}_memSetBranch(t,e,n){e==="input"?this._pipedTo[n]=t:this._pipedFrom[n]=t}_simSetBranch(t,e,n,i){let s=this._merge[t];if(e==="input"){let a=this._pin[n];s.setOutput(n,a,{},i)}else{let a=this._pin[n];s.setInput(n,a,{},i)}}_memRemoveBranch(t,e,n){e==="input"?delete this._pipedTo[n]:delete this._pipedFrom[n]}_simRemoveBranch(t,e,n){e==="input"?this._merge[t].removeOutput(n):this._merge[t].removeInput(n)}_removeBranch(t,e,n){this._simRemoveBranch(t,e,n),this._memRemoveBranch(t,e,n)}setExposedSubPin(t,e,n,i,s){this._setExposedSubPin(t,e,n,i,s),this.emit("set_exposed_sub_pin",t,e,n,i,s,[])}_setExposedSubPin(t,e,n,i,s,a=!0){let _=ye(t),c=oi(e,t);this._exposedMerge[c].setPin(_,n,i,s,a)}_memSetExposedSubPin(t,e,n,i){}_simSetExposedSubPin(t,e,n,i,s=!0){let a=ye(t),_=oi(e,t);this._exposedMerge[_].setPin(a,n,i,{},s)}_simRemoveExposedSubPin(t,e,n){let i=ye(t),s=oi(e,t);this._exposedMerge[s].removePin(i,n)}_play(){Y(this._unit,t=>t.play()),bn(this._children,t=>t.play())}_pause(){Y(this._unit,t=>t.pause()),bn(this._children,t=>t.pause())}_removeErrUnit(t){let e=this._errUnitIds.indexOf(t);this._errUnitIds.splice(e,1),e===0&&this._nextErr()}_validateMergeId(t){if(!this._spec.merges[t])throw new jf}_validateUnitId(t){if(!this._spec.units[t])throw new Vf}isElement(){return this._element}setElement(){this._element=!0,this.emit("element",[])}setNotElement(){this._element=!1,this.emit("not_element",[])}getBundleSpec(t=!1){let{spec:e,specs:n}=hi(this._spec,this._specs),i;return t&&(i=this.snapshot(),Ke(this._unit,(s,a)=>{let _=a.snapshot();tt(e,["units",s,"memory"],_)})),{spec:e,specs:n}}getUnitBundleSpec(t=!1){let{id:e}=this,n=this.getInputs(),i=this.getOutputs(),s=d=>mi(d,(m,h)=>{let b=h.peak();return b instanceof ht&&(b=null),{constant:h.constant(),ignored:h.ignored(),data:b===void 0?void 0:Ot(b)}}),a=s(n),_=s(i),c;return t&&(c=this.snapshot(),Ss(c)),un({id:e,input:a,output:_,memory:c},this._specs)}snapshotSelf(){let t={unit:{},merge:{},exposedMerge:{},waitAll:null};for(let e in this._unit){let i=this._unit[e].snapshot();t.unit[e]=i}for(let e in this._merge){let i=this._merge[e].snapshot();t.merge[e]=i}for(let e in this._exposedMerge){let i=this._exposedMerge[e].snapshot();t.exposedMerge[e]=i}return t.waitAll=this._waitAll.input.snapshot(),t}restoreSelf(t){var n,i,s;super.restoreSelf(t);for(let a in this._unit){let _=this._unit[a],c=(n=t.unit)==null?void 0:n[a];c&&_.restore(c)}for(let a in this._merge){let _=this._merge[a],c=(i=t.merge)==null?void 0:i[a];c&&_.restore(c)}for(let a in this._exposedMerge){let[_,c]=a.split("/");if(this.hasDataPinNamed(_,c)){let p=this._exposedMerge[a],u=(s=t.exposedMerge)==null?void 0:s[a];u&&p.restore(u)}}let e=t.waitAll;e&&this._waitAll.input.restore(e)}getGraphUnitSpec(t){return this._spec.units[t]}isExposedOutput(t){let e=this._spec.outputs||{},n=this._getExposedSubPinNodeId("output",t);return Oa(e,({plug:i})=>Oa(i,s=>this._getExposedSubPinNodeId("output",s)===n))}getExposedOutput(t){let e=this._spec.outputs||{},n=this._getExposedSubPinNodeId("output",t);for(let i in e){let s=e[i],{plug:a}=s;for(let _ in a){let c=a[_];if(this._getExposedSubPinNodeId("output",c)===n)return i}}}setUnitSize(t,e,n,i=!0){this._setUnitSize(t,e,n)}setSubComponentSize(t,e,n,i=!0){this._setSubComponentSize(t,e,n)}setComponentSize(t,e,n,i=!0){this._setComponentSize(e,n)}_simExposePinSet(t,e,n,i,s,a=!0){let{plug:_,ref:c}=n;s.setPin(t,e,i),Y(_,(p,u)=>{this._simExposePin(t,e,u,p,a)}),this.setPin(t,e,i,{ref:c},a)}setPinSetFunctional(t,e,n,i=!0){if(t==="output")throw new Error("cannot set output pin set functional");this._setPinSetFunctional(t,e,n),i&&this.emit("set_pin_set_functional",t,e,n,[])}_setPinSetFunctional(t,e,n){this._specSetPinSetFunctional(t,e,n),this._memSetPinSetFunctional(t,e,n),this._simSetPinSetFunctional(t,e,n)}_specSetPinSetFunctional(t,e,n){Za({type:t,pinId:e,functional:n},this._spec)}_memSetPinSetFunctional(t,e,n){tt(this._i_opt,[t,e,"functional"],n)}_simSetPinSetFunctional(t,e,n){let i=this.isPinSetFunctional(t,e);!i&&n?this._plugToWaitAll(t,e):i&&!n&&this._unplugFromWaitAll(t,e)}setPinSetId(t,e,n){this._setPinSetId(t,e,n),this.renamePin(t,e,n),this.emit("set_pin_set_id",t,e,n,[])}_setPinSetId(t,e,n){this._fork();let i=this._spec[`${t}s`][e];delete this._spec[`${t}s`][e],this._spec[`${t}s`][n]=i}isExposedInput(t){let e=this._spec.inputs||{},n=this._getExposedSubPinNodeId("input",t);return Oa(e,({plug:i})=>Oa(i,s=>this._getExposedSubPinNodeId("input",s)===n))}getExposedPinSpecs(){return{input:this.getExposedInputSpecs(),output:this.getExposedOutputSpecs()}}getExposedPinSpec(t,e){return t==="input"?this.getExposedInputSpec(e):this.getExposedOutputSpec(e)}isExposedInputPinId(t){return!!(this._spec.inputs||{})[t]}isExposedOutputPinId(t){return!!(this._spec.outputs||{})[t]}getExposedInputSpec(t){return(this._spec.inputs||{})[t]}getPlugSpec(t,e,n){return this._spec[`${t}s`][e].plug[n]}getExposedInputSpecs(){return this._spec.inputs||{}}getExposedOutputSpec(t){return(this._spec.outputs||{})[t]}getExposedOutputSpecs(){return this._spec.outputs||{}}hasUnit(t){return!!this._unit[t]}hasMerge(t){return Va(this._spec,t)}hasMergePin(t,e,n,i){return Pr(this._spec,t,e,n,i)}hasPlug(t,e,n){return!!this.getSubPinSpec(t,e,n)}getUnit(t){if(!this._unit[t])throw new Error("cannot find unit");return this._unit[t]}getGraph(t){return this.getUnit(t)}removeUnitGhost(t,e,n,i=!0){let s=this._removeUnitGhost(t,e,n),{specId:a,bundle:_}=s;return i&&this.emit("remove_unit_ghost",t,e,_,[]),s}addUnitGhost(t,e,n,i,s=!0){this._addUnitGhost(t,e,n,i),s&&this.emit("add_unit_ghost",t,e,n,[])}_addUnitGhost(t,e,n,i){let{unit:s,specs:a}=n;if(this.__system.injectSpecs(a),!this.__system.hasSpec(s.id))throw new Co;let _=this.getUnitOuterSpec(t);this._removeUnit(t,!1),this._addUnitBundleSpec(e,n),xe(_.merges,(c,p,{mergeId:u,otherPin:d,exposedPin:m})=>{let h=nt(i,[c,p],p);d?this._addMerge({[d.unitId]:{[d.type]:{[d.pinId]:!0}},[e]:{[c]:{[h]:!0}}},u,null):this._addPinToMerge(u,e,c,h),m&&this._plugPin(m.type,m.pinId,m.subPinId,{mergeId:u})}),xe(_.exposed,(c,p,u)=>{let d=nt(i,[c,p],p);this._plugPin(u.type,u.pinId,u.subPinId,{unitId:e,pinId:d})})}_removeUnitGhost(t,e,n,i=!0){let{specs:s}=this.__system,{id:a}=this.__system.newSpec(n),_=this.getUnitOuterSpec(t),c=this.getGraphUnitSpec(t),p=this._removeUnit(t,!1),u=un(c,s);return this._addUnitBundleSpec(e,{unit:{id:a}}),xe(_.merges,(d,m,{mergeId:h,otherPin:f,exposedPin:b})=>{f?this._addMerge({[f.unitId]:{[f.type]:{[f.pinId]:!0}},[e]:{[d]:{[m]:!0}}},h,null):this._addPinToMerge(h,e,d,m),b&&this._plugPin(b.type,b.pinId,b.subPinId,{mergeId:h})}),xe(_.exposed,(d,m,h)=>{this._plugPin(h.type,h.pinId,h.subPinId,{unitId:e,pinId:m})}),i&&(u.unit.memory=p.snapshot()),{specId:a,bundle:u}}swapUnitGhost(t,e,n){this._removeUnit(t),this._addUnitBundleSpec(e,n);let s=this.getUnit(t).snapshot(),a=wn({}),{id:_}=this.__system.newSpec({});return{spec_id:_,state:s}}getUnitByPath(t){let e=this;for(let n of t)e=e.getUnit(n);return e}read(){return this.getGraphState()}write(t){this.setGraphState(t)}setGraphState(t){return G(this,null,function*(){for(let e in t){let n=this.getUnit(e)}})}getUnitState(t){let e=this.getUnit(t);return null}getGraphState(){return{}}getGraphChildren(){let t={};for(let e in this._unit){let n=this.getUnit(e);if(n instanceof Z||n instanceof ze&&n.isElement()){let i=n.refChildren();i!==void 0&&(t[e]=i)}}return t}getUnitPin(t,e,n){return this.getUnit(t).getPin(e,n)}getUnitData(t,e,n){return this.getUnit(t).getPinsData()}getMergeData(t){let e=this.getMerge(t);return e?e.getData():void 0}getUnitInput(t,e){return this.getUnit(t).getInput(e)}getUnitOutput(t,e){return this.getUnit(t).getOutput(e)}setUnitErr(t,e){this.getUnit(t).err(e)}takeUnitErr(t){return this._takeUnitErr(t)}_takeUnitErr(t){return this.getUnit(t).takeErr()}getMerges(){return this._merge}refPins(){return{input:this._input,output:this._output}}getPlugs(){let t={input:{},output:{}};return this._forEachSpecPinPlug((e,n,i,s)=>{let a=this.getPlug(e,n,i);tt(t,[e,n,i],a)}),t}getPlugSpecs(){return Ig(this._spec)}getPlug(t,e,n){let i=ye(t),s=oi(e,t);return this._exposedMerge[s].getPin(i,n)}getMerge(t){return this._merge[t]}refExposedMerges(){return this._exposedMerge}getUnitCount(){return J(this._unit).length}getMergeCount(){return J(this._merge).length}findMergeExposedSubPin(t,e){let n=null;return this._forEachSpecPinOfType(t,(i,s,a)=>{a.mergeId===e&&(n={pinId:i,subPinId:s})}),n}getUnitsSpec(){let{units:t}=this._spec;return t}getMergesSpec(){let{merges:t={}}=this._spec;return t}getMergeSpec(t){let{merges:e}=this._spec;return e[t]}getMergeUnitCount(t){let e=this.getMergeSpec(t);return J(e).length}getMergePinCount(t){var e;return(e=this._mergePinCount[t])!=null?e:0}getPinPlugCount(t,e){let n=this.getExposedPinSpec(t,e);return Pf(n.plug||{})}fork(t,e=!0){this._fork(t,e)}_fork(t,e=!0){var n;if(this._spec.system||((n=this.__system.specsCount[this.id])!=null?n:0)>1){let[i,s]=this.__system.forkSpec(this._spec,t);this.__system.unregisterUnit(this.id),this.id=i,this._spec=s,this.__system.registerUnit(i),e&&this.emit("fork",i,B(s),[])}}_initAddUnit(t,e){let n=un(e,this.__system.specs),i=i_(this.__system,n,this._specs,this._branch);this._memAddUnit(t,i),this._simAddUnit(t,{unit:e},i)}_initAddUnits(t){Y(t,(e,n)=>{this._initAddUnit(n,e)})}addUnitSpec(t,e,n=!0){let i=i_(this.__system,e,this._specs,this._branch);return this.addUnit(t,i,e,n),i}_addUnitSpec(t,e,n=!0){let i=i_(this.__system,e,this._specs,this._branch);return this._addUnit(t,i,e),i}_addUnitBundleSpec(t,e){let n=i_(this.__system,e,this._specs,this._branch);return this._addUnit(t,n),n}_onUnitErr(t,e){let n=this._errUnitIds.indexOf(t);n>-1?n===0&&this.err(e):(this._errUnitIds.push(t),this._errUnitIds.length===1&&this.err(e))}_specAddUnit(t,e,n=null){n=n!=null?n:e.getUnitBundleSpec();let{unit:i}=n;tt(this._spec,["units",t],i),(e instanceof Z||e instanceof ze&&e.isElement())&&(this._specInjectSubComponent(t),this._specAppendRoot(t))}_memAddUnit(t,e,n=null){n=n!=null?n:e.getUnitBundleSpec();let{unit:i}=n,s=[];e.setParent(this),this._unit[t]=e;let a=(D,w)=>{let T=ii(t,D,w),C=this._pipedTo[T],P=this._pipedFrom[T];C&&this._removePinOrMerge(C,t,D,w),P&&this._removePinOrMerge(P,t,D,w),delete this._pipedTo[T],delete this._pipedFrom[T],delete this._pin[T],delete this._unitPins[T],oe(this._spec,["units",t,D,w]),oe(this._spec,["units",t,"memory",D,w])},_=D=>{a("input",D)},c=D=>{a("output",D)},p=(D,w,T)=>{let C=ii(t,D,w),P=ii(t,D,T),k=nt(this._pinToMerge,[t,D,w],null);if(k){let M=this.getMerge(k),U=ye(D);M.renamePin(U,C,P),tt(this._pinToMerge,[t,D,T],k),delete this._pinToMerge[t][D][w],this._pipedTo[C]&&(this._pipedTo[P]=this._pipedTo[C],delete this._pipedTo[C]),this._pipedFrom[C]&&(this._pipedFrom[P]=this._pipedFrom[C],delete this._pipedFrom[C]),M4({unitId:t,type:D,pinId:w,newPinId:T},this._spec)}this._pin[P]=this._pin[C],delete this._pin[C]},u=e.getInputNames(),d=e.getOutputNames(),m=this.setUnitInput.bind(this,t),h=this.setUnitOutput.bind(this,t);bn(u,m),bn(d,h);let f={},b=(D,w,T,C=!0)=>{if(T===void 0)return;let P=this.getUnitPin(t,D,w);C&&this._fork(),this._specSetUnitPinData(t,D,w,T);let k=P.addListener("data",M=>{this._settingUnitData||(this._specSetUnitPinData(t,D,w,M),this.emit("set_unit_pin_data",t,D,w,M,[]))});tt(f,[t,D,w],k),s.push(k)};bn(u,D=>{e.isPinConstant("input",D)&&b("input",D,e.getPinData("input",D),!1)}),bn(d,D=>{e.isPinConstant("output",D)&&b("output",D,e.getPinData("output",D),!1)}),s.push(e.addListener("set_input",m)),s.push(e.addListener("remove_input",_)),s.push(e.addListener("set_output",h)),s.push(e.addListener("remove_output",c)),s.push(e.addListener("rename_input",p.bind(this,"input"))),s.push(e.addListener("rename_output",p.bind(this,"output"))),s.push(e.addListener("set_pin_constant",(D,w,T)=>{this._specSetUnitPinConstant(t,D,w,T);let C=this.getUnitPinData(t,D,w);if(T)b(D,w,C);else{let P=nt(f,[t,D,w],void 0);P&&(P(),Hn(s,P),p1(f,[t,D,w]))}}));let g=v4(t,$t),v=e.getSelfPin();this._pin[g]=v;let x=D=>{this._onUnitErr(t,D)};s.push(e.addListener("err",x));let I=()=>{let D=this._errUnitIds.indexOf(t);D>-1&&(this._errUnitIds.splice(D,1),D===0&&this._nextErr())};if(s.push(e.prependListener("take_err",I)),s.push(e.prependListener("catch_err",I)),e instanceof ze){for(let D of Ln)s.push(e.addListener(D,(...w)=>{this.emit(D,...w.slice(0,-1).concat([[t,...w[w.length-1]]]))}));s.push(e.addListener("fork",(D,w,T)=>{T.length===0&&(this._fork(),tt(this._spec,["units",t,"id"],D))}))}e instanceof ze&&e.isElement()&&(s.push(e.addListener("element",()=>{this._on_unit_element(t,i,e)})),s.push(e.addListener("not_element",()=>{this._on_unit_not_element(t)})));let E=Tt(s);this._unitUnlisten[t]=E}_simAddUnit(t,e,n){(n instanceof Z||n instanceof ze&&n.isElement())&&(this.registerRoot(n),this._simInjectSubComponent(t,e.unit,n)),n.hasErr()&&this._onUnitErr(t,n.getErr()),this._paused||n.play()}removeUnit(t,e=!0,n=!0,i=!0){let s=this.getUnit(t),a=s.getUnitBundleSpec();return this._removeUnit(t,n,i),e&&this.emit("remove_unit",t,a,s,[]),this._transacting&&this._transaction.push(yr(t,a)),s}cloneUnit(t,e){let n=this._cloneUnit(t,e);return this.emit("clone_unit",t,e,n,[]),n}_cloneUnit(t,e){let n=this.getUnit(t),[i,s]=y4(n,!0);return this._addUnit(e,i,s),this._paused||i.play(),i}_moveUnit(t,e,n){let i=this.getUnit(t),s=this._isUnitComponent(t);this._simRemoveUnit(t),this._memRemoveUnit(t),this._specRemoveUnit(t,s),this.getUnit(e).push(n,i)}moveUnit(t,e,n){this._moveUnit(t,e,n),this.emit("move_unit",t,e,n,[])}removeUnitFromMerge(t,e){this._removeUnitFromMerge(t,e),this.emit("remove_unit_from_merge",t,e,[])}_removeUnitFromMerges(t){this._simRemoveUnitFromMerges(t),this._memRemoveUnitFromMerges(t)}_memRemoveUnitFromMerges(t){let e=this._unitToMerge[t];for(let n of e)this._memRemoveUnitFromMerge(t,n)}_simRemoveUnitFromMerges(t){let e=this._unitToMerge[t];for(let n of e)this._simRemoveUnitFromMerge(t,n)}_removeUnitFromMerge(t,e){this._simRemoveUnitFromMerge(t,e),this._memRemoveUnitFromMerge(t,e)}_memRemoveUnitFromMerge(t,e){this._forEachUnitPinOnMerge(t,e,(n,i)=>{this._memRemovePinFromMerge(e,t,n,i)})}_simRemoveUnitFromMerge(t,e,n=!0){this._forEachUnitPinOnMerge(t,e,(i,s)=>{this._simRemovePinFromMerge(e,t,i,s,n)})}_specRemoveUnitFromMerge(t,e){this._forEachUnitPinOnMerge(t,e,(n,i)=>{this._specRemovePinFromMerge(e,t,n,i)})}_forEachUnitPinOnMerge(t,e,n){let s=this.getMergeSpec(e)[t];xe(s,(a,_)=>{n(a,_)})}_removeUnit(t,e=!0,n=!1){this._fork();let i=this.getUnit(t);this.emit("before_remove_unit",t,i,[]);let s=this._isUnitComponent(t);return this._simRemoveUnit(t,e),this._memRemoveUnit(t),this._specRemoveUnit(t,s),n&&i.destroy(),i}_specRemoveUnit(t,e){e&&(this._specRemoveSubComponentFromParent(t),this._specRemoveSubComponent(t)),this._specUnplugUnit(t),delete this._spec.units[t]}_memRemoveUnit(t,e=!0){let n=this.getUnit(t),i=this._unitUnlisten[t];i(),e&&this._memUnplugUnit(t),n.setParent(null),delete this._unitToMergeCount[t],delete this._unitToMerge[t],delete this._unitUnlisten[t],delete this._pinToMerge[t],delete this._unit[t]}_memUnplugUnit(t){var s;let e=B(this._unitToMerge[t]||new Set),n=B(this._unitToMergeCount[t]||{}),i=B((s=this._pinToPlug[t])!=null?s:{});xe(i,(a,_,{pinId:c,subPinId:p})=>{this._memUnplugPin(a,c,p)});for(let a of e){let _=n[a];this.getMergePinCount(a)-_<2?this._memRemoveMerge(a):this._memRemoveUnitFromMerge(t,a)}}_simAddMerge(t,e,n,i){Y(e,({input:s,output:a},_)=>{Y(s||{},(c,p)=>{this._simAddPinToMerge(t,_,"input",p,i)}),Y(a||{},(c,p)=>{this._simAddPinToMerge(t,_,"output",p,i)})})}_simAddPinToMerge(t,e,n,i,s=!0){let a=ii(e,n,i);this._simSetBranch(t,n,a,s)}_specAddPinToMerge(t,e,n,i){tt(this._spec,["merges",t,e,n,i],!0)}_memAddPinToMerge(t,e,n,i){n==="output"&&i===$t&&(this._mergeToSelfUnit[t]=e,this._selfUniToMerge[e]=t),this._mergePinCount[t]=this._mergePinCount[t]||0,this._mergePinCount[t]++,this._unitToMerge[e]=this._unitToMerge[e]||new Set,this._unitToMerge[e].add(t),this._unitToMergeCount[e]=this._unitToMergeCount[e]||{},this._unitToMergeCount[e][t]=this._unitToMergeCount[e][t]||0,this._unitToMergeCount[e][t]++,tt(this._pinToMerge,[e,n,i],t);let s=ii(e,n,i);this._memSetBranch(t,n,s)}_memRemoveMerge(t){this._memRemoveAllMergePlug(t),this._memRemoveAllMergePin(t),this._memRemoveAllMergeRef(t);let e=En(t,"input"),n=En(t,"output");delete this._pin[e],delete this._pin[n]}_specRemoveMerge(t){this._specRemoveAllMergePlug(t),this._specRemoveAllMergePin(t),this._specRemoveAllMergeRef(t)}_memRemoveAllMergePlug(t){this._forEachSpecPinPlug((e,n,i,s)=>{s.mergeId===t&&this._memUnplugPin(e,n,i)})}_specRemoveAllMergePlug(t){this._forEachSpecPinPlug((e,n,i,s)=>{s.mergeId===t&&this._specUnplugPin(e,n,i)})}_memRemoveAllMergeRef(t){let e=this._mergeToSelfUnit[t];e&&(delete this._mergeToSelfUnit[t],delete this._selfUniToMerge[e]),delete this._merge[t],delete this._mergePinCount[t]}_specRemoveAllMergeRef(t){delete this._spec.merges[t]}_memRemoveAllMergePin(t){let e=B(this._spec.merges[t]);Y(e,({input:n,output:i},s)=>{Y(n||{},(a,_)=>{this._memRemovePinFromMerge(t,s,"input",_)}),Y(i||{},(a,_)=>{this._memRemovePinFromMerge(t,s,"output",_)})})}_specRemoveAllMergePin(t){let e=B(this._spec.merges[t]);Y(e,({input:n,output:i},s)=>{Y(n||{},(a,_)=>{this._specRemovePinFromMerge(t,s,"input",_)}),Y(i||{},(a,_)=>{this._specRemovePinFromMerge(t,s,"output",_)})})}_memPostRemoveMerge(t){this._forEachSpecPinPlug((e,n,i,s)=>{s.mergeId===t&&this._memPlugEmptyPin(e,n,i)})}memIsUnitRefPin(t,e,n){return this.getUnit(t).hasRefPinNamed(e,n)}_getUnitSpec(t){let e=this.getGraphUnitSpec(t),{id:n}=e;return this.__system.getSpec(n)}getUnitSpecId(t){let e=this.getGraphUnitSpec(t),{id:n}=e;return n}getUnitSpec(t){let{getSpec:e}=this.__system,n=this.getGraphUnitSpec(t),{id:i}=n;return e(i)}isUnitRefPin(t,e,n){return this.getUnit(t).isPinRef(e,n)}isUnitRefInput(t,e){return this.getUnit(t).hasRefInputNamed(e)}removeMerge(t,e=!0,n=!0){let i=this.getMergeSpec(t),s=this._removeMerge(t,n);e&&this.emit("remove_merge",t,i,s,[]),this._transacting&&this._transaction.push(Ir(t,i))}_removeMerge(t,e){this._fork(),this._validateMergeId(t);let n=this.getMerge(t),i=this.getMergeSpec(t);return this.emit("before_remove_merge",t,i,n,[]),this._simRemoveMerge(t,e),this._memRemoveMerge(t),this._specRemoveMerge(t),this._memPostRemoveMerge(t),this._simPostRemoveMerge(t),n.destroy(),n}_simRemoveMerge(t,e){this._simRemoveAllPlugsFromMerge(t),this._simRemoveAllPinsFromMerge(t,e)}_simPostRemoveMerge(t){this._forEachSpecPinPlug((e,n,i,s)=>{s.mergeId===t&&this._simPlugEmptyPin(e,n,i)})}removePinFromMerge(t,e,n,i,s=!0,a=!0){this._removePinFromMerge(t,e,n,i,a),s&&this.emit("remove_pin_from_merge",t,e,n,i,[])}_removePinFromMerge(t,e,n,i,s=!0){this._validateMergeId(t),this._validateUnitId(e),this._simRemovePinFromMerge(t,e,n,i,s),this._memRemovePinFromMerge(t,e,n,i),this._specRemovePinFromMerge(t,e,n,i)}removePinOrMerge(t,e,n,i,s=!0,a=!0){this._mergePinCount[t]>2?this.removePinFromMerge(t,e,n,i,s,a):this.removeMerge(t,a,s)}_removePinOrMerge(t,e,n,i,s=!0){this._mergePinCount[t]>2?this._removePinFromMerge(t,e,n,i,s):this._removeMerge(t,s)}_memRemovePinFromMerge(t,e,n,i){var a,_,c,p,u,d;let s=ii(e,n,i);this._memRemoveBranch(t,n,s),n==="input"||i===$t&&(delete this._mergeToSelfUnit[t],delete this._selfUniToMerge[e]),this._mergePinCount[t]--,this._unitToMergeCount[e][t]--,this._unitToMergeCount[e][t]===0&&(delete this._unitToMergeCount[e][t],this._unitToMerge[e].delete(t)),(_=(a=this._pinToMerge[e])==null?void 0:a[n])==null||delete _[i],ie((p=(c=this._pinToMerge[e])==null?void 0:c[n])!=null?p:{})&&((u=this._pinToMerge[e])==null||delete u[n]),ie((d=this._pinToMerge[e])!=null?d:{})&&delete this._pinToMerge[e]}_specRemovePinFromMerge(t,e,n,i){delete this._spec.merges[t][e][n][i],ie(this._spec.merges[t][e][n])&&delete this._spec.merges[t][e][n],ie(this._spec.merges[t][e])&&delete this._spec.merges[t][e]}_simRemovePinFromMerge(t,e,n,i,s=!0){let a=ii(e,n,i);if(this._simRemoveBranch(t,n,a),s){if(n==="input")(this._mergeToSelfUnit[t]||this.isUnitRefInput(e,i))&&this._pin[a].take();else if(i===$t){let _=this._merge[t];Y(_.getOutputs(),(c,p)=>{_.takeOutput(p)})}}}isPinMergedTo(t,e,n,i){let s=this._spec.merges||{};return!!s[t]&&s[t][e]&&s[t][e][n]&&s[t][e][n][i]}setUnitPinSetId(t,e,n,i,s=!0){this.getUnit(t).setPinSetId(e,n,i),s&&this.emit("set_unit_pin_set_id",t,e,n,i,[])}setUnitPinConstant(t,e,n,i,s=!0){this._setUnitPinConstant(t,e,n,i);let a=this.getUnitPinData(t,e,n);s&&this.emit("set_unit_pin_constant",t,e,n,i,a,[])}_setUnitPinConstant(t,e,n,i){this._specSetUnitPinConstant(t,e,n,i),this.getUnit(t).setPinConstant(e,n,i)}_specSetUnitPinConstant(t,e,n,i){t_({unitId:t,type:e,pinId:n,constant:i},this._spec)}setUnitInputConstant(t,e,n){this.setUnitPinConstant(t,"input",e,n)}setUnitOutputConstant(t,e,n){this.setUnitPinConstant(t,"output",e,n)}setUnitInputIgnored(t,e,n){this.setUnitPinIgnored(t,"input",e,n)}setUnitOutputIgnored(t,e,n){this.setUnitPinIgnored(t,"output",e,n)}setUnitPinIgnored(t,e,n,i){this._setUnitPinIgnored(t,e,n,i),this.emit("set_unit_pin_ignored",t,e,n,i,[])}_setUnitPinIgnored(t,e,n,i){this._specSetUnitPinIgnored(t,e,n,i),this._simSetUnitPinIgnored(t,e,n,i)}_specSetUnitPinIgnored(t,e,n,i){tt(this._spec,["units",t,e,n,"ignored"],i)}_simSetUnitPinIgnored(t,e,n,i){var a;let s=this.getUnit(t);i&&(gi((a=this._spec.merges)!=null?a:{},(_,c,p,u)=>{c===t&&p===e&&u===n&&this._removePinFromMerge(_,t,e,n)}),Y(this._spec[`${e}s`]||{},({plug:_},c)=>{for(let p in _){let u=_[p];if(u.unitId===t&&u.pinId===n){this._unplugPin(e,c,p);break}}})),s.setPinIgnored(e,n,i)}setUnitId(t,e,n,i){this._setUnitId(t,e,n,i),this.emit("set_unit_id",t,e,n,i,[])}_setUnitId(t,e,n,i){let s=B(this.getUnitMergesSpec(t)),a=B(this.getUnitPlugsSpec(t)),_=G4(t,s,e),c=this.getUnit(t);c.fork(i,!1);let p=this._getUnitSpec(t);p.name=n,c._spec.name=n,this._specs[p.id]=p,this._removeUnit(t,!1),this._addUnit(e,c),this._addUnitMerges(_,!1),this._addUnitPlugs(e,a,!1)}_addUnitPlugs(t,e,n=!0){xe(e,(i,s,a)=>{this._plugPin(i,a.pinId,a.subPinId,{unitId:t,pinId:s},n)})}setPlugData(t,e,n,i,s=!0){this.getPlug(t,e,n).push(i)}setUnitPinData(t,e,n,i){this._settingUnitData=!0,this._setUnitPinData(t,e,n,i),this._settingUnitData=!1,this.emit("set_unit_pin_data",t,e,n,i,[])}_setUnitPinData(t,e,n,i){let s=this.getUnit(t);s.hasInputNamed(n)&&s.isPinConstant(e,n)&&this._fork(),this._specSetUnitPinData(t,e,n,i),this._simSetUnitPinData(t,e,n,i)}_specSetUnitPinData(t,e,n,i){let s=this.getUnit(t);s.hasInputNamed(n)&&s.isPinConstant(e,n)&&Mr({unitId:t,type:e,pinId:n,data:Ot(i)},this._spec)}_simSetUnitPinData(t,e,n,i){this.getUnit(t).setPinData(e,n,i)}setUnitInputData(t,e,n){this.getUnit(t).setPinData("input",e,n)}setUnitOutputData(t,e,n){this.getUnit(t).setPinData("output",e,n)}setMetadata(t,e){let n=this._spec,i=0;for(;i<t.length-1;){let a=t[i];n[a]||(n[a]={}),n=n[a],i++}let s=t[i];br(n[s])&&br(e)?n[s]=pn(n[s],e):n[s]=e,this.emit("metadata",{path:t,data:e},[])}getSubComponentsParentMap(t){let e={};for(let n of t){let i=this._getSubComponentParentId(n);e[n]=i}return e}getSubComponentsSlotMap(t){let e={};for(let n of t){let i=this._getSubComponentSlotName(n);e[n]=i}return e}moveSubComponentRoot(t,e,n,i=!0){let s=this.getSubComponentsParentMap(e),a=this.getSubComponentsParentMap(e);for(let _ of e){let c=n[_]||"default";this._moveSubComponentRoot(t,_,c)}i&&this.emit("move_sub_component_root",t,s,e,n,a,[])}_appendRoot(t){this._specAppendRoot(t)}removeRoot(t){this._removeRoot(t)}_removeRoot(t){this._simRemoveRoot(t),this._specRemoveRoot(t)}_specRemoveRoot(t){let e=this._spec.component.children.indexOf(t);if(e>-1)this._spec.component.children.splice(e,1);else throw new Error("root not found")}_simRemoveRoot(t){let e=this.getUnit(t);this.unregisterRoot(e)}moveSubgraphInto(...[t,e,n,i,s,a,_,c,p,u]){this._moveSubgraphInto(t,e,n,i,s,a,_,c,p,u),this.emit("move_subgraph_into",t,e,n,i,s,a,_,c,p,u,[])}_moveSubgraphInto(t,e,n,i,s,a,_,c,p,u){let d=this.getUnit(t);d.fork(n),d.startTransaction();let m=B(this.getUnitMergesSpec(t));Ds(this,d,t,{nodeIds:i,nextSpecId:null,nextIdMap:s,nextPinIdMap:a,nextMergePinId:_,nextPlugSpec:c,nextSubComponentParentMap:p,nextSubComponentChildrenMap:u,nextUnitPinMergeMap:{},nextSubComponentIndexMap:{}},{merges:m},!1),d.endTransaction()}getUnitMergesSpec(t){return ys(this._spec,t)}getPinMergeId(t,e,n){return nt(this._pinToMerge,[t,e,n],null)}getUnitPlugsSpec(t){return bs(this._spec,t)}startTransaction(){if(this._transacting)throw new Error("transaction already started");this._transacting=!0,this._transaction=[]}explodeUnit(t,e,n,i){this._explodeUnit(t,e,n,i),this.emit("explode_unit",t,e,n,[])}moveSubgraphOutOf(...[t,e,n,i,s,a,_,c,p,u]){this._moveSubgraphOutOf(t,e,n,i,s,a,_,c,p,u),this.emit("move_subgraph_out_of",t,e,n,i,s,a,_,c,p,u,[])}_moveSubgraphOutOf(...[t,e,n,i,s,a,_,c,p,u]){let d=this.getUnit(t),m=B(this.getUnitMergesSpec(t)),h=B(this.getUnitPlugsSpec(t)),f={nodeIds:i,nextSpecId:null,nextIdMap:s,nextPinIdMap:a,nextMergePinId:_,nextPlugSpec:c,nextSubComponentParentMap:p,nextSubComponentChildrenMap:u,nextSubComponentIndexMap:{},nextUnitPinMergeMap:{}},b={merges:m,plugs:h};d.startTransaction(),d.fork(),Ds(d,this,t,f,b,!0),d.endTransaction()}getGraphUnitBundleSpec(t){return this.getUnit(t).getBundleSpec()}_explodeUnit(t,e,n,i){this._fork();let s=this.getUnitSpec(t),a=Dg(t,s,e,n,i,{getMerge:g=>this.getMergeSpec(g),getUnitMerges:g=>this.getUnitMergesSpec(g),getUnitPlugs:g=>this.getUnitPlugsSpec(g),getPinMergeId:(g,v,x)=>this.getPinMergeId(g,v,x)}),{nodeIds:_,nextSpecId:c,nextIdMap:p,nextPinIdMap:u,nextMergePinId:d,nextPlugSpec:m,nextSubComponentParentMap:h,nextSubComponentChildrenMap:f}=a,b=this.getGraphUnitBundleSpec(t);this._moveSubgraphOutOf(t,b,c,_,p,u,d,m,h,f),this._removeUnit(t)}_removeSubComponentFromParent(t){this._simRemoveSubComponentFromParent(t),this._specRemoveSubComponentFromParent(t)}reorderSubComponent(t,e,n,i=!0){this._reorderSubComponent(t,e,n),i&&this.emit("reorder_sub_component",t,e,n,[])}_reorderSubComponent(t,e,n){this._simReorderSubComponent(t,e,n),this._specReorderSubComponent(t,e,n)}_simReorderSubComponent(t,e,n){let i=this.getUnit(e);t?this.getUnit(t).reorderParentRoot(i,n):this.reorderRoot(i,n)}_specReorderSubComponent(t,e,n){let i=this.getUnit(e);t?(Hn(this._spec.component.subComponents[t].children,e),Ue(this._spec.component.subComponents[t].children,e,n)):(Hn(this._spec.component.children,e),Ue(this._spec.component.children,e,n))}moveRoot(t,e,n){this._moveSubComponentRoot(t,e,n)}_moveSubComponentRoot(t,e,n){this._removeSubComponentFromParent(e),t?this._appendSubComponentChild(t,e,n):this._appendRoot(e)}_initSetComponent(t){let{slots:e=[],subComponents:n={},children:i=[]}=t;for(let s in n){let a=n[s];this._initAddSubComponent(s,a)}for(let s=0;s<e.length;s++){let a=e[s],[_,c]=a,p=this.getUnit(_),u=s===0?"default":`${s}`;this._slot[u]=p}}_specSetComponent(t){let{slots:e=[],subComponents:n={},children:i=[]}=t;for(let s in n){let a=n[s];this._specAddSubComponent(s,a)}for(let s=0;s<e.length;s++){let a=e[s],[_,c]=a,p=this.getUnit(_),u=s===0?"default":`${s}`;this._slot[u]=p}e.length>0&&(this._spec.component.slots=e)}_initAddSubComponent(t,e){let{children:n=[],childSlot:i={}}=e;for(let s of n){let a=i[s]||"default";this._simSubComponentAppendChild(t,s,a)}}_specAddSubComponent(t,e){var s;let{children:n=[],childSlot:i={}}=e;for(let a of n){this._specComponentRemoveChild(a);let _=i[a]||"default";this._specSubComponentAppendChild(t,a,_)}this._spec.component.subComponents[t]=e,this._spec.component.children=(s=this._spec.component.children)!=null?s:[],this._spec.component.children.push(t)}appendParentChild(t,e){return Bf(this,this._parent_children,t,e)}removeParentChild(t){return Hf(this,this._parent_children,t)}registerRoot(t){return Ff(this,this._root,t)}unregisterRoot(t){return zf(this,this._root,t)}registerParentRoot(t,e){return Uf(this,this._parent_root,t,e)}unregisterParentRoot(t){return Gf(this,this._parent_root,t)}reorderRoot(t,e){Rf(this,this._root,t,e)}reorderParentRoot(t,e){Nf(this,this._parent_root,t,e)}insertChild(t,e){return a4(this,this._children,t,e)}appendChild(t){return Mf(this,this._children,t)}pushChild(t){return Ua(this,this._children,t)}pullChild(t){throw Ra(this,this._children,t)}hasChild(t){return Ga(this,this._children,t)}removeChild(t){return Of(this,this._children,t)}refChild(t){return $f(this,this._children,t)}refChildren(){return Lf(this,this._children)}refSlot(t){return _4(this,t,this._slot)}bulkEdit(t){this._bulkEdit(t),this.emit("bulk_edit",t,!1,[])}_bulkEdit(t){for(let e of t)P1(e,{addUnitSpec:n=>{let{unitId:i,bundle:s,parentId:a,merges:_,plugs:c}=n;this._addUnitSpec(i,s),a&&this._appendSubComponentChild(a,i,"default"),_&&this._addUnitMerges(_,!0),c&&this._addUnitPlugs(i,c)},removeUnit:n=>{let{unitId:i}=n;this._removeUnit(i,!1,!0)},exposePinSet:n=>{let{type:i,pinId:s,pinSpec:a}=n;this._exposePinSet(i,s,a)},exposePin:n=>{let{type:i,pinId:s,subPinId:a,subPinSpec:_}=n;this._exposePin(i,s,a,_)},coverPin:n=>{let{type:i,pinId:s,subPinId:a}=n;this._coverPin(i,s,a)},coverPinSet:n=>{let{type:i,pinId:s}=n;this._coverPinSet(i,s)},plugPin:n=>{let{type:i,pinId:s,subPinId:a,subPinSpec:_}=n;this._plugPin(i,s,a,_)},unplugPin:n=>{let{type:i,pinId:s,subPinId:a}=n;this._unplugPin(i,s,a)},addUnitSpecs:n=>{let{units:i}=n;this._addUnitSpecs(i)},removeMerge:n=>{let{mergeId:i}=n;this._removeMerge(i,!0)},removePinFromMerge:n=>{let{mergeId:i,unitId:s,type:a,pinId:_}=n;this._removePinFromMerge(i,s,a,_)},removeUnitGhost:n=>{let{unitId:i,nextUnitId:s,nextUnitSpec:a}=n;this._removeUnitGhost(i,s,a)},addUnitGhost:n=>{let{unitId:i,nextUnitId:s,nextUnitBundle:a,nextUnitPinMap:_}=n;this._addUnitGhost(i,s,a,_)},addMerges:n=>{let{merges:i}=n;this._addMerges(i)},addMerge:n=>{let{mergeId:i,mergeSpec:s}=n;this._addMerge(s,i)},addPinToMerge:n=>{let{mergeId:i,unitId:s,type:a,pinId:_}=n;this._addPinToMerge(i,s,a,_)},takeUnitErr:n=>{let{unitId:i}=n;this.takeUnitErr(i)},setPinSetId:n=>{let{type:i,pinId:s,nextPinId:a}=n;this._setPinSetId(i,s,a)},setPinSetFunctional:n=>{let{type:i,pinId:s,functional:a}=n;this._setPinSetFunctional(i,s,a)},setUnitPinConstant:n=>{let{unitId:i,type:s,pinId:a,constant:_}=n;this._setUnitPinConstant(i,s,a,_)},setUnitPinIgnored:n=>{let{unitId:i,type:s,pinId:a,ignored:_}=n;this._setUnitPinIgnored(i,s,a,_)},setUnitPinData:n=>{let{unitId:i,type:s,pinId:a,data:_}=n;this._setUnitPinData(i,s,a,_)},setUnitId:n=>{let{unitId:i,newUnitId:s,name:a,specId:_}=n;this._setUnitId(i,s,a,_)},removeUnitPinData:n=>{let{unitId:i,type:s,pinId:a}=n;this._removeUnitPinData(i,s,a)},removeMergeData:n=>{let{mergeId:i}=n;this._removeMergeData(i)},moveSubComponentRoot:n=>{let{parentId:i,children:s,slotMap:a}=n;for(let _ of s){let c=a[_]||"default";this._moveSubComponentRoot(i,_,c)}},moveUnit:n=>{let{}=n},moveSubgraphInto:n=>{let{graphId:i,graphBundle:s,nextSpecId:a,nodeIds:_,nextIdMap:c,nextPinIdMap:p,nextMergePinId:u,nextPlugSpec:d,nextSubComponentParentMap:m,nextSubComponentChildrenMap:h}=n;this._moveSubgraphInto(i,s,a,_,c,p,u,d,m,h)},moveSubgraphOutOf:n=>{let{graphId:i,graphBundle:s,nextSpecId:a,nodeIds:_,nextIdMap:c,nextPinIdMap:p,nextMergePinId:u,nextPlugSpec:d,nextSubComponentParentMap:m,nextSubComponentChildrenMap:h}=n;this._moveSubgraphOutOf(i,s,a,_,c,p,u,d,m,h)},reorderSubComponent:n=>{let{parentId:i,childId:s,to:a}=n;this._reorderSubComponent(i,s,a)},removePinData:n=>{let{type:i,pinId:s}=n;this.removePinData(i,s)},takeInput:n=>{let{pinId:i}=n;this.removePinData("input",i)},setUnitSize:n=>{let{unitId:i,width:s,height:a}=n;this._setUnitSize(i,s,a)},setSubComponentSize:n=>{let{unitId:i,width:s,height:a}=n;this._setSubComponentSize(i,s,a)},setComponentSize:n=>{let{width:i,height:s}=n;this._setComponentSize(i,s)},bulkEdit:n=>{let{actions:i}=n;this.bulkEdit(i)}},()=>{throw new ei})}_setUnitSize(t,e,n){this._specSetUnitSize(t,e,n)}_specSetUnitSize(t,e,n){Ag({unitId:t,width:e,height:n},this._spec)}_setSubComponentSize(t,e,n){this._specSetSubComponentSize(t,e,n)}_specSetSubComponentSize(t,e,n){e_({unitId:t,width:e,height:n},this._spec)}_setComponentSize(t,e){this._specSetComponentSize(t,e)}_specSetComponentSize(t,e){Mg({width:t,height:e},this._spec)}detach(){throw new $}};function q1(r,o,t={},e={}){var i;t[r.id]=r;let{units:n}=r;for(let s in n){let a=n[s],{id:_,input:c}=a;for(let d in c){let m=(i=c[d])!=null?i:{},{data:h}=m;if(h){let f=pt(h);if(f.type==="unit"){let b=f.value.substring(1),g=Zt(b,o,e);for(let v in g.specs){let x=g.specs[v];t[v]=x}for(let v in g.specs){let x=g.specs[v];q1(x,Wt(o,t),t)}}}}let p=o[_];if(!p)return;let{system:u}=p;u||t[_]||(t[_]=p,q1(t[_],o,t))}return t}function Ui(r,o,t={}){var a;let e=Y1(r,o,t),{id:n}=r;if(!n)throw new Error("spec id is required");let i=q1(r,o,B((a=r.specs)!=null?a:{}));return ti(e,{unit:{id:n},specs:i})}function Y1(r,o,t={}){let{name:e,units:n}=r;for(let s in n){let h=function(f,b){let{ignored:g}=f;if(g===void 0){let{defaultIgnored:v}=b;v===!0&&(f.ignored=!0)}};var i=h;let a=n[s];a.input=a.input||{},a.output=a.output||{};let{id:_,input:c,output:p}=a,u=o[_],{inputs:d,outputs:m}=u;for(let f in d){let b=d[f];c[f]=c[f]||{};let g=c[f];h(g,b)}for(let f in m){let b=m[f];p[f]=p[f]||{};let g=p[f];h(g,b)}}return UP(r,t)}function UP(r,o={}){let{id:t,name:e}=r;if(!t)throw new Error("");class n extends ze{constructor(s){super(r,o,s,t)}}return Object.defineProperty(n,"name",{value:e}),n}function Vn(r,o,t,e={}){let n=o[r];if(!n)throw new Cf;let i=t[r];return i===void 0&&(n=n,e[r]?i=o4(n,o,e,Ui):i=Y1(n,o,_t(S({},e),{[r]:!0}))),ti(i,{unit:{id:r}})}function yg(r,o,t){let{unit:e,specs:n}=r,{id:i}=e,s=Vn(i,Wt(n,o),t,{});return ti(s,r)}function Gg(r,o,t,e=()=>{throw new Error("cannot resolve")}){let{value:n,children:i}=r;switch(r.type){case"identifier":return n;case"null":return null;case"string literal":return n.substring(1,n.length-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\");case"boolean literal":return n==="true";case"number literal":return Number.parseFloat(n);case"array literal":{let s=[];for(let a of i)a.type!=="invalid"&&s.push(Gg(a,o,t,e));return s}case"object literal":{let s={};for(let a of i)if(a.type==="key value"){let[_,c]=a.children;s[Gg(_,o,t)]=Gg(c,o,t,e)}else Gi(a)&&(s[a.value]=a.value);return s}case"unit":{let s=n.substring(1),a=Zt(s,o,t);return yg(a,o,t)}case"url":return e(n);default:throw new Error("invalid data string")}}function Zt(r,o,t,e=()=>{throw new Error("cannot resolve")}){let n=pt(r,!1,!1);return Gg(n,o,t,e)}function Ri(r,o,t){let e=r.substring(1);return Zt(e,o,t)}function Ni(r,o,t){let e=r.substring(1),n=Zt(e,o,t),{unit:i}=n,{id:s}=i;return s}l();var R4={U:["EE"],G:["U"],C:["U"],V:["EE"],CH:["EE"],IB:["I"],W:["EE","CH"],B:["IM"]},GP={B:!0,IB:!0,CA:!0,CC:!0,C:!0,CS:!0,CO:!0,G:!0,GP:!0,M:!0,E:!0,EE:!0,BD:!0,BS:!0,BSE:!0,BC:!0,NO:!0,J:!0,A:!0,PP:!0,PS:!0,CH:!0,MS:!0,S:!0,U:!0,V:!0,TR:!0,RE:!0,F:!0,L:!0,AC:!0,D:!0},lN=Object.keys(GP);l();function bi(r){return r.replace(/\s/g,"")}l();var X1=/^(true|false)$/;l();var J1=/^(?:[$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D])(?:[$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF])*(\?)?$/;l();var Z1=/^-?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?$/,Q1=/-?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?/;l();var ty=/^(['"])(?:(?!(?:\\|\1|\\\1))[^]|\\.|\\\\.)*\1$/;var RP=",",NP='"',zP="'",B4="{",H4="}",j4="[",V4="]";function N4(r){return r.substring(1,r.length-1)}function ny(r,o,t=[]){o(r,t),r.children.forEach((e,n)=>ny(e,o,[...t,n]))}function Lr(r){return["or","and","array expression","expression","object literal","array literal","key value","class"].indexOf(r)>-1}function Ur(r){return r.type==="generic"||Lr(r.type)&&r.children.some(Ur)}function Ng(r){let o={};for(let t of r.children)if(t.type==="key value"){let e=t.children[0],n,{value:i,type:s}=e;s==="identifier"?n=i:n=i.substr(1,i.length-2),o[n]=t.children[1]}else o[t.value]=t.value;return o}function K4(r){return!!FP[r]}var FP={["number literal"]:"number",["string literal"]:"string",["boolean literal"]:"boolean",["regex literal"]:"regex",["date literal"]:"date"};var Fg=(r,o)=>{if(r===o)return!0;let t=R4[r];return t?t.some(e=>Fg(e,o)):!1};function se(r,o,t){var e;if(o.type==="invalid"||o.type==="identifier")return!1;if(o.type==="any"||o.type==="generic")return!0;if(o.type==="or")return!o.children.some(n=>!se(r,n,t));if(o.type==="and")return t.type==="and"?t.children.every(n=>o.children.some(i=>se(r,i,n))):o.children.some(n=>se(r,n,t));if(o.type==="expression")return se(r,o.children[0],t);switch(t.type){case"invalid":return!1;case"identifier":return!1;case"any":return!0;case"generic":return!0;case"string":return o.type==="string"||o.type==="string literal";case"number":return o.type==="number"||o.type==="number literal";case"boolean":return o.type==="boolean"||o.type==="boolean literal";case"object":return o.type==="object"||o.type==="object literal"&&iy(o);case"regex":return o.type==="regex"||o.type==="regex literal";case"class":if(o.type==="class"){let n=o.value.slice(1,-1),i=t.value.slice(1,-1);return Fg(n,i)}else if(o.type==="unit"){let n=Ri(o.value,r,{}),i=n.unit.id,a=Wt(r,(e=n.specs)!=null?e:{})[i],{type:_="`U`&`C`&`G`"}=a,c=pt(_);return se(r,c,t)}else return!1;case"null":return o.type==="null";case"unit":return o.type==="unit";case"arithmetic expression":return o.type==="arithmetic expression";case"boolean literal":case"number literal":case"string literal":return o.type===t.type&&o.value.substr(1,o.value.length-2)===t.value.substr(1,t.value.length-2);case"object literal":if(o.type==="object")return!0;if(o.type==="object literal"){let n=Ng(o),i=Ng(t);for(let s in i){let a=n[s],_=i[s];if(s.endsWith("?")){if(a!==void 0&&!se(r,a,_))return!1}else if(a===void 0||!se(r,a,_))return!1}return!0}else return!1;case"array literal":if(o.type!=="array literal")return!1;for(let n=0;n<t.children.length;n++){let i=t.children[n],s=o.children[n];if(!s||!se(r,s,i))return!1}return!0;case"or":return t.children.some(n=>se(r,o,n));case"and":return!t.children.some(n=>!se(r,o,n));case"expression":return se(r,o,t.children[0]);case"array expression":return o.type==="array expression"&&se(r,o.children[0],t.children[0])||o.type==="array literal"&&(o.children.length===0||!o.children.some(n=>!se(r,n,t.children[0])));case"object expression":return o.type==="object expression"&&se(r,o.children[0],t.children[0])||o.type==="object literal"&&(o.children.length===0||!o.children.some(n=>!se(r,n.children[1],t.children[0])))}return!1}function Bg(r,o,t){let e=pt(o),n=pt(t);return se(r,e,n)}function iy(r){return Rg(r)||No(r)}function No(r){switch(r.type){case"invalid":case"generic":case"identifier":case"string":case"number":case"boolean":case"object":case"or":case"and":case"array expression":case"object expression":case"expression":case"key value":return!1;case"null":case"unit":case"string literal":case"boolean literal":case"number literal":case"regex literal":case"date literal":case"class literal":case"arithmetic expression":return!0;case"object literal":return!r.children.some((o,t)=>{if(o.type==="key value"){let{children:[e,n]}=o;return!e||e.value===""||!Gi(e)||n.value!==""&&!No(n)}else{if(Gi(o))return!1;if(o.value===""&&t===r.children.length-1)return!1}return!0});case"array literal":return!r.children.some((o,t)=>!No(o)&&(o.value!==""||t!==r.children.length-1));default:return!1}}function Rg(r){switch(r.type){case"invalid":case"identifier":case"key value":return!1;case"generic":case"string":case"number":case"regex":case"date":case"boolean":case"object":case"null":case"class":case"any":case"unit":case"string literal":case"boolean literal":case"number literal":case"regex literal":case"date literal":case"class literal":case"arithmetic expression":return!0;case"array expression":case"object expression":case"prop expression":case"expression":case"or":case"and":return!r.children.some(o=>!Rg(o));case"object literal":return!r.children.some((o,t)=>{if(o.type==="key value"){let{children:[e,n]}=o;return e.value===""?!0:(!e||!Gi(e)||!n||!Rg(n))&&(o.value!==""||t!==r.children.length-1)}else if(Gi(o)||o.value===""&&t===r.children.length-1)return!1;return!0});case"array literal":return!r.children.some((o,t)=>!Rg(o)&&(o.value!==""||t!==r.children.length-1));default:return!1}}function Gi(r){return r.type==="generic"||r.type==="identifier"||r.type==="string literal"||r.type==="boolean literal"||r.type==="number literal"}function W4(r){let o=pt(r);return Gi(o)}function BP(r){return X1.test(r)}function HP(r){return Z1.test(r)}function jP(r){return ty.test(r)}function VP(r){return J1.test(r)}function q4(r){return BP(r)||HP(r)||jP(r)||VP(r)}function pt(r,o=!1,t=!1){return zg(r,o,t,pt)||KP(r,o,t)||{value:r,type:"invalid",children:[]}}function KP(r,o=!1,t=!1){if(!t&&/^\((.*)\)=>\((.*)\)$/.exec(r))return{value:r,type:"class literal",children:[]};let e=/^\((.+)\)$/.exec(r);if(e){let u=[pt(e[1])];return{value:r,type:"expression",children:u}}if(/^<[^]*>$/.exec(r))return{value:r,type:"generic",children:[]};if(!t){if(/^regex$/.exec(r))return Q4;if(/^string$/.exec(r))return jg;if(/^number$/.exec(r))return Z4;if(/^boolean$/.exec(r))return J4;if(/^object$/.exec(r))return YP;if(/^any$/.exec(r))return ri}let i=/^([^ [\]]+)(\[[^ [\]]+\]+)$/.exec(r);if(i){let u=pt(i[1]),d=pt(i[2]);return{value:r,type:"prop expression",children:[u,d]}}let s=/^([^ ]+)\[\]$/.exec(r);if(s){let u=pt(s[1]);if(u.type!=="invalid")return{value:r,type:"array expression",children:[u]}}let a=/^([^|{}]+)\{\}$/.exec(r);if(a){let u=[pt(a[1])];return{value:r,type:"object expression",children:u}}if(/^.+(\|.+)+$/.exec(r)){let u=ey(r,!1,!1,"|",pt);return{value:r,type:"or",children:u}}if(/^(.+)&(.+)$/.exec(r)){let u=ey(r,!1,!1,"&",pt);return{value:r,type:"and",children:u}}let p=/^`([A-Z]+)(.*)?`$/i.exec(r);if(p){let u=p[2];return{value:r,type:"class",children:u?[pt(u)]:[]}}}function Y4(r,o=!1,t=!1,e=zg){return zg(r,o,t,e)||{value:r,type:"invalid",children:[]}}function X4(r,o,t){let e=r.length;if(r[0]===o&&r[e-1]===t){let n=!1,i=!1,s=0;for(let a=1;a<e-1;a++){let _=r[a],c=r[a-1];if(_==="'"&&c!=="\\")i||(n=!n);else if(_==='"'&&c!=="\\")n||(i=!i);else if(!n&&!i){if(_===o)s++;else if(_===t&&(s--,s===-1))return null}}return s>0?null:[r,r.substr(1,e-2)]}else return null}function WP(r){return X4(r,B4,H4)}function qP(r){return X4(r,j4,V4)}function zg(r,o=!1,t=!1,e=zg){if(!t){if(/^null$/.exec(r))return Hg;if(/^[+-]?Infinity$/.exec(r))return{value:r,type:"number literal",children:[]}}if(X1.exec(r))return{value:r,type:"boolean literal",children:[]};if(ty.exec(r))return{value:r,type:"string literal",children:[]};if(Z1.exec(r))return{value:r,type:"number literal",children:[]};if(/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?(?:[\s]*[+\-*/][\s]*-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)+$/g.exec(r))return{value:r,type:"arithmetic expression",children:[]};if(new RegExp("^\\$\\{(.*)\\}$","is").exec(r))return{value:r,type:"unit",children:[]};if(/^\/.+\/$/.exec(r))return{value:r,type:"regex literal",children:[]};if(t&&J1.test(r))return{value:r,type:"identifier",children:[]};if(o){let m=/^("[^"]*"|'[^']*'|[^:{]*):([^]*)$/.exec(r);if(m){let h=e(m[1],!1,!0);Gi(h)||(h={value:h.value,type:"invalid",children:[]});let f=m[2],b=e(f)||{value:f,type:"invalid",children:[]};return{value:r,type:"key value",children:[h,b]}}else return{value:r,type:"invalid",children:[]}}let p=WP(r);if(p){let m=p[1],h=F4(m,!0,!0,e);return{value:r,type:"object literal",children:h}}let u=qP(r);if(u){let m=u[1],h=F4(m,!1,!1,e);return{value:r,type:"array literal",children:h}}if(/^unit:\/\/.+$/i.exec(r))return{value:r,type:"url",children:[]}}function Go(r,o,t){var n,i;let e={};switch(t.type){case"generic":{let s=yi(r,o),a=Ro(s);return{[t.value]:a}}case"identifier":case"string literal":case"boolean literal":case"number literal":case"object":case"string":case"number":case"boolean":case"any":case"arithmetic expression":break;case"array literal":case"object literal":{let s=Ng(t),a=Ng(o);for(let _ in s){let c=_.endsWith("?")?_.slice(0,-1):_,p=Go(r,(n=a[c])!=null?n:a[_],(i=s[c])!=null?i:s[_]);for(let u in p){let d=p[u];if(!e[u])e[u]=d;else if(e[u]!==d)throw`Found two possible types for generic ${u}: ${e[u]} and ${d}`}}break}case"or":case"and":for(let s of t.children)Ur(s)&&(e=S(S({},e),Go(r,o,s)));break;case"array expression":case"object expression":return Go(r,o.children[0]||ri,t.children[0]);case"expression":break;case"key value":return Go(r,o.children[1],t.children[1]);case"class":if(o.type==="class"||o.type==="class literal"){let s=o.children[0],a=s?pt(s.value.substring(1,s.value.length-1)):ri;return Go(r,a,t.children[0]||ri)}else break}return e}var Hg={value:"null",type:"null",children:[]},jg={value:"string",type:"string",children:[]},J4={value:"boolean",type:"boolean",children:[]},Z4={value:"number",type:"number",children:[]},ri={value:"any",type:"any",children:[]},Q4={value:"regex",type:"regex",children:[]},YP={value:"object",type:"object",children:[]};function z4(r){return J(r).map(o=>{let{type:t}=r[o];return`${bi(o)}:${t}`}).join(",")}function yi(r,o){let t=[];switch(o.type){case"invalid":case"null":case"identifier":return o;case"string literal":return jg;case"boolean literal":return J4;case"number literal":return Z4;case"regex literal":return Q4;case"class literal":{let e=r[o.value];return{value:`(${z4(e.inputs)})=>(${z4(e.outputs)})`,type:"class literal",children:[]}}case"array literal":{let e=o.children.length>0?yi(r,o.children[0]):pt("<T>");return{value:`${e.value}[]`,type:"array expression",children:[e]}}case"object literal":return t=o.children.map(e=>yi(r,e)),{value:`{${t.map(e=>e.value).join(",")}}`,type:"object literal",children:t};case"key value":{let e=o.children[0],n=yi(r,o.children[1]);return t=[e,n],{value:`${e.value}:${n.value}`,type:"key value",children:t}}case"unit":{let{value:e}=o,n=Ri(e,r,{}),i=Ni(e,r,{}),s=r[i]||n.specs[i];if(!s)throw new Error("Spec not found: "+i);let{type:a="`U`&`C`&`G`"}=s;return pt(a)}default:return o}}function Ro(r){switch(r.type){case"invalid":case"null":case"generic":case"identifier":case"string literal":case"boolean literal":case"number literal":case"object":case"string":case"number":case"any":case"boolean":return r.value;case"array literal":return`[${r.children.map(Ro).join(",")}]`;case"object literal":return`{${r.children.map(Ro).join(",")}}`;case"or":case"and":return r.value;case"array expression":return`${r.children[0].value}[]`;case"object expression":return`${r.children[0].value}{}`;case"expression":return"";case"key value":return`${Ro(r.children[0])}${!!r.children[1]&&`:${Ro(r.children[1])}`||""}`;default:return r.value}}function tx(r){let o=pt(r);return zi(o)}function zi(r){return r.type==="generic"?new Set([r.value]):r.children.reduce((o,t)=>new Set([...o,...zi(t)]),new Set([]))}function ex(r,o,t){let e=pt(o),n=pt(t);return Go(r,e,n)}function vi(r,o){switch(r.type){case"generic":{let t=o[r.value];if(t){let e=pt(t);return{value:t,type:e.type,children:e.children}}else return r}case"invalid":case"identifier":case"string literal":case"boolean literal":case"number literal":case"null":case"object":case"any":case"string":case"unit":case"number":case"boolean":return r;case"object literal":case"array literal":case"or":case"and":case"array expression":case"object expression":case"expression":case"key value":case"class literal":case"prop expression":{let t=r.children.map(n=>vi(n,o)),e=r.children.reduce((n,i,s)=>n.replace(i.value,t[s].value),r.value);return _t(S({},r),{value:e,children:t})}case"class":{let t=r.children.map(n=>vi(n,o)),e=r.children.reduce((n,i,s)=>{let a=t[s];return n.replace(N4(i.value),a.type==="generic"?N4(a.value):a.value)},r.value);return _t(S({},r),{value:e,children:t})}default:throw new $}}function Vg(r,o){let t=pt(r),e=vi(t,o),{value:n}=e;return n}function XP(r){return!!/^ *$/.exec(r)}function ey(r,o=!1,t=!1,e,n){let i=0,s=0,a=!1,_=!1,c=0,p=0,u=!1,d=[],m;for(;c<r.length;){let f=r[c];if(!_&&!a&&(f===B4?i++:f===H4&&i--,f===j4?s++:f===V4&&s--),a||f===NP&&m!=="\\"&&(_=!_),_||f===zP&&m!=="\\"&&(a=!a),f===e&&i===0&&s===0&&!a&&!_){let b=r.substring(p,c);d.push(n(b,o,t)),p=c+1,u=!0}m=f,c++}let h=r.substring(p,r.length);return(!XP(h)||u)&&d.push(n(h,o,t)),d}function F4(r,o=!1,t=!1,e){return ey(r,o,t,RP,e)}function re(r,o){let t=r;for(let e of o)if(t)t=t.children[e];else return null;return t}function JP(r){let o=[];return ny(r,(t,e)=>{o.push(e)}),o}function ZP(r){let o=[];return ny(r,(t,e)=>{o.push({node:t,path:e})}),o}function nx(r,o){if(r.length!==o.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==o[t])return!1;return!0}function ix(r,o,t){let e=JP(r);for(let n=0;n<e.length;n++){let i=e[n];if(nx(o,i))return e[n+t]}return null}function _o(r,o,t){let e=ZP(r);for(let n=0;n<e.length;n++){let{path:i}=e[n];if(nx(o,i))for(let s=n+t;s>=0&&s<e.length;s=s+t){let{node:a,path:_}=e[s];if(a.children.length===0)return _}}return null}function ox(r,o,t){return _o(r,o,t)}function We(r){return r.length===0?null:r.slice(0,r.length-1)}function sx(r){let o=r;for(;o.children.length>0;)o=o.children[o.children.length-1];return o}function Kg(r){let o=[],t=r,e=t.children.length;for(;e>0;){let n=e-1;o.push(n),t=t.children[n],e=t.children.length}return o}function Wg(r,o){let t=We(o);return t?re(r,t):null}function xi(r,o,t){if(o.length===0)return t;r=B(r);let e=We(o),n=re(r,e),i=o[o.length-1];n.children.splice(i,0,t);let s=0,a=r;do a.value=Ro(a),a=a.children[o[s]],s++;while(s<o.length-1);return pt(r.value)}function Fe(r,o,t){if(o.length===0)return t;r=B(r);let e=We(o),n=re(r,e),i=o[o.length-1];n.children[i]=t;let s=0,a=r;do a.value=Ro(a),a=a.children[o[s]],s++;while(s<o.length-1);return pt(r.value)}var QP=pt("");function ai(r,o){if(o.length===0)return QP;let t=We(o),e=re(r,t),n=o[o.length-1],i=B(e);return i.children.splice(n,1),Fe(r,t,pt(Ro(i)))}function s_(r,o,t){return Kv(o,t,(e,n)=>se(r,e,n))}function Ot(r){switch(typeof r){case"string":return`"${ds(r)}"`;case"number":case"boolean":return`${r}`;case"object":return r===null?"null":Array.isArray(r)?`[${r.map(Ot).join(",")}]`:r.constructor.name==="Object"?`{${Object.entries(r).filter(([t,e])=>e!==void 0).map(([t,e])=>`${q4(t)?t:`"${t}"`}:${Ot(e)}`).join(",")}}`:Ef(r.__global_id);case"function":return r.__bundle?`$${Ot(r.__bundle)}`:"null";default:throw new Error("cannot stringify value")}}var rx=(r,o)=>r.reduce((t,e)=>{var n;return _t(S({},t),{[e]:new $n((n=o[e])!=null?n:{})})},{}),ks={ref:!1},cn=class extends ht{constructor({i:t=[],o:e=[]},n={},i,s){var u,d;super(i);this.__=["U"];this._parent=null;this._input={};this._output={};this._data_input={};this._data_output={};this._ref_input={};this._ref_output={};this._i_opt={};this._o_opt={};this._i_name_set=new Set;this._o_name_set=new Set;this._d_i_name=new Set;this._d_o_name=new Set;this._r_i_name=new Set;this._r_o_name=new Set;this._o_count=0;this._i_count=0;this._d_i_count=0;this._d_o_count=0;this._r_i_count=0;this._r_o_count=0;this._err=null;this.ref=null;this._paused=!0;this._memRemoveDataInput=t=>{this._d_i_count--,this._d_i_name.delete(t),delete this._data_input[t]};this._memRemoveRefInput=t=>{this._r_i_count--,this._r_i_name.delete(t),delete this._ref_input[t]};this._memAddRefOutput=(t,e)=>{this._r_o_count++,this._r_o_name.add(t),this._memSetRefOutput(t,e)};this._memSetRefOutput=(t,e)=>{this._ref_output[t]=e};this._memAddDataOutput=(t,e)=>{this._d_o_count++,this._d_o_name.add(t),this._memSetDataOutput(t,e)};this._memSetDataOutput=(t,e)=>{this._data_output[t]=e};this._memRemoveRefPin=(t,e)=>{t==="input"?this._memRemoveRefInput(e):this._memRemoveRefOutput(e)};this._memRemoveRefOutput=t=>{this._r_o_count--,this._r_o_name.delete(t),delete this._ref_output[t]};this._memRemoveDataOutput=t=>{this._d_o_count--,this._d_o_name.delete(t),delete this._data_output[t]};this._catcherCallback=[];this._catcherDoneCount=0;this._catcherDone=[];this._catchErr=!1;this._caughtErr=null;let{input:a,output:_}=n,c=rx(t,(u=n.input)!=null?u:{}),p=rx(e,(d=n.output)!=null?d:{});this.setInputs(c,a),this.setOutputs(p,_),this._selfInput=new $n({data:this,constant:!1,ref:!0}),this._selfOutput=new $n({data:this,constant:!1,ref:!0}),this._selfOutput.addListener("drop",()=>{throw new Error("self output cannot be dropped")}),this.id=s,i.registerUnit(s)}isPinIgnored(t,e){return this.getPin(t,e).ignored()}isPinConstant(t,e){return this.getPin(t,e).constant()}isPinRef(t,e){let n=t==="input";return!n&&e===$t?!0:n&&!!this._ref_input[e]||!n&&!!this._ref_output[e]}setParent(t){this._parent=t,this.emit("parent",this._parent)}setPinIgnored(t,e,n){t==="input"?this.setInputIgnored(e,n):this.setOutputIgnored(e,n)}setPinConstant(t,e,n){this.getPin(t,e).constant(n),this.emit("set_pin_constant",t,e,n)}_memSetPinOptData(t,e){t==="input"?this._memSetInputData(e):this._memSetOutputData(e)}_memSetInputData(t){let e=this._input[t];this._memRemoveRefInput(t),this._memAddDataInput(t,e)}_memSetOutputData(t){let e=this._output[t];this._memRemoveRefOutput(t),this._memAddDataOutput(t,e)}_memSetPinRef(t,e){t==="input"?this._memSetInputRef(e):this._memSetOutputRef(e)}_memSetInputRef(t){let e=this._input[t];this._memRemoveDataInput(t),this._memAddRefInput(t,e)}_memSetOutputRef(t){let e=this._output[t];this._memRemoveDataOutput(t),this._memAddRefOutput(t,e)}setPinRef(t,e,n){if(n){if(this.hasRefPinNamed(t,e))return;this._memSetPinRef(t,e)}else{if(this.hasPinNamed(t,e))return;this._memSetPinOptData(t,e)}}setInputRef(t,e){this.setPinRef("input",t,e)}setOutputRef(t,e){this.setPinRef("output",t,e)}setInputIgnored(t,e){let n=this.getInput(t);if(!this.hasRefInputNamed(t))return n.ignored(e)}setOutputIgnored(t,e){return this.getOutput(t).ignored(e)}setInputs(t,e={}){for(let n in t){let i=t[n],s=e[n];this.setInput(n,i,s)}}setPin(t,e,n,i=ks,s=!0){t==="input"?this.setInput(e,n,i,s):this.setOutput(e,n,i,s)}setInput(t,e,n=ks,i=!0){this._setInput(t,e,n),this.emit("set_input",t,e,n,i)}_setInput(t,e,n=ks){this.hasInputNamed(t)&&this.removeInput(t),this._i_count++,this._i_name_set.add(t),this._input[t]=e,this._i_opt[t]=n;let{ref:i}=n;i?this._memAddRefInput(t,e):this._memAddDataInput(t,e)}_memAddDataInput(t,e){this._d_i_count++,this._d_i_name.add(t),this._data_input[t]=e}_memAddRefInput(t,e){this._r_i_count++,this._r_i_name.add(t),this._ref_input[t]=e}_validateInputName(t){if(typeof t=="string"){if(!this.hasInputNamed(t))throw new us(t)}else throw new Ta("name should be a string")}_validateOutputName(t){if(typeof t=="string"){if(!this.hasOutputNamed(t))throw new Aa(t)}else throw new Ta("name should be a string")}addPin(t,e,n,i){t==="input"?this.addInput(e,n,i):this.addOutput(e,n,i)}addInput(t,e,n=ks){if(this.hasInputNamed(t))throw new Sf(t);this.setInput(t,e,n)}removeInput(t){if(!this.hasInputNamed(t))throw new us(t);let e=this._input[t];this._i_count--,this._i_name_set.delete(t),delete this._input[t];let n=this._i_opt[t],{ref:i}=n;i?this._memRemoveRefInput(t):this._memRemoveDataInput(t),this.emit("remove_input",t,e)}setOutputs(t,e={}){for(let n in t){let i=t[n],s=e[n];this.setOutput(n,i,s)}}setOutput(t,e,n=ks,i=!0){this._setOutput(t,e,n),this.emit("set_output",t,e,n,i)}_setOutput(t,e,n=ks){this.hasOutputNamed(t)&&this.removeOutput(t),t===$t&&(this._selfOutput=e),this._o_count++,this._o_name_set.add(t),this._o_opt[t]=n;let{ref:i}=n;i?this._memAddRefOutput(t,e):this._memAddDataOutput(t,e),this._output[t]=e}addOutput(t,e,n=ks){if(this.hasOutputNamed(t))throw new Df(t);this.setOutput(t,e,n)}removeOutput(t){if(!this.hasOutputNamed(t))throw new Aa(t);this._o_count--,this._o_name_set.delete(t);let e=this._o_opt[t],{ref:n}=e;n?this._memRemoveRefOutput(t):this._memRemoveDataOutput(t);let i=this._output[t];delete this._output[t],this.emit("remove_output",t,i)}removePin(t,e){t==="input"?this.removeInput(e):this.removeOutput(e)}getPin(t,e){return t==="input"?this.getInput(e):this.getOutput(e)}getInputs(){return this._input}getDataInputs(){return this._data_input}getRefInputs(){return this._ref_input}getInput(t){return t===$t?this._selfInput:(this._validateInputName(t),this._input[t])}getOutputs(){return this._output}getDataOutputs(){return this._data_output}getRefOutputs(){return this._ref_output}getOutput(t){return t===$t?this._selfOutput:(this._validateOutputName(t),this._output[t])}push(t,e){this.pushInput(t,e)}pushInput(t,e){this._validateInputName(t),this.getInput(t).push(e)}pushAllInput(t){Y(t,(e,n)=>this.pushInput(n,e))}pushOutput(t,e){this.getOutput(t).push(e)}pushAllOutput(t){Y(t,(e,n)=>this.pushOutput(n,e))}pushAll(t){this.pushAllInput(t)}takePin(t,e){return t==="input"?this.takeInput(e):this.takeOutput(e)}takeInput(t){return this._validateInputName(t),this.getInput(t).take()}takeOutput(t){return this.getOutput(t).take()}take(t){return this.takeOutput(t)}takeAll(){return Ne(this._output,t=>t.take())}peakInput(t){return this.getInput(t).peak()}peakOutput(t){return this.getOutput(t).peak()}peak(t){return this.peakOutput(t)}peakAllOutput(){return Ne(this._output,t=>t.peak())}peakAll(){return this.peakAllOutput()}hasPinNamed(t,e){return t==="input"?this.hasInputNamed(e):this.hasOutputNamed(e)}hasInputNamed(t){return this._input[t]!==void 0}hasOutputNamed(t){return this._output[t]!==void 0}hasDataPinNamed(t,e){return t==="input"?this.hasDataInputNamed(e):this.hasDataOutputNamed(e)}hasDataInputNamed(t){return this._d_i_name.has(t)}hasDataOutputNamed(t){return this._d_o_name.has(t)}hasRefPinNamed(t,e){return t==="input"?this.hasRefInputNamed(e):this.hasRefOutputNamed(e)}hasRefInputNamed(t){return this._r_i_name.has(t)}renamePin(t,e,n){t==="input"?this.renameInput(e,n):this.renameOutput(e,n)}renameInput(t,e,n=!0){if(!this.hasInputNamed(t))throw new us(t);let i=this._input[t],s=this._i_opt[t];this._i_name_set.delete(t),this._i_name_set.add(e),delete this._input[t],delete this._i_opt[t],this._input[e]=i,this._i_opt[e]=s;let{ref:a}=s;a?(this._r_i_name.delete(t),this._r_i_name.add(e),delete this._ref_input[t],this._ref_input[e]=i):(this._d_i_name.delete(t),this._d_i_name.add(e),delete this._data_input[t],this._data_input[e]=i),this.emit("rename_input",t,e)}renameOutput(t,e,n=!0){if(!this.hasOutputNamed(t))throw new us(t);let i=this._output[t],s=this._o_opt[t];this._o_name_set.delete(t),this._o_name_set.add(e),delete this._output[t],this._output[e]=i,delete this._o_opt[t],this._o_opt[e]=s;let{ref:a}=s;a?(this._r_o_name.delete(t),this._r_o_name.add(e),delete this._ref_output[t],this._ref_output[e]=i):(this._d_o_name.delete(t),this._d_o_name.add(e),delete this._data_output[t],this._data_output[e]=i),this.emit("rename_output",t,e)}getInputOpt(t){return this._i_opt[t]}getOutputOpt(t){return this._o_opt[t]}hasRefOutputNamed(t){return this._r_o_name.has(t)}getInputCount(){return this._i_count}getOutputCount(){return this._o_count}getInputNames(){return J(this._input)}getOutputNames(){return J(this._output)}setPinData(t,e,n){this.getPin(t,e).push(n)}removePinData(t,e){this.getPin(t,e).take()}setInputConstant(t,e){this.getInput(t).constant(e)}setOutputConstant(t,e){this.getOutput(t).constant(e)}getCatchErr(){return this._catchErr}caughtErr(){return this._caughtErr}catch(t){en(this._catcherCallback,t),en(this._catcherDone,!1),this._catchErr=!0;let e=this._err;e&&(this._err=null,this._caughtErr=e,this.emit("catch_err",e));let n=()=>{this._catcherDoneCount===this._catcherCallback.length&&i()},i=()=>{let _=this._caughtErr;this._caughtErr=null,this._catcherDoneCount=0,this._catcherDone.fill(!1),this.emit("take_caught_err",_)};return{unlisten:()=>{let _=this._catcherCallback.indexOf(t);if(_>-1){vn(this._catcherCallback,t);let c=this._catcherDone[_];if(yn(this._catcherDone,_),this._catcherCallback.length===0){let p=this._caughtErr;this._catchErr=!1,p!==null&&(this._caughtErr=null,this.err(p),this.emit("take_caught_err",p))}c||n()}else throw new Error("unregistered Catcher cannot call unlisten")},done:()=>{if(this._caughtErr){let _=this._catcherCallback.indexOf(t);if(_>-1){if(this._catcherDone[_])throw new Error("catcher cannot be done twice");this._catcherDone[_]=!0,this._catcherDoneCount++,n()}else throw new Error("unregistered Catcher cannot call done")}else throw new Error("catcher cannot call done when there's no caught error")}}}getConfig(){return this._opt}reset(){this.takeErr(),this.emit("reset")}pause(){this._paused||(this._paused=!0,this.emit("pause"))}play(){this._paused&&(this._paused=!1,this.emit("play"))}paused(){return this._paused}getSelfPin(){return this._selfOutput}err(t){if(t)if(t instanceof Error&&(t=t.message),this._catchErr){this._caughtErr=t;for(let e of this._catcherCallback)e(t)}else this._err=t,this.emit("err",t);return this._err}hasErr(){return this._err!==null}getErr(){return this._err}takeErr(){let t=this._err;return t&&(this._err=null,this.emit("take_err",t)),t}takeCaughtErr(){let t=this._caughtErr;if(t){this._caughtErr=null;for(let e of this._catcherCallback)e(null);this.emit("take_caught_err",t)}return t}destroy(){this.__system.unregisterUnit(this.id),super.destroy()}getPinData(t,e){return this.getPin(t,e).peak()}getPinsData(){let t={input:{},output:{}};return Y(this._input,(e,n)=>{t.input[n]=e.peak()}),Y(this._output,(e,n)=>{t.output[n]=e.peak()}),t}getInputData(){let t={};return Y(this._input,(e,n)=>{if(!e.empty()){let i=e.peak();t[n]=i}}),t}getRefInputData(){let t={};return Y(this._ref_input,(e,n)=>{if(!e.empty()){let i=e.peak();t[n]=i}}),t}getSpec(){return this.__system.getSpec(this.id)}getUnitBundleSpec(t=!1){let e;t&&(e=this.snapshot(),Ss(e));let n=Ne(this._input,s=>{let a=s.ignored(),_=s.constant(),c=s.peak(),p=_&&c!==void 0?Ot(c):void 0;return{ignored:a,constant:_,data:p}}),i=Ne(this._output,s=>{let a=s.ignored(),_=s.constant();return{ignored:a,constant:_,data:void 0}});return{unit:{id:this.id,memory:e,input:n,output:i},specs:{}}}snapshotSelf(){}snapshotInput(t){return this.getInput(t).snapshot()}snapshotInputs(){let t={};for(let e of this._d_i_name)t[e]=this.snapshotInput(e);return t}snapshotOutput(t){return this.getOutput(t).snapshot()}snapshotOutputs(){let t={};for(let e of this._d_o_name)t[e]=this.snapshotOutput(e);return t}snapshot(){return{input:this.snapshotInputs(),output:this.snapshotOutputs(),memory:this.snapshotSelf()}}restoreSelf(t){}restoreInputs(t){for(let e in t){let n=t[e];this.restoreInput(e,n)}}restoreInput(t,e){this.getInput(t).restore(e)}restoreOutputs(t){for(let e in t){let n=t[e];this.restoreOutput(e,n)}}restoreOutput(t,e){this.getOutput(t).restore(e)}restore(t){let{input:e,output:n,memory:i}=t;this.restoreInputs(e),this.restoreOutputs(n),this.restoreSelf(i!=null?i:{})}};var qt=class extends cn{constructor({i:t,o:e}={},n={},i,s){super({i:t,o:e},n,i,s);this._i={};this._o={};this._active_i_count=0;this._active_o_count=0;this._i_start_count=0;this._i_start={};this._o_invalid_count=0;this._o_invalid={};this._i_invalid_count=0;this._i_invalid={};this._forwarding=!1;this._backwarding=!1;this._forwarding_empty=!1;this._inputListeners={data:{},drop:{},invalid:{},start:{},end:{}};this._outputListeners={data:{},drop:{},invalid:{}};this.__buffer=[];this._setupInputs=t=>{for(let e in t){let n=t[e],i=this.getInputOpt(e);this._setupInput(e,n,i)}};this._setupDataInput=(t,e)=>{let n=this._onDataInputData.bind(this,t),i=this._onDataInputDrop.bind(this,t),s=this._onDataInputInvalid.bind(this,t),a=this._onInputStart.bind(this,t),_=this._onInputEnd.bind(this,t);this._inputListeners.data[t]=n,this._inputListeners.start[t]=a,this._inputListeners.invalid[t]=s,this._inputListeners.drop[t]=i,this._inputListeners.end[t]=_,e.addListener("data",n),e.addListener("start",a),e.addListener("invalid",s),e.prependListener("drop",i),e.prependListener("end",_)};this._setupRefInput=(t,e)=>{let n=this._onRefInputData.bind(this,t),i=this._onRefInputDrop.bind(this,t),s=this._onRefInputInvalid.bind(this,t);this._inputListeners.data[t]=n,this._inputListeners.drop[t]=i,this._inputListeners.invalid[t]=s,e.addListener("data",n),e.addListener("invalid",s),e.prependListener("drop",i)};this._setupInput=(t,e,n)=>{let{ref:i}=n;i?this._setupRefInput(t,e):this._setupDataInput(t,e)};this._setupOutputs=t=>{for(let e in t){let n=t[e],i=this.getOutputOpt(e);this._setupOutput(e,n,i)}};this.__setupOutput=(t,e)=>{let n=this._onDataOutputData.bind(this,t),i=this._onDataOutputDrop.bind(this,t),s=this._onOutputInvalid.bind(this,t);this._outputListeners.data[t]=n,this._outputListeners.drop[t]=i,this._outputListeners.invalid[t]=s,e.prependListener("data",n),e.addListener("drop",i),e.prependListener("invalid",s)};this._setupDataOutput=(t,e)=>{if(this.__setupOutput(t,e),e.active()){let n=e.peak();this._onDataOutputData(t,n)}};this._setupRefOutput=(t,e)=>{if(this.__setupOutput(t,e),e.active()){let n=e.peak();this._onRefOutputData(t,n)}};this._setupOutput=(t,e,n)=>{let{ref:i}=n;i?this._setupRefOutput(t,e):this._setupDataOutput(t,e)};this._onDataInputData=(t,e)=>{this._activateInput(t,e),this._paused?this.__buffer.push({name:t,type:"input",event:"data",data:e,ref:!1}):this.onDataInputData(t,e)};this._input_effemeral={};this._onRefInputData=(t,e)=>{this._activateInput(t,e),this._paused?this.__buffer.push({name:t,type:"input",event:"data",data:e,ref:!0}):this.__onRefInputData(t,e)};this.__onRefInputData=(t,e)=>{e instanceof Function&&(e=new e(this.__system),this._input_effemeral[t]=e,this._i[t]=e),this.onRefInputData(t,e)};this._activateInput=(t,e)=>{this._i[t]===void 0&&this._active_i_count++,this._i[t]=e,this._i_invalid[t]&&(delete this._i_invalid[t],this._i_invalid_count--)};this._deactivateInput=t=>{this._i[t]!==void 0&&(delete this._i[t],this._active_i_count--),this._i_invalid[t]&&(delete this._i_invalid[t],this._i_invalid_count--),this._i_start[t]&&(delete this._i_start[t],this._i_start_count--)};this._onDataInputDrop=(t,e)=>{this._deactivateInput(t),this._paused?this.__buffer.push({name:t,type:"input",event:"drop",ref:!1}):this.onDataInputDrop(t,e)};this._onRefInputDrop=(t,e)=>{this._deactivateInput(t),this._paused?this.__buffer.push({name:t,type:"input",event:"drop",ref:!0}):this.__onRefInputDrop(t,e)};this.__onRefInputDrop=(t,e)=>{if(this._input_effemeral[t]){let n=this._input_effemeral[t];delete this._input_effemeral[t],n.destroy()}this.onRefInputDrop(t,e)};this._onRefInputInvalid=t=>{this._i_invalid[t]||(this._i_invalid[t]=!0,this._i_invalid_count++),this.onRefInputInvalid(t)};this._activateOutput=t=>{this._o[t]===void 0&&this._active_o_count++,this._o_invalid[t]&&(delete this._o_invalid[t],this._o_invalid_count--)};this._deactivateOutput=t=>{this._o[t]!==void 0&&(this._active_o_count--,delete this._o[t]),this._o_invalid[t]&&(delete this._o_invalid[t],this._o_invalid_count--)};this.__onOutputData=(t,e)=>{this._activateOutput(t),this._o[t]=e};this._onDataOutputData=(t,e)=>{this.__onOutputData(t,e),this.onDataOutputData(t,e)};this._onRefOutputData=(t,e)=>{this.__onOutputData(t,e),this.onRefOutputData(t,e)};this._onDataOutputDrop=t=>{this._deactivateOutput(t),this._paused?this.__buffer.push({name:t,type:"output",event:"drop",ref:!1}):this.onDataOutputDrop(t)};this._onRefOutputDrop=t=>{this._deactivateOutput(t),this._paused?this.__buffer.push({name:t,type:"output",event:"drop",ref:!0}):this.onRefOutputDrop(t)};this._onOutputInvalid=t=>{this._o_invalid[t]||(this._o_invalid[t]=!0,this._o_invalid_count++),this.onOutputInvalid(t)};this._setupInputs(this._input),this._setupOutputs(this._output),this.addListener("set_input",this._onInputSet),this.addListener("set_output",this._onOutputSet),this.addListener("remove_input",this._onInputRemoved),this.addListener("remove_output",this._onOutputRemoved),this.addListener("rename_input",this._onInputRenamed),this.addListener("rename_output",this._onOutputRenamed),this.addListener("destroy",()=>{Y(this._input,(a,_)=>{this._plunkInput(_,a)}),Y(this._output,(a,_)=>{this._plunkOutput(_,a)})}),this.addListener("reset",()=>{this._backwarding=!1,this._forwarding=!1,this._forwarding_empty=!1}),this.addListener("play",()=>{for(;this.__buffer.length>0;){let{name:a,type:_,event:c,data:p}=this.__buffer.shift();if(_==="input"){let{ref:u}=this.getInputOpt(a);c==="data"?u?this.__onRefInputData(a,p):this.onDataInputData(a,p):u?this.__onRefInputDrop(a,p):this.onDataInputDrop(a,p)}else c==="drop"&&this.onDataOutputDrop(a)}})}getActiveInputCount(){return this._active_i_count}getActiveOutputCount(){return this._active_o_count}getOutputData(){return this._o}_plunkOutput(t,e){let n=this._outputListeners.data[t],i=this._outputListeners.drop[t],s=this._outputListeners.invalid[t];delete this._outputListeners.data[t],delete this._outputListeners.drop[t],delete this._outputListeners.invalid[t],n&&e.removeListener("data",n),i&&e.removeListener("drop",i),s&&e.removeListener("invalid",s)}_plunkInput(t,e){let n=this._inputListeners.data[t],i=this._inputListeners.drop[t],s=this._inputListeners.invalid[t],a=this._inputListeners.start[t],_=this._inputListeners.end[t];delete this._inputListeners.data[t],delete this._inputListeners.drop[t],delete this._inputListeners.invalid[t],delete this._inputListeners.start[t],delete this._inputListeners.end[t],n&&e.removeListener("data",n),i&&e.removeListener("drop",i),s&&e.removeListener("invalid",s),a&&e.removeListener("start",a),_&&e.removeListener("end",_)}_onInputSet(t,e,n,i){this._setupInput(t,e,n),this.onInputSet(t,e,n,i)}onInputSet(t,e,n,i){if(!e.empty()){let s=e.peak();this._activateInput(t,s),i&&(this._onInputStart(t),this.hasRefInputNamed(t)?this._onRefInputData(t,s):this._onDataInputData(t,s))}}_onOutputSet(t,e,n,i){this._setupOutput(t,e,n),this.onOutputSet(t,e,n,i)}onOutputSet(t,e,n,i){}_onInputRemoved(t,e){this._plunkInput(t,e),e.active()&&this._deactivateInput(t),this.onInputRemoved(t,e)}onInputRemoved(t,e){}_onOutputRemoved(t,e){this._plunkOutput(t,e),e.empty()||this._deactivateOutput(t),this.onOutputRemoved(t,e)}onOutputRemoved(t,e){e.empty()||this._onDataOutputDrop(t)}onDataInputData(t,e){}onRefInputData(t,e){}_onInputRenamed(t,e){let n=this.getInput(e),i=this.getInputOpt(e);this._plunkInput(t,n),this._setupInput(e,n,i),this.onInputRenamed(t,e,i,i)}_onOutputRenamed(t,e){let n=this.getOutput(e),i=this.getOutputOpt(e);this._plunkOutput(t,n),this._setupOutput(e,n,i),this.onOutputRenamed(t,e,i,i)}onInputRenamed(t,e,n,i){}onOutputRenamed(t,e,n,i){}onDataInputDrop(t,e){}onRefInputDrop(t,e){}onDataOutputData(t,e){}onDataOutputDrop(t){}onRefOutputData(t,e){}onRefOutputDrop(t){}onOutputInvalid(t){}_onInputEnd(t){this._i_start[t]&&(this._i_start[t]=!1,this._i_start_count--),this.onDataInputEnd(t)}onDataInputEnd(t){}_onInputStart(t){this._i_start[t]||(this._i_start[t]=!0,this._i_start_count++),this.onDataInputStart(t)}onDataInputStart(t){}_onDataInputInvalid(t){this._i_invalid[t]||(this._i_invalid[t]=!0,this._i_invalid_count++),this.onDataInputInvalid(t)}_start(){Y(this._output,t=>t.start())}_invalidate(){Y(this._output,t=>t.invalidate())}_end(){Y(this._output,t=>t.end())}_forward(t,e){let n=this._output[t];this._forward_(n,e)}_forward_(t,e){this._forwarding=!0,t.push(e),this._forwarding=!1}_forward_all_empty(){this._forwarding_empty=!0,Y(this._output,t=>t.take()),this._forwarding_empty=!1}_forward_empty(t){this._forwarding_empty=!0,this._output[t].take(),this._forwarding_empty=!1}_backward_all(){this._backwarding=!0,Y(this._data_input,t=>t.pull()),this._backwarding=!1}_backward(t){this._backwarding=!0,this._input[t].pull(),this._backwarding=!1}onDataInputInvalid(t){}onRefInputInvalid(t){}snapshotSelf(){return _t(S({},super.snapshotSelf()),{_forwarding:this._forwarding,_backwarding:this._backwarding,_forwarding_empty:this._forwarding_empty})}restoreSelf(t){let _=t,{__buffer:e,_forwarding:n,_backwarding:i,_forwarding_empty:s}=_,a=_n(_,["__buffer","_forwarding","_backwarding","_forwarding_empty"]);super.restoreSelf(a),this._forwarding=n,this._backwarding=i,this._forwarding_empty=s,this._i={},this._o={},this._active_i_count=0,this._active_o_count=0,this._i_start_count=0,this._i_start={},this._o_invalid_count=0,this._o_invalid={},this._i_invalid_count=0,this._i_invalid={};for(let c in this._input){let p=this._input[c],u=p.peak();this._i[c]=u,u!==void 0&&(this._active_i_count++,this._i_start_count++,this._i_start[c]=!0,p.invalid()&&(this._i_invalid_count++,this._i_invalid[c]=!0))}for(let c in this._output){let p=this._output[c],u=p.peak();this._o[c]=u,u!==void 0&&(this._active_o_count++,p.invalid()&&(this._o_invalid_count++,this._o_invalid[c]=!0))}}};var oy="d2c4b19b-aa58-438b-8541-9df478b80aa3",Ai=class extends qt{constructor(t){super({},{},t,oy);this._current=void 0;this._loop_invalid_o_count=0;this._loop_invalid_o=new Set;this._reset=()=>{this._current=void 0};this._play=()=>{this._forward_if_ready()};this.addListener("reset",this._reset),this.addListener("play",this._play),this.play()}onInputRemoved(t,e){super.onInputRemoved(t,e),t===this._current&&(this._current=void 0)}onInputRenamed(t,e,n,i){super.onInputRenamed(t,e,n,i),this.getInput(e).empty()||(this._current=e)}onOutputRenamed(t,e,n,i){super.onOutputRenamed(t,e,n,i)}onInputSet(t,e,n,i){super.onInputSet(t,e,n,i),e.empty()||(this._current=t)}onOutputSet(t,e,n,i){if(super.onOutputSet(t,e,n,i),this._current!==void 0){let s=this._i[this._current];i&&s!==void 0&&(this._forward_(e,s),this._backward_if_ready())}}onOutputRemoved(t){}_on_input_data(t){let e=this._current,n=this._i_invalid[e],i=e!==void 0&&t!==e&&!n;(i||this._active_o_count-this._loop_invalid_o_count>0)&&this._invalidate(),this._current=t,this._forward_if_ready(),i&&this._backward(e)}onDataInputData(t){this._on_input_data(t)}onRefInputData(t){this._on_input_data(t)}onDataInputDrop(t){t===this._current&&(this._current=void 0,!this._backwarding&&this._i_start_count===0&&this._forward_all_valid_empty())}_on_output_drop(t){this._loop_invalid_o.has(t)&&(this._loop_invalid_o.delete(t),this._loop_invalid_o_count--),this._backward_if_ready(),this._forward_if_ready()}onOutputInvalid(t){this._current!==void 0&&!this._forwarding&&(this._loop_invalid_o_count++,this._loop_invalid_o.add(t))}onDataOutputData(t){this._backward_if_ready()}onDataOutputDrop(t){this._on_output_drop(t)}onRefOutputDrop(t){this._on_output_drop(t)}onDataInputStart(t){this._i_start_count===1&&this._start()}onDataInputInvalid(t){t===this._current&&this._invalidate()}onInpuRemoved(t){t===this._current&&(this._current=void 0)}onDataInputEnd(t){this._paused||this._i_start_count===0&&(this._current!==void 0&&this._forward_all_valid_empty(),this._end())}_forward_all_valid_empty(){this._forwarding_empty=!0,Y(this._output,(t,e)=>(!this._loop_invalid_o.has(e)||this._o_invalid[e])&&t.take()),this._forwarding_empty=!1,this._loop_invalid_o_count=0,this._loop_invalid_o=new Set}_forward_if_ready(){for(;!this._backwarding&&!this._forwarding&&this._active_o_count-this._o_invalid_count===0&&this._o_count>0&&this._current!==void 0&&!this._i_invalid[this._current];)this._loop_invalid_o_count=0,this._loop_invalid_o=new Set,this._run()}_backward_if_ready(){!this._forwarding&&this._current!==void 0&&this._active_o_count-this._loop_invalid_o_count===0&&(this._loop_invalid_o_count=0,this._loop_invalid_o=new Set,this._backward(this._current),this._forward_if_ready())}_run(){let t=this._i[this._current],e=jn(this._output,i=>i.empty()),n=jn(this._output,i=>!i.empty());this._forwarding=!0,Y(e,i=>i.push(t)),Y(n,i=>i.push(t)),this._forwarding=!1,this._backward_if_ready()}snapshotSelf(){return _t(S({},super.snapshotSelf()),{_current:ko(this._current)?this._current:void 0,_loop_invalided_o_count:this._loop_invalid_o_count})}restoreSelf(t){let s=t,{_current:e,_loop_invalided_o_count:n}=s,i=_n(s,["_current","_loop_invalided_o_count"]);super.restoreSelf(i),this._current=e,this._loop_invalid_o_count=n}getData(){if(this._current)return this._i[this._current]}};function Bt(r,o){return r[o]}function ax(r,o){return r[o]}function _x(r,o){let t=Bt(r,o),{component:e={}}=t;return e}function px(r,o){let t=Bt(r,o),{inputs:e={}}=t;return e}function cx(r,o){let t=Bt(r,o),{outputs:e={}}=t;return e}function wn(r={}){return B(S(S({},Li()),r))}function xn(r){return gr(r)}function ux(r,o,t,e){let n=Bt(r,o);return r_(r,n,t,e)}function r_(r,o,t,e=new Set){let n=Bt(r,t),{name:i=ao}=n;return Yg(o,i,e)}function Yg(r,o,t=new Set){let e=bi(o),n=e,i=0;for(;tk(r,n)||t.has(n);)n=e+i,i++;return n}function a_(r,o=new Set){let t=0,e=`${t}`;for(;ek(r,e)||o.has(e);)t++,e=`${t}`;return e}function tk(r,o){let{units:t={}}=r;return!!t[o]}function ek(r,o){let{merges:t={}}=r;return!!t[o]}function La(r,o){if(o===oy)return!0;let t=Bt(r,o),{system:e}=t;return e}function Xg(r){let{system:o}=r;return o}function dx(r){let{units:o={},base:t}=r;return t?!1:J(o).length===0}function lx(r,o){let t={};for(let e in o){let n=o[e],i=e,s=!1;for(;r[i];)i=xn(r),s=!0;s&&(t[e]=i),r[e]=n}return t}function sy(r,o){let t=Bt(r,o);return __(t)}function __(r){let{render:o}=r;return o}function on(r,o){var t;return(t=sy(r,o))!=null?t:Jg(r[o])}function Gr(r){var o;return(o=__(r))!=null?o:Jg(r)}function mx(r,o){let{component:t={}}=r,{subComponents:e={}}=t;return!!e[o]}function Jg(r){let{component:o={}}=r,{subComponents:t={}}=o;return pe(t)>0}function hx(r){return!!r.children&&r.children.length>0}function qg(r,o,t){let e=Bt(r,o),{units:n,merges:i,inputs:s,base:a}=e,_=s[t],{metadata:c={}}=_,{examples:p=[]}=c;if(p.length>0)return p;if(a)return[];{let{plug:u}=_;for(let d in u){let m=u[d],{unitId:h,pinId:f,mergeId:b}=m;if(h&&f){let g=n[h],v=qg(r,g.id,f);if(v.length>0)return v}else if(b){let g=i[b];for(let v in g){let x=g[v],{input:I={}}=x,E=n[v];for(let D in I){let w=qg(r,E.id,D);if(w.length>0)return w}}}}}return[]}var Rr=class{constructor(o){this.specsCount={};this.specs=o,this.specs_=new Po(o)}newSpecId(){return gr(this.specs)}hasSpec(o){return!!this.specs[o]}emptySpec(){let o=xn(this.specs),t=wn({id:o});return this.newSpec(t),t}newSpec(o,t){return t=t!=null?t:xn(this.specs),o.id=t,this.specs_.set(t,o),o}getSpec(o){return this.specs[o]}setSpec(o,t){this.specs_.set(o,t)}injectSpecs(o){let t={},e=new Set,n=(i,s)=>{if(e.has(i)||t[i])return;let a=i,_=!1;for(;this.hasSpec(a);)a=this.newSpecId(),_=!0;e.add(i);let{units:c}=s;for(let p in c){let u=c[p];if(!(this.hasSpec(u.id)&&this.specs[u.id])){let d=o[u.id];n(u.id,d)}}_?JSON.stringify(s)===JSON.stringify(this.getSpec(i))||(t[i]=a,this.specs_.set(i,s)):this.specs_.set(i,s)};for(let i in o){let s=o[i];n(i,s)}return t}shouldFork(o){var t;return((t=this.specsCount[o])!=null?t:0)>1||La(this.specs,o)}forkSpec(o,t){if(this.shouldFork(o.id)){let e=B(o);delete e.system;let{id:n}=this.newSpec(e,t);return[n,e]}else return[o.id,o]}registerUnit(o){this.specsCount[o]===void 0&&(this.specsCount[o]=0),this.specsCount[o]+=1}unregisterUnit(o){if(!this.specsCount[o])throw new Error(`cannot unregister unit: no spec with id ${o}`);this.specsCount[o]-=1,this.specsCount[o]===0&&(delete this.specsCount[o],La(this.specs,o)||this.deleteSpec(o))}deleteSpec(o){this.specs_.delete(o)}};l();function fx(r){let o="";for(let t in r){let e=r[t];o+=`${t}`}return o}l();function gx(r,o){let{root:t,api:{document:{createElement:e}}}=r,n=e("style");n.innerHTML=o,t.shadowRoot.appendChild(n)}function bx(r,o){let{root:t}=r,e=Array.from(t.children).find(n=>n.tagName==="STYLE"&&e.innerHTML===o);if(!e)throw new Error("style not found");t.shadowRoot.removeChild(e)}l();l();var Mt=class extends Error{constructor(o){super(`${o} API not implemented`)}};l();var Zg=class extends Mt{constructor(){super("Display Media")}};l();var Qg=class extends Mt{constructor(){super("Media Devices")}};l();l();function Nr(r,o){return!!r.getItem(o)}function Cs(r){return J(r)}function yx(r){let o={},t=Cs(r);for(let e of t)o[e]=r.getItem(e);return o}function tb(){return yx(localStorage)}function vx(){return yx(sessionStorage)}var eb=class{constructor(o){this._storage=o}read(){return G(this,null,function*(){return tb()})}write(o){return G(this,null,function*(){})}get(o){return G(this,null,function*(){let t=this._storage.getItem(o);if(t===null)throw new Error("item not found");return t})}set(o,t){return G(this,null,function*(){this._storage.setItem(o,t)})}delete(o){return G(this,null,function*(){this._storage.removeItem(o)})}pathSet(o,t,e){throw new $}pathGet(o,t){throw new $}pathDelete(o,t){throw new $}keys(){return G(this,null,function*(){return Cs(this._storage)})}hasKey(o){return G(this,null,function*(){return Nr(this._storage,o)})}subscribe(o,t,e){throw new $}};function nk(r){return{getItem(o){throw new Mt(r)},removeItem(o){throw new Mt(r)},setItem(o,t){throw new Mt(r)},clear(){throw new Mt(r)}}}function xx(){return{storage:{local:()=>new eb(nk("Local Storage"))},selection:{containsSelection:()=>{throw new Mt("Selection")},removeSelection:()=>{throw new Mt("Selection")}},file:{isSaveFilePickerSupported:()=>!1,isOpenFilePickerSupported:()=>!1,showOpenFilePicker:()=>{throw new Mt("File System")},showSaveFilePicker:()=>{throw new Mt("File System")},fallbackShowOpenFilePicker:()=>{throw new Mt("File System")},downloadText:o=>{throw new Mt("Download")},downloadURL:o=>{throw new Mt("Download")}},animation:{requestAnimationFrame:()=>{throw new Mt("Animation Frame")},cancelAnimationFrame:()=>{throw new Mt("Animation Frame")}},device:{vibrate:()=>{throw new Mt("Vibrate")}},geolocation:{getCurrentPosition:()=>{throw new Mt("Geolocation")}},input:{keyboard:{},gamepad:{getGamepad:()=>{throw new Mt("Gamepad")},addEventListener:(o,t,e)=>{throw new Mt("Gamepad")}},pointer:{getPointerPosition(o){throw new Mt("Pointer")},setPointerCapture(o,t){throw new Mt("Pointer Capture")}}},media:{getUserMedia:()=>{throw new Qg},getDisplayMedia:()=>{throw new Zg},enumerateDevices:()=>{throw new Mt("Enumerate Media Devices")},image:{createImageBitmap:()=>{throw new Mt("Image Bitmap")}}},screen:{requestWakeLock:()=>{throw new Mt("Screen Wake Lock")}},bluetooth:{requestDevice:()=>{throw new Mt("Bluetooth")}},clipboard:{readText:()=>{throw new Mt("Clipboard")},writeText:()=>{throw new Mt("Clipboard")}},http:{fetch:()=>{throw new Mt("Fetch")},EventSource:void 0},channel:{local:function(o){throw new Mt("Local Channel")}},speech:{SpeechGrammarList:function(o){throw new Mt("Speech Recognition")},SpeechRecognition:function(o){throw new Mt("Speech Recognition")},SpeechSynthesis:function(o){throw new Mt("Speech Synthesis")},SpeechSynthesisUtterance:function(o){throw new Mt("Speech Synthesis")}},document:{createElement(o,t){throw new $},createElementNS(o,t){throw new $},createTextNode(o){throw new $},elementFromPoint(o,t){throw new $},elementsFromPoint(o,t){throw new $},getSelection(){return root.shadowRoot.getSelection()||document.getSelection()},createRange(){return document.createRange()},exitPictureInPicture(){throw new $},MutationObserver:null,PositionObserver:null,ResizeObserver:null},querystring:{stringify:function(o){throw new $},parse:function(o){throw new $}},text:{measureText:o=>{throw new Mt("Measure Text")}},worker:{start:()=>{throw new Mt("Worker")}},db:void 0,url:{createObjectURL:function(o){throw new $}},uri:{encodeURI:function(o){throw new Mt("URI")}},alert:{alert:function(o){throw new $},prompt:function(o){throw new $}},location:{toString:function(){throw new $}},window:{open:function(o,t,e){throw new Error("Function not implemented.")},AudioContext:void 0,OscillatorNode:void 0,MediaStreamAudioSourceNode:void 0,AnalyserNode:void 0,GainNode:void 0,DelayNode:void 0,ImageCapture:void 0},navigator:{share:function(o){throw new Error("Function not implemented.")}},layout:{reflectChildrenTrait:function(o,t,e,n,i){throw new Error("Function not implemented.")}}}}l();function Fi(r,o,t={}){let{spec:e={},specs:n={}}=r;return e.id||(e.id=gr(o)),n[e.id]=e,Ui(e,Wt(n,o),t)}l();l();l();var Ix="5a7912c7-9c67-45b6-ae2b-e352405e6c16";var Sx="6fe452f2-2ec1-4ee2-887d-751c3697e6bf",Dx="158d85eb-28b8-4355-b637-28a7ec751233",Ex="872be100-f4dc-4246-8eea-6e3da31137b7",wx="c5c05c85-f4c1-4b67-ab85-08b61fe67531",Px="fa94b179-00e3-4ed1-814e-7938324a833f",nb="fa7721eb-1dd6-482e-8c7a-6da35b5f88bc",kx="79f01345-4ed7-47e2-8882-fa3bd282c98a",ib="e9831075-2e62-43a4-84af-0653f7e707a9",Cx="f57f5318-f26f-4b9f-b9e2-dcc022ad7728",ob="609ec474-cd6b-4646-b9b9-5ef4bbb378a7",sb="9741cb34-bc83-4ebb-a854-edbe9eb3468f";var Tx="7014b684-ce58-4b6a-989d-bd6c047daab5",Ax="104777ec-afb9-4513-9974-53b5528f0d15",rb="46d98b47-0fa4-409e-bbc6-bb3165d863d8",Mx="81006022-e4d0-11ea-902a-fbf9fc5c9246",Ox="d9cf4224-39df-434a-85a6-2b143330cbab",$x="22622778-d64f-47e7-8ceb-d175edcc6562",Lx="f69e88e3-b2c2-481b-b036-a5c0ed7ccccb",ab="c6bf897a-4970-4284-bea2-b4a86186f828",Ux="d4572f1c-83d3-4a3d-be76-fa16578286d2",Gx="be6801c0-02e2-4f76-bcad-b68c80991fad",Rx="62d0c3e2-cf8b-4415-acfb-cf31739adce5",Nx="0d656c2e-eb10-45f0-b236-f8916492ca86",zx="3d59edf2-5fca-4475-9df0-d876e14f990d",Fx="85204bf6-6692-4686-a785-23127c0594b5",Bx="1651ce6b-4db0-4787-9edf-f770b72d253c",Hx="c9e06816-0d2b-43ec-b7c8-d07563e19b6b",jx="82c3cf2a-0855-4c6d-a4c4-807b0ce1fd35",Vx="e13f3090-62a6-4a3b-8401-c571cbf03526",Kx="bda175a9-a9d2-4282-9b50-1b008ae8a807",Wx="ff976ac8-c54f-4d37-8c7d-089c271cb433",qx="329920ae-7e91-11ea-988e-1b12488c8b89",Yx="260d774e-bc89-4027-aa92-cb1985fb312b",Xx="06bc3983-44b0-43d6-b041-2e9218ea89c8",Jx="8a2b756a-25e4-11eb-860d-1f34c850b992",Zx="3432494e-fab6-4e9d-a846-0c48a7c429cd",Qx="49e11645-c25d-4bf7-923d-56817f67b686",t8="36329d25-218d-48a5-a06c-1e0525da504f",e8="99657eb7-fb94-474e-b03d-4b08c537c0a2",n8="6d4b8791-95f8-4979-8290-ade2adf4f192",i8="9d853ef5-3fff-474d-a951-6af4237cf4c4",o8="ba38b0af-80c0-49e4-9e39-864396964ccc",s8="69323dab-b425-4a2a-b1c7-d7efc723327a",r8="2b24877a-3221-4288-9f59-efbf29964368",a8="63605ea1-40e7-47db-9f8f-313dffa6e3c9",_8="939ed573-82b8-4385-ac62-88934e5b76c9",p8="b80d4b5a-40e9-11eb-a2bb-1777d47bf9ae",c8="73967b68-9b4b-44c1-8a19-f505551f6c53",u8="c47d84b2-4207-11eb-a064-a3633d64f05d",d8="76e99304-aa0c-11eb-9bfa-07725a1b4287",l8="3e5c5856-c721-11ea-b7af-07a978a65cdc",m8="58900411-ccc3-4c5a-86df-86efe6b7e30e",h8="563e92be-ad5e-4a61-a718-9249c3eac51d",f8="ee184ea6-3c80-4119-919e-290620aafab0",g8="407640f7-f1c3-4297-a5ce-baff357a6d31",b8="7d02d638-a311-4ea8-a0c0-d45baf739e0d",y8="62a19cd6-04bd-4e46-a72e-4fa3516ad3fa",v8="fafc23ce-a259-11eb-b14e-af9d1f579af4",x8="62af44dc-17d6-459a-b95f-3b8ce5b48856",I8="3217edcf-2fa1-4dc4-af7c-d6fb607c888d",S8="e857c770-5a98-4f8d-a0e1-b6cb126071ed",D8="4e63c320-f5a5-4f65-982e-632b5adafa29",E8="3256e26d-8495-4c9d-8998-5b026691231d",w8="ef4c1d0a-bda1-484e-8fcb-0fdbde195778",P8="2b59f375-ef06-4ec7-80c2-71a53171ec67",_b="1a59348c-a25a-11eb-8afe-8bedb0732a89",k8="b9f90a95-1bfc-4897-9068-2560743821a3",C8="530e83d2-1d61-11eb-b472-53e545a06c92",T8="13d738b9-401d-43c9-852f-e9611545f5bc",A8="2520668c-b279-11ea-ace3-5b84eb02bd7f",pb="123f2837-76c0-4cb2-8d73-29e66879b181",M8="1520b630-93aa-11ea-ac56-7718cb2ad75d",O8="56fb9a32-ad10-11ea-b0f4-3b0ea5e3ac2c",$8="8383c41e-3f9b-4d04-8380-feb583a1404f",L8="b0c25199-c284-4f90-817c-60dc89b15b1c",U8="b2626d61-b17d-4737-bea3-627c0322f9d6",G8="1b592040-968f-456b-bdb5-b424e08b80f1",R8="e1486d65-7d51-436b-949d-4e57d1f9e4a9",N8="f9f93972-0764-4095-9ca2-d18b7d9344d4",z8="3be8272d-310a-4aa2-84a1-71f590a8227a",F8="ae1f7fc0-d6e7-489c-94ed-dee71c68dbb7",B8="b5ea15f4-9bbd-11eb-b623-37aff4a9ce60",H8="70972046-ad11-11ea-aaea-0b9067ad19e7",j8="94e93f42-d05e-45d9-9211-ba903e779f2d",V8="f712793d-8ee9-4805-9d4a-8c210cae667a",K8="f60adade-f14e-11ea-b51e-537032a90354",W8="8cd29108-95cd-4217-9721-11f7c7c1131e",q8="2af12780-698c-40ca-baa9-5f3260377e0f",cb="664b5d3c-e4cf-11ea-ab74-eb6d2f3bd6f1",Y8="9414421d-3376-4438-aa03-7afcd860972c",X8="ad2ae8b9-9674-4b22-bed4-4458e0030b1a",ub="45b9c329-64e9-4c4a-800b-790947c75754",J8="60bdba6d-c670-430f-be72-6f39cf4e8453",Z8="c4784b05-1f50-44ad-b812-545b3ed77614",Q8="964d3314-75fe-4a09-8ba8-c49145f29d49",t3="02f91720-c4d5-4d66-ae91-d46ddc635722",e3="f97f2a74-d9a9-411d-afd3-fda46ba86c3b";var n3="eb345e08-08fd-4032-bd69-a4e9f55e7aa6",i3="779e538c-b0b9-477e-a986-30ee3abe6fe6",o3="25d0e003-f002-45ae-a50c-6fa3bffee4eb";var s3="065d2fc3-af3b-4704-b26e-228d71f61771",r3="b16cccf7-fe33-43a6-b208-48db494376e8",a3="af5469c4-a09e-4b22-8133-a21e721e7639";var _3="e1e106ad-e15d-4044-82f6-27ddd476d7c8",p3="141eaa06-bb12-42f1-a46f-32ceefb64ddc",c3="c2fec1e6-b370-4069-bb43-6dab5a78b9ab",u3="adde2d16-e1e6-4599-9a64-dd0968797041",d3="d4e4d4b2-80e0-4066-8d6f-5051e9a11a10";var db="95076599-0f2f-46b6-a9e0-b4cbfdb8dcc9",l3="a85fd9ad-5aec-4ebc-9008-e22db851dfa8",m3="49517cda-b9da-4d80-b849-61fc2260317d",h3="ff84b8cd-216f-4bcf-8e29-e7c9998cae3d",f3="43b43afd-9e7d-44ba-aef7-6e9db4ed8744",g3="33434271-3533-4a4e-adb9-306e35ab6afe",b3="0b4aa055-010d-4d43-b991-f38a95cdb380",y3="fa3d97bb-060d-4671-9c18-dff81f64c1cc",v3="d6f727ee-5158-4e2b-a2d4-a84ee712144e",x3="ee7b692f-5fe5-43c3-b636-aacca92b0bc7",I3="c7f6f43e-e8ed-11ea-92b2-0bd612272247",S3="4ad5bd0e-e11e-11ea-ad4c-83da30628333",D3="dd520754-e138-11ea-879e-3bd947893124",E3="a44b2198-e18d-11ea-be3b-77e13b78b7e3",lb="6796cd2d-2bd2-4dd3-9396-49d6bc1d2652",w3="2b0ef9e9-028b-4acc-9daf-6999e86cc2af",P3="58385055-7f06-472a-be9e-26bb5bce276a",k3="81c0f469-ab88-4bc8-89d5-98d291b1d8b2",C3="1ef77768-7394-4b83-ad11-f5905fa9d0d3",T3="288aede9-59ea-4cb4-baf9-fef9109cc2b9",A3="53018958-b686-11ea-bf53-175a3698c92d",M3="82cf909e-a78f-4f3e-b87a-976458c8e15d";var O3="be59cf84-fcf2-46ef-aa34-6f0f8e055680",$3="f5b2faf1-3a8b-489f-9d99-62d3c749ced6",L3="3ab81e83-5954-4bae-ad3e-ebf409dd23c4",U3="8e978642-b686-41fd-b2af-9a4c5db6bfa4",G3="3c47d4bc-315d-4600-a9cd-6e388b345980",R3="138d16a7-a200-4329-9b4a-17abd24943d4",N3="8f7ce559-a046-45bc-8e98-c39934ed0ae6";var z3="9a7c22e3-3de2-4c99-ac1f-b2f8ceffae99",mb="c0e124ca-381a-414b-93a2-41526df02e28",F3="83d22558-2c6f-4dd4-a231-baba798d1d97",B3="c9d64ef4-35f6-44e7-a16b-1e4173f951dc",H3="b2eb49a8-7a7a-446a-ad36-e7c1efdaf61f",j3="6f79ee03-4b3f-439c-b955-5529f3bebcc9",V3="0b5a71c6-5c43-4e55-a29c-27d9ff7ed43a";var K3="ee4715e6-f479-11ea-b231-bf95a7f38a99",W3="1ba97b81-5084-49b8-8fbf-227ccd31cabc",q3="c475117a-02b9-11eb-b7c8-579fe4f6c669",Y3="41a8c91e-87f8-4d96-9714-33716f329f7b",X3="1ba931d8-0226-4600-9a48-dbb1b17d8d82",J3="fb3fc7b4-3175-41ce-9546-cf3a07053cdc",Z3="6dbff818-02b9-11eb-9ee7-93b57419f741",Q3="e7232263-a2cf-4f2b-a862-4fc85933d09f",t9="a1cd3c3c-b1fa-40a2-80d1-32f416264a3d",e9="367241d8-ad12-11ea-beed-9777f31699a8",n9="77238fd9-a968-454d-b7ce-0277bc37475d",i9="a9cba5ec-940d-42a3-b861-86197402cbe4",o9="817c76ba-a71c-4136-af86-bd6b69106c45",s9="30f6738c-1938-4dcd-9e7f-6c10f9730021",r9="210632fc-f85b-4f13-a2a9-f689ff85da78",a9="f5df301d-da63-492a-9e59-950289fe6ba9",_9="71ff4fda-5878-4d4c-b55b-c2c79d8dc546",p9="5c13db99-0923-4b27-85e3-7a18dbfdd309",c9="a7dee8c6-15a3-4b7e-8f63-03f13a7d34a9",u9="9543c94b-e19e-430b-8a48-9cda8dae44c5",d9="a8d7c089-0385-4922-bb3a-6c550a8a1b3b",l9="2ec96f8b-4ea5-4ba8-ab8d-a00105c6cb71",m9="e4ea5dce-10ea-434b-a93d-c874a92f2f39",h9="31408be3-cc2a-490a-b0d1-96e0028ca68e",f9="33c623e5-bce2-4f30-9a98-50218bb6c431",g9="c2738ec3-72fa-4432-96b9-74abb1a6f26a",b9="30e125ba-af81-11ea-ba6b-e70218ca7afe",y9="b5ab65ce-4306-4a46-8d3c-36b6c29b1c60",v9="c18c8f59-f3c8-49a8-9dbd-ed30fdf856e9",x9="3511f756-2a02-4346-b417-8c34502f79d4",I9="6705462c-5b47-11eb-9dfc-2f14c58b2789",S9="0bc0c4ad-d2e0-4e3e-92e8-5b9dfee1cf5e",D9="f238caff-3f71-40d9-b1a9-d992060fea04",E9="262beb5f-21bd-4848-a62d-185f6f8a78e1",w9="a57383a9-5b24-4dbb-a5d1-0e278d036f89",P9="7e1b3a4c-be6b-11eb-b098-1b6b9db93f1e",k9="3889d2f1-a0ed-4e8c-8e75-7a6683224275",C9="a6e30b43-9ab4-4206-bfba-3f2129faac30",T9="41de8d5e-2c41-441c-ad29-cc3f5d4e6c7a",A9="c5856fdc-5154-46ab-a414-47f37af39da1",M9="b8fc168e-ee2f-11ea-a42a-730934861ff1",O9="29e974cc-081b-11eb-a607-1fd4ec67a52f",$9="bb029770-080e-11eb-9d38-f314d076f14b",L9="5aea0bf0-0815-11eb-9304-5f90b5542620",U9="2f2d5ea4-6dd2-406e-a095-5552ebc235e7";var G9="d4ec46ab-d065-4d1c-9357-fa8b95be0c36",R9="f079a38e-fb4f-496e-8e5f-d5e03a590cda",N9="16fa715f-fc94-43f7-831e-335037c8daea",z9="7375aad5-50fd-403c-80ae-471b95088f04",F9="d3fc887c-9fc5-11eb-8f63-ab42b0414469",B9="de9665db-a188-4252-99f0-ea50fc343058",H9="b296242e-8b82-11eb-ac6c-0f8d3f9948d0",j9="04eda925-4423-40c8-83c8-2117a0d81185",V9="2afcfde0-76d3-4045-a99c-c9809d71307a",K9="416550cc-6e02-4ff2-aafa-2f0edbf121c6",W9="6db29a62-2035-4cfc-a9d3-03444a8bc2b8",q9="c8f3faa8-09f4-11eb-a3b1-477aa3ec4193",Y9="dc513ed0-09f4-11eb-a54a-7f4d4e253ef5",X9="08ff535a-93a7-403c-a1ef-c59cdb50ccf0",J9="0f041192-1ff3-4094-93da-9264480ad5e2";var Z9="b949221c-8227-4178-bde4-5e8754a7ed39",Q9="baadad13-b70f-4310-b4aa-8c81fe5a9d69",t5="1d5b6bb0-f18e-4428-a350-a29d8ca3ff4a",e5="5bd48844-67c6-4fdc-b23b-f03cd561877f",n5="27e2f302-c23a-4447-abde-8309a94b331d",i5="81ac8195-57ed-4b22-b8b8-fe3e68b11af0",o5="68992d62-d5ca-11ea-888d-97179b32b7ab",s5="81a54674-4e9c-11eb-a0e4-2b75980dbd9b",hb="1baddd01-97a9-4971-b74a-e933fefdb629";var r5="72c84615-4d9c-4a82-a828-fa5d9447a4d5",a5="06a6eeb5-9c36-428c-b9af-4f8b178db350",_5="ccf6d0e2-6b08-11eb-9fc3-3785374109d0",p5="0e9e6cd4-67eb-11ea-995b-4b0721193361";var fb="e8bce1fc-ae56-4f9f-9685-3cc844758855",p_="e80c912e-7508-11ea-966b-436805345ff0",c5="0f043df2-46fc-11eb-ae20-6f1fedd527ba",u5="c9b62bcc-8196-11eb-8372-9f2ac2c356d4",d5="96d5d60e-85eb-11eb-ba90-7fc42ab0a641",l5="84bfce28-2116-11eb-82ca-cfb03193bf58";var m5="e6b88d1e-8755-11ea-916e-d3995fb8986e",h5="d0672722-b1a9-11ea-a247-d736e666990e",f5="023c3762-c701-11ea-b590-57b51c2884a7",g5="deda524e-6990-11eb-9bc3-e7d55b583fa3",b5="0e1d716e-a13f-11ea-ac6a-8fd610c86910";var y5="fcccb9a4-1a30-11eb-93b0-e7d511d031f2",v5="bc34c618-1c77-11eb-9785-e39a2bf52e49",x5="6b18c608-7b5a-11ea-bb6e-2ff12a5cc3f3",I5="e39a2a34-c71a-11ea-9835-07964acf6760",S5="9d1417a8-8a90-4ec1-be3e-401fd4ec3370",D5="b61f5cc6-37e9-45e1-965b-02940820f7ce",E5="94243ec4-8967-4907-8cdd-7223fe256cf6",w5="7c27cf95-6226-4326-8619-32d82bcbe16d";var P5="66698a97-15c5-4602-9925-11a1aeb03710",k5="8be95fbe-8f10-467b-bbdd-87311ca62594",C5="d7c86a2a-489f-11eb-b83e-d3767f6d49b7",T5="dd7616e2-2e64-4d9c-b13e-ca7efeacd982",A5="321f971c-b898-4ca4-9e6e-3d75d68940f7",M5="b7f043ee-4f9d-4f69-90fe-63b1357ff4c2",O5="63a417e5-d354-4b39-9ebd-05f55e70de7b",$5="32ff22b0-8221-4584-9c78-d21102dcfa6a",L5="b5286262-9f92-40d3-8545-88fb3079a0f9",U5="23b7df22-79e0-4233-8388-7e6e8f1859c6",G5="06823924-b659-4a22-8ed4-b3243121b55d",R5="059579bb-184f-435b-ace0-64ec95c9f125",N5="44968bd5-f1a5-4f81-a32f-8ee5a6e4a842",z5="ab507863-2307-40c6-982b-c45680458997",F5="7a8921eb-c1ad-400b-94fc-6c6cead8163d",B5="2a5ad480-9d38-4918-8774-41fac7b54203",gb="78b0939d-43e1-4f6c-867d-e4217a55d217",H5="7772a2f5-40c8-482e-83f4-bed9bfb364e3",j5="c711d540-9de3-437e-854a-b59491af3cf8",V5="62ca7eae-ea36-4960-a8f2-6b5978cabbab",K5="7666978e-252c-11eb-97a4-0f3e81286cae",W5="3fcb8e64-923d-11ea-bab1-43fa3b273af8",q5="e049f16e-2559-11eb-bdc4-db5b8a11164b",Y5="be11165e-489f-11eb-921f-87b924eb0725",X5="38d26d76-2559-11eb-ae02-dfda9b9b137e",J5="9932f3bc-9241-11ea-89fa-0b2fdace0f08",Z5="60bc7930-8982-11ea-8b24-cf97a783bb32",Q5="c0bfe832-8967-11ea-8c4c-1f2995e41b68",t6="98c279fc-7f5e-11ea-b9e4-f772f9f0bed1",e6="49ef122e-b4d1-11ea-b45e-b73d8ee2aae8",n6="00c828fc-9243-11ea-b897-5b0fc55820c5",i6="ad12678e-6642-11eb-9fc3-9fbc75c58110",o6="096fc4ca-edd2-11ea-8266-37b634a3ee0b",s6="d8aa573f-129e-4587-9c64-674729d024e2",r6="6309ac3f-4a37-4ab0-86c6-8be70b38e31d",a6="e2109627-9783-4664-a70c-858fd8c46ea5",_6="9bc56564-ef4e-11ea-939a-27ae3feb321e",p6="c0d13c03-9b10-4a6f-a79f-66294d10aae6",c6="51c2c7b4-cb8a-42e8-95ab-14b8ac37700c",u6="6c7cd7d1-c8a0-4317-9c8c-ba781f150729",d6="e06518cf-9edf-430b-8751-74c486e407aa",l6="87f99b85-1c24-4e5b-a903-dd27230f4092",m6="83ec6688-b80b-4ef2-861f-14245ef392c0",h6="6a14988f-5f4b-4fab-af32-226b7844e41f",f6="454aaff2-cd74-4f6e-baf2-631bb32e7a6b",g6="3ffeaaf8-30dd-11eb-9dcc-836b075fc64d";var b6="6253bf76-2e85-11eb-9f59-3703abfd39c7";var y6="002af312-560a-11eb-807c-8769b90eb8e6",v6="f1ed986a-55df-11eb-89e3-9f7cc8490b16";var x6="ef550ed4-5608-11eb-8ee3-0be8f1fce185",I6="738a0ac4-8805-4189-a46c-b7d7fcf63456",S6="59afce80-30e7-4322-84e6-955767bb5106",D6="355b5332-0cc9-4a5c-989e-043d717215ec";var E6="c320b1b2-c130-4d69-b172-0c737b72c6b5";var w6="04e8b64e-7fed-49a0-af48-eba025be3fbc",P6="b51db03f-4d2d-44f9-bbd9-116aa0b086d0",k6="12d1e7be-a5a6-45ba-82d7-cce3d03b96e2";var C6="bc0320e2-2eb8-11eb-a38f-a779bfe81645",T6="b409ff98-1c9e-4990-b2c2-d7f32fda50eb";var A6="eaf5e67b-6c48-4a27-85e1-9d5a8aa72e24",M6="074ef6f4-a0a1-40f9-95c0-cf0ecc3d420c",O6="de2d42e2-4fca-4a3f-8783-3585c546e88b",$6="324b9c5e-5810-11eb-bf7c-634b3bb07f8c",L6="bddaba6f-83c8-4d25-97e2-ef1cdecd19e4",U6="5ec9d37d-f9f4-49d0-a139-55af26fab05c",G6="259ba71c-6315-4324-a32c-fc2277200a40",R6="7fe5b907-e9d3-4427-96cf-1b3be39a9bba",N6="0c6703a1-e949-4b55-9e84-71e6c9addd64",z6="c6da6b9f-a783-4e58-a252-e543aef109fb",F6="98ab5ee1-0997-4ad2-bc77-776208b6bb25",B6="4ae69887-a087-4d37-8743-d83ca48184d1",H6="ed78b920-3f43-47df-840c-60c5297cdb2e",j6="c899b675-c3c4-428e-b548-b228305c0302",V6="cd8c1d94-1471-49e2-8b43-d98ae93b70f3";var c_=class extends A{constructor(o){super({i:["a","b"],o:["a + b"]},{},o,Sx)}f({a:o,b:t},e){e({"a + b":o+t})}};l();var u_=class extends A{constructor(o){super({i:["a","b"],o:["a \xF7 b"]},{},o,Dx)}f({a:o,b:t},e){t===0?e(void 0,"cannot divide by 0"):e({"a \xF7 b":o/t})}};l();var d_=class extends A{constructor(o){super({i:["a","b"],o:["a \xD7 b"]},{},o,Ex)}f({a:o,b:t},e){e({"a \xD7 b":o*t})}};l();var l_=class extends A{constructor(o){super({i:["a","b"],o:["a % b"]},{},o,wx)}f({a:o,b:t},e){t===0?e(void 0,"cannot divide by 0"):e({"a % b":o%t})}};l();l();function ry({a:r,b:o}){return{"a - b":r-o}}var m_=class extends A{constructor(o){super({i:["a","b"],o:["a - b"]},{},o,Px)}f(o,t){t(ry(o))}};l();var h_=class extends A{constructor(o){super({i:["a","b"],o:["a"]},{},o,nb)}f({a:o,b:t},e){e({a:[...o,t]})}};l();var f_=class extends A{constructor(o){super({i:["a","i"],o:["a[i]"]},{},o,kx)}f({a:o,i:t},e){t>=0&&t<o.length?e({"a[i]":o[t]}):e(void 0,"index out of boundary")}};l();var g_=class extends A{constructor(o){super({i:["a"],o:["a","head"]},{},o,ib)}f({a:o},t){if(!o.length){t(void 0,"cannot behead empty array");return}let e=[...o],n=e.shift();t({a:e,head:n})}};l();var b_=class extends A{constructor(o){super({i:["a","b"],o:["ab"]},{},o,Cx)}f({a:o,b:t},e){e({ab:o.concat(t)})}};l();var y_=class extends A{constructor(o){super({i:["a","value","start","end"],o:["a"]},{},o,ob)}f({a:o,value:t,start:e,end:n},i){i({a:o.fill(t,e,n)})}};l();var v_=class extends A{constructor(o){super({i:["a[]","a"],o:["i"]},{},o,sb)}f({"a[]":o,a:t},e){e({i:o.indexOf(t)})}};l();var x_=class extends A{constructor(o){super({i:["n","a"],o:["a[]"]},{},o,Ix)}f({a:o,n:t},e){e({"a[]":new Array(t).fill(o)})}};l();var I_=class extends A{constructor(o){super({i:["a","i","b"],o:["a"]},{},o,Tx)}f({a:o,i:t,b:e},n){let i=[...o];i.splice(t,0,e),n({a:i})}};l();var S_=class extends A{constructor(o){super({i:["a","sep"],o:["str"]},{},o,Ax)}f({a:o,sep:t},e){let n=o.join(t);e({str:n})}};l();var D_=class extends A{constructor(o){super({i:["a"],o:["length"]},{},o,rb)}f(o,t){t(k1(o))}};l();var E_=class extends A{constructor(o){super({i:["a"],o:["a","last"]},{},o,Mx)}f({a:o},t){if(o.length>0){let e=[...o],n=e.pop();t({a:e,last:n})}else t(void 0,"cannot pop empty array")}};l();var w_=class extends A{constructor(o){super({i:["a","b"],o:["a"]},{},o,Ox)}f({a:o,b:t},e){e({a:[t,...o]})}};l();var P_=class extends A{constructor(o){super({i:["a","v","i"],o:["a"]},{},o,$x)}f({a:o,v:t,i:e},n){if(e<o.length){let i=[...o];i[e]=t,n({a:i})}else n(void 0,"index out of boundary")}};l();l();function ay({a:r,start:o,count:t}){let e=[...r],n=e.splice(o,t);return{a:e,removed:n}}var k_=class extends A{constructor(o){super({i:["a","start","count"],o:["a","removed"]},{},o,Lx)}f(o,t){t(ay(o))}};l();l();function _y({a:r,begin:o,end:t}){return{a:r.slice(o,t)}}var C_=class extends A{constructor(o){super({i:["a","begin","end"],o:["a"]},{},o,ab)}f(o,t){t(_y(o))}};l();l();var dt=class extends qt{constructor({fi:t=[],fo:e=[],i:n=[],o:i=[]},s={},a,_){super({i:[...t,...n],o:[...e,...i]},s,a,_);this._i_input_err=!1;this._done=(t,e=null)=>{this._functional._done(t,e)};let c=this,p=new class extends A{constructor(m){super({i:t,o:e},{},m,`${_}__internal__functional`)}f(m,h){c.f(m,h)}d(){c.d()}}(this.__system);this._functional=p,p.play();let u=new class extends qt{constructor(m){super({i:n,o:i},{},m,`${_}__internal__primitive`)}onDataInputData(m,h){c.onIterDataInputData(m,h)}onRefInputData(m,h){c.onIterRefInputData(m,h)}onDataInputDrop(m){c.onIterDataInputDrop(m)}onRefInputDrop(m){c.onIterRefInputDrop(m)}onDataOutputDrop(m){c.onIterDataOutputDrop(m)}onRefOutputDrop(m){c.onIterRefOutputDrop(m)}onDataInputInvalid(m){c.onIterDataInputInvalid(m)}onRefInputInvalid(m){c.onIterRefInputInvalid(m)}}(this.__system);u.play(),this._primitive=u;for(let d of t)p.setInput(d,this.getInput(d),this.getInputOpt(d));for(let d of e)p.setOutput(d,this.getOutput(d),this.getOutputOpt(d));for(let d of n)u.setInput(d,this.getInput(d),this.getInputOpt(d));for(let d of i)u.setOutput(d,this.getOutput(d),this.getOutputOpt(d));p.addListener("err",d=>{this.err(d)}),p.addListener("take_err",()=>{this.takeErr()}),this.addListener("take_err",()=>{p.takeErr()}),this.addListener("take_caught_err",()=>{p.takeCaughtErr()}),this._f_i=new Set(t),this._f_o=new Set(e),this.addListener("set_input",(d,m,h,f)=>{this._f_i.add(d),p.addInput(d,m,h)}),this.addListener("set_output",(d,m,h,f)=>{this._f_o.add(d),p.addOutput(d,m,h)})}f(t,e){}d(){this.fd()}fd(){}onIterDataInputData(t,e){}onIterRefInputData(t,e){}onIterDataInputDrop(t){}onIterRefInputDrop(t){}onIterDataOutputDrop(t){}onIterRefOutputDrop(t){}onIterDataInputInvalid(t){}onIterRefInputInvalid(t){}};l();function K6(r,o,t=[]){for(t.push(r);t.length;){let e=t.shift();o(e),e.left&&t.push(e.left),e.right&&t.push(e.right)}}function W6(r){let o=null;return K6(r,t=>{(!t.left||!t.right)&&(o||(o=t))}),o}function py(r){let o=null;return K6(r,t=>{o=t}),o}function bb(r,o){let{value:t,left:e,right:n}=r;o(t),e&&bb(e,o),n&&bb(n,o)}function q6(r,o){return G(this,null,function*(){let t=[];do{t.push(r.value);let e=py(r);r=yield Y6(e,o),r&&(r.value=e.value,yield yb(r,o)),r=r&&Ii(r)}while(r);return t})}function zr(r,o){let{parent:t,left:e,right:n}=r,i=Ii(r),s=py(i);return s.parent&&(s.parent.left===s?s.parent.left=null:s.parent.right=null),r.parent=null,r.left=null,r.right=null,s===i?null:s===r?t&&Ii(t)||null:(s.parent=t,t?(t.left===r?t.left=s:t.right=s,vb(s,o)):(s!==e&&(s.left=e,e&&(e.parent=s)),s!==n&&(s.right=n,n&&(n.parent=s)),T_(s,o)),Ii(s))}function Y6(r,o){return G(this,null,function*(){let{parent:t,left:e,right:n}=r,i=Ii(r),s=py(i);return s.parent&&(s.parent.left===s?s.parent.left=null:s.parent.right=null),r.parent=null,r.left=null,r.right=null,s===i?null:s===r?t&&Ii(t)||null:(s.parent=t,t?(t.left===r?t.left=s:t.right=s,yield cy(s,o)):(s!==e&&(s.left=e,e&&(e.parent=s)),s!==n&&(s.right=n,n&&(n.parent=s)),yield yb(s,o)),Ii(s))})}function T_(r,o){let{parent:t,value:e,left:n,right:i}=r,s=!n||o(e,n.value),a=!i||o(e,i.value),_=()=>{r.left=i.left,i.left&&(i.left.parent=r),r.right=i.right,i.right&&(i.right.parent=r),i.left=n,n.parent=i,i.right=r,r.parent=i,i.parent=t,t&&(t.left===r?t.left=i:t.right=i),T_(r,o)},c=()=>{r.left=n.left,n.left&&(n.left.parent=r),r.right=n.right,n.right&&(n.right.parent=r),r.parent=n,n.left=r,n.right=i,n.parent=t,t&&(t.left===r?t.left=n:t.right=n),i&&(i.parent=n),T_(r,o)};if(n&&i)s&&a||(s?_():a||o(n.value,i.value)?c():_());else if(n)s||c();else return null}function yb(r,o){return G(this,null,function*(){let{parent:t,value:e,left:n,right:i}=r,s=!n||(yield o(e,n.value)),a=!i||(yield o(e,i.value)),_=()=>G(this,null,function*(){r.left=i.left,i.left&&(i.left.parent=r),r.right=i.right,i.right&&(i.right.parent=r),i.left=n,n.parent=i,i.right=r,r.parent=i,i.parent=t,t&&(t.left===r?t.left=i:t.right=i),yield yb(r,o)}),c=()=>G(this,null,function*(){r.left=n.left,n.left&&(n.left.parent=r),r.right=n.right,n.right&&(n.right.parent=r),r.parent=n,n.left=r,n.right=i,n.parent=t,t&&(t.left===r?t.left=n:t.right=n),i&&(i.parent=n),yield yb(r,o)});if(n&&i)s&&a||(s?yield _():a?yield c():(yield o(n.value,i.value))?yield c():yield _());else if(n)s||(yield c());else return null})}function vb(r,o){if(r.parent&&o(r.value,r.parent.value)){let{parent:t,left:e,right:n}=r;r.parent=t.parent;let i=t.left===r;return t.parent&&(t.parent.left===t?t.parent.left=r:t.parent.right=r),t.parent=r,i?(r.left=t,r.right=t.right,t.right&&(t.right.parent=r)):(r.right=t,r.left=t.left,t.left&&(t.left.parent=r)),t.left=e,e&&(e.parent=t),t.right=n,n&&(n.parent=t),vb(r,o),t}return null}function cy(r,o){return G(this,null,function*(){if(r.parent&&(yield o(r.value,r.parent.value))){let{parent:t,left:e,right:n}=r;r.parent=t.parent;let i=t.left===r;return t.parent&&(t.parent.left===t?t.parent.left=r:t.parent.right=r),t.parent=r,i?(r.left=t,r.right=t.right,t.right&&(t.right.parent=r)):(r.right=t,r.left=t.left,t.left&&(t.left.parent=r)),t.left=e,e&&(e.parent=t),t.right=n,n&&(n.parent=t),yield cy(r,o),t}return null})}function A_(r,o,t){if(r===null)return o;for(;o;){let e=zr(o,t),n=W6(r);n.left?n.right=o:n.left=o,o.parent=n,vb(o,t),o=e}return Ii(r)}function X6(r,o,t){return G(this,null,function*(){if(r===null)return o;for(;o;){let e=yield Y6(o,t),n=W6(r);n.left?n.right=o:n.left=o,o.parent=n,yield cy(o,t),o=e}return Ii(r)})}function uy(r,o,t){let{parent:e,left:n,right:i}=r;return r.value=o,e?t(e.value,o)?T_(r,t):vb(r,t):T_(r,t),Ii(r)}function Ii(r){return r.parent?Ii(r.parent):r}l();var M_=class{constructor(o=void 0){this._data=void 0;this._callback=[];this._data=o}set(o){this._data=o;for(let t of this._callback)t(o);this._callback=[]}clear(){this._data=void 0}once(){return G(this,null,function*(){return this._data!==void 0?this._data:new Promise((o,t)=>{let e=()=>{o(this._data)};this._callback.push(e)})})}};var O_=class extends dt{constructor(t){super({fi:["a"],fo:["b"],i:["a[i] < a[j]"],o:["a[i]","a[j]"]},{},t,Ux);this._forward_waiter=new M_;this._backward_waiter=new M_;this._predicate=(t,e)=>G(this,null,function*(){this._forwarding=!0,this._output["a[i]"].push(t),this._output["a[j]"].push(e),this._forwarding=!1;let n=yield this._forward_waiter.once();return this._forward_waiter.clear(),this._input["a[i] < a[j]"].pull(),yield this._backward_waiter.once(),this._backward_waiter.clear(),n})}f(n,i){return G(this,arguments,function*({a:t},e){let s=null;for(let _ of t)s=yield X6(s,{parent:null,left:null,right:null,value:_},this._predicate);let a=s?yield q6(s,this._predicate):[];e({b:a})})}onIterDataInputData(t,e){switch(t){case"a[i] < a[j]":{this._forward_waiter.set(e);break}}}onIterDataOutputDrop(t){this._forwarding||this._output["a[i]"].empty()&&this._output["a[j]"].empty()&&this._backward_waiter.set(!0)}};l();var $_=class extends A{constructor(o){super({i:["a","b"],o:["a & b"]},{},o,Gx)}f({a:o,b:t},e){e({"a & b":o&t})}};l();var L_=class extends A{constructor(o){super({i:["a"],o:["~a"]},{},o,Rx)}f({a:o},t){t({"~a":~o})}};l();var U_=class extends A{constructor(o){super({i:["a","b"],o:["a | b"]},{},o,Nx)}f({a:o,b:t},e){e({"a | b":o||t})}};l();var G_=class extends A{constructor(o){super({i:["a","b"],o:["a ^ b"]},{},o,zx)}f({a:o,b:t},e){e({"a ^ b":o^t})}};l();var R_=class extends A{constructor(o){super({i:["a","b"],o:["a = b"]},{},o,Fx)}f({a:o,b:t},e){e({"a = b":li(o,t)})}};l();var N_=class extends A{constructor(o){super({i:["a","b"],o:["a > b"]},{},o,Bx)}f({a:o,b:t},e){e({"a > b":o>t})}};l();var z_=class extends A{constructor(o){super({i:["a","b"],o:["a \u2265 b"]},{},o,Hx)}f({a:o,b:t},e){e({"a \u2265 b":o>=t})}};l();var F_=class extends A{constructor(o){super({i:["a","b"],o:["a < b"]},{},o,jx)}f({a:o,b:t},e){e({"a < b":o<t})}};l();var B_=class extends A{constructor(o){super({i:["a","b"],o:["a \u2264 b"]},{},o,Vx)}f({a:o,b:t},e){e({"a \u2264 b":o<=t})}};l();var H_=class extends A{constructor(o){super({i:["a","b"],o:["a \u2260 b"]},{},o,Kx)}f({a:o,b:t},e){e({"a \u2260 b":!li(o,t)})}};l();var j_=class extends qt{constructor(t){super({i:["a"],o:["a"]},{},t,Wx);this._current=void 0;this.addListener("reset",()=>{this._current=void 0})}onDataInputData(t,e){this._current=e,this._output.a.push(e)}onDataInputDrop(t){this._backwarding||(this._forward_all_empty(),this._current=void 0)}onDataOutputDrop(t){this._forwarding_empty||this._output.a.push(this._current)}onDataInputInvalid(t){this._invalidate()}};l();var V_=class extends qt{constructor(t){super({i:["a","d"],o:["a"]},{},t,qx);this._current=void 0;this.addListener("reset",()=>{this._current=void 0})}onDataInputData(t,e){t==="a"?(this._current=e,this._input.d.empty()||this._invalidate()):t==="d"&&this._input.a.empty()&&(this._current=e),this._forward_if_ready()}_forward_if_ready(){for(;!this._forwarding&&!this._backwarding&&this._active_o_count-this._o_invalid_count===0&&this._current!==void 0;)this._forward("a",this._current)}_done(){this._backwarding=!0,this._input.a.empty()?this._input.d.pull():this._input.a.pull(),this._backwarding=!1}onDataInputDrop(t){t==="a"?this._input.d.empty()?(this._current=void 0,this._forward_all_empty()):(this._current=this._input.d.peak(),this._invalidate(),this._forward_if_ready()):this._input.a.empty()&&(this._current=void 0,this._forward_all_empty())}onDataOutputDrop(t){this._current=void 0,this._done(),this._input.a.empty()?this._input.d.empty()||(this._current=this._input.d.peak(),this._forward_if_ready()):(this._current=this._input.d.peak(),this._forward_if_ready())}onDataInputInvalid(t){this._invalidate()}};l();var K_=class extends A{constructor(o){super({i:["a"],o:["a"]},{},o,Yx)}f({a:o},t){t({a:o})}};l();var W_=class extends A{constructor(o){super({i:["a","b"],o:["a if b"]},{},o,Xx)}f({a:o,b:t},e){e(t===!0?{"a if b":o}:{"a if b":void 0})}};l();var q_=class extends qt{constructor(t){super({i:["init","next"],o:["local","current"]},{},t,Jx);this._current=void 0;this._next=void 0;this.addListener("reset",this._reset)}_reset(){this._current=void 0,this._next=void 0}onDataInputData(t,e){t==="init"?(this._current=e,this._output.local.push(e),this._output.current.push(e)):t==="next"&&(this._current=e,this._next=!0,this._output.current.push(e),this._input.next.pull(),this._output.local.empty()&&(this._output.local.push(this._current),this._next=void 0))}onDataInputDrop(t){if(!this._backwarding&&t==="init"){this._reset(),this._forward_all_empty();return}}onDataOutputDrop(t){this._forwarding_empty||(t==="current"?(this._output.local.pull(),this._input.init.pull()):t==="local"&&this._next===!0&&(this._next=!1,this._output.local.push(this._current)))}onDataInputInvalid(t){t==="init"&&(this._reset(),this._output.local.invalidate()),this._output.current.invalidate()}snapshotSelf(){return _t(S({},super.snapshotSelf()),{_current:this._current,_next:this._next})}restoreSelf(t){let s=t,{_current:e,_next:n}=s,i=_n(s,["_current","_next"]);super.restoreSelf(i),this._current=e,this._next=n}};l();var Y_=class extends qt{constructor(t){super({i:["init","next","test"],o:["local","current","final"]},{},t,Zx);this._current=void 0;this._next=void 0;this._test=void 0;this._looping=!1;this._nexting=!1;this.addListener("reset",this._reset)}_reset(){this._current=void 0,this._next=void 0,this._nexting=!1,this._looping=!1}onDataInputData(t,e){t==="init"?(this._current=e,this._output.local.push(e),this._forward_if_ready()):t==="next"?this._next===void 0&&this._current!==void 0&&this._input.test.peak()&&(this._next=e,this._pull_next()):t==="test"&&(this._test=e,this._current!==void 0&&this._forward_if_ready())}onDataInputDrop(t){if(!this._backwarding){if(t==="next")return;if(t==="test"){this._test=void 0,this._next=void 0,this._forward_empty("current"),this._forward_empty("final");return}if(t==="init"){this._reset(),this._forward_all_empty();return}}}onDataOutputDrop(t){this._forwarding_empty||(t==="current"?this._next!==void 0&&this._loop():t==="local"?this._current===void 0?this._done():this._looping&&(this._looping=!1,this._output.local.push(this._current),this._test!==void 0&&this._forward_if_ready()):(this._current=void 0,this._backward("test"),this._output.local.empty()&&this._done()))}onDataInputInvalid(t){t==="init"?(this._reset(),this._output.local.invalidate()):t==="test"&&(this._nexting=!1,this._next=void 0),this._output.current.invalidate(),this._output.final.invalidate()}_pull_next(){this._nexting=!1,this._input.next.pull(),this._output.current.empty()&&this._loop()}_loop(){this._looping=!0,this._current=this._next,this._next=void 0,this._backward("test"),this._looping&&this._output.local.empty()&&(this._looping=!1,this._output.local.push(this._current),this._forward_if_ready())}_iterate(){if(this._forwarding=!0,this._input.test.peak()){this._nexting=!0,this._output.current.push(this._current);let t=this._input.next.peak();this._next===void 0&&t!==void 0&&(this._next=t,this._pull_next())}else this._output.final.push(this._current),this._output.current.pull();this._forwarding=!1}_done(){this._reset(),this._backward("init")}_forward_if_ready(){for(;!this._forwarding&&!this._looping&&!this._nexting&&this._current!==void 0&&!this._input.test.empty()&&!this._input.test.invalid()&&(this._output.current.empty()||this._output.current.invalid())&&(this._output.final.empty()||this._output.final.invalid());)this._iterate()}snapshotSelf(){return _t(S({},super.snapshotSelf()),{_current:this._current,_next:this._next,_test:this._test,_nexting:this._nexting,_looping:this._looping})}restoreSelf(t){let c=t,{_current:e,_next:n,_test:i,_nexting:s,_looping:a}=c,_=_n(c,["_current","_next","_test","_nexting","_looping"]);super.restoreSelf(_),this._current=e,this._next=n,this._test=i,this._nexting=s,this._looping=a}};l();var X_=class extends qt{constructor(t){super({i:["a"],o:["a"]},{},t,Qx);this._current=void 0;this.addListener("reset",()=>{this._current=void 0})}onDataInputData(t,e){this._current=e,this._forward_if_ready()}_forward_if_ready(){for(;!this._forwarding&&!this._backwarding&&this._current!==void 0;)this._forward("a",this._current),this._current=void 0,this._backward_all()}onDataOutputDrop(t){this._current=void 0}onDataInputInvalid(t){this._invalidate()}};l();var J_=class extends qt{constructor(t){super({i:["a"],o:["0","1"]},{},t,t8);this._current=void 0;this._looping=!1}onDataInputData(t,e){this._output[1].empty()||(this._forwarding_empty=!0,this._output[1].pull(),this._forwarding_empty=!1),this._current=e,this._forward_if_ready()}_forward_if_ready(){for(;!this._forwarding&&!this._backwarding&&!this._looping&&this._current!==void 0;)this._looping=!0,this._forwarding=!0,this._output[0].push(this._current),this._forwarding=!1}onDataInputDrop(t){this._backwarding||(this._current=void 0,this._looping=!1,this._output[0].pull(),this._output[1].pull())}onDataInputInvalid(t){this._looping=!1,this._output[0].invalidate(),this._output[1].invalidate()}onDataOutputDrop(t){t==="0"?this._current!==void 0&&(this._forwarding=!0,this._output[1].push(this._current),this._forwarding=!1):this._looping=!1,this._backward_if_ready(),this._forward_if_ready()}_backward_if_ready(){this._current!==void 0&&!this._forwarding&&!this._forwarding_empty&&!this._looping&&(this._current=void 0,this._backward_all())}snapshotSelf(){return _t(S({},super.snapshotSelf()),{_looping:this._looping,_current:this._current})}restoreSelf(t){let s=t,{_looping:e,_current:n}=s,i=_n(s,["_looping","_current"]);super.restoreSelf(i),this._looping=e,this._current=n}};l();var Z_=class extends A{constructor(o){super({i:["message"]},{},o,e8)}f({message:o},t){t(void 0,o)}};l();var Q_=class extends dt{constructor(o){super({fi:["a"],fo:["a"],i:["b"],o:[]},{},o,n8)}f({a:o},t){this._input.b.peak()===!0&&t({a:o})}onIterDataInputData(o,t){if(t===!0){let e=this._input.a.peak();e!==void 0&&this._done({a:e})}}};l();var tp=class extends A{constructor(o){super({i:["a"]},{},o,i8)}f({},o){o()}};l();var ep=class extends A{constructor(o){super({i:["a","b"],o:["a"]},{},o,o8)}f({a:o},t){t({a:o})}};l();var np=class extends A{constructor(o){super({i:["str"],o:["a"]},{},o,s8)}f({str:o},t){let{specs:e,classes:n}=this.__system;t({a:Zt(o,e,n)})}};l();var ip=class extends A{constructor(o){super({i:["a"],o:["str"]},{},o,r8)}f({a:o},t){t({str:Ot(o)})}};l();var op=class extends A{constructor(o){super({i:["a"],o:["type"]},{},o,a8)}f({a:o},t){switch(typeof o){case"number":return t({type:"number"});case"boolean":return t({type:"boolean"});case"function":return t({type:"class"});case"object":return o===null?t({type:"null"}):o instanceof cn?t({type:"unit"}):Array.isArray(o)?t({type:"array"}):t({type:"object"});case"string":return t({type:"string"});case"symbol":return t({type:"symbol"});case"undefined":return t({type:"undefined"});default:return t({type:"undefined"})}}};l();var sp=class extends A{constructor(o){super({i:["any"],o:["now"]},{},o,_8)}f({any:o},t){t({now:new Date().getTime()})}};l();var rp=class extends A{constructor(o){super({i:["id","class","graph"],o:[]},{input:{graph:{ref:!0}}},o,p8)}f({id:o,class:t,graph:e},n){try{let{__bundle:i}=t,{unit:s}=i,{id:a,input:_={}}=s,c=Wt(i.specs,this.__system.specs),p=Bt(c,a),u={id:a,input:{},output:{}},{inputs:d={},outputs:m={}}=p;for(let h in d){u.input[h]=u.input[h]||{};let f=_[h];if(f){let{data:v}=f;u.input[h].data=v}let b=d[h],{defaultIgnored:g}=b;g&&(u.input[h].ignored=g)}for(let h in m){let f=m[h],{defaultIgnored:b}=f;b&&(u.output[h]=u.output[h]||{},u.output[h].ignored=b)}e.addUnitSpec(o,{unit:u})}catch(i){n(void 0,i.message);return}n()}};l();var ap=class extends A{constructor(o){super({i:["id","class","graph"],o:["graph"]},{},o,c8)}f({id:o,class:t,graph:e},n){var s;let i;try{let{__bundle:a}=t,{unit:_}=a,{id:c,input:p={}}=_,u=Wt((s=a.specs)!=null?s:{},this.__system.specs),d=Bt(u,c),m={id:c,input:{},output:{}},{inputs:h={},outputs:f={}}=d;for(let I in h){m.input[I]=m.input[I]||{};let E=p[I];if(E){let{data:T}=E;m.input[I].data=T}let D=h[I],{defaultIgnored:w}=D;w&&(m.input[I].ignored=w)}for(let I in f){let E=f[I],{defaultIgnored:D}=E;D&&(m.output[I]=m.output[I]||{},m.output[I].ignored=D)}let b=xn(u),g=Bt(u,e.__bundle.unit.id),v=_t(S({},g),{id:b});Mo({unitId:o,unit:m},v);let x=hi(v,u);i=Fi(x,u)}catch(a){n(void 0,a.message);return}n({graph:i})}};l();l();function Fr(r,o=!1){let t=r.getUnitBundleSpec(o);return ti(r.constructor,t)}var _p=class extends A{constructor(o){super({i:["id","graph"],o:[]},{input:{graph:{ref:!0}}},o,u8)}f({id:o,graph:t},e){let n;try{let i=t.getUnit(o);t.removeUnit(o,!0),n=Fr(i)}catch(i){e(void 0,i.message);return}e({class:n})}};l();var pp=class extends A{constructor(o){super({i:["graph","id","type","name","data"],o:[]},{input:{graph:{ref:!0}}},o,d8)}f({graph:o,id:t,type:e,name:n,data:i},s){try{o.setUnitPinData(t,e,n,i)}catch(a){s(void 0,a.message);return}s()}};l();var cp=class extends A{constructor(o){super({i:["any"],o:["uuid"]},{},o,l8)}f({any:o},t){t({uuid:eo()})}};l();var up=class extends A{constructor(o){super({i:["json","space"],o:["string"]},{},o,m8)}f({json:o,space:t},e){e({string:JSON.stringify(o,null,t)})}};l();var dp=class extends A{constructor(o){super({i:["string"],o:["json"]},{},o,h8)}f({string:o},t){let e;try{e=JSON.parse(o)}catch(n){t(void 0,"invalid JSON");return}t({json:e})}};l();var lp=class extends A{constructor(o){super({i:["json"],o:["string"]},{},o,f8)}f({json:o},t){t({string:JSON.stringify(o)})}};l();var mp=class extends A{constructor(o){super({i:["a","b"],o:["a and b"]},{},o,g8)}f({a:o,b:t},e){e({"a and b":o&&t})}};l();var hp=class extends A{constructor(o){super({i:["a"],o:["!a"]},{},o,b8)}f({a:o},t){t({"!a":!o})}};l();var fp=class extends A{constructor(o){super({i:["a","b"],o:["a or b"]},{},o,y8)}f({a:o,b:t},e){e({"a or b":o||t})}};l();var gp=class extends A{constructor(o){super({i:["a"],o:["|a|"]},{},o,v8)}f({a:o},t){t({"|a|":Math.abs(o)})}};l();var bp=class extends A{constructor(o){super({i:["a"],o:["cos(a)"]},{},o,x8)}f({a:o},t){t({"cos(a)":Math.cos(o)})}};l();var yp=class extends A{constructor(o){super({i:["a"],o:["\u230Aa\u230B"]},{},o,I8)}f({a:o},t){t({"\u230Aa\u230B":Math.floor(o)})}};l();var vp=class extends A{constructor(o){super({i:["a","b"],o:["max"]},{},o,S8)}f({a:o,b:t},e){e({max:Math.max(o,t)})}};l();var xp=class extends A{constructor(o){super({i:["a","b"],o:["min"]},{},o,D8)}f({a:o,b:t},e){e({min:Math.min(o,t)})}};l();var Ip=class extends A{constructor(o){super({i:["any"],o:["PI"]},{},o,E8)}f({any:o},t){t({PI:Math.PI})}};l();var Sp=class extends A{constructor(o){super({i:["a","b"],o:["a ** b"]},{},o,w8)}f({a:o,b:t},e){e({"a ** b":Math.pow(o,t)})}};l();var Dp=class extends A{constructor(o){super({i:["any"],o:["random"]},{},o,P8)}f({a:o},t){t({random:Math.random()})}};l();var Ep=class extends A{constructor(o){super({i:["a"],o:["sign(a)"]},{},o,_b)}f({a:o},t){t({"sign(a)":Math.sign(o)})}};l();var wp=class extends A{constructor(o){super({i:["a"],o:["sin(a)"]},{},o,k8)}f({a:o},t){t({"sin(a)":Math.sin(o)})}};l();var Pp=class extends A{constructor(o){super({i:["a"],o:["\u221Aa"]},{},o,C8)}f({a:o},t){o<0?t(void 0,"cannot square root negative number"):t({"\u221Aa":Math.sqrt(o)})}};l();var kp=class extends A{constructor(o){super({i:["graph","opt"],o:["bundle"]},{input:{graph:{ref:!0}}},o,T8)}f({graph:o,opt:t},e){let{stringifyBundleData:n}=this.__system,{snapshot:i=!1}=t,s=o.getBundleSpec(i),a=B(s);n(a),e({bundle:a})}};l();var Cp=class extends qt{constructor(t){super({i:["unit"],o:["err"]},{input:{unit:{ref:!0}}},t,A8)}onRefInputData(t,e){let{unlisten:n,done:i}=e.catch(a=>{a===null?this._forward_all_empty():this._output.err.push(a)});this._unlisten=n,this._done=i;let s=e.caughtErr();s!==null&&this._output.err.push(s)}onRefInputDrop(t){this._unlisten(),this._unlisten=void 0,this._done=void 0,this._forward_all_empty()}onDataOutputDrop(t){!this._backwarding&&!this._forwarding_empty&&this._done()}};l();var Tp=class extends A{constructor(o){super({i:["unit","deep"],o:["class"]},{input:{unit:{ref:!0}}},o,pb)}f({unit:o,deep:t},e){let n=Fr(o,t);e({class:n})}};l();var Ap=class extends A{constructor(o){super({i:["class"],o:["id"]},{},o,M8)}f({class:o},t){let{__bundle:e}=o,{id:n}=e.unit;t({id:n})}};l();var Mp=class extends A{constructor(o){super({i:["unit","method","args"],o:["return"]},{input:{unit:{ref:!0}}},o,O8)}f({unit:o,method:t,args:e},n){let i=o[t],s;if(typeof i=="function")try{s=i.call(o,...e)}catch(a){n(void 0,a.message);return}else{n(void 0,"invalid method");return}n({return:s})}};l();var Op=class extends cn{constructor(o){super({i:[],o:[]},{},o,$8)}subscribe(o,t,e){return this.__system.global.data.subscribe(o,t,e)}get(o){return G(this,null,function*(){return this.__system.global.data.get(o)})}set(o,t){return G(this,null,function*(){return this.__system.global.data.set(o,t)})}delete(o){return G(this,null,function*(){return this.__system.global.data.delete(o)})}pathSet(o,t,e){return G(this,null,function*(){return this.__system.global.data.pathSet(o,t,e)})}pathGet(o,t){return G(this,null,function*(){return this.__system.global.data.pathGet(o,t)})}pathDelete(o,t){return G(this,null,function*(){return this.__system.global.data.pathDelete(o,t)})}keys(){return G(this,null,function*(){return this.__system.global.data.keys()})}hasKey(o){return G(this,null,function*(){return this.__system.global.data.hasKey(o)})}};l();var $p=class extends A{constructor(o){super({i:["id"],o:["class"]},{},o,L8)}f({id:o},t){let e=Vn(o,this.__system.specs,this.__system.classes);t({class:e})}};l();var Lp=class extends A{constructor(o){super({i:["id"],o:["spec"]},{},o,U8)}f({id:o},t){if(this.__system){let{specs:e}=this.__system,n=e[o];n?t({spec:n}):t(void 0,"cannot find spec with this id")}else t(void 0,"not attached")}};l();var Up=class extends A{constructor(o){super({i:["class"],o:["unit"]},{output:{unit:{ref:!0}}},o,G8)}f({class:o},t){t({unit:new o(this.__system)})}};l();l();function J6(r){return ko(r)?r:{}}var Gp=class extends A{constructor(t){super({i:["obj","key"],o:["value"]},{input:{obj:{ref:!0}},output:{value:{ref:!0}}},t,R8)}f(i,s){return G(this,arguments,function*({obj:t,key:e},n){let a;try{a=yield t.get(e)}catch(c){n(void 0,c.message);return}this._unlisten=t.subscribe([],e,(c,p,u)=>{c==="delete"&&(this.err("key value not found"),this._forward_empty("value"))});let _=new class extends ht{read(){return G(this,null,function*(){return a=yield t.get(e),J6(a)})}write(p){return G(this,null,function*(){return t.set(e,p)})}}(this.__system);n({value:_})})}d(){this._unlisten&&(this._unlisten(),this._unlisten=void 0)}};l();l();function _i(r,o,t=[]){return new class extends ht{constructor(s){super(s);this.__async=!0;this.__=t;for(let a of Object.keys(o)){let _=o[a];this[a]=_}}}(r)}l();function xb(r,o){let t=new Po(r);return{get(e){throw new $},set(e,n){return t.pathSet(["current"],e,n)},delete(e){throw new $},hasKey(e){throw new $},keys(){throw new $},pathGet(e,n){throw new $},pathSet(e,n,i){throw new $},pathDelete(e,n){throw new $},subscribe(e,n,i){return t.subscribe(["current",...e],n,i)}}}var Rp=class extends A{constructor(o){super({i:["unit"],o:["obj"]},{input:{unit:{ref:!0}},output:{obj:{ref:!0}}},o,N8)}f(e,n){return G(this,arguments,function*({unit:o},t){var u;let{global:{scope:i}}=this.__system,{__global_id:s}=o;i[s]=(u=i[s])!=null?u:{};let _={current:i[s]},c=xb(_,this.__system),p=_i(this.__system,c,["J"]);t({obj:p})})}};l();var Np=class extends qt{constructor(t){super({i:["a"],o:["a"]},{},t,z8);this._ran=!1}onDataInputData(t,e){this._paused||this._ran||(this._ran=!0,this._output.a.push(e))}};l();var zp=class extends A{constructor(o){super({i:["unit","any"],o:["spec"]},{input:{unit:{ref:!0}}},o,F8)}f({unit:o},t){let e=o.getSpec();t({spec:e})}};l();var Fp=class extends A{constructor(o){super({i:["any"],o:["specs"]},{},o,B8)}f({any:o},t){let{specs:e}=this.__system;t({specs:e})}};l();var Bp=class extends cn{constructor(t){super({i:[],o:["graph"]},{},t,H8);this.addListener("parent",e=>{e===null?(this._unlisten&&(this._unlisten(),this._unlisten=void 0),this._output.graph.pull()):this._output.graph.push(e)})}};l();var Hp=class extends cn{constructor(o){super({i:[],o:[]},{},o,j8)}};l();l();var Bi=class extends A{f(o,t){let e;try{e=this.m(o)}catch(n){t(void 0,n.message);return}t(e)}m(o){}};var jp=class extends Bi{constructor(o){super({i:["n","radix"],o:["str"]},{},o,V8)}m({n:o,radix:t}){return{str:o.toString(t)}}};l();var Vp=class extends Bi{constructor(o){super({i:["str"],o:["n"]},{},o,K8)}m({str:o}){let t=Number.parseFloat(o);if(isNaN(t))throw"invalid number string";return{n:t}}};l();var Kp=class extends Bi{constructor(o){super({i:["str","radix"],o:["n"]},{},o,W8)}m({str:o,radix:t}){let e=Number.parseInt(o,t);if(isNaN(e))throw"invalid number string";return{n:e}}};l();var Wp=class extends Bi{constructor(o){super({i:["a","b"],o:["ab"]},{},o,q8)}m({a:o,b:t}){return{ab:pn(o,t)}}};l();var qp=class extends A{constructor(o){super({i:["obj","key"],o:["obj"]},{},o,cb)}f({obj:o,key:t},e){e({obj:ro(o,t)})}};l();var Yp=class extends A{constructor(o){super({i:["obj","key"],o:["value"]},{},o,Y8)}f({obj:o,key:t},e){o.hasOwnProperty(t)?e({value:o[t]}):e(void 0,"key not found in object")}};l();var Xp=class extends A{constructor(o){super({i:["obj","key"],o:["has"]},{},o,X8)}f({obj:o,key:t},e){e({has:o.hasOwnProperty(t)})}};l();var Jp=class extends A{constructor(o){super({i:["obj"],o:["keys"]},{},o,ub)}f(o,t){t(fr(o))}};l();var Zp=class extends A{constructor(o){super({i:["a","b"],o:["ab"]},{},o,J8)}f({a:o,b:t},e){e({ab:oo(o,t)})}};l();var Qp=class extends A{constructor(o){super({i:["obj","key","value"],o:["obj"]},{},o,Z8)}f({obj:o,key:t,value:e},n){this.isPinRef("input","obj")&&(o[t]=e),this.isPinRef("output","obj")?n({obj:o}):n({obj:ni(o,t,e)})}};l();var tc=class extends A{constructor(o){super({i:["obj"],o:["values"]},{},o,Q8)}f({obj:o},t){t({values:Object.values(o)})}};l();var ec=class extends A{constructor(o){super({i:["str"],o:["obj"]},{},o,t3)}f({str:o},t){let{api:{querystring:{parse:e}}}=this.__system,n;try{n=e(o)}catch(i){t(void 0,i.message);return}t({obj:n})}};l();var nc=class extends A{constructor(o){super({i:["obj"],o:["str"]},{},o,e3)}f({obj:o},t){let{api:{querystring:{stringify:e}}}=this.__system,n;try{n=e(o)}catch(i){t(void 0,i.message);return}t({str:n})}};l();var ic=class extends A{constructor(o){super({i:["a"],o:["tail","head"]},{},o,ib)}f({a:o},t){let e=o[0]||"",n=o.slice(1)||"";t({tail:n,head:e})}};l();var oc=class extends A{constructor(o){super({i:["a","i"],o:["a[i]"]},{},o,n3)}f({a:o,i:t},e){e({"a[i]":o.charAt(t)})}};l();var sc=class extends A{constructor(o){super({i:["a","b"],o:["ab"]},{},o,i3)}f({a:o,b:t},e){e({ab:o+t})}};l();var rc=class extends A{constructor(o){super({i:["code"],o:["char"]},{},o,o3)}f({code:o},t){let e=String.fromCharCode(o);t({char:e})}};l();var ac=class extends A{constructor(o){super({i:["a"],o:["length"]},{},o,rb)}f({a:o},t){t({length:o.length})}};l();var _c=class extends A{constructor(o){super({i:["a","b"],o:["a < b"]},{},o,s3)}f({a:o,b:t},e){let n=t.localeCompare(o)===1;e({"a < b":n})}};l();var pc=class extends A{constructor(o){super({i:["str","regex"],o:["match"]},{},o,r3)}f({str:o,regex:t},e){e({match:o.match(t)})}};l();var cc=class extends A{constructor(o){super({i:["str","regex","flags","with"],o:["str"]},{},o,a3)}f({str:o,regex:t,with:e,flags:n},i){i({str:o.replace(new RegExp(t,n),e)})}};l();l();function dy({a:r,begin:o,end:t}){return{a:r.slice(o,t)}}var uc=class extends A{constructor(o){super({i:["a","begin","end"],o:["a"]},{},o,ab)}f(o,t){t(dy(o))}};l();l();function ly(r,o){return r.split(o)}var dc=class extends A{constructor(o){super({i:["a","sep"],o:["parts"]},{},o,_3)}f({a:o,sep:t},e){e({parts:ly(o,t)})}};l();var lc=class extends A{constructor(o){super({i:["a","from","length"],o:["a"]},{},o,p3)}f({a:o,from:t,length:e},n){n({a:o.substring(t,t+e)})}};l();var mc=class extends A{constructor(o){super({i:["str","regex"],o:["match"]},{},o,c3)}f({str:o,regex:t},e){e({match:!!o.match(t)})}};l();var hc=class extends A{constructor(o){super({i:["A"],o:["a"]},{},o,u3)}f({A:o},t){t({a:o.toLowerCase()})}};l();var fc=class extends A{constructor(o){super({i:["a"],o:["A"]},{},o,d3)}f({a:o},t){t({A:o.toUpperCase()})}};l();var gc=class extends dt{constructor(t){super({fi:["ms"],o:["ms"],i:["done"]},{},t,db);this._interval=null;this.addListener("reset",this._reset),this.addListener("destroy",this._reset)}_reset(){this._interval!==null&&(clearInterval(this._interval),this._interval=null)}f({ms:t},e){this._reset(),this._interval=setInterval(()=>{this.pushOutput("ms",t)},t)}d(){this._reset(),this._forward_all_empty()}onIterDataInputData(t,e){this._reset(),this._done({})}};l();var bc=class extends A{constructor(t){super({i:["ms"],o:["ms"]},{},t,db);this._timer=null;this.addListener("reset",this._reset),this.addListener("destroy",this._reset)}_reset(){this._timer!==null&&(clearTimeout(this._timer),this._timer=null)}f({ms:t},e){this._reset(),this._timer=setTimeout(()=>{this._timer=null,e({ms:t})},t)}};l();var yc=class extends A{constructor(o){super({i:["unit","opt"],o:[]},{input:{unit:{ref:!0}}},o,l3)}f({unit:o,opt:t},e){o.$pause({}),e()}};l();var vc=class extends A{constructor(o){super({i:["unit","any"],o:["paused"]},{input:{unit:{ref:!0}}},o,m3)}f({unit:o},t){o.$paused({},e=>{t({paused:e})})}};l();var xc=class extends A{constructor(o){super({i:["unit","opt"],o:[]},{input:{unit:{ref:!0}}},o,h3)}f({unit:o,opt:t},e){o.$play({}),e()}};l();l();function Ib(r){let{__bundle:o}=r,t=B(o),e=ik(r);return ti(e,t)}function ik(r){class o extends r{}return Object.defineProperty(o,"name",{value:r.constructor.name}),o}var Ic=class extends A{constructor(o){super({i:["unit","name","data"],o:["unit"]},{},o,f3)}f({unit:o,name:t,data:e},n){var c;let{id:i}=o.__bundle.unit,s=Bt(Wt(this.__system.specs,(c=o.__bundle.specs)!=null?c:{}),i),{inputs:a={}}=s;if(!a[t]){n(void 0,"input not found");return}let _=Ib(o);_.__bundle.unit.input=_.__bundle.unit.input||{},_.__bundle.unit.input[t]=_.__bundle.unit.input[t]||{},_.__bundle.unit.input[t].data=Ot(e),n({unit:_})}};l();var Sc=class extends A{constructor(o){super({i:["unit","type","name","data"],o:["unit"]},{},o,g3)}f({unit:o,type:t,name:e},n){let{unit:{id:i},specs:s}=o.__bundle;if(!Bt(S(S({},s),this.__system.specs),i)[`${t}s`][e]){n(void 0,`${t} not found`);return}let _=Ib(o);_.__bundle.unit.input=_.__bundle.unit.input||{},_.__bundle.unit.input[e]=_.__bundle.unit.input[e]||{},delete _.__bundle.unit.input[e].data,n({unit:_})}};l();var Dc=class extends A{constructor(o){super({i:["message"],o:[]},{},o,b3)}f({message:o},t){let{api:{alert:{alert:e}}}=this.__system;e(o),t()}};l();var Ec=class extends A{constructor(o){super({i:["message"],o:["answer"]},{},o,y3)}f({message:o},t){let{api:{alert:{prompt:e}}}=this.__system,n=e(o);if(n===null){t(void 0,"user cancelled prompt");return}t({answer:n})}};l();var wc=class extends A{constructor(o){super({i:["b"],o:["a"]},{},o,v3)}f({b:o},t){let e;try{e=atob(o)}catch(n){t(void 0,"string not correctly enconded");return}t({a:e})}};l();var Pc=class extends A{constructor(o){super({i:["a"],o:["b"]},{},o,x3)}f({a:o},t){let e;try{e=btoa(o)}catch(n){t(void 0,"invalid string");return}t({b:e})}};l();var kc=class extends A{constructor(t){super({i:["service","uuid"],o:["charac"]},{input:{service:{ref:!0}},output:{charac:{ref:!0}}},t,I3);this._started=!1;this.addListener("listen",({event:e})=>{e==="write"&&this.startNotifications()}),this.addListener("unlisten",({event:e})=>{e==="write"&&this.stopNotification()})}f(i,s){return G(this,arguments,function*({service:t,uuid:e},n){let a=yield t.getCharacteristic(e);this._charac=a;let _=new class extends ht{read(){return G(this,null,function*(){return(yield a.readValue()).getUint8(0).toString()})}write(p){return G(this,null,function*(){let u=p.split("").map(m=>m.charCodeAt(0)),d=Uint8Array.from(u);yield a.writeValue(d)})}}(this.__system);n({charac:_})})}d(){}startNotifications(){return G(this,null,function*(){if(this._started)return;let t=this._charac;this._started=!0,t.startNotifications(),t.addEventListener("characteristicvaluechanged",e=>{let n=e.target.value,{byteLength:i}=n,s="";for(let a=0;a<i;a++)s+=String.fromCharCode(n.getUint8(a));e.stopImmediatePropagation(),this.emit("characteristicvaluechanged",s,!0)})})}stopNotification(){this._started||(this._started=!1,this._charac.stopNotifications())}};l();var Cc=class extends A{constructor(o){super({i:["opt"],o:["device"]},{output:{device:{ref:!0}}},o,S3)}f(e,n){return G(this,arguments,function*({opt:o},t){let{api:{bluetooth:{requestDevice:i}}}=this.__system,s;try{let a=yield i(o);s=new class extends ht{getServer(){return G(this,null,function*(){return a.getServer()})}}(this.__system)}catch(a){t(void 0,a.message);return}t({device:s})})}};l();var Tc=class extends A{constructor(t){super({i:["device"],o:["server"]},{input:{device:{ref:!0}},output:{server:{ref:!0}}},t,D3)}f(n,i){return G(this,arguments,function*({device:t},e){let s=yield t.getServer(),a=new class extends ht{getPrimaryService(c){return s.getPrimaryService(c)}}(this.__system);e({server:a})})}getPrimaryService(t){return this._server.getPrimaryService(t)}};l();var Ac=class extends A{constructor(o){super({i:["server","uuid"],o:["service"]},{input:{server:{ref:!0}},output:{service:{ref:!0}}},o,E3)}f(n,i){return G(this,arguments,function*({server:o,uuid:t},e){let s=yield o.getPrimaryService(t),a=new class extends ht{getCharacteristic(c){return s.getCharacteristic(c)}}(this.__system);e({service:a})})}d(){}};l();var Mc=class extends A{constructor(o){super({i:["arc","d"],o:["d"]},{},o,lb)}f({d:o,arc:{x:t,y:e,r:n,start:i,end:s,anticlockwise:a=!1}},_){_({d:[...o,["arc",t,e,n,i,s,a]]})}};l();var Oc=class extends A{constructor(o){super({i:["d","x","y"],o:["d"]},{},o,w3)}f({d:o,x:t,y:e},n){n({d:[...o,["lineTo",t,e]]})}};l();var $c=class extends A{constructor(o){super({i:["rect","d"],o:["d"]},{},o,P3)}f({d:o,rect:{x:t,y:e,width:n,height:i}},s){s({d:[...o,["rect",t,e,n,i]]})}};l();var Lc=class extends A{constructor(o){super({i:["d"],o:["d"]},{},o,k3)}f({d:o},t){t({d:[...o,["beginPath"]]})}};l();var Uc=class extends A{constructor(o){super({i:["any","canvas"],o:[]},{input:{canvas:{ref:!0}}},o,C3)}f({any:o,canvas:t},e){t.clear(),e()}};l();var Gc=class extends A{constructor(o){super({i:["d"],o:["d"]},{},o,T3)}f({d:o},t){t({d:[...o,["closePath"]]})}};l();var Rc=class extends A{constructor(o){super({i:["canvas","step"],o:[]},{input:{canvas:{ref:!0}}},o,A3)}f({canvas:o,step:t},e){o.draw(t),e()}};l();var Nc=class extends A{constructor(o){super({i:["canvas","image","x","y","width","height","any"],o:[]},{input:{canvas:{ref:!0},image:{ref:!0}}},o,M3)}f(c,p){return G(this,arguments,function*({any:o,canvas:t,image:e,x:n,y:i,width:s,height:a},_){let u=yield e.image();yield t.drawImage(u,n,i,s,a),_()})}};l();var zc=class extends A{constructor(o){super({i:["d"],o:["d"]},{},o,ob)}f({d:o},t){t({d:[...o,["fill"]]})}};l();var Fc=class extends A{constructor(o){super({i:["d","canvas","rule"]},{input:{canvas:{ref:!0}}},o,O3)}f({d:o,canvas:t,rule:e},n){t.fillPath(o,e),n()}};l();var Bc=class extends A{constructor(o){super({i:["fillStyle","d"],o:["d"]},{},o,$3)}f({d:o,fillStyle:t},e){e({d:[...o,["fillStyle",t]]})}};l();l();l();function Z6(r,o){return{append(t){let e=[];r.current.push(t)},put(t,e){throw new $},at(t){throw new $},length(){throw new $},indexOf(t){throw new $}}}function zo(r,o){return new class extends ht{constructor(){super(...arguments);this.__=["A"]}append(i){r[r.length]=i}put(i,s){return G(this,null,function*(){r[i]=s})}at(i){return G(this,null,function*(){return r[i]})}length(){return G(this,null,function*(){return r.length})}indexOf(i){throw new Error("Method not implemented.")}raw(){return r}}(o)}function Sb(r,o){return new class extends ht{constructor(){super(...arguments);this.__=["J","ID"]}imageData(){return r}get(i){return G(this,null,function*(){if(r[i]!==void 0)return i==="data"?zo(r.data,o):r[i]})}set(i,s){return G(this,null,function*(){throw new Error("read only")})}delete(i){return G(this,null,function*(){throw new Error("read only")})}hasKey(i){return G(this,null,function*(){return r[i]!==void 0})}keys(){return G(this,null,function*(){return["width","height","data","colorSpace"]})}pathGet(i,s){if(i.length===0)return this.get(s);throw new Error("invalid key path")}pathSet(i,s,a){throw new Error("read only")}pathDelete(i,s){throw new Error("read only")}subscribe(i,s,a){throw new Error("read only")}raw(){return r}}(o)}var Hc=class extends dt{constructor(o){super({fi:["canvas","x","y","width","height","opt","any"],fo:["image"],i:["done"]},{input:{canvas:{ref:!0}},output:{image:{ref:!0}}},o,L3)}f(_,c){return G(this,arguments,function*({canvas:o,x:t,y:e,width:n,height:i,opt:s},a){let p;try{p=o.getImageData(t,e,n,i,s)}catch(d){if(d instanceof RangeError){a(void 0,"out of memory");return}a(void 0,d.message);return}let u=Sb(p,this.__system);a({image:u})})}onIterDataInputData(o){this._forward_all_empty(),this._backward_all(),this._backward("done")}};l();var jc=class extends dt{constructor(o){super({fi:["data","width","height","opt"],fo:["image"],i:["done"]},{input:{data:{ref:!0}},output:{image:{ref:!0}}},o,U3)}f(s,a){return G(this,arguments,function*({data:o,width:t,height:e,opt:n},i){let _;try{let p=yield o.read();_=new ImageData(p,t,e,n)}catch(p){i(void 0,p.message);return}let c=Sb(_,this.__system);i({image:c})})}onIterDataInputData(o){this._forward_all_empty(),this._backward_all(),this._backward("data"),this._backward("done")}};l();var Vc=class extends A{constructor(o){super({i:["x","y","d"],o:["d"]},{},o,G3)}f({d:o,x:t,y:e},n){n({d:[...o,["moveTo",t,e]]})}};l();var Kc=class extends dt{constructor(o){super({fi:["any","canvas","image","dx","dy","x","y","width","height"],fo:["done"],i:[]},{input:{canvas:{ref:!0},image:{ref:!0}},output:{}},o,R3)}f(p,u){return G(this,arguments,function*({canvas:o,image:t,dx:e,dy:n,x:i,y:s,width:a,height:_},c){let d=t.imageData();o.putImageData(d,e,n,i,s,a,_),c({done:!0})})}};l();var Wc=class extends A{constructor(o){super({i:["d","rad"],o:["d"]},{},o,N3)}f({d:o,rad:t},e){e({d:[...o,["rotate",t]]})}};l();var qc=class extends A{constructor(o){super({i:["sx","sy","canvas"]},{input:{canvas:{ref:!0}}},o,mb)}f({canvas:o,sx:t,sy:e},n){o.scale(t,e),n()}};l();var Yc=class extends A{constructor(o){super({i:["d"],o:["d"]},{},o,z3)}f({d:o},t){t({d:[...o,["stroke"]]})}};l();var Xc=class extends A{constructor(o){super({i:["d","canvas"]},{input:{canvas:{ref:!0}}},o,mb)}f({d:o,canvas:t},e){t.strokePath(o),e()}};l();var Jc=class extends A{constructor(o){super({i:["strokeStyle","d"],o:["d"]},{},o,F3)}f({d:o,strokeStyle:t},e){e({d:[...o,["strokeStyle",t]]})}};l();var Zc=class extends dt{constructor(o){super({fi:["canvas","quality","type"],fo:["blob"],i:["done"]},{input:{canvas:{ref:!0}},output:{blob:{ref:!0}}},o,B3)}f(i,s){return G(this,arguments,function*({canvas:o,quality:t,type:e},n){let a,_=new class extends ht{constructor(){super(...arguments);this.__=["B","IM"]}image(){return G(this,null,function*(){return a})}blob(){return G(this,null,function*(){try{a=yield o.toBlob(e,t)}catch(u){n(void 0,u.message);return}return a})}}(this.__system);n({blob:_})})}onIterDataInputData(o){this._forward_empty("blob"),this._backward("done")}};l();var Qc=class extends A{constructor(o){super({i:["canvas","bitmap","init"],o:[]},{input:{canvas:{ref:!0},bitmap:{ref:!0}}},o,H3)}f(i,s){return G(this,arguments,function*({canvas:o,bitmap:t,init:e},n){let a=yield t.imageBitmap();yield o.transferFromImageBitmap(a),n()})}};l();var tu=class extends A{constructor(o){super({i:["d","x","y"],o:["d"]},{},o,j3)}f({d:o,x:t,y:e},n){n({d:[...o,["translate",t,e]]})}};l();var eu=class extends A{constructor(o){super({i:["text"],o:[]},{},o,V3)}f(e,n){return G(this,arguments,function*({text:o},t){let{api:{clipboard:{writeText:i}}}=this.__system;try{yield i(o)}catch(s){t(void 0,s.message);return}t()})}};l();var nu=class extends dt{constructor(o){super({i:["arc","d"],o:["d"]},{},o,lb)}f({d:o,arc:{x:t,y:e,r:n,start:i,end:s,anticlockwise:a=!1}},_){_({d:[...o,["arc",t,e,n,i,s,a]]})}};l();var iu=class extends A{constructor(o){super({i:["parent","child"],o:["at"]},{input:{parent:{ref:!0}}},o,K3)}f({parent:o,child:t},e){let n=o.appendChild(t);e({at:n})}};l();var ou=class extends dt{constructor(o){super({fi:["component","host","opt"],i:["done"],fo:[],o:[]},{input:{component:{ref:!0},host:{ref:!0}}},o,W3)}f({component:o,host:t,opt:e},n){let i=Ef(t.__global_id);o.emit("call",{method:"detach",data:[i,e]})}onIterDataInputData(o,t){switch(o){case"done":this._i.component.emit("call",{method:"attach",data:[this._i.opt]}),this._done(),this._backward("done");break}}};l();var su=class extends A{constructor(o){super({i:["parent","at"],o:["test"]},{input:{parent:{ref:!0}}},o,q3)}f({parent:o,at:t},e){let n=o.hasChild(t);e({test:n})}};l();var ru=class extends A{constructor(o){super({i:["parent","child","at"],o:[]},{input:{parent:{ref:!0}}},o,Y3)}f({parent:o,child:t,at:e},n){o.insertChild(t,e),n({at:e})}};l();var au=class extends dt{constructor(o){super({fi:["unit","name"],i:["done"],fo:["ref"],o:[]},{input:{unit:{ref:!0}},output:{ref:{ref:!0}}},o,X3)}f({unit:o,name:t},e){let n=this.__system.global.scope[t];this.__system.emitter.addListener("register",(i,s)=>{}),n&&e({ref:n})}onIterDataInputData(o,t){switch(o){case"done":this._done(),this._backward("done");break}}};l();var _u=class extends dt{constructor(o){super({fi:["unit","ref","name"],i:["done"],fo:[],o:[]},{input:{ref:{ref:!0},unit:{ref:!0}}},o,J3)}f({ref:o,unit:t,name:e},n){this.__system.global.scope[e]=o}onIterDataInputData(o,t){switch(o){case"done":this._done(),this._backward("done");break}}};l();var pu=class extends A{constructor(o){super({i:["parent","at"],o:["unit"]},{input:{parent:{ref:!0}}},o,Z3)}f({parent:o,at:t},e){let n;try{let i=o.removeChild(t);n=Fr(i),i.destroy()}catch(i){e(void 0,i.message);return}e({unit:n})}};l();var cu=class extends A{constructor(o){super({i:["message"],o:[]},{},o,Q3)}f({message:o},t){console.log(o),t()}};l();var uu=class extends A{constructor(o){super({i:["element","event","data","opt"],o:[]},{input:{element:{ref:!0}}},o,t9)}f({element:o,event:t,data:e,opt:n},i){let s=`_${t}`;o.emit("call",{method:"dispatchEvent",data:[t,e,n.bubbles]}),i()}};l();var du=class extends dt{constructor(t){super({fi:["emitter","event"],fo:[],i:["remove"],o:["data"]},{input:{emitter:{ref:!0}}},t,e9);this._unlisten=void 0;this._remove=()=>{this._unlisten(),this._listener=void 0,this._unlisten=void 0};this.addListener("destroy",()=>{this._listener&&(this._remove(),this._forward_empty("data"))})}f({emitter:t,event:e}){let n=(...i)=>{this._paused||this._output.data.push(i[0])};this._listener=n,this._unlisten=t.addListener(e,this._listener)}d(){this._remove(),this._forward_empty("data")}onIterDataInputData(t,e){this._listener&&(this._remove(),this._done())}};l();l();var my=16,hy=4,ok=.001,Ts=class extends Re{constructor(t,e){super();this.state={buttons:new Array(my).fill(!1,0,my),axes:new Array(hy).fill(0,0,hy)};this._frame=null;this._event_capture_tick=()=>{let{api:{input:{gamepad:{getGamepad:t}},animation:{requestAnimationFrame:e}}}=this.system;this.gamepad=t(this.gamepad.index);let n=[...this.state.buttons],i=this.gamepad.buttons.map(_=>_.pressed);this.state.buttons=i;for(let _=0;_<my;_++)i[_]&&!n[_]?this.emit("buttondown",_):!i[_]&&n[_]&&this.emit("buttonup",_);let s=this.state.axes,a=this.gamepad.axes.map(_=>_);this.state.axes=a;for(let _=0;_<hy;_++)Math.abs(a[_]-s[_])>=ok&&this.emit("axischange",[_,a[_]]);this._frame=e(this._event_capture_tick)};this._start_event_capture=()=>{this._event_capture_tick()};this._stop_event_capture=()=>{let{api:{animation:{cancelAnimationFrame:t}}}=this.system;this._frame!==void 0&&(t(this._frame),this._frame=void 0)};this._listenerCount=0;this.system=t,this.gamepad=e}read(){return G(this,null,function*(){return this.state})}write(t){return G(this,null,function*(){throw new Error("cannot write to gamepad state")})}addListener(t,e){let n=super.addListener(t,e);return this._listenerCount++,this._listenerCount>=1&&this._start_event_capture(),()=>{this._listenerCount--,this._listenerCount===0&&this._stop_event_capture(),n()}}disconnect(){this._stop_event_capture()}};var lu=class extends dt{constructor(t){super({fi:["i"],fo:[],i:["done"],o:["state"]},{output:{state:{ref:!0}}},t,n9)}f(n,i){return G(this,arguments,function*({i:t},e){let{api:{input:{gamepad:{getGamepad:s,addEventListener:a}}}}=this.__system;try{let d=s(t);this._gamepad=new Ts(this.__system,d)}catch(d){e(void 0,d.message);return}let _=d=>{let{gamepad:m}=d,{index:h}=m;h===t&&(this._gamepad=new Ts(this.__system,m),p(this._gamepad))},c=d=>{let{gamepad:m}=d,{index:h}=m;h===t&&(this._gamepad=null,u())};this._unlisten=Tt([a("gamepadconnected",_),a("gamepaddisconnected",c),()=>{this._gamepad&&u()}]);let p=d=>{let m=new class extends ht{read(){return G(this,null,function*(){return d.state})}write(f){return G(this,null,function*(){throw new Error("cannot write to gamepad state")})}}(this.__system);this._output.state.push(m)},u=()=>{this._output.state.pull()};this._gamepad&&p(this._gamepad)})}d(){this._unlisten(),this._unlisten=void 0}onIterDataInputData(t){this._output.state.pull(),this._done(),this._input.done.pull()}};l();var mu=class extends A{constructor(o){super({i:["any"],o:["position"]},{},o,i9)}f(e,n){return G(this,arguments,function*({any:o},t){let{api:{geolocation:{getCurrentPosition:i}}}=this.__system,s;try{s=yield i()}catch(a){t(void 0,a.message);return}t({position:s})})}};l();var hu=class extends dt{constructor(t){super({fi:["channel"],fo:["port"],i:["close"],o:[]},{output:{port:{ref:!0}}},t,o9);this._bc=null}f({channel:t},e){let{api:{channel:{local:n}}}=this.__system;this._bc=n({channel:t});let i=this._bc,s=new class extends ht{constructor(c){super(c);this.__=["P"];this._unlisten=i.addListener("message",p=>{let{specs:u,classes:d}=this.__system,{data:m}=p,h=Zt(m,u,d);this.emit("message",h)}),this.addListener("destroy",()=>{this._unlisten(),this._unlisten=void 0})}send(c){let p=Ot(c);i.postMessage(p)}}(this.__system);e({port:s})}d(){this._bc&&this._bc.close()}};l();var fu=class extends A{constructor(o){super({i:["any"],o:["url"]},{},o,s9)}f(e,n){return G(this,arguments,function*({any:o},t){let{api:{location:{toString:i}}}=this.__system,s=yield i();t({url:s})})}};l();l();function Hi(r,o){return new class extends ht{constructor(){super(...arguments);this.__=["AN"]}getContext(){return r.context}connect(n){r.connect(n)}disconnect(n){r.disconnect(n)}}(o)}function sk(r,o){return class extends ht{constructor(){super(...arguments);this.__=["AN"]}getContext(){return r.context}connect(n){r.connect(n)}disconnect(){r.disconnect()}}}function Q6(r,o){let t=sk(r,o);return new class extends t{constructor(){super(...arguments);this.__=["AN"]}getFFTSize(){return r.fftSize}getByteTimeDomainData(i){return r.getByteTimeDomainData(i)}getByteFrequencyData(i){return r.getByteFrequencyData(i)}}(o)}var gu=class extends A{constructor(t){super({i:["node","opt"],o:["node"]},{},t,r9);this.addListener("destroy",()=>{this._node})}f({node:t,opt:e},n){let i,{api:{window:{AnalyserNode:s}}}=this.__system;if(t.__.includes("AC"))t=t,i=t.createAnalyser(e);else{t=t;let _=t.getContext();i=new s(_,e),t.connect(i)}this._node=i;let a=Q6(i,this.__system);n({node:a})}d(){}};l();l();function tI(r,o){return new class extends ht{constructor(){super(...arguments);this.__=["AC"]}get(){return r}getDestination(){return r.destination}createOscilator(i){let{api:{window:{OscillatorNode:s}}}=o;return new s(r,i)}createAnalyser(i){throw new Error("Method not implemented.")}}(o)}var bu=class extends A{constructor(t){super({i:["opt"],o:["ctx"]},{output:{ctx:{ref:!0}}},t,a9);this.addListener("destroy",()=>{this._ctx&&this._ctx.close()})}f({opt:t},e){let{api:{window:{AudioContext:n}}}=this.__system,i=new n(t);this._ctx=i;let s=tI(i,this.__system);e({ctx:s})}d(){}};l();var yu=class extends A{constructor(t){super({i:["node"],o:[]},{input:{node:{ref:!0}},output:{node:{ref:!0}}},t,_9);this.addListener("destroy",()=>{this._destroy(this._i.node)})}f({node:t},e){let i=t.getContext().destination;this._node=i,t.connect(i)}_destroy(t){t&&(t.disconnect(this._node),this._node=void 0)}d(t,e){this._destroy(e)}};l();l();function ji(r,o){return new class extends ht{constructor(){super(...arguments);this.__=["MS"]}mediaStream(i){return i(r),zt}getVideoTracks(){return G(this,null,function*(){return r.getVideoTracks()})}}(o)}var vu=class extends A{constructor(t){super({i:["src"],o:["stream"]},{},t,p9);this._audio=new Audio,this._audio.volume=0,this._audio.play(),this.addListener("destroy",()=>{this._audio.srcObject=null})}f({src:t},e){this._audio.src=t;let{srcObject:n}=this._audio,i;if(n instanceof MediaStream)i=ji(n,this.__system);else{e(void 0,"");return}e({stream:i})}d(){this._audio.src=null}};l();var xu=class extends A{constructor(t){super({i:["id","stream"],o:[]},{input:{stream:{ref:!0}}},t,c9);this._audio=new Audio}f(n){return G(this,arguments,function*({stream:t,id:e}){t.mediaStream(i=>{this._audio.srcObject=i}),this._audio.setSinkId(e).catch(i=>{this.err(i.message)}),this._audio.play()})}d(){this._audio.pause()}};l();l();function Iu(r,o){return new class extends ht{constructor(){super(...arguments);this.__=["AN"]}read(){return Promise.resolve(r.value)}write(n){r.value=n}}(o)}var Su=class extends A{constructor(t){super({i:["node","delay"],o:["node","delay"]},{input:{node:{ref:!0}},output:{node:{ref:!0},delay:{ref:!0}}},t,u9);this._disconnect=t=>{t&&(t.disconnect(),this._node=void 0)};this.addListener("destroy",()=>{this._node&&this._disconnect(this._i.node)})}f({node:t,delay:e},n){let i;t=t,i=t.getContext().createDelay(),i.delayTime.value=e,this._node=i,t.connect(i);let a=Hi(i,this.__system),_=Iu(i.delayTime,this.__system);n({node:a,delay:_})}i(){this._disconnect(this._i.node)}d(t,e){t==="node"&&this._disconnect(this._i.node)}};l();var Du=class extends A{constructor(t){super({i:["node","gain"],o:["node"]},{input:{node:{ref:!0}},output:{node:{ref:!0}}},t,d9);this._disconnect=t=>{t&&(t.disconnect(),this._node=void 0)};this.addListener("destroy",()=>{this._node&&this._disconnect(this._i.node)})}f({node:t,gain:e},n){let i;t=t,i=t.getContext().createGain(),i.gain.value=e,this._node=i,t.connect(i);let a=Hi(i,this.__system);n({node:a})}i(){this._disconnect(this._i.node)}d(t,e){t==="node"&&this._disconnect(this._i.node)}};l();var Eu=class extends dt{constructor(t){super({fi:["node","opt"],fo:["data"],i:["done"]},{input:{node:{ref:!0}},output:{data:{ref:!0}}},t,l9);this._reset=()=>{this._data=void 0,this._backward_all()}}f({node:t,opt:e},n){let i=t.getFFTSize();this._data=new Uint8Array(i),t.getByteFrequencyData(this._data);let s=zo(this._data,this.__system);n({data:s})}d(){}onIterDataInputData(t,e){this._reset()}};l();var wu=class extends dt{constructor(t){super({fi:["node","opt"],fo:["data"],i:["done"]},{input:{node:{ref:!0}},output:{data:{ref:!0}}},t,m9);this._reset=()=>{this._data=void 0,this._backward_all()}}f({node:t,opt:e},n){let i=t.getFFTSize();this._data=new Uint8Array(i),t.getByteTimeDomainData(this._data);let s=zo(this._data,this.__system);n({data:s})}d(){}onIterDataInputData(t,e){this._reset()}};l();var Pu=class extends A{constructor(t){super({i:["node","opt","stream"],o:["node"]},{input:{node:{ref:!0},stream:{ref:!0}},output:{node:{ref:!0}}},t,h9);this._destroy=()=>{this._node&&(this._node=void 0)};this.addListener("destroy",()=>{this._destroy()})}f({node:t,stream:e,opt:n},i){let s,{api:{window:{MediaStreamAudioSourceNode:a}}}=this.__system,_;t.__.includes("AC")?(t=t,_=t.get()):(t=t,_=t.getContext()),e.mediaStream(c=>{try{s=new a(_,{mediaStream:c})}catch(u){i(void 0,u.message.toLowerCase());return}this._node=s;let p=Hi(s,this.__system);i({node:p})})}i(t){this._destroy()}d(){this._destroy()}};l();var ku=class extends A{constructor(t){super({i:["a","b"],o:["node"]},{input:{a:{ref:!0},b:{ref:!0}},output:{node:{ref:!0}}},t,f9);this.addListener("destroy",()=>{this._node})}f({a:t,b:e},n){let i;i=t.getContext().createGain(),this._node=i,t.connect(i),e.connect(i);let a=Hi(i,this.__system);n({node:a})}d(){}};l();var Cu=class extends A{constructor(t){super({i:["node","opt"],o:["node","frequency","detune"]},{input:{node:{ref:!0}},output:{node:{ref:!0},frequency:{ref:!0},detune:{ref:!0}}},t,g9);this._destroy=()=>{this._node&&(this._node.stop(),this._node=void 0)};this.addListener("destroy",()=>{this._destroy()})}f({node:t,opt:e},n){let i,{api:{window:{OscillatorNode:s}}}=this.__system;if(t.__.includes("AC"))i=t.createOscilator(e);else{t=t;let p=t.getContext();i=new s(p,e)}i.start(),this._node=i;let a=Hi(i,this.__system),_=Iu(i.frequency,this.__system),c=Iu(i.detune,this.__system);n({node:a,frequency:_,detune:c})}i(t){this._destroy()}d(){this._destroy()}};l();l();var Db=class{constructor(o=null){this._data=null;this._callback=[];this._data=o}set(o){this._data=o;for(let t of this._callback)t(o)}connect(o){return this._callback.push(o),this._data&&o(this._data),()=>{let t=this._callback.indexOf(o);if(t>-1)this._callback.splice(t,1);else throw new Error("can only unlisten once")}}};var Tu=class extends dt{constructor(t){super({fi:["source","opt"],fo:["stream"],i:["stop"],o:[]},{input:{source:{ref:!0}},output:{stream:{ref:!0}}},t,b9);this.__=["U"];this._stream=new Db}f(i,s){return G(this,arguments,function*({source:t,opt:e},n){let a;try{a=yield t.captureStream(e)}catch(c){n(void 0,c.message);return}let _=ji(a,this.__system);n({stream:_})})}onIterDataInputData(t,e){this._stream.set(null),this._done(),this._input.stop.pull()}mediaStream(t){return this._stream.connect(t)}};l();var Au=class extends A{constructor(o){super({i:["text","name","mimetype","charset"],o:[]},{},o,y9)}f(s,a){return G(this,arguments,function*({text:o,name:t,mimetype:e,charset:n},i){let{api:{file:{downloadText:_}}}=this.__system;try{yield _({text:o,name:t,mimetype:e,charset:n})}catch(c){i(void 0,c.message);return}i()})}};l();var Mu=class extends A{constructor(o){super({i:["url","name"],o:[]},{},o,v9)}f(n,i){return G(this,arguments,function*({url:o,name:t},e){let{api:{file:{downloadURL:s}}}=this.__system;try{yield s({url:o,name:t})}catch(a){e(void 0,a.message);return}e()})}};l();var Ou=class extends A{constructor(o){super({i:["any"],o:["devices"]},{},o,x9)}f(t,e){return G(this,arguments,function*({},o){let{api:{media:{enumerateDevices:n}}}=this.__system,i;try{i=yield n()}catch(s){o(void 0,s.message);return}o({devices:i})})}};l();l();function Eb(r){r.getTracks().forEach(o=>o.stop())}var $u=class extends A{constructor(t){super({i:["opt"],o:["stream"]},{},t,I9);this.addListener("destroy",()=>{this._stream&&(Eb(this._stream),this._stream=void 0)}),this.addListener("take_err",()=>{this._input.opt.pull()})}f(n,i){return G(this,arguments,function*({opt:t},e){let{api:{media:{getDisplayMedia:s}}}=this.__system,a;try{a=yield s(t)}catch(c){if(c.name==="NotAllowedError"){e(void 0,"permission denied");return}e(void 0,c.message);return}let _=ji(a,this.__system);e({stream:_})})}};l();l();function eI(r,o){return new class extends ht{constructor(){super(...arguments);this.__=["MST"]}mediaStreamTrack(){return G(this,null,function*(){return r})}}(o)}var Lu=class extends dt{constructor(o){super({fi:["stream","init"],fo:["tracks"],i:["done"],o:[]},{input:{stream:{ref:!0}},output:{tracks:{ref:!0}}},o,S9),this.addListener("destroy",()=>{})}f(e,n){return G(this,arguments,function*({stream:o},t){let i;try{i=yield o.getVideoTracks()}catch(a){t(void 0,a)}let s=new class extends ht{constructor(){super(...arguments);this.__=["A"]}append(c){return G(this,null,function*(){throw new $})}put(c,p){return G(this,null,function*(){throw new $})}at(c){return G(this,null,function*(){let p=i[c];return eI(p,this.__system)})}length(){return G(this,null,function*(){return i.length})}indexOf(c){return G(this,null,function*(){throw new $})}}(this.__system);t({tracks:s})})}onIterDataInputData(o){this._forward_all_empty(),this._backward_all(),this._backward("done")}};l();l();function nI(r,o){return new class extends ht{constructor(){super(...arguments);this.__=["IB"]}imageBitmap(){return G(this,null,function*(){return r})}image(){return G(this,null,function*(){return r})}}(o)}var Uu=class extends dt{constructor(t){super({fi:["camera"],fo:[],i:["init","done"],o:["image"]},{input:{camera:{ref:!0}},output:{image:{ref:!0}}},t,D9);this._err_flag=!1;this._forward_if_ready=()=>G(this,null,function*(){if(this._input.camera.active()&&this._input.init.active()){let t;try{t=yield this._i.camera.grabFrame()}catch(n){this.err(n.message.toLowerCase()),this._err_flag=!0;return}let e=nI(t,this.__system);this._output.image.push(e),this._input.init.pull()}});this.addListener("destroy",()=>{}),this.addListener("take_err",()=>{this._err_flag&&(this._err_flag=!1,this._input.init.pull())})}f(n,i){return G(this,arguments,function*({camera:t},e){this._forward_if_ready()})}onIterDataInputData(t){return G(this,null,function*(){t==="done"?(this._forward_empty("image"),this._done(),this._backward("done")):t==="init"&&this._forward_if_ready()})}};l();var Gu=class extends A{constructor(o){super({i:["opt","image","rect"],o:["bitmap"]},{input:{image:{ref:!0}},output:{bitmap:{ref:!0}}},o,E9)}f(i,s){return G(this,arguments,function*({opt:o,rect:t,image:e},n){let{api:{media:{image:{createImageBitmap:a}}}}=this.__system,_=yield e.image(),c;try{c=yield a(_,t,o)}catch(u){n(void 0,u.message);return}let p=new class extends ht{constructor(){super(...arguments);this.__=["IB"]}imageBitmap(){return G(this,null,function*(){return c})}image(){return G(this,null,function*(){return c})}}(this.__system);n({bitmap:p})})}};l();l();function iI(r,o){return new class extends ht{constructor(){super(...arguments);this.__=["IC"]}grabFrame(){return r.grabFrame()}}(o)}var Ru=class extends dt{constructor(o){super({fi:["init","track"],fo:["camera"],i:["done"],o:[]},{input:{track:{ref:!0}},output:{camera:{ref:!0}}},o,w9),this.addListener("destroy",()=>{})}f(n,i){return G(this,arguments,function*({init:o,track:t},e){let{api:{window:{ImageCapture:s}}}=this.__system;if(!s){e(void 0,"ImageCapture API is not supported");return}let a=yield t.mediaStreamTrack();a.onmute=()=>{},a.onunmute=()=>{},a.onended=()=>{};let _=new s(a),c=iI(_,this.__system);e({camera:c})})}onIterDataInputData(o,t){this._forward_all_empty(),this._backward_all(),this._backward("done")}};l();var Nu=class extends dt{constructor(t){super({fi:["opt","stream"],fo:[],i:["start","stop"],o:["blob"]},{input:{stream:{ref:!0}},output:{blob:{ref:!0}}},t,P9);this._start_recorder=t=>{this._media_recorder&&(this._media_recorder.state==="recording"&&this._media_recorder.stop(),this._media_recorder.start(t))};this.addListener("destroy",()=>{this._media_recorder.stop(),this._media_recorder.ondataavailable=null,this._media_recorder=null})}f({opt:t,stream:e}){let n=[];e.mediaStream(i=>{this._media_recorder&&(this._media_recorder.stop(),this._media_recorder.ondataavailable=null),this._media_recorder=new MediaRecorder(i,t),this._media_recorder.ondataavailable=a=>{let{data:_}=a;_.size>0&&n.push(_)},this._media_recorder.onstop=()=>{let a=new Blob(n,{type:"audio/wav"}),_=new class extends ht{constructor(){super(...arguments);this.__=["B","IM"]}image(){return G(this,null,function*(){return a})}blob(){return G(this,null,function*(){return a})}}(this.__system);this._output.blob.push(_)};let s=this._input.start.peak();s!==void 0&&this._start_recorder(s)})}onIterDataInputData(t,e){t==="start"?this._media_recorder&&this._start_recorder(e):t==="stop"&&this._media_recorder&&(this._media_recorder.state==="recording"&&this._media_recorder.stop(),this._backward("start"),this._backward("stop"))}onIterDataInputDrop(t){this.hasErr()&&this.takeErr(),t==="start"&&(this._backwarding||this._media_recorder&&this._media_recorder.stop())}};l();l();function wb(r,o){let{global:{component:t}}=r;return t[o]}function Br(r,o,t){let{emitter:e}=r,n=i=>{t(i)};return e.addListener(o,n),()=>{e.removeListener(o,n)}}var zu=class extends dt{constructor(t){super({fi:["media","opt"],i:["stop"]},{input:{media:{ref:!0}}},t,k9);this._exit_picture_in_picture_promise=Promise.resolve()}_plunk(){let{api:{document:{exitPictureInPicture:t}}}=this.__system;this._unlisten&&(this._unlisten(),this._unlisten=void 0),this._picture_in_picture&&(this._exit_picture_in_picture_promise=t(),this._picture_in_picture=void 0)}f(i,s){return G(this,arguments,function*({media:t,opt:e},n){yield this._exit_picture_in_picture_promise;let a=t.getGlobalId();Br(this.__system,a,_=>G(this,null,function*(){if(_===null)this._plunk();else if(document.pictureInPictureElement===_.$element)this.err("media is already Picture in Picture");else{let c=yield _.requestPictureInPicture(),p=u=>{this._picture_in_picture=void 0,this._plunk()};_.$element.addEventListener("leavepictureinpicture",p),this._unlisten=()=>{_.$element.removeEventListener("leavepictureinpicture",p)},this._picture_in_picture=c}}))})}onIterDataInputData(t){this._plunk(),this._backward("media"),this._backward("opt")}};l();var Fu=class extends A{constructor(t){super({i:["opt"],o:["stream"]},{output:{stream:{ref:!0}}},t,C9);this.addListener("destroy",()=>{this._stream&&(Eb(this._stream),this._stream=void 0)})}f(n,i){return G(this,arguments,function*({opt:t},e){let{api:{media:{getUserMedia:s}}}=this.__system,a;try{let _=yield s(t);a=ji(_,this.__system)}catch(_){e(void 0,_.message);return}e({stream:a})})}};l();var Bu=class extends dt{constructor(t){super({fi:["url"],fo:["emitter"],i:["close"],o:[]},{output:{emitter:{ref:!0}}},t,T9);this._event_source=null;this._pluck=()=>{this._event_source.close(),this._event_source=null}}f({url:t},e){let{api:{http:{EventSource:n}}}=this.__system,i=new n(t);this._event_source=i,i.onerror=s=>{this._pluck(),e(void 0,"error connecting to server")},i.onopen=()=>{let s=new class extends ht{addListener(_,c){super.addListener(_,c);let p=u=>{c(u.data)};return i.addEventListener(_,p),()=>{i.removeEventListener(_,p)}}}(this.__system);e({emitter:s})}}onIterDataInputData(t,e){this._pluck()}};l();var Hu=class extends A{constructor(t){super({i:["url","opt"],o:["response"]},{},t,A9);this._fetch_index=0}f({url:t,opt:e},n){let{api:{http:{fetch:i}}}=this.__system,s=++this._fetch_index;try{i(t,e).then(a=>{if(s===this._fetch_index)return a.text().then(_=>{s===this._fetch_index&&n({response:{status:a.status,body:_}})})}).catch(a=>{if(s===this._fetch_index){if(a.message.toLowerCase()==="failed to execute 'fetch' on 'window': request with get/head method cannot have body."){n(void 0,"request with GET/HEAD method cannot have body");return}n(void 0,a.message.toLowerCase())}})}catch(a){n(void 0,"malformed")}}};l();var ju=class extends dt{constructor(t){super({fi:["url"],fo:[],i:["close"],o:[]},{},t,M9);this._web_socket=null;this._plunk=()=>{this._web_socket.onopen=null,this._web_socket.onmessage=null,this._web_socket.onerror=null,this._web_socket.onclose=null,this._web_socket=null}}f({url:t}){this._web_socket&&this._web_socket.close(),this._web_socket=new WebSocket(t),this._web_socket.onopen=()=>{},this._web_socket.onmessage=e=>{this.emit("message",e.data)},this._web_socket.onerror=e=>{this.err("error")},this._web_socket.onclose=e=>{let{code:n,reason:i}=e;this._plunk()}}d(){this._plunk()}onIterDataInputData(t,e){this._close()}_close(){this._web_socket&&this._web_socket.readyState===WebSocket.OPEN&&this._web_socket.close()}send(t){return G(this,null,function*(){this._web_socket&&this._web_socket.readyState===WebSocket.OPEN&&this._web_socket.send(t)})}};l();var Vu=class extends qt{constructor(o){super({i:["this","opt"],o:[]},{input:{notification:{ref:!0}}},o,O9)}};l();var Ku=class extends qt{constructor(t){super({i:[],o:[]},{},t,$9);this._notification=null;this._setup()}onDataInputData(t){this.hasErr()&&this.takeErr()}_setup(){if("Notification"in window){let{permission:t}=Notification;t==="default"?Notification.requestPermission().then(e=>{this.err("not authorized")}):this.err("not authorized")}else this.err("not authorized")}$show({title:t,opt:e},n){this._notification=new Notification(t,e),this._notification.onclick=()=>{this.emit("click")},this._notification.onclose=()=>{this.emit("close")},this._notification.onerror=()=>{this.emit("error")},this._notification.onshow=()=>{this.emit("show")},n()}$close({},t){this._notification&&this._notification.close(),t()}};l();var Wu=class extends qt{constructor(o){super({i:["this"],o:[]},{input:{notification:{ref:!0}}},o,L9)}};l();var qu=class extends dt{constructor(t){super({fi:["component"],fo:[],i:[],o:["width","height"]},{input:{component:{ref:!0}}},t,U9)}f({component:t},e){let n=t.getGlobalId(),i=wb(this.__system,n),s=_=>{if(!this._observer){let p=d=>{let m=d[0],{width:h,height:f}=m.contentRect;this._output.width.push(h),this._output.height.push(f)},u=new ResizeObserver(p);this._observer=u}i&&this._observer.unobserve(i.$element),i=_;let{$element:c}=i};i&&s(i);let a=Br(this.__system,n,_=>{s(_)})}d(){}};l();l();function oI(r){return G(this,null,function*(){return new Promise((o,t)=>{let e=[],n=s=>G(this,[s],function*({candidate:i}){i?e.push(i):(r.removeEventListener("icecandidate",n),o(e))});r.addEventListener("icecandidate",n)})})}var Vi=class extends ht{constructor(t,e,n){super(t);if(this._initiator=e,this._config=n,!RTCPeerConnection)throw new Mt("Web RTC");let i=new RTCPeerConnection(this._config);this._setup(i),this._rtc=i;let s=this._rtc.createDataChannel("data",{negotiated:!0,id:0});if(s.onmessage=a=>{let{data:_}=a,c=JSON.parse(_),{type:p,data:u}=c;switch(p){case"message":this.emit("message",u);break;case"start":this._incoming_stream&&this.emit("start",this._incoming_stream);break;case"stop":this.emit("stop");break}},s.onopen=()=>{if(this.emit("connect"),this._stream){let a=JSON.stringify({type:"start"});this._rtc_channel.send(a)}},this._initiator){let a=new MediaStream;this._outgoing_stream=a;let _=this._rtc.addTransceiver("video",{streams:[a]});this._video_transceiver=_;let c=this._rtc.addTransceiver("audio",{streams:[a]});this._audio_transceiver=c}this._rtc_channel=s}send(t){let e=JSON.stringify({type:"message",data:t});this._rtc_channel.send(e)}offer(){return G(this,null,function*(){return this._offer(this._rtc)})}_offer(t){return G(this,null,function*(){let e=yield t.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});yield t.setLocalDescription(e);let{sdp:n}=e,i=yield oI(t);return JSON.stringify({sdp:n,candidates:i})})}_setup(t){t.onconnectionstatechange=()=>{let{connectionState:e}=t;switch(e){case"connected":break;case"disconnected":case"closed":this.emit("close");break}},this._initiator||(t.ontrack=e=>{let{streams:n}=e,i=n[0];i&&(this._incoming_stream=i)})}_plunk(t){t.oniceconnectionstatechange=null,t.onconnectionstatechange=null,t.onicegatheringstatechange=null,t.onnegotiationneeded=null,t.ondatachannel=null,t.ontrack=null}_plunk_channel(t){t.onmessage=null}acceptOffer(t){return G(this,null,function*(){return this._acceptOffer(this._rtc,t)})}_acceptOffer(t,e){return G(this,null,function*(){let{sdp:n,candidates:i}=JSON.parse(e),s=new RTCSessionDescription({type:"offer",sdp:n});yield t.setRemoteDescription(s);for(let a of i)yield t.addIceCandidate(a)})}answer(){return G(this,null,function*(){return this._answer(this._rtc)})}_answer(t){return G(this,null,function*(){let e=yield t.createAnswer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});t.setLocalDescription(e);let{sdp:n}=e,i=yield oI(t);return JSON.stringify({sdp:n,candidates:i})})}acceptAnswer(t){return G(this,null,function*(){return this._acceptAnswer(this._rtc,t)})}_acceptAnswer(t,e){return G(this,null,function*(){let{sdp:n,candidates:i}=JSON.parse(e),s=new RTCSessionDescription({type:"answer",sdp:n});yield t.setRemoteDescription(s);for(let a of i)yield t.addIceCandidate(a)})}addStream(t){return G(this,null,function*(){this._stream=t;let e=t.getAudioTracks()[0];e&&(yield this._audio_transceiver.sender.replaceTrack(e));let n=t.getVideoTracks()[0];if(n&&(yield this._video_transceiver.sender.replaceTrack(n)),this._rtc_channel.readyState==="open"){let i=JSON.stringify({type:"start"});this._rtc_channel.send(i)}})}removeStream(){return G(this,null,function*(){if(this._stream=null,yield Promise.all([this._video_transceiver.sender.replaceTrack(null),this._audio_transceiver.sender.replaceTrack(null)]),this._rtc_channel.readyState==="open"){let t=JSON.stringify({type:"stop"});this._rtc_channel.send(t)}})}close(){this._plunk_channel(this._rtc_channel),this._rtc_channel.close(),this._plunk(this._rtc),this._rtc.close()}};l();l();var Yu=["appendChild","removeChild","hasChild","child","children","component"],Xu=[],Ju=["refChild"],Urt=[...Yu,...Xu,...Ju];l();var Zu=["emit","eventNames"],Qu=["addListener"],td=["refEmitter"],Nrt=[...Zu,...Qu,...td];l();var rk=["getPinData","getInputData","getUnitPinData","getUnitState","getGraphState","getGraphChildren","getGraphPinData","getGraphData","getGraphErr","getGraphMergeInputData","getUnitInputData","getSpec","getBundle"],fy=["addUnit","addUnits","removeUnit","cloneUnit","moveUnit","exposePinSet","coverPinSet","exposePin","coverPin","plugPin","unplugPin","exposeUnitPinSet","coverUnitPinSet","setPinSetFunctional","setUnitId","setUnitPinData","setUnitPinConstant","setUnitPinIgnored","setUnitPinSetId","setPinSetId","addMerge","removeMerge","addMerges","addPinToMerge","removePinFromMerge","mergeMerges","setMetadata","moveUnitInto","appendRoot","removeRoot","appendParentRoot","appendParentRootChildren","reorderSubComponent","removeUnitPinData","setMergeData","removeMergeData","takeUnitErr","setUnitId","moveSubgraphInto","bulkEdit"],ed=[...rk,...fy],nd=["watchGraph","watchUnit","watchGraphUnit","watchUnitPath","watchGraphUnitPath"],id=["transcend","refSubComponent","refUnit"],Brt=[...ed,...nd,...id];l();var od=["get","set"],sd=[],rd=[],Vrt=[...od,...sd,...rd];l();var Pb=["stream"],kb=[],Cb=[];l();var Tb=[],Ab=[],Mb=["newGraph"];l();var ad=["getGlobalId","getListeners","call","play","pause","push","pullInput","takeInput","renamePin","setPinData","removePinData","getPinData","getInputData","getRefInputData","err"],_d=["watch"],pd=["refGlobalObj"],Zrt=[...ad,..._d,...pd];l();var cd=["read","write"],ud=[],dd=[],eat=[...cd,...ud,...dd];l();var Ob=(r,o,t)=>{let e=r;for(let n of o){let i=t[n];if(!i)throw new Error("async wrapper is not registered");let s=i(r);for(let a in s)e[a]=s[a]}return e};function ak(r,o){return Ob(r,o,{G:_I,C:aI,V:Sk,J:Pk,U:rI,MS:Ak,EE:sI,S:gy})}function Fo(r,o){let t={};for(let e of o){let n=`$${e}`;t[n]=(i,s)=>r.call(n,i,s)}return t}function Bo(r,o){let t={};for(let e of o){let n=`$${e}`;t[n]=(i,s)=>r.watch(n,i,s)}return t}function Ho(r,o){let t={};for(let e of o){let n=`$${e}`;t[n]=i=>{let{_:s}=i,a=r.ref(n,i);return ak(a,s)}}return t}function _k(r){return Fo(r,Zu)}function pk(r){return Bo(r,Qu)}function ck(r){return Ho(r,td)}function sI(r){return S(S(S({},_k(r)),pk(r)),ck(r))}function uk(r){return Fo(r,ad)}function dk(r){return Bo(r,_d)}function lk(r){return Ho(r,pd)}function rI(r){return S(S(S({},uk(r)),dk(r)),lk(r))}function mk(r){return Fo(r,Yu)}function hk(r){return Bo(r,Xu)}function fk(r){return Ho(r,Ju)}function aI(r){return S(S(S({},mk(r)),hk(r)),fk(r))}function gk(r){return Fo(r,ed)}function bk(r){return Bo(r,nd)}function yk(r){return Ho(r,id)}function _I(r){return S(S(S({},gk(r)),bk(r)),yk(r))}function vk(r){return Fo(r,cd)}function xk(r){return Bo(r,ud)}function Ik(r){return Ho(r,dd)}function Sk(r){return S(S(S({},vk(r)),xk(r)),Ik(r))}function Dk(r){return Fo(r,od)}function Ek(r){return Bo(r,sd)}function wk(r){return Ho(r,rd)}function Pk(r){return S(S(S({},Dk(r)),Ek(r)),wk(r))}function kk(r){return Fo(r,Pb)}function Ck(r){return Bo(r,kb)}function Tk(r){return Ho(r,Cb)}function Ak(r){return S(S(S({},kk(r)),Ck(r)),Tk(r))}function $b(r){return S(S(S(S({},sI(r)),rI(r)),aI(r)),_I(r))}function Mk(r){return Fo(r,Tb)}function Ok(r){return Bo(r,Ab)}function $k(r){return Ho(r,Mb)}function gy(r){return S(S(S({},Mk(r)),Ok(r)),$k(r))}l();var Ki=class{constructor(o){this._call_id=new Set;this._watch_id=new Set;this._ref_id=new Set;this._ref={};this._watch_emitter=new Re;this._call_emitter=new Re;this._valid=!0;this._port=o,this._port.onmessage=t=>{let{data:e}=t;this.exec(e)},this._port.onerror=t=>{let{message:e}=t}}exec(o){let{type:t,data:e}=o,{id:n,data:i}=e;if(t===Es){if(!this._call_id.has(n))throw new Error("unexpected worker call message id");this._call_emitter.emit(n,i)}else if(t===ws){if(!this._watch_id.has(n))throw new Error("unexpected worker watch message id");this._watch_emitter.emit(n,i)}else if(t===Ps)this._ref[n].exec(i);else throw new Error("unexpected worker message type")}call(o,t,e){let n=If(this._call_id);this._call_id.add(n);let i=a=>{this._call_emitter.removeListener(n,i),this._call_id.delete(n),e(a)};this._call_emitter.addListener(n,i);let s={type:Es,data:{id:n,method:o,data:t}};this._port.send(s)}watch(o,t,e){let n=If(this._watch_id);this._watch_id.add(n);let i=a=>{e(a)};this._watch_emitter.addListener(n,i);let s={type:ws,data:{id:n,method:o,data:t}};return this._port.send(s),()=>{if(this._watch_emitter.removeListener(n,i),this._watch_id.delete(n),this._valid){let a={type:Og,data:{id:n}};this._port.send(a)}}}ref(o,t){let e=If(this._ref_id),n={type:Ps,data:{id:e,method:o,data:t}};this._port.send(n);let i={send:a=>{let _={type:$g,data:{id:e,data:a}};this._port.send(_)},onmessage(){},onerror(){},terminate(){}},s=new Ki(i);return this._ref[e]=s,s}terminate(){this._port.terminate()}close(){this._valid=!1;for(let o in this._ref)this._ref[o].close()}valid(){return this._valid}};var ld=class extends qt{constructor(t){super({i:["opt","offer","close"],o:["graph","answer"]},{output:{graph:{ref:!0}}},t,G9);this.__=["U"];this._peer_connected=!1;this._offer_sent=!1;this._accept_offer=t=>G(this,null,function*(){yield this._peer.acceptOffer(t);let e=yield this._peer.answer();this._output.answer.push(e),this._offer_sent=!0});this.__forward_empty=()=>{this._forward_all_empty(),this._backward("offer"),this._backward("close"),this._backward("opt"),this._forwarding_empty=!0,this.hasErr()&&this.takeErr(),this._disconnect(),this._forwarding_empty=!1};this._disconnect=()=>{this._backwarding=!0,this._output.graph.pull(),this._remote_port&&(this._remote_port.close(),this._remote_port=void 0),this._peer&&(this._peer=null),this._backwarding=!1};this.addListener("destroy",()=>{this.__forward_empty()}),this.addListener("take_err",()=>{}),this.addListener("take_caught_err",()=>{})}onDataInputData(t,e){return G(this,null,function*(){if(t==="opt"){this._peer=new Vi(this.__system,!1,e);let n={send:s=>{let a=Ot(s);this._peer.send(a)},onmessage(s){},onerror(){},terminate(){}};this._peer.addListener("message",s=>{let a=this.__system.specs,_=this.__system.classes,c=Zt(s,a,_),{type:p,data:u}=c;switch(p){case si:n.onmessage({data:u});break;case $o:{let d=new Ki(n);this._remote_port=d;let m=$b(d),h=_i(this.__system,m,["U","C","G"]);this._output.graph.push(h)}break;case Lo:this._disconnect();break}}),this._peer.addListener("connect",()=>{this._peer_connected=!0}),this._peer.addListener("close",()=>{this._peer_connected=!1});let i=this._input.offer.peak();i!==void 0&&this._accept_offer(i)}else if(t==="offer"){if(this._peer){let n=e;this._accept_offer(n)}}else t==="close"&&this.__forward_empty()})}onDataInputDrop(t){t==="opt"&&(this._backwarding||this.__forward_empty())}};l();l();function pI(r){return new class extends ht{constructor(){super(...arguments);this.__=["EE"]}}(r)}var md=class extends dt{constructor(t){super({fi:["opt"],fo:["answer"],i:["close","offer"],o:["stream","emitter"]},{input:{}},t,R9);this._peer=null;this._unlisten=void 0;this._connected=!1;this._flag_err_invalid_offer=!1;this._output_answer=t=>G(this,null,function*(){try{yield this._peer.acceptOffer(t)}catch(n){this._flag_err_invalid_offer=!0,this.err("invalid offer");return}let e=yield this._peer.answer();this._output.answer.push(e)});this._send_data=(t,e)=>{this._send({type:"data",data:t},e)};this._send=(t,e)=>{if(this._connected){let n=Ot(t);this._peer.send(n),e()}else e(void 0,"peer not connected")};this._setup_peer=()=>{let t=()=>{this._connected=!0;let _=pI(this.__system);this._output.emitter.push(_)},e=_=>{this.err(_.message)},n=()=>{this._disconnect()},i=_=>{this._output.emitter.active()&&this._output.emitter.peak().emit("message",_)},s=_=>{let c=ji(_,this.__system);this._output.stream.push(c)},a=()=>{this._output.stream.pull()};return this._peer.addListener("connect",t),this._peer.addListener("error",e),this._peer.addListener("close",n),this._peer.addListener("message",i),this._peer.addListener("start",s),this._peer.addListener("stop",a),()=>{this._peer.removeListener("connect",t),this._peer.removeListener("error",e),this._peer.removeListener("close",n),this._peer.removeListener("message",i),this._peer.removeListener("start",s),this._peer.removeListener("stop",a)}};this._disconnect=()=>{this._unlisten&&(this._unlisten(),this._unlisten=void 0),this._output.emitter.pull(),this._output.stream.pull(),this._peer&&(this._peer.close(),this._peer=null),this._connected=!1,this._done({})};this.addListener("destroy",()=>{this._disconnect()}),this.addListener("take_err",()=>{this._flag_err_invalid_offer&&(this._flag_err_invalid_offer=!1,this._backward("offer"))})}f(e){return G(this,arguments,function*({opt:t}){this._peer=new Vi(this.__system,!1,t),this._setup_peer(),this._input.offer.active()&&this._output_answer(this._input.offer.peak())})}onDataInputData(t,e){return G(this,null,function*(){t==="close"?(this._disconnect(),this._backward("close")):t==="offer"&&this._input.opt.active()&&this._output_answer(e)})}onDataInputDrop(t){if(t==="opt")this._backwarding||this._disconnect();else if(t==="offer"){if(this._flag_err_invalid_offer){this._flag_err_invalid_offer=!1,this.takeErr();return}this._forward_empty("emitter"),this._forward_empty("stream"),this._forward_empty("answer")}}onDataOutputDrop(t){t==="answer"&&this._input.offer.pull()}};l();l();l();var jo=class{constructor(o,t){this._unlisten={};this._ref={};this._API=o,this._post=t}exec(o){let{type:t,data:e}=o;switch(t){case Es:{let{id:n,method:i,data:s}=e;this._API[Es][i](s,(a,_)=>{this._post({type:Es,data:{id:n,data:a,err:_}})})}break;case ws:{let{id:n,method:i,data:s}=e,a=this._API[ws][i](s,(_,c)=>{this._post({type:ws,data:{id:n,data:_,err:c}})});this._unlisten[n]=a}break;case Og:{let{id:n}=e,i=this._unlisten[n];delete this._unlisten[n],i()}break;case Ps:{let{id:n,method:i,data:s}=e,a=this._API[Ps][i](s),_=new jo(a,c=>{this._post({type:Ps,data:{id:n,data:c}})});this._ref[n]=_}break;case $g:{let{id:n,data:i}=e;this._ref[n].exec(i)}break;default:throw new Error("invalid remote API data type")}}};l();l();var cI=["draw","drawImage","clear","strokePath","scale","fillPath","toBlob"],uI=[],dI=[];l();l();l();l();l();l();var yy="/",Hr="_";var jr="@",hd="#",hI="$",vy="%",xy="^",Lk="!",po=`[^${yy}${jr}${hd}${hI}${vy}${xy}]+`,fd="[^]+",Uk=`^(${po})$`,Gk=`^(${po})/(input|output)/(${fd})$`,Rk=`((${po})|(${po})/(input|output)/(${fd})|(${jr}/${po}))`,Nk=`^(${po})/input/(${fd})$`,zk=`^(${po})/output/(${fd})$`,A_t=new RegExp(`^${po}$`),M_t=new RegExp(`^${Rk}$`),Fk=new RegExp(Uk),Bk=new RegExp(Gk),Hk=new RegExp(Nk),jk=new RegExp(zk),Vk=new RegExp(`^${hd}/[^#_]+$`),O_t=new RegExp(`^\\$/[^]+/${po}$`),Kk=new RegExp(`^${jr}/[^/#$]+$`),Wk=new RegExp(`^${vy}/(input|output)/[^${yy}${hd}${jr}]+$`),qk=new RegExp(`^\\${xy}/(input|output)/${fd}/[^${yy}${hd}${jr}]+$`),$_t=new RegExp(`^(.+)${Hr}(.+)$`);function fI(r){return r.split("/")[1]}var ut=(r,o,t)=>`${r}/${o}/${t}`;var Iy=(r,o)=>t=>`${r}/${o}/${t}`;function Vr(r,o){return`${r}/output/${o}`}function Kn(r){return Vr(r,$t)}function Vt(r,o){return`${r}${Hr}${o}`}function gd(r,o,t){let e=ut(r,o,t);return o==="input"?Vt(e,r):Vt(r,e)}function qe(r){let{unitId:o,type:t,pinId:e}=it(r);return gd(o,t,e)}function Lb(r){return qk.test(r)}function bd(r){return jk.test(r)}function Vo(r){return!!Fk.exec(r)}function lI(r){return r?Py(r)||bd(r):!1}function yd(r){let[o,t]=r.split(Hr);return Vo(o)&&lI(t)||lI(o)&&Vo(t)}function Sy(r){let[o,t]=r.split(Hr);return mI(o)&&by(t)||by(o)&&mI(t)}function Dy(r){let[o,t]=r.split(Hr);return As(o)||As(t)||Lb(o)||Lb(t)}function Si(r){return`${Lk}/${r}`}function Kr(r){return{unitId:r.substr(2,r.length)}}function it(r){let[o,t,e]=r.split("/");return{unitId:o,type:t,pinId:e}}function co(r){let[o,t]=r.split(Hr);return{source:o,target:t}}function Wr(r){let{source:o,target:t}=co(r),e=Vo(o)?o:t,n=Vo(o)?t:o;return{unitId:e,pinNodeId:n}}function Ey(r){let{source:o,target:t}=co(r),e=by(o);return{datumNodeId:e?o:t,pinNodeId:e?t:o}}function wy(r){let{source:o,target:t}=co(r),e=As(o);return{nodeId:e?o:t,externalNodeId:e?t:o}}function Py(r){return Hk.test(r)}function mI(r){return ky(r)||Ub(r)}function ky(r){return Bk.test(r)}function Xe(r){return`${hd}/${r}`}function by(r){return!!Vk.exec(r)}function Ae(r){return{datumId:r.substr(2,r.length)}}function uo(r){return`${hI}/${r}`}function At(r){return`${jr}/${r}`}function Ub(r){return Kk.test(r)}function It(r){return{mergeId:r.substring(2,r.length)}}function gI(r){let{mergeId:o}=It(r);return o}function Kt(r,o,t){return`${vy}/${r}/${o}/${t}`}function vd(r){let{type:o,pinId:t,subPinId:e}=lo(r);return Kt(o,t,e)}function Cy(r){let{type:o,pinId:t,subPinId:e}=gt(r);return De(o,t,e)}function De(r,o,t){return`${xy}/${r}/${o}/${t}`}function As(r){return Wk.test(r)}function gt(r){let[o,t,e,n]=r.split("/");return{type:t,pinId:e,subPinId:n}}function lo(r){let[o,t,e,n]=r.split("/");return{type:t,pinId:e,subPinId:n}}var bI=r=>{if(r===0)return[];let o=[0];for(let t=1;t<r;t++)o.push(o[t-1]+1/t);return o};function xd(r,o){let t=r[o];return qr(t)}function qr(r){let{base:o}=r;return!!o}function yI(r){return r.split(/(?=[A-Z])/).map(e=>e.toLowerCase()).join("_")}function vI(r){return r.split(/(?=[A-Z])/).map(e=>e.toLowerCase()).join("-")}var xI=fy.reduce((r,o)=>_t(S({},r),{[o]:yI(o)}),{});var II=ls(xI,(r,o)=>`$${o}`);l();l();function SI(r){return`$${r}`}l();var DI=new Set(["watch","watchGraph"]);var EI=new Set([...DI].map(SI));function Yk(r,o,t){let e;return new Proxy(r,{get:(i,s)=>{let a=i[s];if(o[s])e=o[s];else if(t.has(s))return(_,c)=>a.call(i,_,p=>{var d,m,h;let{event:u}=p;e===u&&((h=(m=(d=p.data)==null?void 0:d.path)==null?void 0:m.length)!=null?h:0)===0?e=void 0:c(p)});return a}})}var Xk={V:{$write:"write"},J:{$set:"set"},CA:{$draw:"draw"},G:II,B:{},IB:{},CC:{},C:{},CS:{},CO:{},GP:{},M:{},E:{},EE:{},BD:{},BS:{},BSE:{},BC:{},NO:{},A:{},PP:{},PS:{},CH:{},MS:{},S:{},U:{},TR:{},RE:{},F:{},L:{},AC:{},D:{}},Jk={G:EI};function Pn(r,o=[]){let t={},e=new Set;for(let n of o){let i=Xk[n]||{},s=Jk[n]||new Set;t=S(S({},t),i),e=new Set([...e,...s])}return Yk(r,t,e)}l();l();var Ty=r=>({$draw:function(o){throw new $},$drawImage:function(o){throw new $},$clear:function(o){throw new $},$strokePath:function(o){throw new $},$scale:function(o){throw new $},$fillPath:function(o){throw new $},$toBlob:function(o,t){throw new $}}),Ay=r=>({}),My=r=>({}),wI=r=>S(S(S({},Ty(r)),Ay(r)),My(r));l();var Zk=r=>({}),Qk=r=>({}),tC=r=>({}),PI=r=>S(S(S({},Zk(r)),Qk(r)),tC(r));l();l();function kI(r){let t=kn(r,["EE"]);return Pn(t,["EE"])}var Oy=r=>({$emit({type:o,data:t},e){r.emit(o,t),e()},$eventNames(o,t){let e=r.eventNames();t(e)}}),$y=r=>({$addListener({event:o},t){return r.addListener(o,t)}}),Ly=r=>({$refEmitter({}){return kI(r)}}),Gb=r=>S(S(S({},Oy(r)),$y(r)),Ly(r));l();l();l();function Uy(r){return()=>{Y(r,o=>{o()})}}l();l();l();function CI(r,o,t){let e=(n,i,s)=>{t({type:"graph",event:r,data:{actions:n,transaction:i,path:s}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function Gy(r,o,t){let e=(n,i,s,a,_)=>{t({type:"graph",event:r,data:{type:n,pinId:i,subPinId:s,subPinSpec:a,path:_}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function Ry(r,o,t){let e=(n,i,s,a,_)=>{t({type:"graph",event:r,data:{type:n,pinId:i,pinSpec:s,data:a,path:_}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function TI(r,o,t){let e=(n,i,s)=>{t({type:"graph",event:r,data:{path:s,specId:n,spec:i}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function Ny(r,o,t){let e=(...[n,i,s,a])=>{t({type:"graph",event:r,data:{mergeId:n,mergeSpec:i,path:a}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function AI(r,o,t){let e=(...[n,i,s,a,_,c])=>{t({type:"graph",event:r,data:{parentId:n,prevParentIdMap:i,children:s,slotMap:a,prevSlotMap:_,path:c}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function zy(r,o,t){let e=(...[n,i,s,a,_,c,p,u,d,m,h])=>{t({type:"graph",event:r,data:{graphId:n,graphBundle:i,nodeIds:a,nextSpecId:s,nextIdMap:_,nextPinIdMap:c,nextMergePinId:p,nextPlugSpec:u,nextSubComponentParentMap:d,nextSubComponentChildrenMap:m,nextSubComponentIndexMap:{},nextUnitPinMergeMap:{},path:h}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function Fy(r,o,t){let e=(n,i,s,a,_)=>{t({type:"graph",event:r,data:{mergeId:n,unitId:i,type:s,pinId:a,path:_}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function By(r,o,t){let e=(n,i,s,a,_)=>{t({type:"graph",event:r,data:{type:n,pinId:i,subPinId:s,subPinSpec:a,path:_}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function MI(r,o,t){let e=(...[n,i,s,a])=>{t({type:"graph",event:r,data:{unitId:n,type:i,pinId:s,path:a}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function OI(r,o,t){let e=(...[n,i,s,a])=>{t({type:"graph",event:r,data:{parentId:n,childId:i,to:s,path:a}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function $I(r,o,t){let e=(...[n,i,s,a])=>{t({type:"graph",event:r,data:{type:n,pinId:i,functional:s,path:a}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function LI(r,o,t){let e=(...[n,i,s,a])=>{t({type:"graph",event:r,data:{type:n,pinId:i,nextPinId:s,path:a}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function UI(r,o,t){let e=(n,i,s,a,_)=>{t({type:"graph",event:r,data:{unitId:n,newUnitId:i,name:s,specId:a,path:_}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function GI(r,o,t){let e=(...[n,i,s,a,_,c])=>{_ instanceof ht&&(_=null),_!==void 0&&(_=Ot(_)),t({type:"graph",event:r,data:{unitId:n,type:i,pinId:s,constant:a,data:_,path:c}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function RI(r,o,t){let e=(...[n,i,s,a,_])=>{let c=Ot(a);t({type:"graph",event:r,data:{unitId:n,type:i,pinId:s,data:c,path:_}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function NI(r,o,t){let e=(...[n,i,s,a,_])=>{t({type:"graph",event:r,data:{unitId:n,type:i,pinId:s,ignored:a,path:_}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function zI(r,o,t){let e=(...[n,i,s,a,_])=>{t({type:"graph",event:r,data:{unitId:n,type:i,pinId:s,nextPinId:a,path:_}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function FI(r,o,t){let e=(n,i,s)=>{t({type:"graph",event:r,data:{unitId:n,unitSpec:i,path:s}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function BI(r,o,t){let e=(n,i)=>{t({type:"graph",event:r,data:{unitId:n,path:i}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function Hy(r,o,t){let e=(n,i,s,a)=>{t({type:"graph",event:r,data:{unitId:n,bundle:i,path:a}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}function HI(r,o,t){let e=(n,i,s,a)=>{t({type:"graph",event:r,data:{unitId:n,newUnitId:i,path:a}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}l();function jI(r,o,t){let e=(n,i,s,a)=>{t({type:"graph",event:r,data:{id:n,unitId:i,inputId:s,path:a}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}var Rb={fork:TI,add_unit:Hy,remove_unit:Hy,clone_unit:HI,move_unit:jI,component_append:FI,component_remove:BI,add_merge:Ny,remove_merge:Ny,add_pin_to_merge:Fy,remove_pin_from_merge:Fy,expose_pin:Gy,cover_pin:Gy,expose_pin_set:Ry,cover_pin_set:Ry,plug_pin:By,unplug_pin:By,move_subgraph_into:zy,move_subgraph_out_of:zy,reorder_sub_component:OI,move_sub_component_root:AI,set_unit_pin_constant:GI,set_unit_pin_set_id:zI,set_unit_pin_ignored:NI,set_pin_set_functional:$I,set_pin_set_id:LI,set_unit_pin_data:RI,remove_unit_pin_data:MI,set_unit_id:UI,bulk_edit:CI};function VI(r,o,t){let e=[];for(let i in Rb)if(o.includes(i)){let s=Rb[i];e.push(s(i,r,t))}return Tt(e)}function KI(r,o=Ln,t){let e=[];if(r instanceof ze)for(let i of o){let s=Rb[i];s&&e.push(s(i,r,t))}return Tt(e)}l();l();function jy(r,o,t,e,n){let i=s=>{s instanceof ht&&(s=null),s!==void 0&&(s=Ot(s)),n({type:o,event:r,data:{type:o,pinId:t,data:s}})};return e.prependListener(r,i),()=>{e.removeListener(r,i)}}function Yr(r,o,t,e){let n=[jy("data",r,o,t,e),jy("drop",r,o,t,e)],i=Tt(n);return()=>{i()}}l();l();var ve=(r,o)=>({input:r,output:o});l();function WI(r,o,t){return Yr("input",r,o,t)}l();function qI(r,o,t){return Yr("output",r,o,t)}l();l();l();function eC(r){let o=r.getGlobalId(),t=r.getInterface();return{globalId:o,__:t,_:void 0}}function Vy(r,o,t,e,n,i){let s=a=>{let _=a instanceof Function?Ot(a):eC(a);i({type:o,event:r,data:{type:t,pinId:e,data:_}})};if(n.prependListener(r,s),r==="data"&&n.active()){let a=n.peak();s(a)}return()=>{n.removeListener(r,s)}}function Nb(r,o,t,e,n){let i=[Vy("data",r,o,t,e,n),Vy("drop",r,o,t,e,n)];return Tt(i)}function YI(r,o,t){return Nb("ref_input","input",r,o,t)}l();function XI(r,o,t){return Nb("ref_output","output",r,o,t)}l();l();function zb(r,o,t){let e=n=>{t({type:"unit",event:r,data:{err:n}})};return o.prependListener(r,e),()=>{o.removeListener(r,e)}}function JI(r,o,t=Ln){let e=[];return t.includes("err")&&e.push(zb("err",r,o)),t.includes("take_err")&&e.push(zb("take_err",r,o)),t.includes("catch_err")&&e.push(zb("catch_err",r,o)),Tt(e)}l();function Ky(r,o,t){let e=n=>{t({type:"unit",event:r,data:n})};return o.addListener(r,e),()=>{o.removeListener(r,e)}}function Wy(r,o,t){let e=(n,i)=>{t({type:"unit",event:r,data:{name:n,newName:i}})};return o.addListener(r,e),()=>{o.removeListener(r,e)}}function ZI(r,o,t){let e=(n,i)=>{i=i!==void 0?Ot(i):i,t({type:"unit",event:r,data:{name:n,data:i}})};return o.addListener(r,e),()=>{o.removeListener(r,e)}}function QI(r,o,t){let e=n=>{t({type:"unit",event:r,data:n})};return o.addListener(r,e),()=>{o.removeListener(r,e)}}function t7(r,o,t){let e=(n,i)=>{i.length>0||t({type:"unit",event:r,data:n,path:i})};return o.addListener(r,e),()=>{o.removeListener(r,e)}}function e7(r,o,t){let e=(n,i)=>{i.length>0||t({type:"unit",event:r,data:n,path:i})};return o.addListener(r,e),()=>{o.removeListener(r,e)}}l();l();var Id=(r,o,t)=>{let e=[],n=(i,s)=>{t({type:"unit",event:r,data:{pinId:i}})};return o.addListener(r,n),()=>{Tt(e)(),o.removeListener(r,n)}};function n7(r,o,t=Ln){let e=[];return t.includes("set_input")&&e.push(Id("set_input",r,o)),t.includes("set_output")&&e.push(Id("set_output",r,o)),t.includes("remove_input")&&e.push(Id("remove_input",r,o)),t.includes("remove_output")&&e.push(Id("remove_output",r,o)),Tt(e)}function Fb(r,o=Ln,t){let e=[],n=o.includes("input"),i=o.includes("ref_input"),s=o.includes("output"),a=o.includes("ref_output"),_=o.includes("rename_input"),c=o.includes("rename_output"),p=ve({},{}),u=(b,g,v,x)=>{let I={ref:{input:YI,output:XI},data:{input:WI,output:qI}}[b][g](v,x,t);return p[g][v]=I,e.push(I),I},d=(b,g)=>(v,x)=>{u(g,b,x,v)},m=(b,g)=>{let v=p[b][g];v&&(v(),Hn(e,v),delete p.input[g])},h=(b,g)=>{let v=r.getPin(b,g),x=r.isPinRef(b,g);x&&i?u("ref",b,g,v):!x&&n&&u("data",b,g,v)};return n&&Y(r.getDataInputs(),d("input","data")),i&&Y(r.getRefInputs(),d("input","ref")),(n||i)&&e.push(r.addListener("set_input",(b,g,{ref:v})=>{h("input",b)})),e.push(r.addListener("rename_input",(b,g)=>{m("input",b),h("input",g)})),e.push(r.addListener("rename_output",(b,g)=>{m("output",b),h("output",g)})),_&&e.push(Wy("rename_input",r,t)),e.push(r.addListener("remove_output",(b,g)=>{let v=p.output[b];v&&(v(),Hn(e,v),delete p.output[b])})),s&&Y(r.getDataOutputs(),d("output","data")),a&&Y(r.getRefOutputs(),d("output","ref")),(s||a)&&e.push(r.addListener("set_output",(b,g,{ref:v})=>{v&&a?u("ref","output",b,g):!v&&s&&u("data","output",b,g)})),c&&e.push(Wy("rename_output",r,t)),(r instanceof ze||r instanceof Z)&&(o.includes("append_child")&&e.push(t7("append_child",r,t)),o.includes("remove_child")&&e.push(e7("remove_child",r,t))),e.push(JI(r,t,o)),e.push(n7(r,t,o)),Tt(e)}function Bb(r,o,t=Ln){let e={},n={},i=(h,f)=>{let b=Fb(h,t,({type:v,event:x,data:I})=>{o({type:v,event:x,data:_t(S({},I),{unitId:f})})}),g=KI(h,t,({type:v,event:x,data:I})=>{o({type:v,event:x,data:_t(S({},I),{unitId:f})})});e[f]=Tt([b,g])},s=(h,f)=>{let b=En(f,"input"),g=h.getInput(b),v=Yr("merge",f,g,({type:x,event:I,data:E})=>{o({type:x,event:I,data:_t(S({},E),{mergeId:f})})});n[f]=v},a=(h,f,b)=>{b.length===0&&i(f,h)},_=(h,f,b,g)=>{g.length===0&&i(b,f)},c=(h,f,b,g)=>{g.length===0&&s(b,h)},p=(h,f,b)=>{if(b.length===0){let g=e[h];g(),delete e[h]}},u=(h,f,b,g)=>{if(g.length===0){let v=n[h];v(),delete n[h]}},d=r.getUnits(),m=r.getMerges();return Y(d,i),Y(m,s),r.addListener("before_add_unit",a),r.addListener("clone_unit",_),r.addListener("before_add_merge",c),r.addListener("before_remove_unit",p),r.addListener("before_remove_merge",u),()=>{r.removeListener("before_add_unit",a),r.removeListener("clone_unit",_),r.removeListener("before_add_merge",c),r.removeListener("before_remove_unit",p),r.removeListener("before_remove_merge",u),Uy(e)(),Uy(n)()}}l();function Sd(r,o,t=Ln){let e=[];return e.push(Fb(r,t,o)),r instanceof Or&&t.includes("set")&&e.push(ZI("set",r,o)),r instanceof Z&&t.includes("call")&&e.push(QI("call",r,o)),t.includes("listen")&&e.push(Ky("listen",r,o)),t.includes("unlisten")&&e.push(Ky("unlisten",r,o)),r instanceof ze&&e.push(VI(r,t,o)),Tt(e)}var qy=r=>({$setUnitId({unitId:t,newUnitId:e,name:n,specId:i}){r.setUnitId(t,e,n,i)},$setUnitPinData({unitId:t,pinId:e,type:n,data:i}){let s=r.__system,{specs:a,classes:_}=s,c=s.specs;i=Zt(i,Wt(a,c),_),r.setUnitPinData(t,n,e,i)},$removeUnitPinData({unitId:t,type:e,pinId:n}){r.removeUnitPinData(t,e,n)},$addUnit({unitId:t,bundle:e}){r.addUnitSpec(t,e)},$cloneUnit({unitId:t,newUnitId:e}){r.cloneUnit(t,e)},$moveUnit({id:t,unitId:e,inputId:n}){r.moveUnit(t,e,n)},$addUnits({units:t}){let{specs:e,classes:n}=r.__system,i=Ne(t,s=>_t(S({},s),{Class:Vn(s.id,e,n)}));r.addUnitSpecs(i)},$removeUnit({unitId:t}){r.removeUnit(t)},$exposePinSet({type:t,pinId:e,pinSpec:n}){r.exposePinSet(t,e,n)},$coverPinSet({type:t,pinId:e}){r.coverPinSet(t,e,!0)},$exposePin({type:t,pinId:e,subPinId:n,subPinSpec:i}){r.exposePin(t,e,n,i)},$coverPin({type:t,pinId:e,subPinId:n}){r.coverPin(t,e,n)},$plugPin({type:t,pinId:e,subPinId:n,subPinSpec:i}){r.plugPin(t,e,n,i)},$unplugPin({type:t,pinId:e,subPinId:n}){r.unplugPin(t,e,n)},$exposeUnitPinSet({unitId:t,type:e,pinId:n,pinSpec:i}){r.getUnit(t).exposePinSet(e,n,i)},$coverUnitPinSet({unitId:t,type:e,pinId:n}){r.getUnit(t).coverPinSet(e,n)},$setPinSetId({type:t,pinId:e,nextPinId:n}){r.setPinSetId(t,e,n)},$setPinSetFunctional({type:t,pinId:e,functional:n}){r.setPinSetFunctional(t,e,n)},$setUnitPinConstant({unitId:t,type:e,pinId:n,constant:i}){r.setUnitPinConstant(t,e,n,i)},$setUnitPinIgnored({unitId:t,type:e,pinId:n,ignored:i}){r.setUnitPinIgnored(t,e,n,i)},$setUnitPinSetId({unitId:t,type:e,pinId:n,nextPinId:i}){r.setUnitPinSetId(t,e,n,i)},$addMerge({mergeId:t,mergeSpec:e}){r.addMerge(B(e),t)},$removeMerge({mergeId:t}){r.removeMerge(t)},$addMerges({merges:t}){r.addMerges(t)},$setMergeData({mergeId:t,data:e}){let n=r.refSystem(),{specs:i,classes:s}=n,a=Zt(e,i,s);r.setMergeData(t,a)},$removeMergeData({mergeId:t}){r.removeMergeData(t)},$addPinToMerge({mergeId:t,unitId:e,type:n,pinId:i}){r.addPinToMerge(t,e,n,i)},$removePinFromMerge({mergeId:t,unitId:e,type:n,pinId:i}){r.removePinFromMerge(t,e,n,i)},$takeUnitErr({unitId:t}){r.takeUnitErr(t)},$removeUnitGhost({unitId:t,nextUnitId:e,nextUnitSpec:n},i){let s=r.removeUnitGhost(t,e,n);L4(s.bundle),i(s)},$addUnitGhost({unitId:t,nextUnitId:e,nextUnitBundle:n,nextUnitPinMap:i}){r.addUnitGhost(t,e,n,i)},$getBundle({},t){let e=r.getBundleSpec(),{spec:n}=e;j1(n),t(e)},$getUnitPinData({unitId:t,type:e,pinId:n},i){let s=r.getUnitData(t,e,n);i(s)},$getUnitState(n,i){return G(this,arguments,function*({unitId:t},e){let s=yield r.getUnitState(t);e(s)})},$getGraphData(t,e){let n=r.getGraphState(),i=r.getGraphChildren(),s=r.getGraphErr(),a=r.getUnits(),_={};Y(a,(u,d)=>{let m=u.getPinsData(),h=n_(m);_[d]=h});let c=r.getGraphMergeInputData(),p={};for(let u in c){let d=c[u];d===void 0?p[u]=void 0:p[u]=Ot(d)}e({state:n,children:i,err:s,pinData:_,mergeData:p})},$snapshot(t,e){return G(this,null,function*(){let n=r.snapshot();e(n)})},$snapshotUnit({unitId:t},e){let i=r.getUnit(t).snapshot();Ss(i),e(i)},$getGraphState(e,n){return G(this,arguments,function*({},t){let i=yield r.getGraphState();t(i)})},$getGraphChildren({},t){let e=r.getGraphChildren();t(e)},$getGraphErr({},t){let e=r.getGraphErr();t(e)},$getGraphPinData({},t){let e={},n=r.getUnits();Y(n,(i,s)=>{let a=i.getPinsData(),_=n_(a);e[s]=_}),t(e)},$getGraphMergeInputData({},t){let e=r.getGraphMergeInputData(),n=Oo(e);t(n)},$getUnitInputData({unitId:t},e){let n=r.getUnitInputData(t);e(n)},$setMetadata({path:t,data:e}){r.setMetadata(t,e)},$reorderSubComponent({parentId:t,childId:e,to:n}){r.reorderSubComponent(t,e,n)},$moveSubComponentRoot({parentId:t,children:e,slotMap:n}){r.moveSubComponentRoot(t,e,n)},$moveSubgraphInto({graphId:t,nextSpecId:e,nodeIds:n,nextIdMap:i,nextPinIdMap:s,nextMergePinId:a,nextPlugSpec:_,nextSubComponentParentMap:c,nextSubComponentChildrenMap:p}){let u=r.getGraphUnitBundleSpec(t);r.moveSubgraphInto(t,u,e,n,i,s,a,_,c,p)},$moveSubgraphOutOf({graphId:t,nextSpecId:e,nodeIds:n,nextIdMap:i,nextPinIdMap:s,nextMergePinId:a,nextPlugSpec:_,nextSubComponentParentMap:c,nextSubComponentChildrenMap:p}){let u=r.getGraphUnitBundleSpec(t);r.moveSubgraphInto(t,u,e,n,i,s,a,_,c,p)},$bulkEdit({actions:t}){r.bulkEdit(t)}}),Yy=r=>({$watchGraph({events:o},t){return Bb(r,t,o)},$watchUnit({unitId:o,events:t},e){let n=r.getUnit(o);return Sd(n,e,t)},$watchGraphUnit({unitId:o,events:t},e){let n=this.refUnit(o);return Bb(n,e,t)},$watchUnitPath({path:o,events:t},e){let n=r.getUnitByPath(o);return Sd(n,e,t)},$watchGraphUnitPath({path:o,events:t},e){let n=r.getUnitByPath(o);return Bb(n,e,t)}}),Xy=r=>({$compose({id:o,unitId:t,_:e}){let n=r.refSystem(),i=r.getSpec();if(n.hasSpec(o))throw new Error(`spec with id '${o}' already exists`);i.component&&!ie(i.component.subComponents||{})?r.setElement():r.setNotElement();let a=wn({id:o});n.setSpec(o,a);let _=new ze(a,{},n);_.addUnit(t,r,void 0,!1),_.play();let c=kn(_,e);return Pn(c,e)},$refUnit({unitId:o,_:t}){let e=r.getUnit(o),n=kn(e,t);return Pn(n,t)},$refSubComponent({unitId:o,_:t}){let e=r.getUnit(o),n=kn(e,t);return Pn(n,t)}}),Hb=r=>S(S(S({},Yy(r)),qy(r)),Xy(r));l();var Jy=r=>({$get({name:o},t){G(this,null,function*(){let e;try{e=yield r.get(o)}catch(n){t(void 0,n.message)}t(e)})},$set({name:o,data:t},e){G(this,null,function*(){try{let n=Zt(t,{},{});yield r.set(o,n)}catch(n){e(void 0,n.message)}e()})}}),Zy=r=>({}),Qy=r=>({}),i7=r=>S(S(S({},Jy(r)),Zy(r)),Qy(r));l();var t2=r=>({$get(o,t){return r.mediaStream(t)}}),e2=r=>({}),n2=r=>({}),o7=r=>S(S(S({},t2(r)),e2(r)),n2(r));l();l();l();l();var nC=(r,o)=>{let t=Xv(r,o);return kn(t,t.__)},i2=r=>({$getGlobalId(o,t){let e=r.getGlobalId();t(e)},$play(o){r.play()},$pause(o){r.pause()},$paused(o,t){let e=r.paused();t(e)},$reset(o){r.reset()},$push({pinId:o,data:t}){let{classes:e,specs:n}=r.__system,i=Zt(t,n,e);r.push(o,i)},$takeInput(o){let{pinId:t}=o;r.takeInput(t)},$setPinData({type:o,pinId:t,data:e}){let{classes:n,specs:i}=r.__system,s=Zt(e,i,n);r.setPinData(o,t,s)},$removePinData(o){let{type:t,pinId:e}=o;r.removePinData(t,e)},$getPinData(o,t){let e=r.getPinsData(),n=n_(e);t(n)},$getInputData(o,t){let e=r.getInputData();t(e)},$getRefInputData(o,t){let e=r.getRefInputData(),n=Ne(e,i=>{let s=i.getInterface();return{globalId:i.getGlobalId(),__:s}});t(n)},$getUnitBundleSpec(o,t){let e=r.getUnitBundleSpec(o.deep),n=B(e);t(n)},$pullInput(o){let{pinId:t}=o;r.getInput(t).pull()}}),o2=r=>({$watch({events:o},t){return Sd(r,t,o)}}),s2=r=>({$refGlobalObj(o){let t=r.refSystem(),{globalId:e}=o,n=nC(t,e);return Pn(n,n.__)}}),jb=r=>S(S(S({},i2(r)),o2(r)),s2(r));var s7=r=>S(S(S({},Gb(r)),jb(r)),Vb(r));var Xr=r=>S(S({},s7(r)),Hb(r));var r2=r=>({}),a2=r=>({}),_2=r=>({$newGraph({bundle:o,_:t}){let e=r.fromBundle(o),n=r.newGraph(e),i=Xr(n);return Pn(i,t)}}),r7=r=>S(S(S({},r2(r)),a2(r)),_2(r));l();var p2=r=>({$read(e,n){return G(this,arguments,function*({},t){let i;try{i=yield r.read()}catch(a){return t(void 0,a.message)}let s=Ot(i);t(s)})},$write(n,i){return G(this,arguments,function*({data:t},e){yield r.write(t),e()})}}),c2=r=>({}),u2=r=>({}),a7=r=>S(S(S({},p2(r)),c2(r)),u2(r));l();var iC=r=>({}),oC=r=>({}),sC=r=>({$refChildContainer({at:o,_:t}){return p7(r,{at:o,_:t})},$refParentRootContainer({at:o,_:t}){return c7(r,{at:o,_:t})},$refParentChildContainer({at:o,_:t}){return u7(r,{at:o,_:t})}}),_7=r=>S(S(S({},iC(r)),oC(r)),sC(r));var kn=(r,o)=>r.__async?r:Ob(r,o,{C:Vb,CA:wI,E:PI,G:Hb,V:a7,MS:o7,U:jb,J:i7,W:_7,EE:Gb,S:r7});function d7(r,o,t){let e=r.appendChild(o);t(e)}function l7(r,{at:o},t){try{let i=r.removeChild(o).getUnitBundleSpec().unit.id;t({specId:i})}catch(e){t(void 0,e.message)}}function m7(r,{at:o},t){let e=r.hasChild(o);t(e)}function h7(r,{at:o},t){let n=r.refChild(o).constructor.id;t(n)}function f7(r,{},o){let e=r.refChildren().map(n=>({bundle:n.getUnitBundleSpec()}));o(e)}function g7(r,{at:o,_:t}){let e=r.refChild(o),n=kn(e,t);return Pn(n,t)}function p7(r,{at:o,_:t}){let e=r.refChildContainer(o),n=kn(e,t);return Pn(n,t)}function c7(r,{at:o,_:t}){let e=r.refParentRootContainer(o),n=kn(e,t);return Pn(n,t)}function u7(r,{at:o,_:t}){let e=r.refParentChildContainer(o),n=kn(e,t);return Pn(n,t)}var d2=r=>({$appendChild({specs:o,classes:t,specId:e},n){let i=Vn(e,o,t);d7(r,i,n)},$removeChild(o,t){return l7(r,o,t)},$hasChild(o,t){return m7(r,o,t)},$child(o,t){return h7(r,o,t)},$children(o,t){return f7(r,o,t)}}),l2=r=>({}),m2=r=>({$refChild(o){return g7(r,o)}}),Vb=r=>S(S(S({},d2(r)),l2(r)),m2(r));var rC={EE:{call:Zu,watch:Qu,ref:td},U:{call:ad,watch:_d,ref:pd},G:{call:ed,watch:nd,ref:id},C:{call:Yu,watch:Xu,ref:Ju},V:{call:cd,watch:ud,ref:dd},J:{call:od,watch:sd,ref:rd},MS:{call:Pb,watch:kb,ref:Cb},S:{call:Tb,watch:Ab,ref:Mb},CA:{call:cI,watch:uI,ref:dI}};function mo(r){let o={};for(let t in r){let e=r[t],n=i=>{let{_:s}=i,a=e(i),_={call:{},watch:{},ref:{}};for(let c of s){let p=rC[c];for(let u of["call","watch","ref"]){let d=p[u];for(let m of d){let h=`$${m}`;_[u][h]=(...f)=>{let b=a[h](...f);return u==="ref"?Dd(b,b.__):b}}}}return _};o[t]=n}return o}function Dd(r,o){let t={},e={},n={};for(let s of o)switch(s){case"EE":t=S(S({},t),Oy(r)),e=S(S({},e),$y(r)),n=S(S({},n),mo(Ly(r)));break;case"U":t=S(S({},t),i2(r)),e=S(S({},e),o2(r)),n=S(S({},n),mo(s2(r)));break;case"C":t=S(S({},t),d2(r)),e=S(S({},e),l2(r)),n=S(S({},n),mo(m2(r)));break;case"G":t=S(S({},t),qy(r)),e=S(S({},e),Yy(r)),n=S(S({},n),mo(Xy(r)));break;case"V":t=S(S({},t),p2(r)),e=S(S({},e),c2(r)),n=S(S({},n),mo(u2(r)));break;case"J":t=S(S({},t),Jy(r)),e=S(S({},e),Zy(r)),n=S(S({},n),mo(Qy(r)));break;case"MS":t=S(S({},t),t2(r)),e=S(S({},e),e2(r)),n=S(S({},n),mo(n2(r)));break;case"S":t=S(S({},t),r2(r)),e=S(S({},e),a2(r)),n=S(S({},n),mo(_2(r)));break;case"CA":t=S(S({},t),Ty(r)),e=S(S({},e),Ay(r)),n=S(S({},n),mo(My(r)));break;default:throw new Error("unknown interface")}return{call:t,watch:e,ref:n}}function Kb(r,o,t){let e=Dd(r,o);return new jo(e,t)}var Ed=class extends dt{constructor(t){super({fi:["graph","opt"],fo:["offer"],i:["answer","close"],o:[]},{input:{graph:{ref:!0}}},t,N9);this.__=["U"];this._connected=!1;this._disconnect=()=>{this._send_terminate(),this._peer=null};this._close=()=>{this._ref=null};this._send=t=>{let e=Ot(t);this._peer.send(e)};this._send_init=()=>{this._send({type:$o})};this._send_exec=t=>{this._send({type:si,data:t})};this._send_terminate=()=>{this._connected&&this._send({type:Lo})};this.addListener("destroy",()=>{this._connected&&(this._disconnect(),this._close())})}f({graph:t,opt:e},n){let i=new Vi(this.__system,!0,e);this._connected=!1,i.addListener("connect",()=>{this._connected=!0,this._input.graph.active()&&this._send_init()}),i.addListener("close",()=>{this._connected=!1}),i.addListener("message",a=>{if(this._ref){let _=this.__system.specs,c=this.__system.classes,p=Zt(a,_,c);this._ref.exec(p)}}),this._peer=i,G(this,null,function*(){let a=yield i.offer();n({offer:a})});let s=Kb(t,["U","C","G","EE"],a=>{this._send_exec(a)});this._ref=s,this._connected&&this._send_init(),this._input.answer.active()&&G(this,null,function*(){yield this._peer.acceptAnswer(this._input.answer.peak())})}d(){this._disconnect()}onIterDataInputData(t,e){return G(this,null,function*(){t==="answer"?this._peer&&(yield this._peer.acceptAnswer(e)):t==="close"&&this._disconnect()})}onIterDataInputDrop(t){return G(this,null,function*(){t==="answer"&&this._disconnect()})}};l();var wd=class extends dt{constructor(t){super({fi:["opt"],i:["answer","stream","close"],o:["offer","channel"]},{input:{stream:{ref:!0}},output:{channel:{ref:!0}}},t,z9);this._peer=void 0;this._unlisten=void 0;this._connected=!1;this._offered=!1;this._flag_err_peer_construct=!1;this._flag_err_answer_without_offer=!1;this._stream=null;this._add_stream=t=>{this._stream=t,this._peer&&this._peer.addStream(t)};this._remove_stream=t=>{this._peer.removeStream()};this._output_port=()=>{let t=this._peer,e=new class extends ht{constructor(){super(...arguments);this.__=["MS"]}send(s){return G(this,null,function*(){let a=Ot(s);t.send(a)})}}(this.__system);this._output.channel.push(e)};this._setup_peer=()=>{let t=s=>{let{sdp:a}=s;this._output.offer.push(a)},e=()=>{this._connected=!0,this._output_port()},n=s=>{this.err(s.message)},i=()=>{this._disconnect()};return this._peer.addListener("connect",e),this._peer.addListener("error",n),this._peer.addListener("close",i),()=>{this._peer.removeListener("connect",e),this._peer.removeListener("error",n),this._peer.removeListener("close",i)}};this._disconnect=()=>{if(!this._connected)return;let t=this._unlisten;t(),this._unlisten=void 0,this._peer.close(),this._peer=void 0,this._connected=!1,this._forward_empty("offer"),this._forward_empty("channel"),this._done({})};this.addListener("destroy",()=>{this._connected&&this._disconnect()}),this.addListener("take_err",()=>{if(!this._backwarding)if(this._flag_err_answer_without_offer)this._flag_err_answer_without_offer=!1,this._backward("answer");else if(this._flag_err_peer_construct)this._flag_err_peer_construct=!1,this._backward("opt");else throw new Error("PeerTransmitter: invalid err state")})}f(e){return G(this,arguments,function*({opt:t}){try{this._peer=new Vi(this.__system,!0,t)}catch(i){let{message:s}=i,a="Failed to construct 'RTCPeerConnection': ";if(s.startsWith(a)){let _=s.substr(0,s.length-1).replace(a,"");this.err(_);return}else{this.err(i.message);return}}this._unlisten=this._setup_peer();let n=yield this._peer.offer();this._offered=!0,this._output.offer.push(n)})}onRefInputData(t,e){e.mediaStream(n=>{n===null?(this._stream&&this._remove_stream(this._stream),this._stream=null):(this._stream&&this._remove_stream(this._stream),this._add_stream(n),this._stream=n)})}onDataInputData(t,e){return G(this,null,function*(){if(this.hasErr()&&(this._backwarding=!0,this.takeErr(),this._backwarding=!1),t==="answer"){let n=e;if(this._offered)try{yield this._peer.acceptAnswer(n)}catch(i){this.err(i.message);return}else this._flag_err_answer_without_offer=!0,this.err("cannot answer without offer")}else t==="close"&&(this._disconnect(),this._output.offer.pull(),this._output.channel.pull(),this._done({}),this._input.close.pull())})}onDataInputDrop(t){t==="answer"&&(this._flag_err_answer_without_offer&&this.takeErr(),this._connected&&this._disconnect())}onDataOutputDrop(t){this._connected&&this._output_port()}onRefInputDrop(t){this._unlisten_stream&&(this._unlisten_stream(),this._unlisten_stream=void 0),this._stream&&(this._stream=null,this._peer&&this._remove_stream(this._stream))}_send_data(t){return G(this,null,function*(){return this._send({type:"data",data:t})})}_send(t){return G(this,null,function*(){let e=Ot(t);this._peer.send(e)})}send(t){return G(this,null,function*(){return this._send_data(t)})}};l();var Pd=class extends dt{constructor(t){super({fi:["element","pointerId"],fo:[],i:["done"],o:[]},{input:{element:{ref:!0}}},t,F9);this._capturing=!1;this._element=null;this._release=()=>{if(this._capturing){let t=this._pointerId;this._done(),this._input.done.pull(),this._element.emit("call",{method:"releasePointerCapture",data:[t]}),this._capturing=!1,this._pointerId=void 0,this._element=null}}}f({element:t,pointerId:e}){this._capturing||(this._release(),this._capturing=!0,this._pointerId=e,this._element=t,t.emit("call",{method:"setPointerCapture",data:[e]}))}onIterDataInputData(t,e){this._release()}};l();var kd=class extends A{constructor(o){super({i:["component","opt"],o:[]},{input:{component:{ref:!0}}},o,B9)}f(n,i){return G(this,arguments,function*({component:o,opt:t},e){o.emit("call",{method:"scrollIntoView",data:[t]}),e()})}};l();var Cd=class extends A{constructor(o){super({i:["channel","data"],o:[]},{input:{channel:{ref:!0}}},o,H9)}f(n,i){return G(this,arguments,function*({channel:o,data:t},e){try{let s=t;s instanceof ht&&(s=yield s.raw()),yield o.send(s)}catch(s){e(void 0,s.message);return}e()})}};l();var Td=class extends A{constructor(o){super({i:["data"],o:[]},{input:{}},o,j9)}f(e,n){return G(this,arguments,function*({data:o},t){let{api:{navigator:{share:i}}}=this.__system;try{yield i(o)}catch(s){t(void 0,s.message);return}t()})}};l();var Ad=class extends A{constructor(o){super({i:["opt"],o:["emitter"]},{},o,V9)}f({opt:o},t){}};l();l();var aC=r=>`#JSGF V1.0; grammar tokens; public <token> = ${r.join(" | ")} ;`,b7=(r,o)=>{let{api:{speech:{SpeechGrammarList:t}}}=r;if(!t)throw new Mt("Speech Grammar List");let e=aC(o),n=t({});return n.addFromString(e,1),n},Jr=class extends Re{constructor(t,e){super();this._recording=!1;let{api:{speech:{SpeechGrammarList:n,SpeechRecognition:i}}}=t;if(i&&n){let{grammars:s,lang:a="en-US",continuous:_=!1,interimResults:c=!1,maxAlternatives:p=1}=e,u;try{u=i({grammars:void 0,lang:a,interimResults:c,maxAlternatives:p,continuous:_})}catch(d){throw d}this._unlisten=Tt([u.addListener("error",d=>{}),u.addListener("end",()=>{this._recording?u.start():this.emit("end")}),u.addListener("result",d=>{let h=d[0][0],{transcript:f,confidence:b}=h;this.emit("transcript",f)})]),this._recognition=u}}start(){this._recognition&&(this._recording||(this._recording=!0,this._recognition.start()))}stop(){if(this._recognition&&this._recording){this._recording=!1;try{this._recognition.stop()}catch(t){}}}};var Md=class extends dt{constructor(t){super({fi:["opt"],fo:[],i:["stop"],o:["text"]},{},t,K9);this._recorder=null}f({opt:t},e){let n=new Jr(this.__system,t);this._recorder=n,this._recorder.start(),this._recorder.addListener("transcript",i=>{this._output.text.push(i)}),this._recorder.addListener("err",i=>{e(void 0,i)}),this._recorder.addListener("end",()=>{this._recorder=null,e()})}onIterDataInputData(t,e){this._recorder.stop()}};l();var Od=class extends A{constructor(o){super({i:["message","voice"],o:[]},{},o,W9)}f({message:o,voice:t},e){let{api:{speech:{SpeechSynthesis:n,SpeechSynthesisUtterance:i}}}=this.__system;if(o===""){e();return}let s;try{s=n({})}catch(p){e(void 0,p.message);return}let a=[],_=()=>{a=s.getVoices(),a.length>0?c():setTimeout(()=>{_()},100)},c=()=>{if(t<0||t>a.length-1){e(void 0,"voice index out of range");return}let p=a[t],u=i({text:o,voice:p});u.addEventListener("error",d=>{e(void 0,d.error)}),u.addEventListener("end",()=>{e()}),s.speak(u)};_()}};l();var $d=class extends cn{constructor(t){super({i:[],o:[]},{},t,q9);this.___emitter=new Re;this._checkAPI=()=>{if(!localStorage)throw new Mt("Local Storage")}}subscribe(t,e,n){let{emitter:i}=this.__system;if(t.length>0)throw new Error("local storage path length must be 0");let s=(c,p)=>{(e==="*"||c===e)&&n("set",t,c,p)},a=c=>{n("delete",t,e,c)};return i.addListener("set",s),i.addListener("delete",a),()=>{i.removeListener("set",s),i.removeListener("delete",a)}}read(){return G(this,null,function*(){return tb()})}write(t){return G(this,null,function*(){})}get(t){return G(this,null,function*(){this._checkAPI();let e=localStorage.getItem(t);if(e===null)throw new Error("item not found");return e})}set(t,e){return G(this,null,function*(){let{emitter:n}=this.__system;this._checkAPI(),localStorage.setItem(t,e),n.emit("set",t,e)})}delete(t){return G(this,null,function*(){let{emitter:e}=this.__system;this._checkAPI();let n=localStorage.getItem(t);localStorage.removeItem(t),e.emit("delete",t,n)})}pathSet(t,e,n){return G(this,null,function*(){throw new $})}pathGet(t,e){return G(this,null,function*(){throw new $})}pathDelete(t,e){return G(this,null,function*(){throw new $})}keys(){return G(this,null,function*(){return Cs(localStorage)})}hasKey(t){return G(this,null,function*(){return Nr(localStorage,t)})}};l();var Ld=class extends qt{constructor(t){super({i:[],o:[]},{},t,Y9);this._checkAPI=()=>{if(!sessionStorage)throw new Error("session Storage API not implemented")}}read(){return G(this,null,function*(){return this._checkAPI(),vx()})}write(t){return G(this,null,function*(){throw this._checkAPI(),new $})}get(t){return G(this,null,function*(){this._checkAPI();let e=sessionStorage.getItem(t);if(e===null)throw new Error("item not found");return e})}set(t,e){return G(this,null,function*(){this._checkAPI(),localStorage.setItem(t,e)})}delete(t){return G(this,null,function*(){this._checkAPI(),sessionStorage.removeItem(t)})}pathSet(t,e,n){throw new $}pathGet(t,e){throw new $}pathDelete(t,e){throw new $}subscribe(t,e,n){throw new $}keys(){return G(this,null,function*(){return Cs(sessionStorage)})}hasKey(t){return G(this,null,function*(){return Nr(sessionStorage,t)})}};l();var Ud=class extends A{constructor(o){super({i:["hash"],o:["value"]},{},o,X9)}f({hash:o},t){t()}};l();var Gd=class extends A{constructor(o){super({i:["any"],o:["key"]},{},o,J9)}f({any:o},t){t()}};l();var Rd=class extends A{constructor(o){super({i:["value"],o:["hash"]},{},o,_b)}f({value:o},t){t()}};l();var Nd=class extends A{constructor(t){super({i:["a"],o:["a"]},{},t,Z9);this._frame=void 0;this.addListener("reset",()=>{this._reset()}),this.addListener("destroy",()=>{this._reset()})}_reset(){this._frame&&(cancelAnimationFrame(this._frame),this._frame=void 0)}f({a:t},e){requestAnimationFrame?(this._reset(),this._frame=requestAnimationFrame(()=>{this._frame=void 0,e({a:t})})):e(void 0,"request animation frame not supported")}};l();var zd=class extends A{constructor(o){super({i:["unit","data"],o:[]},{input:{unit:{ref:!0},data:{ref:!0}}},o,Q9)}f(n,i){return G(this,arguments,function*({unit:o,data:t},e){try{yield o.send(t)}catch(s){e(void 0,s.message);return}e()})}};l();var Fd=class extends A{constructor(o){super({i:["blob","init"],o:["url"]},{input:{blob:{ref:!0}}},o,t5)}f(n,i){return G(this,arguments,function*({blob:o,init:t},e){let{api:{url:{createObjectURL:s}}}=this.__system,a,_=yield o.blob();try{a=yield s(_)}catch(c){e(void 0,c.message);return}e({url:a})})}};l();var Bd=class extends A{constructor(o){super({i:["uri"],o:["UTF-8"]},{},o,e5)}f({uri:o},t){let{api:{uri:{encodeURI:e}}}=this.__system,n;try{n=e(o)}catch(i){t(void 0,i.message);return}t({"UTF-8":n})}};l();var Hd=class extends A{constructor(o){super({i:["text"],o:["uri"]},{},o,n5)}f({text:o},t){let{api:{uri:{encodeURIComponent:e}}}=this.__system,n;try{n=e(o)}catch(i){t(void 0,i.message);return}t({uri:n})}};l();var jd=class extends A{constructor(o){super({i:["url"],o:["obj"]},{},o,i5)}f(e,n){return G(this,arguments,function*({url:o},t){let{api:{}}=this.__system,i;try{let s=new URL(o);i={protocol:s.protocol,hostname:s.hostname,pathname:s.pathname,search:s.search,hash:s.hash}}catch(s){t(void 0,"invalid url");return}t({obj:i})})}};l();var Vd=class extends A{constructor(o){super({i:["pattern"],o:[]},{},o,o5)}f({pattern:o},t){let{api:{device:{vibrate:e}}}=this.__system;try{e(o)}catch(n){t(void 0,n.message);return}t()}};l();var Kd=class extends dt{constructor(t){super({fi:["lock"],fo:[],i:["done"],o:[]},{},t,s5);this._lock=t=>G(this,null,function*(){let{api:{screen:{requestWakeLock:e}}}=this.__system,n=yield e(t);n.addListener("done",this._on_release),this._wake_lock=n});this._release=()=>{this._wake_lock&&this._wake_lock.done()};this._on_release=()=>{this._wake_lock=null}}f({lock:t},e){this._lock({type:"screen"})}d(){this._release()}onIterDataInputData(t,e){this._release()}};l();var Wd=class extends dt{constructor(t){super({fi:["url","target","features"],fo:["window"],i:["done"],o:[]},{output:{window:{ref:!0}}},t,hb);this._release=()=>{this._window&&this._window.close()};this._on_release=()=>{this._window=null}}f({url:t,target:e,features:n},i){let{api:{window:{open:s}}}=this.__system,a=Object.entries(n).map(([p,u])=>`${p}=${u}`).join(","),_=s(t,e,a);this._window=_;let c=new class extends ht{constructor(){super(...arguments);this.__=["CH"]}send(d){return G(this,null,function*(){let m=Ot(d);_.postMessage(m,"*")})}}(this.__system);try{window.addEventListener("message",p=>{c.emit("message",p.data)})}catch(p){i(void 0,p.message);return}i({window:c})}d(){this._release()}onIterDataInputData(t,e){this._release()}};l();var qd=class extends dt{constructor(o){super({fi:["window","target","data"],fo:[],i:[],o:[]},{output:{window:{ref:!0}}},o,hb)}f({window:o,target:t,data:e},n){let{api:{window:{open:i}}}=this.__system;n({})}};l();l();var Wb=JSON.parse(`{
  "activity": "M22 12 L18 12 L15 21 L9 3 L6 12 L2 12",
  "airplay": "M5 17H4a2 2 0 01-2-2V5a2 2 0 012-2h16a2 2 0 012 2v10a2 2 0 01-2 2h-1 M12 15 L17 21 L7 21 L12 15 Z",
  "alarm-check": "M12 21a8 8 0 100-16 8 8 0 000 16z M5 3L2 6 M22 6l-3-3 M6 19l-2 2 M18 19l2 2 M9 13l2 2 4-4",
  "alarm-clock": "M20 13 A8 8 0 0 1 12 21 A8 8 0 0 1 4 13 A8 8 0 0 1 20 13 z M12 9v4l2 2 M5 3L2 6 M22 6l-3-3 M6 19l-2 2 M18 19l2 2",
  "alarm-minus": "M12 21a8 8 0 100-16 8 8 0 000 16z M5 3L2 6 M22 6l-3-3 M6 19l-2 2 M18 19l2 2 M9 13h6",
  "alarm-plus": "M12 21a8 8 0 100-16 8 8 0 000 16z M5 3L2 6 M22 6l-3-3 M6 19l-2 2 M18 19l2 2 M12 10v6 M9 13h6",
  "album": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M11 3 L11 11 L14 8 L17 11 L17 3",
  "alert-circle": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M12 8 L12 12 M12 16 L12.01 16",
  "alert-octagon": "M7.86 2 L16.14 2 L22 7.86 L22 16.14 L16.14 22 L7.86 22 L2 16.14 L2 7.86 L7.86 2 Z M12 8 L12 12 M12 16 L12.01 16",
  "alert-triangle": "M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z M12 9 L12 13 M12 17 L12.01 17",
  "align-center": "M21 6 L3 6 M17 12 L7 12 M19 18 L5 18",
  "align-justify": "M3 6 L21 6 M3 12 L21 12 M3 18 L21 18",
  "align-left": "M21 6 L3 6 M15 12 L3 12 M17 18 L3 18",
  "align-right": "M21 6 L3 6 M21 12 L9 12 M21 18 L7 18",
  "anchor": "M15 5 A3 3 0 0 1 12 8 A3 3 0 0 1 9 5 A3 3 0 0 1 15 5 z M12 22 L12 8 M5 12H2a10 10 0 0020 0h-3",
  "aperture": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M14.31 8 L20.05 17.94 M9.69 8 L21.17 8 M7.38 12 L13.12 2.06 M9.69 16 L3.95 6.06 M14.31 16 L2.83 16 M16.62 12 L10.88 21.94",
  "archive": "M21 8 L21 21 L3 21 L3 8 M1 3 H23 V8 H1 V3 z M10 12 L14 12",
  "array": "M 9 17 H 2 V 7 H 22 V 17 H 9 M8.5 7 L8.5 16 M15.5 7 L15.5 16",
  "arrow-big-down": "M9 3h6v11h4l-7 7-7-7h4z",
  "arrow-big-left": "M3 12l7-7v4h11v6H10v4z",
  "arrow-big-right": "M21 12l-7-7v4H3v6h11v4z",
  "arrow-big-up": "M9 21V10H5l7-7 7 7h-4v11z",
  "arrow-down-circle": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M8 12 L12 16 L16 12 M12 8 L12 16",
  "arrow-down-left": "M17 7 L7 17 M17 17 L7 17 L7 7",
  "arrow-down-right": "M7 7 L17 17 M17 7 L17 17 L7 17",
  "arrow-down": "M12 5 L12 19 M19 12 L12 19 L5 12",
  "arrow-left-circle": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M12 8 L8 12 L12 16 M16 12 L8 12",
  "arrow-left": "M19 12 L5 12 M12 19 L5 12 L12 5",
  "arrow-right-circle": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M12 16 L16 12 L12 8 M8 12 L16 12",
  "arrow-right": "M5 12 L19 12 M12 5 L19 12 L12 19",
  "arrow-up-circle": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M16 12 L12 8 L8 12 M12 16 L12 8",
  "arrow-up-left": "M17 17 L7 7 M7 17 L7 7 L17 7",
  "arrow-up-right": "M7 17 L17 7 M7 7 L17 7 L17 17",
  "arrow-up": "M12 19 L12 5 M5 12 L12 5 L19 12",
  "asterisk": "M12 6v12 M17.196 9L6.804 15 M6.804 9l10.392 6",
  "at-sign": "M16 12 A4 4 0 0 1 12 16 A4 4 0 0 1 8 12 A4 4 0 0 1 16 12 z M16 8v5a3 3 0 006 0v-1a10 10 0 10-3.92 7.94",
  "atom-alt": "M 4 12 A 9 6 45 0 1 20 12 A 9 6 45 0 1 4 12 M 4 12 A 9 6 -45 0 1 20 12 A 9 6 -45 0 1 4 12 M13 12 A1 1 0 0 1 12 13 A1 1 0 0 1 11 12 A1 1 0 0 1 13 12 z M12 12 L12.001 12",
  "award": "M19 8 A7 7 0 0 1 12 15 A7 7 0 0 1 5 8 A7 7 0 0 1 19 8 z M8.21 13.89 L7 23 L12 20 L17 23 L15.79 13.88",
  "axe": "M14 12l-8.501 8.501a2.12 2.12 0 01-2.998 0h-.002a2.12 2.12 0 010-2.998L11 9.002 M9 7l4-4 6 6h3l-.13.648a7.648 7.648 0 01-5.081 5.756L15 16v-3z",
  "backspace": "M 4 12 L 8 4 H 20 V 20 H 8 Z M10 9 L16 15 M16 9 L10 15",
  "banknote": "M4 6 H20 A2 2 0 0 1 22 8 V16 A2 2 0 0 1 20 18 H4 A2 2 0 0 1 2 16 V8 A2 2 0 0 1 4 6 z M14 12 A2 2 0 0 1 12 14 A2 2 0 0 1 10 12 A2 2 0 0 1 14 12 z M6 12h.01M18 12h.01",
  "bar-chart-2": "M18 20 L18 10 M12 20 L12 4 M6 20 L6 14",
  "bar-chart": "M12 20 L12 10 M18 20 L18 4 M6 20 L6 16",
  "battery-charging": "M7 7H3.78A1.73 1.73 0 002 8.67v6.66A1.73 1.73 0 003.78 17H6m8-10h2.22A1.73 1.73 0 0118 8.67v6.66A1.73 1.73 0 0116.22 17H13 M11 7 L8 12 L12 12 L9 17 M22 11 L22 13",
  "battery-full": "M4 7 H16 A2 2 0 0 1 18 9 V15 A2 2 0 0 1 16 17 H4 A2 2 0 0 1 2 15 V9 A2 2 0 0 1 4 7 z M22 11 L22 13 M6 10 L6 14 M10 10 L10 14 M14 10 L14 14",
  "battery-low": "M4 7 H16 A2 2 0 0 1 18 9 V15 A2 2 0 0 1 16 17 H4 A2 2 0 0 1 2 15 V9 A2 2 0 0 1 4 7 z M22 11 L22 13 M6 10 L6 14",
  "battery-medium": "M4 7 H16 A2 2 0 0 1 18 9 V15 A2 2 0 0 1 16 17 H4 A2 2 0 0 1 2 15 V9 A2 2 0 0 1 4 7 z M22 11 L22 13 M6 10 L6 14 M10 10 L10 14",
  "battery": "M4 7 H16 A2 2 0 0 1 18 9 V15 A2 2 0 0 1 16 17 H4 A2 2 0 0 1 2 15 V9 A2 2 0 0 1 4 7 z M22 11 L22 13",
  "beaker": "M4.5 3h15 M6 3v16a2 2 0 002 2h8a2 2 0 002-2V3 M6 14h12",
  "bell-minus": "M13.73 21a2 2 0 01-3.46 0 M21 5h-6 M18.021 9C18.29 15.193 21 17 21 17H3s3-2 3-9a6 6 0 017-5.916",
  "bell-off": "M13.73 21a2 2 0 01-3.46 0 M18.63 13A17.888 17.888 0 0118 8 M6.26 6.26A5.86 5.86 0 006 8c0 7-3 9-3 9h14 M18 8a6 6 0 00-9.33-5 M2 2l20 20",
  "bell-plus": "M18.387 12C19.198 15.799 21 17 21 17H3s3-2 3-9a6 6 0 017-5.916 M13.73 21a2 2 0 01-3.46 0 M18 2v6 M21 5h-6",
  "bell-ring": "M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9 M13.73 21a2 2 0 01-3.46 0 M2 8c0-2.2.7-4.3 2-6 M22 8a10 10 0 00-2-6",
  "bell": "M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9 M13.73 21a2 2 0 01-3.46 0",
  "bike": "M9 17.5 A3.5 3.5 0 0 1 5.5 21 A3.5 3.5 0 0 1 2 17.5 A3.5 3.5 0 0 1 9 17.5 z M22 17.5 A3.5 3.5 0 0 1 18.5 21 A3.5 3.5 0 0 1 15 17.5 A3.5 3.5 0 0 1 22 17.5 z M15 6a1 1 0 100-2 1 1 0 000 2zm-3 11.5V14l-3-3 4-3 2 3h2",
  "binary": "M10 4H6v6h4V4z M18 14h-4v6h4v-6z M14 4h2v6m-2 0h4 M6 14h2v6m-2 0h4",
  "bitcoin": "M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042l-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893l-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042l.348-1.97M7.48 20.364l3.126-17.727",
  "bluetooth-connected": "M7 7l10 10-5 5V2l5 5L7 17 M18 12 L21 12 M3 12 L6 12",
  "bluetooth-off": "M17 17l-5 5V12l-5 5 M2 2l20 20 M14.5 9.5L17 7l-5-5v4.5",
  "bluetooth-searching": "M7 7l10 10-5 5V2l5 5L7 17 M20.83 14.83a4 4 0 000-5.66 M18 12h.01",
  "bluetooth": "M7 7l10 10-5 5V2l5 5L7 17",
  "bold": "M6 4h8a4 4 0 014 4 4 4 0 01-4 4H6z M6 12h9a4 4 0 014 4 4 4 0 01-4 4H6z",
  "book-open": "M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z",
  "book": "M4 19.5A2.5 2.5 0 016.5 17H20 M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z",
  "bookmark": "M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z",
  "bot": "M5 11 H19 A2 2 0 0 1 21 13 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V13 A2 2 0 0 1 5 11 z M14 5 A2 2 0 0 1 12 7 A2 2 0 0 1 10 5 A2 2 0 0 1 14 5 z M12 7v4 M8 16 L8 16 M16 16 L16 16",
  "box-select": "M4 2a2 2 0 00-2 2 M8 2 L10 2 M14 2 L16 2 M4 22a2 2 0 01-2-2 M22 8 L22 10 M22 14 L22 16 M22 20a2 2 0 01-2 2 M14 22 L16 22 M8 22 L10 22 M20 2a2 2 0 012 2 M2 14 L2 16 M2 8 L2 10",
  "box": "M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z M3.27 6.96 L12 12.01 L20.73 6.96 M12 22.08 L12 12",
  "brackets-curly": "M 8 4 H 4 V 10 L 2 12 L 4 14 V 20 H 8 M 16 4 H 20 V 10 L 22 12 L 20 14 V 20 H 16",
  "brackets": "M 8 4 H 4 V 20 H 8 M 16 4 H 20 V 20 H 16",
  "briefcase": "M4 7 H20 A2 2 0 0 1 22 9 V19 A2 2 0 0 1 20 21 H4 A2 2 0 0 1 2 19 V9 A2 2 0 0 1 4 7 z M16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16",
  "broadcast-tower": "M14 7 A2 2 0 0 1 12 9 A2 2 0 0 1 10 7 A2 2 0 0 1 14 7 z M 7 5 A 4 4 0 0 0 7 9 M 4 3 A 8 8 0 0 0 4 11 M 17 5 A 4 4 0 0 1 17 9 M 20 3 A 8 8 0 0 1 20 11 M 4 3 A 8 8 0 0 0 4 11 M7 21 L11 9 M17 21 L13 9 M10 14 L14 14",
  "brush": "M9.06 11.9l8.07-8.06a2.85 2.85 0 114.03 4.03l-8.06 8.08 M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 00-3-3.02z",
  "bug": "M12 6 H12 A4 4 0 0 1 16 10 V16 A4 4 0 0 1 12 20 H12 A4 4 0 0 1 8 16 V10 A4 4 0 0 1 12 6 z M19 7l-3 2 M5 7l3 2 M19 19l-3-2 M5 19l3-2 M20 13h-4 M4 13h4 M10 4l1 2 M14 4l-1 2",
  "building": "M6 2 H18 A2 2 0 0 1 20 4 V20 A2 2 0 0 1 18 22 H6 A2 2 0 0 1 4 20 V4 A2 2 0 0 1 6 2 z M9 22v-4h6v4 M8 6h.01 M16 6h.01 M12 6h.01 M12 10h.01 M12 14h.01 M16 10h.01 M16 14h.01 M8 10h.01 M8 14h.01",
  "bus": "M19 17h2l.64-2.54a6 6 0 000-2.92l-1.07-4.27A3 3 0 0017.66 5H4a2 2 0 00-2 2v10h2m10 0h-4 M9 17.5 A2.5 2.5 0 0 1 6.5 20 A2.5 2.5 0 0 1 4 17.5 A2.5 2.5 0 0 1 9 17.5 z M19 17.5 A2.5 2.5 0 0 1 16.5 20 A2.5 2.5 0 0 1 14 17.5 A2.5 2.5 0 0 1 19 17.5 z",
  "calculator": "M6 2 H18 A2 2 0 0 1 20 4 V20 A2 2 0 0 1 18 22 H6 A2 2 0 0 1 4 20 V4 A2 2 0 0 1 6 2 z M8 6 L16 6 M16 14 L16 18 M16 10h.01 M12 10h.01 M8 10h.01 M12 14h.01 M8 14h.01 M12 18h.01 M8 18h.01",
  "calendar": "M5 4 H19 A2 2 0 0 1 21 6 V20 A2 2 0 0 1 19 22 H5 A2 2 0 0 1 3 20 V6 A2 2 0 0 1 5 4 z M16 2 L16 6 M8 2 L8 6 M3 10 L21 10",
  "camera-off": "M2 2 L22 22 M9.5 4h5L17 7h3a2 2 0 012 2v7.5M7 7H4a2 2 0 00-2 2v9a2 2 0 002 2h16 M14.121 15.121A3 3 0 119.88 10.88",
  "camera": "M14.5 4h-5L7 7H4a2 2 0 00-2 2v9a2 2 0 002 2h16a2 2 0 002-2V9a2 2 0 00-2-2h-3l-2.5-3z M15 13 A3 3 0 0 1 12 16 A3 3 0 0 1 9 13 A3 3 0 0 1 15 13 z",
  "car": "M14 16H9m10 0h3v-3.15a1 1 0 00-.84-.99L16 11l-2.7-3.6a1 1 0 00-.8-.4H5.24a2 2 0 00-1.8 1.1l-.8 1.63A6 6 0 002 12.42V16h2 M9 16.5 A2.5 2.5 0 0 1 6.5 19 A2.5 2.5 0 0 1 4 16.5 A2.5 2.5 0 0 1 9 16.5 z M19 16.5 A2.5 2.5 0 0 1 16.5 19 A2.5 2.5 0 0 1 14 16.5 A2.5 2.5 0 0 1 19 16.5 z",
  "cast": "M2 16.1A5 5 0 015.9 20M2 12.05A9 9 0 019.95 20M2 8V6a2 2 0 012-2h16a2 2 0 012 2v12a2 2 0 01-2 2h-6 M2 20 L2.01 20",
  "chalkboard": "M5 5 H19 A2 2 0 0 1 21 7 V17 A2 2 0 0 1 19 19 H5 A2 2 0 0 1 3 17 V7 A2 2 0 0 1 5 5 z M12 16 H18 V19 H12 V16 z",
  "check-circle-2": "M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z M9 12l2 2 4-4",
  "check-circle": "M22 11.08V12a10 10 0 11-5.93-9.14 M22 4 L12 14.01 L9 11.01",
  "check-square": "M9 11 L12 14 L22 4 M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11",
  "check": "M20 6 L9 17 L4 12",
  "chevron-down": "M6 9 L12 15 L18 9",
  "chevron-left": "M15 18 L9 12 L15 6",
  "chevron-right": "M9 18 L15 12 L9 6",
  "chevron-up": "M18 15 L12 9 L6 15",
  "chevrons-down-up": "M7 20l5-5 5 5 M7 4l5 5 5-5",
  "chevrons-down": "M7 13 L12 18 L17 13 M7 6 L12 11 L17 6",
  "chevrons-left": "M11 17 L6 12 L11 7 M18 17 L13 12 L18 7",
  "chevrons-right": "M13 17 L18 12 L13 7 M6 17 L11 12 L6 7",
  "chevrons-up-down": "M7 15l5 5 5-5 M7 9l5-5 5 5",
  "chevrons-up": "M17 11 L12 6 L7 11 M17 18 L12 13 L7 18",
  "chrome": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M16 12 A4 4 0 0 1 12 16 A4 4 0 0 1 8 12 A4 4 0 0 1 16 12 z M21.17 8 L12 8 M3.95 6.06 L8.54 14 M10.88 21.94 L15.46 14",
  "circle-slashed": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M22 2L2 22",
  "circle": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z",
  "clipboard-check": "M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2 M15 2H9a1 1 0 00-1 1v2a1 1 0 001 1h6a1 1 0 001-1V3a1 1 0 00-1-1z M9 13l2 2 4-4",
  "clipboard-copy": "M16 4h2a2 2 0 012 2v4M8 4H6a2 2 0 00-2 2v14a2 2 0 002 2h12a2 2 0 002-2v-2 M9 2 H15 A1 1 0 0 1 16 3 V5 A1 1 0 0 1 15 6 H9 A1 1 0 0 1 8 5 V3 A1 1 0 0 1 9 2 z M21 14H11 M15 10l-4 4 4 4",
  "clipboard-list": "M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2 M15 2H9a1 1 0 00-1 1v2a1 1 0 001 1h6a1 1 0 001-1V3a1 1 0 00-1-1z M12 11h4 M12 16h4 M8 11h.01 M8 16h.01",
  "clipboard-x": "M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2 M15 2H9a1 1 0 00-1 1v2a1 1 0 001 1h6a1 1 0 001-1V3a1 1 0 00-1-1z M15 11l-6 6 M9 11l6 6",
  "clipboard": "M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2 M9 2 H15 A1 1 0 0 1 16 3 V5 A1 1 0 0 1 15 6 H9 A1 1 0 0 1 8 5 V3 A1 1 0 0 1 9 2 z",
  "clock": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M12 6 L12 12 L16 14",
  "cloud-drizzle": "M20 16.2A4.5 4.5 0 0017.5 8h-1.8A7 7 0 104 14.9 M8 19v1 M8 14v1 M16 19v1 M16 14v1 M12 21v1 M12 16v1",
  "cloud-fog": "M20 16.2A4.5 4.5 0 0017.5 8h-1.8A7 7 0 104 14.9 M16 17L7 17 M17 21L9 21",
  "cloud-hail": "M20 16.2A4.5 4.5 0 0017.5 8h-1.8A7 7 0 104 14.9 M16 14v2 M8 14v2 M16 20h0 M8 20h0 M12 16v2 M12 22h0",
  "cloud-lightning": "M17.5 17a4.5 4.5 0 100-9h-1.8a7 7 0 10-10.3 8 M12 12l-3 5h5l-3 5",
  "cloud-moon": "M13.63 22A3.3 3.3 0 0017 18.79a3.3 3.3 0 00-3.38-3.22h-1.34A5.23 5.23 0 007.25 12 5.13 5.13 0 002 17c0 2.76 2.35 5 5.25 5h6.38z M9.95 9a6.13 6.13 0 015.5-5.18 4.77 4.77 0 006.67 6.67A6.13 6.13 0 0119.46 15",
  "cloud-off": "M2 2l20 20 M10 5a7 7 0 015.7 5h1.8a4.5 4.5 0 014 6.5 M18.8 18.8c-.4.2-.8.2-1.3.2H9A7 7 0 015.8 5.8",
  "cloud-rain-wind": "M20 16.2A4.5 4.5 0 0017.5 8h-1.8A7 7 0 104 14.9 M9.2 22l3-7 M9 13l-3 7 M17 13l-3 7",
  "cloud-rain": "M20 16.2A4.5 4.5 0 0017.5 8h-1.8A7 7 0 104 14.9 M16 14v6 M8 14v6 M12 16v6",
  "cloud-snow": "M20 16.2A4.5 4.5 0 0017.5 8h-1.8A7 7 0 104 14.9 M8 15h0 M8 19h0 M12 17h0 M12 21h0 M16 15h0 M16 19h0",
  "cloud-sun": "M12 2v2 M5.22 5.22l1.42 1.42 M20 12h2 M15.97 12.5A4 4 0 009.5 8.88 M13.63 22A3.3 3.3 0 0017 18.79a3.3 3.3 0 00-3.38-3.22h-1.34A5.23 5.23 0 007.25 12 5.13 5.13 0 002 17c0 2.76 2.35 5 5.25 5h6.38z M17.36 6.64l1.42-1.42",
  "cloud": "M17.5 19a4.5 4.5 0 100-9h-1.8A7 7 0 109 19h8.5z",
  "cloudy": "M17.5 21a4.5 4.5 0 100-9h-1.8A7 7 0 109 21h8.5z M22 10c0-1.5-1.5-3-3.5-3H17c-.7-2.3-2.9-4-5.4-4-2.7 0-5 2-5.5 4.5",
  "clover": "M16.2 3.8a2.7 2.7 0 00-3.81 0l-.4.38-.4-.4a2.7 2.7 0 00-3.82 0C6.73 4.85 6.67 6.64 8 8l4 4 4-4c1.33-1.36 1.27-3.15.2-4.2z M8 8c-1.36-1.33-3.15-1.27-4.2-.2a2.7 2.7 0 000 3.81l.38.4-.4.4a2.7 2.7 0 000 3.82C4.85 17.27 6.64 17.33 8 16 M16 16c1.36 1.33 3.15 1.27 4.2.2a2.7 2.7 0 000-3.81l-.38-.4.4-.4a2.7 2.7 0 000-3.82C19.15 6.73 17.36 6.67 16 8 M7.8 20.2a2.7 2.7 0 003.81 0l.4-.38.4.4a2.7 2.7 0 003.82 0c1.06-1.06 1.12-2.85-.21-4.21l-4-4-4 4c-1.33 1.36-1.27 3.15-.2 4.2z M7 17l-5 5",
  "code-2": "M18 16L22 12L18 8 M6 8L2 12L6 16 M14.5 4L9.5 20",
  "code": "M16 18 L22 12 L16 6 M8 6 L2 12 L8 18",
  "codepen": "M12 2 L22 8.5 L22 15.5 L12 22 L2 15.5 L2 8.5 L12 2 Z M12 22 L12 15.5 M22 8.5 L12 15.5 L2 8.5 M2 15.5 L12 8.5 L22 15.5 M12 2 L12 8.5",
  "codesandbox": "M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z M7.5 4.21 L12 6.81 L16.5 4.21 M7.5 19.79 L7.5 14.6 L3 12 M21 12 L16.5 14.6 L16.5 19.79 M3.27 6.96 L12 12.01 L20.73 6.96 M12 22.08 L12 12",
  "coffee": "M18 8h1a4 4 0 010 8h-1 M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8z M6 1 L6 4 M10 1 L10 4 M14 1 L14 4",
  "coins": "M15 8 A7 7 0 0 1 8 15 A7 7 0 0 1 1 8 A7 7 0 0 1 15 8 z M19.5 9.94a7 7 0 11-9.56 9.56 M7 6h1v4 M17.3 14.3l.7.7-2.8 2.8",
  "columns": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M12 3 L12 21",
  "command": "M18 3a3 3 0 00-3 3v12a3 3 0 003 3 3 3 0 003-3 3 3 0 00-3-3H6a3 3 0 00-3 3 3 3 0 003 3 3 3 0 003-3V6a3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3h12a3 3 0 003-3 3 3 0 00-3-3z",
  "compass": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M16.24 7.76 L14.12 14.12 L7.76 16.24 L9.88 9.88 L16.24 7.76 Z",
  "contact": "M19 22H5c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2v14c0 1.1-.9 2-2 2z M16 2 L16 4 M8 2 L8 4 M15 11 A3 3 0 0 1 12 14 A3 3 0 0 1 9 11 A3 3 0 0 1 15 11 z M17 18.5c-1.4-1-3.1-1.5-5-1.5s-3.6.6-5 1.5",
  "contrast": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M12 18a6 6 0 000-12v12z",
  "copy": "M11 9 H20 A2 2 0 0 1 22 11 V20 A2 2 0 0 1 20 22 H11 A2 2 0 0 1 9 20 V11 A2 2 0 0 1 11 9 z M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1",
  "copyleft": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M9 9.35a4 4 0 110 5.3",
  "copyright": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M15 9.354a4 4 0 100 5.292",
  "corner-down-left": "M9 10 L4 15 L9 20 M20 4v7a4 4 0 01-4 4H4",
  "corner-down-right": "M15 10 L20 15 L15 20 M4 4v7a4 4 0 004 4h12",
  "corner-left-down": "M14 15 L9 20 L4 15 M20 4h-7a4 4 0 00-4 4v12",
  "corner-left-up": "M14 9 L9 4 L4 9 M20 20h-7a4 4 0 01-4-4V4",
  "corner-right-down": "M10 15 L15 20 L20 15 M4 4h7a4 4 0 014 4v12",
  "corner-right-up": "M10 9 L15 4 L20 9 M4 20h7a4 4 0 004-4V4",
  "corner-up-left": "M9 14 L4 9 L9 4 M20 20v-7a4 4 0 00-4-4H4",
  "corner-up-right": "M15 14 L20 9 L15 4 M4 20v-7a4 4 0 014-4h12",
  "cpu": "M6 4 H18 A2 2 0 0 1 20 6 V18 A2 2 0 0 1 18 20 H6 A2 2 0 0 1 4 18 V6 A2 2 0 0 1 6 4 z M9 9 H15 V15 H9 V9 z M9 1 L9 4 M15 1 L15 4 M9 20 L9 23 M15 20 L15 23 M20 9 L23 9 M20 14 L23 14 M1 9 L4 9 M1 14 L4 14",
  "credit-card": "M3 4 H21 A2 2 0 0 1 23 6 V18 A2 2 0 0 1 21 20 H3 A2 2 0 0 1 1 18 V6 A2 2 0 0 1 3 4 z M1 10 L23 10",
  "crop": "M6.13 1L6 16a2 2 0 002 2h15 M1 6.13L16 6a2 2 0 012 2v15",
  "cross": "M11 2a2 2 0 00-2 2v5H4a2 2 0 00-2 2v2c0 1.1.9 2 2 2h5v5c0 1.1.9 2 2 2h2a2 2 0 002-2v-5h5a2 2 0 002-2v-2a2 2 0 00-2-2h-5V4a2 2 0 00-2-2h-2z",
  "crosshair": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M22 12 L18 12 M6 12 L2 12 M12 6 L12 2 M12 22 L12 18",
  "crown": "M2 4l3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",
  "currency": "M20 12 A8 8 0 0 1 12 20 A8 8 0 0 1 4 12 A8 8 0 0 1 20 12 z M3 3 L6 6 M21 3 L18 6 M3 21 L6 18 M21 21 L18 18",
  "data": "M 4 18 L 12 4 L 20 18 Z",
  "database": "M21 5 A9 3 0 0 1 12 8 A9 3 0 0 1 3 5 A9 3 0 0 1 21 5 z M21 12c0 1.66-4 3-9 3s-9-1.34-9-3 M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5",
  "delete": "M21 4H8l-7 8 7 8h13a2 2 0 002-2V6a2 2 0 00-2-2z M18 9 L12 15 M12 9 L18 15",
  "description": "M4 4 L20 4 M4 12 L20 12 M4 20 L20 20",
  "disc": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M15 12 A3 3 0 0 1 12 15 A3 3 0 0 1 9 12 A3 3 0 0 1 15 12 z",
  "divide-circle": "M8 12 L16 12 M12 16 L12 16 M12 8 L12 8 M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z",
  "divide-square": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M8 12 L16 12 M12 16 L12 16 M12 8 L12 8",
  "divide": "M13 6 A1 1 0 0 1 12 7 A1 1 0 0 1 11 6 A1 1 0 0 1 13 6 z M5 12 L19 12 M13 18 A1 1 0 0 1 12 19 A1 1 0 0 1 11 18 A1 1 0 0 1 13 18 z",
  "dollar-sign": "M12 1 L12 23 M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6",
  "dot-circle": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M12 12 L12.01 12",
  "download-cloud": "M20 16.2A4.5 4.5 0 0017.5 8h-1.8A7 7 0 104 14.9 M12 12v9 M8 17l4 4 4-4",
  "download": "M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4 M7 10 L12 15 L17 10 M12 15 L12 3",
  "dribbble": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M8.56 2.75c4.37 6.03 6.02 9.42 8.03 17.72m2.54-15.38c-3.72 4.35-8.94 5.66-16.88 5.85m19.5 1.9c-3.5-.93-6.63-.82-8.94 0-2.58.92-5.01 2.86-7.44 6.32",
  "droplet": "M12 22a7 7 0 007-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 007 7z",
  "droplets": "M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z M12.56 6.6A10.97 10.97 0 0014 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 01-11.91 4.97",
  "edit-2": "M17 3a2.828 2.828 0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z",
  "edit-3": "M12 20h9 M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z",
  "edit": "M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7 M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z",
  "enter": "M 20 4 V 16 H 6 M 8 12 L 4 16 L 8 20",
  "equal-not": "M5 9 L19 9 M5 15 L19 15 M19 5 L5 19",
  "equal": "M5 9 L19 9 M5 15 L19 15",
  "eraser": "M 22 22 L 10 22 L 2 14 L 14 2 L 22 10 L 10 22 M8 8 L16 16",
  "ethereum": "M5 10 l 7 5 l 7 -5 l -7 -7 z M 5 10 l 7 11 l 7 -11",
  "euro": "M4 10h12 M4 14h9 M19 6a7.7 7.7 0 00-5.2-2A7.9 7.9 0 006 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",
  "exchange": "M 8 4 L 4 8 H 20 M 16 20 L 20 16 H 4",
  "exclamation": "M 12 20 V 20 M 12 16 V 4",
  "expand": "M21 21l-6-6m6 6v-4.8m0 4.8h-4.8 M3 16.2V21m0 0h4.8M3 21l6-6 M21 7.8V3m0 0h-4.8M21 3l-6 6 M3 7.8V3m0 0h4.8M3 3l6 6",
  "exponential": "M 3 7 L 15 19 M 3 19 L 15 7 M 21 4 L 18.5 10 M 18 4 L 19.5 6.5",
  "external-link": "M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6 M15 3 L21 3 L21 9 M10 14 L21 3",
  "eye-off": "M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24 M1 1 L23 23",
  "eye": "M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z M15 12 A3 3 0 0 1 12 15 A3 3 0 0 1 9 12 A3 3 0 0 1 15 12 z",
  "facebook": "M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z",
  "fast-forward": "M13 19 L22 12 L13 5 L13 19 Z M2 19 L11 12 L2 5 L2 19 Z",
  "feather": "M20.24 12.24a6 6 0 00-8.49-8.49L5 10.5V19h8.5z M16 8 L2 22 M17.5 15 L9 15",
  "figma": "M5 5.5A3.5 3.5 0 018.5 2H12v7H8.5A3.5 3.5 0 015 5.5z M12 2h3.5a3.5 3.5 0 110 7H12V2z M12 12.5a3.5 3.5 0 117 0 3.5 3.5 0 11-7 0z M5 19.5A3.5 3.5 0 018.5 16H12v3.5a3.5 3.5 0 11-7 0z M5 12.5A3.5 3.5 0 018.5 9H12v7H8.5A3.5 3.5 0 015 12.5z",
  "file-check-2": "M4 22h14a2 2 0 002-2V7.5L14.5 2H6a2 2 0 00-2 2v4 M14 2v6h6 M3 15l2 2 4-4",
  "file-check": "M14.5 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V7.5L14.5 2z M14 2 L14 8 L20 8 M9 15l2 2 4-4",
  "file-code": "M4 22h14a2 2 0 002-2V7.5L14.5 2H6a2 2 0 00-2 2v4 M14 2v6h6 M9 18l3-3-3-3 M5 12l-3 3 3 3",
  "file-digit": "M4 22h14a2 2 0 002-2V7.5L14.5 2H6a2 2 0 00-2 2v4 M14 2v6h6 M10 12h2v6 M2 12 H6 V18 H2 V12 z M10 18h4",
  "file-input": "M4 22h14a2 2 0 002-2V7.5L14.5 2H6a2 2 0 00-2 2v4 M14 2v6h6 M2 15h10 M9 18l3-3-3-3",
  "file-minus-2": "M4 22h14a2 2 0 002-2V7.5L14.5 2H6a2 2 0 00-2 2v4 M14 2v6h6 M3 15h6",
  "file-minus": "M14.5 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V7.5L14.5 2z M14 2 L14 8 L20 8 M9 15 L15 15",
  "file-output": "M4 22h14a2 2 0 002-2V7.5L14.5 2H6a2 2 0 00-2 2v4 M14 2v6h6 M2 15h10 M5 12l-3 3 3 3",
  "file-plus-2": "M4 22h14a2 2 0 002-2V7.5L14.5 2H6a2 2 0 00-2 2v4 M14 2v6h6 M3 15h6 M6 12v6",
  "file-plus": "M14.5 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V7.5L14.5 2z M14 2 L14 8 L20 8 M12 18 L12 12 M9 15 L15 15",
  "file-search": "M4 22h14a2 2 0 002-2V7.5L14.5 2H6a2 2 0 00-2 2v3 M14 2v6h6 M5 17a3 3 0 100-6 3 3 0 000 6z M9 18l-1.5-1.5",
  "file-text": "M14.5 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V7.5L14.5 2z M14 2 L14 8 L20 8 M16 13 L8 13 M16 17 L8 17 M10 9 L8 9",
  "file-x-2": "M4 22h14a2 2 0 002-2V7.5L14.5 2H6a2 2 0 00-2 2v4 M14 2v6h6 M3 12.5l5 5 M8 12.5l-5 5",
  "file-x": "M14.5 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V7.5L14.5 2z M14 2 L14 8 L20 8 M9.5 12.5 L14.5 17.5 M14.5 12.5 L9.5 17.5",
  "file": "M14.5 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V7.5L14.5 2z M14 2 L14 8 L20 8",
  "files": "M15.5 2H8.6c-.4 0-.8.2-1.1.5-.3.3-.5.7-.5 1.1v12.8c0 .4.2.8.5 1.1.3.3.7.5 1.1.5h9.8c.4 0 .8-.2 1.1-.5.3-.3.5-.7.5-1.1V6.5L15.5 2z M3 7.6v12.8c0 .4.2.8.5 1.1.3.3.7.5 1.1.5h9.8 M15 2v5h5",
  "film": "M4.18 2 H19.82 A2.18 2.18 0 0 1 22 4.18 V19.82 A2.18 2.18 0 0 1 19.82 22 H4.18 A2.18 2.18 0 0 1 2 19.82 V4.18 A2.18 2.18 0 0 1 4.18 2 z M7 2 L7 22 M17 2 L17 22 M2 12 L22 12 M2 7 L7 7 M2 17 L7 17 M17 17 L22 17 M17 7 L22 7",
  "filter": "M22 3 L2 3 L10 12.46 L10 19 L14 21 L14 12.46 L22 3 Z",
  "flag": "M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z M4 22 L4 15",
  "flame": "M8.5 14.5A2.5 2.5 0 0011 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 11-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 002.5 2.5z",
  "flashlight-off": "M16 16v4a2 2 0 01-2 2h-4a2 2 0 01-2-2V10c0-2-2-2-2-4 M7 2h11v4c0 2-2 2-2 4v1 M11 6 L18 6 M2 2 L22 22",
  "flashlight": "M18 6c0 2-2 2-2 4v10a2 2 0 01-2 2h-4a2 2 0 01-2-2V10c0-2-2-2-2-4V2h12z M6 6 L18 6 M12 12 L12 12",
  "flask-conical": "M10 2v8L4.72 20.55a1 1 0 00.9 1.45h12.76a1 1 0 00.9-1.45L14 10V2 M8.5 2h7 M7 16h10",
  "flask-round": "M10 2v7.31 M14 9.3V1.99 M8.5 2h7 M14 9.3a6.5 6.5 0 11-4 0 M5.58 16.5h12.85",
  "folder-minus": "M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z M9 14 L15 14",
  "folder-plus": "M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z M12 11 L12 17 M9 14 L15 14",
  "folder": "M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z",
  "form-input": "M4 6 H20 A2 2 0 0 1 22 8 V16 A2 2 0 0 1 20 18 H4 A2 2 0 0 1 2 16 V8 A2 2 0 0 1 4 6 z M12 12h.01 M17 12h.01 M7 12h.01",
  "forward": "M15 17 L20 12 L15 7 M4 18v-2a4 4 0 0 1 4-4h12",
  "framer": "M5 16V9h14V2H5l14 14h-7m-7 0l7 7v-7m-7 0h7",
  "frown": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M16 16s-1.5-2-4-2-4 2-4 2 M9 9 L9.01 9 M15 9 L15.01 9",
  "function-square": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M9 17c1.93 0 2.85-1 2.85-2.8V9.99c0-1.93 1.03-3.26 3.15-2.93M9 11.24h5.66",
  "gamepad-2": "M6 11 L10 11 M8 9 L8 13 M15 12 L15.01 12 M18 10 L18.01 10 M17.32 5H6.68a4 4 0 00-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 003 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 019.828 16h4.344a2 2 0 011.414.586L17 18c.5.5 1 1 2 1a3 3 0 003-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0017.32 5z",
  "gamepad": "M6 12 L10 12 M8 10 L8 14 M15 13 L15.01 13 M18 11 L18.01 11 M4 6 H20 A2 2 0 0 1 22 8 V16 A2 2 0 0 1 20 18 H4 A2 2 0 0 1 2 16 V8 A2 2 0 0 1 4 6 z",
  "gauge": "M12 15l3.5-3.5 M20.3 18c.4-1 .7-2.2.7-3.4C21 9.8 17 6 12 6s-9 3.8-9 8.6c0 1.2.3 2.4.7 3.4",
  "gavel": "M14 13l-7.5 7.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 010-3L11 10 M16 16l6-6 M8 8l6-6 M9 7l8 8 M21 11l-8-8",
  "ghost": "M9 10h.01 M15 10h.01 M12 2a8 8 0 00-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 00-8-8z",
  "gift": "M20 12 L20 22 L4 22 L4 12 M2 7 H22 V12 H2 V7 z M12 22 L12 7 M12 7H7.5a2.5 2.5 0 010-5C11 2 12 7 12 7z M12 7h4.5a2.5 2.5 0 000-5C13 2 12 7 12 7z",
  "git-branch-plus": "M6 3v12 M18 9a3 3 0 100-6 3 3 0 000 6z M6 21a3 3 0 100-6 3 3 0 000 6z M15 6a9 9 0 00-9 9 M18 15v6 M21 18h-6",
  "git-branch": "M6 3 L6 15 M21 6 A3 3 0 0 1 18 9 A3 3 0 0 1 15 6 A3 3 0 0 1 21 6 z M9 18 A3 3 0 0 1 6 21 A3 3 0 0 1 3 18 A3 3 0 0 1 9 18 z M18 9a9 9 0 01-9 9",
  "git-commit": "M15 12 A3 3 0 0 1 12 15 A3 3 0 0 1 9 12 A3 3 0 0 1 15 12 z M3 12 L9 12 M15 12 L21 12",
  "git-merge": "M21 18 A3 3 0 0 1 18 21 A3 3 0 0 1 15 18 A3 3 0 0 1 21 18 z M9 6 A3 3 0 0 1 6 9 A3 3 0 0 1 3 6 A3 3 0 0 1 9 6 z M6 21V9a9 9 0 009 9",
  "git-pull-request": "M21 18 A3 3 0 0 1 18 21 A3 3 0 0 1 15 18 A3 3 0 0 1 21 18 z M9 6 A3 3 0 0 1 6 9 A3 3 0 0 1 3 6 A3 3 0 0 1 9 6 z M13 6h3a2 2 0 012 2v7 M6 9 L6 21",
  "github": "M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0020 4.77 5.07 5.07 0 0019.91 1S18.73.65 16 2.48a13.38 13.38 0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 005 4.77a5.44 5.44 0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 009 18.13V22",
  "gitlab": "M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 01-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 014.82 2a.43.43 0 01.58 0 .42.42 0 01.11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0118.6 2a.43.43 0 01.58 0 .42.42 0 01.11.18l2.44 7.51L23 13.45a.84.84 0 01-.35.94z",
  "glasses": "M10 15 A4 4 0 0 1 6 19 A4 4 0 0 1 2 15 A4 4 0 0 1 10 15 z M22 15 A4 4 0 0 1 18 19 A4 4 0 0 1 14 15 A4 4 0 0 1 22 15 z M14 15a2 2 0 00-2-2 2 2 0 00-2 2 M2.5 13L5 7c.7-1.3 1.4-2 3-2 M21.5 13L19 7c-.7-1.3-1.5-2-3-2",
  "globe-2": "M15 21v-4a2 2 0 012-2h4 M7 4v2a3 3 0 003 2h0a2 2 0 012 2 2 2 0 004 0 2 2 0 012-2h3 M3 11h2a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v4 M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z",
  "globe": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M2 12 L22 12 M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z",
  "grab": "M18 11.5V9a2 2 0 00-2-2v0a2 2 0 00-2 2v1.4 M14 10V8a2 2 0 00-2-2v0a2 2 0 00-2 2v2 M10 9.9V9a2 2 0 00-2-2v0a2 2 0 00-2 2v5 M6 14v0a2 2 0 00-2-2v0a2 2 0 00-2 2v0 M18 11v0a2 2 0 114 0v3a8 8 0 01-8 8h-4a8 8 0 01-8-8 2 2 0 114 0",
  "graph": "M17 13 A4 4 0 0 1 13 17 A4 4 0 0 1 9 13 A4 4 0 0 1 17 13 z M8 5 A3 3 0 0 1 5 8 A3 3 0 0 1 2 5 A3 3 0 0 1 8 5 z M19 6 A1 1 0 0 1 18 7 A1 1 0 0 1 17 6 A1 1 0 0 1 19 6 z M22 18 A2 2 0 0 1 20 20 A2 2 0 0 1 18 18 A2 2 0 0 1 22 18 z M7 19 A1 1 0 0 1 6 20 A1 1 0 0 1 5 19 A1 1 0 0 1 7 19 z M7.5 7.5 L10 10 M18 16.5 L16.5 15.5 M18 6 L15.5 9.5 M6 19 L10 15.5",
  "greater-than-equal": "M 6 4 L 18 10 L 6 16 M6 20 L18 20",
  "greater-than": "M 18 6 L 6 12 L 18 18",
  "grid": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M3 9 L21 9 M3 15 L21 15 M9 3 L9 21 M15 3 L15 21",
  "grip-horizontal": "M13 9 A1 1 0 0 1 12 10 A1 1 0 0 1 11 9 A1 1 0 0 1 13 9 z M20 9 A1 1 0 0 1 19 10 A1 1 0 0 1 18 9 A1 1 0 0 1 20 9 z M6 9 A1 1 0 0 1 5 10 A1 1 0 0 1 4 9 A1 1 0 0 1 6 9 z M13 15 A1 1 0 0 1 12 16 A1 1 0 0 1 11 15 A1 1 0 0 1 13 15 z M20 15 A1 1 0 0 1 19 16 A1 1 0 0 1 18 15 A1 1 0 0 1 20 15 z M6 15 A1 1 0 0 1 5 16 A1 1 0 0 1 4 15 A1 1 0 0 1 6 15 z",
  "grip-lines-horizontal": "M4 8 L20 8 M4 16 L20 16",
  "grip-lines-vertical": "M8 4 L8 20 M16 4 L16 20",
  "grip-vertical": "M10 12 A1 1 0 0 1 9 13 A1 1 0 0 1 8 12 A1 1 0 0 1 10 12 z M10 5 A1 1 0 0 1 9 6 A1 1 0 0 1 8 5 A1 1 0 0 1 10 5 z M10 19 A1 1 0 0 1 9 20 A1 1 0 0 1 8 19 A1 1 0 0 1 10 19 z M16 12 A1 1 0 0 1 15 13 A1 1 0 0 1 14 12 A1 1 0 0 1 16 12 z M16 5 A1 1 0 0 1 15 6 A1 1 0 0 1 14 5 A1 1 0 0 1 16 5 z M16 19 A1 1 0 0 1 15 20 A1 1 0 0 1 14 19 A1 1 0 0 1 16 19 z",
  "half": "M 6 4 h 2 v 6 m -2 0 h 4 M 6 18 L 18 6 M 14 14 h 4 v 3 h -4 v 3 h 4",
  "hammer": "M15 12l-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 010-3L12 9 M17.64 15L22 10.64 M20.91 11.7l-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 00-3.94-1.64H9l.92.82A6.18 6.18 0 0112 8.4v1.56l2 2h2.47l2.26 1.91",
  "hand-metal": "M18 12.5V10a2 2 0 00-2-2v0a2 2 0 00-2 2v1.4 M14 11V9a2 2 0 10-4 0v2 M10 10.5V5a2 2 0 10-4 0v9 M7 15l-1.76-1.76a2 2 0 00-2.83 2.82l3.6 3.6C7.5 21.14 9.2 22 12 22h2a8 8 0 008-8V7a2 2 0 10-4 0v5",
  "hand": "M18 11V6a2 2 0 00-2-2v0a2 2 0 00-2 2v0 M14 10V4a2 2 0 00-2-2v0a2 2 0 00-2 2v2 M10 10.5V6a2 2 0 00-2-2v0a2 2 0 00-2 2v8 M18 8a2 2 0 114 0v6a8 8 0 01-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 012.83-2.82L7 15",
  "hard-drive": "M22 12 L2 12 M5.45 5.11L2 12v6a2 2 0 002 2h16a2 2 0 002-2v-6l-3.45-6.89A2 2 0 0016.76 4H7.24a2 2 0 00-1.79 1.11z M6 16 L6.01 16 M10 16 L10.01 16",
  "hard-hat": "M2 18a1 1 0 001 1h18a1 1 0 001-1v-2a1 1 0 00-1-1H3a1 1 0 00-1 1v2z M10 10V5a1 1 0 011-1h2a1 1 0 011 1v5 M4 15v-3a6 6 0 016-6h0 M14 6h0a6 6 0 016 6v3",
  "hash": "M4 9 L20 9 M4 15 L20 15 M10 3 L8 21 M16 3 L14 21",
  "haze": "M5.2 6.2l1.4 1.4 M2 13h2 M20 13h2 M17.4 7.6l1.4-1.4 M22 17H2 M22 21H2 M16 13a4 4 0 00-8 0 M12 5V2.5",
  "headphones": "M3 18v-6a9 9 0 0118 0v6 M21 19a2 2 0 01-2 2h-1a2 2 0 01-2-2v-3a2 2 0 012-2h3zM3 19a2 2 0 002 2h1a2 2 0 002-2v-3a2 2 0 00-2-2H3z",
  "heart": "M20.42 4.58a5.4 5.4 0 00-7.65 0l-.77.78-.77-.78a5.4 5.4 0 00-7.65 0C1.46 6.7 1.33 10.28 4 13l8 8 8-8c2.67-2.72 2.54-6.3.42-8.42z",
  "help-circle": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3 M12 17 L12.01 17",
  "hexagon": "M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z",
  "highlighter": "M9 11l-6 6v3h9l3-3 M22 12l-4.6 4.6a2 2 0 01-2.8 0l-5.2-5.2a2 2 0 010-2.8L14 4",
  "history": "M3 3v5h5 M3.05 13A9 9 0 106 5.3L3 8 M12 7v5l4 2",
  "home": "M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z M9 22 L9 12 L15 12 L15 22",
  "image-minus": "M21 11v8a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h8 M8.5 10a1.5 1.5 0 100-3 1.5 1.5 0 000 3z M21 15l-5-5L5 21 M22 5h-6",
  "image-off": "M2 2l20 20 M9 3h10a2 2 0 012 2v10M3.59 3.59A2 2 0 003 5v14c0 1.1.9 2 2 2h14a2 2 0 001.41-.59 M9.56 9.56a1.5 1.5 0 01-2.12-2.12 M21 15l-5-5M5 21l8-8",
  "image-plus": "M21 11v8a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h8 M8.5 10a1.5 1.5 0 100-3 1.5 1.5 0 000 3z M21 15l-5-5L5 21 M19 2v6 M22 5h-6",
  "image": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M10 8.5 A1.5 1.5 0 0 1 8.5 10 A1.5 1.5 0 0 1 7 8.5 A1.5 1.5 0 0 1 10 8.5 z M21 15 L16 10 L5 21",
  "import": "M12 3v12 M8 11l4 4 4-4 M8 5H4a2 2 0 00-2 2v10a2 2 0 002 2h16a2 2 0 002-2V7a2 2 0 00-2-2h-4",
  "inbox": "M22 12 L16 12 L14 15 L10 15 L8 12 L2 12 M5.45 5.11L2 12v6a2 2 0 002 2h16a2 2 0 002-2v-6l-3.45-6.89A2 2 0 0016.76 4H7.24a2 2 0 00-1.79 1.11z",
  "indent": "M3 8 L7 12 L3 16 M21 12 L11 12 M21 6 L11 6 M21 18 L11 18",
  "indian-rupee": "M6 3h12 M6 8h12 M6 13l8.5 8 M6 13h3 M9 13c6.667 0 6.667-10 0-10",
  "infinity": "M18.178 8c5.096 0 5.096 8 0 8-5.095 0-7.133-8-12.739-8-4.585 0-4.585 8 0 8 5.606 0 7.644-8 12.74-8z",
  "info-square": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M12 12 L12 16 M12 8 L12 8",
  "info": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M12 16 L12 12 M12 8 L12.01 8",
  "inspect": "M19 11V4a2 2 0 00-2-2H4a2 2 0 00-2 2v13a2 2 0 002 2h7 M12 12l4.166 10 1.48-4.355L22 16.166 12 12z M18 18l3 3",
  "instagram": "M7 2 H17 A5 5 0 0 1 22 7 V17 A5 5 0 0 1 17 22 H7 A5 5 0 0 1 2 17 V7 A5 5 0 0 1 7 2 z M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z M17.5 6.5 L17.51 6.5",
  "italic": "M19 4 L10 4 M14 20 L5 20 M15 4 L9 20",
  "jersey-pound": "M12 9.5V21m0-11.5L6 3m6 6.5L18 3 M6 15h12 M6 11h12",
  "key": "M21 2l-2 2m-7.61 7.61a5.5 5.5 0 11-7.778 7.778 5.5 5.5 0 017.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4",
  "keyboard": "M4 4 H20 A2 2 0 0 1 22 6 V18 A2 2 0 0 1 20 20 H4 A2 2 0 0 1 2 18 V6 A2 2 0 0 1 4 4 z M6 8 L6.01 8 M10 8 L10.01 8 M14 8 L14.01 8 M18 8 L18.01 8 M8 12 L8.01 12 M12 12 L12.01 12 M16 12 L16.01 12 M10 16 L14 16 M6 16 L6.01 16 M18 16 L18.01 16",
  "languages": "M5 8l6 6 M4 14l6-6 2-3 M2 5h12 M7 2h1 M22 22l-5-10-5 10 M14 18h6",
  "laptop-2": "M5 4 H19 A2 2 0 0 1 21 6 V14 A2 2 0 0 1 19 16 H5 A2 2 0 0 1 3 14 V6 A2 2 0 0 1 5 4 z M2 20 L22 20",
  "laptop": "M20 16V7a2 2 0 00-2-2H6a2 2 0 00-2 2v9m16 0H4m16 0l1.28 2.55a1 1 0 01-.9 1.45H3.62a1 1 0 01-.9-1.45L4 16",
  "lasso-select": "M7 22a5 5 0 01-2-4 M7 16.93c.96.43 1.96.74 2.99.91 M3.34 14A6.8 6.8 0 012 10c0-4.42 4.48-8 10-8s10 3.58 10 8a7.19 7.19 0 01-.33 2 M5 18a2 2 0 100-4 2 2 0 000 4z M14.33 22h-.09a.35.35 0 01-.24-.32v-10a.34.34 0 01.33-.34c.08 0 .15.03.21.08l7.34 6a.33.33 0 01-.21.59h-4.49l-2.57 3.85a.35.35 0 01-.28.14v0z",
  "lasso": "M7 22a5 5 0 01-2-4 M3.3 14A6.8 6.8 0 012 10c0-4.4 4.5-8 10-8s10 3.6 10 8-4.5 8-10 8a12 12 0 01-5-1 M5 18a2 2 0 100-4 2 2 0 000 4z",
  "layers": "M12 2 L2 7 L12 12 L22 7 L12 2 Z M2 17 L12 22 L22 17 M2 12 L12 17 L22 12",
  "layout-dashboard": "M3 3 H10 V12 H3 V3 z M14 3 H21 V8 H14 V3 z M14 12 H21 V21 H14 V12 z M3 16 H10 V21 H3 V16 z",
  "layout-grid": "M3 3 H10 V10 H3 V3 z M14 3 H21 V10 H14 V3 z M14 14 H21 V21 H14 V14 z M3 14 H10 V21 H3 V14 z",
  "layout-list": "M3 14 H10 V21 H3 V14 z M3 3 H10 V10 H3 V3 z M14 4 L21 4 M14 9 L21 9 M14 15 L21 15 M14 20 L21 20",
  "layout-template": "M21 3H3v7h18V3z M21 14h-5v7h5v-7z M12 14H3v7h9v-7z",
  "layout": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M3 9 L21 9 M9 21 L9 9",
  "less-than-equal": "M 18 4 L 6 10 L 18 16 M6 20 L18 20",
  "less-than": "M 18 6 L 6 12 L 18 18",
  "library": "M16 6l4 14 M12 6v14 M8 8v12 M4 4v16",
  "life-buoy": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M16 12 A4 4 0 0 1 12 16 A4 4 0 0 1 8 12 A4 4 0 0 1 16 12 z M4.93 4.93 L9.17 9.17 M14.83 14.83 L19.07 19.07 M14.83 9.17 L19.07 4.93 M14.83 9.17 L18.36 5.64 M4.93 19.07 L9.17 14.83",
  "lightbulb-off": "M9 18h6 M10 22h4 M2 2l20 20 M8.91 14a4.61 4.61 0 00-1.41-2.5C6.23 10.23 6 9 6 8a6 6 0 01.084-1M9 2.804A6 6 0 0118 8a4.651 4.651 0 01-1.031 3",
  "lightbulb": "M9 18 L15 18 M10 22 L14 22 M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0018 8 6 6 0 006 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 018.91 14",
  "link-2-off": "M15 7h2a5 5 0 014 8M9 17H7A5 5 0 017 7 M8 12 L12 12 M2 2 L22 22",
  "link-2": "M15 7h2a5 5 0 010 10h-2m-6 0H7A5 5 0 017 7h2 M8 12 L16 12",
  "link": "M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71 M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71",
  "linkedin": "M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z M2 9 H6 V21 H2 V9 z M6 4 A2 2 0 0 1 4 6 A2 2 0 0 1 2 4 A2 2 0 0 1 6 4 z",
  "list-checks": "M10 6 L21 6 M10 12 L21 12 M10 18 L21 18 M3 6 L4 7 L6 5 M3 12 L4 13 L6 11 M3 18 L4 19 L6 17",
  "list-ordered": "M10 6 L21 6 M10 12 L21 12 M10 18 L21 18 M4 6h1v4 M4 10h2 M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",
  "list": "M8 6 L21 6 M8 12 L21 12 M8 18 L21 18 M3 6 L3.01 6 M3 12 L3.01 12 M3 18 L3.01 18",
  "loader-2": "M21 12a9 9 0 11-6.219-8.56",
  "loader": "M12 2 L12 6 M12 18 L12 22 M4.93 4.93 L7.76 7.76 M16.24 16.24 L19.07 19.07 M2 12 L6 12 M18 12 L22 12 M4.93 19.07 L7.76 16.24 M16.24 7.76 L19.07 4.93",
  "locate-fixed": "M2 12 L5 12 M19 12 L22 12 M12 2 L12 5 M12 19 L12 22 M19 12 A7 7 0 0 1 12 19 A7 7 0 0 1 5 12 A7 7 0 0 1 19 12 z M15 12 A3 3 0 0 1 12 15 A3 3 0 0 1 9 12 A3 3 0 0 1 15 12 z",
  "locate": "M2 12 L5 12 M19 12 L22 12 M12 2 L12 5 M12 19 L12 22 M19 12 A7 7 0 0 1 12 19 A7 7 0 0 1 5 12 A7 7 0 0 1 19 12 z",
  "lock": "M5 11 H19 A2 2 0 0 1 21 13 V20 A2 2 0 0 1 19 22 H5 A2 2 0 0 1 3 20 V13 A2 2 0 0 1 5 11 z M7 11V7a5 5 0 0110 0v4",
  "log-in": "M15 3h4a2 2 0 012 2v14a2 2 0 01-2 2h-4 M10 17 L15 12 L10 7 M15 12 L3 12",
  "log-out": "M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4 M16 17 L21 12 L16 7 M21 12 L9 12",
  "mail": "M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z M22 6 L12 13 L2 6",
  "map-pin": "M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z M15 10 A3 3 0 0 1 12 13 A3 3 0 0 1 9 10 A3 3 0 0 1 15 10 z",
  "map-signs": "M 4.5 6 h 14 l 2 2 l -2 2 h -14 Z M 5.5 13 l -2 2 l 2 2 h 14 v -4 z M12 3 L12 6 M12 11 L12 13 M12 17 L12 21",
  "map": "M1 6 L1 22 L8 18 L16 22 L23 18 L23 2 L16 6 L8 2 L1 6 Z M8 2 L8 18 M16 6 L16 22",
  "maximize-2": "M15 3 L21 3 L21 9 M9 21 L3 21 L3 15 M21 3 L14 10 M3 21 L10 14",
  "maximize": "M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3",
  "meh": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M8 15 L16 15 M9 9 L9.01 9 M15 9 L15.01 9",
  "menu": "M4 12 L20 12 M4 6 L20 6 M4 18 L20 18",
  "message-circle": "M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z",
  "message-square": "M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z",
  "mic-off": "M1 1 L23 23 M9 9v3a3 3 0 005.12 2.12M15 9.34V4a3 3 0 00-5.94-.6 M17 16.95A7 7 0 015 12v-2m14 0v2a7 7 0 01-.11 1.23 M12 19 L12 23 M8 23 L16 23",
  "mic": "M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z M19 10v2a7 7 0 01-14 0v-2 M12 19 L12 23 M8 23 L16 23",
  "minimize-2": "M4 14 L10 14 L10 20 M20 10 L14 10 L14 4 M14 10 L21 3 M3 21 L10 14",
  "minimize": "M8 3v3a2 2 0 01-2 2H3m18 0h-3a2 2 0 01-2-2V3m0 18v-3a2 2 0 012-2h3M3 16h3a2 2 0 012 2v3",
  "minus-circle": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M8 12 L16 12",
  "minus-square": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M8 12 L16 12",
  "minus": "M5 12 L19 12",
  "monitor-off": "M17 17H4a2 2 0 01-2-2V5c0-1.5 1-2 1-2 M22 15V5a2 2 0 00-2-2H9 M8 21h8 M12 17v4 M2 2l20 20",
  "monitor-speaker": "M5.5 20H8 M17 9h.01 M14 4 H20 A2 2 0 0 1 22 6 V18 A2 2 0 0 1 20 20 H14 A2 2 0 0 1 12 18 V6 A2 2 0 0 1 14 4 z M8 6H4a2 2 0 00-2 2v6a2 2 0 002 2h4 M18 15 A1 1 0 0 1 17 16 A1 1 0 0 1 16 15 A1 1 0 0 1 18 15 z",
  "monitor": "M4 3 H20 A2 2 0 0 1 22 5 V15 A2 2 0 0 1 20 17 H4 A2 2 0 0 1 2 15 V5 A2 2 0 0 1 4 3 z M8 21 L16 21 M12 17 L12 21",
  "moon": "M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z",
  "more-horizontal": "M13 12 A1 1 0 0 1 12 13 A1 1 0 0 1 11 12 A1 1 0 0 1 13 12 z M20 12 A1 1 0 0 1 19 13 A1 1 0 0 1 18 12 A1 1 0 0 1 20 12 z M6 12 A1 1 0 0 1 5 13 A1 1 0 0 1 4 12 A1 1 0 0 1 6 12 z",
  "more-vertical": "M13 12 A1 1 0 0 1 12 13 A1 1 0 0 1 11 12 A1 1 0 0 1 13 12 z M13 5 A1 1 0 0 1 12 6 A1 1 0 0 1 11 5 A1 1 0 0 1 13 5 z M13 19 A1 1 0 0 1 12 20 A1 1 0 0 1 11 19 A1 1 0 0 1 13 19 z",
  "mountain-snow": "M8 3L12 11L17 6L22 21H2L8 3Z M4.14 15.08c2.62-1.57 5.24-1.43 7.86.42 2.74 1.94 5.49 2 8.23.19",
  "mountain": "M8 3L12 11L17 6L22 21H2L8 3Z",
  "mouse-pointer-2": "M4 4l7.07 17 2.51-7.39L21 11.07z",
  "mouse-pointer-click": "M9 9l5 12 1.774-5.226L21 14 9 9z M16.071 16.071l4.243 4.243 M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122",
  "mouse-pointer": "M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z M13 13l6 6",
  "move-diagonal-2": "M5 11 L5 5 L11 5 M19 13 L19 19 L13 19 M5 5 L19 19",
  "move-diagonal": "M13 5 L19 5 L19 11 M11 19 L5 19 L5 13 M19 5 L5 19",
  "move-horizontal": "M18 8 L22 12 L18 16 M6 8 L2 12 L6 16 M2 12 L22 12",
  "move-vertical": "M8 18 L12 22 L16 18 M8 6 L12 2 L16 6 M12 2 L12 22",
  "move": "M5 9 L2 12 L5 15 M9 5 L12 2 L15 5 M15 19 L12 22 L9 19 M19 9 L22 12 L19 15 M2 12 L22 12 M12 2 L12 22",
  "music": "M9 18V5l12-2v13 M9 18 A3 3 0 0 1 6 21 A3 3 0 0 1 3 18 A3 3 0 0 1 9 18 z M21 16 A3 3 0 0 1 18 19 A3 3 0 0 1 15 16 A3 3 0 0 1 21 16 z",
  "navigation-2": "M12 2 L19 21 L12 17 L5 21 L12 2 Z",
  "navigation": "M3 11 L22 2 L13 21 L11 13 L3 11 Z",
  "network": "M9 2 H15 V8 H9 V2 z M16 16 H22 V22 H16 V16 z M2 16 H8 V22 H2 V16 z M12 8v4m0 0H5v4m7-4h7v4",
  "object-get": "M 10 4 H 6 V 10 L 4 12 L 6 14 V 20 H 10 M 18 12 H 10 M 16 8 L 20 12 L 16 16",
  "object-set": "M 10 4 H 6 V 10 L 4 12 L 6 14 V 20 H 10 M 20 12 H 12 M 14 8 L 10 12 L 14 16",
  "octagon": "M7.86 2 L16.14 2 L22 7.86 L22 16.14 L16.14 22 L7.86 22 L2 16.14 L2 7.86 L7.86 2 Z",
  "omega": "M 3 21 L 9 21 A 9 9 0 1 1 15 21 L 21 21",
  "option": "M3 3h6l6 18h6 M14 3h7",
  "outdent": "M7 8 L3 12 L7 16 M21 12 L11 12 M21 6 L11 6 M21 18 L11 18",
  "package": "M16.5 9.4 L7.5 4.21 M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z M3.27 6.96 L12 12.01 L20.73 6.96 M12 22.08 L12 12",
  "palette": "M14 6.5 A0.5 0.5 0 0 1 13.5 7 A0.5 0.5 0 0 1 13 6.5 A0.5 0.5 0 0 1 14 6.5 z M13.5 6.5 L13.501 6.5 M18 10.5 A0.5 0.5 0 0 1 17.5 11 A0.5 0.5 0 0 1 17 10.5 A0.5 0.5 0 0 1 18 10.5 z M17.5 10.5 L17.501 10.5 M9 7.5 A0.5 0.5 0 0 1 8.5 8 A0.5 0.5 0 0 1 8 7.5 A0.5 0.5 0 0 1 9 7.5 z M8.5 7.5 L8.501 7.5 M7 12.5 A0.5 0.5 0 0 1 6.5 13 A0.5 0.5 0 0 1 6 12.5 A0.5 0.5 0 0 1 7 12.5 z M6.5 12.5 L6.501 12.5 M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 011.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",
  "paperclip": "M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48",
  "pause-circle": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M10 15 L10 9 M14 15 L14 9",
  "pause-octagon": "M10 15V9 M14 15V9 M7.714 2h8.572L22 7.714v8.572L16.286 22H7.714L2 16.286V7.714L7.714 2z",
  "pause": "M6 4 H10 V20 H6 V4 z M14 4 H18 V20 H14 V4 z",
  "pen-tool": "M12 19l7-7 3 3-7 7-3-3z M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z M2 2l7.586 7.586 M13 11 A2 2 0 0 1 11 13 A2 2 0 0 1 9 11 A2 2 0 0 1 13 11 z",
  "pencil": "M18 2 L22 6 M7.5 20.5L19 9l-4-4L3.5 16.5 2 22l5.5-1.5z",
  "percent": "M19 5 L5 19 M9 6.5 A2.5 2.5 0 0 1 6.5 9 A2.5 2.5 0 0 1 4 6.5 A2.5 2.5 0 0 1 9 6.5 z M20 17.5 A2.5 2.5 0 0 1 17.5 20 A2.5 2.5 0 0 1 15 17.5 A2.5 2.5 0 0 1 20 17.5 z",
  "person-standing": "M13 5 A1 1 0 0 1 12 6 A1 1 0 0 1 11 5 A1 1 0 0 1 13 5 z M9 20L12 14L15 20 M6 8L12 10L18 8 M12 10V14",
  "phone-call": "M14.05 6A5 5 0 0118 10m-3.95-8a9 9 0 018 7.94m0 7v3a2 2 0 01-2 2h-.19a19.79 19.79 0 01-8.63-3.07 19.52 19.52 0 01-6-6 19.82 19.82 0 01-3.11-8.69A2 2 0 013.93 2h3.18a2 2 0 012 1.72 13 13 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 13 13 0 002.81.7A2 2 0 0122 16.92z",
  "phone-forwarded": "M18 2 L22 6 L18 10 M14 6 L22 6 M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z",
  "phone-incoming": "M16 2 L16 8 L22 8 M22 2 L16 8 M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z",
  "phone-missed": "M22 2 L16 8 M16 2 L22 8 M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z",
  "phone-off": "M10.68 13.31a16 16 0 003.41 2.6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7 2 2 0 011.72 2v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.42 19.42 0 01-3.33-2.67m-2.67-3.34a19.79 19.79 0 01-3.07-8.63A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91 M22 2 L2 22",
  "phone-outgoing": "M22 8 L22 2 L16 2 M16 8 L22 2 M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z",
  "phone": "M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z",
  "pi": "M4 6 L20 6 M8 6 L8 18 M 16 6 V 16 A 1 1 0 0 0 20 16",
  "pie-chart": "M21.21 15.89A10 10 0 118 2.83 M22 12A10 10 0 0012 2v10z",
  "pipette": "M2 22l2-2h3l7-7 M4 20v-3l7-7 M14.29 13.3a1 1 0 001.41 0l.8-.8c.27-.27.27-.72 0-1s-.28-.72 0-1l4.08-4.08a2 2 0 000-2.83l-.17-.17a2 2 0 00-2.83 0L13.5 7.51c-.28.27-.73.27-1 0s-.73-.28-1 0l-.8.79a1 1 0 000 1.41l3.59 3.59z",
  "plane": "M17.8 19.2L16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",
  "play-circle": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M10 8 L16 12 L10 16 L10 8 Z",
  "play": "M5 3 L19 12 L5 21 L5 3 Z",
  "plug-zap": "M13 2l-2 2.5h3L12 7 M12 22v-3 M10 13v-2.5 M10 12.5v-2 M14 12.5v-2 M16 15a2 2 0 00-2-2h-4a2 2 0 00-2 2v2a2 2 0 002 2h4a2 2 0 002-2v-2z",
  "plus-2": "M4 12 L20 12 M12 4 L12 20",
  "plus-circle": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M12 8 L12 16 M8 12 L16 12",
  "plus-minus": "M12 4 L12 16 M6 10 L18 10 M6 20 L18 20",
  "plus-square": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M12 8 L12 16 M8 12 L16 12",
  "plus": "M12 5 L12 19 M5 12 L19 12",
  "pocket": "M4 3h16a2 2 0 012 2v6a10 10 0 01-10 10A10 10 0 012 11V5a2 2 0 012-2z M8 10 L12 14 L16 10",
  "podcast": "M13 11 A1 1 0 0 1 12 12 A1 1 0 0 1 11 11 A1 1 0 0 1 13 11 z M17.03 18.46a9 9 0 10-10.02.03 M16.06 13.91a5 5 0 10-7.97.2 M11.11 17a.9.9 0 111.78 0l-.52 4.67a.37.37 0 01-.74 0l-.52-4.68z",
  "pointer": "M22 14a8 8 0 01-8 8 M18 11v-1a2 2 0 00-2-2v0a2 2 0 00-2 2v0 M14 10V9a2 2 0 00-2-2v0a2 2 0 00-2 2v1 M10 9.5V4a2 2 0 00-2-2v0a2 2 0 00-2 2v10 M18 11a2 2 0 114 0v3a8 8 0 01-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 012.83-2.82L7 15",
  "pound-sterling": "M18 7c0-5.333-8-5.333-8 0 M10 7v14 M6 21h12 M6 13h10",
  "power-off": "M18.36 6.64A9 9 0 0120.77 15M5.63 6.64A9 9 0 1018.706 19 M12 2v4 M2 2l20 20",
  "power": "M18.36 6.64a9 9 0 11-12.73 0 M12 2 L12 12",
  "printer": "M6 9 L6 2 L18 2 L18 9 M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2 M6 14 H18 V22 H6 V14 z",
  "qr-code": "M2 2 H10 V10 H2 V2 z M6 6h.01 M14 2 H22 V10 H14 V2 z M18 6h.01 M2 14 H10 V22 H2 V14 z M6 18h.01 M14 14h.01 M18 18h.01 M18 22h4v-4 M14 18v4 M22 14h-4",
  "question": "M 12 20 V 20 M 12 16 V 13 A 4.5 4.5 1 1 0 8 8",
  "radio-receiver": "M5 16v2 M19 16v2 M4 8 H20 A2 2 0 0 1 22 10 V14 A2 2 0 0 1 20 16 H4 A2 2 0 0 1 2 14 V10 A2 2 0 0 1 4 8 z M18 12h0",
  "radio": "M14 12 A2 2 0 0 1 12 14 A2 2 0 0 1 10 12 A2 2 0 0 1 14 12 z M16.24 7.76a6 6 0 010 8.49m-8.48-.01a6 6 0 010-8.49m11.31-2.82a10 10 0 010 14.14m-14.14 0a10 10 0 010-14.14",
  "random": "M 3 6 H 8 L 16 18 H 20 M 18 15 L 21 18 L 18 21 M 18 3 L 21 6 L 18 9 M 14 9 L 16 6 H 20 M 3 18 H 8 L 10 15",
  "redo": "M21 7v6h-6 M3 17a9 9 0 019-9 9 9 0 016 2.3l3 2.7",
  "refresh-ccw": "M3 2v6h6 M21 12A9 9 0 006 5.3L3 8 M21 22v-6h-6 M3 12a9 9 0 0015 6.7l3-2.7",
  "refresh-cw": "M21 2v6h-6 M3 12a9 9 0 0115-6.7L21 8 M3 22v-6h6 M21 12a9 9 0 01-15 6.7L3 16",
  "regex": "M17 3v10 M12.67 5.5l8.66 5 M12.67 10.5l8.66-5 M9 17a2 2 0 00-2-2H5a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2z",
  "repeat-1": "M17 2l4 4-4 4 M3 11v-1a4 4 0 014-4h14 M7 22l-4-4 4-4 M21 13v1a4 4 0 01-4 4H3 M11 10h1v4",
  "repeat": "M17 2l4 4-4 4 M3 11v-1a4 4 0 014-4h14 M7 22l-4-4 4-4 M21 13v1a4 4 0 01-4 4H3",
  "reply-all": "M7 17 L2 12 L7 7 M12 17 L7 12 L12 7 M22 18v-2a4 4 0 0 0-4-4H7",
  "reply": "M9 17 L4 12 L9 7 M20 18v-2a4 4 0 0 0-4-4H4",
  "rewind": "M11 19 L2 12 L11 5 L11 19 Z M22 19 L13 12 L22 5 L22 19 Z",
  "rotate-ccw": "M3 2v6h6 M3 13a9 9 0 103-7.7L3 8",
  "rotate-cw": "M21 2v6h-6 M21 13a9 9 0 11-3-7.7L21 8",
  "rss": "M4 11a9 9 0 019 9 M4 4a16 16 0 0116 16 M6 19 A1 1 0 0 1 5 20 A1 1 0 0 1 4 19 A1 1 0 0 1 6 19 z",
  "ruler": "M16 2l6 6L8 22l-6-6L16 2 M7.5 10.5l2 2 M10.5 7.5l2 2 M13.5 4.5l2 2 M4.5 13.5l2 2",
  "russian-ruble": "M14 11c5.333 0 5.333-8 0-8 M6 11h8 M6 15h8 M9 21V3 M9 3h5",
  "save": "M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z M17 21 L17 13 L7 13 L7 21 M7 3 L7 8 L15 8",
  "scale": "M16 16l3-8 3.001 8A5.002 5.002 0 0116 16z M2 16l3-8 3.001 8A5.002 5.002 0 012 16z M7 21h10 M12 3v18 M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",
  "scissors": "M9 6 A3 3 0 0 1 6 9 A3 3 0 0 1 3 6 A3 3 0 0 1 9 6 z M9 18 A3 3 0 0 1 6 21 A3 3 0 0 1 3 18 A3 3 0 0 1 9 18 z M20 4 L8.12 15.88 M14.47 14.48 L20 20 M8.12 8.12 L12 12",
  "screen-share-off": "M13 3H4a2 2 0 00-2 2v10a2 2 0 002 2h16a2 2 0 002-2v-3 M8 21h8 M12 17v4 M22 3l-5 5 M17 3l5 5",
  "screen-share": "M13 3H4a2 2 0 00-2 2v10a2 2 0 002 2h16a2 2 0 002-2v-3 M8 21h8 M12 17v4 M17 8l5-5 M17 3h5v5",
  "search": "M19 11 A8 8 0 0 1 11 19 A8 8 0 0 1 3 11 A8 8 0 0 1 19 11 z M21 21 L16.65 16.65",
  "send": "M22 2 L11 13 M22 2 L15 22 L11 13 L2 9 L22 2 Z",
  "separator-horizontal": "M3 12 L21 12 M8 8 L12 4 L16 8 M16 16 L12 20 L8 16",
  "separator-vertical": "M12 3 L12 21 M8 8 L4 12 L8 16 M16 16 L20 12 L16 8",
  "server-crash": "M6 10H4a2 2 0 01-2-2V4a2 2 0 012-2h16a2 2 0 012 2v4a2 2 0 01-2 2h-2 M6 14H4a2 2 0 00-2 2v4a2 2 0 002 2h16a2 2 0 002-2v-4a2 2 0 00-2-2h-2 M6 6h.01 M6 18h.01 M13 6l-4 6h6l-4 6",
  "server-off": "M7 2h13a2 2 0 012 2v4a2 2 0 01-2 2h-5 M10 10L2.5 2.5C2 2 2 2.5 2 5v3a2 2 0 002 2h6z M22 17v-1a2 2 0 00-2-2h-1 M4 14a2 2 0 00-2 2v4a2 2 0 002 2h16.5l1-.5.5.5-8-8H4z M6 18h.01 M2 2l20 20",
  "server": "M4 2 H20 A2 2 0 0 1 22 4 V8 A2 2 0 0 1 20 10 H4 A2 2 0 0 1 2 8 V4 A2 2 0 0 1 4 2 z M4 14 H20 A2 2 0 0 1 22 16 V20 A2 2 0 0 1 20 22 H4 A2 2 0 0 1 2 20 V16 A2 2 0 0 1 4 14 z M6 6 L6.01 6 M6 18 L6.01 18",
  "settings": "M12.22 2h-.44a2 2 0 00-2 2v.18a2 2 0 01-1 1.73l-.43.25a2 2 0 01-2 0l-.15-.08a2 2 0 00-2.73.73l-.22.38a2 2 0 00.73 2.73l.15.1a2 2 0 011 1.72v.51a2 2 0 01-1 1.74l-.15.09a2 2 0 00-.73 2.73l.22.38a2 2 0 002.73.73l.15-.08a2 2 0 012 0l.43.25a2 2 0 011 1.73V20a2 2 0 002 2h.44a2 2 0 002-2v-.18a2 2 0 011-1.73l.43-.25a2 2 0 012 0l.15.08a2 2 0 002.73-.73l.22-.39a2 2 0 00-.73-2.73l-.15-.08a2 2 0 01-1-1.74v-.5a2 2 0 011-1.74l.15-.09a2 2 0 00.73-2.73l-.22-.38a2 2 0 00-2.73-.73l-.15.08a2 2 0 01-2 0l-.43-.25a2 2 0 01-1-1.73V4a2 2 0 00-2-2z M15 12 A3 3 0 0 1 12 15 A3 3 0 0 1 9 12 A3 3 0 0 1 15 12 z",
  "share-2": "M21 5 A3 3 0 0 1 18 8 A3 3 0 0 1 15 5 A3 3 0 0 1 21 5 z M9 12 A3 3 0 0 1 6 15 A3 3 0 0 1 3 12 A3 3 0 0 1 9 12 z M21 19 A3 3 0 0 1 18 22 A3 3 0 0 1 15 19 A3 3 0 0 1 21 19 z M8.59 13.51 L15.42 17.49 M15.41 6.51 L8.59 10.49",
  "share": "M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8 M16 6 L12 2 L8 6 M12 2 L12 15",
  "sheet": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M3 9 L21 9 M3 15 L21 15 M9 9 L9 21 M15 9 L15 21",
  "shield-alert": "M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z M12 8v4 M12 16h.01",
  "shield-check": "M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z M9 12l2 2 4-4",
  "shield-close": "M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z M9.5 9 L14.5 14 M14.5 9 L9.5 14",
  "shield-off": "M19.69 14a6.9 6.9 0 00.31-2V5l-8-3-3.16 1.18 M4.73 4.73L4 5v7c0 6 8 10 8 10a20.29 20.29 0 005.62-4.38 M1 1 L23 23",
  "shield": "M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",
  "shift": "M 4 12 L 12 4 L 20 12 H 16 V 20 H 8 V 12 Z",
  "shirt": "M20.38 3.46L16 2a4 4 0 01-8 0L3.62 3.46a2 2 0 00-1.34 2.23l.58 3.47a1 1 0 00.99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 002-2V10h2.15a1 1 0 00.99-.84l.58-3.47a2 2 0 00-1.34-2.23z",
  "shopping-bag": "M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z M3 6 L21 6 M16 10a4 4 0 01-8 0",
  "shopping-cart": "M10 21 A1 1 0 0 1 9 22 A1 1 0 0 1 8 21 A1 1 0 0 1 10 21 z M21 21 A1 1 0 0 1 20 22 A1 1 0 0 1 19 21 A1 1 0 0 1 21 21 z M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6",
  "shovel": "M2 22v-5l5-5 5 5-5 5z M9.5 14.5L16 8 M17 2l5 5-.5.5a3.53 3.53 0 01-5 0s0 0 0 0a3.53 3.53 0 010-5L17 2",
  "shrink": "M15 15l6 6m-6-6v4.8m0-4.8h4.8 M9 19.8V15m0 0H4.2M9 15l-6 6 M15 4.2V9m0 0h4.8M15 9l6-6 M9 4.2V9m0 0H4.2M9 9L3 3",
  "shuffle": "M16 3 L21 3 L21 8 M4 20 L21 3 M21 16 L21 21 L16 21 M15 15 L21 21 M4 4 L9 9",
  "sidebar-close": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M9 3 L9 21 M17 16L13 12L17 8",
  "sidebar-open": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M9 3 L9 21 M13 8L17 12L13 16",
  "sidebar": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M9 3 L9 21",
  "sigma": "M18 7V4H6l6 8-6 8h12v-3",
  "sign": "M3 5 H21 V17 H3 V5 z M6 9 L12 9 M15 9 L18 9 M6 13 L8 13 M11 13 L18 13 M12 3 L12 5 M12 18 L12 21",
  "skip-back": "M19 20 L9 12 L19 4 L19 20 Z M5 19 L5 5",
  "skip-forward": "M5 4 L15 12 L5 20 L5 4 Z M19 5 L19 19",
  "skull": "M10 12 A1 1 0 0 1 9 13 A1 1 0 0 1 8 12 A1 1 0 0 1 10 12 z M16 12 A1 1 0 0 1 15 13 A1 1 0 0 1 14 12 A1 1 0 0 1 16 12 z M8 20v2h8v-2 M12.5 17l-.5-1-.5 1h1z M16 20a2 2 0 001.56-3.25 8 8 0 10-11.12 0A2 2 0 008 20",
  "slack": "M14.5 10c-.83 0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5z M20.5 10H19V8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z M9.5 14c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5S8 21.33 8 20.5v-5c0-.83.67-1.5 1.5-1.5z M3.5 14H5v1.5c0 .83-.67 1.5-1.5 1.5S2 16.33 2 15.5 2.67 14 3.5 14z M14 14.5c0-.83.67-1.5 1.5-1.5h5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-5c-.83 0-1.5-.67-1.5-1.5z M15.5 19H14v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z M10 9.5C10 8.67 9.33 8 8.5 8h-5C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11h5c.83 0 1.5-.67 1.5-1.5z M8.5 5H10V3.5C10 2.67 9.33 2 8.5 2S7 2.67 7 3.5 7.67 5 8.5 5z",
  "slash": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M4.93 4.93 L19.07 19.07",
  "sliders": "M4 21 L4 14 M4 10 L4 3 M12 21 L12 12 M12 8 L12 3 M20 21 L20 16 M20 12 L20 3 M1 14 L7 14 M9 8 L15 8 M17 16 L23 16",
  "smartphone-charging": "M7 2 H17 A2 2 0 0 1 19 4 V20 A2 2 0 0 1 17 22 H7 A2 2 0 0 1 5 20 V4 A2 2 0 0 1 7 2 z M12.667 8L10 12h4l-2.667 4",
  "smartphone": "M7 2 H17 A2 2 0 0 1 19 4 V20 A2 2 0 0 1 17 22 H7 A2 2 0 0 1 5 20 V4 A2 2 0 0 1 7 2 z M12 18h.01",
  "smile": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M8 14s1.5 2 4 2 4-2 4-2 M9 9 L9.01 9 M15 9 L15.01 9",
  "snowflake": "M2 12 L22 12 M12 2 L12 22 M20 16l-4-4 4-4 M4 8l4 4-4 4 M16 4l-4 4-4-4 M8 20l4-4 4 4",
  "sort-asc": "M11 5h10 M11 9h7 M11 13h4 M3 17l3 3 3-3 M6 18V4",
  "sort-desc": "M11 5h4 M11 9h7 M11 13h10 M3 17l3 3 3-3 M6 18V4",
  "speaker": "M6 2 H18 A2 2 0 0 1 20 4 V20 A2 2 0 0 1 18 22 H6 A2 2 0 0 1 4 20 V4 A2 2 0 0 1 6 2 z M16 14 A4 4 0 0 1 12 18 A4 4 0 0 1 8 14 A4 4 0 0 1 16 14 z M12 6 L12.01 6",
  "split-half": "M 9 17 H 2 V 7 H 9 M 15 7 H 22 V 17 H 15 M12 5 L12 7 M12 11 L12 13 M12 17 L12 19",
  "split-text": "M3 6 L16 6 M20 6 L21 6 M3 12 L6 12 M10 12 L21 12 M3 18 L10 18 M14 18 L21 18",
  "split-three": "M 5 17 H 2 V 7 H 5 M 19 7 H 22 V 17 H 19 M8 5 L8 7 M8 11 L8 13 M8 17 L8 19 M11 7 L13 7 M11 17 L13 17 M16 5 L16 7 M16 11 L16 13 M16 17 L16 19",
  "split": "M 12 17 H 2 V 7 H 12 M 18 7 H 22 V 17 H 18 M15 5 L15 7 M15 11 L15 13 M15 17 L15 19",
  "sprout": "M7 20h10 M10 20c5.5-2.5.8-6.4 3-10 M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z M14.1 6a7 7 0 00-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",
  "square": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z",
  "star-half": "M12 17.8L5.8 21 7 14.1 2 9.3l7-1L12 2",
  "star": "M12 2 L15.09 8.26 L22 9.27 L17 14.14 L18.18 21.02 L12 17.77 L5.82 21.02 L7 14.14 L2 9.27 L8.91 8.26 L12 2 Z",
  "stop-circle": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M9 9 H15 V15 H9 V9 z",
  "stream": "M14 12 A2 2 0 0 1 12 14 A2 2 0 0 1 10 12 A2 2 0 0 1 14 12 z M 8 9 A 4 4 0 0 0 8 15 M 5 7 A 8 8 0 0 0 5 17 M 16 9 A 4 4 0 0 1 16 15 M 19 7 A 8 8 0 0 1 19 17",
  "strikethrough": "M16 4H9a3 3 0 00-2.83 4 M14 12a4 4 0 010 8H6 M4 12 L20 12",
  "string": "M4 4 L4 7 M7 4 L7 7 M17 4 L17 7 M20 4 L20 7",
  "sun": "M16 12 A4 4 0 0 1 12 16 A4 4 0 0 1 8 12 A4 4 0 0 1 16 12 z M12 2v2 M12 20v2 M5 5l1.5 1.5 M17.5 17.5L19 19 M2 12h2 M20 12h2 M5 19l1.5-1.5 M17.5 6.5L19 5",
  "sunrise": "M12 2v8 M5.2 11.2l1.4 1.4 M2 18h2 M20 18h2 M17.4 12.6l1.4-1.4 M22 22H2 M8 6l4-4 4 4 M16 18a4 4 0 00-8 0",
  "sunset": "M12 10V2 M5.2 11.2l1.4 1.4 M2 18h2 M20 18h2 M17.4 12.6l1.4-1.4 M22 22H2 M16 6l-4 4-4-4 M16 18a4 4 0 00-8 0",
  "swiss-franc": "M10 21V3h8 M6 16h9 M10 9.5h7",
  "switch-camera": "M11 19H4a2 2 0 01-2-2V7a2 2 0 012-2h5 M13 5h7a2 2 0 012 2v10a2 2 0 01-2 2h-5 M15 12 A3 3 0 0 1 12 15 A3 3 0 0 1 9 12 A3 3 0 0 1 15 12 z M18 22l-3-3 3-3 M6 2l3 3-3 3",
  "table": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M3 9 L21 9 M3 15 L21 15 M12 3 L12 21",
  "tablet": "M6 2 H18 A2 2 0 0 1 20 4 V20 A2 2 0 0 1 18 22 H6 A2 2 0 0 1 4 20 V4 A2 2 0 0 1 6 2 z M12 18 L12.01 18",
  "tag": "M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z M7 7 L7.01 7",
  "target": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M18 12 A6 6 0 0 1 12 18 A6 6 0 0 1 6 12 A6 6 0 0 1 18 12 z M14 12 A2 2 0 0 1 12 14 A2 2 0 0 1 10 12 A2 2 0 0 1 14 12 z",
  "tent": "M19 20L10 4 M5 20l9-16 M3 20h18 M12 15l-3 5 M12 15l3 5",
  "terminal-square": "M7 11l2-2-2-2 M11 13h4 M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z",
  "terminal": "M4 17 L10 11 L4 5 M12 19 L20 19",
  "thermometer-snowflake": "M2 12h10 M9 4v16 M3 9l3 3-3 3 M12 6L9 9 6 6 M6 18l3-3 1.5 1.5 M18 2a2 2 0 00-2 2v10.5a4 4 0 104 0V4a2 2 0 00-2-2z",
  "thermometer-sun": "M12 9a4 4 0 00-2 7.5 M12 3v2 M6.6 18.4l-1.4 1.4 M18 2a2 2 0 012 2v10.5a4 4 0 11-4 0V4c0-1.1.9-2 2-2z M4 13H2 M6.6 7.6L5.2 6.2",
  "thermometer": "M12 2a2 2 0 00-2 2v10.5a4 4 0 104 0V4a2 2 0 00-2-2z",
  "thumbs-down": "M10 15v4a3 3 0 003 3l4-9V2H5.72a2 2 0 00-2 1.7l-1.38 9a2 2 0 002 2.3zm7-13h2.67A2.31 2.31 0 0122 4v7a2.31 2.31 0 01-2.33 2H17",
  "thumbs-up": "M14 9V5a3 3 0 00-3-3l-4 9v11h11.28a2 2 0 002-1.7l1.38-9a2 2 0 00-2-2.3zM7 22H4a2 2 0 01-2-2v-7a2 2 0 012-2h3",
  "ticket": "M3 9V7a2 2 0 012-2h14a2 2 0 012 2v2M3 15v2a2 2 0 002 2h14a2 2 0 002-2v-2 M21 15a3 3 0 110-6 M3 15a3 3 0 100-6 M13 5v2 M13 17v2 M13 11v2",
  "tilde": "M 3 14 Q 6 7 12 12 T 21 10",
  "timer": "M10 2 L14 2 M12 14 L15 11 M20 14 A8 8 0 0 1 12 22 A8 8 0 0 1 4 14 A8 8 0 0 1 20 14 z",
  "toggle-left": "M8 5 H16 A7 7 0 0 1 23 12 V12 A7 7 0 0 1 16 19 H8 A7 7 0 0 1 1 12 V12 A7 7 0 0 1 8 5 z M11 12 A3 3 0 0 1 8 15 A3 3 0 0 1 5 12 A3 3 0 0 1 11 12 z",
  "toggle-right": "M8 5 H16 A7 7 0 0 1 23 12 V12 A7 7 0 0 1 16 19 H8 A7 7 0 0 1 1 12 V12 A7 7 0 0 1 8 5 z M19 12 A3 3 0 0 1 16 15 A3 3 0 0 1 13 12 A3 3 0 0 1 19 12 z",
  "tornado": "M21 4H3 M18 8H6 M19 12H9 M16 16h-6 M11 20H9",
  "trash-2": "M3 6 L5 6 L21 6 M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2 M10 11 L10 17 M14 11 L14 17",
  "trash": "M3 6 L5 6 L21 6 M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2",
  "trello": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M7 7 H10 V16 H7 V7 z M14 7 H17 V12 H14 V7 z",
  "trending-down": "M23 18 L13.5 8.5 L8.5 13.5 L1 6 M17 18 L23 18 L23 12",
  "trending-up": "M23 6 L13.5 15.5 L8.5 10.5 L1 18 M17 6 L23 6 L23 12",
  "triangle": "M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z",
  "truck": "M10 17h4V5H2v12h3m15 0h2v-3.34a4 4 0 00-1.17-2.83L19 9h-5v8h1 M10 17.5 A2.5 2.5 0 0 1 7.5 20 A2.5 2.5 0 0 1 5 17.5 A2.5 2.5 0 0 1 10 17.5 z M20 17.5 A2.5 2.5 0 0 1 17.5 20 A2.5 2.5 0 0 1 15 17.5 A2.5 2.5 0 0 1 20 17.5 z",
  "tv-2": "M7 21h10 M4 3 H20 A2 2 0 0 1 22 5 V15 A2 2 0 0 1 20 17 H4 A2 2 0 0 1 2 15 V5 A2 2 0 0 1 4 3 z",
  "tv": "M4 7 H20 A2 2 0 0 1 22 9 V20 A2 2 0 0 1 20 22 H4 A2 2 0 0 1 2 20 V9 A2 2 0 0 1 4 7 z M17 2 L12 7 L7 2",
  "twitch": "M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7",
  "twitter": "M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z",
  "type": "M4 7 L4 4 L20 4 L20 7 M9 20 L15 20 M12 4 L12 20",
  "umbrella": "M23 12a11.05 11.05 0 00-22 0zm-5 7a3 3 0 01-6 0v-7",
  "underline": "M6 4v6a6 6 0 0012 0V4 M4 20 L20 20",
  "undo": "M3 7v6h6 M21 17a9 9 0 00-9-9 9 9 0 00-6 2.3L3 13",
  "unit": "M18 12 A6 6 0 0 1 12 18 A6 6 0 0 1 6 12 A6 6 0 0 1 18 12 z M6 12 A2 2 0 0 1 4 14 A2 2 0 0 1 2 12 A2 2 0 0 1 6 12 z M22 12 A2 2 0 0 1 20 14 A2 2 0 0 1 18 12 A2 2 0 0 1 22 12 z M21 12 A1 1 0 0 1 20 13 A1 1 0 0 1 19 12 A1 1 0 0 1 21 12 z M19 12 L21 12",
  "unlink-2": "M15 7h2a5 5 0 010 10h-2m-6 0H7A5 5 0 017 7h2",
  "unlink": "M18.84 12.25l1.72-1.71h-.02a5.004 5.004 0 00-.12-7.07 5.006 5.006 0 00-6.95 0l-1.72 1.71 M5.17 11.75l-1.71 1.71a5.004 5.004 0 00.12 7.07 5.006 5.006 0 006.95 0l1.71-1.71 M8 2 L8 5 M2 8 L5 8 M16 19 L16 22 M19 16 L22 16",
  "unlock": "M5 11 H19 A2 2 0 0 1 21 13 V20 A2 2 0 0 1 19 22 H5 A2 2 0 0 1 3 20 V13 A2 2 0 0 1 5 11 z M7 11V7a5 5 0 019.9-1",
  "up-down": "M 4 6 L 12 4 L 20 6 M 4 18 L 12 20 L 20 18",
  "upload-cloud": "M20 16.2A4.5 4.5 0 0017.5 8h-1.8A7 7 0 104 14.9 M12 12v9 M16 16l-4-4-4 4",
  "upload": "M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4 M17 8 L12 3 L7 8 M12 3 L12 15",
  "user-check": "M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2 M12.5 7 A4 4 0 0 1 8.5 11 A4 4 0 0 1 4.5 7 A4 4 0 0 1 12.5 7 z M17 11 L19 13 L23 9",
  "user-minus": "M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2 M12.5 7 A4 4 0 0 1 8.5 11 A4 4 0 0 1 4.5 7 A4 4 0 0 1 12.5 7 z M23 11 L17 11",
  "user-plus": "M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2 M12.5 7 A4 4 0 0 1 8.5 11 A4 4 0 0 1 4.5 7 A4 4 0 0 1 12.5 7 z M20 8 L20 14 M23 11 L17 11",
  "user-x": "M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2 M12.5 7 A4 4 0 0 1 8.5 11 A4 4 0 0 1 4.5 7 A4 4 0 0 1 12.5 7 z M18 8 L23 13 M23 8 L18 13",
  "user": "M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2 M16 7 A4 4 0 0 1 12 11 A4 4 0 0 1 8 7 A4 4 0 0 1 16 7 z",
  "users": "M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2 M13 7 A4 4 0 0 1 9 11 A4 4 0 0 1 5 7 A4 4 0 0 1 13 7 z M23 21v-2a4 4 0 00-3-3.87 M16 3.13a4 4 0 010 7.75",
  "value-absolute": "M2 2 L2 22 M22 2 L22 22 M8 8 L16 16 M16 8 L8 16",
  "vibrate": "M2 8l2 2-2 2 2 2-2 2 M22 8l-2 2 2 2-2 2 2 2 M9 5 H15 A1 1 0 0 1 16 6 V18 A1 1 0 0 1 15 19 H9 A1 1 0 0 1 8 18 V6 A1 1 0 0 1 9 5 z",
  "video-off": "M16 16v1a2 2 0 01-2 2H3a2 2 0 01-2-2V7a2 2 0 012-2h2m5.66 0H14a2 2 0 012 2v3.34l1 1L23 7v10 M1 1 L23 23",
  "video": "M23 7 L16 12 L23 17 L23 7 Z M3 5 H14 A2 2 0 0 1 16 7 V17 A2 2 0 0 1 14 19 H3 A2 2 0 0 1 1 17 V7 A2 2 0 0 1 3 5 z",
  "view": "M5 12s2.545-5 7-5c4.454 0 7 5 7 5s-2.546 5-7 5c-4.455 0-7-5-7-5z M12 13a1 1 0 100-2 1 1 0 000 2z M21 8V5a2 2 0 00-2-2H5a2 2 0 00-2 2v3m18 8v3a2 2 0 01-2 2H5a2 2 0 01-2-2v-3",
  "voicemail": "M10 11.5 A4.5 4.5 0 0 1 5.5 16 A4.5 4.5 0 0 1 1 11.5 A4.5 4.5 0 0 1 10 11.5 z M23 11.5 A4.5 4.5 0 0 1 18.5 16 A4.5 4.5 0 0 1 14 11.5 A4.5 4.5 0 0 1 23 11.5 z M5.5 16 L18.5 16",
  "volume-1": "M11 5 L6 9 L2 9 L2 15 L6 15 L11 19 L11 5 Z M15.54 8.46a5 5 0 010 7.07",
  "volume-2": "M11 5 L6 9 L2 9 L2 15 L6 15 L11 19 L11 5 Z M19.07 4.93a10 10 0 010 14.14M15.54 8.46a5 5 0 010 7.07",
  "volume-x": "M11 5 L6 9 L2 9 L2 15 L6 15 L11 19 L11 5 Z M23 9 L17 15 M17 9 L23 15",
  "volume": "M11 5 L6 9 L2 9 L2 15 L6 15 L11 19 L11 5 Z",
  "wallet": "M20 12V8H6a2 2 0 01-2-2c0-1.1.9-2 2-2h12v4 M4 6v12c0 1.1.9 2 2 2h14v-4 M18 12a2 2 0 00-2 2c0 1.1.9 2 2 2h4v-4h-4z",
  "watch": "M19 12 A7 7 0 0 1 12 19 A7 7 0 0 1 5 12 A7 7 0 0 1 19 12 z M12 9 L12 12 L13.5 13.5 M16.51 17.35l-.35 3.83a2 2 0 01-2 1.82H9.83a2 2 0 01-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 019.83 1h4.35a2 2 0 012 1.82l.35 3.83",
  "wave-sine": "M 3 12 Q 7.5 -3 12 12 T 21 12",
  "wave-square": "M 3 12 H 6 V 4 H 12 V 20 H 18 V 12 H 21",
  "wave-triangle": "M 3 12 L 7.5 4 L 16.5 20 L 21 12",
  "webcam": "M20 10 A8 8 0 0 1 12 18 A8 8 0 0 1 4 10 A8 8 0 0 1 20 10 z M15 10 A3 3 0 0 1 12 13 A3 3 0 0 1 9 10 A3 3 0 0 1 15 10 z M12 22v-4m-5 4h5-5zm10 0h-5 5z",
  "wifi-off": "M2 2 L22 22 M8.5 16.5a5 5 0 017 0 M2 8.82a15 15 0 014.17-2.65 M10.66 5c4.01-.36 8.14.9 11.34 3.76 M16.85 11.25a10 10 0 012.22 1.68 M5 13a10 10 0 015.24-2.76 M12 20 L12.01 20",
  "wifi": "M5 13a10 10 0 0114 0 M8.5 16.5a5 5 0 017 0 M2 8.82a15 15 0 0120 0 M12 20 L12.01 20",
  "wind": "M17.7 7.7a2.5 2.5 0 111.8 4.3H2 M9.6 4.6A2 2 0 1111 8H2 M12.6 19.4A2 2 0 1014 16H2",
  "wrench": "M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z",
  "x-circle": "M22 12 A10 10 0 0 1 12 22 A10 10 0 0 1 2 12 A10 10 0 0 1 22 12 z M15 9 L9 15 M9 9 L15 15",
  "x-octagon": "M7.86 2 L16.14 2 L22 7.86 L22 16.14 L16.14 22 L7.86 22 L2 16.14 L2 7.86 L7.86 2 Z M15 9 L9 15 M9 9 L15 15",
  "x-square": "M5 3 H19 A2 2 0 0 1 21 5 V19 A2 2 0 0 1 19 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 z M9 9 L15 15 M15 9 L9 15",
  "x": "M18 6 L6 18 M6 6 L18 18",
  "youtube": "M22.54 6.42a2.78 2.78 0 00-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 00-1.94 2A29 29 0 001 11.75a29 29 0 00.46 5.33A2.78 2.78 0 003.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 001.94-2 29 29 0 00.46-5.25 29 29 0 00-.46-5.33z M9.75 15.02 L15.5 11.75 L9.75 8.48 L9.75 15.02 Z",
  "zap-off": "M12.41 6.75 L13 2 L10.57 4.92 M18.57 12.91 L21 10 L15.66 10 M8 8 L3 14 L12 14 L11 22 L16 16 M1 1 L23 23",
  "zap": "M13 2 L3 14 L12 14 L11 22 L21 10 L12 10 L13 2 Z",
  "zoom-in": "M19 11 A8 8 0 0 1 11 19 A8 8 0 0 1 3 11 A8 8 0 0 1 19 11 z M21 21 L16.65 16.65 M11 8 L11 14 M8 11 L14 11",
  "zoom-out": "M19 11 A8 8 0 0 1 11 19 A8 8 0 0 1 3 11 A8 8 0 0 1 19 11 z M21 21 L16.65 16.65 M8 11 L14 11"
}`);var Yd=class extends A{constructor(o){super({i:["any"],o:["icons"]},{},o,r5)}f({any:o},t){t({icons:Wb})}};l();var Xd=class extends Z{constructor(o){super({i:["graph","done"],o:["hub"]},{input:{},output:{hub:{ref:!0}}},o,a5)}onDataInputData(o,t){if(super.onDataInputData(o,t),o==="graph"){let e=new class extends ht{read(){throw new $}write(i){throw new $}get(i){throw new $}set(i,s){throw new $}delete(i){throw new $}hasKey(i){throw new $}keys(){throw new $}pathGet(i,s){throw new $}pathSet(i,s,a){throw new $}pathDelete(i,s){throw new $}subscribe(i,s,a){throw new $}}(this.__system);this._output.hub.push(e)}else o==="done"&&(this._forward_empty("hub"),this._backward("graph"),this._backward("done"))}onDataInputDrop(o){o==="graph"&&this._forward_empty("hub")}onIterDataInputData(o){this._forward_empty("hub"),this._backward("done")}};l();var Jd=class extends Z{constructor(o){super({i:["style","href","target"],o:[]},{},o,_5)}};l();var Zd=class extends Z{constructor(o){super({i:["style","disabled","r","x","y"],o:[]},{},o,p5)}};l();var Qd=class extends Z{constructor(o){super({i:["id"],o:[]},{},o,pb)}};l();var tl=class extends Z{constructor(o){super({i:["id"],o:[]},{},o,fb)}};l();var el=class extends Z{constructor(t){super({i:["graph","style","disabled","fullwindow","frame","zoom","controls","attr"],o:["graph"]},{input:{graph:{ref:!0},frame:{ref:!0}},output:{graph:{ref:!0}}},t,p_);this.__=["U","C","V","J","G"];let{specs:e}=t,n=t.newSpec(wn({id:xn(e)})),i=Ui(n,e,{}),s=new i(t);this._fallback_graph=s,this._input.graph.push(this._fallback_graph),this._output.graph.push(this._fallback_graph),this._fallback_graph.play()}onRefInputInvalid(t){}onRefInputData(t,e){super.onRefInputData(t,e),t==="graph"&&(this._graph=e,this._output.graph.push(e))}onRefInputDrop(t){super.onRefInputDrop(t),t==="graph"&&(this._graph=this._fallback_graph,this._input.graph.push(this._fallback_graph),this._output.graph.push(this._fallback_graph))}onRefOutputData(t,e){}snapshotSelf(){let t=this._fallback_graph.getUnitBundleSpec();return _t(S({},super.snapshotSelf()),{_fallback_graph:t})}restoreSelf(t){let a=t,{_fallback_graph:e}=a,n=_n(a,["_fallback_graph"]);super.restoreSelf(n);let i=Fi(e,this.__system.specs,{}),s=new i(this.__system);this._fallback_graph=s}};l();var nl=class extends Z{constructor(o){super({i:["style","disabled"],o:[]},{},o,c5)}};l();var il=class extends Z{constructor(o){super({i:[],o:[]},{},o,u5)}};l();var ol=class extends Z{constructor(o){super({i:[],o:[]},{},o,d5)}};l();var sl=class extends Z{constructor(o){super({i:["style","h","s","v"],o:[]},{},o,l5)}onDataInputData(o){}};l();var rl=class extends Z{constructor(o){super({i:["style"],o:[]},{},o,m5)}};l();var al=class extends Z{constructor(o){super({i:["style","key"],o:[]},{},o,h5)}};l();var _l=class extends Z{constructor(o){super({i:["options"],o:["transcript"]},{},o,f5)}};l();var pl=class extends Z{constructor(o){super({i:["spec","style","width","height"],o:[]},{},o,g5)}};l();var cl=class extends Z{constructor(o){super({i:["id","style"],o:[]},{},o,b5)}};l();var ul=class extends Z{constructor(o){super({i:["style"],o:[]},{},o,y5)}};l();var dl=class extends Z{constructor(o){super({i:["style","key","altKey"],o:[]},{},o,v5)}};l();var ll=class extends Z{constructor(o){super({i:["size"],o:[]},{},o,x5)}};l();var ml=class extends Z{constructor(o){super({i:["style"],o:[]},{},o,I5)}};l();var hl=class extends Z{constructor(o){super({i:["style"],o:[]},{},o,S5)}};l();var fl=class extends Z{constructor(o){super({i:["style"],o:[]},{},o,D5)}};l();l();l();l();l();l();var y7=[["x",1],["y",1],["width",1],["height",1],["sx",1/100],["sy",1/100],["opacity",1/100],["fontSize",1/10]];l();function h2(r,o,...t){r&&o(...t)}l();function Ms(r,o){return r.appendChild(o)}function _C(r,o,t){return r.insertBefore(o,t)}function v7(r,o){return r.removeChild(o)}function qb(r){for(;r.firstChild;)r.removeChild(r.lastChild)}function x7(r,o,t){let e=r.childNodes.item(t);return e?_C(r,o,e):Ms(r,o)}l();var I7="left";l();l();var Ko=class extends Error{constructor(){super("should never happen")}};function pi(r,o){let{$listener:t,$unlisten:e}=r;t.push(o);let n=o(r);return e.push(n),()=>{let i=t.indexOf(o);if(i>-1){let s=e[i];s(),t.splice(i,1),e.splice(i,1)}else throw new Ko}}function Be(r,o){let t=[];for(let n of o){let i=pi(r,n);t.push(i)}return Tt(t)}l();l();l();var Yb=(r,o,t,e)=>{let n=!0;for(let[i,s]of t){let a=o[i]-r[i];Math.abs(a)>s?(n=!1,r[i]+=a/3):r[i]=o[i]}return e(r),n};var Xb=(r,o,t,e,n,i)=>{let{api:{animation:{requestAnimationFrame:s,cancelAnimationFrame:a}}}=r,_=o,c,p=()=>c=s(u),u=()=>{let d=t();Yb(_,d,e,n)?i()===!1&&p():p()};return p(),()=>{c!==void 0&&(a(c),c=void 0)}};l();var Ut="http://www.w3.org/2000/svg";l();l();l();l();function yt(r){let{api:{document:{createElement:o}}}=r,t=o("div");return t.className="__parent",t.style.display="contents",t}function Jb(r,o,t={}){let{id:e,name:n,units:i={},component:s={defaultWidth:120,defaultHeight:120}}=r,{children:a=[],subComponents:_={},slots:c=[]}=s;class p extends Cn{constructor(d,m){super(d,m);for(let g in _){let v=i[g],{id:x}=v,I=t[g];if(!I){let E=Wo(m.components,o,m.classes,x);I=new E({},m)}this.setSubComponent(g,I)}let h=g=>{let v=this.$subComponent[g],x=_[g]||{},{children:I=[],childSlot:E={}}=x;for(let D of I){h(D);let w=E[D]||"default",T=this.$subComponent[D];v.registerParentRoot(T,w)}},f=yt(m);this.$element=f,this.$primitive=!1;let b=0;for(let g of c){let[v,x]=g,I=this.$subComponent[v],E=b===0?"default":`${b}`;this.$slot[E]=I.$slot[x],this.$slotId[E]=v,this.$slotTarget[E]=x,b++}for(let g of a){let v=this.$subComponent[g];h(g),this.registerRoot(v)}}onDestroy(){super.onDestroy();for(let d in this.$subComponent)this.$subComponent[d].destroy()}}return p.id=e,Object.defineProperty(p,"name",{value:n}),p}function Wo(r,o,t,e,n={},i={}){var a;let s=Bt(o,e);if(qr(s)){let _=r[e];return a=class extends _{constructor(p,u){super(p,u);for(let d in n){let m=n[d],{data:h}=m,f=Zt(h,o,t);this.setProp(d,f)}}},a.id=e,a}else return Jb(s,o,i)}function Zr(r,o,t,e,n={}){let i=Wo(r.components,o,r.classes,t,{},n);return new i(e,r)}l();function ho(r){let o=["EE","U","C",...r.$_];return r.$primitive&&(o=[...o,"V","J"]),r.$unbundled&&(o=[...o,"G"]),o}l();function Os(r,o,t={}){let{$element:e}=r;gl(e,o,t,!1)}function gl(r,o,t={},e=!0){r.dispatchEvent(new CustomEvent(`_${o}`,{detail:t,bubbles:e}))}function bl(r,o){r.$parent=o;let{$children:t}=r;for(let e of t)e.$parent=o}function Zb(r){r.$mounted=!0;let{$element:o,$positionObserver:t,$resizeObserver:e}=r,{width:n,height:i}=o.getBoundingClientRect();r.$width=n,r.$height=i;let{x:s,y:a,sx:_,sy:c}=t.observe(o);r.$x=s,r.$y=a,r.$sx=_,r.$sy=c,e.observe(o);for(let p of r.$children)p.mount(r)}function S7(r){r.$mounted=!1;let{$element:o,$positionObserver:t,$resizeObserver:e}=r;t.disconnect(),e.unobserve(o),e.disconnect();for(let n of r.$children)n.unmount()}function D7(r,o,t){r.$width=o,r.$height=t,Os(r,"resize",{width:o,height:t})}function qo(r,o){r.$theme!==o&&(r.$theme=o,Os(r,"themechanged",{}))}function pC(r,o){r.$color!==o&&(r.$color=o,r.$element.style.color=o)}function yl(r,o){pC(r,o),Os(r,"colorchanged",{})}function E7(r,o,{animate:t}={animate:!1}){let{$element:e}=o;return r.$element.appendChild(e),r.$children.push(o),o.$parent=r.$parent,r.$mounted&&o.mount(r),()=>{let{$element:n}=o;return r.$mounted&&o.unmount(),r.$element.removeChild(n),Hn(r.$children,o),o}}function f2(r){r.$disabled=!1,Os(r,"enabled",{})}function g2(r){r.$disabled=!0,Os(r,"disabled",{})}l();l();function Qb(r,o,t,e=!1){if(e){o.addEventListener(r,t);let n=`_${r}`,i=s=>{let{detail:a}=s;t(a)};return o.addEventListener(n,i),()=>{o.removeEventListener(r,t),o.removeEventListener(n,i)}}else return o.addEventListener(r,t),()=>{o.removeEventListener(r,t)}}l();function t0(r){r.stopPropagation()}function vl(r,o){r.addEventListener(o,t=>{t.stopPropagation(),r.dispatchEvent(new CustomEvent(`_${o}`,{detail:t,bubbles:t.bubbles}))},{passive:!0,capture:!1})}var cC=["pointerdown","pointermove","pointerup","pointerenter","pointerleave","pointercancel","pointerover","pointerout","click","focus","blur","wheel","scroll","keypress","keydown","keyup","touchstart","dragover","drop"];function w7(r){cC.forEach(o=>vl(r,o))}function mt(r,o,t=!1){return e=>$s(r,e,o,t)}function $s(r,o,t,e=!1){let{$system:n,$element:i,$listenCount:s}=o,a=`_${r}`,{customEvent:_,context:c}=n;if(!_.has(r)){for(let m of c)vl(m.$element,a);_.add(r)}s[r]=s[r]||0,s[r]++;let p=m=>{let{detail:h}=m;t(h,m)},u=Array.isArray(i)?i:[i],d=Tt(u.map(m=>Qb(a,m,p,e)));return()=>{s[r]--,s[r]===0&&delete s[r],d()}}l();l();l();function Yo(r,o,t){let e=0,n=0,i=1,s=1,a=0,_=0,c=0;if(r!=="none"){let p=/(\w+)\(([^)]*)\)/g,u;for(;(u=p.exec(r))!==null;){let d=u[1],b=u[2].replace(" ","").split(",").map(g=>{let v=/([+-]?[0-9]+([.][0-9]+)?)(px|deg|%)?/.exec(g),x=v[1],I=v[3];return[Number.parseFloat(x),I]});switch(d){case"translate":{let[g,v=g]=b,[x,I]=g;I==="%"&&(x=x*o/100);let[E,D]=v;D==="%"&&(E=E*t/100),e+=x,n+=E}break;case"translateX":{let[g]=b,[v,x]=g;x==="%"&&(v=v*o/100),e+=v}break;case"translateY":{let[g]=b,[v,x]=g;x==="%"&&(v=v*t/100),n+=v}break;case"scale":{let[g,v=g]=b,[x]=g,[I]=v;i*=x,s*=I}break;case"scaleX":{let[g]=b,[v]=g;i*=v}break;case"scaleY":{let[g]=b,[v]=g;s*=v}break;case"rotate":{let[g]=b,[v]=g;c+=v}break;case"rotateX":{let[g]=b,[v]=g;a+=v}break;case"rotateY":{let[g]=b,[v]=g;_+=v}break;case"rotateZ":{let[g]=b,[v]=g;c+=v}break;default:break}}}return[e,n,i,s,a,_,c]}wf(Yo("translateX(10px)",100,100),[10,0,1,1,0,0,0]);wf(Yo("translate(10px, 15px) scale(2) rotate(90deg)",100,100),[10,15,2,2,0,0,90]);l();l();function e0(r,o){return r+(o-r)*Math.random()}var y2=Math.PI/180,v2=2*Math.PI;function He(r,o){return Di(r.x,r.y,o.x,o.y)}function k7(r,o,t,e,n,i,s,a){let _=(t-r)*(a-i)-(s-n)*(e-o);if(_===0)return!1;{let c=((a-i)*(s-r)+(n-s)*(a-o))/_,p=((o-e)*(s-r)+(t-r)*(a-o))/_;return 0<c&&c<1&&0<p&&p<1}}function n0(r,o,t,e){let n=(e-90)*Math.PI/180;return{x:r+t*Math.cos(n),y:o+t*Math.sin(n)}}function C7(r,o,t,e,n){let i=n0(r,o,t,n),s=n0(r,o,t,e),a=n-e<=180?"0":"1";return`M ${i.x} ${i.y} A ${t} ${t} 0 ${a} 0 ${s.x} ${s.y}`}function T7(r,o,t){return`M ${r-t} ${o} A ${t} ${t} 0 1 0 ${r-t} ${o-.001} z`}function A7(r,o,t,e){return`M ${r} ${o} H ${r+t} V ${o+e} H ${r} Z`}var P7=(r,o,t,e,n)=>{let i=1-e/t,s=2*i;s-=i*i;let a=t/Math.sqrt(1-s*Math.pow(Math.sin(n),2)),_=r-a*Math.cos(n),c=o-a*Math.sin(n);return{x:_,y:c}};function M7(r,o,t,e,n,i){let s=P7(r,o,t,e,n),a=P7(r,o,t,e,i),_=i-n<=180?"0":"1";return`M ${s.x} ${s.y} A ${t} ${e} 0 ${_} 0 ${a.x} ${a.y}`}function uC(){return Math.random()*v2}function i0(r){return r%360*Math.PI/180}function x2(r,o,t){let e=uC();return{x:r+t*Math.cos(e),y:o+t*Math.sin(e)}}function o0(r,o,t,e){return{x:r+Math.random()*(t-r),y:o+Math.random()*(e-o)}}function O7(r,o,t,e,n){return o0(r-n,o-n,t+n,e+n)}function ta(r,o,t,e,n=0){return{x:r+e.x*(t-n),y:o+e.y*(t-n)}}function ea(r,o,t,e,n,i=0){let s=z7(r,o,t,e,n),a=n.x/n.y,_=Math.atan2(n.y,n.x);if(s==="left"||s==="right"){let c=Math.sign(n.x);return{x:r+c*(t/2)-i*Math.cos(_),y:o+c*(t/2/a)-i*Math.sin(_)}}else{let c=Math.sign(n.y);return{x:r+c*(e/2*a)-i*Math.cos(_),y:o+c*(e/2)-i*Math.sin(_)}}}function Jo(r,o,t=0){let{shape:e}=r;return e==="circle"?ta(r.x,r.y,r.r,o,t):ea(r.x,r.y,r.width,r.height,o,t)}var dn={x:0,y:0};function Me(r,o,t,e){let n=t-r,i=e-o,s=Xo(n,i);return s===0?fo():{x:n/s,y:i/s}}function s0({x:r,y:o},{x:t,y:e}){let n=t-r,i=e-o,s=Xo(n,i);return s===0?fo():{x:n/s,y:i/s}}function $7(r){let{x:o,y:t}=r;return{x:-o,y:-t}}var I2=(r,o,t)=>({x:r.x+o.x*t,y:r.y+o.y*t});function dC(r,o,t,e){return{x:t-r,y:e-o}}function L7(r,o){return dC(r.x,r.y,o.x,o.y)}function xl(r,o=1){let t=fo();return{x:r.x+o*t.x,y:r.y+o*t.y}}function U7(r){return{x:-r.y,y:r.x}}var Qr=(r,o,t,e)=>{let n=Math.atan2(e,t)-Math.atan2(o,r);return n<0&&(n+=v2),n};function Di(r,o,t,e){return Xo(r-t,o-e)}function Xo(r,o){return Math.sqrt(r*r+o*o)}function na(r){let{x:o,y:t}=r,e=Xo(r.x,r.y);return{x:o/e,y:t/e}}function S2(r,o){return{x:(r.x+o.x)/2,y:(r.y+o.y)/2}}function fo(){return na({x:.5-Math.random(),y:.5-Math.random()})}function r0(r,o){let t=Math.cos(o),e=Math.sin(o);return{x:r.x*t-r.y*e,y:r.x*e+r.y*t}}function Wn(r,o){return{x:r.x+o.x,y:r.y+o.y}}function G7(r,o,t){return Wn(Wn(r,o),t)}function R7(r,o){return{x:r.x-o.x,y:r.y-o.y}}function Il(r,o){return{x:r.x*o,y:r.y*o}}function N7(r){if(r.length===0)return{x:0,y:0,width:0,height:0};let o=1/0,t=1/0,e=0,n=0;for(let i of r)o=Math.min(o,i.x),t=Math.min(t,i.y),e=Math.max(e,i.x+i.width),n=Math.max(n,i.y+i.height);return{x:o,y:t,width:e-o,height:n-t}}function z7(r,o,t,e,n){let{x:i,y:s}=n,{x:a,y:_}=Me(r,o,r-t/2,o-e/2),{x:c,y:p}=Me(r,o,r+t/2,o-e/2),u=Qr(a,_,c,p),d=Qr(i,s,c,p);return d<=u?"top":d<=Math.PI?"left":d<=Math.PI+u?"bottom":"right"}function ia(r,o,t=0){if(r.shape==="circle"&&o.shape==="circle")return Di(r.x,r.y,o.x,o.y)<=o.r-r.r+t;if(r.shape==="circle"&&o.shape==="rect")return r.x-r.r>=o.x-o.width/2-t&&r.x+r.r<=o.x+o.width/2+t&&r.y-r.r>=o.y-o.height/2-t&&r.y+r.r<=o.y+o.height/2+t;if(r.shape==="rect"&&o.shape==="circle"){let e=Math.max(o.x-r.x+r.width/2,r.x+r.width/2-o.x),n=Math.max(o.y-r.y+r.height/2,r.y+r.height/2-o.y);return o.r>=Math.sqrt(e*e+n*n)-t}else return r.x-r.width/2>=o.x-o.width/2-t&&r.x+r.width/2<=o.x+o.width/2+t&&r.y-r.height/2>=o.y-o.height/2-t&&r.y+r.height/2<=o.y+o.height/2+t}function hn(r,o){return Sl(r.shape,r.x,r.y,r.r,r.width,r.height,o.shape,o.x,o.y,o.r,o.width,o.height)}function Sl(r,o,t,e,n,i,s,a,_,c,p,u){let d=Di(o,t,a,_),m=Me(o,t,a,_),h=b2(r,o,t,e,n,i,m),b=b2(s,a,_,c,p,u,m)+h,g=d-b;return{d,l:g,u:m}}function oa(r,o){let{shape:t,x:e,y:n,r:i,width:s,height:a}=r;return b2(t,e,n,i,s,a,o)}function b2(r,o,t,e,n,i,s){if(r==="circle")return e;{let a=s.x/s.y,_=z7(o,t,n,i,s);return _==="left"||_==="right"?Xo(n/2,n/2/a):Xo(i/2*a,i/2)}}function Ls(r){let o=0,t=0,e=r.length;for(let s=0;s<r.length;s++){let a=r[s];o+=a.x,t+=a.y}let n=o/e,i=t/e;return{x:n,y:i}}var F7=(r,o)=>{let t=Math.atan2(o.y-r.y,o.x-r.x);return t<0&&(t+=v2),t/y2},D2=r=>({x:Math.round(r.x),y:Math.round(r.y)});function a0(r){if(r instanceof Text)return{x:0,y:0};{let{x:o,y:t}=r.getBoundingClientRect();return{x:o,y:t}}}function sa(r,o){if(r instanceof Text)return lC(r,o);if(r instanceof SVGElement)return mC(r,o);if(r instanceof HTMLElement)return B7(r,o)}function lC(r,o){let t=document.createRange();return t.selectNodeContents(r),t.getClientRects()[0]||{x:0,y:0}}function mC(r,o){return r.parentElement?B7(r.parentElement,o):dn}function B7(r,o){let t=j7(r),e={x:0,y:0},n=hC(r,o);return G7(t,e,n)}function hC(r,o){let{offsetParent:t}=r,e=0,n=0,i=a=>{let _=j7(a);e+=_.x,n+=_.y},s=t;for(;s&&s!==o;)i(s),s=s.offsetParent;return{x:e,y:n}}function H7(r,o){let{parentElement:t}=r,e=0,n=0,i=a=>{let{scrollLeft:_,scrollTop:c}=a;e+=_,n+=c},s=t;for(;s&&s!==o;)i(s),s=s.parentElement;return{x:e,y:n}}function j7(r){let{offsetLeft:o=0,offsetTop:t=0,offsetWidth:e=0,offsetHeight:n=0,style:i}=r,s=o,a=t,_,c,p,u,d,m,{transform:h}=i;if(_!==e||c!==n)if(h){let[g,v,x,I]=Yo(h,e,n);p=g,u=v,d=x,m=I}else p=0,u=0,d=1,m=1;_=e,c=n;let f=o+p,b=t+u;return{x:f,y:b}}l();l();function _0(r){let{x:o,y:t}=a0(r),{width:e,height:n}=Us(r);return{x:o,y:t,width:e,height:n}}function Us(r){if(r instanceof Text){let n=document.createRange();n.selectNodeContents(r);let i=n.getBoundingClientRect(),{width:s,height:a}=i;return{width:s,height:a}}if(r.classList.contains("__parent")){let{width:n,height:i}=fC(r);return{width:n,height:i}}let o=r.getBoundingClientRect(),{width:t,height:e}=o;return{width:t,height:e}}function fC(r){if(r instanceof HTMLElement){let o=Array.from(r.children),{minX:t,maxX:e,minY:n,maxY:i}=o.reduce((p,u)=>{let{x:d,y:m,width:h,height:f}=_0(u);return{minX:Math.min(p.minX,d),maxX:Math.max(p.maxX,d+h),minY:Math.min(p.minY,m),maxY:Math.max(p.maxY,m+f)}},{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}),s=t,a=n,_=e-t,c=i-n;return{x:s,y:a,width:_,height:c}}else throw r instanceof SVGElement?new ei:new ei}var Ie=(r,o)=>{let t=r.$context,{$node:e}=r;if(e instanceof HTMLElement||e instanceof SVGElement){let{width:n,height:i}=Us(e),{x:s,y:a}=a0(e),{sx:_,sy:c}=r.getScale(),p=r.getFontSize(),u=r.getOpacity();return n/=Math.abs(_),i/=Math.abs(c),{x:s,y:a,width:n,height:i,sx:_,sy:c,opacity:u,fontSize:p}}else if(e instanceof Text){let n=r.getFontSize(),i,s,a,_,c=1,p=1,u=1;({width:a=a,height:_=_}=Us(e));let d=sa(e,t.$element),m;return r.$parent?m=Ie(r.$parent,o):m={x:t.$x+2,y:t.$y+2,width:t.$width,height:t.$height,sx:1,sy:1,opacity:1,fontSize:n},i=d.x,s=d.y,{x:i,y:s,width:a,height:_,sx:c,sy:p,opacity:u,fontSize:n}}};l();l();function E2(r){return o=>$s("change",o,t=>{r(t)})}l();l();var go=(r,o)=>{let{$x:t,$y:e,$sx:n,$sy:i,$rz:s}=r,{clientX:a,clientY:_,offsetX:c,offsetY:p}=o,u=a-t,d=_-e,m=u/n,h=d/i,f={x:m,y:h},b=r0(f,-s),g=b.x,v=b.y;return{clientX:g,clientY:v,offsetX:f.x,offsetY:f.y,screenX:a,screenY:_}};function gC(r,o){let{pointerId:t,pointerType:e}=o;return _t(S({},go(r,o)),{pointerId:t,pointerType:e})}function ci(r,o,t,e=!1){let{$element:n}=o,s=Qb(r,n,_=>{let{$context:c}=o,p=gC(c,_);t(p,_)},e),{$listenCount:a}=o;return a[r]=a[r]||0,a[r]++,()=>{a[r]--,a[r]===0&&delete a[r],s()}}function p0(r,o=!1){return t=>bC(t,r,o)}function bC(r,o,t=!1){let{$element:e}=r,n=i=>{let{$context:s}=r,a=go(s,i);o(a)};return e.addEventListener("dragstart",n,t),()=>{e.removeEventListener("dragstart",n,t)}}l();l();var V7=r=>{let{dropEffect:o,effectAllowed:t,files:e,items:n,types:i}=r;return{dropEffect:o,effectAllowed:t,files:e,items:yC(n),types:[...i]}},yC=r=>{let o=[];for(let t=0;t<r.length;t++){let e=r[t],{kind:n,type:i}=e;o.push({kind:n,type:i})}return o};function Dl(r,o=!1){return t=>vC(t,r,o)}function vC(r,o,t=!1){let{$element:e}=r,n=i=>{let{$context:s}=r,{dataTransfer:a}=i,_=_t(S({},go(s,i)),{dataTransfer:V7(a)});o(_,i)};return e.addEventListener("drop",n,t),()=>{e.removeEventListener("drop",n,t)}}l();function ui(r){return o=>$s("input",o,(t,e)=>{r(t,e)})}l();l();function K7(r,o){let t=e=>{let{relatedTarget:n}=e;n===null&&o(e)};return r.addEventListener("blur",t,!0),()=>{r.removeEventListener("blur",t,!0)}}l();var Ei=JSON.parse(`
{
  "0": 48,
  "1": 49,
  "2": 50,
  "3": 51,
  "4": 52,
  "5": 53,
  "6": 54,
  "7": 55,
  "8": 56,
  "9": 57,
  "unk": 0,
  "mouse1": 1,
  "mouse2": 2,
  "break": 3,
  "mouse3": 4,
  "mouse4": 5,
  "mouse5": 6,
  "Backspace": 8,
  "Tab": 9,
  "Clear": 254,
  "Enter": 13,
  "Shift": 16,
  "Ctrl": 17,
  "Alt": 18,
  "Pause": 19,
  "CapsLock": 20,
  "imehangul": 21,
  "imejunja": 23,
  "imefinal": 24,
  "imekanji": 25,
  "Escape": 27,
  "imeconvert": 28,
  "imenonconvert": 29,
  "imeaccept": 30,
  "imemodechange": 31,
  "Space": 32,
  "pageup": 33,
  "pagedown": 34,
  "end": 35,
  "home": 36,
  "ArrowLeft": 37,
  "ArrowUp": 38,
  "ArrowRight": 39,
  "ArrowDown": 40,
  "Select": 41,
  "Print": 42,
  "execute": 43,
  "snapshot": 44,
  "insert": 45,
  "Delete": 46,
  "help": 47,
  ":": 58,
  ";": 186,
  "<": 60,
  "=": 187,
  ">": 62,
  "?": 63,
  "@": 64,
  "a": 65,
  "b": 66,
  "c": 67,
  "d": 68,
  "e": 69,
  "f": 70,
  "g": 71,
  "h": 72,
  "i": 73,
  "j": 74,
  "k": 75,
  "l": 76,
  "m": 77,
  "n": 78,
  "o": 79,
  "p": 80,
  "q": 81,
  "r": 82,
  "s": 83,
  "t": 84,
  "u": 85,
  "v": 86,
  "w": 87,
  "x": 88,
  "y": 89,
  "z": 90,
  "meta": 224,
  "menu": 93,
  "sleep": 95,
  "num0": 96,
  "num1": 97,
  "num2": 98,
  "num3": 99,
  "num4": 100,
  "num5": 101,
  "num6": 102,
  "num7": 103,
  "num8": 104,
  "num9": 105,
  "num*": 106,
  "num+": 107,
  "numenter": 108,
  "num-": 109,
  "num.": 110,
  "num/": 111,
  "f1": 112,
  "f2": 113,
  "f3": 114,
  "f4": 115,
  "f5": 116,
  "f6": 117,
  "f7": 118,
  "f8": 119,
  "f9": 120,
  "f10": 121,
  "f11": 122,
  "f12": 123,
  "f13": 124,
  "f14": 125,
  "f15": 126,
  "f16": 127,
  "f17": 128,
  "f18": 129,
  "f19": 130,
  "f20": 131,
  "f21": 132,
  "f22": 133,
  "f23": 134,
  "f24": 135,
  "numlock": 144,
  "scrolllock": 145,
  "shiftleft": 160,
  "shiftright": 161,
  "ctrlleft": 162,
  "ctrlright": 163,
  "altleft": 164,
  "altright": 165,
  "browserback": 166,
  "browserforward": 167,
  "browserrefresh": 168,
  "browserstop": 169,
  "browsersearch": 170,
  "browserfavorites": 171,
  "browserhome": 172,
  "volumemute": 173,
  "volumedown": 174,
  "volumeup": 175,
  "nexttrack": 176,
  "prevtrack": 177,
  "stop": 178,
  "playpause": 179,
  "launchmail": 180,
  "launchmediaselect": 181,
  "launchapp1": 182,
  "launchapp2": 183,
  ",": 188,
  "-": 189,
  ".": 190,
  "/": 191,
  "\`": 192,
  "[": 219,
  "\\\\": 220,
  "]": 221,
  "'": 222,
  "altgr": 226,
  "imeprocess": 229,
  "unicode": 231,
  "attention": 246,
  "crsel": 247,
  "exsel": 248,
  "eraseeof": 249,
  "play": 250,
  "zoom": 251,
  "noname": 252,
  "pa1": 253
}
`),El=JSON.parse(`{
  "0": "Digit0",
  "1": "Digit1",
  "2": "Digit2",
  "3": "Digit3",
  "4": "Digit4",
  "5": "Digit5",
  "6": "Digit6",
  "7": "Digit7",
  "8": "Digit8",
  "9": "Digit9",
  "unk": "Unidentified",
  "mouse1": "Unidentified",
  "mouse2": "Unidentified",
  "break": "Unidentified",
  "mouse3": "Unidentified",
  "mouse4": "Unidentified",
  "mouse5": "Unidentified",
  "Backspace": "Backspace",
  "tab": "Tab",
  "clear": "Clear",
  "Enter": "Enter",
  "Shift": "Shift",
  "Ctrl": "Control",
  "Alt": "Alt",
  "Pause": "Pause",
  "capslock": "CapsLock",
  "imehangul": "HangulMode",
  "imejunja": "JunjaMode",
  "imefinal": "FinalMode",
  "imekanji": "KanjiMode",
  "Escape": "Escape",
  "imeconvert": "Convert",
  "imenonconvert": "Convert",
  "imeaccept": "Accept",
  "imemodechange": "ModeChange",
  "Space": "Space",
  "pageup": "PageUp",
  "pagedown": "PageDown",
  "end": "End",
  "home": "Home",
  "ArrowLeft": "ArrowLeft",
  "ArrowUp": "ArrowUp",
  "ArrowRight": "ArrowRight",
  "ArrowDown": "ArrowDown",
  "Select": "Select",
  "Print": "Print",
  "execute": "Execute",
  "snapshot": "PrintScreen",
  "insert": "Insert",
  "Delete": "Delete",
  "help": "Help",
  ":": "Semicolon",
  ";": "Semicolon",
  "<": "Comma",
  "=": "Equal",
  ">": "Period",
  "?": "Slash",
  "@": "Digit0",
  "a": "KeyA",
  "b": "KeyB",
  "c": "KeyC",
  "d": "KeyD",
  "e": "KeyE",
  "f": "KeyF",
  "g": "KeyG",
  "h": "KeyH",
  "i": "KeyI",
  "j": "KeyJ",
  "k": "KeyK",
  "l": "KeyL",
  "m": "KeyM",
  "n": "KeyN",
  "o": "KeyO",
  "p": "KeyP",
  "q": "KeyQ",
  "r": "KeyR",
  "s": "KeyS",
  "t": "KeyT",
  "u": "KeyU",
  "v": "KeyV",
  "w": "KeyW",
  "x": "KeyX",
  "y": "KeyY",
  "z": "KeyZ",
  "meta": "Meta",
  "menu": "ContextMenu",
  "sleep": "Standby",
  "num0": "Unidentified",
  "num1": "Unidentified",
  "num2": "Unidentified",
  "num3": "Unidentified",
  "num4": "Unidentified",
  "num5": "Unidentified",
  "num6": "Unidentified",
  "num7": "Unidentified",
  "num8": "Unidentified",
  "num9": "Unidentified",
  "num*": "Unidentified",
  "num+": "Unidentified",
  "numenter": "Unidentified",
  "num-": "Unidentified",
  "num.": "Unidentified",
  "num/": "Unidentified",
  "f1": "F1",
  "f2": "F2",
  "f3": "F3",
  "f4": "F4",
  "f5": "F5",
  "f6": "F6",
  "f7": "F7",
  "f8": "F8",
  "f9": "F9",
  "f10": "F10",
  "f11": "F11",
  "f12": "F12",
  "f13": "F13",
  "f14": "F14",
  "f15": "F15",
  "f16": "F16",
  "f17": "F17",
  "f18": "F18",
  "f19": "F19",
  "f20": "F20",
  "f21": "F21",
  "f22": "F22",
  "f23": "F23",
  "f24": "F24",
  "numlock": "NumLock",
  "scrolllock": "ScrollLock",
  "shiftleft": "ShiftLeft",
  "shiftright": "ShiftRight",
  "ctrlleft": "ControlLeft",
  "ctrlright": "ControlRight",
  "AltLeft": "AltLeft",
  "altright": "AltRight",
  "metaleft": "MetaLeft",
  "metaright": "MetaRight",
  "browserback": "Unidentified",
  "browserforward": "Unidentified",
  "browserrefresh": "Unidentified",
  "browserstop": "Unidentified",
  "browsersearch": "Unidentified",
  "browserfavorites": "Unidentified",
  "browserhome": "Unidentified",
  "volumemute": "Unidentified",
  "volumedown": "Unidentified",
  "volumeup": "Unidentified",
  "nexttrack": "Unidentified",
  "prevtrack": "Unidentified",
  "stop": "Unidentified",
  "playpause": "Unidentified",
  "launchmail": "Unidentified",
  "launchmediaselect": "Unidentified",
  "launchapp1": "Unidentified",
  "launchapp2": "Unidentified",
  ",": "Comma",
  "-": "Minus",
  ".": "Period",
  "/": "Slash",
  "\`": "Backquote",
  "[": "BracketLeft",
  "\\\\": "Backslash",
  "]": "BracketRight",
  "'": "Quote",
  "altgr": 226,
  "imeprocess": "Process",
  "unicode": "CodeInput",
  "attention": "Attn",
  "crsel": 247,
  "exsel": "ExSel",
  "eraseeof": "EraseEof",
  "play": 250,
  "zoomin": "ZoomIn",
  "zoomout": "ZoomOut",
  "noname": 252,
  "pa1": 253
}`),W7="abcdefghijklmnopqrstuvwxyz",q7="0123456789",xC="`~|\\^{}+\xD7\xF7=/_<>\u2264\u2265[]!@#$%&*()-'\":;,.?",U1t=W7+q7,IC=q7+W7+xC;function wl(r){return IC.includes(r.toLowerCase())}var Pl=JSON.parse(`{
    "0": "unk",
    "1": "mouse1",
    "2": "mouse2",
    "3": "break",
    "4": "mouse3",
    "5": "mouse4",
    "6": "mouse5",
    "8": "Backspace",
    "9": "Tab",
    "12": "Clear",
    "13": "Enter",
    "16": "Shift",
    "17": "Ctrl",
    "18": "Alt",
    "19": "Pause",
    "20": "CapsLock",
    "21": "imehangul",
    "23": "imejunja",
    "24": "imefinal",
    "25": "imekanji",
    "27": "Escape",
    "28": "imeconvert",
    "29": "imenonconvert",
    "30": "imeaccept",
    "31": "imemodechange",
    "32": "Space",
    "33": "pageup",
    "34": "pagedown",
    "35": "end",
    "36": "home",
    "37": "ArrowLeft",
    "38": "ArrowUp",
    "39": "ArrowRight",
    "40": "ArrowDown",
    "41": "Select",
    "42": "Print",
    "43": "execute",
    "44": "snapshot",
    "45": "insert",
    "46": "Delete",
    "47": "help",
    "48": "0",
    "49": "1",
    "50": "2",
    "51": "3",
    "52": "4",
    "53": "5",
    "54": "6",
    "55": "7",
    "56": "8",
    "57": "9",
    "58": ":",
    "59": ";",
    "60": "<",
    "61": "=",
    "62": ">",
    "63": "?",
    "64": "@",
    "65": "a",
    "66": "b",
    "67": "c",
    "68": "d",
    "69": "e",
    "70": "f",
    "71": "g",
    "72": "h",
    "73": "i",
    "74": "j",
    "75": "k",
    "76": "l",
    "77": "m",
    "78": "n",
    "79": "o",
    "80": "p",
    "81": "q",
    "82": "r",
    "83": "s",
    "84": "t",
    "85": "u",
    "86": "v",
    "87": "w",
    "88": "x",
    "89": "y",
    "90": "z",
    "91": "meta",
    "92": "meta",
    "93": "menu",
    "95": "sleep",
    "96": "num0",
    "97": "num1",
    "98": "num2",
    "99": "num3",
    "100": "num4",
    "101": "num5",
    "102": "num6",
    "103": "num7",
    "104": "num8",
    "105": "num9",
    "106": "num*",
    "107": "num+",
    "108": "numenter",
    "109": "num-",
    "110": "num.",
    "111": "num/",
    "112": "f1",
    "113": "f2",
    "114": "f3",
    "115": "f4",
    "116": "f5",
    "117": "f6",
    "118": "f7",
    "119": "f8",
    "120": "f9",
    "121": "f10",
    "122": "f11",
    "123": "f12",
    "124": "f13",
    "125": "f14",
    "126": "f15",
    "127": "f16",
    "128": "f17",
    "129": "f18",
    "130": "f19",
    "131": "f20",
    "132": "f21",
    "133": "f22",
    "134": "f23",
    "135": "f24",
    "144": "numlock",
    "145": "scrolllock",
    "160": "shiftleft",
    "161": "shiftright",
    "162": "ctrlleft",
    "163": "ctrlright",
    "164": "altleft",
    "165": "altright",
    "166": "browserback",
    "167": "browserforward",
    "168": "browserrefresh",
    "169": "browserstop",
    "170": "browsersearch",
    "171": "browserfavorites",
    "172": "browserhome",
    "173": "volumemute",
    "174": "volumedown",
    "175": "volumeup",
    "176": "nexttrack",
    "177": "prevtrack",
    "178": "stop",
    "179": "playpause",
    "180": "launchmail",
    "181": "launchmediaselect",
    "182": "launchapp1",
    "183": "launchapp2",
    "186": ";",
    "187": "=",
    "188": ",",
    "189": "-",
    "190": ".",
    "191": "/",
    "192": "\`",
    "219": "[",
    "220": "\\\\",
    "221": "]",
    "222": "'",
    "223": "meta",
    "224": "meta",
    "226": "altgr",
    "229": "imeprocess",
    "231": "unicode",
    "246": "attention",
    "247": "crsel",
    "248": "exsel",
    "249": "eraseeof",
    "250": "play",
    "251": "zoom",
    "252": "noname",
    "253": "pa1",
    "254": "clear"
  }`);function Y7(r){let{key:o,metaKey:t}=r;return!(o==="imeprocess"||o==="CapsLock")}var kl=class{constructor(o,t){this._ctrl=!1;this._meta=!1;this._shift=!1;this._alt=!1;this._repeat=!1;this._pressed=[];this._listen=()=>{this.$element.addEventListener("keydown",this._onKeydown),this.$element.addEventListener("keyup",this._onKeyup),this.$element.addEventListener("focusin",this._onFocusIn),this.$element.addEventListener("focusout",this._onFocusOut)};this._unlisten=()=>{this.$element.removeEventListener("keydown",this._onKeydown),this.$element.removeEventListener("keyup",this._onKeyup),this.$element.removeEventListener("focusin",this._onFocusIn),this.$element.removeEventListener("focusout",this._onFocusOut)};this._reset=()=>{let{$system:o}=this,{input:t}=o,{keyboard:e}=t,{pressed:n}=e;this._repeat=!1,this._pressed=[...n]};this._onFocusIn=()=>{this._reset()};this._onFocusOut=()=>{};this._flush=()=>{[...this._pressed].forEach(o=>this._keyup(o))};this._keydown=o=>{this._pressed.indexOf(o)===-1&&this._pressed.push(o);let e=this._filterShortcuts("keydown");for(let n of e){if(this._repeat&&!n.multiple)continue;let i=Pl[o];n.keydown(i,{key:i,keyCode:o,ctrlKey:this._ctrl,shiftKey:this._shift,altKey:this._alt,metaKey:this._meta,repeat:this._repeat})}return e};this._keyup=o=>{if(this._pressed.indexOf(o)>-1){let e=this._filterShortcuts("keyup");this._remove(o);let n=Pl[o];for(let i of e)i.keyup(n,{key:n,keyCode:o,ctrlKey:this._ctrl,shiftKey:this._shift,altKey:this._alt,metaKey:this._meta,repeat:this._repeat})}};this._onKeydown=o=>{let{}=this.$system,{keyCode:t,key:e,ctrlKey:n,shiftKey:i,metaKey:s,altKey:a,repeat:_}=o;if(s)return;if(!Y7(o)){o.preventDefault();return}this._ctrl=n,this._meta=s,this._shift=i,this._alt=a,this._repeat=_;let c=this._keydown(t);for(let p of c)p&&p.preventDefault&&o.preventDefault()};this._onKeyup=o=>{if(!Y7(o))return;let{keyCode:t,key:e,ctrlKey:n,shiftKey:i,metaKey:s,altKey:a}=o;this._ctrl=n,this._meta=s,this._shift=i,this._alt=a,this._keyup(t)};this.$system=o,this.$element=t,this._ctrl=!1,this._meta=!1,this._shift=!1,this._alt=!1,this._pressed=[],this._shortcuts={};let{root:e}=o;K7(e,()=>{this._flush()}),this._reset()}isCtrlPressed(){return this._ctrl}isAltPressed(){return this._alt}isShiftPressed(){return this._shift}_removeEmptySpace(o){return o.combo&&(Array.isArray(o.combo)?o.combo=o.combo.map(t=>t.replace(/ /g,"")):o.combo=o.combo.replace(/ /g,"")),o}addShortcutGroup(o){let t=Ti(this._shortcuts);return this._shortcuts[t]=o.map(this._removeEmptySpace),J(this._shortcuts).length===1&&this._listen(),t}removeShortcutGroup(o){delete this._shortcuts[o],J(this._shortcuts).length===0&&this._unlisten()}isKeyPressed(o){let t=Ei[o];return!!t&&this._pressed.indexOf(t)>-1}_filterShortcuts(o){let t=[];for(let e in this._shortcuts){let n=this._shortcuts[e],i=this.getCurrentCombo(),s=i.join("+");for(let a of n){let _=!1;if(o==="keydown"&&a.keydown||o==="keyup"&&a.keyup){let{combo:c}=a,{strict:p}=a;c=Array.isArray(c)?c:[c];for(let u of c)if(u===s||p===!1&&i.includes(u)){_=!0;break}}_&&t.push(a)}}return t}_remove(o){let t=this._pressed.indexOf(o);t>-1&&this._pressed.splice(t,1)}_isSystemCombo(o){let{key:t,ctrlKey:e,metaKey:n}=o;return!!((n||e)&&["c","v","x","z"].includes(t))}getCurrentCombo(){return this._pressed.map(o=>Pl[o])}_comboToKeyCodes(o){return o.split("+").map(t=>Ei[t])}};kl.keys=Pl;function bo(r,o=!1){return t=>SC(t,r,o)}function SC(r,o,t=!1){let{$element:e,$system:n}=r,i=new kl(n,e),s=i.addShortcutGroup(o);return()=>{i.removeShortcutGroup(s)}}function DC(r,o){let{$element:t}=r,e=n=>{let{key:i,keyCode:s,ctrlKey:a,shiftKey:_,altKey:c,metaKey:p,repeat:u}=n;o&&o({key:i,keyCode:s,ctrlKey:a,shiftKey:_,altKey:c,metaKey:p,repeat:u},n)};return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}}function EC(r,o){let{$element:t}=r,e=n=>{let{key:i,keyCode:s,ctrlKey:a,shiftKey:_,altKey:c,metaKey:p,repeat:u}=n;o&&o({key:i,keyCode:s,ctrlKey:a,shiftKey:_,altKey:c,metaKey:p,repeat:u},n)};return t.addEventListener("keypress",e),()=>{t.removeEventListener("keypress",e)}}function yo(r){return o=>DC(o,r)}function w2(r){return o=>EC(o,r)}function wC(r,o){let{$element:t}=r,e=n=>{let{key:i,keyCode:s,ctrlKey:a,shiftKey:_,altKey:c,metaKey:p,repeat:u}=n;o&&o({key:i,keyCode:s,ctrlKey:a,shiftKey:_,altKey:c,metaKey:p,repeat:u},n)};return t.addEventListener("keyup",e),()=>{t.removeEventListener("keyup",e)}}function P2(r){return o=>wC(o,r)}function X7(r,o){let{input:t}=r,{keyboard:e}=t,{pressed:n}=e,i=Ei[o];return n.indexOf(i)>-1}var Cl={Enter:"enter",Shift:"shift",Backspace:"backspace",ArrowDown:"arrow-down",ArrowLeft:"arrow-left",ArrowRight:"arrow-right",ArrowUp:"arrow-up",AltLeft:"option",AltRight:"option",CtrlRight:"chevron-up",CtrlLeft:"chevron-up",MetaLeft:"cmd"};l();function Tl(r){return o=>PC(o,t=>{r(t)})}function PC(r,o){let{$element:t}=r,e=n=>{let{clipboardData:i}=n,s=i&&i.getData("text/plain")||"";o(s,n)};return t.addEventListener("paste",e),()=>{t.removeEventListener("paste",e)}}l();l();l();function qn(r,o=!1){return t=>kC(t,r,o)}function kC(r,o,t=!1){return ci("pointercancel",r,o,t)}l();function le(r,o=!1){return t=>k2(t,r,o)}function k2(r,o,t=!1){return ci("pointerdown",r,o,t)}l();function Ee(r,o=!1){return t=>CC(t,r,o)}function CC(r,o,t=!1){return ci("pointerleave",r,o,t)}l();function Je(r,o=!1){return t=>TC(t,r,o)}function TC(r,o,t=!1){return ci("pointermove",r,o,t)}l();function ue(r,o=!1){return t=>AC(t,r,o)}function AC(r,o,t=!1){return ci("pointerup",r,o,t)}function ae(r){return o=>MC(o,r)}function MC(r,o){let{$element:t}=r,{onClick:e,onClickCancel:n,onDoubleClick:i,onLongPress:s,onLongClickCancel:a,onLongClick:_,onClickHold:c}=o,p=0,u={},d,m=0,h={},f={},b,g={},v=null,x=null,I,E,D,w,T,C=(N,z)=>{let{pointerId:F}=N;if(!u[F]){let{clientX:V,clientY:j}=N;m++,m===1&&(E=pi(r,Je(k)),D=pi(r,ue(U)),w=pi(r,Ee(L)),T=pi(r,qn(M)),I=Tt([E,D,w,T])),h[F]={x:V,y:j},u[F]=h[F],f[F]=-1/0,m===1?((p===0||b&&He(b,{x:V,y:j})>15)&&(x&&clearTimeout(x),x=setTimeout(()=>{p===0&&u[F]&&m===1&&(g[F]=!0,f[F]<15/3&&s&&s(N,z)),x=null},300)),p===1&&He(h[F],d)<=15&&setTimeout(()=>{u[F]&&f[F]<15&&c&&c(N)},300)):x&&(clearTimeout(x),g={},x=null)}},P=new Set,k=N=>{let{clientX:z,clientY:F,pointerId:V}=N;h[V]={x:z,y:F},u[V]&&(f[V]=Math.max(f[V],He(u[V],h[V])),!P.has(V)&&f[V]>=15/3&&(P.add(V),a&&a(N)))},M=({pointerId:N})=>{O(N)},U=(N,z)=>{let{pointerId:F,clientX:V,clientY:j}=N,H={x:V,y:j};if(u[F]){let K=He(u[F],H);d=u[F],p++;let q=P.has(F);q&&P.delete(F),p===2&&f[F]>15&&(p=1,f[F]=0,v&&(clearTimeout(v),v=null));let Q=He(H,d);p>0&&p%2===1&&(K<15?v=setTimeout(()=>{p=0,v=null},300):(p=0,v=null),Q<=15&&!q?g[F]?_&&_(N):e&&e(N,z):n&&n(N)),p>0&&p%2===0&&(Q<=15&&f[F]<=15&&He(b,H)<=15&&i?i(N):e&&e(N,z)),b=h[F],O(N)}},L=N=>{O(N)},O=N=>{let{pointerId:z}=N;u[z]&&(delete u[z],m--,m===0&&(I&&I(),I=void 0),delete g[z])};t.addEventListener("click",t0),t.addEventListener("dblclick",t0);let R=k2(r,C);return()=>{R(),I&&I(),I=void 0}}l();function Ye(r,o=!1){return t=>OC(t,r,o)}function OC(r,o,t=!1){return ci("pointerenter",r,o,t)}l();function ra(r){return o=>$C(o,(t,e)=>{r(t,e)})}function $C(r,o){let{$system:{api:{document:{elementFromPoint:t}}},$element:e}=r,n=i=>{let{$context:s,$element:a}=r,{$x:_,$y:c,$sx:p,$sy:u}=s,{deltaX:d,deltaY:m,ctrlKey:h,altKey:f,clientX:b,clientY:g,offsetX:v,offsetY:x}=i;h||o({deltaY:m,deltaX:d,ctrlKey:h,altKey:f,clientX:(b-_)/p,clientY:(g-c)/u,offsetX:v,offsetY:x,screenX:b,screenY:g},i)};return e.addEventListener("wheel",n,{passive:!1}),()=>{e.removeEventListener("wheel",n)}}var u0=new Set(["click","dbclick","longpress","longclick","pointerdown","pointermove","pointerup","pointerenter","pointerleave","dragstart","drop","input","change","paste","keydown","keyup","keypress","wheel","message"]);function Z7(r,o){switch(r){case"click":return ae({onClick:o});case"dbclick":return ae({onDoubleClick:o});case"longpress":return ae({onLongPress:o});case"longclick":return ae({onLongClick:o});case"pointerdown":return le(o);case"pointermove":return Je(o);case"pointerup":return ue(o);case"pointerenter":return Ye(o);case"pointerleave":return Ee(o);case"dragstart":return p0(o);case"drop":return Dl(o);case"input":return ui(o);case"change":return E2(o);case"paste":return Tl(o);case"keydown":return yo(o);case"keyup":return P2(o);case"keypress":return w2(o);case"wheel":return ra(o);case"message":return mt("_message",o);default:throw new Error(`unknown UI event: ${r}`)}}l();function Q7(r,o){r.mount(o)}l();function Gs(r){if(r instanceof Text)return{};let o={},{style:t}=r;for(let e=0;e<t.length;e++){let n=t[e],i=t.getPropertyValue(n);o[n]=i}return o}l();l();var Oe=r=>r.join("/");var C2=(r,o,t)=>r.map(([n,i])=>{let s=Oe([...o,...n]);return t(s,i)}),LC=(r,o)=>{let t=[],e=r;for(;e.$parent&&e!==o;)t=[e.$parent.getSubComponentId(e),...t],e=e.$parent;return t},Al=(r,o,t,e,n,i)=>{var p;let s=n[t],a=t,_=t&&t.split("/")||[];if(!s){let d=o.pathGetSubComponent(_),m=0;for(let b of e)m===1?d=(p=d.$parentRoot[b])!=null?p:d.$root[b]:m==2?d=d.$parentRoot[b]:d=d.$parentChildren[b],m++;if(!d)return[];let h;if(e.length>=1){let b=LC(d,r);h=d.getRootBase().map(([g,v])=>[[...b,...g],v])}else h=d.$parentChildren.reduce((b,g)=>{let v=g.$parent.getSubComponentId(g);return[...b,...g.getRootBase().map(([x,I])=>[[v,...x],I])]},[]);return C2(h,[],i)}if(e.length===0)return o.pathGetSubComponent(_).$parentChildren.reduce((h,f)=>{let b=f.$parent.getSubComponentId(f);return[...h,...f.getRootBase().map(([g,v])=>[[b,...g],v])]},[]).map(([h,f])=>{let b=Oe(h);return i(b,f)});for(let u of e){if(a===s[u])return[];if(a=s[u],_=a.split("/"),s=n[a],!s){let d=a.split("/");s=o.pathGetSubComponent(d).$parentChildren.reduce((h,f)=>{let b=0,g=null,v=f.$parent,x=f,I=[];for(;v&&v!==o.$parent;)I.unshift(v.getSubComponentId(x)),x=v,v=v.$parent;for(;!g&&v;)g=o.getSubComponentId(v),I.unshift,v=v.$parent,b++;let E=d.slice(0,d.indexOf(g)+b),D=f.$parent.getSubComponentId(f);return[...h,...f.getRootBase().map(([w])=>Oe([...I,...w]))]},[])}}return s.map(u=>{let d=u.split("/"),m=o.pathGetSubComponent(d);return i(u,m)})};var tS=(r,o,t,e,n,i,s,a)=>{let{api:{layout:{reflectChildrenTrait:_}}}=r.$system,c={},p=[],u=[],d=[],m={},h={},f={},b={},g={},v={},x=(D,w)=>Al(r,e,D,w,v,(T,C)=>a(o&&`${o}/${T}`||T,C));for(let D of n){let[w,T]=D,C=Oe(w),P=w[0],k=e.getSubComponent(P),M=w.slice(0,w.length-1),U=w[w.length-1],L=Oe(M),O=e.getSubComponentParentId(P),N=e.pathGetSubComponent(M).getSubComponentParentId(U),z;if(O){let H=e.getSubComponent(O);z=[O];let K=k,q=H,Q=q.getParentRootSlotId(K);for(;q;){let at=q.getSlotSubComponentId(Q),Dt=q.$slotTarget[Q];if(at)z.push(at),q=q.getSubComponent(at),Q=Dt;else break}}else z=N?[...M,N]:M;g[C]=z;let F=Oe(z),V=F===L;V||(v[F]=v[F]||[],v[F].push(C));let j=a(`${t}${C===""?"":`${t?"/":""}${C}`}`,T);if(h[C]=j,O){let H=e.getSubComponent(O),K=H.$parentRoot.indexOf(k),q=H.$parentRootSlotName[K];c[P]=q,f[O]=f[O]||{},f[O][q]=f[O][q]||[],f[O][q].push(j),m[O]=m[O]||{},m[O][q]=m[O][q]||[],m[O][q].push(C)}else V&&(p.push(P),u.push(j),d.push(C))}let I=_(s,i,u,[],D=>{let w=d,[T,...C]=D,P=w[T];return x(P,C)}),E=0;for(let D of d)b[D]=I[E],E++;for(let D in v){let w=v[D],T=h[D]||{},C=w.map(U=>h[U],[]),P=b[D]||s,k=_(P,T,C,[],U=>x(D,U)),M=0;for(let U of w){let L=k[M];b[U]=L,M++}}return b};l();l();function Un(r,o=!1){return t=>UC(t,r)}function UC(r,o,t=!1){return $s("resize",r,o,t)}var T2=r=>r.endsWith("vh")||r.endsWith("vw");function aa(r,o,t){let e=zt,n=zt,i=r.endsWith("vh"),s=r.endsWith("vw");if(s||i){let a=parseFloat(r.replace("vh","").replace("vw",""))/100,_=({width:m,height:h})=>{t(s?m*a:h*a)},c=Un(_),p=()=>{let{$width:m,$height:h}=o.$context;_({width:m,height:h})},u=()=>{let{$context:m}=o;n=pi(m,c)},d=()=>{n(),n=zt};return o.$mounted&&(u(),p()),e=o.addEventListeners([mt("mount",()=>{p(),u()}),mt("unmount",d)]),Tt([d,e])}return zt}function sn(r,o,t){eS(o);let{fontSize:e,width:n,height:i}=t,s=zt,a=r.$propUnlisten.style;a&&(a(),delete r.$propUnlisten.style);let _=[];return typeof e=="number"&&(e=`${e}px`),e&&T2(e)&&(delete t.fontSize,_.push(aa(e,r,c=>{o.style.fontSize=c+"px"}))),n&&T2(n)&&(delete t.width,_.push(aa(n,r,c=>{o.style.width=c+"px"}))),i&&T2(i)&&(delete t.height,_.push(aa(i,r,c=>{o.style.height=c+"px"}))),vo(o,t),a=Tt(_),r.$propUnlisten.style=a,a}function eS(r){let o=r.style;for(;o[0];)o.removeProperty(o[0])}function vt(r,o){eS(r),vo(r,o)}function vo(r,o){let t=r.style;for(let e in o){let n=o[e];t[vI(e)]=n}}l();function nS(r){r.unmount()}l();function A2(r){return Number.parseFloat(r.substring(0,r.length-2))}function iS(r){if(r instanceof Text)return;let{fontSize:o}=r.style;if(o)return A2(o)}l();function GC(r){return Number.parseFloat(r)}function oS(r){if(r instanceof Text)return;let{opacity:o}=r.style;if(o)return GC(o)}l();function sS(r){if(r instanceof HTMLElement){let{transform:o}=r.style,{offsetWidth:t,offsetHeight:e}=r,[n,i,s,a,_,c,p]=Yo(o,t,e);return{sx:s,sy:a}}else return{sx:1,sy:1}}l();function rS(r){if(r instanceof Text)return;let{textAlign:o}=r.style;if(o)return o}var NC=(r,{bundle:o})=>{var _;let{unit:t,specs:e}=o,{id:n,memory:i={input:{}}}=t,s={};return Ke((_=i.input)!=null?_:{},(c,{_data:p})=>{s[c]=p}),Zr(r,Wt(e,r.specs),n,s)},Cn=class{constructor(o,t,e,n){this.$_=[];this.$changed=new Set;this.$ref={};this.$connected=!1;this.$primitive=!0;this.$propUnlisten={};this.$unbundled=!0;this.$children=[];this.$slotChildren={default:[]};this.$childSlotName=[];this.$slot={default:this};this.$slotId={};this.$slotTarget={};this.$subComponent={};this.$root=[];this.$wrap=!1;this.$parentRoot=[];this.$parentRootSlotName=[];this.$parentChildren=[];this.$parentChildrenSlot=[];this.$mountRoot=[];this.$mountParentRoot=[];this.$mountParentChildren=[];this.$parent=null;this.$slotParent=null;this.$mounted=!1;this.$listenCount={};this._prop_transformer={};this._releasePointerCapture={};this.$detached=!1;this._animateBase=(o,t,e=!1,n)=>{var g,v;let{foreground:{html:i},api:{text:{measureText:s},document:{createElement:a},layout:{reflectChildrenTrait:_}}}=this.$system,c=[],p=t;for(;(v=(g=p.$element)==null?void 0:g.classList)!=null&&v.contains("__parent");)p=p.$slotParent;let u=Ie(p,s),d=Gs(p.$element);delete d.transform,delete d.opacity;let m=C2(o,[],(x,I)=>Gs(I.$element)),h=_(u,d,m,[]),f=0,b=[];for(let x=0;x<o.length;x++){let I=h[x],E=o[x],[D,w]=E,T=Ie(w,s),C=a("div");vt(C,{position:"absolute",left:`${T.x}px`,top:`${T.y}px`,width:`${T.width}px`,height:`${T.height}px`,pointerEvents:"none"}),t.$element.appendChild(C),!e&&this.domRemoveLeaf(E),w.unmount(),C.appendChild(w.$element),w.$slotParent=t,w.mount(t.$context),b.push(C);let P=Xb(this.$system,T,()=>I,y7,({x:k,y:M,width:U,height:L,sx:O,sy:R,opacity:N,fontSize:z})=>{C.style.left=`${k-(e?this.$context.$x:u.x)+(Math.abs(O)-1)*U/2}px`,C.style.top=`${M-(e?this.$context.$y:u.y)+(Math.abs(R)-1)*L/2}px`,C.style.width=`${U}px`,C.style.height=`${L}px`,C.style.transform=`scale(${O}, ${R})`,C.style.opacity=`${N}`,C.style.fontSize=`${z}px`},()=>{if(f++,f===o.length){for(let k of b)k.removeChild(w.$element),t.$element.removeChild(k);n()}});c.push(P)}return Tt(c)};this.templateBase=(o,t,e)=>{for(let n of o)this.templateLeaf(n,t,e)};this.templateLeaf=(o,t,e)=>{let[n,i]=o,s=n[n.length-1],a=n.slice(0,-1),_=this.pathGetSubComponent(a);if(_!==i){let c=_.getSubComponentParentId(s);if(c){let p=_.getSubComponent(c);e(p,i)}else t(_,i)}};this.domRemoveBase=o=>{this.templateBase(o,(t,e)=>{let n=t.$root.indexOf(e);t.domRemoveRoot(e,n)},(t,e)=>{let n=t.$parentRoot.indexOf(e);t.domRemoveParentRootAt(e,"default",n,n)})};this.domRemoveLeaf=o=>{this.templateLeaf(o,(t,e)=>{let n=t.$root.indexOf(e);t.domRemoveRoot(e,n)},(t,e)=>{let n=t.$parentRoot.indexOf(e);t.domRemoveParentRootAt(e,"default",n,n)})};this.domAppendBase=o=>{this.templateBase(o,(t,e)=>{t.domAppendRoot(e)},(t,e)=>{let n=t.$parentRoot.indexOf(e);t.domAppendParentRoot(e,"default",n)})};this.$listener=[];this.$unlisten=[];this.$named_listener_count={};this.$named_unlisten={};this._addUnitEventListener=o=>{if(o.startsWith("_")){let t=o.slice(1),e=this.addEventListener(mt(t,n=>{this.$unit.$refEmitter({_:["EE"]}).$emit({type:o,data:n},zt)}));this.$named_unlisten[o]=e}else{let t=this.addEventListener(Z7(o,e=>{this.$unit.$refEmitter({_:["EE"]}).$emit({type:o,data:e},zt)}));this.$named_unlisten[o]=t}};this._removeUnitEventListener=o=>{let t=this.$named_unlisten[o];delete this.$named_unlisten[o],t()};this._$instanceChild=(o,t)=>{let e=NC(this.$system,o),n=ho(e),i=this.$unit.$refChild({at:t,_:n});return e.connect(i),e};this.addEventListener=o=>{if(this.$primitive)return pi(this,o);{let t=[];for(let e of this.$root){let n=e.addEventListener(o);t.push(n)}return Tt(t)}};this.addEventListeners=o=>{if(this.$primitive)return Be(this,o);{let t=[];for(let e of this.$root){let n=e.addEventListeners(o);t.push(n)}return Tt(t)}};this.$props=o,this.$system=t,this.$element=e,this._$node=n!=null?n:e}get $node(){var o;return(o=this._$node)!=null?o:this.$element}set $node(o){this._$node=o}getProp(o){return this.$props[o]}setProp(o,t){this.$props[o]=t,this.$mounted?this._onPropChanged(o,t):this.$changed.add(o)}interceptProp(o,t){return this._prop_transformer[o]=this._prop_transformer[o]||[],this._prop_transformer[o].push(t),()=>{Hn(this._prop_transformer[o],t)}}getSlot(o){return this.$slot[o]}onPropChanged(o,t){}_onPropChanged(o,t){let e=(this._prop_transformer[o]||[]).reduce((n,i)=>i(n),t);this.onPropChanged(o,e!=null?e:t)}refreshProp(o){this._onPropChanged(o,this.$props[o])}onConnected(o){}onDisconnected(){}onMount(){}onUnmount(o){}onDestroy(){for(let o of this.$children)o.destroy()}dispatchEvent(o,t={},e=!0){this.$primitive?gl(this.$element,o,t,e):this.$mounted?gl(this.$slotParent.$element,o,t,e):gl(this.$element,o,t,e)}dispatchContextEvent(o,t={}){this.$context&&Os(this.$context,o,t)}stopPropagation(o){this.$element.addEventListener(o,function(t){t.stopPropagation()},{passive:!0})}stopImmediatePropagation(o){this.$element.addEventListener(o,function(t){t.stopImmediatePropagation()},{passive:!0})}preventDefault(o){let t=n=>(n.preventDefault(),!1),e={passive:!1};return this.$element.addEventListener(o,t,e),()=>{this.$element.removeEventListener(o,t,e)}}hasPointerCapture(o){return!!this._releasePointerCapture[o]}setPointerCapture(o){let{api:{input:{pointer:{setPointerCapture:t}}}}=this.$system;if(this.$element instanceof Text)throw new Error("cannot set pointer capture on a text element");this._releasePointerCapture[o]=t(this.$element,o)}releasePointerCapture(o){let t=this._releasePointerCapture[o];t&&(t(),delete this._releasePointerCapture[o])}scrollIntoView(o){this.$slot.default===this?this.$element instanceof HTMLElement&&this.$element.scrollIntoView(o):this.$slot.default.scrollIntoView(o)}detach(o,t){let{getLocalComponents:e}=this.$system,{animate:n=!1}=t;if(this.$detached)throw new Error("component is already detached");this.$detached=!0;let i=o.replace("unit://",""),s=e(i);if(s.length===0)return;let _=s[0].getSlot("default"),c=this.getRootBase(),p=()=>{for(let[u,d]of c)_.domAppendChild(d)};n?this._animateBase(c,_,!1,p):(this.domRemoveBase(c),p())}attach(o){if(!this.$detached)throw new Error("component is not detached");let{animate:t}=o;this.$detached=!1;let e=this.getRootBase(),n=0;if(t){let i=[];this.templateBase(e,s=>{i.push(s.$slot.default)},s=>{i.push(s.$slot.default)});for(let s=0;s<e.length;s++){let a=e[s],[_,c]=a,p=this.$slotParent;this._animateBase([a],p,!0,()=>{n++,c.unmount(),this.domAppendBase([a]),c.mount(this.$context)})}}else this.domAppendBase(e)}mountChild(o,t=!0){o.mount(this.$context,t)}unmountDescendent(o){return o.unmount()}_forAllMountDescendent(o){for(let t of this.$mountRoot)o(t);for(let t of this.$mountParentChildren)o(t)}commit(){if(this.$detached)return;this.onMount(),this._forAllMountDescendent(t=>{t.commit()});let o=new Set(this.$changed);for(let t of o){let e=this.$props[t];this.$changed.delete(t),this._onPropChanged(t,e)}this.$listenCount.mount&&this.dispatchEvent("mount",{},!1)}mount(o,t=!0){if(this.$mounted)throw new Error("cannot mount a mounted component");this.$context=o,this.$mounted=!0,this._forAllMountDescendent(e=>{e.$detached||this.mountChild(e,!1)}),t&&this.commit()}unmount(){if(!this.$mounted)throw new Error("cannot unmount unmounted component");let o=this.$context;this._forAllMountDescendent(t=>{t.$detached||this.unmountDescendent(t)}),this.$mounted=!1,this.$context=null,this.onUnmount(o),this.$listenCount.unmount&&this.dispatchEvent("unmount",{},!1)}focus(o={preventScroll:!0}){if(this.$slot.default===this){if(this.$element instanceof Text)return;this.$primitive?this.$element.focus(o):this.$root.length>0&&this.$root[0].focus(o)}else this.$slot.default.focus(o)}blur(){if(this.$slot.default===this){if(this.$element instanceof Text)return;if(this.$primitive)this.$element.blur();else{let o=0;for(;this.$root[o]instanceof Text;)o++;this.$mountRoot[o].blur()}}else this.$slot.default.blur()}deselect(){let{api:{selection:{removeSelection:o}}}=this.$system;this.containsSelection()&&o()}containsSelection(){let{api:{selection:{containsSelection:o}}}=this.$system;return this.$primitive?o(this.$element):this.$root.some(t=>t.containsSelection())}animate(o,t){var e,n,i,s;if(this.$slot.default===this){if(this.$primitive)return this.$element instanceof Text||(n=(e=this.$element).animate)==null?void 0:n.call(e,o,t);{let a=0;for(;this.$element[a]instanceof Text;)a++;return this.$element[a].animate(o,t)}}else return(s=(i=this.$slot.default).animate)==null?void 0:s.call(i,o,t)}getOffset(){let o=this;if(this.isSVG())return o;for(;o&&!(o.$element instanceof HTMLElement&&o.$element.style.display!=="contents"&&(o.$element.style.position===""||o.$element.style.position==="relative"||o.$element.style.position==="absolute"));)o=o.$slotParent;return o}getElementPosition(){if(!this.$mounted)throw new Error("cannot calculate position of unmounted component");let o={x:this.$context.$x,y:this.$context.$y};if(!this.$primitive)throw new Error("cannot calculate position of multiple elements");let t=sa(this.$element,this.$context.$element);return Wn(o,t)}getElementSize(){if(!this.$primitive)throw new Error("cannot calculate size of multiple elements");return Us(this.$element)}getFontSize(){if(this.$primitive){let o=iS(this.$element);if(o)return o}return this.$slotParent?this.$slotParent.getFontSize():14}getOpacity(){if(this.$primitive){let o=oS(this.$element);if(o!==void 0)return o}return this.$slotParent?this.$slotParent.getOpacity():1}getScale(){let o={sx:1,sy:1};if(this.$primitive&&(o=sS(this.$element)),this.$slotParent){let t=this.$slotParent.getScale();return{sx:o.sx*t.sx,sy:o.sy*t.sy}}return o}getTextAlign(){if(this.$primitive){let o=rS(this.$element);if(o)return o}return this.$parent?this.$parent.getTextAlign():I7}getRootPosition(o){return dn}getParentRootPosition(o,t){return dn}isSVG(){return this.$element instanceof SVGElement&&!(this.$element instanceof SVGSVGElement)}isHMTL(){return this.$element instanceof HTMLElement}isText(){return this.$element instanceof Text}isBase(){return this.$primitive&&this.$root.length===0}getRootBase(o=[]){if(this.isBase())return[[o,this]];let t=[];for(let e of this.$root){let n=this.getSubComponentId(e),i=e.getRootBase([...o,n]);t=[...t,...i]}return t}getBase(o=[]){if(this.isBase())return[[o,this]];let t=[],e=n=>{let i=this.getSubComponentId(n),s=n.getRootBase([...o,i]);t=[...t,...s];for(let a of n.$parentRoot)e(a)};for(let n of this.$root)e(n);return t}pathGetSubComponent(o){if(o.length==0)return this;{let[t,...e]=o;return this.getSubComponent(t).pathGetSubComponent(e)}}getRect(){return _0(this.$element)}getBoundingClientRect(){if(this.$context){if(!this.$primitive)throw new Error("cannot calculate position of multiple elements.");if(this.$element instanceof Text)return;let{$x:o,$y:t,$sx:e,$sy:n}=this.$context,i=this.$element.getBoundingClientRect(),{x:s,y:a,width:_,height:c}=i;return{x:(s-o)/e,y:(a-t)/n,width:_/e,height:c/n}}else throw new Error("component not mounted")}appendChild(o,t="default"){let e=this.$children.length;return this.memAppendChild(o,t,e),this.domAppendChild(o,t,e),this.postAppendChild(o,t,e),e}memAppendChild(o,t,e){this.$slotChildren[t]=this.$slotChildren[t]||[],this.$slotChildren[t].push(o),this.$children.push(o),this.$childSlotName[e]=t,this.$slot[t].memAppendParentChild(o,t,e,e)}domAppendChild(o,t="default",e){e=e!=null?e:this.$children.length;let n=this.$slot[t];for(;n.$slot[t]&&n.$slot[t]!==n;)n=n.$slot[t];n.domAppendParentChildAt(o,t,e,e),o.$slotParent=n}postAppendChild(o,t,e){this.$slot[t].postAppendParentChild(o,t,e)}createSVGWrapper(){let{api:{document:{createElementNS:o}}}=this.$system,t=o(Ut,"svg");return t.style.display="block",t.style.width="100%",t.style.height="100%",new Cn({},this.$system,t)}_createHTMLWrapper(){let{api:{document:{createElement:o}}}=this.$system,t=o("div");return t.style.width="100%",t.style.height="100%",new Cn({},this.$system,t)}templateChildWrapper(o,t,e,n){return this.isHMTL()&&o.isSVG()?t():this.isSVG()&&o.isHMTL()?e():n()}domRemoveChild(o,t="default",e){let n=this.$slot[t];e=e!=null?e:n.$slotChildren[t].indexOf(o),n.domRemoveParentChildAt(o,t,e,e),o.$slotParent=null}postRemoveChild(o,t){this.$mounted&&o.unmount()}hasChild(o){return this.$children.length>o}ascendChild(o,t="default"){this.removeChild(o),this.appendChild(o,t)}connect(o,t=!0){if(!this.$connected&&(this._connect(o,t),t&&this.$unbundled))for(let e in this.$subComponent){let n=this.$subComponent[e],i=ho(n),s=o.$refSubComponent({unitId:e,_:i});n.connect(s)}}_connect(o,t=!0){if(this.$connected)return;this.$unit=o;let e=d=>{this.$named_listener_count[d]=this.$named_listener_count[d]||0,this.$named_listener_count[d]++,this.$named_unlisten[d]||this._addUnitEventListener(d)},n=d=>{this.$named_listener_count[d]--,this.$named_listener_count[d]===0&&this._removeUnitEventListener(d)},i={unit:d=>{let{event:m,data:h}=d;if(m==="append_child"){let f=h,b=this.$children.length,g=this._$instanceChild({bundle:f},b),v="default";this.appendChild(g,v)}else if(m==="remove_child"){let f=h,b=this.$children[f];this.removeChildAt(f),b.destroy()}}},s=d=>{let{type:m}=d;i[m]&&i[m](d)};this.$named_listener_count={},o.$getGlobalId({},d=>{this.$remoteId=d,this.$localId=this.$system.registerLocalComponent(this,d)});let a=[],_=["append_child","remove_child"],c=this.$unit.$watch({events:_},s);a.push(c);let p=o.$refEmitter({_:["EE"]});p.$eventNames({},d=>{for(let m of d)(u0.has(m)||m.startsWith("_"))&&e(m)});let u=Tt([p.$addListener({event:"listen"},({event:d})=>{(u0.has(d)||d.startsWith("_"))&&e(d)}),p.$addListener({event:"unlisten"},({event:d})=>{u0.has(d||d.startsWith("_"))&&n(d)}),p.$addListener({event:"call"},({method:d,data:m})=>{this._call(d,m)})]);a.push(u),this._unit_unlisten=Tt(a),o.$children({},d=>{if(d.length>0){let m=d.map(this._$instanceChild);this.setChildren(m)}}),this.$connected=!0,this.onConnected(o)}disconnect(o=!0){if(this._disconnect(),this.$unbundled)for(let t in this.$subComponent)this.$subComponent[t].disconnect()}_disconnect(o=!0){if(!this.$connected)throw new Error("component is not already disconnected");this._unit_unlisten();for(let t of this.$children)t.disconnect();this.$connected=!1,this.onDisconnected()}setChildren(o=[],t=[]){let e=[...this.$children];for(let n of e)this.removeChild(n);for(let n=0;n<o.length;n++){let i=o[n],s=t[n];this.appendChild(i,s)}}memRemoveChildAt(o,t,e){this.$slot[t].memRemoveParentChildAt(o,t,e,e),Hn(this.$slotChildren[t],o),yn(this.$children,e),yn(this.$childSlotName,e)}removeChildAt(o){let t=this.$children[o],e=this.$childSlotName[o];return this.memRemoveChildAt(t,e,o),this.domRemoveChild(t,e,o),this.postRemoveChild(t,o),o}removeChild(o){let t=this.$children.indexOf(o);if(t>-1)return this.removeChildAt(t);throw new Error("child component not found")}removeChildren(){let o=[...this.$children];for(let t of o)this.removeChild(t)}hasRoot(o){return this.$root.includes(o)}pushRoot(o){if(this.$root.indexOf(o)>-1)throw new Error("component is already a root");this.$root.push(o)}pullRoot(o){let t=this.$root.indexOf(o);if(t>-1)this.$root.splice(t,1);else throw new Error("cannot pull; not root component")}fitRoot(o,t){this.$root.splice(t,0,o)}registerRoot(o){this.pushRoot(o),this.appendRoot(o)}registerRootAt(o,t){Ue(this.$root,o,t),this.insertRootAt(o,t)}unregisterRoot(o){this.pullRoot(o),this.removeRoot(o)}memAppendRoot(o){if(this.$mountRoot.indexOf(o)>-1)throw new Error("root is already mounted");en(this.$mountRoot,o)}postAppendRoot(o){h2(this.$mounted,Q7,o,this.$context)}domAppendRoot(o){if(no(o,"$slotParent",this),this.$primitive)if(o.$primitive)this.domCommitAppendChild(o);else for(let t of o.$mountRoot)this.domAppendRoot(t);else if(o.$primitive)this.$slotParent?this.$slotParent.domAppendParentChildAt(o,"default",this.$slotParent.$mountParentChildren.length,this.$slotParent.$mountParentChildren.length):this.domCommitAppendChild(o);else for(let t of o.$mountRoot)this.domAppendRoot(t)}domCommitAppendChild(o){Ms(this.$element,o.$element)}domCommitInsertChild(o,t){x7(this.$element,o.$element,t)}appendRoot(o){this.memAppendRoot(o),this.domAppendRoot(o),this.postAppendRoot(o)}insertRootAt(o,t){this.memInsertRootAt(o,t),this.domInsertRootAt(o,t),this.postInsertRootAt(o,t)}postInsertRootAt(o,t){this.$mounted&&this.mountChild(o)}memInsertRootAt(o,t){if(this.$mountRoot.indexOf(o)>-1)throw new Error("root is already mounted");Ue(this.$mountRoot,o,t)}domInsertRootAt(o,t){var e,n;if(no(o,"$slotParent",this),this.$primitive)if(o.$primitive)this.domCommitInsertChild(o,t);else for(let i of o.$mountRoot)this.domInsertRootAt(i,t);else if(o.$primitive)if(this.$slotParent){let i=this,s=this.$slotParent.$mountParentChildren.indexOf(i);for(;i&&!this.$slotParent.$mountParentChildren.includes(i);)i=i.$parent,s=this.$slotParent.$mountParentChildren.indexOf(i);this.$slotParent.domInsertParentChildAt(o,"default",s+t)}else this.domCommitInsertChild(o,t);else for(let i of o.$mountRoot)if(this.$slotParent){let s=(e=this.$parent)!=null&&e.$root.includes(this)?(n=this.$parent)==null?void 0:n.$root.indexOf(this):this.$slotParent.$mountParentChildren.indexOf(this);this.$slotParent.domInsertParentChildAt(o,"default",s+t)}else this.domCommitInsertChild(i,t)}appendAllRoot(){for(let o of this.$root)this.appendRoot(o)}appendAllMissingRoot(){for(let o of this.$root)this.$mountRoot.includes(o)||this.appendRoot(o)}removeAllRoot(){for(let o of[...this.$mountRoot])this.removeRoot(o)}removeRoot(o){let t=this.$root.indexOf(o);this.domRemoveRoot(o,t),this.memRemoveRoot(o),this.postRemoveRoot(o)}memRemoveRoot(o){vn(this.$mountRoot,o)}domRemoveRoot(o,t){if(no(o,"$slotParent",null),this.$primitive)if(o.$primitive)this.domCommitRemoveChild(o);else for(let e of o.$mountRoot)this.domRemoveRoot(e,t),Ms(o.$element,e.$element);else if(o.$primitive)this.$slotParent?this.$slotParent.domRemoveParentChildAt(o,"default",t,t):this.domCommitRemoveChild(o);else for(let e=0;e<o.$mountRoot.length;e++)this.$slotParent?this.$slotParent.domRemoveParentChildAt(o.$mountRoot[e],"default",t,t):this.domCommitRemoveChild(o),Ms(o.$element,o.$mountRoot[e].$element)}postRemoveRoot(o){h2(this.$mounted,nS,o)}compose(){for(let o of this.$root)o.collapse(),this.appendRoot(o)}decompose(o=!0){for(let t of[...this.$mountRoot])this.removeRoot(t),o&&t.uncollapse(o)}hasParentRoot(o){return this.$parentRoot.includes(o)}pushParentRoot(o,t){en(this.$parentRoot,o),en(this.$parentRootSlotName,t),io(this.$slot,t).memPushParentChild(o,t)}insertParentRoot(o,t,e){Ue(this.$parentRoot,o,t),Ue(this.$parentRootSlotName,e,t)}unshiftParentRoot(o,t){ka(this.$parentRoot,o),ka(this.$parentRootSlotName,t)}pullParentRoot(o){let t=this.$parentRoot.indexOf(o);if(t>-1){let e=this.$parentRootSlotName[t];yn(this.$parentRoot,t),yn(this.$parentRootSlotName,t),io(this.$slot,e).memPullParentChild(o,t)}else throw new Error("parent root not found")}registerParentRoot(o,t="default"){this.pushParentRoot(o,t),this.appendParentRoot(o,t)}unregisterParentRoot(o){this.removeParentRoot(o),this.pullParentRoot(o)}collapse(o=!0){let t=0;for(let e of this.$parentRoot){let n=this.$parentRootSlotName[t];o&&e.collapse(),this.appendParentRoot(e,n),t++}}uncollapse(o=!0){for(let t of this.$parentRoot)this.removeParentRoot(t),o&&t.uncollapse(o)}appendParentRoot(o,t){let e=this.$parentRoot.indexOf(o);this.memAppendParentRoot(o,t,e),this.domAppendParentRoot(o,t,e),this.postAppendParentRoot(o,t,e)}memAppendParentRoot(o,t,e){en(this.$mountParentRoot,o),io(this.$slot,t).memAppendParentChild(o,"default",e,e)}domAppendParentRoot(o,t,e){io(this.$slot,t).domAppendParentChildAt(o,"default",e,e)}postAppendParentRoot(o,t,e){io(this.$slot,t).postAppendParentChild(o,t,e)}memPushParentChild(o,t){en(this.$parentChildren,o),en(this.$parentChildrenSlot,t)}memPullParentChild(o,t){yn(this.$parentChildren,t),yn(this.$parentChildrenSlot,t)}memAppendParentChild(o,t,e,n){en(this.$mountParentChildren,o)}domAppendParentChildAt(o,t,e,n){if(this.$primitive)if(o.$primitive)this.domCommitAppendChild(o);else for(let i of o.$mountRoot)this.domAppendParentChildAt(i,t,e,e);else if(o.$primitive)this.$slotParent?this.$slotParent.domAppendParentChildAt(o,"default",this.$slotParent.$mountParentChildren.length,this.$slotParent.$mountParentChildren.length):this.domCommitAppendChild(o);else for(let i=0;i<o.$mountRoot.length;i++)this.domAppendParentChildAt(o.$mountRoot[i],t,e,e+i);no(o,"$slotParent",this)}postAppendParentChild(o,t,e){this.$mounted&&this.mountChild(o)}postInsertParentChildAt(o,t,e){this.$mounted&&this.mountChild(o)}insertParentChildAt(o,t,e){let n=this.$slot[t];this===n?(this.memInsertParentChildAt(o,t,e),this.domInsertParentChildAt(o,t,e),this.postInsertParentChildAt(o,t,e)):n.insertParentChildAt(o,"default",e)}memInsertParentChildAt(o,t,e){if(this.$mountRoot.indexOf(o)>-1)throw new Error("root is already mounted");Ue(this.$mountParentChildren,o,e)}domInsertParentChildAt(o,t,e){var n,i,s;if(no(o,"$slotParent",this),this.$primitive)if(o.$primitive)this.domCommitInsertChild(o,e);else{let a=0;for(let _ of o.$mountRoot)this.domInsertParentChildAt(_,"default",e+a),a++}else if(o.$primitive)if(this.$slotParent){let a=(s=this.$parent)!=null&&s.$root.includes(this)?this.$slotParent.$mountParentChildren.indexOf(this.$parent):this.$slotParent.$mountParentChildren.indexOf(this);this.$slotParent.domInsertParentChildAt(o,"default",a+e)}else this.domCommitInsertChild(o,e);else for(let a of o.$mountRoot)if(this.$slotParent){let _=(n=this.$parent)!=null&&n.$root.includes(this)?(i=this.$parent)==null?void 0:i.$root.indexOf(this):0;this.$slotParent.domInsertParentChildAt(o,"default",_+e)}else this.domCommitInsertChild(a,e)}removeParentChild(o,t="default",e){let n=this.$slot[t];if(n===this){let i=this.$parentChildren.indexOf(o);this.domRemoveParentChildAt(o,t,e,i),this.memRemoveParentChildAt(o,t,e,i)}else n.removeParentChild(o,"default",e)}memRemoveParentChildAt(o,t,e,n){let i=this.$mountParentChildren.indexOf(o);yn(this.$mountParentChildren,i)}domRemoveParentChildAt(o,t,e,n){if(this.$primitive)if(o.$primitive)this.domCommitRemoveChild(o);else for(let i of o.$mountRoot)this.domRemoveParentChildAt(i,t,e,e),Ms(o.$element,i.$element);else if(o.$primitive)this.$slotParent?this.$slotParent.domRemoveParentChildAt(o,"default",e,e):this.domCommitRemoveChild(o);else for(let i=0;i<o.$mountRoot.length;i++)this.$slotParent?this.$slotParent.domRemoveParentChildAt(o.$mountRoot[i],t,e,e):this.domCommitRemoveChild(o),Ms(o.$element,o.$mountRoot[i].$element);no(o,"$slotParent",null)}domCommitRemoveChild(o){v7(this.$element,o.$element)}insertParentRootAt(o,t,e){this.memInsertParentRootAt(o,t,e),this.domInsertParentRootAt(o,t,e),this.postInsertParentRootAt(o,t,e)}memInsertParentRootAt(o,t,e){Ue(this.$mountParentRoot,o,t),io(this.$slot,e).memInsertParentChildAt(o,e,t)}domInsertParentRootAt(o,t,e){io(this.$slot,e).domInsertParentChildAt(o,e,t)}postInsertParentRootAt(o,t,e){io(this.$slot,e).postInsertParentChildAt(o,e,t)}prependParentRoot(o,t){this.insertParentRootAt(o,0,t)}removeParentRoot(o){let t=this.$parentRoot.indexOf(o),e=this.$mountParentRoot.indexOf(o),n=this.$parentRootSlotName[t];this.postRemoveParentRootAt(o,n,t,e),this.domRemoveParentRootAt(o,n,t,e),this.memRemoveParentRootAt(o,n,t,e)}memRemoveParentRootAt(o,t,e,n){vn(this.$mountParentRoot,o),this.$slot[t].memRemoveParentChildAt(o,"default",e,n)}domRemoveParentRootAt(o,t,e,n){this.$slot[t].domRemoveParentChildAt(o,"default",e,n)}postRemoveParentRootAt(o,t,e,n){this.$mounted&&o.unmount()}getSubComponent(o){return this.$subComponent[o]}setSubComponent(o,t){no(t,"$parent",this),this.$subComponent[o]=t}setSubComponents(o){Ke(o,this.setSubComponent.bind(this))}removeSubComponent(o){let t=this.$subComponent[o];return no(t,"$parent",null),delete this.$subComponent[o],t}getSubComponentParentId(o){let t=this.getSubComponent(o);for(let e in this.$subComponent)if(this.$subComponent[e].$parentRoot.includes(t))return e;return null}getSlotSubComponentId(o){return this.$slotId[o]}getSubComponentId(o){for(let t in this.$subComponent){let e=this.$subComponent[t];if(o===e)return t}return null}getParentRootSlotId(o){let t=this.$parentRoot.indexOf(o);return t>-1?this.$parentRootSlotName[t]:null}getSlotPath(o){let t=this.getSlotSubComponentId(o);if(t){let e=this.getSubComponent(t),n=this.$slotTarget[o],i=e.getSlotPath(n);return[t,...i]}else return[]}getPath(){let o=[],t=this,e=this.$parent;for(;e;){let n=e.getSubComponentId(t);o.unshift(n),t=e,e=e.$parent}return o}_call(o,t=[]){if(this[o])this[o](...t);else throw"method not implemented"}destroy(){this.onDestroy()}};var W=class extends Cn{onConnected(t){let e=(_,{globalId:c})=>{let p=t.$refGlobalObj({globalId:c});this.setProp(_,p)},n=_=>{this.setProp(_,void 0)},i={unit:_=>{let{specs:c,classes:p}=this.$system,{event:u,data:d}=_;if(u==="set"){let{name:m,data:h}=d;if(h!==void 0){let f=Zt(h,c,p,b=>{let g=b.slice(7);return this.$unit.$refGlobalObj({globalId:g})});this.setProp(m,f)}else this.setProp(m,void 0)}}},s=_=>{let{type:c}=_;i[c]&&i[c](_)},a=this.$unit.$watch({events:["set","call"]},s);this._element_unlisten=a,t.$read({},_=>{let{specs:c,classes:p}=this.$system,u=Zt(_,c,p,d=>{if(d.startsWith("unit://")){let m=d.slice(7);return t.$refGlobalObj({globalId:m})}else throw new Error("resolver not implemented")});for(let d in u){let m=u[d];this.setProp(d,m)}})}onDisconnected(){this._element_unlisten()}set(t,e){if(this.$connected){let n=Ot(e);this.$unit.$set({name:t,data:n},zt)}}};l();l();function Zo(r){return r.endsWith("vw")||r.endsWith("vh")}l();function aS(r){return r.endsWith("%")}function Ml(r,o,t){if(typeof r=="number")return r;if(aS(r)){let e=r.substring(0,r.length-1),n=Number.parseFloat(e),i=o();return n/100*i}else if(Zo(r)){let e=r.substring(0,r.length-2),n=Number.parseFloat(e),i=t();return n/100*i}else return Number.parseFloat(r)}l();l();var _S={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function pS(r){return _S[r]}function _a(r){return _S[r]}function d0(r){return/^#[a-fA-F0-9]+$/g.test(r)}function cS(r,o,t){return"#"+(16777216+r*65536+o*256+t).toString(16).slice(1)}function O2(r){r=r%360;let o,t,e;return r>=0&&r<60?(o=255,t=Math.floor((r-0)/60*255),e=0):r>=60&&r<120?(o=Math.floor((120-r)/60*255),t=255,e=0):r>=120&&r<180?(o=0,t=Math.floor((r-120)/60*255),e=255):r>=180&&r<240?(o=0,t=255,e=Math.floor((240-r)/60*255)):r>=240&&r<300?(o=0,t=255,e=Math.floor((r-240)/60*255)):(o=255,t=0,e=Math.round((360-r)/60*255)),cS(o,t,e)}function zC(r,o,t){r=r/360,o=o/100,t=t/100;let e,n,i,s=Math.floor(r*6),a=r*6-s,_=t*(1-o),c=t*(1-a*o),p=t*(1-(1-a)*o);switch(s%6){case 0:e=t,n=p,i=_;break;case 1:e=c,n=t,i=_;break;case 2:e=_,n=t,i=p;break;case 3:e=_,n=c,i=t;break;case 4:e=p,n=_,i=t;break;case 5:e=t,n=_,i=c;break;default:e=0,n=0,i=0;break}return[e*255,n*255,i*255].map(Math.round)}function uS(r,o,t){let[e,n,i]=zC(r,o,t);return cS(e,n,i)}function Qo(r,o){let t=Math.floor(o*16*16),e=Math.floor(t/16),n=Math.floor(t%16),i=e.toString(16),s=n.toString(16),a=i+s;return r.substring(0,7)+a}var FC=255,BC=0;function $2(r,o){let t=parseInt(r.slice(1),16),e=t>>16,n=t>>8&255,i=t&255,s=o>0?FC:BC,a=s-e,_=s-n,c=s-i,p=Math.abs(o)/100,u=p*a,d=p*_,m=p*c,h=Math.round(e+u),f=Math.round(n+d),b=Math.round(i+m);return"#"+(16777216+(h<255?h<0?0:h:255)*65536+(f<255?f<0?0:f:255)*256+(b<255?b<0?0:b:255)).toString(16).slice(1)}function dS(r,o){return $2(r,-o)}var HC="#FCFCFC";var jC="#080808",Ol="#ff6666",lS="#ff4d4d",Rs="#ff0000",l0="#00aa11",VC="#0b8e14";var KC="#007700",WC="#085a01";var mS="#0066ff",hS="#1d62c9",qC="#dfff00",YC="#cddd00",XC="#d84315",JC="#bf360c",fS="#ffffff",gS="#ffcc00",bS="#ffbb00",yS="#ef6c00",vS="#e65100",Lt="#00000000";var ZC={change:mS,remove:Ol,add:l0,data:qC},QC={change:mS,remove:Ol,add:KC,data:XC},tT={add:VC,remove:lS,change:hS,data:YC},eT={add:WC,remove:lS,change:hS,data:JC};var Ze=(r,o,t)=>r==="dark"?ZC[o]||t:QC[o]||t,ts=(r,o)=>r==="dark"?tT[o]:eT[o],xo=r=>r==="dark"?"#1f1f1f":"#d1d1d1";function Xn(r,o,t){return r==="dark"?dS(o,t):$2(o,t)}function pa(r){return r==="dark"?HC:jC}l();l();function xS(r){let o=0;for(o=0;r=r.previousSibling;o++);return o}function IS(r,o){let t=r.parentElement;if(t){let e=xS(r);t.insertBefore(o,t.children[e]),t.removeChild(r)}}l();var ne=r=>({userSelect:r,webkitUserSelect:r,mozUserSelect:r});function nT(r,o){let t=o[0],e=o.slice(1,o.length);if(t==="fillStyle")r.fillStyle=e[0];else if(t==="strokeStyle")r.strokeStyle=e[0];else if(t==="fillPath"){let[n,i]=e;r.fill(new Path2D(n),i)}else if(t==="strokePath"){let[n]=e;r.stroke(new Path2D(n))}else r[t](...e)}function SS(r){let o=r.getTransform();r.setTransform(1,0,0,1,0,0);let t=r.canvas.width,e=r.canvas.height;r.clearRect(0,0,t,e),r.setTransform(o),r.beginPath()}var m0=S({background:"none",touchAction:"none",display:"block",imageResizing:"pixelated","-webkit-touch-callout":"none"},ne("none")),Ns=class extends W{constructor(t,e){super(t,e);this._d=[];this._reset=()=>{let{className:t,style:e}=this.$props,n=this._canvas_el,i=this._create_canvas();t!==void 0&&(i.className=t),vt(this._canvas_el,S(S({},m0),e)),i.draggable=!1,this._canvas_el=i;let s=i.getContext("2d",{willReadFrequently:!0});this._context=s,this._context,n&&IS(n,i)};this._get_parent_width=()=>0;this._get_parent_height=()=>0;this._get_frame_width=()=>0;this._get_frame_height=()=>0;this._create_canvas=()=>{let{style:t,width:e=200,height:n=200}=this.$props,i=this.$system.api.document.createElement("canvas");return i.classList.add("canvas"),i.width=Ml(e,this._get_parent_width,this._get_frame_height),i.height=Ml(n,this._get_parent_height,this._get_frame_height),vt(i,S(S({},m0),t)),this._canvas_el=i,i};this._setup=()=>{this._setup_context()};this._setup_redraw=()=>{this._setup_context(),this._redraw()};this._set_width=t=>{this._canvas_el.setAttribute("width",`${t-1}`),this._setup_redraw()};this._set_height=t=>{this._canvas_el.setAttribute("height",`${t-1}`),this._setup_redraw()};this._get_fill_style=()=>{var i,s,a;let{$theme:t}=(i=this.$context)!=null?i:{$color:fS,$theme:"dark"},e=S(S({},m0),this.$props.style);return(a=(s=e.strokeStyle)!=null?s:e.color)!=null?a:pa(t)};this._redraw=()=>{this._draw_steps(this._d)};this._setup_canvas=()=>{let{api:{screen:{devicePixelRatio:t}}}=this.$system,{width:e=200,height:n=200}=this.$props;this._context.setTransform(1,0,0,1,0,0);let i=t||1,s=Ml(e,this._get_parent_width,this._get_frame_height),a=Ml(n,this._get_parent_height,this._get_frame_height);this._canvas_el.width=s*i,this._canvas_el.height=a*i,this._context.scale(1/i,1/i)};this._setup_context=()=>{let{sx:t=1,sy:e=1}=this.$props,n=this._get_fill_style(),i=this._canvas_el.getContext("2d");this._context=i,this._context.strokeStyle=n,this._context.fillStyle=n,this._context.lineJoin="round",this._context.lineWidth=3,this._context.scale(t,e)};let{}=t;this._reset(),this._setup(),this.$element=this._canvas_el}onPropChanged(t,e){if(t==="style"){let n=S(S({},m0),e),i=this._get_fill_style().toLowerCase();vt(this._canvas_el,n),(this._context.fillStyle!==i||this._context.strokeStyle!==i)&&(this._context.fillStyle=i,this._context.strokeStyle=i,SS(this._context),this._redraw())}else if(t==="width")this._unlisten_frame_width(),typeof e=="string"?this._width_frame_unlisten=aa(e,this,this._set_width):this._set_width(e);else if(t==="height")this._unlisten_frame_height(),typeof e=="string"?this._height_frame_unlisten=aa(e,this,this._set_height):this._set_height(e);else if(t==="d")this.clear(),this._d=e,this._draw_steps(e||[]);else if(t==="lineWidth")this._context.lineWidth=e;else if(t==="sx"){let{a:n,b:i,c:s,d:a,e:_,f:c}=this._context.getTransform();this._context.setTransform(e!=null?e:1,i,s,a,_,c)}else if(t==="sy"){let{a:n,b:i,c:s,d:a,e:_,f:c}=this._context.getTransform();this._context.setTransform(n,i,s,e!=null?e:1,_,c)}}_unlisten_frame_width(){this._width_frame_unlisten&&(this._width_frame_unlisten(),this._width_frame_unlisten=void 0)}_unlisten_frame_height(){this._height_frame_unlisten&&(this._height_frame_unlisten(),this._height_frame_unlisten=void 0)}_draw(t){nT(this._context,t)}_draw_steps(t){for(let e of t)this._draw(e)}onMount(){this._setup()}draw(t){this._d.push(t),this._draw(t)}clear(t){SS(this._context),this._d=[]}drawImage(t,e,n,i,s){t instanceof ImageBitmap?this._context.drawImage(t,0,0,t.width,t.height,e,n,i,s):t instanceof HTMLVideoElement&&this._context.drawImage(t,e,n,i,s)}strokePath(t){this._d.push(["strokePath",t]),this._strokePath(t)}_strokePath(t){this._context.stroke(new Path2D(t))}fillPath(t,e){this._d.push(["fillPath",t,e]),this._fillPath(t,e)}_fillPath(t,e){this._context.fill(new Path2D(t),e)}translate(t,e){this._context.translate(t,e)}scale(t,e){this._context.scale(t,e)}toBlob({type:t,quality:e},n=zt){this._canvas_el.toBlob(n,t,e)}captureStream(e){return G(this,arguments,function*({frameRate:t}){if(this._canvas_el.captureStream)return this._canvas_el.captureStream(t);throw new Mt("Capture Stream")})}putImageData(t,e,n,i,s,a,_){this._context.putImageData(t,e,n,i,s,a,_)}};var $l=class extends Z{constructor(t){super({i:["style","width","height","d"],o:[]},{output:{ctx:{ref:!0}}},t,E5);this.__=["U","C","V","J","CA","EE"];this._state={d:[]},this._component=new Ns({},this.__system),this._offscreen=new OffscreenCanvas(1e3,1e3),this._offscreen_ctx=this._offscreen.getContext("2d",{willReadFrequently:!0})}clear(){return G(this,null,function*(){this._component.clear(),this.emit("call",{method:"clear",data:void 0})})}drawImage(t,e,n,i,s){return G(this,null,function*(){this._offscreen_ctx.drawImage(t,e,n,i,s),this.emit("call",{method:"drawImage",data:[t,e,n,i,s]})})}strokePath(t){this._component.strokePath(t),this.emit("call",{method:"strokePath",data:[t]})}fillPath(t,e){this._component.fillPath(t,e),this.emit("call",{method:"fillPath",data:[t,e]})}scale(t,e){this._component.scale(t,e),this.emit("call",{method:"scale",data:[t,e]})}translate(t,e){this._component.translate(t,e),this.emit("call",{method:"translate",data:[t,e]})}draw(t){return G(this,null,function*(){this._state.d.push(t),this._backwarding=!0,this._input.d.pull(),this._backwarding=!1,this._component.draw(t),this.emit("call",{method:"draw",data:[t]})})}toBlob(t,e){return G(this,null,function*(){return new Promise((n,i)=>{this._component.toBlob({type:t,quality:e},s=>{s?n(s):i("cannot convert canvas to blob")})})})}captureStream(e){return G(this,arguments,function*({frameRate:t}){return this._component.$element.captureStream(t)})}getImageData(t,e,n,i){return this._offscreen_ctx.getImageData(t,e,n,i)}putImageData(t,e,n,i,s,a,_){this.emit("call",{method:"putImageData",data:[t,e,n,i,s,a,_]})}onDataInputData(t,e){switch(super.onDataInputData(t,e),t){case"width":try{this._offscreen.width=e}catch(n){}break;case"height":try{this._offscreen.height=e}catch(n){}break}}};l();var Ll=class extends Z{constructor(o){super({i:["style"],o:[]},{output:{parent:{ref:!0}}},o,w5)}};l();var Ul=class extends Z{constructor(o){super({i:["style","value"],o:[]},{},o,fb)}};l();var Gl=class extends Z{constructor(o){super({i:["style","attr"],o:[]},{},o,P5)}};l();l();l();function DS(r,o){return new class extends ht{constructor(){super(...arguments);this.__=["V"]}read(){return r}write(n){throw new Error("read only")}}(o)}function ES(r,o){return new class extends ht{constructor(){super(...arguments);this.__=["W"]}window(){return r}send(n){return G(this,null,function*(){r.postMessage(n,"*")})}postMessage(n,i){r.postMessage(n,i)}addListener(n,i){let s=a=>{if(a.source===r){let _=DS(a.data,o);i(_)}};return r.addEventListener(n,s),()=>{r.removeEventListener(n,s)}}}(o)}var Rl=class extends qt{constructor(t){super({i:["src","srcdoc"],o:["window"]},{},t,k5);this.__=["U"];this._iframe_el=this.__system.api.document.createElement("iframe"),this._iframe_el.addEventListener("load",()=>{let e=ES(this._iframe_el.contentWindow,this.__system);this._output.window.push(e)}),this.__system.foreground.void&&this.__system.foreground.void.appendChild(this._iframe_el)}send(t){this._iframe_el.contentWindow.postMessage(t,"*")}onDataInputData(t,e){super.onDataInputData(t,e),t==="src"?this._iframe_el.src=e:t==="srcdoc"&&(this._iframe_el.srcdoc=e)}};l();var Nl=class extends Z{constructor(o){super({i:["style"],o:["board"]},{},o,C5)}};l();var zl=class extends Z{constructor(o){super({i:["style","attr"],o:[]},{},o,T5)}};l();var Fl=class extends Z{constructor(o){super({i:["style","attr"],o:[]},{},o,A5)}};l();var Bl=class extends Z{constructor(o){super({i:["style","attr"],o:[]},{},o,M5)}};l();var Hl=class extends Z{constructor(o){super({i:["style","icon"],o:[]},{},o,O5)}};l();var jl=class extends Z{constructor(t){super({i:["src","srcdoc","style","attr"],o:[]},{},t,$5);this.__=["U","C","CH"];this._state={}}send(t){this.emit("call",{method:"send",data:[t]})}};l();var Vl=class extends Z{constructor(o){super({i:["style"],o:[]},{output:{parent:{ref:!0}}},o,L5)}};l();var Kl=class extends Z{constructor(o){super({i:["style","attr"],o:[]},{},o,U5)}};l();var Wl=class extends Z{constructor(o){super({i:["src","stream","style","controls"],o:[]},{input:{stream:{ref:!0}}},o,G5)}};l();var ql=class extends Z{constructor(o){super({i:["src","style"],o:[]},{},o,R5)}};l();var Yl=class extends A{constructor(o){super({i:["media","any"],o:[]},{input:{media:{ref:!0}}},o,N5)}f({media:o},t){o.mediaPause(),t()}};l();var Xl=class extends A{constructor(o){super({i:["media","any"],o:[]},{input:{media:{ref:!0}}},o,z5)}f({media:o},t){o.mediaPlay(),t()}};l();var Jl=class extends Z{constructor(o){super({i:["src","stream","style","controls","currentTime"],o:[]},{input:{stream:{ref:!0}}},o,F5),this._defaultState={}}captureStream(t){return G(this,arguments,function*({frameRate:o}){let n=this.__system.getLocalComponents(this.__global_id)[0];return n?n.$element.captureStream({frameRate:o}):new Promise(i=>{this.__system.emitter.addListener(this.__global_id,s=>{i(s.$element.captureStream({frameRate:o}))})})})}image(){return G(this,null,function*(){let{getLocalComponents:o}=this.__system,t=o(this.__global_id);return t.length===0?null:t[0].$element})}requestPictureInPicture(o){}mediaPlay(){this.emit("call",{method:"play",data:[]})}mediaPause(){this.emit("call",{method:"pause",data:[]})}};l();var Zl=class extends Z{constructor(o){super({i:["style","attr"],o:[]},{},o,B5)}};l();var zs=class extends Z{constructor(o){super({i:[],o:[]},{},o,gb)}};l();var Ql=class extends Z{constructor(o){super({i:["style","component"],o:[]},{input:{component:{ref:!0}}},o,H5)}};l();var tm=class extends Z{constructor(o){super({i:["style"],o:[]},{},o,j5)}};l();var em=class extends Z{constructor(o){super({i:["value","attr"],o:[]},{},o,V5)}};l();var nm=class extends Z{constructor(o){super({i:["style","x","y","r"],o:[]},{},o,K5)}};l();var im=class extends Z{constructor(o){super({i:["style"],o:[]},{},o,W5)}};l();var om=class extends Z{constructor(o){super({i:["style"],o:[]},{},o,q5)}};l();var sm=class extends Z{constructor(o){super({i:["style"],o:[]},{},o,Y5)}};l();var rm=class extends Z{constructor(o){super({i:["style","x1","x2","y1","y2"],o:[]},{},o,X5)}};l();var am=class extends Z{constructor(o){super({i:["style","className"],o:[]},{},o,J5)}};l();var _m=class extends Z{constructor(o){super({i:["style","d","fillRule"],o:[]},{},o,Z5),this._defaultState={d:""}}};l();var pm=class extends Z{constructor(o){super({i:["style","x","y","width","height"],o:[]},{},o,Q5)}};l();var cm=class extends Z{constructor(o){super({i:["style","viewBox"],o:[]},{},o,t6),this._defaultState={}}};l();var um=class extends Z{constructor(o){super({i:["value","style","x","y","dx","dy"],o:[]},{},o,e6)}};l();var dm=class extends Z{constructor(o){super({i:["value","style"],o:[]},{},o,n6)}};l();var lm=class extends Z{constructor(o){super({i:["href","style"],o:[]},{},o,i6)}};l();l();var Qe=class extends Z{constructor({i:o=[],o:t=[]},e,n,i){super({i:o,o:t},e,n,i),this.addListener("play",()=>{this._output.value.push(this.initialValue())})}initialValue(){var o,t,e;return(e=(t=(o=this._input)==null?void 0:o.value)==null?void 0:t.peak())!=null?e:this._defaultState.value}onDataInputData(o,t){super.onDataInputData(o,t),o==="value"&&this._output.value.push(t)}};var mm=class extends Qe{constructor(o){super({i:["style","attr","value"],o:["value"]},{},o,o6),this._defaultState={value:!1}}};l();var hm=class extends Qe{constructor(o){super({i:["value"],o:["value"]},{},o,s6),this._defaultState={value:"#000000"}}};l();var fm=class extends Qe{constructor(o){super({i:["value","style","maxLength"],o:["value"]},{},o,r6),this._defaultState={value:""}}};l();var gm=class extends Z{constructor(o){super({i:["style","opt"],o:["files"]},{},o,a6),this._defaultState={value:""}}};l();var bm=class extends Qe{constructor(o){super({i:["value","style","min","max"],o:["value"]},{},o,_6),this._defaultState={value:0}}};l();var ym=class extends Z{constructor(o){super({i:["value","style"],o:[]},{},o,p6),this._defaultState={value:""}}};l();var vm=class extends Qe{constructor(o){super({i:["style","value"],o:[]},{},o,c6),this._defaultState={value:""}}};l();var xm=class extends Qe{constructor(o){super({i:["value","style"],o:["value"]},{},o,u6),this._defaultState={value:""}}};l();var Im=class extends Qe{constructor(o){super({i:["value","style","min","max"],o:["value"]},{},o,d6),this._defaultState={value:0,min:0,max:100}}initialValue(){var n,i;let{value:o=0,min:t=0,max:e=100}=this._i;return(i=(n=this._input)==null?void 0:n.value)!=null&&i.peak()?o:t}};l();var Sm=class extends Z{constructor(o){super({i:["value"],o:[]},{},o,l6),this._defaultState={value:""}}};l();var Dm=class extends Qe{constructor(o){super({i:["value","style","placeholder"],o:["value"]},{},o,m6),this._defaultState={value:"",placeholder:""}}};l();var Em=class extends Qe{constructor(o){super({i:["value","style","maxLength"],o:["value"]},{},o,h6),this._defaultState={value:""}}};l();var wm=class extends Z{constructor(t){super({i:["component"],o:["parent"]},{output:{parent:{ref:!0}}},t,f6);this._Container=ti(zs,{unit:{id:gb}});this._child_container=[];this._parent_container=[];this._parent_child_container=[];this.prependListener("set",(e,n)=>{e==="component"&&(this._Container=n,this._rewrap())})}_rewrap(){for(let t=0;t<this._child_container.length;t++){this._child_container[t].destroy();let n=new this._Container(this.__system);n.play(),this._child_container[t]=n}for(let t=0;t<this._parent_container.length;t++){this._parent_container[t].destroy();let n=new this._Container(this.__system);n.play(),this._parent_container[t]=n}for(let t=0;t<this._parent_child_container.length;t++){this._parent_child_container[t].destroy();let n=new this._Container(this.__system);n.play(),this._parent_child_container[t]=n}}appendChild(t){let e=new this._Container(this.__system);return e.play(),this._child_container.push(e),super.appendChild(t)}removeChild(t){return this._child_container.splice(t,1),super.removeChild(t)}registerParentRoot(t,e){let n=new this._Container(this.__system);return n.play(),this._parent_container.push(n),super.registerParentRoot(t,e)}unregisterParentRoot(t){let e=this._parent_container.indexOf(t);return this._parent_container.splice(e,1),super.unregisterParentRoot(t)}appendParentChild(t,e){let n=new this._Container(this.__system);n.play(),this._parent_child_container.push(n),super.appendParentChild(n,e)}removeParentChild(t){let e=this._parent_children.indexOf(t);if(e>-1){let n=this._parent_child_container[e];super.removeParentChild(n)}else throw new Error("parent child not found")}refParentRootContainer(t){return this._parent_container[t]}refChildContainer(t){return this._child_container[t]}refParentChildContainer(t){return this._parent_child_container[t]}};l();var Pm=class extends Z{constructor(o){super({i:["style","zoom","width","height"],o:[]},{},o,g6),this._defaultState={zoom:{x:0,y:0,z:1}}}};l();l();var iT=()=>!!document.getElementById("__EXTENSION_INSTALLED"),L2={};function oT(r,o){if(rT(),iT()){let e=eo();L2[e]=o,window.postMessage({type:"EXTENSION_IN",id:e,data:r},location.origin)}else o(void 0,"extension not installed")}function sT(r,o){oT({type:"CALL",data:r},o)}function ca(r,o,t,e){sT({type:r,method:o,data:t},e)}var wS=!1;function rT(){wS||(window.addEventListener("message",r=>{if(r.source!==window)return;let{data:o}=r,{type:t,id:e,data:n}=o;if(t&&t==="EXTENSION_OUT"&&e){let i=L2[e];i&&(delete L2[e],i(n))}}),wS=!0)}var km=class extends A{constructor(o){super({i:["url"],o:[]},{},o,y6)}f({url:o},t){ca("history","deleteUrl",{url:o},(e,n)=>{t(void 0,n)})}};l();var Cm=class extends A{constructor(o){super({i:["url"],o:["visits"]},{},o,v6)}f({url:o},t){ca("history","getVisits",{url:o},(e,n)=>{t({visits:e},n)})}};l();var Tm=class extends A{constructor(o){super({i:["query"],o:["items"]},{},o,x6)}f({query:o},t){ca("history","search",o,(e,n)=>{t({items:e},n)})}};l();var Am=class extends cn{constructor(o){super({i:[],o:[]},{},o,I6)}};l();var Mm=class extends dt{constructor(t){super({fi:["parent","at"],fo:["child"],i:["done"]},{input:{parent:{ref:!0}},output:{child:{ref:!0}}},t,S6);this._plunk=()=>{this._unlisten&&(this._unlisten(),this._unlisten=void 0),this._forward_empty("child")}}f({parent:t,at:e},n){let i=t.refChild(e);if(!i){n(void 0,"no child at this position");return}let s=()=>{this._forward_empty("child"),this._functional.err("no child at this position")};t.addListener(`remove_child_at_${e}`,s),this._unlisten=()=>{t.removeListener(`remove_child_at_${e}`,s)},n({child:i})}d(){this._plunk()}onIterDataInputData(t){this._plunk(),this._backward("done")}};l();var Om=class extends dt{constructor(t){super({fi:["parent","at"],fo:["child"],i:["done"]},{input:{parent:{ref:!0}},output:{child:{ref:!0}}},t,D6);this._plunk=()=>{this._unlisten&&(this._unlisten(),this._unlisten=void 0),this._forward_empty("child")}}f({parent:t,at:e},n){let i=t.refChild(e);if(!i){this.err("no child at this position");return}let s=()=>{this._forward_empty("child"),this.err("no child at this position")};t.addListener(`remove_child_at_${e}`,s),this._unlisten=()=>{t.removeListener(`remove_child_at_${e}`,s)},n({child:i})}onIterDataInputData(t){this._plunk(),this._backward("done")}};l();var $m=class extends A{constructor(o){super({i:["a[]","a"],o:[]},{input:{arr:{ref:!0}}},o,nb)}f(n,i){return G(this,arguments,function*({"a[]":o,a:t},e){yield o.append(t),e({})})}};l();var Lm=class extends A{constructor(o){super({i:["a","i"],o:["a[i]"]},{input:{a:{ref:!0}}},o,E6)}f(n,i){return G(this,arguments,function*({a:o,i:t},e){let s;try{let a=yield o.length();if(t>=0&&t<a)s=yield o.at(t);else{e(void 0,"index out of boundary");return}}catch(a){e(void 0,a.message.toLowerCase());return}e({"a[i]":s})})}};l();var Um=class extends A{constructor(o){super({i:["a[]","a"],o:["i"]},{input:{"a[]":{ref:!0}}},o,sb)}f(n,i){return G(this,arguments,function*({"a[]":o,a:t},e){let s=yield o.indexOf(t);e({i:s})})}};l();var Gm=class extends A{constructor(o){super({i:["a","i","v"],o:[]},{input:{a:{ref:!0}}},o,w6)}f(i,s){return G(this,arguments,function*({a:o,i:t,v:e},n){try{yield o.put(t,e)}catch(a){n(void 0,a.message.toLowerCase());return}n()})}};l();var Rm=class extends A{constructor(o){super({i:["component","any"],o:[]},{input:{component:{ref:!0}}},o,P6)}f(n,i){return G(this,arguments,function*({component:o,any:t},e){o.emit("call",{method:"blur",data:void 0}),e()})}};l();var Nm=class extends A{constructor(o){super({i:["component","any"],o:[]},{input:{component:{ref:!0}}},o,k6)}f(n,i){return G(this,arguments,function*({component:o,any:t},e){o.emit("call",{method:"focus",data:void 0}),e()})}};l();var zm=class extends A{constructor(o){super({i:["obj","name"],o:[]},{input:{obj:{ref:!0}}},o,cb)}f(n,i){return G(this,arguments,function*({obj:o,name:t},e){try{yield o.delete(t),e()}catch(s){e(void 0,s.message)}})}};l();var Fm=class extends A{constructor(o){super({i:["obj","name"],o:["value"]},{input:{obj:{ref:!0}}},o,C6)}f(n,i){return G(this,arguments,function*({obj:o,name:t},e){let s;try{s=yield o.get(t)}catch(a){e(void 0,a.message);return}e({value:s})})}};l();var Bm=class extends A{constructor(o){super({i:["obj","key"],o:["has"]},{input:{obj:{ref:!0}}},o,T6)}f(n,i){return G(this,arguments,function*({obj:o,key:t},e){let s;try{s=yield o.hasKey(t)}catch(a){e(void 0,a.message);return}e({has:s})})}};l();var Hm=class extends A{constructor(o){super({i:["obj","any"],o:["keys"]},{input:{obj:{ref:!0}}},o,ub)}f(n,i){return G(this,arguments,function*({obj:o,any:t},e){let s;try{s=yield o.keys()}catch(a){e(void 0,a.message);return}e({keys:s})})}};l();var jm=class extends dt{constructor(t){super({fi:["obj","path","key"],fo:[],i:["done"],o:["type","path","key","data"]},{input:{obj:{ref:!0}}},t,A6);this._unlisten=void 0;this._remove=()=>{this._unlisten(),this._listener=void 0,this._unlisten=void 0}}f(s,a){return G(this,arguments,function*({obj:t,path:e,key:n},i){try{this._unlisten=t.subscribe(e,n,(_,c,p,u)=>{this._output.type.push(_),this._output.key.push(p),this._output.path.push(c),this._output.data.push(u)})}catch(_){i(void 0,_.message);return}})}d(){this._remove(),this._forward_all_empty()}onIterDataInputData(t,e){t==="done"&&this._listener&&(this._remove(),this._done())}};l();var Vm=class extends A{constructor(o){super({i:["obj","name","data"],o:["data"]},{input:{obj:{ref:!0}}},o,M6)}f(i,s){return G(this,arguments,function*({obj:o,name:t,data:e},n){try{yield o.set(t,e)}catch(a){n(void 0,a.message);return}n({data:e})})}};l();var Km=class extends A{constructor(o){super({i:["bundle"],o:["graph"]},{output:{}},o,O6)}f({bundle:o},t){let e;try{e=Fi(o,this.__system.specs,{})}catch(n){t(void 0,n.message);return}t({graph:e})}};l();l();function PS(r,o){o.id||r.newSpec(o);let t=Ui(o,r.specs,{}),e=new t(r);return r.graphs.push(e),e.play(),e}var Wm=class extends A{constructor(o){super({i:["graph"],o:["graph"]},{output:{graph:{ref:!0}}},o,$6)}f({graph:o},t){let{unit:e,specs:n={}}=o.__bundle;this.__system.injectSpecs(n);let i=this.__system.getSpec(e.id),s=PS(this.__system,i);t({graph:s})}};l();l();function aT(r,o){let t=r.boot({});return[U2(t,o),()=>{kS(r)}]}function U2(r,o){return new class extends ht{fromBundle(e){return Fi(e,o.specs)}newGraph(e){return r.newGraph(e)}newSystem(e){return aT(r,o)}}(o)}var qm=class extends dt{constructor(o){super({fi:["init"],fo:["system"],i:["done"],o:[]},{output:{system:{ref:!0}}},o,L6)}f({init:o},t){let{path:e}=o,n=this.__system.boot({path:e}),i=U2(n,this.__system),s=kn(i,["S"]);t({system:s})}};l();l();l();function CS(r){let o,t;do o=eo(),t=`${r}/${o}`;while(localStorage.getItem(t)!==null);return[o,t]}var TS="__BROADCAST__SOURCE__",AS="__BROADCAST__TARGET__";function h0(r){return`${TS}/${r}`}function G2(r){return`${AS}/${r}`}function MS(r){let o=h0(r);return localStorage.getItem(o)!==null}function OS(r){let[o,t]=CS(r);return localStorage.setItem(t,""),{channel:new BroadcastChannel(t),id:o}}function _T(){return OS(TS)}function $S(){return OS(AS)}function LS(r){let o=h0(r);localStorage.removeItem(o)}function US(r){let o=G2(r);localStorage.removeItem(o)}function GS(r){let{channel:o,id:t}=_T(),e={};return o.addEventListener("message",i=>{let{data:s}=i,{type:a,data:_}=s;switch(a){case Lg:{let c=_,p=new BroadcastChannel(c),u=Kb(r,["U","C","G"],d=>{p.postMessage({type:si,data:d})});p.addEventListener("message",d=>{let{data:m}=d;u.exec(m)}),e[t]={bc:p,ref:u}}break;case Ug:{let c=_;delete e[c]}break;default:throw new Error("invalid message type")}}),{id:t,terminate:()=>{for(let i in e){let s=e[i],{bc:a}=s;a.postMessage({type:Lo,data:{}}),a.close()}o.close()}}}var Ym=class extends A{constructor(t){super({i:["id"],o:["graph"]},{output:{graph:{ref:!0}}},t,U6);this.__=["U"];this._connected=!1;this._close=()=>{this._connected&&(this._remote_port.close(),this._target_channel.close(),US(this._id),this._id=void 0,this._target_channel=void 0)}}f({id:t},e){if(!MS(t)){this.err("cannot find local graph");return}this._connected=!0;let{id:n,channel:i}=$S();this._id=n,this._target_channel=i;let s=G2(n),a=h0(t),_=new BroadcastChannel(a);this._source_channel=_,_.postMessage({type:Lg,data:s});let c={send:m=>{i.postMessage(m)},onmessage(m){},onerror(){},terminate(){}};i.onmessage=m=>{let{data:h}=m,{type:f,data:b}=h;switch(f){case si:c.onmessage({data:b});break;case Lo:this._close();break}};let p=new Ki(c);this._remote_port=p;let u=$b(p),d=_i(this.__system,u,["U","C","G"]);e({graph:d})}d(){this._connected&&this._source_channel.postMessage({type:Ug,data:this._id}),this._close()}};l();var Xm=class extends dt{constructor(t){super({fi:["opt","graph"],fo:["id"],i:["done"],o:[]},{input:{graph:{ref:!0}}},t,G6);this.__=["U"];this._connected=!1;this._disconnect=()=>{this._connected&&(LS(this._id),this._terminate(),this._connected=!1)};this.addListener("destroy",()=>{this._connected&&this._disconnect()})}f({opt:t,graph:e},n){let{id:i,terminate:s}=GS(e);this._id=i,this._connected=!0,this._terminate=s,n({id:i})}d(){this._disconnect(),this._id=void 0}onIterDataInputData(t,e){this._disconnect(),this._forward_empty("id"),this._backward("done")}};l();var Jm=class extends dt{constructor(o){super({fi:["graph","system","opt"],fo:["graph"],i:["done"],o:[]},{input:{system:{ref:!0}},output:{graph:{ref:!0}}},o,R6)}f({graph:o,system:t,opt:e},n){var m;let{paused:i}=e||{},{__bundle:s}=o,a=s.unit.id,_=(m=this.__system.getSpec(a))!=null?m:s.specs[a],c=hi(_,Wt(s.specs,this.__system.specs)),p=["G","C","U"],u=t.$newGraph({bundle:c,_:p}),d=_i(this.__system,u,p);i||d.$play({}),i||d.$play({}),n({graph:d})}onIterDataInputData(o,t){this._forward_empty("graph")}};l();l();var RS=r=>{let o={send(t){r.postMessage(t)},onmessage(t){},onerror(t){},terminate(){r.terminate()}};return r.onerror=t=>{let{message:e}=t;o.onerror({message:e})},r.onmessage=t=>{let{data:e}=t;o.onmessage({data:e})},o};l();var f0=class{constructor(o){this._init_data=o=>({type:$o,data:o});this._exec_data=o=>({type:si,data:o});this._port=o;let t={send:e=>{let n=this._exec_data(e);this._port.send(n)},onmessage(e){},onerror(){},terminate(){}};this._port.onmessage=e=>{t.onmessage(e)},this._remote_port=new Ki(t)}init(o){let t=this._init_data(o);this._port.send(t)}terminate(){this._port.terminate()}port(){return this._remote_port}invalidate(){this._remote_port.close()}};var Zm=class extends A{constructor(t){super({i:["init"],o:["system"]},{output:{system:{ref:!0}}},t,N6);this.addListener("destroy",()=>{this._client&&(this._client.terminate(),this._client=void 0)})}f({init:t},e){let{specs:n,api:{worker:{start:i}}}=this.__system;if(!this._client){let c;try{c=i()}catch(d){e(void 0,d.message);return}let p=RS(c),u=new f0(p);this._client=u}this._client.init({});let s=this._client.port(),a=gy(s),_=_i(this.__system,a);e({system:_})}i(){this._client.invalidate()}};l();var Qm=class extends A{constructor(o){super({i:["value","any"],o:["data"]},{input:{value:{ref:!0}}},o,z6)}f(n,i){return G(this,arguments,function*({value:o,any:t},e){let s;try{s=yield o.read()}catch(a){e(void 0,a.message);return}e({data:s})})}};l();var th=class extends A{constructor(o){super({i:["value","data"],o:["data"]},{input:{value:{ref:!0}}},o,F6)}f(n,i){return G(this,arguments,function*({value:o,data:t},e){try{yield o.write(t),e({data:t})}catch(s){e(void 0,s.message)}})}};l();var eh=class extends dt{constructor(o){super({fi:["unit","name"],fo:["pin"],i:["done"]},{input:{unit:{ref:!0}},output:{pin:{ref:!0}}},o,B6)}f(n,i){return G(this,arguments,function*({unit:o,name:t},e){try{let s=o.getInput(t),a=new class extends ht{read(){return G(this,null,function*(){return s.read()})}write(c){return G(this,null,function*(){s.write(c)})}}(this.__system);e({pin:a})}catch(s){e(void 0,s.message)}})}onIterDataInputData(o){this._backward("name"),this._backward("done")}};l();var nh=class extends dt{constructor(o){super({fi:["unit","name"],fo:["pin"],i:["done"]},{input:{unit:{ref:!0}},output:{pin:{ref:!0}}},o,H6)}f(n,i){return G(this,arguments,function*({unit:o,name:t},e){try{let s=o.getOutput(t),a=new class extends ht{read(){return G(this,null,function*(){return s.read()})}write(c){return G(this,null,function*(){return s.write(c)})}}(this.__system);e({pin:a})}catch(s){e(void 0,s.message)}})}onIterDataInputData(o){this._backward("name"),this._backward("done")}};l();l();function NS(r,o){return{read(){return G(this,null,function*(){return r.current})},write(e){return G(this,null,function*(){e.current=e})}}}function pT(r){return typeof r=="object"?r===null?null:r instanceof Array?"A":"J":null}var ih=class extends dt{constructor(o){super({fi:["init"],fo:["data"],i:["done"],o:[]},{output:{data:{ref:!0}}},o,j6)}f({init:o},t){let e={current:o},n=NS(e,this.__system),i=pT(o);if(i)switch(i){case"A":n=Wt(n,Z6(e,this.__system));break;case"J":n=Wt(n,xb(e,this.__system));break}let s=_i(this.__system,n,i?["V",i]:["V"]);t({data:s})}onIterDataInputData(o,t){this._backward("init"),this._backward("done")}};l();var oh=class extends dt{constructor(o){super({fi:["length"],fo:["array"],i:["done"],o:[]},{output:{array:{ref:!0}}},o,V6)}f({length:o},t){let e=new Uint8ClampedArray(o),n=zo(e,this.__system);t({array:n})}onIterDataInputData(o,t){o==="done"&&(this._forward_all_empty(),this._backward("length"),this._backward("done"))}};var zS={"6fe452f2-2ec1-4ee2-887d-751c3697e6bf":c_,"158d85eb-28b8-4355-b637-28a7ec751233":u_,"872be100-f4dc-4246-8eea-6e3da31137b7":d_,"c5c05c85-f4c1-4b67-ab85-08b61fe67531":l_,"fa94b179-00e3-4ed1-814e-7938324a833f":m_,"fa7721eb-1dd6-482e-8c7a-6da35b5f88bc":h_,"79f01345-4ed7-47e2-8882-fa3bd282c98a":f_,"e9831075-2e62-43a4-84af-0653f7e707a9":g_,"f57f5318-f26f-4b9f-b9e2-dcc022ad7728":b_,"609ec474-cd6b-4646-b9b9-5ef4bbb378a7":y_,"9741cb34-bc83-4ebb-a854-edbe9eb3468f":v_,"32b27ad8-51d9-4767-8b9a-09da5a34f39d":x_,"7014b684-ce58-4b6a-989d-bd6c047daab5":I_,"104777ec-afb9-4513-9974-53b5528f0d15":S_,"46d98b47-0fa4-409e-bbc6-bb3165d863d8":D_,"81006022-e4d0-11ea-902a-fbf9fc5c9246":E_,"d9cf4224-39df-434a-85a6-2b143330cbab":w_,"22622778-d64f-47e7-8ceb-d175edcc6562":P_,"f69e88e3-b2c2-481b-b036-a5c0ed7ccccb":k_,"c6bf897a-4970-4284-bea2-b4a86186f828":C_,"d4572f1c-83d3-4a3d-be76-fa16578286d2":O_,"be6801c0-02e2-4f76-bcad-b68c80991fad":$_,"62d0c3e2-cf8b-4415-acfb-cf31739adce5":L_,"0d656c2e-eb10-45f0-b236-f8916492ca86":U_,"3d59edf2-5fca-4475-9df0-d876e14f990d":G_,"85204bf6-6692-4686-a785-23127c0594b5":R_,"1651ce6b-4db0-4787-9edf-f770b72d253c":N_,"c9e06816-0d2b-43ec-b7c8-d07563e19b6b":z_,"82c3cf2a-0855-4c6d-a4c4-807b0ce1fd35":F_,"e13f3090-62a6-4a3b-8401-c571cbf03526":B_,"bda175a9-a9d2-4282-9b50-1b008ae8a807":H_,"ff976ac8-c54f-4d37-8c7d-089c271cb433":j_,"329920ae-7e91-11ea-988e-1b12488c8b89":V_,"260d774e-bc89-4027-aa92-cb1985fb312b":K_,"06bc3983-44b0-43d6-b041-2e9218ea89c8":W_,"8a2b756a-25e4-11eb-860d-1f34c850b992":q_,"3432494e-fab6-4e9d-a846-0c48a7c429cd":Y_,"49e11645-c25d-4bf7-923d-56817f67b686":X_,"36329d25-218d-48a5-a06c-1e0525da504f":J_,"99657eb7-fb94-474e-b03d-4b08c537c0a2":Z_,"6d4b8791-95f8-4979-8290-ade2adf4f192":Q_,"9d853ef5-3fff-474d-a951-6af4237cf4c4":tp,"ba38b0af-80c0-49e4-9e39-864396964ccc":ep,"69323dab-b425-4a2a-b1c7-d7efc723327a":np,"2b24877a-3221-4288-9f59-efbf29964368":ip,"63605ea1-40e7-47db-9f8f-313dffa6e3c9":op,"939ed573-82b8-4385-ac62-88934e5b76c9":sp,"b80d4b5a-40e9-11eb-a2bb-1777d47bf9ae":rp,"73967b68-9b4b-44c1-8a19-f505551f6c53":ap,"c47d84b2-4207-11eb-a064-a3633d64f05d":_p,"76e99304-aa0c-11eb-9bfa-07725a1b4287":pp,"3e5c5856-c721-11ea-b7af-07a978a65cdc":cp,"58900411-ccc3-4c5a-86df-86efe6b7e30e":up,"563e92be-ad5e-4a61-a718-9249c3eac51d":dp,"ee184ea6-3c80-4119-919e-290620aafab0":lp,"407640f7-f1c3-4297-a5ce-baff357a6d31":mp,"7d02d638-a311-4ea8-a0c0-d45baf739e0d":hp,"62a19cd6-04bd-4e46-a72e-4fa3516ad3fa":fp,"fafc23ce-a259-11eb-b14e-af9d1f579af4":gp,"62af44dc-17d6-459a-b95f-3b8ce5b48856":bp,"3217edcf-2fa1-4dc4-af7c-d6fb607c888d":yp,"e857c770-5a98-4f8d-a0e1-b6cb126071ed":vp,"4e63c320-f5a5-4f65-982e-632b5adafa29":xp,"3256e26d-8495-4c9d-8998-5b026691231d":Ip,"ef4c1d0a-bda1-484e-8fcb-0fdbde195778":Sp,"2b59f375-ef06-4ec7-80c2-71a53171ec67":Dp,"1a59348c-a25a-11eb-8afe-8bedb0732a89":Ep,"b9f90a95-1bfc-4897-9068-2560743821a3":wp,"530e83d2-1d61-11eb-b472-53e545a06c92":Pp,"13d738b9-401d-43c9-852f-e9611545f5bc":kp,"2520668c-b279-11ea-ace3-5b84eb02bd7f":Cp,"123f2837-76c0-4cb2-8d73-29e66879b181":Tp,"1520b630-93aa-11ea-ac56-7718cb2ad75d":Ap,"56fb9a32-ad10-11ea-b0f4-3b0ea5e3ac2c":Mp,"8383c41e-3f9b-4d04-8380-feb583a1404f":Op,"b0c25199-c284-4f90-817c-60dc89b15b1c":$p,"b2626d61-b17d-4737-bea3-627c0322f9d6":Lp,"1b592040-968f-456b-bdb5-b424e08b80f1":Up,"e1486d65-7d51-436b-949d-4e57d1f9e4a9":Gp,"f9f93972-0764-4095-9ca2-d18b7d9344d4":Rp,"3be8272d-310a-4aa2-84a1-71f590a8227a":Np,"ae1f7fc0-d6e7-489c-94ed-dee71c68dbb7":zp,"b5ea15f4-9bbd-11eb-b623-37aff4a9ce60":Fp,"70972046-ad11-11ea-aaea-0b9067ad19e7":Bp,"94e93f42-d05e-45d9-9211-ba903e779f2d":Hp,"f712793d-8ee9-4805-9d4a-8c210cae667a":jp,"f60adade-f14e-11ea-b51e-537032a90354":Vp,"8cd29108-95cd-4217-9721-11f7c7c1131e":Kp,"2af12780-698c-40ca-baa9-5f3260377e0f":Wp,"664b5d3c-e4cf-11ea-ab74-eb6d2f3bd6f1":qp,"9414421d-3376-4438-aa03-7afcd860972c":Yp,"ad2ae8b9-9674-4b22-bed4-4458e0030b1a":Xp,"45b9c329-64e9-4c4a-800b-790947c75754":Jp,"60bdba6d-c670-430f-be72-6f39cf4e8453":Zp,"c4784b05-1f50-44ad-b812-545b3ed77614":Qp,"964d3314-75fe-4a09-8ba8-c49145f29d49":tc,"02f91720-c4d5-4d66-ae91-d46ddc635722":ec,"f97f2a74-d9a9-411d-afd3-fda46ba86c3b":nc,"3e20a18c-60a3-40cd-bbee-f2f9e289b14d":ic,"eb345e08-08fd-4032-bd69-a4e9f55e7aa6":oc,"779e538c-b0b9-477e-a986-30ee3abe6fe6":sc,"25d0e003-f002-45ae-a50c-6fa3bffee4eb":rc,"1b8ce255-0bc7-4656-bafa-3dc86af44126":ac,"065d2fc3-af3b-4704-b26e-228d71f61771":_c,"b16cccf7-fe33-43a6-b208-48db494376e8":pc,"af5469c4-a09e-4b22-8133-a21e721e7639":cc,"c8a4cd44-a554-4901-8a33-a8adbff63d03":uc,"e1e106ad-e15d-4044-82f6-27ddd476d7c8":dc,"141eaa06-bb12-42f1-a46f-32ceefb64ddc":lc,"c2fec1e6-b370-4069-bb43-6dab5a78b9ab":mc,"adde2d16-e1e6-4599-9a64-dd0968797041":hc,"d4e4d4b2-80e0-4066-8d6f-5051e9a11a10":fc,"42a8023a-0581-4e92-968a-b31584d0ed75":gc,"95076599-0f2f-46b6-a9e0-b4cbfdb8dcc9":bc,"a85fd9ad-5aec-4ebc-9008-e22db851dfa8":yc,"49517cda-b9da-4d80-b849-61fc2260317d":vc,"ff84b8cd-216f-4bcf-8e29-e7c9998cae3d":xc,"43b43afd-9e7d-44ba-aef7-6e9db4ed8744":Ic,"33434271-3533-4a4e-adb9-306e35ab6afe":Sc,"0b4aa055-010d-4d43-b991-f38a95cdb380":Dc,"fa3d97bb-060d-4671-9c18-dff81f64c1cc":Ec,"d6f727ee-5158-4e2b-a2d4-a84ee712144e":wc,"ee7b692f-5fe5-43c3-b636-aacca92b0bc7":Pc,"c7f6f43e-e8ed-11ea-92b2-0bd612272247":kc,"4ad5bd0e-e11e-11ea-ad4c-83da30628333":Cc,"dd520754-e138-11ea-879e-3bd947893124":Tc,"a44b2198-e18d-11ea-be3b-77e13b78b7e3":Ac,"6796cd2d-2bd2-4dd3-9396-49d6bc1d2652":Mc,"2b0ef9e9-028b-4acc-9daf-6999e86cc2af":Oc,"58385055-7f06-472a-be9e-26bb5bce276a":$c,"81c0f469-ab88-4bc8-89d5-98d291b1d8b2":Lc,"1ef77768-7394-4b83-ad11-f5905fa9d0d3":Uc,"288aede9-59ea-4cb4-baf9-fef9109cc2b9":Gc,"53018958-b686-11ea-bf53-175a3698c92d":Rc,"82cf909e-a78f-4f3e-b87a-976458c8e15d":Nc,"87a11e2c-278c-11eb-9209-2f30aebffb25":zc,"be59cf84-fcf2-46ef-aa34-6f0f8e055680":Fc,"f5b2faf1-3a8b-489f-9d99-62d3c749ced6":Bc,"3ab81e83-5954-4bae-ad3e-ebf409dd23c4":Hc,"8e978642-b686-41fd-b2af-9a4c5db6bfa4":jc,"3c47d4bc-315d-4600-a9cd-6e388b345980":Vc,"138d16a7-a200-4329-9b4a-17abd24943d4":Kc,"8f7ce559-a046-45bc-8e98-c39934ed0ae6":Wc,"2e2bede5-41a9-4c35-8b02-482b610837ff":qc,"9a7c22e3-3de2-4c99-ac1f-b2f8ceffae99":Yc,"c0e124ca-381a-414b-93a2-41526df02e28":Xc,"83d22558-2c6f-4dd4-a231-baba798d1d97":Jc,"c9d64ef4-35f6-44e7-a16b-1e4173f951dc":Zc,"b2eb49a8-7a7a-446a-ad36-e7c1efdaf61f":Qc,"6f79ee03-4b3f-439c-b955-5529f3bebcc9":tu,"0b5a71c6-5c43-4e55-a29c-27d9ff7ed43a":eu,"874f508f-d027-4e0b-852e-b4027e714406":nu,"ee4715e6-f479-11ea-b231-bf95a7f38a99":iu,"1ba97b81-5084-49b8-8fbf-227ccd31cabc":ou,"c475117a-02b9-11eb-b7c8-579fe4f6c669":su,"41a8c91e-87f8-4d96-9714-33716f329f7b":ru,"1ba931d8-0226-4600-9a48-dbb1b17d8d82":au,"fb3fc7b4-3175-41ce-9546-cf3a07053cdc":_u,"6dbff818-02b9-11eb-9ee7-93b57419f741":pu,"e7232263-a2cf-4f2b-a862-4fc85933d09f":cu,"a1cd3c3c-b1fa-40a2-80d1-32f416264a3d":uu,"367241d8-ad12-11ea-beed-9777f31699a8":du,"77238fd9-a968-454d-b7ce-0277bc37475d":lu,"a9cba5ec-940d-42a3-b861-86197402cbe4":mu,"817c76ba-a71c-4136-af86-bd6b69106c45":hu,"30f6738c-1938-4dcd-9e7f-6c10f9730021":fu,"210632fc-f85b-4f13-a2a9-f689ff85da78":gu,"f5df301d-da63-492a-9e59-950289fe6ba9":bu,"71ff4fda-5878-4d4c-b55b-c2c79d8dc546":yu,"5c13db99-0923-4b27-85e3-7a18dbfdd309":vu,"a7dee8c6-15a3-4b7e-8f63-03f13a7d34a9":xu,"9543c94b-e19e-430b-8a48-9cda8dae44c5":Su,"a8d7c089-0385-4922-bb3a-6c550a8a1b3b":Du,"2ec96f8b-4ea5-4ba8-ab8d-a00105c6cb71":Eu,"e4ea5dce-10ea-434b-a93d-c874a92f2f39":wu,"31408be3-cc2a-490a-b0d1-96e0028ca68e":Pu,"33c623e5-bce2-4f30-9a98-50218bb6c431":ku,"c2738ec3-72fa-4432-96b9-74abb1a6f26a":Cu,"30e125ba-af81-11ea-ba6b-e70218ca7afe":Tu,"b5ab65ce-4306-4a46-8d3c-36b6c29b1c60":Au,"c18c8f59-f3c8-49a8-9dbd-ed30fdf856e9":Mu,"3511f756-2a02-4346-b417-8c34502f79d4":Ou,"6705462c-5b47-11eb-9dfc-2f14c58b2789":$u,"0bc0c4ad-d2e0-4e3e-92e8-5b9dfee1cf5e":Lu,"f238caff-3f71-40d9-b1a9-d992060fea04":Uu,"262beb5f-21bd-4848-a62d-185f6f8a78e1":Gu,"a57383a9-5b24-4dbb-a5d1-0e278d036f89":Ru,"7e1b3a4c-be6b-11eb-b098-1b6b9db93f1e":Nu,"3889d2f1-a0ed-4e8c-8e75-7a6683224275":zu,"a6e30b43-9ab4-4206-bfba-3f2129faac30":Fu,"41de8d5e-2c41-441c-ad29-cc3f5d4e6c7a":Bu,"c5856fdc-5154-46ab-a414-47f37af39da1":Hu,"b8fc168e-ee2f-11ea-a42a-730934861ff1":ju,"29e974cc-081b-11eb-a607-1fd4ec67a52f":Vu,"bb029770-080e-11eb-9d38-f314d076f14b":Ku,"5aea0bf0-0815-11eb-9304-5f90b5542620":Wu,"2f2d5ea4-6dd2-406e-a095-5552ebc235e7":qu,"d4ec46ab-d065-4d1c-9357-fa8b95be0c36":ld,"f079a38e-fb4f-496e-8e5f-d5e03a590cda":md,"16fa715f-fc94-43f7-831e-335037c8daea":Ed,"7375aad5-50fd-403c-80ae-471b95088f04":wd,"d3fc887c-9fc5-11eb-8f63-ab42b0414469":Pd,"de9665db-a188-4252-99f0-ea50fc343058":kd,"b296242e-8b82-11eb-ac6c-0f8d3f9948d0":Cd,"04eda925-4423-40c8-83c8-2117a0d81185":Td,"2afcfde0-76d3-4045-a99c-c9809d71307a":Ad,"416550cc-6e02-4ff2-aafa-2f0edbf121c6":Md,"6db29a62-2035-4cfc-a9d3-03444a8bc2b8":Od,"c8f3faa8-09f4-11eb-a3b1-477aa3ec4193":$d,"dc513ed0-09f4-11eb-a54a-7f4d4e253ef5":Ld,"08ff535a-93a7-403c-a1ef-c59cdb50ccf0":Ud,"0f041192-1ff3-4094-93da-9264480ad5e2":Gd,"58846eae-1650-41e7-ad42-a75b9c32332a":Rd,"b949221c-8227-4178-bde4-5e8754a7ed39":Nd,"baadad13-b70f-4310-b4aa-8c81fe5a9d69":zd,"1d5b6bb0-f18e-4428-a350-a29d8ca3ff4a":Fd,"5bd48844-67c6-4fdc-b23b-f03cd561877f":Bd,"27e2f302-c23a-4447-abde-8309a94b331d":Hd,"81ac8195-57ed-4b22-b8b8-fe3e68b11af0":jd,"68992d62-d5ca-11ea-888d-97179b32b7ab":Vd,"81a54674-4e9c-11eb-a0e4-2b75980dbd9b":Kd,"1baddd01-97a9-4971-b74a-e933fefdb629":Wd,"ed53d847-6336-435b-9e5e-fd38c79dc9c6":qd,"72c84615-4d9c-4a82-a828-fa5d9447a4d5":Yd,"06a6eeb5-9c36-428c-b9af-4f8b178db350":Xd,"ccf6d0e2-6b08-11eb-9fc3-3785374109d0":Jd,"0e9e6cd4-67eb-11ea-995b-4b0721193361":Zd,"c18d7dcc-939b-11ea-90cb-77846d7504a9":Qd,"e8bce1fc-ae56-4f9f-9685-3cc844758855":tl,"e80c912e-7508-11ea-966b-436805345ff0":el,"0f043df2-46fc-11eb-ae20-6f1fedd527ba":nl,"c9b62bcc-8196-11eb-8372-9f2ac2c356d4":il,"96d5d60e-85eb-11eb-ba90-7fc42ab0a641":ol,"84bfce28-2116-11eb-82ca-cfb03193bf58":sl,"e6b88d1e-8755-11ea-916e-d3995fb8986e":rl,"d0672722-b1a9-11ea-a247-d736e666990e":al,"023c3762-c701-11ea-b590-57b51c2884a7":_l,"deda524e-6990-11eb-9bc3-e7d55b583fa3":pl,"0e1d716e-a13f-11ea-ac6a-8fd610c86910":cl,"fcccb9a4-1a30-11eb-93b0-e7d511d031f2":ul,"bc34c618-1c77-11eb-9785-e39a2bf52e49":dl,"6b18c608-7b5a-11ea-bb6e-2ff12a5cc3f3":ll,"e39a2a34-c71a-11ea-9835-07964acf6760":ml,"9d1417a8-8a90-4ec1-be3e-401fd4ec3370":hl,"b61f5cc6-37e9-45e1-965b-02940820f7ce":fl,"94243ec4-8967-4907-8cdd-7223fe256cf6":$l,"7c27cf95-6226-4326-8619-32d82bcbe16d":Ll,"dc549da9-f758-4709-8913-e265f5e458b2":Ul,"66698a97-15c5-4602-9925-11a1aeb03710":Gl,"8be95fbe-8f10-467b-bbdd-87311ca62594":Rl,"d7c86a2a-489f-11eb-b83e-d3767f6d49b7":Nl,"dd7616e2-2e64-4d9c-b13e-ca7efeacd982":zl,"321f971c-b898-4ca4-9e6e-3d75d68940f7":Fl,"b7f043ee-4f9d-4f69-90fe-63b1357ff4c2":Bl,"63a417e5-d354-4b39-9ebd-05f55e70de7b":Hl,"32ff22b0-8221-4584-9c78-d21102dcfa6a":jl,"b5286262-9f92-40d3-8545-88fb3079a0f9":Vl,"23b7df22-79e0-4233-8388-7e6e8f1859c6":Kl,"06823924-b659-4a22-8ed4-b3243121b55d":Wl,"059579bb-184f-435b-ace0-64ec95c9f125":ql,"44968bd5-f1a5-4f81-a32f-8ee5a6e4a842":Yl,"ab507863-2307-40c6-982b-c45680458997":Xl,"7a8921eb-c1ad-400b-94fc-6c6cead8163d":Jl,"2a5ad480-9d38-4918-8774-41fac7b54203":Zl,"78b0939d-43e1-4f6c-867d-e4217a55d217":zs,"7772a2f5-40c8-482e-83f4-bed9bfb364e3":Ql,"c711d540-9de3-437e-854a-b59491af3cf8":tm,"62ca7eae-ea36-4960-a8f2-6b5978cabbab":em,"7666978e-252c-11eb-97a4-0f3e81286cae":nm,"3fcb8e64-923d-11ea-bab1-43fa3b273af8":im,"e049f16e-2559-11eb-bdc4-db5b8a11164b":om,"be11165e-489f-11eb-921f-87b924eb0725":sm,"38d26d76-2559-11eb-ae02-dfda9b9b137e":rm,"9932f3bc-9241-11ea-89fa-0b2fdace0f08":am,"60bc7930-8982-11ea-8b24-cf97a783bb32":_m,"c0bfe832-8967-11ea-8c4c-1f2995e41b68":pm,"98c279fc-7f5e-11ea-b9e4-f772f9f0bed1":cm,"49ef122e-b4d1-11ea-b45e-b73d8ee2aae8":um,"00c828fc-9243-11ea-b897-5b0fc55820c5":dm,"ad12678e-6642-11eb-9fc3-9fbc75c58110":lm,"096fc4ca-edd2-11ea-8266-37b634a3ee0b":mm,"d8aa573f-129e-4587-9c64-674729d024e2":hm,"6309ac3f-4a37-4ab0-86c6-8be70b38e31d":fm,"e2109627-9783-4664-a70c-858fd8c46ea5":gm,"9bc56564-ef4e-11ea-939a-27ae3feb321e":bm,"c0d13c03-9b10-4a6f-a79f-66294d10aae6":ym,"51c2c7b4-cb8a-42e8-95ab-14b8ac37700c":vm,"6c7cd7d1-c8a0-4317-9c8c-ba781f150729":xm,"e06518cf-9edf-430b-8751-74c486e407aa":Im,"87f99b85-1c24-4e5b-a903-dd27230f4092":Sm,"83ec6688-b80b-4ef2-861f-14245ef392c0":Dm,"6a14988f-5f4b-4fab-af32-226b7844e41f":Em,"454aaff2-cd74-4f6e-baf2-631bb32e7a6b":wm,"3ffeaaf8-30dd-11eb-9dcc-836b075fc64d":Pm,"002af312-560a-11eb-807c-8769b90eb8e6":km,"f1ed986a-55df-11eb-89e3-9f7cc8490b16":Cm,"ef550ed4-5608-11eb-8ee3-0be8f1fce185":Tm,"738a0ac4-8805-4189-a46c-b7d7fcf63456":Am,"59afce80-30e7-4322-84e6-955767bb5106":Mm,"355b5332-0cc9-4a5c-989e-043d717215ec":Om,"cf4db91a-f8b2-454f-a763-12005d71cb9d":$m,"c320b1b2-c130-4d69-b172-0c737b72c6b5":Lm,"26b06e21-798c-4bc4-96e1-12a4351c083d":Um,"04e8b64e-7fed-49a0-af48-eba025be3fbc":Gm,"b51db03f-4d2d-44f9-bbd9-116aa0b086d0":Rm,"12d1e7be-a5a6-45ba-82d7-cce3d03b96e2":Nm,"275af55d-9fcf-4b53-9087-d97455cbe528":zm,"bc0320e2-2eb8-11eb-a38f-a779bfe81645":Fm,"b409ff98-1c9e-4990-b2c2-d7f32fda50eb":Bm,"e4fb7815-95e1-4cbc-b2e2-750605e30258":Hm,"eaf5e67b-6c48-4a27-85e1-9d5a8aa72e24":jm,"074ef6f4-a0a1-40f9-95c0-cf0ecc3d420c":Vm,"de2d42e2-4fca-4a3f-8783-3585c546e88b":Km,"324b9c5e-5810-11eb-bf7c-634b3bb07f8c":Wm,"bddaba6f-83c8-4d25-97e2-ef1cdecd19e4":qm,"5ec9d37d-f9f4-49d0-a139-55af26fab05c":Ym,"259ba71c-6315-4324-a32c-fc2277200a40":Xm,"7fe5b907-e9d3-4427-96cf-1b3be39a9bba":Jm,"0c6703a1-e949-4b55-9e84-71e6c9addd64":Zm,"c6da6b9f-a783-4e58-a252-e543aef109fb":Qm,"98ab5ee1-0997-4ad2-bc77-776208b6bb25":th,"4ae69887-a087-4d37-8743-d83ca48184d1":eh,"ed78b920-3f43-47df-840c-60c5297cdb2e":nh,"c899b675-c3c4-428e-b548-b228305c0302":ih,"cd8c1d94-1471-49e2-8b43-d98ae93b70f3":oh};l();l();var sh=class extends W{constructor(o,t){super(o,t);let{}=this.$props,e=yt(t);this.$element=e,this.setSubComponents({})}onPropChanged(o,t){}};l();l();l();function R2(r,o){cT(r,o)}function cT(r,o){for(let t in o){let e=o[t];r.setAttribute(t,e)}}function ua(r,o){return t=>{t===void 0?r.removeAttribute(o):r.setAttribute(o,t)}}function N2(r,o,t){return S(S({},BS(r,o,t)),HS(r,o,t))}function me(r,o,t){return _t(S({},N2(r,o,t)),{innerText:e=>{o.innerText=e||""}})}function FS(r,o,t){return S(S({},BS(r,o,t)),HS(r,o,t))}function BS(r,o,t){return{attr:e=>{R2(o,e)},style:(e={})=>{vt(o,S(S({},t),e))},className:ua(o,"className"),id:ua(o,"id"),tabIndex:ua(o,"tabIndex"),title:ua(o,"title"),draggable:ua(o,"draggable")}}function HS(r,o,t){return{style:(e={})=>{sn(r,o,S(S({},t),e))}}}function jS(r,o,t){return{value:e=>{r[o]=e||t},placeholder:e=>{r.placeholder=e!=null?e:""},disabled:ua(r,"disabled")}}var VS={},rh=class extends W{constructor(t,e){super(t,e);let{href:n,target:i,id:s,rel:a="noreferrer",className:_,style:c,innerText:p,tabIndex:u,title:d,draggable:m}=this.$props;this.$element=this.$system.api.document.createElement("a"),n!==void 0&&this.$element.setAttribute("href",n),i!==void 0&&this.$element.setAttribute("target",i),a!==void 0&&this.$element.setAttribute("rel",a),s!==void 0&&(this.$element.id=s),_!==void 0&&(this.$element.className=_),p&&(this.$element.innerText=p),u!==void 0&&(this.$element.tabIndex=u),d&&(this.$element.title=d),m!==void 0&&this.$element.setAttribute("draggable",m.toString()),vt(this.$element,S(S({},VS),c)),this._prop_handler=_t(S({},me(this,this.$element,VS)),{href:h=>{h?this.$element.href=h:this.$element.removeAttribute("href")},target:h=>{h?this.$element.target=h:this.$element.removeAttribute("target")}})}onPropChanged(t,e){this._prop_handler[t](e)}};l();l();l();l();var KS=/[+]{0,1}[-]{0,1}([0-9]+)%/,z2=new RegExp("^"+KS.source+"$"),uT=new RegExp("("+Q1.source+")px"),F2=new RegExp("^("+Q1.source+")px$"),WS=/^calc\(([0-9]+)%([+]{0,1}[-]{0,1}[0-9]+(?:\.\d*)?)px\)$/,ukt=new RegExp(uT.source,"g"),dkt=new RegExp(KS.source,"g");function B2(r){if(r=bi(r),r===""||r==="auto"||r==="fit-content"||r==="none")return[0,0];let o=z2.exec(r);if(o)return[0,parseFloat(o[1])];{let t=F2.exec(r);if(t)return[parseFloat(t[1]),0];{let e=WS.exec(r);return e?[parseFloat(e[2].replace("+-","-")),parseFloat(e[1])]:[0,0]}}}function da(r,o){if(r=bi(r),r===""||r==="auto"||r==="fit-content"||r==="none")return 0;let t=z2.exec(r);if(t)return dT(t[1],o);let e=F2.exec(r);if(e)return lT(e[1],o);if(r.startsWith("calc("))return qS(r.slice(5,-1),o);let n=r.match(/min\((.+)\)/);if(n)return mT(n[1],o);let i=r.match(/max\((.+)\)/);return i?hT(i[1],o):qS(r,o)}function qS(r,o){let t=0,e=0,n="+",i=0;for(let a=0;a<r.length;a++){let _=r[a];switch(_){case"(":i++;break;case")":i--;break;case"+":case"-":case"*":case"/":if(i===0){let c=r.slice(e,a)||r;t+=da(c,o),e=a,n=_}break;default:}}let s=r.slice(e);return s!==""&&(t+=da(s,o)),t}function dT(r,o){return parseFloat(r)/100*o}function lT(r,o){return parseFloat(r)}function mT(r,o){let e=r.split(",").map(n=>da(n,o));return qv(e)}function hT(r,o){let e=r.split(",").map(n=>da(n,o));return Yv(e)}l();var g0=(r,o,t)=>{let{api:{}}=r,e,n;return function(...i){let s=this;n?(clearTimeout(e),e=setTimeout(function(){Date.now()-n>=t&&(o.apply(s,i),n=Date.now())},t-(Date.now()-n))):(o.apply(s,i),n=Date.now())}},H2=(r,o)=>{let{api:{animation:{requestAnimationFrame:t,cancelAnimationFrame:e}}}=r,n=!0,i,s=!1;return{f:function(...c){let p=this;n?(n=!1,s=!1,o.apply(p,c),i=t(function(){n=!0,s&&(s=!1,o.apply(p,c))})):s=!0},abort:()=>{i!==void 0&&(e(i),i=void 0)}}};var la=class{constructor(o,t){this._system=o,this._callback=t}observe(o){let{api:{document:{MutationObserver:t,ResizeObserver:e}}}=this._system;this._abort&&(this._abort(),this._abort=void 0);let{isConnected:n}=o;if(!n)throw new Error("element is not mounted");let i=0,s=0,a=1,_=1,c=0,p=0,u=0,d=0,m=0,h=0,f=0,b=0,g=0,v=0,x=0,I=1,E=1,D=0,w=0,T=0,C=0,P=0,k=0,M=0,U=1,L=1,O=0,R=0,N=0,z,F,V=()=>{j(),Q()},j=()=>{let{offsetLeft:et,offsetTop:ct,offsetWidth:lt,offsetHeight:bt,style:kt}=o;b=et,g=ct;let{transform:xt,border:Gt}=kt;if(xt!==z||h!==lt||f!==bt){if(xt){let[Ft,Jt,ke,Ce,te,de,tn]=Yo(xt,lt,bt);v=Ft,x=Jt,I=ke,E=Ce,D=te,w=de,T=tn}else v=0,x=0,I=1,E=1,D=0,w=0,T=0;z=xt}if(Gt!==F){if(Gt){let[Ft]=Gt.split(" "),Jt=0;["thin","medium","thick"].includes(Ft)||(Jt=da(Ft,0)),d=Jt,m=Jt}F=Gt}h=lt,f=bt},{f:H,abort:K}=H2(this._system,V);this._abort=K;let q=()=>{a=I*U,_=E*L;let et=i0(D),ct=i0(w),lt=i0(T);c=et+O,p=ct+R,u=lt+N;let bt=Math.cos(N),kt=Math.sin(N),xt=b+v,Gt=g+x,Ft=xt*U,Jt=Gt*L,ke=Ft*bt-Jt*kt,Ce=Jt*bt+Ft*kt,te=C-M+ke*I-h*U/2*(I-1),de=P-k+Ce*E-f*L/2*(E-1),tn=te+(h*U*bt-f*L*kt)/2,Le=de+(h*L*kt+f*U*bt)/2,wt={x:tn,y:Le},Rt=R7({x:te,y:de},wt),fe=r0(Rt,lt),ee=Wn(wt,fe);i=ee.x,s=ee.y},Q=()=>{q(),this._callback(i,s,a,_,c,p,u,d,m)},at={childList:!1,subtree:!1,attributes:!0,attributeFilter:["style"]},Dt=new t(H);Dt.observe(o,at);let Et=new e(H),Ct={box:"device-pixel-content-box"};Et.observe(o);let Pt=()=>{Dt.disconnect(),Et.unobserve(o),Et.disconnect()},X=(()=>{let{offsetParent:et,parentElement:ct}=o,lt=et;if(lt){let bt=[],kt=Rt=>{let{scrollLeft:fe,scrollTop:ee}=Rt;k+=ee,M+=fe;let ge=fe,be=ee,mn=function(){let{scrollLeft:Ci,scrollTop:On}=Rt;M+=Ci-ge,k+=On-be,ge=Ci,be=On,Q()},{f:Ve}=H2(this._system,mn);Rt.addEventListener("scroll",Ve,{passive:!0});let Fn=()=>{Rt.removeEventListener("scroll",Ve)};bt.push(Fn)};if(o.style.position!=="absolute"){let Rt=ct;for(;Rt&&Rt!==lt&&!(Rt instanceof HTMLElement&&(Rt.style.position==="absolute"||Rt.style.position==="fixed"));)kt(Rt),Rt=Rt.parentElement;kt(lt)}let xt=Tt(bt),Gt={childList:!0,subtree:!1,attributes:!0,attributeFilter:["style"]},Ft=Rt=>{H()},Jt=new t(Ft);Jt.observe(lt,Gt);let ke=(Rt,fe,ee,ge,be,mn,Ve,Fn,Ci)=>{C=Rt+Fn,P=fe+Ci,U=ee,L=ge,O=be,R=mn,N=Ve,H()},Ce=new la(this._system,ke),{x:te,y:de,sx:tn,sy:Le}=Ce.observe(lt);C=te,P=de,U=tn,L=Le,q();let wt=()=>{H()},Ht=new e(wt);return Ht.observe(lt),()=>{xt(),Ht.disconnect(),Jt.disconnect(),Ce.disconnect()}}else return()=>{}})(),rt=()=>{Pt(),X()};return this._unlisten=rt,j(),q(),{x:i,y:s,sx:a,sy:_,rx:c,ry:p,rz:u,px:d,py:m}}disconnect(){this._unlisten&&(this._unlisten(),this._unlisten=void 0)}};l();function rn(r,o,t){return Math.min(Math.max(r,o),t)}function Io({a:r,min:o,max:t}){return{a:rn(r,o,t)}}var YS=bI(20),XS=4,fT=4,Wi=42,JS="none",gT=12,ZS={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",color:"current-color","pointer-events":"none"},ah=class extends W{constructor(t,e){super(t,e);this._r=0;this._x=0;this._y=0;this._tx=0;this._ty=0;this._pointer_position={};this._pointer_down_position={};this._pointer_down={};this._pointer_occluded={};this._pointer_down_count=0;this._pointer_enter_count=0;this._pointer_inside={};this._pointer_visible=!1;this._pointer_tracked=!1;this._eye_ellipse=[];this._laser={};this._laser_ray={};this._laser_focus={};this._removed=!1;this._container_x=0;this._container_y=0;this._container_rx=0;this._container_ry=0;this._container_rz=0;this._container_sx=1;this._container_sy=1;this._move_animation_frame=void 0;this._sync_animation_frame=void 0;this._enabled=()=>{let{disabled:t}=this.$props;if(document.visibilityState==="visible")if(t===void 0){let{$disabled:e}=this.$context;return!e}else return!t;else return!1};this._disabled=!0;this._refresh_enabled=()=>{this._enabled()?this._enable():this._disable()};this._reset_move_timeout=(t=0)=>{this._move_timeout&&clearTimeout(this._move_timeout);let e=()=>{this._start_move(),this._reset_move_timeout()};this._move_timeout=setTimeout(e,t+e0(0,gT)*1e3)};this._enable=()=>{this._disabled&&(this._disabled=!1,this._follow(),this._reset_move_timeout(1e3))};this._disable=()=>{this._disabled||(this._disabled=!0,this._move_timeout&&clearTimeout(this._move_timeout),this._unfollow())};this._pointing_self={};this._pointing_self_count=0;this._synced=!0;this._get_pointer_xyz=()=>{let{$width:t,$height:e}=this.$context,n=1,i=1,s=0,_=this._center(),c=0,p=0,u=0;for(let d in this._pointer_position){u++;let m=this._pointer_position[d],{x:h,y:f}=m;c+=h,p+=f}if(u>0&&!this._disabled){_={x:c/u,y:p/u};let d=this._center(),m=He(d,_),h=Xo(t,e),f=Me(d.x,d.y,_.x,_.y);n=f.x,i=f.y,s=Math.min(m,h)/h}return[n,i,s]};this._get_target_xyz=()=>this._synced?this._get_pointer_xyz():[this._temp_x,this._temp_y,this._temp_z];this._temp_x=0;this._temp_y=0;this._temp_z=0;this._center=()=>{let{r:t=Wi}=this.$props;return{x:this._x+t,y:this._y+t}};this.getPosition=()=>({x:this._x,y:this._y});this.setPosition=({x:t,y:e})=>{this._x=t,this._y=e};this.setOccluded=(t,e)=>{e?this._pointer_occluded[t]=!0:delete this._pointer_occluded[t]};this._start_move=()=>{let{api:{animation:{requestAnimationFrame:t}}}=this.$system;if(this._pointing_self_count>0)return;let{r:e=Wi}=this.$props,{$width:n,$height:i}=this.$context,s=2*e+3;this._tx=e0(3,n-s),this._ty=e0(3,i-s),this._move_animation_frame=t(this._move_tick)};this._move_tick=()=>{let{api:{animation:{requestAnimationFrame:t}}}=this.$system;Math.abs(this._x-this._tx)>1||Math.abs(this._y-this._ty)>1?(this._x+=(this._tx-this._x)/3,this._y+=(this._ty-this._y)/3,this._tick_body(),this._move_animation_frame=t(this._move_tick)):this._move_animation_frame=void 0};this._start_sync=()=>{let{api:{animation:{requestAnimationFrame:t}}}=this.$system;this._sync_animation_frame=t(this._sync_tick)};this._sync_tick=()=>{if(this._synced)return;let[t,e,n]=this._get_pointer_xyz(),i=t-this._temp_x,s=e-this._temp_y,a=n-this._temp_z,_=1/4;if(Math.abs(i)>_||Math.abs(s)>_||Math.abs(a)>_)this._temp_x+=i/3,this._temp_y+=s/3,this._temp_z+=a/3,this._start_sync();else{this._synced=!0;for(let c in this._pointer_down)this._laser_position[c]=this._pointer_position[c]}this._tick_body()};this._onPointerEnter=t=>{let{pointerId:e,pointerType:n}=t;this.__onPointerEnter(e)};this.__onPointerEnter=t=>{this._pointing_self[t]=!0,this._pointing_self_count++,this._tick_color()};this._onPointerLeave=t=>{let{pointerId:e}=t;this.__onPointerLeave(e)};this.__onPointerLeave=t=>{delete this._pointing_self[t],this._pointing_self_count--,this._tick_color()};this._onContextPointerEnter=t=>{let{pointerId:e,pointerType:n}=t;(n==="pen"||n==="mouse")&&!this._pointer_down[e]||this.__onContextPointerEnter(t)};this.__onContextPointerEnter=t=>{let{x:e,y:n}=this._getXY(t),{pointerId:i}=t;this._pointer_inside[i]||(this._pointer_inside[i]=!0,this._pointer_enter_count++,this._pointer_position[i]={x:e,y:n},this._pointer_visible=this._pointer_enter_count>0,this._synced&&(this._synced=!1,this._start_sync()),this._tick_body())};this._onContextPointerLeave=t=>{let{pointerId:e}=t;this.__onContextPointerLeave(t)};this.__onContextPointerLeave=t=>{let{pointerId:e,pointerType:n}=t;if(!this._dnd[e]&&this._pointer_inside[e]){this._pointer_enter_count--,this._pointer_down[e]&&this._remove_pointer_down(t);let i=this._pointer_position[e];delete this._pointer_inside[e],delete this._pointer_position[e],this._removePointerLaser(e),this._pointer_visible=this._pointer_enter_count>0,this._synced&&(this._pointer_visible||(this._synced=!1,this._start_sync())),this._tick_body()}};this._onContextPointerCancel=t=>{let{pointerId:e}=t;this.__onContextPointerLeave(t)};this._onContextPointerMove=t=>{let{pointerId:e,pointerType:n}=t,i=this._getXY(t);(n==="pen"||n==="mouse")&&!this._pointer_down[e]||(this._pointer_position[e]=i,this._pointer_down[e]&&this._synced&&(this._laser_position[e]=i),this._pointer_visible=this._pointer_enter_count>0,this._tick_body())};this._getXY=t=>{let{clientX:e,clientY:n}=t,i=Math.cos(-this._container_rz),s=Math.sin(-this._container_rz),a=(e-this._container_x)/this._container_sx,_=(n-this._container_y)/this._container_sy,c=a*i-_*s,p=a*s+_*i;return{x:c,y:p}};this._onContextPointerDown=t=>{let{pointerId:e,pointerType:n}=t;if(!this._pointer_down[e]){let i=this._getXY(t);this._pointer_down_count++,this._pointer_down[e]=!0,this._pointer_inside[e]=!0,this._pointer_position[e]=i,this._pointer_down_position[e]=i,this._synced&&(this._laser_position[e]=i),this._tick_body(),(n==="pen"||n==="mouse")&&this.__onContextPointerEnter(t)}};this._laser_position=[];this._remove_pointer_down=t=>{let{mode:e}=this.$props,{pointerId:n,pointerType:i}=t;this._pointer_down_count--,delete this._pointer_down[n],delete this._pointer_down_position[n],(i==="touch"||i==="pen")&&delete this._pointer_position[n];let s=()=>{this._pointer_down[n]||(this._removePointerLaser(n),this._tick_body())};setTimeout(()=>{s()},90)};this._onContextPointerUp=t=>{let{pointerId:e,pointerType:n}=t;this._pointer_down[e]&&(this._remove_pointer_down(t),(n==="pen"||n==="mouse")&&this._onContextPointerLeave(t))};this._removePointerLaser=t=>{let e=this._laser[t];e&&(this._svg.removeChild(e),delete this._laser_position[t],delete this._laser[t],delete this._laser_focus[t],delete this._laser_ray[t])};this._width=0;this._height=0;this._onContextResize=()=>{let{$width:t,$height:e}=this.$context;this._resizeSVG(),this._translate(),this._width=t,this._height=e,this._enabled()&&this._reset_move_timeout()};this._resizeSVG=()=>{let{$width:t,$height:e}=this.$context;this._svg.setAttribute("width",`${t}`),this._svg.setAttribute("height",`${e}`)};this._translate=()=>{let{$width:t,$height:e}=this.$context,{r:n=Wi}=this.$props,i=t-this._width,s=e-this._height,a=i/2,_=s/2;this._x+=a,this._y+=_;let c=3,p=2*n+c;this._x=rn(this._x,c,t-p),this._y=rn(this._y,c,e-p),this._tick_body()};this._onContextEnabled=()=>{this._refresh_enabled()};this._onContextDisabled=()=>{this._refresh_enabled()};this._following=!1;this._dnd={};this._follow=()=>{if(this._following)return;this._following=!0;let t=le(this._onContextPointerDown,!0),e=ue(this._onContextPointerUp,!0),n=Je(this._onContextPointerMove,!0),i=Ye(this._onContextPointerEnter,!0),s=Ee(this._onContextPointerLeave,!0),a=qn(this._onContextPointerCancel,!0),_=mt("_graph_mode",({mode:c})=>{this.setProp("mode",c)},!0);this._unlisten_context=Be(this.$context,[t,e,n,i,s,a,_])};this._get_color=()=>{let{$theme:t,$color:e}=this.$context,{style:n={},mode:i=JS}=this.$props,{color:s=e}=n,a=Ze(t,i,s);return{color:s,mode_color:a}};this._tick_color=()=>{let{mode:t=JS}=this.$props,{color:e,mode_color:n}=this._get_color();for(let i=0;i<this._eye_ellipse.length;i++){let s=this._eye_ellipse[i];s.style.stroke=e}this._eye_brow.style.stroke=n,this._eye_ball.style.fill=n,this._eye_ball.style.stroke=n;for(let i in this._laser_focus){let s=this._laser_focus[i],a=this._laser_ray[i];s.style.fill=n,s.style.stroke=n,a.style.stroke=n}};this._unfollow=()=>{if(!this._following)return;this._following=!1;let t=this._unlisten_context;t()};let{className:n,style:i={},r:s=Wi,disabled:a,x:_=0,y:c=0}=this.$props,p=XS;this._x=_-s-2,this._y=c-s-2;let u=this.$system.api.document.createElement("div");vt(u,S(S({},ZS),i)),this._container=u;let d=this.$system.api.document.createElementNS(Ut,"svg");d.classList.add("bot-svg"),n&&d.classList.add(n),vt(d,{position:"absolute",top:"0",left:"0",stroke:"currentColor",cursor:"default"}),this._svg=d,this._bot=this.$system.api.document.createElementNS(Ut,"g"),this._bot.classList.add("eye");for(let h=0;h<p;h++){let f=this.$system.api.document.createElementNS(Ut,"ellipse");f.classList.add("eye-ellipse"),f.style.fill="none",f.style.strokeWidth="1px",this._eye_ellipse.push(f),this._bot.appendChild(f)}this._eye_ball=this.$system.api.document.createElementNS(Ut,"ellipse"),this._eye_ball.classList.add("eye-ball"),this._bot.appendChild(this._eye_ball),this._eye_brow=this.$system.api.document.createElementNS(Ut,"path"),this._eye_brow.classList.add("eye-brow"),this._eye_brow.setAttribute("fill","none"),this._eye_brow.setAttribute("stroke-width","3"),this._bot.appendChild(this._eye_brow),d.appendChild(this._bot),u.appendChild(d),this.$element=u,this.addEventListener(Ye(this._onPointerEnter)),this.addEventListener(Ee(this._onPointerLeave));let m=new la(this.$system,(h,f)=>{this.$context&&(this._container_x=h-this.$context.$x,this._container_y=f-this.$context.$y)});this._position_observer=m}_tick_body(){let{r:t=Wi}=this.$props,e=XS,n=fT,i=t+3,s=t+3,a=0,_=this._center();for(let T in this._pointer_position){let C=this._pointer_position[T];He({x:_.x+3,y:_.y+3},C)>t+1?this._pointing_self[T]&&this.__onPointerLeave(Number.parseInt(T)):this._pointing_self[T]||this.__onPointerEnter(Number.parseInt(T))}let[c,p,u]=this._get_target_xyz();this._temp_x=c,this._temp_y=p,this._temp_z=u,a=Math.atan2(p,c)*180/Math.PI+90,a<0&&(a+=360);let d=c*u*(t-9),m=p*u*(t-9);this._bot.style.transform=`translate(${this._x}px, ${this._y}px)`;for(let T=0;T<e;T++){let C=YS[T],P=t/(T+1),k=P*(1-u/n),M=C*d/n,U=C*m/n,L=i+n*M/2,O=s+n*U/2,R=this._eye_ellipse[T];R.setAttribute("rx",P.toString()),R.setAttribute("ry",k.toString()),R.setAttribute("cx",L.toString()),R.setAttribute("cy",O.toString()),R.style.transformOrigin=`${L}px ${O}px`,R.style.transform=`rotate(${a}deg)`}let h=YS[e-1],f=this._pointing_self_count>0?7:8,b=t/(e+1)/f,g=Math.max(b*(1-u/n),1),v=h*d/n,x=h*m/n,I=i+n*v/2,E=s+n*x/2;this._eye_ball.setAttribute("rx",b.toString()),this._eye_ball.setAttribute("ry",g.toString()),this._eye_ball.setAttribute("cx",I.toString()),this._eye_ball.setAttribute("cy",E.toString()),this._eye_ball.style.transformOrigin=`${I}px ${E}px`,this._eye_ball.style.transform=`rotate(${a}deg)`,this._bot.appendChild(this._eye_ball);let D=300,w=330;this._eye_brow.style.transformOrigin=`${i}px ${s}px`,this._eye_brow.style.transform=`rotate(${a}deg)`,this._eye_brow.setAttribute("d",M7(i,s,t+6,(t+6)*(1-u/2.5),D-(w-D)/5,D+(w-D)/5));for(let T in this._laser_position){let C=this._laser_position[T],P=this._laser[T],k=this._laser_ray[T],M=this._laser_focus[T];if(!P){let{mode_color:N}=this._get_color();P=this.$system.api.document.createElementNS(Ut,"g"),P.classList.add("laser"),k=this.$system.api.document.createElementNS(Ut,"line"),k.classList.add("laser-ray"),k.style.stroke=N,k.style.strokeDasharray="2",k.style.strokeWidth="2",P.appendChild(k),M=this.$system.api.document.createElementNS(Ut,"ellipse"),M.classList.add("laser-focus"),M.style.fill=N,M.style.stroke=N,M.style.transformOrigin="50% 50%",M.setAttribute("rx","1"),M.setAttribute("ry","1"),P.appendChild(M),this._laser[T]=P,this._laser_focus[T]=M,this._laser_ray[T]=k,this._svg.appendChild(P)}let U=C.x,L=C.y,O=U.toString(),R=L.toString();k.setAttribute("x1",(this._x+I).toString()),k.setAttribute("y1",(this._y+E).toString()),k.setAttribute("x2",O),k.setAttribute("y2",R),M.setAttribute("cx",O),M.setAttribute("cy",R)}}onMount(){let{$width:t,$height:e}=this.$context,{r:n=Wi,x:i,y:s}=this.$props;i===void 0&&(this._x=t/2-n-2),s===void 0&&(this._y=e/2-n-2),this._width=t,this._height=e,this._tick_color(),this._tick_body(),this._refresh_enabled(),this._document_listener=()=>{this._refresh_enabled()},document.addEventListener("visibilitychange",this._document_listener,!1),this._context_unlisten=Be(this.$context,[Un(this._onContextResize),mt("enabled",this._onContextEnabled),mt("themechanged",()=>{this._tick_color()}),mt("colorchanged",()=>{this._tick_color()})]),this._position_observer.observe(this._container),this._resizeSVG()}onUnmount(t){let{}=t;this._disable(),this._context_unlisten(),this._move_animation_frame!==void 0&&(cancelAnimationFrame(this._move_animation_frame),this._move_animation_frame=void 0);for(let e in this._pointer_down)this._removePointerLaser(Number.parseInt(e));this._pointer_position={},this._pointer_down={},this._pointer_occluded={},this._pointer_down_count=0,this._pointer_enter_count=0,this._pointer_inside={},this._pointer_visible=!1,this._position_observer.disconnect(),document.removeEventListener("visibilitychange",this._document_listener)}onPropChanged(t,e){if(t==="style"&&(vt(this._container,S(S({},ZS),e)),this._tick_color()),t==="disabled")this._refresh_enabled();else if(t==="mode")this._tick_color();else if(t==="n")this._tick_body();else if(t==="r"){let n=this._r||Wi;e=e||Wi,this._x+=n-e,this._y+=n-e,this._tick_body()}else if(t==="x"){let{r:n=Wi}=this.$props;typeof e=="string"&&(e=B2(e),e=e[0]+e[1]*this.$context.$width/100),this._x=e-n-2,this._tick_body()}else if(t==="y"){let{r:n=Wi}=this.$props;typeof e=="string"&&(e=B2(e),e=e[0]+e[1]*this.$context.$height/100),this._y=e-n-2,this._tick_body()}}};l();l();function Xt(...r){let o=[];for(let t of r){if(!t)continue;let e=typeof t;if(e==="string"||e==="number")o.push(t);else if(Array.isArray(t)){if(t.length){let n=Xt(t);n&&o.push(n)}}else if(e==="object")for(let n in t)t.hasOwnProperty(n)&&t[n]&&o.push(n)}return o.join(" ")}l();l();var j2=1,bT=2;function V2(r,o,t={}){if(t[o])return j2;t[o]=!0;let e=r[o];return yT(r,e,t)}function yT(r,o,t={}){var i;let e=0,{base:n}=o;if(n){let{metadata:s={}}=o,{complexity:a=1}=s;return a}else{e+=bT;let{units:s={}}=o;for(let a in s){let _=s[a],{id:c,input:p={}}=_;for(let u in p){let d=(i=p[u])!=null?i:{};if(d.data!==void 0){let m=d.data.length}}e+=V2(r,c,t)}}return e}function QS(r,o){let t=tD(o);return t+=vT(o),t+=xT(r,o),t}function vT(r){let{merges:o={}}=r;return J(o).length}function xT(r,o){let t={},{units:e={}}=o,n=0;for(let i in e){let{id:s}=e[i];if(t[s])n+=j2;else{let a=r[s];n+=tD(a),t[s]=!0}}return n}function tD(r){return j2+J(r.inputs||{}).length+J(r.outputs||{}).length}var W2=14,K2={},_h=(r,o,t=!0)=>{let e;return t?(K2[o]||(e=_h(r,o,!1)),e=K2[o]):e=IT(r,o),K2[o]=e,e},So=(r,o,t=!0)=>{let e=_h(r,o,t),n=W2+Math.log2(e)/3;return Math.round(n)},IT=(r,o)=>{let t=Bt(r,o),e=t.metadata&&t.metadata.complexity;return e===void 0&&(e=V2(r,o)),e};l();l();l();l();var eD=(r,o,t,e=120)=>(t==="input"?210:30)+e*(r+1)/(o+1);var b0=(r,o,t,e,n,i,s,a=120,_=24/3)=>n0(n,i,e+_+s+4,eD(r,o,t,a));l();l();l();var ET="0 0 24 24",Y2=(r,o)=>{let{api:{document:{createElementNS:t}},cache:{spriteSheetMap:e},foreground:{sprite:n}}=r;if(e[o])return;let i=Wb[o];if(!i)return;let s=t(Ut,"symbol");s.id=o,s.setAttribute("viewBox",ET);let a=t(Ut,"path");a.setAttribute("d",i),s.appendChild(a),n.appendChild(s),e[o]=!0};var nD=S({display:"flex",width:"100%",height:"100%",strokeWidth:"1.5px",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor",fill:"transparent"},ne("none")),$e=class extends W{constructor(t,e){super(t,e);let{className:n,icon:i,style:s={},x:a,y:_,width:c,height:p,tabIndex:u}=t,{title:d}=this.$props,m=this.$system.api.document.createElementNS(Ut,"svg");if(n&&m.classList.add(n),a!==void 0&&m.setAttribute("x",`${a}`),_!==void 0&&m.setAttribute("y",`${_}`),c!==void 0&&m.setAttribute("width",`${c}`),p!==void 0&&m.setAttribute("height",`${p}`),u!==void 0&&(m.tabIndex=u),d){let f=this.$system.api.document.createElementNS(Ut,"title");f.innerHTML=d,m.appendChild(f)}this._svg_el=m;let h=this.$system.api.document.createElementNS(Ut,"use");h.setAttribute("href",`#${i}`),this._icon_sprite_el=h,m.appendChild(h),this.$element=m,i!==void 0&&Y2(this.$system,i),sn(this,this.$element,S(S({},nD),s)),this.preventDefault("touchstart"),this._prop_handler=_t(S({},N2(this,this.$element,nD)),{icon:(f="")=>{Y2(this.$system,f),this._icon_sprite_el.setAttribute("href",`#${f}`)}})}onPropChanged(t,e){this._prop_handler[t](e)}};l();var wT={fill:"currentColor",stroke:"currentColor",strokeWidth:"1px"},Jn=class extends W{constructor(t,e){super(t,e);let{className:n,style:i={},x:s=50,y:a=50,r:_=50}=t,c=this.$system.api.document.createElementNS(Ut,"circle");n!==void 0&&(c.classList.value=n),vt(c,S(S({},wT),i)),c.setAttribute("cx",`${s}`),c.setAttribute("cy",`${a}`),c.setAttribute("r",`${_}`),this._circle_el=c,this.$element=c}onPropChanged(t,e){t==="className"?this._circle_el.className.value=e:t==="style"?vt(this._circle_el,e):t==="x"?this._circle_el.setAttribute("cx",`${e}`):t==="y"?this._circle_el.setAttribute("cy",`${e}`):t==="r"&&this._circle_el.setAttribute("r",`${e}`)}};l();var Sn=class extends W{constructor(t,e){super(t,e);let{className:n,style:i={}}=this.$props,s=this.$system.api.document.createElementNS(Ut,"g");n!==void 0&&(s.classList.value=n),vt(s,i),this._g_el=s,this.$element=s}onPropChanged(t,e){t==="style"&&vt(this._g_el,e)}};l();var Fs=class extends W{constructor(t,e){super(t,e);let{className:n,style:i={},x1:s=0,y1:a=0,x2:_=0,y2:c=0}=t,p=this.$system.api.document.createElementNS(Ut,"line");n!==void 0&&(p.classList.value=n),vt(p,i),p.setAttribute("x1",`${s}`),p.setAttribute("y1",`${a}`),p.setAttribute("x2",`${_}`),p.setAttribute("y2",`${c}`),this._line_el=p,this.$element=p}onPropChanged(t,e){t==="className"?this._line_el.className.value=e:t==="style"?vt(this._line_el,e):(t==="x1"||t==="y1"||t==="x2"||t==="y2")&&this._line_el.setAttribute(t,`${e}`)}};l();var iD={fill:"currentColor"},Dn=class extends W{constructor(t,e){super(t,e);let{className:n,style:i={},x:s=0,y:a=0,rx:_=0,ry:c=0,width:p=100,height:u=100}=t,d=this.$system.api.document.createElementNS(Ut,"rect");n!==void 0&&(d.classList.value=n),vt(d,S(S({},iD),i)),d.setAttribute("x",`${s}`),d.setAttribute("y",`${a}`),d.setAttribute("rx",`${_}`),d.setAttribute("ry",`${c}`),d.setAttribute("width",`${p}`),d.setAttribute("height",`${u}`),this._rect_el=d,this.$element=d}onPropChanged(t,e){t==="className"?this._rect_el.className.value=e:t==="style"?vt(this._rect_el,S(S({},iD),e)):(t==="x"||t==="y"||t==="rx"||t==="ry"||t==="width"||t==="height")&&this._rect_el.setAttribute(t,`${e}`)}};l();var oD=S({display:"block",width:"100%",height:"100%",color:"currentColor",boxSizing:"border-box",cursor:"default"},ne("none")),fn=class extends W{constructor(t,e){super(t,e);let{className:n,style:i={},width:s,height:a,stroke:_="currentColor",strokeWidth:c=0,viewBox:p,preserveAspectRatio:u="none",title:d,tabIndex:m}=t,h=this.$system.api.document.createElementNS(Ut,"svg");if(n!==void 0&&(h.classList.value=n),p&&h.setAttribute("viewBox",p),u&&h.setAttribute("preserveAspectRatio",u),s!==void 0&&h.setAttribute("width",`${s}`),a!==void 0&&h.setAttribute("height",`${a}`),m!==void 0&&(h.tabIndex=m),_!==void 0&&h.setAttribute("stroke",`${_}`),c!==void 0&&h.setAttribute("stroke-width",`${c}`),d){let f=this.$system.api.document.createElementNS(Ut,"title");f.innerHTML=d,h.appendChild(f)}h.setAttribute("preserveAspectRatio","xMidYMid meet"),vt(h,S(S({},oD),i)),this._svg_el=h,this.$element=h,this.$unbundled=!1,this.$primitive=!0}onPropChanged(t,e){t==="className"?this._svg_el.className.value=e:t==="style"?vt(this._svg_el,S(S({},oD),e)):t==="viewBox"?e===void 0?this._svg_el.removeAttribute("viewBox"):this._svg_el.setAttribute("viewBox",e):t==="width"?e===void 0?this._svg_el.removeAttribute("width"):this._svg_el.setAttribute("width",`${e}`):t==="height"?this._svg_el.setAttribute("height",`${e}`):t==="strokeWidth"?e===void 0?this._svg_el.removeAttribute("stroke-width"):this._svg_el.setAttribute("stroke-width",`${e}`):t==="tabIndex"&&(this._svg_el.tabIndex=e)}};l();var sD={fill:"currentColor"},Do=class extends W{constructor(t,e){super(t,e);let{style:n={},className:i,value:s,x:a,y:_,dx:c,dy:p,textAnchor:u="start"}=this.$props,d=this.$system.api.document.createElementNS(Ut,"text");vt(d,S(S({},sD),n)),i&&d.classList.add(i),s!==void 0&&(d.textContent=s),a!==void 0&&d.setAttribute("x",`${a}`),_!==void 0&&d.setAttribute("y",`${_}`),c!==void 0&&d.setAttribute("dx",`${c}`),p!==void 0&&d.setAttribute("dy",`${p}`),u!==void 0&&d.setAttribute("text-anchor",u),this._text_el=d,this.$element=d}onPropChanged(t,e){t==="style"?vt(this._text_el,S(S({},sD),e)):t==="value"?this._text_el.textContent=e:t==="dy"?this._text_el.setAttribute("dy",`${e!=null?e:""}`):t==="dx"?this._text_el.setAttribute("dx",`${e!=null?e:""}`):t==="x"?this._text_el.setAttribute("x",`${e!=null?e:""}`):t==="y"?this._text_el.setAttribute("y",`${e!=null?e:""}`):t==="textAnchor"&&this._text_el.setAttribute("text-anchor",e)}};var PT=120,rD=90,aD=90;function kT(r,o=15){let t=[],e=r.split(" "),n=e.length,i=[],s=0;for(let a=0;a<n;a++){let _=e[a],c=_.length;s+i.length-1+c>o&&(t.push(i.join(" ")),i=[],s=0),i.push(_),s+=c}return i.length>0&&t.push(i.join(" ")),t}var Bs=class extends W{constructor(t,e){super(t,e);this._render=t=>{let{specs:e}=this.$props,n=e[t],{name:i=""}=n,s=rD,a=aD,_=[],{inputs:c={},outputs:p={}}=n,u=So(e,t)-2,d=5-3,m=on(e,t),h=s/2,f=a/2,b=J(c).filter(P=>{let k=c[P],{defaultIgnored:M}=k;return!M}),g=J(p).filter(P=>{let k=p[P],{defaultIgnored:M}=k;return!M}),v={input:b.length,output:g.length},x=(P,k)=>{let M=v[P],{x:U,y:L}=b0(k,M,P,d,h,f,u,PT,24/9),O=Me(U,L,h,f),R={x:-O.x,y:-O.y},N=new Jn({className:Xt("unit-class-pin",`unit-class-${P}`),x:U,y:L,r:d,style:{strokeWidth:"1px",stroke:"currentColor",fill:P==="output"?"currentColor":"none"}},this.$system);_.push(N);let{x:z,y:F}=ta(U,L,d,O),{x:V,y:j}=m?ea(h,f,2*u,2*u,R):ta(h,f,u,R),H=new Fs({className:Xt("unit-interface-link",`unit-interface-link-${P}`),x1:z,y1:F,x2:V,y2:j,style:{strokeWidth:"1px",stroke:"currentColor"}},this.$system);_.push(H)};b.forEach((P,k)=>{x("input",k)});let I=n.metadata&&n.metadata.icon||null,E;m?E=new Dn({className:"unit-class-core-shape",x:h-u,y:f-u,width:2*u,height:2*u,style:{fill:"none",stroke:"currentColor",strokeWidth:"1px"}},this.$system):E=new Jn({className:"unit-class-core-shape",x:h,y:f,r:u,style:{fill:"none",stroke:"currentColor",strokeWidth:"1px"}},this.$system);let D=new $e({className:"unit-class-core-icon",icon:I,x:h-u/2,y:f-u/2,width:u,height:u,style:{color:"currentColor"}},this.$system),w=new Sn({className:"unit-class-core"},this.$system);w.appendChild(E),w.appendChild(D),_.push(w),g.forEach((P,k)=>{x("output",k)});let T=new Sn({},this.$system),C=kT(i);for(let P=0;P<C.length;P++){let k=C[P],M=new Do({value:k,dx:`${s/2}`,dy:`${a/2+u+12+P*9}`,style:{fontSize:"9px"},textAnchor:"middle"},this.$system);T.appendChild(M)}_.push(T),this._svg_g.setChildren(_)};let{id:n,className:i,style:s}=t,a=rD,_=aD,c=new fn({className:Xt("unit-class",i),width:a,height:_,style:S({width:`${a}px`,height:`${_}px`,color:"currentColor",pointerEvents:"none"},s),viewBox:`0 0 ${a} ${_}`},this.$system);this._svg=c;let p=new Sn({className:Xt("unit-class-g",i),style:{pointerEvents:"all"}},this.$system);this._svg_g=p,this._svg.registerParentRoot(p),n&&this._render(n);let u=yt(e);this.$element=u,this.$slot.default=c,this.registerRoot(c)}onPropChanged(t,e){t==="id"&&this._render(e)}};l();l();var _D=(r,o,t,e,n,i,s)=>{let a=pt(t),_=iy(a),c=o[o.length-1],p=!1,u=B(r),d=B(o),m=n,h=i,f,b=()=>{let v=We(o),x=_o(r,o,-1)||v&&_o(r,v,-1);if(x){p=!0;let I=re(u,x);t===""&&(u=ai(u,o)),d=x,(!d||!re(u,d))&&(d=We(o)),m=I.value.length,h=m}else if(v){let I=re(r,v);if(I.type==="array literal"||I.type==="object literal"){let E=We(v);if(E){let D=re(r,E);D&&(D.type==="array literal"||D.type==="object literal")&&(p=!0,d=[...E,0],u=xi(r,d,pt("")),m=0,h=0)}}}},g=()=>{var I;let v=_o(r,o,1),x=We(o);if(v){if(t===""){if(u=ai(u,o),d=(I=_o(u,o,1))!=null?I:_o(u,[],1),d){let E=re(u,d);E&&(E.type==="array literal"||E.type==="object literal")&&(d=[...d,0])}}else{d=v,(!d||!re(u,d))&&(d=x);let E=re(u,d);E&&(E.type==="array literal"||E.type==="object literal")&&E.children.length===0&&(p=!0,d=[...d,0])}p=!0,m=0,h=0}else if(x){let E=re(r,x);if(E.type==="array literal"||E.type==="object literal"){let D=We(x);if(D){let w=re(r,D);w&&(w.type==="array literal"||w.type==="object literal")&&(p=!0,d=[...D,x.length],u=xi(r,d,pt("")),m=0,h=0)}}}};if(e==="Backspace")if(t===""&&o.length>0){let v=We(o),x=re(r,v),I=!1;x.type==="array literal"||x.type==="object literal"?x.children.length===0?(p=!0,u=Fe(r,v,pt("")),d=v):(p=!0,u=ai(r,o),d=_o(r,o,-1),d||(d=_o(u,o,1),d&&(I=!0)),d||(d=[0])):x.type==="key value"&&(p=!0,u=ai(r,o),d=v);let E=re(u,d);if(E){let D=Kg(E),w=sx(E);if(p=!0,Lr(w.type)){let T=[...d,...D];w=xi(w,[0],pt("")),u=Fe(u,T,w),d=[...T,0],m=0,h=0}else I?(m=0,h=m):(m=w.value.length,h=m)}}else if((t==='""'||t==="''"||t==="``")&&n===1)p=!0,u=Fe(r,o,pt(""));else{let v=We(o);if(v){let x=re(r,v),I=v[v.length-1],E=We(v);if(x.type==="key value"){if(c===0)n===0&&i===0&&I>0&&b();else if(c===1&&n===0&&i===0){let D=re(x,[0]),w=D.value+t;u=Fe(r,v,pt(w)),p=!0,d=v,m=D.value.length,h=m}}else if(x.type==="array literal"){if(c>0){if(n===0&&i===0){let D=ox(u,o,-1),w=re(u,D),T=w.value+t;p=!0,u=ai(u,o),u=Fe(u,D,pt(T)),d=D,m=w.value.length,h=m}}else if(n===0&&i===0){p=!0;let D=x.children.map(({value:w})=>w).join(",");u=Fe(u,v,pt(D)),d=v,m=0,h=0}}else if(x.type==="object literal"&&c>0&&n===0&&i===0){let D=re(x,[c-1]),w=[...v,c-1];u=ai(r,o),u=Fe(u,w,pt(D.value+t)),D.type==="key value"?d=[...w,1]:d=w,p=!0,m=D.value.length,h=m}}}else if(e==="ArrowLeft")n===0&&b();else if(e==="ArrowRight")n===t.length&&g();else if(e!=="ArrowUp"){if(e!=="ArrowDown"){if(e!=="Tab"){if(e===","){let v=We(o);if(v){let x=re(r,v);if(Lr(x.type)&&(a.type!=="string literal"||n===t.length)){if(x.type==="array literal"||x.type==="object literal"){if(p=!0,t!==""){let I=t.substring(0,n),E=t.substring(i),D=B(d);D[D.length-1]+=1;let w=!!re(u,D),T=n>0&&(n<t.length||!w);(w||T)&&(d[d.length-1]+=1),T&&(u=Fe(u,o,pt(I)),u=xi(u,d,pt(E))),m=0,h=0}}else if(x.type==="key value"){p=!0;let I=v[v.length-1],E=We(v);n===t.length?(d=[...E,I+1],u=xi(u,d,pt("")),m=0,h=0):(t===""&&(u=ai(r,o)),d=[...v],d[d.length-1]+=1,u=xi(u,d,pt("")),m=0,h=0)}}}}else if((e==="]"||e==="}")&&(_||t==="")){let v=We(o);if(v){let x=re(r,v),I=We(v);if(x.type==="array literal"&&e==="]"||x.type==="object literal"&&e==="}")if(t===""&&(p=!0,u=ai(u,o)),I){let E=re(u,I);E.type==="array literal"||E.type==="object literal"?(p=!0,d=[...v],d[d.length-1]+=1,u=xi(u,d,pt("")),m=0,h=0):E.type==="key value"&&(p=!0,d=[...I],d[d.length-1]+=1,u=xi(u,d,pt("")),m=0,h=0)}else p=!0;else if(x.type==="key value"&&e==="}"){let E=We(I);if(E){p=!0,t===""&&(u=ai(r,o)),d=[...I],d[d.length-1]+=1;let D=re(u,E);D.type==="array literal"||D.type==="object literal"?(p=!0,d=[...I],d[d.length-1]+=1,u=xi(u,d,pt("")),m=0,h=0):D.type==="key value"&&(p=!0,d=[...E],d[d.length-1]+=1,u=xi(u,d,pt("")),m=0,h=0)}else p=!0}}else t===""&&(p=!0,d=[...o,0],u=Fe(r,o,pt(s?"{}":"[]")),m=1,h=1)}else if(e===":"){let v=Wg(r,o);v&&v.type==="object literal"&&(p=!0,u=Fe(r,o,pt(`${a.value.substring(0,n)}:${a.value.substring(i)}`)),d=[...o,1],m=0,h=0)}else if(e==="["||e==="{"){if(t===""){let v=We(o),x=v&&re(r,v);(!x||(x.type!=="key value"||x.type==="key value"&&c!==0)&&x.type!=="object literal")&&(p=!0,d=[...o,0],u=Fe(r,o,pt(e==="{"?"{}":"[]")),m=0,h=0)}else if(n===0&&i===t.length){p=!0;let v=e==="["?`[${t}]`:`{${t}}`;u=Fe(r,o,pt(v));let x=re(u,o);e==="["&&x.type==="array literal"||e==="{"&&x.type==="object literal"?(d=ix(u,o,1),m=0,h=t.length,f="forward"):(d=B(o),m=1,h=t.length+1,f="forward")}}else if(e==="'"||e==='"')if(t==="")p=!0,u=Fe(r,o,pt(e==="'"?"''":'""')),d=o,m=1,h=1;else if(n===0&&i===t.length){p=!0;let v=e==="'"?`'${t}'`:`"${t}"`;u=Fe(r,o,pt(v)),m=1,h=t.length+1,f="forward"}else{let v=e==="'"?"'":'"';t.endsWith(v)&&n===t.length-1&&t[n-1]!=="\\"&&(p=!0,m=t.length,h=m)}else if(e==="`"&&!s)if(t==="")p=!0,u=Fe(r,o,pt("``")),d=o,m=1,h=m;else{let v="`";t.endsWith(v)&&n===t.length-1&&t[n-1]!=="\\"&&(p=!0,m=t.length,h=m)}}}}return[p,{nextRoot:u,nextPath:d,nextSelectionStart:m,nextSelectionEnd:h,nextDirection:f}]};l();l();var Tn=16,ph=6,CT=Tn,cD=6,J2=6,y0=2,Z2=1,Q2=1,tv=7,ev=7,Hs=6,Yi=180,nv=180;function ch(r){if(r==="")return Hs;let o=r.replace(/\n/g,"\\n");return Math.min(Math.max(o.length*6,Hs),Yi)}var pD=r=>2*CT+r.children.reduce((t,e)=>t+iv(e),0),Eo=r=>{if(r.type==="object literal"||r.type==="array literal"){let o=1;return o+=2*ph,o+=Z2,o+=Q2,o+=Math.max(r.children.reduce((t,e)=>t+Eo(e),0),Hs),r.children.length>1&&(o+=(r.children.length-1)*(cD+y0)),o}else return r.type==="key value"?Eo(r.children[0])+J2+y0+Eo(r.children[1]):qi(r)},es=r=>{let{type:o}=r;if(o==="object literal"||o==="array literal"||o==="array expression"||o==="key value"||o==="expression"||o==="or"||o==="and"){if(Eo(r)>Yi)return!0;for(let e of r.children)if(es(e))return!0}return!1};function qi(r){let{value:o,type:t}=r;if(o==="")return Hs;let e,n=Hs;switch(t){case"any":case"invalid":case"generic":case"null":case"regex":case"identifier":case"string literal":case"boolean literal":case"object":case"string":case"number":case"boolean":case"number literal":case"regex literal":case"unit":case"class":case"class literal":case"arithmetic expression":n=ch(o);break;case"array literal":case"object literal":e=Eo(r),e<=Yi?n=e:n=tv+ev+Math.max(r.children.reduce((i,s,a)=>Math.max(i,qi(s)+(a<r.children.length-1?cD+y0:0)),0),Hs);break;case"or":case"and":n=r.children.reduce((i,s,a)=>{let _=Eo(s),c=i+qi(s)+(a<r.children.length-1?ph:0);return c<=Yi?c:Math.max(i,_)},0);break;case"array expression":case"object expression":e=Eo(r.children[0])+2*ph,e<=Yi?n=e:n=qi(r.children[0]);break;case"expression":n=qi(r.children[0])+2*ph;break;case"key value":es(r.children[1])?n=Math.max(qi(r.children[0])+J2,qi(r.children[1])):n=qi(r.children[0])+qi(r.children[1])+J2+y0;break;default:n=Hs}return n}function iv(r){let o,t,e,n=Tn;switch(r.type){case"generic":case"identifier":case"regex":case"string literal":case"boolean literal":case"object":case"string":case"number":case"boolean":case"number literal":case"regex literal":case"unit":case"class":case"class literal":n=Tn;break;case"object literal":case"array literal":case"or":case"and":case"expression":o=Eo(r),e=o>Yi,e?(t=pD(r),n=t):n=Tn;break;case"array expression":case"object expression":o=Eo(r.children[0])+2*ph,e=o>Yi,e?(t=pD(r.children[0]),n=t):n=Tn;break;case"key value":n=iv(r.children[1]);break;default:n=Tn}return n}var X2={};function uD(r){let{value:o}=r;if(X2[o])return X2[o];let t={width:qi(r),height:iv(r)};return X2[o]=t,t}l();function ft(r,o){let t=r.getProp("style");r.setProp("style",S(S({},t),o))}l();var dD={width:"100%",height:"100%",color:"currentColor",boxSizing:"border-box"},st=class extends W{constructor(t,e){super(t,e);let{id:n,className:i,style:s,innerText:a,tabIndex:_,title:c,draggable:p,data:u={},attr:d={}}=this.$props;if(this.$element=this.$system.api.document.createElement("div"),n!==void 0&&(this.$element.id=n),i!==void 0&&(this.$element.className=i),a&&(this.$element.innerText=a),_!==void 0&&(this.$element.tabIndex=_),c&&(this.$element.title=c),p!==void 0&&this.$element.setAttribute("draggable",p.toString()),u!==void 0)for(let m in u){let h=u[m];this.$element.dataset[m]=h}if(d!==void 0)for(let m in d){let h=d[m];this.$element.setAttribute(m,h)}sn(this,this.$element,S(S({},dD),s)),this._prop_handler=S({},me(this,this.$element,dD))}onPropChanged(t,e){this._prop_handler[t](e)}};l();l();function uh(r){return o=>TT(o,r)}function TT(r,o){let{$element:t}=r,e=n=>{let{relatedTarget:i}=n;o&&o({relatedTarget:i},n)};return t.addEventListener("blur",e),()=>{t.removeEventListener("blur",e)}}l();function dh(r){return o=>AT(o,r)}function AT(r,o){let{$element:t}=r,e=n=>{let{relatedTarget:i}=n;o({relatedTarget:i},n)};return t.addEventListener("focus",e),()=>{t.removeEventListener("focus",e)}}l();l();l();function lD(r){return r}function MT(r,o="value",t=lD){return function(e){let n=this[o];e.preventDefault(),e.stopImmediatePropagation();let i=t(r.$element,n);r.set("value",i),r.dispatchEvent(e.type,i)}}var je=class extends W{constructor(t,e,n,i){super(t,e);let{valueKey:s,defaultStyle:a,defaultValue:_="",processValue:c=(h,f)=>f}=i,{style:p={},value:u=_}=t;p=S(S({},a),p),this.$element=n,this.$element[s]=u,vt(n,p);let d=n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement,m=MT(this,s,c);this.$element.addEventListener("change",m),this.$element.addEventListener("input",m),this._prop_handler=S(S({},me(this,this.$element,a)),d?jS(this.$element,s,_):{value:h=>{this.$element.textContent=h}})}onPropChanged(t,e){this._prop_handler[t](e)}};var OT={height:"fit-content",width:"100%",color:"inherit",backgroundColor:"#00000000",padding:"0",fontSize:"18px",border:"none",borderRadius:"0"},wi=class extends je{constructor(o,t){super(o,t,t.api.document.createElement("input"),{valueKey:"value",defaultStyle:OT,defaultValue:""});let{flags:{defaultInputModeNone:e}}=t,{maxLength:n,tabIndex:i}=o;this.$element.type="text",this.$element.spellcheck=!1,this.$element.autocomplete="off",this.$element.autocapitalize="off",this.$element.inputMode="text",e&&(this.$element.inputMode="none"),n!==void 0&&(this.$element.maxLength=n),i!==void 0&&(this.$element.tabIndex=i)}setSelectionRange(o,t,e){this.$element.setSelectionRange(o,t,e)}};var lh=class extends W{constructor(t,e){super(t,e);this._on_input=t=>{let{path:e}=this.$props,n=ch(t);this._input.$element.style.width=`${n}px`,t=t.replace(/\\n/g,`
`),this.dispatchEvent("leafinput",{value:t,path:e})};this._on_keydown=(t,e)=>{let{path:n}=this.$props,{value:i}=this._input.$element,{selectionStart:s}=this._input.$element;this.dispatchEvent("leafkeydown",{value:i,path:n,event:t,_event:e,selectionStart:s},!0)};this._on_focus=(t,e)=>{let{path:n,value:i}=this.$props;this.dispatchEvent("leaffocus",{path:n,value:i,event:t,_event:e})};this._on_blur=(t,e)=>{let{path:n,value:i}=this.$props;this.dispatchEvent("leafblur",{path:n,value:i,event:t,_event:e})};this._on_paste=t=>{let{path:e,value:n}=this.$props;this.dispatchEvent("leafpaste",{path:e,value:n,text:t})};this.focus=(t={preventScroll:!0})=>{this._input.$element.focus(t)};this.blur=()=>{this._input.$element.blur()};let{className:n,style:i,value:s}=t,a=this._parse_value(),_=ch(s),c=Tn,p=new wi({className:Xt("data-tree-leaf",n),style:S({position:"relative",display:"flex",width:`${_}px`,height:`${c}px`,caretColor:"inherit",fontSize:"12px",overflowY:"hidden",overflowX:"hidden"},i),value:a},this.$system);this._input=p,p.addEventListener(ui(this._on_input)),p.addEventListener(dh(this._on_focus)),p.addEventListener(uh(this._on_blur)),p.addEventListener(yo(this._on_keydown)),p.addEventListener(Tl(this._on_paste)),p.preventDefault("paste");let u=yt(e);this.$element=u,this.$slot={default:p},this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({input:p}),this.registerRoot(p)}_parse_value(){let{value:t}=this.$props,e=t;return e=e.replace(/\n/g,"\\n"),e}onPropChanged(t,e){if(t==="data"){let n=ch(e.value),i=this._parse_value();this._input.setProp("value",i),this._input.$element.style.width=`${n}px`}}setSelectionRange(t,e,n){this._input.setSelectionRange(t,e,n)}};var $T={display:"flex",alignItems:"center",textAlign:"center",height:`${Tn}px`,width:"6px",fontSize:"12px",lineHeight:`${Tn}px`},LT={display:"flex",alignItems:"center",textAlign:"center",height:`${Tn}px`,width:"6px",fontSize:"12px",lineHeight:`${Tn}px`},v0=r=>({display:"flex",height:"fit-content",width:"fit-content",flexDirection:r?"column":"row"}),ov=r=>({display:"flex",flexDirection:r?"column":"row",marginLeft:r?`${tv}px`:`${Z2}px`,marginRight:r?`${ev}px`:`${Q2}px`,height:"fit-content",width:"fit-content"}),UT={display:"flex",height:`${Tn}px`,width:"6px",textAlign:"left",fontSize:"12px"},GT={display:"inline-block",width:"2px"},sv={width:"fit-content"},wo=class extends W{constructor(t,e){super(t,e);this._child={};this._leaf=null;this.__primitive=t=>this._primitive(t);this.__key_value=t=>this._key_value(t);this.__array_expression=t=>this._array_expression(t);this.__unit=t=>this._unit(t);this.__object_expression=t=>this._object_expression(t);this.__expression=t=>this._expression(t);this.__object_literal=t=>this._object_literal(t);this.__array_literal=t=>this._array_literal(t);this.__and=t=>this._and(t);this.__or=t=>this._or(t);this.NODE_TYPE_TO_ELEMENT={["any"]:this.__primitive,["invalid"]:this.__primitive,["generic"]:this.__primitive,["null"]:this.__primitive,["identifier"]:this.__primitive,["object"]:this.__primitive,["string"]:this.__primitive,["number"]:this.__primitive,["boolean"]:this.__primitive,["string literal"]:this.__primitive,["boolean literal"]:this.__primitive,["number literal"]:this.__primitive,["regex"]:this.__primitive,["regex literal"]:this.__primitive,["unit"]:this.__unit,["class"]:this.__primitive,["class literal"]:this.__primitive,["arithmetic expression"]:this.__primitive,["prop expression"]:this.__primitive,["key value"]:this.__key_value,["array expression"]:this.__array_expression,["object expression"]:this.__object_expression,["expression"]:this.__expression,["object literal"]:this.__object_literal,["array literal"]:this.__array_literal,["and"]:this.__and,["or"]:this.__or};this._reset=()=>{var _;let{data:t,style:e,invalid:n}=this.$props;this._data=t,this._child={};let i=n?this.__primitive(t):((_=this.NODE_TYPE_TO_ELEMENT[t.type])!=null?_:this.__primitive)(t),{style:s,children:a}=i;this._root.setProp("style",S(S(S({},sv),s),e)),this._root.setChildren(a)};this._child_element=(t,e,n,i,s,a)=>{let{path:_=[],data:c}=this.$props,p=new wo({className:i,style:s,data:e,invalid:a,path:[..._,t],parent:c,appendChildren:n},this.$system);return this._child[t]=p,p};this._object_literal=t=>{let{appendChildren:e=[],parent:n}=this.$props,i=t.children.length===0,s=es(t),a=v0(s),_=this._delimiter({display:s&&n&&n.type==="key value"?"none":"flex"},"{"),c=new st({className:"object-literal-container",style:ov(s)},this.$system);for(let m=0;m<t.children.length;m++){let h=t.children[m],f=this._comma(),b=this._space();if(h.type==="key value"){let g=h,v=this._child_element(m,g,m<t.children.length-1?[f,b]:[],"comma-space");c.appendChild(v)}else if(Gi(h)){let g=h,v=this._child_element(m,g,m<t.children.length-1?[f,b]:[],"comma-space");ft(v,{display:"flex"}),c.appendChild(v)}else if(h.value===""){let g=this._child_element(m,h,m<t.children.length-1?[f,b]:[]);c.appendChild(g)}else{let g=this._child_element(m,h,m<t.children.length-1?[f,b]:[]);c.appendChild(g)}}if(i){let m=this._child_element(0,pt(""));c.appendChild(m)}let p=this._delimiter({},"}"),u=new st({className:"object-literal",style:{display:"flex",width:"fit-content"}},this.$system);return u.setChildren([p,...e]),{style:a,children:[_,c,u]}};this._array_literal=t=>{let{appendChildren:e=[],parent:n}=this.$props,i=t.children.length===0,s=es(t),a=v0(s),_=this._delimiter({display:s&&n&&n.type==="key value"?"none":"flex"},"["),c=new st({className:"array-literal-container",style:S({},ov(s))},this.$system);for(let m=0;m<t.children.length;m++){let h=t.children[m],f=this._comma(),b=this._space(),g=this._child_element(m,h,m<t.children.length-1?[f,b]:[]);c.appendChild(g)}if(i){let m=this._child_element(0,pt(""),[],"key-value-value-tree");c.appendChild(m)}let p=this._delimiter({},"]"),u=new st({style:{display:"flex",width:"fit-content"}},this.$system);return u.setChildren([p,...e]),{style:a,children:[_,c,u]}};this._expression=t=>{let{path:e=[],appendChildren:n=[]}=this.$props,i=t.children.length===0,s=es(t),a=v0(s),_=this._delimiter({display:s&&e[e.length-1]>0?"none":"block"},"("),c=new st({style:S({className:"expression-container"},ov(s))},this.$system);for(let m=0;m<t.children.length;m++){let h=t.children[m],f=this._comma(),b=this._space(),g=this._child_element(m,h,m<t.children.length-1?[f,b]:[]);c.appendChild(g)}if(i){let m=this._child_element(0,pt(""),[],"expression");c.appendChild(m)}let p=this._delimiter({},")"),u=new st({style:{display:"flex",width:"fit-content"}},this.$system);return u.setChildren([p,...n]),{style:a,children:[_,c,u]}};this._key_value=t=>{let{appendChildren:e=[]}=this.$props,n=t.children[1],i=t.children[0],s=es(n),a={display:"flex",flexDirection:s?"column":"row"},_=new st({className:"key-value-key",style:{display:"flex",width:"fit-content"}},this.$system),c=!W4(i.value),p=this._child_element(0,i,[],"key-value-key-tree",{},c);if(_.appendChild(p),s){let b=this._delimiter({},":"),g=this._space();if(_.appendChild(b),_.appendChild(g),n.type==="object literal"){let v=this._delimiter({},"{");_.appendChild(v)}else if(n.type==="array literal"){let v=this._delimiter({},"[");_.appendChild(v)}else if(n.type==="expression"){let v=this._delimiter({},"(");_.appendChild(v)}}let u=this._delimiter({display:s?"none":"block"},":"),d=this._space(),m=new st({className:"key-value-value",style:{display:"flex",width:"fit-content"}},this.$system),h=this._child_element(1,n,e,"key-value-value-tree");return m.appendChild(h),{style:a,children:[_,u,d,m]}};this._primitive=t=>{let{path:e=[],parent:n,appendChildren:i=[]}=this.$props,s={display:"flex"};this._leaf=new lh({style:{padding:"0",textAlign:"center",resize:"none",height:`${Tn}px`,maxWidth:"210px",fontWeight:"inherit",wordWrap:"normal",whiteSpace:"nowrap",background:Lt,backgroundColor:Lt},value:t.value,path:e,parent:n},this.$system);let a=[this._leaf,...i];return{style:s,children:a}};this._unit=t=>{let{specs:e,classes:n}=this.$system,i=Ni(t.value,e,n),s=pt(`\`${i}\``);return this._primitive(s)};this._array_expression=t=>{let{appendChildren:e=[]}=this.$props,n={display:"flex",width:"fit-content"},i=this._delimiter({},"["),s=this._delimiter({},"]"),a=new st({style:{display:"flex",width:"fit-content"}},this.$system);a.setChildren([i,s,...e]);let c=[this._child_element(0,t.children[0],[a],"array-expression")];return{style:n,children:c}};this._object_expression=t=>{let{}=this.$props,e={display:"flex"},n=this._delimiter({},"{"),i=this._delimiter({},"}"),s=new st({style:{display:"flex",width:"fit-content"}},this.$system);s.setChildren([n,i]);let _=[this._child_element(0,t.children[0],[s],"object-expression")];return{style:e,children:_}};this._or=t=>{let{}=this.$props,e=es(t),n=_t(S({},v0(e)),{alignItems:"center"}),i=[];for(let s=0;s<t.children.length;s++){let a=t.children[s],_=this._separator({},"|"),c=this._child_element(s,a,s<t.children.length-1?[_]:[],"or");i.push(c)}return{style:n,children:i}};this._and=t=>{let{}=this.$props,e={display:"flex",alignItems:"center"},n=[];for(let i=0;i<t.children.length;i++){let s=t.children[i],a=this._separator({},"&"),_=this._child_element(i,s,i<t.children.length-1?[a]:[],"and",{alignItems:"center"});n.push(_)}return{style:e,children:n}};this._space=()=>new st({style:S({},GT),innerText:" "},this.$system);this._comma=()=>new st({style:S({},UT),innerText:","},this.$system);this._separator=(t,e)=>new st({className:"separator",style:S(S({},$T),t),innerText:e},this.$system);this._delimiter=(t,e)=>new st({className:"delimiter",style:S(S({},LT),t),innerText:e},this.$system);this.focus=(t={preventScroll:!0})=>{this._leaf&&this._leaf.focus(t)};this.blur=()=>{this._leaf&&this._leaf.blur()};this.getSelectionRange=()=>{if(this._leaf){let t=this._leaf._input.$element.selectionStart||0,e=this._leaf._input.$element.selectionEnd||0;return{start:t,end:e}}return{start:0,end:0}};this.setSelectionRange=(t,e,n)=>{this._leaf&&this._leaf.setSelectionRange(t,e,n)};this.focusLeaf=(t,e)=>{let n=this.getChildAtPath(t);n&&n.focus(e)};this.blurLeaf=t=>{let e=this.getChildAtPath(t);e&&e.blur()};this.getChild=t=>this._child[t]||null;this.getChildAtPath=t=>{let e=this;for(let n of t)if(e)e=e.getChild(n);else throw new Error(`there is no child at ${t}`);return e};let{className:n,style:i}=t,s=new st({className:Xt("root",n),style:S(S({},sv),i)},this.$system);this._root=s,this._reset();let a=yt(e);this.$element=a,this.$slot={default:s},this.setSubComponents({root:s}),this.registerRoot(s)}update(t){if(t.type===this._data.type)if(Lr(t.type)){let e=t.children.length,n=this._data.children.length,i=Math.max(e,n);for(let s=0;s<i;s++){let a=this._data.children[s],_=t.children[s];if(a&&_)this._root.$children[s].update(_);else if(a&&!_){for(let c=n-1;c>=s;c--)this._root.removeChildAt(c);break}else if(!a&&_){let{style:c,children:p}=this.NODE_TYPE_TO_ELEMENT[_.type](_);for(let u of p)this._root.appendChild(u)}else throw new Error("something impossible just happened")}}else this._leaf.setProp("value",t.value);else this._data=t,this._reset()}onPropChanged(t,e){t==="data"?this._reset():t==="style"&&this._root.setProp("style",S(S({},sv),e))}setLeafSelectionRange(t,e,n,i){let s=this.getChildAtPath(t);s&&s.setSelectionRange(e,n,i)}};var Xi=class extends W{constructor(t,e){super(t,e);this._ignore_blur=!1;this.focus=t=>{this._data_tree.focus(t)};this.blur=()=>{this._data_tree.blur()};this.focusChild=(t,e)=>{this._data_tree.focusLeaf(t,e)};this.blurChild=t=>{this._data_tree.blurLeaf(t)};this._onLeafKeyDown=({value:t,path:e,event:n,_event:i})=>{let{key:s,shiftKey:a}=n,_=this._data_tree.getChildAtPath(e),{start:c,end:p}=_.getSelectionRange(),[u,{nextRoot:d,nextPath:m,nextSelectionStart:h,nextSelectionEnd:f,nextDirection:b}]=_D(this._root,e,t,s,c,p,a),g=!li(e,m);u&&(g&&(this._ignore_blur=!0),i.preventDefault(),this._onChange(d,m,h,f,b))};this._onLeafFocus=({path:t,_event:e})=>{if(this._ignore_blur)return;let{relatedTarget:n}=e;(n===null||n&&n instanceof Node&&!this._data_tree.$element.contains(n))&&this.dispatchEvent("datumfocus",{data:this._root,path:t})};this._onLeafBlur=({path:t,_event:e})=>{if(this._ignore_blur)return;if(t.length>0){let i=We(t),s=re(this._root,i);if(t[t.length-1]===s.children.length-1&&re(this._root,t).value===""){let _=ai(this._root,t);this._onChange(_,[])}}let{relatedTarget:n}=e;(n===null||n&&n instanceof Node&&!this._data_tree.$element.contains(n))&&this.dispatchEvent("datumblur",{data:this._root,path:t})};this._onLeafPaste=({value:t,path:e,text:n})=>{let i=this._data_tree.getChildAtPath(e),{start:s,end:a}=i.getSelectionRange(),_=t.slice(0,s)+n+t.slice(a,t.length),c=pt(_),p=Fe(this._root,e,c),u=s+n.length,d=u,m=Kg(p),h=re(p,m);(h.type==="object literal"||h.type==="array literal")&&m.push(0),this._onChange(p,m,u,d,"forward")};this._onLeafInput=({value:t,path:e})=>{let n=this._data_tree.getChildAtPath(e),{start:i}=n.getSelectionRange(),s=Wg(this._root,e),a=!!(s&&(s.type==="key value"||s.type==="object literal")),_=pt(t,!1,a),c=Fe(this._root,e,_),p=e;this._onChange(c,p,i,i)};this._onChange=(t,e,n,i,s)=>{this._root=t,this._ignore_blur=!0,this._data_tree.setProp("data",t),this._data_tree.focusLeaf(e),this._ignore_blur=!1,n!==void 0&&i!==void 0&&this._data_tree.setLeafSelectionRange(e,n,i,s),this.dispatchEvent("datumchange",{data:t})};let{style:n={},data:i}=t,s=new wo({style:n,data:i,path:[],parent:null},this.$system);this._root=i,this._data_tree=s,this._data_tree.addEventListener(mt("leafkeydown",this._onLeafKeyDown)),this._data_tree.addEventListener(mt("leafinput",this._onLeafInput)),this._data_tree.addEventListener(mt("leaffocus",this._onLeafFocus)),this._data_tree.addEventListener(mt("leafblur",this._onLeafBlur)),this._data_tree.addEventListener(mt("leafpaste",this._onLeafPaste));let a=yt(e);this.$element=a,this.$slot=s.$slot,this.registerRoot(s)}onPropChanged(t,e){t==="data"?(this._root=e,this._data_tree.setProp("data",e)):t==="style"&&this._data_tree.setProp("style",e)}};l();l();function ma(){class r extends Cn{constructor(t,e){super(t,e);let n=yt(e);this.$element=n,this.$primitive=!1}}return r}function mh(r,o){let t=ma();return new t(r,o)}l();var hh={z:1,x:0,y:0},rv=(r,o,t,e,n)=>({z:t,x:r-e/2/t,y:o-n/2/t}),mD=r=>`scale(${r.z}) translate(${-r.x}px, ${-r.y}px)`;var fh=(r,o,t)=>({z:r.z,x:r.x-o/r.z,y:r.y-t/r.z});var ha=(r,o,t)=>[(o-r.x)/r.z,(t-r.y)/r.z];l();l();function x0(r,o,t,e={}){let{api:{document:{ResizeObserver:n,PositionObserver:i}}}=r;qb(t);let s=t;w7(s);let a="dark",_=pa(a);s.style.color=_;let c=new n(m=>{let h=m[0],{width:f,height:b}=h.contentRect;D7(d,f,b)}),p=new i(r,(m,h,f,b,g,v,x,I,E)=>{d.$x=m+I,d.$y=h+E,d.$sx=f,d.$sy=b,d.$rx=g,d.$ry=v,d.$rz=x}),d=S({$system:r,$mounted:!1,$disabled:!1,$listenCount:{},$parent:null,$parent_unlisten:null,$width:0,$height:0,$x:0,$y:0,$sx:1,$sy:1,$rx:0,$ry:0,$rz:0,$element:s,$theme:a,$color:_,$children:[],get $context(){return d},$resizeObserver:c,$positionObserver:p,$listener:[],$unlisten:[]},e);bl(d,o),r.context.push(d);for(let m of r.customEvent){let h=`_${m}`;vl(s,h)}return d}var hD={top:"0",width:"100%",height:"100%",overflow:"auto",zIndex:"0"},ln=class extends W{constructor(t,e){super(t,e);this._prop_handler={style:(t={})=>{sn(this,this.$element,S(S({},hD),t)),this._refresh_sub_context_color()},disabled:t=>{this._refresh_sub_context_disabled()},theme:t=>{this._refresh_sub_context_color()},color:t=>{this._refresh_sub_context_color()}};this._refresh_sub_context_disabled=()=>{var e;let{disabled:t}=this.$props;if(t===void 0){let{$disabled:n}=(e=this.$context)!=null?e:{};n?g2(this.$$context):f2(this.$$context)}else t?g2(this.$$context):f2(this.$$context)};this._get_color=()=>{let{color:t,style:e={}}=this.$props,{color:n}=e;if(n)return n;if(t)return t;if(this.$context){let{$color:i}=this.$context;return i}return"currentColor"};this._refresh_sub_context_color=()=>{let t=this._get_color();yl(this.$$context,t)};this._on_context_color_changed=()=>{this._refresh_sub_context_color()};this._on_context_theme_changed=()=>{let{$theme:t}=this.$context;qo(this.$$context,t)};this._on_context_enabled=()=>{this._refresh_sub_context_disabled()};this._on_context_disabled=()=>{this._refresh_sub_context_disabled()};let{className:n,style:i={},color:s,tabIndex:a,theme:_,disabled:c}=t,p=this.$system.api.document.createElement("div");p.classList.add("frame"),n!==void 0&&p.classList.add(n),a!==void 0&&(p.tabIndex=a),this.$element=p;let u={$disabled:!0};s!==void 0&&(u.$color=s),sn(this,this.$element,S(S({},hD),i)),this.$$context=x0(this.$system,null,p,u)}onPropChanged(t,e){this._prop_handler[t](e)}mountChild(t,e=!0){t.mount(this.$$context,e)}onMount(){bl(this.$$context,this.$parent),Zb(this.$$context),this._context_unlisten&&this._context_unlisten(),this._context_unlisten=Be(this.$context,[mt("enabled",this._on_context_enabled),mt("disabled",this._on_context_disabled),mt("themechanged",this._on_context_theme_changed),mt("colorchanged",this._on_context_color_changed)]),this._refresh_sub_context_disabled(),this._refresh_sub_context_color(),this._refresh_sub_context_theme()}_refresh_sub_context_theme(){var i;let{$theme:t}=this.$context,{theme:e}=this.$props,n=(i=e!=null?e:t)!=null?i:"dark";qo(this.$$context,n)}onUnmount(){this._context_unlisten(),this._context_unlisten=void 0,S7(this.$$context),bl(this.$$context,null)}};l();l();var an=.2*(3/3);l();l();var fD=(r,o)=>r.addEventListeners([Ye(()=>{o()}),Je(()=>{o()}),Ee(()=>{o()}),le(()=>{o()}),ue(()=>{o()})]);var fa=.2;function I0(r,o=6e3,t=!0,e,n){let i=null,s=()=>{i&&clearTimeout(i),i=setTimeout(()=>{t=!1,n()},o)};s();let a=fD(r,()=>{s(),e()});return t?e():n(),a}var S0=33,av=S0,gD={position:"absolute",top:"0px",left:"50%",transform:"translateX(-50%)",width:`${S0}px`,height:`${av}px`,borderWidth:"1px",borderStyle:"solid",borderColor:"currentColor",borderBottomLeftRadius:"50%",borderBottomRightRadius:"50%",cursor:"pointer",display:"flex",justifyContent:"center",touchAction:"none",alignItems:"center",zIndex:"1",marginTop:"-4px",transition:`opacity ${an}s linear`},RT=0,ns=class extends W{constructor(t,e){super(t,e);this._id=`${RT++}`;this._x=0;this._get_style_left=()=>`calc(50% + ${this._x+3}px)`;this._get_style=()=>{let{style:t}=this.$props,e=this._get_style_left(),n=`${this._y}px`;return _t(S(S({},gD),t),{left:e,top:n})};this._refresh_style=()=>{let t=this._get_style();this._container.setProp("style",t)};this._translate=t=>{let{$width:e}=this.$context;this._x=Io({a:t,min:S0/2-e/2+0,max:e/2-S0/2-3-3}).a,this._refresh_style()};this._on_context_resize=({width:t,height:e})=>{let{$width:n}=this.$context,s=(t-n)/2;this._translate(this._x)};this._hidden=!1;this._down=!1;this._y=0;this._y_target=0;this._animate_y=t=>{let{api:{animation:{requestAnimationFrame:e,cancelAnimationFrame:n}}}=this.$system;this._y_target=t,this._y_animation&&n(this._y_animation);let s=(this._y_target-this._y)/12*an/.2,a=()=>{let _=this._y_target-this._y,c=_/(2*3);Math.abs(_)>=1?(this._y+=c,this._y_animation=e(a)):this._y=this._y_target,ft(this._container,{top:`${this._y}px`})};this._y_animation=e(a)};let{style:n={},down:i}=this.$props,s=new $e({icon:"chevron-up",style:{transform:"rotate3d(1, 0, 0, 180deg)",width:"24px",height:"24px"}},this.$system);this._icon=s;let a=this._get_style_left(),_=new st({style:_t(S(S({},gD),n),{left:a}),title:"transcend"},this.$system);_.registerParentRoot(s),_.addEventListeners([le(({pointerId:u,clientX:d})=>{let m=d-this._x;_.setPointerCapture(u);let h=_.addEventListeners([Je(({clientX:f})=>{this._translate(f-m)}),ue(()=>{_.releasePointerCapture(u),h()}),Ee(()=>{_.releasePointerCapture(u),h()})])})]),(()=>{let u=()=>{ft(_,{opacity:"1"})},m=I0(_,3e3,!0,u,()=>{this._down&&ft(_,{opacity:`${fa}`})});u()})(),this._container=_;let p=yt(e);this.$element=p,this.$slot=_.$slot,this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({container:_,icon:s}),this.registerRoot(_),this._refresh_style()}onPropChanged(t,e){t==="style"&&this._refresh_style()}onMount(){let{}=this.$context;this._translate(this._x),this._context_unlisten=Be(this.$context,[Un(this._on_context_resize)])}onUnmount(){this._context_unlisten()}up(t=!0){this._down=!1,ft(this._icon,{transform:"rotate3d(1, 0, 0, 0deg)",transition:t?`transform ${an}s linear`:""})}down(t=!0){this._down=!0,ft(this._icon,{transform:"rotate3d(1, 0, 0, 180deg)",transition:t?`transform ${an}s linear`:""})}hide(t=!0){this._hidden=!0,t?this._animate_y(-av):(this._y=-av,ft(this._container,{top:`${this._y}px`}))}show(t=!0){this._hidden=!1,t?this._animate_y(0):(this._y=0,ft(this._container,{top:`${this._y}px`}))}};l();l();var Ji=an*1e3,NT=(r,o)=>r.map(e=>`${e} ${an}s ${o}`).join(", "),Gn=(...r)=>NT(r,"linear");var An=(r,...o)=>r?Gn(...o):"";l();function zT(r,o){for(let t in o){let e=o[t];r.setAttribute(t,e)}}function _v(r,o){zT(r,o)}l();function ga(r,o){for(let t in o){let e=o[t];r.setProp(t,e)}}l();function ba(r,o=100,t=!1){let e;return function(){let i=this,s=arguments;function a(){t||r.apply(i,s),e=null}e?clearTimeout(e):t&&r.apply(i,s),e=setTimeout(a,o)}}l();function FT(r,o){let t=[];for(let e=0;e<r.length;e=e+o){let n=r[e];t.push(n)}return t}function bD(r,o){let t=F7(r,o);return t>=0&&t<=22.5||t>337.5&&t<360?"W":t>22.5&&t<=67.5?"NW":t>67.5&&t<=112.5?"N":t>112.5&&t<157.5?"NE":t>157.5&&t<=202.5?"E":t>202.5&&t<=240?"SE":t>240&&t<=300?"S":"SE"}function yD(r,o=15){let t=r,e=Math.floor(t.length*.2),n=Math.floor(t.length*.8);t=t.slice(e,n);let i=t.length-1,s,a;s=t[0];let _=s.x,c=s.y,p=0;for(let h=1;h<t.length;h++){a=t[h];let f=Math.atan2(a.y-s.y,a.x-s.x);p+=f,s=a,_+=s.x,c+=s.y}let u=p/i;s=t[0];let d=0;for(let h=1;h<t.length;h++){a=t[h];let f=Math.atan2(a.y-s.y,a.x-s.x);d+=Math.pow(f-u,2),s=a}if(Math.sqrt(1/i*d)<o*y2){let h=r[0],f=r[r.length-1],b=_/t.length,g=c/t.length,v=Math.sqrt(Math.pow(b-h.x,2)+Math.pow(g-h.y,2)),x=Math.sqrt(Math.pow(b-f.x,2)+Math.pow(g-f.y,2)),I=b-v*Math.cos(u),E=g-v*Math.sin(u),D=b+x*Math.cos(u),w=g+x*Math.sin(u);return{x0:I,y0:E,x1:D,y1:w}}else return null}function vD(r){r=FT(r,2);let o=0,t=r[0],e=r[1],n=bD(e,t),i=r.length-1,s=0,a=0,_=0,c=0,p=0,u=0,d=0,m=0;for(let P=2;P<=i;P++){t=e,e=r[P];let k=bD(e,t);switch(n){case"E":s++,a+=t.y,(k==="E"||k==="S"||k==="N")&&o++;break;case"N":u++,p+=t.x,(k==="N"||k==="E"||k==="W")&&o++;break;case"W":c++,_+=t.y,(k==="W"||k==="N"||k==="S")&&o++;break;case"S":m++,d+=t.x,(k==="S"||k==="W"||k==="E")&&o++;break;default:break}n=k}if(s<3||c<3||m<3||u<3||o/i<2/3)return null;let h=a/s,f=_/c,b=p/u,g=d/m,v=Math.min(b,g),x=Math.min(h,f),I=Math.max(b,g),E=Math.max(h,f),D=v,w=x,T=I-v,C=E-x;return{x:D,y:w,width:T,height:C}}function xD(r,o=.2){let t=Ls(r),e=r.length,n=0;for(let _=0;_<e;_++){let c=r[_],p=He(t,c);n+=p}let i=n/e,s=0;for(let _=0;_<e;_++){let c=r[_],p=He(t,c);s+=Math.pow(p-i,2)}if(Math.sqrt(s/(e-1))<o*i){let _=n/e,c=t.x,p=t.y;return{x:c,y:p,r:_}}else return null}l();function ID(r,o=!1){return t=>BT(t,r,o)}function BT(r,o,t=!1){let{$element:e}=r,n=i=>{let{detail:s}=i;o(s)};return e.addEventListener("dragenter",n,t),()=>{e.removeEventListener("dragenter",n,t)}}l();function SD(r,o=!1){return t=>HT(t,r)}function HT(r,o,t=!1){let{$element:e}=r,n=i=>{let{$context:s}=r,a=_t(S({},go(s,i)),{dataTransfer:null});o(a,i)};return e.addEventListener("dragleave",n),()=>{e.removeEventListener("dragleave",n)}}l();function DD(r,o=!1){return t=>jT(t,r,o)}function jT(r,o,t=!1){let{$element:e}=r,n=i=>{let{$context:s}=r,a=_t(S({},go(s,i)),{dataTransfer:null});o(a,i)};return e.addEventListener("dragover",n,t),()=>{e.removeEventListener("dragover",n,t)}}l();l();var mA=tE();function eE(r){return mA(r)}l();function w0(r){return r.$element instanceof Text||nE(r.$element)}function nE(r){return r instanceof HTMLDivElement&&r.getAttribute("contenteditable")==="true"}function hA(r,o,t,e,n,i,s=(a,_,c)=>Pe(r,c,a,n,i)){let{$system:a}=o,{api:{layout:{reflectChildrenTrait:_}}}=a,d=o.$parentChildren.reduce((v,x)=>{let I=x.getRootBase(),E=[],D=x,w=x.$parent;for(;w;){let T=o,C=!1;for(;T;){if(D.getSubComponentId(o.$parent)){C=!0;break}T=T.$parent}if(C)break;let P=w.getSubComponentId(D);E.unshift(P),D=w,w=w.$parent}return[...v,...I.map(([T,C])=>[[...E,...T],C])]},[]).map(([v,x])=>s(e,v,x)).filter(({position:v})=>v!=="fixed"&&v!=="absolute",[]),m=t.width==="fit-content",h=t.height==="fit-content",f=Ie(o,n);m&&(f.width=e.width),h&&(f.height=e.height);let b=_(f,t,d,[],v=>Al(r,o,"",v,{},(x,I)=>s(e,x.split("/"),I)));return N7(b)}function Pe(r,o,t,e,n=!1,i=(s,a,_)=>Pe(r,_,s,e,n)){let{$node:s}=o;return fA(r,o,s,t,e,n,i)}function fA(r,o,t,e,n,i=!1,s=(a,_,c)=>Pe(r,c,a,n,i)){var p;let a=Gs(t),_=a.width==="fit-content",c=a.height==="fit-content";if(t instanceof Text){let u=o.getFontSize(),{textContent:d}=o.$element,{width:m,height:h}=n(d,u);return{width:`${m}px`,height:`${h}px`}}if(t instanceof HTMLDivElement&&t.getAttribute("contenteditable")==="true"&&(_||c)){let u=o.getFontSize(),{textContent:d}=o.$element,{width:m,height:h}=n(d,u);_&&(a.width=`${m}px`),c&&(a.height=`${h}px`)}if(a.display==="contents")return{width:"100%",height:"100%"};if(t instanceof HTMLCanvasElement){let u=d=>{let m=o.getProp(d);if(m!==void 0)if(typeof m=="string"){if(Zo(m)){let h=m.substring(0,m.length-2);a[d]=`${h}%`}}else a[d]=`${m}px`;else a[d]=`${t[d]}px`};u("width"),u("height")}if(t instanceof HTMLInputElement){if((t.type==="text"||t.type==="number"||t.type==="password")&&a.height==="fit-content"){let{value:u}=t,d=t.style.fontSize,m=(p=A2(d))!=null?p:14,{height:h}=n(u,m);a.height=`${h}px`}t.type==="range"&&(a.height="18px")}else t instanceof HTMLSelectElement&&(a.height="18px");if(t instanceof SVGPathElement){let u=t.getAttribute("d"),d=eE(u);a.width=`${d.width}px`,a.height=`${d.height}px`}if(t instanceof SVGRectElement&&(a.width=`${t.width.animVal.value}px`,a.height=`${t.height.animVal.value}px`),t instanceof SVGCircleElement){let d=2*t.r.animVal.value,m=d;a.width=`${d}px`,a.height=`${m}px`}if(i&&(_||c)){let{width:u,height:d}=hA(r,o,a,e,n,i,s);_&&(a.width=`${u}px`),c&&(a.height=`${d}px`)}return a}l();function Zi(r,o){let t=r;for(;t;){if(t.$ref[o])return t.$ref[o];t=t.$slotParent}return null}l();function iE(r){if(!(r instanceof HTMLElement)){let n=document.createRange();return n.selectNodeContents(r),n.getClientRects()[0]||{width:0,height:0}}let o=r.getBoundingClientRect(),{width:t,height:e}=o;return{width:t,height:e}}l();function P0(r,o){let{mergeId:t,unitId:e,pinId:n}=o;return t?At(t):ut(e,r,n)}var oE=(r,o)=>{r[o]={next:{},previous:{}}},sE=(r,o,t)=>{let e=r[o],n=r[t];e.next[t]=n,n.previous[o]=e},rE=(r,o,t)=>{let e=r[o],n=r[t];delete e.next[t],delete n.previous[o]},aE=(r,o,t,e)=>{let n=r[t],i=r[o];delete i.next[t],delete n.previous[o];let s=r[e];i.next[e]=s,s.previous[o]=i},_E=(r,o,t,e)=>{let n=r[e],i=r[o],s=r[t];delete i.next[e],delete n.previous[o],s.next[e]=n,n.previous[t]=s},pE=(r,o)=>{let t=r[o],{next:e,previous:n}=t;for(let i in e){let s=r[i];delete s.previous[o]}for(let i in n){let s=r[i];delete s.next[o]}delete r[o]},cE=(r,o,t,e={})=>{Y(r,(n,i)=>{uv(i,r,o,t,e)})},uv=(r,o,t,e,n)=>{if(n[r])return;n[r]=!0;let{previous:i,next:s}=o[r],a;t[r]?a=t[r]:(a=Ti(e),t[r]=a,e[a]=new Set([r])),Y(i,(_,c)=>{t[c]=a,e[a].add(c),uv(c,o,t,e,n)}),Y(s,(_,c)=>{t[c]=a,e[a].add(c),uv(c,o,t,e,n)})};l();var dv={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden",touchAction:"none"};l();l();var k0={info:"q",add:"s",remove:"d",change:"f",data:"a",multiselect:"Shift"};l();var uE={q:"info",f:"change",d:"remove",s:"add",a:"data",Shift:"multiselect"};var dE=(r,o)=>{let{$system:t}=r,e={},n=[];for(let a in k0){let _=k0[a];X7(t,_)&&(e[_]=!0,o(a)),n.push({combo:_,strict:!1,multiple:!0,keydown:(c,p)=>{let{ctrlKey:u}=p;u||_===c&&(e[c]=!0,o(a))},keyup:c=>{if(delete e[c],c===k0[a]){let p=J(e),u=p.length;u>0?o(uE[p[u-1]]):o("none")}}})}let i=bo(n);return r.addEventListener(i)};l();var lv={},C0=(r,o,t)=>{let e=`${o.value}/${t.value}`;if(lv[e])return lv[e];{let n=se(r,o,t);return lv[e]=n,n}},lE=(r,o,t,e,n)=>t==="input"&&n==="input"?C0(r,o,e)||C0(r,e,o):t==="input"&&n==="output"?C0(r,e,o):t==="output"&&n==="input"?C0(r,o,e):!0;l();function mE(r,o,t={},e=null){let{root:n,api:{document:{createElement:i}}}=r,s=i("div");s.style.color="currentColor",s.style.borderColor="currentColor",s.style.borderWidth="1px",s.style.borderStyle="solid",s.style.borderRadius="3px",s.innerText=o,s.style.width="fit-content",s.style.maxWidth="calc(100% - 180px)",s.style.maxHeight="calc(100% - 180px)",s.style.cursor="pointer",s.style.position="absolute",s.style.top="90px",s.style.wordBreak="break-all",s.style.textAlign="center",s.style.left="50%",s.style.maxHeight="90px",s.style.overflow="auto",s.style.transform="translateX(-50%)",s.style.padding="6px",s.style.zIndex="1";for(let p in t){let u=t[p];s.style[p]=u}n.shadowRoot.appendChild(s);let a=!0,_=()=>{a=!1,c!==void 0&&(clearTimeout(c),c=void 0),n.shadowRoot.removeChild(s)};s.onclick=()=>{_()};let c;typeof e=="number"&&(c=setTimeout(()=>{_()},e))}l();var gA=1,bA=[1],yA=[1],vA=2,xA=[0,1],IA=[1,1],SA=9,DA=[0,1/2,3/4],EA=[2,3,4],wA=6,PA=[0,.5,.5,1],kA=[1,2,2,1],CA=[gA,vA,SA,wA],TA=[[bA,yA],[xA,IA],[DA,EA],[PA,kA]],os=class extends Re{constructor({alpha:t=.25,alphaMin:e=.001,alphaTarget:n=0,alphaDecay:i,velocityDecay:s=.2,n:a=1,t:_=3/3,stability:c=1,force:p=zt}){super();this._paused=!0;this._alpha=1;this._stability=1;this._n=1;this._t=1;this._force=zt;this._tick=()=>{if(this._alpha+=(this._alphaTarget-this._alpha)*this._alphaDecay,this._alpha<this._alphaMin){this.stop(),this.emit("end");return}let t={},e=.75,n=this._t,i=4,s=i-1,a=CA[s],_=TA[s],c=_[0],p=_[1];for(let u=0;u<this._n;u++)for(let d=0;d<i;d++){this._force(this._alpha);let m=c[d]*n,h=p[d]*n/a;for(let f in this._nodes){let b=this._nodes[f];if(d===0){let{x:L,y:O,vx:R,vy:N,ax:z,ay:F}=b;t[f]={x:L,y:O,vx:R,vy:N,_vx:R,_vy:N,_ax:z,_ay:F}}let{ax:g,ay:v,fx:x,fy:I}=b,E=t[f],{x:D,y:w,vx:T,vy:C,_vx:P,_vy:k,_ax:M,_ay:U}=E;if(x===void 0){let L=D+P*m,O=T+M*m,R=g-e*O;E._vx=O,E._ax=R,b._x=L,b.x+=O*h,b.vx+=R*h}else b.x=x,b.vx=0;if(d===s&&(b._x=b.x),b.ax=0,I===void 0){let L=w+k*m,O=C+U*m,R=v-e*O;E._vy=O,E._ay=R,b._y=L,b.y+=O*h,b.vy+=R*h}else b.y=I,b.vy=0;d===s&&(b._y=b.y),b.ay=0}}this.emit("tick"),this._frame=requestAnimationFrame(this._tick)};this._alphaDecay=i===void 0?1-Math.pow(e,1/300):i,this._alpha=t,this._alphaMin=e,this._alphaTarget=n,this._velocityDecay=s,this._stability=c,this._n=a,this._t=_,this._force=p}start(){this._paused&&(this._paused=!1,this._frame=requestAnimationFrame(this._tick))}restart(){this.start()}stop(){this._paused=!0,cancelAnimationFrame(this._frame)}nodes(t){return t!==void 0&&(this._nodes=t),this._nodes}links(t){return t!==void 0&&(this._links=t),this._links}alphaDecay(t){return t!==void 0&&(this._alphaDecay=t),this._alphaDecay}alphaMin(t){return t!==void 0&&(this._alphaMin=t),this._alphaMin}alpha(t){return t!==void 0&&(this._alpha=t),this._alpha}velocityDecay(t){return t!==void 0&&(this._velocityDecay=t),this._velocityDecay}alphaTarget(t){return t!==void 0&&(this._alphaTarget=t),this._alphaTarget}stability(t){if(t<1||t>4)throw new Error("simulation stability must be between 1 and 4, inclusive");return t!==void 0&&(this._stability=t),this._stability}};l();var AA="takeInput",MA="removePinData",hE=r=>({type:AA,data:r});var fE=r=>({type:MA,data:r});l();l();function mv({a:r,i:o}){let t=[...r],[e]=t.splice(o,1);return{a:t,"a[i]":e}}l();function hv({"a[]":r,a:o}){return{i:r.indexOf(o)}}l();function fv(r,o,t){let e=[...r];return e.splice(o,0,t),e}var T0=({unitId:r},o)=>{let t=o.children||[];return ni(o,"children",[...t,r])},gE=({id:r,at:o},t)=>{let e=t.children||[];return ni(t,"children",fv(e,o,r))},va=({id:r},o)=>{let t=[...o.children||[]],e=t.indexOf(r);return e>-1?(t.splice(e,1),ni(o,"children",t)):o},A0=({unitId:r,spec:o},t)=>so(t,["subComponents",r],o),gv=({id:r},o)=>(o=$r(o,["subComponents",r]),o),bv=({defaultWidth:r,defaultHeight:o},t)=>oo(t,{defaultWidth:r,defaultHeight:o}),bE=({children:r},o)=>ni(o,"children",r);var M0=({id:r,childId:o},t)=>{let e=nn(t,["subComponents",r,"children"]),{i:n}=hv({"a[]":e,a:o}),{a:i}=mv({a:e,i:n});return t=so(t,["subComponents",r,"children"],i),t},vh=({id:r,childId:o},t)=>{let{subComponents:e}=t,n=e[r]||{},{children:i=[]}=n;return so(t,["subComponents",r,"children"],[...i,o])},yE=({id:r,childId:o,at:t},e)=>{let{subComponents:n}=e,i=n[r]||{},{children:s=[]}=i;return so(e,["subComponents",r,"children"],fv(s,t,o))};l();l();var vE=(r,o,t)=>tt(r,["data",o],t);l();var vv=(r,o,t={},e={})=>{let n;if(t[r])n=t[r];else{let i=o[r];if(!i)throw new Error(`spec not found ${r}`);n=$A(i,o,t,_t(S({},e),{[r]:!0})),t[r]=n}return n};var $A=(r,o,t={},e={})=>{let n;return!!r.base?n=LA(r):n=UA(r,o,t,e),n};var LA=r=>{let o=ve({},{});return Y(r.inputs,({type:t},e)=>{o.input[e]=pt(t)}),Y(r.outputs,({type:t},e)=>{o.output[e]=pt(t)}),o};var UA=(r,o,t={},e={})=>{let n=ve({},{}),i=Iv(r,o,t,e),{inputs:s={},outputs:a={}}=r;Y(s,({plug:h,type:f},b)=>{let g=pt("any");f?g=pt(f):Y(h,({mergeId:v,unitId:x,pinId:I})=>{var D;let E;if(v){let w=(D=r.merges[v])!=null?D:{};if(ie(w))return;let T=x4(w,"input");E=nt(i,[T.unitId,"input",T.pinId],void 0)}else x&&I&&(E=nt(i,[x,"input",I],void 0));E&&(g=js(g,E))}),n.input[b]=g}),Y(a,({plug:h,type:f},b)=>{let g=pt("any");f?g=pt(f):Y(h,({mergeId:v,unitId:x,pinId:I})=>{let E;if(v){let D=r.merges[v],w;Yt(D,(T,C,P)=>{C==="output"&&(w?w=NA(w,nt(i,[T,"output",P],ri)):w=nt(i,[T,"output",P],ri))}),E=w}else x&&I&&(E=nt(i,[x,"output",I],void 0));E&&(g=js(g,E))}),n.output[b]=g});let _=65,c={},{input:p,output:u}=n,d=J(p).sort(),m=J(u).sort();for(let h of d){let f=p[h],b=zi(f);for(let g of b)c[g]||(c[g]=`<${String.fromCharCode(_++)}>`);p[h]=vi(f,c)}for(let h of m){let f=u[h],b=zi(f);for(let g of b)c[g]||(c[g]=`<${String.fromCharCode(_++)}>`);u[h]=vi(f,c)}return n},GA=(r,o)=>{let t=o[r],e=ve({},{}),n=0,i=J(t.inputs),s=J(t.outputs);function a(_,c){e[_][c]=pt(`<${n}>`),n++}return i.forEach(_=>a("input",_)),s.forEach(_=>a("output",_)),e},RA=(r,o)=>{let t=pt(r),e=pt(o);return xv(t,e)},xv=(r,o)=>{if(r.value==="any")return!1;if(o.value==="any")return!0;let t=zi(r).size,e=zi(o).size;return t>e?!1:t<e?!0:r.type==="class"&&o.type==="class"?!Fg(r.value,o.value):r.children.length>o.children.length?!0:r.children.length<o.children.length?!1:r.value<o.value},yv=(r,o)=>RA(r,o)?r:o,js=(r,o)=>xv(r,o)?r:o;var NA=(r,o)=>xv(r,o)?o:r;var Iv=(r,o,t={},e={})=>{let n={},i=zA(r),{units:s={},merges:a={},outputs:_={},inputs:c={}}=B(r);return i.forEach(p=>{let{unit:u,merge:d}=p,m=65,h={};Y(u,(P,k)=>{let M=s[k];if(!M)return;let{id:U,input:L={}}=M,O;e[U]?O=GA(U,o):O=B(vv(U,o,t,e)),h[k]={};function R(N,z,F){if(Ur(N)){let V=zi(N);for(let j of V)h[k][j]||(h[k][j]=`<${String.fromCharCode(m++)}>`);O[z][F]=vi(N,h[k])}}Y(O.input,(N,z)=>{if(L[z]&&L[z].constant&&L[z].data!==void 0&&Ur(N)){let F=M.input[z].data,V=pt(F),j=yi(o,V);if(!Ur(j)){O.input[z]=j;let H=Go(o,j,N);Y(H,(K,q)=>{h[k][q]=K})}}}),Y(O.input,(N,z)=>{R(N,"input",z)}),Y(O.output,(N,z)=>R(N,"output",z)),n[k]=O});let f=[],b={},g=0,v=()=>{let P=new Set,k=!1;function M(U,L,O){let R=nt(n,[U,L,O],void 0);R&&R.type!=="any"&&(b[R.value]===void 0?(P.add(R.value),b[R.value]=g):(k=!0,g=b[R.value],f[g]=new Set([...f[g]||[],...P]),P.forEach(N=>{b[N]=g}),P=f[g]),k||f.push(P),g=f.length)}return M},x=(P,k)=>{let M=a[P];Yt(M,(U,L,O)=>{k(U,L,O)})},I=(P,k,M)=>{let{plug:U}=r[`${P}s`][k];Y(U,({unitId:L,pinId:O,mergeId:R})=>{R?x(R,M):L&&O&&M(L,P,O)})};Y(d,(P,k)=>{let M=v();x(k,M)}),Y(c,(P,k)=>{let M=v();I("input",k,M)}),Y(_,(P,k)=>{let M=v();I("output",k,M)});function E(P){}let D=f.map(P=>{let k;for(let M of P)k===void 0?k=M:k=yv(k,M);return k}),w=f.map(P=>{let k;for(let M of P)k===void 0?k=M:k=yv(k,M);return k}),T={};f.forEach((P,k)=>{for(let M of P){let U=w[k],L=ex(o,U,M);for(let O in L){let R=L[O],N;if(T[O]===void 0)N=R;else{let z=T[O];if(N=yv(R,z),N!==R)for(let F in T)T[F]=Vg(T[F],{[R]:N});if(z!==N)for(let F in T)T[F]=Vg(T[F],{[z]:N})}T[O]=N}}});let C={};m=65,Y(T,(P,k)=>{let M=tx(P);for(let U of M)C[U]||(C[U]=`<${String.fromCharCode(m++)}>`),T[k]=Vg(T[k],C)}),Y(u,(P,k)=>{let M=n[k];if(!M)return;let{input:U,output:L}=M;Y(U,(O,R)=>{let N=vi(O,T);M.input[R]=N}),Y(L,(O,R)=>{let N=vi(O,T);M.output[R]=N})})}),n},zA=r=>{let o=[],t={unit:{},merge:{}},{units:e={},merges:n={}}=r,i=0;return Y(n,(s,a)=>{let _={unit:{},merge:{}};_.merge[a]=!0;let c=!1,p=i;Y(s,(u,d)=>{if(ie(u))return;_.unit[d]=!0;let m=t.unit[d];m!==void 0&&(c=!0,m<p&&(Y(_.unit,(h,f)=>{t.unit[f]=m}),Y(_.merge,(h,f)=>{t.merge[f]=m}),_=pn(o[m],_),o.splice(p,1),p=m)),t.unit[d]=p}),c||i++,t.merge[a]=p,o[p]=_}),Y(e,(s,a)=>{if(t.unit[a]===void 0){let _={unit:{[a]:!0},merge:{}};o.push(_),t.unit[a]=i,i++}}),o};l();var FA=new Set(["spec","specs","metadata"]),BA=new Set(["name","version","id","units","merges","data","component","metadata","inputs","outputs","type","render"]);function xE(r,o){let t=!0,e=J(r);for(let n of e)if(!o.has(n)){t=!1;break}return t}function O0(r){return xE(r,BA)}function IE(r){if(!xE(r,FA))return!1;let{spec:o={},specs:t={},metadata:e={}}=r;if(!O0(o))return!1;for(let n in t)if(!O0(t[n]))return!1;return!0}l();l();function Zn(r){return r[Math.floor(Math.random()*r.length)]}function $0({value:r}){return r}function xh(r){return r.map(o=>pt(o))}var HA=["0","1","2","3","4","5","6","7","8","9"],jA=["'foo'","'bar'","'zaz'"],VA=["true","false"],KA=["{}"],WA=["[]","[0]","[0,1,2]"],qA=xh(HA),YA=xh(jA),XA=xh(VA),JA=xh(KA),QLt=xh(WA),Dv=["number","string","boolean","object expression","array expression"],ZA={["array expression"]:"array literal",["object expression"]:"object literal"},QA=()=>Zn(Dv),tM=r=>{switch(r){case"number":return"number";case"string":return"string";case"boolean":return"boolean";case"object expression":return"string{}";case"array expression":return"number[]"}};function eM(r,o){let t=[];for(let e of o.children){let[n,i]=e.children,{value:s}=n,a=s,_;if(s.endsWith("?")?Math.random()>.5&&(a=s.substr(0,s.length-1),_=ss(r,i)):_=ss(r,i),_){let c=pt(a),p={value:`${c.value}:${_.value}`,children:[c,_],type:"key value"};t.push(p)}}return{value:`{${t.map($0).join(",")}}`,children:t,type:"object literal"}}function nM(r,o){let t=[];for(let e of o.children){let n=ss(r,e);t.push(n)}return{value:`[${t.map($0).join(",")}]`,type:"array literal",children:t}}function SE(r,o,t,e){let{children:n,type:i}=o,s=n[0],a=zi(s),_={};if(a.size>0)for(let f of a){let b=Zn(Dv),g=tM(b);_[f]=g}let c=vi(s,_),p=Math.floor(Math.random()*3),d=Ca(p).map(()=>ss(r,c)),m=`${t}${d.map($0).join(",")}${e}`,h=ZA[i];return{value:m,children:d,type:h}}function iM(r,o){let{children:t}=o,e=Zn(t);return ss(r,e)}function oM(r){return Hg}function Ih(r,o){return $0(ss(r,o))}function ss(r,o){var e;let{type:t}=o;if(K4(t))return o;if(t==="or")return iM(r,o);if(t==="and")return oM(o);if(t==="object literal")return eM(r,o);if(t==="array literal")return nM(r,o);if(t==="array expression")return SE(r,o,"[","]");if(t==="object expression")return SE(r,o,"{","}");if(t==="class"){let n,i;do n=Zn(J(r)),i=r[n];while(!Bg(r,(e=i.type)!=null?e:"G",o.value));return pt(`\${unit:{id:"${n}"}}`)}else return Sv(r,t)}function Sv(r,o){return o==="number"?Zn(qA):o==="string"?Zn(YA):o==="boolean"?Zn(XA):o==="object"?Zn(JA):o==="generic"?Sv(r,QA()):o==="any"?Sv(r,Zn(Dv)):Hg}l();var Ev=function(r){let o=0;if(r.length===0)return o;for(let t=0;t<r.length;t++){let e=r.charCodeAt(t);o=(o<<5)-o+e,o=o&o}return o};l();l();var Vs=(r,o,t="")=>{let e=[],n=r.split(" "),i=0;for(let s=0;s<n.length;s++){let a=n[s],_=a.length,c=i&&1,p=c?" ":"";if(t.length+c+_>o)if(_<=o)if(t.length===o){e.push(t);let u=Vs(a,o,p);e=e.concat(u.slice(0,-1)),t=u[u.length-1],i=t.split(" ").length}else if(t===" "){let u=Math.min(o-t.length-c,_);e.push(t+p+a.slice(0,u)),t=a.slice(u),i=t.length?1:0}else e.push(t+p),t=a,i=1;else{let u=o-t.length-c;if(t!==""&&_>u){e.push(t+p);let d=Vs(a,o);e=e.concat(d.slice(0,-1)),t=d[d.length-1],i=t.split(" ").length}else{e.push(t+p+a.slice(0,u));let d=Vs(a.slice(u),o);e=e.concat(d.slice(0,-1)),t=d[d.length-1],i=t.split(" ").length}}else t+=p+a,i++}return t&&e.push(t),e};function wv(r){let o="";for(let t=0;t<r;t++)o+=" ";return o}var Sh=(r,o,t)=>{let e=Vs(r,t),n=e.length;if(!n)return{width:0,height:o};let i=Number.MIN_SAFE_INTEGER;for(let c=0;c<e.length;c++){let u=e[c].trim().length;i=Math.max(i,u)}let s=r.length-r.trim().length,a=(i+s)*o/2,_=n*o;return{width:a,height:_}};l();var DE=(r,o,t)=>{let e=r.length;return Math.min(e,t)*o/2};l();function Pv(r,o,t){let e=[...r],n=e[o];return e[o]=e[t],e[t]=n,e}l();var EE={position:"absolute",width:"0",height:"0",top:"0"},sM=240,rM=240,rs=class extends W{constructor(t,e){super(t,e);this._transform=()=>{let{zoom:t=hh}=this.$props,e=mD(t);this._html.$element.style.transform=e,this._svg_g.$element.style.transform=e};let{className:n,style:i,width:s=sM,height:a=rM,draggable:_}=this.$props,c=`${s}px`,p=`${a}px`,u=new st({className:Xt("zoom",n),style:S(S({},EE),i),draggable:_},this.$system);this._root=u;let d=new fn({className:"zoom-svg",style:{width:c,height:p,position:"absolute",top:"0",left:"0"}},this.$system);u.registerParentRoot(d),this._svg=d;let m=new Sn({style:{width:"0",height:"0"}},this.$system);d.registerParentRoot(m),this._svg_g=m;let h=new st({className:"zoom-html",style:{position:"absolute",width:"0",height:"0",top:"0"}},this.$system);u.registerParentRoot(h),this._html=h;let f=yt(e);this.$element=f,this.$slot={default:h,svg:m},this.$slotChildren={default:[],svg:[]},this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({zoom:u,html:h,svg:d,svg_g:m}),this.registerRoot(u),this._transform()}onPropChanged(t,e){t==="className"?this._root.setProp("className",e):t==="style"?this._root.setProp("style",S(S({},EE),e)):t==="zoom"?this._transform():t==="width"?this._svg.$element.style.width=`${e}px`:t==="height"?this._svg.$element.style.height=`${e}px`:t==="draggable"&&this._root.setProp("draggable",e)}};l();var Ks=class extends W{constructor(t,e){super(t,e);let{style:n={},className:i}=this.$props;this.$element=this.$system.api.document.createElementNS(Ut,"defs"),i&&this.$element.classList.add(i),vt(this.$element,n),this._prop_handler=FS(this,this.$element,{})}onPropChanged(t,e){this._prop_handler[t](e)}};l();var Ws=class extends W{constructor(t,e){super(t,e);let{id:n,style:i={},className:s,markerHeight:a,markerWidth:_,refX:c,refY:p,orient:u}=this.$props,d=this.$system.api.document.createElementNS(Ut,"marker");vt(d,i),n!==void 0&&(d.id=n),s&&d.classList.add(s),a!==void 0&&d.setAttribute("markerHeight",`${a}`),_!==void 0&&d.setAttribute("markerWidth",`${_}`),c!==void 0&&d.setAttribute("refX",`${c}`),p!==void 0&&d.setAttribute("refY",`${p}`),u!==void 0&&d.setAttribute("orient",u),this._marker_el=d,this.$element=d}onPropChanged(t,e){t==="style"&&vt(this._marker_el,e)}};l();var wE={strokeWidth:"3px",fill:"none",stroke:"currentColor"},gn=class extends W{constructor(t,e){super(t,e);this._prop_handler={className:t=>{this._path_el.className.value=t},style:t=>{vt(this._path_el,S(S({},wE),t))},d:t=>{t===void 0?this._path_el.removeAttribute("d"):this._path_el.setAttribute("d",t)},markerStart:t=>{this._path_el.setAttribute("marker-start",t)},markerEnd:t=>{this._path_el.setAttribute("marker-end",t)},strokeWidth:t=>{t===void 0?this._path_el.removeAttribute("stroke-width"):this._path_el.setAttribute("stroke-width",`${t}`)},fillRule:t=>{t===void 0?this._path_el.removeAttribute("fill-rule"):this._path_el.setAttribute("fill-rule",t)}};let{id:n,className:i,style:s={},d:a="",markerStart:_,markerEnd:c,fillRule:p}=t,u=this.$system.api.document.createElementNS(Ut,"path");n!==void 0&&(u.id=n),i&&(u.classList.value=i),vt(u,S(S({},wE),s)),u.setAttribute("d",a),_!==void 0&&u.setAttribute("marker-start",_),c!==void 0&&u.setAttribute("marker-end",c),p!==void 0&&u.setAttribute("fill-rule",p),this._path_el=u,this.$element=u,this.$unbundled=!1,this.$primitive=!0}onPropChanged(t,e){this._prop_handler[t](e)}};l();var qs=class extends W{constructor(t,e){super(t,e);let{style:n={},className:i,href:s,startOffset:a,lenghtAdjust:_,spacing:c,textContent:p,rotate:u}=this.$props,d=this.$system.api.document.createElementNS(Ut,"textPath");vt(d,n),i&&d.classList.add(i),s!==void 0&&d.setAttribute("href",s),a!==void 0&&d.setAttribute("startOffset",a),_!==void 0&&d.setAttribute("lenghtAdjust",_),c!==void 0&&d.setAttribute("spacing",c),p!==void 0&&(d.textContent=p),u!==void 0&&d.setAttribute("rotate",u),this._text_path_el=d,this.$element=d}onPropChanged(t,e){t==="textContent"&&(this._text_path_el.textContent=e)}};l();var aM={width:"100%",height:"100%",textAlign:"left",wordWrap:"break-word",wordBreak:"break-word",whiteSpace:"pre-wrap",fontSize:"21px",display:"flex",justifyContent:"center",background:"none",backgroundColor:"#00000000",padding:"0",border:"none",overflowX:"hidden",overflowY:"auto",resize:"none",boxSizing:"border-box",color:"currentColor"},Ys=class extends je{constructor(o,t){super(o,t,t.api.document.createElement("textarea"),{valueKey:"value",defaultStyle:aM});let{placeholder:e="",maxLength:n=void 0}=o;this.$element.spellcheck=!1,this.$element.autocomplete="off",this.$element.autocapitalize="off",this.$element.inputMode="none",this.$element.placeholder=e,n!==void 0&&(this.$element.maxLength=n)}};l();var pGt=180*180;var PE=S({},ne("none")),as=200,Qi=150,Xs=class extends W{constructor(t,e){super(t,e);this._node_component={};this._link_el={};this._min_x=1e6;this._max_x=-1e6;this._min_y=1e6;this._max_y=-1e6;let{style:n,width:i,height:s}=t,a=new st({className:"minimap-root"},this.$system);a.preventDefault("mousedown"),a.preventDefault("touchdown");let _=new Sn({className:"minimap-graph"},this.$system);this._map_graph=_;let c=new Sn({className:"minimap-children"},this.$system);this._map_children=c;let p=new fn({className:"minimap",width:i,height:s,style:S(S({},PE),n),viewBox:"0 0 0 0",tabIndex:-1},this.$system);this._map_el=p,this.tick();let u=yt(e);this.$element=u,this.$slot=c.$slot,this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({root:a,svg:p,map_graph:_,map_children:c}),a.registerParentRoot(p),this.registerRoot(a),p.registerParentRoot(_),p.registerParentRoot(c),p.$element.onfocus=()=>{}}onPropChanged(t,e){t==="style"&&this._map_el.setProp("style",S(S({},PE),e))}tick(){let{nodes:t={},links:e={},padding:n=0}=this.$props;for(let d in this._node_component)if(!t[d]){let m=this._node_component[d];this._map_graph.$element.removeChild(m.$element),delete this._node_component[d]}for(let d in this._link_el)if(!e[d]){let m=this._link_el[d];this._map_graph.$element.removeChild(m),delete this._link_el[d]}if(ie(t))return;let i=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,_=Number.MIN_SAFE_INTEGER;for(let d in t){let m=t[d],{x:h,y:f,width:b,height:g,r:v,shape:x}=m;i=Math.min(i,h-b/2),s=Math.max(s,h+b/2),a=Math.min(a,f-g/2),_=Math.max(_,f+g/2);let I=this._node_component[d];I||(I=new gn({style:{fill:Lt,pointerEvents:"none",strokeWidth:"inherit"}},this.$system),this._node_component[d]=I,this._map_graph.appendChild(I));let E=x==="circle"?T7(h,f,v):A7(h-b/2,f-g/2,b,g);I.setProp("d",E)}for(let d in e){let{source:m,target:h}=co(d);if(m===h)continue;let f=this._link_el[d];f||(f=this.$system.api.document.createElementNS(Ut,"line"),f.style.pointerEvents="none",this._link_el[d]=f,this._map_graph.$element.appendChild(f));let b=t[m],g=t[h],{x:v,y:x}=b,{x:I,y:E}=g,D=Me(v,x,I,E),w=$7(D),{x:T,y:C}=Jo(b,D),{x:P,y:k}=Jo(g,w);f.setAttribute("x1",`${T}`),f.setAttribute("y1",`${C}`),f.setAttribute("x2",`${P}`),f.setAttribute("y2",`${k}`)}i-=n,a-=n,s+=n,_+=n;let c=s-i,p=_-a;this._min_x=i,this._min_y=a,this._max_x=s,this._max_y=_,this._width=c,this._height=p;let u=c/as+p/Qi;this._map_el.setProp("strokeWidth",u),this._map_el.setProp("viewBox",`${i} ${a} ${c} ${p}`)}};l();var Js=class extends W{constructor(t,e){super(t,e);this._x={};this._y={};this._resize_x={};this._resize_y={};this._pointer_down_count=0;this._pointer_down={};this._pointer_down_direction={};this._add_pointer_listener=(t,e,n,i)=>{let{api:{input:{pointer:{setPointerCapture:s}}}}=this.$system;t.addEventListener("pointerdown",a=>{let{clientX:_,clientY:c,pointerId:p}=a;this._resize.style.position="absolute",this._resize.style.width="100%",this._resize.style.height="100%",this._x[p]=e,this._y[p]=n,this._resize_x[p]=_,this._resize_y[p]=c,this._pointer_down_count++,this._pointer_down[p]=!0,this._pointer_down_direction[p]=i;let u=h=>{let{pointerId:f}=h;if(this._pointer_down[f]){let{clientX:b,clientY:g,pointerId:v}=h,x=this._x[v]*(b-this._resize_x[v]),I=this._y[v]*(g-this._resize_y[v]),E=this._x[v]*(x/2),D=this._y[v]*(I/2),w=this._pointer_down_direction[v];this._resize_x[v]=b,this._resize_y[v]=g,this.dispatchEvent("resized",{dx:E,dy:D,dw:x,dh:I,direction:w,pointerId:v})}},d=h=>{let{pointerId:f}=h;this._pointer_down[f]&&(this._pointer_down_count--,delete this._pointer_down[f],delete this._pointer_down_direction[f],this._pointer_down_count===0&&(t.removeEventListener("pointermove",u),t.removeEventListener("pointerup",d),t.removeEventListener("pointercancel",d),t.removeEventListener("pointerleave",d),this.dispatchEvent("resizeend",{}),this._resize.style.position="initial",this._resize.style.width="0",this._resize.style.height="0"),m())};this._pointer_down_count===1&&(t.addEventListener("pointermove",u),t.addEventListener("pointerup",d),t.addEventListener("pointercancel",d),t.addEventListener("pointerleave",d));let m=s(t,p);this._dispatch_resize_start(p,i)})};this._dispatch_resize_start=(t,e)=>{this.dispatchEvent("resizestart",{dx:0,dy:0,dw:0,dh:0,direction:e,pointerId:t})};let{disabled:n,l:i=15}=t,s=this.$system.api.document.createElement("div");s.classList.add("resize"),s.style.top="0",s.style.position="initial",s.style.pointerEvents=n?"none":"all";let a=this.$system.api.document.createElement("div");a.classList.add("resize-top"),a.style.position="absolute",a.style.width="100%",a.style.height=`${i}px`,a.style.top=`${-i}px`,a.style.left="0",a.style.cursor="n-resize",this._add_pointer_listener(a,0,-1,"n"),s.appendChild(a);let _=this.$system.api.document.createElement("div");_.classList.add("resize-right"),_.style.position="absolute",_.style.width=`${i}px`,_.style.height="100%",_.style.top="0",_.style.right=`${-i}px`,_.style.cursor="e-resize",this._add_pointer_listener(_,1,0,"e"),s.appendChild(_);let c=this.$system.api.document.createElement("div");c.classList.add("resize-bottom"),c.style.position="absolute",c.style.width="100%",c.style.height=`${i}px`,c.style.bottom=`${-i}px`,c.style.left="0",c.style.cursor="s-resize",this._add_pointer_listener(c,0,1,"s"),s.appendChild(c);let p=this.$system.api.document.createElement("div");p.classList.add("resize-left"),p.style.position="absolute",p.style.width=`${i}px`,p.style.height="100%",p.style.top="0",p.style.left=`${-i}px`,p.style.cursor="w-resize",this._add_pointer_listener(p,-1,0,"w"),s.appendChild(p);let u=this.$system.api.document.createElement("div");u.classList.add("resize-top_right"),u.style.position="absolute",u.style.width=`${i}px`,u.style.height=`${i}px`,u.style.top=`${-i}px`,u.style.right=`${-i}px`,u.style.cursor="ne-resize",this._add_pointer_listener(u,1,-1,"ne"),s.appendChild(u);let d=this.$system.api.document.createElement("div");d.classList.add("resize-right_bottom"),d.style.position="absolute",d.style.width=`${i}px`,d.style.height=`${i}px`,d.style.right=`${-i}px`,d.style.bottom=`${-i}px`,d.style.cursor="se-resize",this._add_pointer_listener(d,1,1,"se"),s.appendChild(d);let m=this.$system.api.document.createElement("div");m.classList.add("resize-bottom_left"),m.style.position="absolute",m.style.width=`${i}px`,m.style.height=`${i}px`,m.style.bottom=`${-i}px`,m.style.left=`${-i}px`,m.style.cursor="sw-resize",this._add_pointer_listener(m,-1,1,"sw"),s.appendChild(m);let h=this.$system.api.document.createElement("div");h.classList.add("resize-left_top"),h.style.position="absolute",h.style.width=`${i}px`,h.style.height=`${i}px`,h.style.left=`${-i}px`,h.style.top=`${-i}px`,h.style.cursor="nw-resize",this._add_pointer_listener(h,-1,-1,"nw"),s.appendChild(h),this._resize=s,this.$element=s}onPropChanged(t,e){t==="disabled"&&(e===!0?this._resize.style.pointerEvents="none":e===!1&&(this._resize.style.pointerEvents="inherit"))}};l();var Dh=class extends W{constructor(t,e){super(t,e);this._render_selection_shape=()=>{let{width:t=0,height:e=0,shape:n="rect",stroke:i="currentColor",strokeWidth:s=1,strokeDasharray:a="6",strokeDashOffset:_=0}=this.$props,c=.5*s,p=.5*s,u;return n==="circle"?u=new Jn({x:t/2+c,y:e/2+p,r:t/2,style:{fill:"none",stroke:"",strokeDasharray:a,strokeWidth:`${s}`,strokeDashoffset:`${_}`}},this.$system):u=new Dn({width:t,height:e,x:c,y:p,style:{fill:"none",stroke:"",strokeDasharray:a,strokeWidth:`${s}`,strokeDashoffset:`${_}`}},this.$system),u};let{width:n=0,height:i=0,x:s=0,y:a=0,stroke:_="currentColor",strokeWidth:c=1}=this.$props,p=this._render_selection_shape();this._selection_shape=p;let u=new fn({className:"selection",style:{position:"absolute",width:`${n+c}px`,height:`${i+c}px`,fill:"none",pointerEvents:"none",top:`calc(50% + ${a}px)`,left:`calc(50% + ${s}px)`,transform:"translate(-50%, -50%)",userSelect:"none",stroke:_}},this.$system);u.appendChild(p),this._selection=u;let d=yt(e);this.$element=d,this.$slot=u.$slot,this.registerRoot(u)}onPropChanged(t,e){if(t==="stroke")ft(this._selection,{stroke:e});else if(t==="width"){let{shape:n,width:i,strokeWidth:s=1}=this.$props;if(ft(this._selection,{width:`${i+s}px`}),n==="circle"){let a=this._selection_shape;a.setProp("x",i/2+.5*s),a.setProp("r",i/2)}else this._selection_shape.setProp("width",e)}else if(t==="height"){let{shape:n,height:i,strokeWidth:s=1}=this.$props;ft(this._selection,{height:`${i+s}px`}),n==="circle"?this._selection_shape.setProp("y",i/2+.5*s):this._selection_shape.setProp("height",e)}else if(t==="strokeDasharray")ft(this._selection_shape,{strokeDasharray:e});else if(t==="strokeDashOffset")ft(this._selection_shape,{strokeDashoffset:`${e!=null?e:0}`});else if(t==="shape"){let n=this._render_selection_shape();this._selection_shape=n,this._selection.setChildren([n])}else if(t==="x"){let{x:n=0}=this.$props;ft(this._selection,{left:`calc(50% + ${n}px)`})}else if(t==="y"){let{y:n=0}=this.$props;ft(this._selection,{top:`calc(50% + ${n}px)`})}}};var H0=12,_M=3,L0=12,pM=10,cM=12,U0=_M*H0,TE=10,uM=12,dM=10,wh=42,G0=42,AE=1/0,ME=1/0,OE=1.5*16,Qn=36,lM=0,mM={data:"drop",drop:"data"},hM=r=>{let{type:o,event:t,data:e}=r;return{type:o,event:mM[t],data:e}},K0=6*24,W0=2*24,j0=r=>{r+=1;let o=(5+1)/r;return C7(r+.5,1,r,270-60*o,270+60*o)},Tv=(r,o)=>r==="circle"?j0(o):gM,fM="",Ph="M-6,4 L0,1 L-6,-2",$E="M-0.25,2.25 L2,1 L-0.25,-0.25",gM="M0,8 L0,-5.5",LE=j0(5);var UE=45,kh=80,R0=-1,bM={position:"relative",width:"100%",height:"100%",overflow:"hidden",touchAction:"none"},or=class extends W{constructor(t,e){super(t,e);this._frame_out=!1;this._type_cache={};this._set_spec=(t,e)=>{delete this._type_cache[t],this._registry.setSpec(t,e)};this._fork_spec=(t,e)=>this._registry.forkSpec(t,e);this._new_spec_id=()=>this._registry.newSpecId();this._has_spec=t=>this._registry.hasSpec(t);this._empty_spec=()=>this._registry.emptySpec();this._new_spec=t=>this._registry.newSpec(t);this._get_spec=t=>this._registry.getSpec(t);this._delete_spec=t=>this._registry.deleteSpec(t);this._inject_specs=t=>this._registry.injectSpecs(t);this._register_unit=t=>this._registry.registerUnit(t);this._unregister_unit=t=>this._registry.unregisterUnit(t);this._should_fork=t=>this._registry.shouldFork(t);this._create_fallback_frame=()=>new st({className:"graph-fallback-frame",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"auto",pointerEvents:"none"}},this.$system);this._listen_graph=()=>{this._unlisten_graph=this._editor.addEventListeners([mt("compose",this._on_compose,!1),mt("transcend",this._on_transcend,!1),mt("enter_fullwindow",this._on_enter_fullwindow,!1),mt("leave_fullwindow",this._on_leave_fullwindow,!1),mt("zoom",this._on_zoom)])};this._listen_transcend=()=>{this._unlisten_transcend=this._transcend.addEventListener(ae({onLongPress:this._on_transcend_long_press,onLongClickCancel:this._on_transcend_long_click_cancel,onLongClick:this._on_transcend_long_click}))};this._reset_graph=(t=zt)=>{let{graph:e}=this.$props;this._pod=e||this._fallback_graph,t()};this._reset_frame=()=>{let{frame:t}=this.$props;t?t.$getGlobalId({},e=>{let n=wb(this.$system,e),i=s=>{this._frame=s,this._frame_out=!0,this._editor.setProp("frame",this._frame),this._editor.setProp("frameOut",this._frame_out)};if(n===void 0){let s=Br(this.$system,e,a=>{i(a),s()})}n&&i(n)}):(this._frame=this._fallback_frame,this._frame_out=!1,this._editor.setProp("frame",this._frame),this._editor.setProp("frameOut",this._frame_out))};this._on_transcend_long_press=t=>{let{showLongPress:e}=this.$system,{screenX:n,screenY:i}=t;e(n,i,{direction:"in"})};this._on_transcend_long_click=()=>{setTimeout(()=>{this._on_transcend()},0)};this._on_transcend_long_click_cancel=()=>{};this._on_context_enabled=()=>{this._refresh_fallback_graph_paused()};this._on_context_disabled=()=>{this._refresh_fallback_graph_paused()};this._refresh_fallback_graph_paused=()=>{let{disabled:t}=this.$props;if(this._pod===this._fallback_graph)if(t===void 0)if(this.$context){let{$disabled:e}=this.$context;e?this._pod.$pause({}):this._pod.$play({})}else this._pod.$pause({});else t?this._pod.$pause({}):this._pod.$play({})};this._on_compose=t=>{var m;let{specs:e}=this._registry,{animate:n}=this.$props,i=xn(e),s=this._editor.get_spec();s.name="new",s.id=i;let{component:a={}}=s,_=hx(a);s.render=_,s.type=`\`U\`&\`G\`${_?"&`C`":""}`,(m=s.metadata)==null||delete m.complexity,this._set_spec(i,s);let c=r_(e,{},i);this._pod=this._pod.$compose({id:i,unitId:c,_:["U","C","G"]});let p={id:i,metadata:{}};if(_){let{width:h,height:f}=this._editor.get_max_component_graph_size_size();p.metadata.component={width:h,height:f},this._pod.$setMetadata({path:["units",c,"metadata","component"],data:{width:h,height:f}});let{width:b,height:g}=this._editor.get_max_component_layout_size();this._pod.$setMetadata({path:["component"],data:{defaultWidth:b,defaultHeight:g}})}this._editor.setProp("disabled",!0),this._fallback_graph=this._pod;let u=mh({},this.$system);u.setSubComponent(c,this._component),u.pushRoot(this._component),this._component=u,this._unlisten_graph(),this._root.unregisterParentRoot(this._background),this._root.unregisterParentRoot(this._editor);let d=new ir({graph:this._pod,frame:this._frame,frameOut:this._frame_out,component:u,specs:this._specs,hasSpec:this._has_spec,emptySpec:this._empty_spec,getSpec:this._get_spec,setSpec:this._set_spec,newSpec:this._new_spec,deleteSpec:this._delete_spec,forkSpec:this._fork_spec,shouldFork:this._should_fork,injectSpecs:this._inject_specs,registerUnit:this._register_unit,unregisterUnit:this._unregister_unit,newSpecId:this._new_spec_id,typeCache:this._type_cache},this.$system);this._editor.setProp("parent",d),d.cache_subgraph(c,this._editor),d.mem_enter_subgraph(c,this._editor),d.dom_enter_subgraph(c,this._editor,!1),this._root.unshiftParentRoot(this._editor,"default"),this._root.unshiftParentRoot(this._background,"default"),this._editor=d,this._listen_graph(),this.setSubComponent("graph",d),this._root.prependParentRoot(this._editor,"default"),this._root.prependParentRoot(this._background,"default"),this._editor.enter(!1,{},!0),this._editor.leave(t),d.focus()};this._on_transcend=()=>{let{specs:t}=this._registry,{$width:e,$height:n}=this.$context,i=xn(t),s="untitled",a="editor",_=this._editor.isFullwindow(),c=this._pod.$compose({id:i,unitId:s,_:["U","C","G"]});c.$addUnit({unitId:a,bundle:{unit:{id:p_,input:{controls:{ignored:!0},zoom:{ignored:!0},fullwindow:{ignored:!0},disabled:{ignored:!0},frame:{ignored:!0},graph:{constant:!0,ignored:!1}},state:{fullwindow:_}}}}),c.$moveUnit({id:s,unitId:a,inputId:"graph"});let p=wn(),u=300,d=300,m=60,h=Number.MIN_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER,b=this._editor.get_nodes();for(let z in b){let F=b[z],{width:V,height:j}=F;h=Math.max(h,V),f=Math.max(f,j)}let g=rn(h,u-m,e),v=rn(f,d-m,n),x=g+m,I=v+m;p.units=p.units||{},p.units[a]={id:p_,input:{disabled:{data:"false"}},metadata:{component:{width:x,height:I}}},p.component={subComponents:{[a]:{}},children:[a]},this._unlisten_graph(),this._unlisten_transcend(),this.unregisterRoot(this._root),this._root.unregisterParentRoot(this._transcend),this._root.unregisterParentRoot(this._fallback_frame),this._root.unregisterParentRoot(this._editor),this._root.unregisterParentRoot(this._background),this.removeSubComponent("transcend"),this.removeSubComponent("background"),this.removeSubComponent("graph"),this.removeSubComponent("root"),this.removeSubComponent("frame");let E=this._editor.$slot.default,D=E.$element,w=this._background.$slot.default,T=w.$element,C=[];for(;T.firstChild;)C.unshift(T.lastChild),T.removeChild(T.lastChild);this._editor._prevent_next_reset=!0;let P=new or({graph:this._pod,editor:this._editor,fallback:this._fallback_frame,transcend:this._transcend,background:this._background,root:this._root,component:this._component,fullwindow:!0},this.$system),k=new ns({},this.$system);this._transcend=k,this._listen_transcend();let M=this._create_fallback_frame();this._fallback_frame=M;let U=ma(),L=new U({},this.$system);L.setSubComponent(a,P),L.pushRoot(P),this._component=L,this._pod=c;let O=new ir({graph:this._pod,registry:this._registry,component:this._component,frame:this._fallback_frame,specs:this._specs,hasSpec:this._has_spec,emptySpec:this._empty_spec,getSpec:this._get_spec,setSpec:this._set_spec,newSpec:this._new_spec,deleteSpec:this._delete_spec,forkSpec:this._fork_spec,shouldFork:this._should_fork,injectSpecs:this._inject_specs,registerUnit:this._register_unit,unregisterUnit:this._unregister_unit,newSpecId:this._new_spec_id,typeCache:this._type_cache},this.$system);this._editor=O,this._listen_graph(),this._reset_frame();let R=new st({style:{className:"graph-background",position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}},this.$system);this._background=R;let N=new ln({className:"graph-root",style:{position:"relative",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"}},this.$system);this._root=N,E=this._editor.$slot.default,D=E.$element,w=this._background.$slot.default,T=w.$element,this.$slot={default:E,1:w};for(let z of C)T.appendChild(z);this.setSubComponents({background:R,root:N,graph:O,frame:this._fallback_frame,transcend:k}),this._root.$ref.transcend=k,this._root.registerParentRoot(this._background),this._root.registerParentRoot(this._editor),this._root.registerParentRoot(this._fallback_frame),this._root.registerParentRoot(this._transcend),this.registerRoot(this._root),this._editor.enter(!1),this._editor.enterFullwindow(!1),this._editor.leaveFullwindow(!0,()=>{this._editor.select_node(a),this._editor.unlock_sub_component(a)}),this._editor.temp_fixate_node(a,100)};this._on_enter_fullwindow=()=>{};this._on_leave_fullwindow=()=>{};this._on_zoom=t=>{this.set("zoom",t)};let{graph:n,className:i,style:s,attr:a,zoom:_,controls:c=!0,animate:p=!0,fullwindow:u,fallback:d}=t,{component:m,editor:h,transcend:f,background:b,root:g}=t,v=Wt(this.$system.specs,{});this._specs=v,this._registry=new Rr(v);let x=wn({name:"untitled",private:!0});this.$system.newSpec(x);let I=new ze(x,{},e);this._fallback_graph=Xr(I),this._pod=n||this._fallback_graph,this._fallback_frame=d||this._create_fallback_frame(),this._frame=this._fallback_frame,f=f||new ns({down:u,style:{display:c?"flex":"none"}},this.$system),this._unlisten_transcend=f.addEventListener(ae({onLongPress:this._on_transcend_long_press,onLongClickCancel:this._on_transcend_long_click_cancel,onLongClick:this._on_transcend_long_click})),this._transcend=f,this._component=m!=null?m:mh({},this.$system),h=h||new ir({className:i,style:s,graph:this._pod,frame:this._frame,component:this._component,animate:p,zoom:_,fullwindow:u,specs:v,registry:this._registry,hasSpec:this._has_spec,emptySpec:this._empty_spec,getSpec:this._get_spec,setSpec:this._set_spec,newSpec:this._new_spec,deleteSpec:this._delete_spec,forkSpec:this._fork_spec,injectSpecs:this._inject_specs,shouldFork:this._should_fork,registerUnit:this._register_unit,unregisterUnit:this._unregister_unit,newSpecId:this._new_spec_id,typeCache:this._type_cache},this.$system),h.enter(!1,{},!0),this._editor=h,this._listen_graph(),this._reset_frame(),b=b||new st({style:{className:"graph-background",position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}},this.$system),this._background=b,g=g||new ln({className:"graph-root",style:{position:"relative",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"}},this.$system),g.registerParentRoot(this._background),g.registerParentRoot(this._editor),g.registerParentRoot(this._fallback_frame),g.registerParentRoot(this._transcend),g.$element.oncontextmenu=function(){return!1},this._root=g,this._root.$ref.transcend=f,n==null&&this._pod.$play({}),this._reset_graph();let E=yt(e);this.$element=E,this.$slot={default:this._editor.$slot.default,1:this._background.$slot.default},this.$unbundled=!1,this.$primitive=!0,_v(this.$element,a!=null?a:{}),this.setSubComponents({background:b,root:g,graph:h,frame:this._fallback_frame,transcend:f}),this.registerRoot(this._root)}onDestroy(){super.onDestroy(),this._editor.destroy()}moment(t,e){this._editor.moment(t,e)}focus(t={preventScroll:!0}){this._editor.focus()}blur(t={preventScroll:!0}){this._editor.blur()}onMount(){this._context_unlisten=Be(this.$context,[mt("enabled",this._on_context_enabled),mt("disabled",this._on_context_disabled)]),this._refresh_fallback_graph_paused()}onUnmount(){this._context_unlisten()}onPropChanged(t,e){if(t==="style")this._root.setProp("style",S(S({},bM),e));else if(t==="attr"){let n=e!=null?e:{};_v(this.$element,n)}else t==="disabled"?(this._refresh_fallback_graph_paused(),this._editor.setProp("disabled",e)):t==="graph"?this._reset_graph(()=>{this._editor.setProp("graph",this._pod)}):t==="frame"?this._reset_frame():t==="fullwindow"?this._editor.setProp("fullwindow",e):t==="zoom"?this._editor.setProp("zoom",e):t==="controls"&&ft(this._transcend,{display:e?"flex":"none"})}},GE={style:{},zoomable:!0,minZoom:1,maxZoom:6,zoomDraggable:!0,zoomTranslate:!0,animate:!0},yM=.05,RE={x0:0,y0:0,x1:0,y1:0},_s=12,Ov=(r,o,t)=>!!(r[`${o}s`]||{})[t],Zs=(r,o,t,e=new Set)=>{let n=0,i=t;for(;Ov(r,o,i)||e.has(i);)i=`${t}${n}`,n++;return i},NE=(r,o)=>{let t=97,e="a";for(;Ov(r,o,e);)t++,e=String.fromCharCode(t);return e},zE=(r,o=new Set)=>{let{plug:t={}}=r,e=0;for(;t[e]||o.has(`${e}`);)e++;return`${e}`},he=0,Rn=1,Qs=2,N0=3,tr=4,Nn=5,di=6,xa=7,er=8,nr=9,Ch=[[1,1,0,1,1,1,1,1,1,1],[0,1,0,1,1,1,1,1,1,1],[0,1,0,1,1,1,1,1,1,1],[0,0,0,1,1,1,0,1,1,1],[0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,1,1,1,1,1],[0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,1]],z0=[[1,1,0,1,1,1,1,1,1,1],[0,1,0,1,1,1,1,1,1,1],[0,1,0,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1],[0,0,0,0,1,1,1,1,1,1],[0,0,0,0,0,1,1,1,1,1],[0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,1]],Se=24/K0/3,vM=[[1,1,1,1,1,Se,1,1,1,Se],[1,1,1,1,1,Se,1,1,1,Se],[1,1,1,1,1,Se,1,1,1,Se],[1,1,1,1,1,Se,1,1,1,Se],[1,1,1,1,1,Se,1,1,1,Se],[1,1,1,1,1,3*Se,1,1,1,Se],[1,1,1,1,1,1,1,1,1,Se],[1,1,1,1,1,1,1,1,1,Se],[1,1,1,1,1,1,1,1,1,Se],[1,1,1,1,1,1,1,1,1,Se]],kzt=24/W0/3,xM=[[1,1,1,1,1,1,1,1,1,Se],[1,1,1,1,1,1,1,1,1,Se],[1,1,1,1,1,1,1,1,1,Se],[1,1,1,1,1,1,1,1,1,Se],[1,1,1,1,1,1,1,1,1,Se],[1,1,1,1,1,1,1,1,1,Se],[1,1,1,1,1,1,1,1,1,Se],[1,1,1,1,1,1,1,1,1,Se],[1,1,1,1,1,1,1,1,1,Se],[1,1,1,1,1,1,1,1,1,Se]],FE=.01,Sa={},F0=r=>{if(Sa[r])return Sa[r];let o=pt(r);return Sa[r]=o,o},Th=r=>{if(Sa[r])return Sa[r];let o=Y4(r);return Sa[r]=o,o};var Av=(r,o,t,e,n,i)=>{let{units:s={},merges:a={},inputs:_={},outputs:c={},data:p={}}=r,u={},d={},m={},h={},f={input:{},output:{}},b={},g=new Set,v=new Set,x={input:{},output:{}},I=new Set,E=new Set,D=[],w={},T={},C={};for(let k in s){let M=s[k],{id:U}=M,L=t(U,g);g.add(L),u[k]=L,D.push(L)}for(let k in a){let M=a[k],U=!1;Yt(M,(R,N,z)=>{var j,H;if(z===$t){U=!0;return}let F=s[R];(H=(j=o(F.id)[`${N}s`])==null?void 0:j[z])!=null&&H.ref&&(U=!0)});let L=e(v);v.add(L),d[k]=L;let O=At(L);U||D.push(O),Yt(M,(R,N,z)=>{tt(w,[R,N,z],L)})}let P=(k,M)=>{var O;let U=r[`${k}s`][M],{plug:L={}}=U;for(let R in L){x[k][M]=(O=x[k][M])!=null?O:new Set;let N=n(k,M,x[k][M]);tt(f,[k,M,R],N),x[k][M].add(N);let z=L[R];if(z.unitId&&z.pinId){let F=u[z.unitId];tt(T,[F,k,z.pinId],{pin_id:M,pin_spec:U,sub_pin_id:R,sub_pin:z})}else z.mergeId}};for(let k in _)P("input",k);for(let k in c)P("output",k);for(let k in s){let M=s[k],{id:U}=M,L=u[k],O=o(U);To(O,(R,N,z)=>{let{defaultIgnored:F,plug:V={}}=z,j=ut(L,R,N),H=!0,K=nt(w,[k,R,N],null),q=nt(T,[L,R,N],null);F||K||(q?kr(R,q.pin_id,q.pin_spec,q.sub_pin_id,q.sub_pin,!1)&&D.push(j):D.push(j))})}for(let k in p){let M=i(E);E.add(M),b[k]=M;let U=Xe(M);D.push(U)}return{map_unit_id:u,map_merge_id:d,map_plug_id:f,map_datum_id:b,selected_node_ids:D}},BE=(r,o,t,e,n)=>{var b,g;let{units:i={},merges:s={},inputs:a={},outputs:_={},component:c={},data:p={},metadata:u={}}=r,d={units:{},merges:{},inputs:{},outputs:{},component:{subComponents:{},children:[]},data:{},metadata:u};for(let v in i){let x=i[v],I=(b=o[v])!=null?b:v;d.units[I]=x}for(let v in s){let x=s[v],I=(g=t[v])!=null?g:v,E={};for(let D in x){let w=x[D],T=o[D];E[T]=w}d.merges[I]=E}let m={input:a,output:_};fs(v=>{let x=m[v];for(let I in x){let E=x[I],{plug:D={}}=E,w=_t(S({},E),{plug:{}});for(let T in D){let C=D[T],P=nt(e,[v,I,T],T),{unitId:k,pinId:M,mergeId:U}=C;if(k&&M){let L=o[k];L&&(w.plug[P]={unitId:L,pinId:M})}else if(U){let L=t[U];L&&(w.plug[P]={mergeId:L})}else w.plug[P]={}}d[`${v}s`][I]=w}});let{subComponents:h={},children:f=[]}=c;for(let v of f){let x=o[v];d.component.children.push(x)}for(let v in h){let x=h[v],{children:I=[],childSlot:E={}}=x,D=o[v];d.component.subComponents[D]={width:x.width,height:x.height,children:[],childSlot:{}};for(let w of I){let T=o[w];d.component.subComponents[D].children.push(T),d.component.subComponents[D].childSlot[T]=E[w]}}for(let v in p){let x=p[v],I=n[v]||v;d.data[I]=x}return d},Mv=(r,o)=>{let t=r.length-r.trimStart().length,e=r.length-r.trimEnd().length,n=wv(t),i=wv(e),s=r.trim(),a=Vs(s,o),_=[];for(let c=0;c<a.length;c++){let p=a[c],u=p;p.endsWith(" ")&&c<a.length-1&&(u=u.slice(0,-1)+`
`),u.startsWith(" ")&&(u=`
`+u.slice(1)),_.push(u)}return n+_.join("")+i},B0=r=>r.replace(/\s+/g," ").replace(`
`," "),IM=1e3,ir=class extends W{constructor(t,e,n){var L,O,R,N,z,F,V,j,H,K,q;super(S(S({},GE),t),e);this._spec=Li();this._disabled=!0;this._input_disabled=!0;this._focused=!1;this._unlisten_minimap=void 0;this._minimap_pointer_down=!1;this._subgraph_cache={};this._subgraph_pod_cache={};this._subgraph_graph=null;this._subgraph_unit_id=null;this._subgraph_depth=0;this._is_fullwindow=!1;this._is_all_fullwindow=!1;this._zoom=hh;this._touch_zoom_position_start={x:0,y:0};this._zoom_timeout=null;this._touch_zoom_position={x:0,y:0};this._zooming=!1;this._translating=!1;this._translate_x=0;this._translate_y=0;this._unit_datum={input:{},output:{}};this._layout_layer={};this._layout_core={};this._between_container={};this._leaf_init_style={};this._leaf_style={};this._leaf_attr={};this._leaf_frame={};this._leaf_frame_active={};this._leaf_frame_layer={};this._leaf_frame_node={};this._layout_parent_children_animation_frame={};this._layout_transfer_parent_animating={};this._layout_transfer_parent_callback={};this._layout_transfer_parent_leaf={};this._layout_transfer_parent_leaf_sub_component_id={};this._layout_transfer_parent_leaf_path={};this._layout_transfer_parent_leaf_comp={};this._layout_transfer_parent_leaf_count={};this._layout_transfer_parent_leaf_end_count={};this._layout_transfer_parent_leaf_end_set={};this._layout_transfer_parent_remaining_child={};this._node_comp={};this._node_content={};this._node_selection={};this._link_comp={};this._link_base={};this._link_base_area={};this._link_base_text={};this._link_text={};this._link_text_value={};this._link_text_path={};this._link_marker_end={};this._link_marker_start={};this._core={};this._core_content={};this._core_area={};this._core_icon={};this._core_name={};this._core_description={};this._edit_node_name_id=null;this._core_component_overlay={};this._core_component_resize={};this._core_component_frame={};this._core_component_self={};this._core_component_max_width=[];this._core_component_max_height=[];this._core_component_max_width_id=[];this._core_component_max_height_id=[];this._core_layout_core_unlisten={};this._core_component_frame_context={};this._core_component_unlocked={};this._core_component_unlocked_count=0;this._pin={};this._pin_name={};this._link_pin_ref_set=new Set;this._link_pin_input_set=new Set;this._link_pin_output_set=new Set;this._pin_link_start_marker={};this._pin_link_end_marker={};this._link_pin_constant_count=0;this._link_pin_memory_count=0;this._exposed_pin_set_count=0;this._exposed_pin_plugged_count=0;this._exposed_pin_unplugged_count=0;this._ext_pin_name={};this._exposed_link_start_marker={};this._exposed_link_end_marker={};this._int_to_node={};this._ext_to_node={};this._node_to_ext={};this._exposed_ext_unplugged={};this._exposed_int_unplugged={};this._merge={};this._merge_input={};this._merge_output={};this._datum_container={};this._datum_area={};this._datum={};this._datum_overlay={};this._datum_unlisten={};this._err_comp={};this._err_area={};this._err_overlay={};this._edit_datum_id=null;this._edit_datum_node_id=null;this._edit_datum_path=null;this._edit_datum_commited=!1;this._type_container={};this._type={};this._node_unlisten={};this._link_unlisten={};this._node={};this._node_fixed={};this._node_draggable={};this._node_charge={};this._node_z={};this._link_force_count_k={};this._node_link_count={};this._node_link_heap_root=null;this._node_link_heap={};this._node_type={};this._link_type={};this._selection_opt={};this._link={};this._none_link={};this._pin_link={};this._exposed_link={};this._data_link={};this._type_link={};this._collapse_link={};this._search_link={};this._ignored_link={};this._visible_data_link={};this._err_link={};this._unit_node={};this._pin_node={};this._normal_node={};this._data_node={};this._err_node={};this._type_node={};this._collapse_node={};this._search_node={};this._ignored_node={};this._exposed_node={};this._exposed_ext_node={};this._exposed_int_node={};this._visible_data_node={};this._hidden_data_node={};this._linked_data_node={};this._visible_linked_data_node={};this._visible_unlinked_data_node={};this._unlinked_data_node={};this._empty_merge_node={};this._empty_merge_node_count=0;this._layer_node=[];this._layer_link=[];this._err={};this._unit_to_unit={};this._node_count=0;this._unit_count=0;this._unit_component_count=0;this._unit_active_pin_count={};this._component_nodes={};this._pressed_node_pointer_count=0;this._node_pressed_count={};this._pressed_node_count=0;this._pressed_node_id_pointer_id={};this._pointer_id_pressed_node_id={};this._pointer_id_hover_link_id={};this._link_id_hover_pointer_id={};this._drag_count=0;this._drag_node_id={};this._drag_node_pointer_id={};this._drag_ext_node_id=new Set;this._drag_ext_node_count=0;this._dropped_node_id=new Set;this._drag_and_drop=!1;this._drag_and_drop_pointer=null;this._drag_and_drop_bundle=null;this._transcend_pointer_id=null;this._transcend_timeout=null;this._transcend_on_pointer_up=!1;this._static=!1;this._static_position={};this._static_count={};this._static_subgraph_anchor={};this._static_subgraph_anchor_count={};this._hover_node_count=0;this._hover_node_pointer_count={};this._hover_node_id={};this._hover_node_id_pointer_id={};this._pointer_id_hover_node_id={};this._selected_node_count=0;this._selected_pin_count=0;this._selected_node_id={};this._selected_component_count=0;this._selected_component={};this._compatible_node_id={};this._compatible_node_count=0;this._resize_pointer_count=0;this._resize_node_id_pointer_id={};this._resize_pointer_id_node_id={};this._fullwindow_component_set=new Set;this._fullwindow_component_ids=[];this._datum_tree={};this._datum_to_pin={};this._pin_to_datum={};this._datum_to_plug={};this._plug_to_datum={};this._pin_datum_tree={};this._pin_to_int={input:{},output:{}};this._pin_to_ext={input:{},output:{}};this._pin_to_merge={};this._pin_invalid_set=new Set;this._merge_to_pin={};this._merge_to_input={};this._merge_to_output={};this._merge_pin_count={};this._merge_output_count={};this._merge_active_output_count={};this._merge_input_count={};this._merge_active_input_count={};this._merge_ref={};this._merge_to_ref_unit={};this._merge_to_ref_output={};this._ref_unit_to_merge={};this._ref_output_to_merge={};this._ref_output_pin_icon={};this._node_graph={};this._node_to_subgraph={};this._subgraph_to_node={};this._node_layer={};this._link_layer={};this._layout_node={};this._layout_target_node={};this._layout_core_abort_animation={};this._layout_core_animating=new Set;this._layout_core_children_counter={};this._layout_path=[];this._layout_component_count={};this._layout_sub_component_parent={};this._layout_dragging=!1;this._layout_drag_node_count=0;this._layout_drag_node={};this._layout_drag_index={};this._layout_drag_direction={};this._layout_drag_start_scroll_top={};this._layout_drag_start_scroll_height={};this._layout_drag_swap={};this._layout_drag_swap_index={};this._layout_drag_client_position={};this._layout_drag_start_children={};this._layout_drag_start_position={};this._layout_drag_init_position={};this._pointer_down={};this._pointer_down_position={};this._pointer_down_count=0;this._pointer_position={};this._pointer_down_move_count={};this._long_press_pointer=new Set;this._long_press_count=0;this._long_press_screen_position=dn;this._long_press_background_pointer=new Set;this._long_press_background_count=0;this._collapsing=!1;this._collapse_commit=!1;this._collapse_pointer_to_unit={};this._collapse_init_node_id_set=new Set;this._collapse_world_position=dn;this._collapse_init_spec=null;this._collapse_unit_id=null;this._collapse_unit_spec={};this._collapse_next_unit_id=null;this._collapse_next_spec_id=null;this._collapse_unit_next_pin_map={};this._collapse_merge_next_pin_map={};this._collapse_next_plug_spec_map=ve({},{});this._collapse_next_unit_pin_merge_map={};this._collapse_datum_id=null;this._collapse_datum_node_id=null;this._collapse_remaining=0;this._collapse_end_set=new Set;this._collapse_sub_component_parent_id={};this._collapse_next_sub_component_index_map={};this._collapse_sub_component_children={};this._collapse_sub_component_next_parent_id={};this._collapse_sub_component_next_children={};this._collapse_node_id=new Set;this._collapse_plugs=[];this._multiselect_area_start_position={x:0,y:0};this._multiselect_area_rect=RE;this._multiselect_area_node={};this._multiselect_area_ing=!1;this._simulation_layer=0;this._simulation_end=!1;this._long_click_compose_timeout=null;this._debug_interval=null;this._debug_buffer=[];this._debug_cursor=-1;this._control_lock=!1;this._temp_control_lock=!1;this._temp_control_unlock=!1;this._search_lock=!1;this._search_hidden=!0;this._search_start_unit_id=null;this._search_start_spec_id=null;this._search_start_unit_merges={};this._search_start_unit_plugs={};this._search_start_unit_parent_id=null;this._search_start_unit_index=null;this._search_start_graph_unit_spec=null;this._search_start_component_index=null;this._search_unit_id=null;this._search_unit_spec_id=null;this._search_unit_graph_position=null;this._search_unit_component_size=null;this._search_unit_merges={};this._search_unit_plugs={};this._search_unit_ref_merge_id=null;this._search_unit_ref_merge=null;this._search_unit_merged_pin_ids={input:{data:[],ref:[]},output:{data:[],ref:[]}};this._search_option_valid_pin_matches={};this._search_unit_datum_id=null;this._search_unit_datum_node_id=null;this._search_unit_init_spec_id=null;this._search_unit_spec_id_changed=!1;this._mode="none";this._mode_pointer={};this._cancel_click=!1;this._cancel_long_click=!1;this._cancel_long_press=!1;this._cancel_double_click=!1;this._cancel_click_hold=!1;this._cancel_node_long_click=!1;this._cancel_node_click=new Set;this._swap_next_click_hold_long_press=!1;this._capturing_gesture=!1;this._restart_gesture=!1;this._removing_err=!1;this._tree_layout=!1;this._green_drag=!1;this._green_drag_node_id=null;this._green_drag_clone_id=null;this._yellow_drag=!1;this._yellow_drag_node_id=null;this._yellow_drag_clone_id=null;this._blue_drag=!1;this._blue_drag_init_id=null;this._blue_drag_init_start_position={};this._blue_drag_init_pin_to_anchor={};this._blue_drag_init_anchor_to_pin={};this._blue_drag_init_merge_swap={};this._blue_drag_hover_unit_id=null;this._blue_drag_hover_position={};this._blue_drag_hover_merge_anchor={};this._blue_drag_hover_merge_swap={};this._animating_enter_fullwindow=!1;this._animating_sub_component_fullwindow=new Set;this._animating_sub_component_base_id=new Set;this._abort_sub_component_enter_base_animation={};this._abort_sub_component_leave_base_animation={};this._abort_leave_fullwindow={};this._abort_enter_fullwindow={};this._prevent_next_reset=!1;this._refresh_theme=()=>{let{$theme:t,$color:e}=this.$context,{style:n={}}=this.$props,{color:i=e}=n;i=_a(i)||i;let s=t==="dark",a=s?gS:yS,_=s?bS:vS;if(d0(i)){let c=s?1:.8;this._theme={node:Xn(t,i,0),text:Xn(t,i,10*c),selected:Xn(t,i,20*c),pin_text:Xn(t,i,30*c),type:Xn(t,i,30*c),sub_text:Xn(t,i,30*c),link:Xn(t,i,50*c),hovered:Xn(t,i,60*c),data:a,data_link:_}}else this._theme={node:i,text:i,pin_text:i,selected:i,type:i,sub_text:i,link:i,hovered:i,data:a,data_link:_}};this._theme={node:"currentColor",text:"currentColor",pin_text:"currentColor",selected:"currentColor",type:"currentColor",sub_text:"currentColor",link:"currentColor",hovered:"currentColor",data:"currentColor",data_link:"currentColor"};this._frame_out=!1;this._x=0;this._y=0;this._sx=1;this._sy=1;this._width=0;this._height=0;this._paste_file=t=>G(this,null,function*(){this._last_open_filename=t.name;let e=yield t.text(),n;try{n=JSON.parse(e)}catch(s){throw new Error("invalid JSON file")}let i=this._jiggle_world_screen_center();this.paste_bundle(n,i)});this._spec_refresh_node_position=t=>{this._set_units_position(t.units)};this._disable=()=>{let{animate:t}=this.$props;if(!this._disabled)if(this._disabled=!0,this._subgraph_unit_id)this._subgraph_cache[this._subgraph_unit_id].setProp("disabled",!0);else if(this._core_component_unlocked_count>0)for(let e in this._core_component_unlocked)this._disable_core_frame(e);else this._unlock_control(),this._disable_transcend(),this._hide_control(t)};this._enable=()=>{if(this._disabled)if(this._disabled=!1,this._subgraph_unit_id)this._subgraph_cache[this._subgraph_unit_id].setProp("disabled",!1);else{if(this._core_component_unlocked_count>0)for(let t in this._core_component_unlocked)this._enable_core_frame(t);else(!this._is_fullwindow||this._frame_out)&&this._control_lock&&this._enable_input();this._subgraph_unit_id||this._enable_transcend()}};this._enable_minimap_drag_and_drop=()=>{if(this._minimap){this._minimap.$element.setAttribute("draggable","true");let t=e=>{let{specs:n}=this.$props,i=hi(this._spec,n),s=JSON.stringify(i);e.dataTransfer.setData("text/plain",s),e.dataTransfer.dropEffect="copy"};this._minimap.$element.addEventListener("dragstart",t),this._minimap_drag_and_drop_unlisten=()=>{this._minimap.$element.removeEventListener("dragstart",t)}}};this._disable_minimap_drag_and_drop=()=>{this._minimap&&(this._minimap.$element.removeAttribute("draggable"),this._minimap_drag_and_drop_unlisten&&(this._minimap_drag_and_drop_unlisten(),this._minimap_drag_and_drop_unlisten=void 0))};this._init=!1;this._listen_component=()=>{this._component_unlisten=this._frame.addEventListeners([bo([{combo:"Escape",keydown:this._on_component_escape_keydown,strict:!1}])])};this._on_component_escape_keydown=()=>{};this._unlisten_component=()=>{this._component_unlisten(),this._component_unlisten=void 0};this.get_subraph_depth=()=>this._subgraph_depth;this._get_subgraph_pod=t=>{let e=this._subgraph_pod_cache[t];return e||(e=this._pod.$refUnit({unitId:t,_:["U","C","G"]}),this._subgraph_pod_cache[t]=e),e};this.get_units=()=>{let{units:t}=this._spec;return t||{}};this.get_unit_relative_positions=()=>{let t=this.get_units();return this.get_nodes_relative_positions(t)};this.get_node_relative_positions=()=>this.get_nodes_relative_positions(this._node);this.get_nodes_relative_positions=t=>{let e=[];for(let i in t){let s=this._get_node_position(i);e.push(s)}let n=Ls(e);return this.get_nodes_relative_positions_to(t,n)};this.get_nodes_relative_positions_to=(t,e)=>{let n={};for(let i in t){let s=this._get_node_position(i),a=L7(e,s);n[i]=a}return n};this.get_node_positions=()=>this._node;this.get_pin_positions=()=>this._pin_node;this._get_unit=t=>this.get_units()[t];this._get_unit_ids=()=>{let t=this.get_units();return J(t)};this.get_sub_component_frame_context=t=>{let e=this._core_component_frame[t],{$$context:n}=e;return n};this._get_unit_bundle=t=>{let e=this._get_unit(t),{specs:n}=this.$props;return un(e,n)};this._get_graph_unit_bundle_spec=t=>{let{specs:e}=this.$props,n=this._get_unit_spec(t);return hi(n,e)};this._pod_get_unit_deep_bundle=(t,e)=>{this._pod.$snapshotUnit({unitId:t},n=>{let i=this._get_unit_bundle(t);i.unit.memory=n,e(i)})};this._pod_remove_unit_ghost=(t,e,n,i)=>{this._pod.$removeUnitGhost({unitId:t,nextUnitId:e,nextUnitSpec:n},i)};this._pod_add_unit_ghost=(t,e,n,i)=>{this._pod.$addUnitGhost({unitId:t,nextUnitId:e,nextUnitBundle:n,nextUnitPinMap:i})};this._add_spec=t=>{let{id:e}=this.$system.newSpec(t);return e};this._set_spec=(t,e)=>{this._registry.setSpec(t,e)};this._fallback_new_spec_id=()=>this._registry.newSpecId();this._fallback_has_spec=t=>this._registry.hasSpec(t);this._fallback_empty_spec=()=>this._registry.emptySpec();this._fallback_new_spec=t=>this._registry.newSpec(t);this._fallback_set_spec=(t,e)=>this._registry.setSpec(t,e);this._fallback_get_spec=t=>this._registry.getSpec(t);this._fallback_delete_spec=t=>this._registry.deleteSpec(t);this._fallback_fork_spec=t=>this._registry.forkSpec(t);this._fallback_inject_specs=t=>this._registry.injectSpecs(t);this._fallback_register_unit=t=>this._registry.registerUnit(t);this._fallback_unregister_unit=t=>this._registry.unregisterUnit(t);this._register_unit=t=>{let{registerUnit:e}=this.$props;e(t)};this._unregister_unit=t=>{let{unregisterUnit:e}=this.$props;e(t)};this._get_unit_spec_name=t=>{let{getSpec:e}=this.$props,n=this._get_unit_spec_id(t),i=e(n),{name:s=""}=i;return s};this._get_unit_name=t=>{let e=this._get_unit_spec_name(t),n=this._get_unit_metadata(t),{rename:i}=n;return i||e};this._spec_get_merges=()=>{let{merges:t}=this._spec;return t||{}};this._get_input=t=>this._get_inputs()[t];this._get_output=t=>this._get_outputs()[t];this._get_pin=(t,e)=>t==="input"?this._get_input(e):this._get_output(e);this._get_pins=()=>{var t,e;return{input:(t=this._spec.inputs)!=null?t:{},output:(e=this._spec.outputs)!=null?e:{}}};this._get_inputs=()=>{let{inputs:t={}}=this._spec;return t};this._get_outputs=()=>{let{outputs:t={}}=this._spec;return t};this._get_merge=t=>{let{mergeId:e}=It(t);return this._spec_get_merge(e)};this._spec_has_merge=t=>{let{mergeId:e}=It(t);return!!this._spec_get_merge(e)};this._spec_has_merge_pin=(t,e,n,i)=>Pr(this._spec,t,e,n,i);this._spec_has_unit=t=>!!this._get_unit(t);this.__spec_has_merge=t=>!!this._spec_get_merge(t);this._spec_get_merge=t=>this._spec_get_merges()[t];this._get_merge_by_node_id=t=>{let{mergeId:e}=It(t);return this._spec_get_merge(e)};this._get_unit_merges=t=>ys(this._spec,t);this._get_unit_plugs=t=>bs(this._spec,t);this._get_graph_unit_pin_spec=(t,e,n)=>{let i=this._get_unit(t);return!!i[e]&&i[e][n]||{}};this._get_graph_unit_unit_spec=(t,e)=>{let{getSpec:n}=this.$props,i=this._get_unit_spec(t),{units:s}=i,a=s[e],{id:_}=a;return n(_)};this._get_graph_unit_unit_merges=(t,e)=>{let n=this._get_unit_spec(t);return ys(n,e)};this._get_graph_unit_unit_plugs=(t,e)=>{let n=this._get_unit_spec(t);return bs(n,e)};this._get_subgraph_unit_sub_component_parent_id=(t,e)=>{let i=this._subgraph_cache[t].get_spec();return Ao(i,e)};this._get_unit_pin_spec=t=>{let{unitId:e,type:n,pinId:i}=it(t);return this.__get_unit_pin_spec(e,n,i)};this.__get_unit_pin_spec=(t,e,n)=>{let{specs:i,getSpec:s}=this.$props,a;return t===this._search_unit_id?a=s(this._search_unit_spec_id):a=this._get_unit_spec(t),e==="output"&&n===$t?{name:$t,type:"any",ref:!0}:a[`${e}s`][n]};this._get_unit_spec_id=t=>{let e=this._get_unit(t),{id:n}=e;return n};this._get_unit_spec=t=>{let{getSpec:e}=this.$props,n=this._get_unit_spec_id(t);return e(n)};this._spec_get_sub_pin_spec=(t,e,n)=>Sg(this._spec,t,e,n);this._pod_get_unit_state=(t,e)=>this._pod.$getUnitState({unitId:t},e);this._pod_get_graph_state=t=>this._pod.$getGraphState({},t);this._get_unit_component_spec=t=>{let{specs:e}=this.$props,n=this._get_unit_spec_id(t);return _x(e,n)};this._get_pin_spec=(t,e)=>(this._spec[`${t}s`]||{})[e];this._has_exposed_pin_named=(t,e)=>!!(this._spec[`${t}s`]||{})[e];this._has_exposed_input_named=t=>this._has_exposed_pin_named("input",t);this._has_exposed_output_named=t=>this._has_exposed_pin_named("output",t);this._spec_get_exposed_pin_specs=()=>xg(this._spec);this._get_exposed_sub_pin_spec=(t,e,n)=>{let i=this._get_pin_spec(t,e),{plug:s={}}=i;return s[n]};this._spec_get_pin_node_plug_spec=(t,e)=>{let n=this._is_merge_node_id(e),i=this._is_link_pin_node_id(e),s=this._spec[`${t}s`];for(let a in s){let _=s[a],{plug:c}=_;for(let p in c){let u=c[p];if(n){let{mergeId:d}=It(e);if(d===u.mergeId)return{type:t,pinId:a,subPinId:p,pinSpec:_,subPinSpec:u}}else if(i){let{unitId:d,pinId:m}=it(e);if(d===u.unitId&&m===u.pinId)return{type:t,pinId:a,subPinId:p,pinSpec:_,subPinSpec:u}}}}return null};this._get_component_fallback_size=()=>{if(this.$context){let{$height:t,$width:e}=this.$context;return{width:e/9,height:t/9}}else return{width:120,height:120}};this._get_unit_sub_component_spec=t=>{let e=this._get_component_spec();return e&&e.subComponents&&e.subComponents[t]||null};this._get_unit_data=t=>{let e=ve({},{});return this._for_each_unit_pin(t,(n,i,s)=>{let a=this._pin_datum_tree[n];a&&(e[i][s]=a)}),e};this._get_unit_metadata=t=>{let e=this._get_unit(t),{metadata:n={}}=e;return n};this._get_unit_metadata_component=t=>{let e=this._get_unit_metadata(t),{component:n={}}=e;return n};this._get_unit_component_default_size=t=>{let{width:e,height:n}=this._get_component_fallback_size(),i=this._get_unit_component_spec(t),s=i&&i.defaultWidth||e,a=i&&i.defaultHeight||n;return{width:s,height:a}};this._get_unit_component_layout_size=t=>{let{width:e,height:n}=this._get_unit_component_default_size(t),i=this._get_unit_metadata_component(t),s=this._get_unit_sub_component_spec(t)||{},a=s.width||i.width||e,_=s.height||i.height||n;return{width:a,height:_}};this._get_unit_component_graph_size=t=>{let{width:e,height:n}=this._get_unit_component_default_size(t),i=this._get_unit_metadata_component(t),s=i.width||e,a=i.height||n;return{width:s,height:a}};this._get_node_anchor_node_id=t=>this._is_pin_node_id(t)?this._get_pin_anchor_node_id(t):this._is_int_node_id(t)?this._get_int_pin_anchor_node_id(t):t;this._get_merge_anchor_node_id=t=>{let e=this._merge_to_ref_unit[t],n=this._merge_to_ref_output[t];return e||n||t};this._get_pin_anchor_node_id=t=>{if(this._is_link_pin_node_id(t)){let e=this._pin_to_merge[t];return e?this._get_merge_anchor_node_id(e):t}else return this._get_merge_anchor_node_id(t)};this._get_datum_pin_anchor_node_id=t=>{let e=null,n=this._datum_to_pin[t];n&&(e=this._get_pin_anchor_node_id(n));let i=this._datum_to_plug[t];return i&&(e=i),e};this._has_input_merge=t=>{let{mergeId:e}=It(t);return this._merge_input_count[e]>0};this._has_output_merge=t=>{let{mergeId:e}=It(t);return this._merge_output_count[e]>0};this._is_input_only_merge=t=>{let{mergeId:e}=It(t);return this._merge_output_count[e]===0};this._is_output_only_merge=t=>{let{mergeId:e}=It(t);return this._merge_input_count[e]===0};this._is_link_pin_merged=t=>!!this._pin_to_merge[t];this._spec_link_pin_ignored={};this._spec_is_link_pin_ignored=t=>{if(this._spec_link_pin_ignored[t]!==void 0)return this._spec_link_pin_ignored[t];let{unitId:e,type:n,pinId:i}=it(t),s=this.__spec_is_link_pin_ignored(e,n,i);return this._spec_link_pin_ignored[t]=s,s};this.__spec_is_link_pin_ignored=(t,e,n)=>{let i=this.__get_unit_pin_spec(t,e,n),{defaultIgnored:s}=i,a=this._get_graph_unit_pin_spec(t,e,n),{ignored:_}=a,c=!1;return typeof _=="boolean"?c=_:s===!0&&(c=!0),c};this._is_link_pin_ref=t=>!!this._get_link_pin_ref(t);this.__is_link_pin_ref=(t,e,n)=>this.__get_link_pin_ref(t,e,n);this._is_link_pin_not_ref=t=>!this._is_link_pin_ref(t);this._is_link_pin_init=t=>!!this._get_link_pin_init(t);this._get_link_pin_init=t=>{let e=this._get_unit_pin_spec(t),{init:n}=e;return n};this._get_link_pin_merge_id=t=>{let e=this._pin_to_merge[t],{mergeId:n}=It(e);return n};this._get_link_pin_ref=t=>{let{unitId:e,type:n,pinId:i}=it(t),s=this._get_unit_pin_spec(t),a=this._get_graph_unit_pin_spec(e,n,i),{ref:_=s.ref}=a;return _};this.__get_link_pin_ref=(t,e,n)=>{let i=this.__get_unit_pin_spec(t,e,n),{ref:s}=i;return s};this._is_merge_ref=t=>this._merge_ref[t];this._is_pin_node_ref=t=>this._is_link_pin_node_id(t)?this._is_link_pin_ref(t):this._is_merge_node_id(t)?this._is_merge_ref(t):!1;this._is_pin_ref=(t,e)=>{let n=this._get_pin(t,e),{ref:i=!1}=n;return i};this._is_input_pin_ref=t=>this._is_input_pin_node_id(t)&&this._is_pin_node_ref(t);this._is_link_pin_constant=t=>{let{unitId:e,type:n,pinId:i}=it(t);return!!this._spec_is_link_pin_constant(e,n,i)};this._spec_is_link_pin_constant=(t,e,n)=>{let i=this._get_graph_unit_pin_spec(t,e,n),{constant:s}=i;return!!s};this._is_same_subgraph=(t,e)=>{let n=this._node_to_subgraph[t],i=this._node_to_subgraph[e];return n===i};this._reset_spec=()=>{let{injectSpecs:t}=this.$props;this._pod&&this._pod.$getBundle({},e=>{let{spec:n,specs:i}=e;t(i!=null?i:{}),this._spec=B(n),this._reset(),this._setup_pod(this._pod)})};this._get_spec_init_unit_pin_position=(t,e)=>{let{units:n={}}=t,i=n[e],{id:s}=i,a=ve({},{});return this._for_each_spec_id_pin(s,(_,c)=>{let p=nt(i,[_,c],{}),{metadata:u={}}=p,{position:d}=u;if(d){let m=Wn(this._jiggle_world_screen_center(),d);a[_][c]=m}}),a};this.get_spec=()=>this._subgraph_graph?this._subgraph_graph.get_spec():this._spec;this.getZoom=()=>this._zoom;this._dispatch_add_unit_action=(t,e)=>{let n=this._get_node_position(t),i=this._get_unit_pin_position(t),s=this._is_unit_component(t),a=s?this._get_layout_node_screen_position(t):this._screen_center(),_=s?this._spec_get_sub_component_parent_id(t):null,c=B({unit:e});this._dispatch_action(fi(t,c,n,i,a,_,{}))};this._dispatch_swap_unit_action=(t,e,n,i,s,a,_,c,p,u,d,m)=>{let h=this._make_swap_unit_action(t,e,n,i,s,a,_,c,p,u,d,m);this._dispatch_action(h)};this._make_swap_unit_action=(t,e,n,i,s,a,_,c,p,u,d,m)=>{let h=yr(t,e,void 0,void 0,void 0,s,n,i),f=fi(_,c,void 0,void 0,void 0,d,p,u);return Mi([h,f])};this._dispatch_clone_unit_action=(t,e)=>{};this._dispatch_action_add_merge=(t,e)=>{let n=At(t),i=this._get_merge_position(n);this._dispatch_action(hs(t,B(e),i))};this._make_remove_unit_action=(t,e,n=!0,i=!0)=>{let{specs:s}=this.$props,a=this._get_unit(t);e=e!=null?e:un(a,s);let _=this._get_node_position(t),c=this._get_unit_pin_position(t),p=this._is_unit_component(t),u=p?this._get_layout_node_screen_position(t):this._screen_center(),d=p?this._spec_get_sub_component_parent_id(t):null,m=this._get_unit_merges(t),h=this._get_unit_plugs(t);return B(yr(t,e,_,c,u,d,n?m:void 0,i?h:void 0))};this._dispatch_action_remove_unit=t=>{let e=this._make_remove_unit_action(t);this._dispatch_action(e)};this._dispatch_action_remove_merge=t=>{this._dispatch_action(this._make_remove_merge_action(t))};this._make_remove_merge_action=t=>{let{mergeId:e}=It(t),n=this._get_merge(t),i=this._get_merge_position(t);return Ir(e,B(n),i)};this._get_sub_component=t=>this._sub_component[t];this._get_sub_component_spec=t=>{let e=this._get_component_spec(),{subComponents:n={}}=e;return n[t]};this._spec_get_sub_component_children=t=>{var i;let e=(i=this._get_sub_component_spec(t))!=null?i:{},{children:n=[]}=e;return n};this._spec_add_unit=(t,e,n=!0)=>{let{setSpec:i}=this.$props;Mo({unitId:t,unit:B(e)},this._spec),n&&this._spec_mirror_unit(t),this._spec_update_metadata_complexity()};this._spec_mirror_unit=t=>{let{setSpec:e}=this.$props;if(!this._is_unit_base(t)){let n=this._get_unit_spec(t);e(n.id,B(n))}};this._spec_append_component=(t,e,n={children:[]})=>{this._spec.component=this._spec.component||{subComponents:{}},this._spec.component=A0({unitId:e,spec:n},this._spec.component||{}),t?this._spec.component=vh({id:t,childId:e},this._spec.component||{}):this._spec.component=T0({unitId:e},this._spec.component||{});let{width:i,height:s}=this._get_unit_component_graph_size(e);this._update_max_component_size(e,i,s),this._spec_component_set_default_size()};this._animate_all_current_layout_layer_node=()=>{let t=this._get_current_layout_layer_id();this._animate_all_layout_layer_node(t)};this._animate_all_layout_layer=()=>{this._animate_all_layout_layer_node(null);for(let t of this._layout_path)this._animate_all_layout_layer_node(t)};this._animate_all_layout_layer_node=t=>{let e=this._spec_get_layout_layer_children(t);for(let n of e){if(this._layout_drag_node[n])continue;let i=this._layout_node[n];this._animate_layout_core(n,i,()=>this._layout_target_node[n],()=>{})}};this._spec_update_metadata_complexity=ba(()=>{let{specs:t}=this.$props,e=QS(t,this._spec);Tg({path:["metadata","complexity"],value:e},this._spec)},1e3);this._flush_debugger=()=>{let t=this._debug_cursor+1,e={},n={},i={},s=u=>{let{unitId:d,pinId:m,data:h}=u;e[d]=e[d]||{},e[d][m]=h},a=u=>{let{unitId:d,pinId:m}=u;e[d]=e[d]||{},e[d][m]=void 0},_=u=>{let{unitId:d,pinId:m,data:h}=u;n[d]=n[d]||{},n[d][m]=h},c=u=>{let{unitId:d,pinId:m}=u;n[d]=n[d]||{},n[d][m]=void 0},p={ref_input:{data:s,drop:a},ref_output:{data:_,drop:c},input:{data:s,drop:a},output:{data:_,drop:c},merge:{data:u=>{let{id:d,data:m}=u;i[d]=m},drop:u=>{let{id:d}=u;i[d]=void 0}},unit:this._graph_moment_handler.unit,graph:this._graph_moment_handler.graph};for(;t<this._debug_buffer.length;){let u=this._debug_buffer[t],{event:d,type:m,data:h}=u;p[m][d](h),t++}gs({input:e,output:n},(u,d)=>{for(let m in d){let h=d[m];for(let f in h){let b=ut(m,u,f),g=h[f];this._is_pin_active(b)?g===void 0?this._graph_debug_drop_pin_data(b):this._on_graph_unit_pin_data_moment({unitId:m,type:u,pinId:f,data:g}):g===void 0||this._on_graph_unit_pin_data_moment({unitId:m,type:u,pinId:f,data:g})}}});for(let u in i){let d=i[u],m=At(u);this._is_pin_active(m)?d===void 0?this._graph_debug_drop_pin_data(m):this._graph_debug_set_pin_value(m,d):d===void 0||this._graph_debug_set_pin_value(m,d)}this._clear_debugger()};this._connect_sub_component=(t,e=!0)=>{let n=this._get_sub_component(t),i=ho(n),s=this._pod.$refUnit({unitId:t,_:i});n.connect(s,e)};this._disconnect_sub_component=t=>{let e=this._get_sub_component(t);e&&e.disconnect()};this._disconnect_all_sub_component=()=>{for(let t in this._component.$subComponent)this._disconnect_sub_component(t)};this._get_unit_radius=(t,e=!0)=>{let{specs:n}=this.$props,i=this._get_unit_spec_id(t);return So(n,i,e)};this._sim_add_pin_datum=(t,e,n,i,s,a)=>{let _=ut(t,e,n);a=a!=null?a:this._predict_pin_datum_initial_position(_);let c=Th(s);this._sim_add_pin_datum_tree(t,e,n,i,c,a)};this._sim_graph_unit_add_unit_pin=(t,e,n,i)=>{let s=this._get_unit(t),a=nt(s,[e,n],{}),_=ut(t,e,n);this._is_link_pin_merged(_)?this._sim_add_link_pin_link(t,e,n):(this._sim_add_link_pin_node(t,e,n,i),this._sim_add_link_pin_link(t,e,n));let p=this._is_link_pin_ref(_),{data:u}=a;if(u!==void 0&&!p){let d=this._new_datum_id(),m=F0(u),h=this._predict_pin_datum_initial_position(_);this._sim_add_pin_datum_tree(t,e,n,d,m,h)}};this._sim_add_pin_datum_tree=(t,e,n,i,s,a)=>{let _=ut(t,e,n),c=Xe(i);this.__sim_add_datum_node(i,s,a),this._sim_add_pin_datum_link(c,_),this._mem_set_pin_datum(_,i)};this._sim_add_unit_pins=(t,e,n={input:{},output:{}})=>{let i=this._get_unit_spec(t),{inputs:s={},outputs:a={}}=i,_=this._node[t],{x:c,y:p,r:u}=_,d=(h,f,b,g)=>{var x;return((x=n==null?void 0:n[h])==null?void 0:x[f])||b0(b,g,h,5,c,p,u,void 0,24)},m=(h,f)=>{let b=0,g=J(f).length;for(let v in f){let x=ut(t,h,v),I=this._spec_is_link_pin_ignored(x),E=d(h,v,b,g);this._sim_graph_unit_add_unit_pin(t,h,v,E),I||b++}};m("input",s),m("output",a)};this._spec_get_unit_icon=t=>{let e=this._get_unit_spec(t);return e.metadata&&e.metadata.icon||void 0};this._sim_add_unit_core=(t,e,n,i={})=>{var H,K,q,Q;let{specs:s,getSpec:a}=this.$props,{id:_}=e,c=a(_),p=qr(c),u=on(s,_),d,m,h,f;if(this._register_unit(e.id),u){let at=this._get_unit_component_graph_size(t);m=(H=i.width)!=null?H:at.width+2,h=(K=i.height)!=null?K:at.height+2,d=Math.max(m,h)/2,f="rect"}else d=So(s,_,!0),m=(q=i.width)!=null?q:2*d,h=(Q=i.height)!=null?Q:2*d,f="circle";let{x:b,y:g}=n||this._jiggle_world_screen_center();this._sim_add_node(t,{_x:b,_y:g,x:b,y:g,fx:void 0,fy:void 0,shape:f,r:d,width:m,height:h,vx:0,vy:0,ax:0,ay:0,hx:0,hy:0,layer:Rn}),this._add_node_link_heap_node(t),this._node_type[t]="u",this._node_layer[t]=Rn;let v=this._node[t];this._unit_node[t]=v,this._normal_node[t]=v;let x=Kn(t);this._node_type[x]="p";let I=this._node_comp[t],E=this._node_content[t],D=this._create_selection(t,{width:m,height:h,shape:f,stroke:Lt}),w=this._create_touch_area({className:"core-area",width:m,height:h,style:{borderRadius:u?"0":"50%",userSelect:"none"}});this._core_area[t]=w;let T=this._spec_get_unit_icon(t);T===void 0&&(p||pe(c.units||{})>0)&&(T="question");let{width:C,height:P}=this._get_core_icon_size(t),k=new $e({icon:T,style:S({position:"absolute",width:`${C}px`,height:`${P}px`,top:"50%",left:"50%",display:u?"none":"block",fill:"transparent",stroke:this._theme.node,transform:"translate(-50%, -50%)"},ne("none"))},this.$system);k.preventDefault("touchstart"),this._core_icon[t]=k;let M=c.name||ao;this._node_name[t]=M;let{width:U,height:L}=this._get_node_name_size(t),O=new Ys({className:"core-name",style:S({position:"relative",display:"flex",fontSize:"12px",borderWidth:"0px",borderStyle:"solid",paddingTop:"1px",textDecoration:"none",justifyContent:"center",textAlign:"center",pointerEvents:this._mode==="info"?"inherit":"none",touchAction:"none",color:this._theme.text,width:`${U+2}px`,height:`${L+4}px`,overflow:"hidden",overflowWrap:"break-word",wordBreak:"break-word",left:"50%",top:"calc(100% + 3px)",transform:"translateX(-50%)",maxWidth:H0*L0/2+"px"},ne("none")),value:Mv(M,L0),maxLength:U0},this.$system);O.$element.addEventListener("dragstart",at=>{at.preventDefault()}),this._sim_setup_node_name(t,O),this._core_name[t]=O;let R=c.metadata&&c.metadata.description||"...",{width:N,height:z}=Sh(R,10,30),F=new st({className:"core-description",style:{position:"relative",display:"none",fontSize:"10px",borderColor:Lt,borderWidth:"0px",borderStyle:"solid",textDecoration:"none",justifyContent:"center",textAlign:"center",pointerEvents:"none",touchAction:"none",color:this._theme.pin_text,width:`${N}px`,height:`${z}px`,overflowWrap:"break-word",left:"50%",top:"calc(100% + 6px)",transform:"translateX(-50%)",overflow:"visible"},innerText:R},this.$system);this._core_description[t]=F;let V=new st({className:"core-content",style:{position:"relative"}},this.$system);V.appendChild(D),V.appendChild(w),V.appendChild(k),V.appendChild(O),V.appendChild(F),this._core_content[t]=V;let j=new st({className:"core",style:{width:`${m}px`,height:`${h}px`,position:"absolute",borderWidth:"1px",borderRadius:f==="circle"?"50%":"0",borderColor:this._theme.node,borderStyle:"solid",boxSizing:"border-box",touchAction:"none"}},this.$system);j.appendChild(V),this._core[t]=j,E.appendChild(j),this._zoom_comp.appendChild(I),this._unit_count++,this._minimap&&this._minimap.tick(),this._unit_count===1&&this._minimap_screen&&(this._minimap_screen.$element.style.display="block"),this._static&&(this._ascend_node_dict[t]||this._start_node_static(t)),this._refresh_core_border_color(t)};this._on_core_name_focus=t=>{this._set_core_selection_to_name(t)};this._on_plug_name_focus=t=>{this._set_plug_selection_to_name(t)};this._on_unit_pin_name_focus=t=>{this._set_pin_selection_to_name(t)};this._on_plug_name_blur=t=>{this._set_node_selection_to_node(t);let{type:e,pinId:n,subPinId:i}=gt(t),s=this._get_node_temp_name(t),a=this._is_valid_plug_name(t,s),_=n;if(s!==n){a?(this._set_pin_name(t,s),_=s):this._set_pin_name(t,n);let c=Kt(e,_,i);this._mode==="info"&&this._enable_plug_name(c)}};this._pod_set_unit_pin_set_id=(t,e,n,i)=>{this._pod.$setUnitPinSetId({unitId:t,type:e,pinId:n,nextPinId:i})};this._on_unit_pin_name_blur=t=>{this._set_node_selection_to_node(t);let{unitId:e,type:n,pinId:i}=it(t),s=this._get_node_temp_name(t),a=this._is_valid_pin_name_value(s),_=i;if(s!==i){if(a)this._on_graph_unit_set_pin_set_id({type:n,pinId:i,nextPinId:s,path:[e]}),this._pod_set_unit_pin_set_id(e,n,i,s),_=s;else{this._set_node_temp_name(t,i);let p=this._pin_name[t];p&&p.setProp("value",i)}let c=ut(e,n,_);this._mode==="info"&&this._enable_pin_name(c)}};this._set_plug_selection_to_name=t=>{this._set_node_selection_to_name(t,-2,0)};this._set_pin_selection_to_name=t=>{this._set_node_selection_to_name(t,-1,0,0,-2)};this._set_node_selection_to_node=t=>{let{width:e,height:n,shape:i}=this._node[t],s=this._node_selection[t];s.setProp("y",0),s.setProp("shape",i),this._enable_core_resize(t),this._resize_selection(t,e,n)};this._set_node_selection_to_name=(t,e=0,n=0,i=0,s=0)=>{let{height:a}=this.get_node(t),{width:_,height:c}=this._get_node_name_size(t),p=n,u=a/2+e+c/2+3,d="rect";this._set_selection_y(t,u),this._set_selection_x(t,p),this._set_selection_shape(t,d),this._is_unit_node_id(t)&&this._disable_core_resize(t);let m=_+i,h=c+s;this._resize_selection(t,m,h)};this._set_selection_x=(t,e)=>{this._node_selection[t].setProp("x",e)};this._set_selection_y=(t,e)=>{this._node_selection[t].setProp("y",e)};this._set_selection_shape=(t,e)=>{this._node_selection[t].setProp("shape",e)};this._sim_add_core_component_frame=t=>{let e=this._core_content[t],n=new ln({className:"core-component-frame",disabled:!0,style:{position:"absolute",top:"0",width:"100%",height:"100%"}},this.$system),{$$context:i}=n;this._core_component_frame[t]=n,this._core_component_frame_context[t]=i,e.appendChild(n)};this._sim_add_core_resize=t=>{let e=this._core_content[t],n=new Js({disabled:!0,l:21},this.$system);n.addEventListener(mt("resizestart",i=>{this._on_component_resize_start(t,i)})),n.addEventListener(mt("resized",i=>{this._on_component_resize(t,i)})),n.addEventListener(mt("resizeend",i=>{this._on_component_resize_end(t,i)})),this._core_component_resize[t]=n,e.appendChild(n)};this._sim_add_layout_core_children_counter=t=>{let{animate:e}=this.$props,n=this._layout_core[t],s=this._spec_get_sub_component_children(t).length,a=new st({style:{opacity:"0",position:"absolute",width:"auto",height:"auto",left:"50%",top:"-24px",transform:"translate(-50%)",pointerEvents:"none",userSelect:"none"},innerText:`${s}`},this.$system);this._layout_core_children_counter[t]=a,n.appendChild(a)};this._sim_add_core_component_overlay=t=>{let e=this._core_content[t],n=this._create_overlay({className:"core-overlay"});this._core_component_overlay[t]=n,e.appendChild(n)};this._sim_add_core_component=(t,e,n)=>{if(this._unit_component_count++,this._component_nodes[t]=this._node[t],this._sim_add_core_component_frame(t),this._sim_add_core_resize(t),this._sim_add_core_component_overlay(t),this._sim_add_layout_core(t,e,n),this._sim_add_layout_core_children_counter(t),this._layout_sub_component_parent[t]=e,this._tree_layout){let i=this._layout_core[t];this._listen_layout_core(t,i),e&&!this._layout_path.includes(e)||(this._move_core_content_graph_to_layout(t),this._show_layout_core(t))}};this._refresh_current_layout_node_target_position=()=>{let t=this._get_current_layout_layer_id();this._refresh_layout_node_target_position(t)};this._refresh_layout_root_node_size=()=>this._refresh_layer_layout_target_node_size(null);this._refresh_layer_layout_target_node_size=t=>{let{$width:e,$height:n}=this.$context,i=this._spec_get_layout_layer_children(t);for(let s=0;s<i.length;s++){let a=i[s],_=this._get_unit_component_layout_size(a),{width:c,height:p}=_;c=Math.min(c,e-2*UE),p=Math.min(p,n-2*kh);let u=this._layout_target_node[a];u.width=c,u.height=p}};this._refresh_all_layout_node_size=()=>{this._refresh_layer_layout_target_node_size(null);for(let t of this._layout_path)this._refresh_layer_layout_target_node_size(t)};this._force_all_layout_node_traits=()=>{this._force_layout_node_traits(null);for(let t of this._layout_path)this._force_layout_node_traits(t)};this._force_layout_node_traits=t=>{let e=t===null?this._spec_get_component_children():this._spec_get_sub_component_children(t);for(let n of e){let{x:i,y:s,width:a,height:_}=this._layout_target_node[n];this._set_layout_core_position(n,i,s),this.__resize_layout_core(n,a,_)}};this._search_vertical_padding=2*kh;this._refresh_layout_node_target_position=t=>{var h,f,b,g,v,x;let{$width:e,$height:n}=this.$context,i=t===null?this._spec_get_component_children():this._spec_get_sub_component_children(t),s={},a=[],_=[],c=0,p=0,u=0;for(let I=0;I<i.length;I++){let E=i[I],D=this._layout_target_node[E],{width:w,height:T}=D;a[p]+w>=e-150&&(c+=((h=_[p])!=null?h:0)+60,p++,u=0),s[E]=[p,u],a[p]=((f=a[p])!=null?f:0)+w,_[p]=Math.max((b=_[p])!=null?b:0,T),u>0&&(a[p]+=60),u++}c+=_[p];let d=[],m=[];for(let I=0;I<i.length;I++){let E=i[I],D=this._layout_target_node[E],[w,T]=s[E],{width:C}=D,P=(g=m[w])!=null?g:0,k=_[w],M=-a[w]/2+((v=d[w])!=null?v:0)+T*60+C/2,U;c>n-120?U=P+w*60-n/2+60+k/2:U=P+w*60-c/2+k/2;let L=c+1*kh+this._search_offset_y,O=Math.max(L,n);this._set_all_layout_heights(t,O);let R=this._layout_target_node[E];R.x=M,R.y=U,m[w+1]||(m[w+1]=P+_[w]),d[w]=((x=d[w])!=null?x:0)+C}};this._search_offset_y=0;this._set_layout_search_offset_y=(t,e)=>{this._search_offset_y=e};this._ensure_layout_height_animation=t=>{this._abort_layout_layer_height_animation[t]||this._start_layout_layer_height_animation(t)};this._reset_all_layout_heights=()=>{let{$height:t}=this.$context;this._set_all_layout_heights(null,t+2*kh);for(let e of this._layout_path)this._set_all_layout_heights(e,t+2*kh)};this._abort_layout_layer_height_animation={};this._layout_layer_target_height=0;this._layout_layer_current_height=0;this._start_layout_layer_height_animation=t=>{let e={height:this._layout_layer_current_height},n=()=>({height:this._layout_layer_target_height}),i=[["height",1]];this._abort_layout_layer_height_animation[t]=this._animate_simulate(e,n,i,({height:s})=>{this._set_all_layout_heights(t,s)},()=>!1)};this._set_all_layout_heights=(t,e)=>{let n=this._get_layout_layer(t);n.height.$element.style.height=`${e}px`,n.foreground.$element.style.height=`${e}px`,n.child_foreground.$element.style.height=`${e}px`};this._move_all_layout_node_target_position=t=>{let{animate:e}=this.$props;e?this._animate_all_layout_layer_node(t):this._set_all_layout_layer_core_position(t)};this._move_all_current_layout_node_target_position=()=>{let t=this._get_current_layout_layer_id();this._move_all_layout_node_target_position(t)};this._clamp_layout_core_size=t=>{let{width:e,height:n}=t,i=this._get_layout_max_width();return{width:rn(e,wh,i),height:n}};this._sim_add_layout_core=(t,e,n)=>{let{x:i,y:s}=n,a=this._get_unit_component_layout_size(t),{width:_,height:c}=this._clamp_layout_core_size(a),p=new st({style:{opacity:"1",position:"absolute",left:`calc(50% + ${i}px)`,top:`calc(50% + ${s}px)`,width:`${_+2}px`,height:`${c+2}px`,transform:"translate(-50%, -50%)",borderWidth:"1px",borderStyle:"solid",borderColor:"currentColor",boxSizing:"content-box",touchAction:"none"}},this.$system);this._layout_core[t]=p;let u=this.getFontSize(),d={x:i,y:s,width:_,height:c,sx:1,sy:1,opacity:1,fontSize:u};this._layout_node[t]=d,this._layout_target_node[t]=B(d),e?this._ensure_layout_layer(e).children.appendChild(p):this._layout_root.children.appendChild(p)};this._search_adding_unit=!1;this._sim_add_sub_component=(t,e={},n,i=!0)=>{this._mem_add_unit_component(t,e),i&&this._sim_add_sub_component_to_parent(t,n)};this._sim_add_sub_component_to_parent=(t,e)=>{this._mem_add_unit_component_parent(t),this._in_component_control&&this._place_sub_component(t,e)};this._set_sub_component_index=(t,e)=>{this._sub_component_index[t]=e};this._sub_component={};this._mem_add_unit_component=(t,e)=>{let{components:n,classes:i}=this.$system,{specs:s}=this.$props;this._search_adding_unit=!0;let a=this._component.$subComponent[t];if(!a){if(this._subgraph_unit_id===t)a=this._subgraph_graph._component;else{let c=this._get_unit_spec_id(t),p=Wo(n,s,i,c,{},e);a=new p({},this.$system)}this._component.setSubComponent(t,a)}this._sub_component[t]=a;let _=this._get_sub_component_tree_index(t);this._set_tree_sub_component_index(t,_),this._search_adding_unit=!1};this._mem_add_unit_component_parent=t=>{let e=this._get_sub_component(t),n=this._spec_get_sub_component_parent_id(t);if(n){let i=this._get_sub_component(n);i.$parentRoot.includes(e)||i.pushParentRoot(e,"default"),this._mem_layout_push_parent_root(n,t,"default")}else this._component.$root.includes(e)||this._component.pushRoot(e)};this._node_name={};this._is_valid_unit_name=t=>!(t.length===0||t.match(/\n/g)||t.length>U0);this._get_node_temp_name=t=>{var e;return(e=this._node_name[t])!=null?e:""};this._mem_set_node_temp_name=(t,e)=>{this._is_unit_node_id(t)?this._node_name[t]=B0(e):this._node_name[t]=e};this._set_unit_temp_name=(t,e)=>{let n=B0(e),i=Mv(n,L0),s=this._core_name[t],{selectionStart:a,selectionEnd:_}=s.$element;n.length>U0&&(n=n.substring(0,U0),this._mem_set_node_temp_name(t,n)),this._dom_set_core_temp_name(t,i),s.$element.setSelectionRange(a,_),this._set_core_selection_to_name(t),this._refresh_core_name_color(t),this._refresh_core_name_size(t)};this._dom_set_core_temp_name=(t,e)=>{this._core_name[t].setProp("value",e)};this._refresh_core_name_color=t=>{let e=this._get_node_temp_name(t),n=B0(e);if(this._is_valid_unit_name(n))this._set_core_name_caret_color(t,"currentColor");else{let s=this._get_err_color();this._set_core_name_caret_color(t,s)}};this._get_err_color=()=>Rs;this._get_mode_color=t=>{let{$theme:e}=this.$context;return Ze(e,t,"currentColor")};this._set_core_name_caret_color=(t,e)=>{let n=this._core_name[t];this._set_name_comp_caret_color(n,e)};this._set_name_comp_caret_color=(t,e)=>{t.$element.style.caretColor=e};this._should_core_name_be_selectable=t=>this._mode==="info";this._set_core_name_user_select_none=t=>{let e=this._core_name[t];e.$element.style.userSelect="none"};this._set_core_name_user_select_inherit=t=>{let e=this._core_name[t];e.$element.style.userSelect="none"};this._refresh_core_name_user_select=t=>{this._should_core_name_be_selectable(t)?this._set_core_name_user_select_inherit(t):this._set_core_name_user_select_none(t)};this._get_core_name_size=t=>{let e=this._node_name[t],n=B0(e);return Sh(n,L0,H0)};this._get_node_name_size=t=>{if(this._is_unit_node_id(t))return this._get_core_name_size(t);if(this._is_ext_node_id(t))return this._get_plug_name_size(t);if(this._is_link_pin_node_id(t))return this._get_pin_name_size(t);throw new Ko};this._refresh_core_name_size=t=>{let{width:e,height:n}=this._get_node_name_size(t),i=this._core_name[t];i.$element.style.width=`${e+2}px`,i.$element.style.height=`${n+4}px`};this._get_plug_name_size=t=>this._get_pin_name_size(t);this._get_pin_name_size=t=>{let e=this._node_name[t];return Sh(e,pM,cM)};this._refresh_plug_name_size=t=>{let{width:e,height:n}=this._get_plug_name_size(t),i=Math.max(e,6),s=Math.max(n,6);this._set_plug_name_style_attr(t,"width",`${i}px`),this._set_plug_name_style_attr(t,"height",`${s}px`),this._set_plug_selection_to_name(t)};this._set_unit_name=(t,e)=>{let n=this._spec_set_unit_spec_name(t,e),i=this._state_set_unit_name(t,e);return this._pod_set_unit_name(t,i,e,n),this._is_unit_component(i)&&this._connect_sub_component(i),i};this._spec_set_unit_spec_name=(t,e)=>{let{setSpec:n,forkSpec:i}=this.$props,s=this._get_unit_spec(t),[a,_]=i(s);return tt(_,["name"],e),this._spec_set_unit_spec_id(t,a),n(a,_),a};this._state_set_unit_name=(t,e)=>{let{forkSpec:n}=this.$props,i=this._get_unit_spec(t),[s]=n(i),a=this._new_unit_id(s),_=this._get_unit_data(t),{valid_pin_match:c,merged_pin_ids:p,merge_pin_index:u,exposed_pin_ids:d,exposed_pin_index:m}=this._generate_identity_matches(t);return this._state_swap_unit(t,a,s,c,p,u,d,m),xe(_,(h,f,b)=>{let g=ut(a,h,f);this._graph_debug_set_pin_data_tree(g,b)}),a};this._pod_set_unit_name=(t,e,n,i)=>{this._flush_debugger(),this._pod.$setUnitId({unitId:t,newUnitId:e,name:n,specId:i})};this._spec_set_unit_metadata_rename=(t,e)=>{Tg({path:["units",t,"metadata","rename"],value:e},this._spec)};this._set_unit_pin_temp_name=(t,e)=>{this._is_valid_pin_name_value(e)?this._set_pin_name_caret_color(t,"currentColor"):this._set_pin_name_caret_color(t,this._get_err_color()),this._refresh_pin_name_size(t)};this._set_pin_name_caret_color=(t,e)=>{this._set_pin_name_style_attr(t,"caretColor",e)};this._refresh_pin_name_size=t=>{let{width:e,height:n}=this._get_pin_name_size(t),i=Math.max(e,6),s=Math.max(n,6);this._set_pin_name_style_attr(t,"width",`${i}px`),this._set_pin_name_style_attr(t,"height",`${s}px`),this._set_pin_selection_to_name(t)};this._set_unit_pin_name=(t,e)=>{this._spec_set_unit_pin_metadata_rename(t,e)};this._spec_set_unit_pin_metadata_rename=(t,e)=>{let{unitId:n,type:i,pinId:s}=it(t);Tg({path:["units",n,i,s,"metadata","rename"],value:e},this._spec)};this._set_pin_name=(t,e)=>{let{type:n,pinId:i}=gt(t);this._state_set_exposed_pin_name(n,i,e),this._pod_set_exposed_pin_name(n,i,e)};this._state_set_exposed_pin_name=(t,e,n)=>{let i=this._get_pin_spec(t,e),s=this._get_pin_plug_position(t,e),a=this._get_pin_plug_datum(t,e),_=mi(a,(p,u)=>this._get_node_position(u)),c=this._unit_datum[t][e];this._sim_remove_exposed_pin_set(t,e),this._spec_set_exposed_pin_name(t,e,n),this._sim_add_exposed_pin_set(t,n,i,s),c!==void 0&&this._sim_set_pin_set_data(t,n,c,_)};this._spec_set_exposed_pin_name=(t,e,n)=>{F1({type:t,pinId:e,newId:n},this._spec)};this._get_pin_plug_position=(t,e)=>{let n={};return this._for_each_plug(t,e,i=>{let s=Kt(t,e,i),a=De(t,e,i),_=this._get_node_anchor_node_id(s),c=this._get_node_anchor_node_id(a),p=this._get_node_position(_),u=this._get_node_position(c);n[i]={ext:p,int:u}}),n};this._get_pin_plug_datum=(t,e)=>{let n=this._get_pin_spec(t,e),i={},{plug:s}=n;for(let a in s){let _=Kt(t,e,a),c=this._plug_to_datum[_];c&&(i[a]=c)}return i};this._sim_set_exposed_pin_name=(t,e,n)=>{let i=this._get_pin_spec(t,e),s=this._get_pin_plug_position(t,e),a=this._get_pin_plug_datum(t,e);for(let _ in a)this._sim_remove_plug_datum_link(t,e,_);this._sim_remove_exposed_pin_set(t,e),this._sim_add_exposed_pin_set(t,n,i,s)};this._pod_set_exposed_pin_name=(t,e,n)=>{this._pod.$setPinSetId({type:t,pinId:e,nextPinId:n})};this._get_err_size=t=>{let{width:e,height:n}=Sh(t,12,18),i=48+1,s=Math.min(n+2,i);return{width:e,height:s}};this._sim_add_unit_err=(t,e)=>{let n=Si(t),i=e,{width:s,height:a}=this._get_err_size(e),_=Math.max(s,a)/2,{x:c,y:p}=this._err_initial_position(t),u="rect",d=this._sim_add_node(n,{_x:c,_y:p,x:c,y:p,fx:void 0,fy:void 0,shape:u,r:_,width:s,height:a,vx:0,vy:0,ax:0,ay:0,hx:0,hy:0,layer:er});this._node_type[n]="x",this._node_layer[n]=er;let m=this._node[n];this._err_node[n]=m;let h=this._node_content[n],f=this._create_selection(n,{width:s,height:a,shape:u,stroke:Lt}),b=this._create_touch_area({className:"err-area",width:s,height:a});this._err_area[n]=b;let g=new st({className:"err",style:S({width:`${s}px`,height:`${a}px`,fontSize:"12px",textAlign:"center",wordBreak:"break-word",overflowWrap:"break-word",overflow:"auto",color:Rs},ne("auto")),innerText:i},this.$system);g.stopPropagation("wheel"),this._err_comp[t]=g;let v=this._create_overlay({className:"err-overlay"});this._err_overlay[n]=v,h.appendChild(b),h.appendChild(f),h.appendChild(g),h.appendChild(v);let x=t,I=n,E=Vt(t,n),D=21,w=this._sim_add_link(E,{source_id:x,target_id:I,l:D,s:1,padding:{source:-6,target:-6},detail:{type:"x",head:0}},{stroke:Rs,strokeWidth:1});this._err_link[E]=this._link[E],this._link_layer[E]=er,this._zoom_comp.appendChild(d),this._zoom_comp.appendChild(w,"svg"),this._start_graph_simulation(er)};this._pod_remove_unit_err=t=>{this._pod.$takeUnitErr({unitId:t})};this._sim_remove_unit_err=t=>{this._sim_remove_unit_err_link(t),this._sim_remove_unit_err_node(t)};this._sim_remove_unit_err_link=t=>{let e=Si(t),n=Vt(t,e);delete this._err_link[n],this._sim_remove_link(n),delete this._err[t]};this._sim_remove_unit_err_node=t=>{let e=Si(t);delete this._err[t],delete this._err_comp[t],delete this._err_area[e],delete this._err_node[e],this._sim_remove_node(e)};this._sim_set_unit_err=(t,e)=>{this._err[t]=e;let n=Si(t),i=this._err_comp[t],{width:s,height:a}=this._get_err_size(e);this._resize_node(n,s,a),this._resize_selection(n,s,a),i.$element.style.width=`${s}px`,i.$element.style.height=`${a}px`;let _=ds(e);i.setProp("innerText",_)};this.add_exposed_pin_set=(t,e,n,i,s={})=>{this._expose_pin_set(t,e,n,i,s),this._dispatch_action(vr(t,e,n,i))};this._expose_pin_set=(t,e,n,i,s={},a=!0)=>{this._state_add_exposed_pin_set(t,e,n,s),a&&this._pod_add_exposed_pin_set(t,e,n),i!==void 0&&this._sim_set_pin_set_data(t,e,i)};this._state_add_exposed_pin_set=(t,e,n,i={})=>{this._spec_add_exposed_pin_set(t,e,n),this._sim_add_exposed_pin_set(t,e,n,i)};this._spec_add_exposed_pin_set=(t,e,n)=>{$i({pinId:e,type:t,pinSpec:n},this._spec),this._spec_refresh_exposed_pin_set_type(t,e)};this._spec_refresh_exposed_pin_set_type=(t,e)=>{if(this._collapsing)return;let n=this.__get_ext_pin_type_value(t,e);A4({pinId:e,type:t,dataType:n},this._spec)};this._pod_add_exposed_pin_set=(t,e,n)=>{this._pod.$exposePinSet({type:t,pinId:e,pinSpec:B(n),data:void 0})};this._pod_expose_unit_pin_set=(t,e,n,i,s={})=>{this._pod.$exposeUnitPinSet({unitId:t,pinId:n,type:e,pinSpec:i})};this._sim_add_exposed_pin_set=(t,e,n,i={})=>{let{plug:s,metadata:a={}}=n,{position:_={}}=a;this._exposed_pin_set_count++;for(let c in s){let p=i[c];if(!p){let d=_[c];d&&(p={ext:this._jiggle_world_screen_center()},p.ext.x+=d.x,p.ext.y+=d.y)}let u=s[c];this._sim_add_exposed_pin(t,e,c,u,p)}};this.add_exposed_pin=(t,e,n,i,s,a)=>{this._add_exposed_pin(t,e,i,s,a),this._dispatch_action(l4(t,e,i,s))};this._add_exposed_pin=(t,e,n,i,s)=>{this._state_add_exposed_pin(t,e,n,i,s),this._pod_add_exposed_pin(t,e,n,i)};this._spec_add_exposed_pin=(t,e,n,i)=>{Ja({pinId:e,type:t,subPinId:n,subPinSpec:i},this._spec)};this._state_add_exposed_pin=(t,e,n,i,s)=>{this._spec_add_exposed_pin(t,e,n,i),this._sim_add_exposed_pin(t,e,n,i,s)};this._sim_setup_node_name=(t,e)=>{e.addEventListener(dh(()=>{this._on_node_name_focus(t)})),e.addEventListener(uh(()=>{this._on_node_name_blur(t)})),e.addEventListener(ui(n=>{this._on_node_name_input(t,n)})),e.addEventListener(yo((n,i)=>{n.key==="Enter"&&(i.preventDefault(),this.focus())}))};this._on_node_name_focus=t=>{this._edit_node_name_was_selected=this._is_node_selected(t),this._q_was_pressed_before_name_focus=this._is_key_pressed("q"),this._is_unit_node_id(t)?this._on_core_name_focus(t):this._is_ext_node_id(t)?this._on_plug_name_focus(t):this._is_link_pin_node_id(t)&&this._on_unit_pin_name_focus(t),this._edit_node_name_id=t,this._is_node_selected(t)||this._select_node(t),this._disable_crud(),this._disable_keyboard()};this._on_node_name_blur=t=>{this._is_unit_node_id(t)?this._on_core_name_blur(t):this._is_ext_node_id(t)?this._on_plug_name_blur(t):this._is_link_pin_node_id(t)&&this._on_unit_pin_name_blur(t),this._enable_crud(),this._enable_keyboard(),this._edit_node_name_id=null,this._mode==="info"&&this._q_was_pressed_before_name_focus&&(this._q_was_pressed_before_name_focus=!1,this._set_crud_mode("none"))};this._on_core_name_blur=t=>{let e=this._node_name[t],n=this._is_valid_unit_name(e),i,s=t;if(e!==t){n?(i=e.trim(),s=this._set_unit_name(t,e)):i=this._get_unit_name(t);let a=this._core_name[s];this._mem_set_node_temp_name(s,i),a.$element.style.caretColor="currentColor",a.deselect(),a.blur();let _=Mv(i,H0);a.setProp("value",_),this._refresh_core_name_size(s)}this._edit_node_name_was_selected&&this._select_node(s),this._set_node_selection_to_node(s)};this._on_node_name_input=(t,e)=>{this._set_node_temp_name(t,e)};this._set_node_temp_name=(t,e)=>{let n=e;this._mem_set_node_temp_name(t,n),this._is_unit_node_id(t)?this._set_unit_temp_name(t,n):this._is_link_pin_node_id(t)?this._set_unit_pin_temp_name(t,n):this._is_ext_node_id(t)&&this._set_plug_temp_name(t,n)};this._is_valid_pin_name_value=t=>!(t.length===0||t.length>12);this.__is_valid_plug_name=(t,e,n,i)=>this._is_valid_pin_name_value(i);this._is_valid_plug_name=(t,e)=>{let{type:n,pinId:i,subPinId:s}=gt(t);return this.__is_valid_plug_name(n,i,s,e)};this._set_plug_name_caret_color=(t,e)=>{this._set_plug_name_style_attr(t,"caretColor",e)};this._set_plug_temp_name=(t,e)=>{this._is_valid_plug_name(t,e)?this._set_plug_name_caret_color(t,"currentColor"):this._set_plug_name_caret_color(t,this._get_err_color()),this._refresh_plug_name_size(t)};this._sim_add_exposed_pin=(t,e,n,i,s={})=>{var X,rt;let a=Kt(t,e,n),_=De(t,e,n),c=this.__is_exposed_pin_functional(t,e);this._exposed_pin_unplugged_count++;let{unitId:p,pinId:u,mergeId:d}=i,m=o0(this._width/4,this._height/4,3*this._width/4,3*this._height/4);if(p&&u){let et=ut(p,t,u);if(t==="output"&&u===$t){let ct=this.get_node(p),lt=fo();ct.shape==="rect"?m=ea(ct.x,ct.y,ct.width,ct.height,lt,24):m=ta(ct.x,ct.y,ct.r,lt,24)}else{let ct=this._get_node_anchor_node_id(et);m=this._pin_line_position(ct,24)}}else if(d){let et=At(d);if(this._is_merge_ref(et)){let lt=this._merge_to_ref_unit[et];if(lt){let bt=this._node[lt],kt={x:0,y:-1};m=ea(bt.x,bt.y,bt.width,bt.height,kt,24)}else m=this._get_merge_position(et)}else m=this._pin_line_position(et,24)}let{x:h,y:f}=s.ext||m,b=5,g=2*b,v=2*b,x=t==="input",I=t==="output",E=!1,D="circle",w=this._get_exposed_sub_pin_color(t);this._sim_add_node(a,{_x:h,_y:f,x:h,y:f,fx:void 0,fy:void 0,shape:D,r:b,width:g,height:v,vx:0,vy:0,ax:0,ay:0,hx:0,hy:0,layer:Nn}),this._node_type[a]="e",this._node_layer[a]=Nn;let T=this._node[a];this._exposed_node[a]=T,this._exposed_ext_node[a]=T;let C=this._node_comp[a],P=this._node_content[a],k=this._create_pin({className:Xt("pin",t),r:b,style:{borderColor:E?this._theme.data:w,backgroundColor:x?"none":E?this._theme.data:w},shape:D});this._pin[a]=k,P.appendChild(k);let M=this._create_selection(a,{width:g,height:v,shape:D,stroke:Lt});k.appendChild(M);let U=this._create_touch_area({className:"pin-area",width:g,height:v,style:{borderRadius:"50%"}});k.appendChild(U);let L=this._create_pin_name({className:"exposed-pin-name",r:b,dx:0,dy:-1,style:_t(S({color:w},ne("inherit")),{pointerEvents:"none"}),name:e});L.stopPropagation("pointerdown"),this._sim_setup_node_name(a,L),this._ext_pin_name[a]=L,this._node_name[a]=e,P.appendChild(L),this._zoom_comp.appendChild(C);let O,R=!1;if(p&&u)R=!0,u===$t?O=p:(O=ut(p,t,u),this._pin_to_int[t][O]=_,this._pin_to_ext[t][O]=a),this._ext_to_node[a]=O,this._int_to_node[_]=O,this._node_to_ext[O]=(X=this._node_to_ext[O])!=null?X:new Set,this._node_to_ext[O].add(a);else if(d){let et=At(d);R=!this._empty_merge_node[et],O=this._get_merge_anchor_node_id(et),this._ext_to_node[a]=O,this._int_to_node[_]=O,this._node_to_ext[O]=(rt=this._node_to_ext[O])!=null?rt:new Set,this._node_to_ext[O].add(a),this._pin_to_int[t][O]=_,this._pin_to_ext[t][O]=a,this._merge_pin_count[d]===0&&this._set_node_layer(et,Nn)}else{let et=s.int||x2(h,f,24);this._sim_add_internal_pin(t,e,n,et),O=_,this._exposed_ext_unplugged[a]=!0,this._exposed_int_unplugged[_]=!0}this._node_type[_]="i";let F=Vt(x?a:_,x?_:a),V=x?a:O,j=x?O:a,H=this._get_node_shape(O),K=this._get_node_r(O),q=Tv(H,K),Q=null,at=null,Dt={fill:"none",strokeWidth:"1",stroke:w};if(x){let et=`${c?Ph:""}${q}`;at=new gn({d:et,style:Dt},this.$system)}else{let et=q;Q=new gn({d:et,style:Dt},this.$system)}this._exposed_link_start_marker[a]=Q,this._exposed_link_end_marker[a]=at;let Et={target:x?-1.5:0,source:x?0:I?-1.5:0},Ct=R?16/2:16,Pt=2,ot=this._sim_add_link(F,{source_id:V,target_id:j,l:Ct,s:Pt,padding:Et,detail:{type:"e",head:1.5}},{text:"",stroke:w,strokeWidth:1,strokeDasharray:0,startMarker:Q,endMarker:at});this._exposed_link[F]=this._link[F],this._link_layer[F]=Nn,this._zoom_comp.appendChild(ot,"svg"),this._start_graph_simulation(Nn)};this._sim_add_internal_pin=(t,e,n,{x:i,y:s})=>{let a=De(t,e,n),_=5,c=2*_,p=2*_,u="circle";this._sim_add_node(a,{_x:i,_y:s,x:i,y:s,fx:void 0,fy:void 0,shape:u,r:_,width:c,height:p,vx:0,vy:0,ax:0,ay:0,hx:0,hy:0,layer:Nn}),this._node_type[a]="i",this._node_layer[a]=Nn;let d=this._node[a];this._exposed_node[a]=d,this._exposed_int_node[a]=d;let m=this._node_comp[a],h=this._node_content[a],f=this._create_pin({className:Xt("pin",t),r:_,style:{},shape:u});this._pin[a]=f,h.appendChild(f);let b=this._create_touch_area({className:"pin-area",width:c,height:p,style:{borderRadius:"50%"}});f.appendChild(b);let g=this._create_selection(a,{width:c,height:p,shape:u,stroke:Lt});f.appendChild(g),this._zoom_comp.appendChild(m)};this._pod_add_exposed_pin=(t,e,n,i)=>{this._pod.$exposePin({type:t,pinId:e,subPinId:n,subPinSpec:B(i)})};this._state_swap_unit=(t,e,n,i,s={input:{data:[],ref:[]},output:{data:[],ref:[]}},a={input:{data:{},ref:{}},output:{data:{},ref:{}}},_,c={input:{data:{},ref:{}},output:{data:{},ref:{}}},p)=>{let{specs:u,getSpec:d}=this.$props,m={input:{data:[],ref:[]},output:{data:[],ref:[]}},h={input:{data:{},ref:{}},output:{data:{},ref:{}}},f={input:{data:{},ref:{}},output:{data:{},ref:{}}},b={input:{},output:{}},g=this._get_unit(t),v=this._get_unit_spec(t),{inputs:x={},outputs:I={}}=v,E={input:B(x),output:B(I)},D=_.input,w=_.output,T=D.data,C=D.ref,P=w.data,k=w.ref,M={input:{data:T,ref:C},output:{data:P,ref:k}},U=this._get_node_position(t),L=U;this._is_unit_component(t)&&(L=this._layout_node[t]);let O=this._get_unit_pin_position(t),R=d(n),{inputs:N={},outputs:z={}}=R,F=(wt,Ht)=>jn(wt,({ref:Rt})=>!!Rt===Ht),V=F(B(N),!1),j=F(B(N),!0),H=F(B(z),!1),K=F(B(z),!0),q=J(V),Q=J(j),at=J(H),Dt=J(K),Et={input:{data:q,ref:Q},output:{data:at,ref:Dt}},Ct={input:{data:B(V),ref:B(j)},output:{data:B(H),ref:B(K)}},Pt={input:{data:B(V),ref:B(j)},output:{data:B(H),ref:B(K)}},ot={input:{},output:{}},X={},rt=(wt,Ht)=>{let Rt=Ht?"ref":"data",fe=i[wt][Rt];for(let ee=0;ee<fe.length;ee++){let ge=fe[ee],[be,mn]=ge;for(let Ve=0;Ve<s[wt][Rt].length;Ve++){let Fn=s[wt][Rt][Ve];if(a[wt][Rt][Fn]===be){let On=Et[wt][Rt][mn];b[wt][Fn]=On,ot[wt][On]=O[wt][Fn],m[wt][Rt][be]=On,h[wt][Rt][On]=Ve,delete E[wt][Fn],delete Ct[wt][Rt][On]}}}};rt("input",!1),rt("input",!0),rt("output",!1),rt("output",!0);function et(wt,Ht,Rt){for(let fe in E[wt]){let ee=jt(Ct[Ht][Rt]);if(ee)ot[Ht][ee]=O[wt][fe],delete Ct[Ht][Rt][ee];else break}}et("input","input","data"),et("input","input","ref"),et("output","output","data"),et("output","output","ref"),et("input","output","data"),et("input","output","ref"),et("output","input","data"),et("output","input","ref");let ct=wt=>{for(let Ht in b[wt]){let Rt=ut(t,wt,Ht),fe=this._pin_to_merge[Rt];if(fe){let{mergeId:ee}=It(fe);if(!X[ee]){let ge=this._spec_get_merge(ee),be=B(ge);delete be[t][wt][Ht],delete be[t][wt],delete be[t];let mn=b[wt][Ht];tt(be,[e,wt,mn],!0),X[ee]=be}}}};ct("input"),ct("output");let lt={};for(let wt in X){let Ht=At(wt);lt[wt]=this._get_merge_position(Ht)}let bt=this._ref_unit_to_merge[t],kt=null,xt=null;bt&&(kt=gI(bt),xt=B(this._spec_get_merge(kt)));let Gt=this._is_unit_component(t),Ft=Gt&&this._spec_get_sub_component_parent_id(t)||null,Jt=Gr(R);Gt&&this._search_unit_id!==t&&this._disconnect_sub_component(t);let ke={id:n};xe(g,(wt,Ht,Rt={})=>{let fe=b[wt][Ht],{ignored:ee,constant:ge}=Rt;fe||Ov(R,wt,Ht)&&(tt(ke,[wt,Ht,"constant"],ge),tt(ke,[wt,Ht,"ignored"],ee))}),Gt&&Jt&&tt(ke,["metadata","component"],nt(g,["metadata","component"],void 0));let Ce=Jt&&Ft||null,te=Gt&&Jt&&this._get_sub_component_index(t)+1||null,de=un(ke,u),tn=v.id!==this._search_unit_init_spec_id;this._state_add_unit(e,de,U,{},ot,L,Ce,te+1),this._state_remove_unit(t,tn),this._is_unit_component(e)&&this._search_unit_id!==t&&this._sim_add_sub_component(e,{},p,!0);let Le=(wt,Ht)=>{var ge;let Rt=_[wt][Ht],fe=Ht==="ref"?"data":"ref",ee=i[wt][Ht];for(let be in Rt){let mn=Rt[be],[Ve,Fn]=mn,Ci=c[wt][Ht][be];for(let On=0;On<ee.length;On++){let cs=ee[On],[n1,zv]=cs;if(Ci===n1){let yf=(ge=Et[wt][Ht][zv])!=null?ge:Et[wt][fe][zv],Lw={unitId:e,pinId:yf};delete Pt[wt][Ht][yf],f[wt][Ht][be]=Ci;let Uw=ut(e,wt,yf);this.__spec_is_link_pin_ignored(e,wt,yf)&&this._state_set_link_pin_ignored(Uw,!1),this._state_plug_exposed_pin(wt,Ve,Fn,Lw)}}}};if(Le("input","data"),Le("input","ref"),Le("output","data"),Le("output","ref"),kt&&xt&&(e!==t&&(xt[e]=B(xt[t]),delete xt[t]),this._state_add_merge(kt,xt,U),this._sim_collapse_merge(kt)),this._is_unit_component(e)&&this._search_unit_component_size){let{width:wt,height:Ht}=this._search_unit_component_size;this.resize_sub_component(e,wt,Ht)}for(let wt in X){let Ht=X[wt],Rt=At(wt),fe=lt[wt];this._has_node(Rt)||(Yt(Ht,(ge,be,mn)=>{let Ve=ut(ge,be,mn);this.__spec_is_link_pin_ignored(ge,be,mn)&&this._state_set_link_pin_ignored(Ve,!1)}),this._spec_add_merge(wt,Ht),this._sim_add_merge(wt,Ht,fe),this._sim_collapse_merge(wt)),Yt(Ht,(ge,be,mn)=>{let Ve=ut(ge,be,mn);this._has_node(Ve)&&!this._is_link_pin_merged(Ve)&&(this._spec_is_link_pin_ignored(Ve)&&this._state_set_link_pin_ignored(Ve,!1),this._state_add_link_pin_to_merge(wt,ge,be,mn),ge===e&&this._refresh_pin_color(Ve))})}return{next_swap_merges:X,next_ref_merge_id:kt,next_ref_merge:xt,next_merged_pin_ids:m,next_merged_pin_index:h,next_exposed_pin_index:f}};this._merge_pin_line_vector=t=>{let e=this._node[t],n=this._merge_to_pin[t],{_x:i,_y:s}=e,a=0,_=0,c=0;for(let h in n){let{unitId:f}=it(h),b=this._node[f],g=Me(b._x,b._y,i,s);_+=g.x,c+=g.y,a++}if(a===0)return{x:0,y:-1};let p=_/a,u=c/a,d={x:p,y:u};return p===0&&u===0?{x:0,y:-1}:na(d)};this._link_pin_line_vector=t=>{let{unitId:e}=it(t),n=this._node[e],i=this._node[t];return Me(n._x,n._y,i._x,i._y)};this._plug_line_vector=t=>{let{type:e,pinId:n,subPinId:i}=gt(t),s=De(e,n,i),a=Kt(e,n,i),_=this._get_int_pin_anchor_node_id(s),c=this.get_node(_),p=this.get_node(a);return s0(c,p)};this._node_line_vector=t=>{if(this._is_merge_node_id(t))return this._merge_pin_line_vector(t);if(this._is_link_pin_node_id(t))return this._link_pin_line_vector(t);if(this._is_ext_node_id(t))return this._plug_line_vector(t);if(this._is_unit_node_id(t))return this._random_unit_line_vector(t);throw new Co};this._random_unit_line_vector=t=>{let e=this._node[t];return fo()};this._pin_line_position=(t,e)=>{let n=this._get_node_anchor_node_id(t),i=this._node_line_vector(n),s=this._node[t],a=s.x+i.x*e,_=s.y+i.y*e;return{x:a,y:_}};this._err_initial_position=t=>{let{x:e,y:n,height:i}=this._node[t];return{x:e,y:n-i/2-21}};this._predict_pin_datum_initial_position=t=>{let e=this._get_pin_anchor_node_id(t);return this._pin_line_position(e,12)};this._init_random_datum_position=()=>o0(this._width/4,this._height/4,3*this._width/4,3*this._height/4);this._predict_plug_initial_position=t=>{let{type:e,pinId:n,subPinId:i}=gt(t);return this.__predict_plug_initial_position(e,n,i)};this.__predict_plug_initial_position=(t,e,n)=>{let i=this._get_exposed_sub_pin_spec(t,e,n);if(i.unitId&&i.pinId){let s=ut(i.unitId,t,i.pinId);return this._get_node_position(s)}else if(i.mergeId){let s=At(i.mergeId);return this._get_node_position(s)}else return null};this._predict_pin_type_initial_position=t=>{let e=this._get_node_anchor_node_id(t),n=this._node_line_vector(e),{x:i,y:s}=this._node[t],a=this._get_pin_type(t),{width:_,height:c}=this._get_datum_tree_size(a),p=oa({width:_,height:c,x:i,y:s,r:_/2,shape:"rect"},n),u=fo(),d=12+p;return xl({x:i,y:s-d-u.y},1)};this._predict_plug_type_initial_position=t=>{let e=this._node_line_vector(t),{x:n,y:i}=this._get_node_position(t),s=this._get_plug_type(t),{width:a,height:_}=this._get_datum_tree_size(s),c=oa({width:a,height:_,x:n,y:i,r:a/2,shape:"rect"},e),p=12+c;return Wn({x:n,y:i},Il(e,p))};this._predict_plug_data_initial_position=(t,e)=>{let n=this._node_line_vector(t),{x:i,y:s}=this._get_node_position(t),{width:a,height:_}=this._get_datum_tree_size(e),c=oa({width:a,height:_,x:i,y:s,r:a/2,shape:"rect"},n),p=12+c;return Wn({x:i,y:s},Il(n,p))};this._find_merge_pin=(t,e=()=>!0)=>{let n=this._merge_to_pin[t];for(let i in n)if(e(i))return i;return null};this._pin_type_of_kind=(t,e)=>this._is_merge_node_id(t)?this._get_merge_pin_type(t,e):this._link_pin_type(t);this._get_merge_pin_type=(t,e)=>{let n=this._merge_to_ref_unit[t],{mergeId:i}=It(t),s=this._spec_get_merge(i);return this._get_merge_spec_type(s,e)};this._get_merges_spec=()=>this._spec.merges;this._get_merge_spec_type=(t,e)=>{let n=ri;return Yt(t,(i,s,a)=>{if(s===e){let _=ut(i,e,a),c=this._runtime_pin_type(_,e);n=js(n,c)}}),n};this._link_pin_type=t=>{let{unitId:e,type:n,pinId:i}=it(t);return this.__link_pin_type(e,n,i)};this._clear_type_cache_for_spec_id=t=>{let{typeCache:e}=this.$props;delete e[t]};this.__link_pin_type=(t,e,n)=>{let{specs:i,typeCache:s}=this.$props;return n===$t?this._get_unit_type(t):Iv(this._spec,i,s)[t][e][n]};this._get_pin_type=t=>{let e;return this._is_link_pin_node_id(t)?this._get_link_pin_type(t):(e=this._pin_type_of_kind(t,"input")||this._pin_type_of_kind(t,"output"),e!=null?e:ri)};this._get_plug_type=(t,e=!1)=>{let{type:n,pinId:i}=gt(t);return this.__get_ext_pin_type(n,i,e)};this.__get_ext_pin_type=(t,e,n=!1)=>{let i=this._get_pin_spec(t,e),{plug:s={}}=i,a=pt("any");for(let _ in s){let c=s[_],p=Kt(t,e,_),{unitId:u,mergeId:d}=c;if(u||d){let m=P0(t,c),h=this._get_pin_type(m);a=js(a,h)}if(!n){let m=this._plug_to_datum[p];if(m){let h=this._get_datum_type(m);a=js(a,h)}}}return a!=null?a:ri};this.__get_ext_pin_type_value=(t,e)=>{let n=this.__get_ext_pin_type(t,e),{value:i}=n;return i};this._get_link_pin_type=t=>{let{type:e,pinId:n}=it(t);return e==="output"&&n===$t?ri:this._pin_type_of_kind(t,e)};this._sim_add_pin_type=(t,e)=>{let n=this._get_pin_type(t);this._sim_add_node_type(t,n,e)};this._sim_add_node_type=(t,e,{x:n,y:i})=>{let s=uo(t),a="rect",{width:_,height:c}=this._get_datum_tree_size(e),p=_/2,u=this._sim_add_node(s,{_x:n,_y:i,x:n,y:i,fx:void 0,fy:void 0,shape:a,r:p,width:_,height:c,vx:0,vy:0,ax:0,ay:0,hx:0,hy:0,layer:nr});this._node_type[s]="t",this._node_layer[s]=nr;let d=this._node[s];this._type_node[s]=d;let m=new wo({style:{},data:e},this.$system);this._type[s]=m;let h=new st({className:"graph-type",style:{width:`${_}px`,height:`${c}px`,overflow:"overlay",color:this._theme.type,pointerEvents:"none"}},this.$system);h.appendChild(m),this._type_container[s]=h;let f=this._node_content[s],b=this._create_selection(s,{width:_,height:c,shape:a,stroke:Lt});f.appendChild(b),f.appendChild(h),this._zoom_comp.appendChild(u);let g=Vt(s,t),v=this._get_pin_anchor_node_id(t),x=!1,I=12,E=this._sim_add_link(g,{source_id:s,target_id:v,l:I,s:1,padding:{source:-6,target:-6},detail:{type:"t",head:0}},{stroke:this._theme.sub_text,strokeWidth:1,hidden:x,style:{pointerEvents:"none"}}),D=this._link_comp[g];D.$element.style.pointerEvents="none",this._type_link[g]=this._link[g],this._link_layer[g]=nr,this._zoom_comp.appendChild(E,"svg"),this._start_graph_simulation(nr)};this._create_layout_layer=({className:t,style:e={}})=>{let n=new st({className:t,style:S({position:"absolute",alignItems:"center",justifyContent:"center",top:"0",left:"0",flexWrap:"wrap",boxSizing:"border-box",overflowY:"hidden",overflowX:"hidden",pointerEvents:"none"},e)},this.$system),i=new st({className:`${t}-height`,style:{position:"absolute",pointerEvents:"none"}},this.$system);n.appendChild(i);let s=new st({className:`${t}-children`,style:{zIndex:"0",opacity:"0",position:"absolute",overflowY:"hidden",overflowX:"hidden",transition:`opacity ${an}s linear`,pointerEvents:"none"}},this.$system);n.appendChild(s);let a=new st({className:`${t}-layers`,style:{position:"absolute",pointerEvents:"none"}},this.$system);n.appendChild(a);let _=new st({className:`${t}-foreground`,style:{position:"absolute",top:"0",left:"0",overflowY:"hidden",overflowX:"hidden",pointerEvents:"none"}},this.$system);n.appendChild(_);let c=new st({className:`${t}-child-foreground`,style:{position:"absolute",top:"0",left:"0",overflowY:"hidden",overflowX:"hidden",pointerEvents:"none"}},this.$system);return n.appendChild(c),{layer:n,foreground:_,child_foreground:c,height:i,children:s,layers:a}};this._create_touch_area=({className:t,width:e,height:n,style:i})=>new st({className:t,style:S({width:`${e+_s}px`,height:`${n+_s}px`,zIndex:"-1",backgroundColor:Lt,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",userSelect:"none"},i)},this.$system);this._get_pin_node_size=(t,e,n)=>{let i=ut(t,e,n),a=!(e==="input"),_=this._is_link_pin_ref(i),c=this._is_link_pin_init(i),p=5;c&&(p-=2),_&&a&&(p=.8*W2);let d=2*p,m=2*p;return{width:d,height:m}};this._sim_add_link_pin_node=(t,e,n,{x:i,y:s})=>{var N,z;let{getSpec:a}=this.$props,_=ut(t,e,n),c=e==="input",p=!c,u=this._spec_is_link_pin_ignored(_),d=this._is_link_pin_ref(_),m="circle",h=d&&p,f=null;if(h){let F=this._get_unit_spec(t),V=this._get_unit_pin_spec(_),{plug:j}=V;if(j){let H=jt(j),K=j[H],{unitId:q,pinId:Q,mergeId:at}=K,{units:Dt={},merges:Et={}}=F,Ct,Pt;if(q&&Q)Ct=q,Pt=Q;else{let X=Et[at];for(let rt in X){let et=X[rt],{output:ct={}}=et;for(let lt in ct){Ct=rt,Pt=lt;break}}}let ot=Dt[Ct];if(ot){let{id:X}=ot,rt=a(X);f=((N=rt.outputs[Pt])==null?void 0:N.icon)||((z=rt.metadata)==null?void 0:z.icon)||"circle"}}else{let{icon:H}=V;f=H||"circle"}}let{width:b,height:g}=this._get_pin_node_size(t,e,n),v=this._pin_to_datum[_],x=this._pin_to_merge[_],I=!!v||x&&d,E=u?tr:Rn;this._collapse_next_unit_id===t&&(E=he),this._collapse_init_node_id_set.has(t)&&(E=Qs);let D=b/2;this._sim_add_node(_,{_x:i,_y:s,x:i,y:s,fx:void 0,fy:void 0,shape:m,r:D,width:b,height:g,vx:0,vy:0,ax:0,ay:0,hx:0,hy:0,layer:E}),this._add_node_link_heap_node(_),this._node_layer[_]=E,this._node_type[_]="p";let w=this._node[_];this._pin_node[_]=w,c?this._link_pin_input_set.add(_):this._link_pin_output_set.add(_),d&&this._link_pin_ref_set.add(_),u?this._ignored_node[_]=w:this._normal_node[_]=w;let T=this._node_comp[_],C=this._node_content[_],P=u?this._mode==="add"?"0.5":"0":"1",k=d&&c?Lt:I?this._theme.data:this._theme.node,M=c||h?"none":I?this._theme.data:this._theme.node,U=this._create_pin({className:Xt("pin",e),r:D,style:{borderColor:k,backgroundColor:M,opacity:P},shape:m});this._pin[_]=U,C.appendChild(U);let L=this._create_pin_name({className:"pin-name",r:D,style:{color:this._theme.pin_text,opacity:P},name:n});if(this._pin_name[_]=L,C.appendChild(L),this._node_name[_]=n,this._sim_setup_node_name(_,L),h){let F=new $e({icon:f,className:"pin-icon",style:{position:"absolute",width:`${D}px`,height:`${D}px`,top:"50%",left:"50%",stroke:"currentColor",color:"currentColor",transform:"translate(-50%, -50%)"}},this.$system);this._ref_output_pin_icon[_]=F,U.appendChild(F)}let O=this._create_selection(_,{width:b,height:g,shape:m,stroke:Lt,className:"pin-selection"});U.appendChild(O);let R=this._create_touch_area({className:"pin-area",width:b,height:g,style:{borderRadius:"50%"}});U.appendChild(R),this._zoom_comp.appendChild(T),this._start_graph_simulation(he)};this._hide_datum=t=>{if(this._hidden_data_node[t])return;this._hidden_data_node[t]=this._node[t],delete this._visible_data_node[t];let e=this._node_content[t];e.$element.style.display="none";let n=this._datum_to_pin[t];if(n){let i=Vt(t,n);delete this._visible_data_link[i],delete this._visible_linked_data_node[t],delete this._visible_unlinked_data_node[t];let s=this._link_comp[i];s.$element.style.display="none"}};this._refresh_pin_datum_visible=t=>{let e=this._get_pin_datum_node_id(t);e&&this._refresh_datum_visible(e)};this._refresh_datum_visible=t=>{this._should_hide_datum(t)?this._hide_datum(t):this._show_datum(t)};this._refresh_all_visible_datum=()=>{for(let t in S({},this._visible_data_node))this._refresh_datum_visible(t)};this._refresh_all_invisible_datum=()=>{for(let t in S({},this._hidden_data_node))this._refresh_datum_visible(t)};this._show_datum=t=>{if(!this._hidden_data_node[t])return;let e=this._datum_to_pin[t];if(this._invalid_datum_node_id[t]){let i=this._invalid_datum_data[t];delete this._invalid_datum_data[t],delete this._invalid_datum_node_id[t],this.__graph_debug_set_pin_data(e,t,i)}delete this._hidden_data_node[t],this._visible_data_node[t]=this._node[t];let n=this._node_content[t];if(n.$element.style.display="block",e){let i=Vt(t,e);this._visible_data_link[i]=this._link[i],this._link_layer[i]=di;let s=this._node[t];this._linked_data_node[t]?(this._visible_linked_data_node[t]=s,this._set_node_layer(t,di)):(this._visible_unlinked_data_node[t]=s,this._set_node_layer(t,xa));let a=this._link_comp[i];a.$element.style.display="block"}this._start_graph_simulation(he)};this._get_link_pin_props=(t,e,n)=>{let i=ut(t,e,n),s=this._spec_is_link_pin_ignored(i),a=this._is_link_pin_ref(i),_=this._is_link_pin_init(i),c=this._get_graph_unit_pin_spec(t,e,n),{constant:p,ref:u}=c;p&&this._link_pin_constant_count++,u&&this._link_pin_memory_count++;let d=n,m=e==="input",h=!m,f=this._pin_to_datum[i],b=this._pin_to_merge[i],g=b&&this._merge_to_ref_unit[b],x=!!f||g&&a?a||_?this._theme.data:this._theme.data_link:a||_?this._theme.node:this._theme.link,I=this._is_link_pin_merged(i),E=d,D=!I,w=p?3:0,T=x,C=a||u||_?1:3,P=s?this._mode==="add"?.5:0:1,k=a&&m?LE:"",M=a&&m&&g,U=new gn({d:k,style:{display:M?"none":"block",fill:"none",strokeWidth:"1",stroke:x}},this.$system);this._pin_link_start_marker[i]=U;let L=_?fM:a||u?Ph:$E,O=a||u?"none":T,R=a||u?T:"none",N=a||u?"1px":"0",z=new gn({d:L,style:{fill:O,stroke:R,strokeWidth:N}},this.$system);this._pin_link_end_marker[i]=z;let F=s?24:24;_&&(F/=2);let V={source:.5,target:-5.75};return a&&m&&(V.source=-1.5),(a||u)&&(V.target=-1),_&&(V.target=0),h&&I&&(this._is_output_only_merge(b)||(V.target=-6)),{pin_link_end_marker_d:L,pin_link_end_marker_fill:O,pin_link_end_marker_stroke:R,pin_link_end_marker_stroke_width:N,pin_link_start_marker_d:k,pin_link_start_marker_hidden:M,stroke:x,pin_link_text:E,pin_link_text_hidden:D,pin_link_stroke:T,pin_link_stroke_width:C,pin_link_stroke_dash_array:w,pin_link_opacity:P}};this._sim_refresh_link_pin=(t,e,n)=>{let i=ut(t,e,n),s=this._pin_to_merge[i],a=s&&this._get_merge(s),_=a&&this._get_anchor_node_position(s),c=this._pin_to_ext[e][i],p=this._get_anchor_node_position(i),u=this._pin_datum_tree[i];if(this._sim_graph_unit_remove_pin(i),this._sim_graph_unit_add_unit_pin(t,e,n,p),c){let{type:d,pinId:m,subPinId:h}=gt(c);this._sim_plug_exposed_pin(d,m,h,{unitId:t,pinId:n})}if(u&&this._graph_debug_set_pin_data_tree(i,u),s){let{mergeId:d}=It(s);this._has_node(s)?this._sim_add_link_pin_to_merge(i,s):(this._sim_add_merge(d,a,_),this._sim_collapse_merge(d))}};this._sim_add_link_pin_link=(t,e,n)=>{let i=ut(t,e,n),s=this._spec_is_link_pin_ignored(i),a=this._is_link_pin_ref(i),_=this._is_link_pin_init(i),c=this._get_graph_unit_pin_spec(t,e,n),{constant:p,ref:u}=c;p&&this._link_pin_constant_count++,u&&this._link_pin_memory_count++;let d=n,m=e==="input",h=!m,f=this._pin_to_merge[i],b=this._get_pin_anchor_node_id(i),g=m?b:t,v=m?t:b,x=this._is_link_pin_merged(i),{stroke:I,pin_link_end_marker_d:E,pin_link_end_marker_fill:D,pin_link_end_marker_stroke:w,pin_link_end_marker_stroke_width:T,pin_link_start_marker_d:C,pin_link_start_marker_hidden:P,pin_link_text:k,pin_link_text_hidden:M,pin_link_stroke:U,pin_link_stroke_width:L,pin_link_stroke_dash_array:O,pin_link_opacity:R}=this._get_link_pin_props(t,e,n),N=new gn({d:C,style:{display:P?"none":"block",fill:"none",strokeWidth:"1",stroke:I}},this.$system);this._pin_link_start_marker[i]=N;let z=new gn({d:E,style:{fill:D,stroke:w,strokeWidth:T}},this.$system);this._pin_link_end_marker[i]=z;let F=s?24:24;_&&(F/=2);let V={source:.5,target:-5.75};a&&m&&(V.source=-1.5),(a||u)&&(V.target=-1),_&&(V.target=0),h&&x&&(this._is_output_only_merge(f)||(V.target=-6));let j=Vt(m?i:t,m?t:i),H=1,K=this._sim_add_link(j,{source_id:g,target_id:v,l:F,s:H,padding:V,detail:{type:"p",head:5.25}},{text:k,textHidden:M,stroke:U,strokeWidth:L,strokeDasharray:O,startMarker:N,endMarker:z,opacity:R});this._link_force_count_k[i]=this._link_force_count_k[i]||0,this._link_force_count_k[i]++;let q=this._link[j];s?(this._ignored_link[j]=q,this._link_layer[j]=tr):(this._pin_link[j]=q,this._link_layer[j]=Rn),this._zoom_comp.appendChild(K,"svg"),this._tick_link(j)};this._sim_add_node=(t,e)=>{this._node_count++;let{x:n,y:i,width:s,height:a}=e,_=new st({id:t,className:"node",style:{position:"absolute",transform:`translate(${n}px, ${i}px)`,width:"0",height:"0"}},this.$system);this._node_unlisten[t]=this._listen_node(t,_),this._node_comp[t]=_;let c=new st({className:"node-content",style:{position:"absolute",width:"fit-content",height:"fit-content",transform:`translate(-${s/2}px, -${a/2}px)`}},this.$system);return this._node_content[t]=c,_.appendChild(c),this._node[t]=e,this._node_link_count[t]=0,oE(this._node_graph,t),this._rebuild_subgraph(),_};this._node_link_heap_predicative=(t,e)=>t.count>=e.count;this._add_node_link_heap_node=t=>{let e={value:{count:0,id:t},parent:null,left:null,right:null};this._node_link_heap[t]=e,this._node_link_heap_root=A_(this._node_link_heap_root,e,this._node_link_heap_predicative)};this._remove_node_link_heap=t=>{let e=this._node_link_heap[t];this._node_link_heap_root=zr(e,this._node_link_heap_predicative),delete this._node_link_heap[t]};this._set_node_link_heap_count=(t,e)=>{let n=this._node_link_heap[t];this._node_link_heap_root=uy(n,{count:e,id:t},this._node_link_heap_predicative)};this.add_merge=(t,e,n)=>{this._add_merge(t,e,n,!0),this._dispatch_action(hs(t,B(e),n))};this._add_merge=(t,e,n,i=!0)=>{n=n||this._init_merge_spec_position(e);let s=At(t);this._state_add_merge(t,e,n),i&&this._pod_add_merge(t,e),this._refresh_ref_merge_active(s)};this._refresh_ref_merge_active=t=>{let e=this._merge_to_ref_unit[t];e&&this._refresh_core_border_color(e);let n=this._merge_to_pin[t];for(let i in n){let{unitId:s,type:a}=it(i);a==="input"&&this._refresh_link_pin_link_color(i),this._refresh_core_border_color(s)}};this._spec_add_merge=(t,e)=>{vs({mergeId:t,mergeSpec:e},this._spec)};this._state_add_merge=(t,e,n)=>{this._spec_add_merge(t,e),this._sim_add_merge(t,e,n)};this._sim_add_merge=(t,e,n)=>{let i=At(t),s=!1,a;this._merge_to_pin[i]={},this._merge_to_input[i]={},this._merge_to_output[i]={},this._merge_pin_count[t]=0,this._merge_input_count[t]=0,this._merge_output_count[t]=0;let _={},c={},p=null;for(let u in e){let d=e[u],{input:m={},output:h={}}=d;J(m).length>0&&(_[u]=!0),J(h).length>0&&(c[u]=!0);for(let f in m){let b=ut(u,"input",f);if(!s&&this._has_node(b)){let g=this._is_link_pin_ref(b);s=s||g}}for(let f in h){let b=ut(u,"output",f);f===$t?(a=u,s=!0,this._merge_to_ref_unit[i]=a,this._ref_unit_to_merge[a]=i):p||this._is_link_pin_ref(b)&&(p=b,s=!0,this._ref_output_to_merge[p]=i,this._merge_to_ref_output[i]=p)}}this._merge_ref[i]=s,this._node_type[i]="m",!a&&!p&&this._sim_add_merge_pin_node(t,n),this._start_graph_simulation(he)};this.__spec_is_empty_merge=t=>{let e=this._spec_get_merge(t);return Te(e)===0};this._spec_is_empty_merge=t=>{let{mergeId:e}=It(t);return this.__spec_is_empty_merge(e)};this._sim_add_merge_pin_node=(t,{x:e,y:n})=>{let i=At(t),s=5,a=2*s,_=2*s,c=this._merge_input_count[t],u=this._merge_output_count[t]===0,d=c===0,m=!1,h=!1,f="circle",b=Rn;this._sim_add_node(i,{_x:e,_y:n,x:e,y:n,fx:void 0,fy:void 0,shape:f,r:s,width:a,height:_,vx:0,vy:0,ax:0,ay:0,hx:0,hy:0,layer:b}),this._add_node_link_heap_node(i),this._node_layer[i]=Rn;let g=this._node[i];this._node_type[i]="m",this._pin_node[i]=g,this._normal_node[i]=g,this.__spec_is_empty_merge(t)&&this._set_merge_empty(i);let x=this._node_comp[i],I=this._node_content[i],E=this._merge_ref[i],D=new st({className:"pin",style:{position:"relative",width:`${a}px`,height:`${_}px`,borderRadius:f==="circle"?"50%":"0",boxSizing:"border-box"}},this.$system);this._merge[i]=D,I.appendChild(D);let w=this._create_selection(i,{width:a,height:_,shape:f,stroke:Lt});D.appendChild(w);let T=d?"hidden":"visible",C=E?Lt:this._theme.node,P=this._create_pin({className:"merge-input",style:{visibility:T,borderColor:C},r:s,shape:f});this._merge_input[i]=P,D.appendChild(P);let k=!m&&!d&&!E,M=u?"hidden":"visible",U=k?s-2:s,L=this._theme.node,O=this._create_pin({className:"merge-output",style:{visibility:M,backgroundColor:L,color:L,borderColor:L,transform:k?"translate(2px, 2px)":""},r:U,shape:f});this._merge_output[i]=O,D.appendChild(O);let R=this._create_touch_area({className:"merge-area",width:a,height:_,style:{borderRadius:"50%"}});D.appendChild(R),this._zoom_comp.appendChild(x)};this._pod_add_merge=(t,e)=>{this._pod.$addMerge({mergeId:t,mergeSpec:B(e)})};this._has_datum=t=>!!this._datum_tree[t];this.add_datum=(t,e,n)=>{this._add_datum(t,e,n),this._dispatch_action(Yf(t,e))};this.add_new_datum=(t,e)=>{let n=this._new_datum_id();this.add_datum(n,t,e)};this.add_new_datum_tree=(t,e)=>{let n=this._new_datum_id();this.add_datum(n,t,e)};this._add_datum=(t,e,n)=>{this._sim_add_datum_node(t,e,n)};this._sim_add_datum_node=(t,e,n)=>{let i=F0(e);return this.__sim_add_datum_node(t,i,n)};this.__sim_add_datum_node=(t,e,{x:n,y:i})=>{var w;let{specs:s}=this.$props;this._datum_tree[t]=e;let a=Xe(t),_=this._get_datum_tree_shape(e),{width:c,height:p}=this._get_datum_tree_size(e),u=c/2,d=this._sim_add_node(a,{_x:n,_y:i,x:n,y:i,fx:void 0,fy:void 0,shape:_,r:u,width:c,height:p,vx:0,vy:0,ax:0,ay:0,hx:0,hy:0,layer:xa}),m=this._node[a];this._node_type[a]="d",this._node_layer[a]=xa,this._data_node[a]=m,this._visible_data_node[a]=m,this._unlinked_data_node[a]=m,this._visible_unlinked_data_node[a]=m;let h=No(e),f=h?this._theme.data:this._theme.type,b=e.type==="unit",g=new st({className:Xt("graph-datum",{valid:h}),style:{display:"flex",width:`${c}px`,height:`${p}px`,overflow:b?"hidden":"auto",color:f,touchAction:"none"}},this.$system);this._datum_container[a]=g;let v=this._node_content[a],x=this._create_selection(a,{width:c,height:p,shape:_,stroke:Lt}),I=this._create_touch_area({className:"datum-area",width:c,height:p});this._datum_area[a]=I;let E;if(b){let T=Ri(e.value,s,this.$system.classes),{unit:{id:C}}=T;E=new Bs({id:C,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},specs:Wt(s,(w=T.specs)!=null?w:{})},this.$system);let P=zt;this._datum_unlisten[t]=P}else{E=new Xi({style:{},data:e},this.$system);let T=E.addEventListeners([mt("datumchange",C=>{this._on_datum_change(t,C)}),mt("datumblur",C=>{this._on_datum_blur(t,C)}),mt("datumfocus",C=>{this._on_datum_focus(t,C)})]);this._datum_unlisten[t]=T}E.stopPropagation("wheel"),this._datum[a]=E;let D=this._create_overlay({className:"datum-overlay"});this._datum_overlay[a]=D,g.setChildren([I,E,D]),v.appendChild(x),v.appendChild(g),this._zoom_comp.appendChild(d),this._refresh_datum_color(a),this._mode==="none"||this._enable_datum_overlay(a),this._start_graph_simulation(di)};this._inc_merge_input_active=t=>{this._merge_active_input_count[t]=this._merge_active_input_count[t]||0,this._merge_active_input_count[t]++,this._is_merge_ref(t)||this._refresh_merge_pin_pin_color(t,"input")};this._dec_merge_input_active=t=>{if(this._merge_active_input_count[t]--,this._is_merge_ref(t)||this._refresh_merge_pin_pin_color(t,"input"),this._merge_active_input_count[t]===0){let e=this._pin_to_datum[t];e&&this._sim_remove_datum(e)}};this._inc_merge_output_active=t=>{this._merge_active_output_count[t]=this._merge_active_output_count[t]||0,this._merge_active_output_count[t]++,this._is_merge_ref(t)||this._refresh_merge_pin_pin_color(t,"output")};this._dec_merge_output_active=t=>{this._merge_active_output_count[t]--,this._is_merge_ref(t)||this._refresh_merge_pin_pin_color(t,"output")};this._inc_unit_pin_active=t=>{this._unit_active_pin_count[t]=this._unit_active_pin_count[t]||0,this._unit_active_pin_count[t]++,this._refresh_core_border_color(t)};this._dec_unit_pin_active=t=>{this._unit_active_pin_count[t]--,this._unit_active_pin_count[t]===0&&(delete this._unit_active_pin_count[t],this._refresh_core_border_color(t))};this._inc_merge_input_count=t=>{this._merge_input_count[t]=this._merge_input_count[t]||0,this._merge_input_count[t]++};this._dec_merge_input_count=t=>{this._merge_input_count[t]=this._merge_input_count[t]||0,this._merge_input_count[t]--};this._inc_merge_output_count=t=>{this._merge_output_count[t]++};this._dec_merge_output_count=t=>{this._merge_output_count[t]--};this._inc_merge_pin_count=t=>{this._merge_pin_count[t]=this._merge_pin_count[t]||0,this._merge_pin_count[t]++};this._dec_merge_pin_count=t=>{this._merge_pin_count[t]--};this._refresh_core_border_color=t=>{this._is_node_hovered(t)||this._is_node_dragged(t)||this._is_node_selected(t)?this._set_core_mode_color(t):this._reset_core_border_color(t)};this._set_merge_pin_color=(t,e,n)=>{e==="input"?this._set_merge_input_color(t,n):this._set_merge_output_color(t,n)};this._set_output_r=(t,e)=>{this._is_merge_node_id(t)?this._set_merge_output_r(t,e):this._set_link_output_r(t,e)};this._set_output_reduced=(t,e)=>{e?this._set_output_r(t,5-2):this._set_output_r(t,5)};this._set_link_output_r=(t,e)=>{let n=this._pin[t],i=2*e,s=5-e;n.$element.style.width=`${i}px`,n.$element.style.height=`${i}px`,n.$element.style.transform=`translate(${s}px, ${s}px)`};this._set_merge_output_r=(t,e)=>{let n=2*e,i=5-e,s=this._merge_output[t];s.$element.style.width=`${n}px`,s.$element.style.height=`${n}px`,s.$element.style.transform=`translate(${i}px, ${i}px)`};this._set_merge_input_active=t=>{if(this._is_merge_ref(t)){let e=this._merge_to_ref_unit[t];e&&this._set_core_border_color(e,this._theme.data)}else this._set_merge_input_color(t,this._theme.data)};this._set_merge_input_color=(t,e)=>{let n=this._merge_input[t];n.$element.style.borderColor=e};this._set_merge_input_visibility=(t,e)=>{let n=this._merge_input[t];n.$element.style.visibility=e};this._set_merge_input_inactive=t=>{if(this._is_merge_ref(t)){let e=this._merge_to_ref_unit[t],{mergeId:n}=It(t);e&&this._merge_input_count[n]===0&&this._set_core_border_color(e,this._theme.node)}else this._set_merge_input_color(t,this._theme.node)};this._set_merge_output_active=t=>{this._set_merge_output_color(t,this._theme.data)};this._set_merge_output_visibility=(t,e)=>{let n=this._merge_output[t];n.$element.style.visibility=e};this._set_merge_output_color=(t,e)=>{let n=this._merge_output[t];n.$element.style.borderColor=e,n.$element.style.backgroundColor=e};this._set_merge_output_inactive=t=>{this._set_merge_output_color(t,this._theme.node)};this._sim_add_pin_datum_link=(t,e)=>{this._sim_add_datum_node_link(t,e)};this._sim_add_datum_node_link=(t,e)=>{let n=this._data_node[t];this._linked_data_node[t]=n,this._visible_data_node[t]&&(this._visible_linked_data_node[t]=n,this._set_node_layer(t,di)),delete this._unlinked_data_node[t],delete this._visible_unlinked_data_node[t];let i=this._get_pin_anchor_node_id(e),s=Vt(t,e),a=12,c=this._is_datum_valid(t)?this._theme.data_link:this._theme.type,p=this._sim_add_link(s,{source_id:t,target_id:i,l:a,s:1,padding:{source:-6,target:-6},detail:{type:"d",head:0}},{stroke:c,strokeWidth:1}),u=this._link[s];this._data_link[s]=u,this._visible_data_link[s]=u,this._link_layer[s]=di,this._zoom_comp.appendChild(p,"svg"),this._is_pin_node_id(e)&&this._sim_after_add_pin_datum_link(t,e),this._refresh_datum_visible(t),this._start_graph_simulation(di)};this._sim_after_add_pin_datum_link=(t,e)=>{if(this._datum_to_pin[t]=e,this._pin_to_datum[e]=t,this._is_link_pin_node_id(e)){let{unitId:n}=it(e);this._refresh_link_pin_color(e),this._refresh_core_border_color(n)}else if(this._is_merge_node_id(e)){let n=this._merge_to_pin[e];for(let i in n){let s=this._pin_to_datum[i];s&&this._refresh_datum_visible(s)}}};this._mem_set_pin_datum=(t,e)=>{let n=this._datum_tree[e],i=this._pin_datum_tree[t];if(this._pin_datum_tree[t]=n,!i){if(this._is_link_pin_node_id(t)){if(!this._spec_is_link_pin_ignored(t)){let{unitId:s,type:a}=it(t);this._inc_unit_pin_active(s);let _=this._pin_to_merge[t];_&&(a==="input"?this._inc_merge_input_active(_):this._inc_merge_output_active(_))}}else this._is_merge_node_id(t);this._refresh_pin_color(t)}};this._segregate_node_id=t=>{let e=[],n=[],i=[],s=[],a=[],_=[];for(let c in t)this._is_unit_node_id(c)?e.push(c):this._is_link_pin_node_id(c)?n.push(c):this._is_merge_node_id(c)?i.push(c):this._is_datum_node_id(c)?s.push(c):this._is_plug_node_id(c);return{units:e,links:n,merges:i,data:s,inputs:a,outputs:_}};this._int_node_locked={};this._tick_node=t=>{let e=this.get_node(t),{x:n,y:i}=e,s=this._node_comp[t];if(s.$element.style.transform=`translate(${n}px, ${i}px)`,this._collapsing&&this._collapse_node_id.has(t))if(this._collapse_next_unit_id){let a=this._node[this._collapse_next_unit_id];this._is_pin_node_id(t)?ia(e,a,2*e.r)&&this._long_press_collapse_node(t):this._is_datum_node_id(t)?(ia(e,a,2)||this._node_node_center_distance(t,this._collapse_next_unit_id)<2+2)&&this._long_press_collapse_node(t):ia(e,a,2+6)&&this._long_press_collapse_node(t)}else{let{x:a,y:_}=this._collapse_world_position,c=n-a,p=i-_;Math.sqrt(c*c+p*p)<3+e.r&&this._long_press_collapse_node(t)}for(let a in this._node_target){let _=a,c=this._node_target[a],p=this._node[_],u=this._node[this._get_node_anchor_node_id(c)],{l:d,d:m}=hn(p,u);if(this._is_pin_node_id(a))if(this._is_pin_node_id(c))m<3&&this._on_pin_pin_target_end(a,c);else if(this._is_unit_node_id(c))d<3&&this._on_pin_unit_target_end(a,c);else throw new Co;else if(this._is_int_node_id(a)){let{type:h}=lo(a),f=vd(a),b=ia(p,u,3),g=ia(p,u,1);this._set_plug_marker_to_default(h,f,_),b&&this._set_exposed_pin_marker_to_node(h,f,_,_,3-d),g&&this._on_plug_target_end(a,c)}}if(this._drag_ext_node_count>0)for(let a of this._drag_ext_node_id){let{type:_,pinId:c,subPinId:p}=gt(a),u=De(_,c,p),d=this._node[u];if(!d)continue;let m=a,h=this._node[m],{x:f,y:b,r:g}=h;if(this._compatible_node_count>0){let v=null,x=Number.MAX_SAFE_INTEGER,I=Number.MAX_SAFE_INTEGER,E=Number.MAX_SAFE_INTEGER;for(let D in this._compatible_node_id){let w=this._node[D],{l:T}=hn(d,w),{l:C}=hn(h,w),P=Math.min(T,C);P<3*24&&P<x&&(x=P,I=T,E=C,v=D)}if(v){let D=this._node[v],{x:w,y:T,r:C}=D;if(I+d.r<3?this._set_exposed_pin_marker_to_node(_,m,u,u,3-(I+d.r)):this._set_plug_marker_to_default(_,m,u),E<1)this._set_exposed_pin_marker_to_node(_,m,u,v,0),I+2*5<0?I>-3&&(this._int_node_locked[u]=v,d.r=C,d.width=D.width,d.height=D.height,d.shape=D.shape,d.x=w,d.y=T,d.fx=w,d.fy=T):I<3&&(this._int_node_locked[u]=v,d.r=C,d.width=D.width,d.height=D.height,d.shape=D.shape,d.x=w,d.y=T,d.fx=w,d.fy=T);else if(I+2*5<1&&E<OE)this._set_exposed_pin_marker_to_node(_,m,u,v,0),I<1&&(this._int_node_locked[u]=v,d.r=C,d.width=D.width,d.height=D.height,d.shape=D.shape,d.x=w,d.y=T,d.fx=w,d.fy=T);else if(this._int_node_locked[u]){delete this._int_node_locked[u];let P=Me(w,T,f,b),k=oa(D,P),M=w+(k+2)*P.x,U=T+(k+2)*P.y;d.r=5,d.width=2*5,d.height=2*5,d.shape="circle",d.x=M,d.y=U,d.fx=void 0,d.fy=void 0}}}}};this._node_max_link_length_heap={};this._node_link_heap_node={};this._add_link_to_max_l_heap=(t,e,n,i)=>{if(this._node_link_heap_node[t]||(this._node_link_heap_node[t]={}),this._node_link_heap_node[t][e]){let s=this._node_link_heap_node[t][e];this._node_max_link_length_heap[t]=uy(s,{link_id:e,l:n,t:i},(a,_)=>a.l>=_.l)}else{let s={parent:null,value:{link_id:e,l:n,t:i},left:null,right:null};tt(this._node_link_heap_node,[t,e],s),this._node_max_link_length_heap[t]?this._node_max_link_length_heap[t]=A_(this._node_max_link_length_heap[t],s,(a,_)=>a.l>=_.l):this._node_max_link_length_heap[t]=s}};this._remove_max_link_length_to_node_heap=(t,e)=>{var i;let n=(i=this._node_link_heap_node[t])==null?void 0:i[e];n&&(this._node_max_link_length_heap[t]=zr(n,(s,a)=>s.l>=a.l),delete this._node_link_heap_node[t][e])};this._tick_link=t=>{let e=this._link[t],{source_id:n,target_id:i,padding:s={source:0,target:0},detail:{head:a}}=e,_=this._node[n],c=this._node[i],{l:p,u,d}=hn(_,c),m=this._link_base[t],h=this._link_base_area[t],f=this._link_base_text[t];this._add_link_to_max_l_heap(n,t,p,e.l),this._add_link_to_max_l_heap(i,t,p,e.l);let b=this._link_marker_start[t],g=this._link_marker_end[t],v={x:-u.x,y:-u.y},x=Math.sign(p),I=x*s.source,E=x*s.target;b&&(b.$element.style.opacity="1",p<a?(b.$element.style.transform="scaleX(-1)",p<0&&(I+=x*3)):b.$element.style.transform="scaleX(1)"),g&&(g.$element.style.opacity="1",p<a?(g.$element.style.transform="scaleX(-1)",p<0&&(E+=x*3)):g.$element.style.transform="scaleX(1)");let{x:D,y:w}=Jo(_,u,I),{x:T,y:C}=Jo(c,v,E),P=`M ${D} ${w} L ${T} ${C}`,k=`M ${T} ${C} L ${D} ${w}`;m.$element.setAttribute("d",P),h.$element.setAttribute("d",P),T>D-1?f.$element.setAttribute("d",P):f.$element.setAttribute("d",k);let M=this._link_start_marker_id(t),U=this._link_end_marker_id(t),L=this._link_text_value[t],O=DE(L,TE,1/0),R=this._link_text[t];O>p-4?R.setProp("dx",`${-(p-4)/2}`):R.setProp("dx",`${-O/2}`)};this._tick_minimap=()=>{this._control_lock&&(this._input_disabled||this._minimap&&this._minimap.tick())};this._inc_node_node_link_count=(t,e)=>{!this._is_node_id(t)||!this._is_node_id(e)||(this._node_link_count[t]++,this._node_link_count[e]++,this._set_node_link_heap_count(t,this._node_link_count[t]),this._set_node_link_heap_count(e,this._node_link_count[e]),this._refresh_simulation_stability())};this._dec_node_node_link_count=(t,e)=>{!this._is_node_id(t)||!this._is_node_id(e)||(this._node_link_count[t]--,this._node_link_count[e]--,this._set_node_link_heap_count(t,this._node_link_count[t]),this._set_node_link_heap_count(e,this._node_link_count[e]),this._refresh_simulation_stability())};this._swap_node_node_link_count=(t,e)=>{!this._is_node_id(t)||!this._is_node_id(e)||(this._node_link_count[t]--,this._node_link_count[e]++,this._set_node_link_heap_count(t,this._node_link_count[t]),this._set_node_link_heap_count(e,this._node_link_count[e]),this._refresh_simulation_stability())};this._sim_add_link=(t,e,n={})=>{let i=this._create_link(t,n);this._link_comp[t]=i,this._link[t]=e,this._link_unlisten[t]=this._listen_link(t,i);let{source_id:s,target_id:a}=e;return this._inc_node_node_link_count(s,a),sE(this._node_graph,s,a),this._rebuild_subgraph(),i};this._set_node_hovered=(t,e,n)=>{if(n){if((!this._hover_node_id_pointer_id[t]||!this._hover_node_id_pointer_id[t][e])&&(this._hover_node_pointer_count[t]===void 0&&(this._hover_node_pointer_count[t]=0),this._hover_node_pointer_count[t]++,this._hover_node_id_pointer_id[t]===void 0&&(this._hover_node_id_pointer_id[t]={}),this._hover_node_id_pointer_id[t][e]=!0,this._pointer_id_hover_node_id[e]=t,this._hover_node_pointer_count[t]===1)){if(this._hover_node_id[t]=!0,this._hover_node_count++,this._has_node(t)&&this._refresh_node_selection(t),this._is_merge_node_id(t)){let s=this._get_merge_datum_node_id(t);s&&this._refresh_datum_visible(s)}else if(this._is_link_pin_node_id(t)){let s=this._pin_to_datum[t];s&&this._refresh_datum_visible(s)}else this._is_unit_node_id(t);if(this._mode==="info"&&this._is_node_infoable(t)&&!this._is_node_selected(t)){if(this._hover_node_count===1&&!this._edit_node_name_id&&(this._set_all_nodes_links_opacity(.2),this._selected_node_count>0))for(let s in this._selected_node_id)this._hide_node_info(s);this._show_node_info(t)}let i=this._get_node_anchor_node_id(t);i&&!this._selected_node_id[i]&&this._set_selected_node_color("none"),this._refresh_node_color(t)}}else if(this._hover_node_id_pointer_id[t]&&this._hover_node_id_pointer_id[t][e]&&(this._hover_node_pointer_count[t]--,delete this._hover_node_id_pointer_id[t][e],delete this._pointer_id_hover_node_id[e],this._hover_node_pointer_count[t]===0)){if(delete this._hover_node_id[t],this._hover_node_count--,this._has_node(t)&&this._refresh_node_selection(t),this._is_merge_node_id(t)){let i=this._get_merge_datum_node_id(t);i&&this._refresh_datum_visible(i)}else if(this._is_link_pin_node_id(t)){let i=this._pin_to_datum[t];i&&this._refresh_datum_visible(i)}else this._is_datum_node_id(t)&&this._refresh_datum_visible(t);if(this._mode==="info"&&this._is_node_infoable(t)&&!this._is_node_selected(t)&&(this._refresh_node_info(t),this._hover_node_count===0&&(!this._edit_node_name_id||this._edit_node_name_id===t||this._is_int_node_id(t)&&vd(t)===this._edit_node_name_id)))if(this._selected_node_count>0){this._set_all_nodes_links_opacity(.2);for(let i in this._selected_node_id)this._show_node_info(i)}else this._set_all_nodes_links_opacity(1);if(!this._drag_node_id[t])if(this._is_link_pin_node_id(t)){let{unitId:i}=it(t);if(!this._drag_node_id[i]){let s=this._pin_to_merge[t];if(s){let a=this._get_merge_anchor_node_id(s);this._refresh_node_color(a),this._refresh_link_pin_link_color(t)}else this._refresh_node_color(t)}}else this._refresh_node_group_color(t);this._refresh_selected_node_color()}};this._is_node_mode_colorable=(t,e)=>{switch(e){case"add":return this._is_node_duplicatable(t);case"change":return this._is_node_changeable(t);case"remove":return this._is_node_removable(t);case"data":return this._is_node_dataable(t);default:return!1}};this._set_core_mode_color=t=>{let{$theme:e}=this.$context,n=this._get_color();if(this._mode==="none"||this._mode==="multiselect"||this._mode==="info")this._reset_core_border_color(t);else if(this._is_node_mode_colorable(t,this._mode)){let i=Ze(e,this._mode,n);this._set_core_and_layout_core_border_color(t,i)}};this._set_node_mode_color=t=>{this.__set_node_mode_color(t,this._mode)};this.__set_node_mode_color=(t,e)=>{let{$theme:n}=this.$context;if(!this._search_hidden)return;let i=this._get_color();if(this.__is_mode_colored(e)&&this._is_node_mode_colorable(t,e)){let s=Ze(n,e,i),a=ts(n,e),_=a,c=s;if(this._is_unit_node_id(t)){let p=t;if(e==="data")this._set_unit_core_shell_color(p,s),this._set_unit_pins_shell_color(p,s,a,_,c),this._for_each_unit_pin(p,(u,d,m)=>{let h=this._get_pin_datum_node_id(u);h&&this._set_datum_color(h,s,s)});else if(this._set_unit_color(p,s,a,_,c),e==="remove"){if(this._err[p]){let u=Si(p);this._set_err_color(u,s)}this._for_each_unit_pin(p,u=>{let d=this._pin_to_datum[u];d&&this._set_datum_color(d,s,a)})}}else if(this._is_link_pin_node_id(t)){if(this._set_link_pin_color(t,s,a,_,c),e==="remove"){let p=this._pin_to_datum[t];p&&this._set_datum_color(p,s,a)}}else if(this._is_merge_node_id(t))if(e==="data"){this._set_merge_input_color(t,s);let p=this._merge_to_input[t];for(let u in p)this._set_link_pin_link_color(u,a)}else{let p=this._merge_to_input[t];for(let d in p){let{unitId:m}=it(d);if(this._is_node_hovered(d)||this._is_node_hovered(m)||this._is_node_selected(d)||this._is_node_selected(m)){this._set_merge_input_color(t,s);break}}let u=this._merge_to_output[t];for(let d in u){let{unitId:m}=it(d);if(this._is_node_hovered(d)||this._is_node_hovered(m)||this._is_node_selected(d)||this._is_node_selected(m)){this._set_merge_output_color(t,s);break}}}else if(this._is_datum_node_id(t))this._set_datum_color(t,s,a);else if(this._is_err_node_id(t))this._set_err_color(t,s);else if(this._is_plug_node_id(t)){let{type:p,pinId:u,subPinId:d}=gt(t);e==="change"?this._set_exposed_pin_set_color(p,u,s):this._set_exposed_sub_pin_color(p,u,d,s)}}};this._refresh_selected_node_color=()=>{this._set_selected_node_color(this._mode)};this._set_selected_node_color=t=>{for(let e in this._selected_node_id)this.__set_node_mode_color(e,t)};this._reset_node_color=t=>{if(this._is_unit_node_id(t))this._reset_unit_color(t),this._for_each_unit_pin(t,(e,n)=>{var _;let i=this._pin_to_datum[e];i&&this._reset_datum_color(i);let{pinId:s,subPinId:a}=(_=this._spec_get_pin_node_plug_spec(n,e))!=null?_:{};s&&a&&this._refresh_exposed_sub_pin_color(n,s,a)});else if(this._is_link_pin_node_id(t))this._reset_link_pin_color(t);else if(this._is_merge_node_id(t)){this._reset_merge_pin_pin_color(t,"input"),this._reset_merge_pin_pin_color(t,"output");let e=this._merge_to_input[t];for(let n in e)this._refresh_link_pin_link_color(n)}else if(this._is_datum_node_id(t))this._reset_datum_color(t);else if(this._is_err_node_id(t))this._reset_err_color(t);else if(this._is_plug_node_id(t)){let{type:e,pinId:n,subPinId:i}=gt(t);this._reset_exposed_sub_pin_color(e,n,i)}};this._is_mode_colored=()=>this.__is_mode_colored(this._mode);this.__is_mode_colored=t=>t==="add"||t==="remove"||t==="change"||t==="data";this._is_node_reachable=t=>{if(this._tree_layout)if(this._is_unit_node_id(t))if(this._is_unit_component(t)){let e=this._get_current_layout_layer_id(),n=this._spec_get_sub_component_parent_id(t);return e===n}else return!1;else return!1;else return!0};this._is_node_moded=t=>{if(!this._is_node_reachable(t))return!1;if(this._is_node_hovered(t)||this._is_node_dragged(t)||this._is_node_selected(t)||this._is_node_ascend(t))return!0;if(this._is_link_pin_node_id(t)){let{unitId:e}=it(t);if(this._is_node_moded(e))return!0}else if(this._is_datum_node_id(t)){let e=this._datum_to_pin[t];if(e&&this._is_node_moded(e)&&this._mode==="remove")return!0}return!1};this._refresh_node_group_color=t=>{if(this._is_plug_node_id(t)){let{type:e,pinId:n}=it(t);this._refresh_exposed_pin_set_color(e,n)}else this._refresh_node_color(t)};this._refresh_node_color=t=>{this._reset_node_color(t),this._is_mode_colored()&&this._is_node_moded(t)&&this._set_node_mode_color(t)};this._reset_unit_color=t=>{if(this._search_unit_id===t){let{$theme:e}=this.$context,n=this._mode==="multiselect"||this._mode==="info"?"add":this._mode,i=Ze(e,n,"currentColor"),s=ts(e,n),a=i;this._set_unit_color(t,i,s,s,a)}else if(this._for_each_unit_pin(t,(e,n)=>{let i=this._pin_to_merge[e];if(i){let s=this._get_merge(i);this._reset_link_pin_link_color(e);let a=this._merge_to_ref_unit[i],_=this._merge_to_ref_output[i];this._search_unit_id&&s[this._search_unit_id]||a||(_===e?this._reset_link_pin_color(e):this._reset_merge_pin_pin_color(i,n))}else this._reset_link_pin_color(e)}),this._reset_core_border_color(t),this._reset_soul_color(t),this._err[t]){let e=Si(t);this._reset_err_color(e)}};this._refresh_merge_pin_color=t=>{this._refresh_merge_pin_pin_color(t,"input"),this._refresh_merge_pin_pin_color(t,"output")};this._refresh_merge_pin_pin_color=(t,e)=>{if(this._is_mode_colored())if(this._is_node_hovered(t)||this._is_node_selected(t))this._refresh_node_color(t);else{let n=this._merge_to_input[t];for(let i in n){let{unitId:s}=it(i);if(this._is_node_hovered(i)||this._is_node_selected(i)||this._is_node_hovered(s)||this._is_node_selected(s)){this._refresh_node_color(t);return}}this._reset_merge_pin_pin_color(t,e)}else this._reset_merge_pin_pin_color(t,e)};this._reset_merge_pin_pin_color=(t,e)=>{this._merge_to_ref_output[t]||(e==="input"?this._reset_merge_input_pin_color(t):this._reset_merge_output_pin_color(t))};this._reset_merge_input_pin_color=t=>{let{mergeId:e}=It(t),n=this._search_unit_merges[e];if(n&&n[this._search_unit_id]&&n[this._search_unit_id].input&&pe(n[this._search_unit_id].input)>0){let{$theme:i}=this.$context,s=Ze(i,this._mode,"currentColor");this._set_merge_input_color(t,s)}else this._merge_active_input_count[t]>0?this._set_merge_input_active(t):this._set_merge_input_inactive(t)};this._reset_merge_output_pin_color=t=>{let{mergeId:e}=It(t),n=()=>{this._merge_active_output_count[t]>0?this._set_merge_output_active(t):this._set_merge_output_inactive(t)};if(this._search_unit_id){let i=this._search_unit_merges[e],s=nt(i!=null?i:{},[this._search_unit_id,"output"],{});if(pe(s)>0){let{$theme:a}=this.$context,_=Ze(a,this._mode,"currentColor");this._set_merge_output_color(t,_)}else n()}else n()};this._set_all_nodes_links_opacity=t=>{this._set_nodes_links_opacity(t,this._node,this._link)};this._set_nodes_opacity=(t,e)=>{for(let n of t)this._set_node_opacity(n,e)};this._set_nodes_links_opacity=(t,e,n)=>{for(let i in e)this._set_node_opacity(i,t);for(let i in n)this._set_link_opacity(i,t)};this._info_node_id=new Set;this._show_node_info=t=>{if(this._info_node_id.add(t),this._is_unit_node_id(t))this._show_unit_info(t),this._for_each_unit_pin(t,e=>{this._spec_is_link_pin_ignored(e)||this.__show_pin_info(e)});else if(this._is_link_pin_node_id(t))this._spec_is_link_pin_ignored(t)||this._show_pin_info(t);else if(this._is_merge_node_id(t)){this.__show_pin_info(t);let e=this._merge_to_pin[t];for(let n in e)this._show_pin_info(n)}else if(this._is_ext_node_id(t))this._show_ext_info(t);else if(this._is_int_node_id(t)){let e=vd(t);this._show_ext_info(e)}else this._is_datum_node_id(t)&&this._show_datum_info(t)};this._show_pin_info=t=>{this.__show_pin_info(t);let{unitId:e}=it(t);this._set_node_opacity(e,1),this._for_each_unit_pin(e,n=>{this._spec_is_link_pin_ignored(n)||this._show_pin_info_opacity(n)})};this._show_unit_info=t=>{this._set_node_opacity(t,1),this._show_core_description(t)};this._set_node_opacity=(t,e)=>{let n=this._node_content[t];n.$element.style.opacity=`${e}`};this._set_link_opacity=(t,e)=>{let n=this._link_comp[t];n.$element.style.opacity=`${e}`};this.__show_pin_info=t=>{this._show_pin_info_opacity(t);let e=this._get_pin_anchor_node_id(t);if(this._is_pin_node_id(e)){let{x:n,y:i}=this._predict_pin_type_initial_position(e),s=uo(e);this._has_node(s)||this._sim_add_pin_type(e,{x:n,y:i})}};this._show_pin_info_opacity=t=>{if(this._is_link_pin_node_id(t)){let n=qe(t);this._set_link_opacity(n,1)}let e=this._get_pin_anchor_node_id(t);if(this._is_pin_node_id(e)){this._set_node_opacity(e,1);let n=uo(e);if(this._has_node(n)){this._set_node_opacity(n,1);let s=Vt(n,e);this._set_link_opacity(s,1)}let i=this._pin_to_datum[e];if(i){let s=Vt(i,e);this._set_node_opacity(i,1),this._set_link_opacity(s,1)}}};this._show_ext_info=t=>{let{pinId:e,type:n,subPinId:i}=gt(t),s=De(n,e,i);this._has_node(t)&&this._set_node_opacity(t,1),this._has_node(s)&&this._set_node_opacity(s,1);let c=Vt(n==="output"?s:t,n==="output"?t:s);this._set_link_opacity(c,1),this._show_ext_pin_type(t,s)};this._show_datum_info=t=>{this._set_node_opacity(t,1);let e=this._get_datum_type(t);e.type==="invalid"&&(e=pt("invalid"));let{x:n,y:i,width:s,height:a}=this.get_node(t),_=O7(n,i,n+s,i+a,12);this._sim_add_node_type(t,e,_)};this._show_ext_pin_type=(t,e)=>{let n=uo(t);if(this._has_node(n))return;let i=this._get_plug_type(t),s=this.get_node(t),a=this._predict_plug_type_initial_position(t);this._sim_add_node_type(t,i,a)};this._show_link_pin_name=t=>{let e=this._pin_name[t];e.$element.style.display="block"};this._hide_link_pin_name=t=>{let e=this._pin_name[t];e.$element.style.display="none"};this._should_show_node_info=t=>this._is_node_hovered(t)||this._is_node_selected(t);this._refresh_node_info=t=>{if(this._mode==="info")if(this._should_show_node_info(t))this._show_node_info(t);else if(this._is_link_pin_node_id(t)){let{unitId:e}=it(t);this._should_show_node_info(e)?this._show_node_info(t):this._hide_node_info(t)}else this._is_unit_node_id(t)?this._should_show_node_info(t)?this._show_node_info(t):this._hide_node_info(t):this._hide_node_info(t);else this._hide_node_info(t)};this._hide_node_info=t=>{this._info_node_id.delete(t),this._is_unit_node_id(t)?(this._hide_unit_info(t),this._for_each_unit_pin(t,e=>{this._spec_is_link_pin_ignored(e)||this._refresh_node_info(e)})):this._is_link_pin_node_id(t)?this._hide_pin_info(t):this._is_merge_node_id(t)?this._hide_pin_info(t):this._is_ext_node_id(t)?this._hide_ext_info(t):this._is_int_node_id(t)?this._hide_int_info(t):this._is_datum_node_id(t)&&this._hide_datum_info(t)};this._remove_merge_empty=t=>{delete this._empty_merge_node[t],this._empty_merge_node_count--,this._has_node(t)&&this._refresh_node_layer(t)};this._hide_unit_info=t=>{this._hide_core_description(t)};this._hide_pin_info=t=>{let e=this._get_pin_anchor_node_id(t),n=uo(e);this._has_node(n)&&this._sim_remove_pin_type(e)};this._refresh_class_literal_datum_node_selection=t=>{let{datumId:e}=Ae(t),n=this._node_selection[t],i=this._datum_tree[e],{width:s,height:a}=this._get_datum_tree_size(i),_=this._get_datum_tree_shape(i);n.setProp("shape",_),n.setProp("width",s+6),n.setProp("height",a+6)};this._hide_link=t=>{let e=this._link_base[t],n=this._link_base_area[t];e.$element.style.display="none",n.$element.style.display="none"};this._show_link=t=>{let e=this._link_base[t],n=this._link_base_area[t];e.$element.style.display="block",n.$element.style.display="block"};this._set_link_pin_color=(t,e,n,i,s)=>{let a=this._pin_to_merge[t];if(a){if(this._merge_to_ref_output[a]===t)this._set_link_pin_pin_color(t,e,s),this._set_link_pin_pin_text_color(t,i);else if(!this._is_merge_ref(a)){let{type:c}=it(t);this._set_merge_pin_color(a,c,e)}}else this._set_link_pin_pin_color(t,e,s),this._set_link_pin_pin_text_color(t,i);this._set_link_pin_link_color(t,n),this._set_link_pin_link_text_color(t,i)};this._reset_link_pin_pin_color=t=>{let{type:e,unitId:n}=it(t);if(this._search_unit_id===n){let{$theme:i}=this.$context,s=ts(i,this._mode),a=Ze(i,this._mode,"currentColor"),_=a;this._set_link_pin_color(t,a,s,s,_)}else if(this._pin_datum_tree[t])this._set_link_pin_pin_color(t,this._theme.data,this._theme.node),this._set_link_pin_pin_text_color(t,this._theme.pin_text);else{let s=this._default_pin_color(t);this._set_link_pin_pin_color(t,s,s),this._set_link_pin_pin_text_color(t,this._theme.pin_text)}};this._refresh_link_pin_datum_color_if_visible=t=>{let e=this._pin_to_datum[t];e&&this._refresh_datum_color(e)};this._default_pin_color=t=>this._theme.node;this._default_link_color=t=>{let e=this._is_link_pin_ref(t),n=this._is_link_pin_init(t);return e||n?this._theme.node:this._theme.link};this._refresh_link_pin_link_color=t=>{if(this._is_mode_colored()){let{unitId:e}=it(t);this._is_node_selected(t)||this._is_node_hovered(t)||this._is_node_selected(e)||this._is_node_hovered(e)?this._refresh_node_color(t):this._reset_link_pin_link_color(t)}else this._reset_link_pin_link_color(t)};this._reset_link_pin_link_color=t=>{let e=this._pin_datum_tree[t],n=this._pin_to_merge[t],i=n&&this._merge_to_ref_unit[n],{unitId:s}=it(t),a=()=>{this._set_link_pin_link_color(t,this._theme.data_link),this._set_link_pin_link_text_color(t,this._theme.pin_text);let c=this._get_pin_datum_node_id(t);c&&this._refresh_datum_color(c)},_=()=>{this._set_link_pin_link_color(t,this._default_link_color(t)),this._set_link_pin_link_text_color(t,this._theme.pin_text)};if(this._search_unit_id===s){let{$theme:c}=this.$context,p=ts(c,this._mode);this._set_link_pin_link_color(t,p),this._set_link_pin_link_text_color(t,p)}else e||i?a():_()};this._is_link_pin_visible=t=>this._is_link_pin_present(t)&&(!this._spec_is_link_pin_ignored(t)||this._mode==="add");this._is_link_pin_present=t=>!this._is_link_pin_merged(t)||this._is_output_pin_node_id(t)&&this._is_link_pin_ref(t);this._reset_link_pin_color=t=>{this._is_link_pin_present(t)&&this._reset_link_pin_pin_color(t),this._reset_link_pin_link_color(t)};this._reset_core_border_color=t=>{let{$theme:e}=this.$context;if(this._search_unit_id===t){let n=Ze(e,this._mode,"currentColor");this._set_core_and_layout_core_border_color(t,n)}else if(this._err[t])this._set_core_and_layout_core_border_color(t,Rs);else if(this._unit_active_pin_count[t]>0)this._set_core_border_color(t,this._theme.data),this._set_layout_core_border_color(t,this._theme.node);else if(this._ref_unit_to_merge[t])this._set_core_border_color(t,this._theme.data),this._set_layout_core_border_color(t,this._theme.node);else{let n=this._get_unit_spec(t),{inputs:i={}}=n,s=!1;for(let a in i){let _=i[a],{ref:c}=_;if(c){let p=Er(t,a),u=this._pin_to_merge[p];if(u&&this._merge_to_ref_unit[u]){s=!0;break}}}s?(this._set_core_border_color(t,this._theme.data),this._set_layout_core_border_color(t,this._theme.node)):(this._set_core_border_color(t,this._theme.node),this._set_layout_core_border_color(t,this._theme.node))}};this._reset_soul_color=t=>{this._set_core_icon_color(t,this._theme.node),this._set_core_name_color(t,this._theme.node),this._set_core_description_color(t,this._theme.sub_text)};this._reset_datum_color=t=>{let{$theme:e}=this.$context;if(this._search_unit_datum_node_id===t){let n=Ze(e,this._mode,"currentColor"),i=ts(e,this._mode);this._set_datum_color(t,n,i)}else this._is_datum_valid(t)?this._set_datum_color(t,this._theme.data,this._theme.data_link):this._set_datum_color(t,this._theme.type,this._theme.type)};this._is_datum_valid=t=>{let e=this._datum_to_pin[t];if(e)return this._is_datum_pin_type_match(t,e);let n=this._datum_to_plug[t];return n?this._is_datum_plug_type_match(t,n):this._is_datum_tree_valid(t)};this._reset_err_color=t=>{this._set_err_color(t,Rs)};this._set_drag_node=(t,e)=>{let n=this._drag_node_id[t];n&&!e?(this._drag_count--,delete this._drag_node_id[t],this._is_ext_node_id(t)&&(this._drag_ext_node_id.delete(t),this._drag_ext_node_count--)):!n&&e&&(this._drag_count++,this._drag_node_id[t]=!0,this._is_ext_node_id(t)&&(this._drag_ext_node_id.add(t),this._drag_ext_node_count++)),this._collapsing||(this._drag_count===1?this._start_static():this._drag_count===0&&this._stop_static()),this._refresh_compatible()};this.resize_sub_component=(t,e,n)=>{this._tree_layout?(this._sim_layout_resize_sub_component(t,e,n),this._spec_component_set_unit_graph_size(t,e,n)):this._state_set_unit_size(t,e,n)};this._state_set_unit_size=(t,e,n)=>{this._sim_set_unit_size(t,e,n),this._spec_set_unit_size(t,e,n)};this._spec_set_unit_size=(t,e,n)=>{H1({id:t,path:["component","width"],value:e},this._spec),H1({id:t,path:["component","height"],value:n},this._spec),this._update_max_component_size(t,e,n)};this._update_max_component_size=(t,e,n)=>{let i=this._core_component_max_width.length;if(i===0)this._core_component_max_width=[e],this._core_component_max_width_id=[t];else for(let a=0;a<i;a++)if(e>this._core_component_max_width[a]){this._core_component_max_width.splice(a,0,e),this._core_component_max_width_id.splice(a,0,t);break}let s=this._core_component_max_height.length;if(s===0)this._core_component_max_height=[n],this._core_component_max_height_id=[t];else for(let a=0;a<s;a++)if(n>this._core_component_max_height[a]){this._core_component_max_height.splice(a,0,n),this._core_component_max_height_id.splice(a,0,t);break}};this._spec_component_set_default_size=()=>{let t=this._core_component_max_width[this._core_component_max_width.length-1],e=this._core_component_max_height[this._core_component_max_height.length-1];this._spec.component=this._spec.component||{},this._spec.component=bv({defaultWidth:t,defaultHeight:e},this._spec.component)};this._pod_component_set_default_size=()=>{};this._spec_component_set_unit_graph_size=(t,e,n)=>{e=Math.floor(e),n=Math.floor(n),this._spec.component=this._spec.component||{},e_({unitId:t,width:e,height:n},this._spec),this._spec_component_set_default_size()};this._sim_set_unit_size=(t,e,n)=>{this._resize_node(t,e,n),this._resize_core(t,e,n);let i=this._spec_get_sub_component_parent_id(t);this._update_max_component_size(t,e,n),this._refresh_layer_layout_target_node_size(i),this._refresh_selection_dasharray(t)};this._resize_layout_core=(t,e,n)=>{this.__resize_layout_core(t,e,n),this._refresh_current_layout_node_target_position(),this._animate_all_current_layout_layer_node()};this._scale_layout_core_x=(t,e)=>{let n=this._layout_node[t];n.sx=e,this._refresh_layout_core_transform(t)};this._scale_layout_core_y=(t,e)=>{let n=this._layout_node[t];n.sy=e,this._refresh_layout_core_transform(t)};this._refresh_layout_core_transform=t=>{let e=this._layout_node[t],n=this._layout_core[t],{sx:i,sy:s}=e;n.$element.style.transform=`translate(-50%, -50%) scale(${i}, ${s})`};this._set_layout_core_opacity=(t,e)=>{};this._set_layout_core_font_size=(t,e)=>{};this.__resize_layout_core=(t,e,n)=>{this._set_layout_core_size(t,e,n),this._tree_layout&&(this._resize_core_area(t,e,n),this._resize_core_selection(t,e,n))};this.__resize_layout_core_width=(t,e)=>{this._set_layout_core_size_width(t,e),this._resize_core_area_width(t,e),this._resize_core_selection_width(t,e)};this.__resize_layout_core_height=(t,e)=>{this._set_layout_core_size_height(t,e),this._resize_core_area_height(t,e),this._resize_core_selection_height(t,e)};this._set_layout_core_size=(t,e,n)=>{let i=this._layout_core[t];this._set_layout_core_size_width(t,e),this._set_layout_core_size_height(t,n),i.$element.style.width=`${e}px`,i.$element.style.height=`${n}px`;let s=this._layout_node[t];s.width=e,s.height=n,this._control_lock&&this._minimap&&this._tick_minimap()};this._set_layout_core_size_width=(t,e)=>{let n=this._layout_core[t];n.$element.style.width=`${e}px`;let i=this._layout_node[t];i.width=e};this._set_layout_core_size_height=(t,e)=>{let n=this._layout_core[t],i=this._layout_node[t];n.$element.style.height=`${e}px`,i.height=e};this._resize_core=(t,e,n)=>{this._resize_core_width(t,e),this._resize_core_height(t,n)};this._resize_core_width=(t,e)=>{let n=this._core[t];n.$element.style.width=`${e}px`,this._resize_core_area_width(t,e),this._resize_core_selection_width(t,e)};this._resize_core_height=(t,e)=>{let n=this._core[t];n.$element.style.height=`${e}px`,this._resize_core_area_height(t,e),this._resize_core_selection_height(t,e)};this._resize_core_selection=(t,e,n)=>{this._resize_selection(t,e+2,n+2)};this._resize_core_selection_width=(t,e)=>{let n=this._selection_opt[t],i=this._node_selection[t],{shape:s,strokeWidth:a=1,paddingX:_=6,paddingY:c=6}=n,p=e+_;i.setProp("width",p),n.width=e};this._resize_core_selection_height=(t,e)=>{let n=this._selection_opt[t],i=this._node_selection[t],{shape:s,strokeWidth:a=1,paddingX:_=6,paddingY:c=6}=n,p=e+c;i.setProp("height",p),n.height=e};this._resize_core_area=(t,e,n)=>{let i=this._core_area[t];this._resize_core_area_width(t,e),this._resize_core_area_height(t,n)};this._resize_core_area_width=(t,e)=>{let n=this._core_area[t];n.$element.style.width=`${e+_s+2}px`};this._resize_core_area_height=(t,e)=>{let n=this._core_area[t];n.$element.style.height=`${e+_s+2}px`};this._sim_layout_resize_sub_component=(t,e,n)=>{this._resize_layout_core(t,e,n);let i=this._layout_target_node[t];i.width=e,i.height=n,this._refresh_selection_dasharray(t)};this._resize_node=(t,e,n)=>{this._resize_node_width(t,e),this._resize_node_height(t,n)};this._resize_node_width=(t,e)=>{let n=this.get_node(t);n.r=e/2,n.width=e;let i=this._node_content[t];i.$element.style.transform=`translate(-${e/2}px, -${n.height/2}px)`,this._minimap&&this._tick_minimap()};this._resize_node_height=(t,e)=>{let n=this.get_node(t);n.r=e/2,n.height=e;let i=this._node_content[t];i.$element.style.transform=`translate(-${n.width/2}px, -${e/2}px)`,this._minimap&&this._tick_minimap()};this._resize_datum=(t,e,n)=>{this._resize_node(t,e,n);let i=this._datum_container[t];i.$element.style.width=`${e}px`,i.$element.style.height=`${n}px`;let s=this._datum_area[t];s.$element.style.width=`${e+_s}px`,s.$element.style.height=`${n+_s}px`,this._resize_selection(t,e,n),this._start_graph_simulation(di)};this._get_node_selection_length=(t,e,n)=>{let i=this.get_node(t),{shape:s}=i,a=e+n;if(s==="circle"){let{r:_}=i;return 2*Math.PI*(_+a/4)}else{let{width:_,height:c}=i;return 2*(_+c+a)}};this._get_node_selection_dashoffset=(t,e,n)=>{let i=this._get_node_selection_length(t,e,n),s=this.get_node(t),{shape:a}=s;if(a==="circle")return-i/16;{let{width:_,height:c}=s,p=_/c;return 0}};this._create_selection=(t,e)=>{let{strokeDasharray:n}=e,{width:i,height:s,shape:a,stroke:_="#00000000",strokeWidth:c=1,paddingX:p=6,paddingY:u=6}=e,d=this._get_node_selection_dashoffset(t,p,u);n=n||this._get_node_selection_dasharray(t,p,u);let m=new Dh({width:i+p,height:s+u,shape:a,stroke:_,strokeWidth:c,strokeDasharray:n,strokeDashOffset:d,style:S({},ne("none"))},this.$system);return this._node_selection[t]=m,this._selection_opt[t]=e,m};this._resize_selection=(t,e,n)=>{let i=this._selection_opt[t],s=this._node_selection[t],{paddingX:a=6,paddingY:_=6}=i,c=e+a,p=n+_;s.setProp("width",c),s.setProp("height",p),i.width=e,i.height=n,this._refresh_selection_dasharray(t),this._refresh_selection_dashoffset(t)};this._create_overlay=({className:t}={})=>new st({className:t,style:S({position:"absolute",top:"0",width:"calc(100% + 2px)",height:"calc(100% + 2px)",zIndex:`${2147483647-1}`,transform:"translate(-1px, -1px)"},ne("none"))},this.$system);this._id=`${lM++}`;this._link_start_marker_id=t=>`${this._id}-link-start-${Ev(t)}`;this._link_end_marker_id=t=>`${this._id}-link-end-${Ev(t)}-end`;this._create_pin=({className:t,style:e,r:n,shape:i="circle"})=>{let s=2*n,a=2*n,_=new st({className:t,style:S({position:"absolute",width:`${s}px`,height:`${a}px`,borderRadius:i==="circle"?"50%":"0",borderWidth:"1px",borderColor:Lt,borderStyle:"solid",backgroundColor:Lt,boxSizing:"border-box"},e)},this.$system);return _.preventDefault("mousedown"),_.preventDefault("touchdown"),_};this._create_pin_name=({className:t,name:e,r:n,dx:i=0,dy:s=0,style:a})=>new wi({className:t,value:e,style:_t(S(S({position:"absolute",borderWidth:"0px",borderStyle:"solid",borderColor:Lt,fontSize:`${dM}px`,textAlign:"center",justifyContent:"center",width:`${e.length*6}px`,height:"auto",left:`${n+i}px`,top:`${2*n+2+s}px`,transform:"translateX(-50%)",overflowY:"hidden",overflowX:"hidden",pointerEvents:"none",touchAction:"none"},ne("none")),a),{border:"1px solid red"}),tabIndex:-1,maxLength:uM},this.$system);this._create_link=(t,e)=>{let{style:n,hidden:i=!1,stroke:s=this._theme.link,strokeWidth:a=3,strokeDasharray:_=0,text:c="",textHidden:p=!0,textOpacity:u=1,startMarker:d=null,startMarkerX:m=0,endMarker:h=null,endMarkerX:f=0,opacity:b=1}=e,g=this._link_start_marker_id(t),v=this._create_link_marker(g,{component:d,x:m});d&&(this._link_marker_start[t]=d);let x=this._link_end_marker_id(t),I=this._create_link_marker(x,{component:h,x:f});h&&(this._link_marker_end[t]=h);let E=new Ks({},this.$system);E.appendChild(v),E.appendChild(I);let D=`${this._id}-link-base-${t}`,w=new gn({className:"link-base",markerStart:`url(#${g})`,markerEnd:`url(#${x})`,style:{display:i?"none":"block",strokeWidth:`${a}`,stroke:s,strokeDasharray:`${_}px`,opacity:`${b}`}},this.$system);this._link_base[t]=w;let T=new gn({className:"link-base-area",style:{display:i?"none":"block",strokeWidth:`${6+a}`,stroke:Lt}},this.$system);this._link_base_area[t]=T,this._link_text_value[t]=c;let C=new gn({id:D,className:"link-base-text",style:{strokeWidth:`${a}`,stroke:Lt}},this.$system);this._link_base_text[t]=C;let P=new qs({href:`#${D}`,startOffset:"50%",spacing:"auto",lenghtAdjust:"spacingAndGlyphs",textContent:c,style:{strokeWidth:"0px"}},this.$system);this._link_text_path[t]=P;let k=new Do({dy:"12",dx:"0",textAnchor:"start",style:S({display:p?"none":"block",opacity:`${u}`,fill:this._theme.pin_text,fontSize:`${TE}px`},ne("none"))},this.$system);k.appendChild(P),this._link_text[t]=k;let M=new Sn({className:"link",style:n},this.$system);return M.appendChild(E),M.appendChild(w),M.appendChild(T),M.appendChild(C),M.appendChild(k),M};this._create_link_marker=(t,{component:e,x:n=0})=>{let i=new Ws({id:t,markerHeight:30,markerWidth:30,refX:0+n,refY:1,orient:"auto-start-reverse",style:{overflow:"visible",transformOrigin:"0px 0px"}},this.$system);return e&&i.appendChild(e),i};this._simulation_prevent_restart=!1;this._start_graph_simulation=t=>{this._simulation_prevent_restart||(this._simulation_end?this._simulation_layer=t:this._simulation_layer=Math.min(this._simulation_layer,t),this._simulation_end=!1,this._simulation.alpha(.25),this._simulation.start())};this._stop_graph_simulation=()=>{this._simulation.stop()};this._get_current_layout_layer_id=()=>to(this._layout_path)||null;this._get_current_layout_layer=()=>{let t=this._get_current_layout_layer_id();return this._get_layout_layer(t)};this._get_layout_layer=t=>t?this._layout_layer[t]:this._layout_root;this._spec_get_layout_layer_children=t=>t?this._spec_get_sub_component_children(t):this._spec_get_component_children();this._get_layout_layer_parent_children=t=>{let e=this._layout_sub_component_parent[t]||null;return this._spec_get_layout_layer_children(e)};this._get_current_layout_layer_children=()=>{let t=this._get_current_layout_layer_id();return this._spec_get_layout_layer_children(t)};this._high_zoom=!1;this._set_zoom=t=>{let{maxZoom:e=GE.maxZoom}=this.$props,{$height:n,$width:i}=this.$context;this._zoom=t;let{z:s,x:a,y:_}=t;this._zoom_comp.setProp("zoom",t),this._zoom_comp_alt.setProp("zoom",t),this._tree_layout||this._minimap_screen&&(this._minimap_screen.setProp("x",a-4.5),this._minimap_screen.setProp("y",_-4.5),this._minimap_screen.setProp("width",i/s),this._minimap_screen.setProp("height",n/s)),s>.75*e?this._high_zoom||this._on_high_zoom():this._high_zoom&&this._on_low_zoom(),this._maybe_refresh_simulation_by_drag()};this.set_zoom=t=>{let e=t.x-this._zoom.x,n=t.y-this._zoom.y,i=t.z-this._zoom.z;this._zoom=t;let{z:s,x:a,y:_}=t;this._set_zoom(t),this.dispatchEvent("zoom",{z:s,x:a,y:_,dk:i,dx:e,dy:n},!1)};this._on_high_zoom=()=>{this._high_zoom=!0};this._on_low_zoom=()=>{this._high_zoom=!1};this._on_zoom_start=()=>{};this._on_zoom_end=()=>{let{api:{animation:{requestAnimationFrame:t,cancelAnimationFrame:e}}}=this.$system;if(this._zoom.z<1&&this._pointer_down_count<2){let n=()=>{let{$width:i,$height:s}=this.$context;this._zoom_in(-100,i/2,s/2),this._zoom.z<1&&t(n)};t(n)}};this._on_pointer_leave=t=>{let{pointerId:e}=t;this.__on_pointer_leave(e)};this._a=!1;this.__on_pointer_leave=t=>{let e=this._pointer_id_hover_node_id[t];e&&this.__on_node_pointer_leave(e,t),this.__on_pointer_up(t)};this._pointer_inside={};this._on_pointer_enter=t=>{};this._on_pointer_cancel=t=>{this._on_pointer_up(t)};this._screen_center=()=>({x:this._width/2,y:this._height/2});this._world_screen_center=(t=0,e=0)=>{let{x:n,y:i}=this._screen_center();return this._screen_to_world(n+t,i+e)};this._screen_to_world=(t,e)=>({x:t/this._zoom.z+this._zoom.x,y:e/this._zoom.z+this._zoom.y});this._world_to_screen=(t,e)=>({x:(t-this._zoom.x)*this._zoom.z,y:(e-this._zoom.y)*this._zoom.z});this.jiggle_world_screen_center=()=>this._jiggle_world_screen_center();this._jiggle_world_screen_center=(t=0,e=0)=>{let n=this._world_screen_center(t,e);return xl(n)};this._distance_to_center=t=>{let e=this._world_screen_center();return He(t,e)};this._set_node_position=(t,e)=>{let n=this.get_node(t),{x:i,y:s}=e;n.x=i,n.y=s,n.fx!==void 0&&(n.fx=i),n.fy!==void 0&&(n.fy=s)};this._set_node_x=(t,e)=>{let n=this.get_node(t);n.x=e,n.fx!==void 0&&(n.fx=e)};this._set_node_y=(t,e)=>{let n=this.get_node(t);n.y=e,n.fy!==void 0&&(n.fy=e)};this._set_node_layer=(t,e)=>{let n=this.get_node(t),{layer:i}=n;delete this._layer_node[Math.abs(i)][t],this._node_layer[t]=e,this._layer_node[Math.abs(e)][t]=n,n.layer=e};this._set_link_layer=(t,e)=>{let n=this._link_layer[t];delete this._layer_link[Math.abs(n)][t];let i=this._link[t];this._layer_link[Math.abs(e)][t]=i,this._link_layer[t]=e};this.get_node=t=>this._node[t];this.get_layout_node=t=>this._layout_node[t];this.get_nodes=()=>this._node;this._get_node_position=t=>{let e=this.get_node(t),{x:n,y:i}=e;return{x:n,y:i}};this._get_anchor_node_position=t=>{let e=this._get_node_anchor_node_id(t);return this._get_node_position(e)};this.__get_merge_node_position=t=>{let e=At(t),n=this._get_merge_anchor_node_id(e);return this._get_node_position(n)};this._get_node_screen_position=t=>{let e=this.get_node(t),{x:n,y:i,width:s,height:a}=e,{x:_,y:c}=this._world_to_screen(n-s/2,i-a/2);return{x:_,y:c}};this._get_node_size=t=>{let e=this.get_node(t),{width:n,height:i}=e;return{width:n,height:i}};this._get_node_shape=t=>{let e=this.get_node(t),{shape:n}=e;return n};this._get_node_r=t=>{let e=this.get_node(t),{r:n}=e;return n};this._on_search_item_selected=({id:t})=>{this._control_lock&&(this._search_hidden||this._state_swap_search_unit(t),this._refresh_search_list_height_offset(),this._tree_layout&&this._layout_scroll_search_unit_into_view())};this._layout_scroll_search_unit_into_view=()=>{if(this._search_unit_id){let t=this._search_unit_id;if(this._is_unit_component(t)){let e=this._layout_target_node[t],{$height:n}=this.$context,{y:i}=e,s=this._get_current_layout_layer_id();this._layout_set_layer_scroll_top(s,i+n/2)}}};this._layout_set_layer_scroll_top=(t,e)=>{let n=this._get_layout_layer(t);n.layer.$element.scrollTop=e};this._refresh_search_list_height_offset=()=>{if(this._search){let t=this._search.getRect(),{$x:e,$y:n,$width:i,$height:s}=this.$context,{x:a,y:_,width:c,height:p}=t,u=p;n+s<_&&(u=0);let d=this._get_current_layout_layer_id();this._set_layout_search_offset_y(d,u)}};this._state_swap_search_unit=(t,e)=>{this._search_unit_init_spec_id!==t&&(this._search_unit_spec_id_changed=!0),this._mode==="add"||this._mode==="multiselect"||this._mode==="remove"?this._state_swap_add_search_unit(t):this._mode==="change"?this._state_swap_change_search_unit(t,e):this._mode==="data"&&this._state_swap_data_search_unit(t)};this._state_swap_add_search_unit=t=>{let{specs:e}=this.$props,n=this._search_unit_id,i;if(this._search_unit_graph_position)i=this._search_unit_graph_position;else{let u=this._world_screen_center(),d=fo();i={x:u.x+d.x+this._search_dock_offset_x/this._zoom.z/2,y:u.y+d.y-this._search_dock_offset_y/this._zoom.z/2}}let s=on(e,t),a;this._search_unit_id?(s&&this._is_unit_component(this._search_unit_id)&&(a=this._layout_node[this._search_unit_id]),this._state_remove_search_unit()):this._search_fallback_position=this._world_screen_center();let _=this._new_unit_id(t),c=ve({},{});if(this._add_search_unit(_,t,i,c,a),this._is_unit_component(_)&&this._search_unit_component_size){let{width:u,height:d}=this._search_unit_component_size;this.resize_sub_component(_,u,d)}let p=this._get_current_layout_layer_id();this._refresh_layout_node_target_position(p),this._refresh_node_color(_)};this._state_swap_change_search_unit=(t,e)=>{if(this._search_unit_spec_id!==t){let n=this._search_unit_id;if(n){let i=e!=null?e:this._new_unit_id(t),s=this._search_option_valid_pin_matches[t],{input:a={ref:[],data:[]},output:_={ref:[],data:[]}}=s,c=0,p=a.data[c]||[],u=_.data[c]||[],d=a.ref[c]||[],m=_.ref[c]||[],h={input:{data:p,ref:d},output:{data:u,ref:m}},{next_swap_merges:f,next_merged_pin_ids:b,next_ref_merge_id:g,next_ref_merge:v,next_merged_pin_index:x,next_exposed_pin_index:I}=this._state_swap_unit(n,i,t,h,this._search_unit_merged_pin_ids,this._search_unit_merged_pin_index,this._search_unit_exposed_pin_ids,this._search_unit_exposed_pin_index,this._search_start_component_index);this._search_unit_id=i,this._search_unit_merges=f,this._search_unit_merged_pin_ids=b,this._search_unit_merged_pin_index=x,this._search_unit_exposed_pin_index=I,this._search_unit_spec_id=t,this._search_unit_ref_merge_id=g,this._search_unit_ref_merge=v,this._set_zoom_target(i),this._refresh_node_color(i),this._tree_layout&&(this._refresh_search_list_height_offset(),this._refresh_all_layout_node_target_position(),this._force_all_layout_node_traits(),this._layout_scroll_search_unit_into_view())}}};this._data_search_unit=(t,e)=>{};this._add_data_search_unit=(t,e)=>{let{datum_id:n,datum_node_id:i}=this._add_data_unit({unit:{id:t}},e);this._search_unit_datum_id=n,this._search_unit_datum_node_id=i,this._search_unit_datum_spec_id=t};this._add_data_unit=(t,e)=>{let n=this._new_datum_id(),i=Xe(n),s=`$${JSON.stringify(t)}`;return this._add_datum(n,s,e),{datum_id:n,datum_node_id:i}};this._remove_data_search_unit=()=>{this._search_unit_datum_node_id&&(this._remove_datum(this._search_unit_datum_node_id),this._mem_remove_search_datum())};this._state_swap_data_search_unit=t=>{this._search_unit_datum_id&&this._remove_data_search_unit();let e=this._jiggle_world_screen_center();this._add_data_search_unit(t,e)};this._new_unit_id=(t,e=new Set)=>{let{specs:n}=this.$props;return r_(n,this._spec,t,e)};this._new_merge_id=(t=new Set)=>a_(this._spec,t);this._new_datum_id=(t=new Set)=>{let e;do e=Ti(this._datum_tree);while(t.has(e));return e};this._new_pin_id=(t,e,n=new Set)=>{let i=e,s=0;for(;this._has_exposed_pin_named(t,i)||n.has(i);)i=`${e}${s}`,s++;return i};this._new_input_id=(t,e=new Set)=>this._new_pin_id("input",t,e);this._new_output_id=(t,e=new Set)=>this._new_pin_id("output",t,e);this._new_sub_pin_id=(t,e,n=new Set)=>{let i=this._get_pin_spec(t,e);return zE(i||{},n)};this._state_remove_search_unit=()=>{this._search_unit_id&&(this._state_remove_unit(this._search_unit_id,!1),this._mem_remove_search_unit_id())};this._get_sub_component_target_parent_id=()=>{let t=null;if(this._tree_layout){let e=this._get_current_layout_layer_id();e&&(t=e)}return t};this._add_search_unit=(t,e,n,i={input:{},output:{}},s)=>{let{specs:a,getSpec:_}=this.$props,{$theme:c}=this.$context;this._search_unit_id=t,this._search_unit_spec_id=e;let p=_(e),{inputs:u={},outputs:d={}}=p,m={};for(let E in u){m[E]={};let D=u[E],{defaultIgnored:w}=D;w===!0&&(m[E].ignored=!0)}let h={};for(let E in d){h[E]={};let D=d[E],{defaultIgnored:w}=D;w===!0&&(h[E].ignored=!0)}let f={id:e,input:m,output:h};this._spec_add_unit(t,f,!0);let b=null,g=this._is_unit_component(t);g&&(b=this._get_sub_component_target_parent_id(),this._spec_append_component(b,t)),this._sim_add_unit(t,f,n,{},i,b,s);let v=ts(c,this._mode),x=Ze(c,this._mode,"currentColor"),I=x;this._set_unit_color(t,x,v,v,I),(this._mode==="add"||this._mode==="remove")&&this._set_unit_layer(t,N0),this._refresh_layout_node_target_position(b),g&&this._tree_layout&&this._move_all_layout_node_target_position(b),this._set_zoom_target(t),this._refresh_search_list_height_offset(),this._refresh_layout_node_target_position(b),this._tree_layout&&this._layout_scroll_search_unit_into_view()};this._swap_pointer_pressed_node=(t,e)=>{let n=this._pointer_id_hover_node_id[t];n&&this._set_node_hovered(n,t,!1),this._set_node_hovered(e,t,!0);let i=this._pointer_id_pressed_node_id[t];i&&this.__set_node_pressed(i,t,!1),this.__set_node_pressed(i,t,!0)};this._set_unit_layer=(t,e)=>{this._set_node_layer(t,e),this._for_each_unit_pin(t,(n,i)=>{if(!this._spec_is_link_pin_ignored(n)){if((!this._is_link_pin_merged(n)||this._is_output_pin_node_id(n)&&this._is_link_pin_ref(n))&&!this._collapse_node_id.has(n)){this._set_node_layer(n,e);let _=qe(n);this._set_link_layer(_,e)}let a=this._pin_to_datum[n];a&&this._set_node_layer(a,e)}let s=this._pin_to_ext[i][n];s&&this._set_node_layer(s,e)})};this._set_core_icon=(t,e)=>{this._core_icon[t].setProp("icon",e)};this._show_core_icon=t=>{let e=this._core_icon[t];e.$element.style.display="block"};this._hide_core_icon=t=>{let e=this._core_icon[t];e.$element.style.display="none"};this._set_unit_core_opacity=(t,e)=>{this._set_node_opacity(t,e)};this._set_unit_pins_opacity=(t,e)=>{this._for_each_unit_pin(t,(n,i)=>{this._spec_is_link_pin_ignored(n)||this._set_link_pin_opacity(n,e)})};this._set_unit_opacity=(t,e)=>{this._set_unit_core_opacity(t,e),this._set_unit_pins_opacity(t,e)};this._set_core_icon_color=(t,e)=>{let n=this._core_icon[t];n.$element.style.stroke=e};this._set_core_name_color=(t,e)=>{let n=this._core_name[t];n.$element.style.color=e};this._set_core_description_color=(t,e)=>{let n=this._core_description[t];n.$element.style.color=e};this._set_unit_core_color=(t,e)=>{this._set_unit_core_shell_color(t,e),this._set_unit_core_ghost_color(t,e)};this._set_unit_core_shell_color=(t,e)=>{this._set_core_and_layout_core_border_color(t,e)};this._set_unit_core_ghost_color=(t,e)=>{this._set_core_icon_color(t,e),this._set_core_name_color(t,e)};this._set_unit_color=(t,e,n,i,s)=>{this._set_unit_core_color(t,e),this._set_unit_pins_color(t,e,n,i,s)};this._disable_unit_pointer_events=t=>{this._set_unit_style_attr(t,"pointer-events","none")};this._enable_unit_pointer_events=t=>{this._set_unit_style_attr(t,"pointer-events","inherit")};this._set_unit_style_attr=(t,e,n)=>{this._set_unit_core_style_attr(t,e,n),this._set_unit_pins_style_attr(t,e,n)};this._set_unit_pins_style_attr=(t,e,n)=>{this._for_each_unit_pin(t,(i,s,a)=>{let _=gd(t,s,a),c=this._node_comp[i],p=this._link_comp[_];c&&(c.$element.style[e]=n),p&&(p.$element.style[e]=n)})};this._set_unit_pins_color=(t,e,n,i,s)=>{this._set_unit_pins_shell_color(t,e,n,i,s),this._set_unit_pins_ghost_color(t,e,n,i,s)};this._set_unit_shell_color=(t,e,n,i,s)=>{this._set_unit_core_shell_color(t,e),this._set_unit_pins_shell_color(t,e,n,i,s)};this._set_unit_pins_shell_color=(t,e,n,i,s)=>{this._for_each_unit_pin(t,(a,_)=>{let c=this._pin_to_merge[a];c?this._is_link_pin_visible(a)?this._set_link_pin_pin_color(a,e,s):this._is_merge_ref(c)||this._set_merge_pin_color(c,_,e):this._set_link_pin_pin_color(a,e,s);let p=this._is_link_pin_ref(a);this._set_link_pin_link_color(a,p?e:n),this._set_pin_text_color(a,i)})};this._set_unit_inputs_color=(t,e,n,i,s)=>{this._for_each_unit_input(t,a=>{this._set_unit_pin_color(a,e,n,i,s)})};this._set_unit_inputs_shell_color=(t,e,n,i,s)=>{this._for_each_unit_input(t,a=>{this._set_unit_pin_shell_color(a,e,n,i,s)})};this._set_unit_pin_color=(t,e,n,i,s)=>{this._spec_is_link_pin_ignored(t)||(this._set_unit_pin_ghost_color(t,e,n,i,s),this._set_unit_pin_shell_color(t,e,n,i,s))};this._set_unit_pin_ghost_color=(t,e,n,i,s)=>{this._set_pin_text_color(t,i)};this._set_unit_pin_shell_color=(t,e,n,i,s)=>{let{type:a}=it(t),_=this._pin_to_merge[t];_?this._is_merge_ref(_)||this._set_merge_pin_color(_,a,e):this._set_link_pin_pin_color(t,e,s);let c=this._is_link_pin_ref(t);this._set_link_pin_link_color(t,c?e:n)};this._set_unit_ghost_color=(t,e,n,i,s)=>{this._set_unit_core_ghost_color(t,e),this._set_unit_pins_ghost_color(t,e,n,i,s)};this._set_unit_pins_ghost_color=(t,e,n,i,s)=>{this._for_each_unit_pin(t,(a,_)=>{this._set_unit_pin_ghost_color(a,e,n,i,s)})};this._set_datum_node_style=(t,e,n)=>{let i=this._datum_container[t];i.$element.style[e]=n};this._set_datum_link_style=(t,e,n)=>{let i=this._link_base[t];i.$element.style[e]=n};this._get_datum_size=t=>{let e=this._datum_tree[t],{width:n,height:i}=this._get_datum_tree_size(e);return{width:n,height:i}};this._debounced_set_datum_color=ba((t,e)=>{let n=this._datum_container[t];n&&(n.$element.style.display=n.$element.style.display==="flex"?"grid":"flex")},0);this._set_datum_color=(t,e,n)=>{this._debounced_set_datum_color(t,e),this._set_datum_node_style(t,"color",e);let i=this._datum_to_pin[t];i&&this._set_datum_pin_link_color(t,i,n);let s=this._datum_to_plug[t];s&&this._set_datum_plug_link_color(t,s,n)};this._set_datum_pin_link_color=(t,e,n)=>{let i=Vt(t,e);this._set_link_color(i,n)};this._set_datum_plug_link_color=(t,e,n)=>{let i=Vt(t,e);this._set_link_color(i,n)};this._set_datum_opacity=(t,e)=>{this._set_datum_node_opacity(t,e),this._set_datum_link_opacity(t,e)};this._set_datum_node_opacity=(t,e)=>{this._set_datum_node_style(t,"opacity",`${e}`)};this._set_datum_link_opacity=(t,e)=>{let n=this._datum_to_pin[t];if(n){let i=Vt(t,n);this._set_datum_link_style(i,"opacity",`${e}`)}};this._set_err_color=(t,e)=>{let{unitId:n}=Kr(t),i=this._err_comp[n];i.$element.style.color=e;let s=Vt(n,t);this._set_link_color(s,e)};this._set_err_opacity=(t,e)=>{let{unitId:n}=Kr(t),i=this._err_comp[n];i.$element.style.opacity=`${e}`;let s=Vt(n,t);this._set_link_opacity(s,e)};this._on_search_item_pick=({id:t})=>{if(!this._control_lock)return;let e=this._search_unit_id,n=this._search_unit_datum_id;e?(this._commit_shift_search(),this._has_node(e)&&(this._refresh_node_color(e),this._for_each_unit_input(e,i=>{this._refresh_node_color(i)}))):n&&this._commit_shift_search()};this._on_search_empty=()=>{this._search_unit_id&&this._mode==="add"&&this._state_remove_search_unit()};this._on_search_shape=({shape:t})=>{this._tree_layout&&t==="circle"?this._leave_tree_layout():!this._tree_layout&&t==="rect"&&this._enter_tree_layout()};this._show_core_name=t=>{let e=this._core_name[t];e.$element.style.display="flex"};this._hide_core_name=t=>{let e=this._core_name[t];e.$element.style.display="none"};this._commit_search=()=>{let{specs:t,animate:e}=this.$props;this._search_fallback_position=this._world_screen_center();let n=this._search_start_unit_id,i=this._search_start_spec_id,s=this._search_start_unit_merges,a=this._search_start_unit_plugs,_=this._search_start_unit_parent_id,c=this._search_start_unit_index,p=this._search_unit_id;if(p)if(this._refresh_unit_layer(p),this._mode==="add"||this._mode==="change"||this._mode==="multiselect"||this._mode==="info"){this._set_unit_color(p,this._theme.node,this._theme.link,this._theme.pin_text,this._theme.node);let d=this._get_unit(p),m=un(d,t),h=this._search_unit_spec_id!==this._search_unit_init_spec_id;if(this._mode==="add"||this._mode==="multiselect"||this._mode==="info"){let f=[fi(p,m)];if(this._tree_layout){let g=this._get_current_layout_layer_id();f.push(ms(g,{},[p],{},{}))}let b=Mi(f);this._dispatch_action(b),this._pod.$bulkEdit({actions:f})}else if(this._mode==="change")if(this._search_start_unit_id){let f=on(t,i);h&&(this._pod_remove_unit(n,f),this._pod_add_unit(p,m));let b=un(this._search_start_graph_unit_spec,t),g=B(this._get_unit_merges(p)),v=B(this._get_unit_plugs(p));this._dispatch_swap_unit_action(n,b,s,a,_,c,p,m,g,v,_,c)}else this._pod_add_unit(p,m),this._dispatch_add_unit_action(p,d);if(h){for(let f in this._search_unit_merges){let b=At(f),g=this._search_unit_merges[f];if(this._merge_pin_count[f]>2){let x,I,E=g[p];E.input&&pe(E.input)>0?(x="input",I=jt(E.input||{})):(x="output",I=jt(E.output||{})),this.__pod_add_pin_to_merge(f,p,x,I)}else this._pod_add_merge(f,g);this._is_merge_ref(b)||(this._refresh_merge_pin_pin_color(b,"input"),this._refresh_merge_pin_pin_color(b,"output"))}this._search_unit_ref_merge_id&&this._pod_add_merge(this._search_unit_ref_merge_id,this._search_unit_ref_merge)}if(this._search_unit_spec_id_changed&&this._is_unit_component(p)&&(this._sim_add_sub_component(p),this._connect_sub_component(p)),this._refresh_unit_compatibility(p),this._start_graph_simulation(he),this._tree_layout){let f=this._layout_sub_component_parent[p]||null;this._move_all_layout_node_target_position(f)}}else this._mode==="remove"&&(this.copy_single_node(p,!1),this._state_remove_search_unit());let u=this._search_unit_datum_node_id;u&&(this._mode==="remove"?(this.copy_single_node(u,!1),this._remove_data_search_unit()):this._mem_remove_search_datum(),this._refresh_datum_color(u))};this._shift_search=()=>{if(this._is_shift_pressed()||this._mode==="multiselect"){let t=this._jiggle_world_screen_center(this._search_dock_offset_x/2,this._search_dock_offset_y/2),e=this._jiggle_world_screen_center(),n=this._search_unit_spec_id,i=this._new_unit_id(n),s=ve({},{});this._add_search_unit(i,n,t,s,e),this._refresh_node_color(i)}else{let t=this._search_unit_id;this._mem_remove_search_unit_id(),this._hide_search(),this._refresh_node_color(t)}};this._set_node_compatible=t=>{this._compatible_node_id[t]=!0,this._compatible_node_count++};this._set_node_not_compatible=t=>{this._compatible_node_id[t]&&(delete this._compatible_node_id[t],this._compatible_node_count--)};this._refresh_unit_compatibility=t=>{let e=this._get_display_node_id();if(e.length>0){let{all_pin:n,all_pin_ref:i,all_pin_ref_unit:s,all_data:a}=this._is_all_node(e);n?i?s[t]||(this._set_node_compatible(t),this._refresh_node_fixed(t),this._refresh_node_selection(t)):this._for_each_unit_pin(t,_=>{this._is_pin_all_pin_match(_,e)&&(this._set_node_compatible(_),this._refresh_node_fixed(_),this._refresh_node_selection(_))}):a&&this._for_each_unit_pin(t,_=>{this._is_pin_all_datum_match(_,e)&&(this._set_node_compatible(_),this._refresh_node_fixed(_),this._refresh_node_selection(_))})}};this._set_all_visible_output_pin_opacity=t=>{for(let e of this._link_pin_output_set)this._spec_is_link_pin_ignored(e)||this._set_link_pin_opacity(e,t)};this._set_all_ref_pin_opacity=t=>{for(let e of this._link_pin_ref_set)this._spec_is_link_pin_ignored(e)||this._set_link_pin_opacity(e,t)};this._set_all_literal_datum_opacity=t=>{for(let e in this._visible_data_node)this._is_datum_class_literal(e)||this._set_datum_opacity(e,t)};this._on_search_list_shown=()=>{let{animate:t}=this.$props;this._search_hidden=!1,this._control_lock&&((this._mode==="none"||this._mode==="info")&&this._set_crud_mode("add"),this._disable_keyboard(),this._start_graph_simulation(he),this._tree_layout&&(this._refresh_search_list_height_offset(),this._refresh_all_layout_node_target_position(),this._layout_scroll_search_unit_into_view(),t?this._animate_all_current_layout_layer_node():this._set_all_current_layout_layer_core_position(),this._animate_current_layer_offset_if_overflown()))};this._search_filter_true=()=>!0;this._search_filter=this._search_filter_true;this._mem_remove_search_unit_id=()=>{this._search_unit_id=null,this._search_unit_spec_id=null,this._search_unit_graph_position=null,this._search_unit_component_size=null,this._search_unit_merges={},this._search_start_unit_id=null,this._search_start_spec_id=null,this._search_start_unit_merges=null,this._search_start_unit_plugs=null,this._search_start_graph_unit_spec=null,this._search_start_component_index=null,this._stop_zoom_target_animation()};this._mem_remove_search_datum=()=>{this._search_unit_datum_id=null,this._search_unit_datum_node_id=null,this._stop_zoom_target_animation()};this._on_search_list_hidden=()=>{let{specs:t}=this.$props;if(this._search_hidden=!0,!this._control_lock)return;let e=this._search_adding_unit,n=this._search_unit_id,i=this._search_start_unit_id,s=this._search_start_spec_id,a=this._search_unit_datum_node_id,_=this._search_unit_spec_id,c=this._search_unit_spec_id_changed;if(!e){let p=!1;n&&(this._mode==="add"||this._mode==="multiselect"||this._mode==="none"||this._mode==="remove"?this._state_remove_unit(n,!1):this._mode==="change"&&(this._state_swap_search_unit(s,i),c&&on(t,s)&&(this._sim_add_sub_component(i,{}),this._connect_sub_component(i)))),this._mem_remove_search_unit_id(),p&&this._reset_unit_color(i)}if(a&&(this._remove_datum(a),this._mem_remove_search_datum()),this._set_crud_mode("none"),this._search_filter!==this._search_filter_true&&this._set_search_filter(this._search_filter_true),this.focus(),this._refresh_node_color(i),this._enable_keyboard(),this._search_fallback_position){let{x:p,y:u}=this._search_fallback_position;this._zoom_center_at(p,u)}this._refresh_search_list_height_offset(),this._tree_layout&&this._refresh_layout_node_target_position(null)};this._enable_unit_pin_names=t=>{this._for_each_unit_pin(t,e=>{this._has_node(e)&&this._enable_pin_name(e)})};this._disable_unit_pin_names=t=>{this._for_each_unit_pin(t,e=>{this._has_node(e)&&this._disable_pin_name(e)})};this._enable_all_node_name=()=>{for(let t in this._unit_node)this._is_unit_base(t)||(this._enable_core_name(t),this._enable_unit_pin_names(t));for(let t in this._exposed_ext_node)this._enable_plug_name(t)};this._is_minimap_drag_and_drop_mode=t=>t==="add";this._disable_all_node_name=()=>{for(let t in this._unit_node)this._is_unit_base(t)||(this._disable_core_name(t),this._disable_unit_pin_names(t));for(let t in this._exposed_ext_node)this._disable_plug_name(t)};this._on_enter_mode=({mode:t})=>{var s;let{getSpec:e}=this.$props,{$theme:n}=this.$context,i=this._mode;if(this._mode=t,this._search_hidden){if(this.__is_freeze_mode(i)&&!this.__is_freeze_mode(this._mode))for(let c in this._drag_node_id)this._descend_node(c);let a=c=>{this._refresh_node_color(c)},_=c=>{let p=this._get_current_layout_layer_id();for(let u in this._selected_node_id)this._collapse_node_id.has(u)||(c?this._spec_get_sub_component_parent_id(u)===p&&a(u):a(u))};if(this._hover_node_count>0){let c=0;for(let p in this._hover_node_id){let u=this._get_node_anchor_node_id(p);a(p),a(u),this._is_node_selected(u)&&c++}c>0&&_(this._tree_layout)}else this._selected_node_count>0&&_(this._tree_layout);if(i!=="none"&&this._mode==="none"){for(let c in this._selected_node_id)this._is_unit_node_id(c)?this._enable_core_resize(c):this._is_datum_node_id(c);this._drag_and_drop&&this._drag_and_drop_cancel()}else if(i==="none"&&this._mode!=="none")for(let c in this._selected_node_id)this._is_unit_node_id(c)?this._disable_core_resize(c):this._is_datum_node_id(c)&&this._enable_datum_overlay(c);if(i!=="data"&&this._mode==="data"?this._set_all_visible_output_pin_opacity(.5):i==="data"&&this._mode!=="data"&&this._set_all_visible_output_pin_opacity(1),i!=="add"&&this._mode==="add"){let c=this.get_units();for(let p in c)this._show_unit_ignored_pins(p);this._start_graph_simulation(he)}else if(i==="add"&&this._mode!=="add"){let c=this.get_units();for(let p in c)this._hide_unit_ignored_pins(p)}if(i!=="info"&&this._mode==="info"){if(this._enable_all_node_name(),this._hover_node_count>0){this._set_all_nodes_links_opacity(.2);for(let c in this._hover_node_id)this._show_node_info(c)}else if(this._selected_node_count>0){this._set_all_nodes_links_opacity(.2);for(let c in this._selected_node_id)this._show_node_info(c)}}else if(i==="info"&&this._mode!=="info"&&(this._disable_all_node_name(),this._info_node_id.size>0)){this._set_all_nodes_links_opacity(1);for(let c of this._info_node_id)this._hide_node_info(c)}if(i!=="change"&&this._mode==="change")for(let c in this._drag_node_id){let p=this._pressed_node_id_pointer_id[c];for(let u in p)this._on_node_blue_drag_start(c,Number.parseInt(u,10))}else if(i==="change"&&this._mode!=="change"){this._blue_drag_hover_unit_id&&this._abort_blue_drag_hover(),this._blue_drag_init_id&&this._abort_blue_drag(this._blue_drag_init_id);for(let c in this._exposed_ext_node){let{type:p,pinId:u}=gt(c),d=(s=this._hover_node_id_pointer_id[c])!=null?s:{};pe(d)>0&&this._refresh_exposed_pin_set_color(p,u)}}if(i!=="remove"&&this._mode==="remove")for(let c in this._drag_node_id){let p=jt(this._pressed_node_id_pointer_id[c]);this._on_node_red_drag_start(c,Number.parseInt(p,10))}else if(i==="remove"&&this._mode!=="remove"){for(let c in this._drag_node_id)this._on_node_red_drag_end(c);if(this._drag_and_drop){let c=this._drag_and_drop_pointer,p=this._drag_and_drop_bundle,u=this._pointer_position[c],d=this._screen_to_world(u.x,u.y);this.paste_bundle(p,d),this._cancel_drag_and_drop(),this.focus()}}if(i!=="multiselect"&&this._mode==="multiselect"){if(this._long_press_count>0&&this._pointer_down_count===1){let c=Number.parseInt(jt(this._pointer_down)),p=this._pointer_id_pressed_node_id[c]||null,u=this._get_all_selected_node_ids();if(p){if(this._is_unit_node_id(p)&&!this._tree_layout)if(this._is_node_selected(p)){if(!this._is_unit_base(p)){let d=this._get_unit_spec(p),{map_unit_id:m,map_merge_id:h,map_plug_id:f,selected_node_ids:b}=Av(d,e,this._new_unit_id,this._new_merge_id,this._new_sub_pin_id,this._new_datum_id);this._explode_unit(p,m,h,f,b)}this._cancel_long_click=!0}else this._start_long_press_collapse(c,p,u,this._long_press_screen_position)}else this._tree_layout||this._start_long_press_collapse(c,null,u,this._long_press_screen_position)}this._refresh_compatible()}else i==="multiselect"&&this._mode!=="multiselect"&&(this._restart_gesture=!1,this._refresh_compatible());!this._is_minimap_drag_and_drop_mode(i)&&this._is_minimap_drag_and_drop_mode(this._mode)?this._enable_minimap_drag_and_drop():this._is_minimap_drag_and_drop_mode(i)&&!this._is_minimap_drag_and_drop_mode(this._mode)&&this._disable_minimap_drag_and_drop()}else{if(this._search_unit_id){let a=this._search_unit_id;if(i!==t){if(t==="none")this._hide_search();else if(t==="change")this._on_unit_blue_click(a);else if(t!=="remove"){if(t!=="add")if(t==="data"){let _=this._get_unit_spec_id(a),c=this._get_node_position(a);this._state_remove_search_unit(),this._add_data_search_unit(_,c)}else t==="info"&&(this._search_unit_id?this._show_node_info(this._search_unit_id):this._search_unit_datum_node_id&&this._show_node_info(this._search_unit_datum_node_id))}}this._refresh_node_color(this._search_unit_id)}if(this._search_unit_datum_node_id){let a=this._search_unit_datum_node_id;if(i!==t&&t!=="change"){if(t!=="remove"){if(t==="add"){let _=this._get_node_position(a),c=_,p=this._search_unit_datum_spec_id,u=this._new_unit_id(p);this._remove_data_search_unit();let d=ve({},{});this._add_search_unit(u,p,_,d,c)}}}this._refresh_node_color(a)}}if(this._search){let a=this._get_color(),c=Ze(n,t,a);(this._mode==="multiselect"||this._mode==="info")&&(c=Ze(n,"add",a)),this._search.setProp("selectedColor",c)}this.dispatchEvent("_graph_mode",{mode:t})};this._disable_crud=()=>{this._modes&&this._unlisten_crud&&(this._unlisten_crud(),this._unlisten_crud=void 0)};this._refresh_tree_sub_component_index=()=>{let t=this._spec_get_component_children(),e=0;for(let n of t)e=this._set_tree_sub_component_index(n,e);this._is_fullwindow&&this._reorder_fullwindow_component_ids()};this._reorder_fullwindow_component_ids=()=>{this._fullwindow_component_ids=this._order_sub_component_ids(this._fullwindow_component_ids)};this._reorder_all_fullwindow=()=>{this._decouple_all_fullwindow_component(),this._reorder_fullwindow_component_ids(),this._couple_all_fullwindow_component()};this._sub_component_index={};this._set_tree_sub_component_index=(t,e)=>{this._set_sub_component_index(t,e);let n=this._spec_get_sub_component_children(t);e++;for(let i of n)e=this._set_tree_sub_component_index(i,e);return e};this._on_transcend_click=()=>{this._core_component_unlocked_count>0?this._lock_all_component():this._unlocked_datum.size>0?this._lock_all_datum():this._is_fullwindow?this._leave_all_fullwindow(!0,zt):this._enter_default_fullwindow()};this._order_sub_component_ids=t=>t.sort((e,n)=>{let i=this._sub_component_index[e],s=this._sub_component_index[n];return i-s});this._enter_default_fullwindow=()=>{this._selected_component_count>0&&!this._tree_layout?this._enter_all_selected_fullwindow(!0):this._enter_all_fullwindow(!0)};this._enter_all_fullwindow=t=>{let{component:e}=this.$props;this._is_all_fullwindow=!0;let n=J(e.$subComponent),i=n;if(this._tree_layout){let _=this._get_current_layout_layer_id();i=n.filter(c=>this._spec_get_sub_component_parent_id(c)===_)}let s=i.filter(this._is_node_selected);s.length>0&&(i=s);let a=this._order_sub_component_ids(i);this._enter_fullwindow(t,a)};this._enter_all_selected_fullwindow=t=>{let e=J(this._selected_component),n=this._order_sub_component_ids(e);this._enter_fullwindow(t,n)};this._get_sub_component_index=t=>this._spec_get_sub_component_parent_id(t)?this._spec_get_sub_component_parent_root_index(t):this._get_sub_component_root_index(t);this._get_sub_component_root_index=t=>this._spec_get_component_children().indexOf(t);this._spec_get_sub_component_parent_root_index=t=>{let e=this._spec_get_sub_component_parent_id(t);return this._spec_get_sub_component_children(e).indexOf(t)};this._get_sub_component_tree_index=t=>{let e=this._spec_get_sub_component_parent_id(t);if(e){let n=this._spec_get_sub_component_children(e),i=this._get_sub_component_tree_index(e),s=n.indexOf(t);return i+s}else return this._get_sub_component_root_index(t)};this._get_sub_component_frame_context=t=>this._core_component_frame_context[t];this._get_sub_component_frame=t=>this._core_component_frame[t];this._get_component_sub_component_root_base=t=>this._get_sub_component_root_base(t).map(([i,s])=>[[t,...i],s]);this._get_sub_component_base=t=>this._get_sub_component(t).getBase();this._get_sub_component_root_base=t=>this._get_sub_component(t).getRootBase();this._get_fullwindow_foreground=()=>{if(this._frame_out){let t=Zi(this,"foreground");if(t)return t}return this._foreground};this._leave_all_fullwindow=(t,e)=>{this._leave_fullwindow(t,e),this._fullwindow_component_set=new Set,this._fullwindow_component_ids=[],this._is_all_fullwindow=!1};this._cancel_fullwindow_animation=()=>{this._abort_fullwindow_animation&&(this._abort_fullwindow_animation(),this._abort_fullwindow_animation=void 0)};this._finish_component=()=>{this._is_component_framed&&this._leave_component_frame()};this._finish_sub_component=t=>{if(this._tree_layout){let e=this._spec_get_sub_component_parent_id(t),n=this._get_current_layout_layer_id();e===n?this._tree_layout?this._is_layout_component_layer_visible(n)?this._enter_sub_component_frame(t):this._enter_sub_component_frame(t):this._enter_sub_component_frame(t):this._append_sub_component_parent_root(e,t)}else this._enter_sub_component_frame(t)};this._leave_fullwindow=(t,e)=>{let{animate:n}=this.$props;if(t=t!=null?t:n,this._is_fullwindow=!1,this._frame_out||this._set_fullwindow_frame_off(t),this._cancel_fullwindow_animation(),this._in_component_control){let i=this._fullwindow_component_ids;if(t)this._abort_fullwindow_animation=this._animate_leave_fullwindow(i,s=>{},()=>{this._end_leave_fullwindow_animation(i),e()});else{for(let s of i)this._decouple_sub_component(s),this._finish_sub_component(s);this._finish_component()}}this._frame_out||this._disabled||(this._enable_input(),this._show_control(n)),this._disabled||(this._transcend&&this._transcend.up(),this.focus()),this.dispatchEvent("leave_fullwindow",{},!1)};this._place_sub_component=(t,e)=>{this._is_all_fullwindow?(this._fullwindow_component_set.add(t),en(this._fullwindow_component_ids,t),this._couple_sub_component(t,e)):this._enter_sub_component_frame(t)};this._displace_sub_component=t=>{this._is_sub_component_fullwindow(t)?this._decouple_sub_component(t):this._leave_sub_component_frame(t)};this._displace_all_sub_component=()=>{let{component:t}=this.$props;for(let e in t.$subComponent)this._displace_sub_component(e)};this._couple_all_fullwindow_component=()=>{for(let t of this._fullwindow_component_ids)this._couple_sub_component(t)};this._couple_sub_component=(t,e)=>{e===void 0?this.__move_sub_component(t,n=>{this._append_sub_component_parent_root(n,t)},()=>{this._append_sub_component_to_root(t)}):this._couple_sub_component_at(t,e)};this._couple_sub_component_at=(t,e)=>{this.__move_sub_component(t,n=>{this._insert_sub_component_parent_root_at(n,t,e)},()=>{this._insert_sub_component_root_at(t,e)})};this._get_sub_component_fullwindow_parent_id=t=>{let e=this._spec_get_sub_component_parent_id(t);for(;e&&!this._is_sub_component_fullwindow(e);)e=this._spec_get_sub_component_parent_id(e);return e};this.__move_sub_component=(t,e,n)=>{let i=this._spec_get_sub_component_parent_id(t);i?e(i):n()};this._descend_sub_component=t=>{this.__move_sub_component(t,e=>{this._remove_sub_component_parent_root(e,t),this._enter_sub_component_frame(t)},()=>{this._remove_sub_component_from_root(t),this._enter_sub_component_frame(t)})};this.decouple_all_fullwindow_component=()=>{for(let t of this._fullwindow_component_ids)this._decouple_sub_component(t)};this._decouple_all_fullwindow_component=()=>{for(let t of this._fullwindow_component_ids)this._decouple_sub_component(t)};this._decouple_sub_component=t=>{this.__move_sub_component(t,e=>{this._remove_sub_component_parent_root(e,t)},()=>{this._remove_sub_component_from_root(t)})};this._enable_crud=()=>{this._modes&&(this._unlisten_crud||(this._unlisten_crud=this._modes.addEventListeners([mt("entermode",this._on_enter_mode)]),this._modes.setProp("mode",this._mode),this._mode=this._modes.getMode()))};this._enable_cabinet=()=>{this._cabinet&&(this._unlisten_cabinet||(this._unlisten_cabinet=this._cabinet.addEventListeners([mt("draweractive",({drawerId:t})=>{this._on_cabinet_drawer_active(t)}),mt("drawerinactive",({drawerId:t})=>{this._on_cabinet_drawer_inactive(t)})]),this._minimap_hidden===void 0?this._minimap_hidden=!this._cabinet.isActive("minimap"):this._cabinet.setActive("minimap",!this._minimap_hidden),this._pallete_hidden===void 0?this._pallete_hidden=!this._cabinet.isActive("color"):this._cabinet.setActive("color",!this._pallete_hidden)))};this._on_cabinet_drawer_active=t=>{t==="minimap"?this._minimap_hidden=!1:t==="color"&&(this._pallete_hidden=!1)};this._on_cabinet_drawer_inactive=t=>{t==="minimap"?this._minimap_hidden=!0:t==="color"&&(this._pallete_hidden=!0)};this._disable_cabinet=()=>{this._cabinet&&this._unlisten_cabinet&&(this._unlisten_cabinet(),this._unlisten_cabinet=void 0)};this._is_shift_pressed=()=>this._is_key_pressed("Shift");this._is_alt_pressed=()=>this._is_key_pressed("Alt");this._is_key_pressed=t=>{let{input:{keyboard:e}}=this.$system,n=Ei[t];return e.pressed.indexOf(n)>-1};this._enable_escape=()=>{this._unlisten_escape||(this._unlisten_escape=this.addEventListener(bo([{combo:"Escape",keydown:this._on_escape_keydown,strict:!1}])))};this._disable_escape=()=>{this._unlisten_escape&&(this._unlisten_escape(),this._unlisten_escape=void 0)};this._enable_enter=()=>{this._unlisten_enter||(this._unlisten_enter=this.addEventListener(bo([{combo:"Enter",keydown:this._on_enter_keydown}])))};this._disable_enter=()=>{this._unlisten_enter&&(this._unlisten_enter(),this._unlisten_enter=void 0)};this._on_gamepad_buttondown=t=>{let e=t===0,n=t===1,i=t===2,s=t===3,a=t===6,_=t===7,c=t===9,p=t===12,u=t===13,d=.01;a&&(this._gamepad_zoom_z=-d,this._start_gamepad_zoom_frame()),_&&(this._gamepad_zoom_z=d,this._start_gamepad_zoom_frame()),e&&this._set_crud_mode("remove"),n&&this._set_crud_mode("add"),i&&this._set_crud_mode("change"),s&&this._set_crud_mode("data"),c&&this._show_search(),p&&(this._search_hidden||this._select_search_up()),u&&(this._search_hidden||this._select_search_down())};this._select_search_up=()=>{this._search&&this._search.select_next(-1)};this._select_search_down=()=>{this._search&&this._search.select_next(1)};this._on_gamepad_buttonup=t=>{let e=t===0,n=t===1,i=t===2,s=t===3,a=t===6,_=t===7,c=t===9,p=0;a&&!_&&(this._gamepad_zoom_z=p,this._start_gamepad_zoom_frame()),!a&&_&&(this._gamepad_zoom_z=p,this._start_gamepad_zoom_frame()),this._search_hidden&&(e&&this._mode==="remove"&&this._set_crud_mode("none"),n&&this._mode==="add"&&this._set_crud_mode("none"),i&&this._mode==="change"&&this._set_crud_mode("none"),s&&this._mode==="data"&&this._set_crud_mode("none")),c&&this._search_hidden};this._on_gamepad_axischange=t=>{let[e,n]=t,i=e===0||e===1,s=e===2||e===3,a=6;if(i){let _=e===0,c=e===1;_&&(this._gamepad_zoom_x=-n/a,Math.abs(n)<.1&&(this._gamepad_zoom_x=0)),c&&(this._gamepad_zoom_y=-n/a,Math.abs(n)<.1&&(this._gamepad_zoom_y=0)),this._start_gamepad_zoom_frame()}};this._gamepad_zoom_x=0;this._gamepad_zoom_y=0;this._gamepad_zoom_z=0;this._start_gamepad_zoom_frame=()=>{let{api:{animation:{requestAnimationFrame:t}}}=this.$system,{$width:e,$height:n}=this.$context;this._gamepad_zoom_translate_frame=t(()=>{let{x:i,y:s,z:a}=this._zoom;if(this._gamepad_zoom_x===0&&this._gamepad_zoom_y===0&&this._gamepad_zoom_z===0){this._stop_gamepad_zoom_frame();return}let _={x:i+this._gamepad_zoom_x,y:s+this._gamepad_zoom_y,z:a};this._set_zoom(_),this._gamepad_zoom_z!==0&&this._zoom_in(this._gamepad_zoom_z,e/2,n/2),this._start_gamepad_zoom_frame()})};this._stop_gamepad_zoom_frame=()=>{let{api:{animation:{requestAnimationFrame:t,cancelAnimationFrame:e}}}=this.$system;this._gamepad_zoom_translate_frame!==void 0&&(e(this._gamepad_zoom_translate_frame),this._gamepad_zoom_translate_frame=void 0)};this._enable_gamepad=()=>{let{api:{input:{gamepad:{getGamepad:t,addEventListener:e}}}}=this.$system;if(!this._gamepad_connection_unlisten){let n=s=>{let a=t(s.gamepad.index);this._gamepad=new Ts(this.$system,a),this._gamepad_unlisten=Tt([this._gamepad.addListener("buttondown",this._on_gamepad_buttondown),this._gamepad.addListener("buttonup",this._on_gamepad_buttonup),this._gamepad.addListener("axischange",this._on_gamepad_axischange)])},i=s=>{this._gamepad.disconnect(),this._stop_gamepad_zoom_frame()};this._gamepad_connection_unlisten=Tt([e("gamepadconnected",n),e("gamepaddisconnected",i)])}};this._disable_gamepad=()=>{this._gamepad_connection_unlisten&&(this._gamepad_unlisten&&(this._gamepad_unlisten(),this._gamepad_unlisten=void 0),this._gamepad_connection_unlisten(),this._gamepad_connection_unlisten=void 0)};this._enable_keyboard=()=>{if(!this._keyboard_unlisten){let t=[{combo:["Backspace","Delete"],keydown:this._on_backspace_keydown},{combo:["Ctrl + ;",";"],keydown:this._on_ctrl_semicolon_keydown,strict:!1},{combo:";",keydown:(n,{ctrlKey:i})=>{i&&this._on_ctrl_semicolon_keydown()}},{combo:["Alt"],keydown:(n,{altKey:i})=>{this._on_alt_keydown()},keyup:(n,{altKey:i})=>{this._on_alt_keyup()}},{combo:["Ctrl + s"],keydown:(n,{ctrlKey:i})=>{this._on_ctrl_s_keydown()},preventDefault:!0},{combo:["Ctrl + Shift + s"],keydown:(n,{ctrlKey:i})=>{this._on_ctrl_shift_s_keydown()},preventDefault:!0},{combo:["Ctrl + o"],keydown:(n,{ctrlKey:i})=>{this._on_ctrl_o_keydown()},preventDefault:!0},{combo:["Ctrl + r"],keydown:(n,{ctrlKey:i})=>{this._on_ctrl_r_keydown()},preventDefault:!0},{combo:["Ctrl + l","l"],strict:!0,keydown:this._on_ctrl_l_keydown},{combo:["Ctrl + m","m"],strict:!0,keydown:this._on_ctrl_m_keydown},{combo:["p"],strict:!0,keydown:this._on_ctrl_p_keydown},{combo:"Ctrl + a",keydown:this._on_ctrl_a_keydown},{combo:"Ctrl + c",keydown:this._on_ctrl_c_keydown},{combo:"Ctrl + Shift + c",keydown:this._on_ctrl_shift_c_keydown},{combo:"Ctrl + x",keydown:this._on_ctrl_x_keydown},{combo:"Ctrl + v",keydown:this._on_ctrl_v_keydown},{combo:"Ctrl + z",multiple:!0,keydown:this._on_ctrl_z_keydown},{combo:"Ctrl + Shift + z",multiple:!0,keydown:this._on_ctrl_shift_z_keydown},{combo:["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],multiple:!0,keydown:this._on_arrow_keydown}],e=bo(t);this._keyboard_unlisten=this.addEventListener(e)}this._enable_mode_keyboard()};this._unlisten_mode_keyboard=void 0;this._enable_mode_keyboard=()=>{this._modes&&!this._unlisten_mode_keyboard&&(this._unlisten_mode_keyboard=dE(this,t=>!this._search_hidden||this._edit_datum_node_id?!1:(this._set_crud_mode(t),!0)))};this._disable_mode_keyboard=()=>{this._unlisten_mode_keyboard&&(this._unlisten_mode_keyboard(),this._unlisten_mode_keyboard=void 0)};this._control=null;this._cabinet=null;this._search=null;this._import=null;this._export=null;this._minimap=null;this._modes=null;this._transcend=null;this._frame=null;this._lock_control=()=>{let{animate:t}=this.$props;this._control&&(this._control_lock||this._disabled||(this._control_lock=!0,this._control.dispatchEvent("lock",{},!1),!this._subgraph_unit_id&&(!this._is_fullwindow||this._frame_out)&&(this._temp_control_lock||this._core_component_unlocked_count===0)&&(this._enable_input(),this._show_control(t))))};this._enable_search=()=>{if(this._search&&!this._unlisten_search){let t=mt("selected",this._on_search_item_selected),e=mt("shown",this._on_search_list_shown),n=mt("hidden",this._on_search_list_hidden),i=mt("pick",this._on_search_item_pick),s=mt("empty",this._on_search_empty),a=mt("shape",this._on_search_shape);this._unlisten_search=this._search.addEventListeners([t,e,n,i,s,a]),this._search.setProp("selectedColor",l0),this._search.setProp("registry",this._registry);let _=this._tree_layout?"rect":"circle";this._search.setShape(_),this._search_hidden?this._hide_search():this._show_search()}};this._enable_import=()=>{this._import&&!this._unlisten_import&&(this._unlisten_import=this._import.addEventListener(ae({onClick:()=>{this._on_ctrl_o_keydown()}})))};this._disable_import=()=>{this._unlisten_import&&(this._unlisten_import(),this._unlisten_import=void 0)};this._enable_export=()=>{this._export&&!this._unlisten_export&&(this._unlisten_export=this._export.addEventListener(ae({onClick:()=>{this._on_ctrl_s_keydown()}})))};this._disable_export=()=>{this._unlisten_export&&(this._unlisten_export(),this._unlisten_export=void 0)};this._disable_search=()=>{this._unlisten_search&&(this._unlisten_search(),this._unlisten_search=void 0)};this._enable_transcend=()=>{this._transcend&&(this._unlisten_transcend||(this._unlisten_transcend=this._transcend.addEventListener(ae({onClick:this._on_transcend_click}))),this._is_fullwindow?this._transcend.down(!1):this._transcend.up(!1))};this._disable_transcend=()=>{this._transcend&&this._unlisten_transcend&&(this._unlisten_transcend(),this._unlisten_transcend=void 0)};this._show_transcend=t=>{this._transcend&&this._transcend.show(t)};this._hide_transcend=t=>{this._transcend&&this._transcend.hide(t)};this._disable_keyboard=()=>{this._keyboard_unlisten&&(this._keyboard_unlisten(),this._keyboard_unlisten=void 0),this._disable_mode_keyboard()};this._pointer_up_all_pressed_pointer_id=()=>{for(let t in this._pointer_id_pressed_node_id){let e=Number.parseInt(t);this.__on_pointer_up(e)}};this._layout_core_animation_count=0;this._cancel_layout_core_animation=t=>{this._layout_core_abort_animation[t]&&(this._layout_core_abort_animation[t](),delete this._layout_core_abort_animation[t],this._layout_core_animating.delete(t))};this._animate_layout_core=(t,e,n,i)=>{this._cancel_layout_core_animation(t),this._layout_core_animating.add(t),this._layout_core_abort_animation[t]=this._animate_simulate_trait(e,n,({x:s,y:a,sx:_,sy:c,width:p,height:u,opacity:d,fontSize:m})=>{this._set_layout_core_position_x(t,s),this._set_layout_core_position_y(t,a),this.__resize_layout_core(t,Math.max(p,0),Math.max(u,0)),this._scale_layout_core_x(t,_),this._scale_layout_core_y(t,c),this._set_layout_core_opacity(t,d),this._set_layout_core_font_size(t,m)},()=>(delete this._layout_core_abort_animation[t],this._layout_core_animating.delete(t),this._layout_core_animating.size===0&&this._on_all_layout_core_animation_end(),i(),!0))};this._animate_leaf_frame=(t,e,n,i)=>{let s=this._leaf_frame[t],a=this._leaf_frame_node[t];return this._animate_simulate_trait(e,n,({x:_,y:c,sx:p,sy:u,width:d,height:m,opacity:h,fontSize:f})=>{a.x=_,a.y=c,a.width=d,a.height=m,a.sx=p,a.sy=u,a.opacity=h,s.$element.style.left=`${_+this._leaf_layer_offset_x+(Math.abs(p)-1)*d/2}px`,s.$element.style.top=`${c+this._leaf_layer_offset_y+(Math.abs(u)-1)*m/2}px`,s.$element.style.width=`${d}px`,s.$element.style.height=`${m}px`,s.$element.style.transform=`scale(${p}, ${u})`,s.$element.style.opacity=`${h}`,s.$element.style.fontSize=`${f}px`},i)};this._animate_simulate=(t,e,n,i,s)=>Xb(this.$system,t,e,n,i,s);this._animate_simulate_trait=(t,e,n,i)=>this._animate_simulate(t,e,[["x",1],["y",1],["width",1],["height",1],["sx",1/100],["sy",1/100],["opacity",1/100],["fontSize",1/10]],n,i);this._on_all_layout_core_animation_end=()=>{this._tree_layout||this._set_minimap_to_graph()};this._animate_layout_core_up=(t,e)=>{let{$width:n,$height:i}=this.$context,s=this._node[t],{x:a,y:_}=this._world_to_screen(s.x,s.y);a-=n/2,_-=i/2;let{width:c,height:p}=this._get_unit_component_graph_size(t),{z:u}=this._zoom,d=c,m=p,h=u,f=u,b=this._get_layout_node_anchor_id(t);this._animate_layout_core(t,{x:a,y:_,width:d,height:m,sx:h,sy:f,opacity:1,fontSize:1},()=>b===t?this._layout_target_node[b]:this._layout_node[b],e)};this._animate_layout_core_target=(t,e,n,i)=>{this._animate_layout_core(t,n,()=>e===t?this._layout_target_node[e]:this._layout_node[e],i)};this._animate_layout_core_anchor=(t,e,n)=>{let i=this._get_layout_node_anchor_id(t);return this._animate_layout_core_target(t,i,e,n)};this._enter_tree_layout=()=>{let{animate:t}=this.$props;this._pointer_up_all_pressed_pointer_id(),this._tree_layout=!0,this._layout_comp.$element.style.pointerEvents="inherit",this._layout_root.children.$element.style.opacity="1",this._refresh_all_layout_layer_opacity();let e=this._get_current_layout_layer();e.children.$element.style.opacity="1",e.layer.$element.style.overflowX="hidden",e.layer.$element.style.overflowY="auto",e.layer.$element.style.pointerEvents="inherit",e.children.$element.style.pointerEvents="inherit",e.children.$element.style.overflowX="initial",e.children.$element.style.overflowY="initial";for(let n of this._layout_path){let i=this._layout_layer[n];i.children.$element.style.overflowX="hidden",i.children.$element.style.overflowY="hidden",i.layer.$element.style.overflowX="hidden",i.layer.$element.style.overflowY="hidden"}this._refresh_all_layout_node_target_position(),this._layout_scroll_search_unit_into_view(),this._force_all_layout_node_traits();for(let n in this._component.$subComponent){let{width:i,height:s}=this._get_unit_component_layout_size(n);this._sim_layout_resize_sub_component(n,i,s)}for(let n in this._component.$subComponent){let i=this._is_layout_component_layer_visible(n),s=this._spec_get_sub_component_parent_id(n),a=this._spec_get_sub_component_children(n),_=!s||this._layout_path.includes(s);if(!i&&a.length>0&&!this._animating_sub_component_base_id.has(n))for(let c of a)this._measure_sub_component_base(c);_&&this._measure_sub_component_base(n)}t&&this._animate_enter_tree_layout(),this._zoom_comp._root.$element.style.opacity="0.25";for(let n in this._component.$subComponent){let i=this._layout_core[n];this._listen_layout_core(n,i),this._move_core_content_graph_to_layout(n),this._refresh_component_children_counter(n)}this._set_minimap_to_layout()};this._refresh_all_layout_node_target_position=()=>{this._refresh_layout_node_target_position(null);for(let t of this._layout_path)this._refresh_layout_node_target_position(t)};this._leaf_layer_offset_x=0;this._leaf_layer_offset_y=0;this._leaf_prop_unlisten={};this._plug_leaf_frame=(t,e,n,i)=>{let{api:{text:{measureText:s}}}=this.$system,{x:a,y:_,width:c,height:p,sx:u,sy:d,fontSize:m,opacity:h}=n,f={display:"block",position:"absolute",left:`${a+this._leaf_layer_offset_x+(Math.abs(u)-1)*c/2}px`,top:`${_+this._leaf_layer_offset_y+(Math.abs(d)-1)*p/2}px`,width:`${c}px`,height:`${p}px`,boxSizing:"content-box",transform:`scale(${u}, ${d})`,opacity:`${h}`,fontSize:`${m}px`,overflow:"visible",pointerEvents:"none"},b=w0(e),g=e.$element instanceof HTMLCanvasElement,v=e.isSVG(),x={position:"relative",boxSizing:"border-box",top:"0",left:"0",right:"0",bottom:"0",width:g||v?void 0:"100%",height:g||v?void 0:"100%",fontSize:"inherit",opacity:"1",transform:""},I=e.interceptProp("style",D=>D);this._leaf_prop_unlisten[t]=I;let E=this._leaf_frame[t];if(E?vt(E.$element,f):(E=new ln({style:f,disabled:!0},this.$system),this._leaf_frame[t]=E),this._leaf_frame_active[t])this._leaf_frame_layer[t].removeChild(E);else{E.appendChild(e);let D=Gs(e.$node),w=Pe(this._component,e,n,s);if(this._leaf_init_style[t]=D,this._leaf_style[t]=w,!b&&(vo(e.$node,x),g)){let T=e,C=T.getProp("width"),P=T.getProp("height");C&&typeof C=="string"&&Zo(C)&&(this._leaf_attr[t]={width:T.getProp("width")},T.setProp("width","100vw")),typeof P=="string"&&Zo(P)&&Zo(P)&&(this._leaf_attr[t]={height:T.getProp("height")},T.setProp("height","100vh"))}}return i.appendChild(E),this._leaf_frame_active[t]=!0,this._leaf_frame_layer[t]=i,E};this._unplug_leaf_frame=(t,e)=>{var n,i,s,a,_,c,p,u,d,m,h,f,b,g,v,x,I;if(this._leaf_frame_active[t]){let E=this._leaf_frame_layer[t],D=this._leaf_frame[t];D.removeChild(e),E.removeChild(D);let w=this._leaf_init_style[t];delete this._leaf_frame[t],delete this._leaf_frame_active[t],delete this._leaf_frame_layer[t],delete this._leaf_frame_node[t],delete this._leaf_style[t],delete this._leaf_init_style[t];let T=e.$node instanceof Text,C=e.$node instanceof HTMLCanvasElement,P=this._leaf_prop_unlisten[t];if(P(),delete this._leaf_prop_unlisten[t],!T){vo(e.$node,{position:(n=w.position)!=null?n:"",boxSizing:(i=w["box-sizing"])!=null?i:"",margin:(s=w.margin)!=null?s:"",marginTop:(a=w["margin-top"])!=null?a:"",marginLeft:(_=w["margin-left"])!=null?_:"",marginRight:(c=w["margin-bottom"])!=null?c:"",marginBottom:(p=w["margin-bottom"])!=null?p:"",top:(u=w.top)!=null?u:"",left:(d=w.left)!=null?d:"",right:(m=w.right)!=null?m:"",bottom:(h=w.bottom)!=null?h:"",width:C?void 0:(f=w.width)!=null?f:"",height:C?void 0:(b=w.height)!=null?b:"",opacity:(g=w.opacity)!=null?g:"",fontSize:(v=w["font-size"])!=null?v:"",transform:(x=w.transform)!=null?x:"",aspectRatio:(I=w["aspect-ratio"])!=null?I:""});let k=this._leaf_attr[t];for(let M in k)e.setProp(M,k[M])}}};this._get_sub_component_layout_layer=t=>{let e=this._spec_get_sub_component_parent_id(t);return this._get_sub_component_parent_leaf_layer(e)};this._get_sub_component_parent_leaf_layer=t=>{if(t===null)return this._layout_root;let e=!t||this._layout_path.includes(t),n=this._get_layout_layer(t),i=this._get_sub_component_layout_parent(t),s=this._get_sub_component_parent_leaf_layer(i);return e?n:s};this._measure_sub_component_base=(t,e=this._get_sub_component_root_base(t))=>{var i;let{api:{text:{measureText:n}}}=this.$system;for(let s of e){let[a,_]=s,c=Oe([t,...a]),p=(i=_.getOffset())!=null?i:_,u=Ie(p,n);u.x-=this.$context.$x,u.y-=this.$context.$y,this._leaf_frame_node[c]=u}};this._remove_sub_component_base=t=>{let e=this._get_sub_component(t),n=this._get_sub_component_base(t);this.__remove_sub_component_leaf_base(e,n)};this._remove_sub_component_root_base=t=>{let e=this._get_sub_component(t),n=this._get_sub_component_root_base(t);this.__remove_sub_component_leaf_base(e,n)};this.__remove_sub_component_leaf_base=(t,e)=>{for(let n of e){let[i,s]=n,a=i[i.length-1],_=i.slice(0,-1),c=t.pathGetSubComponent(_);if(c!==s){let p=c.getSubComponentParentId(a);if(p){let u=c.getSubComponent(p);u.$mountParentRoot.includes(s)&&u.removeParentRoot(s)}else c.$mountRoot.includes(s)&&c.removeRoot(s)}}};this._plug_sub_component_base=(t,e,n,i)=>{let s=0,a=[];for(let _ of e){let[c,p]=_,u=Oe([t,...c]),d=n[s]||this._leaf_frame_node[u];this._plug_leaf_frame(u,p,d,i),s++}return Tt(a)};this._plug_animate_sub_component_base=(t,e,n,i,s,a)=>this._animate_sub_component_base(t,e,n,s,a);this._animate_sub_component_base=(t,e,n,i,s)=>{let a=e.length,_=0,c=0,p=[];this._animating_sub_component_base_id.add(t);for(let u of e){let[d,m]=u,h=Oe([t,...d]),f=n[c]||this._leaf_frame_node[h],b=this._animate_leaf_frame(h,f,()=>i(h,d,m),()=>{if(_++,_===a)return this._animating_sub_component_base_id.delete(t),s()});p.push(b),c++}return e.length===0&&requestAnimationFrame(()=>{this._animating_sub_component_base_id.delete(t),s()}),Tt(p)};this._cancel_enter_animation=()=>{for(let t in this._abort_sub_component_enter_base_animation)this._cancel_enter_sub_component_animation(t)};this._abort_tree_layout_sub_component_base_animation={};this._cancel_tree_layout_animation=()=>{for(let t in S({},this._abort_tree_layout_sub_component_base_animation))this._cancel_layout_sub_component_animation(t)};this._cancel_all_layout_sub_component_animation=()=>{for(let t in S({},this._abort_tree_layout_sub_component_base_animation))this._cancel_layout_sub_component_animation(t)};this._cancel_enter_sub_component_animation=t=>{let e=this._abort_sub_component_enter_base_animation[t];e&&(e(),delete this._abort_sub_component_enter_base_animation[t])};this._cancel_all_enter_sub_component_animation=()=>{for(let t in S({},this._abort_sub_component_enter_base_animation))this._cancel_enter_sub_component_animation(t)};this._end_all_enter_sub_component_animation=()=>{for(let t in S({},this._abort_sub_component_enter_base_animation))this._end_sub_component_enter_base_animation(t)};this._cancel_leave_sub_component_animation=t=>{let e=this._abort_sub_component_leave_base_animation[t];return e?(e(),delete this._abort_sub_component_leave_base_animation[t],!0):!1};this._cancel_all_leave_sub_component_animation=()=>{for(let t in S({},this._abort_sub_component_leave_base_animation))this._cancel_leave_sub_component_animation(t)};this._cancel_layout_sub_component_animation=t=>{let e=this._abort_tree_layout_sub_component_base_animation[t];e&&(e(),delete this._abort_tree_layout_sub_component_base_animation[t])};this._get_sub_compononent_layout_layer_opacity=t=>{let e=this._spec_get_sub_component_parent_id(t),n=this._layout_path.length;if(n===0)return e?0:1;if(e){let i=this._layout_path.indexOf(t);if(i>-1)return i===this._layout_path.length-1?1:.25/(n-i);{let s=this._layout_path.indexOf(e);return s>-1?s===this._layout_path.length-1?1:.25/(n-s):0}}else return .25/n;return 1};this._reflect_sub_component_base_trait=(t,e,n,i,s)=>{let a=this._get_sub_component(e);return this.__reflect_sub_component_base_trait(t,e,a,n,i,s)};this.__reflect_sub_component_base_trait=(t,e,n,i,s,a)=>{let _=this.___reflect_sub_component_base_trait(t,e,n,i,s,a);return t4(_,p=>`${e}${p?`/${p}`:""}`)};this.___reflect_sub_component_base_trait=(t,e,n,i,s,a)=>{let{api:{text:{measureText:_}}}=this.$system,c=(u,d)=>this._leaf_style[u]&&!w0(d)?this._leaf_style[u]:Pe(this._component,d,a,_,!0);return tS(this._component,t,e,n,i,s,a,c)};this._animate_enter_tree_layout=()=>{let{api:{text:{measureText:t}}}=this.$system;this._abort_fullwindow_animation||(this._leaf_layer_offset_x=0,this._leaf_layer_offset_y=0);let e=new Set;for(let d in this._component.$subComponent)(this._animating_sub_component_base_id.has(d)||this._abort_sub_component_enter_base_animation[d]||this._abort_tree_layout_sub_component_base_animation[d])&&e.add(d);this._cancel_fullwindow_animation(),this._cancel_tree_layout_animation(),this._cancel_enter_animation();let n=J(this._component.$subComponent),i=0,s=0,a=[],_=[],c={},p=()=>{if(s===i){for(let d of a)delete this._abort_tree_layout_sub_component_base_animation[d],this._unplug_sub_component_root_base_frame(d),a.includes(d)&&(this._append_sub_component_all_root(d),this._append_sub_component_root_base(d)),this._enter_sub_component_frame(d);for(let d of _){let m=this._spec_get_sub_component_children(d),h=c[d];for(let f in h){let b=h[f];this._end_layout_sub_component_transfer_children_animation(d,f,b)}delete this._abort_tree_layout_sub_component_base_animation[d],this._layout_sub_components_commit_base(m);for(let f of m)this._append_sub_component_all_missing_root(f),delete this._abort_tree_layout_sub_component_base_animation[f],this._insert_sub_component_child(d,f)}}},u=this._order_sub_component_ids(n);for(let d of u){this._cancel_leave_sub_component_animation(d),this._measure_sub_component_base(d);let m=this._is_layout_component_layer_visible(d),h=this._spec_get_sub_component_parent_id(d),f=!h||this._layout_path.includes(h),b=this._spec_get_sub_component_children(d),{foreground:g}=this._get_sub_component_layout_layer(d),v=[],x=this._get_sub_compononent_layout_layer_opacity(d);if(!m&&b.length>0){_.push(d),i++;let I={};for(let E of b){let D=this._get_sub_component_slot_name(E);I[D]=I[D]||[],I[D].push(E)}c[d]=I;for(let E in I){let D=I[E];for(let w of D)this._measure_sub_component_base(w)}if(!e.has(d))for(let E of b)e.has(E)||(this._leave_sub_component_frame(E),this._remove_sub_component_all_root(E),this._remove_sub_component_root_base(E));for(let E in I){let D=I[E];this._animate_layout_append_children(d,D,E,()=>{s++,p()})}}if(f){a.push(d),i++;let I=this._get_sub_component_frame(d),E=this._get_sub_component_root_base(d),D,w,T=e.has(d);T||this._leave_sub_component_frame(d),this._remove_sub_component_all_root(d),this._remove_sub_component_root_base(d);let C=0;T||this._plug_sub_component_base(d,E,v,g),this._abort_tree_layout_sub_component_base_animation[d]=this._plug_animate_sub_component_base(d,E,v,g,P=>{let{$width:k,$height:M}=this.$context,U=this._layout_node[d],{x:L,y:O,width:R,height:N}=U;if(C===0){D={x:0,y:0,width:U.width,height:U.height,fontSize:14,sx:1,sy:1,opacity:1};let F=Pe(this._component,I,U,t,!0);w=this._reflect_sub_component_base_trait("",d,E,F,D)}let z=w[P];return C=(C+1)%E.length,{x:L+k/2-R/2+z.x,y:O+M/2-N/2+z.y,width:z.width/Math.abs(z.sx),height:z.height/Math.abs(z.sy),sx:z.sx,sy:z.sy,opacity:z.opacity*x,fontSize:z.fontSize}},()=>{s++,p()})}}};this._animate_leave_tree_layout=()=>{let{api:{text:{measureText:t}}}=this.$system;this._abort_fullwindow_animation||(this._leaf_layer_offset_x=0,this._leaf_layer_offset_y=0);let e=0,n=0,i=[],s={},a={},_={},c=[],p=()=>{if(n===e){for(let u of c)delete this._abort_tree_layout_sub_component_base_animation[u],this._unplug_sub_component_root_base_frame(u),this._append_sub_component_all_root(u),this._append_sub_component_root_base(u),this._enter_sub_component_frame(u);for(let u of i){let d=s[u];for(let h in d){let f=d[h];this._end_layout_sub_component_transfer_children_animation(u,h,f)}delete this._abort_tree_layout_sub_component_base_animation[u];let m=this._spec_get_sub_component_children(u);for(let h of m)delete this._abort_tree_layout_sub_component_base_animation[h],this._enter_sub_component_frame(h),this._append_sub_component_root_base(h)}}};for(let u in this._component.$subComponent){let d=this._spec_get_sub_component_parent_id(u),m=this._spec_get_sub_component_children(u),{foreground:h}=this._get_sub_component_layout_layer(u),f=[];if(!this._layout_path.includes(u)&&m.length>0){_[u]=0;let b={};for(let v of m){let x=this._get_sub_component_slot_name(v);b[x]=b[x]||[],b[x].push(v)}e++,i.push(u),s[u]=b;let g=pe(b);a[u]=g;for(let v in b){let x=b[v];this._animate_layout_sub_component_remove_children(u,v,x,()=>{_[u]++,_[u]===a[u]&&(n++,p())})}}if(!d||this._layout_path.includes(d)){e++,c.push(u);let b=this._get_sub_component_root_base(u),g=this._get_sub_component_frame(u),v=this._node[u];this._remove_sub_component_all_root(u);let x=0,I;this._plug_sub_component_base(u,b,f,h),this._abort_tree_layout_sub_component_base_animation[u]=this._plug_animate_sub_component_base(u,b,f,h,E=>{let{x:D,y:w}=this._get_node_screen_position(u),{z:T}=this._zoom;if(x===0){let M={x:0,y:0,width:v.width,height:v.height,sx:T,sy:T,opacity:1,fontSize:14},U=Ie(g,t),L=Pe(this._component,g,U,t);I=this._reflect_sub_component_base_trait("",u,b,L,M)}x=(x+1)%b.length;let C=I[E],P=this._ensure_parent_layout_layer(u),{scrollTop:k=0}=P.layer.$element;return{x:D+C.x,y:w+C.y+k,width:C.width,height:C.height,sx:C.sx,sy:C.sy,opacity:C.opacity,fontSize:C.fontSize}},()=>{n++,p()})}}};this._listen_layout_core=(t,e)=>{let n=this._listen_node(t,e);this._core_layout_core_unlisten[t]=n};this._unlisten_sub_component=t=>{let e=this._core_layout_core_unlisten[t];e()};this._sub_component_unlocked_by_drag=new Set;this._listen_node=(t,e)=>{let n=0;return e.addEventListeners([le(i=>{this._on_node_pointer_down(t,i)}),ue(i=>{this._on_node_pointer_up(t,i)}),Ye(i=>{this._on_node_pointer_enter(t,i)}),Ee(i=>{this._on_node_pointer_leave(t,i)}),qn(i=>{this._on_node_pointer_cancel(t,i)}),ae({onClick:i=>{this._on_node_click(t,i)},onDoubleClick:i=>{this._on_node_double_click(t,i)},onLongClick:i=>{this._on_node_long_click(t,i)},onLongPress:i=>{this._on_node_long_press(t,i)},onClickHold:i=>{this._on_node_click_hold(t,i)}}),DD((i,s)=>{s.preventDefault()}),ID(i=>{n++,n===1&&this._drag_enter_node(t)}),SD((i,s)=>{n--,n===0&&(s.stopPropagation(),this._drag_leave_node(t))}),Dl((i,s)=>{s.preventDefault();let{dataTransfer:a}=i,{items:_}=a;for(let c=0;c<_.length;c++){let p=_[c],{type:u,kind:d}=p;d==="string"&&u==="text/plain"&&(s.stopPropagation(),s.dataTransfer.items[c].getAsString(m=>{this._drop_text_on_node(t,m)}))}})])};this._is_point_inside_node_rect=(t,e,n)=>{let i=this._node[t],{x:s,y:a,width:_,height:c}=i;return e>=s-_/2&&e<=s+_/2&&n>=a-c/2&&n<=a+c/2};this._drag_enter_node=t=>{this._is_unit_node_id(t)&&this._is_unit_component(t)&&(this._core_component_unlocked[t]||(this._sub_component_unlocked_by_drag.add(t),this._unlock_sub_component(t)))};this._drag_leave_node=t=>{this._is_unit_node_id(t)&&this._is_unit_component(t)&&this._core_component_unlocked[t]&&this._sub_component_unlocked_by_drag.has(t)&&(this._sub_component_unlocked_by_drag.delete(t),this._lock_sub_component(t))};this._drop_text_on_node=(t,e)=>{this._is_pin_node_id(t)?this._is_type_pin_match(t,jg)&&(this._graph_debug_set_pin_value(t,`"${ds(e)}"`),this.set_pin_data(t,`"${ds(e)}"`)):this._is_unit_node_id(t)};this._listen_link=(t,e)=>e.addEventListeners([le(n=>{this._on_link_pointer_down(t,n)}),Ye(n=>{this._on_link_pointer_enter(t,n)}),Ee(n=>{this._on_link_pointer_leave(t,n)}),ae({onClick:n=>{this._on_link_click(t,n)},onDoubleClick:n=>{this._on_link_click(t,n)},onLongClick:n=>{this._on_link_long_click(t,n)},onLongPress:n=>{this._on_link_long_press(t,n)}})]);this._animate_layout_core_down=(t,e)=>{let n=this._layout_node[t];this._animate_layout_core(t,n,()=>{let{x:i,y:s}=this._get_layout_node_screen_position(t),{width:a,height:_}=this._get_node_size(t),{z:c}=this._zoom;return{x:i,y:s,width:a,height:_,sx:c,sy:c,opacity:1,fontSize:1}},e)};this._get_layout_node_screen_position=t=>{let{$width:e,$height:n}=this.$context,i=this._node[t],{x:s,y:a,width:_,height:c}=i,p=this._world_to_screen(s,a),{x:u,y:d}=p,m=this._ensure_parent_layout_layer(t),{scrollTop:h=0}=m.layer.$element,f=u-e/2,b=d-n/2;return{x:f,y:b}};this._is_sub_component_animating=t=>!!(this._animating_sub_component_base_id.has(t)||this._abort_sub_component_enter_base_animation[t]||this._abort_tree_layout_sub_component_base_animation[t]);this._leave_tree_layout=()=>{let{animate:t}=this.$props;this._pointer_up_all_pressed_pointer_id();let e=new Set;for(let n in this._component.$subComponent)this._is_sub_component_animating(n)&&e.add(n);this._cancel_fullwindow_animation(),this._cancel_tree_layout_animation(),this._tree_layout=!1,this._zoom_comp._root.$element.style.opacity="1",this._layout_comp.$element.style.pointerEvents="none",this._layout_root.children.$element.style.opacity="0",this._layout_root.layer.$element.style.overflowX="hidden",this._layout_root.layer.$element.style.overflowY="hidden";for(let n of this._layout_path){let i=this._layout_layer[n];i.children.$element.style.opacity="0",i.layer.$element.style.overflowX="hidden",i.layer.$element.style.overflowY="hidden",i.children.$element.style.overflowX="hidden",i.children.$element.style.overflowY="hidden"}for(let n in this._component.$subComponent){let i=this._spec_get_sub_component_parent_id(n),s=this._spec_get_sub_component_children(n);if(!this._layout_path.includes(n)&&s.length>0){if(!this._animating_sub_component_base_id.has(n))for(let c of s)this._measure_sub_component_base(c);for(let c of s)this._animating_sub_component_base_id.has(c)||(this._remove_sub_component_parent_root(n,c),this._remove_sub_component_root_base(c))}(!i||this._layout_path.includes(i))&&(this._measure_sub_component_base(n),e.has(n)||(this._leave_sub_component_frame(n),this._remove_sub_component_root_base(n))),this._refresh_component_children_counter(n),this._unlisten_sub_component(n),this._move_core_content_layout_to_graph(n);let{width:a,height:_}=this._get_unit_component_graph_size(n);this._resize_core_area(n,a,_),this._resize_core_selection(n,a,_)}t&&this._animate_leave_tree_layout(),this._set_minimap_to_graph()};this._set_minimap_to_graph=()=>{this._minimap&&(this._minimap.setProp("nodes",this._unit_node),this._minimap.setProp("links",this._unit_to_unit),this._minimap.tick())};this._set_minimap_to_layout=()=>{this._minimap};this._resize=(t,e)=>{let n=`${t}px`,i=`${e}px`;ga(this._zoom_comp,{width:t,height:e}),ga(this._zoom_comp_alt,{width:t,height:e}),this._multiselect_area_svg.$element.style.width=n,this._multiselect_area_svg.$element.style.height=i,this._minimap_screen&&(this._minimap_screen.setProp("width",t/this._zoom.z),this._minimap_screen.setProp("height",e/this._zoom.z)),this._tree_layout&&(this._refresh_all_layout_node_target_position(),this._layout_scroll_search_unit_into_view(),this._refresh_search_list_height_offset())};this._on_context_resize=({width:t,height:e})=>{this._resize(t,e);let n=t-this._width,i=e-this._height;this._width=t,this._height=e;let s=fh(this._zoom,n/2,i/2);this.set_zoom(s);for(let a in this._subgraph_cache)if(this._subgraph_unit_id!==a){let _=this._subgraph_cache[a],c=_.getZoom(),p=fh(c,n/2,i/2);_.setProp("zoom",p)}this._tree_layout&&(this._refresh_all_layout_node_size(),this._refresh_all_layout_node_target_position(),this._refresh_search_list_height_offset(),this._animate_all_layout_layer()),this._maybe_refresh_simulation_by_drag()};this._on_context_enabled=()=>{this._refresh_enabled()};this._on_context_disabled=()=>{this._refresh_enabled()};this._on_context_theme_changed=()=>{this._refresh_color()};this._on_context_color_changed=()=>{this._refresh_color()};this._on_focus=()=>{if(this._subgraph_graph)this._subgraph_graph.focus();else if(this._core_component_unlocked_count>0&&!this._temp_control_lock){let t=jt(this._core_component_unlocked);this._focus_sub_component(t)}else if(this._is_fullwindow){if(this._fullwindow_component_ids.length>0){let t=this._fullwindow_component_ids[0];this._focus_sub_component(t)}this._focused=!0,this._lock_control()}else this._focused=!0,this._lock_control()};this._on_blur=()=>{this._focused=!1};this._disable_input=()=>{this._input_disabled||(this._input_disabled=!0,this._disable_gamepad(),this._disable_keyboard(),this._disable_enter(),this._disable_escape(),this._disable_crud(),this._disable_cabinet(),this._disable_search(),this._disable_minimap(),this._disable_import(),this._disable_export())};this._enable_input=()=>{this._input_disabled&&(this._input_disabled=!1,this._enable_gamepad(),this._enable_keyboard(),this._enable_enter(),this._enable_escape(),this._enable_dock(),this._enable_crud(),this._enable_cabinet(),this._enable_search(),this._enable_minimap(),this._enable_import(),this._enable_export())};this._search_dock_offset_x=0;this._search_dock_offset_y=0;this._enable_dock=()=>{this._control&&this._control.addEventListeners([mt("dock-move",({dy:t=0,dx:e=0})=>{this._search_dock_offset_x=e,this._search_dock_offset_y=t}),mt("dock-leave",()=>{this._search_dock_offset_x=0,this._search_dock_offset_y=0})])};this._on_node_pointer_enter=(t,e)=>{let{pointerId:n}=e;this.__on_node_pointer_enter(t,n)};this.__on_node_pointer_enter=(t,e)=>{let n=this._pointer_id_hover_node_id[e];n||(!this._pointer_id_pressed_node_id[e]||this._pointer_id_pressed_node_id[e]===t)&&this._set_node_hovered(t,e,!0),this._is_unit_node_id(t)&&this._is_unit_component(t)&&this._core_component_unlocked_count>0&&(this._lock_all_component_but(t),this._unlock_sub_component(t))};this._on_node_pointer_leave=(t,e)=>{let{pointerId:n}=e;this.__on_node_pointer_leave(t,n)};this.__on_node_pointer_leave=(t,e)=>{if(this._pointer_id_hover_node_id[e])this._set_node_hovered(t,e,!1);else return};this._get_node_comp=t=>this._tree_layout?this._layout_core[t]:this._node_comp[t];this._commit_shift_search=()=>{this._commit_search(),this._shift_search()};this._on_node_pointer_down=(t,e)=>{let{pointerId:n,clientX:i,clientY:s}=e;this.__on_node_pointer_down(t,n,i,s)};this.__on_node_pointer_down=(t,e,n,i)=>{if(this._pointer_down[e],this._resize_node_id_pointer_id[t]===void 0)if(this._main.hasPointerCapture(e)&&this._main.releasePointerCapture(e),this._set_node_pointer_capture(t,e),this.__set_node_pressed(t,e,!0),this._search_unit_id)if(this._is_link_pin_node_id(t)){let{unitId:s}=it(t);s===this._search_unit_id&&this._commit_shift_search()}else this._search_unit_id===t&&this._commit_shift_search();else this._search_unit_datum_node_id?this._search_unit_datum_node_id===t&&this._commit_shift_search():this._hide_search()};this._on_node_pointer_move=(t,e)=>{};this._on_node_pointer_up=(t,e)=>{let{pointerId:n}=e;this.__on_node_pointer_up(t,n)};this.__on_node_pointer_up=(t,e)=>{this._release_node_pointer_capture(t,e)};this._on_node_pointer_cancel=(t,e)=>{this._on_node_pointer_up(t,e)};this._on_node_drag_start=(t,e)=>{let{clientX:n,clientY:i}=e,[s,a]=ha(this._zoom,n,i);this.__on_node_drag_start(t,s,a)};this.__on_node_drag_start=(t,e,n)=>{if(this._drag_node_id[t])return;this._set_drag_node(t,!0);let i=this._get_node_default_layer(t);this._start_graph_simulation(i);let s=this.get_node(t);s.hx=e-s.x,s.hy=n-s.y,s.fx=s.x,s.fy=s.y,this._start_drag_node_static(t),this._refresh_compatible()};this._start_static=()=>{if(!this._static){this._static=!0;for(let t in this._unit_node)this._drag_node_id[t]||this._collapsing&&(this._is_node_selected(t)||this._collapse_next_unit_id===t)||this._start_node_static(t)}};this._start_node_static=t=>{let e=this.get_node(t),{x:n,y:i}=e;this._static_position[t]={x:n,y:i},this._static_count[t]=0};this._stop_node_static=t=>{delete this._static_position[t],delete this._static_count[t]};this._stop_static=()=>{if(this._static){this._static=!1;for(let t in this._unit_node)this._drag_node_id[t]||this._stop_node_static(t)}};this._on_node_drag_move=(t,e)=>{let{clientX:n,clientY:i}=e,[s,a]=ha(this._zoom,n,i);this._node_drag_move(t,s,a)};this._node_drag_move=(t,e,n)=>{let i=this.get_node(t);i.fx=e-i.hx,i.fy=n-i.hy,i.x=i.fx,i.y=i.fy};this._on_node_drag_end=t=>{if(this.__on_node_drag_end(t),this._set_drag_node(t,!1),this._stop_drag_node_static(t),this._is_ext_node_id(t)){let e=Cy(t);this._delete_all_node_to_node_charge(t),this._delete_all_node_to_node_charge(e)}if(this._is_dropable_mode()){if(t===this._subgraph_unit_id)return;this._drop_node(t)}};this.__on_node_drag_end=t=>{delete this._drag_node_pointer_id[t];let e=this.get_node(t);e.hx=0,e.hy=0,this._node_target[t]||(e.fx=void 0,e.fy=void 0)};this._start_drag_node_static=t=>{let e=this._node_to_subgraph[t];if(this._static_subgraph_anchor[e]=this._static_subgraph_anchor[e]||{},this._static_subgraph_anchor_count[e]=this._static_subgraph_anchor_count[e]||0,!this._static_subgraph_anchor[e][t]){let n=this._subgraph_to_node[e];this._static_subgraph_anchor[e][t],this._static_subgraph_anchor_count[e]++;for(let i of n)this._is_unit_node_id(i)&&(this._static_count[i]=this._static_count[i]||0,this._static_count[i]++)}};this._stop_drag_node_static=t=>{let e=this._node_to_subgraph[t];if(this._static_subgraph_anchor[e]&&this._static_subgraph_anchor[e][t]){let n=this._subgraph_to_node[e];for(let i of n)this._is_unit_node_id(i)&&(this._static_count[i]--,this._static_position[i]=this._get_node_position(i),this._static_count[i]===0&&(delete this._static_count[i],delete this._static_position[i]));delete this._static_subgraph_anchor[e][t],this._static_subgraph_anchor_count[e]--,this._static_subgraph_anchor_count[e]===0&&(delete this._static_subgraph_anchor_count[e],delete this._static_subgraph_anchor[e])}};this._find_node=t=>{for(let e in this._node){let n=this.get_node(e);if(t(e,n))return e}return null};this._node_node_surface_distance=(t,e)=>{let n=this._node[t],i=this._node[e];return hn(n,i)};this._node_node_center_distance=(t,e)=>{let n=this._node[t],i=this._node[e];return He(n,i)};this._find_nearest_core_id=(t,e=Qn,n=(s,a)=>hn(s,a).l,i=()=>!0)=>{let s=this.get_node(t),a=null,_=1/0;for(let c in this._unit_node)if(c!==t){let p=this._node[c];if(i(c)){let u=n(s,p);u<e/this._zoom.z&&u<_&&(a=c,_=u)}}return a};this._find_inside_node_id=(t,e,n)=>{for(let i in e){let s=e[i];if(s.shape==="circle"){if(He(t,s)<=s.r+n)return i}else{let{x:a,y:_,width:c,height:p}=s;if(t.x>=a-c/2-n&&t.x<=a+c/2+n&&t.y>=_-p/2-n&&t.y<=_+p/2+n)return i}}return null};this._find_inside_core_and_pin_id=(t,e)=>{let n=this._normal_node;return this._find_inside_node_id(t,n,e)};this._find_inside_core_id=(t,e)=>this._find_inside_node_id(t,this._unit_node,e);this._find_nearest_node_id=(t,e=Qn,n=()=>!0,i=this._node)=>{let s=[],a={};for(let _ in i)if(_!==t&&n(t,_)){let{l:c}=this._node_node_surface_distance(t,_);c<e&&(s.push(_),a[_]=c)}return s=s.sort((_,c)=>a[_]-a[c]),s[0]};this._find_nearest_pin_node_id_from=(t,e=Qn,n=()=>!0)=>this._find_nearest_node_id(t,e,n,this._pin_node);this._is_pin_unit_connected=(t,e)=>{if(this._is_link_pin_node_id(t)){let{unitId:n}=it(t);return n===e}else return!!this._get_merge_by_node_id(t)[e]};this._is_unit_pin_pre_match=(t,e)=>(this._is_link_pin_node_id(e)&&!this._spec_is_link_pin_ignored(e)||this._is_merge_node_id(e))&&this._is_input_pin_node_id(e)&&this._is_pin_node_ref(e)&&!this._is_pin_unit_connected(e,t);this._is_unit_node_match=(t,e)=>this._is_unit_pin_pre_match(t,e)?this._is_unit_pin_post_match(t,e):!1;this._is_unit_link_post_match=(t,e)=>{let{unitId:n,type:i}=it(e),s=this._ref_unit_to_merge[t];return s?this._get_merge(s)[n]?!1:this._is_ref_pin_unit_type_match(e,t):!(this._is_link_pin_ref(e)&&this._pin_to_int[i][e])};this._is_unit_merge_post_match=(t,e)=>!0;this._drop_unit=t=>{let e=this._find_nearest_node_id(t,Qn,this._is_unit_node_match);e&&this._merge_pin_unit(e,t)};this._is_pin_node_match=(t,e)=>{if(this._is_unit_node_id(e))return this._is_pin_unit_match(t,e);if(this._is_link_pin_node_id(e)){if(!this._spec_is_link_pin_ignored(e)&&this._is_pin_pin_match(t,e))return!0}else if(this._is_merge_node_id(e)){if(this._is_pin_pin_match(t,e))return!0}else if(this._is_int_node_id(e)&&this._is_plug_node_match(e,t))return!0;return!1};this._drop_pin=t=>{if(this._is_link_pin_node_id(t)&&this._spec_is_link_pin_ignored(t))return;let i=this._find_nearest_node_id(t,Qn,this._is_pin_node_match,S(S({},this._node),this._exposed_int_node));i&&this.__drop_pin(t,i)};this._is_pin_active=t=>!!this._pin_to_datum[t];this._is_datum_node_match=(t,e)=>!!((this._is_link_pin_node_id(e)||this._is_merge_node_id(e))&&this._is_datum_pin_pre_match(t,e)||this._is_ext_node_id(e)&&this._is_datum_plug_match(t,e)||this._is_unit_node_id(e)&&this._is_datum_unit_pre_match(t,e));this._drop_datum=t=>{this._search_unit_datum_node_id===t&&(this._mem_remove_search_datum(),this._hide_search());let e=this._find_nearest_node_id(t,Qn,this._is_datum_node_match);e&&(this._is_pin_node_id(e)?this._move_datum_to_pin(t,e):this._is_ext_node_id(e)?this._move_datum_to_exposed_pin(t,e):this._is_unit_node_id(e)&&this._move_datum_to_empty_unit(t,e))};this._move_datum_to_empty_unit=(t,e)=>{var E,D,w,T;let{classes:n}=this.$system,{specs:i,getSpec:s}=this.$props,a=this._get_datum_value(t),_=this._get_unit_spec(e),c=Ni(a,i,n),p=s(c),u=Ri(a,i,n),{unit:{memory:d}}=u,m=this._new_unit_id(c),{valid_pin_match:h,merged_pin_ids:f,merge_pin_index:b,exposed_pin_ids:g,exposed_pin_index:v}=this._generate_identity_matches(e);this._remove_datum(t),this._state_swap_unit(e,m,c,h,f,b,g,v),d&&this._set_unit_memory(m,d);function x(C,P){let k={};for(let M=0;M<C.length;M++){let U=C[M],L=P[M];k[U]=L}return k}let I=ve(x(J((E=_.inputs)!=null?E:{}),J((D=p.inputs)!=null?D:{})),x(J((w=_.outputs)!=null?w:{}),J((T=p.outputs)!=null?T:{})));this._pod_add_unit_ghost(e,m,u,I),this._is_unit_component(m)&&this._connect_sub_component(m)};this._move_datum_to_exposed_pin=(t,e)=>{let n=this._get_datum_value(t),i=this._datum_to_pin[t],s=this._datum_to_plug[t];if(i&&this._sim_remove_pin_datum_link(t),s)s===e||this._sim_add_plug_datum_link(e,t);else{let{type:a,pinId:_}=gt(e);this._remove_datum(t),this._sim_set_pin_set_data(a,_,n)}this._pod_set_plug_data(e,n)};this._is_plug_node_match=(t,e)=>{let{type:n,pinId:i}=gt(t);return this._is_pin_node_id(e)&&this._is_plug_pin_match(n,i,e)||this._is_unit_node_id(e)&&this._is_plug_unit_match(n,i,e)?!0:!!(this._is_int_node_id(t)&&this._is_int_node_id(e)&&this._is_int_int_match(t,e))};this._refresh_plug_layer=(t,e)=>{this._refresh_node_layer(t),this._has_node(e)&&this._refresh_node_layer(e);let n=uo(t);if(this._has_node(n)){let s=Vt(n,t);this._refresh_node_layer(n),this._refresh_link_layer(s)}let i=this._plug_to_datum[t];if(i){let s=Vt(i,t);this._refresh_node_layer(i),this._refresh_link_layer(s)}};this._drop_plug=t=>{let{type:e,pinId:n,subPinId:i}=gt(t),s=Kt(e,n,i),a=De(e,n,i);if(this._ext_to_node[s])this._refresh_plug_layer(s,a);else{let _=this._find_nearest_node_id(a,Qn,this._is_plug_node_match);_?this._set_node_target(a,_):this._refresh_plug_layer(s,a)}};this._node_target={};this._target_node={};this._node_target_count=0;this._node_target_tick=()=>{for(let t in this._node_target){let e=this._node_target[t],n=this._get_node_anchor_node_id(e),i=this.get_node(t),s=this._node[n],a=s0(i,s),_=s.x-i.x,c=s.y-i.y,p=Math.abs(_),u=Math.abs(c),d=1/2*3/3;if(p>0){let m=p*a.x*d;i.fx+=m}if(u>0){let m=u*a.y*d;i.fy+=m}}};this._start_node_target_frame=()=>{let{api:{animation:{requestAnimationFrame:t}}}=this.$system;if(this._node_target_frame!==void 0)return;let e=()=>{this._node_target_tick(),this._node_target_count>0?this._node_target_frame=t(e):this._node_target_frame=void 0};e()};this._on_pin_pin_target_end=(t,e)=>{let n=this._get_pin_anchor_node_id(e);this._remove_node_target(t),this._remove_node_target(e);let i,s=this._ref_output_to_merge[n];s?i=this._merge_pin_pin(t,s):i=this._merge_pin_pin(t,n)};this._on_pin_unit_target_end=(t,e)=>{this._remove_node_target(t),this._merge_pin_unit(t,e)};this._drop_node=t=>{this._collapse_unit_id!==t&&(this._dropped_node_id.add(t),this._cancel_long_click=!0,setTimeout(()=>{this._cancel_long_click=!1},0),this._tree_layout||(this._is_unit_node_id(t)?this._drop_unit(t):this._is_pin_node_id(t)?this._drop_pin(t):this._is_datum_node_id(t)?this._drop_datum(t):this._is_plug_node_id(t)&&this._drop_plug(t)),this._dropped_node_id.delete(t))};this.temp_fixate_node=(t,e=100)=>{this._set_node_fixed(t,!0),setTimeout(()=>{this._set_node_fixed(t,!1)},e)};this._set_node_fixed=(t,e)=>{this._node_fixed[t]=e;let n=this.get_node(t);e?(n.fx=n.x,n.fy=n.y):(n.fx=void 0,n.fy=void 0);let i=this._get_node_default_layer(t);this._start_graph_simulation(rn(i-1,0,1/0))};this._set_all_node_fixed=t=>{for(let e in this._node)this._set_node_fixed(e,t)};this._set_all_unit_node_fixed=t=>{for(let e in this._unit_node)this._set_node_fixed(e,t);for(let e in this._pin_node)this._set_node_fixed(e,t)};this._refresh_all_node_fixed=()=>{for(let t in this._node)this._refresh_node_fixed(t)};this._set_node_draggable=(t,e)=>{this._node_draggable[t]=e};this._hide_core_overlay=t=>{let e=this._core_component_overlay[t];e&&(e.$element.style.display="none")};this._show_core_overlay=t=>{let e=this._core_component_overlay[t];e&&(e.$element.style.display="block")};this._hide_err_overlay=t=>{let e=this._err_overlay[t];e&&(e.$element.style.display="none")};this._show_err_overlay=t=>{let e=this._err_overlay[t];e&&(e.$element.style.display="block")};this._unlock_all_component=()=>{let{component:t}=this.$props;for(let e in t.$subComponent)this._unlock_sub_component(e)};this.unlock_sub_component=t=>{this._unlock_sub_component(t)};this._focusing_sub_component=!1;this._unlock_sub_component=t=>{let{animate:e}=this.$props;if(this._get_sub_component(t)){if(!this._core_component_unlocked[t]){this._core_component_unlocked[t]=!0,this._core_component_unlocked_count++,this._core_component_unlocked_count===1&&this._disable_input(),this._core_component_unlocked_count===1&&this._control_lock&&this._hide_control(e),this._refresh_selection_dasharray(t),this._refresh_selection_dashoffset(t),this._enable_core_frame(t),this._hide_core_overlay(t),this._focusing_sub_component=!0,this._focus_sub_component(t),this._focusing_sub_component=!1;let i=this._core_area[t];i.$element.style.display="none"}this._unlock_node(t)}};this._on_control_lock=()=>{this._temp_control_lock||this._temp_control_unlock||this._focused||this._unlock_control()};this._unlock_control=()=>{let{animate:t}=this.$props;this._control_lock&&(this._control_lock=!1,this._disable_input(),this._focusing_sub_component||this._hide_control(t))};this._enable_control_lock=()=>{this._control&&(this._control_lock_unlisten=this._control.addEventListeners([mt("lock",this._on_control_lock),mt("temp_lock",this._on_control_temp_lock),mt("temp_unlock",this._on_control_temp_unlock)]))};this._disable_control_lock=()=>{this._control_lock_unlisten&&(this._control_lock_unlisten(),this._control_lock_unlisten=void 0)};this._on_control_temp_lock=()=>{!this._disabled&&!this._is_fullwindow&&(this._temp_control_lock||this._temp_control_unlock||(this._temp_control_unlock=!0,this._unlock_control()))};this._on_control_temp_unlock=()=>{!this._disabled&&!this._is_fullwindow&&(this._temp_control_lock||this._temp_control_unlock&&(this._lock_control(),this._temp_control_unlock=!1,this.focus()))};this._lock_sub_component=(t,e=!1)=>{let{animate:n}=this.$props;delete this._core_component_unlocked[t],this._core_component_unlocked_count--,this._disable_core_frame(t),this._blur_sub_component(t),this._core_component_unlocked_count===0&&(e||(this._enable_input(),this._enable_transcend(),this._show_control(n),this._show_transcend(n)));let i=this._core_area[t];i.$element.style.display="block",this._show_core_overlay(t),this._lock_node(t),this._refresh_selection_color(t),this._refresh_selection_dasharray(t),this._refresh_selection_dashoffset(t)};this._lock_all_component=()=>{for(let t in this._core_component_unlocked)this._lock_sub_component(t)};this._lock_all_component_but=t=>{for(let e in this._core_component_unlocked)e!==t&&this._lock_sub_component(e)};this._set_node_selected=(t,e)=>{let n=this._selected_node_id[t];n&&!e?this.deselect_node(t):!n&&e&&this._select_node(t)};this._is_node_id=t=>this._is_pin_node_id(t)||this._is_unit_node_id(t);this._is_unit_node_id=t=>this._node_type[t]==="u";this._is_pin_node_id=t=>this._is_link_pin_node_id(t)||this._is_merge_node_id(t);this._is_link_pin_node_id=t=>this._node_type[t]==="p";this._is_link_input_node_id=t=>this._is_link_pin_node_id(t)&&Py(t);this._is_link_output_node_id=t=>this._is_link_pin_node_id(t)&&bd(t);this._is_input_pin_node_id=t=>this._is_link_input_node_id(t)||this._is_merge_node_id(t)&&this._is_input_only_merge(t);this._is_output_pin_node_id=t=>this._is_link_output_node_id(t)||this._is_merge_node_id(t)&&this._is_output_only_merge(t);this._is_node_selected=t=>!!this._selected_node_id[t];this._is_node_hovered=t=>!!this._hover_node_id[t];this._is_node_dragged=t=>!!this._drag_node_id[t];this._is_node_ascend=t=>!!this._ascend_node_dict[t];this._is_merge_node_id=t=>this._node_type[t]==="m";this._is_datum_node_id=t=>this._node_type[t]==="d";this._is_type_node_id=t=>this._node_type[t]==="t";this._is_err_node_id=t=>this._node_type[t]==="x";this._is_ext_node_id=t=>this._node_type[t]==="e";this._is_int_node_id=t=>this._node_type[t]==="i"||Lb(t);this._is_plug_node_id=t=>this._is_ext_node_id(t)||this._is_int_node_id(t);this._is_exposed_input_node_id=t=>this._is_plug_node_id(t)&&gt(t).type==="input";this._get_pin_datum_node_id=t=>this._is_link_pin_node_id(t)?this._pin_to_datum[t]:this._get_merge_datum_node_id(t);this._get_merge_datum_node_id=t=>{let e=this._pin_to_datum[t];return e||this._get_merge_first_datum_node_id(t)};this._get_merge_first_datum_node_id=t=>this._get_merge_first_input_datum_node_id(t)||this._get_merge_first_output_datum_node_id(t);this._get_merge_first_type_datum_node_id=(t,e)=>e==="input"?this._get_merge_first_input_datum_node_id(t):this._get_merge_first_output_datum_node_id(t);this._get_merge_first_input_datum_node_id=t=>{let e=this._merge_to_input[t];for(let n in e){let i=this._pin_to_datum[n];if(i)return i}};this._get_merge_first_output_datum_node_id=t=>{let e=this._merge_to_output[t];for(let n in e){let i=this._pin_to_datum[n];if(i)return i}};this.select_node=t=>{this._select_node(t)};this._select_node=t=>{if(!this._selected_node_id[t]){if(this._selected_node_count++,this._selected_node_id[t]=!0,this._is_unit_node_id(t))this._is_unit_component(t)&&(this._selected_component_count++,this._selected_component[t]=!0,this._mode==="none"&&(this._enable_core_resize(t),this._disable_core_touch_area(t)));else if(this._is_link_pin_node_id(t))this._selected_pin_count++;else if(this._is_datum_node_id(t))this._mode==="multiselect"||this._mode==="none"&&this._selected_node_count;else if(this._is_merge_node_id(t)){if(this._selected_pin_count++,this._mode!=="multiselect"){let e=this._get_merge_datum_node_id(t);e&&this._show_datum(e)}}else this._is_ext_node_id(t)||this._is_int_node_id(t)||this._is_err_node_id(t)&&this._hide_err_overlay(t);this._has_node(t)&&(this._refresh_node_selection(t),this._refresh_node_color(t),this._refresh_compatible()),this._mode==="info"&&this._hover_node_count===0&&(this._selected_node_count===1&&this._set_all_nodes_links_opacity(.2),this._show_node_info(t)),this._refresh_all_visible_datum()}};this._enable_core_frame=t=>{this._core_component_frame[t].setProp("disabled",!1)};this._disable_core_frame=t=>{this._core_component_frame[t].setProp("disabled",!0)};this._enable_core_resize=t=>{let e=this._core_component_resize[t];e&&e.setProp("disabled",!1)};this._disable_core_resize=t=>{let e=this._core_component_resize[t];e&&e.setProp("disabled",!0)};this._enable_core_name=t=>{let e=this._core_name[t];e.$element.style.pointerEvents="inherit",e.$element.style.userSelect="inherit"};this._disable_core_name=t=>{let e=this._core_name[t];e.$element.style.pointerEvents="none",e.$element.style.userSelect="none"};this._set_plug_name_style_attr=(t,e,n)=>{let i=this._ext_pin_name[t];i.$element.style[e]=n};this._sim_set_plug_datum=(t,e,n,i,s)=>{let a=Kt(t,e,n),_=this._plug_to_datum[a];if(_){let{datumId:c}=Ae(_);this._sim_set_datum_value(c,_,a,i)}else this._sim_add_plug_datum(t,e,n,i,s)};this._sim_add_plug_datum=(t,e,n,i,s)=>{let a=this._new_datum_id(),_=Kt(t,e,n),c=this._plug_line_vector(_),p=this._get_node_position(_);s=s!=null?s:Wn(p,Il(c,12));let u=Xe(a);this._sim_add_datum_node(a,i,s),this._sim_add_plug_datum_link(_,u);let d=this._ext_to_node[_];d&&this._refresh_pin_datum_visible(d)};this._sim_add_plug_datum_link=(t,e)=>{this._datum_to_plug[e]=t,this._plug_to_datum[t]=e,this._sim_add_datum_node_link(e,t)};this.__sim_add_plug_datum_link=(t,e,n,i)=>{let s=Kt(t,e,n);this._sim_add_plug_datum_link(s,i)};this._sim_remove_plug_datum=(t,e,n)=>{let i=Kt(t,e,n),s=this._plug_to_datum[i];this._sim_remove_plug_datum_link(t,e,n),this._sim_remove_datum(s)};this._sim_remove_plug_datum_link=(t,e,n)=>{let i=Kt(t,e,n),s=this._plug_to_datum[i];this._mem_remove_plug_datum_link(s,i),this._sim_remove_datum_link(s,i)};this._mem_remove_plug_datum_link=(t,e)=>{delete this._datum_to_plug[t],delete this._plug_to_datum[e]};this._pod_remove_exposed_pin_datum=(t,e)=>{this._pod_remove_exposed_pin_datum__template(t,e,{removePinData:this._pod.$removePinData.bind(this._pod)})};this._pod_remove_exposed_pin_datum__template=(t,e,{removePinData:n})=>{n({type:t,pinId:e})};this._enable_plug_name=t=>{this._set_plug_name_style_attr(t,"pointerEvents","inherit")};this._enable_pin_name=t=>{this._set_pin_name_style_attr(t,"pointerEvents","inherit")};this._disable_pin_name=t=>{this._set_pin_name_style_attr(t,"pointerEvents","none")};this._set_pin_name_style_attr=(t,e,n)=>{let i=this._pin_name[t];i.$element.style[e]=n};this._disable_plug_name=t=>{this._set_plug_name_style_attr(t,"pointerEvents","none")};this._enable_core_touch_area=t=>{let e=this._core_area[t];e.$element.style.pointerEvents="inherit"};this._disable_core_touch_area=t=>{let e=this._core_area[t];e.$element.style.pointerEvents="none"};this.__deselect_node=t=>{let e=this._pressed_node_id_pointer_id[t];for(let n in e)for(let i in this._selected_node_id)i!==t&&(this._node_pressed_count[i]||0)===0&&(this._collapse_node_id.has(i)||this._drag_node_pointer_id[i]===Number.parseInt(n)&&this._on_node_drag_end(i));if(this._selected_node_count--,delete this._selected_node_id[t],this._is_pin_node_id(t)&&this._selected_pin_count--,this._is_unit_node_id(t))this._is_unit_component(t)&&(this._selected_component_count--,delete this._selected_component[t],this._disable_core_resize(t),this._enable_core_touch_area(t));else if(!this._is_link_pin_node_id(t))if(this._is_merge_node_id(t)){let n=this._get_merge_datum_node_id(t);n&&this._refresh_datum_visible(n)}else this._is_datum_node_id(t)?this._refresh_datum_visible(t):this._is_err_node_id(t)&&this._show_err_overlay(t);this._refresh_compatible()};this.deselect_node=t=>{this._deselect_node(t)};this._deselect_node=t=>{this._selected_node_id[t]&&(this.__deselect_node(t),this._refresh_node_selection(t),this._refresh_node_color(t),this._mode==="info"&&this._hover_node_count===0&&(this._hide_node_info(t),this._selected_node_count===0&&this._set_all_nodes_links_opacity(1)),this._refresh_all_invisible_datum())};this._toggle_select=t=>{this._is_node_selected(t)?this.deselect_node(t):this._select_node(t)};this._select_all=()=>{let t=J(this._node);this._select_many(t)};this._select_many=t=>{for(let e of t)this._select_node(e)};this._toggle_select_all_visible=()=>{let t=[];for(let e in this._node)this._is_node_visible(e)&&t.push(e);for(let e of t)this._toggle_select(e)};this._deselect_all=()=>{Y(this._selected_node_id,(t,e)=>{this.deselect_node(e)})};this._deselect_all_but=t=>{Y(this._selected_node_id,(e,n)=>{n!==t&&this.deselect_node(n)})};this._enable_node_overlay=t=>{};this._enable_datum_overlay=t=>{let e=this._datum_overlay[t];e.$element.style.display="block"};this._disable_node_overlay=t=>{};this._disable_datum_overlay=t=>{let e=this._datum_overlay[t];e.$element.style.display="none"};this._disable_all_datum_overlay=()=>{for(let t in this._data_node)this._disable_datum_overlay(t)};this._disable_all_selected_datum_overlay=()=>{for(let t in this._data_node)this._is_node_selected(t)&&this._disable_datum_overlay(t)};this._enable_all_selected_datum_overlay=()=>{for(let t in this._data_node)this._is_node_selected(t)&&this._enable_datum_overlay(t)};this._hide_control=t=>{this._force_control_animation_false&&(this._force_control_animation_false=!1,t=!1),this._control&&this._control.hide(t)};this._show_control=t=>{this._control&&(this._force_control_animation_false&&(this._force_control_animation_false=!1,t=!1),this._control.show(t))};this._disable_frame_pointer=()=>{this._frame.$element.style.pointerEvents="none"};this._enable_frame_pointer=()=>{this._frame.$element.style.pointerEvents="inherit"};this._force_control_animation_false=!1;this._set_fullwindow_frame_off=t=>{this._disable_frame_pointer(),t?(this._main.$element.style.transition=Gn("opacity"),this._main.$element.style.opacity="1"):(this._main.$element.style.opacity="1",this._main.$element.style.transition="")};this._animate_main_opacity=(t,e)=>{let n=t,i=()=>{let s=e-n;s>1/10?(n+=s/3,this._main.$element.style.opacity=`${n}`,requestAnimationFrame(i)):this._main.$element.style.opacity=`${e}`};i()};this._set_fullwindow_frame_on=t=>{this._enable_frame_pointer(),t?(this._main.$element.style.opacity="0.25",this._main.$element.style.transform=Gn("opacity")):this._main.$element.style.opacity="0.25"};this._enter_fullwindow=(t,e)=>{let{animate:n}=this.$props;if(t=t!=null?t:n,this._is_fullwindow=!0,this._frame_out||this._disabled||(this._disable_input(),this._hide_control(t)),e.length>0){let s=to(e);this._get_sub_component(s).focus()}let i=this._order_sub_component_ids(e);if(this._fullwindow_component_set=new Set(i),this._fullwindow_component_ids=i,this._cancel_all_layout_parent_children_animation(),this._cancel_all_layout_sub_component_animation(),this._cancel_fullwindow_animation(),this._in_component_control){if(t){this._is_component_framed||this._enter_component_frame();let s=to(i);this._abort_fullwindow_animation=this._animate_enter_fullwindow(this._fullwindow_component_ids,()=>{for(let a of this._fullwindow_component_ids)this._unplug_sub_component_root_base_frame(a),this._append_sub_component_base(a);for(let a of this._fullwindow_component_ids){let _=this._spec_get_sub_component_parent_id(a);_?this._fullwindow_component_ids.includes(_)?this._couple_sub_component(a):this._append_sub_component_to_root(a):this._couple_sub_component(a),s===a&&a===s&&this._get_sub_component(s).focus()}})}else{if(this._tree_layout)for(let s of e)this._spec_get_sub_component_parent_id(s)||this._leave_sub_component_frame(s);else for(let s of e)this._leave_sub_component_frame(s);this._enter_component_frame(),this._couple_all_fullwindow_component()}if(e.length>0){let s=to(e);this._get_sub_component(s).focus()}}this._frame_out||this._set_fullwindow_frame_on(t),this._disabled||this._transcend&&this._transcend.down(t),this.dispatchEvent("enter_fullwindow",{},!1)};this._fullwindow_datum_id=null;this._enter_datum_fullwindow=t=>{this._fullwindow_datum_id=t};this._leave_datum_fullwindow=t=>{this._fullwindow_datum_id=null};this._get_node_selection_color=t=>{let e=this._selected_node_id[t],n=this._hover_node_pointer_count[t]>0,i=this._node_pressed_count[t]>0,s=this._compatible_node_id[t],a=this._unlocked_node.has(t);return s?l0:e?this._theme.selected:a?this._theme.selected:n||i?this._theme.hovered:Lt};this._get_node_selection_target_dasharray=(t,e,n)=>{let i=a=>{let _=(e+n)/2;return`${2*Math.PI*(a+_/2)/8}`},s=(a,_)=>{let c=a+e,p=_+n;return`${c/4} ${c/2} ${c/4+.01} 0 ${p/4} ${p/2} ${p/4} 0`};if(this._tree_layout){let a=this.get_layout_node(t),{width:_,height:c}=a;return s(_,c)}else{let a=this.get_node(t),{shape:_}=a;if(_==="circle"){let{r:c}=a;return i(c)}else{let{width:c,height:p}=a;return s(c,p)}}};this._get_node_selection_dasharray=(t,e,n)=>this._is_node_unlocked(t)?this._get_node_selection_target_dasharray(t,e,n):"6";this._pin_unit_ids=t=>{if(this._is_link_pin_node_id(t)){let{unitId:e}=it(t);return{[e]:!0}}else if(this._is_merge_node_id(t)){let{mergeId:e}=It(t);return this._spec_get_merge(e)}else return{}};this._should_hide_datum=t=>{var n,i,s,a;if(this._is_node_selected(t)||this._is_node_hovered(t))return!1;let e=this._datum_to_pin[t];if(e){let _=this._pin_to_ext.input[e],c=this._pin_to_ext.output[e];if(_&&this._plug_to_datum[_]||c&&this._plug_to_datum[c])return!0;if(this._is_link_pin_node_id(e)){if(this._spec_is_link_pin_ignored(e))return!0;let{unitId:p,type:u,pinId:d}=it(e);if(this._is_link_pin_ref(e)){if(u==="output")return!0;{let h=this._get_datum_tree(t);if(!["class","class literal","unit","generic"].includes(h.type))return!0}}if(this._collapsing){let h=A1(this._collapse_init_spec,p,u,d);if(h){let f=At(h);if(this._collapse_init_node_id_set.has(f))return!0}}let m=this._pin_to_merge[e];if(m){if(!this._should_show_merge_data_on_this_mode()||this._collapse_init_node_id_set.has(m))return!0;let{mergeId:h}=It(m),f=this._pin_to_datum[m],b=(n=this._pin_to_ext.input)==null?void 0:n[m],g=(i=this._pin_to_ext.output)==null?void 0:i[m];if(b)return!!this._plug_to_datum[b];if(g)return!!this._plug_to_datum[g];if(this._merge_output_count[h]===0)return!!f;if(this._merge_input_count[h]===0)return!1;let I=this._get_merge_datum_node_id(m);if(I){if(this._is_node_hovered(m)||this._is_node_selected(m)&&this._selected_node_count===this._selected_pin_count||this._is_node_hovered(I)){if(t===I)return!1}else if(this._is_node_hovered(e))return!1}return!0}return!1}else{if(!this._should_show_merge_data_on_this_mode())return!0;let p=(s=this._pin_to_ext.input)==null?void 0:s[e],u=(a=this._pin_to_ext.output)==null?void 0:a[e];if(u&&this._plug_to_datum[u])return!0;if(this._is_node_selected(e)||this._is_node_hovered(e))return!1;let{mergeId:d}=It(e),m=this._merge_output_count[d]===0,h=this._merge_input_count[d]===0;return!m&&!h}}else return!1};this._is_type_pin_match=(t,e)=>{let{specs:n}=this.$props,i=this._get_pin_type(t);return se(n,e,i)};this._is_plug_pin_match=(t,e,n)=>{var p;let{specs:i}=this.$props,{pinId:s}=(p=this._spec_get_pin_node_plug_spec(t,n))!=null?p:{};if(s===e)return!1;let a=!1,_=this._get_pin_spec(t,e),{plug:c={}}=_;for(let u in c){let d=c[u],{unitId:m,mergeId:h}=d;if(m||h){a=!0;continue}}if(this._is_link_pin_node_id(n)){if(this._spec_is_link_pin_ignored(n))return!1;let{type:u}=it(n);if(t===u){let d=this.__get_ext_pin_type(t,e),m=this._get_link_pin_type(n);return u==="input"?this._is_link_pin_ref(n)?this._is_unit_datum_type(d)?!0:se(i,d,m):se(i,d,m):se(i,m,d)}}else if(this._is_merge_node_id(n)&&(t==="input"&&!this._is_output_only_merge(n)||t==="output"&&!this._is_input_only_merge(n))){let u=this.__get_ext_pin_type(t,e),d=this._get_merge_pin_type(n,t);return t==="input"?se(i,u,d):se(i,d,u)}return!1};this._is_int_int_match=(t,e)=>{let{type:n}=lo(t),{type:i}=lo(e);return n==="input"&&i==="output"?!0:n==="output"&&i==="input"};this._get_unit_type=t=>{let e=this._get_unit_spec(t),{type:n="`U`"}=e;return pt(n)};this._is_ref_pin_unit_match=(t,e)=>{if(this._is_link_pin_node_id(t)){let{type:n}=it(t);if(n==="output")return!1;if(this._is_pin_unit_connected(t,e))return!1;{let{type:i}=it(t);return i==="input"&&this._is_ref_pin_unit_type_match(t,e)}}else return this._is_pin_unit_connected(t,e)?!1:this._is_input_only_merge(t)?this._is_ref_pin_unit_type_match(t,e):!1};this._is_ref_pin_unit_type_match=(t,e)=>{let{specs:n}=this.$props,i=this._get_pin_type(t),s=this._get_unit_type(e);return se(n,s,i)};this._is_plug_unit_match=(t,e,n)=>{let{specs:i}=this.$props;if(t==="input"&&!this._is_unit_empty(n))return!1;let s=this.__get_ext_pin_type(t,e),a=this._get_unit_type(n);return a.value==="`U`"||a.value==="`G`"?!1:se(i,a,s)};this._runtime_pin_type=(t,e)=>{let{specs:n}=this.$props,i=this._pin_to_datum[t];if(i&&e==="output"){let{datumId:s}=Ae(i),a=this._datum_tree[s];return yi(n,a)}else return this._pin_type_of_kind(t,e)};this._is_unit_datum_type=t=>!!["class","class literal","unit"].includes(t.type);this._is_link_pin_ref_link_pin_type_match=(t,e,n,i)=>{let s=this._runtime_pin_type(n,i);return this._is_pin_pin_type_match(t,e,n,i)};this._is_ref_link_pin_link_pin_type_match=(t,e,n,i)=>{let s=this._runtime_pin_type(t,e);return this._is_unit_datum_type(s)?this._is_pin_pin_type_match(t,e,n,i):!1};this._is_pin_pin_type_match=(t,e,n,i)=>{let{specs:s}=this.$props,a=this._runtime_pin_type(t,e),_=this._runtime_pin_type(n,i);return lE(s,a,e,_,i)};this._is_unit_pin_post_match=(t,e)=>{if(this._is_pin_node_ref(e)){if(this._is_link_pin_node_id(e))return this._is_unit_link_post_match(t,e);if(this._is_merge_node_id(e))return this._is_unit_merge_post_match(t,e)}else return!1};this._is_datum_plug_match=(t,e)=>{let{type:n}=gt(e);return this._is_datum_plug_type_match(t,e)};this._is_datum_plug_type_match=(t,e)=>{let{specs:n}=this.$props,i=this._get_datum_type(t),s=this._get_plug_type(e);return se(n,i,s)};this._is_datum_pin_pre_match=(t,e)=>this._datum_to_pin[t]&&!this._drag_node_id[t]&&!this._dropped_node_id.has(t)||this._is_pin_node_ref(e)&&!this._is_datum_class_literal(t)||Ub(e)&&this._is_output_only_merge(e)||bd(e)||this._is_link_pin_node_id(e)&&this._spec_is_link_pin_ignored(e)||As(e)||!this._is_datum_tree_valid(t)?!1:this._is_datum_pin_type_match(t,e);this._is_datum_unit_pre_match=(t,e)=>this._is_datum_class_literal(t)?this._is_datum_unit_type_match(t,e):!1;this._is_unit_empty=t=>{let e=this._get_unit_spec(t);return dx(e)};this._is_datum_unit_type_match=(t,e)=>{var _,c,p;let{specs:n}=this.$props,{classes:i}=this.$system,s=this._get_unit_spec(e);if(this._is_unit_empty(e)){let u=pe(s.inputs),d=pe(s.outputs),m=this._get_datum_value(t),h=Ni(m,n,i),f=Ri(m,n,i),b=Wt(n,(_=f.specs)!=null?_:{})[h],g=pe((c=b.inputs)!=null?c:{}),v=pe((p=b.outputs)!=null?p:{});return u===g&&d===v}return!1};this._get_datum_type=t=>{let{specs:e}=this.$props,{datumId:n}=Ae(t),i=this._datum_tree[n];return yi(e,i)};this._is_datum_pin_type_match=(t,e)=>{let{specs:n}=this.$props,i=this._pin_type_of_kind(e,"input"),s=this._get_datum_tree(t);return se(n,s,i)};this._get_display_node_id=()=>this._drag_count>0?J(this._drag_node_id):this._selected_node_count>0?J(this._selected_node_id):[];this._is_ext_all_datum_match=(t,e)=>{let n=!0;for(let i of e)if(n=n&&this._is_datum_plug_match(i,t),!n)break;return n};this._is_int_pin_match=(t,e)=>{let{type:n}=gt(e);if(this._is_link_pin_node_id(t))return fI(t)===n;if(this._is_merge_node_id(t)){if(this._has_input_merge(t)&&n==="input")return!0;if(this._has_output_merge(t)&&n==="output")return!0}return!1};this._is_pin_all_pin_match=(t,e)=>{let n=!0;for(let i of e)if(n=n&&this._is_pin_pin_match(t,i),!n)break;return n};this._is_all_pin_plug_match=(t,e)=>{let n=!0;for(let i of e)if(n=n&&this._is_int_pin_match(i,t),!n)break;return n};this._is_pin_all_unit_match=(t,e)=>{if(e.length>1)return!1;let[n]=e;return this._is_unit_pin_match(n,t)};this._is_pin_unit_match=(t,e)=>this._is_unit_pin_match(e,t);this._is_unit_pin_match=(t,e)=>!!(this._is_unit_pin_pre_match(t,e)&&this._is_ref_pin_unit_type_match(e,t));this._is_unit_all_pin_match=(t,e)=>{let n=!0;for(let i of e)if(n=n&&this._is_unit_pin_match(t,i),!n)break;return n};this._is_datum_all_pin_pre_match=(t,e)=>{let n=!0;for(let i of e)if(this._node_target[i]&&(n=!1),n=n&&this._is_datum_pin_pre_match(t,i),!n)break;return n};this._is_pin_all_datum_match=(t,e)=>{let n=!0;for(let i of e)if(n=n&&this._is_datum_pin_pre_match(i,t),!n)break;return n};this._is_all_node=t=>{let e=!0,n=!0,i=!0,s=!0,a={},_=!0,c=!0,p=!0,u=!0;for(let d of t){if(e=e&&this._is_pin_node_id(d),n=e&&n&&this._is_link_pin_node_id(d),i=e&&i&&this._is_pin_node_ref(d),i)if(this._is_link_pin_node_id(d)){let{unitId:f}=it(d);a[f]=!0}else{let{mergeId:f}=It(d),b=this._spec_get_merge(f),{keys:g}=fr({obj:b});for(let v of g)a[v]=!0}let m=this._is_ext_node_id(d),h=this._is_int_node_id(d);c=c&&(m||h),s=s&&this._is_datum_node_id(d),_=_&&this._is_unit_node_id(d)}return{all_pin:e,all_pin_ref:i,all_pin_ref_unit:a,all_plug_pin:c,all_ext_pin:p,all_int_pin:u,all_data:s,all_unit:_}};this._all_pin=!1;this._all_pin_ref=!1;this._all_pin_ref_unit={};this._all_ext_pin=!1;this._all_data=!1;this._all_unit=!1;this._refresh_compatible=()=>{let t=this._compatible_node_id,e=this._get_display_node_id();if(e=e.map(n=>{var i;return(i=this._pin_to_merge[n])!=null?i:n}),this._compatible_node_id={},this._compatible_node_count=0,this._mode!=="change"){if(e.length>0&&this._mode!=="multiselect"){let{all_pin:n,all_pin_ref:i,all_pin_ref_unit:s,all_plug_pin:a,all_ext_pin:_,all_int_pin:c,all_data:p,all_unit:u}=this._is_all_node(e);if(this._all_pin=n,this._all_pin_ref=i,this._all_pin_ref_unit=s,this._all_ext_pin=a,this._all_data=p,this._all_unit=u,n)if(i){for(let d in this._unit_node)s[d]||this._is_unit_all_pin_match(d,e)&&this._set_node_compatible(d);for(let d in this._pin_node)this._is_pin_all_pin_match(d,e)&&this._set_node_compatible(d)}else{for(let d in this._pin_node)this._is_pin_all_pin_match(d,e)&&this._set_node_compatible(d);for(let d in this._exposed_int_unplugged)this._is_all_pin_plug_match(d,e)&&this._set_node_compatible(d);for(let d in this._data_node)this._is_datum_all_pin_pre_match(d,e)&&this._set_node_compatible(d)}else if(u){for(let d in this._pin_node)if(this._is_input_pin_ref(d))if(this._is_link_pin_node_id(d)){let{unitId:m}=it(d);e.includes(m)||this._is_pin_all_unit_match(d,e)&&this._set_node_compatible(d)}else{let m=!0,h=this._get_merge_by_node_id(d);for(let f in h)if(e.includes(f)){m=!1;break}m&&this._set_node_compatible(d)}}else if(p){for(let d in this._pin_node)this._is_pin_all_datum_match(d,e)&&this._set_node_compatible(d);for(let d in this._exposed_ext_node)this._is_ext_all_datum_match(d,e)&&this._set_node_compatible(d);if(e.length===1){let d=e[0];for(let m in this._unit_node)this._is_datum_unit_pre_match(d,m)&&this._set_node_compatible(m)}}else if(a){if(e.length<=2){let d=e[0],{type:m,pinId:h}=gt(d);for(let f in this._unit_node)this._is_plug_unit_match(m,h,f)&&this._set_node_compatible(f);for(let f in this._pin_node)this._is_plug_pin_match(m,h,f)&&this._set_node_compatible(f)}if(c&&e.length===1){let d=e[0];for(let m in this._exposed_int_unplugged)this._is_int_int_match(m,d)&&this._set_node_compatible(m)}}}for(let n in t)this._refresh_node_fixed(n),this._refresh_node_selection(n);for(let n in this._compatible_node_id)this._refresh_node_fixed(n),this._refresh_node_selection(n)}};this._refresh_all_compatible_unit=()=>{for(let t in this._unit_node)this._refresh_node_fixed(t),this._refresh_node_selection(t)};this._refresh_all_compatible_pin=()=>{for(let t in this._pin_node)this._refresh_node_fixed(t),this._refresh_node_selection(t)};this._refresh_all_compatible_data=()=>{for(let t in this._datum)this._refresh_node_fixed(t),this._refresh_node_selection(t)};this._refresh_fixed=()=>{for(let t in this._node)this._refresh_node_fixed(t)};this._refresh_node_fixed=t=>{let e=!1;(this._drag_node_id[t]||!this._all_data&&this._compatible_node_id[t]&&(this._is_node_id(t)||this._is_int_node_id(t)))&&(e=!0),this._set_node_fixed(t,e)};this._refresh_unit_fixed=t=>{this._refresh_node_fixed(t),this._for_each_unit_pin(t,e=>{let n=this._get_pin_anchor_node_id(e);this._refresh_node_fixed(n)})};this._refresh_unit_layer=t=>{this._refresh_node_layer(t),this._for_each_unit_pin(t,e=>{this._is_link_pin_visible(e)&&this._refresh_node_layer(e);let n=qe(e);this._refresh_link_layer(n);let i=this._pin_to_datum[e];i&&this._refresh_node_layer(i)})};this._refresh_selection=()=>{for(let t in this._node)this._refresh_node_selection(t)};this._refresh_node_selection=t=>{this._refresh_selection_color(t),this._refresh_selection_dasharray(t),this._refresh_selection_dashoffset(t)};this._get_node_default_layer=t=>this._collapse_next_unit_id===t?he:this._is_unit_node_id(t)||this._is_merge_node_id(t)?Rn:this._is_link_pin_node_id(t)?this._spec_is_link_pin_ignored(t)?tr:Rn:this._is_plug_node_id(t)?Nn:this._is_datum_node_id(t)?this._linked_data_node[t]?di:xa:this._is_err_node_id(t)?er:this._is_type_node_id(t)?nr:he;this._refresh_node_layer=t=>{let e=this._get_node_default_layer(t);this._set_node_layer(t,e)};this._get_link_default_layer=t=>{let{source:e}=co(t);return this._get_node_default_layer(e)};this._refresh_link_layer=t=>{let e=this._get_link_default_layer(t);this._set_link_layer(t,e)};this._refresh_selection_color=t=>{let e=this._node_selection[t],n=this._get_node_selection_color(t);e.setProp("stroke",n)};this._refresh_selection_dasharray=t=>{let{paddingX:e=6,paddingY:n=6}=this._selection_opt[t],i=this._get_node_selection_dasharray(t,e,n);this._set_selection_dasharray(t,i)};this._refresh_selection_dashoffset=t=>{let{paddingX:e=6,paddingY:n=6}=this._selection_opt[t],i=this._get_node_selection_dashoffset(t,e,n);this._set_selection_dashoffset(t,i)};this._set_selection_dashoffset=(t,e)=>{this._node_selection[t].setProp("strokeDashOffset",e)};this._set_selection_dasharray=(t,e)=>{this._node_selection[t].setProp("strokeDasharray",e)};this._on_compatible_node_click=(t,e)=>{let n=this._get_display_node_id(),i=n.length;if(i>0){let{all_pin:s,all_pin_ref:a,all_pin_ref_unit:_,all_data:c,all_unit:p,all_plug_pin:u}=this._is_all_node(n);if(s){if(this._is_pin_node_id(t)){for(let d=0;d<i;d++)this._set_node_target(n[d],t);this._cancel_click=!0}else if(this._is_datum_node_id(t)){for(let d=1;d<i;d++){let m=this._sim_duplicate_datum(t);this._move_datum_to_pin(m,n[d])}this._move_datum_to_pin(t,n[0])}else if(this._is_unit_node_id(t)){for(let d=0;d<i;d++)this._merge_pin_unit(n[d],t);this._select_node(t)}else if(this._is_int_node_id(t)){let{type:d,pinId:m,subPinId:h}=lo(t),f=n[0];this.__plug_exposed_pin_to(d,m,h,f)}}else if(c){if(this._is_pin_node_id(t))for(let d=0;d<i;d++){let m=n[d];this._move_datum_to_pin(m,t)}else if(this._is_plug_node_id(t))for(let d=0;d<i;d++){let m=n[d];this._move_datum_to_plug(m,t)}return}else if(p){let d=n[0];this._is_pin_node_id(t)&&(this._merge_pin_unit(t,d),this._select_node(d),this._cancel_click=!0)}else if(u&&this._is_pin_node_id(t)){let d=n[0],{type:m,pinId:h,subPinId:f}=lo(d);this.__plug_exposed_pin_to(m,h,f,t)}}};this._on_non_compatible_node_click=(t,e)=>{this._core_component_unlocked_count>0?this._is_unit_node_id(t)?this._is_unit_component(t)?(this._lock_all_component_but(t),this._unlock_sub_component(t)):(this._select_node(t),this._deselect_all_but(t),this._lock_all_component_but(t)):this._is_datum_node_id(t)?this._is_datum_unlocked(t)||this._unlock_datum(t):(this._select_node(t),this._deselect_all_but(t),this._lock_all_component_but(t)):this._selected_node_count===1?(this._select_node(t),this._deselect_all_but(t)):this._select_node(t),this._edit_datum_node_id!==t&&!this._disabled&&this._control_lock&&this.focus()};this._on_node_none_click=(t,e)=>{this._compatible_node_id[t]?this._on_compatible_node_click(t,e):this._on_non_compatible_node_click(t,e)};this._on_node_multiselect_click=(t,e)=>{this._is_node_selectable(t)&&(this._selected_node_id[t]?this.deselect_node(t):this._select_node(t))};this._on_node_info_click=(t,e)=>{this._info_node(t),this._deselect_all(),this._select_node(t)};this._on_node_green_click=(t,e)=>{this._is_node_duplicatable(t)&&this._green_click_node(t)};this._on_node_blue_click=(t,e)=>{this._is_node_changeable(t)&&(this._is_unit_node_id(t)?this._on_unit_blue_click(t):this._is_link_pin_node_id(t)?this._on_link_pin_blue_click(t):this._is_datum_node_id(t)?this._on_datum_blue_click(t):this._is_plug_node_id(t)&&this._on_exposed_blue_click(t))};this._on_link_pin_blue_click=t=>{this._toggle_link_pin_constant(t)};this._on_datum_blue_click=t=>{this._change_datum(t)};this._on_exposed_blue_click=t=>{this._toggle_exposed_pin_functional(t)};this._on_node_click=(t,e)=>{if(this._cancel_node_click.has(t)){this._cancel_node_click.delete(t);return}this._resize_node_id_pointer_id[t]||(this._mode==="none"?this._on_node_none_click(t,e):this._mode==="multiselect"?this._on_node_multiselect_click(t,e):this._mode==="info"?this._on_node_info_click(t,e):this._mode==="add"?this._on_node_green_click(t,e):this._mode==="remove"?this._on_node_red_click(t,e):this._mode==="change"?this._on_node_blue_click(t,e):this._mode==="data"&&this._on_node_yellow_click(t))};this._on_node_red_click=(t,e)=>{this._is_node_removable(t)&&(this._cancel_click=!0,setTimeout(()=>{let n=this._get_node_anchor_node_id(t);this._selected_node_id[n]?this.cut_selected_nodes():this._is_link_pin_node_id(t)?this.set_link_pin_ignored(t,!0):this.cut_single_node(t)},0))};this._is_node_removable=t=>!0;this._animate_sub_component_graph_leave=(t,e,n,i,s=zt)=>this._animate_sub_component_graph_move__template(t,e,n,i,()=>{this._unplug_sub_component_base_frame(t),this._compose_sub_component(t),this._append_sub_component_base(t),this._enter_sub_component_frame(t),s()});this._animate_sub_component_graph_move__template=(t,e,n,i,s)=>{let a=this._foreground,_=0;for(let p of e){let[u]=p,d=Oe([t,...u]),m=n[_]||this._leaf_frame_node[d];this._leaf_frame_node[d]=m,_++}this._leave_sub_component_frame(t),this._animating_sub_component_base_id.has(t)||this._remove_sub_component_base(t),this._plug_sub_component_base(t,e,n,a);let c;_=0,this._abort_sub_component_leave_base_animation[t]=this._animate_sub_component_base(t,e,n,p=>{if(_===0){let{style:d,trait:m}=i();c=this._reflect_sub_component_base_trait(t,t,e,d,m)}let u=c[p];return _=(_+1)%e.length,{x:-this.$context.$x+u.x,y:-this.$context.$y+u.y,width:u.width,height:u.height,sx:u.sx,sy:u.sy,opacity:u.opacity,fontSize:u.fontSize}},s)};this._is_node_dataable=t=>this._is_unit_node_id(t)?!0:this._is_pin_node_id(t)?this._is_pin_data_able(t):this._is_datum_node_id(t)?!0:!!this._is_plug_node_id(t);this._is_node_infoable=t=>!this._is_type_node_id(t);this._spec_remove_datum=t=>{};this._spec_remove_node=t=>{this._is_unit_node_id(t)?this._spec_remove_unit(t):this._is_link_pin_node_id(t)?this._spec_set_link_pin_ignored(t,!0):this._is_merge_node_id(t)?this._spec_remove_merge(t):this._is_datum_node_id(t)?this._spec_remove_datum(t):this._is_plug_node_id(t)&&this._spec_remove_exposed_sub_pin(t)};this._get_datum_connected=t=>({datum_pin_node_id:this._datum_to_pin[t],datum_plug_node_id:this._datum_to_plug[t]});this._pod_remove_datum=(t,e,n)=>{this._pod_remove_datum__template(t,e,n,{takeInput:this._pod.$takeInput.bind(this._pod),removeMergeData:this._pod.$removeMergeData.bind(this._pod),removeUnitPinData:this._pod.$removeUnitPinData.bind(this._pod),removePinData:this._pod.$removePinData.bind(this._pod)})};this._pod_remove_datum__template=(t,e,n,{takeInput:i,removeMergeData:s,removeUnitPinData:a,removePinData:_})=>{if(e&&this._pod_remove_pin_datum__template(e,{takeInput:i,removeMergeData:s,removeUnitPinData:a}),n){let{type:c,pinId:p}=gt(n);this._pod_remove_exposed_pin_datum__template(c,p,{removePinData:_})}};this._pod_remove_node=t=>{if(this._is_unit_node_id(t)){let e=this._is_unit_component(t);this._pod_remove_unit(t,e)}else if(this._is_link_pin_node_id(t))this._pod_set_unit_pin_ignored(t,!0);else if(this._is_merge_node_id(t))this._pod_remove_merge(t);else if(this._is_datum_node_id(t)){let{datum_pin_node_id:e,datum_plug_node_id:n}=this._get_datum_connected(t);this._pod_remove_datum(t,e,n)}else this._is_plug_node_id(t)&&this._pod_remove_exposed_sub_pin(t)};this._action_buffer=[];this._action_buffer_cursor=-1;this._dispatch_action=t=>{if(this._action_buffer_cursor<this._action_buffer.length-1){let e=this._action_buffer_cursor+1,n=this._action_buffer.length-this._action_buffer_cursor+1;this._action_buffer.splice(e,n)}this._action_buffer.push(B(t)),this._action_buffer_cursor++,this._clear_type_cache_for_spec_id(this._spec.id)};this.remove_exposed_sub_pin_or_set=t=>{let{pinId:e,type:n,subPinId:i}=gt(t),s=this._get_exposed_sub_pin_spec(n,e,i);this._remove_exposed_sub_pin_or_set(t),this._dispatch_action(b1(n,e,i,s))};this._remove_exposed_sub_pin_or_set=t=>{let{pinId:e,type:n,subPinId:i}=gt(t),s=this._get_exposed_pin_set_count(t);s===1||s===0?this.__remove_exposed_pin_set(n,e):(this.__sim_remove_exposed_sub_pin(n,e,i),this.__spec_remove_exposed_sub_pin(n,e,i),this.__pod_remove_exposed_sub_pin(n,e,i))};this._state_move_plug_into_graph__remove=t=>{let{pinId:e,type:n,subPinId:i}=gt(t),s=this._get_exposed_pin_set_count(t);s===1||s===0?this._state_remove_exposed_pin_set(n,e):this.__state_remove_exposed_sub_pin(n,e,i)};this._get_exposed_pin_set_count=t=>{let{pinId:e,type:n}=gt(t),i=this._get_pin_spec(n,e),{plug:s}=i;return pe(s||{})};this._spec_remove_exposed_sub_pin=t=>{let{pinId:e,type:n,subPinId:i}=gt(t);this.__spec_remove_exposed_sub_pin(n,e,i)};this.__spec_remove_exposed_sub_pin=(t,e,n)=>{Ar({pinId:e,type:t,subPinId:n},this._spec)};this._sim_remove_exposed_sub_pin=t=>{let{type:e,pinId:n,subPinId:i}=gt(t);this.__sim_remove_exposed_sub_pin(e,n,i)};this._state_remove_exposed_sub_pin=t=>{this._sim_remove_exposed_sub_pin(t),this._spec_remove_exposed_sub_pin(t)};this.__state_remove_exposed_sub_pin=(t,e,n)=>{this.__sim_remove_exposed_sub_pin(t,e,n),this.__spec_remove_exposed_sub_pin(t,e,n)};this.__sim_remove_exposed_sub_pin=(t,e,n)=>{let i=t==="input",s=Kt(t,e,n),a=De(t,e,n),_=i?s:a,c=i?a:s,p=this._plug_to_datum[s];p&&(this._sim_remove_plug_datum_link(t,e,n),this._sim_remove_datum(p));let u=Vt(_,c);this._sim_remove_link(u),delete this._exposed_link[u];let d=this._int_to_node[a];if(d){delete this._pin_to_int[t][d],delete this._pin_to_ext[t][d],delete this._int_to_node[a];let m=this._pin_to_datum[d];m&&this._refresh_datum_visible(m)}delete this._exposed_link_start_marker[s],delete this._exposed_link_end_marker[s],this._sim_remove_exposed_ext_node(s),this._sim_remove_exposed_int_node(a)};this._sim_remove_exposed_ext_node=t=>{delete this._exposed_node[t],delete this._exposed_ext_node[t];let e=this._ext_to_node[t];delete this._ext_to_node[t],this._node_to_ext[e]&&(this._node_to_ext[e].delete(t),this._node_to_ext[e].size===0&&delete this._node_to_ext[e]),delete this._exposed_ext_unplugged[t],delete this._ext_pin_name[t],delete this._node_type[t],this._sim_remove_node_type(t),this._has_node(t)&&this._sim_remove_node(t)};this._sim_remove_exposed_int_node=t=>{delete this._exposed_node[t],delete this._exposed_int_node[t],delete this._exposed_int_unplugged[t],delete this._node_type[t],this._has_node(t)&&this._sim_remove_node(t)};this._pod_remove_exposed_sub_pin=t=>{let{type:e,pinId:n,subPinId:i}=gt(t);this.__pod_remove_exposed_sub_pin(e,n,i)};this.__pod_remove_exposed_sub_pin=(t,e,n)=>{let i=this._get_exposed_sub_pin_spec(t,e,n);this._pod.$coverPin({type:t,pinId:e,subPinId:n,subPinSpec:i})};this._set_link_pin_r=(t,e)=>{let n=this._pin[t],i=2*e,s=2*e;n.$element.style.width=`${i}px`,n.$element.style.height=`${s}px`,this._resize_node(t,i,s),this._resize_selection(t,i,s)};this._set_link_pin_d=(t,e)=>{let n=qe(t);this._set_link_d(n,e)};this._set_link_d=(t,e)=>{let n=this._link[t];n.l=e};this._set_link_pin_padding_source=(t,e)=>{let n=qe(t),i=this._link[n];i.padding.source=e};this._set_link_pin_padding_target=(t,e)=>{let n=qe(t),i=this._link[n];i.padding.target=e};this._set_link_pin_start_marker_hidden=(t,e)=>{let n=this._pin_link_start_marker[t];n.$element.style.display=e?"none":"block"};this._set_link_pin_end_marker_hidden=(t,e)=>{let n=this._pin_link_end_marker[t];n.$element.style.display=e?"none":"block"};this.set_link_pin_ignored=(t,e)=>{let{unitId:n,type:i,pinId:s}=it(t);this._set_link_pin_ignored(t,e),this._dispatch_action(x1(n,i,s,e))};this._set_link_pin_ignored=(t,e)=>{this._state_set_link_pin_ignored(t,e),this._pod_set_link_pin_ignored(t,e)};this._pod_set_link_pin_ignored=(t,e)=>{this._pin_to_merge[t]&&this._pod_remove_pin_or_merge(t);let{unitId:i,type:s,pinId:a}=it(t);this.__pod_set_unit_pin_ignored(i,s,a,e)};this._state_set_link_pin_ignored=(t,e)=>{this._pin_to_merge[t]&&this._state_remove_pin_or_merge(t);let{unitId:i,type:s,pinId:a}=it(t);this._sim_set_unit_pin_ignored(t,e),this.__spec_set_link_pin_ignored(i,s,a,e)};this._sim_set_unit_pin_ignored=(t,e)=>{let{unitId:n,type:i}=it(t),s=this._pin_to_int[i][t];if(s){let{type:p,pinId:u,subPinId:d}=lo(s);this._sim_unplug_exposed_pin(p,u,d)}let a=this._pin_to_datum[t],_=this._pin_datum_tree[t];this._spec_link_pin_ignored[t]=e;let c=qe(t);e?(this._set_node_layer(t,tr),this._set_link_layer(c,tr),this._set_link_pin_d(t,24),this._set_link_pin_opacity(t,0),this._set_link_pin_pointer_events(t,"none"),_&&this._dec_unit_pin_active(n)):(this._set_node_layer(t,Rn),this._set_link_layer(c,Rn),this._set_link_pin_d(t,24),this._set_link_pin_opacity(t,1),this._set_link_pin_pointer_events(t,"inherit"),_&&this._inc_unit_pin_active(n),t&&this._refresh_datum_visible(a)),this._refresh_node_color(t),this._start_graph_simulation(he)};this._sim_set_unit_pin_ref=(t,e)=>{let{unitId:n,type:i,pinId:s}=it(t);this._sim_refresh_link_pin(n,i,s)};this._pod_set_unit_pin_ignored=(t,e)=>{let{unitId:n,type:i,pinId:s}=it(t);this.__pod_set_unit_pin_ignored(n,i,s,e)};this.__pod_set_unit_pin_ignored=(t,e,n,i)=>{this._pod.$setUnitPinIgnored({unitId:t,type:e,pinId:n,ignored:i})};this._spec_set_link_pin_ignored=(t,e)=>{let{unitId:n,type:i,pinId:s}=it(t);this.__spec_set_link_pin_ignored(n,i,s,e)};this.__spec_set_link_pin_ignored=(t,e,n,i)=>{B1({unitId:t,type:e,pinId:n,ignored:i},this._spec)};this._spec_set_link_pin_constant=(t,e,n,i)=>{t_({unitId:t,type:e,pinId:n,constant:i},this._spec);let s=ut(t,e,n),a=this._pin_to_datum[s];if(a)if(i){let{datumId:_}=Ae(a),c=this._datum_tree[_],{value:p}=c;this._spec_set_pin_data(s,p)}else this._spec_remove_pin_data(s)};this._spec_set_link_pin_ref=(t,e,n,i)=>{tt(this._spec,["units",t,e,n,"ref"],i)};this._is_node_duplicatable=t=>this._is_link_pin_node_id(t)||this._is_unit_node_id(t)||this._is_datum_node_id(t)||this._is_plug_node_id(t)?!0:!!this._is_merge_node_id(t);this._green_click_node=t=>{if(this._is_node_selected(t))this.copy_selected_nodes(!1);else return this._is_link_pin_node_id(t)?this._duplicate_link_pin(t):(this.copy_single_node(t,!1),t);return null};this._set_unit_fixed=(t,e)=>{this._set_node_fixed(t,e),this._for_each_unit_pin(t,n=>{let i=this._get_pin_anchor_node_id(n);this._set_node_fixed(i,e)})};this._green_click_unit=t=>(this._is_node_selected(t)?this.copy_selected_nodes(!1):this.copy_single_node(t,!1),null);this._green_click_datum=()=>{};this._sim_duplicate_unit=t=>{let e=this._get_unit(t),{id:n}=e,i=this._new_unit_id(n),s=B(e),a=this._get_node_position(t),_=this._get_unit_pin_position(t),c=dn;this._spec_add_unit(i,s);let p=null;if(this._is_unit_component(i)&&(p=this._get_sub_component_target_parent_id(),this._spec_append_component(p,i)),this._sim_add_unit(i,s,a,{},_,p,c),this._is_unit_component(i)){let{width:u,height:d}=this._get_unit_component_graph_size(t);this.resize_sub_component(i,u+2,d+2)}return i};this._duplicate_link_pin=t=>(this._is_link_pin_node_id(t)&&this._spec_is_link_pin_ignored(t)&&this.set_link_pin_ignored(t,!1),null);this._sim_duplicate_datum=t=>{let{datumId:e}=Ae(t),n=this._datum_tree[e],{x:i,y:s}=this._get_node_position(t),a=this._new_datum_id(),_=Xe(a);return this.add_datum(a,n.value,{x:i,y:s}),_};this._sim_duplicate_exposed_pin=t=>{let{type:e,pinId:n,subPinId:i}=gt(t),s=Kt(e,n,i),a=Kt(e,n,i),_=this._new_sub_pin_id(e,n),c=this._get_node_position(s),p=this._get_node_position(a),u={int:xl(p),ext:xl(c)};this.add_exposed_pin(e,n,{},_,{},u);let d=Kt(e,n,_),m=De(e,n,_);this._transfer_node_position(s,d),this._transfer_node_position(a,m);let h=this._plug_to_datum[s];if(h){let f=this._get_datum_value(h);this._sim_add_plug_datum(e,n,_,f)}return d};this._transfer_node_position=(t,e)=>{this._set_node_position(e,this._get_node_position(t))};this._is_node_changeable=t=>{if(this._is_unit_node_id(t))return!0;if(this._is_link_pin_node_id(t))return!0;if(this._is_plug_node_id(t))return!0;if(this._is_datum_node_id(t)){let e=this._datum_to_pin[t];return!(e&&bd(e))}else return!!this._is_merge_node_id(t)};this._set_search_text=t=>{this._search&&this._search.setValue(t)};this._set_search_filter=t=>{this._search&&(this._search_filter=t,this._search.setProp("filter",t))};this._set_search_selected=t=>{this._search&&this._search.setProp("selected",t)};this._info_node=t=>{this._is_pin_node_id(t)?this._info_pin(t):this._is_unit_node_id(t)?this._info_unit(t):this._is_ext_node_id(t)&&this._info_ext_pin(t)};this._temp_cancel_double_click=()=>{this._cancel_double_click=!0,setTimeout(()=>{this._cancel_double_click=!1},300)};this._on_node_yellow_click=t=>{this._is_pin_node_id(t)?this._yellow_click_pin(t):this._is_unit_node_id(t)?this._yellow_click_unit(t):this._is_datum_node_id(t)?this._yellow_click_datum(t):this._is_plug_node_id(t)&&this._yellow_click_plug(t)};this._yellow_click_datum=t=>{this._copy_nodes([t],!0,()=>{})};this._yellow_long_press_datum=(t,e,n,i)=>{this._is_datum_class_literal(t)&&this._yellow_long_press_class_literal(t,e,n,i)};this._yellow_click_unit=t=>{this._copy_nodes([t],!0,()=>{})};this._yellow_long_press_class_literal=(t,e,n,i)=>{this._temp_cancel_double_click();let s=this._turn_class_literal_into_unit(t);this._force_pointer_drag_node(s,e,n,i)};this._yellow_click_plug=t=>{let{specs:e}=this.$props,n=this._get_plug_type(t,!0),i=ss(e,n);this._set_plug_data(t,i.value)};this._turn_class_literal_into_unit=t=>{let{specs:e}=this.$props,{classes:n}=this.$system,i=this._get_node_position(t),s=ve({},{}),a=dn,{datumId:_}=Ae(t),c=this._datum_tree[_],{value:p}=c,u=Ni(p,e,n),d=Ri(p,e,n),{unit:m}=d;lx(e,d.specs);let{memory:h}=m;this._remove_datum(t);let f=this._new_unit_id(u);return this._add_unit(f,d,i,s,a,null),this._set_unit_memory(f,h),this._mode==="data"&&(this._for_each_visible_unit_output(f,b=>this._set_link_pin_opacity(b,.5)),this._for_each_unit_ref_input(f,b=>this._set_link_pin_opacity(b,.5))),this.temp_fixate_node(f),this._is_unit_component(f)&&(this._sim_add_sub_component(f),this._connect_sub_component(f)),this._refresh_compatible(),f};this._info_unit=t=>{};this._show_core_description=t=>{let e=this._core_description[t];e.$element.style.display="flex"};this._hide_core_description=t=>{let e=this._core_description[t];e.$element.style.display="none"};this._info_pin=t=>{};this._info_ext_pin=t=>{};this._get_unit_input_data_valid_examples=(t,e,n)=>{let{specs:i}=this.$props;return this._get_unit_input_data_examples(t,e).filter(_=>{let c=pt(_);return se(i,c,n)})};this._get_unit_input_data_examples=(t,e)=>{let{specs:n}=this.$props,i=this._get_unit_spec_id(t);return qg(n,i,e)};this._is_pin_data_able=t=>this._is_link_input_node_id(t)||this._is_merge_node_id(t)&&!this._is_output_only_merge(t);this._yellow_click_pin=t=>{let{specs:e}=this.$props;if(this._is_pin_data_able(t)){let n,i=this._pin_datum_tree[t],s=i&&i.value,a=this._get_pin_type(t);if(this._is_link_pin_node_id(t)){let{unitId:_,pinId:c}=it(t),p=this._get_unit_input_data_valid_examples(_,c,a);if(p.length>0)p.length===1?n=p[0]:n=Zn(p);else{let u=0;do if(n=Ih(e,a),u++>3)break;while(n===s)}}else{let{mergeId:_}=It(t),c=new Set,p=new Set,u=this._get_merge_pin_type(t,"input");this._for_each_merge_pin(_,(d,m,h)=>{m==="input"&&this._get_unit_input_data_valid_examples(d,h,u).forEach(b=>c.add(b))});for(let d of c)Bg(e,d,a.value)&&p.add(d);if(p.size>0)n=p.values().next().value;else{let d=0;do if(n=Ih(e,a),d++>3)break;while(n===s)}}if(this._is_merge_node_id(t))this.set_merge_pin_data(t,n);else if(this._is_link_pin_node_id(t))this.set_unit_pin_data(t,n);else throw new ei}};this.set_merge_pin_data=(t,e)=>{let{mergeId:n}=It(t);this._state_set_merge_pin_data(t,e),this._pod_set_merge_pin_data(n,e)};this._state_set_merge_pin_data=(t,e)=>{let n=this._new_datum_id(),i=Xe(n),s=this._get_anchor_node_position(t);this._sim_add_datum_node(n,e,s),this._sim_add_datum_node_link(i,t)};this._spec_type_interface_cache={};this._on_unit_blue_click=t=>{let{specs:e}=this.$props,n=this._get_unit_spec_id(t);if(this._search_unit_id===t)return;this._search_start_unit_id=t,this._search_start_spec_id=n,this._search_start_unit_merges=B(this._get_unit_merges(t)),this._search_start_unit_plugs=B(this._get_unit_plugs(t)),this._search_start_graph_unit_spec=B(this._get_unit(t)),this._search_unit_id=t,this._search_unit_spec_id=n,this._search_unit_init_spec_id=n,this._search_unit_spec_id_changed=!1,this._set_zoom_target(t),this._is_unit_component(t)&&(this._search_start_component_index=this._sub_component_index[t]),this._search_unit_merges=this._get_unit_merges(t),this._search_unit_merged_pin_ids={input:{ref:[],data:[]},output:{ref:[],data:[]}},this._search_unit_merged_pin_index={input:{data:{},ref:{}},output:{data:{},ref:{}}},this._search_unit_exposed_pin_ids={input:{data:{},ref:{}},output:{data:{},ref:{}}},this._search_unit_exposed_pin_count={input:{data:0,ref:0},output:{data:0,ref:0}},this._search_unit_exposed_pin_index={input:{data:{},ref:{}},output:{data:{},ref:{}}};let i={input:{ref:[],data:[]},output:{ref:[],data:[]}},s={input:{ref:[],data:[]},output:{ref:[],data:[]}},a={input:{ref:0,data:0},output:{ref:0,data:0}};this._for_each_unit_pin(t,(C,P,k)=>{let M=this._pin_to_merge[C],U=this._pin_to_ext[P][C],L=this._pin_to_int[P][C],O=P==="input",N=this._is_link_pin_ref(C)?"ref":"data",z;if(M){this._search_unit_merged_pin_ids[P][N].push(k);let F=ye(P),V=this._get_merge(M),j=ro(V,t);z=this._get_merge_spec_type(j,F),this._search_unit_merged_pin_index[P][N][k]=a[P][N]}if(U){let F=this._get_plug_type(U);z=z?js(F,z):F,this._search_unit_exposed_pin_index[P][N][k]=a[P][N]}if(z&&(i[P][N].push(z),a[P][N]++),L){let{pinId:F,subPinId:V}=gt(L);this._search_unit_exposed_pin_ids[P][N][k]=[F,V],this._search_unit_exposed_pin_count[P][N]++}});let _=this._search_unit_merged_pin_ids.input.data,c=this._search_unit_merged_pin_ids.input.ref,p=_.length,u=c.length,d=this._search_unit_merged_pin_ids.output.data,m=this._search_unit_merged_pin_ids.output.ref,h=d.length,f=m.length,b=p+u,g=h+f,v=this._search_unit_exposed_pin_count.input,x=this._search_unit_exposed_pin_count.output,I=v.data,E=v.ref,D=x.data,w=x.ref;this._search_option_valid_pin_matches={};let T=this._make_compatible_search_filter(p,u,h,f,I,E,D,w,i,(C,P)=>{this._search_option_valid_pin_matches[C]=P});this._set_search_text(""),this._set_search_filter(T),this._set_search_selected(n),this._show_search()};this._make_compatible_search_filter=(t,e,n,i,s,a,_,c,p,u=(d,m)=>{})=>d=>{let{specs:m}=this.$props,h=px(m,d),f=cx(m,d),b={input:h,output:f},g=J(h),v=J(f),x={input:g,output:v},I=(j,H)=>x[j].filter(K=>{let q=b[j][K],{ref:Q}=q;return!!Q===H}),E=I("input",!1),D=I("input",!0),w=I("output",!1),T=I("output",!0),C=E.length,P=D.length,k=w.length,M=T.length,U=g.length,L=v.length,{input:O,output:R}=vv(d,m,this._spec_type_interface_cache,{}),N=E.map(j=>O[j]),z=D.map(j=>O[j]),F=w.map(j=>R[j]),V=T.map(j=>R[j]);if(C>=t+s&&P>=e+a&&k>=n+_&&M>=i+c){if(this._search_option_valid_pin_matches[d])return u(d,this._search_option_valid_pin_matches[d]),!0;{let j=s_(m,p.input.data,N),H=s_(m,p.input.ref,z),K=j.filter(Pt=>Pt.length===t+s),q=H.filter(Pt=>Pt.length===e+a);if(t+s>0&&K.length===0||e+a>0&&q.length===0)return!1;let Q=s_(m,p.output.data,F),at=s_(m,p.output.ref,V),Dt=Q.filter(Pt=>Pt.length===n+_),Et=at.filter(Pt=>Pt.length===i+c);if(n+_>0&&Dt.length===0||i+c>0&&Et.length===0)return!1;u(d,{input:{ref:q,data:K},output:{data:Dt,ref:Et}})}return!0}else return!1};this._change_datum=t=>{let{classes:e}=this.$system,{specs:n}=this.$props,{datumId:i}=Ae(t),s=this._datum_tree[i],a=s.value,_=yi(n,s),c=this._datum_to_pin[t];if(c)this._yellow_click_pin(c);else{let p;do p=Ih(n,_);while(a===p&&a!=="null");let u=Th(p),d=this._datum[t];if(u.type==="unit"){d=d;let{value:m}=u,h=Ni(m,n,e);d.setProp("id",h),d.dispatchEvent("datumchange",{data:pt(h)}),this._datum_tree[i]=u,this._refresh_class_literal_datum_node_selection(t)}else d=d,d.setProp("data",u),d.dispatchEvent("datumchange",{data:u})}this._refresh_node_color(t)};this._toggle_link_pin_constant=t=>{let e=this._is_link_pin_constant(t);this.set_link_pin_constant(t,!e)};this._toggle_link_pin_ref=t=>{};this._is_exposed_pin_functional=t=>{let{type:e,pinId:n}=gt(t);return this.__is_exposed_pin_functional(e,n)};this.__is_exposed_pin_functional=(t,e)=>{let n=this._get_pin_spec(t,e),{functional:i}=n;return!!i};this._toggle_exposed_pin_functional=t=>{let e=this._is_exposed_pin_functional(t);this._set_exposed_pin_functional(t,!e)};this.set_exposed_pin_functional=(t,e)=>{let{type:n,pinId:i}=gt(t);this._set_exposed_pin_functional(t,e),this._dispatch_action(m4(n,i,e))};this._set_exposed_pin_functional=(t,e,n=!0)=>{this._spec_set_exposed_pin_functional(t,e),this._sim_set_exposed_pin_functional(t,e),n&&this._pod_set_exposed_pin_functional(t,e)};this._spec_set_exposed_pin_functional=(t,e)=>{let{type:n,pinId:i}=gt(t);Za({type:n,pinId:i,functional:e},this._spec)};this._sim_set_exposed_pin_functional=(t,e)=>{let{type:n,pinId:i}=gt(t),s=this._get_pin_spec(n,i),{plug:a={}}=s;for(let _ in a){let c=Kt(n,i,_),p=this._exposed_link_end_marker[c];n==="input"?p.setProp("d",`${e?Ph:""}${LE}`):p.setProp("d",`${e?Ph:""}`)}};this._pod_set_exposed_pin_functional=(t,e)=>{let{type:n,pinId:i}=gt(t);this._pod.$setPinSetFunctional({type:n,pinId:i,functional:e})};this._spec_set_exposed_pin_ref=(t,e,n)=>{Qa({type:t,pinId:e,ref:n},this._spec)};this.set_link_pin_constant=(t,e)=>{this._set_link_pin_constant(t,e);let{unitId:n,type:i,pinId:s}=it(t);this._dispatch_action(v1(n,i,s,e))};this._set_link_pin_constant=(t,e,n=!0)=>{let{unitId:i,type:s,pinId:a}=it(t);this._state_set_link_pin_constant(t,e),n&&this._pod_set_link_pin_constant(i,s,a,e)};this._sim_set_link_pin_constant=(t,e)=>{let n=qe(t),i=this._link_base[n];e?(this._link_pin_constant_count++,i.$element.style.strokeDasharray="3"):(this._link_pin_constant_count--,i.$element.style.strokeDasharray="")};this._pod_set_link_pin_constant=(t,e,n,i)=>{this._pod.$setUnitPinConstant({unitId:t,type:e,pinId:n,constant:i})};this._set_link_pin_ref=(t,e)=>{let{$theme:n}=this.$context,{unitId:i,type:s,pinId:a}=it(t),_=qe(t),c=this._link_base[_],p=this._pin_link_end_marker[t],u=this._link[_];e?(this._link_pin_memory_count++,c.$element.style.strokeWidth="1px"):(this._link_pin_memory_count--,c.$element.style.strokeWidth="3px");let d=this._theme.link;this._hover_node_id[t]&&["add","remove","change"].indexOf(this._mode)>-1&&(d=ts(n,this._mode));let m=e?Ph:$E,h=e?"none":d,f=e?d:"none",b=e?"1px":"0";p.setProp("d",m),p.$element.style.fill=h,p.$element.style.stroke=f,p.$element.style.strokeWidth=b,u.padding=u.padding||{source:0,target:0},e?u.padding.target=-1:u.padding.target=-5.75,this._tick_link(_),this._spec_set_link_pin_ref(i,s,a,e)};this._on_node_double_click=(t,e)=>{let{pointerId:n}=e;this._resize_node_id_pointer_id[t]||(this._is_unit_node_id(t)?this._on_unit_double_click(t,e):this._is_pin_node_id(t)?this._on_pin_double_click(t,e):this._is_datum_node_id(t)?this._on_datum_double_click(t,e):this._is_plug_node_id(t)&&this._on_plug_double_click(t,e))};this._on_pin_double_click=(t,e)=>{if(this._mode==="none"){if(this._is_link_input_node_id(t)||this._is_merge_node_id(t)&&!this._is_output_only_merge(t)){this._is_node_selected(t)&&this.deselect_node(t);let n=this._get_pin_datum_node_id(t);if(n){let{datumId:i}=Ae(n);this._show_datum(n),this._select_node(n),this._unlock_datum(n),this._focus_datum(i,[])}else{let i=this._new_datum_id(),s=Xe(i),a=this._pin_line_position(t,24);this._add_empty_datum(i,a),this._sim_add_pin_datum_link(s,t),this._unlock_datum(s),this._focus_datum(i,[])}}}else this._on_node_click(t,e)};this._is_datum_editable=t=>!0;this._on_datum_double_click=(t,e)=>{this._mode==="none"?this._on_datum_none_double_click(t,e):this._mode==="multiselect"?this._on_datum_multiselect_double_click(t,e):this._mode==="data"?this._on_data_background_double_click(e):this._on_node_click(t,e)};this._on_plug_double_click=(t,e)=>{let{type:n,pinId:i,subPinId:s}=gt(t),a=Kt(n,i,s);if(this._mode==="none"){if(!this._plug_to_datum[a]){let c=this._new_datum_id(),p=Xe(c),u=pt(""),d=this._predict_plug_data_initial_position(t,u);this._add_empty_datum(c,d),this._sim_add_plug_datum_link(a,p)}}else this._mode==="multiselect"||this._mode};this._on_unit_double_click=(t,e)=>{this._mode==="none"?this._resize_node_id_pointer_id[t]||this._is_unit_component(t)&&(this._unlock_sub_component(t),this._focus_sub_component(t)):this._on_node_click(t,e)};this._focus_sub_component=t=>{this._get_sub_component(t).focus()};this._blur_sub_component=t=>{this._get_sub_component(t).blur()};this._is_sub_component_fullwindow=t=>this._fullwindow_component_set.has(t);this._subgraph_return_fullwindow=!1;this._subgraph_return_fullwindow_component_ids=[];this.enter_subgraph=(t,e)=>{this._enter_subgraph(t,e)};this._unplug_sub_component_root_base_frame=t=>{let e=this._get_sub_component_root_base(t);return this._unplug_base_frame(t,e)};this._unplug_sub_component_base_frame=t=>{let e=this._get_sub_component_base(t);return this._unplug_base_frame(t,e)};this._unplug_base_frame=(t,e)=>{for(let n of e){let[i,s]=n,a=Oe([t,...i]);this._leaf_frame_active[a]&&this._unplug_leaf_frame(a,s)}};this.mem_enter_subgraph=(t,e)=>{this._mem_enter_subgraph(t,e)};this._mem_enter_subgraph=(t,e)=>{this._subgraph_unlisten=e.addEventListeners([mt("leave",this._on_subgraph_leave),mt("enterunit",this._on_subgraph_enter_unit),mt("leaveunit",this._on_subgraph_leave_unit)]),this._subgraph_graph=e,this._subgraph_unit_id=t,this._subgraph_depth=1+e.get_subraph_depth()};this.dom_enter_subgraph=(t,e,n)=>{this._dom_enter_subgraph(n)};this._dom_enter_subgraph=t=>{ft(this._subgraph_graph,{opacity:"1",pointerEvents:"inherit",transition:An(t,"opacity")}),this._subgraph.$element.style.pointerEvents="inherit",this._main.$element.style.pointerEvents="none",this._main.$element.style.transition=An(t,"opacity"),this._main.$element.style.opacity="0.25"};this._dom_leave_subgraph=t=>{ft(this._subgraph_graph,{opacity:"0",pointerEvents:"none",transition:An(t,"opacity")}),this._subgraph.$element.style.pointerEvents="none",this._main.$element.style.pointerEvents="inherit",this._main.$element.style.transition=An(t,"opacity"),this._main.$element.style.opacity="1"};this._ensure_graph_and__template=(t,{color:e,fullwindow:n}={},i)=>(...s)=>{this._ensure_subgraph(t,{color:e,fullwindow:n}),i(...s)};this._ensure_subgraph=(t,{color:e,fullwindow:n}={})=>{let{specs:i,registry:s,animate:a,hasSpec:_,emptySpec:c,getSpec:p,setSpec:u,newSpec:d,deleteSpec:m,forkSpec:h,shouldFork:f,injectSpecs:b,registerUnit:g,unregisterUnit:v,newSpecId:x,typeCache:I}=this.$props,E=this._subgraph_cache[t];if(!E){let D=this._get_sub_component(t);D||(D=mh({},this.$system));let w=this._get_subgraph_pod(t);E=new ir({graph:w,style:{color:e,opacity:"0",pointerEvents:"none",transition:An(a,"opacity")},disabled:!0,parent:this,frame:this._frame,frameOut:this._frame_out,fullwindow:n,component:D,registry:s,typeCache:I,specs:i,hasSpec:_,emptySpec:c,getSpec:p,setSpec:u,newSpec:d,deleteSpec:m,forkSpec:h,injectSpecs:b,registerUnit:g,shouldFork:f,unregisterUnit:v,newSpecId:x},this.$system),this.cache_subgraph(t,E)}return E};this._enter_subgraph=(t,e,n)=>{let{specs:i}=this.$props,{api:{text:{measureText:s}}}=this.$system,{animate:a}=this.$props;e!==void 0&&(a=e),this._force_control_animation_false=!0;let _=this._get_unit(t),{id:c}=_;if(xd(i,c))return;let p=this._get_color();for(let v in this._selected_component)this._disable_core_resize(v);let u=this._is_unit_component(t),d=!1,m=this._get_sub_component(t),h=!!this._abort_sub_component_leave_base_animation[t];if(u&&(this._cancel_enter_sub_component_animation(t),this._cancel_leave_sub_component_animation(t),this._animating_sub_component_fullwindow.has(t)&&(this._cancel_fullwindow_animation(),this._end_leave_fullwindow_animation([t]),this._animating_sub_component_base_id.delete(t)),this._is_sub_component_fullwindow(t)&&(d=!0),!n)){n={};for(let v in m.$subComponent){let I=m.$subComponent[v].getRootBase(),E=[];for(let D of I){let[w,T]=D,C=Ie(T,s);C.x-=this.$context.$x,C.y-=this.$context.$y,E.push(C)}n[v]={base:I,base_node:E}}}this._is_fullwindow&&(this._subgraph_return_fullwindow=!0,this._subgraph_return_fullwindow_component_ids=this._fullwindow_component_ids,this._leave_all_fullwindow(!0,zt));let f=this._animating_sub_component_base_id.has(t);if(u)if(f){this._unplug_sub_component_root_base_frame(t),this._cancel_layout_sub_component_animation(t),this._uncollapse_sub_component(t),this._cancel_enter_sub_component_animation(t);let v=this._get_sub_component(t);this._unplug_leaf_frame(t,v);let x=this._get_sub_component_base(t);this._unplug_base_frame(t,x)}else this._decompose_sub_component(t),this._leave_sub_component_frame(t);let b=this._ensure_subgraph(t,{color:p,fullwindow:d});this._mem_enter_subgraph(t,b),this._disable_input(),this._disable_transcend(),this._hide_transcend(a);let g=!h;b.setProp("disabled",!1),b.focus(),b.enter(a,n,!f,g),this._dom_enter_subgraph(a),setTimeout(()=>{},an*1e3),this.dispatchEvent("enterunit",{},!1)};this._in_component_control=!1;this._take_component_control=()=>{var t,e;if(!this._in_component_control)if(this._in_component_control=!0,this._is_fullwindow)this._enter_component_frame(),this._couple_all_fullwindow_component();else for(let n in(e=(t=this._spec)==null?void 0:t.component)==null?void 0:e.subComponents)this._animating_sub_component_base_id.has(n)||this._enter_sub_component_frame(n)};this._lose_component_control=()=>{if(this._in_component_control)if(this._in_component_control=!1,this._is_fullwindow)this._decouple_all_fullwindow_component(),this._leave_component_frame();else for(let t in this._component.$subComponent)this._animating_sub_component_base_id.has(t)||this._leave_sub_component_frame(t)};this._end_sub_component_enter_base_animation=t=>{this._unplug_sub_component_base_frame(t),this._append_sub_component_root_base(t),this._in_component_control&&this._enter_sub_component_frame(t),delete this._abort_sub_component_enter_base_animation[t]};this._animate_enter=(t={},e,n=!0)=>{let{api:{text:{measureText:i}}}=this.$system,s=this._foreground;this._leaf_layer_offset_x=0,this._leaf_layer_offset_y=0;let a=J(this._component.$subComponent),_=[...this._order_sub_component_ids(a)];for(let c of _){let p=this._get_sub_component_frame(c);if(!t[c])continue;let{base:u,base_node:d}=t[c],m=0;for(let v of u){let[x]=v,I=Oe([c,...x]),E=d[m];this._leaf_frame_node[I]=E,m++}e?this._animating_sub_component_base_id.has(c)||this._remove_sub_component_root_base(c):n&&this._get_sub_component(c).$primitive&&this._uncollapse_sub_component(c);let h=Ie(p,i),f=Pe(this._component,p,h,i),b=this._reflect_sub_component_base_trait("",c,u,f,h),g=u.length;m=0,this._animating_sub_component_base_id.has(c)||this._plug_sub_component_base(c,u,d,s),this._abort_sub_component_enter_base_animation[c]=this._plug_animate_sub_component_base(c,u,d,s,v=>{if(m===0){let I=Ie(p,i),E=Pe(this._component,p,I,i);b=this._reflect_sub_component_base_trait("",c,u,E,I)}let x=b[v];return m=(m+1)%g,{x:-this.$context.$x+x.x,y:-this.$context.$y+x.y,width:x.width,height:x.height,sx:x.sx,sy:x.sy,opacity:x.opacity,fontSize:x.fontSize}},()=>{this._end_sub_component_enter_base_animation(c)})}};this.enter=(t,e={},n=!0,i=!0)=>{this._force_control_animation_false=!0,t&&this._animate_enter(e,n,i),this._take_component_control(),this.$mounted&&this._flush_debugger(),setTimeout(()=>{this._force_control_animation_false=!1},0)};this._get_base_trait=t=>{let{api:{text:{measureText:e}}}=this.$system,n=[];for(let s of t){let[a,_]=s,c=Ie(_,e);c.x-=this.$context.$x,c.y-=this.$context.$y,n.push(c)}return{sub_base:t,sub_base_node:n}};this._get_all_sub_component_root_base_trait=()=>{let t=this._component.getRootBase();return this._get_base_trait(t)};this._get_all_sub_component_base_trait=()=>{let t=this._component.getBase();return this._get_base_trait(t)};this.leave=t=>{let{animate:e}=this.$props;if(this._cancel_all_enter_sub_component_animation(),this._subgraph_unit_id)this._subgraph_graph.leave(t);else{let{parent:n}=this.$props;if(this._force_control_animation_false=!0,n){let{units:i,links:s,merges:a,data:_,inputs:c,outputs:p}=this._segregate_node_id(this._pressed_node_id_pointer_id);t=t||this._get_all_sub_component_base_trait();for(let d in this._component.$subComponent)this._animating_sub_component_base_id.has(d)&&this._unplug_sub_component_root_base_frame(d),this._abort_sub_component_enter_base_animation[d]&&(this._cancel_enter_sub_component_animation(d),this._unplug_sub_component_base_frame(d)),this._cancel_layout_sub_component_animation(d);let u=this._zoom.z;this._lose_component_control(),this._disable_transcend(),this._hide_transcend(e),this._animating_sub_component_base_id=new Set,this.dispatchEvent("leave",{clipboard:{units:i,links:s,merges:a,data:_,inputs:c,outputs:p},component:t,scale:u},!1)}else if(this._tree_layout)return}};this._can_leave=()=>{let{parent:t}=this.$props;return this._tree_layout?!1:!!t||this._unit_count>1||this._exposed_pin_set_count>0||this._link_pin_constant_count>0||this._link_pin_memory_count>0};this._on_subgraph_leave=({clipboard:{units:t,data:e},component:{sub_base:n,sub_base_node:i}})=>{this._leave_subgraph(n,i)};this._on_subgraph_enter_unit=()=>{this._subgraph_depth++,this._refresh_main_opacity()};this._on_subgraph_leave_unit=()=>{this._subgraph_depth--,this._refresh_main_opacity()};this._refresh_main_opacity=()=>{let t=0;this._subgraph_depth<4&&(t=Math.pow(.25,this._subgraph_depth)),this._main.$element.style.opacity=`${t}`};this.leave_subgraph=()=>{this._leave_subgraph()};this._leave_subgraph=(t=[],e=[])=>{let{api:{text:{measureText:n}}}=this.$system,{animate:i}=this.$props;if(this._subgraph_graph&&this._subgraph_unit_id){this._force_control_animation_false=!0;let s=this._subgraph_unit_id;this._subgraph_unlisten(),this._subgraph_depth=0,this._subgraph_graph.setProp("disabled",!0),this._dom_leave_subgraph(i),this._refresh_main_opacity(),this._subgraph_graph=null,this._subgraph_unit_id=null;for(let a in this._selected_component)this._enable_core_resize(a);if(this._is_unit_component(s)){this._enter_sub_component_frame(s);let a=this._get_sub_component_frame(s);i?this._animate_sub_component_graph_leave(s,t,e,()=>{let _=Ie(a,n);return{style:Pe(this._component,a,_,n),trait:_}}):this._compose_sub_component(s)}this._subgraph_return_fullwindow&&(this._enter_fullwindow(!1,this._subgraph_return_fullwindow_component_ids),this._subgraph_return_fullwindow=!1,this._subgraph_return_fullwindow_component_ids=[]),this._enabled()&&(this._enable_transcend(),this._show_transcend(i),this.focus()),this.dispatchEvent("leaveunit",{},!1)}};this._is_component_framed=!1;this._enter_component_frame=()=>{this._frame.appendChild(this._component),this._is_component_framed=!0};this._leave_component_frame=()=>{this._frame.removeChild(this._component),this._is_component_framed=!1};this._enter_sub_component_frame=t=>{let e=this._get_sub_component(t);this._core_component_frame[t].appendChild(e)};this._leave_sub_component_frame=t=>{let e=this._get_sub_component(t);this._core_component_frame[t].removeChild(e)};this._refresh_all_layout_layer_opacity=()=>{let t=this._layout_path.length;if(t>0){for(let e=0;e<t-1;e++){let n=this._layout_path[e],i=this._layout_layer[n];i.children.$element.style.opacity=`${.25/(t-1-e)}`}this._layout_root.children.$element.style.opacity=`${.25/t}`}};this._append_sub_component_base=t=>this.__commit_sub_component_base(t,(e,n)=>{let i=this._get_sub_component_slot_name(t),s=e.$parentRoot.indexOf(n);e.insertParentRootAt(n,s,i)},(e,n)=>{let i=e.$root.indexOf(n);e.insertRootAt(n,i)});this._append_sub_component_root_base=t=>this.__commit_sub_component_root_base(t,(e,n)=>{let i=this._get_sub_component_slot_name(t),s=e.$parentRoot.indexOf(n);e.insertParentRootAt(n,s,i)},(e,n)=>{let i=e.$root.indexOf(n);e.insertRootAt(n,i)});this.__commit_sub_component_base=(t,e,n)=>{let i=this._get_sub_component_base(t);return this._commit_sub_component_base__template(t,i,e,n)};this.__commit_sub_component_root_base=(t,e,n)=>{let i=this._get_sub_component_root_base(t);return this._commit_sub_component_base__template(t,i,e,n)};this._append_sub_component_all_root=t=>{this._get_sub_component(t).appendAllRoot()};this._append_sub_component_all_missing_root=t=>{this._get_sub_component(t).appendAllMissingRoot()};this._remove_sub_component_all_root=t=>{this._get_sub_component(t).removeAllRoot()};this._commit_sub_component_base__template=(t,e,n,i)=>{let s=this._get_sub_component(t);for(let a of e){let[_,c]=a,p=_[_.length-1],u=_.slice(0,-1),d=s.pathGetSubComponent(u);if(d!==c){let m=d.getSubComponentParentId(p);if(m){let h=d.getSubComponent(m);h.$mountParentRoot.includes(c)||n(h,c)}else d.$mountRoot.includes(c)||i(d,c)}}};this._layout_sub_components_commit_base=t=>{for(let e of t)this._append_sub_component_root_base(e)};this._layout_enter_sub_component=t=>{let{animate:e}=this.$props,n=this._ensure_parent_layout_layer(t);this._layout_path.push(t);let i=this._ensure_layout_layer(t),s=this._spec_get_sub_component_children(t);this._refresh_layout_node_target_position(t);let a=this._layout_node[t],{x:_,y:c,width:p,height:u}=a;e&&this._animate_layout_enter_sub_component(t,s,_,c,p,u),n.layer.$element.style.overflowY="hidden",n.children.$element.style.overflowY="hidden",this._refresh_all_layout_layer_opacity(),n.children.$element.style.pointerEvents="none",n.layers.$element.style.pointerEvents="inherit",i.layer.$element.style.overflowX="hidden",i.layer.$element.style.overflowY="auto",i.layer.$element.style.pointerEvents="inherit",i.children.$element.style.pointerEvents="inherit",i.children.$element.style.overflowX="initial",i.children.$element.style.overflowY="initial",i.children.$element.style.opacity="1"};this._layout_leave_sub_component=()=>{let{animate:t}=this.$props,e=this._get_current_layout_layer_id(),n=this._spec_get_sub_component_children(e);this._layout_path.pop();let i=this._get_current_layout_layer_id(),s=i?this._layout_layer[i]:this._layout_root,a=this._layout_layer[e];if(a.layer.$element.style.overflowX="hidden",a.layer.$element.style.overflowY="hidden",a.children.$element.style.opacity="0",a.children.$element.style.overflowY="initial",a.children.$element.style.overflowX="initial",s.children.$element.style.opacity="1",s.layer.$element.style.overflowY="auto",s.layer.$element.style.overflowX="auto",s.children.$element.style.overflowX="initial",s.children.$element.style.overflowY="initial",this._refresh_all_layout_layer_opacity(),s.children.$element.style.pointerEvents="inherit",s.layers.$element.style.pointerEvents="none",t){let _={};for(let c of n){let p=this._get_sub_component_slot_name(c);_[p]=_[p]||[],_[p].push(c),this._measure_sub_component_base(c)}this._measure_sub_component_base(e);for(let c of n)this._animating_sub_component_base_id.has(c)||(this._leave_sub_component_frame(c),this._remove_sub_component_root_base(c));for(let c in _){let p=_[c];this._animate_layout_append_children(e,p,c,()=>{this._end_layout_sub_component_transfer_children_animation(e,c,p);for(let u of n)this._insert_sub_component_child(e,u);this._layout_sub_components_commit_base(n)})}for(let c of n)this._animate_layout_core_target(c,e,this._layout_node[c],()=>{})}};this._ensure_layout_layer=t=>{if(t===null)return this._layout_root;let e=this._layout_layer[t];if(!e){e=this._create_layout_layer({className:"graph-layout-layer",style:{}});let n=this._spec_get_sub_component_parent_id(t);this._ensure_parent_layout_layer(t).layers.appendChild(e.layer),this._layout_layer[t]=e}return e};this._is_component_parent=t=>this._get_component_children_count(t)>0;this._get_layout_layer_selected_count=()=>{let t=0,e=this._get_current_layout_layer_id();if(e)for(let n in this._selected_component)this._spec_get_sub_component_parent_id(n)===e&&t++;else for(let n in this._selected_component)this._spec_get_sub_component_parent_id(n)||t++;return t};this._on_node_long_click=(t,e)=>{let{pointerId:n}=e;if(!this._collapse_pointer_to_unit[n]){if(this._cancel_node_long_click){this._cancel_node_long_click=!1;return}this._tree_layout?this._mode==="none"&&this._layout_enter_sub_component(t):this._is_unit_node_id(t)?!this._resize_node_id_pointer_id[t]&&!this._animating_unit_explosion.has(t)&&(this._mode==="none"?this._is_unit_base(t)||this._enter_subgraph(t):this._mode==="multiselect"||this._mode==="info"&&(this._tree_layout||this._is_unit_base(t)||this._enter_subgraph(t))):this._is_link_pin_node_id(t)&&this._mode}};this._on_unit_long_click=t=>{};this._on_link_pin_long_press=t=>{this._mode==="none"||this._mode==="multiselect"||this._mode==="data"||this._mode==="add"||this._mode==="remove"||this._mode==="change"&&this._toggle_link_pin_ref(t)};this._long_press_append_sub_component_children=(t,e,n="default")=>{this.move_sub_component_root(t,e,n)};this._get_sub_components_slot_map=t=>{let e={};for(let n of t){let i=this._get_sub_component_slot_name(n);e[i]=n}return e};this._get_sub_components_parent_map=t=>{let e={};for(let n of t){let i=this._spec_get_sub_component_parent_id(n);e[i]=n}return e};this.move_sub_component_root=(t,e,n="default")=>{this._move_sub_component_root(t,e,n);let i=this._get_sub_components_slot_map(e),s=this._get_sub_components_parent_map(e),a=n4(e,n);this._dispatch_action(ms(t,s,e,a,i))};this._move_sub_component_root=(t,e,n="default",i=!0)=>{let{animate:s}=this.$props;this._ensure_layout_layer(t);let a=this._get_current_layout_layer_id();if(s=s&&!this._is_layout_component_layer_visible(t),s){let _=this._spec_get_sub_component_children(t),c=this._get_sub_component(t),p=_.filter(d=>{let m=this._get_sub_component(d);return!!c.$mountParentRoot.includes(m)}),u=[...p,...e];this._measure_sub_component_base(t);for(let d of u)this._measure_sub_component_base(d);for(let d of e){let m=this._get_sub_component(d);this._cancel_layout_sub_component_animation(d);let h=this._spec_get_sub_component_parent_id(d);h?this._get_sub_component(h).pullParentRoot(m):this._component.pullRoot(m),this._pre_append_sub_component_child(t,d,n)}for(let d of u)this._animating_sub_component_base_id.has(d)||this._remove_sub_component_root_base(d);for(let d of p)this._animating_sub_component_base_id.has(d)||this._remove_sub_component_parent_root(t,d);for(let d of e)this._animating_sub_component_base_id.has(d)||this._leave_sub_component_frame(d);this._animate_layout_append_children(t,u,n,()=>{this._end_layout_sub_component_transfer_children_animation(t,n,u);for(let d of p)this._insert_sub_component_child(t,d);for(let d of e)this._insert_sub_component_child(t,d);this._layout_sub_components_commit_base(u),this._animate_all_current_layout_layer_node()});for(let d of e)this._animate_layout_core_anchor(d,this._layout_node[d],()=>{this._layout_layer_move_sub_component_child(a,t,d)})}if(!s){for(let _ of e){let c=this._spec_get_sub_component_parent_id(_);this._layout_layer_move_sub_component_child(c,t,_),this._is_layout_component_layer_visible(t)||this._insert_sub_component_child(t,_)}for(let _ of e){let c=this._get_sub_component(_),p=this._spec_get_sub_component_parent_id(_);p?this._get_sub_component(p).pullParentRoot(c):this._component.pullRoot(c),this._pre_append_sub_component_child(t,_,n),this._refresh_layout_node_target_position(p),this._force_layout_node_traits(p)}this._refresh_layout_node_target_position(t),this._force_layout_node_traits(t)}};this._mem_append_sub_component_child=(t,e,n)=>{};this._pre_append_sub_component_child=(t,e,n)=>{this._state_pre_append_sub_component_child(t,e,n),this._pod_move_sub_component_root(t,[e],{[e]:n})};this._state_pre_append_sub_component_child=(t,e,n)=>{let i=this._is_sub_component_fullwindow(e);i&&this._decouple_sub_component(e),this._mem_push_sub_component_child(t,e,n),this._spec_append_sub_component_child(t,e,n),i&&this._couple_sub_component(e)};this._animate_enter_fullwindow=(t,e)=>{let{api:{text:{measureText:n}}}=this.$system;this._animating_enter_fullwindow=!0;let i=[];for(let g of t){this._animating_sub_component_fullwindow.has(g)||this._measure_sub_component_base(g);let{base:v}=this._get_sub_component_base_trait(g);i=[...i,...v]}let s=this._component.getFontSize(),a=1,_=1,c=this._frame.$slot.default,p,u=i.length,d=t.length,m=0,h=0,f=[],b=this._get_fullwindow_foreground();this._leaf_layer_offset_x=0,this._leaf_layer_offset_y=0,this._frame_out&&(this._leaf_layer_offset_x=this.$context.$x,this._leaf_layer_offset_y=this.$context.$y);for(let g of t){let v=this._spec_get_sub_component_parent_id(g);if(!this._animating_sub_component_base_id.has(g)&&!this._animating_sub_component_fullwindow.has(g))if(this._tree_layout)if(v){let x=this._get_current_layout_layer_id(),I=this._is_layout_component_layer_visible(v);v===x?this._leave_sub_component_frame(g):this._remove_sub_component_parent_root(v,g)}else this._leave_sub_component_frame(g);else this._leave_sub_component_frame(g)}for(let g of t){let v=this._get_sub_component_root_base(g);this._animating_sub_component_fullwindow.has(g)||(this._remove_sub_component_root_base(g),this._plug_sub_component_base(g,v,[],b)),this._animating_sub_component_fullwindow.add(g);let x=this._plug_animate_sub_component_base(g,v,[],b,I=>{if(h===0){let D=sa(this._frame.$element,this._frame.$context.$element),w=iE(c.$element),T=Ie(this._frame,n),C=this._frame.$context.$x+D.x,P=this._frame.$context.$y+D.y,k={x:C,y:P,width:w.width,height:w.height,sx:a,sy:a,opacity:_,fontSize:s},M=Pe(this._component,c,T,n);p=this.___reflect_sub_component_base_trait("","",this._component,i,M,k)}let E=p[I];return h=(h+1)%u,{x:E.x-this.$context.$x,y:E.y-this.$context.$y,width:E.width,height:E.height,sx:E.sx,sy:E.sy,opacity:E.opacity,fontSize:E.fontSize}},()=>{if(m++,m===d){for(let I of t)this._animating_sub_component_fullwindow.delete(I);this._animating_enter_fullwindow=!1,e()}});f.push(x)}return Tt(f)};this._measure_all_sub_component_base=t=>{for(let e of t)this._measure_sub_component_base(e)};this._animate_leave_fullwindow=(t,e,n)=>{let{api:{text:{measureText:i},layout:{reflectChildrenTrait:s}}}=this.$system,a=[],_=t.length,c=0,p={},u={},d={},m={},h={},f={};for(let I of t){this._animating_sub_component_fullwindow.has(I)||this._measure_sub_component_base(I);let E=this._spec_get_sub_component_parent_id(I),D=this._get_component_sub_component_root_base(I),w=this._get_sub_component_frame(I),T=Ie(w,i),C=Pe(this._component,w,T,i);if(h[I]=C,f[I]=T,this._tree_layout){let P=this._is_layout_component_layer_visible(E);if(E&&!P)if(P)m[I]=m[I]||[],m[I]=[...m[I],...D];else{let k=this._get_sub_component_slot_name(I);d[E]=d[E]||{},d[E][k]=d[E][k]||[],d[E][k]=[...d[E][k],...D],p[I]=E,u[E]=u[E]||[],u[E].push(I)}else m[I]=m[I]||[],m[I]=[...m[I],...D]}else m[I]=m[I]||[],m[I]=[...m[I],...D]}let b={},g=Ie(this._frame,i),v=I=>{let[E,D]=I,w=Oe(E),T=w0(D),C=this._leaf_style[w];if(C&&!T)return C;{let P=Pe(this._component,D,g,i);return this._leaf_style[w]=P,P}},x=()=>{let{z:I}=this._zoom;for(let E in m){let D=m[E],w=this._get_sub_component_frame(E),T=Ie(w,i),C=Pe(this._component,w,T,i),P=D.map(v),k=s(T,C,P,[],U=>{let L=D;for(let R of U){let N=L[R],[z,F]=N;L=F.$mountParentChildren.reduce((V,j)=>[...V,...j.getRootBase()],[])}return L.map(v)}),M=0;for(let[U]of D){let L=k[M],O={x:-this.$context.$x+L.x,y:-this.$context.$y+L.y,width:L.width,height:L.height,sx:L.sx,sy:L.sy,opacity:L.opacity,fontSize:L.fontSize},R=Oe(U);b[R]=O,M++}}for(let E in d){let D=this._get_sub_component(E),w=d[E]||{};for(let T in w){let C=w[T],P=[E],k=D,M=T;for(;k;){let H=k.getSlotSubComponentId(M),K=k.$slotTarget[M];if(H){let q=k.getSubComponentParentId(H);P.push(H),k=k.getSubComponent(H),M=K}else break}let U=P.join("/"),L=D.getSlot(T),O=this._get_sub_component_frame(E),R=Ie(O,i),N=Pe(this._component,L,R,i),z=b[U],F=C.map(([H,K])=>{let q=Oe(H);return this._leaf_style[q]||Pe(this._component,K,R,i)}),V=s(z,N,F,[],H=>[]),j=0;for(let[H]of C){let K=V[j],q={x:-this.$context.$x+K.x,y:-this.$context.$y+K.y,width:K.width,height:K.height,sx:K.sx,sy:K.sy,opacity:K.opacity,fontSize:K.fontSize},Q=Oe(H);b[Q]=q,j++}}}};for(let I of t)!this._animating_sub_component_base_id.has(I)&&!this._animating_sub_component_fullwindow.has(I)&&(this._remove_sub_component_root_base(I),this._remove_sub_component_all_root(I));this._animating_enter_fullwindow||this._component.decompose();for(let I of t){this._tree_layout&&this._collapse_sub_component(I);let E=this._get_sub_component_root_base(I),D=this._get_fullwindow_foreground();this._animating_sub_component_fullwindow.add(I);let w=0,T=E.length;this._plug_sub_component_base(I,E,[],D);let C=this._plug_animate_sub_component_base(I,E,[],D,P=>{w===0&&x();let k=b[P];return w=(w+1)%T,k},()=>{if(e(I),c++,c===_){for(let P of t)this._animating_sub_component_fullwindow.delete(P);n()}});a.push(C)}return Tt(a)};this._cached_extract_leaf_style=(t,e,n)=>{let{api:{text:{measureText:i}}}=this.$system,s=Oe(e);return this._leaf_style[s]?this._leaf_style[s]:Pe(this._component,n,t,i,!0,this._cached_extract_leaf_style)};this._make_cached_extract_leaf_style=t=>(e,n,i)=>this._cached_extract_leaf_style(e,[...t,...n],i);this._setup_layout_sub_component_append_children_animation=(t,e,n)=>{let{api:{text:{measureText:i}}}=this.$system;this._cancel_layout_parent_children_animation(t,n),this._reset_layout_transfer_parent(t,n),this._reset_layout_transfer_parent_children(t,n,e),this._layout_transfer_parent_animating[t]=!0;let s=[],a=m=>m.map(([h,f])=>f),_=[];for(let m of e){this._animating_sub_component_base_id.add(m);let h=this._get_sub_component_root_base(m);for(let b of h){this._layout_transfer_parent_leaf[t][n].push(b),this._layout_transfer_parent_leaf_sub_component_id[t][n].push(m);let[g,v]=b;this._layout_transfer_parent_leaf_path[t][n].push(g),this._layout_transfer_parent_leaf_comp[t][n].push(v)}let f=a(h);_.splice(_.length,0,...f)}let c=this._get_sub_component_frame(t),p=Ie(c,i);for(let m of _){let h=Pe(this._component,m,p,i,!0,this._cached_extract_leaf_style);s.push(h)}let u=0;this._layout_transfer_parent_remaining_child[t][n]=new Set(e);let{child_foreground:d}=this._get_sub_component_parent_leaf_layer(t);for(let m of e){let h=this._get_sub_component_root_base(m);for(let f of h){let[b,g]=f,v=Oe([m,...b]),x=this._leaf_frame_node[v];this._plug_leaf_frame(v,g,x,d),u++}}this._layout_transfer_parent_leaf_count[t][n]=u};this._setup_layout_sub_component_remove_parent_children_animation=(t,e,n)=>{let{api:{text:{measureText:i}}}=this.$system;this._cancel_layout_parent_children_animation(t,e),this._reset_layout_transfer_parent(t,e),this._reset_layout_transfer_parent_children(t,e,n);let s=[],a=this._get_sub_component(t),_=this._get_sub_component_frame(t),c=a.$slot[e];for(let u of n){this._animating_sub_component_base_id.add(u);let d=this._get_sub_component_root_base(u),m=[];for(let h of d){let[f,b]=h;this._layout_transfer_parent_leaf[t][e].push(h),this._layout_transfer_parent_leaf_path[t][e].push(f),this._layout_transfer_parent_leaf_comp[t][e].push(b),this._layout_transfer_parent_leaf_sub_component_id[t][e].push(u);let g=Ie(_,i),v=Pe(this._component,b,g,i);m.push(v),s.push(v)}}let p=0;for(let u of this._layout_transfer_parent_leaf[t][e]){let d=this._layout_transfer_parent_leaf_sub_component_id[t][e][p],[m,h]=u,f=Oe([d,...m]),b=this._leaf_frame_node[f],{child_foreground:g}=this._get_sub_component_layout_layer(d);this._plug_leaf_frame(f,h,b,g),p++}this._layout_transfer_parent_leaf_count[t][e]=p};this._cancel_all_layout_parent_children_animation=()=>{for(let t in S({},this._layout_parent_children_animation_frame))this._cancel_layout_parent_children_animation(t)};this._cancel_all_layout_parent_children_slot_animation=t=>{for(let e in S({},this._layout_parent_children_animation_frame))this._cancel_layout_parent_children_animation(e,t)};this._cancel_layout_parent_children_animation=(t,e="default")=>{this._layout_parent_children_animation_frame[t]!==void 0&&(cancelAnimationFrame(this._layout_parent_children_animation_frame[t]),delete this._layout_parent_children_animation_frame[t])};this._start_layout_children_animation=(t,e,n)=>{this._layout_parent_children_animation_frame[t]=requestAnimationFrame(n)};this._animate_layout_append_children=(t,e,n,i)=>{this._cancel_layout_parent_children_animation(t,n),this._setup_layout_sub_component_append_children_animation(t,e,n),this._layout_transfer_parent_callback[t]=i;let s=[],a={};for(let c of e)s.push([c,t,t,n]);let _=this._get_sub_component(t);return a[t]=_,this._play_layout_sub_component_transfer_children_animation(t,n,e,s,a,i)};this._play_layout_sub_component_transfer_children_animation=(t,e,n,i,s,a)=>{let _=()=>{if(this._tick_animate_layout_transfer_children(t,e,i,s),this._layout_transfer_parent_leaf_end_count[t][e]<this._layout_transfer_parent_leaf_count[t][e])this._start_layout_children_animation(t,e,_);else{for(let c of n)if(this._layout_core_animating.has(c)){this._start_layout_children_animation(t,e,_);return}a()}};return _(),()=>{this._cancel_tree_layout_animation()}};this._end_layout_sub_component_transfer_children_animation=(t,e,n)=>{var i,s,a;delete this._layout_transfer_parent_animating[t],delete this._layout_transfer_parent_callback[t];for(let _ of n)this._animating_sub_component_base_id.delete(_);if((i=this._layout_transfer_parent_leaf[t])!=null&&i[e])for(let _=0;_<((a=(s=this._layout_transfer_parent_leaf[t])==null?void 0:s[e])==null?void 0:a.length);_++){let c=this._layout_transfer_parent_leaf_sub_component_id[t][e][_],p=this._layout_transfer_parent_leaf_path[t][e][_],u=this._layout_transfer_parent_leaf_comp[t][e][_],d=Oe([c,...p]);this._unplug_leaf_frame(d,u)}};this._play_layout_sub_component_remove_children_animation=(t,e,n,i)=>{let s=[],a={};for(let c of n){s.push([c,t,c,e]);let p=this._get_sub_component_frame(c);a[c]=p}let _=this._get_sub_component(t);return a[t]=_,this._play_layout_sub_component_transfer_children_animation(t,e,n,s,a,i)};this._animate_layout_sub_component_remove_children=(t,e,n,i)=>(this._cancel_layout_parent_children_animation(t,e),this._setup_layout_sub_component_remove_parent_children_animation(t,e,n),this._play_layout_sub_component_remove_children_animation(t,e,n,i));this._animate_tick_leaf_trait=(t,e)=>{let n=this._leaf_frame_node[t],i=this._leaf_frame[t],s=this._leaf_frame_layer[t],{x:a,y:_}=H7(s.$element,this.$context.$element);return Yb(n,e,[["x",1],["y",1],["width",1],["height",1],["fontSize",1/10],["opacity",1/10],["sx",1/10],["sy",1/10]],({x:c,y:p,sx:u,sy:d,width:m,height:h,opacity:f,fontSize:b})=>{n.x=c,n.y=p,n.width=m,n.height=h,n.fontSize=b,n.opacity=f,n.sx=u,n.sy=d,vo(i.$element,{left:`${c+this._leaf_layer_offset_x+a}px`,top:`${p+this._leaf_layer_offset_y+_}px`,width:`${m+2*(Math.abs(u)-1)}px`,height:`${h+2*(Math.abs(d)-1)}px`,transform:`scale(${u}, ${d})`,opacity:`${f}`,fontSize:`${b}px`})})};this._tick_animate_layout_move_children=(t,e,n,i)=>{var f,b;let{api:{text:{measureText:s},layout:{reflectChildrenTrait:a}}}=this.$system,_={},c={},p={},u={},d={},m={},h=(g,v)=>{let x=this._animate_tick_leaf_trait(g,v);i(g,x)};for(let[g,v,x,I]of t){let E=this._get_sub_component(g),D=this._get_sub_component(x),w=this._get_sub_component_frame(x),T=Ie(w,s),C=this._get_sub_component_root_base(g),P,k=D.getParentRootSlotId(E)||"default",M=[x,...D.getSlotPath(k)],U=[],L=this._component.pathGetSubComponent(M);for(let H=M.length-1;H>=0;H--)if(L){if(L.isBase()){U=U.slice(0,H);break}L=L.$slotParent}let O=M.length===0,R=Oe(M),N=g===x;N?P=w:L&&!L.$wrap?P=L:P=w;let z=Ie(P,s),F=N?Pe(this._component,P,T,s,!0,this._cached_extract_leaf_style):(f=this._leaf_style[R])!=null?f:Pe(this._component,P,T,s,!0,this._cached_extract_leaf_style),V=F.width==="fit-content",j=F.height==="fit-content";V&&(z.width=T.width),j&&(z.height=T.height),z.x-=this.$context.$x,z.y-=this.$context.$y,z.x+=(Math.abs(z.sx)-1)*z.width/2,z.y+=(Math.abs(z.sy)-1)*z.height/2,d[R]=z,m[R]=F;for(let H of C){let[K,q]=H,Q=[g,...K],at=Oe(Q),Dt=this._leaf_style[at]||Pe(this._component,q,T,s);O?(_[x]=_[x]||{},c[x]=c[x]||{},_[x][I]=_[x][I]||[],c[x][I]=c[x][I]||[],_[x][I].push(at),c[x][I].push(Dt)):(p[R]=p[R]||[],p[R].push(at),u[R]=u[R]||[],u[R].push(Dt)),n(at,v,I)}}for(let g in _){let v=_[g],x=c[g],I=e[g],E=this._get_sub_component_frame(g),D=Ie(E,s);for(let w in v){let T=v[w],C=x[w],k=I.$slot[w].getOffset(),M=(b=this._leaf_style[g])!=null?b:Pe(this._component,k,D,s),U=Ie(k,s),L=a(U,M,C,[],R=>[]),O=0;for(let R of T){let N=L[O],z=C[O];d[R]=N,m[R]=z,O++}}}for(let g in p){let v=p[g],x=u[g],I=d[g],E=m[g],D=a(I,E,x,[],T=>Al(this._component,this._component,g,T,p,(C,P)=>{var k;return(k=this._leaf_style[C])!=null?k:Pe(this._component,P,I,s)})),w=0;for(let T of v){let C=D[w];d[T]=C,h(T,C),w++}}};this._tick_animate_layout_transfer_children=(t,e,n,i)=>this._tick_animate_layout_move_children(n,i,(s,a,_)=>{var c,p;(p=(c=this._layout_transfer_parent_leaf_end_set[a])==null?void 0:c[_])!=null&&p.has(s)&&(this._layout_transfer_parent_leaf_end_count[a][_]--,this._layout_transfer_parent_leaf_end_set[a][_].delete(s))},(s,a)=>{a&&(this._layout_transfer_parent_leaf_end_count[t][e]++,this._layout_transfer_parent_leaf_end_set[t][e].add(s))});this._set_all_current_layout_layer_core_position=()=>{let t=this._get_current_layout_layer_id();this._set_all_layout_layer_core_position(t)};this._set_all_layout_layer_core_position=t=>{let e=this._spec_get_layout_layer_children(t);for(let n of e){let{x:i,y:s}=this._layout_target_node[n];this._set_layout_core_position(n,i,s)}};this._mem_pull_sub_component_child=(t,e)=>{let{component:n}=this.$props,i=this._get_sub_component(e);t?this._get_sub_component(t).pullParentRoot(i):n.pullRoot(i)};this._mem_push_sub_component_child=(t,e,n)=>{let i=this._get_sub_component(t),s=this._get_sub_component(e),a=this._get_sub_component_slot_name(e);i.pushParentRoot(s,a),this._layout_sub_component_parent[e]=t,this._mem_layout_push_parent_root(t,e,n)};this._mem_layout_push_parent_root=(t,e,n)=>{this._refresh_component_children_counter_up(t,1+(this._layout_component_count[e]||0))};this._mem_push_sub_component=(t,e,n)=>{t===null?this._mem_push_root(e):this._mem_push_sub_component_child(t,e,n)};this._mem_push_root=t=>{let e=this._get_sub_component(t);this._component.pushRoot(e)};this._layout_layer_move_sub_component_child=(t,e,n)=>{let i=this._layout_core[n],s=this._ensure_layout_layer(t),a=this._ensure_layout_layer(e);s.children.removeChild(i),a.children.appendChild(i);let _=this._get_layout_layer(n);_&&(s.layers.removeChild(_.layer),a.layers.appendChild(_.layer))};this._ensure_parent_layout_layer=t=>{let e=this._spec_get_sub_component_parent_id(t);return e?this._ensure_layout_layer(e):this._layout_root};this._collapse_sub_component=t=>{this._get_sub_component(t).collapse()};this._uncollapse_sub_component=t=>{this._get_sub_component(t).uncollapse()};this._append_sub_component_to_root=t=>{let e=this._get_sub_component(t);this._component.appendRoot(e)};this._insert_sub_component_root_at=(t,e)=>{let n=this._get_sub_component(t);this._component.insertRootAt(n,e)};this._append_sub_component_parent_root=(t,e)=>{let n=this._get_sub_component(t),i=this._get_sub_component(e),s=this._get_sub_component_slot_name(e);n.appendParentRoot(i,s)};this._insert_sub_component_parent_root_at=(t,e,n)=>{let i=this._get_sub_component(t),s=this._get_sub_component(e),a=this._get_sub_component_slot_name(e);i.insertParentRootAt(s,n,a)};this._remove_sub_component_parent_root=(t,e)=>{let n=this._get_sub_component(t),i=this._get_sub_component(e);n.removeParentRoot(i)};this._remove_sub_component_from_root=t=>{let e=this._get_sub_component(t);this._component.removeRoot(e)};this._layout_collapse_sub_component=(t,e)=>{this._refresh_component_children_counter(t);let n=this._get_sub_component(t);if(!this._layout_path.includes(t)){let _=this._spec_get_sub_component_children(t);for(let c of _)this._is_fullwindow||this._leave_sub_component_frame(c),this._layout_collapse_sub_component(c,t);this._is_fullwindow||n.collapse()}let i=this._layout_core[t];this._listen_layout_core(t,i);let{width:s,height:a}=this._get_unit_component_layout_size(t);this._resize_layout_core(t,s,a)};this._layout_uncollapse_sub_component=t=>{let e=this._get_sub_component(t),n=this._layout_path.includes(t),i=this._spec_get_sub_component_children(t);if(!this._is_fullwindow)for(let s of i){if(!n){let a=this._get_sub_component(s);e.$mountParentRoot.includes(a)&&e.removeParentRoot(a)}this._layout_uncollapse_sub_component(s)}};this._move_core_content_layout_to_graph=t=>{this._remove_core_content_from_layout(t),this._append_core_content_to_graph(t)};this._remove_core_content_from_layout=t=>{let e=this._layout_core[t],n=this._core_content[t];e.removeChild(n)};this._append_core_content_to_graph=t=>{let e=this._core[t],n=this._core_content[t];e.appendChild(n)};this.move_all_core_content_graph_to_layout=()=>{for(let t in this._component.$subComponent)this._move_core_content_graph_to_layout(t)};this._move_core_content_graph_to_layout=t=>{this._remove_core_content_from_graph(t),this._append_core_content_to_layout(t)};this._append_core_content_to_layout=t=>{let e=this._layout_core[t],n=this._core_content[t];e.appendChild(n)};this._remove_core_content_from_graph=t=>{let e=this._core[t],n=this._core_content[t];e.removeChild(n)};this._get_component_children_count=t=>this._layout_component_count[t]||0;this._refresh_component_children_counter=t=>{let e=this._layout_core_children_counter[t],n=this._get_component_children_count(t);e.setProp("innerText",`${n}`),this._tree_layout&&n>0?e.$element.style.opacity="1":e.$element.style.opacity="0"};this._refresh_component_children_counter_up=(t,e)=>{var i;let n=t;for(;n;)this._layout_component_count[n]=((i=this._layout_component_count[n])!=null?i:0)+e,this._refresh_component_children_counter(n),n=this._layout_sub_component_parent[n]};this._spec_append_sub_component_child=(t,e,n)=>{this.__spec_append_sub_component_child(t,e,n),this._refresh_component_children_counter(t),this._refresh_tree_sub_component_index()};this.__spec_append_sub_component_child=(t,e,n)=>{let i=this._spec_get_sub_component_parent_id(e);this._spec_move_sub_component_child(i,e,t,n)};this._pod_move_sub_component_root=(t,e,n)=>{this._pod.$moveSubComponentRoot({parentId:t,children:e,slotMap:n})};this._spec_get_component_children=()=>{let{component:{children:t=[]}={}}=this._spec;return t};this._get_sub_component_spec_layer=t=>{let e=this._spec_get_sub_component_parent_id(t);return e?this._spec_get_sub_component_children(e):this._spec_get_component_children()};this._spec_get_sub_component_parent_id=t=>{let e=this._get_component_spec(),{subComponents:n}=e;for(let i in n){let s=n[i],{children:a=[]}=s;for(let _ of a)if(_===t)return i}return null};this._get_sub_component_layout_parent=t=>this._layout_sub_component_parent[t]||null;this._reset_layout_transfer_parent_children=(t,e,n)=>{this._layout_transfer_parent_remaining_child[t]=this._layout_transfer_parent_remaining_child[t]||{},this._layout_transfer_parent_remaining_child[t][e]=new Set(n)};this._reset_layout_transfer_parent=(t,e)=>{this._layout_transfer_parent_leaf[t]=this._layout_transfer_parent_leaf[t]||{},this._layout_transfer_parent_leaf_path[t]=this._layout_transfer_parent_leaf_path[t]||{},this._layout_transfer_parent_leaf_comp[t]=this._layout_transfer_parent_leaf_comp[t]||{},this._layout_transfer_parent_leaf_sub_component_id[t]=this._layout_transfer_parent_leaf_sub_component_id[t]||{},this._layout_transfer_parent_leaf_end_count[t]=this._layout_transfer_parent_leaf_end_count[t]||{},this._layout_transfer_parent_leaf_end_set[t]=this._layout_transfer_parent_leaf_end_set[t]||{},this._layout_transfer_parent_leaf_count[t]=this._layout_transfer_parent_leaf_count[t]||{},this._layout_transfer_parent_leaf[t][e]=[],this._layout_transfer_parent_leaf_path[t][e]=[],this._layout_transfer_parent_leaf_comp[t][e]=[],this._layout_transfer_parent_leaf_sub_component_id[t][e]=[],this._layout_transfer_parent_leaf_end_count[t][e]=0,this._layout_transfer_parent_leaf_end_set[t][e]=new Set,this._layout_transfer_parent_leaf_count[t][e]=0};this._long_press_remove_sub_component_children=(t,e,n,i)=>{this._remove_sub_component_all_children(t,e,n,i)};this.remove_sub_component_all_children=(t,e,n,i)=>{this._remove_sub_component_all_children(t,e,n,i);let s=this._spec_get_sub_component_children(t),a=this._get_sub_components_slot_map(s),_=this._get_sub_components_parent_map(s);this._dispatch_action(ms(null,_,s,{},a))};this._remove_sub_component_all_children=(t,e,n,i)=>{let s=this._spec_get_sub_component_children(t);this._remove_sub_component_children(t,e,n,i,s)};this._remove_sub_component_children=(t,e,n,i,s)=>{let{animate:a}=this.$props,_=this._is_layout_component_layer_visible(t);a=a&&!_;let c=this._layout_node[t],{x:p,y:u,width:d,height:m}=c;for(let h of s)this._cancel_layout_sub_component_animation(h),this._layout_layer_move_sub_component_child(t,n,h),a&&(this._set_layout_core_position(h,p,u),this._set_layout_core_size(h,d,m),this._measure_sub_component_base(h));if(this._tree_layout)for(let h of s)this._animating_sub_component_base_id.has(h)||(this._is_layout_component_layer_visible(t)||this._remove_sub_component_parent_root(t,h),a&&this._remove_sub_component_root_base(h));this._cancel_layout_parent_children_animation(t,e),this._tree_layout&&a&&this._setup_layout_sub_component_remove_parent_children_animation(t,e,s);for(let h of s)this._pre_remove_sub_component_child(t,h,n);if(this._refresh_current_layout_node_target_position(),this._refresh_layout_node_target_position(n),this._tree_layout)if(a)this._animate_all_layout_layer_node(n),this._play_layout_sub_component_remove_children_animation(t,e,s,()=>{this._end_layout_sub_component_transfer_children_animation(t,e,s);for(let h of s)this._enter_sub_component_frame(h),this._append_sub_component_base(h)});else{if(!_)for(let h of s)this._enter_sub_component_frame(h),this._append_sub_component_base(h);this._force_layout_node_traits(n)}};this._pre_remove_sub_component_child=(t,e,n)=>{let i=this._is_sub_component_fullwindow(e);i&&this._decouple_sub_component(e),this._mem_move_out_sub_component_child(t,e,n),this._layout_move_sub_component_child(t,e,n),this._spec_move_sub_component_child(t,e,n,"default"),this._pod_move_sub_component_root(n,[e],{}),i&&this._couple_sub_component(e)};this._sim_move_out_sub_component_children=(t,e)=>{let n=this._spec_get_sub_component_children(t),i=this._get_sub_component(t);for(let s of n){let a=this._get_sub_component(s);this._tree_layout&&(i.removeParentRoot(a),this._enter_sub_component_frame(s)),i.pullParentRoot(a),e?this._get_sub_component(e).pushParentRoot(a,"default"):this._component.pushRoot(a)}};this._sim_move_out_sub_component_layout_children=(t,e)=>{let n=this._spec_get_sub_component_children(t);for(let i of n)this._layout_move_sub_component_child(t,i,e),this._layout_layer_move_sub_component_child(t,e,i)};this._remove_sub_component_child=(t,e)=>{let n=this._get_sub_component(t),i=this._get_sub_component(e);n.removeParentRoot(i)};this._mem_move_out_sub_component_child=(t,e,n)=>{this._mem_pull_sub_component_child(t,e),n?this._mem_push_sub_component_child(n,e,"default"):this._mem_push_root(e)};this._layout_move_sub_component_child=(t,e,n)=>{this._refresh_component_children_counter_up(t,-(1+(this._layout_component_count[e]||0))),n?this._layout_sub_component_parent[e]=n:delete this._layout_sub_component_parent[e]};this._show_layout_core=t=>{let e=this._layout_core[t];e.$element.style.pointerEvents="inherit",e.$element.style.opacity="1",this._tree_layout&&this._is_node_selected(t)&&this._enable_core_resize(t)};this._hide_layout_core=t=>{let e=this._layout_core[t];e.$element.style.pointerEvents="none",e.$element.style.opacity="0",this._tree_layout&&this._is_node_selected(t)&&this._disable_core_resize(t)};this._spec_remove_component_children=(t,e)=>{let n=this._spec_get_sub_component_children(t);for(let i of n)this._spec_move_sub_component_child(t,i,e,"default");this._refresh_component_children_counter(t)};this._spec_move_sub_component_child=(t,e,n,i)=>{t?this._spec.component=M0({id:t,childId:e},this._spec.component||{}):this._spec.component=va({id:e},this._spec.component||{}),n?(this._spec.component=vh({id:n,childId:e},this._spec.component||{}),this._layout_sub_component_parent[e]=n):(this._spec.component=T0({unitId:e},this._spec.component||{}),delete this._layout_sub_component_parent[e])};this._is_unit_long_press_able=t=>{if(this._mode==="none"){if(!this._is_unit_base(t))return!0}else return!0;return!1};this._is_datum_long_press_able=t=>!1;this._is_node_mode_long_press_able=t=>this._is_unit_node_id(t)?this._is_unit_long_press_able(t):this._is_datum_node_id(t)?this._is_datum_long_press_able(t):!1;this._is_node_none_long_press_able=t=>!!(this._is_unit_node_id(t)&&!this._is_unit_base(t));this._is_node_blue_long_press_able=t=>!!(this._is_link_pin_node_id(t)&&this._is_input_pin_node_id(t));this._on_node_long_press=(t,e)=>{let{pointerId:n,clientX:i,clientY:s,screenX:a,screenY:_}=e;this._set_long_press_pointer(n,i,s),!this._resize_node_id_pointer_id[t]&&(this._is_node_mode_long_press_able(t)&&this._animate_long_press(a,_,"out"),this._tree_layout?this.__on_layout_node_long_press(t,n,i,s):this._on_graph_node_long_press(t,n,i,s,a,_))};this.__on_layout_node_long_press=(t,e,n,i)=>{if(this._is_unit_node_id(t)&&this._mode!=="none"){if(this._mode==="multiselect"){if(this._layout_drag_node[t]||this.__on_layout_component_drag_start(t,n,i),this._is_node_selected(t)){this._layout_drag_node[t]&&this._on_layout_component_drag_end(t),this._cancel_node_long_click=!0;let s=this._get_current_layout_layer_id();this._long_press_remove_sub_component_children(t,"default",s,"default"),this.deselect_node(t)}else if(this._get_layout_layer_selected_count()>0&&(this._cancel_node_long_click=!0,this._selected_component_count>0)){let a=[];for(let _ in this._selected_component){let c=this._get_current_layout_layer_id();(this._layout_sub_component_parent[_]||null)===c&&a.push(_)}this._long_press_append_sub_component_children(t,a)}}}};this._on_graph_node_long_press=(t,e,n,i,s,a)=>{this._is_unit_node_id(t)?this._on_unit_long_press(t,e,n,i,s,a):this._is_link_pin_node_id(t)?this._on_link_pin_long_press(t):this._is_datum_node_id(t)&&this._on_graph_datum_long_press(t,e,n,i)};this._on_unit_long_press=(t,e,n,i,s,a)=>{this._mode==="multiselect"?this._on_graph_group_unit_long_press(t,e,n,i,s,a):this._mode==="add"?this._on_graph_green_unit_long_press(t,e,n,i):this._mode==="change"?this._on_graph_blue_unit_long_press(t,e,n,i):this._mode==="remove"?this._on_graph_red_unit_long_press(t,e,n,i):this._mode==="data"?this._on_graph_yellow_unit_long_press(t,e,n,i):this._mode==="none"&&this._on_graph_none_unit_long_press(t,e,n,i)};this._on_graph_datum_long_press=(t,e,n,i)=>{this._mode==="data"&&this._yellow_long_press_datum(t,e,n,i)};this._on_graph_group_node_long_press=(t,e,n,i,s,a)=>{this._is_unit_node_id(t)?this._on_graph_group_unit_long_press(t,e,n,i,s,a):this._is_datum_node_id(t)&&this._on_graph_group_datum_node_long_press(t,e,n,i)};this._on_graph_none_unit_long_press=(t,e,n,i)=>{};this._get_all_selected_node_ids=()=>J(this._selected_node_id);this._on_graph_group_unit_long_press=(t,e,n,i,s,a)=>{if(this._is_node_selected(t))this._collapse_next_unit_id===t||this._is_unit_base(t)||(this._animate_long_press(s,a,"out"),this._cancel_long_click=!0,this._cancel_long_press=!0,this._multiselect_area_ing&&this._on_multiselect_area_end(),this._swap_next_click_hold_long_press=!0,this._cancel_click=!0,setTimeout(()=>{this._swap_next_click_hold_long_press=!1,this._cancel_click=!1},3*300),this.explode_unit(t));else if(!this._is_unit_base(t)){let _=this._get_node_screen_position(t),c=this._get_all_selected_node_ids();this._start_long_press_collapse(e,t,c,_)&&(this._drag_node_id[t]||this.__drag_start(t,e,n,i)),this._cancel_long_click=!0,this._cancel_long_press=!0}};this._on_graph_green_unit_long_press=(t,e,n,i)=>{let s=this._get_unit_bundle(t);this._swap_long_press_unit_bundle(t,s,e,n,i)};this._swap_long_press_unit_bundle=(t,e,n,i,s)=>{let a=this._screen_to_world(i,s),{datum_node_id:_}=this._add_data_unit(e,a);this._force_pointer_drag_swap(t,_,n,i,s)};this._on_graph_yellow_unit_long_press=(t,e,n,i)=>{this._pod_get_unit_deep_bundle(t,s=>{this._swap_long_press_unit_bundle(t,s,e,n,i)})};this._on_graph_blue_unit_long_press=(t,e,n,i)=>{let s=this._make_unit_body_spec(t),a=Yg(this._spec,s.name);this._pod_remove_unit_ghost(t,a,s,({specId:_,bundle:c})=>{this._swap_long_press_unit_bundle(t,c,e,n,i),this._state_remove_unit_ghost(t,_,s)})};this._make_unit_body_spec=t=>{let e=this._get_unit_spec(t),n=e.name,i=this._is_unit_component(t),s=mi(e.inputs||{},d=>{let m=Er(t,d),h=this._is_link_pin_default_ignored(m);return{plug:{0:{}},defaultIgnored:h}}),a=mi(e.outputs||{},d=>{let m=Vr(t,d),h=this._is_link_pin_default_ignored(m);return{plug:{0:{}},defaultIgnored:h}}),{width:_,height:c}=this._get_unit_component_default_size(t);return wn({name:n,inputs:s,outputs:a,render:i,component:{defaultWidth:_,defaultHeight:c}})};this._on_graph_red_unit_long_press=(t,e,n,i)=>{let s=this._make_unit_body_spec(t),a=Yg(this._spec,s.name);this._pod_remove_unit_ghost(t,a,s,({specId:_,bundle:c})=>{this._swap_long_press_unit_bundle(t,c,e,n,i),this._state_remove_unit_ghost(t,_,s)}),this._is_unit_component(a)&&this._connect_sub_component(a)};this._is_link_pin_default_ignored=t=>{let e=this._get_unit_pin_spec(t),{defaultIgnored:n=!1}=e;return n};this._abort_graph_node_transition={};this._animate_nodes_style=(t,e,n,i,s,a)=>{for(let _ of t){let c=e(_);this._animate_node_style(_,c,n,i,p=>s(_,p),()=>a(_))}};this._animate_node_style=(t,e,n,i,s,a)=>{this._abort_graph_node_transition[t]=this._animate_simulate(e,n,i,s,a)};this._animate_core_style=(t,e,n,i,s)=>{let a=this._animate_simulate(e,n,[["width",1],["height",1],["opacity",.1]],i,s);return this._abort_graph_node_transition[t]=a,a};this._get_unit_exposed_pins=t=>{let e={input:{},output:{}};return this._for_each_unit_pin(t,(n,i,s)=>{let a=this._get_pin_anchor_node_id(n),_=this._pin_to_int[i][a];if(_){let{type:c,pinId:p,subPinId:u}=gt(_),d=this._get_node_position(a);e[c][s]={type:c,pinId:p,subPinId:u,position:d}}}),e};this._get_unit_input_names=t=>{let e=this._get_unit_spec(t),{inputs:n={}}=e;return J(n)};this._get_unit_input_node_ids=t=>this._get_unit_input_names(t).map(Iy(t,"input"));this._get_unit_output_names=t=>{let e=this._get_unit_spec(t),{outputs:n={}}=e;return J(n)};this._get_unit_output_node_ids=t=>this._get_unit_output_names(t).map(Iy(t,"output"));this._get_unit_tag_exposed_pins=t=>{let e={input:{data:{},ref:{}},output:{data:{},ref:{}}};return this._for_each_unit_pin(t,(n,i,s)=>{let _=this._is_link_pin_ref(n)?"ref":"data",c=this._get_pin_anchor_node_id(n),p=this._pin_to_int[i][c];if(p){let{pinId:u,subPinId:d}=gt(p);e[i][_][s]=[u,d]}}),e};this._get_unit_tag_merges=t=>{let e={input:{data:[],ref:[]},output:{data:[],ref:[]}};return this._for_each_unit_pin(t,(n,i,s)=>{let a=this._pin_to_merge[n],c=this._is_link_pin_ref(n)?"ref":"data";a&&e[i][c].push(s)}),e};this._generate_identity_matches=t=>{var f,b;let e=this._get_unit_spec(t),n=J((f=e.inputs)!=null?f:{}),i=J((b=e.outputs)!=null?b:{}),s=n.filter(g=>!this.__is_link_pin_ref(t,"input",g)),a=i.filter(g=>!this.__is_link_pin_ref(t,"output",g)),_=n.filter(g=>this.__is_link_pin_ref(t,"input",g)),c=i.filter(g=>this.__is_link_pin_ref(t,"output",g)),p={input:{data:s.map((g,v)=>[v,v]),ref:_.map((g,v)=>[v,v])},output:{data:a.map((g,v)=>[v,v]),ref:c.map((g,v)=>[v,v])}},u={input:{data:s.reduce((g,v,x)=>(g[v]=x,g),{}),ref:_.reduce((g,v,x)=>(g[v]=x,g),{})},output:{data:a.reduce((g,v,x)=>(g[v]=x,g),{}),ref:c.reduce((g,v,x)=>(g[v]=x,g),{})}},d={input:{data:s.reduce((g,v,x)=>(g[v]=x,g),{}),ref:_.reduce((g,v,x)=>(g[v]=x,g),{})},output:{data:a.reduce((g,v,x)=>(g[v]=x,g),{}),ref:c.reduce((g,v,x)=>(g[v]=x,g),{})}},m=this._get_unit_tag_merges(t),h=this._get_unit_tag_exposed_pins(t);return{valid_pin_match:p,merge_pin_index:u,exposed_pin_index:d,merged_pin_ids:m,exposed_pin_ids:h}};this._state_remove_unit_ghost=(t,e,n)=>{let{setSpec:i}=this.$props;i(e,n);let s=this._node[t],a=this._get_unit(t),{x:_,y:c,width:p,height:u}=s,d=this._new_unit_id(e),{valid_pin_match:m,merge_pin_index:h,exposed_pin_index:f,merged_pin_ids:b,exposed_pin_ids:g}=this._generate_identity_matches(t);this._state_swap_unit(t,d,e,m,b,h,g,f);let{x:v,y:x,width:I,height:E}=this._node[d];this._animate_core_style(d,{x:_,y:c,width:p,height:u,opacity:1},()=>({x:v,y:x,width:I,height:E,opacity:1}),({x:D,y:w,width:T,height:C})=>{this._set_node_x(d,D),this._set_node_y(d,w),this._resize_core_width(d,T),this._resize_node_width(d,T),this._resize_core_height(d,C),this._resize_node_height(d,C)},()=>{}),this._refresh_compatible()};this._on_graph_group_datum_node_long_press=(t,e,n,i)=>{let{datumId:s}=Ae(t),a=this._datum_tree[s],{type:_}=a;if(_==="array literal"){let p=this._get_node_screen_position(t),u=this._node[t];p.x+=u.width*this._zoom.z,p.y+=u.height*this._zoom.z/2;let d=J(this._selected_node_id);this._start_long_press_collapse(e,t,d,p),this._set_node_layer(t,Qs),this._drag_node_id[t]||this.__drag_start(t,e,n,i),this._cancel_long_click=!0,this._cancel_long_press=!0}};this._explode_unit=(t,e,n,i,s)=>{let{getSpec:a}=this.$props,_=this._get_unit_spec(t),{units:c={},merges:p={},inputs:u={},outputs:d={}}=_,m=this._make_explode_unit_actions(t,e,n,i);this._state_explode_unit(t,e,n,i,s),this._pod_explode_unit(t,e,n,m)};this._make_full_spec_collapse_map=(t,e,n,i,s)=>Dg(t,e,n,i,s,{getMerge:a=>this._spec_get_merge(a),getUnitMerges:a=>this._get_unit_merges(a),getUnitPlugs:a=>this._get_unit_plugs(a),getPinMergeId:(a,_,c)=>{let p=ut(a,_,c);return this._get_pin_merge_id(p)}});this._make_explode_unit_actions=(t,e,n,i)=>{let{forkSpec:s,shouldFork:a,newSpecId:_}=this.$props,c=this._get_unit_spec(t),{id:p}=c,u=p;a(p)&&(u=_());let d=this._make_full_spec_collapse_map(t,c,e,n,i),m=this._get_unit_spec_render(t),h={unit:{id:u},specs:{[u]:{name:c.name,units:{},inputs:{},outputs:{},render:m,id:p}}},f=this._get_graph_unit_bundle_spec(t);return[h1(S({graphId:t,graphBundle:f},d)),this._make_remove_unit_action(t,h,!1,!1)]};this._make_explode_unit_action=(t,e,n,i)=>{let s=this._make_explode_unit_actions(t,e,n,i);return Mi(s)};this.explode_unit=t=>{let{getSpec:e}=this.$props,n=this._get_unit_spec(t),{map_unit_id:i,map_merge_id:s,map_plug_id:a,selected_node_ids:_}=Av(n,e,this._new_unit_id,this._new_merge_id,this._new_sub_pin_id,this._new_datum_id),c=this._make_explode_unit_action(t,i,s,a);this._explode_unit(t,i,s,a,_),this._dispatch_action(c)};this._state_explode_unit=(t,e,n,i,s)=>{let a=this._get_unit_spec(t),{units:_={},merges:c={},inputs:p={},outputs:u={}}=a,d=B(this._get_unit_merges(t)),m=B(this._get_unit_plugs(t)),h=mi(d,k=>this.__get_merge_node_position(k)),f=mi(d,k=>{let M=At(k);return this._is_node_selected(M)});To(a,(k,M,U)=>{let{plug:L}=U,O=ut(t,k,M),R=this._pin_to_merge[O],N=!!R;if(R){let{mergeId:z}=It(R),F=B(this._get_merge(R));delete F[t];let V=Te(F),j=!1;for(let H in L)L[H].mergeId&&(j=!0);if(V===1){let H=jt(F);if(j)s.push(R);else{let K=jt(F[H]),q=jt(F[H][K]),Q=ut(H,K,q);this._has_node(Q)&&s.push(Q)}}else if(V>1)s.push(R);else throw new Co}for(let z in L){let F=L[z],V=nt(i,[k,M,z],z);if(kr(k,M,U,z,F,N)){let j=Kt(k,M,V);s.push(j)}}});let b=this._node[t],{x:g,y:v,width:x,height:I}=b,E=1.25,D={x:g,y:v,width:E*x,height:E*I,opacity:0},w={x:g,y:v,width:x,height:I,opacity:1};this._state_remove_unit_merges(t),this._state_remove_unit_plugs(t),this._set_unit_layer(t,Qs),this._state_gut_unit(t,e,n,i,d,m,h,f);let T=s.filter(k=>this._is_node_visible(k)),C=[...new Set(T.map(this._get_node_anchor_node_id))];this._select_many(C);let P=(k,M)=>{if(this._has_node(k)&&this._set_node_opacity(k,M),this._is_unit_node_id(k)){this._for_each_unit_pin(k,L=>{this._has_node(L)&&!this._spec_is_link_pin_ignored(L)&&P(L,M)});let U=Si(k);this._has_node(U)&&this._set_err_opacity(U,M)}if(this._is_link_pin_node_id(k)){this._set_link_pin_opacity(k,M);let U=this._pin_to_datum[k];U&&this._set_datum_opacity(U,M)}else if(this._is_merge_node_id(k)){let{mergeId:U}=It(k);this._for_each_merge_pin(U,(L,O,R)=>{if(R!==$t){let N=ut(L,O,R);this._set_link_pin_opacity(N,M)}})}};this._animate_nodes_style(C,()=>({opacity:0}),()=>({opacity:1}),[["opacity",1]],(k,{opacity:M})=>{P(k,M)},k=>{P(k,1)}),this._disable_unit_pointer_events(t),this._animating_unit_explosion.add(t),this._animate_core_style(t,w,()=>D,({x:k,y:M,width:U,height:L,opacity:O})=>{P(t,O),this._set_node_x(t,k),this._set_node_y(t,M),this._resize_core_width(t,U),this._resize_node_width(t,U),this._resize_core_height(t,L),this._resize_node_height(t,L)},()=>{this._animating_unit_explosion.delete(t),this._state_remove_unit(t)}),this._simulation.alpha(1),this._simulation.alphaDecay(0),setTimeout(()=>{this._simulation.alphaDecay(FE)},3e3),this._start_graph_simulation(he)};this._state_gut_unit=(t,e,n,i,s,a,_,c)=>{let p=this._get_unit_spec(t),u={};gi(s,(C,P,k,M)=>{P===t&&tt(u,[k,M],C)});let{units:d={},merges:m={},inputs:h={},outputs:f={},render:b,component:g={subComponents:{},children:[]},metadata:v={}}=p,x=this._get_node_position(t),I=(C,P)=>jn(mi(P,(k,M)=>{let U=B(M);U.plug={};let{plug:L={}}=M,O=!!nt(u,[C,k],void 0),R=a[C][k],N=!!R;for(let z in L){let F=L[z];kr(C,k,M,z,F,O,R&&S({type:C},R))&&(U.plug[z]=F)}return U}),k=>{let{plug:M={}}=k;return pe(M)>0}),E=I("input",h),D=I("output",f),w={units:d,merges:m,component:g,metadata:v,render:b,inputs:E,outputs:D};this._state_paste_spec(w,x,e,n,i,{});let T={};To(p,(C,P,k)=>{var V,j,H,K;let{plug:M={}}=k,U=new Set(J(s)),L=this._new_merge_id(U),R=!!nt(u,[C,P],void 0),N={};delete N[t];let z=[];for(let q in M){let Q=M[q];if(!kr(C,P,k,q,Q,R)){let{unitId:at,pinId:Dt,mergeId:Et}=Q;if(at&&Dt){let Ct=(V=e[at])!=null?V:at,Pt=ut(Ct,C,Dt),ot;C==="output"&&Dt===$t?ot=at:ot=Pt;let X=this._get_node_position(ot);z.push(X),tt(N,[Ct,C,Dt],!0)}else Et&&(T[Et]=((j=T[Et])!=null?j:0)+1,L=(H=n[Et])!=null?H:Et)}}let F=z.length>0?Ls(z):this._jiggle_world_screen_center();if(!this.__spec_has_merge(L)){if(Te(N)===1)return;let q=Te(N);if(q===0&&((K=T[L])!=null?K:0)!==2)return;q>0&&(this._state_add_merge(L,N,F),this._sim_collapse_merge(L))}});for(let C in s){let P=s[C],k=_[C],M=At(C),U,L,O={},R=0;for(let N in P){let z=P[N];if(N===t){let{input:F={},output:V={}}=z;if(V!=null&&V[$t])return;let j=(H,K)=>{var at,Dt;let q=p[`${H}s`][K],{plug:Q}=q;for(let Et in Q){let Ct=Q[Et],{unitId:Pt,pinId:ot,mergeId:X}=Ct;if(X){let rt=(at=n[X])!=null?at:X,et=At(rt),ct=this._get_merge(et);U=rt,L=et,ct&&!ie(ct)?Yt(ct,(lt,bt,kt)=>{tt(O,[lt,bt,kt],!0),R++}):Yt(P,(lt,bt,kt)=>{if(lt!==t){if(nt(O,[lt,bt,kt],void 0))return;tt(O,[lt,bt,kt],!0),R++}})}else if(Pt&&ot){let rt=(Dt=e[Pt])!=null?Dt:Pt;tt(O,[rt,H,ot],!0),U=C,L=M,R++}}};for(let H in F)j("input",H);for(let H in V)j("output",H)}}for(let N in P){let z=P[N];N!==t&&(O[N]=z,R+=ja(z))}if(U||(U=C,L=M),Yt(O,(N,z,F)=>{let V=ut(N,z,F);this._pin_to_merge[V]&&this._state_remove_pin_or_merge(V)}),R===0||R>1){this._state_add_merge(U,O,k),this._sim_collapse_merge(U);let N=this._get_merge_anchor_node_id(L);c[C]&&this._select_node(N)}else this._spec_has_merge(L)?Yt(O,(N,z,F)=>{let V=ut(N,z,F);this._state_merge_link_pin_merge_pin(V,L)}):Yt(O,(N,z,F)=>{let V=ut(N,z,F),j=this._get_pin_anchor_node_id(V);this._select_node(j)})}xe(a,(C,P,{pinId:k,subPinId:M})=>{var O,R;let U=wr(p,C,P),{plug:L}=U;for(let N in L){let z=L[N];if(z.unitId&&z.pinId){let F=(O=e[z.unitId])!=null?O:z.unitId;this._state_plug_exposed_pin(C,k,M,{unitId:F,pinId:z.pinId})}else if(z.mergeId){let F=(R=n[z.mergeId])!=null?R:z.mergeId;this._state_plug_exposed_pin(C,k,M,{mergeId:F})}}})};this._pod_explode_unit=(t,e,n,i)=>{this._is_unit_component(t)&&this._disconnect_sub_component(t),this._pod.$refUnit({unitId:t,_:["U","C","G"]}).$getGraphData({},({err:a,pinData:_,children:c,mergeData:p})=>{let u=ls(_,(f,b)=>e[b]);this._process_graph_active_pin_data(u);let d=ls(a,(f,b)=>e[b]);this._process_graph_active_err(d);let m=ls(c,(f,b)=>e[b]);this._process_graph_active_children(m);let h=ls(p,(f,b)=>{var g;return(g=n[b])!=null?g:b});this._process_graph_active_merge_data(h),this._pod.$bulkEdit({actions:i});for(let f in e){let b=e[f];this._is_unit_component(b)&&this._connect_sub_component(b)}})};this._toggle_select_subgraph=t=>{let e=this._node_to_subgraph[t],n=this._subgraph_to_node[e];for(let i of n)i===t||this._is_plug_node_id(i)||this._toggle_select(i)};this._on_node_click_hold=(t,e)=>{if(this._resize_node_id_pointer_id[t])return;let{screenX:n,screenY:i}=e;this._tree_layout?(this._animate_long_press(n,i,"out"),this._on_node_long_press(t,e)):this._mode==="multiselect"||this._mode==="info"?(this._cancel_node_click.add(t),this._animate_long_press(n,i,"out"),this._on_node_long_press(t,e)):this._is_unit_node_id(t)?(this._animate_long_press(n,i,"in"),this._start_gesture(e)):this._is_pin_node_id(t)&&this._start_gesture(e)};this._merge_pin_pin=(t,e)=>this._is_link_pin_node_id(t)&&this._is_link_pin_node_id(e)?this._merge_link_pin_link_pin(t,e):this._is_link_pin_node_id(t)&&this._is_merge_node_id(e)?this.merge_link_pin_merge_pin(t,e):this._is_merge_node_id(t)&&this._is_link_pin_node_id(e)?this.merge_link_pin_merge_pin(e,t):this.merge_merge_pin_merge_pin(e,t);this._merge_pin_unit=(t,e)=>{this._is_link_pin_node_id(t)?this._merge_link_pin_unit(t,e):this._merge_merge_pin_unit(t,e)};this._merge_link_pin_unit=(t,e)=>{var a;if(this._get_link_pin_ref(t)){let{type:_}=it(t),{pinId:c,subPinId:p}=(a=this._spec_get_pin_node_plug_spec(_,t))!=null?a:{};c&&p&&this._unplug_exposed_pin(_,c,p)}let i=Kn(e),s=this._pin_to_merge[i];s?this._merge_link_pin_merge_pin(t,s):this._merge_link_pin_link_pin(t,i)};this._sim_merge_link_pin_unit=(t,e)=>{let n=Kn(e),i=this._pin_to_merge[n];i?this._sim_add_link_pin_to_merge(t,i):this._sim_merge_link_pin_link_pin(t,n)};this._merge_merge_pin_unit=(t,e)=>{let n=Kn(e);this._merge_link_pin_merge_pin(n,t)};this._make_merge_merges_actions=(t,e)=>{let n=B(this._spec_get_merge(e)),i=[];return i.push(Ir(e,n)),Yt(n,(s,a,_)=>{i.push(bg(t,a,s,_))}),i};this.merge_merge_pin_merge_pin=(t,e)=>{let{mergeId:n}=It(t),{mergeId:i}=It(e),s=this._make_merge_merges_actions(n,i),a=this._merge_merge_pin_merge_pin(t,e);return this._dispatch_action(Mi(s)),a};this._merge_merge_pin_merge_pin=(t,e)=>{let{mergeId:n}=It(t),{mergeId:i}=It(e);return this._pod_merge_merge_pin_merge_pin(n,i),this._state_merge_merge_pin_merge_pin(t,e),t};this._state_merge_merge_pin_merge_pin=(t,e)=>{let{mergeId:n}=It(t),{mergeId:i}=It(e);return this._sim_merge_merge_pin_merge_pin(t,e),this._spec_merge_merge_pin_merge_pin(n,i),t};this._pod_merge_merge_pin_merge_pin=(t,e)=>{let n=this._make_merge_merges_actions(t,e);this._pod.$bulkEdit({actions:n})};this._spec_merge_merge_pin_merge_pin=(t,e)=>{C4({a:t,b:e},this._spec)};this._sim_merge_merge_pin_merge_pin=(t,e)=>{let n=S({},this._merge_to_pin[e]);this._sim_remove_merge(e);for(let i in n)this._sim_add_link_pin_to_merge(i,t)};this._merge_link_pin_link_pin=(t,e)=>{let{unitId:n,type:i,pinId:s}=it(t),{unitId:a,type:_,pinId:c}=it(e),p={[n]:{[i]:{[s]:!0}},[a]:{[_]:{[c]:!0}}},u=this._new_merge_id();this._spec_add_merge(u,p);let d=this.__sim_merge_link_pin_link_pin(u,t,e);return this._pod_add_merge(u,p),this._dispatch_action_add_merge(u,p),d};this._sim_merge_link_pin_link_pin=(t,e)=>{let n=this._new_merge_id();return this.__sim_merge_link_pin_link_pin(n,t,e)};this.__sim_merge_link_pin_link_pin=(t,e,n)=>{let{unitId:i,type:s,pinId:a}=it(e),{unitId:_,type:c,pinId:p}=it(n),u=At(t),d=s==="input",m=c==="input",h=this._is_link_pin_ref(e),f=this._is_link_pin_ref(n),b=!d&&h,g=!m&&f,v;b?v=i:g&&(v=_);let x={[i]:{[s]:{[a]:!0}},[_]:{[c]:{[p]:!0}}},I;if(v){let{x:w,y:T}=this._node[v];I={x:w,y:T}}else{let{x:w,y:T}=this._node[e],{x:C,y:P}=this._node[n],k=(w+C)/2,M=(T+P)/2;I={x:k,y:M}}this._sim_add_merge(t,x,I),this._sim_add_link_pin_to_merge(e,u),this._sim_add_link_pin_to_merge(n,u);let E=this._datum_to_pin[u];E&&this._refresh_datum_visible(E);let D=this._get_merge_datum_node_id(u);return D&&this._refresh_datum_visible(D),u};this.merge_link_pin_merge_pin=(t,e)=>{let{mergeId:n}=It(e),{unitId:i,type:s,pinId:a}=it(t);return this._dispatch_action(bg(n,s,i,a)),this._merge_link_pin_merge_pin(t,e)};this._merge_link_pin_merge_pin=(t,e,n=!0)=>{let{mergeId:i}=It(e),{unitId:s,type:a,pinId:_}=it(t);return this.__state_merge_link_pin_merge_pin(t,e,s,a,_,i),n&&this.__pod_add_pin_to_merge(i,s,a,_),e};this._state_merge_link_pin_merge_pin=(t,e)=>{let{mergeId:n}=It(e),{unitId:i,type:s,pinId:a}=it(t);return this.__state_merge_link_pin_merge_pin(t,e,i,s,a,n),e};this.__state_merge_link_pin_merge_pin=(t,e,n,i,s,a)=>(this._spec_add_link_pin_to_merge(a,n,i,s),this._sim_add_link_pin_to_merge(t,e),e);this._set_ref_link_pin_start_marker_r=(t,e)=>{let n=qe(t),i=this._link_marker_start[n],s=j0(e);i.setProp("d",s)};this._set_ref_link_pin_start_marker_to_node_r=(t,e,n=0)=>{let i=this._get_node_r(e);this._set_ref_link_pin_start_marker_r(t,i+n)};this._sim_change_link_pin_to_merge=(t,e)=>{let{type:n}=it(t),i=n==="input",s=this._pin_to_datum[t],a=this._merge_to_ref_unit[e],_=this._merge_to_ref_output[e],c=qe(t);if(a)this._sim_change_link_node(c,a,i),this._set_link_pin_padding_source(t,-1.75),this._set_link_pin_link_color(t,this._theme.data),this._refresh_pin_anchor_marker(t);else if(_)this._sim_change_link_node(c,_,i),this._set_link_pin_padding_source(t,-1.75),this._set_ref_link_pin_start_marker_to_node_r(t,_,1.75),this._refresh_pin_anchor_marker(t);else if(this._sim_change_link_node(c,e,i),s){let p=Vt(s,t);this._sim_change_link_target(p,e),this._refresh_datum_visible(s)}s&&(i?this._inc_merge_input_active(e):this._inc_merge_output_active(e)),this._show_link_text(c)};this._show_link_text=t=>{let e=this._link_text[t];e.$element.style.display="block"};this._hide_link_text=t=>{let e=this._link_text[t];e.$element.style.display="none"};this._sim_change_link_node=(t,e,n)=>{n?this._sim_change_link_source(t,e):this._sim_change_link_target(t,e)};this._sim_change_link_source=(t,e)=>{let n=this._link[t],i=n.source_id;n.source_id=e;let{target_id:s}=n;this._swap_node_node_link_count(i,e),_E(this._node_graph,i,e,s),this._rebuild_subgraph()};this._sim_change_link_target=(t,e)=>{let n=this._link[t],i=n.target_id,{source_id:s}=n;n.target_id=e,this._swap_node_node_link_count(i,e),aE(this._node_graph,s,i,e),this._rebuild_subgraph()};this._refresh_simulation_stability=()=>{let t=1;if(this._node_link_heap_root){let{value:{count:e}}=this._node_link_heap_root;t=rn(Math.ceil(e/2),1,4)}this._simulation.stability(t)};this._get_pin_datum_value=t=>{let e=this._pin_to_datum[t];if(e)return this._get_datum_value(e)};this._move_datum_to_pin=(t,e)=>{let n=this._datum_to_pin[t],{datumId:i}=Ae(t),s=this._get_datum_value(t),a=this._get_pin_datum_value(e);this._spec_move_datum_to_pin(t,e,s),this._sim_move_datum_to_pin(t,e),this._mem_set_pin_datum(e,i),this._pod_move_datum_to_pin(n,e,s,a,!1)};this._move_datum_to_plug=(t,e)=>{};this._pod_move_datum_to_pin=(t,e,n,i,s)=>{t&&t!==e&&this._pod_remove_pin_datum(t),this._pod_set_pin_data(e,n,i,s)};this._sim_move_datum_to_pin=(t,e)=>{let n=this._datum_to_pin[t];n&&n!==e&&(this._sim_remove_pin_datum_link(t),this._mem_remove_pin_datum_tree(n));let i=this._pin_to_datum[e];i&&this._sim_remove_pin_datum_link(i),this._sim_add_pin_datum_link(t,e),this._edit_datum_node_id===t&&(this._edit_datum_commited=!0)};this._spec_move_datum_to_pin=(t,e,n)=>{this._is_link_pin_node_id(e)&&this._is_link_pin_constant(e)&&this._spec_set_pin_data(e,n)};this._pod_push_data=(t,e,n)=>{this._pod.$push({pinId:e,data:n})};this._pod_take_input=t=>{this._pod_take_input__template(t,{takeInput:this._pod.$takeInput.bind(this._pod)})};this._pod_take_input__template=(t,{takeInput:e})=>{e({pinId:t})};this.set_pin_data=(t,e)=>{this._is_link_pin_node_id(t)?this.set_unit_pin_data(t,e):this._is_merge_node_id(t)&&this.set_merge_pin_data(t,e)};this.set_unit_pin_data=(t,e)=>{this._set_unit_pin_data(t,e);let{unitId:n,type:i,pinId:s}=it(t);this._dispatch_action(y1(n,i,s,e))};this._set_unit_pin_data=(t,e)=>{let n=this._pin_to_datum[t],i=n&&this._get_datum_value(n);this._state_set_unit_pin_data(t,e);let{unitId:s,type:a,pinId:_}=it(t);this._pod_set_unit_pin_data(s,a,_,e,i)};this._set_plug_data=(t,e)=>{this._spec_set_plug_data(t,e),this._sim_set_plug_data(t,e),this._pod_set_plug_data(t,e)};this._spec_set_plug_data=(t,e)=>{};this._sim_set_plug_data=(t,e)=>{};this._pod_set_plug_data=(t,e)=>{let{pinId:n,type:i}=gt(t);this._pod.$setPinData({type:i,pinId:n,data:e})};this._sim_set_pin_data_value=(t,e)=>{this._graph_debug_set_pin_value(t,e),this._is_link_pin_node_id(t)&&this._refresh_link_pin_color(t)};this._spec_set_pin_data=(t,e)=>{if(this._is_link_pin_node_id(t)){if(this._is_link_pin_constant(t)){let{unitId:n,type:i,pinId:s}=it(t);Mr({unitId:n,type:i,pinId:s,data:e},this._spec)}}else{let n=this._merge_to_pin[t];for(let i in n)this._spec_set_pin_data(i,e)}};this._pod_set_pin_data=(t,e,n,i)=>{if(this._flush_debugger(),this._is_link_pin_node_id(t)){let{unitId:s,type:a,pinId:_}=it(t);this._pod_set_unit_pin_data(s,a,_,e,n)}else{let{mergeId:s}=It(t);this._pod_set_merge_pin_data(s,e)}};this._pod_set_unit_pin_data=(t,e,n,i,s)=>{this._pod.$setUnitPinData({unitId:t,pinId:n,type:e,data:i,lastData:s})};this._pod_set_merge_pin_data=(t,e)=>{this._pod.$setMergeData({mergeId:t,data:e})};this._pod_set_metadata=(t,e)=>{this._pod.$setMetadata({path:t,data:e})};this._set_core_border_color=(t,e)=>{this._set_unit_core_style_attr(t,"borderColor",e)};this._set_unit_core_style_attr=(t,e,n)=>{let i=this._core[t];i&&(i.$element.style[e]=n)};this._set_core_and_layout_core_border_color=(t,e)=>{this._set_core_border_color(t,e),this._set_layout_core_border_color(t,e)};this._set_layout_core_border_color=(t,e)=>{let n=this._layout_core[t];n&&(n.$element.style.borderColor=e)};this._set_link_pin_opacity=(t,e)=>{this._set_link_pin_opacity_str(t,`${e}`),this._set_pin_text_opacity(t,e)};this._set_link_pin_opacity_str=(t,e)=>{let n=this._pin[t];n&&(n.$element.style.opacity=e);let i=qe(t),s=this._link_base[i];s.$element.style.opacity=e};this._set_link_pin_pointer_events=(t,e)=>{let n=this._pin[t];n&&(n.$element.style.pointerEvents=e);let i=qe(t),s=this._link_comp[i];s.$element.style.pointerEvents=e};this._set_exposed_pin_set_opacity=(t,e,n)=>{let i=this._get_pin_spec(t,e),{plug:s={}}=i;for(let a in s)this._set_exposed_sub_pin_opacity(t,e,a,n)};this._set_exposed_sub_pin_opacity=(t,e,n,i)=>{let s=`${i}`,a=t==="input",_=Kt(t,e,n),c=this._pin[_];c.$element.style.opacity=s;let p=De(t,e,n),u=this._pin[p];u.$element.style.opacity=s;let h=Vt(a?_:p,a?p:_),f=this._link_base[h];f.$element.style.opacity=s};this._get_exposed_pin_internal_node_id=(t,e,n)=>{let i=this._get_exposed_sub_pin_spec(t,e,n);return this._get_exposed_pin_spec_internal_node_id(t,i)||De(t,e,n)};this._get_exposed_pin_spec_internal_node_id=(t,e)=>{let{mergeId:n,unitId:i,pinId:s}=e;if(n){let a=At(n);return this._get_merge_anchor_node_id(a)}else return i&&s?s===$t?i:ut(i,t,s):null};this._set_exposed_sub_pin_color=(t,e,n,i)=>{let s=De(t,e,n),a=Kt(t,e,n),_=t==="input",c=this._pin[a];if(!c)return;c.$element.style.borderColor=i,_||(c.$element.style.backgroundColor=i);let p=this._ext_pin_name[a];p.$element.style.color=i;let u=this._exposed_link_end_marker[a],d=this._exposed_link_start_marker[a];u&&(u.$element.style.stroke=i),d&&(d.$element.style.stroke=i);let f=Vt(_?a:s,_?s:a),b=this._link_base[f];b.$element.style.stroke=i;let g=this._plug_to_datum[a];g&&this._set_datum_color(g,i,i)};this._refresh_exposed_pin_set_color=(t,e)=>{let n=this._get_pin_spec(t,e),{plug:i={}}=n;for(let s in i)this._refresh_exposed_sub_pin_color(t,e,s)};this._reset_exposed_pin_set_color=(t,e)=>{let n=this._get_pin_spec(t,e),{plug:i={}}=n;for(let s in i)this._reset_exposed_sub_pin_color(t,e,s)};this._get_exposed_sub_pin_color=t=>this._theme.node;this._refresh_exposed_sub_pin_color=(t,e,n)=>{let i=Kt(t,e,n),s=De(t,e,n);this._is_node_hovered(i)||this._is_node_selected(i)||this._is_node_ascend(i)||this._is_node_hovered(s)||this._is_node_selected(s)||this._is_node_ascend(s)?this._refresh_node_color(i):this._reset_exposed_sub_pin_color(t,e,n)};this._reset_exposed_sub_pin_color=(t,e,n)=>{let i;this._unit_datum[t][e]?i=this._theme.data:i=this._get_exposed_sub_pin_color(t),this._set_exposed_sub_pin_color(t,e,n,i)};this._set_exposed_pin_set_color=(t,e,n)=>{let i=this._get_pin_spec(t,e),{plug:s={}}=i;for(let a in s)this._set_exposed_sub_pin_color(t,e,a,n)};this._set_link_pin_link_color=(t,e)=>{let{unitId:n,type:i,pinId:s}=it(t),a=gd(n,i,s);this._set_link_color(a,e);let _=this._is_link_pin_ref(t),c=this._is_link_pin_ref(t),p=this._pin_link_end_marker[t],u=this._pin_link_start_marker[t];p&&(_||c?p.$element.style.stroke=e:p.$element.style.fill=e),u&&(_||c?u.$element.style.stroke=e:u.$element.style.fill=e)};this._set_link_color=(t,e)=>{let n=this._link_base[t];n&&(n.$element.style.stroke=e)};this._set_link_pin_pin_color=(t,e,n)=>{let{type:i}=it(t),s=i==="output",a=this._pin[t],_=this._is_link_pin_ref(t),c=_&&!s?Lt:e;a.$element.style.borderColor=c,i==="output"&&!_&&(a.$element.style.backgroundColor=e);let p=this._ref_output_pin_icon[t];p&&(p.$element.style.stroke=n)};this._refresh_datum_color=t=>{this._refresh_node_color(t)};this._refresh_pin_color=t=>{this._is_link_pin_node_id(t)?this._refresh_link_pin_color(t):(this._refresh_merge_pin_pin_color(t,"input"),this._refresh_merge_pin_pin_color(t,"output"))};this._refresh_link_pin_color=t=>{let{unitId:e}=it(t);this._is_node_hovered(t)||this._is_node_selected(t)||this._is_node_hovered(e)||this._is_node_selected(e)?this._refresh_node_color(t):this._reset_link_pin_color(t)};this._set_pin_text_opacity=(t,e)=>{this._is_link_pin_merged(t)?this._set_link_pin_link_text_opacity(t,e):this._set_link_pin_pin_text_opacity(t,e)};this._set_pin_text_color=(t,e)=>{this._is_link_pin_merged(t)?this._set_link_pin_link_text_color(t,e):this._set_link_pin_pin_text_color(t,e)};this._set_link_pin_pin_text_color=(t,e)=>{let n=this._pin_name[t];n.$element.style.color=e};this._set_link_pin_pin_text_opacity=(t,e)=>{let n=this._pin_name[t];n.$element.style.opacity=`${e}`};this._get_link_pin_text=t=>{let e=qe(t);return this._link_text[e]};this._set_link_pin_link_text_opacity=(t,e)=>{let n=this._get_link_pin_text(t);n.$element.style.opacity=`${e}`};this._set_link_pin_link_text_color=(t,e)=>{let n=this._get_link_pin_text(t);n.$element.style.fill=e};this.remove_datum=t=>{let{datumId:e}=Ae(t),n=this._get_datum_value(t);this._remove_datum(t),this._dispatch_action(Xf(e,n))};this._remove_datum=t=>{let{datum_pin_node_id:e,datum_plug_node_id:n}=this._get_datum_connected(t);this._pod_remove_datum(t,e,n),this._sim_remove_datum(t)};this._remove_node_datum_link=(t,e)=>{if(this._is_link_pin_node_id(e))this._remove_pin_datum_link(t);else if(this._is_merge_node_id(e)){let n=this._pin_to_datum[e];this._remove_pin_datum_link(t)}else this._is_ext_node_id(e)&&this._remove_plug_set_datum_link(e)};this._remove_plug_set_datum_link=t=>{let{type:e,pinId:n,subPinId:i}=gt(t);this._sim_remove_plug_set_datum_link(t),this._pod_remove_exposed_pin_datum(e,n)};this._sim_remove_plug_set_datum_link=t=>{let{type:e,pinId:n,subPinId:i}=gt(t);this._sim_remove_plug_datum_link(e,n,i),this._for_each_plug(e,n,s=>{let a=Kt(e,n,s);this._plug_to_datum[a]&&this._sim_remove_plug_datum(e,n,s)})};this._remove_pin_datum_link=t=>{let e=this._datum_to_pin[t];this._pod_remove_pin_datum(e),this._sim_remove_pin_datum_link(t),this._spec_remove_pin_datum_link(e,t)};this._spec_remove_pin_datum_link=(t,e)=>{this._is_link_pin_node_id(t)&&this._is_link_pin_constant(t)&&this._spec_remove_pin_data(t)};this._spec_remove_pin_data=t=>{let{unitId:e,type:n,pinId:i}=it(t);Cg({unitId:e,type:n,pinId:i},this._spec)};this._sim_remove_pin_datum_link=t=>{let e=this._datum_to_pin[t];delete this._datum_to_pin[t],delete this._pin_to_datum[e],this._sim_remove_datum_link(t,e),this._is_node_visible(e)&&this._refresh_node_color(e)};this._sim_remove_datum_link=(t,e)=>{let n=Vt(t,e);delete this._linked_data_node[t],delete this._visible_linked_data_node[t];let i=this._data_node[t];this._unlinked_data_node[t]=i,this._visible_data_node[t]&&(this._visible_unlinked_data_node[t]=i,this._set_node_layer(t,xa)),delete this._visible_data_link[n],delete this._data_link[n],this._sim_remove_link(n),this._refresh_node_color(t),this._refresh_compatible(),this._start_graph_simulation(di)};this._mem_remove_pin_datum_tree=t=>{if(delete this._pin_datum_tree[t],this._is_link_pin_node_id(t)){let{unitId:e,type:n}=it(t);this._spec_is_link_pin_ignored(t)||(this._dec_unit_pin_active(e),this._set_pin_text_color(t,this._theme.pin_text));let i=this._pin_to_merge[t];i&&(n==="input"?this._dec_merge_input_active(i):this._dec_merge_output_active(i),this._has_node(i)&&this._refresh_merge_pin_color(i))}else this._is_merge_node_id(t);this._is_link_pin_node_id(t)&&(this._has_node(t)&&this._refresh_link_pin_color(t),this._refresh_link_pin_link_color(t))};this._pod_remove_pin_datum=t=>{this._flush_debugger(),this._pod_remove_pin_datum__template(t,{takeInput:e=>this._pod.$takeInput(e),removeMergeData:e=>this._pod.$removeMergeData(e),removeUnitPinData:e=>this._pod.$removeUnitPinData(e)})};this._pod_remove_pin_datum__template=(t,{takeInput:e,removeMergeData:n,removeUnitPinData:i})=>{var a;this._flush_debugger();let{pinId:s}=(a=this._spec_get_pin_node_plug_spec("input",t))!=null?a:{};if(s)this._pod_take_input__template(s,{takeInput:e});else if(this._is_merge_node_id(t)){let{mergeId:_}=It(t);n({mergeId:_})}else{let{unitId:_,type:c,pinId:p}=it(t);i({unitId:_,type:c,pinId:p})}};this.remove_pin_from_merge=(t,e)=>{this._remove_pin_from_merge(t,e);let{mergeId:n}=It(t),{unitId:i,type:s,pinId:a}=it(e);this._dispatch_action(E1(n,s,i,a))};this._remove_pin_from_merge=(t,e,n=!0)=>{let{mergeId:i}=It(t),{unitId:s,type:a,pinId:_}=it(e);n&&this.__pod_remove_pin_from_merge(i,s,a,_),this._state_remove_pin_from_merge(t,e)};this._state_remove_pin_from_merge=(t,e)=>{this._sim_remove_pin_from_merge(t,e),this._spec_remove_pin_from_merge(t,e)};this.__state_remove_pin_from_merge=(t,e,n,i)=>{this.__sim_remove_pin_from_merge(t,e,n,i),this.__spec_remove_pin_from_merge(t,e,n,i)};this._spec_remove_pin_from_merge=(t,e)=>{let{mergeId:n}=It(t),{unitId:i,type:s,pinId:a}=it(e);this.__spec_remove_pin_from_merge(n,i,s,a)};this.__spec_remove_pin_from_merge=(t,e,n,i)=>{Xa({mergeId:t,unitId:e,type:n,pinId:i},this._spec)};this._sim_change_all_merge_input_to=(t,e)=>{let n=this._merge_to_input[t];for(let i in n){let s=qe(i);this._sim_change_link_source(s,e),this._refresh_link_pin_marker(i,e);let a=this._pin_to_datum[i];if(a){let _=Vt(a,i);this._sim_change_link_target(_,e)}}};this._refresh_link_pin_marker=(t,e)=>{let n=qe(t),i=this._get_node_shape(e),s=this._get_node_r(e),a=this._link_marker_start[n],_=Tv(i,s);a.setProp("d",_)};this.__sim_remove_pin_from_merge=(t,e,n,i,s)=>{let a=At(t),_=ut(e,n,i);this._sim_remove_pin_from_merge(a,_,s)};this._sim_remove_pin_from_merge=(t,e,n)=>{n=n||this._get_merge_position(t);let{mergeId:i}=It(t),{unitId:s,type:a,pinId:_}=it(e),c=this._is_link_pin_ref(e),p=this._is_merge_ref(t),u=a==="input",m=!u&&c,h=this._merge_to_ref_unit[t],f=this._merge_to_ref_output[t],b=this._spec_get_merge(i);delete this._pin_to_merge[e],delete this._merge_to_pin[t][e],delete this._merge_to_input[t][e],delete this._merge_to_output[t][e];let g=a==="output"&&_===$t;if(g&&(delete this._merge_to_ref_unit[t],delete this._ref_unit_to_merge[s]),m&&(delete this._merge_to_ref_output[t],delete this._ref_output_to_merge[e]),u?this._dec_merge_input_count(i):this._dec_merge_output_count(i),this._dec_merge_pin_count(i),!g&&!m){this._sim_add_link_pin_node(s,a,_,n);let E=u?e:s,D=u?s:e,w=Vt(E,D);this._sim_change_link_source(w,E),this._sim_change_link_target(w,D),this._hide_link_text(w)}else{let E=this._get_node_position(s);this._sim_add_merge_pin_node(i,E),this._sim_change_all_merge_input_to(t,t);let D=qe(e);_===$t||(this._hide_link_text(D),this._show_link_pin_name(e)),this._merge_pin_count[i]===0&&this._set_node_layer(t,Nn)}let v=this._merge_input[t],x=this._merge_output[t];if(u){if(this._merge_input_count[i]===0&&!p){let E=2*5;v.$element.style.visibility="hidden",x.$element.style.width=`${E}px`,x.$element.style.height=`${E}px`,x.$element.style.transform=""}}else this._merge_output_count[i]===0&&(p||(x.$element.style.visibility="hidden"));let I=this._pin_to_datum[e];if(I){u?this._dec_merge_input_active(t):this._dec_merge_output_active(t);let E=Vt(I,e);if(this._sim_change_link_target(E,e),!p){let{x:D,y:w}=this._predict_pin_datum_initial_position(e),T=this._node[I];T.x=D,T.y=w}this._refresh_datum_visible(I)}if(u&&(p||f)&&(this._set_link_pin_padding_source(e,-1.5),this._set_link_pin_start_marker_hidden(e,!1),this._set_ref_link_pin_start_marker_r(e,5)),u){let E=this._merge_to_output[t];for(let D in E){let{unitId:w}=it(D),T=Vt(w,s);this._unit_to_unit[T]--,this._unit_to_unit[T]===0&&delete this._unit_to_unit[T]}}else{let E=this._merge_to_input[t];for(let D in E){let{unitId:w}=it(D),T=Vt(s,w);this._unit_to_unit[T]--,this._unit_to_unit[T]===0&&delete this._unit_to_unit[T]}}if(!p){this._refresh_merge_pin_pin_color(t,a);let E=this._get_merge_datum_node_id(t);E&&this._refresh_datum_visible(E)}p&&this._refresh_core_border_color(s),this._collapse_init_node_id_set.has(t)&&(this._collapse_init_node_id_set.has(s)||this._start_node_long_press_collapse(e))};this._pod_remove_pin_from_merge=(t,e)=>{let{mergeId:n}=It(t),{unitId:i,type:s,pinId:a}=it(e);this.__pod_remove_pin_from_merge(n,i,s,a)};this.__pod_remove_pin_from_merge=(t,e,n,i)=>{this._flush_debugger(),this._pod.$removePinFromMerge({mergeId:t,unitId:e,type:n,pinId:i})};this._get_merge_pin_not_equal=(t,e)=>this._get_merge_pin_not_equal__template(t,e,()=>J(this._merge_to_pin[t]));this._get_merge_pin_not_equal__template=(t,e,n)=>{let i=n(t),s;for(let a of i)if(a!==e){s=a;break}return s};this._is_blue_drag_init_anchor=t=>!!this._blue_drag_init_anchor_to_pin[t];this._update_blue_drag_init_anchor=(t,e)=>{let n=this._blue_drag_init_anchor_to_pin[t];n&&(delete this._blue_drag_init_anchor_to_pin[t],this._blue_drag_init_anchor_to_pin[t]=n,this._blue_drag_init_pin_to_anchor[n]=t)};this._get_pin_merge_node_id=t=>this._pin_to_merge[t];this._get_pin_merge_id=t=>{let e=this._get_pin_merge_node_id(t);if(!e)return null;let{mergeId:n}=It(e);return n};this._get_merge_node_pin_count=t=>{let{mergeId:e}=It(t);return this._merge_pin_count[e]};this._get_merge_node_pins=t=>J(this._merge_to_pin[t]);this._spec_get_pin_merge_node_id=t=>{let{unitId:e,type:n,pinId:i}=it(t),{merges:s}=this._spec;for(let a in s){let _=s[a];if(nt(_,[e,n,i],null))return At(a)}return null};this._spec_get_merge_node_pin_count=t=>{let{mergeId:e}=It(t);return this._spec_get_merge_pin_count(e)};this._spec_get_merge_pin_count=t=>{let e=this._spec_get_merge(t);return Te(e)};this._spec_get_merge_node_pins=t=>{let{mergeId:e}=It(t),{merges:n}=this._spec,i=n[e],s=[];return Yt(i,(a,_,c)=>{let p=ut(a,_,c);s.push(p)}),s};this._dry_remove_pin_or_merge=(t,e=zt,n=zt)=>this._dry_remove_pin_or_merge__template(t,e,n,this._get_pin_merge_node_id,this._get_merge_node_pin_count,this._get_merge_node_pins);this._spec_dry_remove_pin_or_merge=(t,e=zt,n=zt)=>this._dry_remove_pin_or_merge__template(t,e,n,this._spec_get_pin_merge_node_id,this._spec_get_merge_node_pin_count,this._spec_get_merge_node_pins);this._dry_remove_pin_or_merge__template=(t,e=zt,n=zt,i,s,a)=>{let _=i(t);if(_){if(s(_)>2)return e(_),_;{let p=this._get_merge_pin_not_equal__template(_,t,a);return n(_,p),p}}};this._remove_pin_or_merge=(t,e)=>this._dry_remove_pin_or_merge(t,n=>{this.remove_pin_from_merge(n,t)},(n,i)=>{this._is_blue_drag_init_anchor(n)&&this._update_blue_drag_init_anchor(n,i);let s=p=>{if(p){let{pinId:u,type:d,subPinId:m}=gt(p);this._unplug_exposed_pin(d,u,m)}},a=p=>{if(p){let{pinId:u,type:d,subPinId:m}=gt(p),{unitId:h,type:f,pinId:b}=it(i);d===f&&this._plug_exposed_pin(f,u,m,{unitId:h,pinId:b})}},_=this._pin_to_int.input[n],c=this._pin_to_int.output[n];s(_),s(c),this.remove_merge(n),a(_),a(c)});this._sim_remove_pin_or_merge=(t,e)=>this._dry_remove_pin_or_merge(t,n=>{this._sim_remove_pin_from_merge(n,t,e)},(n,i)=>{let s=this._pin_to_ext.input[n],a=this._pin_to_ext.output[n];if(s){let{pinId:_,subPinId:c}=gt(s);this._sim_unplug_exposed_pin("input",_,c)}if(a){let{pinId:_,subPinId:c}=gt(a);this._sim_unplug_exposed_pin("output",_,c)}if(this._sim_remove_merge(n),i){let{unitId:_,type:c,pinId:p}=it(i);this._is_blue_drag_init_anchor(n)&&this._update_blue_drag_init_anchor(n,i);let u=c==="input"&&s,d=c==="output"&&a;if(u){let{pinId:m,subPinId:h}=gt(s);this._sim_plug_exposed_pin("input",m,h,{unitId:_,pinId:p})}else if(d){let{pinId:m,subPinId:h}=gt(a);this._sim_plug_exposed_pin("output",m,h,{unitId:_,pinId:p})}}});this._spec_remove_pin_or_merge=t=>this._spec_dry_remove_pin_or_merge(t,e=>{this._spec_remove_pin_from_merge(e,t)},(e,n)=>{let{mergeId:i}=It(e),s=G1(this._spec,"input",i),a=G1(this._spec,"output",i);s&&this._spec_unplug_sub_pin("input",s.pinId,s.subPinId),a&&this._spec_unplug_sub_pin("output",a.pinId,a.subPinId),this._spec_remove_merge(i);let{unitId:_,type:c,pinId:p}=it(n);s&&this._spec_plug_sub_pin("input",s.pinId,s.subPinId,{unitId:_,pinId:p}),a&&this._spec_plug_sub_pin("output",a.pinId,a.subPinId,{unitId:_,pinId:p})});this._state_remove_pin_or_merge=t=>this._dry_remove_pin_or_merge(t,e=>{this._state_remove_pin_from_merge(e,t)},(e,n)=>{this._state_remove_merge(e)});this._pod_remove_pin_or_merge=t=>this._dry_remove_pin_or_merge(t,e=>{this._pod_remove_pin_from_merge(e,t)},(e,n)=>{this._pod_remove_merge(e)});this._sim_remove_pin_type=t=>this._sim_remove_node_type(t);this._sim_remove_node_type=t=>{let e=uo(t);if(!this._has_node(e))return;let n=Vt(e,t);this._mem_remove_node_type(t),this._sim_remove_link(n),this._sim_remove_node(e)};this._mem_remove_node_type=t=>{let e=uo(t),n=Vt(e,t);delete this._type_link[n],delete this._type_container[e],delete this._type_node[e],delete this._type[e],delete this._node_type[e]};this._sim_remove_link_pin_pin=t=>{this._sim_remove_pin_type(t),delete this._pin[t],delete this._pin_node[t],delete this._pin_name[t],delete this._spec_link_pin_ignored[t],delete this._normal_node[t],delete this._ignored_node[t],this._sim_remove_node(t)};this._sim_remove_link_pin_link=t=>{let{unitId:e,type:n,pinId:i}=it(t),s=gd(e,n,i);delete this._pin_link_start_marker[t],delete this._pin_link_end_marker[t],this._link_pin_input_set.delete(t),this._link_pin_output_set.delete(t),this._link_pin_ref_set.delete(t),delete this._pin_link[s],this._sim_remove_link(s)};this.remove_merge=t=>{this._dispatch_action_remove_merge(t),this._remove_merge(t)};this._remove_merge=(t,e=!0)=>{let{mergeId:n}=It(t);e&&this._pod_remove_merge(t),this._sim_remove_merge(t),this._spec_remove_merge(n)};this._state_remove_merge=t=>{let{mergeId:e}=It(t);this._sim_remove_merge(t),this._spec_remove_merge(e)};this.__state_remove_merge=t=>{this.__sim_remove_merge(t),this._spec_remove_merge(t)};this._pod_remove_merge=t=>{this._flush_debugger();let{mergeId:e}=It(t),n=this._spec_get_merge(e),i=this._get_merge_position(t);this._pod.$removeMerge({mergeId:e,mergeSpec:n,position:i})};this._spec_remove_merge=t=>{Ya({mergeId:t},this._spec)};this._is_link_pin_output_ref=(t,e)=>t==="output"&&e===$t;this._sim_remove_merge=t=>{let{mergeId:e}=It(t),n=this._get_merge_anchor_node_id(t),i=this._get_node_position(n),s=B(this._merge_to_pin[t]),a=B(this._merge_to_input[t]);for(let h in s)this._sim_remove_pin_from_merge(t,h,i);let _=this._pin_to_int.input[t];if(_){let{type:h,pinId:f,subPinId:b}=gt(_);this._sim_unplug_exposed_pin(h,f,b)}let c=this._pin_to_int.output[t];if(c){let{type:h,pinId:f,subPinId:b}=gt(c);this._sim_unplug_exposed_pin(h,f,b)}let p=this._pin_to_datum[t];p&&this._sim_remove_datum(p);let u=this._is_merge_ref(t),d=this._merge_to_ref_unit[t],m=this._merge_to_ref_output[t];if(delete this._merge_pin_count[e],delete this._merge_input_count[e],delete this._merge_output_count[e],delete this._merge_to_pin[t],delete this._merge_to_input[t],delete this._merge_to_output[t],delete this._merge_active_output_count[t],delete this._merge_active_input_count[t],delete this._merge_ref[t],delete this._merge_to_ref_output[t],delete this._merge[t],delete this._merge_input[t],delete this._merge_output[t],delete this._pin_datum_tree[t],u)if(d){delete this._merge_to_ref_unit[t],delete this._ref_unit_to_merge[d],this._refresh_core_border_color(d);for(let h in a){let{unitId:f}=it(h);this._refresh_core_border_color(f),this._refresh_link_pin_link_color(h)}}else delete this._merge_to_ref_output[t],delete this._ref_output_to_merge[m];this._node[t]&&(this._sim_remove_pin_type(t),this._sim_remove_merge_node(t)),this._start_graph_simulation(he)};this._sim_remove_merge_node=t=>{delete this._pin_node[t],delete this._normal_node[t],delete this._empty_merge_node[t],delete this._node_type[t],this._empty_merge_node[t]&&this._remove_merge_empty(t),this._sim_remove_node(t),this._remove_node_link_heap(t)};this.__sim_remove_merge=t=>{let e=At(t);this._sim_remove_merge(e)};this._sim_remove_link=t=>{let e=this._link[t],{source_id:n,target_id:i}=e;this._unlisten_link(t);let s=this._link_comp[t];this._zoom_comp.removeChild(s);let a=this._link_id_hover_pointer_id[t];a&&(delete this._link_id_hover_pointer_id[t],delete this._pointer_id_hover_link_id[a]),delete this._link_comp[t],delete this._link_base[t],delete this._link_base_area[t],delete this._link_text[t],delete this._link_text_value[t],delete this._link_text_path[t],delete this._link_marker_end[t],delete this._link_marker_start[t],delete this._link_force_count_k[t];let _=Math.abs(this._link_layer[t]);delete this._layer_link[_][t],delete this._link_layer[t],this._remove_max_link_length_to_node_heap(n,t),this._remove_max_link_length_to_node_heap(i,t),delete this._link[t],this._dec_node_node_link_count(n,i),rE(this._node_graph,n,i),this._rebuild_subgraph()};this._unlisten_node=t=>{let e=this._node_unlisten[t];delete this._node_unlisten[t],e()};this._unlisten_link=t=>{let e=this._link_unlisten[t];delete this._link_unlisten[t],e()};this.__set_node_pressed=(t,e,n)=>{n?(this._pressed_node_pointer_count++,this._node_pressed_count[t]=this._node_pressed_count[t]||0,this._node_pressed_count[t]++,this._node_pressed_count[t]===1&&this._pressed_node_count++,this._pressed_node_id_pointer_id[t]=this._pressed_node_id_pointer_id[t]||{},this._pressed_node_id_pointer_id[t][e]=!0,this._pointer_id_pressed_node_id[e]=t):(this._pressed_node_pointer_count--,this._node_pressed_count[t]--,this._node_pressed_count[t]===0&&this._pressed_node_count--,delete this._pressed_node_id_pointer_id[t][e],this._node_pressed_count[t]===0&&delete this._pressed_node_id_pointer_id[t],delete this._pointer_id_pressed_node_id[e])};this._sim_remove_node=t=>{var p;this._node_count--;let e=this._selected_node_id[t];e&&this.__deselect_node(t),this._is_node_unlocked(t)&&this._lock_node(t);let n=this._target_node[t];if(n)for(let u of n)this._remove_node_target(u);if(this._node_target[t]&&this._remove_node_target(t),this._drag_node_id[t]){let u=this._drag_node_pointer_id[t];if(this._set_drag_node(t,!1),e)for(let d in this._selected_node_id)this._drag_node_pointer_id[d]===u&&this._on_node_drag_end(d)}if(this._collapse_node_id.has(t)&&this._stop_node_long_press_collapse(t),this._pressed_node_id_pointer_id[t]){for(let u in this._pressed_node_id_pointer_id[t])this.__set_node_pressed(t,Number.parseInt(u,10),!1);delete this._pressed_node_id_pointer_id[t],delete this._node_pressed_count[t]}if(this._hover_node_id[t]){delete this._hover_node_id[t],delete this._hover_node_pointer_count[t];for(let u in this._hover_node_id_pointer_id[t])delete this._pointer_id_hover_node_id[u];delete this._hover_node_id_pointer_id[t],this._hover_node_count--}delete this._static_count[t],delete this._static_position[t];let s=(p=this._node_charge[t])!=null?p:{};for(let u in s)delete this._node_charge[u][t];delete this._node_charge[t],this._unlisten_node(t);let a=this._node_comp[t];this._ascend_node_dict[t]?this._zoom_comp_alt.removeChild(a):this._zoom_comp.removeChild(a),delete this._ascend_node_dict[t],delete this._node[t],delete this._node_z[t],delete this._node_fixed[t],delete this._node_draggable[t],delete this._node_selection[t],delete this._node_comp[t],delete this._node_content[t],delete this._node_link_count[t],delete this._node_max_link_length_heap[t],delete this._node_link_heap_node[t],this._compatible_node_id[t]&&(delete this._compatible_node_id[t],this._compatible_node_count--);let c=Math.abs(this._node_layer[t]);delete this._node_layer[t],delete this._layer_node[c][t],pE(this._node_graph,t),this._rebuild_subgraph()};this._mem_remove_node_id=t=>{delete this._compatible_node_id[t],delete this._pressed_node_id_pointer_id[t],delete this._node_pressed_count[t],delete this._hover_node_id[t],delete this._hover_node_pointer_count[t],delete this._hover_node_id_pointer_id[t],delete this._static_count[t],delete this._static_position[t],delete this._node_layer[t],delete this._node_charge[t],delete this._node[t],delete this._node_fixed[t],delete this._node_draggable[t],delete this._node_selection[t],delete this._node_comp[t],delete this._node_content[t],delete this._node_link_count[t]};this._rebuild_subgraph=()=>{if(this._drag_count>0)for(let t in this._drag_node_id)this._stop_drag_node_static(t);if(this._node_to_subgraph={},this._subgraph_to_node={},cE(this._node_graph,this._node_to_subgraph,this._subgraph_to_node,{}),this._drag_count>0)for(let t in this._drag_node_id)this._start_drag_node_static(t)};this._on_link_pointer_down=(t,e)=>{if(this._mode==="none"){let n=this._link_id_to_node_id(t);if(n){let{clientX:i,clientY:s}=e,{x:a,y:_}=this._screen_to_world(i,s);if(this._is_link_pin_node_id(n))this._is_link_pin_merged(n)&&this._remove_pin_or_merge(n);else if(this._is_int_node_id(n)&&this._int_to_node[n]){let{type:c,pinId:p,subPinId:u}=gt(n);this._unplug_exposed_pin(c,p,u)}this._set_node_position(n,{x:a,y:_}),this._on_node_pointer_enter(n,e),this._on_node_pointer_down(n,e),this._on_node_drag_start(n,e)}}};this._link_id_to_node_id=t=>{if(yd(t)){let{pinNodeId:e}=Wr(t);return e}else if(Sy(t)){let{datumNodeId:e}=Ey(t);return e}else if(Dy(t)){let{externalNodeId:e}=wy(t);return e}else return null};this._on_link_pointer_enter=(t,e)=>{let{pointerId:n}=e;this._pointer_id_hover_link_id[n]=t,this._link_id_hover_pointer_id[t]=n;let i=this._link_id_to_node_id(t);i&&this._on_node_pointer_enter(i,e)};this._on_link_pointer_leave=(t,e)=>{let{pointerId:n}=e;delete this._pointer_id_hover_link_id[n],delete this._link_id_hover_pointer_id[t];let i=this._link_id_to_node_id(t);i&&this._pointer_id_pressed_node_id[n]!==i&&this._on_node_pointer_leave(i,e)};this._on_link_long_click=(t,e)=>{if(yd(t)){let{pinNodeId:n}=Wr(t);(this._mode==="remove"||this._mode==="change"||this._mode==="add"||this._mode==="data")&&this._on_node_long_click(n,e)}};this._on_link_long_press=(t,e)=>{if(yd(t)){let{pinNodeId:n}=Wr(t);(this._mode==="remove"||this._mode==="change"||this._mode==="add"||this._mode==="data")&&this._on_node_long_press(n,e)}};this._on_link_click=(t,e)=>{if(yd(t)){let{pinNodeId:n}=Wr(t);(this._mode==="remove"||this._mode==="change"||this._mode==="add"||this._mode==="data")&&this._on_node_click(n,e)}else if(Dy(t)){let{externalNodeId:n}=wy(t);this._on_node_click(n,e)}else if(Sy(t)){let{datumNodeId:n}=Ey(t);this._on_node_click(n,e)}};this._on_component_resize_start=(t,{direction:e,pointerId:n})=>{this._resize_node_id_pointer_id[t]=n,this._resize_pointer_id_node_id[n]=t,this._resize_pointer_count++;let i=`${e}-resize`;if(this._graph.$element.style.cursor=i,this._selected_node_id[t]){for(let s in this._selected_node_id)if(Vo(s)&&this._is_unit_component(s)){let a=this._get_node_size(s);this._resize_start_component(s,a)}}else{let s=this._get_node_size(t);this._resize_start_component(t,s)}};this._is_layout_component_layer_visible=t=>this._layout_path.includes(t);this._is_layout_component_layer_current=t=>{let e=this._spec_get_sub_component_parent_id(t),n=this._get_current_layout_layer_id();return e===n};this._on_component_resize=(t,{dx:e,dy:n,dw:i,dh:s})=>{if(!(this._drag_count>0))if(this._selected_node_id[t])for(let a in this._selected_node_id){let _=!1;Vo(a)&&this._is_unit_component(a)&&(this._tree_layout?this._is_layout_component_layer_current(a)&&(_=!0):_=!0),_&&this._delta_resize_component(a,e,n,i,s)}else this._delta_resize_component(t,e,n,i,s)};this._on_component_resize_end=(t,e)=>{let n="default";this._graph.$element.style.cursor=n;let i=this._resize_node_id_pointer_id[t];if(delete this._resize_node_id_pointer_id[t],delete this._resize_pointer_id_node_id[i],this._resize_pointer_count--,this._selected_node_id[t])for(let s in this._selected_node_id)Vo(s)&&this._is_unit_component(s)&&this._resize_end_component(s);else this._resize_end_component(t)};this._get_datum_tree=t=>{let{datumId:e}=Ae(t);return this._datum_tree[e]};this._get_datum_value=t=>{let e=this._get_datum_tree(t),{value:n}=e;return n};this._is_datum_tree_valid=t=>{let e=this._get_datum_tree(t);return No(e)};this._is_pin_datum_tree_valid=t=>{let e=this._pin_datum_tree[t];return e&&No(e)};this._get_datum_tree_shape=t=>{var i;let{classes:e}=this.$system,{specs:n}=this.$props;if(t.type==="unit"){let s=Ri(t.value,n,e),{unit:a}=s;return on(Wt(n,(i=s.specs)!=null?i:{}),a.id)?"rect":"circle"}else return"rect"};this._get_datum_tree_size=t=>{var n;let{specs:e}=this.$props;if(t.type==="unit"){let i=Ri(t.value,e,this.$system.classes),{unit:s}=i,a=So(Wt(e,(n=i.specs)!=null?n:{}),s.id,!0)-1.5;return{width:2*a,height:2*a}}else{let{width:i,height:s}=uD(t),a=i>Yi?3:0,_=s>nv?3:0;return i=Math.min(i,Yi)+_,s=Math.min(s,nv)+a,{width:i,height:s}}};this._on_datum_change=(t,{data:e})=>{t===this._edit_datum_id&&(this._edit_datum_commited=!1,this._edit_datum_never_changed=!1),this._sim_set_datum(t,e)};this._focus_datum=(t,e)=>{let n=Xe(t),i=this._datum[n];i&&i instanceof Xi&&i.focusChild(e,{preventScroll:!0})};this._for_each_pin=t=>{for(let e in this._unit_node)this._for_each_unit_pin(e,(n,i,s)=>{t(e,n,i,s)})};this._for_each_unit_pin=(t,e,n=!1)=>{let i=this._get_unit_spec(t);if(this._for_each_spec_input(i,s=>{let a=Er(t,s);e(a,"input",s)}),this._for_each_spec_output(i,s=>{let a=Vr(t,s);e(a,"output",s)}),n){let s=Kn(t);e(s,"output",$t)}};this._for_each_unit_input=(t,e)=>{let n=this._get_unit_spec(t);this._for_each_spec_input(n,i=>{let s=Er(t,i);e(s,i)})};this._for_each_unit_ref_input=(t,e)=>{this._for_each_unit_input(t,(n,i)=>{this._is_link_pin_ref(n)&&e(n,i)})};this._for_each_unit_merged_pin=(t,e)=>{};this._for_each_merge_pin=(t,e)=>{let n=this._spec_get_merge(t);Yt(n,e)};this._for_each_spec_id_pin=(t,e)=>{this._for_each_spec_id_input(t,n=>{e("input",n)}),this._for_each_spec_id_output(t,n=>{e("output",n)})};this._for_each_spec_id_input=(t,e)=>{let{getSpec:n}=this.$props,i=n(t);return this._for_each_spec_input(i,e)};this._for_each_spec_input=(t,e)=>{let{inputs:n={}}=t;for(let i in n)e(i)};this._for_each_spec_id_output=(t,e)=>{let{getSpec:n}=this.$props,i=n(t),{outputs:s={}}=i;for(let a in s)e(a)};this._for_each_spec_output=(t,e)=>{let{outputs:n={}}=t;for(let i in n)e(i)};this._for_each_unit_output=(t,e)=>{let n=this._get_unit_spec(t);this._for_each_spec_output(n,i=>{let s=Vr(t,i);e(s,i)})};this._for_each_visible_unit_output=(t,e)=>{this._for_each_unit_output(t,(n,i)=>{this._spec_is_link_pin_ignored(n)||e(n,i)})};this._set_datum=(t,e)=>{this._sim_set_datum(t,e)};this._sim_set_datum=(t,e)=>{this._datum_tree[t]=e;let n=Xe(t);if(e.type==="unit"){let i=this._datum[n];i.setProp("id",e.value),i.dispatchEvent("datumchange",{data:e})}else{let{width:i,height:s}=this._get_datum_tree_size(e),a=this._datum_to_pin[n],_=a&&Vt(n,a);this._resize_datum(n,i,s);let c;a?c=this._is_datum_pin_type_match(n,a):c=No(e),this._refresh_datum_color(n)}this._refresh_compatible()};this._edit_datum_just_blurred=!1;this._edit_datum_never_changed=!0;this._unlocked_datum=new Set;this._unlock_datum=t=>{this._unlocked_datum.add(t),this._disable_datum_overlay(t),this._unlock_node(t)};this._lock_datum=t=>{this._unlocked_datum.delete(t),this._enable_datum_overlay(t),this._lock_node(t)};this._unlocked_node=new Set;this._unlock_node=t=>{this._unlocked_node.add(t),this._refresh_node_selection(t)};this._lock_node=t=>{this._unlocked_node.delete(t),this._refresh_node_selection(t)};this._is_node_unlocked=t=>this._unlocked_node.has(t);this._lock_all_datum=()=>{for(let t of new Set(this._unlocked_datum))this._lock_datum(t)};this._is_datum_unlocked=t=>this._unlocked_datum.has(t);this._on_datum_blur=(t,{data:e})=>{let n=Xe(t);if(this._edit_datum_id===t){let i=this._edit_datum_id;this._edit_datum_id=null,this._edit_datum_node_id=null,this._edit_datum_path=null;let s=this._edit_datum_commited||this._edit_datum_never_changed;this._lock_datum(n),this._commit_data_value(i,e,s),this._edit_datum_just_blurred=!0,setTimeout(()=>{this._edit_datum_just_blurred=!1},0)}!this._disabled&&this._control_lock&&(this._enable_crud(),this._enable_keyboard())};this._commit_data_value=(t,e,n=!1)=>{this._edit_datum_commited=!0;let i=Xe(t),s=this._datum_to_pin[i],a=this._datum_to_plug[i];s?this._is_output_pin_node_id(s)?n||this._remove_pin_datum_link(i):this._is_datum_pin_type_match(i,s)?n||this.set_pin_data(s,e.value):this._remove_pin_datum_link(i):a&&(this._is_datum_plug_type_match(i,a)?n||this._set_plug_data(a,e.value):this._remove_plug_set_datum_link(a)),bi(e.value)===""&&this._has_node(i)&&this._sim_remove_datum(i)};this._on_datum_focus=(t,{data:e,path:n})=>{let i=Xe(t);this._is_node_selected(i)||(this._deselect_all(),this._select_node(i)),this._is_node_unlocked(i)||this._unlock_datum(i),this._edit_datum_id=t,this._edit_datum_node_id=i,this._edit_datum_path=n,this._edit_datum_never_changed=!0,this._refresh_node_selection(i),this._disable_crud(),this._disable_keyboard()};this._sim_remove_datum=t=>{let{datumId:e}=Ae(t),n=this._datum_unlisten[e];n(),delete this._datum_unlisten[e],this._is_datum_unlocked(t)&&this._lock_datum(t),this._edit_datum_node_id===t&&(this._edit_datum_node_id=null,this._edit_datum_id=null,this._edit_datum_path=null,this._enable_crud(),this._enable_keyboard(),this.focus());let i=this._datum_to_pin[t];i&&this._sim_remove_pin_datum_link(t);let s=this._datum_to_plug[t];if(s){let{type:a,pinId:_,subPinId:c}=gt(s);this._sim_remove_plug_datum_link(a,_,c)}delete this._data_node[t],delete this._node_type[t],this._sim_remove_node(t),delete this._visible_data_node[t],delete this._hidden_data_node[t],delete this._linked_data_node[t],delete this._visible_linked_data_node[t],delete this._visible_unlinked_data_node[t],delete this._unlinked_data_node[t],delete this._invalid_datum_data[t],delete this._invalid_datum_node_id[t],delete this._datum[t],delete this._datum_container[t],delete this._datum_area[t],delete this._datum_overlay[t],delete this._datum_tree[e],i&&this._refresh_node_color(i),this._start_graph_simulation(di)};this._remove_unit_merges=t=>{let e={};return this._for_each_unit_pin(t,n=>{if(this._pin_to_merge[n]){let s=this._remove_pin_or_merge(n);e[n]=s,this._refresh_link_pin_color(n)}}),e};this._sim_remove_unit_merges=t=>{let e={};if(this._for_each_unit_pin(t,n=>{if(this._pin_to_merge[n]){let s=this._sim_remove_pin_or_merge(n);e[n]=s,this._refresh_link_pin_color(n)}}),this._ref_unit_to_merge[t]){let n=Kn(t);this._sim_remove_pin_or_merge(n)}return e};this._spec_remove_unit_merges=t=>{this._for_each_unit_pin(t,(e,n,i)=>{this._spec_remove_pin_or_merge(e)},!0)};this._state_remove_unit_merges=t=>{this._sim_remove_unit_merges(t),this._spec_remove_unit_merges(t)};this._state_remove_unit_plugs__template=(t,e)=>{xe(e,(n,i,{pinId:s,subPinId:a})=>{this._state_unplug_exposed_pin(n,s,a)})};this._state_remove_unit_plugs=t=>{let e=this._get_unit_plugs(t);this._state_remove_unit_plugs__template(t,e)};this.remove_unit=t=>{this._remove_unit(t),this._dispatch_action_remove_unit(t)};this._remove_unit=(t,e=!0)=>{let n=this._is_unit_component(t);e&&this._pod_remove_unit(t,n),this._state_remove_unit(t)};this.state_remove_unit=t=>{this._state_remove_unit(t)};this._state_remove_unit=(t,e=!0)=>{this._sim_remove_unit(t),this._spec_remove_unit(t,e)};this._spec_remove_unit=(t,e=!0)=>{let n=this._get_unit(t);this._is_unit_component(t)&&this._spec_remove_component(t),e&&this._unregister_unit(n.id),Pg({unitId:t},this._spec),this._spec_update_metadata_complexity()};this._spec_remove_component=t=>{let e=this._spec_get_sub_component_parent_id(t);this._spec_remove_component_children(t,e),e?this._spec.component=M0({id:e,childId:t},this._spec.component||{}):this._spec.component=va({id:t},this._spec.component||{}),this._spec.component=gv({id:t},this._spec.component||{}),delete this._layout_node[t],delete this._layout_target_node[t],delete this._layout_layer[t],this._refresh_tree_sub_component_index(),this._refresh_layout_node_target_position(e),this._tree_layout&&this._move_all_layout_node_target_position(e)};this._pod_remove_unit=(t,e)=>{this._flush_debugger(),this._pod.$removeUnit({unitId:t}),e&&this._disconnect_sub_component(t)};this._pod_remove_unit__template=(t,e,{removeUnit:n})=>{this._pod.$removeUnit({unitId:t}),e&&this._disconnect_sub_component(t)};this._sim_graph_unit_remove_pin=t=>{let{type:e,unitId:n,pinId:i}=it(t);nt(this._constant_input_ref_interval,[n,i],void 0)&&this._unwatch_constant_input_ref(n,"input",i);let s=this._pin_to_int[e][t];if(s){let{type:d,pinId:m,subPinId:h}=gt(s);this._sim_unplug_exposed_pin(d,m,h)}let a=this._ref_output_to_merge[t];a&&this._sim_remove_merge(a);let _=this._pin_to_datum[t];_&&(this._sim_remove_datum(_),this._mem_remove_pin_datum_tree_if(t)),this._pin_datum_tree[t]&&(this._dec_unit_pin_active(n),delete this._pin_datum_tree[t]),this._pin_to_merge[t]&&this._sim_remove_pin_or_merge(t);let u=e==="output"&&i===$t;u||this._sim_remove_link_pin_link(t),!this._is_link_pin_merged(t)&&!u&&this._sim_remove_link_pin_pin(t),this._node_link_heap[t]&&this._remove_node_link_heap(t),this._start_graph_simulation(he)};this._sim_remove_component=(t,e,n=!0,i=!0)=>{let s=this._get_sub_component(t),a=this._spec_get_sub_component_parent_id(t),_=this._spec_get_sub_component_children(t);if(this._cancel_layout_core_animation(t),this._cancel_enter_sub_component_animation(t),this._cancel_leave_sub_component_animation(t),this._tree_layout&&_.length>0)for(let c of _)this._measure_sub_component_base(c);if(this._search_unit_id===t||(this._in_component_control&&e&&this._displace_sub_component(t),n&&this.__move_sub_component(t,c=>{this._get_sub_component(c).pullParentRoot(s)},()=>{this._component.pullRoot(s)})),this._animating_sub_component_base_id.has(t)&&this._animating_sub_component_base_id.delete(t),this._tree_layout&&_.length>0){let c=this._get_current_layout_layer_id(),p="default";for(let u of _)this._remove_sub_component_child(t,u),this._remove_sub_component_root_base(u),this._mem_push_sub_component(c,u,p);this._animate_layout_sub_component_remove_children(t,"default",_,()=>{this._end_layout_sub_component_transfer_children_animation(t,"default",_);for(let u of _)this._append_sub_component_base(u),this._enter_sub_component_frame(u)})}this._is_sub_component_fullwindow(t)&&(this._decouple_sub_component(t),this._fullwindow_component_set.delete(t),vn(this._fullwindow_component_ids,t)),this._sim_move_out_sub_component_layout_children(t,a),e&&(this._tree_layout||this._sim_move_out_sub_component_children(t,a),this._sim_remove_sub_component_roots(t)),this._sim_remove_layout_core(t),this._mem_remove_component(t),i&&s&&s.destroy()};this._sim_remove_sub_component_roots=t=>{let e=this._get_sub_component(t);if(e){if(this._abort_sub_component_enter_base_animation[t]||this._abort_sub_component_leave_base_animation[t]){let s=this._get_sub_component_base(t);this._unplug_base_frame(t,s)}let n=this._spec_get_sub_component_parent_id(t),i=this._get_sub_component(n);n?i.hasParentRoot(e)&&i.pullParentRoot(e):this._component.hasRoot(e)&&this._component.pullRoot(e),this._component.removeSubComponent(t),e.destroy()}};this._sim_remove_layout_core=t=>{let e=this._spec_get_sub_component_parent_id(t),n=this._spec_get_sub_component_children(t),i=this._layout_core[t],s=this._ensure_parent_layout_layer(t),a=this._get_layout_layer(t);s.children.removeChild(i),a&&s.layers.removeChild(a.layer);let _=this._layout_sub_component_parent[t]||null;_&&this._refresh_component_children_counter_up(_,-(1+(this._layout_component_count[t]||0))),delete this._layout_core[t]};this._cancel_graph_core_size_animation=t=>{let e=this._abort_graph_node_transition[t];e&&(e(),delete this._abort_graph_node_transition[t])};this._sim_remove_unit_core=t=>{this._cancel_graph_core_size_animation(t);let e=Kn(t);this._ref_unit_to_merge[t]&&this._sim_remove_pin_or_merge(e);let i=this._spec_get_pin_node_plug_spec("output",e),{pinId:s,subPinId:a}=i!=null?i:{};s&&a&&this._sim_unplug_exposed_pin("output",s,a),delete this._node_type[e],this._err[t]!==void 0&&this._sim_remove_unit_err(t),delete this._node_type[t],this._sim_remove_node(t),this._remove_node_link_heap(t),delete this._core[t],delete this._core_content[t],delete this._core_area[t],delete this._core_name[t],delete this._core_description[t],delete this._core_icon[t],delete this._normal_node[t];let _=this._subgraph_cache[t];if(_&&(this._subgraph_unit_id===t&&this._leave_subgraph(),this._subgraph.removeChild(_),_.destroy()),delete this._subgraph_cache[t],delete this._subgraph_pod_cache[t],delete this._unit_node[t],delete this._err[t],delete this._graph_state[t],this._unit_count--,this._minimap&&this._minimap.tick(),this._unit_count===0&&this._minimap_screen&&(this._minimap_screen.$element.style.display="none"),this._abort_graph_node_transition[t]){let c=this._abort_graph_node_transition[t];c()}};this._sim_remove_unit_pins=t=>{this._for_each_unit_pin(t,n=>{this._sim_graph_unit_remove_pin(n),delete this._node_type[n]});let e=Kn(t);this._sim_graph_unit_remove_pin(e)};this._sim_remove_unit=t=>{this._is_unit_component(t)&&this._sim_remove_component(t,!0),this._sim_remove_unit_body(t)};this._sim_remove_unit_body=t=>{this._sim_remove_unit_pins(t),this._sim_remove_unit_core(t)};this._remove_nodes=(t,e=!1)=>{let{unit_ids:n,merge_node_ids:i,link_pin_node_ids:s,exposed_node_ids:a,datum_node_ids:_,err_node_ids:c}=this._decant_node_ids(t);this._flush_debugger();let p=ve({},{}),u={input:new Set,output:new Set},d=[],m=new Set,h=new Set,f=ve({},{});for(let g of a){let{type:v,pinId:x,subPinId:I}=gt(g);if(tt(f,[v,x,I],!0),!u[v].has(x)){let E=this._get_exposed_pin_set_count(g);if(E===1||E===0){u[v].add(x);let D=this._get_pin(v,x);d.push(xr(v,x,D))}else if(!p[v][x]||!p[v][x].has(I)){p[v][x]=p[v][x]||new Set,p[v][x].add(I);let D=this._get_exposed_sub_pin_spec(v,x,I);d.push(b1(v,x,I,D))}}}for(let g of i)h.add(g),d.push(this._make_remove_merge_action(g)),this._dispatch_action_remove_merge(g);for(let g of n)if(m.add(g),this._search_unit_id===g)this._mem_remove_search_unit_id(),this._hide_search();else{let v=this._is_unit_component(g);d.push(this._make_remove_unit_action(g)),v&&this._disconnect_sub_component(g),this._dispatch_action_remove_unit(g)}let b=(g,v,x)=>{this._pod_remove_datum__template(g,v,x,{takeInput(I){d.push(hE(I))},removeMergeData(I){d.push(g4(I))},removeUnitPinData(I){d.push(h4(I))},removePinData(I){d.push(fE(I))}})};for(let g of _){let{datum_pin_node_id:v,datum_plug_node_id:x}=this._get_datum_connected(g);if(v)if(this._is_link_pin_node_id(v)){let{unitId:I}=it(v);m.has(I)||b(g,v,null)}else h.has(v)||b(g,v,null);else if(x){let{type:I,pinId:E,subPinId:D}=gt(x);nt(f,[I,E,D],!1)||b(g,v,x)}else b(g,v,x)}this._pod.$bulkEdit({actions:d});for(let g of _)this._search_unit_datum_node_id===g&&(this._search_unit_datum_node_id=null,this._hide_search());for(let g of _)this._has_node(g)&&this._sim_remove_datum(g);p=ve({},{}),u={input:new Set,output:new Set};for(let g of a){let{type:v,pinId:x,subPinId:I}=gt(g);if(!u[v].has(x)){let E=this._get_exposed_pin_set_count(g);E===1||E===0?(u[v].add(x),this._sim_remove_exposed_pin_set(v,x)):(!p[v][x]||!p[v][x].has(I))&&(p[v][x]=p[v][x]||new Set,p[v][x].add(I),this.__sim_remove_exposed_sub_pin(v,x,I))}}for(let g of c){let{unitId:v}=Kr(g);this._sim_remove_unit_err(v)}for(let g of i)this._sim_remove_merge(g);for(let g of n){if(this._ref_unit_to_merge[g]){let x=Kn(g);this._sim_remove_pin_or_merge(x)}this._state_remove_unit(g)}for(let g of _)this._spec_remove_datum(g);p=ve({},{}),u={input:new Set,output:new Set};for(let g of a){let{type:v,pinId:x,subPinId:I}=gt(g);if(!u[v].has(x)){let E=this._get_exposed_pin_set_count(g);E===1||E===0?(u[v].add(x),this._spec_remove_exposed_pin_set(v,x)):(!p[v][x]||!p[v][x].has(I))&&(p[v][x]=p[v][x]||new Set,p[v][x].add(I),this.__spec_remove_exposed_sub_pin(v,x,I))}}for(let g of i){let{mergeId:v}=It(g);this._spec_remove_merge(v)}};this._spec_remove_nodes=t=>{for(let e of t)this._spec_remove_node(e)};this._pod_remove_nodes=t=>{for(let e of t)this._pod_remove_node(e)};this._sim_remove_exposed_pin_set=(t,e)=>{this._exposed_pin_set_count--;let n=this._get_pin_spec(t,e),{plug:i={}}=n;for(let s in i)this.__sim_remove_exposed_sub_pin(t,e,s);delete this._unit_datum[t][e]};this.remove_exposed_pin_set=(t,e)=>{let n=this._get_pin_spec(t,e);this.__remove_exposed_pin_set(t,e),this._dispatch_action(xr(t,e,n))};this.__remove_exposed_pin_set=(t,e)=>{let n=this._get_pin(t,e);this._state_remove_exposed_pin_set(t,e),this._pod_remove_exposed_pin_set(t,e,n)};this._state_remove_exposed_pin_set=(t,e)=>{this._sim_remove_exposed_pin_set(t,e),this._spec_remove_exposed_pin_set(t,e)};this._spec_remove_exposed_pin_set=(t,e)=>{Oi({pinId:e,type:t},this._spec)};this._pod_remove_exposed_pin_set=(t,e,n)=>{this._pod.$coverPinSet({type:t,pinId:e,pinSpec:n})};this.__plug_exposed_pin_to=(t,e,n,i)=>{let s;if(this._is_link_pin_node_id(i)){let{unitId:_,pinId:c}=it(i);s={unitId:_,pinId:c}}else if(this._is_merge_node_id(i)){let{mergeId:_}=It(i);s={mergeId:_}}else if(this._is_unit_node_id(i))s={unitId:i,pinId:$t};else throw new Error(`cannot plug to node id: ${i}`);let a=this._pin_to_int[t][i];if(a){let{pinId:_,subPinId:c}=gt(a);this._unplug_exposed_pin(t,_,c)}this.plug_exposed_pin(t,e,n,s)};this.plug_exposed_pin=(t,e,n,i)=>{this._plug_exposed_pin(t,e,n,i),this._dispatch_action(Fa(t,e,n,i))};this._plug_exposed_pin=(t,e,n,i)=>{this._spec_plug_sub_pin(t,e,n,i),this._sim_plug_exposed_pin(t,e,n,i),this._pod_plug_exposed_pin(t,e,n,i)};this._spec_plug_sub_pin=(t,e,n,i)=>{let s=P0(t,i);this._is_pin_node_ref(s)&&this._spec_set_exposed_pin_ref(t,e,!0),xs({type:t,pinId:e,subPinId:n,subPinSpec:i},this._spec),this._spec_refresh_exposed_pin_set_type(t,e)};this._get_exposed_pin_marker_path=(t,e,n)=>{let i=t==="input",_=Vt(i?e:n,i?n:e),c=this._link_marker_start[_],p=this._link_marker_end[_];return i?p:c};this._set_exposed_pin_marker_to_node=(t,e,n,i,s=0)=>{let a=this._get_exposed_pin_marker_path(t,e,n),_=this._get_node_shape(i),p=this._get_node_r(i)+s,u=Tv(_,p);a.setProp("d",u)};this._set_plug_marker_to_default=(t,e,n)=>{let i=this._get_exposed_pin_marker_path(t,e,n),s=j0(5);i.setProp("d",s)};this._sim_refresh_exposed_pin_marker=(t,e,n,i)=>{i?this._set_exposed_pin_marker_to_node(t,e,n,i):this._set_plug_marker_to_default(t,e,n)};this._state_plug_exposed_pin=(t,e,n,i)=>{this._spec_plug_sub_pin(t,e,n,i),this._sim_plug_exposed_pin(t,e,n,i)};this._sim_plug_exposed_pin=(t,e,n,i)=>{var m;if(ie(i))return;let s=Kt(t,e,n),a=De(t,e,n),_=t==="input";this._exposed_pin_plugged_count++,this._exposed_pin_unplugged_count--;let c=this._get_exposed_pin_spec_internal_node_id(t,i);this._sim_refresh_exposed_pin_marker(t,s,a,c),this._ext_to_node[s]=c,this._int_to_node[a]=c,this._node_to_ext[c]=(m=this._node_to_ext[c])!=null?m:new Set,this._node_to_ext[c].add(s),this._pin_to_int[t][c]=a,this._pin_to_ext[t][c]=s,delete this._exposed_ext_unplugged[s],delete this._exposed_int_unplugged[a];let d=Vt(_?s:a,_?a:s);if(this._sim_change_link_node(d,c,!_),this._set_link_d(d,16/2),this._sim_remove_exposed_int_node(a),this._refresh_pin_datum_visible(c),i.mergeId){let h=this._spec_get_merge_pin_count(i.mergeId),f=At(i.mergeId);h===0&&(this._set_node_layer(f,Nn),this._set_link_d(d,16))}this._start_graph_simulation(Nn)};this._pod_plug_exposed_pin=(t,e,n,i)=>{this._pod.$plugPin({type:t,pinId:e,subPinId:n,subPinSpec:i})};this.unplug_exposed_pin=(t,e,n)=>{let i=this._get_exposed_sub_pin_spec(t,e,n);this._unplug_exposed_pin(t,e,n),this._dispatch_action(Ba(t,e,n,i))};this._unplug_exposed_pin=(t,e,n)=>{this._state_unplug_exposed_pin(t,e,n),this._pod_unplug_exposed_pin(t,e,n)};this._spec_unplug_sub_pin=(t,e,n)=>{let i=this._get_exposed_sub_pin_spec(t,e,n);Is({type:t,pinId:e,subPinId:n},this._spec);let{mergeId:s}=i;if(s){let a=this._spec_get_merge(s),_=Te(a),c=At(s);this._spec_has_merge(c)&&_===0&&this._spec_remove_merge(s)}this._spec_refresh_exposed_pin_set_type(t,e)};this._state_unplug_exposed_pin=(t,e,n)=>{this._sim_unplug_exposed_pin(t,e,n),this._spec_unplug_sub_pin(t,e,n)};this._sim_unplug_exposed_pin=(t,e,n)=>{let i=this._get_exposed_sub_pin_spec(t,e,n);if(ie(i!=null?i:{}))return;let s=Kt(t,e,n),a=De(t,e,n),_=t==="input",c=this._int_to_node[a];this._sim_refresh_exposed_pin_marker(t,s,a,null);let{mergeId:p}=i,u=this._ext_to_node[s];delete this._ext_to_node[s],delete this._int_to_node[a],delete this._pin_to_int[t][u],delete this._pin_to_ext[t][u],this._node_to_ext[c]&&(this._node_to_ext[c].delete(s),this._node_to_ext[c].size===0&&delete this._node_to_ext[c]),this._exposed_ext_unplugged[s]=!0,this._exposed_int_unplugged[a]=!0,this._exposed_pin_plugged_count--,this._exposed_pin_unplugged_count++;let d=this.get_node(c),m=this._get_node_position(c),h=this._get_node_position(s),f=s0(m,h),b=oa(d,f),g=Wn(m,Il(f,b-5)),I=Vt(_?s:a,_?a:s);if(this._sim_add_internal_pin(t,e,n,g),this._sim_change_link_node(I,a,!_),this._set_link_d(I,16),this._refresh_pin_datum_visible(c),this._refresh_exposed_sub_pin_color(t,e,n),p){let E=this._merge_pin_count[p],D=At(p);if(this._spec_has_merge(D)){let w=this._pin_to_int.input[D],T=this._pin_to_int.output[D];E===0&&(w||T)&&this._sim_remove_merge(D)}}};this._pod_unplug_exposed_pin=(t,e,n)=>{this._pod.$unplugPin({type:t,pinId:e,subPinId:n,subPinSpec:{}})};this._has_node=t=>!!this.get_node(t);this._has_anchor_node=t=>{let e=this._get_node_anchor_node_id(t);return this._has_node(e)};this._has_link=t=>!!this._link[t];this._resize_start_component=(t,e)=>{this._tree_layout?this._resize_component_start_size[t]=e:this._sim_resize_start_component(t,e)};this._resize_component_start_size={};this._sim_resize_start_component=(t,e)=>{let n=this._node[t];n.fx=n.x,n.fy=n.y,this._resize_component_start_size[t]=e};this._delta_resize_component=(t,e,n,i,s)=>{this._tree_layout?this._layout_delta_resize_component(t,e,n,i,s):this._spec_delta_resize_component(t,e,n,i,s)};this._spec_delta_resize_component=(t,e,n,i,s)=>{let{$sx:a}=this.$context,{width:_,height:c}=this._get_unit_component_graph_size(t),p=_,u=c,d=this._zoom.z*a;i=i/d,s=s/d,e=e/d,n=n/d;let m=_+i,h=c+s,f=!1;if(i!==0&&(i>0||m>=wh)&&(i<0||m<=AE)&&(p=m,f=!0),s!==0&&(s>0||h>=G0)&&(s<0||h<=ME)&&(u=h,f=!0),f){this._sim_set_unit_size(t,p,u),this._spec_set_unit_size(t,p,u);let b=this._node[t];b.fx+=e,b.fy+=n,b.x=b.fx,b.y=b.fy,this._start_graph_simulation(he)}};this._get_layout_max_width=()=>{let{$width:t}=this.$context;return Math.min(AE,t-2*UE)};this._layout_delta_resize_component=(t,e,n,i,s)=>{let{$width:a}=this.$context,{width:_,height:c}=this._get_unit_component_layout_size(t),p=_,u=c,d=2*i,m=2*s,h=_+d,f=c+m,b=this._get_layout_max_width(),g=!1;i!==0&&(i>0||h>=wh)&&(i<0||h<=b)&&(p=h,g=!0),s!==0&&(s>0||f>=G0)&&(s<0||f<=ME)&&(u=f,g=!0),g&&(this._sim_layout_resize_sub_component(t,p,u),this._spec_component_set_unit_graph_size(t,p,u))};this._resize_end_component=t=>{let e=this._node[t];e.fx=void 0,e.fy=void 0;let n=this._core_component_max_width[this._core_component_max_width.length-1],i=this._core_component_max_height[this._core_component_max_height.length-1],s=[],a=this._resize_component_start_size[t];if(this._tree_layout){let{width:c,height:p}=this._layout_node[t];s.push(S1(t,c,p,a.width,a.height))}else{let{width:c,height:p}=this._get_unit_component_graph_size(t);s.push(I1(t,c,p,a.width,a.height))}s.push(D1(n,i,a.width,a.height));let _=Mi(s);this._dispatch_action(_),this._pod.$bulkEdit({actions:s})};this._pod_set_unit_size=(t,e,n)=>{this._pod_set_metadata(["units",t,"metadata","component"],{width:e,height:n})};this._is_node_selectable=t=>!(this._is_datum_node_id(t)&&this._hidden_data_node[t]||this._is_link_pin_node_id(t)&&this._spec_is_link_pin_ignored(t));this._get_unit_spec_render=t=>{let{specs:e}=this.$props,n=this._get_unit_spec_id(t);return sy(e,n)};this._is_unit_component=t=>{let e=this._get_unit_spec_render(t);if(e===void 0){let n=this._get_unit_spec(t);return qr(n)?!1:Jg(n)}else return e};this._is_unit_base=t=>{let{specs:e}=this.$props,n=this._get_unit_spec_id(t);return xd(e,n)};this._is_datum_class_literal=t=>this._get_datum_tree(t).type==="unit";this._get_unit_pin_node_position=t=>{let e={};return e[t]=this._get_node_position(t),this._for_each_unit_pin(t,n=>{let i=this._get_pin_anchor_node_id(n);e[n]=this._get_node_position(i)}),e};this._get_unit_state=t=>this._graph_state[t];this._set_unit_position=(t,e)=>{let n=e[t];this._set_node_position(t,n),this._for_each_unit_pin(t,i=>{let s=e[i];this._set_node_position(i,s)})};this._get_unit_pin_position=t=>{let e={input:{},output:{}};return this._for_each_unit_pin(t,(n,i,s)=>{let a=this._get_pin_anchor_node_id(n);e[i][s]=this._get_node_position(a)}),e};this._get_merge_position=t=>{let e=this._merge_to_ref_unit[t];if(e){let _=this._node[e],{x:c,y:p}=_;return{x:c,y:p}}let n=this._merge_to_ref_output[t];if(n){let _=this._node[n],{x:c,y:p}=_;return{x:c,y:p}}let i=this._node[t],{x:s,y:a}=i;return{x:s,y:a}};this._get_exposed_pin_set_position=(t,e)=>{let n={},i=this._get_pin_spec(t,e),{plug:s={}}=i;for(let a in s){let _=Kt(t,e,a),c=De(t,e,a),p=this._get_int_pin_anchor_node_id(c)||c,u=this._get_node_position(p),d=this._get_node_position(_);n[a]={int:u,ext:d}}return n};this._on_pointer_down=(t,e)=>{let{pointerId:n,clientX:i,clientY:s}=t;if(this._restart_gesture){this._main.setPointerCapture(n),this._start_gesture(t);return}(!this._search_hidden||this._resize_pointer_id_node_id[n])&&e.preventDefault(),this.__on_pointer_down(n,i,s)};this.__on_pointer_down=(t,e,n)=>{this._control&&(this._control_lock||(this._temp_control_lock=!0,this._control.dispatchEvent("temp_lock",{},!1),this._lock_control()));let i={x:e,y:n};if(this._pointer_position[t]=i,this._pointer_down[t]||(this._pointer_down[t]=!0,this._pointer_down_move_count[t]=0,this._pointer_down_position[t]=i,this._pointer_down_count++),this._is_background_pointer(t)&&(this._main.setPointerCapture(t),this._mode==="multiselect"&&(this._pointer_down_count===1?this._on_multiselect_area_start(t,e,n):this._multiselect_area_ing&&this._on_multiselect_area_end())),!this._collapsing&&this._pointer_down_count===2){let[a,_]=J(this._pointer_down),{x:c,y:p}=this._pointer_position[a],{x:u,y:d}=this._pointer_position[_],m=Di(c,p,u,d);if(this._pressed_node_pointer_count===0){let h=(c+u)/2,f=(p+d)/2,b={x:h,y:f};this._touch_zoom_position_start=b,this._touch_zoom_position=b,this._touch_zoom_d=m}else if(this._pressed_node_pointer_count===2&&J(this._pressed_node_id_pointer_id).length===1){let[[h]]=Object.entries(this._pressed_node_id_pointer_id),f=this.get_node(h),{x:b,y:g,width:v,height:x}=f,I={x:b+v/2-this._zoom.x,y:g+x/2-this._zoom.y};this._touch_zoom_position_start=I,this._touch_zoom_position=I,this._touch_zoom_d=m}}};this._zoom_center_at_node=t=>{let{x:e,y:n}=this.get_node(t);this._zoom_center_at(e,n)};this._zoom_center_at=(t,e)=>{let{$width:n,$height:i}=this.$context,s=rv(t,e,this._zoom.z,n,i);this.set_zoom(s)};this._state_reorder_sub_component=(t,e)=>{this._spec_reorder_sub_component(t,e),this._sim_reorder_sub_component(t,e),this._is_fullwindow&&this._reorder_all_fullwindow(),this._animate_all_current_layout_layer_node()};this._spec_reorder_sub_component=(t,e)=>{let n=this._spec_get_sub_component_parent_id(t),i=this._get_sub_component_spec_layer(t);z1({parentId:n,childId:t,to:e},this._spec.component),this._refresh_tree_sub_component_index()};this._sim_reorder_sub_component=(t,e)=>{let n=this._spec_get_sub_component_parent_id(t),i=this._get_sub_component(t);if(n){let s=this._get_sub_component(n),a=this._is_layout_component_layer_visible(n);a||s.removeParentRoot(i),s.pullParentRoot(i);let _=this._get_sub_component_slot_name(t);s.insertParentRoot(i,e,_),a||s.insertParentRootAt(i,e,_)}else{let{component:s}=this.$props;s.pullRoot(i),s.fitRoot(i,e)}this._refresh_layout_node_target_position(n)};this._pod_reorder_sub_component=(t,e,n)=>{this._pod.$reorderSubComponent({parentId:t,childId:e,to:n})};this._spec_swap_component_children=(t,e)=>{let n=this._spec_get_component_children(),i=n.indexOf(t),s=n.indexOf(e),a=Pv(n,i,s);this._spec.component=bE({children:a},this._spec.component||{}),this._refresh_tree_sub_component_index()};this._sim_swap_component_children=(t,e)=>{this._refresh_current_layout_node_target_position()};this._pod_swap_component_children=(t,e)=>{};this._on_layout_component_drag_start=(t,e)=>{let{clientX:n,clientY:i}=e;this.__on_layout_component_drag_start(t,n,i)};this.__on_layout_component_drag_start=(t,e,n)=>{this._layout_drag_node_count++,this._layout_drag_node_count===1&&(this._layout_dragging=!0),this._layout_drag_node[t]=!0,this._layout_drag_index[t]=this._get_sub_component_tree_index(t),this._layout_drag_direction[t]=void 0;let i=this._ensure_parent_layout_layer(t);this._layout_drag_start_scroll_top[t]=i.layer.$element.scrollTop,this._layout_drag_start_scroll_height[t]=i.layer.$element.scrollHeight,this._layout_drag_start_position[t]={x:e,y:n};let s=this._get_sub_component_spec_layer(t);this._layout_drag_start_children[t]=s;for(let _ of s){let c=this._layout_target_node[_],{x:p,y:u}=c;this._layout_drag_init_position[_]={x:p,y:u}}let a=this._layout_core[t];a.$element.style.zIndex="1000"};this._on_layout_component_drag_move=(t,e)=>{let{clientX:n,clientY:i}=e;this.__on_layout_component_drag_move(t,n,i)};this.__on_layout_component_drag_move=(t,e,n)=>{let i=this._layout_drag_start_position[t],s=this._layout_drag_start_scroll_top[t],a=this._layout_drag_init_position[t];this._layout_drag_client_position[t]={x:e,y:n};let _=this._ensure_parent_layout_layer(t),{scrollTop:c=0}=_.layer.$element;i.y>=n?this._layout_drag_direction[t]="down":this._layout_drag_direction[t]="up";let p=e+a.x-i.x,u=n+a.y-i.y+(c-s);this._set_layout_core_position(t,p,u);let d=this._layout_target_node[t];d.x=p,d.y=u,this._refresh_drag_layout_component_index(t),this._refresh_drag_layout_component_scroll(t)};this._refresh_drag_layout_component_index=t=>{let{x:e,y:n,width:i,height:s}=this._layout_node[t],a={x:e,y:n,width:i,height:s,shape:"rect",r:i},_=null,c=Number.MAX_SAFE_INTEGER,p=this._get_layout_layer_parent_children(t);for(let b of p)if(t!==b){let g=this._layout_drag_init_position[b],v=this._layout_node[b],{x,y:I}=g,{width:E,height:D}=v,{d:w,l:T}=hn(a,{x,y:I,width:E,height:D,r:E/2,shape:"rect"});T<0&&w<c&&(_=b,c=w)}let u=this._layout_drag_start_children[t],d=this._layout_drag_index[t],m=this._layout_drag_swap[t],h=this._layout_drag_swap_index[t],f=()=>{this._layout_drag_swap[t]&&(delete this._layout_drag_swap[t],delete this._layout_drag_swap_index[t],this._state_reorder_sub_component(t,d))};if(_){if(m!==_){f();let b=u.indexOf(_);this._layout_drag_swap[t]=_,this._layout_drag_swap_index[t]=b,this._state_reorder_sub_component(t,b)}}else f()};this._refresh_drag_layout_component_scroll=t=>{let e=this._layout_drag_start_scroll_height[t],n=this._layout_drag_direction[t],i=1/2;this._refresh_layout_component_scroll(t,e,n,i,s=>{let a=this._layout_node[t];this._refresh_drag_layout_component_index(t),this._refresh_drag_layout_component_scroll(t)})};this._refresh_layout_component_scroll=(t,e,n,i,s)=>{let{$height:a}=this.$context,_=this._layout_node[t];this._layout_scroll_animation&&(cancelAnimationFrame(this._layout_scroll_animation),this._layout_scroll_animation=void 0);let c=!1,p=0,u=this._ensure_parent_layout_layer(t),{scrollTop:d=0,scrollHeight:m}=u.layer.$element,h=60,{y:f,height:b}=_;if(n==="up"&&d<e-a){let g=f+b/2-d-a/2+h;g>0&&(c=!0,p=i*g)}else if(n==="down"&&d>0){let g=f-b/2+a/2-d-h;g<0&&(c=!0,p=i*g)}if(c){let g=()=>{u.layer.$element.scrollTop=Math.min(d+p,m),s(p)};this._layout_scroll_animation=requestAnimationFrame(g)}};this._on_layout_component_drag_end=t=>{let e=this._layout_drag_index[t],n=this._layout_drag_swap_index[t],i=this._layout_core[t];i.$element.style.zIndex="",this._layout_drag_node_count--,this._layout_drag_node_count===0&&(this._layout_dragging=!1),delete this._layout_drag_node[t],delete this._layout_drag_index[t],delete this._layout_drag_swap[t],delete this._layout_drag_swap_index[t],delete this._layout_drag_start_position[t],delete this._layout_drag_direction[t],delete this._layout_drag_start_scroll_height[t],delete this._layout_drag_start_scroll_top[t];let s=this._spec_get_component_children();for(let _ of s)delete this._layout_drag_init_position[_];this._layout_scroll_animation&&(cancelAnimationFrame(this._layout_scroll_animation),this._layout_scroll_animation=void 0);let a=this._layout_sub_component_parent[t]||null;this._refresh_layout_node_target_position(a),this._animate_all_layout_layer_node(a),n!==void 0&&(e===n||this._commit_reorder_sub_component(a,t,e,n))};this._commit_reorder_sub_component=(t,e,n,i)=>{this._pod_reorder_sub_component(t,e,i),this._dispatch_action(Kf(t,e,n,i))};this._drag_start=(t,e)=>{let{clientX:n,clientY:i,pointerId:s}=e;this.__drag_start(t,s,n,i)};this.__drag_start=(t,e,n,i)=>{var c;let s=this._get_node_default_layer(t);this._start_graph_simulation(rn(s-1,0,1/0));let[a,_]=this._client_to_graph(n,i);if(this._drag_node_pointer_id[t]=e,this.__on_node_drag_start(t,a,_),this._selected_node_id[t])for(let p in this._selected_node_id)((c=this._node_pressed_count[p])!=null?c:0)===0&&(this._drag_node_pointer_id[p]=e,this.__on_node_drag_start(p,a,_));if(this._is_ext_node_id(t)){let p=Cy(t),u=.05;this._set_all_node_to_node_charge(p,u),this._set_all_node_to_compatible_node_charge(p,-u)}else this._is_int_node_id(t)};this._set_node_to_node_charge=(t,e,n)=>{tt(this._node_charge,[t,e],n)};this._delete_node_to_node_charge=(t,e)=>{var n;(n=this._node_charge[t])==null||delete n[e]};this._drag_move=(t,e)=>{let{clientX:n,clientY:i,pointerId:s}=e,a=this._get_node_default_layer(t);this._start_graph_simulation(rn(a-1,0,1/0));let[_,c]=this._client_to_graph(n,i);if(this._is_draggable_mode()&&(this._node_drag_move(t,_,c),this._selected_node_id[t]))for(let p in this._selected_node_id)(this._node_pressed_count[p]||0)===0&&(this._drag_node_pointer_id[p]!==s&&(this._drag_node_pointer_id[p]=s,this.__on_node_drag_start(p,_,c)),this._node_drag_move(p,_,c));if(this._is_datum_node_id(t)){let p=u=>{let d=this._get_datum_pin_anchor_node_id(u);if(d){let m=this._node[d],h=this._node[u],{l:f}=hn(m,h);f>2*24&&(this._remove_node_datum_link(u,d),this._mem_remove_pin_datum_tree(d))}};if(this._selected_node_id[t])for(let u in this._selected_node_id)this._is_datum_node_id(u)&&p(u);else p(t)}else if(!this._is_int_node_id(t)){if(this._is_ext_node_id(t)){let{type:p,pinId:u,subPinId:d}=gt(t),m=De(p,u,d);if(!this._has_node(m)){if(this._mode==="none"){let h=this._get_exposed_pin_internal_node_id(p,u,d);if(h){let f=this.get_node(t),b=this._node[h],{l:g}=hn(f,b);g>OE&&(this.unplug_exposed_pin(p,u,d),this._refresh_compatible())}}}}else if(this._is_err_node_id(t)){let{unitId:p}=Kr(t),u=this.get_node(t),d=this._node[p],{l:m}=hn(d,u);m>1.5*24&&(this._removing_err=!0,this._pod_remove_unit_err(p))}}};this._sim_duplicate_node=t=>{let e;return this._is_unit_node_id(t)?e=this._sim_duplicate_unit(t):this._is_datum_node_id(t)?e=this._sim_duplicate_datum(t):this._is_plug_node_id(t)&&(e=this._sim_duplicate_exposed_pin(t)),e};this._on_node_green_drag_start=(t,e)=>{let{pointerId:n,clientX:i,clientY:s}=e,a=this._sim_duplicate_node(t);return a&&(this._green_drag=!0,this._green_drag_node_id=t,this._green_drag_clone_id=a,this._force_pointer_drag_swap(t,a,n,i,s),this._ascend_node(a,n),this._refresh_node_color(t)),a};this._on_node_green_drag_end=t=>{let{specs:e}=this.$props;if(this._is_unit_node_id(t)){let n=t,i=this._get_unit(n),s=B(i),a=un(s,e);this._pod_add_unit(n,a),this._is_unit_component(n)&&(this._sim_add_sub_component(n),this._connect_sub_component(n)),this._dispatch_add_unit_action(n,s)}this._green_drag=!1,this._green_drag_node_id=null,this._green_drag_clone_id=null};this._on_node_red_drag_start=(t,e)=>{if(this._is_unit_node_id(t))this._on_unit_red_drag_start(t,e);else if(this._is_link_pin_node_id(t)){let{unitId:n}=it(t);this._on_unit_red_drag_start(n,e)}};this._on_node_red_drag_end=t=>{if(this._is_unit_node_id(t))this._on_unit_red_drag_end(t);else if(this._is_link_pin_node_id(t)){let{unitId:e}=it(t);this._on_unit_red_drag_end(e)}else this._is_datum_node_id(t)&&this._on_datum_red_drag_end(t)};this._on_datum_red_drag_end=t=>{this._drop_datum(t)};this._on_unit_red_drag_end=t=>{this._descend_node(t)};this._on_unit_red_drag_start=(t,e)=>{this._remove_unit_merges(t);let n=this._ref_unit_to_merge[t];if(n){let i=Kn(t);this._remove_pin_from_merge(n,i)}this._ascend_node(t,e)};this._on_node_blue_drag_start=(t,e)=>{this._is_unit_node_id(t)?this._on_unit_blue_drag_start(t,e):this._is_datum_node_id(t)?this._on_datum_blue_drag_start(t,e):this._is_plug_node_id(t)&&this._on_plug_blue_drag_start(t,e)};this._on_node_blue_drag_end=(t,e)=>{if(this._is_unit_node_id(t))this._on_unit_blue_drag_end(t);else if(this._is_link_pin_node_id(t)){let{unitId:n}=it(t);this._on_unit_blue_drag_end(n)}else this._is_datum_node_id(t)&&this._on_datum_blue_drag_end(t)};this._on_unit_blue_drag_start=(t,e)=>{this._blue_drag=!0,this._blue_drag_init_id=t,this._blue_drag_init_start_position=this._get_unit_pin_node_position(t),this._blue_drag_init_pin_to_anchor=this._remove_unit_merges(t),this._blue_drag_init_anchor_to_pin=_1(this._blue_drag_init_pin_to_anchor),this._set_all_unit_node_fixed(!0),this._refresh_unit_fixed(t),this._refresh_unit_blue_drag_anchor(this._blue_drag_init_pin_to_anchor,!0),this._ascend_node(t,e)};this._on_plug_blue_drag_start=(t,e)=>{this._blue_drag=!0,this._blue_drag_init_id=t,this._blue_drag_init_start_position=this._get_unit_pin_node_position(t),this._blue_drag_init_pin_to_anchor=this._remove_unit_merges(t),this._blue_drag_init_anchor_to_pin=_1(this._blue_drag_init_pin_to_anchor),this._set_all_unit_node_fixed(!0),this._refresh_unit_fixed(t),this._refresh_unit_blue_drag_anchor(this._blue_drag_init_pin_to_anchor,!0),this._ascend_node(t,e)};this._on_datum_blue_drag_start=(t,e)=>{this._ascend_node(t,e)};this._on_datum_blue_drag_end=t=>{};this._abort_blue_drag_hover=()=>{this._blue_drag_hover_return(),this._refresh_unit_fixed(this._blue_drag_init_id),this._for_each_unit_output(this._blue_drag_init_id,t=>{this._set_output_reduced(t,!1)}),this._blue_drag_hover_unit_id=null};this._refresh_unit_blue_drag_anchor=(t,e)=>{for(let n in t){let{type:i}=it(n),s=t[n];if(e){let a=this._get_node_position(s);this._set_node_position(n,a)}s&&(i==="input"?this._is_output_pin_node_id(s)&&this._set_output_reduced(s,e):this._set_output_reduced(n,e),this._set_node_fixed(n,e))}};this._on_unit_blue_drag_move=t=>{if(this._blue_drag_init_id===t){let e=this._node[this._blue_drag_init_id],n=this._blue_drag_init_start_position[t];if(this._blue_drag_hover_unit_id){let s=this._blue_drag_hover_position[this._blue_drag_hover_unit_id];He(e,s)>Qn/2&&this._abort_blue_drag_hover()}else He(e,n)>Qn/2?(this._refresh_unit_fixed(t),this._refresh_unit_blue_drag_anchor(this._blue_drag_init_pin_to_anchor,!1)):this._refresh_unit_blue_drag_anchor(this._blue_drag_init_pin_to_anchor,!0);let i=this._find_nearest_core_id(t,Qn/2,(s,a)=>He(s,a),s=>s!==this._blue_drag_hover_unit_id);if(i){this._blue_drag_hover_unit_id&&this._blue_drag_hover_return(),this._blue_drag_hover_unit_id=i,this._blue_drag_hover_merge_anchor=this._remove_unit_merges(i),this._blue_drag_hover_position=this._get_unit_pin_node_position(i),this._set_all_unit_node_fixed(!0),this._refresh_unit_fixed(t),this._refresh_unit_fixed(i),this._negate_unit_layer(i);let s=this._blue_drag_init_start_position[this._blue_drag_init_id];this._set_node_position(i,s),this._set_node_fixed(i,!0);let a=B(this._blue_drag_init_pin_to_anchor);this._for_each_unit_pin(this._blue_drag_hover_unit_id,(c,p)=>{let u=!1;for(let d in a){let{type:m}=it(d);if(p===m&&this._is_pin_pin_type_match(c,p,d,m)){let h=a[d],f=this._blue_drag_init_start_position[d];this._blue_drag_hover_merge_swap[c]=h,this._set_node_position(c,f),p==="input"?this._is_output_pin_node_id(h)&&this._set_output_reduced(h,!0):this._set_output_reduced(c,!0),this._set_node_fixed(c,!0),a=ro(a,d),u=!0;break}}});let _=B(this._blue_drag_hover_merge_anchor);this._for_each_unit_pin(this._blue_drag_init_id,(c,p)=>{for(let u in _){let{type:d}=it(u);if(p===d&&this._is_pin_pin_type_match(c,p,u,d)){let m=_[u],h=this._blue_drag_hover_position[u];this._blue_drag_init_merge_swap[c]=m,this._set_node_position(c,h),p==="input"?this._is_output_pin_node_id(m)&&this._set_output_reduced(m,!0):this._set_output_reduced(c,!0),this._set_node_fixed(c,!0),_=ro(_,u);break}}})}}};this._abort_blue_drag=t=>{this._refresh_all_node_fixed(),this._refresh_unit_layer(t),this._blue_drag=!1,this._blue_drag_init_id=null,this._blue_drag_init_start_position={},this._blue_drag_init_pin_to_anchor={},this._blue_drag_init_anchor_to_pin={},this._blue_drag_init_merge_swap={},this._blue_drag_hover_unit_id=null,this._blue_drag_hover_position={},this._blue_drag_hover_merge_anchor={},this._blue_drag_hover_merge_swap={},this._descend_node(t)};this._on_unit_blue_drag_end=t=>{if(this._blue_drag_hover_unit_id){this._refresh_unit_layer(this._blue_drag_hover_unit_id),this._refresh_unit_fixed(this._blue_drag_hover_unit_id);for(let e in this._blue_drag_hover_merge_swap){let n=this._blue_drag_hover_merge_swap[e];n&&this._merge_pin_pin(e,n)}}else{for(let e in this._blue_drag_init_start_position){let n=this._blue_drag_init_start_position[e];this._set_node_position(e,n)}for(let e in this._blue_drag_init_pin_to_anchor)this._drop_node(e)}this._abort_blue_drag(t)};this._force_pointer_drag_swap=(t,e,n,i,s)=>{this._force_pointer_drop_node(t,n,i,s),this._force_pointer_drag_node(e,n,i,s)};this._on_node_yellow_drag_start=(t,e)=>{let{pointerId:n,clientX:i,clientY:s}=e,a=this._sim_duplicate_node(t);return a&&(this._yellow_drag=!0,this._yellow_drag_node_id=t,this._yellow_drag_clone_id=a,this._force_pointer_drag_swap(t,a,n,i,s),this._is_unit_node_id(t)?(this._sim_replicate_unit_data(t,a),this._ascend_node(a,n)):this._is_datum_node_id(t)&&this._ascend_node(a,n)),a};this._sim_replicate_unit_data=(t,e)=>{let n=this._get_unit_data(t),{input:i,output:s}=n,a=(_,c)=>{let p=ut(e,_,c),u=n[_][c],d=this._new_datum_id(),m=this._predict_pin_datum_initial_position(p),h=this._pin_to_datum[p];h?this.__graph_debug_set_pin_data(p,h,u.value):this._sim_add_pin_datum_tree(e,_,c,d,u,m)};for(let _ in i)a("input",_);for(let _ in s)a("output",_);if(this._is_unit_component(t)){let _=this._get_sub_component(t),{$children:c}=_}return e};this._on_node_yellow_drag_end=t=>{if(this._is_unit_node_id(t)){let e=t,n=this._get_unit(e),i=B(n),s=this._yellow_drag_node_id,a=this._get_unit_state(s),_=B(a);if(i.state=_,this._is_unit_component(s)){let c=this._get_sub_component(s),{$children:p}=c,u=p.map(d=>{let{id:m}=d.constructor;return{id:m,state:{}}});i.children=u}this._pod_clone_unit(s,e),this._is_unit_component(e)&&(this._sim_add_sub_component(e),this._connect_sub_component(e)),this._dispatch_clone_unit_action(s,e)}this._is_node_ascend(t)&&this._descend_node(t),this._yellow_drag=!1,this._yellow_drag_node_id=null,this._yellow_drag_clone_id=null};this._on_multiselect_area_start=(t,e,n)=>{this._multiselect_area_ing=!0,this._multiselect_area_start_position={x:e,y:n},this._multiselect_area_svg.$element.style.display="block"};this._on_multiselect_area=t=>{let{pointerId:e,clientX:n,clientY:i}=t,{x:s,y:a}=this._multiselect_area_start_position,_=Math.min(s,n),c=Math.max(s,n),p=Math.min(a,i),u=Math.max(a,i);this._multiselect_area_rect={x0:_,y0:p,x1:c,y1:u},this._tick_multiselect_area()};this._on_multiselect_area_end=()=>{this._multiselect_area_ing=!1,this._multiselect_area_rect=RE,this._multiselect_area_node={},this._multiselect_area_svg.$element.style.display="none",this._tick_multiselect_area()};this._tick_multiselect_area=()=>{let{x0:t,y0:e,x1:n,y1:i}=this._multiselect_area_rect,{$width:s,$height:a}=this.$context;if(this._multiselect_area_svg_rect.setProp("x",t),this._multiselect_area_svg_rect.setProp("y",e),this._multiselect_area_svg_rect.setProp("width",n-t),this._multiselect_area_svg_rect.setProp("height",i-e),this._tree_layout){let _=this._get_current_layout_layer_children();for(let c=0;c<_.length;c++){let p=_[c],u=this._layout_node[p],d=u.x+s/2,m=u.y+a/2;d>=t&&d<=n&&m>=e&&m<=i?this._multiselect_area_node[p]||(this._multiselect_area_node[p]=!0,this._selected_node_id[p]?this.deselect_node(p):this._select_node(p)):this._multiselect_area_node[p]&&(this._multiselect_area_node[p]=!1,this.deselect_node(p))}}else{let{x:_,y:c}=this._screen_to_world(t,e),{x:p,y:u}=this._screen_to_world(n,i);for(let d in this._node){let m=this.get_node(d);if(this._is_node_selectable(d)){let{x:h,y:f,width:b,height:g}=m;h>=_&&h<=p&&f>=c&&f<=u?this._multiselect_area_node[d]||(this._multiselect_area_node[d]=!0,this._selected_node_id[d]?this.deselect_node(d):this._select_node(d)):this._multiselect_area_node[d]&&(this._multiselect_area_node[d]=!1,this.deselect_node(d))}}}};this._on_translate=t=>{let{pointerId:e,clientX:n,clientY:i}=t,{x:s,y:a}=this._pointer_position[e];this._translate_x=n-s,this._translate_y=i-a;let _=fh(this._zoom,this._translate_x,this._translate_y);this.set_zoom(_),this._translate_pressed_node(),this._search_hidden||this._start_graph_simulation(N0)};this._ascend_z_count=0;this._ascend_node_dict={};this._system_drag_layer=null;this._ascend_node_z=t=>{if(this._ascend_node_dict[t])return;this._ascend_z_count++,this._ascend_node_dict[t]=!0,this._ascend_z_count===1&&(this._zoom_comp_alt.$element.style.pointerEvents="inherit");let e=this._get_node_comp(t);if(this._zoom_comp.removeChild(e),this._zoom_comp_alt.appendChild(e,"default"),this._is_link_pin_node_id(t)){let n=qe(t),i=this._link_comp[n];this._zoom_comp.removeChild(i),this._zoom_comp_alt.appendChild(i,"svg")}};this._descend_node_z=t=>{if(!this._ascend_node_dict[t])return;this._ascend_z_count--,delete this._ascend_node_dict[t];let e=this._get_node_comp(t);if(this._zoom_comp_alt.removeChild(e),this._zoom_comp.appendChild(e,"default"),this._is_link_pin_node_id(t)){let n=qe(t),i=this._link_comp[n];this._zoom_comp_alt.removeChild(i),this._zoom_comp.appendChild(i,"svg")}this._ascend_z_count===0&&(this._zoom_comp_alt.$element.style.pointerEvents="none")};this._negate_unit_layer=t=>{this._set_unit_layer(t,-Rn)};this._negate_node_layer=t=>{let e=this._get_node_default_layer(t);this._set_node_layer(t,-e)};this._set_node_pointer_capture=(t,e)=>{this._get_node_comp(t).setPointerCapture(e)};this._set_node_pointer_events=(t,e)=>{let n=this._get_node_comp(t);n.$element.style.pointerEvents=e};this._release_node_pointer_capture=(t,e)=>{let n=this._get_node_comp(t);n.hasPointerCapture(e)&&n.releasePointerCapture(e)};this._ascend_node=(t,e)=>{if(this._negate_node_layer(t),this._ascend_node_z(t),this._set_node_pointer_capture(t,e),this._is_unit_node_id(t)){let n=(i,s)=>{var c;if(!this._is_link_pin_merged(i)){this._negate_node_layer(i),this._ascend_node_z(i);let p=this._pin_to_datum[i];p&&this._negate_node_layer(p)}let{pinId:a,subPinId:_}=(c=this._spec_get_pin_node_plug_spec(s,i))!=null?c:{};if(a&&_){let p=Kt(s,a,_);this._negate_node_layer(p)}};if(this._for_each_unit_pin(t,n),this._err[t]){let i=Si(t);this._negate_node_layer(i),this._ascend_node_z(i)}}else if(this._is_ext_node_id(t)){let{pinId:n,type:i,subPinId:s}=gt(t),a=De(i,n,s);this._negate_node_layer(a),this._ascend_node_z(a);let _=this._plug_to_datum[t];_&&(this._negate_node_layer(_),this._ascend_node_z(_))}else if(this._is_int_node_id(t)){let{pinId:n,type:i,subPinId:s}=gt(t),a=Kt(i,n,s);this._negate_node_layer(a),this._ascend_node_z(a)}};this._descend_node=t=>{if(this._refresh_node_layer(t),this._descend_node_z(t),this._is_unit_node_id(t)){if(this._for_each_unit_pin(t,(e,n)=>{if(!this._is_link_pin_merged(e)){this._descend_node_z(e),this._refresh_node_layer(e);let s=this._pin_to_datum[e];s&&this._refresh_node_layer(s)}let i=this._pin_to_ext[n][e];if(i){let s=this._pin_to_ext[n][e];this._refresh_plug_layer(i,s)}}),this._err[t]){let e=Si(t);this._descend_node_z(e),this._refresh_node_layer(e)}}else if(this._is_ext_node_id(t)){let{pinId:e,type:n,subPinId:i}=gt(t),s=De(n,e,i);this._descend_node_z(s),this._refresh_plug_layer(t,s)}else if(this._is_int_node_id(t)){let{pinId:e,type:n,subPinId:i}=gt(t),s=Kt(n,e,i);this._descend_node_z(s),this._refresh_plug_layer(s,t)}};this._on_pointer_move=(t,e)=>{let{specs:n,zoomDraggable:i}=this.$props,{pointerId:s,clientX:a,clientY:_}=t,c=this._pointer_down_position[s];this._pointer_down[s]&&this._pointer_down_move_count[s]++,i&&!this._collapsing&&!this._capturing_gesture&&!this._removing_err&&this._multiselect_area_ing&&this._pointer_down_count===1&&this._pressed_node_pointer_count===0&&this._on_multiselect_area(t);let p=this._pointer_id_pressed_node_id[s],u=this._resize_pointer_id_node_id[s];if(!p&&!u&&!this._collapsing&&!this._capturing_gesture&&!this._tree_layout&&!this._multiselect_area_ing&&!this._removing_err&&!this._drag_and_drop&&(this._pointer_down_count===this._pressed_node_pointer_count+1||this._pointer_down_count===this._resize_pointer_count+1)&&!this._pointer_id_pressed_node_id[s]&&this._pointer_position[s]&&this._on_translate(t),this._pointer_position[s]={x:a,y:_},p){if(this._edit_node_name_id===p)return;if(this._node_pressed_count[p]===1&&!this._resize_node_id_pointer_id[p]&&this._edit_datum_node_id!==p&&!this._capturing_gesture&&!this._core_component_unlocked[p]){if(this._tree_layout)this._is_unit_node_id(p)&&this._is_unit_component(p)&&(this._layout_drag_node[p]?this._on_layout_component_drag_move(p,t):this._on_layout_component_drag_start(p,t));else if(this._is_draggable_mode())if(this._drag_node_id[p])this._is_node_unlocked(p)||(this._drag_move(p,t),this._is_unit_node_id(p)&&(this._blue_drag&&this._on_unit_blue_drag_move(p),this._collapse_next_unit_id===p&&(this._collapse_world_position=this._get_node_position(p))));else{if(this._is_freeze_mode()&&He(this._pointer_down_position[s],{x:a,y:_})<15)return;let d=p;if(this._is_unit_node_id(p)||this._is_datum_node_id(p)||this._is_plug_node_id(p)){if(this._mode==="data")this._green_drag||(d=this._on_node_yellow_drag_start(p,t));else if(this._mode==="add")!this._green_drag&&this._search_hidden&&(d=this._on_node_green_drag_start(p,t));else if(this._mode==="remove")this._on_node_red_drag_start(d,s);else if(this._mode==="change"){if(this._is_unit_node_id(d))this._on_unit_blue_drag_start(d,s),this._ascend_node(d,s);else if(this._is_datum_node_id(d)){let{datumId:m}=Ae(d),h=this._datum_tree[m],f=yi(n,h),b=this._sim_duplicate_datum(d),g;do g=Ih(n,f);while(g===h.value&&g!=="null");let v=Th(g),x=this._datum[b];x.setProp("data",v),x.dispatchEvent("datumchange",{data:v}),this._green_drag=!0,this._green_drag_node_id=p,this._green_drag_clone_id=b,this._on_node_pointer_leave(p,t),this._on_pointer_up(t),this._on_node_pointer_down(b,t),d=b,this._ascend_node(d,s)}}}if(this._drag_node_id[d]||this._drag_start(d,t),this._is_freeze_mode()){let{x:m,y:h}=this._get_node_position(d),{x:f,y:b}=c,[g,v]=this._client_to_graph(f,b),x=this._node[d];x.hx=g-m,x.hy=v-h}}}}if(this._pointer_down_count===2&&pe(this._resize_node_id_pointer_id)===0){let[d,m]=J(this._pointer_down),{x:h,y:f}=this._pointer_position[d],{x:b,y:g}=this._pointer_position[m];if(this._multiselect_area_ing){let v=Math.min(h,b),x=Math.max(h,b),I=Math.min(f,g),E=Math.max(f,g);this._multiselect_area_rect={x0:v,y0:I,x1:x,y1:E},this._tick_multiselect_area()}else{if(this._tree_layout||this._subgraph_graph)return;let v=Di(h,f,b,g);if(!this._zooming)Math.abs(v-this._touch_zoom_d)>60&&(this._zooming=!0,this._touch_zoom_d=v);else{let x=this._touch_zoom_d-v;if(this._pressed_node_pointer_count===0){let I=this._touch_zoom_d-v;this._zoom_in(I,this._touch_zoom_position_start.x,this._touch_zoom_position_start.y)}else if(this._pressed_node_pointer_count===2&&this._pressed_node_count===1&&p){let I=this._node[p],{x:E,y:D,width:w,height:T}=I;this._zoom_in(x/2,E+w/2-this._zoom.x,D+T/2-this._zoom.y)}this._touch_zoom_d=v}}}};this._translate_pressed_node=()=>{for(let t in this._pressed_node_id_pointer_id){let e=J(this._pressed_node_id_pointer_id[t])[0];if(!this._pointer_position[e])return;let{x:n,y:i}=this._pointer_position[e],[s,a]=ha(this._zoom,n,i);if(this._selected_node_id[t])for(let _ in this._selected_node_id)this._translate_node(_,s,a,this._translate_x,this._translate_y);else if(this._translate_node(t,s,a,this._translate_x,this._translate_y),this._is_ext_node_id(t)){let{type:_,pinId:c,subPinId:p}=gt(t),u=De(_,c,p);this._has_node(u)&&this._translate_node(u,s,a,this._translate_x,this._translate_y)}else if(this._is_int_node_id(t)){let{type:_,pinId:c,subPinId:p}=gt(t),u=Kt(_,c,p);this._translate_node(u,s,a,this._translate_x,this._translate_y)}}};this._translate_search_node=()=>{if(this._search_unit_id&&this._mode==="add"){let{x:t,y:e}=this._world_screen_center(),[n,i]=ha(this._zoom,t,e);this._translate_node(this._search_unit_id,n,i,this._translate_x,this._translate_y),this._for_each_unit_pin(this._search_unit_id,s=>{this._translate_node(s,n,i,this._translate_x,this._translate_y)})}};this._translate_node=(t,e,n,i,s)=>{let a=this.get_node(t),_=a.x-i/this._zoom.z,c=a.y-s/this._zoom.z;a.hx=e-a.x,a.hy=n-a.y,a.fx=_,a.fy=c,a.x=_,a.y=c};this._state_expose_unit_pin_set=(t,e,n,i,s)=>{let{specs:a,setSpec:_,forkSpec:c}=this.$props,p=this._get_unit(t),{id:u}=p;if(xd(a,u))throw new Error("cannot expose base unit pin set");{let d=B(this._get_unit_spec(t));$i({pinId:n,type:e,pinSpec:i},d),_(d.id,d),this._sim_graph_unit_add_pin(t,e,n,s),this.temp_fixate_node(t)}};this.expose_unit_pin_set=(t,e,n,i,s)=>{this._expose_unit_pin_set(t,e,n,i,s),this._dispatch_action(f1(t,e,n,i,s))};this._expose_unit_pin_set=(t,e,n,i,s)=>{this._state_expose_unit_pin_set(t,e,n,i,s),this._pod_expose_unit_pin_set(t,e,n,i)};this._state_cover_unit_pin_set=(t,e,n,i,s)=>{let{specs:a,setSpec:_,forkSpec:c}=this.$props,p=this._get_unit(t),{id:u}=p;if(xd(a,u))throw new Error("cannot cover base unit pin set");{let d=B(this._get_unit_spec(t)),m=ut(t,e,n);this._sim_graph_unit_remove_pin(m),Oi({pinId:n,type:e},d),_(d.id,d)}};this._pod_cover_unit_pin_set=(t,e,n,i)=>{this._pod.$coverUnitPinSet({unitId:t,type:e,pinId:n,pinSpec:i})};this.cover_unit_pin_set=(t,e,n,i,s)=>{this._cover_unit_pin_set(t,e,n,i,s),this._dispatch_action(g1(t,e,n,i,s))};this._cover_unit_pin_set=(t,e,n,i,s)=>{let{specs:a,setSpec:_,forkSpec:c}=this.$props;this._state_cover_unit_pin_set(t,e,n,i,s),this._pod_cover_unit_pin_set(t,e,n,i)};this.add_new_exposed_pin_set_at=(t,e,n,i,s,a)=>{this.add_exposed_pin_set(e,t,n,i,{0:{ext:s,int:a}})};this._on_capture_gesture_end=(t,e)=>{let{specs:n,getSpec:i,newSpec:s}=this.$props,{$x:a,$y:_,$sx:c,$sy:p}=this.$context,{x:u,y:d,z:m}=this._zoom,h=e.length;this._capturing_gesture=!1;let f=null,b=null,g=null;h=e.length;let v=I=>(I-a)/c/m+u,x=I=>(I-_)/p/m+d;if(h>6)if(f=yD(e,25),f)this._on_line_gesture_end(f);else{let I=()=>{let E=e[0],D=e[e.length-1],w=v(E.x),T=x(E.y),C=v(D.x),P=x(D.y),k={x:w,y:T},M={x:C,y:P},U=_s/2,L=this._find_inside_core_and_pin_id(k,U),O=this._find_inside_core_and_pin_id(M,U);L&&O&&this._add_unit_between_pins(L,O)};if(He(e[0],e[h-1])>3*Qn)I();else{e.push(e[0]);let E=[],D=e,w=C=>{let P=this.get_node(C),k=0;for(let U=1;U<D.length;U++){let L=D[U],O=v(L.x),R=x(L.y),N=D[U-1],z=v(N.x),F=x(N.y);k7(O,R,z,F,P.x,P.y,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)&&k++}return k%2===1};for(let C in this._node)w(C)&&E.push(C);let T=C=>{if(E.length>0){let P=this._predict_collapse_map(C,E),k=S({graphId:C,graphBundle:null},P);this._start_move_subgraph_into(C,k),this._pod.$moveSubgraphInto(k)}};if(b=vD(e)){let C=v(b.x+b.width/2),P=x(b.y+b.height/2),k=Math.max(b.width/c/this._zoom.z,wh),M=Math.max(b.height/c/this._zoom.z,G0),U={x:C,y:P};if(this._mode==="none"){let L=xn(n);this._add_empty_spec(L,{render:!0,component:{defaultWidth:k,defaultHeight:M}});let O={id:L},R=i(L),N={unit:O,specs:{[L]:R}},z=this._new_unit_id(L),F=ve({},{}),V={x:0,y:0};this._add_unit(z,N,U,F,V,null),this._sim_add_sub_component(z),this._connect_sub_component(z),T(z)}else this._mode==="add"?(this._search_unit_graph_position=U,this._search_unit_component_size={width:k,height:M},this._set_search_filter(L=>!!on(n,L)),this._show_search()):this._mode}else if(g=xD(e,.3)){let C=v(g.x),P=x(g.y),k={x:C,y:P};if(this._mode==="none"){let M=xn(n);this._add_empty_spec(M);let U=this._new_unit_id(M),O=un({id:M},n),R={input:{},output:{}},N={x:0,y:0};this.add_unit(U,O,k,R,N,null),T(U)}else this._mode==="add"?(this._search_unit_graph_position=k,this._set_search_filter(M=>!on(n,M)),this._show_search()):this._mode}else I()}}this._pointer_down_count===2||this._is_alt_pressed()?this._restart_gesture=!0:this._restart_gesture=!1};this._is_draggable_mode=()=>this.__is_draggable_mode(this._mode);this._is_dropable_mode=()=>this.__is_dropable_mode(this._mode);this.__is_draggable_mode=t=>t==="none"||t==="info"||t==="data"||t==="add"||t==="remove"||t==="change"||t==="multiselect";this.__is_dropable_mode=t=>t==="none"||t==="data"||t==="add"||t==="remove"||t==="change";this._is_freeze_mode=()=>this.__is_freeze_mode(this._mode);this.__is_freeze_mode=t=>t==="add"||t==="remove"||t==="change"||t==="data";this._blue_drag_hover_return=()=>{if(this._blue_drag_hover_unit_id){let t=this._blue_drag_hover_unit_id;this._refresh_unit_layer(t),this._refresh_unit_fixed(t);for(let e in this._blue_drag_hover_position){let n=this._blue_drag_hover_position[e];this._has_node(e)&&this._set_node_position(e,n)}this._for_each_unit_output(t,e=>{this._set_output_reduced(e,!1)});for(let e in this._blue_drag_hover_merge_anchor){let n=this._blue_drag_hover_merge_anchor[e];this._has_node(e)&&this._has_node(n)&&this._merge_pin_pin(e,n)}this._blue_drag_hover_unit_id=null}else throw new Ko};this.__on_pointer_up=t=>{if(this._collapse_pointer_to_unit[t]&&delete this._collapse_pointer_to_unit[t],this._control&&this._temp_control_lock&&(this._unlock_control(),this._temp_control_lock=!1,this._control.dispatchEvent("temp_unlock",{},!1)),this._pointer_down[t]){let n=this._pointer_id_pressed_node_id[t];n&&this._get_node_comp(n).$element.dispatchEvent(new PointerEvent("pointerup",{pointerId:t})),delete this._pointer_down[t],delete this._pointer_down_position[t],delete this._pointer_down_move_count[t],this._pointer_down_count--}this._long_press_pointer.has(t)&&(this._long_press_pointer.delete(t),this._long_press_count--),this._long_press_background_pointer.has(t)&&(this._long_press_background_pointer.delete(t),this._long_press_background_count--),this._removing_err=!1,this._main.hasPointerCapture(t)&&this._main.releasePointerCapture(t);let e=this._pointer_id_pressed_node_id[t];if(e){if(this.__set_node_pressed(e,t,!1),this._tree_layout)this._is_unit_node_id(e)&&this._is_unit_component(e)&&this._layout_drag_node[e]&&this._on_layout_component_drag_end(e);else if(this._drag_node_id[e]){if(this._is_draggable_mode()){if(this._is_freeze_mode()&&(this._is_unit_node_id(e)||this._is_datum_node_id(e)||this._is_plug_node_id(e))&&this._descend_node(e),this._is_link_pin_node_id(e)&&this._mode==="remove"){let{unitId:s}=it(e);this._on_unit_red_drag_end(s)}let n=this._green_drag_clone_id;n&&this._on_node_green_drag_end(n);let i=this._yellow_drag_clone_id;if(i&&this._on_node_yellow_drag_end(i),this._blue_drag&&this._is_unit_node_id(e)&&this._on_unit_blue_drag_end(this._blue_drag_init_id),this._collapse_node_id.has(e)||this._on_node_drag_end(e),this._selected_node_id[e])for(let s in this._selected_node_id)s!==e&&(this._node_pressed_count[s]||0)===0&&(this._collapse_node_id.has(s)||this._on_node_drag_end(s));if(this._is_freeze_mode()&&this._is_unit_node_id(e)){let s={},a={},_=S(S({},this._normal_node),this._exposed_int_node),c=(m,h)=>m.l<h.l,p=new Set;this._for_each_unit_pin(e,m=>{if(!this._is_link_pin_merged(m)&&!this._is_link_pin_merged(m)){p.add(m);for(let h in _){let f=this._node_node_surface_distance(m,h),{l:b}=f;if(b<Qn&&this._is_pin_node_match(m,h)){let g={parent:null,value:{node_id:h,l:b},left:null,right:null};s[m]?s[m]=A_(s[m],g,c):s[m]=g;let v={parent:null,value:{node_id:m,l:b,heap:g},left:null,right:null};a[h]?a[h]=A_(a[h],v,c):a[h]=v}}}});let u={},d=m=>{let h=null;if(s[m]){let f=s[m],{node_id:b}=f.value,g=a[b];g&&(g.value.node_id===m?(a[b]=zr(g,c),a[b]&&bb(a[b],({node_id:v,heap:x})=>{s[v]=zr(x,c)}),u[m]=b):d(g.value.node_id))}return p.delete(m),h};for(;p.size>0;)for(let m of p)d(m);for(let m in u){let h=u[m];this._is_link_pin_node_id(h)&&this._spec_is_link_pin_ignored(h)&&this._set_link_pin_ignored(h,!1),this._is_link_pin_node_id(m)&&this._spec_is_link_pin_ignored(m)&&this._set_link_pin_ignored(m,!1),this.__drop_pin(m,h)}this._refresh_node_color(e)}}if(this._is_ext_node_id(e)){let{type:n,pinId:i,subPinId:s}=gt(e),a=De(n,i,s);this._has_node(a)&&(this._drag_node_pointer_id[a]=t,this._is_draggable_mode()&&this._on_node_drag_end(a))}else if(this._is_int_node_id(e)){let{type:n,pinId:i,subPinId:s}=gt(e),a=Kt(n,i,s);this._is_draggable_mode()&&this._on_node_drag_end(a)}}this._has_node(e)&&(this._refresh_node_color(e),this._refresh_node_selection(e))}this._long_press_pointer.has(t)&&(this._long_press_pointer.delete(t),this._long_click_cancel_pointer_id.has(t)&&this._long_click_cancel_pointer_id.delete(t),this._long_press_count--),this._pointer_down_count===0&&(this._zooming=!1),this._multiselect_area_ing&&this._on_multiselect_area_end(),this._translating=!1};this._on_pointer_up=t=>{let{pointerId:e}=t;this.__on_pointer_up(e)};this._on_wheel=({deltaY:t,altKey:e,ctrlKey:n,screenX:i,screenY:s,clientX:a,clientY:_},c)=>{if(this._tree_layout||this._subgraph_graph)return;let{$x:p,$y:u,$width:d,$height:m}=this.$context;i>=p&&s>=u&&i<=p+d&&s<=u+m&&this._zoom_in(t,a,_)};this._on_scroll=({deltaY:t,screenX:e,screenY:n,clientX:i,clientY:s},a)=>{};this._is_background_pointer=t=>!(this._pointer_id_hover_node_id[t]||this._pointer_id_hover_link_id[t]||this._pointer_id_pressed_node_id[t]);this._click_just_cancelled=new Set;this._on_click_cancel=t=>{let{pointerId:e}=t;this._click_just_cancelled.add(e)};this._on_click=(t,e)=>{if(pe(this._resize_node_id_pointer_id)>0)return;this._control_lock||this._core_component_unlocked_count===0&&this._lock_control();let{pointerId:n,clientX:i,clientY:s,pointerType:a}=t;if(this._cancel_click){this._cancel_click=!1;return}this._is_background_pointer(n)&&this._on_background_click()};this._on_background_click=()=>{this._core_component_unlocked_count>0?this._lock_all_component():this._unlocked_datum.size>0?this._lock_all_datum():this._edit_datum_id||this._edit_datum_just_blurred||this._deselect_all_visible(),this._focused||this.focus()};this._deselect_all_visible=()=>{if(this._tree_layout){let t=this._get_current_layout_layer_id();for(let e in this._selected_node_id)this._is_unit_node_id(e)&&this._is_unit_component(e)&&this._spec_get_sub_component_parent_id(e)===t&&this._deselect_node(e)}else this._deselect_all()};this._hide_minimap=()=>{this._cabinet&&this._cabinet.setActive("minimap",!1)};this._show_minimap=()=>{this._cabinet&&this._cabinet.setActive("minimap",!0)};this._toggle_minimap=()=>{this._minimap&&(this._minimap_hidden?this._show_minimap():this._hide_minimap())};this._toggle_pallete=()=>{};this._set_crud_mode=t=>{this._modes&&this._modes.setProp("mode",t)};this._on_double_click=t=>{let{pointerId:e}=t;this._cancel_double_click||(this._mode==="multiselect"&&(this._restart_gesture=!1),this._is_background_pointer(e)&&this._on_background_double_click(t))};this._on_background_double_click=t=>{let{pointerId:e,clientX:n,clientY:i}=t;this._double_click_background(e,n,i)};this._double_click_background=(t,e,n)=>{if(!this._tree_layout){let i=this._screen_to_world(e,n);if(this._mode==="none"){this._selected_node_count>0&&this._deselect_all();let s=this._new_datum_id(),a=Xe(s);this._add_empty_datum(s,i),this._unlock_datum(a),this._focus_datum(s,[])}else if(this._mode==="add"){let s=this._screen_to_world(e,n);this._paste_clipboard(s)}else this._mode==="data"?this.__on_data_background_double_click(t,e,n):this._mode==="multiselect"&&this._toggle_select_all_visible()}};this._on_data_background_double_click=t=>{let{pointerId:e,clientX:n,clientY:i}=t;this.__on_data_background_double_click(e,n,i)};this.__on_data_background_double_click=(t,e,n)=>{let i=this._screen_to_world(e,n),s=this._new_datum_id();this._add_random_datum(s,i)};this._add_empty_spec=(t,e={})=>{let{setSpec:n}=this.$props,i=pn(wn(),e);return i.id=t,n(t,i),i};this._add_empty_datum=(t,{x:e,y:n})=>{this.add_datum(t,"",{x:e,y:n});let i=Xe(t);this._selected_node_count>0&&this._deselect_all(),this._select_node(i),this._set_crud_mode("none"),setTimeout(()=>{this._focus_datum(t,[])},0)};this._add_random_datum=(t,{x:e,y:n})=>{let i=Zn(["0","1","2","3","'foo'","'bar'","'zaz'","true","false","{}","[]"]);this.add_datum(t,i,{x:e,y:n})};this._on_long_click=t=>{if(this._cancel_long_click){this._cancel_long_click=!1;return}let{pointerId:e}=t;this._is_background_pointer(e)&&this._on_background_long_click(t)};this._on_background_long_click=t=>{this._tree_layout?this._get_current_layout_layer_id()&&this._layout_leave_sub_component():this._mode==="none"&&setTimeout(()=>{this._can_leave()&&this.leave()},0)};this._spec_get_graph_core_size=(t,e)=>{let{specs:n}=this.$props,i=this._get_unit_spec_id(t),s=on(n,i),a,_;if(s)return this._get_unit_component_graph_size(t);{let c=So(n,i,e);a=2*c,_=2*c}return{width:a,height:_}};this._start_long_press_collapse=(t,e,n,i)=>{var j;let{specs:s,setSpec:a,forkSpec:_,shouldFork:c}=this.$props,{x:p,y:u}=i;n=n.filter(H=>!(this._is_err_node_id(H)||this._is_type_node_id(H)));let d=[];for(let H of n)this._is_unit_node_id(H)&&this._is_unit_component(H)&&d.push(H);let m=null,h={};for(let H of d){let K=H;do if(K=this._spec_get_sub_component_parent_id(K),h[K]=(j=h[K])!=null?j:0,h[K]++,h[K]===d.length){m=K;break}while(K!==null)}let f=n.length===0;if(e&&f)return!1;let b=e&&this._get_unit_spec_render(e),{x:g,y:v}=this._screen_to_world(p,u),x,I;if(e){let H=this._get_unit_spec_id(e),K=this._get_unit_spec(e);if(x=H,I=K,c(H)){let[q,Q]=_(K);this._spec_fork_unit(e,q),x=q,I=Q}}let E=e,D=x,w=I,T=null,C=e&&this._get_unit_spec_render(e),P=n.some(H=>this._is_unit_node_id(H)&&this._is_unit_component(H)),k=null,M=C===void 0&&P;if(E===null){w=Li();let H="untitled";w.name=H,w.metadata=w.metadata||{},w.metadata.icon=null,P&&(w.render=!0,w.component=w.component||{subComponents:{},children:[]},w.component.subComponents=w.component.subComponents||{},w.component.children=w.component.children||[]);let K=xn(s);w.id=K,a(K,w);let q=this._new_unit_id(K),Q=s4(K,s);E=q,D=K,T=Q,this._state_add_unit(q,Q,{x:g,y:v},{width:2,height:2},{input:{},output:{}},{x:0,y:0},m),P&&this._sim_add_sub_component(q),this._force_pointer_drag_node(q,t,p,u)}else if(w.system){let H=xn(s);w=B(w),D=H,delete w.system,w.id=H,a(H,w)}for(let H of n)if(this._static_position[H]&&this._stop_node_static(H),this._is_datum_node_id(H)){let K=this._datum_to_pin[H],q=this._datum_to_plug[H];if(K){if(n.includes(K))continue;if(this._is_link_pin_node_id(K)){let Q=this._pin_to_merge[K];if(n.includes(Q))continue}this._remove_pin_datum_link(H)}else if(q){if(n.includes(q))continue;this._remove_pin_datum_link(H)}}for(let H of n)this._start_node_long_press_collapse(H);this._collapse_unit_id=e,this._collapse_commit=!0,this._collapse_init_node_id_set=new Set(n),this._collapse_pointer_to_unit[t]=E;let U=this._predict_collapse_map(E,n),L=(C||P)&&(!e||!b);this._flush_debugger(),this._pause_debugger();let O=this._state_move_subgraph_into(E,U,L,C,{x:g,y:v}),R=this._get_graph_unit_bundle_spec(E),N={graphId:this._collapse_next_unit_id,nextSpecId:this._collapse_next_spec_id,graphBundle:R,nodeIds:{unit:this._collapse_units,link:this._collapse_link_pins,merge:this._collapse_merges,plug:this._collapse_plugs},nextIdMap:this._collapse_next_id_map,nextPinIdMap:this._collapse_unit_next_pin_map,nextMergePinId:this._collapse_merge_next_pin_map,nextPlugSpec:this._collapse_next_plug_spec_map,nextSubComponentParentMap:this._collapse_sub_component_next_parent_id,nextSubComponentChildrenMap:this._collapse_sub_component_next_children,nextUnitPinMergeMap:this._collapse_next_unit_pin_merge_map,nextSubComponentIndexMap:this._collapse_next_sub_component_index_map,position:i},z=T!=null?T:{unit:{id:D},specs:{[D]:{id:D}}};O4(z);let F=[];this._collapse_unit_id||F.push(fi(E,z,i,void 0,void 0,m)),F.push(gg(N));let V=Mi(F);return this._dispatch_action(B(V)),this._pod.$bulkEdit({actions:F}),O};this._pod_move_unit_into=(t,e,n)=>{let i=[];this._collapse_unit_id||i.push(fi(t,e)),i.push(gg(n));let s=Mi(i);this._pod.$bulkEdit({actions:i})};this._state_move_subgraph_into=(t,e,n,i,{x:s,y:a})=>{var V;let{nodeIds:{unit:_=[],link:c=[],merge:p=[],plug:u=[],data:d=[]},nextIdMap:m,nextSpecId:h,nextPinIdMap:f,nextMergePinId:b,nextUnitPinMergeMap:g,nextPlugSpec:v,nextSubComponentParentMap:x,nextSubComponentIndexMap:I,nextSubComponentChildrenMap:E}=e;this._collapsing=!0,this._collapse_init_spec=B(this._spec),this._collapse_next_unit_id=t,this._collapse_next_spec_id=h,this._collapse_world_position=this._get_node_position(t),this._collapse_next_map=e,this._collapse_next_id_map=m,this._collapse_unit_next_pin_map=f,this._collapse_merge_next_pin_map=b,this._collapse_next_plug_spec_map=v,this._collapse_next_unit_pin_merge_map=g,this._collapse_next_sub_component_index_map=I,this._collapse_next_sub_component_index_map=I,this._collapse_sub_component_children=E,this._collapse_sub_component_next_parent_id=x,this._collapse_sub_component_next_children=E,this._collapse_units=_,this._collapse_link_pins=c,this._collapse_merges=p,this._collapse_plugs=u;let D=_.length===0&&c.length===0&&u.length===0&&p.length===0&&d.length===0,w=_.some(j=>this._is_unit_node_id(j)&&this._is_unit_component(j)),T=[];this._get_node_shape(t)!=="rect"&&this._get_unit_spec_render(t)===void 0&&w&&this._componentify_core(t,{},!0);let P=this._get_sub_component(t);for(let j of _){this._collapse_unit_spec[j]=this._get_unit_spec(j);let H=this._is_unit_component(j),K=this.get_node(j),q=_t(S({},K),{opacity:1}),Q=()=>{let at=this.get_node(t),{x:Dt,y:Et}=at,{width:Ct,height:Pt}=z();return{x:Dt,y:Et,width:Ct,height:Pt,opacity:1}};H&&T.push(j),!H&&P||this._animate_core_style(j,q,Q,({width:at,height:Dt})=>{this._resize_core_width(j,at),this._resize_node_width(j,at),this._resize_core_height(j,Dt),this._resize_node_height(j,Dt)},()=>{})}let k=this._order_sub_component_ids(T),M=-1/0,U=-1/0;if(w){for(let K of k){let q=this._get_sub_component(K),Q=this._spec_get_sub_component_children(K);for(let at of Q)if(!T.includes(at)){let Dt=this._get_sub_component(at);q.pullParentRoot(Dt),this._component.pushRoot(Dt)}}let j=[];for(let K of k){let q=this._get_sub_component(K);j.push(q);let Q=this._spec_get_sub_component_parent_id(K),at=this._spec_get_sub_component_children(K),{width:Dt,height:Et}=this._get_node_size(K);M=Math.max(M,Dt),U=Math.max(U,Et);let Ct=(V=this._collapse_next_id_map.unit[K])!=null?V:K;if(this._component.removeSubComponent(K),P.setSubComponent(Ct,q),Q){let Pt=this._get_sub_component(Q),ot=Q;for(;ot&&!this._collapse_node_id.has(Q);)ot=this._spec_get_sub_component_parent_id(ot);if(ot){let X=P.getSubComponent(ot);ot===Q||(Pt.pullParentRoot(q),X.pushParentRoot(q,"default"))}else Pt.pullParentRoot(q),P.pushRoot(q)}else this._component.pullRoot(q),P.pushRoot(q)}let H=this._get_sub_component_base(t);this._measure_sub_component_base(t,H);for(let K of k)this._leave_sub_component_frame(K);this._animate_sub_component_graph_leave(t,H,[],()=>{let K={},{x:q,y:Q}=this._get_node_screen_position(t),{z:at}=this._zoom,{width:Dt,height:Et}=z();return{style:K,trait:{x:q,y:Q,width:Dt,height:Et,sx:at,sy:at,opacity:1,fontSize:14}}},()=>{for(let K of k)this._mem_remove_component(K)})}let L=this.get_node(t),O=t?{x:L.x,y:L.y,width:L.width,height:L.height,opacity:1}:{x:s,y:a,width:2,height:2,opacity:1},{x:R,y:N}={x:s,y:a},z=()=>{let{width:j,height:H}=this._spec_get_graph_core_size(t,!1);return{width:n?M:j,height:n?U:H}},F=()=>{if(this._pressed_node_id_pointer_id[t]){let{x:Q,y:at}=this._get_node_screen_position(t);R=Q,N=at}let{x:j,y:H}=this._screen_to_world(R,N),{width:K,height:q}=z();return{x:j,y:H,width:K,height:q,opacity:1}};return i||this._animate_core_style(t,O,F,({width:j,height:H})=>{this._resize_core_width(t,j),this._resize_node_width(t,j),this._resize_core_height(t,H),this._resize_node_height(t,H)},()=>{}),t&&this._set_node_layer(t,he),D&&setTimeout(()=>{this._stop_collapse()},0),this._simulation.alphaDecay(0),this._start_graph_simulation(he),!0};this._state_make_this_graph_interface=t=>({removeUnit:e=>this._state_remove_unit(e),addPinToMerge:(e,n,i,s)=>this._state_add_link_pin_to_merge(e,n,i,s),addMerge:(e,n)=>{t=t!=null?t:this._init_merge_spec_position(e),this._state_add_merge(n,e,t),this._sim_collapse_merge(n)},plugPin:(e,n,i,s)=>this._state_plug_exposed_pin(e,n,i,s),hasMerge:e=>this.__spec_has_merge(e),exposePinSet:(e,n,i)=>this._state_add_exposed_pin_set(e,n,i),exposePin:(e,n,i,s)=>{throw new $},coverPin:(e,n,i)=>this.__state_remove_exposed_sub_pin(e,n,i),setUnitPinConstant:(e,n,i,s,a)=>{throw new $},coverPinSet:(e,n)=>this._state_remove_exposed_pin_set(e,n),unplugPin:(e,n,i)=>this._state_unplug_exposed_pin(e,n,i),getSubPinSpec:(e,n,i)=>this._spec_get_sub_pin_spec(e,n,i),getMergesSpec:function(){throw new $},getMergeSpec:e=>this._spec_get_merge(e),hasPinNamed:(e,n)=>this._spec_has_pin_named(e,n),getUnit:e=>this._state_get_unit_interface(e),getUnitPinData:(e,n,i)=>{let s=ut(e,n,i);return this._get_pin_datum_value(s)},getMergeData:e=>{let n=At(e),i=this._get_merge_datum_node_id(n);return i?this._get_datum_value(i):void 0},hasUnit:function(e){throw new $},addUnit:(e,n)=>{t=t!=null?t:this._jiggle_world_screen_center();let i=n.getUnitBundleSpec();this._state_add_unit(e,i,t,{},{},t,null,null),this._is_unit_component(e)&&(this._sim_add_sub_component(e),this._connect_sub_component(e))},removeMerge:e=>{let n=At(e);return this._state_remove_merge(n)},moveRoot:(e,n,i)=>{throw new $},setPinData:(e,n,i)=>{throw new $},getPinPlugCount:(e,n)=>this._spec_get_pin_plug_count(e,n),getPinData:(e,n)=>nt(this._unit_datum,[e,n],void 0),setPinConstant:(e,n,i)=>{throw new $},hasPlug:(e,n,i)=>this._spec_has_plug(e,n,i),isUnitPinRef:(e,n,i)=>{throw new $},getExposedPinSpec:(e,n)=>this._get_pin_spec(e,n),removePinOrMerge:(e,n,i,s,a,_)=>{let c=ut(n,i,s);this._state_remove_pin_or_merge(c)},getExposedPinSpecs:()=>this._spec_get_exposed_pin_specs(),isPinConstant:(e,n)=>!1,removePinFromMerge:(e,n,i,s)=>{this.__state_remove_pin_from_merge(e,n,i,s)},hasMergePin:(e,n,i,s)=>this._spec_has_merge_pin(e,n,i,s),getPlugSpecs:()=>{throw new $},getSpec:()=>{throw new $},setUnitSize:function(e,n,i){this._resize_core(e,n,i)},setSubComponentSize:function(e,n,i){throw new $}});this._state_get_subgraph_graph_interface=t=>{let e=B(this._get_unit_spec(t));return{removeUnit:n=>{let i=this._spec_graph_unit_get_unit_bundle(t,n);this._on_graph_unit_remove_unit_moment({unitId:n,bundle:i,path:[t]})},getMergeData:n=>{},getPlugSpecs:()=>this._spec_graph_unit_plug_specs(t),addPinToMerge:(n,i,s,a)=>this._spec_graph_unit_add_pin_to_merge(t,n,i,s,a),addMerge:(n,i)=>{this._spec_graph_unit_add_merge(t,i,n)},plugPin:(n,i,s,a)=>this._spec_graph_unit_add_sub_pin(t,n,i,!1,s,a),hasMerge:n=>this._spec_graph_unit_has_merge(t,n),exposePinSet:(n,i,s,a)=>{let _=this._node[t],c=this._get_node_position(t),p=fo(),u=Jo(_,p,3);if(this._spec_graph_unit_add_pin(t,n,i,s),this._sim_graph_unit_add_pin(t,n,i,u),a!==void 0){let d=ut(t,n,i);this._state_set_unit_pin_data(d,a)}},exposePin:(n,i,s,a)=>this._on_graph_unit_expose_pin({type:n,pinId:i,subPinId:s,subPinSpec:a,path:[t]}),coverPin:(n,i,s)=>{let a=this._spec_graph_unit_get_sub_pin_spec(t,n,i,s);this._on_graph_unit_cover_pin({type:n,pinId:i,subPinId:s,subPinSpec:a,path:[t]})},setUnitPinConstant:(n,i,s,a)=>{this._on_graph_unit_set_unit_pin_constant({unitId:n,type:i,pinId:s,constant:a,data:void 0,path:[t]})},coverPinSet:(n,i,s)=>{let a=this._spec_graph_get_pin_spec(t,n,i);this._on_graph_unit_cover_pin_set({type:n,pinId:i,path:[t],pinSpec:a,data:void 0})},unplugPin:(n,i,s)=>{let a=this._spec_graph_unit_get_sub_pin_spec(t,n,i,s);this._on_graph_unit_unplug_pin_moment({type:n,pinId:i,subPinId:s,subPinSpec:a,path:[t]})},getMergesSpec:()=>this._spec_graph_get_merges_spec(t),getMergeSpec:n=>this._spec_graph_get_merge_spec(t,n),hasPinNamed:(n,i)=>this._spec_unit_has_pin_named(t,n,i),getUnit:n=>this._spec_graph_get_unit_interface(t,n),getUnitPinData:(n,i,s)=>this._spec_graph_get_unit_pin_data(t,n,i,s),hasUnit:n=>this._spec_graph_unit_has_unit(t,n),addUnit:(n,i)=>{let s=i.getUnitBundleSpec(),_={id:i.getSpec().id};this._on_graph_unit_add_unit_moment({unitId:n,bundle:s,path:[t]})},removeMerge:n=>this._spec_graph_unit_remove_merge(t,n),moveRoot:(n,i,s)=>{throw new $},setPinData:(n,i,s)=>{throw new $},getPinPlugCount:(n,i)=>this._spec_graph_unit_get_pin_plug_count(t,n,i),getPinData:(n,i)=>{let s=ut(t,n,i);return this._get_pin_datum_value(s)},setPinConstant:(n,i,s)=>{throw new $},hasPlug:(n,i,s)=>this._spec_graph_unit_has_plug(t,n,i,s),isUnitPinRef:(n,i,s)=>{throw new $},getExposedPinSpecs:()=>xg(e),getExposedPinSpec:(n,i)=>I4(e,n,i),removePinOrMerge:(n,i,s,a)=>this._spec_graph_unit_remove_pin_or_merge(t,n,i,s,a),isPinConstant:(n,i)=>Dr(e,t,n,i),removePinFromMerge:(n,i,s,a)=>this._spec_graph_unit_remove_pin_or_merge(t,n,i,s,a),hasMergePin:(n,i,s,a)=>Pr(e,n,i,s,a),getSubPinSpec:(n,i,s)=>{throw new $},getSpec:()=>e,setUnitSize:(n,i,s)=>{},setSubComponentSize:function(n,i,s){}}};this._state_get_graph_unit_graph_unit_interface=(t,e)=>{let n=B(this._get_graph_unit_unit_spec(t,e));return this._make_graph_spec_interface(n)};this._make_spec_unit_interface=(t,e)=>({setParent:function(n){throw new $},setInputs:function(n,i){throw new $},setPin:function(n,i,s,a){throw new $},setPinIgnored:function(n,i,s){throw new $},setInputIgnored:function(n,i){throw new $},setOutputIgnored:function(n,i){throw new $},setPinRef:function(n,i,s){throw new $},setInputRef:function(n,i){throw new $},setOutputRef:function(n,i){throw new $},setInput:function(n,i,s){throw new $},isPinConstant:function(n,i){var s;return(s=nt(t,[n,i,"constant"],void 0))!=null?s:nt(e,[`${n}s`,i,"defaultIgnored"],!1)},isPinIgnored:function(n,i){return!1},isPinRef:function(n,i){throw new $},addInput:function(n,i,s){throw new $},removeInput:function(n){throw new $},setOutputs:function(n,i){throw new $},setOutput:function(n,i,s){throw new $},addOutput:function(n,i){throw new $},removeOutput:function(n){throw new $},removePin:function(n,i){throw new $},getPin:function(n,i){throw new $},getInputs:function(){throw new $},getDataInputs:function(){throw new $},getRefInputs:function(){throw new $},getInput:function(n){throw new $},getOutputs:function(){throw new $},getDataOutputs:function(){throw new $},getRefOutputs:function(){throw new $},getOutput:function(n){throw new $},push:function(n,i){throw new $},pushInput:function(n,i){throw new $},pushAllInput:function(n){throw new $},pushOutput:function(n,i){throw new $},pushAllOutput:function(n){throw new $},pushAll:function(n){throw new $},takeInput:function(n){throw new $},takeOutput:function(n){throw new $},take:function(n){throw new $},takeAll:function(){throw new $},peakInput:function(n){throw new $},peakOutput:function(n){throw new $},peak:function(n){throw new $},peakAllOutput:function(){throw new $},peakAll:function(){throw new $},renamePin:function(n,i,s){throw new $},renameInput:function(n,i){throw new $},renameOutput:function(n,i){throw new $},hasRefPinNamed:function(n,i){throw new $},hasRefInputNamed:function(n){throw new $},hasRefOutputNamed:function(n){throw new $},hasPinNamed:function(n,i){throw new $},hasInputNamed:function(n){throw new $},hasOutputNamed:function(n){throw new $},getInputCount:function(){throw new $},getOutputCount:function(){throw new $},getInputNames:function(){return J(e.inputs)},getOutputNames:function(){return J(e.outputs)},setPinData:function(n,i,s){throw new $},removePinData:function(n,i){throw new $},setInputConstant:function(n,i){throw new $},setOutputConstant:function(n,i){throw new $},getCatchErr:function(){throw new $},getConfig:function(){throw new $},reset:function(){throw new $},pause:function(){throw new $},play:function(){throw new $},paused:function(){throw new $},snapshot:function(){throw new $},restore:function(n){throw new $},getSelfPin:function(){throw new $},err:function(n){throw new $},hasErr:function(){throw new $},getErr:function(){throw new $},takeErr:function(){throw new $},getPinsData:function(){throw new $},getInputData:function(){throw new $},getRefInputData:function(){throw new $},getSpec:function(){return e},getPinData:function(n,i){throw new $},setPinConstant:function(n,i,s){throw new $},getUnitBundleSpec:()=>{let{specs:n}=this.$props;return un(t,n)}});this._make_graph_spec_interface=t=>{let{getSpec:e}=this.$props;return{removeUnit:n=>{},getMergeData:n=>{},getPlugSpecs:()=>{throw new $},addPinToMerge:(n,i,s,a)=>{},addMerge:(n,i)=>{},plugPin:(n,i,s,a)=>{},hasMerge:n=>Va(t,n),exposePinSet:(n,i,s,a)=>{},exposePin:(n,i,s,a)=>{},coverPin:(n,i,s)=>{},setUnitPinConstant:function(n,i,s,a){},coverPinSet:(n,i,s)=>{},unplugPin:(n,i,s)=>{},getMergesSpec:()=>{let{merges:n={}}=t;return n},getMergeSpec:n=>nt(t,["merges",n],void 0),hasPinNamed:(n,i)=>!1,getUnit:n=>{let{units:i={}}=t,s=i[n],{id:a}=s,_=e(a);return this._make_spec_unit_interface(s,_)},getUnitPinData:function(n,i,s){throw new $},hasUnit:n=>$1(t,n),addUnit:(n,i)=>{},removeMerge:n=>{},moveRoot:function(n,i,s){throw new $},setPinData:function(n,i,s){throw new $},getPinPlugCount:(n,i)=>{throw new $},getPinData:function(n,i){},setPinConstant:function(n,i,s){throw new $},hasPlug:(n,i,s)=>{throw new $},isUnitPinRef:function(n,i,s){throw new $},getExposedPinSpecs:()=>{let{inputs:n,outputs:i}=t;return{input:n,output:i}},getExposedPinSpec:(n,i)=>wr(t,n,i),removePinOrMerge:function(n,i,s,a,_,c){},isPinConstant:(n,i)=>!1,removePinFromMerge:()=>{},hasMergePin:(n,i,s,a)=>Pr(t,n,i,s,a),getSubPinSpec:function(n,i,s){throw new $},getSpec:()=>t,setUnitSize:(n,i,s)=>{},setSubComponentSize:function(n,i,s){throw new $}}};this._state_move_subgraph_out_of=(t,e)=>{let n=this._get_node_position(t),i=B({merges:this._get_unit_merges(t),plugs:this._get_unit_plugs(t)});return Ds(this._state_get_subgraph_graph_interface(t),this._state_make_this_graph_interface(n),t,e,i,!0),!0};this._predict_collapse_map=(t,e)=>{var Ct,Pt;let{specs:n,newSpecId:i}=this.$props,{unit_ids:s,merge_node_ids:a,link_pin_node_ids:_,datum_node_ids:c,exposed_node_ids:p}=this._decant_node_ids(e),u=new Set(e),d=[],m=[],h=[],f=[],b={},g={},v={},x={},I={},E={input:{},output:{}},D={},w={},T={},C={unit:{},merge:{},link:{},plug:{},data:{}},P=this._get_unit_spec_id(t),k=this._get_unit_spec(t),M={input:new Set(J(k.inputs||{})),output:new Set(J(k.outputs||{}))},U={input:{},output:{}},L={input:{},output:{}},O=new Set,R=new Set,N=B(this._spec),z={input:{},output:{}},F=new Set,V=new Set(J((Ct=this._spec.merges)!=null?Ct:{})),j=(ot,X)=>{let rt=X,et=0;for(;M[ot].has(rt);)rt=`${X}${et}`,et++;return rt},H=(ot,X,rt,et)=>{var Jt;L[X][et]=(Jt=L[X][et])!=null?Jt:-1,L[X][et]++;let ct=L[X][et];M[X].add(et);let lt=ut(ot,X,rt),bt=this._pin_to_merge[lt],kt=null,xt=null;if(bt){tt(U,[X,bt],et);let{mergeId:ke}=It(bt);kt=ke,xt=B(this._spec_get_merge(kt));for(let Ce of s)delete xt[Ce]}kt=nt(I,[kt,X,"mergeId"],kt);let Gt=this._is_link_pin_ref(lt),Ft=this._spec_is_link_pin_ignored(lt);tt(x,[ot,X,rt],{pinId:et,subPinId:`${ct}`,ref:Gt,defaultIgnored:Ft,mergeId:kt,merge:xt})},K=(ot,X,rt,et,ct)=>{var kt,xt;let lt=!u.has(ot),bt=this._pin_to_int[rt][ot];if(bt){let{type:Gt,pinId:Ft,subPinId:Jt}=gt(bt),ke=Kt(Gt,Ft,Jt);u.has(ke)||(lt=!0)}if(lt){let Gt=(kt=C.unit[X])!=null?kt:X;ct=ct!=null?ct:j(rt,et);let{pinId:Ft,subPinId:Jt}=(xt=this._spec_get_pin_node_plug_spec(rt,ot))!=null?xt:{};return Ft&&Jt&&tt(E,[rt,Ft,Jt],{unitId:Gt,pinId:et}),H(X,rt,et,ct),ct}};for(let ot of c){let{datumId:X}=Ae(ot);m.push(X)}for(let ot of s){let X=this._ref_unit_to_merge[ot];X&&(a.push(X),u.add(X))}for(let ot of _){let{unitId:X,type:rt,pinId:et}=it(ot),ct=this._pin_to_merge[ot];rt==="output"&&ct&&this._is_merge_ref(ct)&&(a.push(ct),u.add(ct),vn(_,ot))}let q={},Q={},at={},Dt={};for(let ot of a){let{mergeId:X}=It(ot),rt={input:0,output:0},et={input:0,output:0},ct={input:[],output:[]},lt={input:[],output:[]};this._for_each_merge_pin(X,(xt,Gt,Ft)=>{rt[Gt]++,u.has(xt)||xt===t?(et[Gt]++,ct[Gt].push({unit_id:xt,pin_id:Ft})):lt[Gt].push({unit_id:xt,pin_id:Ft})}),tt(Dt,[X],et);let bt=rt.input-et.input,kt=rt.output-et.output;q[X]=rt,Q[X]=et,tt(at,[X,"input"],bt),tt(at,[X,"output"],kt)}for(let ot of p){let{type:X,pinId:rt,subPinId:et}=gt(ot);z[X][rt]=z[X][rt]||new Set;let ct=z[X][rt];if(ct.has(et))continue;ct.add(et);let lt=this._get_exposed_pin_internal_node_id(X,rt,et);if(lt){let bt=ye(X),kt=(xt,Gt)=>{tt(C,["plug",X,rt,et],{mergeId:Gt,type:xt})};if(this._is_merge_node_id(lt)){let{mergeId:xt}=It(lt);if(u.has(lt)){let Gt=X,Ft=Q[xt].input+Q[xt].output;Ft===0||Ft>1?(tt(I,[xt,X,"pinId"],rt),tt(E,[X,rt,et],{mergeId:xt})):tt(E,[X,rt,et],{}),at[xt][Gt]>0&&kt(Gt,xt)}else tt(E,[X,rt,et],{}),kt(bt,xt)}else if(this._is_link_pin_node_id(lt)){let{unitId:xt,pinId:Gt}=it(lt);if(s.includes(xt))tt(E,[X,rt,et],{unitId:xt,pinId:Gt}),_.includes(lt)||kt(X);else{tt(E,[X,rt,et],{});let Ft=this._new_merge_id(R);R.add(Ft),kt(bt,Ft)}}else this._is_unit_node_id(lt)?tt(E,[X,rt,et],{unitId:lt,pinId:$t}):tt(E,[X,rt,et],{})}M[X].add(rt),f.push({type:X,pinId:rt,subPinId:et})}for(let ot of a){let{mergeId:X}=It(ot);delete N.merges[X]}for(let ot of a){let{mergeId:X}=It(ot);d.push(X);let rt=this._get_merge(ot),et=this._is_merge_ref(ot),ct={input:[],output:[]},lt={input:0,output:0},bt={input:0,output:0},kt={input:[],output:[]},xt={input:[],output:[]},Gt={input:void 0,output:void 0},Ft={input:[],output:[]};this._for_each_merge_pin(X,(te,de,tn)=>{lt[de]++,Ft[de].push({unit_id:te,pin_id:tn}),u.has(te)||te===t?(bt[de]++,kt[de].push({unit_id:te,pin_id:tn})):xt[de].push({unit_id:te,pin_id:tn}),te!==t||ct[de].push(tn)}),Gt.input=Ft.input.sort((te,de)=>te.pin_id.localeCompare(de.pin_id))[0],Gt.output=Ft.output.sort((te,de)=>te.pin_id.localeCompare(de.pin_id))[0],ct.input=ct.input.sort(),ct.output=ct.output.sort();let Jt={input:lt.input-bt.input,output:lt.output-bt.output};fs(te=>{var de,tn;if(Jt[te]>0){let Le=ye(te),wt=Gt[Le]||Gt[te],Ht=wt.pin_id;Ht===$t&&(Ht=wt.unit_id);let Rt=nt(I,[X,Le,"pinId"],void 0)||U[Le][ot]||ct[Le][0]||Zs(k,Le,Ht,M[Le]);M[Le].add(Rt),U[Le][ot]=Rt;let fe=a_(N,V),ee={};if(bt[Le]===0)(bt[te]===0||bt[te]>1)&&lt.input>0&&lt.output>0?ee={mergeId:(de=C.merge[X])!=null?de:X}:ee={};else if(bt[Le]>1&&lt[te]>=1)ee={mergeId:(tn=C.merge[X])!=null?tn:X};else if(bt[Le]===1){let{unit_id:ge,pin_id:be}=kt[Le][0];ge!==t?ee={unitId:ge,pinId:be}:fe=X}V.add(fe),F.add(fe),tt(I,[X,Le],{mergeId:fe,pinId:Rt,subPinSpec:ee,oppositeMerge:rt,ref:et})}}),Jt.input===0&&Jt.output===0&&this._for_each_merge_pin(X,(te,de,tn)=>{te===t&&M[de].delete(tn)});let ke=bt.input+bt.output,Ce=X;k.merges[ot]&&(Ce=a_(k,R)),R.add(Ce),C.merge[X]=Ce}for(let ot of s)this._for_each_unit_pin(ot,(X,rt,et)=>{if(!this._spec_is_link_pin_ignored(X)&&!this._pin_to_merge[X]){let lt=null,bt=this._pin_to_ext[rt][X];if(bt&&e.includes(X)){let{type:kt,pinId:xt,subPinId:Gt}=gt(bt);lt=xt}K(X,ot,rt,et,lt)}});for(let ot of s){let X=(et,ct,lt)=>{if(!u.has(et)){let bt=this._pin_to_merge[et];if(bt){let kt=this._merge_to_ref_unit[bt];if(!u.has(bt)||lt===$t){let xt=nt(U,[ct,bt],null);xt=K(et,ot,ct,lt,xt),tt(U,[ct,bt],xt)}}}};this._for_each_unit_pin(ot,X);let rt=this._ref_unit_to_merge[ot];if(rt){let et=Kn(ot),{mergeId:ct}=It(rt);at[ct].input>0&&X(et,"output",$t)}}for(let ot of s){let X=this._get_unit_spec_id(ot),rt=ot;if(k!=null&&k.units[ot]&&(rt=ux(n,P,X,O)),O.add(rt),C.unit[ot]=rt,this._is_unit_component(ot)){let et=this._spec_get_sub_component_parent_id(ot);if(et&&u.has(et)){let ct=(Pt=C.unit[et])!=null?Pt:et,bt=this._spec_get_sub_component_children(et).indexOf(ot);b[ot]=et,g[ot]=bt,v[et]=v[et]||[],Ue(v[et],ot,bt),ct&&(b[rt]=ct)}}}for(let ot of _){let{unitId:X,type:rt,pinId:et}=it(ot);if(!s.includes(X)){let ct=ye(rt),lt=Zs(k,ct,et,M[ct]);M[ct].add(lt),w[ot]=lt;let bt=this._ref_output_to_merge[ot],kt;if(bt){let{mergeId:xt}=It(bt);kt=xt}else X===t||(kt=this._new_merge_id(V));kt&&(V.add(kt),T[ot]=kt)}}for(let ot of d){let X=this._spec_get_merge(ot);for(let et in X){let ct=X[et],{input:lt={},output:bt={}}=ct,kt=(xt,Gt)=>{let Ft=ut(et,xt,Gt),Jt=ye(xt),ke=Zs(k,Jt,Gt,M[Jt]);M[Jt].add(ke),w[Ft]=ke;let Ce,te=this._ref_output_to_merge[Ft];if(te){let{mergeId:de}=It(te);Ce=de}else Ce=this._new_merge_id(V);V.add(Ce),T[Ft]=Ce,tt(C,["link",et,xt,Gt],{mergeId:Ce,oppositePinId:ke})};if(!u.has(et)){for(let xt in lt)kt("input",xt);for(let xt in bt)kt("output",xt)}}if(Te(X)===0){let et=At(ot),ct=a_(N,V)}}for(let ot of _){let{unitId:X,type:rt,pinId:et}=it(ot),ct,lt;u.has(X)?(ct=null,lt=null):(ct=T[ot],lt=w[ot]);let bt=this._pin_to_ext[rt][ot];bt&&u.has(bt)&&!u.has(X)||(tt(C,["link",X,rt,et],{mergeId:ct,oppositePinId:lt}),h.push({unitId:X,type:rt,pinId:et}))}for(let ot of s){let X=this._get_unit_merges(ot);for(let rt in X)if(d.includes(rt)){let et=X[rt],ct=C.merge[rt];Yt(et,(lt,bt,kt)=>{if(s.includes(lt))tt(D,[lt,bt,kt],ct);else if(lt===t){let xt=this.__get_unit_pin_spec(lt,bt,kt);for(let Gt in xt.plug){let Ft=xt.plug[Gt],{unitId:Jt,pinId:ke,mergeId:Ce}=Ft;Jt&&ke&&tt(D,[Jt,bt,ke],ct)}}})}}let Et=i();return{nodeIds:{unit:s,merge:d,link:h,plug:f,data:m},nextSpecId:Et,nextIdMap:C,nextPinIdMap:x,nextMergePinId:I,nextUnitPinMergeMap:D,nextPlugSpec:E,nextSubComponentParentMap:b,nextSubComponentChildrenMap:v,nextSubComponentIndexMap:g}};this._ensure_node_long_press_collapse=t=>{this._collapse_node_id.has(t)||this._start_node_long_press_collapse(t)};this._start_node_long_press_collapse=t=>{this._collapse_node_id.add(t),this._collapse_remaining++,this._set_node_layer(t,Qs)};this._stop_node_long_press_collapse=t=>{this._collapse_remaining--,this._collapse_node_id.delete(t),this._collapse_end_set.add(t)};this._stop_collapse=()=>{let{specs:t}=this.$props,e=this._collapse_next_unit_id;!this._collapse_unit_id&&e&&this._is_unit_component(e)&&this._connect_sub_component(e),this._start_debugger(),this._collapse_init_node_id_set=new Set,this._collapse_unit_spec={},this._collapse_commit=!1,this._collapsing=!1,this._collapse_unit_id=null,this._collapse_world_position=dn,this._collapse_datum_id=null,this._collapse_datum_node_id=null,this._collapse_end_set=new Set,this._collapse_sub_component_children={},this._collapse_sub_component_parent_id={},this._collapse_next_sub_component_index_map={},this._collapse_remaining=0,this._collapse_node_id=new Set,this._collapse_end_set=new Set,this._collapse_unit_next_pin_map={},this._collapse_merge_next_pin_map={},this._collapse_next_plug_spec_map={input:{},output:{}},this._collapse_sub_component_next_children={},this._collapse_next_id_map={unit:{},merge:{},link:{},plug:{}},this._collapse_next_unit_id=null;for(let n in this._selected_node_id)if(this._stop_drag_node_static(n),this._refresh_node_layer(n),this._is_pin_node_id(n)){let i=this._pin_to_datum[n];i&&this._refresh_datum_visible(i)}this._simulation.alphaDecay(.01),e&&(this._refresh_core_border_color(e),this._refresh_unit_layer(e)),this._start_graph_simulation(he)};this._client_to_graph=(t,e)=>ha(this._zoom,t-this._translate_x,e-this._translate_y);this._force_pointer_drop_node=(t,e,n,i)=>{this.__on_node_pointer_leave(t,e),this.__on_node_pointer_up(t,e),this.__on_pointer_up(e),this.__on_node_drag_end(t)};this._force_pointer_drag_node=(t,e,n,i)=>{this.__on_node_pointer_enter(t,e),this.__on_node_pointer_down(t,e,n,i),this.__on_pointer_down(e,n,i);let[s,a]=this._client_to_graph(n,i);this.__on_node_drag_start(t,s,a)};this._long_press_collapse_node=t=>{this._state_move_node_into_graph(this._collapse_next_unit_id,t,this._collapse_next_map),this._collapse_remaining===0&&(this._collapse_next_unit_id&&(this._refresh_node_fixed(this._collapse_next_unit_id),this._refresh_unit_layer(this._collapse_next_unit_id)),this._stop_collapse())};this._node_type__template=(t,e)=>{let{unit:n,link:i,merge:s,plug:a,datum:_,err:c}=e;this._is_unit_node_id(t)?n&&n(t):this._is_link_pin_node_id(t)?i&&i(t):this._is_merge_node_id(t)?s&&s(t):this._is_datum_node_id(t)?_&&_(t):this._is_plug_node_id(t)?a&&a(t):this._is_err_node_id(t)&&c&&c(t)};this._state_move_node_into_graph=(t,e,n)=>{let{nextIdMap:i,nextPinIdMap:s,nextUnitPinMergeMap:a,nextMergePinId:_,nextPlugSpec:c}=n;this._node_type__template(e,{unit:p=>{var h,f;let u=this._get_unit(p),d=(f=(h=i.unit)==null?void 0:h[p])!=null?f:p,m=a[p];this._state_move_unit_into_graph(t,p,u,d,s,a)},link:p=>{let{unitId:u,type:d,pinId:m}=it(p),{mergeId:h,oppositePinId:f}=nt(i,["link",u,d,m],{mergeId:null,oppositePinId:null}),b=this._is_link_pin_ref(p),g=this._pin_to_merge[p],v=this._pin_to_ext[d][p];if(g&&b){this._stop_node_long_press_collapse(p),this._state_move_node_into_graph(t,g,n);return}if(v){let x=gt(v);this._state_move_link_pin_into_graph(t,u,d,m,h,f,x)}else this._state_move_link_pin_into_graph(t,u,d,m,h,f,null)},merge:p=>{var b,g,v;let{mergeId:u}=It(p),d=(g=(b=i.merge)==null?void 0:b[u])!=null?g:u,m=(v=_[u])!=null?v:{},h=this._spec_get_merge(u),f={};Yt(h,(x,I,E)=>{var D;x!==t&&(D=i.unit)!=null&&D[x]&&tt(f,[x,I,E],!0)}),this._state_move_merge_into_graph(t,u,d,f,s,m)},datum:p=>{this._move_datum_into_graph(t,p)},plug:p=>{this._state_move_plug_into_graph(t,p,i,c,_,s)},err:()=>{}})};this._move_datum_into_graph=(t,e)=>{this._stop_node_long_press_collapse(e),this._move_datum_into_subgraph(t,e)};this._move_datum_into_subgraph=(t,e)=>{let n=this._datum_to_pin[e];if(n&&this._collapse_init_node_id_set.has(n))return;let i=this._get_datum_value(e);this._remove_datum(e);let s=this._ensure_subgraph(t),a=s.jiggle_world_screen_center();s.add_new_datum(i,a)};this._move_datum_into_array=t=>{let{datumId:e}=Ae(t),n=this._datum_tree[e],i=this._datum_tree[this._collapse_datum_id],{type:s}=i;if(s==="array literal"){let a=Fe(i,[i.children.length],n),_=this._datum[this._collapse_datum_node_id];_.setProp("data",a),_.dispatchEvent("datumchange",{data:a}),this._remove_datum(t),this._stop_node_long_press_collapse(t)}else throw new Error("not an array")};this._spec_component_remove_sub_component=t=>{let e=this._spec_get_sub_component_parent_id(t);e&&(this._spec.component=M0({id:e,childId:t},this._spec.component)),this._spec.component=va({id:t},this._spec.component),this._spec.component=gv({id:t},this._spec.component)};this._sim_graph_unit_add_pin=(t,e,n,i)=>{this._sim_add_link_pin_node(t,e,n,i),this._sim_add_link_pin_link(t,e,n)};this._state_move_unit_into_graph__remove=(t,e,n)=>{this._sim_move_unit_into_graph_remove(t,e,n),this._spec_move_unit_into_graph_remove(t,e,n)};this._spec_move_unit_into_graph_remove=(t,e,n)=>{this._spec_remove_unit(e,!1)};this._state_move_unit_into_graph__reconnect=(t,e,n,i)=>{this._spec_move_unit_into_graph__reconnect(t,e,n),this._sim_move_unit_into_graph__reconnect(t,e,n,i)};this._spec_get_unit_pin_plug=(t,e,n)=>{let i=ut(t,e,n);return this._spec_get_pin_node_plug_spec(e,i)};this._state_move_unit_into_graph=(t,e,n,i,s,a)=>{var M;let _=this._get_unit(e),c=this._get_unit_merges(e),p=S4(this._collapse_init_spec,e),u=this._get_unit_input_node_ids(e),d=this._get_unit_output_node_ids(e),m=this._get_unit_data(e),h={},f=B(m),b=B(p),g=(U,L)=>jn(L,({type:O,pinId:R,subPinId:N})=>{let z=Kt(U,R,N),F=De(U,R,N);return!(this._collapse_init_node_id_set.has(z)||this._collapse_init_node_id_set.has(F))}),v={input:g("input",b.input),output:g("output",b.output)},x=(M=s[e])!=null?M:{},I=this._get_unit_spec(t),E=B(s[e])||{input:{},output:{}},D=$a(s,(U,L)=>(xe(L,(O,R,{pinId:N})=>{U[O].add(N)}),U),ve(new Set,new Set));Ke(c,U=>{let L=At(U),O=this._is_merge_ref(L),R=c[U],N=R[e];h[U]=B(R),delete h[U][e];let z={},F=this._collapse_node_id.has(L),V=!1;Yt(R,H=>{this._collapse_node_id.has(H)||(V=!0)});let j=F&&!V;xe(N,(H,K)=>{var Q,at;let q=H==="output"&&K===$t;if(!j&&((at=(Q=s[e])==null?void 0:Q[H])!=null&&at[K]||q)){let Dt=Zs(I,H,K,D[H]),Et=nt(x,[H,K,"pinId"],Dt),Ct=nt(x,[H,K,"subPinId"],"0"),Pt=this.__spec_is_link_pin_ignored(e,H,K);q||tt(E,[H,K],{pinId:Et,subPinId:Ct,ref:O,defaultIgnored:Pt}),tt(z,[H,Et],!0)}}),tt(h,[U,t],pn(nt(h,[U,t],{}),z))}),Ke(c,U=>{let L=h[U];Te(L)<2&&delete h[U]}),gs(m,(U,L)=>{Ke(L,(O,R)=>{delete f[U][O];let N=nt(E,[U,O,"pinId"],null);N&&(f[U][N]=R)})});let w={merges:h,plugs:v,data:f},T={position:{merges:mi(h,U=>{let L=At(U),O=this._get_pin_anchor_node_id(L);return this._get_node_position(O)}),data:{}},selected:{links:{input:new Set,output:new Set},merges:J(c).filter(U=>this._collapse_node_id.has(At(U)))}};this._for_each_unit_pin(e,(U,L,O)=>{if(!this._is_link_pin_merged(U)){let R=nt(E,[L,O,"pinId"],Zs(I,L,O,D[L]));D[L].add(R),this._is_node_selected(U)&&T.selected.links[L].add(R)}});let C=this._get_unit_pin_position(e),P=null,k=null;if(this._is_unit_component(e)){k=this._get_sub_component(e);let U=this._collapse_next_map.nextSubComponentChildrenMap[e],L=this._collapse_next_map.nextSubComponentParentMap[e],O=this._collapse_next_map.nextSubComponentIndexMap[e],{width:R,height:N}=this._get_unit_component_graph_size(e),z=this._get_sub_component_spec(e);P={children:U,spec:z,parent_id:L,index:O,width:R,height:N}}this._state_move_unit_into_graph__remove(t,e,i),this._state_move_unit_into_graph__inject(t,e,n,i,E,a,C,_,P,k,T),this._state_move_unit_into_graph__reconnect(t,e,w,T)};this._state_move_plug_into_graph=(t,e,n,i,s,a)=>{let{type:_,pinId:c,subPinId:p}=gt(e),u=this._get_pin_spec(_,c),d=Kt(_,c,p),m=this._spec[`${_}s`][c].plug[p],h=this._state_make_this_graph_interface(),f=this._state_get_subgraph_graph_interface(t);W1(h,f,t,_,c,u,p,m,i,a,s,n)};this._spec_is_plug_ref=(t,e)=>{var n;return(n=this._spec[`${t}s`][e].ref)!=null?n:!1};this._spec_move_plug_into_graph__inject=(t,e,n,i,s,a,_)=>{let{setSpec:c}=this.$props,p=nt(a,["plug",e,n,i,"type"],e),u=this._get_unit_spec_id(t),d=this._get_unit_spec(t),m=B(d);nt(d,[`${p}s`,n],null)||($i({pinId:n,type:p,pinSpec:{ref:s}},m),c(u,m));let f=nt(_,[p,n,i],{});xs({type:p,pinId:n,subPinId:i,subPinSpec:f},m),c(u,m)};this._spec_move_plug_into_graph__reconnect=(t,e,n,i,s,a,_,c)=>{let p=nt(a,[e,n,i,"pinId"],n),u=nt(_,["plug",e,n,i,"type"],e);if(s.unitId&&s.pinId){let d=nt(_,["link",s.unitId,u,s.pinId,"mergeId"],null);if(d)this._spec_add_link_pin_to_merge(d,t,u,p);else{let m=nt(_,["plug",e,n,i,"mergeId"],null);m&&this._spec_add_merge(m,{[t]:{[u]:{[p]:!0}},[s.unitId]:{[e]:{[s.pinId]:!0}}})}}else if(s.mergeId){let d=nt(c,[s.mergeId,e,"mergeId"],s.mergeId);if(d)this._spec_add_link_pin_to_merge(d,t,u,n);else{let m=nt(_,["plug",e,n,i,"mergeId"],null);m&&this._spec_add_link_pin_to_merge(m,t,u,n)}}else{let d=nt(_,["plug",e,n,i,"mergeId"],null);d&&this._spec_add_link_pin_to_merge(d,t,u,n)}};this._spec_graph_unit_get_unit=(t,e)=>{let n=this._get_unit_spec(t),{units:i}=n;return i[e]};this._spec_graph_unit_get_unit_bundle=(t,e)=>{let{specs:n}=this.$props,i=this._spec_graph_unit_get_unit(t,e);return un(i,n)};this._spec_graph_unit_plug_specs=t=>{let e=this._get_unit_spec(t);return Ig(e)};this._spec_graph_unit_get_exposed_pin_specs=t=>{let e=this._get_unit_spec(t);return xg(e)};this._spec_graph_unit_get_pin_spec=(t,e,n)=>{let i=this._get_unit_spec(t);return wr(i,e,n)};this._spec_graph_get_pin_spec=(t,e,n)=>{let i=this._get_unit_spec(t);return wr(i,e,n)};this._spec_graph_get_merges_spec=t=>{var i;let{getSpec:e}=this.$props;return(i=this._get_unit_spec(t).merges)!=null?i:{}};this._spec_graph_get_merge_spec=(t,e)=>{let{getSpec:n}=this.$props;return this._get_unit_spec(t).merges[e]};this._spec_graph_get_unit_pin_data=(t,e,n,i)=>({});this._spec_graph_get_unit_spec=(t,e)=>{var c;let{getSpec:n}=this.$props,i=this._spec_graph_unit_get_unit(t,e),{id:s}=i,a=n(s);return J((c=a.inputs)!=null?c:{})};this._spec_graph_get_unit_input_names=(t,e)=>{var c;let{getSpec:n}=this.$props,i=this._spec_graph_unit_get_unit(t,e),{id:s}=i,a=n(s);return J((c=a.inputs)!=null?c:{})};this._spec_graph_get_unit_output_names=(t,e)=>{var c;let{getSpec:n}=this.$props,i=this._spec_graph_unit_get_unit(t,e),{id:s}=i,a=n(s);return J((c=a.outputs)!=null?c:{})};this._spec_unit_has_pin_named=(t,e,n)=>{let i=this._get_unit_spec(t);return L1(i,e,n)};this._spec_has_pin_named=(t,e)=>L1(this._spec,t,e);this._spec_has_plug=(t,e,n)=>U1(this._spec,t,e,n);this._spec_graph_get_unit_pin_ignored=(t,e,n,i)=>{let{getSpec:s}=this.$props,a=this._spec_graph_unit_get_unit(t,e),{id:_}=a,c=s(_);return nt(a,[n,i,"ignored"],nt(c,[`${n}s`,i,"defaultIgnored"],!1))};this._spec_graph_get_unit_interface=(t,e)=>{let{getSpec:n}=this.$props,i=B(this._get_unit_spec(t)),s=i.units[e],{id:a}=s,_=n(a),c=this._get_unit_data(t);return{setParent:function(p){throw new $},setInputs:function(p,u){throw new $},setPin:function(p,u,d,m){throw new $},setPinIgnored:function(p,u,d){throw new $},setInputIgnored:function(p,u){throw new $},setOutputIgnored:function(p,u){throw new $},setPinRef:function(p,u,d){throw new $},setInputRef:function(p,u){throw new $},setOutputRef:function(p,u){throw new $},setInput:function(p,u,d){throw new $},isPinConstant:(p,u)=>Dr(i,e,p,u),isPinIgnored:(p,u)=>nt(s,[p,u,"ignored"],nt(_,[`${p}s`,u,"defaultIgnored"],!1)),isPinRef:(p,u)=>Sr({type:p,pinId:u},i),addInput:function(p,u,d){throw new $},removeInput:function(p){throw new $},setOutputs:function(p,u){throw new $},setOutput:function(p,u,d){throw new $},addOutput:function(p,u){throw new $},removeOutput:function(p){throw new $},removePin:function(p,u){throw new $},getPin:function(p,u){throw new $},getInputs:function(){throw new $},getDataInputs:function(){throw new $},getRefInputs:function(){throw new $},getInput:function(p){throw new $},getOutputs:function(){throw new $},getDataOutputs:function(){throw new $},getRefOutputs:function(){throw new $},getOutput:function(p){throw new $},push:function(p,u){throw new $},pushInput:function(p,u){throw new $},pushAllInput:function(p){throw new $},pushOutput:function(p,u){throw new $},pushAllOutput:function(p){throw new $},pushAll:function(p){throw new $},takeInput:function(p){throw new $},takeOutput:function(p){throw new $},take:function(p){throw new $},takeAll:function(){throw new $},peakInput:function(p){throw new $},peakOutput:function(p){throw new $},peak:function(p){throw new $},peakAllOutput:function(){throw new $},peakAll:function(){throw new $},renamePin:function(p,u,d){throw new $},renameInput:function(p,u){throw new $},renameOutput:function(p,u){throw new $},hasRefPinNamed:function(p,u){throw new $},hasRefInputNamed:function(p){throw new $},hasRefOutputNamed:function(p){throw new $},hasPinNamed:function(p,u){throw new $},hasInputNamed:function(p){throw new $},hasOutputNamed:function(p){throw new $},getInputCount:function(){throw new $},getOutputCount:function(){throw new $},getInputNames:()=>{var u;return J((u=_.inputs)!=null?u:{})},getOutputNames:()=>{var u;return J((u=_.outputs)!=null?u:{})},setPinData:function(p,u,d){throw new $},removePinData:function(p,u){throw new $},setInputConstant:function(p,u){throw new $},setOutputConstant:function(p,u){throw new $},getCatchErr:function(){throw new $},getConfig:function(){throw new $},reset:function(){throw new $},pause:function(){throw new $},play:function(){throw new $},paused:function(){throw new $},snapshot:function(){throw new $},restore:function(p){throw new $},getSelfPin:function(){throw new $},err:function(p){throw new $},hasErr:function(){throw new $},getErr:function(){throw new $},takeErr:function(){throw new $},getPinsData:function(){throw new $},getInputData:function(){throw new $},getRefInputData:function(){throw new $},getSpec:function(){throw new $},getPinData:function(p,u){return nt(c,[p,u,"value"],void 0)},setPinConstant:function(p,u,d){throw new $},getUnitBundleSpec:()=>{let{specs:p}=this.$props;return un(s,p)}}};this._state_get_unit_interface=t=>{let{getSpec:e}=this.$props,n=B(this._get_unit_spec(t)),i=B(this._get_unit_bundle(t)),s=this._get_unit_data(t);return{setParent:function(a){throw new $},setInputs:function(a,_){throw new $},setPin:function(a,_,c,p){throw new $},setPinIgnored:function(a,_,c){throw new $},setInputIgnored:function(a,_){throw new $},setOutputIgnored:function(a,_){throw new $},setPinRef:function(a,_,c){throw new $},setInputRef:function(a,_){throw new $},setOutputRef:function(a,_){throw new $},setInput:function(a,_,c){throw new $},isPinConstant:(a,_)=>Dr(n,t,a,_),isPinIgnored:(a,_)=>Dr(n,t,a,_),isPinRef:(a,_)=>Sr({type:a,pinId:_},n),addInput:function(a,_,c){throw new $},removeInput:function(a){throw new $},setOutputs:function(a,_){throw new $},setOutput:function(a,_,c){throw new $},addOutput:function(a,_){throw new $},removeOutput:function(a){throw new $},removePin:function(a,_){throw new $},getPin:function(a,_){throw new $},getInputs:function(){throw new $},getDataInputs:function(){throw new $},getRefInputs:function(){throw new $},getInput:function(a){throw new $},getOutputs:function(){throw new $},getDataOutputs:function(){throw new $},getRefOutputs:function(){throw new $},getOutput:function(a){throw new $},push:function(a,_){throw new $},pushInput:function(a,_){throw new $},pushAllInput:function(a){throw new $},pushOutput:function(a,_){throw new $},pushAllOutput:function(a){throw new $},pushAll:function(a){throw new $},takeInput:function(a){throw new $},takeOutput:function(a){throw new $},take:function(a){throw new $},takeAll:function(){throw new $},peakInput:function(a){throw new $},peakOutput:function(a){throw new $},peak:function(a){throw new $},peakAllOutput:function(){throw new $},peakAll:function(){throw new $},renamePin:function(a,_,c){throw new $},renameInput:function(a,_){throw new $},renameOutput:function(a,_){throw new $},hasRefPinNamed:function(a,_){throw new $},hasRefInputNamed:function(a){throw new $},hasRefOutputNamed:function(a){throw new $},hasPinNamed:function(a,_){throw new $},hasInputNamed:function(a){throw new $},hasOutputNamed:function(a){throw new $},getInputCount:function(){throw new $},getOutputCount:function(){throw new $},getInputNames:()=>{var a;return J((a=n.inputs)!=null?a:{})},getOutputNames:()=>{var a;return J((a=n.outputs)!=null?a:{})},setPinData:function(a,_,c){throw new $},removePinData:function(a,_){throw new $},setInputConstant:function(a,_){throw new $},setOutputConstant:function(a,_){throw new $},getCatchErr:function(){throw new $},getConfig:function(){throw new $},reset:function(){throw new $},pause:function(){throw new $},play:function(){throw new $},paused:function(){throw new $},snapshot:function(){throw new $},restore:function(a){throw new $},getSelfPin:function(){throw new $},err:function(a){throw new $},hasErr:function(){throw new $},getErr:function(){throw new $},takeErr:function(){throw new $},getPinsData:function(){throw new $},getInputData:function(){throw new $},getRefInputData:function(){throw new $},getSpec:function(){return n},getPinData:function(a,_){return nt(s,[a,_,"value"],void 0)},setPinConstant:function(a,_,c){throw new $},getUnitBundleSpec:()=>i}};this._spec_graph_unit_add_pin=(t,e,n,i)=>{let{specs:s,setSpec:a}=this.$props,_=this._get_unit_spec_id(t),c=this._get_unit_spec(t),p=B(c);$i({pinId:n,type:e,pinSpec:i},p),a(_,p)};this._spec_graph_unit_add_sub_pin=(t,e,n,i,s,a)=>{let{setSpec:_}=this.$props,c=this._get_unit_spec_id(t),p=this._get_unit_spec(t),u=B(p);(p[`${e}s`]||{})[n]||($i({pinId:n,type:e,pinSpec:{plug:{},ref:i}},u),_(c,u)),xs({type:e,pinId:n,subPinId:s,subPinSpec:a},u),_(c,u)};this._spec_graph_unit_remove_pin=(t,e,n,i)=>{let{setSpec:s}=this.$props,a=this._get_unit_spec_id(t),_=this._get_unit_spec(t),c=B(_);if(Oi({pinId:n,type:e},c),i){let p=ut(t,e,n);this._spec_remove_pin_or_merge(p)}oe(this._spec,["units",t,e,n]),s(a,c)};this._spec_graph_unit_remove_pin_or_merge=(t,e,n,i,s)=>{let{setSpec:a}=this.$props,_=this._get_unit_spec_id(t),c=this._get_unit_spec(t),p=B(c);Xa({mergeId:e,unitId:n,type:i,pinId:s},p),a(_,p)};this._spec_graph_unit_get_sub_pin_spec=(t,e,n,i)=>{let s=this._get_unit_spec(t);return Sg(s,e,n,i)};this._spec_graph_unit_add_merge=(t,e,n)=>{let{setSpec:i}=this.$props,s=this._get_unit_spec_id(t),a=this._get_unit_spec(t),_=B(a);vs({mergeId:e,mergeSpec:n},_),i(s,_)};this._spec_graph_unit_remove_merge=(t,e)=>{let{setSpec:n}=this.$props,i=this._get_unit_spec_id(t),s=this._get_unit_spec(t),a=B(s);Ya({mergeId:e},a),n(i,a)};this._spec_graph_unit_add_pin_to_merge=(t,e,n,i,s)=>{let{setSpec:a}=this.$props,_=this._get_unit_spec_id(t),c=this._get_unit_spec(t),p=B(c);kg({mergeId:e,unitId:n,type:i,pinId:s},p),a(_,p)};this._spec_graph_unit_has_merge=(t,e)=>{let n=this._get_unit_spec(t);return Va(n,e)};this._spec_graph_unit_has_plug=(t,e,n,i)=>{let s=this._get_unit_spec(t);return U1(s,e,n,i)};this._spec_graph_unit_get_pin_plug_count=(t,e,n)=>{let i=this._get_unit_spec(t);return M1(i,e,n)};this._spec_get_pin_plug_count=(t,e)=>M1(this._spec,t,e);this._spec_graph_unit_is_unit_pin_constant=(t,e,n,i)=>{let s=this._get_unit_spec(t);return Dr(s,e,n,i)};this._spec_graph_unit_has_unit=(t,e)=>{let n=this._get_unit_spec(t);return $1(n,e)};this._state_move_link_pin_into_graph=(t,e,n,i,s,a,_)=>{this._graph_spec_move_link_pin_into_graph__inject(t,e,n,i,a),this._spec_move_link_pin_into_graph(t,e,n,i,a,s),this._sim_move_link_pin_into_graph(t,e,n,i,a,s,_),this._graph_spec_move_link_pin_into_graph__remove(t,e,n,i,a)};this._sim_graph_add_link_pin=(t,e,n,i)=>{this._ensure_subgraph(t).add_exposed_pin_set(e,n,i,void 0)};this._sim_move_link_pin_into_graph=(t,e,n,i,s,a,_)=>{let c=ut(e,n,i),p=this._is_link_pin_ref(c);if(t===e){let u=this._pin_to_int[n][c];this._sim_graph_unit_remove_pin(c)}else{let u=this._pin_to_datum[c];u&&this._collapse_node_id.has(u)&&(this._stop_node_long_press_collapse(u),this._deselect_node(u));let d=ye(n),m=this._node[c],h=this._node[t],{x:f,y:b,r:g}=m,{x:v,y:x,r:I}=h,E=Me(v,x,f,b),D=Jo(h,E,5),w=S2(D,m);if(s&&a){let T=At(a),C=this._get_merge_anchor_node_id(T);if(this._sim_graph_unit_add_pin(t,d,s,D),this._has_node(C)){this._stop_node_long_press_collapse(C);let P=ut(t,d,s);this._sim_add_link_pin_to_merge(P,T)}else{let P={[e]:{[n]:{[i]:!0}},[t]:{[d]:{[s]:!0}}};this._stop_node_long_press_collapse(c),this._sim_add_merge(a,P,w),this._sim_collapse_merge(a);let k=this._pin_datum_tree[c];if(k){let M=this._new_datum_id(),U=k.value,L=this._has_node(u)?this._get_node_position(u):this._predict_pin_datum_initial_position(c),O=pt(U);this._sim_add_pin_datum_tree(t,d,s,M,O,L)}}}else this._stop_node_long_press_collapse(c)}};this._spec_move_link_pin_into_graph=(t,e,n,i,s,a)=>{if(t!==e){if(a&&s)if(this.__spec_has_merge(a))this._spec_add_link_pin_to_merge(a,e,n,i);else{let _=ye(n),c={[e]:{[n]:{[i]:!0}},[t]:{[_]:{[s]:!0}}};this._spec_add_merge(a,c)}}};this._graph_spec_move_link_pin_into_graph__inject=(t,e,n,i,s)=>{let{setSpec:a}=this.$props,_=ut(e,n,i),c=this._is_link_pin_ref(_),p=this._get_unit_spec_id(t),u=this._get_unit_spec(t);if(t!==e){if(s){let d=B(u),m=ye(n);$i({pinId:s,type:m,pinSpec:{plug:{0:{}},ref:c}},d),a(p,d)}}};this._graph_spec_move_link_pin_into_graph__remove=(t,e,n,i,s)=>{let{setSpec:a}=this.$props,_=ut(e,n,i),c=this._get_unit_spec_id(t),p=this._get_unit_spec(t);if(t===e){let u=B(p);Oi({pinId:i,type:n},u),oe(this._spec,["units",t,n,i]),a(c,u)}};this._move_merge_into_graph=(t,e,n,i)=>{this._state_move_merge_into_sub_graph(t,e,n,i),this._state_move_merge_into_graph(t,e,n,{},{},{})};this._state_move_merge_into_sub_graph=(t,e,n,i)=>{let{setSpec:s}=this.$props,a=this._get_unit_spec_id(t),_=this._get_unit_spec(t);if(i){let c=B(_);vs({mergeId:n,mergeSpec:i},c),s(a,c)}};this._state_move_merge_into_graph=(t,e,n,i,s,a)=>{var u,d;let _=this._collapse_init_spec.merges[e],c={input:(u=this._collapse_init_spec.inputs)!=null?u:{},output:(d=this._collapse_init_spec.outputs)!=null?d:{}},p=new Set(this._collapse_next_map.nodeIds.unit);K1(this._state_make_this_graph_interface(),this._state_get_subgraph_graph_interface(t),t,e,_,this._collapse_next_map,{},p,c,!1)};this._set_long_press_pointer=(t,e,n)=>{this._long_press_screen_position={x:e,y:n},this._long_press_pointer.add(t),this._long_press_count++};this._on_long_press=t=>{let{pointerId:e,clientX:n,clientY:i,screenX:s,screenY:a}=t;if(this._cancel_long_press){this._cancel_long_press=!1;return}this._multiselect_area_ing&&this._on_multiselect_area_end(),this._set_long_press_pointer(e,n,i),this._is_background_pointer(e)&&this._on_background_long_press(t)};this._long_click_cancel_pointer_id=new Set;this._on_long_click_cancel=t=>{let{pointerId:e}=t;this._pointer_id_hover_node_id[e]&&this._long_click_cancel_pointer_id.add(e)};this._cancel_drag_and_drop=()=>{this._drag_and_drop_cancel&&(this._drag_and_drop_cancel(),this._drag_and_drop_cancel=void 0),this._drag_and_drop=!1,this._drag_and_drop_bundle=null};this._on_click_hold=t=>{let{pointerId:e,screenX:n,screenY:i}=t;if(this._swap_next_click_hold_long_press){this._on_long_press(t);return}if(this._cancel_click_hold){this._cancel_click_hold=!1;return}this._is_background_pointer(e)&&this._on_background_click_hold(n,i,t)};this._stop_gesture=()=>{this._capturing_gesture=!1,this._unlisten_gesture(),this._unlisten_gesture=void 0};this._animating_unit_explosion=new Set;this._on_graph_background_multiselect_long_press=t=>{let{clientX:e,clientY:n,pointerId:i}=t;if(this._pointer_down_count===1||this._capturing_gesture){let s=J(this._selected_node_id);this._capturing_gesture&&this._stop_gesture();let a=s.filter(_=>!this._animating_unit_explosion.has(_));this._start_long_press_collapse(i,null,a,{x:e,y:n})}};this._on_layout_background_long_press=t=>{};this._on_graph_background_long_press=t=>{let{specs:e}=this.$props,{pointerId:n,clientX:i,clientY:s,screenX:a,screenY:_}=t;this._mode==="multiselect"?this._on_graph_background_multiselect_long_press(t):this._mode==="info"||(this._mode==="add"||this._mode==="change"||this._mode==="remove"||this._mode==="data")&&!this._capturing_gesture&&this._search_hidden};this._on_background_long_press=t=>{let{pointerId:e,screenX:n,screenY:i}=t;this._long_press_background_pointer.add(e),this._long_press_background_count++,this._animate_long_press(n,i,"in"),this._tree_layout?this._on_layout_background_long_press(t):this._on_graph_background_long_press(t)};this._animate_long_press=(t,e,n)=>{let{showLongPress:i}=this.$system,{$theme:s}=this.$context,a=this._get_color(),_=Ze(s,this._mode,a);i(t,e,{stroke:_,direction:n})};this._start_gesture=t=>{if(!this._capturing_gesture){let{captureGesture:e}=this.$system,{$theme:n}=this.$context;this._capturing_gesture=!0;let i=this._get_color(),s=Ze(n,this._mode,i),_=e(t,{strokeStyle:s,lineWidth:2},this._on_capture_gesture_end);this._unlisten_gesture=_}};this._on_backspace_keydown=()=>{if(!this._edit_datum_id&&!this._edit_node_name_id){let t=J(this._selected_node_id);this._remove_nodes(t)}};this._clear_debugger=()=>{this._debug_buffer=[],this._debug_cursor=-1};this._remove_selected_nodes=()=>{if(this._selected_node_count>0){let t=fr({obj:this._selected_node_id}).keys;this._remove_nodes(t)}};this._on_ctrl_semicolon_keydown=()=>{if(this._focused)if(this._search_hidden){if(!(this._mode==="none"||this._mode==="add")){if(this._mode==="change"&&this._selected_node_count!==0){if(this._selected_node_count===1){let t=jt(this._selected_node_id);if(this._is_unit_node_id(t)){this._on_unit_blue_click(t);return}}}}this._show_search()}else this._hide_search()};this.save=(t=!1)=>G(this,null,function*(){var u,d;let{specs:e}=this.$props,{api:{file:{isSaveFilePickerSupported:n,showSaveFilePicker:i,downloadText:s}}}=this.$system,{name:a="untitled"}=this._spec,_=this._get_full_user_spec(),c=hi(_,e),p=(m,h)=>{if(!Xg(h)){let f=m.get_unit_relative_positions(),b=m.get_node_relative_positions();for(let g in b){let v=b[g],x=D2(v);if(ky(g)){let{unitId:I,type:E,pinId:D}=it(g);tt(c,["specs",h.id,"units",I,E,D,"metadata","position"],x)}else Ub(g)}for(let g in f){let v=f[g],x=D2(v);tt(c,["specs",h.id,"units",g,"metadata","position"],x)}for(let g in h.units){let v=m._subgraph_cache[g];if(v){let x=m._get_unit_spec(g);p(v,x)}}}};for(let m in _.units){let h=this._subgraph_cache[m];if(h){let f=this._get_unit_spec(m);p(h,f)}}if(n()){let m={suggestedName:(d=(u=this._last_save_filename)!=null?u:this._last_open_filename)!=null?d:`${a}.unit`,startIn:"desktop",excludeAcceptAllOption:!1,id:"unit",types:[{description:"unit",accept:{"application/unit":[".unit"]}}]},h;try{h=yield i(m)}catch(f){return}this._last_save_file_handler=h,this._last_save_filename=h.name,yield this._save_silently(c)}else s({name:`${a}.unit`,text:JSON.stringify(c,null,2),mimetype:"text/json",charset:"utf-8"})});this._save_silently=t=>G(this,null,function*(){if(this._last_save_file_handler){let e=yield this._last_save_file_handler.createWritable(),n=JSON.stringify(t);yield e.write(n),yield e.close()}else throw new Error("cannot save silently without previous file handler")});this._on_ctrl_s_keydown=()=>{this.save()};this._on_ctrl_shift_s_keydown=()=>{this.save(!0)};this._on_ctrl_o_keydown=()=>{this._open_file()};this._on_ctrl_r_keydown=()=>{this._reload()};this._reload=()=>{this._pod.$reset({})};this._decant_node_ids=t=>{let e=[],n=[],i=[],s=[],a=[],_=[];for(let c of t)this._node_type__template(c,{unit:()=>e.push(c),merge:()=>n.push(c),link:()=>i.push(c),plug:()=>s.push(c),datum:()=>a.push(c),err:()=>_.push(c)});return{unit_ids:e,merge_node_ids:n,link_pin_node_ids:i,exposed_node_ids:s,datum_node_ids:a,err_node_ids:_}};this._copy_nodes=(t,e,n)=>G(this,null,function*(){var C;let{api:{clipboard:{writeText:i}}}=this.$system,{specs:s,newSpec:a,newSpecId:_}=this.$props,c=_(),p=wn({id:c}),u={},d={},m={},h={},f={},b={},{unit_ids:g,merge_node_ids:v,link_pin_node_ids:x,exposed_node_ids:I,datum_node_ids:E}=this._decant_node_ids(t),D={},w=0;for(let P of g){let k=B(this._get_unit(P));e||delete k.memory,u[P]=k;let M=this._get_unit_merges(P);for(let U in M){let L=At(U);this._merge_ref[L]&&(D[L]=(C=D[L])!=null?C:0,D[L]+=1,D[L]===2&&v.push(L))}this._is_unit_component(P)&&(f.children=f.children||[],f.subComponents=f.subComponents||{},f.children.push(P),f.subComponents[P]={})}for(let P of v){let{mergeId:k}=It(P),M=this._spec_get_merge(k),U=0,L={};for(let O in M)if(u[O]){let R=M[O],{input:N={},output:z={}}=R,F=pe(N)+pe(z);U+=F,L[O]=R}U>1&&(d[k]=L)}for(let P of E){let{datumId:k}=Ae(P),M=this._datum_tree[k],{value:U}=M;b[k]={value:U}}for(let P of I){let{pinId:k,type:M,subPinId:U}=gt(P),L=B(this._get_exposed_sub_pin_spec(M,k,U)),{unitId:O,pinId:R,mergeId:N}=L;O&&k?u[O]||(delete L.unitId,delete L.pinId):N&&(d[N]||delete L.mergeId),M==="input"?(m[R]=m[R]||{plug:{}},m[R].plug[U]=L):(h[R]=h[R]||{plug:{}},h[R].plug[U]=L)}ie(u)||(this._set_units_position(u),p.units=u),ie(f)||(p.component=f),ie(d)||(p.merges=d),ie(m)||(p.inputs=m),ie(h)||(p.outputs=h),ie(b)||(p.data=b);let T=hi(p,s);if(e)for(let P of g)G(this,null,function*(){this._pod_get_unit_deep_bundle(P,k=>G(this,null,function*(){let{unit:M}=k;if(tt(T,["spec","units",P],M),w++,w===g.length){let U=JSON.stringify(T);yield i(U),n(T)}}))});try{let P=JSON.stringify(T);yield i(P)}catch(P){this._show_err(P)}});this._show_err=t=>{};this.cut_nodes=t=>{this._copy_nodes(t,!1,()=>{}),this._remove_nodes(t)};this.cut_single_node=t=>{let e=[t];this.cut_nodes(e)};this.cut_selected_nodes=()=>{let t=J(this._selected_node_id);this.cut_nodes(t)};this.copy_single_node=(t,e)=>{let n=[t];this._copy_nodes(n,e,()=>{})};this.copy_selected_nodes=t=>{let e=B(this._selected_node_id);for(let i in this._selected_node_id)if(this._is_unit_node_id(i)){let s=this._ref_unit_to_merge[i];s&&(e[s]=!0)}else if(this._is_datum_node_id(i)){let s=this._datum_to_pin[i];s&&this._selected_node_id[s]&&delete e[i]}let n=J(e);this._copy_nodes(n,t,()=>{})};this._validate_graph_spec=t=>O0(t);this._validate_bundle_spec=t=>IE(t);this._paste_clipboard=t=>G(this,null,function*(){let{api:{clipboard:{readText:e}}}=this.$system;try{let n=yield e();this._paste_text(n,t)}catch(n){mE(this.$system,n.message,{color:Ol,borderColor:Ol},3e3)}});this._paste_text=(t,e)=>{let n;try{n=JSON.parse(t)}catch(i){}n?this._validate_bundle_spec(n)?this.paste_bundle(n,e):this.add_new_datum(Ot(n),e):t&&this._paste_escaped_plain_text(t,e)};this._paste_escaped_plain_text=(t,e)=>{let n=`"${ds(t)}"`;this._paste_plain_text(n,e)};this._paste_plain_text=(t,e)=>{let n=this._new_datum_id();this.add_datum(n,t,e)};this.paste_bundle=(t,e)=>{var h;let{getSpec:n,specs:i,injectSpecs:s}=this.$props,{spec:a}=t,_=_t(S({},t.specs),{[a.id]:a}),c=s((h=t.specs)!=null?h:{}),{map_unit_id:p,map_merge_id:u,map_plug_id:d,map_datum_id:m}=Av(a,n,(f,b)=>r_(Wt(i,_),this._spec,f,b),this._new_merge_id,this._new_sub_pin_id,this._new_datum_id);this._remap_paste_spec(a,e,c,p,u,d,m)};this._remap_paste_spec=(t,e,n,i,s,a,_)=>{let c=BE(t,i,s,a,_);this._paste_spec(c,e)};this._state_paste_spec=(t,e,n,i,s,a)=>{let _=BE(t,n,i,s,a);this.__state_paste_spec(_,e)};this._paste_spec=(t,e)=>{this.__state_paste_spec(t,e),this.__pod_paste_spec(B(t));let n=this._make_paste_spec_bulk_action(t);this._dispatch_action(Mi(n))};this.__state_paste_spec=(t,e)=>{let{units:n={},merges:i={},inputs:s={},outputs:a={},component:_={},data:c={},metadata:p}=t;for(let g in n){let v=n[g],x=nt(t,["units",g,"metadata","position"],dn),I=Wn(e,x);this._spec_add_unit(g,v),this._sim_add_unit_core(g,v,I)}for(let g in i){let v=i[g],I=Te(v)>0?this._init_merge_spec_position(v):this._jiggle_world_screen_center();this._state_add_merge(g,v,I)}for(let g in n){let v=n[g],{input:x,output:I,memory:E={input:{},output:{},memory:{}}}=v,D=this._get_spec_init_unit_pin_position(t,g);this._sim_add_unit_pins(g,v,D);let w=(T,C,P)=>{let{_register:k}=P;if(k){let M=F0(k),U=ut(g,T,C),L=this._pin_to_datum[U];if(L){let{datumId:O}=Ae(L);this._set_datum(O,M)}else{let O=this._new_datum_id();this._sim_add_pin_datum(g,T,C,O,k)}}};Ke(E.input,w.bind(this,"input")),Ke(E.output,w.bind(this,"output"))}for(let g in i)this._sim_collapse_merge(g);let u={input:s,output:a};fs(g=>{let v=u[g];for(let x in v){let I=v[x];if(this._spec_has_pin_named(g,x)){let{plug:E}=I;for(let D in E){let w=E[D];this._get_exposed_pin_spec_internal_node_id(g,w)||this._state_add_exposed_pin(g,x,D,w,{})}}else this._state_add_exposed_pin_set(g,x,I,{})}});let{subComponents:d={}}=_,m=this._get_sub_component_target_parent_id(),h={};for(let g in d){let v=d[g],{children:x=[]}=v;for(let I of x)h[I]=g}for(let g in d){let v=h[g]||m,x=d[g],I={width:x.width,height:x.height};this._spec_append_component(v,g,I)}for(let g in d){let v=d[g],{children:x=[]}=v,I="default";for(let E of x)this.__spec_append_sub_component_child(g,E,I)}for(let g in d){let v=h[g]||m,x=dn;this._sim_add_core_component(g,v,x),this._sim_add_sub_component(g,{},void 0,!1)}let f=J(d),b=this._order_sub_component_ids(f);for(let g of b)this._sim_add_sub_component_to_parent(g,void 0);for(let g in c){let{value:v}=c[g];this._sim_add_datum_node(g,v,e);let x=Xe(g)}this._start_graph_simulation(he)};this._make_paste_spec_bulk_action=t=>{let{specs:e}=this.$props,{units:n={},merges:i={},inputs:s={},outputs:a={},component:_={subComponents:{},children:[]},data:c={}}=t,p=[];for(let d in n){let m=n[d],h=this._get_unit_spec(d),f=Gr(h),b=B(un(m,e));p.push(fi(d,b))}for(let d in _.subComponents){let m=n[d],h=_.subComponents[d],{children:f=[]}=h;p.push(ms(d,{},f,{},{}))}for(let d in i){let m=i[d];p.push(hs(d,B(m)))}let u={input:s,output:a};return fs(d=>{let m=u[d];for(let h in m){let f=m[h];p.push(vr(d,h,f,void 0))}}),p};this.__pod_paste_spec=t=>{let{specs:e}=this.$props,{units:n={},merges:i={},inputs:s={},outputs:a={},component:_={},data:c={}}=t,p=this._make_paste_spec_bulk_action(t),{subComponents:u={}}=_;this._pod.$bulkEdit({actions:p});for(let d in u)this._connect_sub_component(d)};this._on_ctrl_a_keydown=t=>{this._toggle_select_all_visible()};this._on_ctrl_c_keydown=()=>{this.copy_selected_nodes(!1)};this._on_ctrl_shift_c_keydown=()=>{};this._on_ctrl_x_keydown=()=>{this.cut_selected_nodes()};this._on_ctrl_v_keydown=()=>{let t=this._jiggle_world_screen_center();this._paste_clipboard(t)};this._on_ctrl_l_keydown=(t,e)=>{this._search&&this._search_hidden&&this._search.toggleShape()};this._add_unit_merges=(t,e,n=!0)=>{for(let i in e){let s=e[i];if(this._spec_has_merge(i)){let a=At(i),_=s[t];xe(_,(c,p)=>{let u=ut(t,c,p);this._merge_link_pin_merge_pin(u,a,n)})}else{let a=this._init_merge_spec_position(s);this._add_merge(i,s,a,n),this._sim_collapse_merge(i)}}};this._add_unit_plugs=(t,e,n=!0)=>{xe(e,(i,s,{pinId:a,subPinId:_,position:c})=>{let p=ut(t,i,s),u=this._pin_to_merge[p];if(c=c!=null?c:this.__predict_plug_initial_position(i,a,_),u){let{mergeId:d}=It(u);this._plug_exposed_pin(i,a,_,{mergeId:d})}else this._plug_exposed_pin(i,a,_,{unitId:t,pinId:s})})};this._on_ctrl_m_keydown=t=>{this._toggle_minimap()};this._on_ctrl_p_keydown=t=>{this._toggle_pallete()};this._undo=()=>{if(this._action_buffer_cursor>-1){let t=this._action_buffer[this._action_buffer_cursor];this._action_buffer_cursor--;let e=w1(t);this._force_finish_last_action&&(this._force_finish_last_action(),this._force_finish_last_action=void 0),this._execute_action(e,!0)}};this._execute_action=(t,e)=>{var a,_,c;let{getSpec:n}=this.$props,{type:i,data:s}=B(t);switch(i){case Jf:this._add_unit(s.unitId,s.bundle,s.position,s.pinPosition,s.layoutPosition,s.parentId,e),this._is_unit_component(s.unitId)&&this._in_component_control&&(this._sim_add_sub_component(s.unitId),this._connect_sub_component(s.unitId),this._tree_layout&&(this._refresh_all_layout_node_target_position(),this._move_all_current_layout_node_target_position(),this._layout_scroll_search_unit_into_view(),this._refresh_search_list_height_offset())),this._add_unit_merges(s.unitId,(a=s.merges)!=null?a:{},e),this._add_unit_plugs(s.unitId,(_=s.plugs)!=null?_:{},e);break;case Zf:this._remove_unit(s.unitId,e);break;case Qf:this._add_merge(s.mergeId,s.mergeSpec,s.position,e),this._sim_collapse_merge(s.mergeId);break;case ng:{let p=At(s.mergeId);this._remove_merge(p,e)}break;case tg:{let p=At(s.mergeId),u=ut(s.unitId,s.type,s.pinId);this._merge_link_pin_merge_pin(u,p,e)}break;case eg:{let p=At(s.mergeId),u=ut(s.unitId,s.type,s.pinId);this._remove_pin_from_merge(p,u,e)}break;case ig:{this._expose_pin_set(s.type,s.pinId,s.pinSpec,s.data&&Ot(s.data),s.position,e);break}case Na:{if(s.parentId)this._move_sub_component_root(s.parentId,s.children,"default",e);else{for(let p of s.children)this._measure_sub_component_base(p);this._remove_sub_component_children(s.prevParentIdMap,"default",null,"default",s.children)}e&&this._pod.$moveSubComponentRoot({parentId:s.parentId,children:s.children,slotMap:(c=s.slotMap)!=null?c:{}}),this._refresh_layout_node_target_position(null),this._animate_all_current_layout_layer_node()}break;case _g:{let p=ut(s.unitId,s.type,s.pinId);this._set_link_pin_constant(p,s.constant,e)}break;case l1:{let p=ut(s.unitId,s.type,s.pinId);this._set_exposed_pin_functional(p,s.constant,e)}break;case za:this._stop_parent_sub_component_children_animation(s.parentId),this._state_reorder_sub_component(s.childId,s.to);break;case og:this._state_remove_exposed_pin_set(s.type,s.pinId);break;case rg:this._state_plug_exposed_pin(s.type,s.pinId,s.subPinId,s.subPinSpec),e&&this._pod_plug_exposed_pin(s.type,s.pinId,s.subPinId,s.subPinSpec);break;case cg:this._state_expose_unit_pin_set(s.unitId,s.type,s.pinId,s.pinSpec,s.position),e&&this._pod_expose_unit_pin_set(s.unitId,s.type,s.pinId,s.pinSpec);break;case ug:this._state_cover_unit_pin_set(s.unitId,s.type,s.pinId,s.pinSpec,s.position),e&&this._pod_cover_unit_pin_set(s.unitId,s.type,s.pinId,s.pinSpec);break;case sg:this._state_unplug_exposed_pin(s.type,s.pinId,s.subPinId),e&&this._pod_unplug_exposed_pin(s.type,s.pinId,s.subPinId);break;case pg:{let p=ut(s.unitId,s.type,s.pinId);this._state_set_link_pin_ignored(p,s.ignored),e&&this._pod_set_link_pin_ignored(p,s.ignored)}break;case lg:{let p=s;this._start_move_subgraph_into(p.graphId,s),this._force_finish_last_action=()=>{for(let u of[...this._collapse_node_id])this._long_press_collapse_node(u);if(this._abort_sub_component_leave_base_animation[p.graphId]){let u=this._abort_sub_component_leave_base_animation[p.graphId];u(),delete this._abort_sub_component_leave_base_animation[p.graphId]}this._force_finish_last_action=void 0}}break;case ag:{let p=ut(s.unitId,s.type,s.pinId);if(s.data===void 0){let u=this._pin_to_datum[p];u&&this._remove_datum(u)}else{let u=this._get_pin_datum_value(p);this._state_set_unit_pin_data(p,s.data),e&&this._pod_set_pin_data(p,s.data,u,!0)}}break;case mg:{let p=s;this._state_move_subgraph_out_of(s.graphId,p)}break;case m1:this._sim_set_unit_size(s.unitId,s.width,s.height),e&&this._pod_set_sub_component_size(s.unitId,s.width,s.height);break;case fg:break;case dg:{e&&this._pod.$bulkEdit(B(s));for(let p of s.actions)this._execute_action(p,!1)}break;case hg:this._state_set_unit_size(s.unitId,s.width,s.height),e&&this._pod_set_unit_size(s.unitId,s.width,s.height);break;default:throw new ei}};this._stop_parent_sub_component_children_animation=t=>{if(!this._layout_parent_children_animation_frame[t]){this._cancel_layout_parent_children_animation(t,"default");let e=this._spec_get_sub_component_children(t),n=this._layout_transfer_parent_callback[t];this._end_layout_sub_component_transfer_children_animation(t,"default",e),n&&n()}};this._redo=()=>{if(this._action_buffer_cursor<this._action_buffer.length-1){this._action_buffer_cursor++;let t=this._action_buffer[this._action_buffer_cursor];this._force_finish_last_action&&(this._force_finish_last_action(),this._force_finish_last_action=void 0),this._execute_action(t,!0)}};this._on_ctrl_z_keydown=()=>{this._undo()};this._on_ctrl_shift_z_keydown=()=>{this._redo()};this._order_node_by_x=()=>this.__order_node_by_x_template(this._node);this._order_node_by_y=()=>this.__order_node_by_y_template(this._node);this.__order_node_by_x_template=t=>this.__order_node_by_a__template("x",t);this.__order_node_by_y_template=t=>this.__order_node_by_a__template("y",t);this.__order_node_by_a__template=(t,e)=>Object.entries(e).sort(([n,i],[s,a])=>i[t]-a[t]);this._order_unit_by_x=()=>this.__order_node_by_x_template(this._unit_node);this._order_unit_by_y=()=>this.__order_node_by_y_template(this._unit_node);this._on_arrow_keydown=t=>{if(this._node_count===0)return;let e=-1,n,i=this._pointer_id_hover_node_id[R0],s=()=>{let u=this._order_node_by_x().map(([d])=>d);return n=u,_(u)},a=()=>{let u=this._order_node_by_y().map(([d])=>d);return n=u,_(u)},_=u=>i?u.indexOf(i):c===1?-1:u.length,c=0;switch(t){case"ArrowLeft":c=-1,e=s();break;case"ArrowRight":c=1,e=s();break;case"ArrowUp":c=-1,e=a();break;case"ArrowDown":c=1,e=a();break}let p=e+c;if(p>=this._node_count&&(p=void 0),p<0&&(p=void 0),p===void 0)i&&this._set_node_hovered(i,R0,!1);else{let u=n[p];this._set_node_hovered(i,R0,!1),this._set_node_hovered(u,R0,!0)}};this._hide_search=()=>{this._search&&this._search.blur()};this._show_search=()=>{this._search&&this._search.focus({preventScroll:!0})};this._get_sub_component_slot_name=t=>{let e=this._spec_get_sub_component_parent_id(t);if(e){let n=this._get_sub_component_spec(e),{childSlot:i={}}=n;return i[t]||"default"}else return"default"};this._insert_sub_component_child=(t,e)=>{let n=this._get_sub_component(t),i=this._get_sub_component(e);if(!this._is_fullwindow){let s=this._get_sub_component_slot_name(e),a=this._spec_get_sub_component_parent_root_index(e);n.insertParentRootAt(i,a,s)}};this._mem_insert_sub_component_child=(t,e,n,i)=>{if(i===void 0)return this._mem_push_sub_component_child(t,e,n);let s=this._get_sub_component(t),a=this._get_sub_component(e);this._is_fullwindow||(s.$parentRoot.length>i?s.insertParentRoot(a,i,n):s.pushParentRoot(a,n))};this._dom_insert_sub_component_child=(t,e)=>{let n=this._get_sub_component(t),i=this._get_sub_component(e);if(!this._is_fullwindow){let s=this._get_sub_component_slot_name(e),a=this._spec_get_sub_component_parent_root_index(e);n.$mountParentRoot.length>a?n.domInsertParentRootAt(i,a,s):n.domAppendParentRoot(i,s,a)}};this._post_insert_sub_component_child=(t,e)=>{let n=this._get_sub_component(t),i=this._get_sub_component(e);if(!this._is_fullwindow){let s=this._get_sub_component_slot_name(e),a=this._spec_get_sub_component_parent_root_index(e);n.$mountParentRoot.length>a?n.postInsertParentRootAt(i,a,s):n.postAppendParentRoot(i,s,a)}};this._on_escape_keydown=()=>{this._edit_datum_node_id?this._datum[this._edit_datum_node_id].blur():this._selected_node_count>0?this._deselect_all():this.dispatchEvent("escape",{},!1)};this._on_enter_keydown=()=>{if(this._edit_datum_id){let t=this._datum_tree[this._edit_datum_id];this._commit_data_value(this._edit_datum_id,t)}};this._map_zoom_translate=(t,e)=>{let{$width:n,$height:i}=this.$context,{_min_x:s,_min_y:a,_width:_,_height:c}=this._minimap,p=_/c,u=as/Qi,d=p/u,m=t,h=e;d>1?h+=(e-Qi/2)*(d-1):m+=(t-as/2)*(1/d-1);let f=s+m*_/as,b=a+h*c/Qi,{x:g,y:v,z:x}=this._zoom;this._translate_x=(g-f)*x+n/2,this._translate_y=(v-b)*x+i/2;let I=fh(this._zoom,this._translate_x,this._translate_y);this.set_zoom(I),this._translate_pressed_node(),this._translate_search_node()};this._on_minimap_wheel=({deltaY:t,ctrlKey:e,clientX:n,clientY:i,offsetX:s,offsetY:a})=>{e||this._unit_count>0&&(this._zoom_in(t,this._zoom.x,this._zoom.y),this._map_zoom_translate(s,a))};this._on_minimap_pointer_down=t=>{let{pointerId:e}=t,{clientX:n,clientY:i}=t;if(this._unit_count>0&&!this._is_minimap_drag_and_drop_mode(this._mode))if(this._minimap.setPointerCapture(e),this._minimap_pointer_down=!0,this._tree_layout){let{$width:s,$height:a}=this.$context;this._minimap_screen.setProp("x",-s/2),this._minimap_screen.setProp("y",i-4.5-a/2),this._minimap_screen.setProp("width",s),this._minimap_screen.setProp("height",a)}else this._map_zoom_translate(n,i)};this._on_minimap_pointer_enter=()=>{};this._on_minimap_pointer_leave=()=>{};this._on_minimap_drag_start=()=>{};this._on_minimap_pointer_move=t=>{if(this._minimap_pointer_down){let{clientX:e,clientY:n}=t;if(this._tree_layout){let{$width:i,$height:s}=this.$context;this._minimap_screen.setProp("x",-i/2),this._minimap_screen.setProp("y",n-4.5-s/2),this._minimap_screen.setProp("width",i),this._minimap_screen.setProp("height",s)}else this._map_zoom_translate(e,n),this._start_graph_simulation(he)}};this._on_minimap_pointer_up=t=>{let{pointerId:e}=t;if(this._minimap_pointer_down=!1,this._minimap.hasPointerCapture(e)&&this._minimap.releasePointerCapture(e),this._search_unit_id){let n=this._node[this._search_unit_id];n.fx=void 0,n.fy=void 0,this._for_each_unit_pin(this._search_unit_id,i=>{let s=this._node[i];s.fx=void 0,s.fy=void 0})}};this._zoom_in=(t,e,n)=>{let{$height:i,$width:s}=this.$context,{minZoom:a,maxZoom:_,zoomTranslate:c}=this.$props,p=t<0?1:-1,u=Math.exp(p*yM),d=this._zoom.z*u,m=c&&d>=1?e:s/2,h=c&&d>=1?n:i/2;if(d>a&&d<_){let f={z:d,x:this._zoom.x-(m/d-m/this._zoom.z),y:this._zoom.y-(h/d-h/this._zoom.z)};this.set_zoom(f),this._maybe_refresh_simulation_by_drag()}};this._sim_relative_layer_m=(t,e,n=Ch)=>{if(t*e>=0){let i=Math.abs(t),s=Math.abs(e);return n[i][s]}return 0};this._sim_relative_m=(t,e,n=Ch)=>{let i=this._node_layer[t],s=this._node_layer[e],a=Math.sign(i),_=Math.sign(s);if(a*_>=0){let c=Math.abs(i),p=Math.abs(s);return n[c][p]}return 0};this._zoom_target_is_animating=()=>!!this._zoom_target_abort_animation;this._set_zoom_target=t=>{this._zoom_target_node_id=t,this._zoom_target_is_animating()||this._start_zoom_target_animation()};this._remove_zoom_target=()=>{this._zoom_target_node_id=null};this._start_zoom_target_animation=()=>{let t=this._zoom,e=()=>{let{$width:n,$height:i}=this.$context,s=this.get_node(this._zoom_target_node_id),{x:a,y:_}=s,c=rv(a,_,this._zoom.z,n,i);return{x:c.x-this._search_dock_offset_x/this._zoom.z/2,y:c.y+this._search_dock_offset_y/this._zoom.z/2,z:c.z}};this._zoom_target_abort_animation=this._animate_simulate(t,e,[["x",1/10],["y",1/10]],({x:n,y:i})=>{this._pointer_down_count===0&&this._set_zoom({x:n,y:i,z:this._zoom.z})},()=>!1)};this._stop_zoom_target_animation=()=>{this._zoom_target_abort_animation&&(this._zoom_target_abort_animation(),this._zoom_target_abort_animation=void 0)};this._sim_max_d=(t,e)=>{let n=this._node_layer[t],i=this._node_layer[e],s=this._node_to_subgraph[t],a=this._node_to_subgraph[e];return this.__sim_max_l(n,i,s,a)};this.__sim_max_l=(t,e,n,i)=>{let s=n===i,a=Math.abs(t),_=Math.abs(e);if(s){let c=vM[a][_];return K0*c}else{let c=xM[a][_];return W0*c}};this._force_custom_layer_none=t=>{this._force_link_y(t,this._pin_link),this._force_link_y(t,this._none_link)};this._force_center=(t,e)=>{for(let n in e){if(this._collapse_node_id.has(n))continue;if(nn(this._pin_to_int,["input",n])||nn(this._pin_to_int,["output",n])){let s=e[n],{$width:a,$height:_}=this.$context,{x:c,y:p}=this._world_screen_center(),u=this._zoom.z,d=Math.min(a,_)/24/u,m=s.x-c,h=s.y-p,f=Math.sqrt(m*m+h*h),b=.1*u*((d-f)*t)/f;s.ax+=m*b,s.ay+=h*b}}};this._force_custom_layer_normal=t=>{if(this._static){for(let e in this._static_position)if(this._static_count[e]===0){let n=this._node[e],i=n._x,s=n._y,{x:a,y:_}=this._static_position[e],c=i-a,p=s-_;if(Math.sqrt(c*c+p*p)>0){let m=.1*t;n.ax-=c*m,n.ay-=p*m}}}this._force_center(t,this._empty_merge_node)};this._force_link_y=(t,e)=>{for(let n in e){let i=e[n],{source_id:s,target_id:a}=i,_=this._node[s],c=this._node[a],{_y:p,layer:u}=_,{_y:d,layer:m}=c,h=this._sim_relative_layer_m(u,m,z0),f=this._sim_relative_layer_m(m,u,z0),b=(p+d)/2,g=t/3;c.ay+=(b-d)*g*h,_.ay+=(b-p)*g*f}};this._force_custom_layer_collapse=t=>{if(this._collapsing){let{x:e,y:n}=this._get_node_position(this._collapse_next_unit_id);for(let i of this._collapse_node_id){let s=this._node[i],{_x:a,_y:_}=s,c=a-e,p=_-n,d=.1*t;s.ax-=c*d,s.ay-=p*d}}};this._force_custom_layer_search=t=>{let e=this._search_unit_id||this._search_unit_datum_node_id;if(e&&this._mode!=="change"){let{x:n,y:i}=this._world_screen_center(0,0),s=this._node[e],{_x:a,_y:_}=s,c=a-n-this._search_dock_offset_x/this._zoom.z/2,p=_-i+this._search_dock_offset_y/this._zoom.z/2;if(Math.sqrt(c*c+p*p)>.1){let d=t/6;s.ax-=c*d,s.ay-=p*d}}this._force_link_y(t,this._search_link)};this._force_custom_layer_ignored=t=>{this._force_link_y(t,this._ignored_link)};this._force_custom_layer_exposed=t=>{let{$width:e,$height:n}=this.$context,{x:i,y:s}=this._world_screen_center(),a=this._zoom.z,_=Math.min(e,n)/24/a;for(let c in this._exposed_int_unplugged){if(this._collapse_node_id.has(c))continue;let p=this._node[c],{_x:u,_y:d}=p,{pinId:m,type:h,subPinId:f}=gt(c),b=Kt(h,m,f),g=this._node[b],{_x:v,_y:x}=g;if(this._int_node_locked[c]){let I=this._int_node_locked[c],E=this._node[I],D=Me(u,d,E.x,E.y),w=9*t;p.ax+=D.x*w,p.ay+=D.y*w}else{let I=null,E=Number.MAX_SAFE_INTEGER;if(this._compatible_node_count>0)for(let D in this._compatible_node_id){let w=this._node[D],{l:T}=hn(p,w),{l:C}=hn(g,w),P=Math.min(T,C);P<Qn&&P<E&&(E=P,I=D)}if(this._drag_node_id[c]){let D=Me(u,d,v,x),w;if(I){let C=this._node[I],{_x:P,_y:k}=C;w=Me(P,k,u,d)}else w=Me(i,s,u,d);if(Qr(D.x,D.y,w.x,w.y)<2*Math.PI-.01){let C=na({x:w.x-D.x,y:w.y-D.y}),P=1*t;g.ax+=C.x*P,g.ay+=C.y*P}}else if(this._drag_node_id[b]){let D=Me(v,x,u,d);if(I){let w=this._node[I],{_x:T,_y:C,r:P}=w,k=Me(u,d,T,C);if(Qr(D.x,D.y,k.x,k.y)>.05){let U=na({x:k.x-D.x,y:k.y-D.y}),L=1*t;p.ax+=U.x*L,p.ay+=U.y*L}}else{let w=Me(v,x,i,s);if(Qr(D.x,D.y,w.x,w.y)>.01){let C=na({x:w.x-D.x,y:w.y-D.y}),P=1*t;p.ax+=C.x*P,p.ay+=C.y*P}}}else{let D=u-i,w=d-s,T=Math.sqrt(D*D+w*w),C=.1*a*((_-T)*t)/T;p.ax+=D*C,p.ay+=w*C}}}};this._force_custom_layer_data_linked=t=>{for(let e in this._visible_data_link){let n=this._visible_data_link[e],{source_id:i,target_id:s}=n,a=this._node[i],_=this._node[s],c=Me(_.x,_.y,a.x,a.y),p=this._node_line_vector(s),u=U7(p),d=9*t;a.ax+=d*Math.abs(u.x)*(p.x-c.x),a.ay+=d*Math.abs(u.y)*(p.y-c.y)}};this._force_custom_layer_data=t=>{};this._force_custom_layer_err=t=>{for(let e in this._err_node){let{unitId:n}=Kr(e);if(this._err[n]){let i=this._node[e];i.ay-=3*t}}};this._force_custom_layer_type=t=>{for(let e in this._type_link){let n=this._type_link[e],{source_id:i,target_id:s}=n;if(this._is_pin_node_id(s)||this._is_unit_node_id(s)){let a=this._node[i];a.ay-=9*t}}};this._force_custom=[this._force_custom_layer_none,this._force_custom_layer_normal,this._force_custom_layer_collapse,this._force_custom_layer_search,this._force_custom_layer_ignored,this._force_custom_layer_exposed,this._force_custom_layer_data_linked,this._force_custom_layer_data,this._force_custom_layer_err,this._force_custom_layer_type];this._force=t=>{var e,n,i,s,a,_;for(let c=this._simulation_layer;c<this._layer_node.length;c++){let p=this._layer_node[c],u=Object.entries(p),d=u.length;for(let h=0;h<d;h++){let[f,b]=u[h],{layer:g}=b,v=this._node_to_subgraph[f],x=this._node_max_link_length_heap[f],I=rn((x==null?void 0:x.value.l)/(x==null?void 0:x.value.t),1,1/0);for(let E=h+1;E<d;E++){let[D,w]=u[E],{layer:T}=w,C=this._node_to_subgraph[D],P=Sl(b.shape,b._x,b._y,b.r,b.width,b.height,w.shape,w._x,w._y,w.r,w.width,w.height),{u:k}=P,{l:M,d:U}=P;M=Math.max(M,1),U=Math.max(U,1);let L=this.__sim_max_l(g,T,v,C);if(M<L){let O=this._sim_relative_layer_m(g,T,Ch),R=this._sim_relative_layer_m(T,g,Ch),N=-90*t/M,z=O*N,F=R*N,V=(n=(e=this._node_charge[f])==null?void 0:e[D])!=null?n:1,j=(s=(i=this._node_charge[D])==null?void 0:i[f])!=null?s:1,H=w.ax-=k.x*z*V;w.ay-=k.y*z*V,b.ax+=k.x*F*j,b.ay+=k.y*F*j}}for(let E=c-1;E>=0;E--){let D=this._layer_node[E],w=Object.entries(D),T=w.length;for(let C=0;C<T;C++){let[P,k]=w[C],{layer:M}=k,U=this._node_to_subgraph[P],{l:L,u:O,d:R}=Sl(b.shape,b._x,b._y,b.r,b.width,b.height,k.shape,k._x,k._y,k.r,k.width,k.height);L=Math.max(L,1);let N=this.__sim_max_l(g,M,v,U);if(L<N){let z=this._sim_relative_layer_m(M,g,Ch),F=-90*t*z/L,V=(_=(a=this._node_charge[P])==null?void 0:a[f])!=null?_:1;b.ax+=O.x*F*V,b.ay+=O.y*F*V}}}}let m=this._layer_link[c];for(let h in m){let f=m[h],{s:b,source_id:g,target_id:v}=f,x=this._node[g],I=this._node[v],{layer:E}=x,{layer:D}=I,w=this._sim_relative_layer_m(E,D,z0),T=this._sim_relative_layer_m(D,E,z0),{l:C,d:P}=Sl(x.shape,x._x,x._y,x.r,x.width,x.height,I.shape,I._x,I._y,I.r,I.width,I.height);C=Math.max(C,1),P=Math.max(P,1);let k=f.l,M=k/C;tt(this._node_z,[g,h],M),tt(this._node_z,[v,h],M);let U=x._x,L=I._x,O=x._y,R=I._y,N=b*((C-k)*t)/P,z=(L-U)*N,F=(R-O)*N;I.ax-=z*w,I.ay-=F*w,x.ax+=z*T,x.ay+=F*T}this._force_custom[c](t)}};this._on_simulation_tick=()=>{this._tick()};this._tick=()=>{for(let t in this._node)this._tick_node(t);for(let t in this._link)this._tick_link(t);this._minimap&&this._tick_minimap()};this._on_simulation_end=()=>{this._simulation_end=!0;let{units:t={}}=this._spec;this._set_units_position(t)};this._get_layout_node_anchor_id=t=>{let e=t,n=this._layout_sub_component_parent[e];for(;n&&!this._layout_path.includes(n);)e=n,n=this._layout_sub_component_parent[e];return e};this._set_layout_core_position=(t,e,n)=>{let i=this._layout_core[t];i.$element.style.left=`calc(50% + ${e}px)`,i.$element.style.top=`calc(50% + ${n}px)`;let s=this._layout_node[t];if(s.x=e,s.y=n,this._control_lock&&this._minimap&&this._tick_minimap(),!this._search_hidden&&this._search_unit_id===t&&t===this._search_unit_id){let a=this._ensure_parent_layout_layer(t),{scrollHeight:_}=a.layer.$element;this._refresh_layout_component_scroll(t,_,"up",1,zt)}};this._set_layout_core_position_x=(t,e)=>{let n=this._layout_core[t];n.$element.style.left=`calc(50% + ${e}px)`;let i=this._layout_node[t];i.x=e};this._set_layout_core_position_y=(t,e)=>{let n=this._layout_core[t];n.$element.style.top=`calc(50% + ${e}px)`;let i=this._layout_node[t];i.y=e};this._set_spec_nodes_position=t=>{this.__spec_set_nodes_position(t)};this._get_datum_spec=t=>{let e=this._get_datum_value(t),n=this._get_node_position(t);return{value:e,metadata:{position:n}}};this._set_spec_data=t=>{for(let e in this._visible_unlinked_data_node){let{datumId:n}=Ae(e),i=this._get_datum_spec(e);vE(t,n,i)}};this._get_full_user_spec=()=>{var e;let t=B(this._spec);return delete t.system,t.units=(e=t.units)!=null?e:{},this._set_spec_nodes_position(t),this._set_spec_data(t),this._is_component()?this._spec.type="`U`&`G`&`C`":this._spec.type="`U`&`G`",t};this._is_component=()=>Gr(this._spec);this.__spec_set_nodes_position=t=>{let e=Ls(Object.values(this._unit_node)),n=this.get_nodes_relative_positions_to(this._node,e);for(let i in n){let s=n[i];if(this._is_unit_node_id(i))tt(t,["units",i,"metadata","position"],s);else if(this._is_link_pin_node_id(i)){let a=i,{unitId:_,type:c,pinId:p}=it(a);tt(t,["units",_,c,p,"metadata","position"],s)}else if(this._is_merge_node_id(i)){let a=i,{mergeId:_}=It(a);tt(t,["metadata","position","merge",_],s)}else if(this._is_ext_node_id(i)){let a=i,{type:_,pinId:c,subPinId:p}=gt(a);tt(t,[`${_}s`,c,"metadata","position",p],s)}}};this._set_units_position=t=>{let e=this._nodes_cm_position_map(t);for(let n in t){let i=t[n],s=e[n];i.metadata=i.metadata||{},i.metadata.position=s}};this._pod_started=!1;this._setup_pod=t=>{this._pod_started||(this._listen_pod(t),this._start_debugger())};this._process_pod_data=()=>{this.__process_pod_data(this._pod)};this.__process_pod_data=t=>{t.$getPinData({},e=>{this._process_unit_io_all_data(e)}),t.$getGraphPinData({},e=>{this._process_graph_all_pin_data(e)}),t.$getGraphMergeInputData({},e=>{this._process_graph_all_merge_data(e)}),t.$getGraphErr({},e=>{this._process_graph_all_err(e)}),t.$getGraphChildren({},e=>{this._process_graph_all_children(e)})};this._listen_pod=t=>{this._pod_started=!0,this.__process_pod_data(t),this._pod_unlisten=Tt([t.$watch({events:["fork","input","output","ref_input","ref_output","add_unit","clone_unit","remove_unit","move_unit","expose_pin_set","cover_pin_set","expose_pin","cover_pin","plug_pin","unplug_pin","add_pin_to_merge","remove_pin_from_merge","add_merge","remove_merge","move_subgraph_into","move_subgraph_out_of","reorder_sub_component","move_sub_component_root","set_unit_id","set_pin_set_id","set_unit_pin_constant","set_unit_pin_ignored","set_unit_pin_data","set_unit_pin_set_id","remove_unit_pin_data","set_pin_set_functional","bulk_edit"]},this._on_moment),t.$watchGraph({events:["fork","append_child","remove_child","insert_child","input","output","ref_input","ref_output","err","take_err","catch_err"]},this._on_graph_moment)])};this._process_io_active_data=t=>{let{input:e,output:n}=t;this._unit_debug_reset_pins_data("input",J(e),e),this._unit_debug_reset_pins_data("output",J(e),n)};this._process_unit_io_all_data=t=>{let{input:e,output:n}=t,{inputs:i={},outputs:s={}}=this._spec;this._unit_debug_reset_pins_data("input",J(i),e),this._unit_debug_reset_pins_data("output",J(s),n)};this._unit_debug_reset_pins_data=(t,e,n)=>{for(let i of e){let s=n[i];this._unit_debug_reset_pin_data(t,i,s)}};this._unit_debug_reset_pin_data=(t,e,n)=>{n===void 0?this._unit_datum[t][e]!==void 0&&this._sim_remove_pin_data(t,e):this._sim_set_pin_set_data(t,e,n)};this._process_graph_active_pin_data=t=>{this._process_graph_io_data(J(t),t)};this._process_graph_all_pin_data=t=>{let e=this._get_unit_ids();this._process_graph_io_data(e,t)};this._process_graph_io_data=(t,e)=>{for(let n of t){let i=e[n]||{input:{},output:{}};this._process_graph_unit_io_data(n,i)}};this._process_graph_unit_io_data=(t,e)=>{let{input:n,output:i}=e;this._process_graph_unit_pin_data(t,"input",J(n),n),this._process_graph_unit_pin_data(t,"output",J(i),i)};this._process_graph_unit_pin_data=(t,e,n,i)=>{for(let s of n){let a=i[s],_=ut(t,e,s),c=this._get_pin_datum_value(_);a!==c&&this._graph_debug_refresh_pin_data(_,a)}};this._for_each_spec_merge=t=>{let e=this._spec_get_merges();for(let n in e){let i=At(n),s=e[n];t(i,n,s)}};this._process_graph_active_merge_data=t=>{this.__process_graph_merge_data(J(t),t)};this.__process_graph_merge_data=(t,e)=>{for(let n of t){let i=At(n),s=e[n];this._graph_debug_refresh_pin_data(i,s)}};this._process_graph_all_merge_data=t=>{let e=this._spec_get_merges();this.__process_graph_merge_data(J(e),t)};this._process_graph_active_err=t=>{this._process_graph_err(J(t),t)};this._process_graph_all_err=t=>{let e=this.get_units();this._process_graph_err(J(e),t)};this._process_graph_err=(t,e)=>{for(let n of t){let i=e[n];i?this._graph_debug_set_unit_err(n,i):this._err[n]&&this._graph_debug_take_err(n)}};this._process_graph_active_children=t=>{this._process_graph_children(J(t),t)};this._process_graph_all_children=t=>{let e=this._get_unit_ids();this._process_graph_children(e,t)};this._process_graph_children=(t,e)=>{for(let n of t){let i=e[n];this._graph_children[n]=i}};this._graph_state={};this._graph_children={};this._graph_debug_refresh_pin_data=(t,e)=>{e===void 0?this._graph_debug_drop_pin_data(t):this._graph_debug_set_pin_value(t,e)};this._plunk_pod=()=>{this._pod_started&&(this._unlisten_pod(),this._pause_debugger(),this._clear_debugger())};this._unlisten_pod=()=>{this._pod_started&&(this._pod_started=!1,this._pod_unlisten(),this._pod_unlisten=void 0)};this._start_debugger=()=>{this._debug_interval===null&&(this._debug_interval=setInterval(()=>{this._debug_cursor<this._debug_buffer.length-1?this._step_debugger():this._pause_debugger()},0))};this._step_debugger=(t=1)=>{if(t===1&&this._debug_cursor<this._debug_buffer.length-1){this._debug_cursor++;let e=this._debug_buffer[this._debug_cursor];this._debug_moment(e)}else if(t===-1&&this._debug_cursor>=0){let e=this._debug_buffer[this._debug_cursor];this._debug_moment(hM(e)),this._debug_cursor--}else throw new Ko};this._debug_stop=!1;this._stop_debugger=()=>{this._debug_stop=!0,this._pause_debugger()};this._pause_debugger=()=>{this._debug_interval!==null&&(clearInterval(this._debug_interval),this._debug_interval=null)};this._get_unit_pin_random_position=t=>{let e=this._node[t],{x:n,y:i,shape:s,r:a}=e;return x2(n,i,a+24+5)};this._on_graph_unit_expose_pin=t=>{let{setSpec:e,specs:n,parent:i}=this.$props,{path:s}=t,a=s[0];if(this._is_spec_updater(s)){let{type:_,pinId:c,subPinId:p,subPinSpec:u,path:d}=t,m=B(Qt(n,this._spec,d));Ja({pinId:c,type:_,subPinId:p,subPinSpec:u},m),e(m.id,m)}};this._on_graph_unit_cover_pin=t=>{let{type:e,pinId:n,subPinId:i,subPinSpec:s,path:a}=t,{setSpec:_,specs:c}=this.$props,{parent:p}=this.$props;if(this._is_spec_updater(a)){let{type:u,pinId:d,subPinId:m,path:h}=t,f=B(Qt(c,this._spec,h));Ar({pinId:d,type:u,subPinId:m},f),_(f.id,f)}};this._on_graph_unit_expose_pin_set=t=>{let{setSpec:e,specs:n,parent:i}=this.$props,{type:s,pinId:a,pinSpec:_,path:c}=t;if(this._is_spec_updater(c)){let p=Qt(n,this._spec,c),u=B(p),d=N1(n,u,s,_);$i({type:s,pinId:a,pinSpec:B(_)},u),Qa({type:s,pinId:a,ref:d},u),e(u.id,u);let m=c[0],h=ut(m,s,a),f=c[0];if(!this._pin_node[h]){let b=this._get_unit_spec_id(m),g=this._get_unit_spec(m),v=this._get_unit_pin_random_position(m);this._sim_add_link_pin_node(m,s,a,v),this._sim_add_link_pin_link(m,s,a)}if(t.data!==void 0){let b=Ot(t.data);this._graph_debug_set_pin_value(h,b)}}};this._on_graph_unit_set_unit_id=t=>{let{setSpec:e,specs:n,parent:i}=this.$props,{unitId:s,newUnitId:a,name:_,specId:c,path:p}=t;if(this._is_spec_updater(p)){let u=B(Qt(n,this._spec,p));T4({unitId:s,newUnitId:a,name:_},u),tt(u,["units",a,"id"],c),e(u.id,u)}p.length};this._spec_remove_unit_pin=(t,e,n)=>{oe(this._spec,["units",t,e,n])};this._on_graph_unit_cover_pin_set=t=>{let{setSpec:e,specs:n,parent:i}=this.$props,{type:s,pinId:a,path:_}=t,c=_[0];if(_.length===1&&(this._sim_graph_remove_unit_pin(c,s,a),this._spec_remove_unit_pin(c,s,a)),this._is_spec_updater(_)){let p=B(Qt(n,this._spec,_));Oi({type:s,pinId:a},p),e(p.id,p)}if(_.length>=1){let p=to(_),u=s1(_),d=Qt(n,this._spec,u);oe(d,["units",p,s,a]),e(d.id,d)}};this._graph_component_children={};this._on_set_pin_set_functional=t=>{};this._on_graph_unit_leaf_append_child=t=>{};this._on_graph_unit_leaf_remove_child_at=t=>{};this._componentify_core=(t,e,n=!0)=>{this._set_core_shape(t,"rect"),this._spec_append_component(null,t),this._sim_add_core_component(t,null,{x:0,y:0}),this._mem_add_unit_component(t,e),this._mem_add_unit_component_parent(t),this._subgraph_unit_id===t||n&&this._place_sub_component(t);let i=this._ref_unit_to_merge[t];if(i){let{mergeId:s}=It(i);this._for_each_merge_pin(s,(a,_,c)=>{if(_==="input"){let p=ut(a,_,c);this._refresh_link_pin_marker(p,a)}})}this._connect_sub_component(t),this._hide_core_icon(t)};this._decomponentify_core=(t,e=!0)=>{this._disconnect_sub_component(t),this._subgraph_unit_id===t||e&&this._displace_sub_component(t),this._sim_remove_component(t,!1,!1),this._mem_remove_component(t),this._spec_remove_component(t),this._set_core_shape(t,"circle"),this._show_core_icon(t)};this._on_fork_moment=t=>{let{specId:e,path:n}=t;n.length===0&&(this._spec.id=e)};this._on_add_unit_moment=t=>{let{unitId:e,bundle:n,path:i}=t;if(i.length===0){let s=this._jiggle_world_screen_center(),{unit:a}=n;this._spec_add_unit(e,a),this._is_unit_component(e)&&this._spec_append_component(null,e),this._sim_add_unit(e,a,s,{},{input:{},output:{}},null),this._is_unit_component(e)&&(this._sim_add_sub_component(e),this._connect_sub_component(e))}else this._on_graph_unit_add_unit_moment(t)};this._on_clone_unit_moment=(t,e)=>{};this._on_graph_unit_fork_moment=t=>{let{getSpec:e,setSpec:n,forkSpec:i,specs:s,registerUnit:a,unregisterUnit:_}=this.$props,{specId:c,spec:p,path:u,unitId:d}=t;if(!d){if(u.length===0)return;d=u[0],u=u.slice(1)}if(u.length===0)this._spec_fork_unit(d,c),this._sim_fork_unit(d,c);else{let m=this._get_unit_spec(d),h=u.slice(0,-1),f=B(Qt(s,m,h)),b=to(u);tt(f,["units",b,"id"],c),n(f.id,f)}};this._sim_fork_unit=(t,e)=>{};this._spec_fork_unit=(t,e)=>{let{specs:n,setSpec:i,registerUnit:s,unregisterUnit:a}=this.$props,_=B(this._get_unit_spec(t));this._spec.units[t].id=e,delete _.system;let c=_.id;_.id=e,i(e,_),s(e),a(c)};this._is_spec_updater=t=>{let{parent:e}=this.$props,n=t[0];return!this._subgraph_cache[n]||t.length===1&&to(t)===n};this._spec_graph_unit_add_unit=(t,e,n)=>{let{setSpec:i}=this.$props,s=this._get_unit_spec_id(t),a=this._get_unit_spec(t),_=B(a);Mo({unitId:e,unit:n},_),i(s,_)};this._on_graph_unit_clone_unit_moment=t=>{let{specs:e}=this.$props,{unitId:n,newUnitId:i,path:s}=t,_=Qt(e,this._spec,s).units[n],c=un(_,e),p={unitId:i,bundle:c,path:s};this._on_graph_unit_add_unit_moment(p)};this._on_graph_unit_add_unit_moment=t=>{var P,k,M,U,L;let{setSpec:e,getSpec:n,specs:i,parent:s}=this.$props,{unitId:a,bundle:_,path:c,parentId:p}=t,u=_.unit.id,d=n(u),m=d.render,h=on(Wt((P=_.specs)!=null?P:{},i),u),f=c[0],b=this._is_unit_component(f),g=this._get_unit_spec_render(f),v=this._pod.$refUnit({unitId:f,_:["U","C","G"]}),x=Qt(Wt((k=_.specs)!=null?k:{},i),this._spec,c),I=x.id,E=x.render,D=B(x);if(this._is_spec_updater(c)){if(Mo({unitId:a,unit:_.unit},D),D.metadata=D.metadata||{},delete D.metadata.complexity,D.component=(M=D.component)!=null?M:{},h){Wa({unitId:a,subComponent:{}},D.component),p?wg({parentId:p,childId:a},D.component):Ka({childId:a},D.component);let{component:O}=d,{defaultWidth:R=120,defaultHeight:N=120}=O;D.component.defaultWidth=D.component.defaultWidth||R,D.component.defaultHeight=D.component.defaultHeight||N}e(D.id,D)}let w=this._get_unit_spec(f),T=c.length===1?D:B(w),C=!0;for(let O=c.length-1;O>=0;O--){let R=c.slice(0,O+1),N=Qt(i,this._spec,R);C=C&&(Gr(N)||__(N)===void 0)}if(h&&C){let O=(U=c[1])!=null?U:a;if(T.component=(L=T.component)!=null?L:{},!mx(T,O)){Wa({unitId:O,subComponent:{}},T.component),Ka({childId:O},T.component);let{component:R}=d,{defaultWidth:N=120,defaultHeight:z=120}=R;T.component.defaultWidth=T.component.defaultWidth||N,T.component.defaultHeight=T.component.defaultHeight||z,e(T.id,T)}}if(b&&h&&!C&&!this._subgraph_graph){let O=this._get_sub_component(f),R=O.getSubComponent(a);if(!R){R=null;let N=v.$refUnit({unitId:a,_:["U","C","G","EE","V"]}),z=Zr(this.$system,this.$system.specs,I,{});z.connect(N),O.setSubComponent(a,z),O.pushRoot(z),R=z}O.appendRoot(R)}if(g===void 0&&h&&C&&!b){let O={};this._subgraph_unit_id===f&&(O=this._subgraph_graph._component.$subComponent),this._componentify_core(f,O),this._refresh_core_rect(f)}this._refresh_core_icon_hidden(f),this._refresh_core_icon_size(f),this._start_graph_simulation(he)};this._refresh_core_icon_hidden=t=>{var s;let e=this._get_unit_spec(t),n=pe(e.units||{});if(this._is_unit_component(t))this._hide_core_icon(t);else if(n>0){let a=(s=this._spec_get_unit_icon(t))!=null?s:"question";this._set_core_icon(t,a),this._show_core_icon(t)}else this._hide_core_icon(t)};this._get_core_icon_size=t=>{let{r:e}=this.get_node(t),n=e;return{width:n,height:n}};this._set_core_icon_size=(t,e)=>{let{width:n,height:i}=e,s=this._core_icon[t];s.$element.style.width=`${n}px`,s.$element.style.height=`${i}px`};this._refresh_core_icon_size=t=>{let e=this._get_core_icon_size(t);this._set_core_icon_size(t,e)};this._on_graph_unit_add_merge_moment=t=>{let{parent:e,specs:n,setSpec:i}=this.$props,{mergeId:s,mergeSpec:a,path:_}=t;if(this._is_spec_updater(_)){let c=B(Qt(n,this._spec,_));vs({mergeSpec:a,mergeId:s},c),i(c.id,c)}};this._on_graph_unit_remove_merge_moment=t=>{let{parent:e,specs:n,setSpec:i}=this.$props,{mergeId:s,mergeSpec:a,path:_}=t;if(this._is_spec_updater(_)){let c=B(Qt(n,this._spec,_));Ya({mergeId:s},c),i(c.id,c)}};this._on_graph_unit_remove_unit_pin_data_moment=t=>{let{specs:e,setSpec:n}=this.$props,{unitId:i,type:s,pinId:a,path:_}=t;if(this._is_spec_updater(_)){let c=B(Qt(e,this._spec,_));Cg({unitId:i,type:s,pinId:a},c),n(c.id,c)}};this._on_graph_unit_remove_pin_from_merge_moment=t=>{let{parent:e,specs:n,setSpec:i}=this.$props,{path:s}=t;if(this._is_spec_updater(s)){let{mergeId:a}=t,_=Qt(n,this._spec,s);Xa(t,_),i(_.id,_)}};this._on_graph_unit_add_pin_to_merge_moment=t=>{let{parent:e,specs:n,setSpec:i}=this.$props,{path:s}=t;if(this._is_spec_updater(s)){let{mergeId:a}=t,_=Qt(n,this._spec,s);kg(t,_),i(_.id,_)}};this._on_graph_unit_plug_pin_moment=t=>{let{type:e,pinId:n,subPinId:i,subPinSpec:s,path:a}=t,_=a[0],{specs:c,setSpec:p,getSpec:u}=this.$props;if(this._is_spec_updater(a)){let d=Qt(c,this._spec,a),m=B(d);delete m[`${e}s`][n].type,xs({pinId:n,type:e,subPinId:i,subPinSpec:s},m);let h=R1(c,d,e,s);if(Qa({type:e,pinId:n,ref:h},m),p(d.id,m),a.length===1){let f=ut(_,e,n);this._sim_set_unit_pin_ref(f,h)}}};this._on_graph_unit_unplug_pin_moment=t=>{let{type:e,pinId:n,subPinId:i,subPinSpec:s,path:a}=t,_=a[0],{specs:c,setSpec:p}=this.$props;if(this._is_spec_updater(a)){let u=Qt(c,this._spec,a),d=B(u);delete d[`${e}s`][n].type,Is({pinId:n,type:e,subPinId:i},d);let m=wr(d,e,n),h=N1(c,u,e,m);if(Qa({type:e,pinId:n,ref:h},d),p(u.id,d),a.length===1){let f=ut(_,e,n);if(h&&this._is_link_pin_merged(f))return;this._sim_set_unit_pin_ref(f,h)}}};this._set_core_shape=(t,e)=>{let n=this._node[t],i=this._core[t],s=this._node_selection[t],a=this._core_area[t];e==="circle"?(n.shape="circle",i.$element.style.borderRadius="50%",a.$element.style.borderRadius="50%",s.setProp("shape","circle")):(n.shape="rect",i.$element.style.borderRadius="0",a.$element.style.borderRadius="0",s.setProp("shape","rect"))};this._refresh_core_size=t=>{this._is_unit_component(t)?this._refresh_core_rect(t):this._refresh_core_circle(t)};this._refresh_core_shape=t=>{this._is_unit_component(t)?this._set_core_shape(t,"rect"):this._set_core_shape(t,"circle")};this._refresh_core_rect=t=>{let{width:e,height:n}=this._get_unit_component_graph_size(t),{x:i,y:s}=this._get_node_position(t);this._resize_node(t,e+2,n+2),this._resize_core(t,e+2,n+2),this._set_node_position(t,{x:i,y:s})};this._refresh_core_circle=t=>{let e=this._get_unit_radius(t,!0),n=this._get_unit_radius(t,!1),{x:i,y:s}=this._get_node_position(t),a=n-e,_=2*n,c=_;this._resize_node(t,_,c),this._resize_core(t,_,c),this._set_node_position(t,{x:i-a,y:s-a})};this._on_remove_unit_moment=t=>{let{unitId:e}=t;this._state_remove_unit(e)};this._on_move_unit_moment=t=>{let{id:e}=t;this._state_remove_unit(e)};this._on_graph_unit_remove_unit_moment=t=>{var w,T,C,P,k;let{setSpec:e,specs:n,parent:i}=this.$props,{bundle:s,path:a,unitId:_}=t,c=Wt((w=s.specs)!=null?w:{},n),p=a[0],u=s.unit.id,d=this._is_unit_component(p),m=Qt(n,this._spec,a),h=m,f=on(Wt(n,(T=s.specs)!=null?T:{}),u),b=pe((P=(C=m.component)==null?void 0:C.subComponents)!=null?P:{});if(this._is_spec_updater(a)){if(h=B(m),Pg({unitId:_},h),h.metadata=h.metadata||{},delete h.metadata.complexity,f){let M=Ao(m,_);qa({unitId:_},h.component),M?Tr({subComponentId:M,childId:_},h.component):Cr({childId:_},h.component)}e(m.id,h)}let g=!0;for(let M=a.length-1;M>=0;M--){let U=a.slice(0,M+1),L=Qt(n,this._spec,U);g=g&&(Gr(L)||__(L)===void 0)}let v=this._get_unit_spec(p),x=a.length===1?h:B(v),I=(k=a[1])!=null?k:_,E=s1(a);if(f&&g){let M=Qt(n,this._spec,a);if(pe(nt(M,["component","subComponents"],{}))===0){let L=this._get_sub_component(p),O=L.getSubComponent(I),R=Ao(v,I);R?(Tr({subComponentId:R,childId:I},x.component),a.length>1&&L.getSubComponent(R).pullParentRoot(O)):(Cr({childId:I},x.component),a.length>1&&L.pullRoot(O)),qa({unitId:I},x.component),delete x.render,a.length>1&&L.removeSubComponent(I),e(x.id,x)}if(d&&f&&g){let O=this._get_sub_component(p);for(let R=a.length-1;R>0;R--){let N=a[R];if(O=O.getSubComponent(N),!O)break}if(O){let R=O.$subComponent[_];R&&(this._in_component_control&&this._subgraph_unit_id!==a[0]&&O.removeRoot(R),this._subgraph_unit_id!==a[0]&&(O.removeSubComponent(_),O.pullRoot(R),R.disconnect()))}}}let D=this._is_unit_component(p);d&&!D?this._get_node_shape(p)==="rect"&&this._decomponentify_core(p,!0):!d&&D&&this._get_node_shape(p)==="circle"&&this._componentify_core(p,{},!0),this._refresh_core_icon_hidden(p),this._refresh_core_size(p),this._refresh_core_icon_size(p),this._start_graph_simulation(he)};this._spec_set_unit_spec_id=(t,e)=>{let n=this._get_unit_spec_id(t);e!==n&&(this._spec.units[t].id=e,this._unregister_unit(n),this._register_unit(e))};this._is_node_visible=t=>this._is_unit_node_id(t)?!0:this._is_link_pin_node_id(t)?this._is_link_pin_visible(t):this._is_merge_node_id(t)?!0:this._is_datum_node_id(t)?!!this._visible_data_node[t]:this._is_int_node_id(t)?!this._int_to_node[t]:!!this._is_ext_node_id(t);this._nodes_cm=t=>{let e=0,n=0,i=0;for(let _ in t)if(this._is_node_visible(_)){let{x:c,y:p}=this._get_node_position(_);e+=c,n+=p,i++}let s=e/i,a=n/i;return{x:s,y:a}};this._nodes_cm_position_map=t=>{let e={};if(!ie(t)){let n=this._nodes_cm(t),{x:i,y:s}=n;for(let a in t){let _=this._get_node_position(a),{x:c,y:p}=_,u={x:Math.floor(c-i),y:Math.floor(p-s)};e[a]=u}}return e};this._init_merge_spec_position=t=>this._nodes_cm(t);this._sim_collapse_merge=t=>{let e=At(t),n=this._spec_get_merge(t),i=this._merge_to_ref_unit[e],s=this._merge_to_ref_output[e];Yt(n,(a,_,c)=>{let p=ut(a,_,c);this._sim_add_link_pin_to_merge(p,e)})};this._on_add_merge_moment=t=>{let{mergeId:e,mergeSpec:n}=t,i=this._init_merge_spec_position(n);this._spec_add_merge(e,n),this._sim_add_merge(e,n,i),this._sim_collapse_merge(e)};this._on_remove_merge_moment=t=>{let{mergeId:e}=t;this.__state_remove_merge(e)};this._on_add_pin_to_merge_moment=t=>{let{mergeId:e,unitId:n,type:i,pinId:s}=t,a=At(e),_=ut(n,i,s);this._spec_add_link_pin_to_merge(e,n,i,s),this._sim_add_link_pin_to_merge(_,a)};this._on_remove_pin_from_merge_moment=t=>{let{mergeId:e,unitId:n,type:i,pinId:s}=t,a=At(e),_=ut(n,i,s);this._sim_remove_pin_from_merge(a,_),this.__spec_remove_pin_from_merge(e,n,i,s)};this._on_expose_pin_set=t=>{let{type:e,pinId:n,pinSpec:i}=t;this._spec_add_exposed_pin_set(e,n,i),this._sim_add_exposed_pin_set(e,n,i)};this._on_cover_pin_set=t=>{let{type:e,pinId:n,path:i}=t;i.length===0?this._state_remove_exposed_pin_set(e,n):this._on_graph_unit_cover_pin_set(t)};this._on_expose_pin=t=>{let{type:e,pinId:n,subPinId:i,subPinSpec:s}=t;this._state_add_exposed_pin(e,n,i,s,{})};this._on_cover_pin=t=>{let{type:e,pinId:n,subPinId:i}=t;this.__sim_remove_exposed_sub_pin(e,n,i),this.__spec_remove_exposed_sub_pin(e,n,i)};this._on_plug_pin=t=>{let{type:e,pinId:n,subPinId:i,subPinSpec:s}=t;this._sim_plug_exposed_pin(e,n,i,s),this._spec_plug_sub_pin(e,n,i,s)};this._on_unplug_pin=t=>{let{type:e,pinId:n,subPinId:i}=t;this._sim_unplug_exposed_pin(e,n,i),this._spec_unplug_sub_pin(e,n,i)};this._on_move_subgraph_into=t=>{let{graphId:e,nodeIds:n,nextIdMap:i,nextPinIdMap:s,nextMergePinId:a,nextPlugSpec:_,nextSubComponentParentMap:c,nextSubComponentChildrenMap:p,path:u}=t;if(u.length===0){let d=wn({}),m=this._jiggle_world_screen_center();this._paste_spec(d,m)}};this._on_reorder_sub_component=t=>{let{path:e}=t;e.length===0&&this._state_reorder_sub_component(t.childId,t.to)};this._on_move_sub_component_root=t=>{};this._on_move_subgraph_out_of=t=>{let{graphId:e,nodeIds:n,nextIdMap:i,nextPinIdMap:s,nextMergePinId:a,nextPlugSpec:_,nextSubComponentParentMap:c,nextSubComponentChildrenMap:p,path:u}=t;u.length};this._on_set_unit_pin_constant=t=>{};this._constant_input_ref_unlisten={};this._constant_input_ref_interval={};this._watch_constant_input_ref=(t,e,n,i)=>{tt(this._constant_input_ref_interval,[t,n],setInterval(()=>{this._tick_constant_input_ref(t,n,i)},1e3))};this._unwatch_constant_input_ref=(t,e,n)=>{let i=nt(this._constant_input_ref_interval,[t,n],null);i!==void 0&&(clearInterval(i),oe(this._constant_input_ref_interval,[t,n]))};this._tick_constant_input_ref=g0(this.$system,(t,e,n)=>{let i=this._pod.$refGlobalObj(n),s=Er(t,e);n.__.includes("U")&&i.$getUnitBundleSpec({},a=>{let _=`$${Ot(a)}`;this._spec_set_pin_data(s,_)})},100);this._on_set_unit_pin_data=t=>{};this._on_bulk_edit=t=>{let{actions:e,transaction:n}=t;for(let i of e)this._execute_action(i,!1)};this._on_graph_unit_set_pin_set_functional=t=>{let{setSpec:e}=this.$props,{type:n,pinId:i,functional:s,path:a}=t,_=a[0];if(this._is_spec_updater(a)){let c=this._get_unit_spec(_);Za({type:n,pinId:i,functional:s},c),e(c.id,c)}};this._on_graph_unit_move_subgraph_into=t=>{let{specs:e,setSpec:n}=this.$props,{graphId:i,nodeIds:s,path:a,graphBundle:_}=t,{spec:c}=_,p=a[0],{plug:u,unit:d}=s,m=Qt(e,this._spec,a);if(this._is_spec_updater(a)){let h=Qt(e,this._spec,a),f=B(h),b=this._get_unit_spec(p),g=B(this._get_graph_unit_unit_merges(p,t.graphId)),v=B(this._get_graph_unit_unit_plugs(p,t.graphId)),x={merges:g,plugs:v},I=this._make_graph_spec_interface(h);Ds(this._state_get_subgraph_graph_interface(p),Wt(I,{coverPinSet:(E,D,w)=>{oe(f,["units",i,E,D]),n(f.id,f),I.coverPinSet(E,D,w)}}),t.graphId,t,x,!1)}};this._on_graph_unit_move_subgraph_out_of=t=>{let{specs:e,setSpec:n,getSpec:i}=this.$props,{graphId:s,nodeIds:a,path:_,nextSpecId:c,graphBundle:{spec:p}}=t,u=_[0],{plug:d,unit:m}=a,h=Qt(e,this._spec,_);if(this._is_spec_updater(_)&&this._subgraph_unit_id!==s){let f=this._get_unit_spec(u),b=B(this._get_graph_unit_unit_merges(u,s)),g=B(this._get_graph_unit_unit_plugs(u,s)),v={merges:b,plugs:g};Ds(this._make_graph_spec_interface(p),this._state_get_subgraph_graph_interface(u),s,t,v,!0)}};this._on_graph_unit_move_sub_component_root=t=>{let{specs:e,setSpec:n}=this.$props,{path:i}=t,s=i[0];if(this._is_spec_updater(i)){let{parentId:a,children:_,slotMap:c}=t,p=B(Qt(e,this._spec,i));P4(t,p.component),n(p.id,p)}};this._on_graph_unit_reorder_sub_component=t=>{let{specs:e,setSpec:n}=this.$props,{path:i}=t,s=i[0];if(this._is_spec_updater(i)){let a=B(Qt(e,this._spec,i));z1(t,a.component),n(a.id,a)}};this._on_graph_unit_set_unit_size=t=>{let{specs:e,setSpec:n}=this.$props,{unitId:i,width:s,height:a,path:_}=t;if(this._is_spec_updater(_)){let c=B(Qt(e,this._spec,_));Ag({unitId:i,width:s,height:a},c),n(c.id,c)}};this._on_graph_unit_set_component_size=t=>{let{specs:e}=this.$props,{width:n,height:i,path:s}=t;if(this._is_spec_updater(s)){let a=Qt(e,this._spec,s);Mg({width:n,height:i},a)}};this._on_graph_unit_set_sub_component_size=t=>{let{specs:e}=this.$props,{unitId:n,width:i,height:s,path:a}=t;if(this._is_spec_updater(a)){let _=Qt(e,this._spec,a);e_({unitId:n,width:i,height:s},_)}};this._state_graph_remove_unit_pin=(t,e,n)=>{this._sim_graph_remove_unit_pin(t,e,n),this._spec_graph_remove_unit_pin(t,e,n)};this._sim_graph_remove_unit_pin=(t,e,n)=>{let{specs:i}=this.$props,s=ut(t,e,n);this._pin_to_merge[s]&&this._state_remove_pin_or_merge(s),this._pin_node[s]&&this._sim_graph_unit_remove_pin(s)};this._on_graph_unit_pin_data_moment=t=>{let{unitId:e,type:n,pinId:i}=t,s=ut(e,n,i);this._is_link_pin_ref(s)?this._on_graph_unit_ref_link_pin_data_moment(t):this._on_graph_unit_link_pin_data_moment(t)};this._on_graph_unit_link_pin_data_moment=t=>{let{unitId:e,pinId:n,type:i,data:s}=t,a=ut(e,i,n);this._graph_debug_set_pin_value(a,s)};this._unit_ref_pin_global_ref={};this._on_graph_unit_ref_link_pin_data_moment=t=>{let e=B(t),{unitId:n,type:i,pinId:s}=t,a=ut(n,i,s);this._unit_ref_pin_global_ref[a]=t.data,this._is_input_pin_node_id(a)&&this._spec_is_link_pin_constant(n,i,s)&&(this._tick_constant_input_ref(n,s,t.data),this._watch_constant_input_ref(n,"input",s,t.data)),typeof e.data=="string"||(e.data="null"),this._on_graph_unit_link_pin_data_moment(e)};this._on_graph_unit_ref_link_pin_drop_moment=t=>{let{unitId:e,type:n,pinId:i}=t,s=ut(e,n,i);delete this._unit_ref_pin_global_ref[s],this._on_graph_unit_link_pin_drop_moment(t)};this._on_graph_unit_err_moment=t=>{let{unitId:e,err:n}=t;this._graph_debug_set_unit_err(e,n)};this._on_graph_unit_take_err_moment=t=>{let{unitId:e}=t;this._graph_debug_take_err(e)};this._graph_debug_take_err=t=>{this._has_node(t)&&(delete this._err[t],this._reset_core_border_color(t),this._sim_remove_unit_err(t))};this._on_graph_unit_append_child_moment=t=>{};this._on_graph_unit_remove_child_at_moment=t=>{};this._on_graph_unit_insert_child_at_moment=t=>{};this._for_each_plug=(t,e,n)=>{let i=this._get_pin(t,e),{plug:s}=i;for(let a in s)n(a)};this._ignore_sub_pin_data_update={input:{},output:{}};this._sim_set_pin_set_data=(t,e,n,i={})=>{this._unit_datum[t][e]=n,this._is_pin_ref(t,e)||this._for_each_plug(t,e,s=>{if(!this._ignore_sub_pin_data_update[t][e]||!this._ignore_sub_pin_data_update[t][e][s]){let a=i[s];this._sim_set_plug_datum(t,e,s,n,a)}}),this._set_exposed_pin_set_color(t,e,this._theme.data)};this._sim_remove_plug_or_pin=(t,e,n)=>{this._spec_get_pin_plug_count(t,e)===1?this._sim_remove_exposed_pin_set(t,e):this.__sim_remove_exposed_sub_pin(t,e,n)};this._sim_remove_pin_data=(t,e)=>{this._is_pin_ref(t,e)||this._for_each_plug(t,e,n=>{let i=Kt(t,e,n);this._plug_to_datum[i]&&this._sim_remove_plug_datum(t,e,n)}),delete this._unit_datum[t][e],this._reset_exposed_pin_set_color(t,e)};this._invalid_datum_node_id={};this._invalid_datum_data={};this._sim_set_datum_value=(t,e,n,i)=>{let{classes:s}=this.$system,{specs:a}=this.$props,_=this._datum_tree[t],c=this._datum[e],p=this._get_node_position(e),u=_.type==="unit",d=Th(i),m=d.type==="unit";if(m&&!u||!m&&u)this._sim_remove_datum(e),this._sim_add_datum_node(t,i,p),this._sim_add_pin_datum_link(e,n);else if(m){let{value:h}=d,f=Ni(h,a,s),b=c;b.setProp("id",f),b.dispatchEvent("datumchange",{data:pt(f)}),this._datum_tree[t]=d,this._refresh_class_literal_datum_node_selection(e)}else if(t!==this._edit_datum_id){let h=c;h.setProp("data",d),h.dispatchEvent("datumchange",{data:d}),this._datum_tree[t]=d}this._refresh_datum_visible(e)};this.__graph_debug_set_pin_data=(t,e,n)=>{let{datumId:i}=Ae(e);this._sim_set_datum_value(i,e,t,n),this._mem_set_pin_datum(t,i),this._refresh_pin_color(t)};this._graph_debug_set_pin_value=(t,e)=>{let n=Th(e);this._graph_debug_set_pin_data_tree(t,n)};this._graph_debug_set_pin_data_tree=(t,e)=>{let{parent:n}=this.$props,i=this._get_pin_anchor_node_id(t);if(!this._has_node(i))return;let s=this._pin_to_datum[t],a,{type:_}=it(t);if(s){let{datumId:c}=Ae(s);a=c,this._visible_data_node[s]?this.__graph_debug_set_pin_data(t,s,e.value):(this._invalid_datum_node_id[s]=!0,this._invalid_datum_data[s]=e.value)}else{a=this._new_datum_id();let c=Xe(a),p=this._get_pin_anchor_node_id(t),u=e.type==="unit";if(this._datum_tree[a]=e,this._is_pin_node_id(p)&&(!this._is_pin_node_ref(p)||u)){let d=this._predict_pin_datum_initial_position(p);if(this._sim_add_datum_node(a,e.value,d),this._sim_add_pin_datum_link(c,t),this._is_merge_node_id(p)){let{mergeId:m}=It(p);this._for_each_merge_pin(m,(h,f,b)=>{let g=ut(h,f,b);this._refresh_pin_datum_visible(g)}),this._has_node(p)&&this._refresh_merge_pin_color(p)}}this._mem_set_pin_datum(t,a)}_==="input"&&this._is_link_pin_constant(t)&&this._spec_set_pin_data(t,e.value)};this._on_graph_unit_link_pin_drop_moment=t=>{let{unitId:e,type:n,pinId:i}=t,s=ut(e,n,i);this._graph_debug_drop_pin_data(s)};this._graph_debug_drop_pin_data=t=>{let e=this._get_pin_anchor_node_id(t);if(!this._has_node(e))return;let n=this._pin_to_datum[t];n&&this._sim_remove_datum(n),this._mem_remove_pin_datum_tree_if(t)};this._mem_remove_pin_datum_tree_if=t=>{this._pin_datum_tree[t]&&this._mem_remove_pin_datum_tree(t)};this._on_graph_unit_merge_data_moment=t=>{let{mergeId:e,data:n}=t,i=At(e);this._graph_debug_set_pin_value(i,n)};this._on_graph_unit_merge_drop_moment=t=>{let{mergeId:e}=t,n=At(e);this._graph_debug_drop_pin_data(n)};this._on_graph_moment=t=>{this._debug_buffer.push(t),this._debug_interval&&this._debug_buffer.length>IM&&this._flush_debugger(),this._debug_interval===null&&this._enabled()&&this._start_debugger()};this._on_graph_unit_link_pin_invalid_moment=()=>{};this._on_graph_unit_merge_invalid_moment=()=>{};this._on_graph_unit_set_pin_set_id=t=>{let{parent:e,specs:n,setSpec:i}=this.$props,{type:s,pinId:a,nextPinId:_,path:c}=t,p=c[0],u=this._get_unit_spec(p),d=ut(p,s,a),m,h;if(this._is_spec_updater(c)){let f=B(Qt(n,this._spec,c)),b=this.__get_unit_pin_spec(p,s,a),g,v,x,I,E;if(c.length===1){g=this._get_anchor_node_position(d),v=this._pin_to_merge[d],h=v?this._get_merge(v):{},x=v?this._get_anchor_node_position(v):dn,v?I=this._spec_get_pin_node_plug_spec(s,v):I=this._spec_get_pin_node_plug_spec(s,d),E=this._get_pin_datum_value(d),this._state_graph_unit_remove_pin(d,p,s,a);let D=nt(this._spec,["units",p,s,a],void 0);oe(this._spec,["units",p,s,a]),tt(this._spec,["units",p,s,_],D)}if(F1({type:s,pinId:a,newId:_},f),c.length===1){let D=ut(p,s,_);if(this._state_graph_unit_add_pin(p,s,_,b,g),E&&this._state_set_unit_pin_data(D,E),v&&({mergeId:m}=It(v),this.__spec_has_merge(m)?this._state_merge_link_pin_merge_pin(D,v):(oe(h,[p,s,a]),tt(h,[p,s,_],!0),this._state_add_merge(m,h,x),this._sim_collapse_merge(m))),I){let{type:w,pinId:T,subPinId:C,subPinSpec:P}=I;P.unitId&&P.pinId&&(P={type:w!=null?w:s,unitId:P.unitId,pinId:_}),this._state_plug_exposed_pin(w,T,C,P)}}i(f.id,f)}if(c.length===2){let f=B(u),b=c[1],g=A1(u,b,s,a),v=nt(u,["units",b,s,a],{});if(oe(f,["units",b,s,a]),tt(f,["units",b,s,_],v),g){let x=f.merges[g];oe(x,[b,s,a]),tt(x,[b,s,_],!0),Ya({mergeId:g},f),vs({mergeId:g,mergeSpec:x},f)}i(u.id,f)}};this._on_graph_unit_set_unit_pin_constant=t=>{let{setSpec:e,specs:n}=this.$props,{unitId:i,type:s,pinId:a,constant:_,data:c,path:p}=t;if(this._is_spec_updater(p)){let u=B(Qt(n,this._spec,p));t_({unitId:i,type:s,pinId:a,constant:_},u),t&&_&&Mr({unitId:i,type:s,pinId:a,data:c},u),s==="input"&&(_||Cg({unitId:i,type:s,pinId:a},u)),e(u.id,u)}};this._on_graph_unit_set_unit_pin_ignored=t=>{let{setSpec:e,specs:n}=this.$props,{unitId:i,type:s,pinId:a,ignored:_,path:c}=t;if(this._is_spec_updater(c)){let p=Qt(n,this._spec,c);B1({unitId:i,type:s,pinId:a,ignored:_},p),e(p.id,p)}};this._on_graph_unit_set_unit_pin_data=t=>{let{setSpec:e,specs:n}=this.$props,{unitId:i,type:s,pinId:a,data:_,path:c}=t;if(this._is_spec_updater(c)){let p=Qt(n,this._spec,c);nt(p,["units",i,s,a,"constant"],!1)&&(Mr({unitId:i,type:s,pinId:a,data:_},p),e(p.id,p))}};this._on_graph_unit_bulk_edit=t=>{let{parent:e}=this.$props,{actions:n,transaction:i,path:s}=t;i||b4(n,mi({coverPinSet:a=>{this._on_graph_unit_cover_pin_set(_t(S({},a),{path:s}))},exposePinSet:a=>{this._on_graph_unit_expose_pin_set(a)},addUnitSpec:a=>{this._on_graph_unit_add_unit_moment(a)},removeUnit:a=>{this._on_graph_unit_remove_unit_moment(a)},addMerge:a=>{this._on_graph_unit_add_merge_moment(a)},removeMerge:a=>{this._on_graph_unit_remove_merge_moment(a)},removeUnitPinData:a=>{this._on_graph_unit_remove_unit_pin_data_moment(_t(S({},a),{path:s}))},addPinToMerge:a=>{this._on_graph_unit_add_pin_to_merge_moment(_t(S({},a),{path:s}))},removePinData:a=>{},takeInput:a=>{},moveSubgraphInto:a=>{this._on_graph_unit_move_subgraph_into(a)},moveSubgraphOutOf:a=>{this._on_graph_unit_move_subgraph_out_of(a)},coverPin:a=>{this._on_graph_unit_cover_pin(a)},exposePin:a=>{throw new $},setSubComponentSize:a=>{this._on_graph_unit_set_sub_component_size(_t(S({},a),{path:s}))},setUnitSize:a=>{this._on_graph_unit_set_unit_size(_t(S({},a),{path:s}))},setComponentSize:a=>{this._on_graph_unit_set_component_size(a)},moveSubComponentRoot:a=>{this._on_graph_unit_move_sub_component_root(_t(S({},a),{path:s}))},removePinFromMerge:a=>{this._on_graph_unit_remove_pin_from_merge_moment(_t(S({},a),{path:s}))}},(a,_)=>c=>{c.path=s,_(c)}),()=>{throw new ei})};this._graph_moment_handler={input:{data:this._on_graph_unit_link_pin_data_moment,drop:this._on_graph_unit_link_pin_drop_moment,invalid:this._on_graph_unit_link_pin_invalid_moment},output:{data:this._on_graph_unit_link_pin_data_moment,drop:this._on_graph_unit_link_pin_drop_moment,invalid:this._on_graph_unit_link_pin_invalid_moment},ref_input:{data:this._on_graph_unit_ref_link_pin_data_moment,drop:this._on_graph_unit_ref_link_pin_drop_moment,invalid:this._on_graph_unit_link_pin_invalid_moment},ref_output:{data:this._on_graph_unit_ref_link_pin_data_moment,drop:this._on_graph_unit_ref_link_pin_drop_moment,invalid:this._on_graph_unit_link_pin_invalid_moment},merge:{data:this._on_graph_unit_merge_data_moment,drop:this._on_graph_unit_merge_drop_moment,invalid:this._on_graph_unit_merge_invalid_moment},unit:{err:this._on_graph_unit_err_moment,take_err:this._on_graph_unit_take_err_moment,catch_err:this._on_graph_unit_take_err_moment,append_child:this._on_graph_unit_append_child_moment,remove_child:this._on_graph_unit_remove_child_at_moment,insert_child:this._on_graph_unit_insert_child_at_moment},graph:{fork:this._on_graph_unit_fork_moment,add_merge:this._on_graph_unit_add_merge_moment,remove_merge:this._on_graph_unit_remove_merge_moment,plug_pin:this._on_graph_unit_plug_pin_moment,unplug_pin:this._on_graph_unit_unplug_pin_moment,add_unit:this._on_graph_unit_add_unit_moment,clone_unit:this._on_graph_unit_clone_unit_moment,remove_unit:this._on_graph_unit_remove_unit_moment,expose_pin:this._on_graph_unit_expose_pin,cover_pin:this._on_graph_unit_cover_pin,expose_pin_set:this._on_graph_unit_expose_pin_set,cover_pin_set:this._on_graph_unit_cover_pin_set,add_pin_to_merge:this._on_graph_unit_add_pin_to_merge_moment,remove_pin_from_merge:this._on_graph_unit_remove_pin_from_merge_moment,set_pin_set_functional:this._on_graph_unit_set_pin_set_functional,move_subgraph_into:this._on_graph_unit_move_subgraph_into,move_subgraph_out_of:this._on_graph_unit_move_subgraph_out_of,move_sub_component_root:this._on_graph_unit_move_sub_component_root,reorder_sub_component:this._on_graph_unit_reorder_sub_component,set_unit_id:this._on_graph_unit_set_unit_id,set_pin_set_id:this._on_graph_unit_set_pin_set_id,set_unit_pin_constant:this._on_graph_unit_set_unit_pin_constant,set_unit_pin_ignored:this._on_graph_unit_set_unit_pin_ignored,set_unit_pin_data:this._on_graph_unit_set_unit_pin_data,remove_unit_pin_data:this._on_graph_unit_remove_unit_pin_data_moment,bulk_edit:this._on_graph_unit_bulk_edit}};this._debug_moment=t=>{let{event:e,type:n,data:i}=t;this._graph_moment_handler[n][e](i)};this._on_data_moment=t=>{let{type:e,pinId:n,data:i}=t;this._is_pin_ref(e,n)&&(i="null"),this._sim_set_pin_set_data(e,n,i)};this._on_drop_moment=t=>{let{type:e,pinId:n}=t;this._sim_remove_pin_data(e,n)};this._set_link_pin_invalid=t=>{let{}=Wr(t);this._pin_invalid_set.add(t)};this._on_invalid_moment=t=>{let{type:e,pinId:n,data:i}=t};this._unit_moment_handler={input:{data:this._on_data_moment,drop:this._on_drop_moment,invalid:this._on_invalid_moment},output:{data:this._on_data_moment,drop:this._on_drop_moment,invalid:this._on_invalid_moment},ref_input:{data:this._on_data_moment,drop:this._on_drop_moment,invalid:this._on_invalid_moment},ref_output:{data:this._on_data_moment,drop:this._on_drop_moment,invalid:this._on_invalid_moment},merge:{data:zt,drop:zt,invalid:zt},unit:{set_input:zt,set_output:zt,remove_input:zt,remove_output:zt},graph:{fork:this._on_fork_moment,add_unit:this._on_add_unit_moment,clone_unit:this._on_clone_unit_moment,remove_unit:this._on_remove_unit_moment,move_unit:this._on_move_unit_moment,add_merge:this._on_add_merge_moment,remove_merge:this._on_remove_merge_moment,add_pin_to_merge:this._on_add_pin_to_merge_moment,remove_pin_from_merge:this._on_remove_pin_from_merge_moment,expose_pin_set:this._on_expose_pin_set,cover_pin_set:this._on_cover_pin_set,expose_pin:this._on_expose_pin,cover_pin:this._on_cover_pin,plug_pin:this._on_plug_pin,unplug_pin:this._on_unplug_pin,set_pin_set_functional:this._on_set_pin_set_functional,move_subgraph_into:this._on_move_subgraph_into,move_subgraph_out_of:this._on_move_subgraph_out_of,reorder_sub_component:this._on_reorder_sub_component,move_sub_component_root:this._on_move_sub_component_root,set_unit_pin_constant:this._on_set_unit_pin_constant,set_unit_pin_data:this._on_set_unit_pin_data,bulk_edit:this._on_bulk_edit}};this._on_moment=t=>{var s,a,_;let{event:e,type:n,data:i}=t;((_=(a=(s=t==null?void 0:t.data)==null?void 0:s.path)==null?void 0:a.length)!=null?_:0)>0?this._on_graph_moment(t):this._unit_moment_handler[n][e](i)};this._get_color=()=>{let{$color:t}=this.$context,{style:e={}}=this.$props,{color:n=t}=e;return n};this._refresh_minimap_color=()=>{if(this._minimap){let t=this._get_color();this._minimap.$element.style.color=t,this._minimap_screen&&(this._minimap_screen.$element.style.stroke=this._theme.link)}};this._background_color=()=>{let{$theme:t}=this.$context;return Qo(xo(t),.75)};this._refresh_color=()=>{let{parent:t}=this.$props,e=this._get_color();this._refresh_theme();for(let n in this._node)this._refresh_node_color(n);for(let n in this._node_selection)this._refresh_selection_color(n);for(let n in this._subgraph_cache){let i=this._subgraph_cache[n];ft(i,{color:e})}if(this._enabled()&&this._refresh_minimap_color(),this._multiselect_area_svg_rect.$element.style.stroke=this._theme.selected,!t&&this._transcend){let n=this._background_color();ft(this._transcend,{backgroundColor:n})}};this._enabled=()=>{let{disabled:t}=this.$props;if(t===void 0){let{$disabled:e}=this.$context;return!e}else return!t};this._refresh_enabled=()=>{let{animate:t}=this.$props;this._enabled()?this._disabled&&(this._enable(),this._show_transcend(t)):this._disabled||(this._disable(),this._hide_transcend(t))};let{parent:i,style:s={},component:a,disabled:_=!0,frameOut:c,fullwindow:p,zoom:u,animate:d,graph:m,frame:h,specs:f,registry:b,typeCache:g}=this.$props;a=a!=null?a:mh({},this.$system),this._pod=m,this._component=a,this._frame_out=c,f=f||Wt(this.$system.specs,{}),this._registry=b!=null?b:this.$system,this._zoom=u!=null?u:hh,this._frame=h,this._disabled=_,this.$props.specs=(L=this.$props.specs)!=null?L:f,this.$props.getSpec=(O=this.$props.getSpec)!=null?O:this._fallback_get_spec,this.$props.hasSpec=(R=this.$props.hasSpec)!=null?R:this._fallback_has_spec,this.$props.setSpec=(N=this.$props.setSpec)!=null?N:this._fallback_set_spec,this.$props.deleteSpec=(z=this.$props.deleteSpec)!=null?z:this._fallback_delete_spec,this.$props.forkSpec=(F=this.$props.forkSpec)!=null?F:this._fallback_fork_spec,this.$props.injectSpecs=(V=this.$props.injectSpecs)!=null?V:this._fallback_inject_specs,this.$props.emptySpec=(j=this.$props.emptySpec)!=null?j:this._fallback_empty_spec,this.$props.newSpec=(H=this.$props.newSpec)!=null?H:this._fallback_new_spec,this.$props.registerUnit=(K=this.$props.registerUnit)!=null?K:this._fallback_register_unit,this.$props.unregisterUnit=(q=this.$props.unregisterUnit)!=null?q:this._fallback_unregister_unit;let v=new rs({className:"graph-zoom",style:{transition:An(d,"opacity")},width:0,height:0,zoom:this._zoom},this.$system);this._zoom_comp=v;let x=new rs({className:"graph-zoom-alt",style:{pointerEvents:"none"},width:0,height:0,zoom:this._zoom},this.$system);this._zoom_comp_alt=x;let I=new Dn({className:"graph-area-select-rect",width:0,height:0,style:{pointerEvents:"none",fill:"none",strokeDasharray:"6",strokeWidth:"1",stroke:this._theme.selected}},this.$system);this._multiselect_area_svg_rect=I;let E=new fn({className:"graph-area-select-svg",width:0,height:0,style:{display:"none",width:"0",height:"0",position:"absolute",top:"0"}},this.$system);E.appendChild(I),this._multiselect_area_svg=E,this._simulation=new os({alpha:.25,alphaDecay:FE,alphaTarget:0,n:6,velocityDecay:.1,force:this._force}),this._simulation.nodes(this._node),this._simulation.links(this._link),this._simulation.addListener("tick",this._on_simulation_tick),this._simulation.addListener("end",this._on_simulation_end);let D=new st({className:"graph-subgraph",style:{position:"absolute",top:"0",left:"0",pointerEvents:"none"}},this.$system);this._subgraph=D;let w=this._create_layout_layer({className:"graph-layout-root",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}});this._layout_root=w;let T=new st({className:"graph-layout",style:{pointerEvents:"none",userSelect:"none"}},this.$system);this._layout_comp=T,T.registerParentRoot(w.layer);let C=new st({className:"graph-main",style:{position:"relative",top:"0",left:"0",width:"100%",height:"100%","-webkit-touch-callout":"none"}},this.$system);C.addEventListeners([le(this._on_pointer_down),Je(this._on_pointer_move),ue(this._on_pointer_up),Ye(this._on_pointer_enter),Ee(this._on_pointer_leave),qn(this._on_pointer_cancel),ae({onClick:this._on_click,onClickCancel:this._on_click_cancel,onDoubleClick:this._on_double_click,onLongClick:this._on_long_click,onLongPress:this._on_long_press,onLongClickCancel:this._on_long_click_cancel,onClickHold:this._on_click_hold}),Dl((Q,at)=>{at.preventDefault();let{clientX:Dt,clientY:Et}=Q,{dataTransfer:Ct}=at;if(Ct){let{items:Pt,files:ot}=Ct;if(Pt)for(let X=0;X<Pt.length;X++){let rt=Pt[X];if(rt.kind==="file"){let et=rt.getAsFile();if(et.name.endsWith(".textClipping"))return;this._paste_file(et)}else rt.kind==="string"?rt.type==="text/plain"&&rt.getAsString(et=>{let ct=this._screen_to_world(Dt,Et);this._paste_text(et,ct)}):rt.kind==="text/uri-list"||rt.kind}else for(let X=0;X<ot.length;X++){let rt=Pt[X].getAsFile();this._paste_file(rt)}}})]);let P=Q=>Q===this._zoom_comp._svg.$element||Q instanceof HTMLElement&&(Q.classList.contains("datum_overlay")||Q.classList.contains("core-overlay")||Q.classList.contains("core-area")||Q.classList.contains("core-content")||Q.classList.contains("pin")||Q.classList.contains("plug")),k=Q=>{let{target:at}=Q;if(P(at)&&this._core_component_unlocked_count===0)return Q.preventDefault(),!1};C.$element.addEventListener("mousedown",k),C.$element.addEventListener("touchdown",k),C.$element.addEventListener("touchstart",Q=>{let{target:at}=Q;if(P(at))return Q.preventDefault(),!1}),C.$element.setAttribute("dropTarget","true"),C.registerParentRoot(v),C.registerParentRoot(x),C.registerParentRoot(T),C.registerParentRoot(E),C.$element.ondragover=Q=>{Q.preventDefault()},this._main=C;let M=new st({className:"graph-foreground",style:{pointerEvents:"none",position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}},this.$system);this._foreground=M;let U=new st({className:"graph",style:S(S({},dv),s),tabIndex:0},this.$system);U.addEventListener(ra(this._on_wheel)),U.addEventListener(ra(this._on_scroll)),U.addEventListener(dh(this._on_focus)),U.addEventListener(uh(this._on_blur)),U.registerParentRoot(C),U.registerParentRoot(D),this._graph=U,this._graph.$ref.foreground=this._foreground,n=n||yt(e),this.$element=n,this.$slot=U.$slot,this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({graph:U,subgraph:D,sub_between:M,main:C}),this.registerRoot(U),this.registerRoot(M),p&&this._enter_all_fullwindow(!1)}_enable_minimap(){let{$width:t,$height:e}=this.$context;if(this._minimap&&!this._unlisten_minimap){this._unlisten_minimap=this._minimap.addEventListeners([ra(this._on_minimap_wheel),le(this._on_minimap_pointer_down),Je(this._on_minimap_pointer_move),ue(this._on_minimap_pointer_up),Ye(this._on_minimap_pointer_enter),Ee(this._on_minimap_pointer_leave),p0(this._on_minimap_drag_start)]),this._tree_layout?this._set_minimap_to_layout():this._set_minimap_to_graph();let n=new Dn({x:this._zoom.x,y:this._zoom.y,width:t/this._zoom.z,height:e/this._zoom.z,style:{display:this._unit_count>0?"block":"none",fill:"none",stroke:this._theme.link}},this.$system);this._minimap_screen=n,this._minimap.setChildren([n]),this._mode==="add"&&this._enable_minimap_drag_and_drop(),this._refresh_minimap_color(),this._tick_minimap()}}_disable_minimap(){this._minimap&&this._unlisten_minimap&&(this._unlisten_minimap(),this._unlisten_minimap=void 0,this._minimap.setChildren([]),this._tick_minimap())}onDestroy(){this._subgraph_graph&&this._subgraph_graph.destroy(),this._disable(),this._pause_debugger(),this._clear_debugger(),this._stop_graph_simulation(),this._plunk_pod()}onMount(){let{$width:t,$height:e,$disabled:n}=this.$context,{parent:i,animate:s}=this.$props;this._disable_control_lock(),this._control=Zi(this,"control"),this._enable_control_lock(),this._search=Zi(this,"search"),this._cabinet=Zi(this,"cabinet"),this._minimap=Zi(this,"minimap"),this._modes=Zi(this,"modes"),this._import=Zi(this,"import"),this._export=Zi(this,"export");let a=Zi(this,"transcend");this._transcend&&(this._disable_transcend(),this._hide_transcend(s)),this._transcend=a,this._transcend&&this._enabled()&&(this._subgraph_unit_id||this._enable_transcend()),this._context_unlisten=Be(this.$context,[Un(this._on_context_resize),mt("enabled",this._on_context_enabled),mt("disabled",this._on_context_disabled),mt("themechanged",this._on_context_theme_changed),mt("colorchanged",this._on_context_color_changed)]),this._init||t!==0&&e!==0&&(this._resize(t,e),this._width=t,this._height=e),i||this._transcend&&(n?this._transcend.hide(this._init):this._transcend.show(this._init)),this._init||(this._init=!0,this._reset_spec()),this._refresh_theme(),this._refresh_color(),this._refresh_enabled(),this._start_graph_simulation(he)}onUnmount(){this._context_unlisten(),this._disable(),this._stop_graph_simulation(),this._pause_debugger(),this._control=null,this._search=null,this._minimap=null,this._modes=null,this._transcend=null}_get_component_spec(){let{component:t={}}=this._spec;return t}_get_int_pin_anchor_node_id(t){let{type:e,pinId:n,subPinId:i}=lo(t);return this._get_exposed_pin_internal_node_id(e,n,i)}_reset(){var p,u;let{setSpec:t}=this.$props;if(this._prevent_next_reset){this._prevent_next_reset=!1;return}let e=this._spec;this._cancel_fullwindow_animation(),this._zoom_comp.removeChildren(),this._zoom_comp_alt.removeChildren(),this._layout_root.children.removeChildren(),this._layout_root.layers.removeChildren(),this._subgraph.removeChildren(),this._unit_datum={input:{},output:{}},this._subgraph_cache={},this._layout_core={},this._layout_layer={},this._cancel_node_long_click=!1,this._layout_scroll_animation=void 0,this._node_comp={},this._node_content={},this._node_selection={},this._link_comp={},this._link_base={},this._link_base_area={},this._link_base_text={},this._link_text={},this._link_text_value={},this._link_text_path={},this._link_marker_end={},this._link_marker_start={},this._spec_link_pin_ignored={},this._node={},this._node_fixed={},this._node_draggable={},this._node_type={},this._link_type={},this._selection_opt={},this._link={},this._pin_link={},this._exposed_link={},this._data_link={},this._visible_data_link={},this._type_link={},this._collapse_link={},this._search_link={},this._ignored_link={},this._err_link={},this._unit_node={},this._pin_node={},this._normal_node={},this._collapse_node={},this._exposed_node={},this._type_node={},this._search_node={},this._ignored_node={},this._exposed_ext_node={},this._exposed_int_node={},this._visible_data_node={},this._hidden_data_node={},this._linked_data_node={},this._unlinked_data_node={},this._visible_linked_data_node={},this._visible_unlinked_data_node={},this._data_node={},this._err_node={},this._link_pin_ref_set=new Set,this._link_pin_input_set=new Set,this._link_pin_output_set=new Set,this._layer_node=[],this._layer_node[he]={},this._layer_node[Rn]=this._normal_node,this._layer_node[Qs]=this._collapse_node,this._layer_node[N0]=this._search_node,this._layer_node[tr]=this._ignored_node,this._layer_node[Nn]=this._exposed_node,this._layer_node[di]=this._visible_linked_data_node,this._layer_node[xa]=this._visible_unlinked_data_node,this._layer_node[er]=this._err_node,this._layer_node[nr]=this._type_node,this._layer_link=[],this._layer_link[he]=this._none_link,this._layer_link[Rn]=this._pin_link,this._layer_link[Qs]=this._collapse_link,this._layer_link[N0]=this._search_link,this._layer_link[tr]=this._ignored_link,this._layer_link[Nn]=this._exposed_link,this._layer_link[di]=this._visible_data_link,this._layer_link[er]=this._err_link,this._layer_link[nr]=this._type_link,this._err={},this._unit_to_unit={},this._unit_count=0,this._unit_component_count=0,this._unit_active_pin_count={},this._component_nodes={},this._pressed_node_pointer_count=0,this._node_pressed_count={},this._pressed_node_count=0,this._pressed_node_id_pointer_id={},this._pointer_id_pressed_node_id={},this._pointer_id_hover_link_id={},this._link_id_hover_pointer_id={},this._drag_count=0,this._drag_node_id={},this._drag_node_pointer_id={},this._static=!1,this._static_position={},this._static_count={},this._static_subgraph_anchor={},this._static_subgraph_anchor_count={},this._node_charge={},this._hover_node_count=0,this._hover_node_pointer_count={},this._hover_node_id={},this._hover_node_id_pointer_id={},this._pointer_id_hover_node_id={},this._selected_node_count=0,this._selected_pin_count=0,this._selected_node_id={},this._selected_component_count=0,this._selected_component={},this._compatible_node_id={},this._compatible_node_count=0,this._resize_node_id_pointer_id={},this._resize_pointer_id_node_id={},this._fullwindow_component_set=new Set,this._fullwindow_component_ids=[],this._datum_tree={},this._datum_to_pin={},this._pin_to_datum={},this._plug_to_datum={},this._datum_to_plug={},this._pin_datum_tree={},this._pin_to_int=ve({},{}),this._pin_to_ext=ve({},{}),this._pin_to_merge={},this._merge_to_pin={},this._merge_to_input={},this._merge_to_output={},this._merge_pin_count={},this._merge_input_count={},this._merge_output_count={},this._merge_active_output_count={},this._merge_active_input_count={},this._merge_ref={},this._merge_to_ref_unit={},this._merge_to_ref_output={},this._ref_unit_to_merge={},this._ref_output_to_merge={},this._ref_output_pin_icon={},this._node_graph={},this._node_to_subgraph={},this._subgraph_to_node={},this._node_layer={},this._link_layer={},this._layout_node={},this._layout_target_node={},this._layout_core_abort_animation={},this._layout_core_animating=new Set,this._layout_core_children_counter={},this._layout_path=[],this._layout_component_count={},this._layout_sub_component_parent={},this._layout_drag_node={},this._layout_drag_index={},this._layout_drag_direction={},this._layout_drag_start_scroll_top={},this._layout_drag_start_scroll_height={},this._layout_drag_swap={},this._layout_drag_swap_index={},this._layout_drag_start_children={},this._layout_drag_start_position={},this._layout_drag_init_position={},this._pointer_down={},this._pointer_down_position={},this._pointer_down_count=0,this._pointer_position={},this._pointer_down_move_count={},this._long_press_pointer=new Set,this._long_press_count=0,this._long_press_screen_position=dn,this._long_press_background_pointer=new Set,this._long_press_background_count=0,this._collapsing=!1,this._collapse_pointer_to_unit={},this._collapse_world_position=dn,this._simulation.nodes(this._node),this._simulation.links(this._link),this._core={},this._core_content={},this._core_area={},this._core_icon={},this._core_name={},this._core_description={},this._core_component_overlay={},this._core_component_resize={},this._core_component_frame={},this._core_component_self={},this._core_component_max_width=[],this._core_component_max_height=[],this._core_component_max_width_id=[],this._core_component_max_height_id=[],this._core_layout_core_unlisten={},this._core_component_frame_context={},this._core_component_unlocked={},this._core_component_unlocked_count=0,this._pin={},this._pin_name={},this._pin_link_start_marker={},this._pin_link_end_marker={},this._link_pin_constant_count=0,this._link_pin_memory_count=0,this._exposed_pin_set_count=0,this._exposed_pin_plugged_count=0,this._exposed_pin_unplugged_count=0,this._exposed_link_start_marker={},this._exposed_link_end_marker={},this._int_to_node={},this._ext_to_node={},this._exposed_ext_unplugged={},this._exposed_int_unplugged={},this._ext_pin_name={},this._merge={},this._merge_input={},this._merge_output={},this._datum_container={},this._datum_area={},this._datum={},this._datum_overlay={},this._datum_unlisten={},this._err_comp={},this._err_area={},this._err_overlay={},this._edit_datum_id=null,this._edit_datum_node_id=null,this._edit_datum_path=null,this._edit_datum_commited=!1,this._type_container={},this._type={},this._node_unlisten={},this._link_unlisten={};let{units:n={},merges:i={},data:s,inputs:a={},outputs:_={},metadata:c={}}=e;this._simulation_prevent_restart=!0;for(let d in s){let m=s[d],h,f;typeof m=="string"?(h=m,f=this._init_random_datum_position()):(h=m.value,f=(u=(p=m==null?void 0:m.metadata)==null?void 0:p.position)!=null?u:this._init_random_datum_position()),this._add_datum(d,h,f)}this._unit_to_unit={};for(let d in n){let m=n[d],{metadata:h={}}=m,{position:f}=h,b=this._jiggle_world_screen_center();if(f&&(b.x+=f.x,b.y+=f.y),this._sim_add_unit_core(d,m,b),this._spec_mirror_unit(d),this._is_unit_component(d)){let v=dn,x=this._spec_get_sub_component_parent_id(d);if(this._sim_add_core_component(d,x,v),this._mem_add_unit_component(d,{}),this._connect_sub_component(d),this._is_fullwindow){if(this._fullwindow_component_ids.push(d),this._fullwindow_component_set.add(d),this._in_component_control){let I=this._core_component_frame[d];this._core_content[d].removeChild(I),this._graph.appendChild(I,"default"),this._couple_sub_component(d)}}else this._in_component_control&&this._subgraph_unit_id!==d&&this._enter_sub_component_frame(d)}let g=this._get_spec_init_unit_pin_position(e,d);this._sim_add_unit_pins(d,m,g)}for(let d in n)this._is_unit_component(d)&&this._mem_add_unit_component_parent(d);for(let d in i){let m=i[d],h=this._jiggle_world_screen_center(),{position:f={}}=c,{merge:b={}}=f,g=b[d];g&&(h.x+=g.x,h.y+=g.y),this._sim_add_merge(d,m,h),this._sim_collapse_merge(d)}for(let d in a){let m=a[d];this._sim_add_exposed_pin_set("input",d,m)}for(let d in _){let m=_[d];this._sim_add_exposed_pin_set("output",d,m)}this._enabled()&&(this._tree_layout||this._set_minimap_to_graph()),this._rebuild_subgraph(),this._simulation_prevent_restart=!1,this._start_graph_simulation(he),this._tick(),this._start_debugger()}get_max_component_graph_size_size(){let{component:t}=this.$props,e=J(t);return this.get_sub_components_max_graph_size(e)}get_max_component_layout_size(){let{component:t}=this.$props,e=J(t);return this.get_sub_components_max_layout_size(e)}get_sub_components_max_graph_size(t){return this.get_sub_components_max_size__template(t,this._get_unit_component_graph_size)}get_sub_components_max_layout_size(t){return this.get_sub_components_max_size__template(t,this._get_unit_component_layout_size)}get_sub_components_max_size__template(t,e){let n=Number.MIN_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER;for(let s of t){let{width:a,height:_}=e(s);n=Math.max(n,a),i=Math.max(i,_)}return{width:n,height:i}}_add_unit(t,e,n,i={input:{},output:{}},s,a,_=!0){let{specs:c}=this.$props;this._state_add_unit(t,e,n,{},i,s,a),_&&this._pod_add_unit(t,e)}_state_add_unit(t,e,n,i={},s={input:{},output:{}},a,_,c){let{injectSpecs:p}=this.$props,{unit:u,specs:d}=e;p(d),this._spec_add_unit(t,u);let m=this._is_unit_component(t);m&&(c===void 0?this._spec_append_component(_,t):this._spec_insert_component(_,t,c)),m&&_&&(this._mem_add_unit_component(t,{}),this._mem_insert_sub_component_child(_,t,"default",c)),this._sim_add_unit(t,u,n,i,s,_,a),this._start_graph_simulation(he)}add_unit(t,e,n,i={input:{},output:{}},s,a){this._add_unit(t,e,n,i,s,a),this._dispatch_action(fi(t,B(e),n,i,s,a,{}))}_enter_all_sub_component_frame(){for(let t in this._component.$subComponent)this._enter_sub_component_frame(t)}_leave_all_sub_component_frame(){for(let t in this._component_nodes)this._leave_sub_component_frame(t)}_decompose_sub_component(t,e=!0){this._get_sub_component(t).decompose(e)}_compose_sub_component(t){this._get_sub_component(t).compose()}_spec_insert_component(t,e,n){this._spec.component=this._spec.component||{subComponents:{}},this._spec.component=A0({unitId:e,spec:{children:[]}},this._spec.component||{}),t?this._spec.component=yE({id:t,childId:e,at:n},this._spec.component||{}):this._spec.component=gE({id:e,at:n},this._spec.component||{});let{width:i,height:s}=this._get_unit_component_graph_size(e);this._update_max_component_size(e,i,s),this._spec_component_set_default_size()}_pod_add_unit(t,e,n=null){this._flush_debugger(),this._pod.$addUnit({unitId:t,bundle:e,subComponent:n})}_pod_clone_unit(t,e){this._flush_debugger(),this._pod.$cloneUnit({unitId:t,newUnitId:e})}_sim_add_unit(t,e,n,i={},s={input:{},output:{}},a,_){this._sim_add_unit_core(t,e,n,i),this._is_unit_component(t)&&(_=_||dn,this._sim_add_core_component(t,a,_)),this._sim_add_unit_pins(t,e,s)}_set_core_selection_to_name(t){this._set_node_selection_to_name(t,1,0)}_set_merge_empty(t){this._empty_merge_node_count++;let e=this._node[t];this._empty_merge_node[t]=e,this._set_node_layer(t,Nn)}_hide_ext_info(t){this._sim_remove_node_type(t)}_hide_int_info(t){let e=vd(t);this._hide_ext_info(e)}_hide_datum_info(t){this._sim_remove_node_type(t)}_animate_current_layer_offset_if_overflown(){}_maybe_refresh_simulation_by_drag(){(this._exposed_pin_unplugged_count>0||this._empty_merge_node_count>0)&&this._start_graph_simulation(he)}_end_leave_fullwindow_animation(t){let e=this._order_sub_component_ids(t);for(let n of e)this._unplug_sub_component_root_base_frame(n),this._append_sub_component_all_missing_root(n),this._append_sub_component_root_base(n);for(let n of e)this._finish_sub_component(n),this._animating_sub_component_fullwindow.delete(n);this._finish_component()}_show_unit_ignored_pins(t){this._for_each_unit_pin(t,e=>{this._spec_is_link_pin_ignored(e)&&(this._set_link_pin_opacity(e,.5),this._set_link_pin_pointer_events(e,"inherit"))})}_hide_unit_ignored_pins(t){this._for_each_unit_pin(t,e=>{this._spec_is_link_pin_ignored(e)&&(this._set_link_pin_opacity(e,0),this._set_link_pin_pointer_events(e,"none"))})}__drop_pin(t,e){this._is_pin_node_id(e)?(this._set_node_target(t,e),this._set_node_target(e,t)):this._is_unit_node_id(e)?this._set_node_target(t,e):this._is_int_node_id(e)&&this._set_node_target(e,t)}_turn_unit_into_data(t){let e=this._get_unit_spec_id(t),n=this._get_node_position(t);this._remove_unit(t);let i={unit:{id:e}};this._add_data_unit(i,n)}_set_node_target(t,e){var n;this._node_target[t]||(this._set_node_fixed(t,!0),this._set_node_fixed(e,!0),this._node_target[t]=e,this._node_target_count++,this._target_node[e]=(n=this._target_node[e])!=null?n:new Set,this._target_node[e].add(t),this._start_node_target_frame(),this._refresh_compatible())}_remove_node_target(t){if(!this._node_target[t])return;let e=this._node_target[t];this._has_node(t)&&this._set_node_fixed(t,!1),this._has_node(e)&&this._set_node_fixed(e,!1),this._target_node[e].delete(t),this._target_node[e].size===0&&delete this._target_node[e],delete this._node_target[t],this._node_target_count--,this._refresh_compatible()}_on_node_target_end(t,e){this._is_pin_node_id(t)?this._is_pin_node_id(e)?this._on_pin_pin_target_end(t,e):this._is_unit_node_id(e)&&this._on_pin_unit_target_end(t,e):this._is_plug_node_id(t)&&this._on_plug_target_end(t,e)}_on_plug_target_end(t,e){let{type:n,pinId:i,subPinId:s}=gt(t);this._set_node_fixed(t,!1),this._set_node_fixed(e,!1);let a=Kt(n,i,s),_=De(n,i,s);if(this._remove_node_target(t),this._refresh_plug_layer(a,_),delete this._int_node_locked[_],this._is_pin_node_id(e))this.__plug_exposed_pin_to(n,i,s,e);else if(this._is_unit_node_id(e)){let c=Kn(e);this.__plug_exposed_pin_to(n,i,s,e)}else if(this._is_plug_node_id(e)){let c=this._new_merge_id(),p=At(c),u=this._get_node_position(e),d=this._get_node_position(t),m=Ls([u,d]);this._add_merge(c,{},m,!0);let{type:h,pinId:f,subPinId:b}=gt(t),{type:g,pinId:v,subPinId:x}=gt(e);this._plug_exposed_pin(h,f,b,{mergeId:c}),this._plug_exposed_pin(g,v,x,{mergeId:c}),this._set_merge_empty(p)}else throw new Error("invalid plug drop target")}isFullwindow(){return this._is_fullwindow}leaveFullwindow(t,e){this._leave_all_fullwindow(t,e)}enterFullwindow(t){this._enter_all_fullwindow(t)}getPath(){return this._subgraph_unit_id?[this._subgraph_unit_id,...this._subgraph_graph.getPath()]:[]}focus(t={preventScroll:!0}){if(this._core_component_unlocked_count>0){let e=jt(this._core_component_unlocked);this._get_sub_component(e).focus(t)}else this._graph.focus(t)}blur(t={preventScroll:!0}){this._graph.blur(),this._control_lock&&this._unlock_control()}_should_show_merge_data_on_this_mode(){return this._mode==="none"||this._mode==="multiselect"}_is_pin_pin_match(t,e){if(t===e||As(t)||As(e))return!1;let n=this._pin_unit_ids(t),i=this._pin_unit_ids(e);for(let p in n)if(i[p])return!1;let s=this._is_link_pin_node_id(t),a=this._is_link_pin_node_id(e),_=this._is_pin_node_ref(t),c=this._is_pin_node_ref(e);if(s&&a){let{type:p}=it(t),{type:u}=it(e);return _&&!c?u==="output"&&this._is_link_pin_ref_link_pin_type_match(t,p,e,u):!_&&c?p==="output"&&this._is_ref_link_pin_link_pin_type_match(t,p,e,u):_&&c&&p==="output"&&u==="output"?!1:this._is_pin_pin_type_match(t,p,e,u)}else if(s&&!a){let{type:p}=it(t);return this._spec_is_empty_merge(e)?!1:this._is_input_only_merge(e)?this._is_pin_pin_type_match(t,p,e,"input"):this._is_output_only_merge(e)?this._is_pin_pin_type_match(t,p,e,"output"):_===c&&this._is_pin_pin_type_match(t,p,e,ye(p))}else if(!s&&a){let{type:p}=it(e);return this._spec_is_empty_merge(t)?!1:this._is_input_only_merge(t)?this._is_pin_pin_type_match(t,"input",e,p):this._is_output_only_merge(t)?this._is_pin_pin_type_match(t,"output",e,p):this._is_pin_pin_type_match(t,ye(p),e,p)}else{if(this._spec_is_empty_merge(t)||this._spec_is_empty_merge(e))return!1;let p=this._is_input_only_merge(t),u=this._is_input_only_merge(e),d=this._is_output_only_merge(t),m=this._is_output_only_merge(e);return _&&c?!0:!_&&!c?p&&u?this._is_pin_pin_type_match(t,"input",e,"input"):p&&m?this._is_pin_pin_type_match(t,"input",e,"output"):d&&u?this._is_pin_pin_type_match(t,"output",e,"input"):d&&m?this._is_pin_pin_type_match(t,"output",e,"output"):p?this._is_pin_pin_type_match(t,"input",e,"output"):u?this._is_pin_pin_type_match(t,"output",e,"input"):d?this._is_pin_pin_type_match(t,"output",e,"input"):m?this._is_pin_pin_type_match(t,"input",e,"output"):this._is_pin_pin_type_match(t,"input",e,"output")&&this._is_pin_pin_type_match(t,"output",e,"input"):!1}}_set_unit_memory(t,e){let n=(i,s)=>{let a=ut(t,i,s),{_register:_}=e[i][s];if(_!==void 0){let c=this._new_datum_id(),p=F0(_),u=this._predict_pin_datum_initial_position(a);this._sim_add_pin_datum_tree(t,i,s,c,p,u)}};if(e){let{input:i,output:s}=e;for(let a in i)n("input",a);for(let a in s)n("output",a)}}_state_set_link_pin_constant(t,e){let{unitId:n,type:i,pinId:s}=it(t);this._spec_set_link_pin_constant(n,i,s,e),this._sim_set_link_pin_constant(t,e);let a=this._is_link_pin_ref(t);if(i==="input"&&a&&this._unit_ref_pin_global_ref[t])if(e){let c=this._unit_ref_pin_global_ref[t];this._watch_constant_input_ref(n,i,s,c)}else this._unwatch_constant_input_ref(n,i,s)}_on_datum_multiselect_double_click(t,e){this._on_node_click(t,e)}_on_datum_none_double_click(t,e){let{api:{document:{elementFromPoint:n}}}=this.$system;if(this._is_datum_editable(t)){this._unlock_datum(t);let{screenX:i,screenY:s}=e,a=n(i,s);if(a.className==="data-tree-leaf")a.focus&&a.focus();else{let{datumId:_}=Ae(t);this._focus_datum(_,[])}}}_animate_sub_sub_component_leaf(t,e,n,i,s,a,_,c,p,u,d,m,h,f,b,g,v,x){return{sub_sub_component_base_leaf_end_count:f,sub_sub_component_end_count:g}}cache_subgraph(t,e){this._subgraph_cache[t]=e,this._subgraph.appendChild(e)}_get_sub_component_base_trait(t){let{api:{text:{measureText:e}}}=this.$system,n=[],i=this._get_sub_component_frame_context(t),s=this._get_sub_component_root_base(t);for(let _ of s){let[c,p]=_,u=p.$element,d=Ie(p,e);n.push(d)}return{base:s.map(([_,c])=>[[t,..._],c]),base_node:n}}_compose(){let t=this._get_all_sub_component_base_trait();this._lose_component_control(),this._is_shift_pressed()&&this._set_crud_mode("none"),this.dispatchEvent("compose",t,!1)}_animate_layout_enter_sub_component(t,e,n,i,s,a){for(let _ of e)this._measure_sub_component_base(_),this._set_layout_core_position(_,n,i),this._set_layout_core_size(_,s,a);for(let _ of e)this._animating_sub_component_base_id.has(_)||(this._remove_sub_component_parent_root(t,_),this._remove_sub_component_root_base(_));this._animate_all_current_layout_layer_node(),this._animate_layout_sub_component_remove_children(t,"default",e,()=>{this._end_layout_sub_component_transfer_children_animation(t,"default",e);for(let _ of e)this._enter_sub_component_frame(_),this._append_sub_component_base(_)});for(let _ of e)this._animate_layout_core_target(_,_,this._layout_node[_],()=>{})}__pod_add_pin_to_merge(t,e,n,i){this._pod.$addPinToMerge({mergeId:t,unitId:e,type:n,pinId:i})}_state_add_link_pin_to_merge(t,e,n,i){this._spec_add_link_pin_to_merge(t,e,n,i);let s=ut(e,n,i),a=At(t);this._sim_add_link_pin_to_merge(s,a)}_spec_add_link_pin_to_merge(t,e,n,i){kg({mergeId:t,unitId:e,type:n,pinId:i},this._spec)}_sim_add_link_pin_to_merge(t,e,n=!0){let{mergeId:i}=It(e),{unitId:s,type:a,pinId:_}=it(t),c=a==="input",p=!c,u=this._is_link_pin_ref(t),d=p&&u,m=_===$t,h=this._pin_to_int[a][t];if(this._mode==="remove"&&this._pressed_node_id_pointer_id[t]&&this._on_unit_red_drag_end(s),h){let{pinId:I,type:E,subPinId:D}=gt(h);this._sim_unplug_exposed_pin(E,I,D),this._sim_plug_exposed_pin(E,I,D,{mergeId:i})}let f=this._merge_ref[e];if(this._pin_to_merge[t]=e,this._merge_to_pin[e][t]=!0,m)this._merge_to_ref_unit[e]=s,this._ref_unit_to_merge[s]=e,this._sim_change_all_merge_input_to(e,s),this._has_node(e)&&this._sim_remove_merge_node(e);else if(d){this._merge_to_ref_output[e]=t,this._ref_output_to_merge[t]=e,this._sim_change_all_merge_input_to(e,t),this._has_node(e)&&this._sim_remove_merge_node(e);let I=qe(t);this._show_link_text(I),this._hide_link_pin_name(t)}else this._sim_change_link_pin_to_merge(t,e);let b=this._merge_input[e],g=this._merge_output[e];if(c){if(this._merge_to_input[e][t]=!0,this._inc_merge_input_count(i),!f){this._set_merge_input_visibility(e,"visible"),b.$element.style.visibility="visible";let I=2*5-4;g.$element.style.width=`${I}px`,g.$element.style.height=`${I}px`,g.$element.style.transform="translate(2px, 2px)"}}else this._merge_to_output[e][t]=!0,this._inc_merge_output_count(i),(!f||!u)&&this._set_merge_output_visibility(e,"visible");if(this._inc_merge_pin_count(i),c){let I=this._merge_to_output[e];for(let E in I){let{unitId:D}=it(E),w=Vt(D,s);this._unit_to_unit[w]=this._unit_to_unit[w]||0,this._unit_to_unit[w]++}}else{let I=this._merge_to_input[e];for(let E in I){let{unitId:D}=it(E),w=Vt(s,D);this._unit_to_unit[w]=this._unit_to_unit[w]||0,this._unit_to_unit[w]++}}d||this._has_node(t)&&this._sim_remove_link_pin_pin(t);for(let I in this._merge_to_pin[e]){let E=this._pin_to_datum[I];E&&this._refresh_datum_visible(E)}let v=c,x=Vt(v?t:s,v?s:t);this._has_link(x)&&this._refresh_link_pin_link_color(t),f?this._refresh_core_border_color(s):this._refresh_merge_pin_color(e),this._merge_pin_count[i]===1&&this._remove_merge_empty(e),this._refresh_compatible(),this._start_graph_simulation(he)}_refresh_pin_anchor_marker(t){let e=this._get_node_anchor_node_id(t);this._refresh_link_pin_marker(t,e)}_mem_remove_component(t){this._unit_component_count--,delete this._layout_component_count[t],delete this._layout_sub_component_parent[t],this._layout_core_abort_animation[t]&&(this._layout_core_abort_animation[t](),delete this._layout_core_abort_animation[t],this._layout_core_animation_count--),this._selected_component[t]&&this._selected_component_count--,delete this._selected_component[t],delete this._component_nodes[t],delete this._core_component_frame_context[t],delete this._core_component_resize[t],delete this._core_component_overlay[t],delete this._core_component_frame[t],delete this._resize_component_start_size[t],delete this._sub_component[t]}_pod_set_sub_component_size(t,e,n){throw new Error("Method not implemented.")}_set_all_node_to_node_charge(t,e){for(let n in this._node)this._set_node_to_node_charge(t,n,e),this._set_node_to_node_charge(n,t,e)}_delete_all_node_to_node_charge(t){for(let e in this._node)this._delete_node_to_node_charge(t,e),this._delete_node_to_node_charge(e,t)}_set_all_node_to_compatible_node_charge(t,e){for(let n in this._compatible_node_id)this._set_node_to_node_charge(t,n,e),this._set_node_to_node_charge(n,t,e)}_on_line_gesture_end(t){let{specs:e,forkSpec:n}=this.$props,{$x:i,$y:s,$sx:a,$sy:_}=this.$context,{x:c,y:p,z:u}=this._zoom,d=f=>(f-i)/a/u+c,m=f=>(f-s)/_/u+p,h=(f,b,g)=>{let{shouldFork:v,newSpecId:x}=this.$props,I=this._get_unit_spec(f),E=NE(I,b);if(v(I.id)){let D=x();this._spec_fork_unit(f,D)}this.expose_unit_pin_set(f,b,E,{plug:{0:{}}},g)};if(this._mode==="none"){let f=d(t.x0),b=m(t.y0),g=d(t.x1),v=m(t.y1),x={x:f,y:b},I={x:g,y:v},E=_s/2,D=this._find_inside_core_and_pin_id(x,E),w=this._find_inside_core_and_pin_id(I,E);if(D&&w)if(this._is_unit_node_id(D)&&this._is_unit_node_id(w)){if(!this._is_unit_base(D)||!this._is_unit_base(w))return}else this._is_pin_node_id(D)&&this._is_pin_node_id(w)&&this._add_unit_between_pins(D,w);else if(D||w){let T=D||w,C=this._get_node_position(T),{x:P,y:k}=C,M=Di(f,b,P,k),U=Di(g,v,P,k),L;if(M>U?L="input":L="output",this._is_unit_node_id(T))this._is_unit_base(T)||h(T,L,L==="input"?x:I);else if(this._is_pin_node_id(T)){let O,R=this._is_link_pin_node_id(T);if(R){let{type:Et}=it(T);O=Et}else this._is_input_only_merge(T)?O="input":this._is_output_only_merge(T)?O="output":O=L;let N="0",z,F,V;if(R){let{unitId:Et,pinId:Ct}=it(T),Pt=ut(Et,L,Ct);z=Zs(this._spec,O,Ct),F={unitId:Et,pinId:Ct};let ot=this._get_pin_datum_node_id(Pt);ot&&(V=this._get_datum_value(ot))}else{let Et=this._find_merge_pin(T,()=>!0),Ct=this._find_merge_pin(T,ct=>it(ct).type===O),Pt=Ct!=null?Ct:Et,{mergeId:ot}=It(T),{pinId:X}=it(Pt),rt=At(ot);z=Zs(this._spec,O,X),F={mergeId:ot};let et=this._get_merge_datum_node_id(rt);et&&(V=this._get_datum_value(et))}let j=Me(f,b,g,v),H=I2(x,j,24),K=O==="input"?x:H,q=O==="input"?H:x,Q=this._spec_get_pin_node_plug_spec(O,T),{pinId:at,subPinId:Dt}=Q!=null?Q:{};at&&Dt?(N=this._new_sub_pin_id(O,at),this.add_exposed_pin(O,at,{},N,{},{ext:K,int:q})):(this.add_new_exposed_pin_set_at(z,O,{plug:{[N]:F}},void 0,K,q),O==="output"&&V&&this._sim_set_pin_set_data(O,z,V))}}else{let T=this._world_screen_center(),{x:C,y:P}=T;if(Di(f,b,g,v)>24){let M=Di(f,b,C,P),U=Di(g,v,C,P),L;M>U?L="input":L="output";let O=NE(this._spec,L),R=Me(f,b,g,v),N=I2(x,R,24),z=L==="input"?x:N,F=L==="input"?N:x;this.add_new_exposed_pin_set_at(O,L,{plug:{0:{}}},void 0,z,F)}}}}get state_make_this_graph_interface(){return this._state_make_this_graph_interface}set state_make_this_graph_interface(t){this._state_make_this_graph_interface=t}_add_unit_between_pins(t,e){let{specs:n}=this.$props;if(t===e)return;let i=this.$system.newSpecId(),{unitId:s,type:a,pinId:_}=it(t),{unitId:c,type:p,pinId:u}=it(e),d=Li({inputs:{a:{plug:{0:{}}}},outputs:{a:{plug:{0:{}}}}});this._add_empty_spec(i,d);let m=this._new_unit_id(i),f=un({id:i},n),b=this._get_node_position(t),g=this._get_node_position(e),v=S2(b,g),x=this._screen_center();this._add_unit(m,f,v,ve({},{}),x,null);let I=ut(m,"input","a"),E=ut(m,"output","a"),D=this._merge_pin_pin(I,t),w=this._merge_pin_pin(E,e);this._deselect_node(t),this._deselect_node(e),this._deselect_node(D),this._deselect_node(w),this._select_node(m)}_state_set_unit_pin_data(t,e){this._spec_set_pin_data(t,e),this._sim_set_pin_data_value(t,e)}_sim_move_unit_into_graph_remove(t,e,n){this._is_unit_component(e)&&this._sim_remove_component(e,!1,!1),this._sim_remove_unit_body(e)}_state_move_unit_into_graph__inject(t,e,n,i,s,a,_,c,p,u,d){this._spec_move_unit_into_graph__inject(t,e,n,i,s,a,c,p),this._sim_move_unit_into_graph__inject(t,e,n,i,s,c,p,u,_,d)}_sim_move_unit_into_graph__inject(t,e,n,i,s,a,_,c,p,u){let{getSpec:d}=this.$props,m=this._is_unit_component(t),h=this._get_unit_spec(t),f=nt(h,["metadata","icon"],"question");this._set_core_icon(t,f),this._refresh_core_icon_hidden(t);let{id:b}=a,g=this._collapse_unit_spec[e];m&&c&&this._get_sub_component(t).setSubComponent(e,c);let v=(x,I)=>{var w;let{pinId:E,subPinId:D}=nt(s,[x,I],{pinId:void 0,subPinId:void 0});if(E&&D){let T=E,C=D,P=ut(t,x,E),k=((w=p==null?void 0:p[x])==null?void 0:w[I])||this._jiggle_world_screen_center();this._has_anchor_node(P)||(this._sim_graph_unit_add_pin(t,x,T,k),x==="output"&&I===$t&&this._sim_set_pin_data_value(P,"null"),this._set_node_layer(P,Qs),nt(n,[x,I,"constant"],!1)&&this._state_set_link_pin_constant(P,!0),u.selected.links[x].has(T)&&this._select_node(P))}};To(g,v),v("output",$t),m||this._refresh_core_circle(t)}_spec_move_unit_into_graph__inject(t,e,n,i,s,a,_,c){var x;let{getSpec:p,setSpec:u}=this.$props,d=this._get_unit_spec_id(t),m=this._get_unit_spec(t),h=B(m);if(Mo({unitId:i,unit:_},h),c){let{width:I,height:E}=c;h.component=A0({unitId:i,spec:{children:[],childSlot:{},width:I,height:E}},h.component),h.component=T0({unitId:i},h.component);let{defaultWidth:D=wh,defaultHeight:w=G0}=h.component,T=Math.max(D,I),C=Math.max(w,E);h.component=bv({defaultWidth:T,defaultHeight:C},h.component),c.parent_id&&this._spec_graph_unit_has_unit(t,c.parent_id)&&(h.component=va({id:i},h.component),h.component=vh({id:c.parent_id,childId:i},h.component));for(let P of(x=c.children)!=null?x:[])this._spec_graph_unit_has_unit(t,P)&&(h.component=va({id:P},h.component),h.component=vh({id:i,childId:P},h.component));oe(h,["metadata","complexity"])}(!h.metadata||!h.metadata.icon)&&tt(h,["metadata","icon"],"question");let{id:f}=_,b=this._collapse_unit_spec[e],g=(I,E)=>{let{pinId:D,subPinId:w,ref:T}=nt(s,[I,E],{pinId:void 0,subPinId:void 0});D&&w&&(nt(h,[`${I}s`,D],void 0)?Ja({pinId:D,type:I,subPinId:w,subPinSpec:{unitId:i,pinId:E}},h):$i({pinId:D,type:I,pinSpec:{plug:{[w]:{unitId:i,pinId:E}},ref:T}},h))};To(b,g),g("output",$t),u(d,h);let v=a[i];xe(v!=null?v:ve({},{}),(I,E,D)=>{if(this._spec_graph_unit_has_merge(t,D))this._spec_graph_unit_add_pin_to_merge(t,D,i,I,E);else{let w={};Ke(a,(C,P)=>{xe(P,(k,M,U)=>{U===D&&this._spec_graph_unit_has_unit(t,C)&&tt(w,[C,k,M],!0)})}),Te(w)>1&&this._spec_graph_unit_add_merge(t,D,w)}})}_move_unit_into_graph__reconnect__template(t,e,n,i,s){var g,v;let{merges:a,plugs:_}=n,{addPinToMerge:c,addMerge:p,hasMergePin:u,plugPin:d,hasMerge:m,getUnitPinPlug:h,removePin:f}=i,b=nt(this._collapse_next_map.nextIdMap,["unit",e],e);for(let x in a){let I=a[x],E=I[t],D=ie((g=E.input)!=null?g:{})?"output":"input",w=(v=nt(this._collapse_next_map.nextMergePinId,[x,D,"mergeId"],null))!=null?v:x;if(m(w)){let T=I[t];xe(T,(C,P)=>{c(C,P,w)})}else{let T=nt(I,[t,"output",$t],!1);Yt(I,(C,P,k)=>{if(C!==t){let M=ut(C,P,k);this._state_remove_pin_or_merge(M)}}),T||p(w,I)}}xe(_,(x,I,{pinId:E,subPinId:D,position:w})=>{w=w!=null?w:this._jiggle_world_screen_center();let T=nt(this._collapse_next_map.nextPinIdMap,[e,x,I,"pinId"],I),C=Kt(x,E,D);this._collapse_init_node_id_set.has(C)?this._has_node(C)||s.plugPin(x,E,D,{unitId:b,pinId:I}):d(x,E,D,{unitId:t,pinId:T},w)})}_spec_move_unit_into_graph__reconnect(t,e,n){this._move_unit_into_graph__reconnect__template(t,e,n,{addPinToMerge:(i,s,a)=>{this._spec_add_link_pin_to_merge(a,t,i,s)},addMerge:(i,s)=>{this._spec_add_merge(i,s)},plugPin:(i,s,a,_)=>{this._spec_plug_sub_pin(i,s,a,_)},hasMerge:i=>this.__spec_has_merge(i),getUnitPinPlug:(i,s,a)=>this._spec_get_unit_pin_plug(i,s,a),removePin:(i,s,a)=>this.__spec_remove_exposed_sub_pin(i,s,a),hasMergePin:(i,s,a,_)=>this._spec_has_merge_pin(i,s,a,_)},{plugPin:(i,s,a,_)=>{this._on_graph_unit_plug_pin_moment({type:i,pinId:s,subPinId:a,subPinSpec:_,path:[t]})}})}_sim_move_unit_into_graph__reconnect(t,e,n,i={selected:{merges:[],links:ve(new Set,new Set)}}){let{data:s}=n;this._move_unit_into_graph__reconnect__template(t,e,n,{addPinToMerge:(a,_,c)=>{let p=At(c),u=ut(t,a,_);this._pin_to_merge[u]||this._sim_add_link_pin_to_merge(u,p)},addMerge:(a,_)=>{let c=At(a);if(this._has_anchor_node(c)||this._is_merge_ref(c)){let p=_[t];xe(p,(u,d)=>{let m=ut(t,u,d);this._pin_to_merge[m]||this._sim_add_link_pin_to_merge(m,c)})}else{let p=this._jiggle_world_screen_center(),u=nt(i,["position","merges",a],p);this._sim_add_merge(a,_,u),this._sim_collapse_merge(a)}},plugPin:(a,_,c,p,u)=>{let d=P0(a,p);p.unitId&&!this._has_anchor_node(d)&&(this._spec_graph_unit_add_pin(p.unitId,a,p.pinId,{}),this._sim_graph_unit_add_pin(p.unitId,a,p.pinId,u)),this._state_plug_exposed_pin(a,_,c,p)},hasMerge:a=>{let _=At(a),c=this._get_merge_anchor_node_id(_);return c&&this._has_node(c)},hasMergePin:(a,_,c,p)=>this._spec_has_merge_pin(a,_,c,p),getUnitPinPlug:(a,_,c)=>this._spec_get_unit_pin_plug(a,_,c),removePin:(a,_,c)=>this.__sim_remove_exposed_sub_pin(a,_,c)},{plugPin:(a,_,c,p)=>{this._on_graph_unit_plug_pin_moment({type:a,pinId:_,subPinId:c,subPinSpec:p,path:[t]})}}),gs(s,(a,_)=>{Ke(_,(c,p)=>{let u=ut(t,a,c);if(this._has_anchor_node(u)){let d=this._get_pin_anchor_node_id(u),m=this._merge_to_ref_unit[d];if(this._is_unit_node_id(d)&&this._ref_unit_to_merge[d])return;let h=this._new_datum_id(),f=Xe(h),b=this._predict_pin_datum_initial_position(d);this._pin_to_datum[u]&&this._mem_remove_pin_datum_tree(u),this.__sim_add_datum_node(h,p,b),this._sim_add_pin_datum_link(f,u),this._spec_set_pin_data(u,p.value),this._mem_set_pin_datum(u,h)}})}),this._refresh_node_color(t);for(let a of i.selected.merges){let _=At(a);this._spec_has_merge(_)}}_on_alt_keyup(){this._unlisten_gesture&&!this._capturing_gesture&&this._stop_gesture()}_on_alt_keydown(){}_start_move_subgraph_into(t,e){var _,c,p,u;let n=this._jiggle_world_screen_center(),i=!1;for(let d of(_=e.nodeIds.unit)!=null?_:[])this._is_unit_component(d)&&(i=!0),this._start_node_long_press_collapse(d);for(let d of(c=e.nodeIds.link)!=null?c:[]){let{unitId:m,type:h,pinId:f}=d,b=ut(m,h,f);this._start_node_long_press_collapse(b)}for(let d of(p=e.nodeIds.merge)!=null?p:[]){let m=At(d);this._start_node_long_press_collapse(m)}for(let d of(u=e.nodeIds.plug)!=null?u:[]){let{type:m,pinId:h,subPinId:f}=d,b=Kt(m,h,f);this._start_node_long_press_collapse(b)}this._collapse_init_node_id_set=new Set(this._collapse_node_id);let s=this._get_unit_spec_render(t)===void 0&&i,a=this._get_unit_spec_render(t)!==void 0;this._state_move_subgraph_into(t,e,s,a,n)}_open_file(){return G(this,null,function*(){let{api:{file:{isOpenFilePickerSupported:t,showOpenFilePicker:e,fallbackShowOpenFilePicker:n}}}=this.$system,i={startIn:"desktop",id:"unit",types:[{description:"unit",accept:{"data/*":[".unit"]}}],excludeAcceptAllOption:!1,multiple:!1,accept:".unit"};if(t()&&!1)try{}catch(s){}else try{let[s]=yield n(i);this._paste_file(s)}catch(s){return}})}_on_background_click_hold(t,e,n){let i=!1,s=!1;this._tree_layout||(this._mode==="multiselect"?this._on_background_long_press(n):this._mode==="info"?i=!0:(i=!0,s=!0)),i&&(this._animate_long_press(t,e,"in"),this._capturing_gesture||this._start_gesture(n))}moment(t,e){if(t.length>0){let[n,...i]=t;if(n===this._subgraph_unit_id)this._subgraph_cache[n].moment(i,e);else return}else{let{type:n,moment:i}=e;n==="unit"?this._on_moment(i):this._on_graph_moment(i)}}_ensure_fork_spec(t){let{specs:e}=this.$props,n=ax(e,t),i=xn(e),s=B(n);return s.id=i,{spec_id:i,spec:s,forked:!0}}_spec_graph_remove_unit_pin(t,e,n){let{setSpec:i}=this.$props,s=this._get_unit_spec_id(t),a=this._get_unit_spec(t),_=B(a);Oi({pinId:n,type:e},_),i(s,_)}_graph_debug_set_unit_err(t,e){this._set_core_border_color(t,Rs),this._err[t]?this._sim_set_unit_err(t,e):(this._err[t]=e,this._sim_add_unit_err(t,e))}_state_graph_unit_remove_pin(t,e,n,i){let s=this._get_pin_merge_id(t);this._sim_graph_unit_remove_pin(t),this._spec_graph_unit_remove_pin(e,n,i,s)}_state_graph_unit_add_pin(t,e,n,i,s){this._spec_graph_unit_add_pin(t,e,n,i),this._sim_graph_unit_add_pin(t,e,n,s)}onPropChanged(t,e){if(t==="style"){let{style:n={}}=this.$props;this._graph.setProp("style",S(S({},dv),n)),this._refresh_color()}else if(t==="disabled")this._refresh_enabled();else if(t==="zoom")this._set_zoom(e);else if(t==="graph"){let{animated:n}=this.$system,{graph:i,animate:s=n,component:a}=this.$props;if(!this._prevent_next_reset){let _=S({},this._component.$subComponent);for(let c in _){let p=this,u=this._component.getSubComponentParentId(c),d=_[u];u?d.hasParentRoot(p)&&d.pullParentRoot(p):this._component.hasRoot(p)&&this._component.pullRoot(p),this._component.removeSubComponent(c)}}this._plunk_pod(),this._sim_remove_unit,this._pod=i,this._reset_spec(),this._refresh_enabled()}else if(t==="fullwindow")e===!0&&!this._is_fullwindow?this._enter_all_fullwindow(!1):e===!1&&this._is_fullwindow&&this._leave_all_fullwindow(!0,zt);else if(t==="frame"){let{frame:n}=this.$props;this._in_component_control&&this._is_fullwindow&&(this._leave_component_frame(),this._frame_out||this._disable_frame_pointer()),this._frame=n,this._in_component_control&&this._is_fullwindow&&(this._enter_component_frame(),this._frame_out||this._enable_frame_pointer());for(let i in this._subgraph_cache)this._subgraph_cache[i].setProp("frame",this._frame)}else if(t==="component")this._component&&this._unlisten_component(),this._is_fullwindow&&this._leave_component_frame(),this._component=e,this._is_fullwindow&&this._enter_component_frame();else if(t==="frameOut"){let n=e;if(this._in_component_control&&this._is_fullwindow){if(!this._frame_out&&n)this._set_fullwindow_frame_off(!1);else if(this._frame_out&&!n){let{animate:i}=this.$props;this._set_fullwindow_frame_on(!1),this._disable_input(),this._hide_control(i)}}this._frame_out=n;for(let i in this._subgraph_cache)this._subgraph_cache[i].setProp("frameOut",this._frame_out)}else if(t==="registry")throw new ei}};l();l();l();function HE(r,o,t){let e=Jb(o,t);return new e({},r)}function SM(r,o,t={}){let{specs:e}=r,n=Ui(o,e),i=new n(r);for(let c in t){let p=t[c];i.setPinData("input",c,p)}let s=Xr(i),a=HE(r,o,e);return a.connect(s),i.play(),{graph:i,component:a}}function jE(r,o,t={}){let{specs:e}=r,n=Bt(e,o),{component:i,graph:s}=SM(r,n,t);return{component:i,graph:s}}l();var sr=class extends W{constructor(o,t){super(o,t);let{}=this.$props,e=yt(t);this.$element=e}focus(){this.$parentChildren[0]&&this.$parentChildren[0].focus()}};l();var DM={display:"block",color:"inherit",backgroundColor:"#00000000",padding:"0",border:"none",borderRadius:"0"},rr=class extends je{constructor(o,t){super(o,t,t.api.document.createElement("input"),{valueKey:"value",defaultStyle:DM});let{value:e="#000000",tabIndex:n=-1}=o;this.$element.value=e,this.$element.type="color",this.$element.tabIndex=n}};l();l();var zn=35,VE={position:"absolute",width:"fit-content",height:"fit-content",touchAction:"none"},Ah=class extends W{constructor(t,e){super(t,e);this._active=!1;this._hidden=!1;this._hover=!1;this._y=0;this._drawer_style=()=>{let{style:t={}}=this.$props;return S(_t(S({},VE),{top:`${this._y}px`,transform:this._transform()}),t)};this.setActive=t=>{if(t){if(this._active)return;this._setActive(!0),this.dispatchEvent("active",{})}else{if(!this._active)return;this._setActive(!1),this.dispatchEvent("inactive",{})}};this._transform=()=>`translateX(${this._get_translate_x()}px)`;this._get_translate_x=()=>{let{$width:t}=this.$context,{width:e=0,component:n}=this.$props,i=0;return this._active&&(i=-Math.min(n?e+2+6-1:0,t-zn)),this._hidden&&(i=-i+34),i};this._setActive=t=>{this._active=t,this._animate_transform(!0),setTimeout(()=>{this.dispatchEvent("activated",{})},Ji+100)};this._translate=()=>{let t=this._transform();this.drawer.$element.style.transform=t};this._resize=()=>{let{$width:t}=this.$context,{width:e=0,height:n=zn,component:i}=this.$props;this._translate(),e>t-zn?(this.frame.$element.style.width=`${t-zn-8}px`,this.frame.$element.style.height=`${n+2}px`,this.content.$element.style.width=i?`${t-zn}px`:"0",this.content.$element.style.height=`${n+6}px`):(this.frame.$element.style.width=`${e+2}px`,this.frame.$element.style.height=`${n+2}px`,this.content.$element.style.width=i?`${e+2+6}px`:"0",this.content.$element.style.height=`${n+2+6}px`)};this._on_knob_click=t=>{this.setActive(!this._active)};this._on_knob_pointer_enter=t=>{this._hover=!0};this._on_knob_pointer_leave=t=>{this._hover=!1};this._drag=!1;this._drag_dy=0;this._clamp_top=t=>{let{$height:e}=this.$context;return Math.max(Math.min(t,e-zn),0)};this._on_knob_pointer_down=t=>{let{clientY:e,pointerId:n}=t;this._knob.setPointerCapture(n),this._drag_dy=this._y-e,this._drag=!0,this._drag_pointer_id=n;let i=this._knob.addEventListeners([Je(s=>{if(this._drag){let{pointerId:a}=s;if(this._drag_pointer_id===a){let{clientY:_}=s;this._y=this._clamp_top(_+this._drag_dy),this.drawer.$element.style.top=`${this._y}px`,this.dispatchEvent("dragged",{y:this._y})}}}),ue(s=>{let{pointerId:a}=s;this._drag_pointer_id===a&&(this._drag=!1,this._knob.releasePointerCapture(a),i(),this.dispatchEvent("dragend",{}))}),qn(()=>{})]);this.dispatchEvent("dragstart",{y:this._y})};this._on_container_resize=ba(()=>{this._active&&this._resize()},300);this._animate=(t,e)=>{var s,a;let n=e?Ji:0,i="forwards";this._animation&&(this._animation.pause(),this._animation.commitStyles()),this._animation=(a=(s=this.drawer.$element).animate)==null?void 0:a.call(s,[t],{duration:n,fill:i}),this._animation.onfinish=()=>{vo(this.drawer.$element,t),this._animation=void 0}};this._animate_transform=t=>{let e=this._transform();vo(this.drawer.$element,{transform:e,transition:An(t,"transform")})};let{className:n,style:i={},icon:s,title:a,component:_,active:c=!1,hidden:p=!1,y:u=0,width:d=0,height:m=zn}=this.$props;this._active=c,this._hidden=p,this._y=0;let{backgroundColor:h="inherit"}=i,f=new $e({className:"drawer-knob",icon:s,active:c,style:{position:"absolute",top:"0",padding:"6px",transform:"translateX(-100%)",height:`${zn-12-2}px`,width:`${zn-12-2}px`,touchAction:"none",backgroundColor:h,cursor:"pointer",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px",borderWidth:"1px 0px 1px 1px",borderStyle:"solid",borderColor:"currentColor",borderBottom:"0"},title:a},this.$system);f.addEventListener(ae({onClick:this._on_knob_click})),f.addEventListener(Ye(this._on_knob_pointer_enter)),f.addEventListener(Ee(this._on_knob_pointer_leave)),f.addEventListener(le(this._on_knob_pointer_down)),f.preventDefault("mousedown"),f.preventDefault("touchdown"),this._knob=f;let b=new ln({className:"drawer-frame",style:{position:"relative",width:`${d+2}px`,height:`${m+2}px`,borderWidth:"1px",borderStyle:"solid",borderColor:Lt,borderRadius:"1px",boxSizing:"border-box",overflow:"hidden"}},this.$system);this.frame=b;let g=new st({className:"drawer-content",style:{display:"flex",width:_?`${d+2+6}px`:"0",height:`${m+2+6}px`,borderTop:"1px solid currentColor",boxSizing:"border-box",borderRadius:"0px",borderBottomLeftRadius:"1px",minHeight:"35px",padding:_?"3px":"0"}},this.$system);g.registerParentRoot(b),this.content=g;let v=new st({className:"drawer-column",style:{position:"absolute",bottom:"0px",left:"0px",width:"4px",height:"calc(100% - 36px)",backgroundColor:"none",borderWidth:"0px 0px 1px 1px",borderStyle:"solid",borderColor:"currentColor",borderBottomLeftRadius:"3px"}},this.$system),x=new st({className:"drawer-row",style:{position:"absolute",bottom:"0px",right:"0px",width:"calc(100% - 3px)",height:"3px",backgroundColor:"none",borderWidth:"0px 1px 0px 0px",borderStyle:"solid",borderColor:"currentColor",borderBottom:"1px solid currentColor"}},this.$system),I=new st({className:"drawer-notch",style:{position:"absolute",bottom:"0px",left:"-31px",top:"34px",width:"32px",height:"4px",backgroundColor:"none",borderWidth:"1px 1px 0px 0px",borderTopRightRadius:"3px",borderStyle:"solid",borderColor:"currentColor"}},this.$system),E=new st({className:"drawer-notch0",style:{position:"absolute",bottom:"0px",left:"-34px",top:"31px",width:"5px",height:"4px",backgroundColor:"none",borderWidth:"0px 0px 1px 1px",borderBottomLeftRadius:"3px",borderStyle:"solid",borderColor:"currentColor"}},this.$system),D=new st({className:Xt("drawer",n),style:S(S({},VE),i)},this.$system);this.drawer=D,D.registerParentRoot(f),D.registerParentRoot(g),D.registerParentRoot(v),D.registerParentRoot(x),D.registerParentRoot(I),D.registerParentRoot(E);let w=yt(e);this.$element=w,this.$slot=D.$slot,this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({drawer:D,knob:f,content:g,column:v}),this.registerRoot(D)}onPropChanged(t,e){if(t==="className")this.drawer.setProp("className",e);else if(t==="style"){let n=this._drawer_style();vt(this.drawer.$element,n);let{backgroundColor:i=Lt}=n;this._knob.$slot.default.$element.style.backgroundColor=i}else t==="active"?this.setActive(e):t==="y"?(this._y=e,this.drawer.$element.style.top=`${this._y}px`):t==="width"?this._resize():t==="height"?this._resize():t==="hidden"&&this._translate()}onMount(){this._frame_listener=Be(this.$context,[Un(this._on_container_resize)])}onUnmount(){this._frame_listener()}show(t){this._hidden=!1,this._animate_transform(t)}hide(t){this._hidden=!0,this._animate_transform(t)}};var KE={position:"absolute",right:"0",top:"0",width:"0",height:"0"},Mh=class extends W{constructor(t,e){super(t,e);this._drawer={};this._drawer_component={};this._drawer_node={};this._drawer_active=new Set;this._drawer_y={};this._component_frame={};this._width=0;this._height=0;this._z_index=1;this._dy=0;this._tick=()=>{for(let t in this._drawer_node){let{y:e}=this._drawer_node[t];this._drawer_component[t].setProp("y",e)}};this._force=t=>{let e=Object.entries(this._drawer_node),n=e.length;for(let i=0;i<n;i++){let s=e[i],[a,_]=s,c=_.y,p=_.height;for(let u=i+1;u<n;u++){let d=e[u],[m,h]=d,f=h.y,b=h.height,g=1,v=1;if(c+p<=f)g=f-c-p,v=-1;else if(c<=f){let I=f-c,E=c+p-f;g=Math.min(I,E),v=I<E?1:-1}else f+b<=c?g=c-f-b:f<=c?g=f+b-c:v=-1;g=Math.max(g,3);let x=v*(t*150)/g;this._drawer_inactivating.has(a)||(_.vy+=x),this._drawer_inactivating.has(m)||(h.vy-=x)}}for(let i in this._drawer_node)if(!this._drawer_inactivating.has(i)){let s=this._drawer_node[i],{y:a,height:_}=s,c=a+_/2-this._height/2+this._dy;s.vy-=c*t/10}};this._on_context_resize=()=>{let{$width:t,$height:e}=this.$context;this._on_resize(t,e)};this._on_drawer_drag_start=(t,e)=>{let n=this._drawer_node[t];n&&(n.hy=e-n.y,n.fy=n.y)};this._on_drawer_dragged=(t,e)=>{let n=this._drawer_node[t];n&&(n.fy=e-n.hy,n.y=n.fy,this._startSimulation())};this._on_drawer_drag_end=t=>{let e=this._drawer_node[t];e&&(e.hy=0,this._drawer_active.has(t)||(e.fy=void 0))};this.addDrawers=t=>{for(let e in t){let n=t[e];this.addDrawer(e,n)}};this._drawer_inactivating=new Set;this.addDrawer=(t,e)=>{let{style:n={},hidden:i}=this.$props,{component:s,icon:a,title:_,active:c,state:p={},width:u=0,height:d=zn}=e,{y:m=0}=p,{color:h="currentColor",backgroundColor:f=Lt}=n;this._drawer[t]=e;let b=new Ah({className:"cabinet-drawer",component:s,active:c,icon:a,title:_,y:m,width:u,height:d,hidden:i,style:{backgroundColor:f,color:h}},this.$system);b.addEventListener(mt("active",()=>{this._incDrawerZIndex(t),this._memSetActive(t,!0),this._drawer_y[t]=this._drawer_node[t].y;let v=this._drawer[t],x=this._drawer_node[t],{component:I}=v;I.$element.style.pointerEvents="none",I&&(this._fixed_drawer_node.add(t),x.fy=x.y,x.height=v.height,this._startSimulation()),this._component_frame[t].setProp("disabled",!1),this.dispatchEvent("draweractive",{drawerId:t})})),b.addEventListener(mt("activated",()=>{let v=this._drawer[t],{component:x}=v;x.$element.style.pointerEvents="auto"})),b.addEventListener(mt("inactive",()=>{var E;this._memSetActive(t,!1);let v=this._drawer[t],{component:x}=v;if(x){let D=(E=this._drawer_y[t])!=null?E:this._height/2;this._drawer_inactivating.add(t),setTimeout(()=>{this._drawer_inactivating.delete(t),this._startSimulation(.05)},200),this._addDrawerNode(t,D),this._startSimulation(.05)}this._component_frame[t].setProp("disabled",!0),this.dispatchEvent("drawerinactive",{drawerId:t})})),b.addEventListener(mt("dragstart",({y:v})=>{this._incDrawerZIndex(t),this._drawer_y[t]=v,this._on_drawer_drag_start(t,v)})),b.addEventListener(mt("dragged",({y:v})=>{this._drawer_y[t]=v,this._on_drawer_dragged(t,v)})),b.addEventListener(mt("dragend",()=>{this._on_drawer_drag_end(t)})),this._drawer_component[t]=b,this._cabinet.appendChild(b);let{frame:g}=b;this._component_frame[t]=g,s&&g.appendChild(s),c||this._addDrawerNode(t,m)};this._addDrawerNode=(t,e)=>{let i=zn/2,s={_x:0,_y:e,ax:0,ay:0,x:0,y:e,fx:void 0,fy:void 0,shape:"rect",r:i,width:0,height:zn,vx:0,vy:0,hx:0,hy:0};this._drawer_node[t]=s};this._removeDrawerNode=t=>{delete this._drawer_node[t]};this._fixed_drawer_node=new Set;this._startSimulation=(t=.1)=>{this._simulation.alpha(t),this._simulation.start()};this._incDrawerZIndex=t=>{let e=this._drawer_component[t];e.drawer.$element.style.zIndex=`${this._z_index}`,this._z_index++};this._on_resize=(t,e)=>{var s;let i=(e-this._height)/2;this._width=t,this._height=e;for(let a in this._drawer_component){let _=(s=this._drawer_y[a])!=null?s:0,c=this._drawer_component[a],p=rn(_+i,0,e-zn+1);c.setProp("y",p);let u=this._drawer_node[a];u&&(u.y+=i)}this._tick()};this._hidden=!1;let{className:n,style:i={},dy:s=0}=t;this._dy=0;let a=new st({className:Xt("cabinet",n),style:S(S({},KE),i)},this.$system);this._cabinet=a,this._simulation=new os({n:6,force:this._force}),this._simulation.nodes(this._drawer_node),this._simulation.addListener("tick",this._tick);let _=yt(e);this.$element=_,this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({cabinet:a}),this.registerRoot(a)}_memSetActive(t,e){e?this._drawer_active.add(t):this._drawer_active.delete(t)}onPropChanged(t,e){if(t==="className")this._cabinet.setProp("className",e);else if(t==="style"){this._cabinet.setProp("style",S(S({},KE),e));let{style:n={}}=this.$props,{color:i="currentColor",backgroundColor:s=Lt}=n;for(let a in this._component_frame){let _=this._drawer_component[a];ft(_,{color:i,backgroundColor:s})}}else t==="disabled"||(t==="hidden"?this._hidden&&!e?this.show(!1):!this._hidden&&e&&this.hide(!1):t==="dy"&&(this._dy=e!=null?e:0,this._startSimulation()))}setActive(t,e){this._drawer_component[t].setProp("active",e)}isActive(t){return this._drawer_active.has(t)}getDrawer(t){return this._drawer_component[t]}setDrawerProp(t,e,n){this.getDrawer(t).setProp(e,n)}removeDrawer(t){let e=this._drawer_component[t];this._cabinet.removeChild(e),delete this._drawer[t],delete this._drawer_component[t],delete this._drawer_node[t],delete this._drawer_y[t],delete this._drawer_active[t]}getDrawers(){return this._drawer_component}onMount(){let{$width:t,$height:e}=this.$context;this._width=t,this._height=e,this._context_unlisten=Be(this.$context,[Un(this._on_context_resize)]),this._startSimulation()}onUnmount(){this._simulation.stop(),this._context_unlisten()}show(t){this._hidden=!1;for(let e in this._drawer_component)this._drawer_component[e].show(t)}hide(t){this._hidden=!0;for(let e in this._drawer_component)this._drawer_component[e].hide(t)}};l();var WE={cursor:"pointer",color:"currentColor",touchAction:"none"},Mn=class extends W{constructor(t,e){super(t,e);this._hovered=!1;this._update_color=()=>{this._icon_comp.$element.style.color=this._current_color()};this._current_color=()=>{let{$theme:t}=this.$context,{style:e={},active:n,disabled:i}=this.$props,{color:s="currentColor"}=e;pS(s)&&(s=_a(s));let a=d0(s),{disabledColor:_=a?Xn(t,s,75):"currentColor",hoverColor:c=a?Xn(t,s,-60):"currentColor",activeColor:p=a?Xn(t,s,-90):"currentColor"}=this.$props,u;return i?u=_:n?u=p:this._hovered?u=c:u=s,u};this._on_pointer_enter=()=>{this._hovered=!0,this._update_color()};this._on_pointer_leave=()=>{this._hovered=!1,this._update_color()};let{className:n,icon:i="question",title:s,style:a={}}=this.$props,_=new $e({className:n,icon:i,title:s,style:S(S({},WE),a)},this.$system);_.addEventListener(Ye(this._on_pointer_enter)),_.addEventListener(Ee(this._on_pointer_leave)),this._icon_comp=_;let c=yt(e);this.$element=c,this.$slot={default:_},this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({icon_comp:_}),this.registerRoot(_)}onPropChanged(t,e){t==="icon"?this._icon_comp.setProp("icon",e):t==="style"?this._icon_comp.setProp("style",_t(S(S({},WE),e),{color:this._current_color()})):(t==="active"||t==="disabled"||t==="activeColor"||t==="disabledColor")&&this._update_color()}};l();l();var $v=["info","change","remove","add","data","multiselect"];l();var qE={width:"21px",height:"21px"},Oh=class extends W{constructor(t,e){super(t,e);let{title:n}=this.$props,{className:i,icon:s,activeColor:a,hoverColor:_,active:c,style:p={}}=this.$props,u=new Mn({className:Xt("mode-button",i),icon:s,style:S(S({},qE),p),title:n,active:c,activeColor:a,hoverColor:_||a},this.$system);u.preventDefault("mousedown"),u.preventDefault("touchdown"),this._icon_button=u;let d=yt(e);this.$element=d,this.$slot={default:u},this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({icon_button:u}),this.registerRoot(u)}onPropChanged(t,e){t==="style"?this._icon_button.setProp("style",S(S({},qE),e)):t==="active"?this._icon_button.setProp("active",e):t==="activeColor"?this._icon_button.setProp("activeColor",e):t==="hoverColor"&&this._icon_button.setProp("hoverColor",e)}};var YE={width:"auto",height:"195px",display:"flex",flexDirection:"column",gap:"12px",padding:"6px",borderWidth:"1px",borderStyle:"solid",borderColor:"currentColor",borderLeft:"none",borderTopRightRadius:"3px",borderBottomRightRadius:"3px",boxSizing:"content-box"},$h=4,Lh=12,Uh=21,EM={none:0,info:6,change:6+1*Uh+Lh+$h,remove:6+2*Uh+1*Lh+4*$h,add:6+3*Uh+1*Lh+7*$h,data:6+4*Uh+1*Lh+10*$h,multiselect:6+5*Uh+2*Lh+11*$h},wM={info:"description",change:"exchange",remove:"x",add:"plus-2",data:"data",multiselect:"brackets"},ar=class extends W{constructor(t,e){super(t,e);this._mode_button_container={};this._mode_button={};this._mode="none";this._mode_active_color=t=>{let{$theme:e}=this.$context,{style:n={}}=this.$props,{color:i="currentColor"}=n;return Ze(e,t,i)};this._toggle_mode=t=>{this._mode===t?this._mode!=="none"&&this._enter_mode("none"):this._enter_mode(t)};this._enter_mode=t=>{let{disabled:e}=this.$props;if(!e){if(this._mode!==t){let n=this._mode;n!=="none"&&this._mode_button[n].setProp("active",!1),this._mode=t,t!=="none"&&this._mode_button[t].setProp("active",!0)}if(this.dispatchEvent("entermode",{mode:t}),t==="none")ft(this._selector,{borderColor:Lt});else{let n=EM[t];ft(this._selector,{top:`${n-2}px`,borderColor:this._mode_active_color(t)})}}};this._reset_color=()=>{if(this.$context){let{$theme:t}=this.$context,{style:e={}}=this.$props,{color:n="currentColor"}=e;for(let i of $v){let s=this._mode_button[i],a=Ze(t,i,n);ft(s,{color:n}),s.setProp("hoverColor",a),s.setProp("activeColor",a)}}};let{className:n,style:i={}}=this.$props,{color:s="currentColor"}=i,a=new st({style:S({position:"absolute",width:"23px",height:"23px",left:"4px",top:"4px",borderRadius:"1px",boxSizing:"borderBox",pointerEvents:"none",borderWidth:"1px",borderStyle:"solid",borderColor:Lt},ne("none"))},this.$system);this._selector=a,this._mode_button={};for(let u of $v){let d="currentColor",m=wM[u],h=new st({style:{position:"relative",height:"21px",width:"21px"}},this.$system),f=new Dn({style:{position:"absolute",top:"0px",left:"0px",width:"33px",height:"33px",transform:"translate(-6px, -6px)",stroke:"transparent",zIndex:"-1",fill:"transparent",cursor:"pointer"}},this.$system),b=new Oh({icon:m,style:{position:"relative",overflow:"visible",color:s},title:u,activeColor:d},this.$system);b.appendChild(f),h.addEventListener(ae({onClick:()=>{this._toggle_mode(u)}})),h.appendChild(b),this._mode_button[u]=b,this._mode_button_container[u]=h}let _=new st({className:Xt("mode-crud",n),style:S({width:"21px",height:"128px",display:"flex",flexDirection:"column",paddingTop:"4px",paddingBottom:"4px",gap:"12px",zIndex:"-1"},ne("none"))},this.$system);_.registerParentRoot(this._mode_button_container.change),_.registerParentRoot(this._mode_button_container.remove),_.registerParentRoot(this._mode_button_container.add),_.registerParentRoot(this._mode_button_container.data);let c=new st({className:Xt("modes-list"),style:S(S({},YE),i)},this.$system);this._modes=c,c.registerParentRoot(a),c.registerParentRoot(this._mode_button_container.info),c.registerParentRoot(_),c.registerParentRoot(this._mode_button_container.multiselect);let p=yt(e);this.$element=p,this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({list:c,crud:_,selector:a,info:this._mode_button.info,change:this._mode_button.change,remove:this._mode_button.remove,add:this._mode_button.add,data:this._mode_button.data,multiselect:this._mode_button.multiselect}),this.registerRoot(c)}onPropChanged(t,e){t==="style"?(this._modes.setProp("style",S(S({},YE),e)),this._reset_color()):t==="mode"&&this._enter_mode(e)}getMode(){return this._mode}onMount(){this._context_unlisten=Be(this.$context,[mt("themechanged",this._reset_color)])}onUnmount(t){this._context_unlisten()}};l();var _w=Vw(ZE());l();function QE(r){return o=>PM(o,r)}function PM(r,o){let{$element:t}=r,e=n=>{let{relatedTarget:i}=n;o({relatedTarget:i},n)};return t.addEventListener("focusin",e),()=>{t.removeEventListener("focusin",e)}}l();function tw(r){return o=>kM(o,r)}function kM(r,o){let{$element:t}=r,e=n=>{let{relatedTarget:i}=n;o({relatedTarget:i},n)};return t.addEventListener("focusout",e),()=>{t.removeEventListener("focusout",e)}}l();function ew(r){return o=>CM(o,(t,e)=>{r(t,e)})}function CM(r,o){let{$element:t}=r,e=n=>{let{}=n;o({},n)};return t.addEventListener("scroll",e,{passive:!0}),()=>{t.removeEventListener("scroll",e)}}l();var TM="0123456789";function q0(r){return TM.indexOf(r[0])>-1}function nw(r,o,t){let e=_h(r,o,!0),n=_h(r,t,!0);return e<n?-1:e>n?1:AM(r,o,t)}function AM(r,o,t){let e=Bt(r,o),n=Bt(r,t),i=(e.name||"").toLowerCase(),s=(n.name||"").toLowerCase();return q0(i)&&!q0(s)?1:!q0(i)&&q0(s)||i<s?-1:i>s?1:0}l();var iw={touchAction:"none"},MM=r=>{let{specs:o}=r,t=new Set;for(let n in o){let i=o[n],{name:s=""}=i,a=s.split(" ");for(let _ of a)t.add(_)}let e=Array.from(t).sort();return b7(r,e)},_r=class extends W{constructor(t,e){super(t,e);this._on_pointer_down=(t,e)=>{let{disabled:n}=this.$props;if(n)return;let{pointerId:i}=t;this.setPointerCapture(i);let s=this.addEventListener(ue(()=>{let{pointerId:a}=t;this.releasePointerCapture(a),s(),this.stop()}));this.start()};this._on_transcript=t=>{this.$unit&&this.$unit.$setPinData({type:"output",pinId:"transcript",data:`"${t}"`}),this.dispatchEvent("transcript",t)};this._on_err=t=>{};let{className:n,style:i={},opt:s={grammars:void 0,lang:"en-us",maxAlternatives:1,continuous:!1,interimResults:!0},disabled:a=!1,tabIndex:_}=this.$props,c=new Mn({icon:"mic",className:n,style:S(S({},iw),i),activeColor:"rgb(201,64,49)",disabled:a,title:"microphone"},this.$system);c.addEventListener(le(this._on_pointer_down)),this._icon_button=c;let p=null;try{s.grammars||(s.grammars=MM(e))}catch(d){}try{p=new Jr(this.$system,s)}catch(d){}this._speech_recorder=p,this._speech_recorder&&(this._speech_recorder.addListener("transcript",this._on_transcript),this._speech_recorder.addListener("err",this._on_err));let u=yt(e);this.$unbundled=!1,this.$primitive=!0,this.$element=u,this.$slot=c.$slot,this.setSubComponents({icon_button:c}),this.registerRoot(c)}onPropChanged(t,e){t==="style"?this._icon_button.setProp("style",S(S({},iw),e)):t==="disabled"&&this._icon_button.setProp("disabled",e)}start(){this._icon_button.setProp("active",!0);try{this._speech_recorder&&this._speech_recorder.start()}catch(t){}}stop(){this._icon_button.setProp("active",!1),this._speech_recorder&&this._speech_recorder.stop()}};l();l();var pr=class extends W{constructor(t,e){super(t,e);let{value:n=""}=t,i=this.$system.api.document.createTextNode(n);this._text_el=i,this.$element=i}onPropChanged(t,e){t==="value"&&(this._text_el.nodeValue=e!=null?e:"")}focus(t={preventScroll:!0}){}blur(){}onMount(){}onUnmount(){}domAppendChild(t){}domRemoveChild(t){}domInsertParentChildAt(t){}domRemoveParentChildAt(t){}};var ow={height:"fit-content"},ki=class extends W{constructor(t,e){super(t,e);this._prop_handler={style:(t={})=>{this._div.setProp("style",S(S({},ow),t))},className:t=>{this._div.setProp("className",t)},tabIndex:t=>{this._div.setProp("tabIndex",t)},title:t=>{this._div.setProp("title",t)},value:t=>{this._text.setProp("value",t)}};let{className:n,style:i,tabIndex:s,title:a,draggable:_,value:c}=this.$props,p=yt(e),u=new st({style:S(S({},ow),i),className:n,tabIndex:s,title:a,draggable:_},this.$system);this._div=u;let d=new pr({value:c},this.$system);this._text=d,u.registerParentRoot(d),this.$element=p,this.$slot={default:u},this.setSubComponents({div:u,text:d}),this.registerRoot(u)}onPropChanged(t,e){this._prop_handler[t](e)}};l();var OM=39,sw={height:`${OM}px`,width:"100%",color:"currentColor",borderTopWidth:"0",borderTopStyle:"solid",borderTopColor:"currentColor",backgroundColor:Lt,borderRadius:"3px 3px 0 0",fontSize:"16px",textAlign:"center"},Gh=class extends W{constructor(t,e){super(t,e);let{className:n,style:i,disabled:s}=this.$props,a=new wi({className:Xt("search-input",n),style:S(S({},sw),i),maxLength:30,disabled:s,tabIndex:-1},this.$system);this._input=a;let _=yt(e);this.$element=_,this.$slot={default:a},this.registerRoot(a)}onPropChanged(t,e){t==="style"?this._input.setProp("style",S(S({},sw),e)):t==="disabled"?this._input.setProp("disabled",e):t==="tabIndex"?this._input.setProp("tabIndex",e):t==="value"&&this._input.setProp("value",e)}setSelectionRange(t,e,n){this._input.setSelectionRange(t,e,n)}};var Lv=40,rw={position:"relative",width:"calc(100% + 4px)",maxWidth:"309px",height:"initial",borderWidth:"1px 1px 0px 1px",borderStyle:"solid",color:"currentColor",borderColor:"currentColor",padding:"0",backgroundColor:Lt,borderTopLeftRadius:"3px",borderTopRightRadius:"3px"},$M={rect:"square",circle:"circle"};function aw(r,o){let t=Bt(r,o),{private:e}=t;return!e}function LM(r,o){let t=bi(o.replace("-"," "));return _w.match(t,r,{caseSensitive:!1})}var Rh=class extends W{constructor(t,e){super(t,e);this._input_value="";this._shape="circle";this._id_list=[];this._ordered_id_list=[];this._filtered_id_list=[];this._item={};this._filtered_list_item=[];this._list_item_div={};this._list_item_content={};this._list_item_name={};this._list_hidden=!0;this._selected_id=null;this._selected_index=0;this._scrollTop=0;this._reset=()=>{this._list.removeChildren(),this._item={},this._list_item_div={},this._list_item_content={},this._list_item_name={},this._refresh_ordered_list();let t=this._ordered_id_list.length,e=0;for(let n of this._ordered_id_list)this._add_list_item(n,e,t),e++};this._refresh_ordered_list=()=>{let{specs:t}=this._registry,e=J(t);this._id_list=e;let i=e.filter(s=>aw(t,s)).sort((s,a)=>nw(t,s,a));this._ordered_id_list=i,this._filtered_id_list=i};this._set_list_item_color=(t,e)=>{let n=this._list_item_content[t];n&&(n.$element.style.color=e)};this._listen_registry=()=>{this._registry_unlisten=this._registry.specs_.subscribe([],"*",(t,e,n,i)=>{let{specs:s}=this._registry,a=n,_=i;if(e.length===0){if(t==="set"){if(aw(s,_.id)){this._item[a]?this._refresh_list_item(a):this._add_list_item(a,Math.floor(this._ordered_id_list.length/2),this._ordered_id_list.length);let c=this._selected_id;this._refresh_ordered_list(),this._filter_list(!0),!this._list_hidden&&c&&this._set_selected_item_id(c,!1)}}else if(t==="delete"){let c=n;if(Xg(_))return;this._remove_list_item(c);let p=this._selected_id;this._refresh_ordered_list(),this._filter_list(!0),p===c&&(this._list_hidden||this._select_first_list_item())}}}),this._reset()};this._unlisten_registry=()=>{this._registry_unlisten(),this._registry_unlisten=void 0};this._add_list_item=(t,e,n)=>{let{specs:i}=this._registry,s=Bt(i,t),{name:a="",metadata:_={}}=s,c=_.icon||"question",p=_.tags||["user"],u=p.join(" "),d=a,m=a||ao;this._item[t]={id:t,name:a,icon:c,tags:p,fuzzyName:d};let h=new $e({style:{width:"18px",height:"18px",margin:"9px"},icon:c},this.$system),f=new ki({style:S({width:"fit-content",height:"18px",marginBottom:"2px"},ne("none")),value:m},this.$system);this._list_item_name[t]=f;let b=new ki({style:{fontSize:"12px",width:"fit-content",height:"12px",marginBottom:"1px"},value:u},this.$system),g=new st({style:{display:"flex",flexDirection:"column",justifyContent:"center",marginBottom:"2px"}},this.$system);g.appendChild(f),g.appendChild(b);let v=new st({className:"search-list-item-content",style:{display:"flex",width:"100%",alignItems:"center",height:`${Lv-1}px`,backgroundColor:Lt}},this.$system);v.appendChild(h),v.appendChild(g),this._list_item_content[t]=v;let x=e<n-1?"1px solid currentColor":"",I=new st({className:"search-list-item",style:{borderBottom:x,boxSizing:"border-box",width:`${309-1}px`,scrollSnapAlign:"start"},data:{id:t}},this.$system);I.preventDefault("mousedown"),I.preventDefault("touchdown"),I.appendChild(v),I.addEventListener(Ye(E=>{this._on_list_item_pointer_enter(E,t)})),I.addEventListener(ae({onClick:E=>{this._on_list_item_click(E,t)}})),this._list_item_div[t]=I,this._list.appendChild(I)};this._remove_list_item=t=>{let e=this._list_item_div[t];this._list.removeChild(e),delete this._list_item_div[t],delete this._item[t],delete this._list_item_name[t],delete this._list_item_content[t],vn(this._filtered_id_list,t),vn(this._ordered_id_list,t)};this._refresh_list_item=t=>{let e=this._list_item_div[t],n=this._list_item_name[t],i=this._registry.getSpec(t),{name:s="",metadata:a={}}=i,_=s||ao,c=a.icon||"question",p=a.tags||[],u=p.join(" "),d=s;e.$element.style.borderBottom="1px solid currentColor",this._item[t]={id:t,name:s,icon:c,tags:p,fuzzyName:d},n.setProp("value",_)};this._on_microphone_transcript=g0(this.$system,t=>{let e=t.toLowerCase().substr(0,30);this._input.setProp("value",e),this._input_value=e,this._filter_list(),this._input.focus()},100);this._on_input_keydown=({keyCode:t,repeat:e},n)=>{(t===38||t===40||t===186)&&n.preventDefault(),e&&(t===8||n.preventDefault())};this._on_input_focus_in=()=>{this._select_all(),this._show_list()};this._select_all=()=>{this._input.setSelectionRange(0,this._input_value.length)};this._on_input_click=()=>{};this._on_input_focus_out=()=>{this._hide_list()};this._show_list=()=>{let{style:t={}}=this.$props,{color:e="currentColor"}=t;this._list_hidden=!1;let n=this._filtered_id_list.length,i=n===0;if(this._list.$element.style.display="block",this._input._input.$element.style.borderRadius=i?"3px 3px 0 0":"0 0 0 0",this._input._input.$element.style.borderTopWidth=i?"0px":"1px",!i){let s=this._filtered_id_list[n-1],a=this._list_item_div[s];a.$element.style.borderBottom=e,this._selected_id&&this._scroll_into_item_if_needed(this._selected_id,!1)}this._dispatch_list_shown(),this._selected_id&&this._dispatch_item_selected(this._selected_id)};this._dispatch_item_selected=t=>{this.dispatchEvent("selected",{id:t})};this._dispatch_shape=()=>{this.dispatchEvent("shape",{shape:this._shape})};this._dispatch_item_pick=t=>{this.dispatchEvent("pick",{id:t})};this._dispatch_list_shown=()=>{this.dispatchEvent("shown",{})};this._dispatch_list_hidden=()=>{this.dispatchEvent("hidden",{})};this._dispatch_list_empty=()=>{this.dispatchEvent("empty",{})};this._select_first_list_item=()=>{let t=this._filtered_id_list[0];this._top_element_index=0,this.set_selected_item_id(t,!0)};this._hide_list=()=>{this._list_hidden=!0,this._input._input.$element.style.borderTopWidth="0",this._list.$element.style.display="none",this._dispatch_list_hidden()};this._on_list_item_pointer_enter=({},t)=>{this.set_selected_item_id(t)};this._on_list_item_click=({},t)=>{this._dispatch_item_pick(t)};this.set_selected_item_id=(t,e=!1)=>{let n=this._selected_id;this._set_selected_item_id(t,e),this._selected_id!==n&&this._dispatch_item_selected(t)};this._set_selected_item_id=(t,e=!1)=>{let{style:n={},selectedColor:i="currentColor"}=this.$props,{color:s="currentColor"}=n;this._selected_id&&this._set_list_item_color(this._selected_id,s),this._selected_id=t,this._set_list_item_color(t,i),this._list_hidden||this._scroll_into_item_if_needed(t,e)};this.select_next=t=>{let e=0;this._selected_id&&(e=this._ordered_id_list.indexOf(this._selected_id));let n=rn(e+t,0,this._ordered_id_list.length-1),i=this._ordered_id_list[n];this.set_selected_item_id(i)};this._top_element_index=0;this._scroll_into_item_if_needed=(t,e=!1)=>{let{scrollTop:n}=this._list.$element,i=n/Lv,s=this._filtered_id_list.indexOf(t);(e||s-i>=4||s-i<0)&&(this._list_item_div[t].$element.scrollIntoView({behavior:"auto",block:"start"}),this._top_element_index=s)};this._filter_list=(t=!1)=>{let{specs:e}=this._registry,{style:n={},filter:i=()=>!0}=this.$props,{color:s="currentColor"}=n,a=this._selected_id;if(this._filtered_id_list.length>0){let d=this._filtered_id_list[this._filtered_id_list.length-1],m=this._list_item_div[d];m&&(m.$element.style.borderBottom="1px solid currentColor")}let _=[],c={},p=this._input_value;for(let d of this._ordered_id_list){if(!this._item[d])continue;let{fuzzyName:m}=this._item[d],h=this._list_item_div[d],f=LM(m,p);if((p===""||f)&&i(d)&&(this._shape==="circle"||on(e,d))){if(c[d]=0,f){let{score:b}=f;c[d]=b}h.$element.style.display="flex",_.push(d)}else h.$element.style.display="none"}_=_.sort((d,m)=>{let h=c[d];return c[m]-h}),this._filtered_id_list=_;let u=_.length;if(u>0){for(let d=0;d<u;d++){let m=this._filtered_id_list[d],h=this._list_item_div[m];this._list.removeChild(h),this._list.appendChild(h)}if(!this._list_hidden){let d=_[u-1],m=this._list_item_div[d];m.$element.style.borderBottom=s,this._input._input.$element.style.borderRadius="0",this._input._input.$element.style.borderTopWidth="1px"}t?this._selected_id?this._filtered_id_list.includes(this._selected_id)?(this._top_element_index=0,this._scroll_into_item_if_needed(this._selected_id,!1)):this._select_first_list_item():this._select_first_list_item():this._select_first_list_item()}else this._input._input.$element.style.borderRadius="3px 3px 0px 0px",this._input._input.$element.style.borderTopWidth="0",this._selected_id&&this._set_list_item_color(this._selected_id,s),this._selected_id=null,this._dispatch_list_empty()};this._on_input_input=t=>{if(t===";"){this._setValue(this._input_value);return}this._input_value=t,this._filter_list()};this._on_arrow_down_keydown=()=>{if(!this._list_hidden&&this._selected_id){let t=this._filtered_id_list.indexOf(this._selected_id);if(t<this._filtered_id_list.length-1){let e=t+1,n=this._filtered_id_list[e];this.set_selected_item_id(n)}}};this._on_arrow_up_keydown=()=>{if(!this._list_hidden&&this._selected_id){let t=this._filtered_id_list.indexOf(this._selected_id);if(t>0){let e=t-1,n=this._filtered_id_list[e];this.set_selected_item_id(n)}}};this._on_ctrl_p_keydown=()=>{setTimeout(()=>{this._hide_list()},0)};this._on_escape_keydown=()=>{setTimeout(()=>{this._hide_list()},0)};this._on_enter_keydown=()=>{!this._list_hidden&&this._selected_id&&setTimeout(()=>{this._selected_id&&(this._select_all(),this._dispatch_item_pick(this._selected_id))},0)};this.getValue=()=>this._input_value;this.getShape=()=>this._shape;this.setValue=t=>{this._setValue(t),this._filter_list()};this._setValue=t=>{this._input_value=t,this._input.setProp("value",t)};this.toggleShape=()=>{let t=this._shape==="circle"?"rect":"circle";this.setShape(t)};this.setShape=t=>{this._shape!==t&&(this._shape=t,this._shape_button.setProp("icon",$M[t]),this._dispatch_shape(),this._filter_list())};let{className:n,style:i={},selected:s,registry:a}=this.$props;this._registry=a!=null?a:this.$system;let _=new st({className:"search-list",style:{position:"relative",maxHeight:`${4*Lv-2}px`,overflowY:"auto",overflowX:"hidden",display:this._list_hidden?"none":"block",width:"calc(100% + 3px)",boxSizing:"content-box",scrollSnapType:"y mandatory"}},this.$system);_.addEventListener(ew(h=>{this._scrollTop=this._list.$element.scrollTop})),this._list=_,this._reset();let c=new Gh({},this.$system);c.addEventListener(yo(this._on_input_keydown)),c.addEventListener(QE(this._on_input_focus_in)),c.addEventListener(tw(this._on_input_focus_out)),c.addEventListener(ui(this._on_input_input)),c.addEventListener(bo([{combo:"ArrowDown",keydown:this._on_arrow_down_keydown,multiple:!0},{combo:"ArrowUp",keydown:this._on_arrow_up_keydown,multiple:!0},{combo:"Escape",keydown:this._on_escape_keydown},{combo:["Ctrl + ;",";"],keydown:this._on_ctrl_p_keydown,strict:!1},{combo:";",keydown:(h,{ctrlKey:f})=>{f&&this._on_ctrl_p_keydown()}},{combo:["Enter","Shift + Enter"],keydown:this._on_enter_keydown}])),this._input=c;let p=new _r({style:{position:"absolute",right:"0",bottom:"0",width:"18px",height:"18px",padding:"11px 9px 10px 11px"}},this.$system);p.addEventListener(mt("transcript",this._on_microphone_transcript)),p.preventDefault("mousedown"),p.preventDefault("touchdown"),this._microphone=p;let u=new Mn({icon:"circle",style:S({position:"absolute",left:"0",bottom:"0px",width:"18px",height:"18px",padding:"11px 11px 10px 9px"},ne("none")),title:"layout"},this.$system);u.addEventListener(ae({onClick:()=>{this.toggleShape()}})),u.preventDefault("mousedown"),u.preventDefault("touchdown"),this._shape_button=u;let d=new st({className:Xt("search",n),style:S(S({},rw),i),title:"search"},this.$system);d.registerParentRoot(_),d.registerParentRoot(c),d.registerParentRoot(u),d.registerParentRoot(p),this._search=d;let m=yt(e);this.$element=m,this.$slot={default:d},this.$unbundled=!1,this.$primitive=!0,s?this._filtered_id_list.includes(s)&&this._set_selected_item_id(s):this._ordered_id_list.length>0&&this._select_first_list_item(),this.registerRoot(d),this._listen_registry()}onPropChanged(t,e){if(t==="style"){let n=S(S({},rw),e);this._search.setProp("style",n)}else if(t==="selectedColor"){if(this._selected_id){let{selectedColor:n="currentColor"}=this.$props;this._set_list_item_color(this._selected_id,n)}}else if(t==="selected"){let{selected:n}=this.$props;n&&this._set_selected_item_id(n)}else if(t==="filter")this._filter_list();else if(t==="registry"){if(this._registry===e)return;this._registry=e!=null?e:this.$system,this._unlisten_registry(),this._listen_registry()}}focus(t={preventScroll:!0}){this._input._input.focus(t)}blur(){this._input._input.blur()}getList(){return this._filtered_id_list}onMount(){}onUnmount(){}onConnected(){}onDestroy(){this._unlisten_registry()}};var pw={position:"relative",width:"100%",height:"100%",overflow:"hidden",zIndex:"3"},Nh=class extends W{constructor(t,e){super(t,e);this._hidden=!0;this._manually_changed_color=!1;this._get_color=()=>{let{$theme:t,$color:e}=this.$context,{style:n={}}=this.$props,{color:i=e}=n;return i};this._background_color=()=>{let{$theme:t}=this.$context;return Qo(xo(t),.75)};this._refresh_color=()=>{let t=this._get_color(),e=this._background_color();ft(this._cabinet,{backgroundColor:e}),ft(this._modes,{backgroundColor:e}),ft(this._search,{backgroundColor:e}),ft(this._minimap,{color:t})};this._init=!1;this._on_context_theme_changed=()=>{let{$theme:t}=this.$context;if(this.$context.$parent===null&&(document.body.style.backgroundColor=xo(t)),!this._manually_changed_color){let e=pa(t);yl(this.$context,e),this._color_picker.setProp("value",e)}this._refresh_color()};this._on_context_color_changed=()=>{this._refresh_color()};this._animate_background=(t,e)=>{var s,a;let n=e?Ji:0,i="forwards";(a=(s=this._background.$element)==null?void 0:s.animate)==null||a.call(s,t,{duration:n,fill:i})};this._animate_search=(t,e)=>{var s,a;let n=e?Ji:0,i="forwards";this._search_animation&&(this._search_animation.pause(),this._search_animation.commitStyles()),this._search_animation=(a=(s=this._search._search.$element)==null?void 0:s.animate)==null?void 0:a.call(s,t,{duration:n,fill:i})};this.hide_background=t=>{this._animate_background({opacity:"0.25"},t)};this.hide_search=t=>{ft(this._search,{transform:"translate(-50%, 100%)",transition:An(t,"transform")})};this._animate_modes=(t,e)=>{var s,a;let n=e?Ji:0,i="forwards";this._modes_animation&&(this._modes_animation.pause(),this._modes_animation.commitStyles()),this._modes_animation=(a=(s=this._modes._modes.$element).animate)==null?void 0:a.call(s,[t],{duration:n,fill:i})};this.hide_modes=(t=!0)=>{ft(this._modes,{transform:"translate(-100%, -50%)",transition:An(t,"transform")})};this.hide_cabinet=t=>{this._cabinet.hide(t)};this.show_background=t=>{this._animate_background({opacity:"1"},t)};this.show_search=t=>{ft(this._search,{transform:"translate(-50%, 0%)",transition:An(t,"transform")})};this.show_modes=t=>{ft(this._modes,{transform:"translate(0%, -50%)",transition:An(t,"transform")})};this.show_cabinet=t=>{this._cabinet.show(t)};let{className:n,style:i={}}=this.$props,s=new ar({className:"graph-gui-crud",style:{position:"absolute",top:"50%",left:"0px",transform:"translate(0%, -50%)",backgroundColor:"none",pointerEvents:"all"}},this.$system);this._modes=s;let a=new Rh({style:{position:"absolute",bottom:"0",left:"50%",transform:"translate(-50%, 0%)",backgroundColor:"none",pointerEvents:"all"}},this.$system);this._search=a;let _=new Xs({width:as,height:Qi,nodes:{},links:{},style:{position:"absolute",width:"100%",height:"100%",touchAction:"none"},padding:1*24},this.$system);this._minimap=_;let c=new st({style:{position:"absolute",width:`${Qi}px`,height:`${Qi*1.5}`,touchAction:"none"}},this.$system);this._history=c;let{component:p}=jE(this.$system,b6,{style:{height:"26px",marginBottom:"3px",borderWidth:"1px",borderStyle:"solid",borderColor:"currentColor",borderRadius:"3px",backgroundColor:Lt,cursor:"pointer"},sliderStyle:{borderRadius:"1.5px",cursor:"pointer",transition:An(this.$system.animated,"left","background-color")}});p.addEventListener(ui(C=>{C?qo(this.$context,"light"):qo(this.$context,"dark")}));let u=new rr({value:"#ffffff",style:{position:"relative",height:"26px",width:"100%",borderWidth:"1px",borderStyle:"solid",borderColor:"currentColor",borderRadius:"3px",boxSizing:"border-box"}},this.$system);u.addEventListener(ui(C=>{this._manually_changed_color=!0,yl(this.$context,C),this._refresh_color()})),this._color_picker=u;let d=new st({style:{className:"gui-color-pallete",position:"relative",display:"flex",flexDirection:"column"}},this.$system);d.appendChild(p),d.appendChild(u),this._color_pallete=d;let m=new Mn({icon:"folder",style:{width:"21px",height:"21px",padding:"6px"}},this.$system);this._folder=m;let h=new Mn({icon:"upload",style:{width:"21px",height:"21px",padding:"6px"}},this.$system);this._export=h;let f=new Mn({icon:"import",style:{width:"21px",height:"21px",padding:"6px"}},this.$system);this._import=f;let b=new st({style:{display:"flex",flexDirection:"column",justifyContent:"center",height:"fit-content"}},this.$system);b.appendChild(m),b.appendChild(h),b.appendChild(f),this._share=b;let g=new Mh({className:"graph-gui-cabinet",style:{backgroundColor:"none",pointerEvents:"all"}},this.$system);g.addEventListener(mt("draweractive",({drawerId:C})=>{C==="theme"&&qo(this.$context,"light")})),g.addEventListener(mt("drawerinactive",({drawerId:C})=>{C==="theme"&&qo(this.$context,"dark")})),this._cabinet=g;let v=new st({className:"gui-background",style:{position:"absolute",top:"0px",left:"0px"}},this.$system);this._background=v;let x=new ln({className:"gui-control",style:{position:"absolute",top:"0px",overflow:"visible",background:"none",pointerEvents:"none"}},this.$system);x.registerParentRoot(s),x.registerParentRoot(a),x.registerParentRoot(g);let I=new sr({className:"gui-main",style:{}},this.$system),E=new st({className:"gui-foreground",style:{position:"absolute",top:"0px",left:"0px",pointerEvents:"none"}},this.$system),D=new st({className:Xt("gui",n),style:{position:"relative",width:"100%",height:"100%",overflow:"hidden"}},this.$system);D.registerParentRoot(v),D.registerParentRoot(I),D.registerParentRoot(x),D.registerParentRoot(E),this._gui=D;let w=new st({className:Xt("gui-root",n),style:S(S({},pw),i)},this.$system);w.registerParentRoot(D),this._container=w,this._container.$ref.control=this,this._container.$ref.cabinet=g,this._container.$ref.export=h,this._container.$ref.import=f,this._container.$ref.minimap=_,this._container.$ref.history=c,this._container.$ref.modes=s,this._container.$ref.search=a;let T=yt(e);this.$element=T,this.$slot.default=I,this.$slot[1]=v,this.$slot[2]=E,this.$slotId={default:"main",1:"background",2:"foreground"},this.$slotTarget={default:"default",1:"default",2:"default"},this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({background:v,main:I,gui:D,modes:s,search:a,cabinet:g,control:x,foreground:E}),this.addEventListeners([mt("dock-move",({dy:C=0,dx:P=0})=>{this._hidden||(ft(x,{left:`${P}px`,width:`calc(100% - ${P}px)`,height:`calc(100% - ${C}px)`,transition:Gn("left","width","height","opacity")}),ft(x,{left:`${P}px`,width:`calc(100% - ${P}px)`,height:`calc(100% - ${C}px)`,transition:Gn("left","width","height","opacity")}),ft(v,{paddingBottom:`${C}px`,paddingLeft:`${P}px`,transition:Gn("padding-bottom","padding-left")}),C>0&&ft(a,{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"currentColor",borderBottomLeftRadius:"3px",borderBottomRightRadius:"3px",transition:Gn("border-bottom-color","border-bottom-left-radius","border-bottom-right-radius")}),P>0&&ft(s,{borderLeftWidth:"1px",borderLeftStyle:"solid",borderLeftColor:"currentColor",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px",transition:Gn("border-left-color","border-left-top-radius","border-left-bottom-radius")}))}),mt("dock-leave",()=>{this._hidden||(ft(x,{left:"0px",width:"100%",height:"100%"}),ft(a,{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"#00000000",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"}),ft(s,{borderLeftWidth:"1px",borderLeftStyle:"solid",borderLeftColor:"#00000000",borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px"}))})]),this.registerRoot(w)}onPropChanged(t,e){t==="style"&&(this._container.setProp("style",S(S({},pw),e)),this._refresh_color())}onMount(){if(!this._init){let{$height:t}=this.$context,e=t/2;this._cabinet.addDrawers({minimap:{icon:"graph",title:"minimap",component:this._minimap,active:!1,width:as,height:Qi,state:{y:e-82.765}},color:{icon:"palette",title:"color",component:this._color_pallete,active:!1,width:60,height:56,state:{y:e-17.5}},file:{icon:"share-2",title:"share",component:this._share,active:!1,width:30,height:97,state:{y:e+47.765}}}),this._init=!0,this._hidden&&this.hide(!1)}this._context_unlisten=Be(this.$context,[mt("themechanged",this._on_context_theme_changed),mt("colorchanged",this._on_context_color_changed)]),this._refresh_color()}onUnmount(t){this._context_unlisten()}hide(t=!1){this._hidden=!0,this.hide_background(t),this.hide_search(t),this.hide_modes(t),this.hide_cabinet(t)}is_hidden(){return this._hidden}show(t){this._hidden=!1,this.show_background(t),this.show_search(t),this.show_modes(t),this.show_cabinet(t)}};l();l();function cw(r,o,t){let e=({})=>{let n=1,i=()=>{clearTimeout(s),r.$element.removeEventListener("_dragleave",i),r.$element.removeEventListener("_dragdrop",i)},s,a=()=>{s=setTimeout(()=>{t(),n++,a()},n*o)};a(),r.$element.addEventListener("_dragleave",i),r.$element.addEventListener("_dragdrop",i)};return r.$element.addEventListener("_dragenter",e),()=>{r.$element.removeEventListener("_dragenter",e)}}var ps=33,cr=33,Da=9,UM=48,Ea=24,ur=class extends Cn{constructor(t,e){super(t,e);this._refresh_dock=()=>{let{$width:t,$height:e}=this.$context;if(this._get_screen_ratio()<1){let i=this._get_height(),s=this._y+i-e+3;s>=0?(this._last_dy>s?this._docking=!1:this._docking=!0,this._docked&&s>3?(this._docked=!1,this._docking||this.dispatchEvent("dock-move",{dy:s})):(this._docked=!0,this._docked_y=!0,this._docking&&this.dispatchEvent("dock-move",{dy:i+3+2})),this._last_dy=s):this._docked&&(this._docked=!1,this._docked_y=!1,this.dispatchEvent("dock-move",{dy:0}),this.dispatchEvent("dock-leave",{}))}else{let i=this._get_width(),s=this._x-(Ea+Da);if(s<=3){this._last_dx<s?this._docking=!1:this._docking=!0;let a=s;this._docked&&a>2?(this._docked=!1,this._docking||this.dispatchEvent("dock-move",{dx:s})):(this._docked=!0,this._docked_x=!0,this._docking&&this.dispatchEvent("dock-move",{dx:i+Ea+Da+3})),this._last_dx=s}else this._docked&&(this._docked=!1,this._docked_x=!1,this.dispatchEvent("dock-move",{dx:0}),this.dispatchEvent("dock-leave",{}))}};this._background_color=()=>{let{$theme:t}=this.$context;return Qo(xo(t),.75)};this._refresh_color=()=>{if(this._collapsed){let t=this._background_color();ft(this._root,{backgroundColor:t})}else ft(this._root,{backgroundColor:Lt})};this._set_z_index=t=>{this._z_index=t,ft(this._root,{zIndex:`${t}`})};this._z_index=2147483647;this._message_id={};this._clamp_x_y=()=>{let{$width:t,$height:e}=this.$context,n=this._get_width(),i=this._get_height();this._x=Io({a:this._x,min:this._collapsed?Da:Ea+Da,max:t-n-Da}).a,this._y=Io({a:this._y,min:0,max:this._collapsed?e:e-i}).a};let{icon:n,width:i=100,height:s=100,style:a={}}=this.$props,{x:_=0,y:c=0,collapsed:p=!0,_x:u=0,_y:d=0}=this.$props;this._x=_,this._y=c,this._collapsed=p,this._collapsed_x=this._x,this._collapsed_y=this._y,this._non_collapsed_x=this._x+ps+12+u,this._non_collapsed_y=this._y+d;let m=ps/i,h=cr/s,f=new st({className:"gui-control",style:S({position:"absolute",left:`${_}px`,top:`${c}px`,width:this._collapsed?`${ps}px`:`${i}px`,height:this._collapsed?`${cr}px`:`${s}px`,borderRadius:"3px",boxSizing:"content-box",borderWidth:"1px",borderStyle:"solid",borderColor:this._collapsed?"currentColor":Lt,transition:`opacity ${an}s linear`,zIndex:`${this._z_index}`,opacity:this._collapsed?`${fa}`:"0",touchAction:"none"},a)},this.$system),b=()=>{if(P===0){this._collapsed=!0,x(),x=E(f),this._x=this._collapsed_x||this._x+(i-ps)/2,this._y=this._collapsed_y||this._y+s-cr,this._clamp_x_y();let O=this._background_color();ft(f,{left:`${this._x}px`,top:`${this._y}px`,width:`${ps}px`,height:`${cr}px`,borderColor:"currentColor",backgroundColor:O,transition:Gn("left","top","width","height","border-color","border-radius","background-color")}),setTimeout(()=>{ft(f,{transition:`opacity ${an}s linear`})},Ji),ft(C,S({opacity:"0",transform:`scale(${m}, ${h})`,pointerEvents:"none"},ne("none"))),ft(k,{opacity:"1",pointerEvents:"auto"}),ft(M,{opacity:"0",pointerEvents:"none"}),T(),this._docked&&(this.dispatchEvent("dock-move",{dy:0,dx:0}),this.dispatchEvent("dock-leave",{}))}else this.dispatchContextEvent("_control_back",!1);this.dispatchEvent("collapse")},g=()=>{let{width:O,height:R}=this.$props;if(this._collapsed=!1,this._x=this._non_collapsed_x||(this._x-O+ps)/2,this._y=this._non_collapsed_y||this._y-R+cr,this._clamp_x_y(),ft(f,{left:`${this._x}px`,top:`${this._y}px`,width:`${O}px`,height:`${R}px`,borderColor:Lt,backgroundColor:Lt,transition:Gn("left","top","width","height","border-color","border-radius","background-color")}),ft(C,S({opacity:"1",transform:"scale(1, 1)",pointerEvents:"auto"},ne("auto"))),ft(M,{opacity:"1",pointerEvents:"auto"}),setTimeout(()=>{ft(f,{transition:`opacity ${an}s linear`}),ft(k,{pointerEvents:"none"})},Ji),ft(k,{opacity:"0"}),w(),this.dispatchEvent("uncollapse"),x(),x=E(M),this._docked){let N=this._get_height(),z=this._get_width();this.dispatchEvent("dock-move",{dx:this._docked_x?z+Ea+Da+3:0,dy:this._docked_y?N+3+2:0})}},v=()=>{this._collapsed?g():b()};this._docked=!1,this._docked_x=!1,this._docked_y=!1,this._docking=!1,this._last_dy=0,this._last_dx=0;let x,I,E=O=>Tt([O.addEventListeners([ae({onClick:()=>{v()}}),le(({pointerId:R,clientX:N,clientY:z})=>{O.setPointerCapture(R);let F=N-this._x,V=z-this._y;I=()=>{O.releasePointerCapture(R),j(),I=void 0};let j=O.addEventListeners([Je(({clientX:H,clientY:K})=>{this._x=H-F,this._y=K-V,this._collapsed?(this._collapsed_x=this._x,this._collapsed_y=this._y):(this._non_collapsed_x=this._x,this._non_collapsed_y=this._y),this._clamp_x_y(),ft(f,{left:`${this._x}px`,top:`${this._y}px`}),this._collapsed||this._refresh_dock()}),ue(()=>{I()}),qn(()=>{I()}),Ee(()=>{I()})])})]),cw(O,500,()=>{v()}),()=>{I&&I()}]),D=()=>{ft(f,{opacity:`${fa}`})},w=()=>{ft(f,{opacity:"1"})},T=()=>{if(this._collapsed){let N=I0(f,3e3,!1,()=>{let z=eo();this._message_id[z]=!0,this.dispatchContextEvent("_control_foreground",{message_id:z}),this._set_z_index(2147483647),this._collapsed&&w()},()=>{this._collapsed&&D()})}};this._root=f,T();let C=new st({style:{position:"absolute",top:"0",left:"0",transform:`${this._collapsed?`scale(${m}, ${h})`:"scale(1, 1)"}`,transformOrigin:"top left",borderWidth:"0px",borderStyle:"solid",borderColor:Lt,width:`${i}px`,height:`${s}px`,opacity:this._collapsed?"0":"1",transition:`transform ${an}s linear, opacity ${an}s linear`}},this.$system),P=0;C.addEventListeners([mt("_control_in",()=>{P++}),mt("_control_out",()=>{P--})]);let k=new $e({className:"control-icon",icon:n,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"3px",boxSizing:"border-box",width:"100%",height:"100%",opacity:this._collapsed?"1":"0",transition:`opacity ${an}s linear`,cursor:"pointer",pointerEvents:this._collapsed?"auto":"none"}},this.$system);k.preventDefault("mousedown"),k.preventDefault("touchdown"),k.addEventListener(ae({onClick:g})),k.$element.setAttribute("dropTarget","true");let M=new st({className:"gui-control-knob",style:S({position:"absolute",left:`-${Ea}px`,opacity:this._collapsed?"0":"1",height:`${UM}px`,top:"50%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:Lt,width:`${Ea}px`,cursor:"pointer",willChange:"opacity",transition:Gn("opacity"),transform:"translateY(-50%)",pointerEvents:this._collapsed?"none":"auto",touchAction:"none"},ne("none"))},this.$system);M.preventDefault("mousedown"),M.preventDefault("touchdown"),M.preventDefault("touchstart"),M.$element.setAttribute("dropTarget","true");let U=new st({style:{width:"8px",height:"16px",display:"flex",flexWrap:"wrap",gap:"3px",justifyContent:"center",alignItems:"center"}},this.$system);M.appendChild(U),Ca(6).forEach(O=>{let R=new st({style:{width:"2px",height:"2px",borderRadius:"50%",backgroundColor:"currentColor"}},this.$system);U.appendChild(R)}),this._collapsed?x=E(f):x=E(M);let L=yt(e);this.$element=L,this.$slot=C.$slot,this.$primitive=!0,this.$unbundled=!1,C.registerParentRoot(M),f.registerParentRoot(C),f.registerParentRoot(k),this.setSubComponents({root:f,button:M,icon:k}),this.registerRoot(f)}_get_screen_ratio(){let{$width:t,$height:e}=this.$context;return t/e}onPropChanged(t,e){if(t==="style"){let{width:n,height:i}=this.$props;this._root.setProp("style",S({position:"absolute",left:`${this._x}px`,top:`${this._y}px`,width:this._collapsed?`${ps}px`:`${n}px`,height:this._collapsed?`${cr}px`:`${i}px`,borderRadius:"3px",borderWidth:"1px",borderStyle:"solid",borderColor:this._collapsed?"currentColor":Lt,transition:`opacity ${an}s linear`,zIndex:`${this._z_index}`,opacity:this._collapsed?`${fa}`:"0",touchAction:"none"},e))}}_get_height(){let{height:t}=this.$props;return this._collapsed?cr:t}_get_width(){let{width:t}=this.$props;return this._collapsed?ps:t}onMount(){this._context_unlisten=Be(this.$context,[mt("themechanged",()=>{this._refresh_color()}),Un(()=>{this._clamp_x_y(),ft(this._root,{left:`${this._x}px`,top:`${this._y}px`}),this._refresh_dock()}),mt("_control_foreground",({message_id:t})=>{this._message_id[t]?delete this._message_id[t]:this._set_z_index(this._z_index-1)})]),this._refresh_color()}onUnmount(){this._context_unlisten()}};l();l();l();l();var J0=r=>/[a-zA-Z\d\s:]/.test(r),uw=r=>/[a-zA-Z\d:]/.test(r),Z0=r=>/[\s]/.test(r),Y0=(r,o)=>{let t=o;if(o>0)if(J0(r[t-1]))if(Z0(r[t-1])){for(;Z0(r[t-1])&&t>0;)t--;t=Y0(r,t)}else for(;uw(r[t-1])&&t>0;)t--;else for(;!J0(r[t-1])&&t>0;)t--;return t},X0=(r,o)=>{let t=o;if(J0(r[o]))if(Z0(r[o])){for(;Z0(r[t])&&t<r.length;)t++;t=X0(r,t)}else for(;uw(r[t])&&t<r.length;)t++;else for(;!J0(r[t])&&t<r.length;)t++;return t};function GM(r){return RM(r,window)}function RM(r,o){let{root:t}=r;return t.shadowRoot.activeElement}function Q0(r,o,t){let e=GM(r);if(e){let n=new KeyboardEvent(o,t),i=n.preventDefault.bind(n),s=!1;if(n.preventDefault=()=>(s=!0,i()),e.dispatchEvent(n),n.type==="keydown"&&!s){let{key:a}=n;NM(r,e,a,t)}}}function NM(r,o,t,e={}){let{tagName:n}=o;n==="INPUT"&&/^(?:text|email|search|tel|url|password)$/i.test(o.type)||n==="TEXTAREA"?zM(o,t,e):n==="DIV"&&o.contentEditable==="true"&&HM(r,o,t,e)}function dw({value:r,selectionStart:o=0,selectionEnd:t=0,selectionDirection:e="none"},{ctrlKey:n,shiftKey:i,altKey:s},a){o===null&&(o=0),t===null&&(t=o);let _=r,c=o,p=t,u=e;return wl(a)?(_=r.substr(0,o)+a+r.substr(t,r.length),c=o+1,p=c):a==="Backspace"?(o===t?_=r.substr(0,o-1)+r.substr(o,r.length):_=r.substr(0,o)+r.substr(t,r.length),c=rn(o-1,0,_.length),p=c):a==="Enter"?(_=r.substr(0,o)+`
`+r.substr(t,r.length),c=o+1,p=c):a==="Space"?(_=r.substr(0,o)+" "+r.substr(t,r.length),c=o+1,p=c):a==="ArrowLeft"?i&&s?e==="backward"||e==="none"||o===t?(c=Y0(r,o),u="backward"):(p=Y0(r,t),p===o&&(u="backward")):i?o>0&&(c=o-1):s?(c=Y0(r,o),p=c):o===t?(c=o-1,p=c):p=o:a==="ArrowRight"&&(i&&s?e==="forward"||e==="none"||o===t?(p=X0(r,t),u="forward"):(c=X0(r,o),c===t&&(u="forward")):i?o>0&&(p=p+1):s?(c=X0(r,o),p=c):o===t?(c=o+1,p=c):c=t),{value:_,selectionStart:c,selectionEnd:p,selectionDirection:u}}function zM(r,o,{ctrlKey:t,shiftKey:e,altKey:n}={}){let{value:i,selectionStart:s=0,selectionEnd:a=0,selectionDirection:_="none"}=r,{value:c,selectionStart:p,selectionEnd:u,selectionDirection:d}=dw({value:i,selectionStart:s,selectionEnd:a,selectionDirection:_},{ctrlKey:t,shiftKey:e,altKey:n},o),{maxLength:m}=r;if(m!==void 0&&m!==-1&&c.length>m)return;function h(){(p!==s||u!==a)&&(r.setSelectionRange(p,u,d),r.selectionDirection=d)}if(c!==i){r.value=c;let f=new InputEvent("input",{});h(),r.dispatchEvent(f)}else h()}var FM=r=>{let{api:{document:{getSelection:o}}}=r,e=o().getRangeAt(0);return{selectionStart:e.startOffset,selectionEnd:e.endOffset,selectionDirection:e.startOffset===e.endOffset?"none":e.startOffset<e.endOffset?"forward":"backward"}};function BM(r,o,t,e){let{api:{document:{createRange:n,getSelection:i}}}=r,s=n();if(o.firstChild)try{s.setStart(o.firstChild,t),s.setEnd(o.firstChild,e);let a=i();a.removeAllRanges(),a.addRange(s)}catch(a){}}function HM(r,o,t,{ctrlKey:e,shiftKey:n,altKey:i}={}){let s=o.innerText,{selectionStart:a=0,selectionEnd:_=0,selectionDirection:c="none"}=FM(r),{value:p,selectionStart:u,selectionEnd:d,selectionDirection:m}=dw({value:s,selectionStart:a,selectionEnd:_,selectionDirection:c},{ctrlKey:e,shiftKey:n,altKey:i},t);function h(){(u!==a||d!==_)&&BM(r,o,u,d)}if(p!==s){o.innerText=p;let f=new InputEvent("input",{});h(),o.dispatchEvent(f)}else h()}var lw=S({display:"flex",justifyContent:"center",alignItems:"center",height:"calc(100%)",width:"calc(100%)",overflow:"hidden",color:"currentColor",borderWidth:"1px",borderStyle:"solid",borderColor:"currentColor",borderRadius:"2px",fontSize:"18px",boxSizing:"border-box",cursor:"pointer",textAlign:"center",paddingTop:"9px"},ne("none")),dr=class extends W{constructor(t,e){super(t,e);this._pointer_in=!1;this._pointer_down=!1;this._key_text_value=()=>{let{key:t="a",alt:e="",shiftKey:n=!1,style:i={}}=this.$props;return Cl[t]?void 0:wl(t)?n?t.toUpperCase():t:""};this._refresh_key_text_value=()=>{let t=this._key_text_value();t&&this._key_text.setProp("value",t)};this._refresh_background=()=>{var a;let{$theme:t,$color:e}=this.$context,{active:n,style:i={}}=this.$props,s=this._pointer_in?t==="dark"?"#00000066":"#00000011":(a=i.backgroundColor)!=null?a:"#00000022";n?ft(this._key,{backgroundImage:"radial-gradient(currentColor 20%, transparent 20%)",backgroundSize:"3px 3px",background:s}):this._pointer_down?ft(this._key,{backgroundImage:"radial-gradient(circle, currentColor 15%, transparent 10%)",backgroundSize:"6px 6px",backgroundPosition:"0.75px 0px",background:s}):ft(this._key,{background:s,backgroundImage:"",backgroundSize:""})};this._emit_key=t=>{let{shiftKey:e=!1,altKey:n=!1}=this.$props,i=e&&wl(t)?t.toUpperCase():t;Uv(this.$system,i,e,n)};let{key:n="a",alt:i="",shiftKey:s=!1,style:a={}}=this.$props,_=this._key_text_value(),c=Cl[n],p=new ki({value:_,style:S({width:"auto",height:"auto"},ne("none"))},this.$system);this._key_text=p;let u=new ki({value:c?void 0:i,style:S({width:"auto",height:"auto",right:"3px",top:"3px",fontSize:"12px",position:"absolute"},ne("none"))},this.$system),d=new st({style:S(S({},lw),a)},this.$system);d.appendChild(p),d.appendChild(u);let m=f=>{this._pointer_down=!1,this._key.hasPointerCapture(f)&&this._key.releasePointerCapture(f)};if(d.addEventListeners([ae({onClick:()=>{let{key:f}=this.$props;f!==void 0&&this._emit_key(f)},onLongPress:()=>{let{alt:f}=this.$props;f===void 0||this._emit_key(f)}}),Ye(()=>{this._pointer_in=!0,this._refresh_background()}),le(f=>{let{pointerId:b}=f;this._key.setPointerCapture(b),this._pointer_down=!0,this._refresh_background()}),ue(f=>{let{pointerId:b}=f;m(b),this._refresh_background()}),Ee(f=>{let{pointerId:b}=f;this._pointer_down&&m(b),this._pointer_in=!1,this._refresh_background()}),qn(f=>{let{pointerId:b}=f;this._pointer_down&&m(b)})]),d.preventDefault("mousedown"),d.preventDefault("touchstart"),this._key=d,c!==void 0){let f=new $e({icon:c,style:{width:"18px",height:"18px"}},this.$system);d.setChildren([f])}let h=yt(e);this.$element=h,this.$slot=d.$slot,this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({key:d}),this.registerRoot(d)}onPropChanged(t,e){t==="style"?this._key.setProp("style",S(S({},lw),e)):t==="shiftKey"?this._refresh_key_text_value():t==="altKey"?this._refresh_key_text_value():t==="active"&&this._refresh_background()}};function Uv(r,o,t,e){let n=Ei[o],i=El[o];Q0(r,"keydown",{key:o,keyCode:n,code:i,shiftKey:t,altKey:e,ctrlKey:!1,metaKey:!1,bubbles:!0}),Q0(r,"keypress",{key:o,keyCode:n,code:i,shiftKey:t,altKey:e,ctrlKey:!1,metaKey:!1,bubbles:!0}),Q0(r,"keyup",{key:o,keyCode:n,code:i,shiftKey:t,altKey:e,ctrlKey:!1,metaKey:!1,bubbles:!0})}var mw={boxSizing:"border-box"},Nt=30,lr=class extends W{constructor(t,e){super(t,e);this._keys=[];this._shift=!1;this._alt=!1;this._backspace_interval=null;this._activate_shift=()=>{this._shift_key.setProp("active",!0)};this._deactivate_shift=()=>{this._shift_key.setProp("active",!1)};this._activate_alt=()=>{this._alt_key.setProp("active",!0)};this._deactivate_alt=()=>{this._alt_key.setProp("active",!1)};this._line=t=>{let e=new st({className:"keyboard-line",style:{display:"flex",width:"100%",height:"20%",boxSizing:"border-box",justifyContent:"center"}},this.$system);return e.setChildren(t),e};this._key=(t,e="",n,i={})=>{let{keyStyle:s}=this.$props,a=n/Nt,_=new dr({key:t,style:S(S({position:"relative"},i),s),alt:e},this.$system),c=new st({style:{display:"flex",justifyContent:"center",alignItems:"center",height:"calc(100%)",width:`calc(${a*100}%)`,boxSizing:"border-box",padding:"2px"}},this.$system);return c.appendChild(_),this._keys.push(_),c};this._on_backspace_long_press=()=>{let{api:{device:{vibrate:t}}}=this.$system;this._backspace_interval=setInterval(()=>{Uv(this.$system,"Backspace",this._shift,this._alt),t([10])},30)};this._on_backspace_pointer_up=()=>{this._backspace_interval&&clearInterval(this._backspace_interval)};let{style:n}=this.$props,i=this._key("1","`",Nt,{}),s=this._key("2","~",Nt,{}),a=this._key("3","|",Nt,{}),_=this._key("4","\\",Nt,{}),c=this._key("5","%",Nt,{}),p=this._key("6","^",Nt,{}),u=this._key("7","&",Nt,{}),d=this._key("8","*",Nt,{}),m=this._key("9","{",Nt,{}),h=this._key("0","}",Nt,{}),f=this._line([i,s,a,_,c,p,u,d,m,h]),b=this._key("q","+",Nt,{}),g=this._key("w","\xD7",Nt,{}),v=this._key("e","\xF7",Nt,{}),x=this._key("r","=",Nt,{}),I=this._key("t","/",Nt,{}),E=this._key("y","_",Nt,{}),D=this._key("u","<",Nt,{}),w=this._key("i",">",Nt,{}),T=this._key("o","[",Nt,{}),C=this._key("p","]",Nt,{}),P=this._line([b,g,v,x,I,E,D,w,T,C]),k=this._key("","",Nt/2,{visibility:"hidden"}),M=this._key("a","!",Nt,{}),U=this._key("s","@",Nt,{}),L=this._key("d","#",Nt,{}),O=this._key("f","$",Nt,{}),R=this._key("g","",Nt,{}),N=this._key("h","",Nt,{}),z=this._key("j",".",Nt,{}),F=this._key("k","(",Nt,{}),V=this._key("l",")",Nt,{}),j=this._key("","",Nt/2,{visibility:"hidden"}),H=this._line([k,M,U,L,O,R,N,z,F,V,j]),K=this._key("Shift","",1.5*Nt,{paddingTop:"0"});this._shift_key=K.$slotChildren.default[0],this._shift_key.addEventListener(ae({onDoubleClick:()=>{this._shift=!this._shift,this._shift?this._activate_shift():this._deactivate_shift();for(let Ft of this._keys)Ft.setProp("shiftKey",this._shift)}}));let q=this._key("z","-",Nt,{}),Q=this._key("x","'",Nt,{}),at=this._key("c",'"',Nt,{}),Dt=this._key("v",":",Nt,{}),Et=this._key("b",";",Nt,{}),Ct=this._key("n",",",Nt,{}),Pt=this._key("m","?",Nt,{}),ot=this._key("Backspace","",1.5*Nt,{paddingTop:"0"});this._backspace_key=ot.$slotChildren.default[0],this._backspace_key.addEventListeners([ae({onLongPress:this._on_backspace_long_press}),ue(this._on_backspace_pointer_up)]);let X=this._line([K,q,Q,at,Dt,Et,Ct,Pt,ot]),rt=this._key("AltLeft","",3*Nt/2,{paddingTop:"0"});this._alt_key=rt.$slotChildren.default[0],this._alt_key.addEventListener(ae({onDoubleClick:()=>{this._alt=!this._alt,this._alt?this._activate_alt():this._deactivate_alt();for(let Ft of this._keys)Ft.setProp("altKey",this._alt)}}));let et=this._key("ArrowLeft","",Nt,{paddingTop:"0"}),ct=this._key("Space",void 0,5.5*Nt),lt=this._key("ArrowRight","",Nt,{paddingTop:"0"}),bt=this._key("Enter","",3*Nt/2,{paddingTop:"0"}),kt=this._line([rt,et,ct,lt,bt]),xt=new st({className:"keyboard",style:S(S({},mw),n)},this.$system);xt.setChildren([f,P,H,X,kt]),this._keyboard=xt;let Gt=yt(e);this.$element=Gt,this.$slot=xt.$slot,this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({keyboard:xt}),this.registerRoot(xt)}onPropChanged(t,e){if(t==="style")this._keyboard.setProp("style",S(S({},mw),e));else if(t==="keyStyle")for(let n of this._keys)ft(n,e||{})}};var zh=class extends Cn{constructor(t,e){super(t,e);this._background_color=()=>{let{$theme:t}=this.$context;return Qo(xo(t),.75)};this._refresh_color=()=>{let t=this._background_color();this._content.setProp("keyStyle",{backgroundColor:t})};let{style:n={}}=this.$props,i=new ur({icon:"keyboard",style:{},width:312,height:210,x:48,y:48,_x:12,collapsed:!0},this.$system);i.preventDefault("mousedown"),i.preventDefault("touchdown"),this._root=i;let s=new lr({style:{}},this.$system);i.registerParentRoot(s),this._content=s;let a=yt(e);this.$element=a,this.$slot=i.$slot,this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({root:i,keyboard:s}),this.registerRoot(i)}onPropChanged(t,e){}onMount(){this._context_unlisten=pi(this.$context,mt("themechanged",()=>{this._refresh_color()})),this._refresh_color()}onUnmount(){this._context_unlisten()}};l();var hw={position:"absolute",overflow:"hidden",touchAction:"none"},wa=12,Fh=class extends W{constructor(t,e){super(t,e);this._s=100;this._v=100;this._pointer_down={};this._getValue=()=>{let{h:t=0}=this.$props;return uS(t,this._s,this._v)};this._on_pointer_down=(t,e)=>{let{pointerId:n}=t;this._pointer_down[n]=!0,this._color_picker.setPointerCapture(n),this._on_drag(t),this.dispatchEvent("input",this._getValue())};this._on_drag=t=>{let{offsetX:e,offsetY:n}=t,{$width:i,$height:s}=this._color_picker.$$context,a=this.getBoundingClientRect(),{width:_,height:c}=a,{a:p}=Io({a:e/i*100,min:0,max:100}),{a:u}=Io({a:(1-n/s)*100,min:0,max:100});this._s=p,this._v=u,this._refresh_sv()};this._refresh_s=()=>{ft(this._picker,{left:`${this._s}%`})};this._refresh_v=()=>{ft(this._picker,{top:`${100-this._v}%`})};this._refresh_sv=()=>{this._refresh_s(),this._refresh_v()};this._on_pointer_move=t=>{let{pointerId:e}=t;this._pointer_down[e]&&(this._on_drag(t),this.dispatchEvent("input",this._getValue()))};this._on_pointer_up=(t,e)=>{let{pointerId:n}=t;this._color_picker.releasePointerCapture(n),delete this._pointer_down[n],this.dispatchEvent("change",this._getValue())};let{style:n,h:i=0,s=100,v:a=100}=t;this._s=s,this._v=a;let _=O2(i),c=new st({style:{position:"absolute",left:"1px",top:"1px",width:`${wa-2}px`,height:`${wa-2}px`,border:"1px solid white",boxSizing:"border-box",borderRadius:"50%"}},this.$system),p=new st({style:{position:"absolute",width:`${wa}px`,height:`${wa}px`,border:"1px solid black",boxSizing:"border-box",borderRadius:"50%"}},this.$system),u=new st({style:{position:"absolute",width:`${wa}px`,height:`${wa}px`,left:`${s}%`,top:`${100-a}%`,transform:"translate(-50%, -50%)",pointerEvents:"none"}},this.$system);u.registerParentRoot(p),u.registerParentRoot(c),this._picker=u;let d=new st({style:{position:"absolute",backgroundImage:"linear-gradient(to top, #000, rgba(204, 154, 129, 0))"}},this.$system);d.registerParentRoot(u);let m=new st({style:{position:"absolute",backgroundImage:"linear-gradient(to right, #fff, rgba(204, 154, 129, 0))"}},this.$system);m.registerParentRoot(d);let h=new st({style:{position:"absolute",backgroundColor:_}},this.$system);h.registerParentRoot(m),this._background=h;let f=new ln({className:"color-picker",style:S(S({},hw),n)},this.$system);f.registerParentRoot(h),this._color_picker=f,this.$element=yt(e),this.$slot.default=f.$slot.default,this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({color_picker:f,background:h,sat:m,val:d,picker:u,picker_outer:p,picker_inner:c}),this.registerRoot(f),this._color_picker.addEventListener(le(this._on_pointer_down)),this._color_picker.addEventListener(Je(this._on_pointer_move)),this._color_picker.addEventListener(ue(this._on_pointer_up))}onPropChanged(t,e){if(t==="style")this._color_picker.setProp("style",S(S({},hw),e));else if(t==="h"){let{h:n=0}=this.$props,i=O2(n);ft(this._background,{backgroundColor:i})}else t==="s"?(this._s=e,this._refresh_s()):t==="v"&&(this._v=e,this._refresh_v())}};l();l();l();var fw={color:"currentColor",boxSizing:"border-box"},mr=class extends W{constructor(t,e){super(t,e);let{id:n,className:i,style:s,innerText:a,tabIndex:_,title:c,draggable:p,data:u={}}=this.$props,d=this.$system.api.document.createElement("button");if(n!==void 0&&(d.id=n),i!==void 0&&(d.className=i),a&&(d.innerText=a),_!==void 0&&(d.tabIndex=_),c&&(d.title=c),u!==void 0)for(let m in u){let h=u[m];d.dataset[m]=h}vt(d,S(S({},fw),s)),this.$element=d,this._prop_handler=S({},me(this,this.$element,fw))}onPropChanged(t,e){this._prop_handler[t](e)}};var jM={height:"100%",width:"100%",background:"none"},hr=class extends W{constructor(t,e){super(t,e);this._get_style=()=>{let{style:t={}}=this.$props,{color:e="currentColor"}=t;return e=_a(e)||e,S(_t(S(_t(S({},jM),{display:"flex",justifyContent:"center",alignItems:"center",height:"calc(100%)",width:"calc(100%)",overflow:"hidden"}),ne("none")),{color:e,border:`1px solid ${e}`,fontSize:"14px",borderRadius:"2px",boxSizing:"border-box",cursor:"pointer",textAlign:"center"}),t)};let{key:n="a",location:i=0}=this.$props,s=Cl[n],a=El[n],_=Ei[n],c=this._get_style(),p=new mr({style:c,innerText:s?void 0:n},this.$system);if(p.addEventListener(le(()=>{})),this._key=p,s!==void 0){let d=new $e({icon:s,style:{width:"18px",height:"18px"}},this.$system);p.setChildren([d])}let u=yt(e);this.$element=u,this.$slot=p.$slot,this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({key:p}),this.registerRoot(p)}onPropChanged(t,e){if(t==="style"){let n=this._get_style();this._key.setProp("style",n)}}};var gw={display:"flex",flexDirection:"column",boxSizing:"border-box",minHeight:"208px",minWidth:"640px"},St=42,Bh=class extends W{constructor(t,e){super(t,e);this._keys=[];this._line=t=>{let e=new st({className:"keyboard-line",style:{display:"flex",width:"100%",height:"20%",boxSizing:"border-box"}},this.$system);return e.setChildren(t),e};this._key=(t,e,n,i={})=>{let s=n/St,{style:a={}}=this.$props,{color:_="currentColor"}=a,c=new hr({key:t,location:e,style:S({color:_},i)},this.$system),p=new st({style:{display:"flex",justifyContent:"center",alignItems:"center",height:"calc(100%)",width:`calc(${s*100/15}%)`,boxSizing:"border-box",padding:"2px"}},this.$system);return p.appendChild(c),this._keys.push(c),p};let{style:n={}}=this.$props,i=this._key("`",0,St),s=this._key("1",0,St),a=this._key("2",0,St),_=this._key("3",0,St),c=this._key("4",0,St),p=this._key("5",0,St),u=this._key("6",0,St),d=this._key("7",0,St),m=this._key("8",0,St),h=this._key("9",0,St),f=this._key("0",0,St),b=this._key("-",0,St),g=this._key("=",0,St),v=this._key("Backspace",0,St*2),x=this._line([i,s,a,_,c,p,u,d,m,h,f,b,g,v]),I=this._key("tab",0,St*2),E=this._key("q",0,St),D=this._key("w",0,St),w=this._key("e",0,St),T=this._key("r",0,St),C=this._key("t",0,St),P=this._key("y",0,St),k=this._key("u",0,St),M=this._key("i",0,St),U=this._key("o",0,St),L=this._key("p",0,St),O=this._key("[",0,St),R=this._key("]",0,St),N=this._key("\\",0,St),z=this._line([I,E,D,w,T,C,P,k,M,U,L,O,R,N]),F=this._key("CapsLock",0,St*2),V=this._key("a",0,St),j=this._key("s",0,St),H=this._key("d",0,St),K=this._key("f",0,St),q=this._key("g",0,St),Q=this._key("h",0,St),at=this._key("j",0,St),Dt=this._key("k",0,St),Et=this._key("l",0,St),Ct=this._key(";",0,St),Pt=this._key("'",0,St),ot=this._key("Enter",0,2*St),X=this._line([F,V,j,H,K,q,Q,at,Dt,Et,Ct,Pt,ot]),rt=this._key("Shift",0,2*St);this._key_ShiftLeft=rt;let et=this._key_ShiftLeft.$slotChildren.default[0];this._key_ShiftLeft.addEventListeners([le(()=>{ft(et,{backgroundImage:"radial-gradient(currentColor 20%, transparent 20%)",backgroundSize:"3px 3px"})}),ue(()=>{ft(et,{backgroundImage:"none",backgroundSize:"none"})})]);let ct=this._key("z",0,St),lt=this._key("x",0,St),bt=this._key("c",0,St),kt=this._key("v",0,St),xt=this._key("b",0,St),Gt=this._key("n",0,St),Ft=this._key("m",0,St),Jt=this._key(",",0,St),ke=this._key(".",0,St),Ce=this._key("/",0,St),te=this._key("unknown",0,St,{visibility:"hidden"}),de=this._key("ArrowUp",0,St,{}),tn=this._key("",0,St,{visibility:"hidden"}),Le=this._key("Shift",0,2*St),wt=this._line([rt,ct,lt,bt,bt,kt,xt,Gt,Ft,Jt,ke,Ce,te,de,tn]),Ht=this._key("fn",0,St),Rt=this._key("CtrlLeft",0,3*St/2),fe=this._key("AltLeft",0,3*St/2),ee=this._key("MetaLeft",0,3*St/2),ge=this._key("",0,4.5*St),be=this._key("AltRight",0,3*St/2),mn=this._key("CtrlRight",0,3*St/2),Ve=this._key("ArrowLeft",0,St),Fn=this._key("ArrowDown",0,St),Ci=this._key("ArrowRight",0,St),On=this._line([ee,Rt,fe,ge,be,mn,Ve,Fn,Ci]),cs=new st({className:"keyboard",style:S(S({},gw),n)},this.$system);cs.setChildren([x,z,X,wt,On]),this._keyboard=cs;let n1=yt(e);this.$element=n1,this.$slot=cs.$slot,this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({keyboard:cs}),this.registerRoot(cs)}onPropChanged(t,e){t==="style"&&this._keyboard.setProp("style",S(S({},gw),e))}};l();var VM={},Hh=class extends W{constructor(t,e){super(t,e);this._nodes={};this._links={};this._subgraph_to_node_id=[];this._node_id_to_subgraph={};this._force=t=>{let e=Object.entries(this._nodes),n=e.length;for(let a=0;a<n;a++){let[_,c]=e[a],p=this._node_id_to_subgraph[_];for(let u=a+1;u<n;u++){let[d,m]=e[u],h=this._node_id_to_subgraph[d],f=hn(c,m),{u:b}=f,{l:g}=hn(c,m);if(g=Math.max(g,1),g<(p===h?K0:W0)){let I=-90*t/g;m.vx-=b.x*I,m.vy-=b.y*I,c.vx+=b.x*I,c.vy+=b.y*I}}c.y-=c.y*t/6}let i=Object.entries(this._links),s=i.length;for(let a=0;a<s;a++){let[_]=i[a],{source:c,target:p}=co(_),u=this._nodes[c],d=this._nodes[p],{l:m,d:h}=hn(d,u);m=Math.max(m,1),h=Math.max(h,1);let f=24,b=u.x,g=d.x,v=u.y,x=d.y,I=t/h,E=(m-f)*I,D=(g-b)*E,w=(x-v)*E;d.vx-=D,d.vy-=w,u.vx+=D,u.vy+=w;let T=(v+x)/2;d.vy+=(T-x)*t/3,u.vy+=(T-v)*t/3}};this._tick=()=>{this._minimap.tick()};this._node_count=0;this._reset=()=>{let t=this.$system.specs,{bundle:e}=this.$props,{spec:n=Li(),specs:i}=e,{units:s={},merges:a}=n,_=Ne(s,(d,m)=>{var C,P;this._node_count++;let{id:h,metadata:f={}}=d,{position:b={x:0,y:0},component:g={}}=f,{x:v,y:x}=b,I=So(t,h,!0),E=2*I,D=2*I,w=on(t,h);if(w){let{width:k,height:M}=g,U=Bt(t,h),{component:L={}}=U,{defaultWidth:O,defaultHeight:R}=L;E=(C=k!=null?k:O)!=null?C:120,D=(P=M!=null?M:R)!=null?P:120}return{_x:v,_y:x,ax:0,ay:0,x:v,y:x,fx:void 0,fy:void 0,shape:w?"rect":"circle",r:I,width:E,height:D,vx:0,vy:0,hx:0,hy:0}}),c={},p=[],u={};for(let d in a){let m=a[d],h={},f={};for(let b in m){let g=m[b],{input:v={},output:x={}}=g;J(v).length>0&&(h[b]=!0),J(x).length>0&&(f[b]=!0)}for(let b in h){let g=u[b],v=p[g];for(let x in f){let I=u[x],E=p[I];if(g!==void 0&&I!==void 0){if(g<I)for(let w of E)E.delete(w),v.add(w),u[w]=g;else if(g>I)for(let w of v)v.delete(w),E.add(w),u[w]=I}else if(g!==void 0)v.add(x),u[x]=g;else if(I!==void 0)E.add(b),u[b]=I;else{let w=new Set;p.push(w);let T=p.length-1;w.add(b),u[b]=T,w.add(x),u[x]=T,g=T,v=w}let D=Vt(x,b);c[D]=c[D]||0,c[D]++}}}this._subgraph_to_node_id=p,this._node_id_to_subgraph=u,this._nodes=_,this._links=c,ga(this._minimap,{nodes:_,links:c}),this._simulation.nodes(_),this._node_count>0&&this._simulation.start()};let{width:n,height:i}=this.$props,s=new Xs({width:n,height:i,style:{},nodes:{},links:{},padding:24},this.$system);this._minimap=s;let a=new os({force:this._force});a.addListener("tick",this._tick),this._simulation=a;let _=yt(e);this.$element=_,this.registerRoot(s),this._reset()}onPropChanged(t,e){t==="bundle"?this._reset():t==="style"&&this._minimap.setProp("style",S(S({},VM),e))}};l();var jh=class extends W{constructor(t,e){super(t,e);this._default_style=()=>({width:"80px",height:"16px",color:"currentColor"});this._render=t=>{let{specs:e}=this.$system,n=Bt(e,t),i=80,s=16,a=4,_=[],{inputs:c={},outputs:p={}}=n,u=on(e,t),d=i/2,m=s/2-.5,h=J(c).filter(I=>{let E=c[I],{defaultIgnored:D}=E;return!D}),f=J(p).filter(I=>{let E=p[I],{defaultIgnored:D}=E;return!D}),b={input:h.length,output:f.length},g=1,v=(I,E)=>{let D=b[I],w=d,T=m,C=E%2===0;if(I==="input"){let k=Math.floor((D-E-1)/2);w-=k*(g+3)+(a+3),E>0&&(C?T-=g+1:T+=g+1)}else{let k=Math.ceil((E+1)/2.001)-1;w+=k*(g+3)+(a+3),k<(D-1)/2&&(C?T-=g+1:T+=g+1)}let P=new Jn({className:Xt("unit-minimal-pin",`unit-minimal-${I}`),x:w,y:T,r:g,style:{strokeWidth:"px",stroke:"currentColor",fill:"currentColor"}},this.$system);_.push(P)};h.forEach((I,E)=>{v("input",E)});let x;u?x=new Dn({className:"unit-minimal-core",x:d-a,y:m-a,width:2*a,height:2*a,style:{fill:"none",stroke:"currentColor",strokeWidth:"1px"}},this.$system):x=new Jn({className:"unit-minimal-core",x:d,y:m,r:a,style:{fill:"currentColor",stroke:"currentColor",strokeWidth:"1px"}},this.$system),_.push(x),f.forEach((I,E)=>{v("output",E)}),this._svg.setChildren(_)};let{id:n,className:i,style:s}=t,a=80,_=16,c=new fn({className:Xt("unit-minimal",i),style:S(S({},this._default_style()),s)},this.$system);this._svg=c,n&&this._render(n),this.$element=c.$element,this.$slot={default:c},this.setSubComponents({svg:c}),this.registerRoot(c)}onPropChanged(t,e){t==="id"?this._render(e):t==="style"&&this._svg.setProp("style",S(S({},this._default_style()),e))}};l();var bw={display:"flex"},Vh=class extends W{constructor(t,e){super(t,e);this._prop_handler={style:(t={})=>{this._div.setProp("style",S(S({},bw),t))}};let{graph:n}=this.$props,i=yt(e),s=new st({style:S({},bw)},this.$system);this._div=s,this.$element=i,this.$slot={default:s},this.registerRoot(s),n&&this._setup(n)}_setup(t){t.$getBundle({},e=>{})}onPropChanged(t,e){this._prop_handler[t](e)}};l();var Kh=class extends W{constructor(t,e){super(t,e);this._base=[];this._unlisten=[];let n=yt(e);n.className="constainer",this.$element=n,this.$slot={default:this}}domAppendParentRoot(t,e,n){let i=t.getBase();for(let s of i){let[a,_]=s,c=_.interceptProp("style",p=>{let{style:u}=this.$props;return S(S({},p),u)});this._base.push(_),this._unlisten.push(c),_.refreshProp("style")}super.domAppendChild(t,e,n)}domRemoveParentRootAt(t,e,n,i){let s=t.getRootBase(),a=s.length,_=s[0];if(_){let[c,p]=_,u=this._base.indexOf(p);for(let d=0;d<a;d++){let m=u+d,h=this._unlisten[m],f=this._base[m];h(),f.refreshProp("style")}this._unlisten.splice(u,s.length),this._base.splice(u,s.length)}}onPropChanged(t,e){for(let n of this._base)n.refreshProp("style")}};l();var Wh=class extends W{constructor(t,e){super(t,e);let{style:n,value:i=""}=this.$props,s=pt(i),a=new Xi({style:n,data:s},this.$system);this._datum=a;let _=yt(e);this.$element=_,this.$unbundled=!1,this.$primitive=!0,this.setSubComponents({datum:a}),this.appendRoot(a)}onPropChanged(t,e){if(t==="value")if(e){let n=Ot(e),i=pt(n);this._datum.setProp("data",i)}else this._datum.setProp("data",pt(""));else t==="style"&&this._datum.setProp("style",e)}};l();var yw={color:"currentColor","font-size":"28px","font-weight":"700"},qh=class extends W{constructor(t,e){super(t,e);let{id:n,className:i,style:s,innerText:a,tabIndex:_,title:c,draggable:p,data:u={},attr:d={}}=this.$props;if(this.$element=this.$system.api.document.createElement("h1"),n!==void 0&&(this.$element.id=n),i!==void 0&&(this.$element.className=i),a&&(this.$element.innerText=a),_!==void 0&&(this.$element.tabIndex=_),c&&(this.$element.title=c),p!==void 0&&this.$element.setAttribute("draggable",p.toString()),u!==void 0)for(let m in u){let h=u[m];this.$element.dataset[m]=h}sn(this,this.$element,S(S({},yw),s)),this._prop_handler=S({},me(this,this.$element,yw))}onPropChanged(t,e){this._prop_handler[t](e)}};l();var vw={color:"currentColor","font-size":"21px"},Yh=class extends W{constructor(t,e){super(t,e);let{id:n,className:i,style:s,innerText:a,tabIndex:_,title:c,draggable:p,data:u={},attr:d={}}=this.$props;if(this.$element=this.$system.api.document.createElement("h2"),n!==void 0&&(this.$element.id=n),i!==void 0&&(this.$element.className=i),a&&(this.$element.innerText=a),_!==void 0&&(this.$element.tabIndex=_),c&&(this.$element.title=c),p!==void 0&&this.$element.setAttribute("draggable",p.toString()),u!==void 0)for(let m in u){let h=u[m];this.$element.dataset[m]=h}sn(this,this.$element,S(S({},vw),s)),this._prop_handler=S({},me(this,this.$element,vw))}onPropChanged(t,e){this._prop_handler[t](e)}};l();var xw={color:"currentColor"},Xh=class extends W{constructor(t,e){super(t,e);let{id:n,className:i,style:s,innerText:a,tabIndex:_,title:c,draggable:p,data:u={},attr:d={}}=this.$props;if(this.$element=this.$system.api.document.createElement("h3"),n!==void 0&&(this.$element.id=n),i!==void 0&&(this.$element.className=i),a&&(this.$element.innerText=a),_!==void 0&&(this.$element.tabIndex=_),c&&(this.$element.title=c),p!==void 0&&this.$element.setAttribute("draggable",p.toString()),u!==void 0)for(let m in u){let h=u[m];this.$element.dataset[m]=h}sn(this,this.$element,S(S({},xw),s)),this._prop_handler=S({},me(this,this.$element,xw))}onPropChanged(t,e){this._prop_handler[t](e)}};l();var Iw={display:"block",border:"none",width:"100%",height:"100%"},Jh=class extends W{constructor(t,e){super(t,e);let{id:n,className:i,style:s={},src:a,srcdoc:_}=this.$props,{root:c,api:{document:{createElement:p}}}=this.$system,u=this.$system.api.document.createElement("iframe");u.slot="",c.appendChild(u),this._iframe_el=u,u.setAttribute("frameborder","0");let d=xf();this._slot_id=d;let m=p("slot");m.name=d,n!==void 0&&(u.id=n),i&&(u.className=i),_!==void 0&&(u.srcdoc=_),u.allowFullscreen=!0,this._setSrc(a),vt(u,S(S({},Iw),s)),this._prop_handler=_t(S({},me(this,u,Iw)),{srcdoc:h=>{this._iframe_el.srcdoc=h||""},src:h=>{this._setSrc(h)}}),this.$element=m,this.$node=u,en(this.$system.cache.iframe,this)}onPropChanged(t,e){this._prop_handler[t](e)}_setSrc(t){let e=this._parseSrc(t);e===void 0?this._iframe_el.removeAttribute("src"):this._iframe_el.src=e}_parseSrc(t){let e=t;if(e!==void 0&&!new RegExp("^(.+)://","i").exec(e)){let{origin:n,pathname:i}=window&&window.location||{origin:"",pathname:""};e.startsWith("/")||(i.endsWith("/")||(e="/"+e),e=i+e),e=n+e}return e}onMount(){this._iframe_el.slot=this._slot_id}onUnmount(){this._iframe_el.slot=""}send(t){this._iframe_el.contentWindow.postMessage(t,"*")}onDestroy(){vn(this.$system.cache.iframe,this)}};l();var Zh=class extends W{constructor(t,e){super(t,e);this.$wrap=!0;this._base=[];this._unlisten=[];this._registerChild=t=>{let e=t.getRootBase();for(let n of e){let[i,s]=n,a=s.interceptProp("style",_=>{let{style:c}=this.$props;return S(S({},c),_)});this._base.push(s),this._unlisten.push(a),s.refreshProp("style")}};this._unregisterChild=t=>{let e=t.getRootBase(),n=e.length,i=e[0];if(i){let[s,a]=i,_=this._base.indexOf(a);for(let c=0;c<n;c++){let p=_+c,u=this._unlisten[p],d=this._base[p];u(),d.refreshProp("style")}this._unlisten.splice(_,e.length),this._base.splice(_,e.length)}};let n=yt(e);n.className="default-style",this.$element=n,this.$slot={default:this}}domCommitAppendChild(t){this._registerChild(t),super.domCommitAppendChild(t)}domCommitInsertChild(t,e){this._registerChild(t),super.domCommitInsertChild(t,e)}domCommitRemoveChild(t){this._unregisterChild(t),super.domCommitRemoveChild(t)}onPropChanged(t,e){for(let n of this._base)n.refreshProp("style")}};l();var Sw={color:"currentColor",width:"fit-content",height:"fit-content"},Qh=class extends W{constructor(t,e){super(t,e);let{id:n,className:i,style:s,innerText:a,tabIndex:_,title:c,draggable:p}=this.$props;this.$element=this.$system.api.document.createElement("label"),n!==void 0&&(this.$element.id=n),i!==void 0&&(this.$element.className=i),a&&(this.$element.innerText=a),_!==void 0&&(this.$element.tabIndex=_),c!==void 0&&(this.$element.title=c),p!==void 0&&this.$element.setAttribute("draggable",p.toString()),vt(this.$element,S(S({},Sw),s)),this._prop_handler=S({},me(this,this.$element,Sw))}onPropChanged(t,e){this._prop_handler[t](e)}};l();var Dw={display:"block",height:"100%",width:"100%",boxSizing:"border-box"},tf=class extends W{constructor(t,e){super(t,e);this.propHandler={className:(t="")=>{this._audio_el.className=t},style:t=>{vt(this._audio_el,S(S({},Dw),t))},src:t=>{t===void 0?(this._audio_el.pause(),this._audio_el.removeAttribute("src"),this._audio_el.load()):this._audio_el.src=t},stream:t=>{t===void 0?this._audio_el.srcObject=null:this._audio_el.srcObject=t},controls:t=>{t===void 0?this._audio_el.removeAttribute("controls"):this._audio_el.controls=t}};let{className:n,style:i={},src:s,controls:a=!0}=this.$props,_=this.$system.api.document.createElement("audio");_.controls=a,n&&(_.className=n),s&&(_.src=s),vt(_,S(S({},Dw),i)),this._audio_el=_,this.$element=_}onPropChanged(t,e){this.propHandler[t](e)}};l();var Ew={display:"block",width:"100%",height:"100%","object-fit":"contain"},Gv="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",ef=class extends W{constructor(t,e){super(t,e);let{className:n,style:i={},src:s=Gv}=this.$props,a=this.$system.api.document.createElement("img");n&&(a.className=n),vt(a,S(S({},Ew),i)),s!==void 0&&(a.src=s),a.addEventListener("error",_=>{a.src=Gv}),a.draggable=!1,this._img_el=a,this.$element=a}onPropChanged(t,e){t==="className"?this._img_el.className=e:t==="style"?vt(this._img_el,S(S({},Ew),e)):t==="src"&&(this._img_el.src=e||Gv)}};l();var ww={height:"100%",width:"100%",boxSizing:"border-box",display:"flex"},nf=class extends W{constructor(t,e){super(t,e);let{className:n,style:i={},src:s,autoplay:a=!0,controls:_=!0}=this.$props;this.$element=this.$system.api.document.createElement("video"),this.$element.controls=_,n&&(this.$element.className=n),s&&(this.$element.src=s),this.$element.autoplay=a,vt(this.$element,S(S({},ww),i)),this.prop_handler=_t(S({},me(this,this.$element,ww)),{src:c=>{c===void 0?(this.$element.pause(),this.$element.removeAttribute("src"),this.$element.load()):this.$element.src=c},stream:c=>{c===void 0?this.$element.srcObject=null:c.$get({},p=>{this.$element.srcObject=p})},controls:c=>{c===void 0?this.$element.removeAttribute("controls"):this.$element.controls=c},currentTime:c=>{c===void 0||(this.$element.currentTime=c)}})}onPropChanged(t,e){this.prop_handler[t](e)}captureStream(e){return G(this,arguments,function*({frameRate:t}){if(this.$element.captureStream)return this.$element.captureStream(t);throw new Mt("Capture Stream")})}requestPictureInPicture(){return G(this,null,function*(){if(this.$element.requestPictureInPicture)try{return yield this.$element.requestPictureInPicture()}catch(t){switch(t.name){case"InvalidStateError":throw new Error("video is not loaded");case"NotAllowedError":throw new Error("must be handling a user gesture if there isn't already an element in Picture-in-Picture");default:throw new Error(t.message)}}else throw new Mt("Picture-in-Picture")})}play(){this.$element.play()}pause(){this.$element.pause()}};l();var Pw={color:"currentColor"},of=class extends W{constructor(t,e){super(t,e);let{id:n,className:i,style:s,innerText:a,tabIndex:_,title:c,draggable:p,data:u={},attr:d={}}=this.$props;if(this.$element=this.$system.api.document.createElement("h3"),n!==void 0&&(this.$element.id=n),i!==void 0&&(this.$element.className=i),a&&(this.$element.innerText=a),_!==void 0&&(this.$element.tabIndex=_),c&&(this.$element.title=c),p!==void 0&&this.$element.setAttribute("draggable",p.toString()),u!==void 0)for(let m in u){let h=u[m];this.$element.dataset[m]=h}sn(this,this.$element,S(S({},Pw),s)),this._prop_handler=S({},me(this,this.$element,Pw))}onPropChanged(t,e){this._prop_handler[t](e)}};l();l();l();function t1(r,o,t,e={}){let{id:n}=t;return Zr(r,o,n,e)}l();function Rv(r,o,t){let e=()=>{},n=p=>{let u=i[p];u(),delete i[p]},i={},s=()=>{for(let p in i)n(p)},a=(p,u)=>{let d=ho(u),m=o.$refSubComponent({unitId:p,_:d}),h=Rv(r,m,u);i[p]=h};if(t.$unbundled)for(let p in t.$subComponent){let u=t.getSubComponent(p);a(p,u)}let _=o.$watch({events:["component_append","component_remove"]},p=>{let{type:u,event:d,data:m}=p;({component_append:f=>{let{unitId:b,unitSpec:g}=f,v=t1(r,r.specs,g);t.setSubComponent(b,v),t.appendRoot(v),a(b,v)},component_remove:f=>{let{unitId:b}=f;n(b);let g=t.removeSubComponent(b);t.removeRoot(g)}})[d](m)});return Tt([e,_,s])}function kw(r,o,t){let e=zt;return t.$getUnitBundleSpec({},n=>{var b;let{unit:i}=n,{id:s}=i,a=Wt(o.specs,(b=n.specs)!=null?b:{}),_=t1(o,a,i),c=Bt(a,s),{type:p="`U`"}=c,u=p.split("&").map(g=>g.slice(1,-1)),d=x0(o,null,r,{}),m=new ln({},o);m.appendChild(_),r.appendChild(m.$element);let h=E7(d,m);Zb(d);let f;u.includes("G")?f=Rv(o,t,_):f=zt,_.connect(t),_.focus(),e=Tt([h,f])}),e}var Cw={width:"100%",height:"100%",color:"currentColor",boxSizing:"border-box"},sf=class extends W{constructor(t,e){super(t,e);let{component:n,id:i,className:s,style:a,innerText:_,tabIndex:c,title:p,draggable:u,data:d={}}=this.$props;if(this.$element=this.$system.api.document.createElement("div"),i!==void 0&&(this.$element.id=i),s!==void 0&&(this.$element.className=s),vt(this.$element,S(S({},Cw),a)),_&&(this.$element.innerText=_),c!==void 0&&(this.$element.tabIndex=c),p&&(this.$element.title=p),u!==void 0&&this.$element.setAttribute("draggable",u.toString()),d!==void 0)for(let m in d){let h=d[m];this.$element.dataset[m]=h}this._prop_handler=_t(S({},me(this,this.$element,Cw)),{component:m=>{this._unlisten&&(this._unlisten(),this._unlisten=void 0,qb(this.$element)),m&&(this._unlisten=kw(this.$element,this.$system,m))}})}onPropChanged(t,e){this._prop_handler[t](e)}};l();var Tw={color:"currentColor"},rf=class extends W{constructor(t,e){super(t,e);let{id:n,className:i,style:s,innerText:a,tabIndex:_,title:c,draggable:p}=this.$props;this.$element=this.$system.api.document.createElement("span"),n!==void 0&&(this.$element.id=n),i!==void 0&&(this.$element.className=i),a&&(this.$element.innerText=a),_!==void 0&&(this.$element.tabIndex=_),c&&(this.$element.title=c),p!==void 0&&this.$element.setAttribute("draggable",p.toString()),vt(this.$element,S(S({},Tw),s)),this._prop_handler=S({},me(this,this.$element,Tw))}onPropChanged(t,e){this._prop_handler[t](e)}};l();var KM={},af=class extends W{constructor(t,e){super(t,e);let{id:n,attr:i={}}=this.$props;this.$element=this.$system.api.document.createElement("style"),n!==void 0&&(this.$element.id=n),this._prop_handler=_t(S({},me(this,this.$element,KM)),{value:s=>{this.$element.innerHTML=s}})}onPropChanged(t,e){this._prop_handler[t](e)}};l();var _f=class extends W{constructor(t,e){super(t,e);let{className:n,style:i={},x:s=0,y:a=0,width:_=100,height:c=100}=this.$props,p=this.$system.api.document.createElementNS(Ut,"foreignObject");n!==void 0&&(p.classList.value=n),p.setAttribute("x",`${s}`),p.setAttribute("y",`${a}`),p.setAttribute("width",`${_}`),p.setAttribute("height",`${c}`),vt(p,i),this._foreign_el=p,this.$element=p}onPropChanged(t,e){t==="style"?vt(this._foreign_el,e):t==="x"?this._foreign_el.setAttribute("x",`${e}`):t==="y"?this._foreign_el.setAttribute("y",`${e}`):t==="width"?this._foreign_el.setAttribute("width",`${e}`):t==="height"&&this._foreign_el.setAttribute("height",`${e}`)}};l();var pf=class extends W{constructor(t,e){super(t,e);let{className:n,style:i={},href:s}=this.$props,a=this.$system.api.document.createElementNS(Ut,"use");n!==void 0&&(a.classList.value=n),s!==void 0&&(a.setAttributeNS(Ut,"xlink:href",s),a.setAttribute("href",s)),vt(a,i),this._use_el=a,this.$element=a}onPropChanged(t,e){t==="style"?vt(this._use_el,e):t==="href"&&(e?(this._use_el.setAttributeNS(Ut,"xlink:href",e),this._use_el.setAttribute("href",e)):(this._use_el.removeAttributeNS(Ut,"xlink:href"),this._use_el.removeAttribute("href")))}};l();var WM={display:"block",height:"100%",width:"100%",color:"inherit",margin:"0",backgroundColor:"#00000000",padding:"0"},cf=class extends je{constructor(o,t){super(o,t,t.api.document.createElement("input"),{valueKey:"checked",defaultValue:!1,defaultStyle:WM}),this.$element.name="checkbox",this.$element.value="checkbox",this.$element.type="checkbox"}};l();var Aw={height:"fit-content",width:"100%",color:"inherit",backgroundColor:"#00000000",padding:"0",fontSize:"18px",border:"none",borderRadius:"0"},uf=class extends je{constructor(o,t){super(o,t,t.api.document.createElement("div"),{valueKey:"textContent",defaultStyle:Aw,defaultValue:""}),this.$element.contentEditable="true";let{flags:{defaultInputModeNone:e}}=t,{style:n,maxLength:i,tabIndex:s}=o;this.$element.spellcheck=!1,this.$element.autocapitalize="off",this.$element.inputMode="text",e&&(this.$element.inputMode="none"),s!==void 0&&(this.$element.tabIndex=s),sn(this,this.$element,S(S({},Aw),n))}};l();var qM={height:"100%",width:"100%",color:"inherit",backgroundColor:"#00000000",padding:"0",fontSize:"18px",border:"none",borderRadius:"0"},df=class extends je{constructor(o,t){super(o,t,t.api.document.createElement("input"),{valueKey:"value",defaultStyle:qM,defaultValue:""});let{maxLength:e,tabIndex:n}=o;this.$element.type="file",this.$element.spellcheck=!1,this.$element.autocomplete="off",this.$element.autocapitalize="off",this.$element.inputMode="none",e!==void 0&&(this.$element.maxLength=e),n!==void 0&&(this.$element.tabIndex=n)}setSelectionRange(o,t,e){this.$element.setSelectionRange(o,t,e)}};l();l();function e1(r,o){let t=Number.parseFloat(o);return isNaN(t)&&o===""&&(r.value="",t=0),t}var YM={height:"fit-content",width:"100%",color:"inherit",backgroundColor:"#00000000",textAlign:"center",padding:"0",fontSize:"18px",border:"none",borderRadius:"0"},lf=class extends je{constructor(o,t){super(o,t,t.api.document.createElement("input"),{valueKey:"value",defaultStyle:YM,defaultValue:"0",processValue:e1});let{min:e,max:n}=o;this.$element.type="number",this.$element.inputMode="none",e!==void 0&&(this.$element.min=`${e}`),n!==void 0&&(this.$element.max=`${n}`)}onPropChanged(o,t){super.onPropChanged(o,t),o==="min"?t===void 0?this.$element.removeAttribute("min"):this.$element.min=`${t}`:o==="max"&&(t===void 0?this.$element.removeAttribute("max"):this.$element.max=`${t}`)}setSelectionRange(o,t,e){this.$element.setSelectionRange(o,t,e)}getValue({},o){let t=Number.parseFloat(this.$element.value||"0");o(t)}setValue({value:o},t){this.$element.value=o.toString(),t(o)}};l();var mf=class extends W{constructor(o,t){super(o,t,t.api.document.createElement("option"))}onPropChanged(o,t){super.onPropChanged(o,t),o==="value"&&t===void 0&&(this.$element.value=t)}};l();var XM={"-webkit-text-security":"disc",height:"fit-content",width:"100%",color:"inherit",backgroundColor:"#00000000",textAlign:"center",padding:"0",fontSize:"18px",border:"none",borderRadius:"0"},hf=class extends je{constructor(o,t){super(o,t,t.api.document.createElement("input"),{valueKey:"value",defaultValue:"",defaultStyle:XM});let{show:e=!1}=o;this.$element.type="text"}setSelectionRange(o,t,e){this.$element.setSelectionRange(o,t,e)}};l();var JM={height:"fit-content",width:"100%",color:"inherit",backgroundColor:"#00000000",padding:"0",fontSize:"18px",border:"none",borderRadius:"0"},ff=class extends je{constructor(o,t){super(o,t,t.api.document.createElement("select"),{valueKey:"value",defaultStyle:JM,defaultValue:""});let{tabIndex:e}=o;e!==void 0&&(this.$element.tabIndex=e)}};l();var ZM={height:"18px",width:"100%",color:"inherit",backgroundColor:"#00000000",textAlign:"center",padding:"0",margin:"0",fontSize:"12px",border:"none",borderRadius:"0",display:"flex",justifyContent:"center",alignItems:"center"},gf=class extends je{constructor(o,t){super(o,t,t.api.document.createElement("input"),{valueKey:"value",defaultValue:"0",defaultStyle:ZM,processValue:e1});let{min:e=0,max:n=100}=o;this.$element.type="range",this.$element.min=`${e}`,this.$element.max=`${n}`}onPropChanged(o,t){o==="min"?this.$element.min=`${t}`:o==="max"?this.$element.max=`${t}`:super.onPropChanged(o,t)}};l();var bf=class extends W{constructor(t,e){super(t,e);this.$_=["W"];this._Container=ma();this._child_container=[];this._parent_container=[];this._parent_child_container=[];this._rewrap=()=>{for(let t=0;t<this._child_container.length;t++)this.rewrapChild(t);for(let t=0;t<this._parent_container.length;t++)this.rewrapParentRoot(t);for(let t=0;t<this._parent_child_container.length;t++)this.rewrapParentChild(t)};this._connected_container=(t,e)=>{let n=new this._Container({},this.$system),i=ho(n),s=this.$unit[`${e}`]({at:t,_:i});return n.connect(s),n};let n=yt(e);n.className="wrap",this.$element=n,this.$slot={default:this}}rewrapParentChild(t){let e=t,n=this._parent_child_container[t];n.disconnect();let i=this.$parentRoot[t],s=this.$parentRootSlotName[t],a=this._connected_parent_root_container(t);this._parent_child_container[t]=a,super.domRemoveParentChildAt(n,s,t,e),super.memRemoveParentChildAt(n,s,t,e),n.removeChild(i),a.appendChild(i),super.domAppendParentChildAt(a,s,t,e),super.memAppendParentChild(a,s,t,e)}rewrapParentRoot(t){let e=this._parent_container[t];e.disconnect();let n=this.$parentRoot[t],i=this.$parentRootSlotName[t],s=this._connected_parent_root_container(t);this._parent_container[t]=s,this.$mountParentRoot.includes(n)&&(super.domRemoveParentRootAt(e,i,t,t),super.postRemoveParentRootAt(e,i,t,t),e.removeChild(n),s.appendChild(n),super.domAppendParentRoot(s,i,t),super.postAppendParentRoot(s,i,t))}rewrapChild(t){let e=this._child_container[t];e.disconnect();let n=this.$children[t],i=this.$childSlotName[t];super.domRemoveChild(e,i,t),super.postRemoveChild(e,t),e.removeChild(n);let s=this._connected_child_container(t);s.appendChild(n),this._child_container[t]=s,super.domAppendChild(s,i,t),super.postAppendChild(s,i,t)}_connected_child_container(t){return this._connected_container(t,"$refChildContainer")}_connected_parent_root_container(t){return this._connected_container(t,"$refParentRootContainer")}_connected_parent_child_container(t){return this._connected_container(t,"$refParentChildContainer")}memAppendChild(t,e,n){let i=this._connected_child_container(n);this._child_container.push(i),i.memAppendChild(t,"default",n),super.memAppendChild(t,e,n)}memAppendParentChild(t,e,n,i){let s=this._connected_parent_child_container(n);en(this._parent_child_container,s),s.memAppendChild(t,"default",n),super.memAppendParentChild(t,e,n,i)}domAppendParentChildAt(t,e,n){let i=this._parent_child_container[n];i.domAppendChild(t,"default",n),super.domAppendParentChildAt(i,e,n,n)}memInsertParentChildAt(t,e,n){let i=this._connected_parent_child_container(n);Ue(this._parent_child_container,i,n),i.memAppendChild(t,"default",n),super.memInsertParentChildAt(t,e,n)}domInsertParentChildAt(t,e,n){let i=this._parent_child_container[n];i.domInsertParentChildAt(t,"default",n),super.domInsertParentChildAt(i,e,n)}memRemoveParentChildAt(t,e,n,i){this._parent_child_container.splice(i,1),super.memRemoveParentChildAt(t,e,n,i)}domRemoveParentChildAt(t,e,n,i){let s=this._parent_child_container[i];s.domRemoveChild(t,"default",n),super.domRemoveParentChildAt(s,e,n,i)}domAppendChild(t,e,n){let i=this._child_container[n];i.domAppendChild(t,"default",n),super.domAppendChild(i,e,n)}postAppendChild(t,e,n){let i=this._child_container[n];t.$parent=this,i.mount(this.$context)}postAppendParentChild(t,e,n){this._parent_child_container[n].mount(this.$context)}domRemoveChild(t,e,n){let i=this._child_container[n];i.domRemoveChild(t,"default",n),super.domRemoveChild(i,e,n)}postRemoveChild(t,e){this._child_container[e].unmount(),super.postRemoveChild(t,e)}insertParentRoot(t,e,n){let i=this._connected_parent_root_container(e);Ue(this._parent_container,i,e),super.insertParentRoot(t,e,n)}unshiftParentRoot(t,e){let n=this._connected_parent_root_container(0);ka(this._parent_container,n),super.unshiftParentRoot(t,e)}pullParentRoot(t){let e=this.$parentRoot.indexOf(t);yn(this._parent_container,e),super.pullParentRoot(t)}memAppendParentRoot(t,e,n){let i=this._connected_parent_root_container(n);this._parent_container.push(i),i.memAppendChild(t,"default",n),super.memAppendParentRoot(t,e,n)}domAppendParentRoot(t,e,n){let i=this._parent_container[n];i.appendChild(t),super.domAppendParentRoot(i,e,n)}postAppendParentRoot(t,e,n){let i=this._parent_container[n];super.postAppendParentRoot(i,e,n)}domRemoveParentRootAt(t,e,n,i){let s=this._parent_container[i];s.domRemoveChild(t,"default",n),super.domRemoveParentRootAt(s,e,n,i)}postRemoveParentRootAt(t,e,n,i){super.postRemoveParentRootAt(t,e,n,i)}domInsertParentRootAt(t,e,n){let i=this._parent_container[e];i.domAppendChild(t,"default",e),super.domInsertParentRootAt(i,e,n)}postInsertParentRootAt(t,e,n){let i=this._parent_container[e];super.postInsertParentRootAt(i,e,n)}onPropChanged(t,e){if(t==="component"){let n;if(e){let i=e,{__bundle:s}=i,{id:a,input:_}=s.unit;n=Wo(this.$system.components,this.$system.specs,this.$system.classes,a,_)}else n=ma();this._Container=n,this._rewrap()}}getContainer(){return this._Container}getChildContainer(t){return this._child_container[t]}getParentChildContainer(t){return this._parent_child_container[t]}getParentRootContainer(t){return this._parent_container[t]}};var Mw={"06a6eeb5-9c36-428c-b9af-4f8b178db350":sh,"ccf6d0e2-6b08-11eb-9fc3-3785374109d0":rh,"0e9e6cd4-67eb-11ea-995b-4b0721193361":ah,"c18d7dcc-939b-11ea-90cb-77846d7504a9":Bs,"e8bce1fc-ae56-4f9f-9685-3cc844758855":Xi,"e80c912e-7508-11ea-966b-436805345ff0":or,"0f043df2-46fc-11eb-ae20-6f1fedd527ba":Nh,"c9b62bcc-8196-11eb-8372-9f2ac2c356d4":ur,"96d5d60e-85eb-11eb-ba90-7fc42ab0a641":zh,"84bfce28-2116-11eb-82ca-cfb03193bf58":Fh,"65759894-7d11-11ea-a838-93e14e650d65":Mn,"e6b88d1e-8755-11ea-916e-d3995fb8986e":Bh,"d0672722-b1a9-11ea-a247-d736e666990e":hr,"023c3762-c701-11ea-b590-57b51c2884a7":_r,"deda524e-6990-11eb-9bc3-e7d55b583fa3":Hh,"0e1d716e-a13f-11ea-ac6a-8fd610c86910":jh,"b4d025e2-811e-11ea-97ee-1bd8d1736e67":ar,"fcccb9a4-1a30-11eb-93b0-e7d511d031f2":lr,"bc34c618-1c77-11eb-9785-e39a2bf52e49":dr,"6b18c608-7b5a-11ea-bb6e-2ff12a5cc3f3":Js,"e39a2a34-c71a-11ea-9835-07964acf6760":ns,"9d1417a8-8a90-4ec1-be3e-401fd4ec3370":Vh,"b61f5cc6-37e9-45e1-965b-02940820f7ce":mr,"94243ec4-8967-4907-8cdd-7223fe256cf6":Ns,"7c27cf95-6226-4326-8619-32d82bcbe16d":Kh,"dc549da9-f758-4709-8913-e265f5e458b2":Wh,"66698a97-15c5-4602-9925-11a1aeb03710":st,"d7c86a2a-489f-11eb-b83e-d3767f6d49b7":ln,"dd7616e2-2e64-4d9c-b13e-ca7efeacd982":qh,"321f971c-b898-4ca4-9e6e-3d75d68940f7":Yh,"b7f043ee-4f9d-4f69-90fe-63b1357ff4c2":Xh,"63a417e5-d354-4b39-9ebd-05f55e70de7b":$e,"32ff22b0-8221-4584-9c78-d21102dcfa6a":Jh,"b5286262-9f92-40d3-8545-88fb3079a0f9":Zh,"23b7df22-79e0-4233-8388-7e6e8f1859c6":Qh,"06823924-b659-4a22-8ed4-b3243121b55d":tf,"059579bb-184f-435b-ace0-64ec95c9f125":ef,"7a8921eb-c1ad-400b-94fc-6c6cead8163d":nf,"2a5ad480-9d38-4918-8774-41fac7b54203":of,"78b0939d-43e1-4f6c-867d-e4217a55d217":sr,"7772a2f5-40c8-482e-83f4-bed9bfb364e3":sf,"c711d540-9de3-437e-854a-b59491af3cf8":rf,"62ca7eae-ea36-4960-a8f2-6b5978cabbab":af,"7666978e-252c-11eb-97a4-0f3e81286cae":Jn,"3fcb8e64-923d-11ea-bab1-43fa3b273af8":Ks,"e049f16e-2559-11eb-bdc4-db5b8a11164b":_f,"be11165e-489f-11eb-921f-87b924eb0725":Sn,"38d26d76-2559-11eb-ae02-dfda9b9b137e":Fs,"9932f3bc-9241-11ea-89fa-0b2fdace0f08":Ws,"60bc7930-8982-11ea-8b24-cf97a783bb32":gn,"c0bfe832-8967-11ea-8c4c-1f2995e41b68":Dn,"98c279fc-7f5e-11ea-b9e4-f772f9f0bed1":fn,"49ef122e-b4d1-11ea-b45e-b73d8ee2aae8":Do,"00c828fc-9243-11ea-b897-5b0fc55820c5":qs,"ad12678e-6642-11eb-9fc3-9fbc75c58110":pf,"096fc4ca-edd2-11ea-8266-37b634a3ee0b":cf,"d8aa573f-129e-4587-9c64-674729d024e2":rr,"6309ac3f-4a37-4ab0-86c6-8be70b38e31d":uf,"e2109627-9783-4664-a70c-858fd8c46ea5":df,"9bc56564-ef4e-11ea-939a-27ae3feb321e":lf,"c0d13c03-9b10-4a6f-a79f-66294d10aae6":mf,"51c2c7b4-cb8a-42e8-95ab-14b8ac37700c":hf,"6c7cd7d1-c8a0-4317-9c8c-ba781f150729":ff,"e06518cf-9edf-430b-8751-74c486e407aa":gf,"87f99b85-1c24-4e5b-a903-dd27230f4092":pr,"83ec6688-b80b-4ef2-861f-14245ef392c0":Ys,"6a14988f-5f4b-4fab-af32-226b7844e41f":wi,"454aaff2-cd74-4f6e-baf2-631bb32e7a6b":bf,"3ffeaaf8-30dd-11eb-9dcc-836b075fc64d":rs,"9988a56e-6bee-46c8-864c-e351d84bc7e2":ki};l();var Ow=JSON.parse('{"51de3251-1bb6-454d-b9d6-6b8bcb1f56aa":{"name":"add 3","units":{"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf"},"add0":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf"}},"merges":{"0":{"add0":{"input":{"b":true}},"add":{"output":{"a + b":true}}}},"metadata":{"icon":"plus","complexity":6,"tags":["core","arithmetic"]},"inputs":{"b":{"plug":{"0":{"unitId":"add","pinId":"b"}},"type":"number"},"a":{"plug":{"0":{"unitId":"add","pinId":"a"}},"type":"number"},"c":{"plug":{"0":{"unitId":"add0","pinId":"a"}},"type":"number"}},"outputs":{"a + b + c":{"plug":{"0":{"unitId":"add0","pinId":"a + b"}},"type":"number"}},"id":"51de3251-1bb6-454d-b9d6-6b8bcb1f56aa","type":"`U`&`G`","system":true},"4d0fd348-9049-4733-95fd-b0d5fb166a4a":{"name":"add length","units":{"length0":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"},"length1":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"},"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf"}},"merges":{"merge0":{"length0":{"output":{"length":true}},"add":{"input":{"a":true}}},"merge1":{"length1":{"output":{"length":true}},"add":{"input":{"b":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"length0","pinId":"a"}},"type":"<A>[]"},"b":{"plug":{"0":{"unitId":"length1","pinId":"a"}},"type":"<B>[]"}},"outputs":{"length":{"plug":{"0":{"unitId":"add","pinId":"a + b"}},"type":"number"}},"metadata":{"icon":"ruler","description":"...","complexity":9,"tags":["core","array"]},"id":"4d0fd348-9049-4733-95fd-b0d5fb166a4a","type":"`U`&`G`","system":true},"765114be-2c5e-4ac8-b04e-27dbcb60ac12":{"name":"append if","units":{"ifelse":{"id":"92760dd2-ecd9-46db-851f-70950a5b6bc3"},"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8","input":{"a":{"constant":false}}},"append":{"id":"fa7721eb-1dd6-482e-8c7a-6da35b5f88bc"}},"merges":{"0":{"if":{"input":{"b":true}},"ifelse":{"input":{"b":true}}},"1":{"ifelse":{"output":{"if":true}},"append":{"input":{"a":true}}},"2":{"if":{"output":{"a if b":true}},"append":{"input":{"b":true}}},"3":{"ifelse":{"output":{"else":true}},"append":{"output":{"a":true}}}},"metadata":{"icon":"chevrons-left","description":"prepend element `b` to `a` if `test`","complexity":17,"tags":["core","array"]},"inputs":{"b":{"plug":{"0":{"unitId":"if","pinId":"a"}},"functional":true,"type":"<A>"},"a":{"plug":{"0":{"unitId":"ifelse","pinId":"a"}},"functional":true,"type":"<A>[]"},"test":{"plug":{"0":{"mergeId":"0"}},"functional":true,"type":"boolean"}},"outputs":{"a":{"plug":{"0":{"mergeId":"3"}},"type":"<A>[]"}},"id":"765114be-2c5e-4ac8-b04e-27dbcb60ac12","type":"`U`&`G`","system":true},"4a065231-48e6-44ed-95bb-8f96c4643574":{"name":"array builder","units":{"arraybuilderfrom":{"id":"6db1905f-2343-4c63-97d3-07f4d946ef58","input":{"init":{"data":"[]","constant":true}}}},"merges":{},"metadata":{"icon":"array","description":"build a list from empty list","complexity":10,"tags":["core","array"]},"inputs":{"test":{"plug":{"0":{"unitId":"arraybuilderfrom","pinId":"test"}},"type":"boolean"},"a":{"plug":{"0":{"unitId":"arraybuilderfrom","pinId":"a"}},"type":"<A>"}},"outputs":{"acc":{"plug":{"0":{"unitId":"arraybuilderfrom","pinId":"acc"}},"type":"<A>[]"},"a[]":{"plug":{"0":{"unitId":"arraybuilderfrom","pinId":"a[]"}},"type":"<A>[]"},"local":{"plug":{"0":{"unitId":"arraybuilderfrom","pinId":"local"}},"type":"<A>[]"}},"id":"4a065231-48e6-44ed-95bb-8f96c4643574","type":"`U`&`G`","system":true},"6db1905f-2343-4c63-97d3-07f4d946ef58":{"name":"array builder from","units":{"append":{"id":"fa7721eb-1dd6-482e-8c7a-6da35b5f88bc"},"loop":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","output":{"final":{"ignored":false}}}},"merges":{"0":{"append":{"output":{"a":true}},"loop":{"input":{"next":true}}},"1":{"append":{"input":{"a":true}},"loop":{"output":{"current":true}}}},"metadata":{"icon":"array","description":"build a list starting `from`","complexity":8,"tags":["core","array"]},"inputs":{"a":{"plug":{"0":{"unitId":"append","pinId":"b"}},"type":"<A>"},"test":{"plug":{"0":{"unitId":"loop","pinId":"test"}},"type":"boolean"},"init":{"plug":{"0":{"unitId":"loop","pinId":"init"}},"type":"<A>[]"}},"outputs":{"acc":{"plug":{"0":{"mergeId":"1"}},"type":"<A>[]"},"a[]":{"plug":{"0":{"unitId":"loop","pinId":"final"}},"type":"<A>[]"},"local":{"plug":{"0":{"unitId":"loop","pinId":"local"}},"type":"<A>[]"}},"id":"6db1905f-2343-4c63-97d3-07f4d946ef58","type":"`U`&`G`","system":true},"f962de3a-b87c-4018-bcb6-71921f93ce1d":{"name":"at or default","units":{"at":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a"},"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"if0":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"ifnot":{"id":"439c6b56-a0b6-4b76-9131-c6dc23375fda"},"lengthgreaterthan":{"id":"603ebe2e-5329-446d-b422-78f3201ddd7a"}},"merges":{"0":{"ifnot":{"input":{"b":true}},"if":{"input":{"b":true}},"if0":{"input":{"b":true}},"lengthgreaterthan":{"output":{"true":true}}},"1":{"if0":{"input":{"a":true}},"lengthgreaterthan":{"input":{"b":true}}},"2":{"if":{"input":{"a":true}},"lengthgreaterthan":{"input":{"a":true}}},"3":{"if0":{"output":{"a if b":true}},"at":{"input":{"i":true}}},"xdocioal":{"if":{"output":{"a if b":true}},"at":{"input":{"a":true}}},"jgunro":{"at":{"output":{"a[i]":true}},"ifnot":{"output":{"a if not b":true}}}},"metadata":{"icon":"brackets","description":"no description","complexity":23,"tags":["core","array"]},"inputs":{"i":{"plug":{"0":{"mergeId":"1"}},"functional":true,"type":"number"},"a":{"plug":{"0":{"mergeId":"2"}},"functional":true,"type":"<A>[]"},"d":{"plug":{"0":{"unitId":"ifnot","pinId":"a"}},"functional":true,"type":"<A>"}},"outputs":{"a[i] || d":{"plug":{"0":{"mergeId":"jgunro"}},"type":"<A>"}},"id":"f962de3a-b87c-4018-bcb6-71921f93ce1d","type":"`U`&`G`","system":true},"c4de657d-0af7-45a0-b5a9-64127d78fb18":{"name":"at path","units":{"at":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a"},"loop0":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","output":{"final":{"ignored":true}}},"behead":{"id":"e9831075-2e62-43a4-84af-0653f7e707a9"},"loop1":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","output":{"local":{"ignored":true},"final":{"ignored":false}}},"isnotempty":{"id":"b74c6c04-8fe8-4009-9f61-b22f7a404342"}},"merges":{"0":{"loop0":{"input":{"test":true}},"isnotempty":{"output":{"!empty":true}},"loop1":{"input":{"test":true}}},"1":{"loop0":{"output":{"local":true}},"isnotempty":{"input":{"a":true}}},"2":{"loop0":{"output":{"current":true}},"behead":{"input":{"a":true}}},"phpjterjm":{"loop0":{"input":{"next":true}},"behead":{"output":{"a":true}}},"mage":{"behead":{"output":{"head":true}},"at":{"input":{"i":true}}},"tursgjdqc":{"at":{"input":{"a":true}},"loop1":{"output":{"current":true}}},"sdhxizrr":{"at":{"output":{"a[i]":true}},"loop1":{"input":{"next":true}}}},"metadata":{"icon":"brackets","description":"get value of `a` at `path`","complexity":27,"tags":["core","array"]},"inputs":{"a":{"plug":{"0":{"unitId":"loop1","pinId":"init"}},"functional":true,"type":"<A>[][][]"},"path":{"plug":{"0":{"unitId":"loop0","pinId":"init"}},"functional":true,"type":"number[]"}},"outputs":{"value":{"plug":{"0":{"unitId":"loop1","pinId":"final"}},"type":"<A>[][][]"}},"id":"c4de657d-0af7-45a0-b5a9-64127d78fb18","type":"`U`&`G`","system":true},"697871f5-6515-4426-a011-88d0d6aedcc3":{"name":"chop 3","units":{"at":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a","input":{"i":{"constant":true,"data":"2"}}},"at0":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a","input":{"i":{"constant":true,"data":"0"}}},"at1":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a","input":{"i":{"constant":true,"data":"1"}}}},"merges":{"0":{"at":{"input":{"a":true}},"at0":{"input":{"a":true}},"at1":{"input":{"a":true}}}},"metadata":{"icon":"split-three","description":"get array `a` first 3 values","complexity":7,"tags":["core","array"]},"inputs":{"a":{"plug":{"0":{"mergeId":"0"}},"type":"<A>[]","metadata":{"examples":["[1,2,3]"]}}},"outputs":{"0":{"plug":{"0":{"unitId":"at0","pinId":"a[i]"}},"type":"<A>"},"1":{"plug":{"0":{"unitId":"at1","pinId":"a[i]"}},"type":"<A>"},"2":{"plug":{"0":{"unitId":"at","pinId":"a[i]"}},"type":"<A>"}},"id":"697871f5-6515-4426-a011-88d0d6aedcc3","type":"`U`&`G`","system":true},"abbbe3fa-8ee4-4446-8feb-e21a66fd8580":{"name":"concat 3","units":{"concat":{"id":"f57f5318-f26f-4b9f-b9e2-dcc022ad7728"},"concat0":{"id":"f57f5318-f26f-4b9f-b9e2-dcc022ad7728"}},"merges":{"0":{"concat":{"input":{"b":true}},"concat0":{"output":{"ab":true}}}},"metadata":{"icon":"plus","description":"no description","complexity":6,"tags":["core","array"]},"inputs":{"a":{"plug":{"0":{"unitId":"concat","pinId":"a"}},"type":"<A>[]"},"b":{"plug":{"0":{"unitId":"concat0","pinId":"a"}},"type":"<A>[]"},"c":{"plug":{"0":{"unitId":"concat0","pinId":"b"}},"type":"<A>[]"}},"outputs":{"abc":{"plug":{"0":{"unitId":"concat","pinId":"ab"}},"type":"<A>[]"}},"id":"abbbe3fa-8ee4-4446-8feb-e21a66fd8580","type":"`U`&`G`","system":true},"cdffb1ec-0790-11eb-96fc-97a33d06261b":{"name":"drop first","units":{"split":{"id":"de2d5ba8-ac0f-461e-849b-f4aa84d2736a","input":{"a":{},"i":{}},"output":{"second":{"ignored":false},"first":{"ignored":true}}}},"merges":{},"inputs":{"ab":{"plug":{"0":{"unitId":"split","pinId":"a"}},"type":"<A>[]"},"n":{"plug":{"0":{"unitId":"split","pinId":"i"}},"type":"number"}},"outputs":{"b":{"plug":{"0":{"unitId":"split","pinId":"second"}},"type":"<A>[]"}},"metadata":{"icon":"brackets","description":"output list `a` containing all but the first `n` elements of the given list `ab`","complexity":13,"tags":["core","array"]},"id":"cdffb1ec-0790-11eb-96fc-97a33d06261b","type":"`U`&`G`","system":true},"6c2a2d48-fd23-11ea-b8c5-27de11375b8a":{"name":"drop last","units":{"split":{"id":"de2d5ba8-ac0f-461e-849b-f4aa84d2736a","input":{"a":{},"i":{}},"output":{"second":{"ignored":true},"first":{}}},"length":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8","input":{"a":{}},"output":{"length":{}}},"subtract":{"id":"fa94b179-00e3-4ed1-814e-7938324a833f","input":{"a":{},"b":{}},"output":{"a - b":{}}}},"merges":{"0":{"length":{"input":{"a":true}},"split":{"input":{"a":true}}},"1":{"length":{"output":{"length":true}},"subtract":{"input":{"a":true}}},"2":{"subtract":{"output":{"a - b":true}},"split":{"input":{"i":true}}}},"inputs":{"ab":{"plug":{"0":{"mergeId":"0"}},"type":"<A>[]"},"n":{"plug":{"0":{"unitId":"subtract","pinId":"b"}},"type":"number"}},"outputs":{"a":{"plug":{"0":{"unitId":"split","pinId":"first"}},"type":"<A>[]"}},"metadata":{"icon":"brackets","description":"output list `a` containing all but the last `n` elements of the given list `ab`","complexity":15,"tags":["core","array"]},"id":"6c2a2d48-fd23-11ea-b8c5-27de11375b8a","type":"`U`&`G`","system":true},"b226083c-2797-11eb-a546-c350370e09cb":{"name":"empty array","units":{"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"[]"}}}},"merges":{},"metadata":{"icon":"brackets","description":"output an empty array","complexity":5,"tags":["core","array"]},"inputs":{"any":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"}},"outputs":{"[]":{"plug":{"0":{"unitId":"wait","pinId":"a"}},"type":"[]"}},"id":"b226083c-2797-11eb-a546-c350370e09cb","type":"`U`&`G`","system":true},"b94fd858-9fa6-4487-bc2e-87801d3dfcc3":{"name":"fill both end","units":{"fillend":{"id":"b0995ebb-08d5-4740-9bf3-272d44f09595"},"fillend0":{"id":"b0995ebb-08d5-4740-9bf3-272d44f09595"}},"merges":{"0":{"fillend":{"input":{"a":true}},"fillend0":{"input":{"a":true}}},"1":{"fillend":{"input":{"n":true}},"fillend0":{"input":{"n":true}}}},"metadata":{"icon":"brackets","description":"fill `a` and `b` with `a` until both have size `n`","complexity":54,"tags":["core","array"]},"inputs":{"a[]":{"plug":{"0":{"unitId":"fillend","pinId":"a[]"}},"functional":true,"type":"<A>[]"},"b[]":{"plug":{"0":{"unitId":"fillend0","pinId":"a[]"}},"functional":true,"type":"<A>[]"},"with":{"plug":{"0":{"mergeId":"0"}},"type":"<A>"},"n":{"plug":{"0":{"mergeId":"1"}},"type":"number"}},"outputs":{"a[]":{"plug":{"0":{"unitId":"fillend","pinId":"a[]"}},"type":"<A>[]"},"b[]":{"plug":{"0":{"unitId":"fillend0","pinId":"a[]"}},"type":"<A>[]"}},"id":"b94fd858-9fa6-4487-bc2e-87801d3dfcc3","type":"`U`&`G`","system":true},"b0995ebb-08d5-4740-9bf3-272d44f09595":{"name":"fill end","units":{"length":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"},"subtract":{"id":"fa94b179-00e3-4ed1-814e-7938324a833f"},"init":{"id":"5a7912c7-9c67-45b6-ae2b-e352405e6c16"},"concat":{"id":"f57f5318-f26f-4b9f-b9e2-dcc022ad7728"}},"merges":{"0":{"length":{"output":{"length":true}},"subtract":{"input":{"b":true}}},"nqijmihi":{"length":{"input":{"a":true}},"concat":{"input":{"a":true}}},"atejrzzx":{"subtract":{"output":{"a - b":true}},"init":{"input":{"n":true}}},"mtjhxp":{"concat":{"input":{"b":true}},"init":{"output":{"a[]":true}}}},"metadata":{"icon":"brackets","description":"fill `from` array with `a` until size `n`","complexity":51,"tags":["core","array"]},"inputs":{"a[]":{"plug":{"0":{"mergeId":"nqijmihi"}},"type":"<A>[]"},"n":{"plug":{"0":{"unitId":"subtract","pinId":"a"}},"type":"number"},"a":{"plug":{"0":{"unitId":"init","pinId":"a"}},"type":"<A>"}},"outputs":{"a[]":{"plug":{"0":{"unitId":"concat","pinId":"ab"}},"type":"<A>[]"}},"id":"b0995ebb-08d5-4740-9bf3-272d44f09595","type":"`U`&`G`","system":true},"ea426391-2104-41fd-8963-626d21415d09":{"name":"filter","units":{"foreach":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","output":{"a":{"ignored":false},"i":{"ignored":false},"test":{"ignored":false}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"[]"}}},"loop":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","output":{"local":{"ignored":true},"current":{"ignored":false},"final":{"ignored":false}}},"appendif":{"id":"765114be-2c5e-4ac8-b04e-27dbcb60ac12"}},"merges":{"0":{"foreach":{"output":{"test":true}},"loop":{"input":{"test":true}}},"1":{"foreach":{"output":{"a[i]":true}},"appendif":{"input":{"b":true}}},"2":{"foreach":{"input":{"a":true}},"wait":{"input":{"b":true}}},"3":{"loop":{"input":{"init":true}},"wait":{"output":{"a":true}}},"4":{"loop":{"input":{"next":true}},"appendif":{"output":{"a":true}}},"5":{"appendif":{"input":{"a":true}},"loop":{"output":{"current":true}}}},"metadata":{"icon":"brackets","description":"filter a list `a`","complexity":54,"tags":["core","array"]},"inputs":{"a":{"plug":{"0":{"mergeId":"2"}},"type":"<A>[]"},"test":{"plug":{"0":{"unitId":"appendif","pinId":"test"}},"type":"boolean"}},"outputs":{"a[i]":{"plug":{"0":{"mergeId":"1"}},"type":"<A>"},"b":{"plug":{"0":{"unitId":"loop","pinId":"final"}},"type":"<A>[]"},"test":{"plug":{"0":{"mergeId":"0"}},"defaultIgnored":true,"type":"boolean"},"a":{"plug":{"0":{"unitId":"foreach","pinId":"a"}},"defaultIgnored":true,"type":"<A>[]"},"i":{"plug":{"0":{"unitId":"foreach","pinId":"i"}},"defaultIgnored":true,"type":"number"}},"id":"ea426391-2104-41fd-8963-626d21415d09","type":"`U`&`G`","system":true},"f0386b2f-de73-49a3-be8f-1a2ca10600c5":{"name":"filter value equals","units":{"filter":{"id":"ea426391-2104-41fd-8963-626d21415d09"},"propequal":{"id":"9df84140-dd90-48b3-a6a7-0651c8b5bfd7","input":{"key":{"constant":false},"value":{"constant":false}}},"repeatn":{"id":"251ba609-a9c5-451b-8162-411c966bf919"},"length":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"},"repeatn0":{"id":"251ba609-a9c5-451b-8162-411c966bf919"}},"merges":{"0":{"filter":{"input":{"test":true}},"propequal":{"output":{"equal":true}}},"1":{"filter":{"output":{"a[i]":true}},"propequal":{"input":{"obj":true}}},"2":{"propequal":{"input":{"value":true}},"repeatn0":{"output":{"a":true}}},"3":{"propequal":{"input":{"key":true}},"repeatn":{"output":{"a":true}}},"4":{"filter":{"input":{"a":true}},"length":{"input":{"a":true}}},"5":{"repeatn":{"input":{"n":true}},"length":{"output":{"length":true}},"repeatn0":{"input":{"n":true}}}},"metadata":{"icon":"brackets","description":"filter `a` elements with prop `k` equal to `v`","complexity":82,"tags":["core","array"]},"inputs":{"key":{"plug":{"0":{"unitId":"repeatn","pinId":"a"}},"functional":true,"type":"string"},"a":{"plug":{"0":{"mergeId":"4"}},"functional":true,"type":"object[]"},"value":{"plug":{"0":{"unitId":"repeatn0","pinId":"a"}},"functional":true,"type":"<A>"}},"outputs":{"b":{"plug":{"0":{"unitId":"filter","pinId":"b"}},"type":"object[]"}},"id":"f0386b2f-de73-49a3-be8f-1a2ca10600c5","type":"`U`&`G`","system":true},"7ca98fbb-6e84-4133-b658-46329a8e45cf":{"name":"find index","units":{"findlastindex":{"id":"411fbf6c-d5e2-42ba-8827-251233fb5bef","input":{"a":{},"test":{}},"output":{"i":{"ignored":false},"result":{},"a":{"ignored":false},"a[i]":{},"test":{"ignored":false}}},"loop":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","input":{"next":{},"test":{},"init":{}},"output":{"current":{},"local":{"ignored":true},"final":{"ignored":true}}},"andnot":{"id":"c059a789-b57c-4c2e-976b-fdbbe8f9993a","input":{"b":{},"a":{}}},"false":{"id":"b4d20f6f-32dc-4d04-97d6-69518976bdea","input":{"any":{}},"output":{"false":{}}}},"merges":{"0":{"loop":{"input":{"test":true}},"findlastindex":{"output":{"test":true}}},"1":{"andnot":{"input":{"b":true}},"loop":{"output":{"current":true}}},"2":{"andnot":{"output":{"a && !b":true}},"findlastindex":{"input":{"test":true}},"loop":{"input":{"next":true}}},"3":{"false":{"input":{"any":true}},"findlastindex":{"input":{"a":true}}},"4":{"false":{"output":{"false":true}},"loop":{"input":{"init":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"3"}},"type":"any"},"test":{"plug":{"0":{"unitId":"andnot","pinId":"a"}},"type":"boolean"}},"outputs":{"i":{"plug":{"0":{"unitId":"findlastindex","pinId":"i"}},"defaultIgnored":true,"type":"number"},"test":{"plug":{"0":{"mergeId":"0"}},"defaultIgnored":true,"type":"boolean"},"a[i]":{"plug":{"0":{"unitId":"findlastindex","pinId":"a[i]"}},"type":"<A>"},"a":{"plug":{"0":{"unitId":"findlastindex","pinId":"a"}},"defaultIgnored":true,"type":"<A>[]"},"result":{"plug":{"0":{"unitId":"findlastindex","pinId":"result"}},"type":"number"}},"metadata":{"icon":"brackets","description":"...","complexity":61,"tags":["core","array"]},"id":"7ca98fbb-6e84-4133-b658-46329a8e45cf","type":"`U`&`G`","system":true},"411fbf6c-d5e2-42ba-8827-251233fb5bef":{"name":"find last index","units":{"findlastindexfrom":{"id":"58e5ab50-dcc9-435a-8d17-87bc96b9b31c","input":{"test":{},"from":{"constant":true,"data":"0"},"a":{}},"output":{"a[i]":{},"result":{},"i":{"ignored":false},"a":{"ignored":false},"test":{"ignored":false}}}},"merges":{},"inputs":{"a":{"plug":{"0":{"unitId":"findlastindexfrom","pinId":"a"}},"type":"<A>[]"},"test":{"plug":{"0":{"unitId":"findlastindexfrom","pinId":"test"}},"type":"boolean"}},"outputs":{"i":{"plug":{"0":{"unitId":"findlastindexfrom","pinId":"i"}},"defaultIgnored":true,"type":"number"},"result":{"plug":{"0":{"unitId":"findlastindexfrom","pinId":"result"}},"type":"number"},"a":{"plug":{"0":{"unitId":"findlastindexfrom","pinId":"a"}},"defaultIgnored":true,"type":"<A>[]"},"a[i]":{"plug":{"0":{"unitId":"findlastindexfrom","pinId":"a[i]"}},"type":"<A>"},"test":{"plug":{"0":{"unitId":"findlastindexfrom","pinId":"test"}},"defaultIgnored":true,"type":"boolean"}},"metadata":{"icon":"brackets","description":"...","complexity":47,"tags":["core","array"]},"id":"411fbf6c-d5e2-42ba-8827-251233fb5bef","type":"`U`&`G`","system":true},"58e5ab50-dcc9-435a-8d17-87bc96b9b31c":{"name":"find last index from","units":{"findlastindexfromordefault":{"id":"08d39098-c38f-4a88-9d8c-cc323730b36c","input":{"a":{},"test":{},"from":{},"default":{"constant":true,"data":"-1"}},"output":{"a":{"ignored":false},"i":{"ignored":false},"a[i]":{},"result":{},"test":{"ignored":false}}}},"merges":{},"inputs":{"test":{"plug":{"0":{"unitId":"findlastindexfromordefault","pinId":"test"}},"type":"boolean"},"from":{"plug":{"0":{"unitId":"findlastindexfromordefault","pinId":"from"}},"type":"number"},"a":{"plug":{"0":{"unitId":"findlastindexfromordefault","pinId":"a"}},"type":"<A>[]"}},"outputs":{"a[i]":{"plug":{"0":{"unitId":"findlastindexfromordefault","pinId":"a[i]"}},"type":"<A>"},"result":{"plug":{"0":{"unitId":"findlastindexfromordefault","pinId":"result"}},"type":"number"},"i":{"plug":{"0":{"unitId":"findlastindexfromordefault","pinId":"i"}},"defaultIgnored":true,"type":"number"},"a":{"plug":{"0":{"unitId":"findlastindexfromordefault","pinId":"a"}},"defaultIgnored":true,"type":"<A>[]"},"test":{"plug":{"0":{"unitId":"findlastindexfromordefault","pinId":"test"}},"defaultIgnored":true,"type":"boolean"}},"metadata":{"icon":"brackets","description":"...","complexity":45,"tags":["core","array"]},"id":"58e5ab50-dcc9-435a-8d17-87bc96b9b31c","type":"`U`&`G`","system":true},"08d39098-c38f-4a88-9d8c-cc323730b36c":{"name":"find last index from or default","units":{"loop":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","input":{"next":{},"test":{},"init":{"constant":false}},"output":{"current":{"ignored":false},"local":{"ignored":true},"final":{"ignored":false}}},"pick":{"id":"396497e4-f8e7-4573-95c9-a4f186a5cd05","input":{"a":{},"b":{},"c":{}},"output":{"a":{}}},"foreachfrom":{"id":"f538e9b0-f172-4c9f-be23-86c715750b76","input":{"from":{},"a":{}},"output":{"i":{"ignored":false},"a":{"ignored":false},"a[i]":{},"test":{}}}},"merges":{"5":{"pick":{"output":{"a":true}},"loop":{"input":{"next":true}}},"6":{"loop":{"output":{"current":true}},"pick":{"input":{"b":true}}},"7":{"foreachfrom":{"output":{"test":true}},"loop":{"input":{"test":true}}},"8":{"foreachfrom":{"output":{"i":true}},"pick":{"input":{"a":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"foreachfrom","pinId":"a"}},"functional":true,"type":"<A>[]"},"test":{"plug":{"0":{"unitId":"pick","pinId":"c"}},"type":"boolean"},"from":{"plug":{"0":{"unitId":"foreachfrom","pinId":"from"}},"functional":true,"type":"number"},"default":{"plug":{"0":{"unitId":"loop","pinId":"init"}},"functional":true,"type":"number"}},"outputs":{"a":{"plug":{"0":{"unitId":"foreachfrom","pinId":"a"}},"defaultIgnored":true,"type":"<A>[]"},"i":{"plug":{"0":{"mergeId":"8"}},"defaultIgnored":true,"type":"number"},"a[i]":{"plug":{"0":{"unitId":"foreachfrom","pinId":"a[i]"}},"type":"<A>"},"test":{"plug":{"0":{"mergeId":"7"}},"defaultIgnored":true,"type":"boolean"},"result":{"plug":{"0":{"unitId":"loop","pinId":"final"}},"type":"number"}},"metadata":{"icon":"brackets","description":"...","complexity":43,"tags":["core","array"]},"id":"08d39098-c38f-4a88-9d8c-cc323730b36c","type":"`U`&`G`","system":true},"0f77eb13-5c48-4611-a9bf-fe10c903dc63":{"name":"first","units":{"at":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a","input":{"a":{},"i":{"constant":true,"data":"0"}},"output":{"a[i]":{}}}},"merges":{},"inputs":{"a":{"plug":{"0":{"unitId":"at","pinId":"a"}},"type":"<A>[]"}},"outputs":{"a[0]":{"plug":{"0":{"unitId":"at","pinId":"a[i]"}},"type":"<A>"}},"metadata":{"icon":"info-square","description":"`a` element at position 0","complexity":5,"tags":["core","array"]},"id":"0f77eb13-5c48-4611-a9bf-fe10c903dc63","type":"`U`&`G`","system":true},"df8ed55c-5f3d-460a-a7d7-2fa5aebaac53":{"name":"first 3","units":{"at":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a","input":{"i":{"constant":true,"data":"0"}}},"at0":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a","input":{"i":{"constant":true,"data":"1"}}},"at1":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a","input":{"i":{"constant":true,"data":"2"}}}},"merges":{"0":{"at1":{"input":{"a":true}},"at0":{"input":{"a":true}},"at":{"input":{"a":true}}}},"metadata":{"icon":"info-square","description":"array `a`\'s first 3 elements","complexity":7,"tags":["core","array"]},"inputs":{"a":{"plug":{"0":{"mergeId":"0"}},"type":"<A>[]"}},"outputs":{"0":{"plug":{"0":{"unitId":"at","pinId":"a[i]"}},"type":"<A>"},"1":{"plug":{"0":{"unitId":"at0","pinId":"a[i]"}},"type":"<A>"},"2":{"plug":{"0":{"unitId":"at1","pinId":"a[i]"}},"type":"<A>"}},"id":"df8ed55c-5f3d-460a-a7d7-2fa5aebaac53","type":"`U`&`G`","system":true},"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857":{"name":"for each","units":{"foreachfrom":{"id":"f538e9b0-f172-4c9f-be23-86c715750b76","input":{"from":{"constant":true,"data":"0"}},"output":{"a":{"ignored":false},"i":{"ignored":false},"test":{"ignored":false}}}},"merges":{},"inputs":{"a":{"plug":{"0":{"unitId":"foreachfrom","pinId":"a"}},"type":"<A>[]"}},"outputs":{"a[i]":{"plug":{"0":{"unitId":"foreachfrom","pinId":"a[i]"}},"type":"<A>"},"a":{"plug":{"0":{"unitId":"foreachfrom","pinId":"a"}},"defaultIgnored":true,"type":"<A>[]"},"i":{"plug":{"0":{"unitId":"foreachfrom","pinId":"i"}},"defaultIgnored":true,"type":"number"},"test":{"plug":{"0":{"unitId":"foreachfrom","pinId":"test"}},"defaultIgnored":true,"type":"boolean"}},"metadata":{"icon":"array","description":"output every element of array `a`","complexity":31,"tags":["core","array"]},"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","type":"`U`&`G`","system":true},"f538e9b0-f172-4c9f-be23-86c715750b76":{"name":"for each from","units":{"at":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a"},"lessthanlength":{"id":"cc422ac4-f29c-419d-8628-f58315bd7660"},"looprepeat":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535"},"loopincrement":{"id":"4e2c89b2-e9cb-42f6-bb8d-e9d665c21fa7","output":{}}},"merges":{"0":{"lessthanlength":{"output":{"true":true}},"looprepeat":{"input":{"test":true}},"loopincrement":{"input":{"test":true}}},"1":{"lessthanlength":{"input":{"a":true}},"looprepeat":{"output":{"local":true}}},"2":{"lessthanlength":{"input":{"b":true}},"loopincrement":{"output":{"local":true}}},"3":{"at":{"input":{"a":true}},"looprepeat":{"output":{"current":true}}},"4":{"at":{"input":{"i":true}},"loopincrement":{"output":{"current":true}}}},"inputs":{"from":{"plug":{"0":{"unitId":"loopincrement","pinId":"init"}},"functional":true,"type":"number"},"a":{"plug":{"0":{"unitId":"looprepeat","pinId":"init"}},"functional":true,"type":"<A>[]"}},"outputs":{"i":{"plug":{"0":{"mergeId":"4"}},"defaultIgnored":true,"type":"number"},"a":{"plug":{"0":{"mergeId":"3"}},"defaultIgnored":true,"type":"<A>[]"},"a[i]":{"plug":{"0":{"unitId":"at","pinId":"a[i]"}},"type":"<A>"},"test":{"plug":{"0":{"mergeId":"0"}},"type":"boolean"}},"metadata":{"icon":"array","description":"...","complexity":29,"tags":["core","array"]},"id":"f538e9b0-f172-4c9f-be23-86c715750b76","type":"`U`&`G`","system":true},"919d0a60-87cf-451b-a429-435aa70cde45":{"name":"head or default","units":{"behead":{"id":"e9831075-2e62-43a4-84af-0653f7e707a9"},"ifelse":{"id":"92760dd2-ecd9-46db-851f-70950a5b6bc3"},"isempty":{"id":"194683f4-5b90-4501-a8c9-b34f131d4f79"},"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"}},"merges":{"0":{"ifelse":{"input":{"b":true}},"if":{"input":{"b":true}},"isempty":{"output":{"empty":true}}},"1":{"ifelse":{"output":{"else":true}},"behead":{"input":{"a":true}}}},"metadata":{"icon":null,"description":"no description","complexity":27,"tags":["core","array"]},"inputs":{"a":{"plug":{"0":{"unitId":"ifelse","pinId":"a"},"1":{"unitId":"isempty","pinId":"obj"}},"functional":true,"type":"<A>[]"},"default":{"plug":{"0":{"unitId":"if","pinId":"a"}},"functional":true,"type":"<A>"}},"outputs":{"head":{"plug":{"0":{"unitId":"behead","pinId":"head"},"1":{"unitId":"if","pinId":"a if b"}},"type":"<A>"},"a":{"plug":{"0":{"unitId":"behead","pinId":"a"},"1":{"unitId":"ifelse","pinId":"if"}},"type":"<A>[]"},"empty":{"plug":{"0":{"mergeId":"0"}},"type":"boolean"}},"id":"919d0a60-87cf-451b-a429-435aa70cde45","type":"`U`&`G`","system":true},"8783e7de-6cde-11eb-bd74-574fd9c8b6aa":{"name":"includes","inputs":{"a[]":{"plug":{"0":{"unitId":"kktcqlhms","pinId":"init"},"1":{"unitId":"yadfnprd","pinId":"any"},"2":{"unitId":"foyauruqj","pinId":"any"}},"type":"<A>[]","functional":true},"a":{"plug":{"0":{"unitId":"rizvvu","pinId":"init"}},"type":"<A>","functional":true}},"outputs":{"found":{"plug":{"0":{"unitId":"loop","pinId":"final"}},"type":"boolean"}},"units":{"loop":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","input":{"next":{},"test":{},"init":{"constant":false}},"output":{"current":{"ignored":true,"metadata":{"position":{"x":137,"y":6}}},"local":{},"final":{"ignored":false,"metadata":{"position":{"x":134,"y":-12}}}},"metadata":{"position":{"x":82,"y":-18}}},"insarup":{"id":"4e2c89b2-e9cb-42f6-bb8d-e9d665c21fa7","input":{"test":{},"init":{}},"output":{"current":{},"local":{},"final":{"ignored":true,"metadata":{"position":{"x":-138,"y":-2}}}},"metadata":{"position":{"x":-85,"y":4}}},"kktcqlhms":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","input":{"init":{"metadata":{"position":{"x":-50,"y":-61}}},"test":{}},"output":{"local":{},"current":{},"final":{"ignored":true,"metadata":{"position":{"x":-71,"y":-65}}}},"metadata":{"position":{"x":-45,"y":-16}}},"munwxyxy":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a","input":{"a":{},"i":{}},"output":{"a[i]":{}},"metadata":{"position":{"x":-47,"y":85}}},"mrmioidmp":{"id":"cc422ac4-f29c-419d-8628-f58315bd7660","input":{"a":{},"b":{}},"output":{"true":{}},"metadata":{"position":{"x":-103,"y":-87}}},"gxmdzkpd":{"id":"85204bf6-6692-4686-a785-23127c0594b5","input":{"a":{},"b":{}},"output":{"a = b":{}},"metadata":{"position":{"x":61,"y":87}}},"rizvvu":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","input":{"init":{"metadata":{"position":{"x":19,"y":71}}},"test":{}},"output":{"local":{"ignored":true,"metadata":{"position":{"x":2,"y":51}}},"current":{},"final":{"ignored":true,"metadata":{"position":{"x":90,"y":84}}}},"metadata":{"position":{"x":48,"y":36}}},"andnot":{"id":"c059a789-b57c-4c2e-976b-fdbbe8f9993a","input":{"b":{},"a":{}},"output":{"a && !b":{}},"metadata":{"position":{"x":5,"y":-67}}},"yadfnprd":{"id":"b4d20f6f-32dc-4d04-97d6-69518976bdea","input":{"any":{"metadata":{"position":{"x":249,"y":-60}}}},"output":{"false":{}},"metadata":{"position":{"x":198,"y":-55}}},"foyauruqj":{"id":"618898d6-1167-11eb-bef9-cb053e09c21b","input":{"any":{"metadata":{"position":{"x":-263,"y":20}}}},"output":{"0":{}},"metadata":{"position":{"x":-211,"y":19}}}},"merges":{"0":{"munwxyxy":{"input":{"i":true}},"insarup":{"output":{"current":true}}},"1":{"mrmioidmp":{"input":{"b":true}},"insarup":{"output":{"local":true}}},"2":{"kktcqlhms":{"output":{"local":true}},"mrmioidmp":{"input":{"a":true}}},"3":{"insarup":{"input":{"test":true}},"kktcqlhms":{"input":{"test":true}},"rizvvu":{"input":{"test":true}},"loop":{"input":{"test":true}},"andnot":{"output":{"a && !b":true}}},"4":{"kktcqlhms":{"output":{"current":true}},"munwxyxy":{"input":{"a":true}}},"5":{"gxmdzkpd":{"input":{"a":true}},"munwxyxy":{"output":{"a[i]":true}}},"6":{"rizvvu":{"output":{"current":true}},"gxmdzkpd":{"input":{"b":true}}},"7":{"andnot":{"input":{"b":true}},"loop":{"output":{"local":true}}},"8":{"andnot":{"input":{"a":true}},"mrmioidmp":{"output":{"true":true}}},"9":{"gxmdzkpd":{"output":{"a = b":true}},"loop":{"input":{"next":true}}},"10":{"yadfnprd":{"output":{"false":true}},"loop":{"input":{"init":true}}},"11":{"foyauruqj":{"output":{"0":true}},"insarup":{"input":{"init":true}}}},"metadata":{"icon":"info-square","description":"find whether array `a[]` contains an element of value `a`","complexity":50,"tags":["core","array"],"position":{"merge":{"0":{"x":-92,"y":58},"1":{"x":-123,"y":-40},"2":{"x":-84,"y":-49},"3":{"x":4,"y":-10},"4":{"x":-51,"y":37},"5":{"x":6,"y":105},"6":{"x":99,"y":67},"7":{"x":57,"y":-61},"8":{"x":-47,"y":-97},"9":{"x":92,"y":37},"10":{"x":142,"y":-43},"11":{"x":-153,"y":13}}}},"id":"8783e7de-6cde-11eb-bd74-574fd9c8b6aa","type":"`U`&`G`","system":true},"5a7912c7-9c67-45b6-ae2b-e352405e6c16":{"name":"init","units":{"repeatn":{"id":"251ba609-a9c5-451b-8162-411c966bf919"},"narraybuilder":{"id":"38033fcc-aa28-4df3-abc8-d4ece231028b"}},"merges":{"achlazehm":{"repeatn":{"input":{"n":true}},"narraybuilder":{"input":{"n":true}}},"rcvjcbte":{"repeatn":{"output":{"a":true}},"narraybuilder":{"input":{"a":true}}}},"metadata":{"icon":"brackets","description":"init an array with length `n` filled with `a`\'s","complexity":44,"tags":["core","array"]},"inputs":{"n":{"plug":{"0":{"mergeId":"achlazehm"}},"functional":true,"type":"number"},"a":{"plug":{"0":{"unitId":"repeatn","pinId":"a"}},"functional":true,"type":"<A>"}},"outputs":{"a[]":{"plug":{"0":{"unitId":"narraybuilder","pinId":"a[]"}},"type":"<A>[]"}},"id":"5a7912c7-9c67-45b6-ae2b-e352405e6c16","type":"`U`&`G`","system":true},"b74c6c04-8fe8-4009-9f61-b22f7a404342":{"name":"is not empty","units":{"isempty":{"id":"194683f4-5b90-4501-a8c9-b34f131d4f79","input":{"obj":{}}},"not":{"id":"7d02d638-a311-4ea8-a0c0-d45baf739e0d"}},"merges":{"0":{"isempty":{"output":{"empty":true}},"not":{"input":{"a":true}}}},"metadata":{"icon":"question","description":"no description","complexity":15,"tags":["core","array"]},"inputs":{"a":{"plug":{"0":{"unitId":"isempty","pinId":"obj"}},"type":"<A>[]"}},"outputs":{"!empty":{"plug":{"0":{"unitId":"not","pinId":"!a"}},"type":"boolean"}},"id":"b74c6c04-8fe8-4009-9f61-b22f7a404342","type":"`U`&`G`","system":true},"358fa592-55e4-49f5-be28-b66e5114b266":{"name":"level","units":{"maxlength":{"id":"85343b1d-93db-4fc0-8fcf-655739dbd494"},"tjrsgp":{"id":"b94fd858-9fa6-4487-bc2e-87801d3dfcc3"}},"merges":{"cmywa":{"maxlength":{"output":{"max":true}},"tjrsgp":{"input":{"n":true}}},"oirwnkg":{"maxlength":{"input":{"a":true}},"tjrsgp":{"input":{"a[]":true}}},"wsguc":{"maxlength":{"input":{"b":true}},"tjrsgp":{"input":{"b[]":true}}}},"inputs":{"with":{"plug":{"0":{"unitId":"tjrsgp","pinId":"with"}},"functional":true,"type":"<A>"},"a[]":{"plug":{"0":{"mergeId":"oirwnkg"}},"functional":true,"type":"<A>[]"},"b[]":{"plug":{"0":{"mergeId":"wsguc"}},"functional":true,"type":"<A>[]"}},"outputs":{"length":{"plug":{"0":{"mergeId":"cmywa"}},"type":"number"},"b[]":{"plug":{"0":{"unitId":"tjrsgp","pinId":"b[]"}},"type":"<A>[]"},"a[]":{"plug":{"0":{"unitId":"tjrsgp","pinId":"a[]"}},"type":"<A>[]"}},"metadata":{"icon":"brackets","description":"match arrays\' length","complexity":63,"tags":["core","array"]},"id":"358fa592-55e4-49f5-be28-b66e5114b266","type":"`U`&`G`","system":true},"1c68d1e5-9170-417d-bfc8-fb7f7f12e714":{"name":"map","units":{"foreach":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","output":{"test":{"ignored":false}}},"arraybuilderfrom":{"id":"6db1905f-2343-4c63-97d3-07f4d946ef58","output":{"acc":{"ignored":true},"local":{"ignored":true}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"b":{"constant":false},"a":{"constant":true,"data":"[]"}}}},"merges":{"0":{"foreach":{"output":{"test":true}},"arraybuilderfrom":{"input":{"test":true}}},"1":{"foreach":{"input":{"a":true}},"wait":{"input":{"b":true}}},"2":{"arraybuilderfrom":{"input":{"init":true}},"wait":{"output":{"a":true}}}},"inputs":{"b[i]":{"plug":{"0":{"unitId":"arraybuilderfrom","pinId":"a"}},"type":"<B>"},"a":{"plug":{"0":{"mergeId":"1"}},"type":"<A>[]"}},"outputs":{"a[i]":{"plug":{"0":{"unitId":"foreach","pinId":"a[i]"}},"type":"<A>"},"b":{"plug":{"0":{"unitId":"arraybuilderfrom","pinId":"a[]"}},"type":"<B>[]"},"test":{"plug":{"0":{"mergeId":"0"}},"type":"boolean","defaultIgnored":true}},"metadata":{"icon":"map","description":"...","complexity":42,"tags":["core","array"]},"id":"1c68d1e5-9170-417d-bfc8-fb7f7f12e714","type":"`U`&`G`","system":true},"57880ebc-bf8a-42da-b2b1-01ae188aa1fa":{"name":"map 2","units":{"foreach":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","output":{"test":{"ignored":false}}},"foreach1":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","output":{"test":{"ignored":true}}},"arraybuilderfrom":{"id":"6db1905f-2343-4c63-97d3-07f4d946ef58","output":{"local":{"ignored":true},"acc":{"ignored":true}}},"wait2":{"id":"67cca9ec-1976-47bc-b0d7-5b32e059f6f1","input":{"a":{"constant":true,"data":"[]"}}}},"merges":{"hyjndoefw":{"foreach":{"output":{"test":true}},"arraybuilderfrom":{"input":{"test":true}}},"kllyjc":{"wait2":{"input":{"c":true}},"foreach1":{"input":{"a":true}}},"yknwpbete":{"arraybuilderfrom":{"input":{"init":true}},"wait2":{"output":{"a":true}}},"vlntyntal":{"foreach":{"input":{"a":true}},"wait2":{"input":{"b":true}}}},"inputs":{"b":{"plug":{"0":{"mergeId":"kllyjc"}},"functional":true,"type":"any"},"c[i]":{"plug":{"0":{"unitId":"arraybuilderfrom","pinId":"a"}},"type":"<B>"},"a":{"plug":{"0":{"mergeId":"vlntyntal"}},"functional":true,"type":"<A>[]"}},"outputs":{"b[i]":{"plug":{"0":{"unitId":"foreach1","pinId":"a[i]"}},"type":"<B>"},"b":{"plug":{"0":{"unitId":"arraybuilderfrom","pinId":"a[]"}},"type":"<B>[]"},"a[i]":{"plug":{"0":{"unitId":"foreach","pinId":"a[i]"}},"type":"<A>"}},"metadata":{"icon":"map","description":"...","complexity":46,"tags":["core","array"]},"id":"57880ebc-bf8a-42da-b2b1-01ae188aa1fa","type":"`U`&`G`","system":true},"28ee1447-9e5d-4e18-8a9d-90fedfceb4ff":{"name":"map 2 from","units":{"foreach":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","output":{"test":{"ignored":false}}},"foreach1":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","output":{"test":{"ignored":true}}},"lgxnwnr":{"id":"6db1905f-2343-4c63-97d3-07f4d946ef58","output":{"local":{"ignored":true},"acc":{"ignored":true}}}},"merges":{"hyjndoefw":{"foreach":{"output":{"test":true}},"lgxnwnr":{"input":{"test":true}}}},"inputs":{"b":{"plug":{"0":{"unitId":"foreach1","pinId":"a"}},"type":"<B>[]"},"c[i]":{"plug":{"0":{"unitId":"lgxnwnr","pinId":"a"}},"type":"<B>"},"a":{"plug":{"0":{"unitId":"foreach","pinId":"a"}},"type":"<A>[]"},"hqafziavx":{"plug":{"0":{"unitId":"lgxnwnr","pinId":"init"}},"functional":true,"type":"<B>[]"}},"outputs":{"b[i]":{"plug":{"0":{"unitId":"foreach1","pinId":"a[i]"}},"type":"<B>"},"b":{"plug":{"0":{"unitId":"lgxnwnr","pinId":"a[]"}},"type":"<B>[]"},"a[i]":{"plug":{"0":{"unitId":"foreach","pinId":"a[i]"}},"type":"<A>"}},"metadata":{"icon":"map","description":"...","complexity":40,"tags":["core","array"]},"id":"28ee1447-9e5d-4e18-8a9d-90fedfceb4ff","type":"`U`&`G`","system":true},"2dbdf0a4-09c1-49af-b9f8-d51b5cbab5a2":{"name":"array multiply","units":{"map2":{"id":"57880ebc-bf8a-42da-b2b1-01ae188aa1fa"},"multiply":{"id":"872be100-f4dc-4246-8eea-6e3da31137b7"}},"merges":{"lxbvanzk":{"map2":{"output":{"a[i]":true}},"multiply":{"input":{"a":true}}},"dkllawfhv":{"map2":{"output":{"b[i]":true}},"multiply":{"input":{"b":true}}},"kynujs":{"multiply":{"output":{"a \xD7 b":true}},"map2":{"input":{"c[i]":true}}}},"metadata":{"icon":"x","description":"no description","complexity":51,"tags":["core","array"]},"inputs":{"b":{"plug":{"0":{"unitId":"map2","pinId":"b"}},"functional":true,"type":"any"},"a":{"plug":{"0":{"unitId":"map2","pinId":"a"}},"functional":true,"type":"number[]"}},"outputs":{"ab":{"plug":{"0":{"unitId":"map2","pinId":"b"}},"type":"number[]"}},"id":"2dbdf0a4-09c1-49af-b9f8-d51b5cbab5a2","type":"`U`&`G`","system":true},"a7d5c2f3-6134-4248-b9bc-33271c280267":{"name":"pair","units":{"concat":{"id":"f57f5318-f26f-4b9f-b9e2-dcc022ad7728"},"single":{"id":"d2f8bb43-af44-4371-a32e-20b760695e13"},"single0":{"id":"d2f8bb43-af44-4371-a32e-20b760695e13"}},"merges":{"0":{"concat":{"input":{"b":true}},"single":{"output":{"[a]":true}}},"1":{"concat":{"input":{"a":true}},"single0":{"output":{"[a]":true}}}},"metadata":{"icon":"brackets","description":"build array with elements `0` and `1`","complexity":11,"tags":["core","array"]},"inputs":{"0":{"plug":{"0":{"unitId":"single0","pinId":"a"}},"type":"<A>"},"1":{"plug":{"0":{"unitId":"single","pinId":"a"}},"type":"<A>"}},"outputs":{"hbsxpnl":{"plug":{"0":{"unitId":"concat","pinId":"ab"}},"type":"<A>[]"}},"id":"a7d5c2f3-6134-4248-b9bc-33271c280267","type":"`U`&`G`","system":true},"bad2ec99-81c0-4a7d-9b3a-562b870c13eb":{"type":"`U`&`G`","name":"pluck","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"obj":{},"key":{}},"output":{"value":{}}},"map":{"id":"1c68d1e5-9170-417d-bfc8-fb7f7f12e714","input":{"b[i]":{},"a":{}},"output":{"a[i]":{},"b":{},"test":{"ignored":false}}},"looprepeat":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","input":{"init":{},"test":{}},"output":{"local":{"ignored":true},"current":{},"final":{"ignored":true}}}},"merges":{"0":{"get":{"input":{"key":true}},"looprepeat":{"output":{"current":true}}},"1":{"get":{"input":{"obj":true}},"map":{"output":{"a[i]":true}}},"2":{"map":{"output":{"test":true}},"looprepeat":{"input":{"test":true}}},"3":{"get":{"output":{"value":true}},"map":{"input":{"b[i]":true}}}},"inputs":{"a":{"ref":false,"plug":{"0":{"unitId":"map","pinId":"a"}},"functional":true},"key":{"ref":false,"plug":{"0":{"unitId":"looprepeat","pinId":"init"}},"functional":true}},"outputs":{"b":{"ref":false,"plug":{"0":{"unitId":"map","pinId":"b"}}}},"metadata":{"icon":"question","description":"map array objects `a` to their `key` values","tags":["core","array"]},"id":"bad2ec99-81c0-4a7d-9b3a-562b870c13eb","system":true},"5a8e4250-ad00-40a8-ae32-9f4aeeb8ab2e":{"name":"prepend if","units":{"prepend":{"id":"d9cf4224-39df-434a-85a6-2b143330cbab"},"pick":{"id":"396497e4-f8e7-4573-95c9-a4f186a5cd05"}},"merges":{"kajgjbzz":{"prepend":{"input":{"a":true}},"pick":{"input":{"b":true}}},"jlayrqhpi":{"prepend":{"output":{"a":true}},"pick":{"input":{"a":true}}}},"metadata":{"icon":"chevrons-left","description":"prepend element `b` to `a` if `test`","complexity":16,"tags":["core","array"]},"inputs":{"test":{"plug":{"0":{"unitId":"pick","pinId":"c"}},"functional":true,"type":"boolean"},"b":{"plug":{"0":{"unitId":"prepend","pinId":"b"}},"functional":true,"type":"<A>"},"a":{"plug":{"0":{"mergeId":"kajgjbzz"}},"functional":true,"type":"<A>[]"}},"outputs":{"a":{"plug":{"0":{"unitId":"pick","pinId":"a"}},"type":"<A>[]"}},"id":"5a8e4250-ad00-40a8-ae32-9f4aeeb8ab2e","type":"`U`&`G`","system":true},"e75537f8-d35a-45c4-8193-e0c6e015b4c6":{"name":"prepend if not","units":{"prependif":{"id":"5a8e4250-ad00-40a8-ae32-9f4aeeb8ab2e"},"not":{"id":"7d02d638-a311-4ea8-a0c0-d45baf739e0d"}},"merges":{"obgzpvr":{"prependif":{"input":{"test":true}},"not":{"output":{"!a":true}}}},"metadata":{"icon":"chevrons-left","description":"prepend element `b` to `a` if not `test`","complexity":19,"tags":["core","array"]},"inputs":{"test":{"plug":{"0":{"unitId":"not","pinId":"a"}},"functional":true,"type":"boolean"},"a":{"plug":{"0":{"unitId":"prependif","pinId":"a"}},"functional":true,"type":"<A>[]"},"b":{"plug":{"0":{"unitId":"prependif","pinId":"b"}},"functional":true,"type":"<A>"}},"outputs":{"a":{"plug":{"0":{"unitId":"prependif","pinId":"a"}},"type":"<A>[]"}},"id":"e75537f8-d35a-45c4-8193-e0c6e015b4c6","type":"`U`&`G`","system":true},"a0b5c3d9-7ee8-4c41-a299-1d32e707c673":{"name":"range array","units":{"narraybuilder":{"id":"38033fcc-aa28-4df3-abc8-d4ece231028b","input":{"n":{},"a":{}},"output":{"a[]":{}}},"range":{"id":"29e43ad7-be5e-437f-8f0f-2df996c8b89c","input":{"a":{"constant":true,"data":"0"}}}},"merges":{"lmuhl":{"narraybuilder":{"input":{"a":true}},"range":{"output":{"i":true}}},"uzlnv":{"narraybuilder":{"input":{"n":true}},"range":{"input":{"b":true}}}},"inputs":{"n":{"plug":{"0":{"mergeId":"uzlnv"}},"metadata":{"description":"number of elements"},"type":"number"}},"outputs":{"a":{"plug":{"0":{"unitId":"narraybuilder","pinId":"a[]"}},"metadata":"array","type":"number[]"}},"metadata":{"icon":"brackets","description":"build an array from 0 to `n`","complexity":40,"tags":["core","array"]},"id":"a0b5c3d9-7ee8-4c41-a299-1d32e707c673","type":"`U`&`G`","system":true},"5cd76a8a-603b-49e1-bda3-09ad217eb108":{"name":"reduce","units":{"foreach":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","output":{"test":{"ignored":false}}},"loop":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","output":{"local":{"ignored":true},"final":{"ignored":false}}}},"merges":{"orbnh":{"foreach":{"output":{"test":true}},"loop":{"input":{"test":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"foreach","pinId":"a"}},"functional":true,"type":"<A>[]"},"next":{"plug":{"0":{"unitId":"loop","pinId":"next"}},"type":"<B>"},"init":{"plug":{"0":{"unitId":"loop","pinId":"init"}},"functional":true,"type":"<B>"}},"outputs":{"a[i]":{"plug":{"0":{"unitId":"foreach","pinId":"a[i]"}},"type":"<A>"},"test":{"plug":{"0":{"mergeId":"orbnh"}},"type":"boolean"},"result":{"plug":{"0":{"unitId":"loop","pinId":"final"}},"type":"<B>"},"local":{"plug":{"0":{"unitId":"loop","pinId":"current"}},"type":"<B>"}},"metadata":{"icon":"brackets","description":"no description","complexity":34,"tags":["core","array"]},"id":"5cd76a8a-603b-49e1-bda3-09ad217eb108","type":"`U`&`G`","system":true},"55d4bc9e-a4a2-44ed-8b35-c9ae64b5d0e3":{"name":"remove index","units":{"remove":{"id":"f69e88e3-b2c2-481b-b036-a5c0ed7ccccb","input":{"a":{},"start":{},"count":{"constant":true,"data":"1"}},"output":{"a":{},"removed":{}}},"first":{"id":"0f77eb13-5c48-4611-a9bf-fe10c903dc63","input":{"a":{}},"output":{"a[0]":{}}}},"merges":{"0":{"first":{"input":{"a":true}},"remove":{"output":{"removed":true}}}},"inputs":{"i":{"plug":{"0":{"unitId":"remove","pinId":"start"}},"type":"number"},"a":{"plug":{"0":{"unitId":"remove","pinId":"a"}},"type":"<A>[]"}},"outputs":{"a":{"plug":{"0":{"unitId":"remove","pinId":"a"}},"type":"<A>[]"},"a[i]":{"plug":{"0":{"unitId":"first","pinId":"a[0]"}},"type":"<A>[]"}},"metadata":{"icon":"scissors","description":"remove `a` element at position `i`","complexity":10,"tags":["core","array"]},"id":"55d4bc9e-a4a2-44ed-8b35-c9ae64b5d0e3","type":"`U`&`G`","system":true},"5e6d3a86-f73e-46ce-9443-0f53e5a41d1c":{"name":"reverse","units":{"foreachreverse":{"id":"dd7ae700-3016-4aba-a45f-5fa2c21cb00f"},"narraybuilder":{"id":"38033fcc-aa28-4df3-abc8-d4ece231028b"},"length":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"}},"merges":{"0":{"foreachreverse":{"input":{"a":true}},"length":{"input":{"a":true}}},"1":{"narraybuilder":{"input":{"n":true}},"length":{"output":{"length":true}}},"2":{"narraybuilder":{"input":{"a":true}},"foreachreverse":{"output":{"a[i]":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"0"}},"type":"<A>[]"}},"outputs":{"a":{"plug":{"0":{"unitId":"narraybuilder","pinId":"a[]"}},"type":"<A>[]"}},"metadata":{"icon":"brackets","description":"revert `a`","complexity":50,"tags":["core","array"]},"id":"5e6d3a86-f73e-46ce-9443-0f53e5a41d1c","type":"`U`&`G`","system":true},"d2f8bb43-af44-4371-a32e-20b760695e13":{"name":"single","units":{"append":{"id":"fa7721eb-1dd6-482e-8c7a-6da35b5f88bc","input":{"a":{"constant":true,"data":"[]"}}}},"merges":{},"metadata":{"icon":"brackets","description":"output a list with a single element `a`","complexity":5,"tags":["core","array"]},"inputs":{"a":{"plug":{"0":{"unitId":"append","pinId":"b"}},"type":"<A>"}},"outputs":{"[a]":{"plug":{"0":{"unitId":"append","pinId":"a"}},"type":"<A>[]"}},"id":"d2f8bb43-af44-4371-a32e-20b760695e13","type":"`U`&`G`","system":true},"de2d5ba8-ac0f-461e-849b-f4aa84d2736a":{"name":"split at","units":{"remove":{"id":"f69e88e3-b2c2-481b-b036-a5c0ed7ccccb"},"length":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"},"subtract":{"id":"fa94b179-00e3-4ed1-814e-7938324a833f"}},"merges":{"0":{"remove":{"input":{"a":true}},"length":{"input":{"a":true}}},"1":{"length":{"output":{"length":true}},"subtract":{"input":{"a":true}}},"2":{"remove":{"input":{"start":true}},"subtract":{"input":{"b":true}}},"3":{"remove":{"input":{"count":true}},"subtract":{"output":{"a - b":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"0"}},"type":"<A>[]"},"i":{"plug":{"0":{"mergeId":"2"}},"type":"number"}},"outputs":{"second":{"plug":{"0":{"unitId":"remove","pinId":"removed"}},"type":"<A>[]"},"first":{"plug":{"0":{"unitId":"remove","pinId":"a"}},"type":"<A>[]"}},"metadata":{"icon":"split","description":"...","complexity":11,"tags":["core","array"]},"id":"de2d5ba8-ac0f-461e-849b-f4aa84d2736a","type":"`U`&`G`","system":true},"8babf4fa-e95e-449e-80b9-62e03ba0aae4":{"name":"split in half","units":{"splitat":{"id":"de2d5ba8-ac0f-461e-849b-f4aa84d2736a","metadata":{"position":{"x":84,"y":-13}}},"inthalf":{"id":"86e310b3-4b84-4be2-a87a-e4ebcc5d3a0c","metadata":{"position":{"x":-25,"y":-39}}},"length":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8","metadata":{"position":{"x":-25,"y":12}}}},"merges":{"0":{"splitat":{"input":{"i":true}},"inthalf":{"output":{"a \xF7 2":true}}},"1":{"length":{"output":{"length":true}},"inthalf":{"input":{"a":true}}},"2":{"splitat":{"input":{"a":true}},"length":{"input":{"a":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"2"}},"functional":true,"type":"<A>[]"}},"outputs":{"first":{"plug":{"0":{"unitId":"splitat","pinId":"first"}},"type":"<A>[]"},"second":{"plug":{"0":{"unitId":"splitat","pinId":"second"}},"type":"<A>[]"}},"metadata":{"icon":"split-half","description":"...","complexity":24,"tags":["core","array"]},"id":"8babf4fa-e95e-449e-80b9-62e03ba0aae4","type":"`U`&`G`","system":true},"bd1a9bbb-6129-4031-b7e9-aec351d847d9":{"name":"sum all","units":{"reduce":{"id":"5cd76a8a-603b-49e1-bda3-09ad217eb108","output":{"test":{"ignored":true}},"input":{"init":{"constant":true,"data":"0"}}},"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf"}},"merges":{"sstwb":{"reduce":{"output":{"a[i]":true}},"add":{"input":{"a":true}}},"yhgjl":{"reduce":{"output":{"local":true}},"add":{"input":{"b":true}}},"wvhfr":{"reduce":{"input":{"next":true}},"add":{"output":{"a + b":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"reduce","pinId":"a"}},"functional":true,"type":"number[]"}},"outputs":{"sum":{"plug":{"0":{"unitId":"reduce","pinId":"result"}},"type":"number"}},"metadata":{"icon":"plus","description":"sum all elements of array `a`","complexity":37,"tags":["core","array"]},"id":"bd1a9bbb-6129-4031-b7e9-aec351d847d9","type":"`U`&`G`","system":true},"706a0082-1dce-43d5-b629-9b6f8189e45d":{"name":"swap","units":{"set0":{"id":"22622778-d64f-47e7-8ceb-d175edcc6562","input":{"a":{},"i":{},"v":{}},"output":{"a":{}}},"set1":{"id":"22622778-d64f-47e7-8ceb-d175edcc6562","input":{"a":{},"i":{},"v":{}},"output":{"a":{}}},"at0":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a","input":{"a":{},"i":{}},"output":{"a[i]":{}}},"at1":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a","input":{"a":{},"i":{}},"output":{"a[i]":{}}}},"merges":{"0":{"set0":{"input":{"a":true}},"at0":{"input":{"a":true}},"at1":{"input":{"a":true}}},"1":{"set1":{"input":{"v":true}},"at1":{"output":{"a[i]":true}}},"2":{"set0":{"input":{"v":true}},"at0":{"output":{"a[i]":true}}},"3":{"set0":{"input":{"i":true}},"at1":{"input":{"i":true}}},"4":{"set0":{"output":{"a":true}},"set1":{"input":{"a":true}}},"5":{"at0":{"input":{"i":true}},"set1":{"input":{"i":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"0"}},"type":"<A>[]"},"i":{"plug":{"0":{"mergeId":"3"}},"type":"number"},"j":{"plug":{"0":{"mergeId":"5"}},"type":"number"}},"outputs":{"a":{"plug":{"0":{"unitId":"set1","pinId":"a"}},"type":"<A>[]"}},"metadata":{"icon":"brackets","description":"swap elements at position `i` and `j` ","complexity":10,"tags":["core","array"]},"id":"706a0082-1dce-43d5-b629-9b6f8189e45d","type":"`U`&`G`","system":true},"91536c82-8e5f-4542-8138-a1a4eb2e5f4d":{"name":"triplet","units":{"single":{"id":"d2f8bb43-af44-4371-a32e-20b760695e13"},"pair":{"id":"a7d5c2f3-6134-4248-b9bc-33271c280267"},"concat":{"id":"f57f5318-f26f-4b9f-b9e2-dcc022ad7728"}},"merges":{"0":{"concat":{"input":{"b":true}},"single":{"output":{"[a]":true}}},"1":{"concat":{"input":{"a":true}},"pair":{"output":{"hbsxpnl":true}}}},"metadata":{"icon":"brackets","description":"build array with elements `0` and `1` and `2`","complexity":15,"tags":["core","array"]},"inputs":{"0":{"plug":{"0":{"unitId":"pair","pinId":"0"}},"type":"<A>"},"1":{"plug":{"0":{"unitId":"pair","pinId":"1"}},"type":"<A>"},"2":{"plug":{"0":{"unitId":"single","pinId":"a"}},"type":"<A>"}},"outputs":{"a":{"plug":{"0":{"unitId":"concat","pinId":"ab"}},"type":"<A>[]"}},"id":"91536c82-8e5f-4542-8138-a1a4eb2e5f4d","type":"`U`&`G`","system":true},"cbb46967-8627-4546-add8-6426e3730560":{"name":"assert","inputs":{"test":{"plug":{"0":{"unitId":"if","pinId":"b"}}},"message":{"plug":{"0":{"unitId":"if","pinId":"a"}},"type":"string"}},"outputs":{},"units":{"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8","input":{"a":{},"b":{}},"output":{"a if b":{}},"metadata":{"position":{"x":-50,"y":-1}}},"throw":{"id":"99657eb7-fb94-474e-b03d-4b08c537c0a2","input":{"message":{}},"output":{},"metadata":{"position":{"x":49,"y":0}}}},"merges":{"0":{"throw":{"input":{"message":true}},"if":{"output":{"a if b":true}}}},"component":{},"metadata":{"complexity":8,"icon":"alert-circle","description":"throw `message` if `test` is false","tags":["core","assert"]},"id":"cbb46967-8627-4546-add8-6426e3730560","system":true},"0047d386-e392-4230-adde-0d71a0bc2de4":{"name":"assert equal","units":{"throw":{"id":"99657eb7-fb94-474e-b03d-4b08c537c0a2"},"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"notequal":{"id":"bda175a9-a9d2-4282-9b50-1b008ae8a807"}},"inputs":{"message":{"plug":{"0":{"unitId":"if","pinId":"a"}},"type":"string"},"b":{"plug":{"0":{"unitId":"notequal","pinId":"b"}},"type":"<A>"},"a":{"plug":{"0":{"unitId":"notequal","pinId":"a"}},"type":"<A>"}},"outputs":{},"metadata":{"icon":"alert-circle","description":"throw `message` if `a` is not equal `b`","complexity":11,"tags":["core","assert"]},"merges":{"0":{"throw":{"input":{"message":true}},"if":{"output":{"a if b":true}}},"1":{"if":{"input":{"b":true}},"notequal":{"output":{"a \u2260 b":true}}}},"id":"0047d386-e392-4230-adde-0d71a0bc2de4","type":"`U`&`G`","system":true},"ea515441-7284-49ab-9bac-a0978f25e2c3":{"name":"validate","units":{"throw":{"id":"99657eb7-fb94-474e-b03d-4b08c537c0a2"},"ifnot":{"id":"439c6b56-a0b6-4b76-9131-c6dc23375fda"},"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"}},"merges":{"butqpzbvl":{"if":{"input":{"b":true}},"ifnot":{"input":{"b":true}}},"vjwuigye":{"ifnot":{"output":{"a if not b":true}},"throw":{"input":{"message":true}}}},"metadata":{"icon":"alert-circle","description":"pass if `test`, error `message` otherwise","complexity":14,"tags":["core","assert"]},"inputs":{"a":{"plug":{"0":{"unitId":"if","pinId":"a"}},"functional":true,"type":"<A>"},"message":{"plug":{"0":{"unitId":"ifnot","pinId":"a"}},"functional":true,"type":"string"},"test":{"plug":{"0":{"mergeId":"butqpzbvl"}},"functional":true,"type":"boolean"}},"outputs":{"a":{"plug":{"0":{"unitId":"if","pinId":"a if b"}},"type":"<A>"}},"id":"ea515441-7284-49ab-9bac-a0978f25e2c3","type":"`U`&`G`","system":true},"21cf3c3d-30c1-4030-8172-34e3a53c6ae3":{"name":"alphabet","units":{"identity":{"id":"260d774e-bc89-4027-aa92-cb1985fb312b","input":{"a":{"constant":true,"data":"\'abcdefghijklmnopqrstuvwxyz\'"}}}},"merges":{},"metadata":{"icon":"type","description":"no description","complexity":5,"tags":["core","common"]},"inputs":{},"outputs":{"alphabet":{"plug":{"0":{"unitId":"identity","pinId":"a"}},"type":"string"}},"id":"21cf3c3d-30c1-4030-8172-34e3a53c6ae3","type":"`U`&`G`","system":true},"36cca4eb-1d14-43bc-88da-5dbbd033e1aa":{"name":"array bitwise and","units":{"level":{"id":"358fa592-55e4-49f5-be28-b66e5114b266","input":{"with":{"constant":true,"data":"0"}}},"foreach":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","output":{"test":{"ignored":true}}},"foreach0":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","output":{"test":{"ignored":true}}},"narraybuilder":{"id":"38033fcc-aa28-4df3-abc8-d4ece231028b"},"and":{"id":"be6801c0-02e2-4f76-bcad-b68c80991fad"}},"merges":{"0":{"level":{"output":{"a[]":true}},"foreach0":{"input":{"a":true}}},"1":{"level":{"output":{"b[]":true}},"foreach":{"input":{"a":true}}},"2":{"level":{"output":{"length":true}},"narraybuilder":{"input":{"n":true}}},"3":{"foreach":{"output":{"a[i]":true}},"and":{"input":{"b":true}}},"4":{"foreach0":{"output":{"a[i]":true}},"and":{"input":{"a":true}}},"5":{"and":{"output":{"a & b":true}},"narraybuilder":{"input":{"a":true}}}},"inputs":{"b[]":{"plug":{"0":{"unitId":"level","pinId":"b[]"}},"functional":true,"type":"number[]"},"a[]":{"plug":{"0":{"unitId":"level","pinId":"a[]"}},"functional":true,"type":"number[]"}},"outputs":{"a & b":{"plug":{"0":{"unitId":"narraybuilder","pinId":"a[]"}},"type":"number[]"}},"metadata":{"icon":null,"description":"...","complexity":90,"tags":["core","common"]},"id":"36cca4eb-1d14-43bc-88da-5dbbd033e1aa","type":"`U`&`G`","system":true},"625b208c-80e8-49bc-981c-dc69cfbc429d":{"name":"intersection","units":{"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"[]"}}},"id0":{"id":"260d774e-bc89-4027-aa92-cb1985fb312b"},"id1":{"id":"260d774e-bc89-4027-aa92-cb1985fb312b"},"append":{"id":"fa7721eb-1dd6-482e-8c7a-6da35b5f88bc"},"lengthequals":{"id":"175c0cc6-1801-4b5d-9980-e780c10ea745"},"ifnot0":{"id":"439c6b56-a0b6-4b76-9131-c6dc23375fda"},"ifnot1":{"id":"439c6b56-a0b6-4b76-9131-c6dc23375fda"},"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"}},"merges":{"merge0":{"id0":{"input":{"a":true}},"wait":{"input":{"b":true}}},"merge1":{"wait":{"output":{"a":true}},"append":{"output":{"a":true}},"lengthequals":{"input":{"a":true}},"if":{"input":{"a":true}},"ifnot1":{"input":{"a":true}}},"merge2":{"id0":{"output":{"a":true}},"id1":{"output":{"a":true}},"ifnot0":{"input":{"a":true}},"lengthequals":{"input":{"b":true}}},"merge3":{"lengthequals":{"output":{"equals":true}},"if":{"input":{"b":true}},"ifnot0":{"input":{"b":true}},"ifnot1":{"input":{"b":true}}},"merge4":{"ifnot1":{"output":{"a if not b":true}},"append":{"input":{"a":true}}},"merge5":{"ifnot0":{"output":{"a if not b":true}},"id1":{"input":{"a":true}}}},"inputs":{"n":{"plug":{"0":{"mergeId":"merge0"}},"type":"number"},"a":{"plug":{"0":{"unitId":"append","pinId":"b"}},"type":"<A>"}},"outputs":{"a[]":{"plug":{"0":{"unitId":"if","pinId":"a if b"}},"type":"<A>[]"}},"metadata":{"icon":"array","description":"build a list of size n","complexity":30,"tags":["core","common"]},"id":"625b208c-80e8-49bc-981c-dc69cfbc429d","type":"`U`&`G`","system":true},"e2d48ad6-4212-45f4-940b-c614c44eb59b":{"name":"compare lt","units":{"lt":{"id":"82c3cf2a-0855-4c6d-a4c4-807b0ce1fd35"},"gte":{"id":"c9e06816-0d2b-43ec-b7c8-d07563e19b6b"}},"merges":{"0":{"lt":{"input":{"a":true}},"gte":{"input":{"a":true}}},"1":{"lt":{"input":{"b":true}},"gte":{"input":{"b":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"0"}},"type":"number"},"b":{"plug":{"0":{"mergeId":"1"}},"type":"number"}},"outputs":{"a < b":{"plug":{"0":{"unitId":"lt","pinId":"a < b"}},"functional":true,"type":"boolean"},"a \u2265 b":{"plug":{"0":{"unitId":"gte","pinId":"a \u2265 b"}},"functional":true,"type":"boolean"}},"metadata":{"icon":null,"description":"...","complexity":8,"tags":["core","common"]},"id":"e2d48ad6-4212-45f4-940b-c614c44eb59b","type":"`U`&`G`","system":true},"baa94d4a-90a4-4b3d-8f4f-d10780c64754":{"name":"compare lte","units":{"lessthanequal":{"id":"e13f3090-62a6-4a3b-8401-c571cbf03526"},"greaterthan":{"id":"1651ce6b-4db0-4787-9edf-f770b72d253c"}},"merges":{"merge0":{"lessthanequal":{"input":{"a":true}},"greaterthan":{"input":{"a":true}}},"merge1":{"lessthanequal":{"input":{"b":true}},"greaterthan":{"input":{"b":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"merge0"}},"type":"number"},"b":{"plug":{"0":{"mergeId":"merge1"}},"type":"number"}},"outputs":{"a \u2264 b":{"plug":{"0":{"unitId":"lessthanequal","pinId":"a \u2264 b"}},"type":"boolean"},"a > b":{"plug":{"0":{"unitId":"greaterthan","pinId":"a > b"}},"type":"boolean"}},"metadata":{"icon":null,"description":"...","complexity":8,"tags":["core","common"]},"id":"baa94d4a-90a4-4b3d-8f4f-d10780c64754","type":"`U`&`G`","system":true},"c6d4d8b4-b9cc-401a-98fe-37eaf71426b0":{"name":"constant one","units":{"identity":{"id":"260d774e-bc89-4027-aa92-cb1985fb312b","input":{"a":{"constant":true,"data":"1"}},"output":{"a":{}}}},"merges":{},"inputs":{},"outputs":{"1":{"plug":{"0":{"unitId":"identity","pinId":"a"}},"type":"number"}},"metadata":{"icon":"dot-circle","description":"one forever","complexity":5,"tags":["core","common"]},"id":"c6d4d8b4-b9cc-401a-98fe-37eaf71426b0","type":"`U`&`G`","system":true},"8df44351-9177-4c4c-abde-7576bc1c8d41":{"name":"constant true false","inputs":{},"outputs":{"a":{"plug":{"0":{"unitId":"truefalse","pinId":"a"}}}},"units":{"truefalse":{"id":"e24d1987-e3e7-4f1a-bf4a-191c79b2eae6","input":{"any":{"constant":true,"data":"null"}},"output":{"a":{}},"metadata":{"position":{"x":0,"y":0}}}},"merges":{},"component":{},"metadata":{"complexity":38,"tags":["core","common"]},"id":"8df44351-9177-4c4c-abde-7576bc1c8d41","system":true},"4d67d2e4-8b06-4e15-8243-99be8e4be5d3":{"name":"decrement","units":{"decrement":{"id":"fa94b179-00e3-4ed1-814e-7938324a833f","input":{"b":{"constant":true,"data":"1"}},"output":{}}},"merges":{},"inputs":{"a":{"plug":{"0":{"unitId":"decrement","pinId":"a"}},"type":"number"}},"outputs":{"a - 1":{"plug":{"0":{"unitId":"decrement","pinId":"a - b"}},"type":"number"}},"metadata":{"icon":"minus","description":"decrement `a`","complexity":5,"tags":["core","common"]},"id":"4d67d2e4-8b06-4e15-8243-99be8e4be5d3","type":"`U`&`G`","system":true},"51630f7a-fffb-42d7-8cf6-5a5924ec4774":{"name":"duplicate","units":{"multiply":{"id":"872be100-f4dc-4246-8eea-6e3da31137b7","input":{"b":{"constant":true,"data":"2"}}}},"merges":{},"metadata":{"icon":"x","description":"duplicate `a`","complexity":5,"tags":["core","common"]},"inputs":{"a":{"plug":{"0":{"unitId":"multiply","pinId":"a"}},"type":"number"}},"outputs":{"2a":{"plug":{"0":{"unitId":"multiply","pinId":"a \xD7 b"}},"type":"number"}},"id":"51630f7a-fffb-42d7-8cf6-5a5924ec4774","type":"`U`&`G`","system":true},"dd7ae700-3016-4aba-a45f-5fa2c21cb00f":{"name":"for each reverse","units":{"looprepeat":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","output":{"local":{"ignored":true}}},"loopdecrement":{"id":"95862764-be74-4372-b734-c767ddd3e323","output":{"final":{"ignored":true}}},"lastindex":{"id":"f9588979-74e1-477a-8085-594043362fdf"},"at":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a"},"greaterthanequal":{"id":"c9e06816-0d2b-43ec-b7c8-d07563e19b6b","input":{"b":{"constant":true,"data":"0"}}}},"merges":{"0":{"loopdecrement":{"output":{"local":true}},"greaterthanequal":{"input":{"a":true}}},"1":{"loopdecrement":{"input":{"test":true}},"greaterthanequal":{"output":{"a \u2265 b":true}},"looprepeat":{"input":{"test":true}}},"2":{"looprepeat":{"input":{"init":true}},"lastindex":{"input":{"a":true}}},"3":{"loopdecrement":{"input":{"init":true}},"lastindex":{"output":{"last":true}}},"4":{"looprepeat":{"output":{"current":true}},"at":{"input":{"a":true}}},"5":{"loopdecrement":{"output":{"current":true}},"at":{"input":{"i":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"2"}},"type":"<A>[]"}},"outputs":{"a[i]":{"plug":{"0":{"unitId":"at","pinId":"a[i]"}},"type":"<A>"}},"metadata":{"icon":"array","description":"output every element `a[i]` of `a` in decreasing order","complexity":30,"tags":["core","common"]},"id":"dd7ae700-3016-4aba-a45f-5fa2c21cb00f","type":"`U`&`G`","system":true},"6f4ac2fa-e9bd-4c0e-8bda-75976f3e4e58":{"name":"greater than 0","units":{"greaterthan":{"id":"1651ce6b-4db0-4787-9edf-f770b72d253c","input":{"b":{"constant":true,"data":"0"}}}},"merges":{},"metadata":{"icon":"greater-than","description":"output whether `a` is greater than 0","complexity":5,"tags":["core","common"]},"inputs":{"a":{"plug":{"0":{"unitId":"greaterthan","pinId":"a"}},"type":"number"}},"outputs":{"a > 0":{"plug":{"0":{"unitId":"greaterthan","pinId":"a > b"}},"type":"boolean"}},"id":"6f4ac2fa-e9bd-4c0e-8bda-75976f3e4e58","type":"`U`&`G`","system":true},"49d04556-34fd-4231-a478-0e106b564e1c":{"name":"half","units":{"divide":{"id":"158d85eb-28b8-4355-b637-28a7ec751233","input":{"b":{"constant":true,"data":"2"}}}},"inputs":{"a":{"plug":{"0":{"unitId":"divide","pinId":"a"}},"type":"number"}},"outputs":{"a \xF7 2":{"plug":{"0":{"unitId":"divide","pinId":"a \xF7 b"}},"type":"number"}},"metadata":{"icon":"half","complexity":5,"tags":["core","common"]},"id":"49d04556-34fd-4231-a478-0e106b564e1c","type":"`U`&`G`","system":true},"f317e5cd-63d0-4036-b958-09dfd04ab480":{"name":"has length","units":{"ifelse":{"id":"92760dd2-ecd9-46db-851f-70950a5b6bc3"},"lengthequals":{"id":"175c0cc6-1801-4b5d-9980-e780c10ea745"}},"merges":{"sxqrd":{"ifelse":{"input":{"b":true}},"lengthequals":{"output":{"equals":true}}},"diljw":{"ifelse":{"input":{"a":true}},"lengthequals":{"input":{"a":true}}}},"inputs":{"b":{"plug":{"0":{"unitId":"lengthequals","pinId":"b"}},"type":"number"},"a":{"plug":{"0":{"mergeId":"diljw"}},"type":"<A>[]"}},"outputs":{"false":{"plug":{"0":{"unitId":"ifelse","pinId":"else"}},"type":"<A>[]"},"true":{"plug":{"0":{"unitId":"ifelse","pinId":"if"}},"type":"<A>[]"}},"metadata":{"icon":"ruler","description":"output based on whether `a` size is equal to `b`","complexity":21,"tags":["core","common"]},"id":"f317e5cd-63d0-4036-b958-09dfd04ab480","type":"`U`&`G`","system":true},"8211f5ea-2884-4ae8-aaf4-e98dbbedc10d":{"name":"has length less than","units":{"ifelse":{"id":"92760dd2-ecd9-46db-851f-70950a5b6bc3"},"lengthlessthan":{"id":"0e211b43-0d8d-44cb-b63f-79a1a02de614"}},"merges":{"0":{"ifelse":{"input":{"b":true}},"lengthlessthan":{"output":{"test":true}}},"1":{"ifelse":{"input":{"a":true}},"lengthlessthan":{"input":{"a":true}}}},"inputs":{"b":{"plug":{"0":{"unitId":"lengthlessthan","pinId":"b"}},"type":"number"},"a":{"plug":{"0":{"mergeId":"1"}},"type":"<A>[]"}},"outputs":{"true":{"plug":{"0":{"unitId":"ifelse","pinId":"if"}},"type":"<A>[]"},"false":{"plug":{"0":{"unitId":"ifelse","pinId":"else"}},"type":"<A>[]"}},"metadata":{"icon":"ruler","description":"output based on whether `a` size is less than `b`","complexity":21,"tags":["core","common"]},"id":"8211f5ea-2884-4ae8-aaf4-e98dbbedc10d","type":"`U`&`G`","system":true},"5abe471c-c615-46ce-8a8c-158fcc8c1e5e":{"name":"hasn\'t length","units":{"length":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"},"equals":{"id":"85204bf6-6692-4686-a785-23127c0594b5"},"ifnot":{"id":"439c6b56-a0b6-4b76-9131-c6dc23375fda"}},"merges":{"0":{"length":{"output":{"length":true}},"equals":{"input":{"a":true}}},"1":{"equals":{"output":{"a = b":true}},"ifnot":{"input":{"b":true}}},"2":{"length":{"input":{"a":true}},"ifnot":{"input":{"a":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"2"}},"type":"<A>[]"},"b":{"plug":{"0":{"unitId":"equals","pinId":"b"}},"type":"number"}},"outputs":{"a":{"plug":{"0":{"unitId":"ifnot","pinId":"a if not b"}},"type":"<A>[]"}},"metadata":{"icon":"ruler","description":"output list if size is equal to `n`?","complexity":16,"tags":["core","common"]},"id":"5abe471c-c615-46ce-8a8c-158fcc8c1e5e","type":"`U`&`G`","system":true},"bacfa026-d96f-4ea1-8430-86bb02d69a53":{"name":"if 50% chance","units":{"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"50chance":{"id":"6c3c8c8f-e383-46bc-ac0c-a294e65040bb"}},"merges":{"0":{"if":{"input":{"b":true}},"50chance":{"output":{"pass":true}}},"1":{"50chance":{"input":{"any":true}},"if":{"input":{"a":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"1"}},"type":"any"}},"outputs":{"a":{"plug":{"0":{"unitId":"if","pinId":"a if b"}},"type":"<A>"}},"metadata":{"icon":"filter","description":"50% chance of passing","complexity":13,"tags":["core","common"]},"id":"bacfa026-d96f-4ea1-8430-86bb02d69a53","type":"`U`&`G`","system":true},"5fdf4aca-9bc3-11eb-9ae0-137ed72149df":{"name":"if else first","inputs":{"a":{"plug":{"0":{"mergeId":"1"}},"type":"<A>"}},"outputs":{"first":{"plug":{"0":{"unitId":"bpdlaymdf","pinId":"if"}},"type":"<A>"},"!first":{"plug":{"0":{"unitId":"bpdlaymdf","pinId":"else"}},"type":"<A>"}},"units":{"xptoptcoq":{"id":"fb311fff-521b-4066-b830-81d3a50f0f01","input":{"a":{}},"output":{"first":{}},"metadata":{"position":{"x":-48,"y":-1}}},"bpdlaymdf":{"id":"92760dd2-ecd9-46db-851f-70950a5b6bc3","input":{"a":{},"b":{}},"output":{"if":{},"else":{}},"metadata":{"position":{"x":47,"y":0}}}},"merges":{"0":{"bpdlaymdf":{"input":{"b":true}},"xptoptcoq":{"output":{"first":true}}},"1":{"bpdlaymdf":{"input":{"a":true}},"xptoptcoq":{"input":{"a":true}}}},"metadata":{"icon":"map-signs","description":"","complexity":26,"tags":["core","common"]},"id":"5fdf4aca-9bc3-11eb-9ae0-137ed72149df","type":"`U`&`G`","system":true},"62de5773-43bc-416c-b604-8fb529d7b299":{"name":"if else a \u2264 b","units":{"lessthanequal":{"id":"e13f3090-62a6-4a3b-8401-c571cbf03526"},"greaterthan":{"id":"1651ce6b-4db0-4787-9edf-f770b72d253c"},"if0":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"if1":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"}},"merges":{"0":{"greaterthan":{"input":{"b":true}},"lessthanequal":{"input":{"b":true}}},"1":{"greaterthan":{"input":{"a":true}},"lessthanequal":{"input":{"a":true}},"if1":{"input":{"a":true}},"if0":{"input":{"a":true}}},"2":{"greaterthan":{"output":{"a > b":true}},"if0":{"input":{"b":true}}},"3":{"lessthanequal":{"output":{"a \u2264 b":true}},"if1":{"input":{"b":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"1"}},"functional":true,"type":"number"},"b":{"plug":{"0":{"mergeId":"0"}},"functional":true,"type":"number"}},"outputs":{"a \u2264 b ? a":{"plug":{"0":{"unitId":"if1","pinId":"a if b"}},"type":"number"},"a > b ? a":{"plug":{"0":{"unitId":"if0","pinId":"a if b"}},"type":"number"}},"metadata":{"icon":"filter","description":"forward `a` depending on `a \u2264 b`","complexity":12,"tags":["core","common"]},"id":"62de5773-43bc-416c-b604-8fb529d7b299","type":"`U`&`G`","system":true},"bbbe75ed-d436-47d7-a9a0-59bcfa41dfda":{"name":"if false","units":{"ifnot":{"id":"439c6b56-a0b6-4b76-9131-c6dc23375fda"},"identity":{"id":"260d774e-bc89-4027-aa92-cb1985fb312b"},"identity0":{"id":"260d774e-bc89-4027-aa92-cb1985fb312b"}},"merges":{"0":{"ifnot":{"input":{"a":true}},"identity":{"output":{"a":true}}},"1":{"ifnot":{"input":{"b":true}},"identity0":{"output":{"a":true}}},"2":{"identity":{"input":{"a":true}},"identity0":{"input":{"a":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"2"}},"type":"boolean"}},"outputs":{"false":{"plug":{"0":{"unitId":"ifnot","pinId":"a if not b"}},"type":"boolean"}},"metadata":{"icon":"filter","description":"false if `a` is false","complexity":14,"tags":["core","common"]},"id":"bbbe75ed-d436-47d7-a9a0-59bcfa41dfda","type":"`U`&`G`","system":true},"9ee34534-a1e8-478d-87ca-81a5325f5d5c":{"name":"if true","units":{"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"identity":{"id":"260d774e-bc89-4027-aa92-cb1985fb312b"},"identity0":{"id":"260d774e-bc89-4027-aa92-cb1985fb312b"}},"merges":{"0":{"if":{"input":{"a":true}},"identity":{"output":{"a":true}}},"1":{"if":{"input":{"b":true}},"identity0":{"output":{"a":true}}},"2":{"identity":{"input":{"a":true}},"identity0":{"input":{"a":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"2"}},"type":"boolean"}},"outputs":{"false":{"plug":{"0":{"unitId":"if","pinId":"a if b"}},"type":"boolean"}},"metadata":{"icon":"filter","description":"true if `a` is true","complexity":9,"tags":["core","common"]},"id":"9ee34534-a1e8-478d-87ca-81a5325f5d5c","type":"`U`&`G`","system":true},"fafeadd7-06a8-4bb0-9fa5-2149d1b5208e":{"name":"increment","units":{"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf","input":{"b":{"constant":true,"data":"1"},"a":{}}}},"merges":{},"inputs":{"a":{"plug":{"0":{"unitId":"add","pinId":"a"}},"type":"number"}},"outputs":{"a + 1":{"plug":{"0":{"unitId":"add","pinId":"a + b"}},"type":"number"}},"metadata":{"icon":"plus","description":"increment `a`","complexity":5,"tags":["core","common"]},"id":"fafeadd7-06a8-4bb0-9fa5-2149d1b5208e","type":"`U`&`G`","system":true},"86e310b3-4b84-4be2-a87a-e4ebcc5d3a0c":{"name":"integer half","units":{"half":{"id":"49d04556-34fd-4231-a478-0e106b564e1c"},"floor":{"id":"3217edcf-2fa1-4dc4-af7c-d6fb607c888d"}},"merges":{"merge0":{"half":{"output":{"a \xF7 2":true}},"floor":{"input":{"a":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"half","pinId":"a"}},"type":"number"}},"outputs":{"a \xF7 2":{"plug":{"0":{"unitId":"floor","pinId":"\u230Aa\u230B"}},"type":"number"}},"metadata":{"icon":"half","description":"build a list of size n","complexity":10,"tags":["core","common"]},"id":"86e310b3-4b84-4be2-a87a-e4ebcc5d3a0c","type":"`U`&`G`","system":true},"194683f4-5b90-4501-a8c9-b34f131d4f79":{"name":"is empty","units":{"lengthequals":{"id":"175c0cc6-1801-4b5d-9980-e780c10ea745","input":{"b":{"constant":true,"data":"0"}}}},"merges":{},"metadata":{"icon":"question","description":"no description","complexity":10,"tags":["core","common"]},"inputs":{"obj":{"plug":{"0":{"unitId":"lengthequals","pinId":"a"}},"type":"<A>[]"}},"outputs":{"empty":{"plug":{"0":{"unitId":"lengthequals","pinId":"equals"}},"type":"boolean"}},"id":"194683f4-5b90-4501-a8c9-b34f131d4f79","type":"`U`&`G`","system":true},"7a7468e3-c6e4-4c0b-b561-967914250d9b":{"name":"keys equals","units":{"equals":{"id":"85204bf6-6692-4686-a785-23127c0594b5"},"keys":{"id":"45b9c329-64e9-4c4a-800b-790947c75754"}},"merges":{"merge0":{"keys":{"output":{"keys":true}},"equals":{"input":{"b":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"keys","pinId":"obj"}},"type":"object"},"keys":{"plug":{"0":{"unitId":"equals","pinId":"a"}},"type":"string[]"}},"outputs":{"equals":{"plug":{"0":{"unitId":"equals","pinId":"a = b"}},"type":"boolean"}},"metadata":{"icon":"equal","description":"does the object have the following keys?","complexity":8,"tags":["core","common"]},"id":"7a7468e3-c6e4-4c0b-b561-967914250d9b","type":"`U`&`G`","system":true},"f9588979-74e1-477a-8085-594043362fdf":{"name":"last index","units":{"drfyx":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"},"tbztf":{"id":"4d67d2e4-8b06-4e15-8243-99be8e4be5d3"}},"merges":{"oebcn":{"drfyx":{"output":{"length":true}},"tbztf":{"input":{"a":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"drfyx","pinId":"a"}},"type":"<A>[]"}},"outputs":{"last":{"plug":{"0":{"unitId":"tbztf","pinId":"a - 1"}},"type":"number"}},"metadata":{"icon":"brackets","description":"last position of `a`","complexity":10,"tags":["core","common"]},"id":"f9588979-74e1-477a-8085-594043362fdf","type":"`U`&`G`","system":true},"175c0cc6-1801-4b5d-9980-e780c10ea745":{"name":"length equals","units":{"length":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"},"equals":{"id":"85204bf6-6692-4686-a785-23127c0594b5"}},"merges":{"merge0":{"length":{"output":{"length":true}},"equals":{"input":{"a":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"length","pinId":"a"}},"type":"<A>[]"},"b":{"plug":{"0":{"unitId":"equals","pinId":"b"}},"type":"number"}},"outputs":{"equals":{"plug":{"0":{"unitId":"equals","pinId":"a = b"}},"type":"boolean"}},"metadata":{"icon":"ruler","description":"is the size of this `list` equal to `n`?","complexity":8,"tags":["core","common"]},"id":"175c0cc6-1801-4b5d-9980-e780c10ea745","type":"`U`&`G`","system":true},"603ebe2e-5329-446d-b422-78f3201ddd7a":{"name":"length greater than","units":{"length":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"},"greaterthan":{"id":"1651ce6b-4db0-4787-9edf-f770b72d253c"}},"merges":{"merge0":{"length":{"output":{"length":true}},"greaterthan":{"input":{"a":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"length","pinId":"a"}},"type":"<A>[]"},"b":{"plug":{"0":{"unitId":"greaterthan","pinId":"b"}},"type":"number"}},"outputs":{"true":{"plug":{"0":{"unitId":"greaterthan","pinId":"a > b"}},"type":"boolean"}},"metadata":{"icon":"ruler","description":"is the size of `a` greater than `b`?","complexity":8,"tags":["core","common"]},"id":"603ebe2e-5329-446d-b422-78f3201ddd7a","type":"`U`&`G`","system":true},"0e211b43-0d8d-44cb-b63f-79a1a02de614":{"name":"length less than","units":{"length":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"},"lessthan":{"id":"82c3cf2a-0855-4c6d-a4c4-807b0ce1fd35"}},"merges":{"merge0":{"length":{"output":{"length":true}},"lessthan":{"input":{"a":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"length","pinId":"a"}},"type":"<A>[]"},"b":{"plug":{"0":{"unitId":"lessthan","pinId":"b"}},"type":"number"}},"outputs":{"test":{"plug":{"0":{"unitId":"lessthan","pinId":"a < b"}},"type":"boolean"}},"metadata":{"icon":"ruler","description":"is the size of `a` lesser than `b`?","complexity":8,"tags":["core","common"]},"id":"0e211b43-0d8d-44cb-b63f-79a1a02de614","type":"`U`&`G`","system":true},"b82e2039-4b1d-4290-aa16-11939c1563c5":{"name":"length less than or","units":{"length":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"},"lessthanor":{"id":"568f2736-8734-464b-9bff-8e706e8d30ca"}},"merges":{"merge0":{"length":{"output":{"length":true}},"lessthanor":{"input":{"a":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"length","pinId":"a"}},"type":"<A>[]"},"b":{"plug":{"0":{"unitId":"lessthanor","pinId":"b"}},"type":"number"}},"outputs":{"true":{"plug":{"0":{"unitId":"lessthanor","pinId":"a < b"}},"type":"<A>[]"},"false":{"plug":{"0":{"unitId":"lessthanor","pinId":"a \u2265 b"}},"type":"<A>[]"}},"metadata":{"icon":"ruler","description":"is the size of this `list` greater than or equal to `n`?","complexity":13,"tags":["core","common"]},"id":"b82e2039-4b1d-4290-aa16-11939c1563c5","type":"`U`&`G`","system":true},"cc422ac4-f29c-419d-8628-f58315bd7660":{"name":"less than length","units":{"length":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"},"lessthan":{"id":"82c3cf2a-0855-4c6d-a4c4-807b0ce1fd35"}},"merges":{"rehbd":{"lessthan":{"input":{"b":true}},"length":{"output":{"length":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"length","pinId":"a"}},"type":"<A>[]"},"b":{"plug":{"0":{"unitId":"lessthan","pinId":"a"}},"type":"number"}},"outputs":{"true":{"plug":{"0":{"unitId":"lessthan","pinId":"a < b"}},"type":"boolean"}},"metadata":{"icon":"ruler","description":"is `a` lesser than the size of `b`?","complexity":8,"tags":["core","common"]},"id":"cc422ac4-f29c-419d-8628-f58315bd7660","type":"`U`&`G`","system":true},"568f2736-8734-464b-9bff-8e706e8d30ca":{"name":"less than or","units":{"lt":{"id":"82c3cf2a-0855-4c6d-a4c4-807b0ce1fd35"},"gte":{"id":"c9e06816-0d2b-43ec-b7c8-d07563e19b6b"}},"merges":{"merge0":{"gte":{"input":{"a":true}},"lt":{"input":{"a":true}}},"merge1":{"gte":{"input":{"b":true}},"lt":{"input":{"b":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"merge0"}},"type":"number"},"b":{"plug":{"0":{"mergeId":"merge1"}},"type":"number"}},"outputs":{"a < b":{"plug":{"0":{"unitId":"lt","pinId":"a < b"}},"type":"boolean"},"a \u2265 b":{"plug":{"0":{"unitId":"gte","pinId":"a \u2265 b"}},"type":"boolean"}},"metadata":{"icon":"less-than","description":"less than operator","complexity":8,"tags":["core","common"]},"id":"568f2736-8734-464b-9bff-8e706e8d30ca","type":"`U`&`G`","system":true},"c37c7c14-293e-414c-8a9c-01a40186c1e5":{"name":"lever","units":{"trueorfalse":{"id":"d6d14fd8-4d8f-4d1c-94ac-f42b92f075e2"},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc"},"wait0":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc"}},"merges":{"merge0":{"trueorfalse":{"output":{"a = true":true}},"wait0":{"input":{"b":true}}},"merge1":{"trueorfalse":{"output":{"a = false":true}},"wait":{"input":{"b":true}}},"merge2":{"wait":{"output":{"a":true}},"wait0":{"output":{"a":true}}}},"inputs":{"c":{"plug":{"0":{"unitId":"trueorfalse","pinId":"a"}},"type":"boolean"},"b":{"plug":{"0":{"unitId":"wait","pinId":"a"}},"type":"<A>"},"a":{"plug":{"0":{"unitId":"wait0","pinId":"a"}},"type":"<A>"}},"outputs":{"a":{"plug":{"0":{"mergeId":"merge2"}},"type":"<A>"}},"metadata":{"icon":"map-signs","complexity":15,"tags":["core","common"]},"id":"c37c7c14-293e-414c-8a9c-01a40186c1e5","type":"`U`&`G`","system":true},"93369291-7ce2-4b4c-a414-870b1f3c9b4c":{"name":"loop add","units":{"loop":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","output":{"final":{"ignored":false},"local":{"ignored":false}}},"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf","input":{"b":{"constant":false}}}},"merges":{"0":{"loop":{"input":{"next":true}},"add":{"output":{"a + b":true}}},"jqmhcjrub":{"loop":{"output":{"current":true}},"add":{"input":{"a":true}}}},"metadata":{"icon":"undo","description":"loop adding the value of `+` to the current value","complexity":8,"tags":["core","common"]},"inputs":{"init":{"plug":{"0":{"unitId":"loop","pinId":"init"}},"type":"number"},"test":{"plug":{"0":{"unitId":"loop","pinId":"test"}},"type":"boolean"},"plus":{"plug":{"0":{"unitId":"add","pinId":"b"}},"type":"number"}},"outputs":{"local":{"plug":{"0":{"unitId":"loop","pinId":"local"}},"type":"number"},"final":{"plug":{"0":{"unitId":"loop","pinId":"final"}},"type":"number","defaultIgnored":true},"current":{"plug":{"0":{"mergeId":"jqmhcjrub"}},"type":"number"}},"id":"93369291-7ce2-4b4c-a414-870b1f3c9b4c","type":"`U`&`G`","system":true},"95862764-be74-4372-b734-c767ddd3e323":{"name":"loop decrement","units":{"decrement":{"id":"4d67d2e4-8b06-4e15-8243-99be8e4be5d3"},"loop":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","output":{"final":{"ignored":false}}}},"merges":{"0":{"loop":{"input":{"next":true}},"decrement":{"output":{"a - 1":true}}},"1":{"loop":{"output":{"current":true}},"decrement":{"input":{"a":true}}}},"inputs":{"init":{"plug":{"0":{"unitId":"loop","pinId":"init"}},"type":"number"},"test":{"plug":{"0":{"unitId":"loop","pinId":"test"}},"type":"boolean"}},"outputs":{"local":{"plug":{"0":{"unitId":"loop","pinId":"local"}},"type":"number"},"final":{"plug":{"0":{"unitId":"loop","pinId":"final"}},"type":"number"},"current":{"plug":{"0":{"mergeId":"1"}},"type":"number"}},"metadata":{"icon":"minus","description":"decrement value until `test` is false","complexity":10,"tags":["core","common"]},"id":"95862764-be74-4372-b734-c767ddd3e323","type":"`U`&`G`","system":true},"543d3ed7-45cc-472f-b35d-03aba7c73017":{"name":"loop drag","inputs":{"test":{"plug":{"0":{"unitId":"looprepeat","pinId":"test"},"1":{"unitId":"loop2","pinId":"test"}}},"+":{"plug":{"0":{"unitId":"add","pinId":"b"}}},"init":{"plug":{"0":{"unitId":"loopforever","pinId":"init"}}}},"outputs":{"current":{"plug":{"0":{"mergeId":"2"}}}},"units":{"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf","input":{"a":{},"b":{}},"output":{"a + b":{}},"metadata":{"position":{"x":94,"y":-17}}},"looprepeat":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","input":{"init":{},"test":{}},"output":{"local":{"ignored":true},"current":{},"final":{"ignored":true}},"metadata":{"position":{"x":-7,"y":-38}}},"loopforever":{"id":"4b6e5535-e600-4f91-a5df-105f6a5ad3d7","input":{"next":{},"init":{}},"output":{"current":{}},"metadata":{"position":{"x":-92,"y":22}}},"loop2":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","input":{"next":{},"test":{},"init":{}},"output":{"current":{"ignored":true},"local":{"ignored":true},"final":{"ignored":false}},"metadata":{"position":{"x":2,"y":31}}}},"merges":{"0":{"loopforever":{"output":{"current":true}},"looprepeat":{"input":{"init":true}},"loop2":{"input":{"init":true}}},"1":{"loopforever":{"input":{"next":true}},"loop2":{"output":{"final":true}}},"2":{"add":{"output":{"a + b":true}},"loop2":{"input":{"next":true}}},"3":{"looprepeat":{"output":{"current":true}},"add":{"input":{"a":true}}}},"metadata":{"icon":"undo","complexity":17,"tags":["core","common"]},"id":"543d3ed7-45cc-472f-b35d-03aba7c73017","type":"`U`&`G`&`C`","system":true},"4b6e5535-e600-4f91-a5df-105f6a5ad3d7":{"name":"loop forever","units":{"loop":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","output":{"final":{"ignored":true},"local":{"ignored":true}},"input":{"test":{"constant":true,"data":"true"}}}},"merges":{},"metadata":{"icon":"undo","description":"loop forever","complexity":5,"tags":["core","common"]},"inputs":{"next":{"plug":{"0":{"unitId":"loop","pinId":"next"}},"type":"<A>"},"init":{"plug":{"0":{"unitId":"loop","pinId":"init"}},"type":"<A>"}},"outputs":{"current":{"plug":{"0":{"unitId":"loop","pinId":"current"}},"type":"<A>"}},"id":"4b6e5535-e600-4f91-a5df-105f6a5ad3d7","type":"`U`&`G`","system":true},"4e2c89b2-e9cb-42f6-bb8d-e9d665c21fa7":{"name":"loop increment","units":{"increment":{"id":"fafeadd7-06a8-4bb0-9fa5-2149d1b5208e"},"loop":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","output":{"final":{"ignored":false}}}},"merges":{"uqrhbkeci":{"loop":{"input":{"next":true}},"increment":{"output":{"a + 1":true}}},"bauiallzd":{"loop":{"output":{"current":true}},"increment":{"input":{"a":true}}}},"inputs":{"test":{"plug":{"0":{"unitId":"loop","pinId":"test"}},"type":"boolean"},"init":{"plug":{"0":{"unitId":"loop","pinId":"init"}},"type":"number"}},"outputs":{"current":{"plug":{"0":{"mergeId":"bauiallzd"}},"type":"number"},"local":{"plug":{"0":{"unitId":"loop","pinId":"local"}},"type":"number"},"final":{"plug":{"0":{"unitId":"loop","pinId":"final"}},"defaultIgnored":true,"type":"number"}},"metadata":{"icon":"undo","description":"increment value until `test` is false","complexity":10,"tags":["core","common"]},"id":"4e2c89b2-e9cb-42f6-bb8d-e9d665c21fa7","type":"`U`&`G`","system":true},"70f3cdf1-2a78-49b3-9665-39da459cf0dc":{"name":"loop index desc","units":{"loopdecrement":{"id":"95862764-be74-4372-b734-c767ddd3e323","output":{"final":{"ignored":true}}},"greaterthanequal":{"id":"c9e06816-0d2b-43ec-b7c8-d07563e19b6b","input":{"b":{"constant":true,"data":"0"}}},"gyyfi":{"id":"f9588979-74e1-477a-8085-594043362fdf"}},"merges":{"0":{"loopdecrement":{"input":{"test":true}},"greaterthanequal":{"output":{"a \u2265 b":true}}},"1":{"loopdecrement":{"output":{"local":true}},"greaterthanequal":{"input":{"a":true}}},"2":{"loopdecrement":{"input":{"init":true}},"gyyfi":{"output":{"last":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"gyyfi","pinId":"a"}},"type":"<A>[]"}},"outputs":{"test":{"plug":{"0":{"mergeId":"0"}},"type":"boolean"},"i":{"plug":{"0":{"unitId":"loopdecrement","pinId":"current"}},"type":"number"}},"metadata":{"icon":"undo","description":"...","complexity":21,"tags":["core","common"]},"id":"70f3cdf1-2a78-49b3-9665-39da459cf0dc","type":"`U`&`G`","system":true},"ba8d655b-6014-4eae-bce1-fb8fef9ee535":{"name":"loop repeat","units":{"identity":{"id":"260d774e-bc89-4027-aa92-cb1985fb312b","input":{"a":{}},"output":{"a":{}}},"loop":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","output":{"final":{"ignored":false}}}},"merges":{"rphjsvj":{"loop":{"input":{"next":true}},"identity":{"output":{"a":true}}},"wceujsyeq":{"loop":{"output":{"current":true}},"identity":{"input":{"a":true}}}},"inputs":{"init":{"plug":{"0":{"unitId":"loop","pinId":"init"}},"type":"<A>"},"test":{"plug":{"0":{"unitId":"loop","pinId":"test"}},"type":"boolean"}},"outputs":{"local":{"plug":{"0":{"unitId":"loop","pinId":"local"}},"type":"<A>"},"current":{"plug":{"0":{"mergeId":"wceujsyeq"}},"type":"<A>"},"final":{"plug":{"0":{"unitId":"loop","pinId":"final"}},"defaultIgnored":true,"type":"<A>"}},"metadata":{"icon":"repeat","description":"repeats `a` while `next` is true","complexity":8,"tags":["core","common"]},"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","type":"`U`&`G`","system":true},"6a006c91-181c-48c4-826d-a6eaec21fea3":{"name":"loop subtract","units":{"loop":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","output":{"final":{"ignored":false},"local":{"ignored":false}},"input":{}},"subtract":{"id":"fa94b179-00e3-4ed1-814e-7938324a833f","input":{"b":{"constant":false}}}},"merges":{"0":{"loop":{"input":{"next":true}},"subtract":{"output":{"a - b":true}}},"1":{"loop":{"output":{"current":true}},"subtract":{"input":{"a":true}}}},"metadata":{"icon":"undo","description":"loop subtract the value of `-` from the current value","complexity":8,"tags":["core","common"]},"inputs":{"test":{"plug":{"0":{"unitId":"loop","pinId":"test"}},"type":"boolean"},"init":{"plug":{"0":{"unitId":"loop","pinId":"init"}},"functional":true,"type":"number"},"-":{"plug":{"0":{"unitId":"subtract","pinId":"b"}},"type":"number"}},"outputs":{"final":{"plug":{"0":{"unitId":"loop","pinId":"final"}},"type":"number"},"local":{"plug":{"0":{"unitId":"loop","pinId":"local"}},"type":"number"},"current":{"plug":{"0":{"mergeId":"1"}},"type":"number"}},"id":"6a006c91-181c-48c4-826d-a6eaec21fea3","type":"`U`&`G`","system":true},"ee8177fe-4ded-4e10-9aef-740cbac786ef":{"name":"lorem ipsum","units":{"llyhc":{"id":"260d774e-bc89-4027-aa92-cb1985fb312b","input":{"a":{"constant":true,"data":"\'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\'"}}}},"merges":{},"inputs":{},"outputs":{"text":{"plug":{"0":{"unitId":"llyhc","pinId":"a"}},"type":"string"}},"metadata":{"icon":"align-justify","description":"lorem ipsum placeholder excerpt","complexity":5,"tags":["core","common"]},"id":"ee8177fe-4ded-4e10-9aef-740cbac786ef","type":"`U`&`G`","system":true},"85343b1d-93db-4fc0-8fcf-655739dbd494":{"name":"max length","units":{"max":{"id":"e857c770-5a98-4f8d-a0e1-b6cb126071ed"},"length":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"},"length0":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"}},"merges":{"0":{"max":{"input":{"a":true}},"length":{"output":{"length":true}}},"1":{"max":{"input":{"b":true}},"length0":{"output":{"length":true}}}},"metadata":{"icon":"arrow-up","description":"the biggest between size of `a` and size of `b`","complexity":9,"tags":["core","common"]},"inputs":{"a":{"plug":{"0":{"unitId":"length0","pinId":"a"}},"type":"<A>[]"},"b":{"plug":{"0":{"unitId":"length","pinId":"a"}},"type":"<B>[]"}},"outputs":{"max":{"plug":{"0":{"unitId":"max","pinId":"max"}},"type":"number"}},"id":"85343b1d-93db-4fc0-8fcf-655739dbd494","type":"`U`&`G`","system":true},"f409eb04-77b5-49ad-b3aa-aeedde9b547f":{"name":"multiple of","units":{"rlhly":{"id":"c5c05c85-f4c1-4b67-ab85-08b61fe67531"},"dhmjz":{"id":"85204bf6-6692-4686-a785-23127c0594b5","input":{"b":{"constant":true,"data":"0"}}}},"merges":{"elcih":{"rlhly":{"output":{"a % b":true}},"dhmjz":{"input":{"a":true}}}},"inputs":{"qgvlc":{"plug":{"0":{"unitId":"rlhly","pinId":"a"}},"type":"number"},"xazqe":{"plug":{"0":{"unitId":"rlhly","pinId":"b"}},"type":"number"}},"outputs":{"wpuqx":{"plug":{"0":{"unitId":"dhmjz","pinId":"a = b"}},"type":"boolean"}},"metadata":{"icon":null,"description":"...","complexity":8,"tags":["core","common"]},"id":"f409eb04-77b5-49ad-b3aa-aeedde9b547f","type":"`U`&`G`","system":true},"38033fcc-aa28-4df3-abc8-d4ece231028b":{"name":"n array builder","units":{"buildarrayfrom":{"id":"6c5543a6-d558-490d-8a94-20709375b10f","input":{"from":{"constant":true,"data":"[]"}},"output":{}}},"merges":{},"inputs":{"n":{"plug":{"0":{"unitId":"buildarrayfrom","pinId":"n"}},"type":"number"},"a":{"plug":{"0":{"unitId":"buildarrayfrom","pinId":"a"}},"type":"<A>"}},"outputs":{"a[]":{"plug":{"0":{"unitId":"buildarrayfrom","pinId":"a[]"}},"type":"<A>[]"}},"metadata":{"icon":"array","description":"build a list of size n","complexity":26,"tags":["core","common"]},"id":"38033fcc-aa28-4df3-abc8-d4ece231028b","type":"`U`&`G`","system":true},"6c5543a6-d558-490d-8a94-20709375b10f":{"name":"n array builder from","units":{"looprepeat":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","output":{"current":{"ignored":true}}},"arraybuilderfrom":{"id":"6db1905f-2343-4c63-97d3-07f4d946ef58","output":{"acc":{"ignored":true}}},"lengthlessthan":{"id":"0e211b43-0d8d-44cb-b63f-79a1a02de614"}},"merges":{"yhqkcrmnq":{"lengthlessthan":{"input":{"a":true}},"arraybuilderfrom":{"output":{"local":true}}},"jswlhsl":{"looprepeat":{"output":{"local":true}},"lengthlessthan":{"input":{"b":true}}},"pauzdiil":{"lengthlessthan":{"output":{"test":true}},"looprepeat":{"input":{"test":true}},"arraybuilderfrom":{"input":{"test":true}}}},"metadata":{"icon":"array","description":"build a list of size n","complexity":24,"tags":["core","common"]},"inputs":{"a":{"plug":{"0":{"unitId":"arraybuilderfrom","pinId":"a"}},"type":"<A>"},"from":{"plug":{"0":{"unitId":"arraybuilderfrom","pinId":"init"}},"functional":true,"type":"<A>[]"},"n":{"plug":{"0":{"unitId":"looprepeat","pinId":"init"}},"functional":true,"type":"number"}},"outputs":{"a[]":{"plug":{"0":{"unitId":"arraybuilderfrom","pinId":"a[]"}},"type":"<A>[]"}},"id":"6c5543a6-d558-490d-8a94-20709375b10f","type":"`U`&`G`","system":true},"561db4ce-1631-4d66-a047-140fb6e814a6":{"name":"nor","units":{"or":{"id":"62a19cd6-04bd-4e46-a72e-4fa3516ad3fa"},"not":{"id":"7d02d638-a311-4ea8-a0c0-d45baf739e0d"}},"merges":{"0":{"or":{"output":{"a or b":true}},"not":{"input":{"a":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"or","pinId":"a"}},"type":"boolean"},"b":{"plug":{"0":{"unitId":"or","pinId":"b"}},"type":"boolean"}},"outputs":{"!a && !b":{"plug":{"0":{"unitId":"not","pinId":"!a"}},"type":"boolean"}},"metadata":{"icon":null,"description":"...","complexity":8,"tags":["core","common"]},"id":"561db4ce-1631-4d66-a047-140fb6e814a6","type":"`U`&`G`","system":true},"a4515f52-889c-4409-b710-59e2ebea265c":{"name":"not and","units":{"and":{"id":"407640f7-f1c3-4297-a5ce-baff357a6d31"},"not":{"id":"7d02d638-a311-4ea8-a0c0-d45baf739e0d"}},"merges":{"0":{"and":{"input":{"b":true}},"not":{"output":{"!a":true}}}},"inputs":{"b":{"plug":{"0":{"unitId":"not","pinId":"a"}},"type":"boolean"},"a":{"plug":{"0":{"unitId":"and","pinId":"a"}},"type":"boolean"}},"outputs":{"!a && b":{"plug":{"0":{"unitId":"and","pinId":"a and b"}},"type":"boolean"}},"metadata":{"icon":null,"description":"...","complexity":8,"tags":["core","common"]},"id":"a4515f52-889c-4409-b710-59e2ebea265c","type":"`U`&`G`","system":true},"85b8586a-0295-44fd-b3d2-24a048552700":{"name":"steps","inputs":{"n":{"plug":{"0":{"mergeId":"4"}},"functional":true,"type":"number","metadata":{"position":{"0":{"x":43,"y":-60}}}}},"outputs":{"test":{"plug":{"0":{"mergeId":"1"}},"type":"boolean","metadata":{"position":{"0":{"x":-36,"y":4}}}}},"units":{"loopincrement":{"id":"4e2c89b2-e9cb-42f6-bb8d-e9d665c21fa7","output":{"current":{"ignored":true,"metadata":{"position":{"x":30,"y":56}}},"local":{},"final":{"ignored":true,"metadata":{"position":{"x":-38,"y":69}}}},"input":{"test":{},"init":{"metadata":{"position":{"x":-97,"y":28}}}},"metadata":{"position":{"x":-13,"y":24}}},"lessthan":{"id":"82c3cf2a-0855-4c6d-a4c4-807b0ce1fd35","input":{"a":{},"b":{"constant":false}},"output":{"a < b":{}},"metadata":{"position":{"x":-105,"y":3}}},"looprepeat":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","input":{"init":{"metadata":{"position":{"x":110,"y":-15}}},"test":{}},"output":{"local":{},"current":{"ignored":true,"metadata":{"position":{"x":-62,"y":-68}}},"final":{"ignored":true,"metadata":{"position":{"x":9,"y":-74}}}},"metadata":{"position":{"x":-21,"y":-32}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"0","metadata":{"position":{"x":133,"y":-18}}},"b":{}},"output":{"a":{}},"metadata":{"position":{"x":82,"y":-14}}}},"merges":{"0":{"loopincrement":{"output":{"local":true}},"lessthan":{"input":{"a":true}}},"1":{"loopincrement":{"input":{"test":true}},"lessthan":{"output":{"a < b":true}},"looprepeat":{"input":{"test":true}}},"2":{"looprepeat":{"output":{"local":true}},"lessthan":{"input":{"b":true}}},"3":{"wait":{"output":{"a":true}},"loopincrement":{"input":{"init":true}}},"4":{"wait":{"input":{"b":true}},"looprepeat":{"input":{"init":true}}}},"metadata":{"icon":"skip-forward","description":"output true `n` times then false","complexity":24,"tags":["core","common"],"position":{"merge":{"0":{"x":-66,"y":31},"1":{"x":-56,"y":0},"2":{"x":-74,"y":-31},"3":{"x":40,"y":14},"4":{"x":34,"y":-32}}}},"id":"85b8586a-0295-44fd-b3d2-24a048552700","type":"`U`&`G`","system":true},"f488c69c-1167-11eb-875f-3354cd742d50":{"name":"one","units":{"identity":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"1"},"b":{}},"output":{"a":{}}}},"merges":{},"inputs":{"any":{"plug":{"0":{"unitId":"identity","pinId":"b"}},"type":"any"}},"outputs":{"1":{"plug":{"0":{"unitId":"identity","pinId":"a"}},"type":"number"}},"metadata":{"icon":"dot-circle","description":"...","complexity":5,"tags":["core","common"]},"id":"f488c69c-1167-11eb-875f-3354cd742d50","type":"`U`&`G`","system":true},"04bd8d41-7352-4609-b5af-603e4208775b":{"name":"pick 50% chance","units":{"kisvs":{"id":"396497e4-f8e7-4573-95c9-a4f186a5cd05"},"iqtjs":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc"},"iubpagjjj":{"id":"6c3c8c8f-e383-46bc-ac0c-a294e65040bb"}},"merges":{"dcdag":{"kisvs":{"input":{"b":true}},"iqtjs":{"input":{"b":true}}},"yktkm":{"kisvs":{"input":{"a":true}},"iqtjs":{"input":{"a":true}}},"rnnrejbbx":{"kisvs":{"input":{"c":true}},"iubpagjjj":{"output":{"pass":true}}},"lcdhaup":{"iqtjs":{"output":{"a":true}},"iubpagjjj":{"input":{"any":true}}}},"inputs":{"qszkn":{"plug":{"0":{"mergeId":"dcdag"}},"type":"boolean"},"vmhay":{"plug":{"0":{"mergeId":"yktkm"}},"type":"boolean"}},"outputs":{"emrwe":{"plug":{"0":{"unitId":"kisvs","pinId":"a"}},"type":"boolean"}},"metadata":{"icon":"scale","description":"pick a or b, 50% chance","complexity":24,"tags":["core","common"]},"id":"04bd8d41-7352-4609-b5af-603e4208775b","type":"`U`&`G`","system":true},"ea1389f2-3a83-44e5-ad8c-b29e03ab77d1":{"name":"pick branch","units":{"pick":{"id":"396497e4-f8e7-4573-95c9-a4f186a5cd05","input":{}},"ifelse":{"id":"92760dd2-ecd9-46db-851f-70950a5b6bc3"}},"merges":{"yeejayjv":{"pick":{"input":{"c":true}},"ifelse":{"input":{"b":true}}},"croouzwck":{"pick":{"output":{"a":true}},"ifelse":{"input":{"a":true}}}},"metadata":{"icon":null,"description":"","complexity":17,"tags":["core","common"]},"inputs":{"test":{"plug":{"0":{"mergeId":"yeejayjv"}},"type":"boolean"},"a":{"plug":{"0":{"unitId":"pick","pinId":"a"}},"type":"<A>"},"b":{"plug":{"0":{"unitId":"pick","pinId":"b"}},"type":"<A>"}},"outputs":{"a":{"plug":{"0":{"unitId":"ifelse","pinId":"if"}},"type":"<A>"},"b":{"plug":{"0":{"unitId":"ifelse","pinId":"else"}},"type":"<A>"}},"id":"ea1389f2-3a83-44e5-ad8c-b29e03ab77d1","type":"`U`&`G`","system":true},"9a85acf3-c40b-4e82-b04c-68c3dd1b0d4b":{"name":"pick set","units":{"pick":{"id":"396497e4-f8e7-4573-95c9-a4f186a5cd05","input":{"a":{},"b":{},"c":{}},"output":{"a":{}}},"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{},"key":{},"value":{}},"output":{"obj":{}}}},"merges":{"0":{"pick":{"output":{"a":true}},"set":{"input":{"value":true}}}},"inputs":{"c":{"plug":{"0":{"unitId":"pick","pinId":"c"}},"type":"boolean"},"b":{"plug":{"0":{"unitId":"pick","pinId":"b"}},"type":"<A>"},"a":{"plug":{"0":{"unitId":"pick","pinId":"a"}},"type":"<A>"},"key":{"plug":{"0":{"unitId":"set","pinId":"key"}},"type":"string"},"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"object"}},"outputs":{"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"object"}},"metadata":{"icon":"brackets-curly","description":"...","complexity":16,"tags":["core","common"]},"id":"9a85acf3-c40b-4e82-b04c-68c3dd1b0d4b","type":"`U`&`G`","system":true},"8a5043d9-e6ac-4628-9fde-a11cbd240e10":{"name":"random bit","units":{"pick":{"id":"396497e4-f8e7-4573-95c9-a4f186a5cd05","input":{"a":{"constant":true,"data":"0"},"b":{"constant":true,"data":"1"}}},"50chance":{"id":"6c3c8c8f-e383-46bc-ac0c-a294e65040bb","input":{"any":{}}}},"merges":{"0":{"pick":{"input":{"c":true}},"50chance":{"output":{"pass":true}}}},"inputs":{"any":{"plug":{"0":{"unitId":"50chance","pinId":"any"}},"type":"any"}},"outputs":{"bit":{"plug":{"0":{"unitId":"pick","pinId":"a"}},"type":"number"}},"metadata":{"icon":"random","description":"50% chance 0, 50% chance 1","complexity":21,"tags":["core","common"]},"id":"8a5043d9-e6ac-4628-9fde-a11cbd240e10","type":"`U`&`G`","system":true},"33ec13e7-5a30-4029-af21-07ee422a8a2d":{"name":"random bit array","units":{"randombit":{"id":"8a5043d9-e6ac-4628-9fde-a11cbd240e10","input":{"any":{}},"output":{"bit":{}}},"range":{"id":"29e43ad7-be5e-437f-8f0f-2df996c8b89c","input":{"a":{"constant":true,"data":"0"},"b":{}},"output":{"i":{}}},"narraybuilder":{"id":"38033fcc-aa28-4df3-abc8-d4ece231028b","input":{"a":{},"n":{}},"output":{"a[]":{}}}},"merges":{"etjbu":{"randombit":{"input":{"any":true}},"range":{"output":{"i":true}}},"mxzbr":{"narraybuilder":{"input":{"a":true}},"randombit":{"output":{"bit":true}}},"fulew":{"range":{"input":{"b":true}},"narraybuilder":{"input":{"n":true}}}},"inputs":{"n":{"plug":{"0":{"mergeId":"fulew"}},"type":"number"}},"outputs":{"a":{"plug":{"0":{"unitId":"narraybuilder","pinId":"a[]"}},"type":"number[]"}},"metadata":{"icon":"brackets","description":"random array of bits of size `n`","complexity":59,"tags":["core","common"]},"id":"33ec13e7-5a30-4029-af21-07ee422a8a2d","type":"`U`&`G`","system":true},"be4600af-eb6b-417f-9bb6-88760afbbcba":{"name":"random bit matrix","units":{"narraybuilder":{"id":"38033fcc-aa28-4df3-abc8-d4ece231028b"},"randombitarray":{"id":"33ec13e7-5a30-4029-af21-07ee422a8a2d"},"repeatn":{"id":"251ba609-a9c5-451b-8162-411c966bf919"},"identity":{"id":"260d774e-bc89-4027-aa92-cb1985fb312b"}},"merges":{"0":{"narraybuilder":{"input":{"a":true}},"randombitarray":{"output":{"a":true}}},"mrxes":{"narraybuilder":{"input":{"n":true}},"repeatn":{"input":{"n":true}},"identity":{"input":{"a":true}}},"teris":{"randombitarray":{"input":{"n":true}},"repeatn":{"output":{"a":true}}},"nmfpg":{"repeatn":{"input":{"a":true}},"identity":{"output":{"a":true}}}},"inputs":{"n":{"plug":{"0":{"mergeId":"mrxes"}},"type":"number"}},"outputs":{"a":{"plug":{"0":{"unitId":"narraybuilder","pinId":"a[]"}},"type":"number[][]"}},"metadata":{"icon":"binary","description":"output a random bit matrix","complexity":79,"tags":["core","common"]},"id":"be4600af-eb6b-417f-9bb6-88760afbbcba","type":"`U`&`G`","system":true},"5b99b930-92c9-4fbe-be37-8c72a8e1c70b":{"name":"random in array","units":{"randomindexinarray":{"id":"e2325503-40a7-4c7e-b06c-d3833c8856e5"},"at":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a"}},"merges":{"0":{"randomindexinarray":{"input":{"a":true}},"at":{"input":{"a":true}}},"1":{"randomindexinarray":{"output":{"i":true}},"at":{"input":{"i":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"0"}},"type":"<A>[]","metadata":{"examples":["[0,1,2,3,4]"]}}},"outputs":{"a[i]":{"plug":{"0":{"unitId":"at","pinId":"a[i]"}},"type":"<A>"}},"metadata":{"icon":"random","description":"random element of the array","complexity":21,"tags":["core","common"]},"id":"5b99b930-92c9-4fbe-be37-8c72a8e1c70b","type":"`U`&`G`","system":true},"e2325503-40a7-4c7e-b06c-d3833c8856e5":{"name":"random index in array","units":{"length":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8"},"randomnaturallte":{"id":"9569f78e-18d3-40a3-9373-c56afa0214f6"}},"merges":{"0":{"length":{"output":{"length":true}},"randomnaturallte":{"input":{"max":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"length","pinId":"a"}},"type":"<A>[]","metadata":{"examples":["[0,1,2,3]"]}}},"outputs":{"i":{"plug":{"0":{"unitId":"randomnaturallte","pinId":"i"}},"type":"number"}},"metadata":{"icon":"random","description":"random element of the array","complexity":16,"tags":["core","common"]},"id":"e2325503-40a7-4c7e-b06c-d3833c8856e5","type":"`U`&`G`","system":true},"9569f78e-18d3-40a3-9373-c56afa0214f6":{"name":"random natural","units":{"random":{"id":"2b59f375-ef06-4ec7-80c2-71a53171ec67"},"floor":{"id":"3217edcf-2fa1-4dc4-af7c-d6fb607c888d"},"multiply":{"id":"872be100-f4dc-4246-8eea-6e3da31137b7"}},"merges":{"0":{"random":{"output":{"random":true}},"multiply":{"input":{"a":true}}},"1":{"multiply":{"output":{"a \xD7 b":true}},"floor":{"input":{"a":true}}},"2":{"multiply":{"input":{"b":true}},"random":{"input":{"any":true}}}},"inputs":{"max":{"plug":{"0":{"mergeId":"2"}},"type":"number"}},"outputs":{"i":{"plug":{"0":{"unitId":"floor","pinId":"\u230Aa\u230B"}},"type":"number"}},"metadata":{"icon":"random","description":"random natural `i` less than `max`","complexity":11,"tags":["core","common"]},"id":"9569f78e-18d3-40a3-9373-c56afa0214f6","type":"`U`&`G`","system":true},"9d2b69b2-c468-4fca-a7d5-d158033c0201":{"name":"random natural between","units":{"randomnaturallt":{"id":"9569f78e-18d3-40a3-9373-c56afa0214f6"},"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf"},"subtract":{"id":"fa94b179-00e3-4ed1-814e-7938324a833f"}},"merges":{"0":{"add":{"input":{"a":true}},"subtract":{"input":{"b":true}}},"1":{"add":{"input":{"b":true}},"randomnaturallt":{"output":{"i":true}}},"2":{"randomnaturallt":{"input":{"max":true}},"subtract":{"output":{"a - b":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"0"}},"functional":true,"type":"number"},"b":{"plug":{"0":{"unitId":"subtract","pinId":"a"}},"functional":true,"type":"number"}},"outputs":{"n":{"plug":{"0":{"unitId":"add","pinId":"a + b"}},"type":"number"}},"metadata":{"icon":"random","description":"output random natural `n` between `a` and `b`, not inclusive","complexity":19,"tags":["core","common"]},"id":"9d2b69b2-c468-4fca-a7d5-d158033c0201","type":"`U`&`G`","system":true},"587f9a76-de5f-4dc0-b395-6e5b0091d12e":{"name":"random natural lte","units":{"randomnaturallt":{"id":"9569f78e-18d3-40a3-9373-c56afa0214f6"},"increment":{"id":"fafeadd7-06a8-4bb0-9fa5-2149d1b5208e"}},"merges":{"mosa":{"randomnaturallt":{"input":{"max":true}},"increment":{"output":{"a + 1":true}}}},"inputs":{"max":{"plug":{"0":{"unitId":"increment","pinId":"a"}},"type":"number"}},"outputs":{"i":{"plug":{"0":{"unitId":"randomnaturallt","pinId":"i"}},"type":"number"}},"metadata":{"icon":"random","description":"output random natural `i` less than or equal to `max`","complexity":18,"tags":["core","common"]},"id":"587f9a76-de5f-4dc0-b395-6e5b0091d12e","type":"`U`&`G`","system":true},"1f0e1e35-c920-4a3f-b71b-0e58f5c88bd3":{"name":"range array 6","units":{"rangearray":{"id":"a0b5c3d9-7ee8-4c41-a299-1d32e707c673","input":{"n":{"constant":true,"data":"6"}},"output":{"a":{}}}},"merges":{},"inputs":{},"outputs":{"a":{"plug":{"0":{"unitId":"rangearray","pinId":"a"}},"type":"number[]"}},"metadata":{"icon":null,"description":"[0, 1, 2, 3, 4, 5]","complexity":42,"tags":["core","common"]},"id":"1f0e1e35-c920-4a3f-b71b-0e58f5c88bd3","type":"`U`&`G`","system":true},"251ba609-a9c5-451b-8162-411c966bf919":{"name":"repeat n","units":{"looprepeat":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","output":{"local":{"ignored":true}}},"loopdecrement":{"id":"95862764-be74-4372-b734-c767ddd3e323","output":{"final":{"ignored":true},"current":{"ignored":true}}},"greaterthan0":{"id":"6f4ac2fa-e9bd-4c0e-8bda-75976f3e4e58"}},"merges":{"ncrfjsgik":{"looprepeat":{"input":{"test":true}},"loopdecrement":{"input":{"test":true}},"greaterthan0":{"output":{"a > 0":true}}},"yxlpxg":{"loopdecrement":{"output":{"local":true}},"greaterthan0":{"input":{"a":true}}}},"metadata":{"icon":"repeat-1","description":"output `a` `n` times","complexity":23,"tags":["core","common"]},"inputs":{"n":{"plug":{"0":{"unitId":"loopdecrement","pinId":"init"}},"functional":true,"type":"number"},"a":{"plug":{"0":{"unitId":"looprepeat","pinId":"init"}},"functional":true,"type":"<A>"}},"outputs":{"a":{"plug":{"0":{"unitId":"looprepeat","pinId":"current"}},"type":"<A>"}},"id":"251ba609-a9c5-451b-8162-411c966bf919","type":"`U`&`G`","system":true},"74edae3f-87de-455c-a65a-e458334d2c47":{"name":"sum n","units":{"sumnfrom":{"id":"57e0cf37-1bf7-449e-91fd-f1ddf62c607d","input":{"from":{"constant":true,"data":"0"}}}},"merges":{},"metadata":{"icon":"plus","description":"sum the next `n` `a`","complexity":42,"tags":["core","common"]},"inputs":{"n":{"plug":{"0":{"unitId":"sumnfrom","pinId":"n"}},"type":"number"},"a":{"plug":{"0":{"unitId":"sumnfrom","pinId":"a"}},"type":"number"}},"outputs":{"sum":{"plug":{"0":{"unitId":"sumnfrom","pinId":"sum"}},"type":"number"}},"id":"74edae3f-87de-455c-a65a-e458334d2c47","type":"`U`&`G`","system":true},"57e0cf37-1bf7-449e-91fd-f1ddf62c607d":{"name":"sum n from","units":{"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf"},"decrement":{"id":"4d67d2e4-8b06-4e15-8243-99be8e4be5d3"},"greaterthan0":{"id":"6f4ac2fa-e9bd-4c0e-8bda-75976f3e4e58"},"loop2":{"id":"eee90e0f-522d-4ac4-a0f1-abf5d69a4e26","output":{"finalb":{"ignored":true},"locala":{"ignored":true},"finala":{"ignored":false}}}},"merges":{"mxhdfwqki":{"loop2":{"output":{"localb":true}},"greaterthan0":{"input":{"a":true}}},"xaycilon":{"loop2":{"input":{"test":true}},"greaterthan0":{"output":{"a > 0":true}}},"ilurxqxf":{"loop2":{"output":{"currentb":true}},"decrement":{"input":{"a":true}}},"yncygfort":{"loop2":{"input":{"next b":true}},"decrement":{"output":{"a - 1":true}}},"msleufqc":{"loop2":{"input":{"next a":true}},"add":{"output":{"a + b":true}}},"xlqymzvp":{"loop2":{"output":{"currenta":true}},"add":{"input":{"b":true}}}},"metadata":{"icon":null,"description":"no description","complexity":40,"tags":["core","common"]},"inputs":{"a":{"plug":{"0":{"unitId":"add","pinId":"a"}},"type":"number"},"n":{"plug":{"0":{"unitId":"loop2","pinId":"initb"}},"type":"any"},"from":{"plug":{"0":{"unitId":"loop2","pinId":"inita"}},"type":"any"}},"outputs":{"sum":{"plug":{"0":{"unitId":"loop2","pinId":"finala"}},"type":"any"}},"id":"57e0cf37-1bf7-449e-91fd-f1ddf62c607d","type":"`U`&`G`","system":true},"a9405f74-fd5f-4e89-a66e-efe2ef9d6b70":{"name":"three","units":{"identity":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"3"},"b":{}},"output":{"a":{}}}},"merges":{},"inputs":{"any":{"plug":{"0":{"unitId":"identity","pinId":"b"}},"type":"any"}},"outputs":{"3":{"plug":{"0":{"unitId":"identity","pinId":"a"}},"type":"number"}},"metadata":{"icon":"dot-circle","description":"...","complexity":5,"tags":["core","common"]},"id":"a9405f74-fd5f-4e89-a66e-efe2ef9d6b70","type":"`U`&`G`","system":true},"e24d1987-e3e7-4f1a-bf4a-191c79b2eae6":{"name":"true false","inputs":{"any":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"}},"outputs":{"a":{"plug":{"0":{"unitId":"foreach","pinId":"a[i]"}},"type":"boolean"}},"units":{"foreach":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","input":{"a":{}},"output":{"a[i]":{},"a":{"ignored":true},"i":{"ignored":true},"test":{"ignored":true}},"metadata":{"position":{"x":51,"y":-1}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"[true,false]"},"b":{}},"output":{"a":{}},"metadata":{"position":{"x":-52,"y":0}}}},"merges":{"0":{"wait":{"output":{"a":true}},"foreach":{"input":{"a":true}}}},"component":{},"metadata":{"icon":"map-signs","description":"outputs true and then false","complexity":36,"tags":["core","common"]},"id":"e24d1987-e3e7-4f1a-bf4a-191c79b2eae6","system":true},"d6d14fd8-4d8f-4d1c-94ac-f42b92f075e2":{"name":"true or false","units":{"if0":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"if1":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"not0":{"id":"7d02d638-a311-4ea8-a0c0-d45baf739e0d"}},"merges":{"merge0":{"if0":{"input":{"a":true,"b":true}},"not0":{"input":{"a":true}}},"merge1":{"not0":{"output":{"!a":true}},"if1":{"input":{"a":true,"b":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"merge0"}},"type":"boolean"}},"outputs":{"a = true":{"plug":{"0":{"unitId":"if0","pinId":"a if b"}},"type":"boolean"},"a = false":{"plug":{"0":{"unitId":"if1","pinId":"a if b"}},"type":"boolean"}},"metadata":{"icon":"map-signs","description":"direct `a` boolean value","complexity":9,"tags":["core","common"]},"id":"d6d14fd8-4d8f-4d1c-94ac-f42b92f075e2","type":"`U`&`G`","system":true},"0c0954fb-07de-4722-87d8-b0989043335a":{"name":"two","units":{"identity":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"2"},"b":{}},"output":{"a":{}}}},"merges":{},"inputs":{"any":{"plug":{"0":{"unitId":"identity","pinId":"b"}},"type":"any"}},"outputs":{"2":{"plug":{"0":{"unitId":"identity","pinId":"a"}},"type":"number"}},"metadata":{"icon":"dot-circle","description":"...","complexity":5,"tags":["core","common"]},"id":"0c0954fb-07de-4722-87d8-b0989043335a","type":"`U`&`G`","system":true},"618898d6-1167-11eb-bef9-cb053e09c21b":{"name":"zero","units":{"identity":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"0"},"b":{}},"output":{"a":{}}}},"merges":{},"inputs":{"any":{"plug":{"0":{"unitId":"identity","pinId":"b"}},"type":"any"}},"outputs":{"0":{"plug":{"0":{"unitId":"identity","pinId":"a"}},"type":"number"}},"metadata":{"icon":"circle","description":"...","complexity":5,"tags":["core","common"]},"id":"618898d6-1167-11eb-bef9-cb053e09c21b","type":"`U`&`G`","system":true},"13a16a8a-5dc6-11ea-a3d4-9bda49772976":{"name":"if 3","units":{"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"if0":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"if1":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"}},"merges":{"rsmsjsodm":{"if":{"input":{"b":true}},"if0":{"input":{"b":true}},"if1":{"input":{"b":true}}}},"metadata":{"icon":"filter","description":"no description","complexity":7,"tags":["core","control"]},"inputs":{"a":{"plug":{"0":{"unitId":"if0","pinId":"a"}},"type":"<A>"},"b":{"plug":{"0":{"unitId":"if1","pinId":"a"}},"type":"<B>"},"c":{"plug":{"0":{"unitId":"if","pinId":"a"}},"type":"<C>"},"test":{"plug":{"0":{"mergeId":"rsmsjsodm"}},"type":"boolean"}},"outputs":{"a":{"plug":{"0":{"unitId":"if0","pinId":"a if b"}},"type":"<A>"},"b":{"plug":{"0":{"unitId":"if1","pinId":"a if b"}},"type":"<B>"},"c":{"plug":{"0":{"unitId":"if","pinId":"a if b"}},"type":"<C>"}},"id":"13a16a8a-5dc6-11ea-a3d4-9bda49772976","type":"`U`&`G`","system":true},"1c59d8d8-5dc6-11ea-9bfb-9b22dd8d8cae":{"name":"if 4","units":{"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"if0":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"if1":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"if2":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"}},"merges":{"0":{"if":{"input":{"b":true}},"if2":{"input":{"b":true}},"if0":{"input":{"b":true}},"if1":{"input":{"b":true}}}},"metadata":{"icon":"filter","description":"no description","complexity":8,"tags":["core","control"]},"inputs":{"a":{"plug":{"0":{"unitId":"if0","pinId":"a"}},"type":"<A>"},"b":{"plug":{"0":{"unitId":"if1","pinId":"a"}},"type":"<B>"},"c":{"plug":{"0":{"unitId":"if","pinId":"a"}},"type":"<C>"},"d":{"plug":{"0":{"unitId":"if2","pinId":"a"}},"type":"<D>"},"test":{"plug":{"0":{"mergeId":"0"}},"type":"boolean"}},"outputs":{"d":{"plug":{"0":{"unitId":"if2","pinId":"a if b"}},"type":"<D>"},"a":{"plug":{"0":{"unitId":"if0","pinId":"a if b"}},"type":"<A>"},"b":{"plug":{"0":{"unitId":"if1","pinId":"a if b"}},"type":"<B>"},"c":{"plug":{"0":{"unitId":"if","pinId":"a if b"}},"type":"<C>"}},"id":"1c59d8d8-5dc6-11ea-9bfb-9b22dd8d8cae","type":"`U`&`G`","system":true},"92760dd2-ecd9-46db-851f-70950a5b6bc3":{"name":"if else","type":"`U`&`G`","units":{"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"ifnot":{"id":"439c6b56-a0b6-4b76-9131-c6dc23375fda"}},"merges":{"merge0":{"if":{"input":{"a":true}},"ifnot":{"input":{"a":true}}},"merge1":{"if":{"input":{"b":true}},"ifnot":{"input":{"b":true}}}},"inputs":{"a":{"plug":{"0":{"mergeId":"merge0"}},"functional":true,"type":"<A>"},"b":{"plug":{"0":{"mergeId":"merge1"}},"functional":true,"type":"boolean"}},"outputs":{"if":{"plug":{"0":{"unitId":"if","pinId":"a if b"}},"type":"<A>"},"else":{"plug":{"0":{"unitId":"ifnot","pinId":"a if not b"}},"type":"<A>"}},"metadata":{"icon":"map-signs","description":"send `a` to `if` if `b` is false or `else` otherwise","complexity":11,"tags":["core","control"]},"id":"92760dd2-ecd9-46db-851f-70950a5b6bc3","system":true},"439c6b56-a0b6-4b76-9131-c6dc23375fda":{"name":"if not","units":{"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"not":{"id":"7d02d638-a311-4ea8-a0c0-d45baf739e0d"}},"merges":{"0":{"not":{"output":{"!a":true}},"if":{"input":{"b":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"if","pinId":"a"}},"type":"<A>"},"b":{"plug":{"0":{"unitId":"not","pinId":"a"}},"type":"boolean"}},"outputs":{"a if not b":{"plug":{"0":{"unitId":"if","pinId":"a if b"}},"type":"<A>"}},"metadata":{"icon":"filter","description":"reverse conditional operator","complexity":8,"tags":["core","control"]},"id":"439c6b56-a0b6-4b76-9131-c6dc23375fda","type":"`U`&`G`","system":true},"f55ab180-3fd5-44c4-915f-f40e6bbcc481":{"name":"invert","units":{"pick":{"id":"396497e4-f8e7-4573-95c9-a4f186a5cd05","input":{"a":{},"b":{},"c":{}},"output":{"a":{}}},"pick0":{"id":"396497e4-f8e7-4573-95c9-a4f186a5cd05","input":{"a":{},"b":{},"c":{}},"output":{"a":{}}}},"merges":{},"inputs":{"a":{"plug":{"0":{"unitId":"pick0","pinId":"b"},"1":{"unitId":"pick","pinId":"a"}},"functional":true,"type":"<A>"},"c":{"plug":{"0":{"unitId":"pick0","pinId":"c"},"1":{"unitId":"pick","pinId":"c"}},"functional":true,"type":"boolean"},"b":{"plug":{"0":{"unitId":"pick0","pinId":"a"},"mertv":{"unitId":"pick","pinId":"b"}},"functional":true,"type":"<A>"}},"outputs":{"b":{"plug":{"0":{"unitId":"pick","pinId":"a"}},"type":"<A>"},"a":{"plug":{"0":{"unitId":"pick0","pinId":"a"}},"type":"<A>"}},"metadata":{"icon":"pointer","description":"if `c` output `a` as `b`","complexity":14,"tags":["core","control"]},"id":"f55ab180-3fd5-44c4-915f-f40e6bbcc481","type":"`U`&`G`","system":true},"b5f8a6bc-4fab-4905-a479-cf94e6e92448":{"name":"is false","units":{"ysyvv":{"id":"439c6b56-a0b6-4b76-9131-c6dc23375fda","input":{"a":{"constant":true,"data":"true"}}}},"merges":{},"inputs":{"a":{"plug":{"0":{"unitId":"ysyvv","pinId":"b"}},"type":"boolean"}},"outputs":{"a = false":{"plug":{"0":{"unitId":"ysyvv","pinId":"a if not b"}},"type":"boolean"}},"metadata":{"icon":"question","description":"true if `a` is false, false otherwise","complexity":10,"tags":["core","control"]},"id":"b5f8a6bc-4fab-4905-a479-cf94e6e92448","type":"`U`&`G`","system":true},"b6694fbe-4fc9-4779-92c6-4ba91c12718f":{"name":"is true","units":{"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8","input":{"a":{"constant":true,"data":"true"}}}},"merges":{},"inputs":{"a":{"plug":{"0":{"unitId":"if","pinId":"b"}},"type":"boolean"}},"outputs":{"a = false":{"plug":{"0":{"unitId":"if","pinId":"a if b"}},"type":"boolean"}},"metadata":{"icon":"question","description":"true if `a` is true, false otherwise","complexity":5,"tags":["core","control"]},"id":"b6694fbe-4fc9-4779-92c6-4ba91c12718f","type":"`U`&`G`","system":true},"396497e4-f8e7-4573-95c9-a4f186a5cd05":{"name":"pick","units":{"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"ifnot":{"id":"439c6b56-a0b6-4b76-9131-c6dc23375fda"}},"merges":{"0":{"ifnot":{"input":{"b":true}},"if":{"input":{"b":true}}},"1":{"if":{"output":{"a if b":true}},"ifnot":{"output":{"a if not b":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"if","pinId":"a"}},"functional":true,"type":"<A>"},"b":{"plug":{"0":{"unitId":"ifnot","pinId":"a"}},"functional":true,"type":"<A>"},"c":{"plug":{"0":{"mergeId":"0"}},"functional":true,"type":"boolean"}},"outputs":{"a":{"plug":{"0":{"mergeId":"1"}},"type":"<A>"}},"metadata":{"icon":"pointer","description":"conditional picker","complexity":11,"tags":["core","control"]},"id":"396497e4-f8e7-4573-95c9-a4f186a5cd05","type":"`U`&`G`","system":true},"f805b3c6-6c0e-4215-b3d6-91b93dc8a938":{"name":"pick lesser","units":{"pick":{"id":"396497e4-f8e7-4573-95c9-a4f186a5cd05"},"lessthan":{"id":"82c3cf2a-0855-4c6d-a4c4-807b0ce1fd35"}},"merges":{"0":{"pick":{"input":{"a":true}},"lessthan":{"input":{"a":true}}},"1":{"pick":{"input":{"b":true}},"lessthan":{"input":{"b":true}}},"2":{"pick":{"input":{"c":true}},"lessthan":{"output":{"a < b":true}}}},"metadata":{"icon":"pointer","description":"pick the smalest from `a` and `b`","complexity":16,"tags":["core","control"]},"inputs":{"a":{"plug":{"0":{"mergeId":"0"}},"functional":true,"type":"number"},"b":{"plug":{"0":{"mergeId":"1"}},"functional":true,"type":"number"}},"outputs":{"lesser":{"plug":{"0":{"unitId":"pick","pinId":"a"}},"type":"number"},"a < b":{"plug":{"0":{"mergeId":"2"}},"type":"boolean"}},"id":"f805b3c6-6c0e-4215-b3d6-91b93dc8a938","type":"`U`&`G`","system":true},"0c78466f-f682-4aca-9a15-d4d2eac5e26d":{"name":"plan 3","units":{"plan":{"id":"36329d25-218d-48a5-a06c-1e0525da504f"},"plan0":{"id":"36329d25-218d-48a5-a06c-1e0525da504f"}},"merges":{"0":{"plan0":{"output":{"1":true}},"plan":{"input":{"a":true}}}},"metadata":{"icon":"list-ordered","description":"output `a` on `0`, then `1`, then `2`","complexity":6,"tags":["core","control"]},"inputs":{"a":{"plug":{"0":{"unitId":"plan0","pinId":"a"}},"type":"<A>"}},"outputs":{"0":{"plug":{"0":{"unitId":"plan0","pinId":"0"}},"type":"<A>"},"1":{"plug":{"0":{"unitId":"plan","pinId":"0"}},"type":"<A>"},"2":{"plug":{"0":{"unitId":"plan","pinId":"1"}},"type":"<A>"}},"id":"0c78466f-f682-4aca-9a15-d4d2eac5e26d","type":"`U`&`G`","system":true},"9c10309b-6ce8-4b92-a0d4-a4b6b2a17a64":{"name":"switch a b","inputs":{"a":{"plug":{"0":{"unitId":"switch","pinId":"a"}}},"b":{"plug":{"0":{"unitId":"switch","pinId":"b"}}}},"outputs":{"a":{"plug":{"0":{"unitId":"switch","pinId":"a"}}}},"units":{"constanttruefalse":{"id":"8df44351-9177-4c4c-abde-7576bc1c8d41","input":{},"output":{"a":{}},"metadata":{"position":{"x":-51,"y":10}}},"switch":{"id":"c37c7c14-293e-414c-8a9c-01a40186c1e5","input":{"c":{},"b":{},"a":{}},"output":{"a":{}},"metadata":{"position":{"x":50,"y":-11}}}},"merges":{"0":{"switch":{"input":{"c":true}},"constanttruefalse":{"output":{"a":true}}}},"component":{},"metadata":{"icon":"map-signs","complexity":53,"tags":["core","control"]},"id":"9c10309b-6ce8-4b92-a0d4-a4b6b2a17a64","system":true},"67cca9ec-1976-47bc-b0d7-5b32e059f6f1":{"name":"wait 2","units":{"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc"},"wait0":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc"}},"merges":{"gnurtgifi":{"wait":{"output":{"a":true}},"wait0":{"input":{"a":true}}}},"metadata":{"icon":"git-merge","description":"wait for `b` and `c` before output `a`","complexity":6,"tags":["core","control"]},"inputs":{"c":{"plug":{"0":{"unitId":"wait0","pinId":"b"}},"type":"any"},"b":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"},"a":{"plug":{"0":{"unitId":"wait","pinId":"a"}},"type":"<A>"}},"outputs":{"a":{"plug":{"0":{"unitId":"wait0","pinId":"a"}},"type":"<A>"}},"id":"67cca9ec-1976-47bc-b0d7-5b32e059f6f1","type":"`U`&`G`","system":true},"349eb1a9-85ae-4fec-93f2-19ba3370b6c3":{"name":"wait all 2","units":{"wait0":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc"},"wait1":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc"}},"merges":{"0":{"wait0":{"input":{"a":true}},"wait1":{"input":{"b":true}}},"1":{"wait1":{"input":{"a":true}},"wait0":{"input":{"b":true}}}},"metadata":{"icon":"git-merge","description":"wait for `b` and `c` before output `a`","complexity":6,"tags":["core","control"]},"inputs":{"a":{"plug":{"0":{"mergeId":"0"}},"type":"<A>"},"b":{"plug":{"0":{"mergeId":"1"}},"type":"<B>"}},"outputs":{"b":{"plug":{"0":{"unitId":"wait1","pinId":"a"}},"type":"<B>"},"a":{"plug":{"0":{"unitId":"wait0","pinId":"a"}},"type":"<A>"}},"id":"349eb1a9-85ae-4fec-93f2-19ba3370b6c3","type":"`U`&`G`","system":true},"e33e7dcd-9715-461c-a474-15ed2bda899e":{"name":"empty","units":{},"merges":{},"inputs":{},"outputs":{},"metadata":{"icon":null,"description":"empty graph","complexity":2,"tags":["core"]},"id":"e33e7dcd-9715-461c-a474-15ed2bda899e","type":"`U`&`G`","system":true},"8a1ca6c0-af60-48cc-86bb-01e4e59598db":{"name":"set unit input data","inputs":{"name":{"plug":{"0":{"unitId":"setunitpindata","pinId":"name"}},"metadata":{"position":{"0":{"x":-69,"y":-40}}},"type":"string"},"id":{"plug":{"0":{"unitId":"setunitpindata","pinId":"id"}},"metadata":{"position":{"0":{"x":-67,"y":39}}},"type":"string"},"data":{"plug":{"0":{"unitId":"setunitpindata","pinId":"data"}},"metadata":{"position":{"0":{"x":-67,"y":39}}},"type":"any"},"graph":{"plug":{"0":{"unitId":"setunitpindata","pinId":"graph"}},"ref":true,"metadata":{"position":{"0":{"x":66,"y":-34}}},"type":"`U`"}},"outputs":{},"units":{"setunitpindata":{"id":"76e99304-aa0c-11eb-9bfa-07725a1b4287","input":{"graph":{"metadata":{"position":{"x":41,"y":-19}}},"id":{"metadata":{"position":{"x":-49,"y":17}}},"type":{"constant":true,"data":"\'input\'","metadata":{"position":{"x":41,"y":17}}},"name":{"metadata":{"position":{"x":-49,"y":-19}}}},"output":{},"metadata":{"position":{"x":-4,"y":-1}}}},"merges":{},"metadata":{"icon":"circle","description":"set `graph` `id` unit `name` input pin `data`","complexity":5,"tags":["core","graph"]},"id":"8a1ca6c0-af60-48cc-86bb-01e4e59598db","type":"`U`&`G`","system":true},"18e8759a-aa11-11eb-984d-339712a7789d":{"name":"set unit output data","inputs":{"name":{"plug":{"0":{"unitId":"setunitpindata","pinId":"name"}},"metadata":{"position":{"0":{"x":-69,"y":-40}}},"type":"string"},"id":{"plug":{"0":{"unitId":"setunitpindata","pinId":"id"}},"metadata":{"position":{"0":{"x":-67,"y":39}}},"type":"string"},"graph":{"plug":{"0":{"unitId":"setunitpindata","pinId":"graph"}},"ref":true,"metadata":{"position":{"0":{"x":66,"y":-34}}},"type":"`U`"},"data":{"plug":{"0":{"unitId":"setunitpindata","pinId":"data"}},"metadata":{"position":{"0":{"x":-67,"y":39}}},"type":"any"}},"outputs":{},"units":{"setunitpindata":{"id":"76e99304-aa0c-11eb-9bfa-07725a1b4287","input":{"graph":{"metadata":{"position":{"x":41,"y":-19}}},"id":{"metadata":{"position":{"x":-49,"y":17}}},"type":{"constant":true,"data":"\'output\'","metadata":{"position":{"x":41,"y":17}}},"name":{"metadata":{"position":{"x":-49,"y":-19}}}},"output":{},"metadata":{"position":{"x":-4,"y":-1}}}},"merges":{},"metadata":{"icon":"circle","description":"set `graph` `id` unit `name` output pin `data`","complexity":5,"tags":["core","graph"]},"id":"18e8759a-aa11-11eb-984d-339712a7789d","type":"`U`&`G`","system":true},"fb5bb9ea-bf24-4150-b12d-bc4873a153a2":{"name":"iterate count","units":{"iteratecountfrom":{"id":"9fa0c25b-0675-48dc-80e7-eab1829656bd","input":{"any":{},"init":{"constant":true,"data":"0"}},"output":{"current":{}}}},"merges":{},"metadata":{"icon":"sort-desc","description":"iteratively increment `count` starting from 0","complexity":15,"tags":["core","iterate"]},"inputs":{"a":{"plug":{"0":{"unitId":"iteratecountfrom","pinId":"any"}},"type":"any"}},"outputs":{"count":{"plug":{"0":{"unitId":"iteratecountfrom","pinId":"current"}},"type":"number"}},"id":"fb5bb9ea-bf24-4150-b12d-bc4873a153a2","type":"`U`&`G`","system":true},"9fa0c25b-0675-48dc-80e7-eab1829656bd":{"name":"iterate count from","units":{"increment":{"id":"fafeadd7-06a8-4bb0-9fa5-2149d1b5208e","input":{"a":{}},"output":{"a + 1":{}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{},"b":{}},"output":{"a":{}}},"iterate":{"id":"8a2b756a-25e4-11eb-860d-1f34c850b992","input":{"next":{},"init":{}},"output":{"current":{},"local":{}}}},"merges":{"0":{"increment":{"output":{"a + 1":true}},"wait":{"input":{"a":true}}},"1":{"iterate":{"output":{"local":true}},"increment":{"input":{"a":true}}},"2":{"wait":{"output":{"a":true}},"iterate":{"input":{"next":true}}}},"metadata":{"icon":"sort-desc","description":"iteratively increment `count` starting from `init`","complexity":13,"tags":["core","iterate"]},"inputs":{"any":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"},"init":{"plug":{"0":{"unitId":"iterate","pinId":"init"}},"type":"number"}},"outputs":{"current":{"plug":{"0":{"unitId":"iterate","pinId":"current"}},"type":"number"}},"id":"9fa0c25b-0675-48dc-80e7-eab1829656bd","type":"`U`&`G`","system":true},"72513267-174e-4ea4-9561-b11dea518af5":{"name":"iterate sum from","units":{"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf"},"iterate":{"id":"8a2b756a-25e4-11eb-860d-1f34c850b992","input":{"next":{},"init":{}},"output":{"current":{},"local":{}}}},"merges":{"1":{"iterate":{"input":{"next":true}},"add":{"output":{"a + b":true}}},"2":{"iterate":{"output":{"local":true}},"add":{"input":{"b":true}}}},"metadata":{"icon":"","description":"no description","complexity":8,"tags":["core","iterate"]},"inputs":{"a":{"plug":{"0":{"unitId":"add","pinId":"a"}},"type":"number"},"from":{"plug":{"0":{"unitId":"iterate","pinId":"init"}},"type":"number"}},"outputs":{"sum":{"plug":{"0":{"unitId":"iterate","pinId":"current"}},"type":"number"}},"id":"72513267-174e-4ea4-9561-b11dea518af5","type":"`U`&`G`","system":true},"58c50bb2-569f-4b7a-aba3-176d9ac91d5c":{"name":"iterate toggle","units":{"not":{"id":"7d02d638-a311-4ea8-a0c0-d45baf739e0d"},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc"},"iterate":{"id":"8a2b756a-25e4-11eb-860d-1f34c850b992","input":{"next":{},"init":{}},"output":{"current":{},"local":{}}}},"merges":{"0":{"not":{"output":{"!a":true}},"wait":{"input":{"a":true}}},"1":{"iterate":{"input":{"next":true}},"wait":{"output":{"a":true}}},"2":{"not":{"input":{"a":true}},"iterate":{"output":{"local":true}}}},"metadata":{"icon":"toggle-right","description":"iteratively toggle `current` value","complexity":11,"tags":["core","iterate"]},"inputs":{"init":{"plug":{"0":{"unitId":"iterate","pinId":"init"}},"type":"boolean"},"toggle":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"}},"outputs":{"value":{"plug":{"0":{"unitId":"iterate","pinId":"current"}},"type":"boolean"}},"id":"58c50bb2-569f-4b7a-aba3-176d9ac91d5c","type":"`U`&`G`","system":true},"ed5e826a-163c-42cd-8522-e47187decae7":{"name":"iterate wait","units":{"iterate":{"id":"8a2b756a-25e4-11eb-860d-1f34c850b992","input":{"next":{},"init":{}},"output":{"current":{},"local":{}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{},"b":{}},"output":{"a":{}}}},"merges":{"0":{"wait":{"output":{"a":true}},"iterate":{"input":{"next":true}}}},"inputs":{"init":{"plug":{"0":{"unitId":"iterate","pinId":"init"}},"type":"<A>"},"a":{"plug":{"0":{"unitId":"wait","pinId":"a"}},"type":"<A>"},"b":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"}},"outputs":{"current":{"plug":{"0":{"unitId":"iterate","pinId":"current"}},"type":"<A>"},"local":{"plug":{"0":{"unitId":"iterate","pinId":"local"}},"defaultIgnored":true,"type":"<A>"}},"metadata":{"icon":"undo","description":"...","complexity":8,"tags":["core","iterate"]},"id":"ed5e826a-163c-42cd-8522-e47187decae7","type":"`U`&`G`","system":true},"4433f550-6b85-4827-9aac-18b2c816818c":{"name":"2 bit condition","units":{"nor":{"id":"561db4ce-1631-4d66-a047-140fb6e814a6"},"andnot":{"id":"c059a789-b57c-4c2e-976b-fdbbe8f9993a"},"and":{"id":"407640f7-f1c3-4297-a5ce-baff357a6d31"},"notand":{"id":"a4515f52-889c-4409-b710-59e2ebea265c"}},"merges":{"0":{"andnot":{"input":{"a":true}},"nor":{"input":{"a":true}},"and":{"input":{"a":true}},"notand":{"input":{"b":true}}},"1":{"andnot":{"input":{"b":true}},"nor":{"input":{"b":true}},"and":{"input":{"b":true}},"notand":{"input":{"a":true}}}},"inputs":{"b":{"plug":{"0":{"mergeId":"1"}},"functional":true,"type":"boolean"},"a":{"plug":{"0":{"mergeId":"0"}},"functional":true,"type":"boolean"}},"outputs":{"a && b":{"plug":{"0":{"unitId":"and","pinId":"a and b"}},"type":"boolean"},"!a && !b":{"plug":{"0":{"unitId":"nor","pinId":"!a && !b"}},"type":"boolean"},"a && !b":{"plug":{"0":{"unitId":"andnot","pinId":"a && !b"}},"type":"boolean"},"!a && b":{"plug":{"0":{"unitId":"notand","pinId":"!a && b"}},"type":"boolean"}},"metadata":{"icon":"binary","description":"2 x 2 = 4","complexity":21,"tags":["core","logic"]},"id":"4433f550-6b85-4827-9aac-18b2c816818c","type":"`U`&`G`","system":true},"6c3c8c8f-e383-46bc-ac0c-a294e65040bb":{"name":"50% chance","units":{"random":{"id":"2b59f375-ef06-4ec7-80c2-71a53171ec67","input":{},"output":{"random":{}}},"lessthan":{"id":"82c3cf2a-0855-4c6d-a4c4-807b0ce1fd35","input":{"b":{"constant":true,"data":"0.5"}},"output":{"a < b":{}}}},"merges":{"0":{"random":{"output":{"random":true}},"lessthan":{"input":{"a":true}}}},"inputs":{"any":{"plug":{"0":{"unitId":"random","pinId":"any"}},"type":"any"}},"outputs":{"pass":{"plug":{"0":{"unitId":"lessthan","pinId":"a < b"}},"type":"boolean"}},"metadata":{"icon":"random","description":"50%/50% true/false","complexity":8,"tags":["core","logic"]},"id":"6c3c8c8f-e383-46bc-ac0c-a294e65040bb","type":"`U`&`G`","system":true},"c059a789-b57c-4c2e-976b-fdbbe8f9993a":{"name":"and not","units":{"and":{"id":"407640f7-f1c3-4297-a5ce-baff357a6d31"},"not":{"id":"7d02d638-a311-4ea8-a0c0-d45baf739e0d"}},"merges":{"0":{"and":{"input":{"b":true}},"not":{"output":{"!a":true}}}},"inputs":{"b":{"plug":{"0":{"unitId":"not","pinId":"a"}},"type":"boolean"},"a":{"plug":{"0":{"unitId":"and","pinId":"a"}},"type":"boolean"}},"outputs":{"a && !b":{"plug":{"0":{"unitId":"and","pinId":"a and b"}},"type":"boolean"}},"metadata":{"icon":null,"description":"...","complexity":8,"tags":["core","logic"]},"id":"c059a789-b57c-4c2e-976b-fdbbe8f9993a","type":"`U`&`G`","system":true},"f022d16a-7a47-47c8-8d9b-3278df13bcc5":{"name":"is between","inputs":{"c":{"plug":{"0":{"unitId":"lessthan","pinId":"b"}}},"a":{"plug":{"0":{"unitId":"greaterthanequal","pinId":"b"}}},"b":{"plug":{"0":{"mergeId":"0"}}}},"outputs":{"a \u2264 b < c":{"plug":{"0":{"unitId":"and","pinId":"a and b"}},"type":"boolean"}},"units":{"lessthan":{"id":"82c3cf2a-0855-4c6d-a4c4-807b0ce1fd35","input":{"a":{},"b":{}},"output":{"a < b":{}},"metadata":{"position":{"x":31,"y":-36}}},"greaterthanequal":{"id":"c9e06816-0d2b-43ec-b7c8-d07563e19b6b","input":{"a":{},"b":{}},"output":{"a \u2265 b":{}},"metadata":{"position":{"x":31,"y":35}}},"and":{"id":"407640f7-f1c3-4297-a5ce-baff357a6d31","input":{"a":{},"b":{}},"output":{"a and b":{}},"metadata":{"position":{"x":-64,"y":-1}}}},"merges":{"0":{"greaterthanequal":{"input":{"a":true}},"lessthan":{"input":{"a":true}}},"1":{"greaterthanequal":{"output":{"a \u2265 b":true}},"and":{"input":{"a":true}}},"2":{"lessthan":{"output":{"a < b":true}},"and":{"input":{"b":true}}}},"metadata":{"complexity":11,"tags":["core","logic"]},"id":"f022d16a-7a47-47c8-8d9b-3278df13bcc5","system":true,"type":"`U`&`G`"},"5ebc6dca-25d6-11eb-b3e1-5fd1eeef49f9":{"name":"count","units":{"countfrom":{"id":"e087017d-a69a-4a02-ad00-c5263bf47365","input":{"init":{"constant":true,"data":"1"}}}},"merges":{},"metadata":{"icon":"sort-desc","description":"iteratively count `a`, starting from 1","complexity":19,"tags":["core","loop"]},"inputs":{"any":{"plug":{"0":{"unitId":"countfrom","pinId":"any"}},"type":"any"}},"outputs":{"current":{"plug":{"0":{"unitId":"countfrom","pinId":"current"}},"type":"number"}},"id":"5ebc6dca-25d6-11eb-b3e1-5fd1eeef49f9","type":"`U`&`G`","system":true},"e087017d-a69a-4a02-ad00-c5263bf47365":{"name":"count from","units":{"loopincrement":{"id":"4e2c89b2-e9cb-42f6-bb8d-e9d665c21fa7","input":{"test":{},"init":{}},"output":{"current":{},"local":{"ignored":true},"final":{"ignored":true}}},"true":{"id":"984c4a44-86c7-464c-ad48-4759598c3be3","input":{"any":{}},"output":{"true":{}}}},"merges":{"0":{"true":{"output":{"true":true}},"loopincrement":{"input":{"test":true}}}},"metadata":{"icon":"sort-desc","description":"iteratively count `a`, starting from `init`","complexity":17,"tags":["core","loop"]},"inputs":{"any":{"plug":{"0":{"unitId":"true","pinId":"any"}},"type":"any"},"init":{"plug":{"0":{"unitId":"loopincrement","pinId":"init"}},"type":"number"}},"outputs":{"current":{"plug":{"0":{"unitId":"loopincrement","pinId":"current"}},"type":"number"}},"id":"e087017d-a69a-4a02-ad00-c5263bf47365","type":"`U`&`G`","system":true},"fb311fff-521b-4066-b830-81d3a50f0f01":{"name":"is first","units":{"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{}},"false":{"id":"b4d20f6f-32dc-4d04-97d6-69518976bdea"},"loopforever":{"id":"4b6e5535-e600-4f91-a5df-105f6a5ad3d7","input":{"next":{},"init":{"constant":true,"data":"true"}},"output":{"current":{}}}},"merges":{"0":{"wait":{"output":{"a":true}},"false":{"input":{"any":true}}},"1":{"loopforever":{"output":{"current":true}},"wait":{"input":{"a":true}}},"2":{"false":{"output":{"false":true}},"loopforever":{"input":{"next":true}}}},"metadata":{"icon":null,"description":"no description","complexity":13,"tags":["core","loop"]},"inputs":{"a":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"}},"outputs":{"first":{"plug":{"0":{"mergeId":"0"}},"type":"boolean"}},"id":"fb311fff-521b-4066-b830-81d3a50f0f01","type":"`U`&`G`","system":true},"eee90e0f-522d-4ac4-a0f1-abf5d69a4e26":{"name":"loop 2","units":{"splitab0":{"id":"40555189-33ef-48b6-af8a-5ab4805b9a1f"},"mergeab0":{"id":"4e54703e-08bc-4537-ba5d-5e697a02be1f"},"splitab1":{"id":"40555189-33ef-48b6-af8a-5ab4805b9a1f"},"mergeab1":{"id":"4e54703e-08bc-4537-ba5d-5e697a02be1f"},"splitab2":{"id":"40555189-33ef-48b6-af8a-5ab4805b9a1f"},"for":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","output":{"final":{"ignored":false}}}},"merges":{"0":{"mergeab0":{"output":{"ab":true}},"for":{"input":{"init":true}}},"1":{"splitab1":{"input":{"ab":true}},"for":{"output":{"final":true}}},"2":{"splitab0":{"input":{"ab":true}},"for":{"output":{"local":true}}},"3":{"mergeab1":{"output":{"ab":true}},"for":{"input":{"next":true}}},"4":{"splitab2":{"input":{"ab":true}},"for":{"output":{"current":true}}}},"metadata":{"icon":"undo","description":"iterate over `a` and `b`","complexity":25,"tags":["core","loop"]},"inputs":{"next a":{"plug":{"0":{"unitId":"mergeab1","pinId":"a"}},"type":"any"},"next b":{"plug":{"0":{"unitId":"mergeab1","pinId":"b"}},"type":"any"},"inita":{"plug":{"0":{"unitId":"mergeab0","pinId":"a"}},"type":"any"},"initb":{"plug":{"0":{"unitId":"mergeab0","pinId":"b"}},"type":"any"},"test":{"plug":{"0":{"unitId":"for","pinId":"test"}},"type":"boolean"}},"outputs":{"localb":{"plug":{"0":{"unitId":"splitab0","pinId":"b"}},"type":"any"},"locala":{"plug":{"0":{"unitId":"splitab0","pinId":"a"}},"type":"any"},"finalb":{"plug":{"0":{"unitId":"splitab1","pinId":"b"}},"defaultIgnored":true,"type":"any"},"finala":{"plug":{"0":{"unitId":"splitab1","pinId":"a"}},"defaultIgnored":true,"type":"any"},"currenta":{"plug":{"0":{"unitId":"splitab2","pinId":"a"}},"type":"any"},"currentb":{"plug":{"0":{"unitId":"splitab2","pinId":"b"}},"type":"any"}},"id":"eee90e0f-522d-4ac4-a0f1-abf5d69a4e26","type":"`U`&`G`","system":true},"29e43ad7-be5e-437f-8f0f-2df996c8b89c":{"name":"range","units":{"looprepeat":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","output":{"current":{"ignored":true}}},"loopincrement":{"id":"4e2c89b2-e9cb-42f6-bb8d-e9d665c21fa7","output":{"final":{"ignored":true}}},"lessthan":{"id":"82c3cf2a-0855-4c6d-a4c4-807b0ce1fd35","input":{"b":{"constant":false},"a":{}},"output":{"a < b":{}}}},"merges":{"merge0":{"looprepeat":{"output":{"local":true}},"lessthan":{"input":{"b":true}}},"merge1":{"loopincrement":{"output":{"local":true}},"lessthan":{"input":{"a":true}}},"merge2":{"lessthan":{"output":{"a < b":true}},"loopincrement":{"input":{"test":true}},"looprepeat":{"input":{"test":true}}}},"metadata":{"icon":"list-ordered","description":"count from `a` to `b`, not inclusive","complexity":21,"tags":["core","loop"]},"inputs":{"a":{"plug":{"0":{"unitId":"loopincrement","pinId":"init"}},"functional":true,"type":"number","metadata":{"examples":["0"]}},"b":{"plug":{"0":{"unitId":"looprepeat","pinId":"init"}},"functional":true,"type":"number","metadata":{"examples":["3"]}}},"outputs":{"i":{"plug":{"0":{"unitId":"loopincrement","pinId":"current"}},"type":"number"},"test":{"plug":{"0":{"mergeId":"merge2"}},"type":"boolean","defaultIgnored":true},"final":{"plug":{"0":{"unitId":"looprepeat","pinId":"final"}},"type":"number","defaultIgnored":true}},"id":"29e43ad7-be5e-437f-8f0f-2df996c8b89c","type":"`U`&`G`","system":true},"343f1382-4d2d-4022-b4b3-139e40ab6627":{"name":"range bounce","units":{"rangereverse":{"id":"7a09c38d-3866-46e3-a03e-112c4cf6d889"},"range":{"id":"29e43ad7-be5e-437f-8f0f-2df996c8b89c"},"plan":{"id":"36329d25-218d-48a5-a06c-1e0525da504f"}},"merges":{"ixnwjcyy":{"range":{"input":{"a":true}},"plan":{"output":{"0":true}}},"dpqjcxzt":{"plan":{"output":{"1":true}},"rangereverse":{"input":{"a":true}}},"bjpzdvv":{"range":{"input":{"b":true}},"rangereverse":{"input":{"b":true}}},"ymwlenzvu":{"range":{"output":{"i":true}},"rangereverse":{"output":{"i":true}}}},"metadata":{"icon":"exchange","description":"count from `a` to `b - 1`, then regressive count from `b - 1` to `a`","complexity":49,"tags":["core","loop"]},"inputs":{"a":{"plug":{"0":{"unitId":"plan","pinId":"a"}},"type":"number"},"b":{"plug":{"0":{"mergeId":"bjpzdvv"}},"type":"number"}},"outputs":{"i":{"plug":{"0":{"mergeId":"ymwlenzvu"}},"type":"number"}},"id":"343f1382-4d2d-4022-b4b3-139e40ab6627","type":"`U`&`G`","system":true},"d34a9900-e46d-4f23-98bf-485dde71d9a3":{"name":"range bounce towards","inputs":{"end":{"plug":{"0":{"mergeId":"3"}},"functional":true},"start":{"plug":{"0":{"mergeId":"2"}},"functional":true}},"outputs":{"current":{"plug":{"0":{"unitId":"rangetowards","pinId":"current"}}}},"units":{"switchab":{"id":"9c10309b-6ce8-4b92-a0d4-a4b6b2a17a64","input":{"a":{},"b":{}},"output":{"a":{}},"metadata":{"position":{"x":-34,"y":-25}}},"rangetowards":{"id":"06203a50-ace2-4c4e-9088-0951342c6b52","input":{"end":{},"start":{}},"output":{"final":{"ignored":true},"current":{}},"metadata":{"position":{"x":66,"y":0}}},"switchab0":{"id":"9c10309b-6ce8-4b92-a0d4-a4b6b2a17a64","input":{"a":{},"b":{}},"output":{"a":{}},"metadata":{"position":{"x":-34,"y":24}}}},"merges":{"0":{"switchab":{"output":{"a":true}},"rangetowards":{"input":{"start":true}}},"1":{"switchab0":{"output":{"a":true}},"rangetowards":{"input":{"end":true}}},"2":{"switchab0":{"input":{"b":true}},"switchab":{"input":{"a":true}}},"3":{"switchab":{"input":{"b":true}},"switchab0":{"input":{"a":true}}}},"component":{},"metadata":{"icon":"list-ordered","complexity":72,"tags":["core","loop"]},"id":"d34a9900-e46d-4f23-98bf-485dde71d9a3","system":true},"23af575c-176a-451a-b710-a031a5ecb7a2":{"name":"range grid","units":{"range":{"id":"29e43ad7-be5e-437f-8f0f-2df996c8b89c","input":{"a":{},"b":{}},"output":{"i":{},"test":{"ignored":false}}},"range1":{"id":"29e43ad7-be5e-437f-8f0f-2df996c8b89c","input":{"a":{},"b":{}},"output":{"i":{},"test":{"ignored":false}}},"looprepeat":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","input":{"init":{},"test":{}},"output":{"local":{"ignored":true},"current":{},"final":{"ignored":true}}},"looprepeat0":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","input":{"init":{},"test":{}},"output":{"local":{"ignored":true},"current":{},"final":{"ignored":true}}},"looprepeat1":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","input":{"init":{},"test":{}},"output":{"local":{"ignored":true},"current":{},"final":{"ignored":true}}}},"merges":{"fkbdryh":{"looprepeat":{"output":{"current":true}},"range1":{"input":{"b":true}}},"zmaaxfolo":{"looprepeat":{"input":{"test":true}},"range":{"output":{"test":true}},"looprepeat1":{"input":{"test":true}}},"bvnpvzh":{"looprepeat0":{"input":{"init":true}},"range":{"output":{"i":true}}},"oddozsvfm":{"range1":{"output":{"test":true}},"looprepeat0":{"input":{"test":true}}},"yvjfxhanq":{"looprepeat1":{"output":{"current":true}},"range1":{"input":{"a":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"range","pinId":"a"},"1":{"unitId":"looprepeat1","pinId":"init"}},"functional":true,"type":"number"},"b":{"plug":{"0":{"unitId":"looprepeat","pinId":"init"},"fyinwkvp":{"unitId":"range","pinId":"b"}},"functional":true,"type":"number"}},"outputs":{"i":{"plug":{"0":{"unitId":"looprepeat0","pinId":"current"}},"type":"number"},"j":{"plug":{"0":{"unitId":"range1","pinId":"i"}},"type":"number"}},"metadata":{"icon":"grid","description":"for every `i` < `a` and `j` < `b`","complexity":27,"tags":["core","loop"]},"id":"23af575c-176a-451a-b710-a031a5ecb7a2","type":"`U`&`G`","system":true},"cc816c77-3ee5-4a84-8f75-c319b53985c3":{"name":"range rec","units":{"increment":{"id":"fafeadd7-06a8-4bb0-9fa5-2149d1b5208e"},"lessthan":{"id":"82c3cf2a-0855-4c6d-a4c4-807b0ce1fd35"},"range":{"id":"cc816c77-3ee5-4a84-8f75-c319b53985c3"},"if0":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"if1":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"plan":{"id":"36329d25-218d-48a5-a06c-1e0525da504f"}},"merges":{"0":{"lessthan":{"input":{"a":true}},"if0":{"input":{"a":true}}},"1":{"lessthan":{"input":{"b":true}},"if1":{"input":{"a":true}}},"2":{"increment":{"output":{"a + 1":true}},"range":{"input":{"a":true}}},"3":{"lessthan":{"output":{"a < b":true}},"if1":{"input":{"b":true}},"if0":{"input":{"b":true}}},"4":{"range":{"output":{"i":true}},"plan":{"output":{"0":true}}},"5":{"if1":{"output":{"a if b":true}},"range":{"input":{"b":true}}},"6":{"increment":{"input":{"a":true}},"plan":{"output":{"1":true}}},"7":{"plan":{"input":{"a":true}},"if0":{"output":{"a if b":true}}}},"metadata":{"icon":"list-ordered","description":"count from `a` to `b`, not inclusive","complexity":25,"tags":["core","loop"]},"inputs":{"b":{"plug":{"0":{"mergeId":"1"}},"type":"number"},"a":{"plug":{"0":{"mergeId":"0"}},"type":"number"}},"outputs":{"i":{"plug":{"0":{"mergeId":"4"}},"type":"number"}},"id":"cc816c77-3ee5-4a84-8f75-c319b53985c3","type":"`U`&`G`","system":true},"7a09c38d-3866-46e3-a03e-112c4cf6d889":{"name":"range reverse","units":{"range":{"id":"29e43ad7-be5e-437f-8f0f-2df996c8b89c","input":{}},"subtract":{"id":"fa94b179-00e3-4ed1-814e-7938324a833f","input":{"b":{"constant":false},"a":{"constant":false}}},"decrement":{"id":"4d67d2e4-8b06-4e15-8243-99be8e4be5d3"},"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf"},"repeatn":{"id":"251ba609-a9c5-451b-8162-411c966bf919"},"subtract0":{"id":"fa94b179-00e3-4ed1-814e-7938324a833f"}},"merges":{"0":{"range":{"output":{"i":true}},"subtract":{"input":{"b":true}}},"1":{"range":{"input":{"b":true}},"add":{"input":{"b":true}},"subtract0":{"input":{"a":true}}},"2":{"range":{"input":{"a":true}},"add":{"input":{"a":true}},"subtract0":{"input":{"b":true}}},"3":{"add":{"output":{"a + b":true}},"decrement":{"input":{"a":true}}},"4":{"repeatn":{"input":{"n":true}},"subtract0":{"output":{"a - b":true}}},"5":{"repeatn":{"input":{"a":true}},"decrement":{"output":{"a - 1":true}}},"6":{"repeatn":{"output":{"a":true}},"subtract":{"input":{"a":true}}}},"metadata":{"icon":"sort-asc","description":"regressive count from `b - 1` to `a`","complexity":43,"tags":["core","loop"]},"inputs":{"b":{"plug":{"0":{"mergeId":"1"}},"functional":true,"type":"number"},"a":{"plug":{"0":{"mergeId":"2"}},"functional":true,"type":"number"}},"outputs":{"i":{"plug":{"0":{"unitId":"subtract","pinId":"a - b"}},"type":"number"}},"id":"7a09c38d-3866-46e3-a03e-112c4cf6d889","type":"`U`&`G`","system":true},"06203a50-ace2-4c4e-9088-0951342c6b52":{"name":"range towards","inputs":{"end":{"plug":{"0":{"unitId":"looprepeat","pinId":"init"}},"functional":true,"type":"number"},"start":{"plug":{"0":{"unitId":"loopadd","pinId":"init"}},"functional":true,"type":"number"}},"outputs":{"final":{"plug":{"0":{"unitId":"loopadd","pinId":"final"}},"type":"number"},"current":{"plug":{"0":{"mergeId":"2"}},"type":"number"}},"units":{"looprepeat":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","input":{"init":{"metadata":{"position":{"x":-130,"y":-35}}},"test":{}},"output":{"local":{},"current":{},"final":{"ignored":true,"metadata":{"position":{"x":-115,"y":-57}}}},"metadata":{"position":{"x":-78,"y":-21}}},"subtract":{"id":"fa94b179-00e3-4ed1-814e-7938324a833f","input":{"a":{},"b":{}},"output":{"a - b":{}},"metadata":{"position":{"x":23,"y":-59}}},"greaterthan0":{"id":"1a59348c-a25a-11eb-8afe-8bedb0732a89","input":{"a":{}},"output":{"sign(a)":{}},"metadata":{"position":{"x":121,"y":-35}}},"loopadd":{"id":"93369291-7ce2-4b4c-a414-870b1f3c9b4c","input":{"init":{"metadata":{"position":{"x":54,"y":70}}},"test":{},"plus":{}},"output":{"local":{},"final":{"ignored":false,"metadata":{"position":{"x":81,"y":45}}},"current":{}},"metadata":{"position":{"x":30,"y":26}}},"greaterthan":{"id":"bda175a9-a9d2-4282-9b50-1b008ae8a807","input":{"a":{},"b":{}},"output":{"a \u2260 b":{}},"metadata":{"position":{"x":-73,"y":34}}}},"merges":{"0":{"subtract":{"input":{"a":true}},"looprepeat":{"output":{"current":true}}},"1":{"greaterthan0":{"input":{"a":true}},"subtract":{"output":{"a - b":true}}},"2":{"loopadd":{"output":{"current":true}},"subtract":{"input":{"b":true}}},"3":{"greaterthan0":{"output":{"sign(a)":true}},"loopadd":{"input":{"plus":true}}},"4":{"greaterthan":{"input":{"b":true}},"loopadd":{"output":{"local":true}}},"5":{"greaterthan":{"input":{"a":true}},"looprepeat":{"output":{"local":true}}},"6":{"greaterthan":{"output":{"a \u2260 b":true}},"loopadd":{"input":{"test":true}},"looprepeat":{"input":{"test":true}}}},"metadata":{"icon":"list-ordered","description":"go from `a` to `b` step by step, not inclusive","complexity":25,"position":{"merge":{"0":{"x":-32,"y":-51},"1":{"x":78,"y":-62},"2":{"x":46,"y":-19},"3":{"x":85,"y":1},"4":{"x":-22,"y":44},"5":{"x":-117,"y":12},"6":{"x":-30,"y":11}}},"tags":["core","loop"]},"id":"06203a50-ace2-4c4e-9088-0951342c6b52","type":"`U`&`G`","system":true},"13cbadb7-bbe5-4c6d-a81e-fc6fe5949e30":{"name":"negate","units":{"multiply":{"id":"872be100-f4dc-4246-8eea-6e3da31137b7","input":{"b":{"constant":true,"data":"-1"}}}},"merges":{},"metadata":{"icon":"minus","description":"turn `a` into `-a`","complexity":5,"tags":["core","math"]},"inputs":{"a":{"plug":{"0":{"unitId":"multiply","pinId":"a"}},"functional":true,"type":"number"}},"outputs":{"-a":{"plug":{"0":{"unitId":"multiply","pinId":"a \xD7 b"}},"type":"number"}},"id":"13cbadb7-bbe5-4c6d-a81e-fc6fe5949e30","type":"`U`&`G`","system":true},"96c788b0-9bc1-11eb-931a-7312c12cb4c3":{"name":"random class","inputs":{"any":{"plug":{"0":{"unitId":"randomspecid","pinId":"any"}},"type":"any"}},"outputs":{"class":{"plug":{"0":{"unitId":"idtoclass","pinId":"class"}},"type":"`U`"}},"units":{"randomspecid":{"id":"95735a9e-9bc0-11eb-90ec-3bb9082e8fe9","input":{"any":{}},"output":{"id":{}},"metadata":{"position":{"x":-51,"y":0}}},"idtoclass":{"id":"b0c25199-c284-4f90-817c-60dc89b15b1c","input":{"id":{}},"output":{"class":{}},"metadata":{"position":{"x":50,"y":-1}}}},"merges":{"0":{"idtoclass":{"input":{"id":true}},"randomspecid":{"output":{"id":true}}}},"metadata":{"icon":null,"description":"","complexity":41,"tags":["core","meta"]},"id":"96c788b0-9bc1-11eb-931a-7312c12cb4c3","type":"`U`&`G`","system":true},"95735a9e-9bc0-11eb-90ec-3bb9082e8fe9":{"name":"random spec id","inputs":{"any":{"plug":{"0":{"unitId":"specids","pinId":"any"}},"type":"any"}},"outputs":{"id":{"plug":{"0":{"unitId":"randominarray","pinId":"a[i]"}},"type":"string"}},"units":{"specids":{"id":"4f8c249e-9bbf-11eb-b3ff-e3ecdde1acd1","input":{"a":{}},"output":{"a":{}},"metadata":{"position":{"x":-51,"y":0}}},"randominarray":{"id":"5b99b930-92c9-4fbe-be37-8c72a8e1c70b","input":{"a":{}},"output":{"a[i]":{}},"metadata":{"position":{"x":50,"y":-1}}}},"merges":{"0":{"randominarray":{"input":{"a":true}},"specids":{"output":{"a":true}}}},"metadata":{"icon":null,"description":"","complexity":31,"tags":["core","meta"]},"id":"95735a9e-9bc0-11eb-90ec-3bb9082e8fe9","type":"`U`&`G`","system":true},"4f8c249e-9bbf-11eb-b3ff-e3ecdde1acd1":{"name":"spec ids","inputs":{"any":{"plug":{"0":{"unitId":"specs","pinId":"any"}},"type":"any"}},"outputs":{"a":{"plug":{"0":{"unitId":"keys","pinId":"keys"}},"type":"string[]"}},"units":{"specs":{"id":"b5ea15f4-9bbd-11eb-b623-37aff4a9ce60","input":{"any":{}},"output":{"specs":{}},"metadata":{"position":{"x":-51,"y":-1}}},"keys":{"id":"45b9c329-64e9-4c4a-800b-790947c75754","input":{"obj":{}},"output":{"keys":{}},"metadata":{"position":{"x":50,"y":0}}}},"merges":{"0":{"keys":{"input":{"obj":true}},"specs":{"output":{"specs":true}}}},"id":"4f8c249e-9bbf-11eb-b3ff-e3ecdde1acd1","metadata":{"icon":null,"description":"","complexity":8,"tags":["core","meta"]},"type":"`U`&`G`","system":true},"4d280c6a-3c33-42df-b0e3-ee643fad4c85":{"name":"includes","inputs":{"a":{"plug":{"0":{"unitId":"indexof","pinId":"a"}}},"a[]":{"plug":{"0":{"unitId":"indexof","pinId":"a[]"}},"ref":true}},"outputs":{"a":{"plug":{"0":{"unitId":"greaterthan","pinId":"a > b"}}}},"units":{"indexof":{"id":"26b06e21-798c-4bc4-96e1-12a4351c083d","input":{"a[]":{},"a":{}},"output":{"i":{}},"metadata":{"position":{"x":-52,"y":-57}}},"greaterthan":{"id":"1651ce6b-4db0-4787-9edf-f770b72d253c","input":{"a":{},"b":{"constant":true,"data":"-1"}},"output":{"a > b":{}},"metadata":{"position":{"x":52,"y":-57}}},"includes":{"id":"8783e7de-6cde-11eb-bd74-574fd9c8b6aa","input":{"a[]":{},"a":{}},"output":{"found":{}},"metadata":{"position":{"x":-2,"y":113}}}},"merges":{"0":{"greaterthan":{"input":{"a":true}},"indexof":{"output":{"i":true}}}},"metadata":{"icon":"info-square","complexity":58,"tags":["core","method","array"]},"component":{"children":[]},"id":"4d280c6a-3c33-42df-b0e3-ee643fad4c85","system":true},"fb8d58cc-f1a0-11ea-b163-9321d9d8dd29":{"name":"string to decimal","units":{"stringtoint":{"id":"8cd29108-95cd-4217-9721-11f7c7c1131e","input":{"str":{},"radix":{"constant":true,"data":"10"}},"output":{"n":{}}}},"merges":{},"inputs":{"str":{"plug":{"0":{"unitId":"stringtoint","pinId":"str"}},"type":"string"}},"outputs":{"n":{"plug":{"0":{"unitId":"stringtoint","pinId":"n"}},"type":"number"}},"metadata":{"icon":"tilde","description":"convert a number into a decimal","complexity":5,"tags":["core","number"]},"id":"fb8d58cc-f1a0-11ea-b163-9321d9d8dd29","type":"`U`&`G`","system":true},"2ff102a7-b469-461f-a3b1-a61b81c1b325":{"name":"deep get","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c"},"head":{"id":"e9831075-2e62-43a4-84af-0653f7e707a9"},"proppath":{"id":"2ff102a7-b469-461f-a3b1-a61b81c1b325"},"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"ifelse":{"id":"92760dd2-ecd9-46db-851f-70950a5b6bc3"},"lengthgt":{"id":"603ebe2e-5329-446d-b422-78f3201ddd7a","input":{"b":{"constant":true,"data":"0"}}}},"merges":{"0":{"if":{"input":{"b":true}},"ifelse":{"input":{"b":true}},"lengthgt":{"output":{"true":true}}},"1":{"head":{"input":{"a":true}},"if":{"output":{"a if b":true}}},"2":{"get":{"input":{"key":true}},"head":{"output":{"head":true}}},"3":{"proppath":{"input":{"obj":true}},"get":{"output":{"value":true}}},"4":{"head":{"output":{"a":true}},"proppath":{"input":{"path":true}}},"5":{"get":{"input":{"obj":true}},"ifelse":{"output":{"if":true}}}},"metadata":{"icon":"object-get","description":"get value of `obj` at `path`","complexity":36,"tags":["core","object"]},"inputs":{"path":{"plug":{"0":{"unitId":"if","pinId":"a"},"1":{"unitId":"lengthgt","pinId":"a"}},"type":"string[]"},"obj":{"plug":{"0":{"unitId":"ifelse","pinId":"a"}},"type":"object"}},"outputs":{"result":{"plug":{"0":{"unitId":"ifelse","pinId":"else"},"1":{"unitId":"proppath","pinId":"result"}},"type":"any"}},"id":"2ff102a7-b469-461f-a3b1-a61b81c1b325","type":"`U`&`G`","system":true},"419e468e-e4d4-11ea-8efb-2b9d815b1798":{"name":"deep set","units":{"propordefault":{"id":"aeac1075-e01f-4d22-b01b-9a77cbba504b","input":{"default":{"constant":true,"data":"{}"}}},"head":{"id":"e9831075-2e62-43a4-84af-0653f7e707a9"},"deepset":{"id":"419e468e-e4d4-11ea-8efb-2b9d815b1798"},"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"lengthgt":{"id":"603ebe2e-5329-446d-b422-78f3201ddd7a","input":{"b":{"constant":true,"data":"0"}}},"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{},"key":{},"value":{}},"output":{"obj":{}}},"ifelse":{"id":"92760dd2-ecd9-46db-851f-70950a5b6bc3","input":{"a":{},"b":{}},"output":{"if":{},"else":{}}},"if0":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8","input":{"a":{},"b":{}},"output":{"a if b":{}}}},"merges":{"0":{"if":{"input":{"b":true}},"lengthgt":{"output":{"true":true}},"ifelse":{"input":{"b":true}},"if0":{"input":{"b":true}}},"1":{"head":{"input":{"a":true}},"if":{"output":{"a if b":true}}},"2":{"propordefault":{"input":{"key":true}},"head":{"output":{"head":true}},"set":{"input":{"key":true}}},"3":{"deepset":{"input":{"obj":true}},"propordefault":{"output":{"value":true}}},"4":{"head":{"output":{"a":true}},"deepset":{"input":{"path":true}}},"5":{"propordefault":{"input":{"obj":true}},"set":{"input":{"obj":true}},"if0":{"output":{"a if b":true}}},"ykrqmso":{"deepset":{"input":{"value":true}},"ifelse":{"output":{"if":true}}},"oobtsi":{"deepset":{"output":{"result":true}},"set":{"input":{"value":true}}}},"metadata":{"icon":"object-set","description":"get value of `obj` at `path`","complexity":50,"tags":["core","object"]},"inputs":{"path":{"plug":{"0":{"unitId":"if","pinId":"a"},"1":{"unitId":"lengthgt","pinId":"a"}},"functional":true,"type":"string[]"},"value":{"plug":{"0":{"unitId":"ifelse","pinId":"a"}},"type":"any","functional":true},"obj":{"plug":{"0":{"unitId":"if0","pinId":"a"}},"functional":true,"type":"object"}},"outputs":{"result":{"plug":{"0":{"unitId":"ifelse","pinId":"else"},"1":{"unitId":"set","pinId":"obj"}},"type":"any"}},"id":"419e468e-e4d4-11ea-8efb-2b9d815b1798","type":"`U`&`G`","system":true},"474d900a-fd28-11ea-b59c-670afe58a912":{"name":"delete all","units":{"loop":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","input":{"next":{},"test":{},"init":{}},"output":{"current":{},"local":{"ignored":true},"final":{"ignored":false}}},"foreach":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","input":{"a":{}},"output":{"a[i]":{},"test":{"ignored":false}}},"sxeydotg":{"id":"664b5d3c-e4cf-11ea-ab74-eb6d2f3bd6f1","input":{"obj":{},"key":{}},"output":{"obj":{}}}},"merges":{"0":{"foreach":{"output":{"test":true}},"loop":{"input":{"test":true}}},"epigpfm":{"sxeydotg":{"input":{"key":true}},"foreach":{"output":{"a[i]":true}}},"hbfwyh":{"sxeydotg":{"output":{"obj":true}},"loop":{"input":{"next":true}}},"ylvhumm":{"loop":{"output":{"current":true}},"sxeydotg":{"input":{"obj":true}}}},"inputs":{"obj":{"plug":{"0":{"unitId":"loop","pinId":"init"}},"functional":true,"type":"object"},"keys":{"plug":{"0":{"unitId":"foreach","pinId":"a"}},"functional":true,"type":"string[]"}},"outputs":{"obj":{"plug":{"0":{"unitId":"loop","pinId":"final"}},"type":"object"}},"metadata":{"icon":"brackets-curly","description":"...","complexity":37,"tags":["core","object"]},"id":"474d900a-fd28-11ea-b59c-670afe58a912","type":"`U`&`G`","system":true},"7f348adc-e4f0-11ea-b8d1-0ba0ed3f34fe":{"name":"delete path","units":{"propordefault":{"id":"aeac1075-e01f-4d22-b01b-9a77cbba504b","input":{"default":{"constant":true,"data":"{}"}}},"head":{"id":"e9831075-2e62-43a4-84af-0653f7e707a9"},"dissocpath":{"id":"7f348adc-e4f0-11ea-b8d1-0ba0ed3f34fe"},"lengthgt":{"id":"603ebe2e-5329-446d-b422-78f3201ddd7a","input":{"b":{"constant":true,"data":"1"}}},"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{},"key":{}},"output":{"obj":{}}},"viihootpu":{"id":"664b5d3c-e4cf-11ea-ab74-eb6d2f3bd6f1","input":{"obj":{},"key":{}},"output":{"obj":{}}},"ygsvhpv":{"id":"175c0cc6-1801-4b5d-9980-e780c10ea745","input":{"a":{},"b":{"constant":true,"data":"1"}},"output":{"equals":{}}},"cwcvottck":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a","input":{"a":{},"i":{"constant":true,"data":"0"}},"output":{"a[i]":{}}},"nalejg":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"fqdtbbhl":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"iihvdgbjf":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"hlqjkzg":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"njxnorns":{"id":"175c0cc6-1801-4b5d-9980-e780c10ea745","input":{"a":{},"b":{"constant":true,"data":"0"}},"output":{"equals":{}}},"dpyno":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"}},"merges":{"0":{"lengthgt":{"output":{"true":true}},"iihvdgbjf":{"input":{"b":true}},"hlqjkzg":{"input":{"b":true}}},"1":{"head":{"input":{"a":true}},"iihvdgbjf":{"output":{"a if b":true}}},"2":{"propordefault":{"input":{"key":true}},"head":{"output":{"head":true}},"set":{"input":{"key":true}}},"3":{"dissocpath":{"input":{"obj":true}},"propordefault":{"output":{"value":true}}},"mchoroggl":{"propordefault":{"input":{"obj":true}},"set":{"input":{"obj":true}},"hlqjkzg":{"output":{"a if b":true}}},"ikungyvz":{"ygsvhpv":{"output":{"equals":true}},"nalejg":{"input":{"b":true}},"fqdtbbhl":{"input":{"b":true}}},"axtvhx":{"cwcvottck":{"input":{"a":true}},"nalejg":{"output":{"a if b":true}}},"zigdwon":{"viihootpu":{"input":{"key":true}},"cwcvottck":{"output":{"a[i]":true}}},"qwlgwfuqb":{"viihootpu":{"input":{"obj":true}},"fqdtbbhl":{"output":{"a if b":true}}},"wyrvlnzoh":{"dissocpath":{"output":{"result":true}},"set":{"input":{"value":true}}},"ejbegdofk":{"dissocpath":{"input":{"path":true}},"head":{"output":{"a":true}}},"rocsslaa":{"dpyno":{"input":{"b":true}},"njxnorns":{"output":{"equals":true}}}},"metadata":{"icon":"object-get","description":"get value of `obj` at `path`","complexity":68,"tags":["core","object"]},"inputs":{"path":{"plug":{"0":{"unitId":"iihvdgbjf","pinId":"a"},"nlfaoop":{"unitId":"lengthgt","pinId":"a"},"wavfunmop":{"unitId":"ygsvhpv","pinId":"a"},"ylidxx":{"unitId":"nalejg","pinId":"a"},"ldazigncc":{"unitId":"njxnorns","pinId":"a"}},"functional":true,"type":"string[]"},"obj":{"plug":{"0":{"unitId":"hlqjkzg","pinId":"a"},"fstg":{"unitId":"fqdtbbhl","pinId":"a"},"kehglhzu":{"unitId":"dpyno","pinId":"a"}},"functional":true,"type":"string"}},"outputs":{"result":{"plug":{"1":{"unitId":"set","pinId":"obj"},"sckhdglks":{"unitId":"viihootpu","pinId":"obj"},"okosmdza":{"unitId":"dpyno","pinId":"a if b"}},"type":"any"}},"id":"7f348adc-e4f0-11ea-b8d1-0ba0ed3f34fe","type":"`U`&`G`","system":true},"dc6e6bc0-081b-11eb-baf7-b7383b70c236":{"name":"empty object","units":{"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"{}"}}}},"merges":{},"metadata":{"icon":"brackets-curly","description":"output an empty object","complexity":5,"tags":["core","object"]},"inputs":{"any":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"}},"outputs":{"{}":{"plug":{"0":{"unitId":"wait","pinId":"a"}},"type":"{}"}},"id":"dc6e6bc0-081b-11eb-baf7-b7383b70c236","type":"`U`&`G`","system":true},"47771360-640a-11ea-8393-d32f60372182":{"name":"for each key value","units":{"foreach":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","output":{"test":{"ignored":false}}},"keys":{"id":"45b9c329-64e9-4c4a-800b-790947c75754"},"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c"},"looprepeat":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","output":{"local":{"ignored":true}}}},"merges":{"0":{"foreach":{"input":{"a":true}},"keys":{"output":{"keys":true}}},"1":{"looprepeat":{"input":{"test":true}},"foreach":{"output":{"test":true}}},"2":{"keys":{"input":{"obj":true}},"looprepeat":{"input":{"init":true}}},"3":{"looprepeat":{"output":{"current":true}},"get":{"input":{"obj":true}}},"4":{"foreach":{"output":{"a[i]":true}},"get":{"input":{"key":true}}}},"inputs":{"obj":{"plug":{"0":{"mergeId":"2"}},"type":"object"}},"outputs":{"key":{"plug":{"0":{"mergeId":"4"}},"type":"string"},"value":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"any"},"test":{"plug":{"0":{"mergeId":"1"}},"defaultIgnored":true,"type":"boolean"}},"metadata":{"icon":"brackets-curly","description":"output every key value pair of `obj`","complexity":40,"tags":["core","object"]},"id":"47771360-640a-11ea-8393-d32f60372182","type":"`U`&`G`","system":true},"8c4f4d5e-2c98-4dfb-aeac-d1e6605a673e":{"name":"get if has key","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c"},"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"haskey":{"id":"ad2ae8b9-9674-4b22-bed4-4458e0030b1a"},"if0":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"}},"merges":{"0":{"if":{"output":{"a if b":true}},"get":{"input":{"obj":true}}},"1":{"if":{"input":{"b":true}},"haskey":{"output":{"has":true}},"if0":{"input":{"b":true}}},"2":{"if":{"input":{"a":true}},"haskey":{"input":{"obj":true}}},"3":{"if0":{"input":{"a":true}},"haskey":{"input":{"key":true}}},"4":{"if0":{"output":{"a if b":true}},"get":{"input":{"key":true}}}},"metadata":{"icon":"brackets-curly","description":"output get if key is present","complexity":12,"tags":["core","object"]},"inputs":{"key":{"plug":{"0":{"mergeId":"3"}},"functional":true,"type":"string"},"obj":{"plug":{"0":{"mergeId":"2"}},"functional":true,"type":"object"}},"outputs":{"value":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"any"},"has":{"plug":{"0":{"mergeId":"1"}},"type":"boolean"}},"id":"8c4f4d5e-2c98-4dfb-aeac-d1e6605a673e","type":"`U`&`G`","system":true},"aeac1075-e01f-4d22-b01b-9a77cbba504b":{"name":"get or default","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c"},"haskey":{"id":"ad2ae8b9-9674-4b22-bed4-4458e0030b1a"},"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"},"ifnot":{"id":"439c6b56-a0b6-4b76-9131-c6dc23375fda"},"if0":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8"}},"merges":{"0":{"haskey":{"output":{"has":true}},"if":{"input":{"b":true}},"if0":{"input":{"b":true}},"ifnot":{"input":{"b":true}}},"1":{"if":{"output":{"a if b":true}},"get":{"input":{"obj":true}}},"2":{"get":{"input":{"key":true}},"if0":{"output":{"a if b":true}}},"3":{"get":{"output":{"value":true}},"ifnot":{"output":{"a if not b":true}}}},"metadata":{"icon":"object-get","description":"if `key` in `obj`, get correspondent value, `default` otherwise","complexity":18,"tags":["core","object"]},"inputs":{"key":{"plug":{"0":{"unitId":"haskey","pinId":"key"},"1":{"unitId":"if0","pinId":"a"}},"functional":true,"type":"string"},"obj":{"plug":{"0":{"unitId":"if","pinId":"a"},"1":{"unitId":"haskey","pinId":"obj"}},"functional":true,"type":"object"},"default":{"plug":{"0":{"unitId":"ifnot","pinId":"a"}},"functional":true,"type":"<A>"}},"outputs":{"value":{"plug":{"0":{"mergeId":"3"}},"type":"any"}},"id":"aeac1075-e01f-4d22-b01b-9a77cbba504b","type":"`U`&`G`","system":true},"5db358ae-5975-4a4f-8fa4-ec991624508a":{"name":"has keys","units":{"reduce":{"id":"5cd76a8a-603b-49e1-bda3-09ad217eb108","output":{},"input":{"init":{"constant":true,"data":"true"}}},"haskey":{"id":"ad2ae8b9-9674-4b22-bed4-4458e0030b1a"},"and":{"id":"407640f7-f1c3-4297-a5ce-baff357a6d31"},"looprepeat":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","output":{"local":{"ignored":true}}}},"merges":{"0":{"and":{"input":{"b":true}},"haskey":{"output":{"has":true}}},"1":{"reduce":{"output":{"local":true}},"and":{"input":{"a":true}}},"2":{"reduce":{"output":{"a[i]":true}},"haskey":{"input":{"key":true}}},"3":{"reduce":{"output":{"test":true}},"looprepeat":{"input":{"test":true}}},"4":{"haskey":{"input":{"obj":true}},"looprepeat":{"output":{"current":true}}},"5":{"reduce":{"input":{"next":true}},"and":{"output":{"a and b":true}}}},"inputs":{"keys":{"plug":{"0":{"unitId":"reduce","pinId":"a"}},"type":"string[]"},"obj":{"plug":{"0":{"unitId":"looprepeat","pinId":"init"}},"type":"object"}},"outputs":{"has":{"plug":{"0":{"unitId":"reduce","pinId":"result"}},"type":"boolean"}},"metadata":{"icon":"brackets-curly","description":"does `obj` have all `keys`?","complexity":43,"tags":["core","object"]},"id":"5db358ae-5975-4a4f-8fa4-ec991624508a","type":"`U`&`G`","system":true},"8ea084fc-cffb-4b4a-9314-122e3c72554e":{"name":"key count","units":{"keys":{"id":"45b9c329-64e9-4c4a-800b-790947c75754","input":{"obj":{}},"output":{"keys":{}}},"length":{"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8","input":{"a":{}},"output":{"length":{}}}},"merges":{"0":{"length":{"input":{"a":true}},"keys":{"output":{"keys":true}}}},"inputs":{"obj":{"plug":{"0":{"unitId":"keys","pinId":"obj"}},"type":"object"}},"outputs":{"count":{"plug":{"0":{"unitId":"length","pinId":"length"}},"type":"number"}},"metadata":{"icon":"brackets-curly","description":"`obj` total key count","complexity":8,"tags":["core","object"]},"id":"8ea084fc-cffb-4b4a-9314-122e3c72554e","type":"`U`&`G`","system":true},"23b844e3-1cef-4ff7-9e2a-bb3ffb613055":{"name":"merge 3","units":{"merge":{"id":"60bdba6d-c670-430f-be72-6f39cf4e8453"},"merge0":{"id":"60bdba6d-c670-430f-be72-6f39cf4e8453"}},"merges":{"0":{"merge0":{"output":{"ab":true}},"merge":{"input":{"b":true}}}},"metadata":{"icon":"brackets-curly","description":"merge objects `a`, `b` and `c` into `abc`","complexity":6,"tags":["core","object"]},"inputs":{"a":{"plug":{"0":{"unitId":"merge","pinId":"a"}},"type":"object"},"b":{"plug":{"0":{"unitId":"merge0","pinId":"a"}},"type":"object"},"c":{"plug":{"0":{"unitId":"merge0","pinId":"b"}},"type":"object"}},"outputs":{"abc":{"plug":{"0":{"unitId":"merge","pinId":"ab"}},"type":"object"}},"id":"23b844e3-1cef-4ff7-9e2a-bb3ffb613055","type":"`U`&`G`","system":true},"1f1b065a-937b-4630-be80-54edf795eb19":{"name":"merge 4","units":{"merge3":{"id":"23b844e3-1cef-4ff7-9e2a-bb3ffb613055"},"merge":{"id":"60bdba6d-c670-430f-be72-6f39cf4e8453"}},"merges":{"0":{"merge3":{"input":{"c":true}},"merge":{"output":{"ab":true}}}},"metadata":{"icon":"brackets-curly","description":"merge objects `a`, `b`, `c` and `d` into `abcd`","complexity":9,"tags":["core","object"]},"inputs":{"d":{"plug":{"0":{"unitId":"merge","pinId":"b"}},"functional":true,"type":"object"},"c":{"plug":{"0":{"unitId":"merge","pinId":"a"}},"functional":true,"type":"object"},"a":{"plug":{"0":{"unitId":"merge3","pinId":"a"}},"functional":true,"type":"object"},"b":{"plug":{"0":{"unitId":"merge3","pinId":"b"}},"functional":true,"type":"object"}},"outputs":{"abcd":{"plug":{"0":{"unitId":"merge3","pinId":"abc"}},"type":"object"}},"id":"1f1b065a-937b-4630-be80-54edf795eb19","type":"`U`&`G`","system":true},"304e98ac-bda1-11ea-b416-9746f024148c":{"name":"merge default","inputs":{"a":{"plug":{"0":{"unitId":"merge","pinId":"b"}},"type":"object","metadata":{"position":{"0":{"x":-125,"y":-7}}}},"default":{"plug":{"0":{"mergeId":"0"}},"type":"object","metadata":{"position":{"0":{"x":0,"y":37}}}}},"outputs":{"a":{"plug":{"0":{"unitId":"default","pinId":"a"}},"type":"object","metadata":{"position":{"0":{"x":124,"y":-7}}}}},"units":{"default":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89","input":{"a":{},"d":{}},"output":{"a":{"metadata":{"position":{"x":96,"y":-5}}}},"metadata":{"position":{"x":47,"y":-5}}},"merge":{"id":"60bdba6d-c670-430f-be72-6f39cf4e8453","input":{"a":{},"b":{"metadata":{"position":{"x":-97,"y":-5}}}},"output":{"ab":{}},"metadata":{"position":{"x":-48,"y":-5}}}},"merges":{"0":{"default":{"input":{"d":true}},"merge":{"input":{"a":true}}},"1":{"merge":{"output":{"ab":true}},"default":{"input":{"a":true}}}},"metadata":{"icon":"brackets-curly","description":"merge `a` and `default` if `a` is present, `default` otherwise","complexity":8,"tags":["core","object"],"position":{"merge":{"0":{"x":0,"y":8},"1":{"x":-1,"y":-18}}}},"id":"304e98ac-bda1-11ea-b416-9746f024148c","type":"`U`&`G`","system":true},"9daf6128-fd26-11ea-8f82-7374faa69acf":{"name":"partition","units":{"loop":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","input":{"next":{},"test":{},"init":{}},"output":{"current":{},"local":{"ignored":true},"final":{"ignored":false}}},"foreach":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","input":{"a":{}},"output":{"a[i]":{},"test":{"ignored":false}}},"looprepeat":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","input":{"init":{},"test":{}},"output":{"local":{"ignored":true},"current":{}}},"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"obj":{},"key":{}},"output":{"value":{}}},"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{},"key":{},"value":{}},"output":{"obj":{}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"{}"},"b":{}},"output":{"a":{}}}},"merges":{"0":{"foreach":{"output":{"test":true}},"loop":{"input":{"test":true}},"looprepeat":{"input":{"test":true}}},"1":{"get":{"input":{"obj":true}},"looprepeat":{"output":{"current":true}}},"2":{"get":{"input":{"key":true}},"foreach":{"output":{"a[i]":true}},"set":{"input":{"key":true}}},"3":{"set":{"output":{"obj":true}},"loop":{"input":{"next":true}}},"4":{"set":{"input":{"obj":true}},"loop":{"output":{"current":true}}},"5":{"get":{"output":{"value":true}},"set":{"input":{"value":true}}},"6":{"wait":{"input":{"b":true}},"looprepeat":{"input":{"init":true}}},"7":{"wait":{"output":{"a":true}},"loop":{"input":{"init":true}}}},"inputs":{"obj":{"plug":{"0":{"mergeId":"6"}},"functional":true,"type":"any"},"keys":{"plug":{"0":{"unitId":"foreach","pinId":"a"}},"functional":true,"type":"string[]"}},"outputs":{"obj":{"plug":{"0":{"unitId":"loop","pinId":"final"}},"type":"object"}},"metadata":{"icon":"brackets-curly","description":"...","complexity":44,"tags":["core","object"]},"id":"9daf6128-fd26-11ea-8f82-7374faa69acf","type":"`U`&`G`","system":true},"946701f6-7dd4-11ea-a1aa-67938c0c6214":{"name":"set if","units":{"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614"},"pick":{"id":"396497e4-f8e7-4573-95c9-a4f186a5cd05"}},"merges":{"0":{"set":{"output":{"obj":true}},"pick":{"input":{"a":true}}},"1":{"set":{"input":{"obj":true}},"pick":{"input":{"b":true}}}},"inputs":{"test":{"plug":{"0":{"unitId":"pick","pinId":"c"}},"functional":true,"type":"boolean"},"obj":{"plug":{"0":{"mergeId":"1"}},"functional":true,"type":"object"},"key":{"plug":{"0":{"unitId":"set","pinId":"key"}},"functional":true,"type":"string"},"value":{"plug":{"0":{"unitId":"set","pinId":"value"}},"functional":true,"type":"any"}},"outputs":{"obj":{"plug":{"0":{"unitId":"pick","pinId":"a"}},"type":"object"}},"metadata":{"icon":"brackets-curly","description":"set value at `key` to `value` if `test` is true","complexity":16,"tags":["platform","core"]},"id":"946701f6-7dd4-11ea-a1aa-67938c0c6214","type":"`U`&`G`","system":true},"c0b85780-7e99-11ea-9a99-879f3f411ebd":{"name":"set default","units":{"setif":{"id":"946701f6-7dd4-11ea-a1aa-67938c0c6214"},"default":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89"},"default0":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89"}},"merges":{"0":{"setif":{"input":{"test":true}},"default":{"output":{"a":true}}},"1":{"setif":{"input":{"value":true}},"default0":{"output":{"a":true}}}},"inputs":{"testdefault":{"plug":{"0":{"unitId":"default","pinId":"d"}},"type":"boolean"},"default":{"plug":{"0":{"unitId":"default0","pinId":"d"}},"type":"<A>"},"test":{"plug":{"0":{"unitId":"default","pinId":"a"}},"type":"boolean"},"value":{"plug":{"0":{"unitId":"default0","pinId":"a"}},"type":"<A>"},"key":{"plug":{"0":{"unitId":"setif","pinId":"key"}},"type":"string"},"obj":{"plug":{"0":{"unitId":"setif","pinId":"obj"}},"type":"object"}},"outputs":{"obj":{"plug":{"0":{"unitId":"setif","pinId":"obj"}},"type":"object"}},"metadata":{"icon":"brackets-curly","description":"set value at `key` to `value` if `test` is defined and true or to `default` otherwise","complexity":22,"tags":["platform","core"]},"id":"c0b85780-7e99-11ea-9a99-879f3f411ebd","type":"`U`&`G`","system":true},"5480c89e-31ef-4fdb-b232-60f25b3e36f3":{"name":"tag","units":{"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{"constant":true,"data":"{}"}}}},"merges":{},"metadata":{"icon":"tag","description":"create a single entry object with key `k` and value `v`","complexity":5,"tags":["core","object"]},"inputs":{"k":{"plug":{"0":{"unitId":"set","pinId":"key"}},"type":"string"},"v":{"plug":{"0":{"unitId":"set","pinId":"value"}},"type":"any"}},"outputs":{"kv":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"object"}},"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","type":"`U`&`G`","system":true},"9ef9ff5b-6a1c-444b-8fc0-bfebbec6f4fd":{"name":"clamp","units":{"max":{"id":"e857c770-5a98-4f8d-a0e1-b6cb126071ed"},"min":{"id":"4e63c320-f5a5-4f65-982e-632b5adafa29"}},"merges":{"0":{"min":{"output":{"min":true}},"max":{"input":{"a":true}}}},"metadata":{"icon":"tilde","description":"restricts a number to be within a range","complexity":8,"tags":["core","relation"]},"inputs":{"max":{"plug":{"0":{"unitId":"min","pinId":"b"}},"type":"number"},"min":{"plug":{"0":{"unitId":"max","pinId":"b"}},"type":"number"},"a":{"plug":{"0":{"unitId":"min","pinId":"a"}},"type":"number"}},"outputs":{"a":{"plug":{"0":{"unitId":"max","pinId":"max"}},"type":"number"}},"id":"9ef9ff5b-6a1c-444b-8fc0-bfebbec6f4fd","type":"`U`&`G`","system":true},"9df84140-dd90-48b3-a6a7-0651c8b5bfd7":{"name":"value equals","units":{"equals":{"id":"85204bf6-6692-4686-a785-23127c0594b5","input":{"b":{"constant":false}}},"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"key":{"constant":false}}}},"merges":{"0":{"get":{"output":{"value":true}},"equals":{"input":{"a":true}}}},"metadata":{"icon":"tilde","description":"check whether an object `o` has key-value `k` `v`","complexity":8,"tags":["core","relation"]},"inputs":{"value":{"plug":{"0":{"unitId":"equals","pinId":"b"}},"type":"<A>"},"key":{"plug":{"0":{"unitId":"get","pinId":"key"}},"type":"string"},"obj":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"object"}},"outputs":{"equal":{"plug":{"0":{"unitId":"equals","pinId":"a = b"}},"type":"boolean"}},"id":"9df84140-dd90-48b3-a6a7-0651c8b5bfd7","type":"`U`&`G`","system":true},"1de47760-fc93-4ee0-8cdb-f5338a01d4cd":{"name":"value equals or default","units":{"propequal":{"id":"9df84140-dd90-48b3-a6a7-0651c8b5bfd7"},"if3":{"id":"13a16a8a-5dc6-11ea-a3d4-9bda49772976"},"haskey":{"id":"ad2ae8b9-9674-4b22-bed4-4458e0030b1a"},"ifnot":{"id":"439c6b56-a0b6-4b76-9131-c6dc23375fda"}},"merges":{"0":{"propequal":{"output":{"equal":true}},"ifnot":{"output":{"a if not b":true}}},"1":{"if3":{"input":{"test":true}},"haskey":{"output":{"has":true}},"ifnot":{"input":{"b":true}}},"2":{"propequal":{"input":{"value":true}},"if3":{"output":{"c":true}}},"4":{"if3":{"output":{"b":true}},"propequal":{"input":{"key":true}}},"5":{"propequal":{"input":{"obj":true}},"if3":{"output":{"a":true}}},"6":{"if3":{"input":{"a":true}},"haskey":{"input":{"obj":true}}},"7":{"if3":{"input":{"b":true}},"haskey":{"input":{"key":true}}}},"metadata":{"icon":"tilde","description":"check whether an object `o` has key-value `k` `v` or `default` if key is not present","complexity":26,"tags":["core","relation"]},"inputs":{"value":{"plug":{"0":{"unitId":"if3","pinId":"c"}},"functional":true,"type":"<A>"},"key":{"plug":{"0":{"mergeId":"7"}},"type":"string"},"obj":{"plug":{"0":{"mergeId":"6"}},"type":"object"},"d":{"plug":{"0":{"unitId":"ifnot","pinId":"a"}},"functional":true,"type":"boolean"}},"outputs":{"equal":{"plug":{"0":{"mergeId":"0"}},"type":"boolean"}},"id":"1de47760-fc93-4ee0-8cdb-f5338a01d4cd","type":"`U`&`G`","system":true},"bb28c9d9-0afd-4ef2-8c5b-41815ea65bf1":{"name":"concat 3","units":{"concat":{"id":"779e538c-b0b9-477e-a986-30ee3abe6fe6"},"concat0":{"id":"779e538c-b0b9-477e-a986-30ee3abe6fe6"}},"merges":{"0":{"concat":{"input":{"b":true}},"concat0":{"output":{"ab":true}}}},"metadata":{"icon":"plus","description":"concat `a`, `b` and `c`","complexity":6,"tags":["core","string"]},"inputs":{"a":{"plug":{"0":{"unitId":"concat","pinId":"a"}},"type":"string"},"b":{"plug":{"0":{"unitId":"concat0","pinId":"a"}},"type":"string"},"c":{"plug":{"0":{"unitId":"concat0","pinId":"b"}},"type":"string"}},"outputs":{"abc":{"plug":{"0":{"unitId":"concat","pinId":"ab"}},"type":"string"}},"id":"bb28c9d9-0afd-4ef2-8c5b-41815ea65bf1","type":"`U`&`G`","system":true},"306fe446-a495-4ae3-a835-34f1468e92fe":{"name":"cut","units":{"slice":{"id":"c8a4cd44-a554-4901-8a33-a8adbff63d03"},"slice0":{"id":"c8a4cd44-a554-4901-8a33-a8adbff63d03","input":{"begin":{"constant":true,"data":"0"}}},"length":{"id":"1b8ce255-0bc7-4656-bafa-3dc86af44126"}},"merges":{"0":{"slice":{"input":{"a":true}},"slice0":{"input":{"a":true}},"length":{"input":{"a":true}}},"1":{"slice":{"input":{"begin":true}},"slice0":{"input":{"end":true}}},"2":{"slice":{"input":{"end":true}},"length":{"output":{"length":true}}}},"metadata":{"icon":"scissors","description":"no description","complexity":9,"tags":["core","string"]},"inputs":{"a":{"plug":{"0":{"mergeId":"0"}},"type":"string"},"at":{"plug":{"0":{"mergeId":"1"}},"type":"number"}},"outputs":{"second":{"plug":{"0":{"unitId":"slice","pinId":"a"}},"type":"string"},"first":{"plug":{"0":{"unitId":"slice0","pinId":"a"}},"type":"string"}},"id":"306fe446-a495-4ae3-a835-34f1468e92fe","type":"`U`&`G`","system":true},"7c8e8a47-2225-4716-986e-1cb2af3ed3b3":{"name":"empty string","units":{"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"\\"\\""},"b":{}},"output":{"a":{}},"metadata":{"position":{"x":0,"y":0}}}},"merges":{},"metadata":{"icon":"string","description":"output an empty object","complexity":5,"tags":["core","string"]},"inputs":{"any":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"}},"outputs":{"\\"\\"":{"plug":{"0":{"unitId":"wait","pinId":"a"}},"type":"\\"\\""}},"id":"7c8e8a47-2225-4716-986e-1cb2af3ed3b3","type":"`U`&`G`","system":true},"5b497ef5-eff7-45e4-854b-d02da5b89e90":{"name":"is empty","units":{"length":{"id":"1b8ce255-0bc7-4656-bafa-3dc86af44126"},"equals":{"id":"85204bf6-6692-4686-a785-23127c0594b5","input":{"b":{"constant":true,"data":"0"}}}},"merges":{"0":{"length":{"output":{"length":true}},"equals":{"input":{"a":true}}}},"metadata":{"icon":"question","description":"no description","complexity":8,"tags":["core","string"]},"inputs":{"a":{"plug":{"0":{"unitId":"length","pinId":"a"}},"type":"string"}},"outputs":{"empty":{"plug":{"0":{"unitId":"equals","pinId":"a = b"}},"type":"boolean"}},"id":"5b497ef5-eff7-45e4-854b-d02da5b89e90","type":"`U`&`G`","system":true},"5f5b12b5-c3b9-460e-a84b-3db4f5d9c483":{"name":"is not empty","units":{"isempty":{"id":"5b497ef5-eff7-45e4-854b-d02da5b89e90"},"not":{"id":"7d02d638-a311-4ea8-a0c0-d45baf739e0d"}},"merges":{"0":{"isempty":{"output":{"empty":true}},"not":{"input":{"a":true}}}},"metadata":{"icon":"question","description":"no description","complexity":13,"tags":["core","string"]},"inputs":{"a":{"plug":{"0":{"unitId":"isempty","pinId":"a"}},"type":"string"}},"outputs":{"!empty":{"plug":{"0":{"unitId":"not","pinId":"!a"}},"type":"boolean"}},"id":"5f5b12b5-c3b9-460e-a84b-3db4f5d9c483","type":"`U`&`G`","system":true},"9cab124a-b40d-4614-b032-20b0209e90e3":{"name":"n string builder from","units":{"loop":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","input":{},"output":{"final":{"ignored":false}}},"concat":{"id":"779e538c-b0b9-477e-a986-30ee3abe6fe6"},"length":{"id":"1b8ce255-0bc7-4656-bafa-3dc86af44126"},"lessthan":{"id":"82c3cf2a-0855-4c6d-a4c4-807b0ce1fd35"},"looprepeat":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","output":{"local":{"ignored":false},"current":{"ignored":true}}}},"merges":{"0":{"loop":{"output":{"current":true}},"concat":{"input":{"a":true}}},"1":{"loop":{"output":{"local":true}},"length":{"input":{"a":true}}},"2":{"loop":{"input":{"test":true}},"lessthan":{"output":{"a < b":true}},"looprepeat":{"input":{"test":true}}},"3":{"loop":{"input":{"next":true}},"concat":{"output":{"ab":true}}},"4":{"lessthan":{"input":{"a":true}},"length":{"output":{"length":true}}},"5":{"lessthan":{"input":{"b":true}},"looprepeat":{"output":{"local":true}}}},"metadata":{"icon":"string","description":"build a list of size n","complexity":20,"tags":["core","string"]},"inputs":{"from":{"plug":{"0":{"unitId":"loop","pinId":"init"}},"functional":true,"type":"string"},"a":{"plug":{"0":{"unitId":"concat","pinId":"b"}},"type":"string"},"n":{"plug":{"0":{"unitId":"looprepeat","pinId":"init"}},"functional":true,"type":"number"}},"outputs":{"str":{"plug":{"0":{"unitId":"loop","pinId":"final"}},"type":"string"}},"id":"9cab124a-b40d-4614-b032-20b0209e90e3","type":"`U`&`G`","system":true},"a6ab9464-303a-48a4-8b5f-0cd515ab7b8f":{"name":"number to decimal","units":{"numbertostring":{"id":"f712793d-8ee9-4805-9d4a-8c210cae667a","input":{"n":{},"radix":{"constant":true,"data":"10"}},"output":{"str":{}}}},"merges":{},"inputs":{"n":{"plug":{"0":{"unitId":"numbertostring","pinId":"n"}},"type":"number"}},"outputs":{"str":{"plug":{"0":{"unitId":"numbertostring","pinId":"str"}},"type":"string"}},"metadata":{"icon":"tilde","description":"convert a number to its decimal string","complexity":5,"tags":["core","string"]},"id":"a6ab9464-303a-48a4-8b5f-0cd515ab7b8f","type":"`U`&`G`","system":true},"1a7665a2-2af0-11eb-9fdb-4bdf5feec91c":{"name":"number to hex","units":{"numbertostring":{"id":"f712793d-8ee9-4805-9d4a-8c210cae667a","input":{"n":{},"radix":{"constant":true,"data":"16"}},"output":{"str":{}}}},"merges":{},"inputs":{"n":{"plug":{"0":{"unitId":"numbertostring","pinId":"n"}},"type":"number"}},"outputs":{"hex":{"plug":{"0":{"unitId":"numbertostring","pinId":"str"}},"type":"string"}},"metadata":{"icon":"tilde","description":"convert a number to its hexadecimal string","complexity":5,"tags":["core","string"]},"id":"1a7665a2-2af0-11eb-9fdb-4bdf5feec91c","type":"`U`&`G`","system":true},"2006f85c-a05c-4c42-9270-591880969578":{"name":"remove whitespace","units":{"replace":{"id":"af5469c4-a09e-4b22-8133-a21e721e7639","input":{"regex":{"constant":true,"data":"\' \'"},"str":{"constant":true,"data":"\'\'"},"flags":{"constant":true,"data":"\'\'"}}}},"merges":{},"metadata":{"icon":"question","description":"no description","complexity":5,"tags":["core","string"]},"inputs":{"str":{"plug":{"0":{"unitId":"replace","pinId":"str"}},"type":"string"}},"outputs":{"str":{"plug":{"0":{"unitId":"replace","pinId":"str"}},"type":"string"}},"id":"2006f85c-a05c-4c42-9270-591880969578","type":"`U`&`G`","system":true},"5c9f4a0a-e675-48db-b6c0-5ac6914cdae0":{"name":"tail","units":{"gfcxzqyjq":{"id":"3e20a18c-60a3-40cd-bbee-f2f9e289b14d","output":{"head":{"ignored":true}}}},"merges":{},"metadata":{"icon":"axe","description":"no description","complexity":5,"tags":["core","string"]},"inputs":{"a":{"plug":{"0":{"unitId":"gfcxzqyjq","pinId":"a"}},"type":"string"}},"outputs":{"tail":{"plug":{"0":{"unitId":"gfcxzqyjq","pinId":"tail"}},"type":"string"}},"id":"5c9f4a0a-e675-48db-b6c0-5ac6914cdae0","type":"`U`&`G`","system":true},"e55c58b3-8653-4481-b5c9-2a75fce6365a":{"name":"debounce","units":{"delay":{"id":"586fb5b8-4129-4ca1-b0c4-1009485bed95"},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc"},"memory":{"id":"49e11645-c25d-4bf7-923d-56817f67b686"}},"merges":{"0":{"wait":{"input":{"b":true}},"memory":{"output":{"a":true}},"delay":{"input":{"a":true}}},"1":{"delay":{"input":{"ms":true}},"wait":{"output":{"a":true}}}},"metadata":{"icon":"alarm-clock","description":"no description","complexity":14,"tags":["core","time"]},"inputs":{"ms":{"plug":{"0":{"unitId":"wait","pinId":"a"}},"type":"number"},"a":{"plug":{"0":{"unitId":"memory","pinId":"a"}},"type":"<A>"}},"outputs":{"a":{"plug":{"0":{"unitId":"delay","pinId":"a"}},"type":"<A>"}},"id":"e55c58b3-8653-4481-b5c9-2a75fce6365a","type":"`U`&`G`","system":true},"586fb5b8-4129-4ca1-b0c4-1009485bed95":{"name":"delay","units":{"timer":{"id":"95076599-0f2f-46b6-a9e0-b4cbfdb8dcc9"},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc"}},"merges":{"0":{"timer":{"output":{"ms":true}},"wait":{"input":{"b":true}}}},"inputs":{"ms":{"plug":{"0":{"unitId":"timer","pinId":"ms"}},"metadata":{"examples":["500","1000"]},"functional":true,"type":"number"},"a":{"plug":{"0":{"unitId":"wait","pinId":"a"}},"functional":true,"type":"<A>"}},"outputs":{"a":{"plug":{"0":{"unitId":"wait","pinId":"a"}},"type":"<A>"}},"metadata":{"icon":"alarm-clock","description":"...","complexity":8,"tags":["core","time"]},"id":"586fb5b8-4129-4ca1-b0c4-1009485bed95","type":"`U`&`G`","system":true},"8cd6c706-d1d4-11ea-92e1-47577abb9ccf":{"name":"delay push","units":{"delay":{"id":"586fb5b8-4129-4ca1-b0c4-1009485bed95","input":{"ms":{"constant":false},"a":{"constant":false}},"output":{"a":{}}},"push":{"id":"49e11645-c25d-4bf7-923d-56817f67b686","input":{"a":{}},"output":{"a":{}}}},"merges":{"0":{"push":{"input":{"a":true}},"delay":{"output":{"a":true}}}},"inputs":{"ms":{"plug":{"0":{"unitId":"delay","pinId":"ms"}},"type":"number","metadata":{"examples":["1000","100"]}},"a":{"plug":{"0":{"unitId":"delay","pinId":"a"}},"type":"<A>"}},"outputs":{"a":{"plug":{"0":{"unitId":"push","pinId":"a"}},"type":"<A>"}},"metadata":{"icon":"alarm-clock","description":"delay + push","complexity":13,"tags":["core","time"]},"id":"8cd6c706-d1d4-11ea-92e1-47577abb9ccf","type":"`U`&`G`","system":true},"bf8dbe66-5dc6-11ea-8283-971f327da584":{"name":"interval","units":{"timer":{"id":"95076599-0f2f-46b6-a9e0-b4cbfdb8dcc9","input":{"ms":{"constant":true}}}},"merges":{},"metadata":{"icon":"timer","description":"output `ms` every once `ms` milliseconds","complexity":5,"tags":["core","time"]},"inputs":{"ms":{"plug":{"0":{"unitId":"timer","pinId":"ms"}},"functional":true,"type":"number"}},"outputs":{"ms":{"plug":{"0":{"unitId":"timer","pinId":"ms"}},"type":"number"}},"id":"bf8dbe66-5dc6-11ea-8283-971f327da584","type":"`U`&`G`","system":true},"66037c2f-d194-478b-866b-b2efb3027de1":{"name":"push delay","units":{"delay":{"id":"586fb5b8-4129-4ca1-b0c4-1009485bed95","input":{"ms":{},"a":{}},"output":{"a":{}}},"memory":{"id":"49e11645-c25d-4bf7-923d-56817f67b686","input":{"a":{}},"output":{"a":{}}}},"merges":{"0":{"memory":{"output":{"a":true}},"delay":{"input":{"a":true}}}},"inputs":{"ms":{"plug":{"0":{"unitId":"delay","pinId":"ms"}},"type":"number"},"a":{"plug":{"0":{"unitId":"memory","pinId":"a"}},"type":"<A>"}},"outputs":{"a":{"plug":{"0":{"unitId":"delay","pinId":"a"}},"type":"<A>"}},"metadata":{"icon":"alarm-clock","description":"","complexity":13,"tags":["core","time"]},"id":"66037c2f-d194-478b-866b-b2efb3027de1","type":"`U`&`G`","system":true},"2c3c4a2c-7300-4050-a017-ba25e42497b5":{"name":"throttle","units":{"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc"},"memory":{"id":"49e11645-c25d-4bf7-923d-56817f67b686"},"memory0":{"id":"49e11645-c25d-4bf7-923d-56817f67b686"},"interval":{"id":"42a8023a-0581-4e92-968a-b31584d0ed75","input":{"done":{"ignored":true}}}},"merges":{"0":{"wait":{"input":{"b":true}},"interval":{"output":{"ms":true}}},"1":{"memory":{"output":{"a":true}},"wait":{"input":{"a":true}}},"2":{"memory0":{"input":{"a":true}},"wait":{"output":{"a":true}}}},"metadata":{"icon":"alarm-clock","description":"no description","complexity":14,"tags":["core","time"]},"inputs":{"a":{"plug":{"0":{"unitId":"memory","pinId":"a"}},"type":"<A>"},"ms":{"plug":{"0":{"unitId":"interval","pinId":"ms"}},"type":"number"}},"outputs":{"a":{"plug":{"0":{"unitId":"memory0","pinId":"a"}},"type":"<A>"}},"id":"2c3c4a2c-7300-4050-a017-ba25e42497b5","type":"`U`&`G`","system":true},"568638fd-0338-4ad3-a76f-8581c7b3aa44":{"type":"`U`&`G`","name":"merge input","units":{"foreachkeyvalue":{"id":"47771360-640a-11ea-8393-d32f60372182","input":{"obj":{}},"output":{"key":{},"value":{},"test":{"ignored":true}},"metadata":{"position":{"x":-50,"y":-1}}},"setinput":{"id":"43b43afd-9e7d-44ba-aef7-6e9db4ed8744","input":{"unit":{},"name":{},"data":{}},"output":{"unit":{}},"metadata":{"position":{"x":49,"y":0}}}},"merges":{"0":{"foreachkeyvalue":{"output":{"value":true}},"setinput":{"input":{"data":true}}},"1":{"foreachkeyvalue":{"output":{"key":true}},"setinput":{"input":{"name":true}}}},"inputs":{"obj":{"plug":{"0":{"unitId":"foreachkeyvalue","pinId":"obj"}},"ref":false},"unit":{"plug":{"0":{"unitId":"setinput","pinId":"unit"}},"ref":false}},"outputs":{"unit":{"plug":{"0":{"unitId":"setinput","pinId":"unit"}},"ref":false}},"metadata":{"icon":"question","description":"merge `unit` `input` to `obj`","tags":["core","unit"]},"id":"568638fd-0338-4ad3-a76f-8581c7b3aa44","system":true},"4e54703e-08bc-4537-ba5d-5e697a02be1f":{"name":"merge ab","units":{"deepmerge":{"id":"2af12780-698c-40ca-baa9-5f3260377e0f"},"tag0":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'b\'"}}},"tag1":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'a\'"}}}},"merges":{"mpiooer":{"deepmerge":{"input":{"b":true}},"tag0":{"output":{"kv":true}}},"wysaetky":{"deepmerge":{"input":{"a":true}},"tag1":{"output":{"kv":true}}}},"metadata":{"icon":null,"description":"no description","complexity":11,"tags":["core","util"]},"inputs":{"a":{"plug":{"0":{"unitId":"tag1","pinId":"v"}},"type":"any"},"b":{"plug":{"0":{"unitId":"tag0","pinId":"v"}},"type":"any"}},"outputs":{"ab":{"plug":{"0":{"unitId":"deepmerge","pinId":"ab"}},"type":"object"}},"id":"4e54703e-08bc-4537-ba5d-5e697a02be1f","type":"`U`&`G`","system":true},"40555189-33ef-48b6-af8a-5ab4805b9a1f":{"name":"split ab","units":{"puuzwlxil":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"key":{"constant":true,"data":"\'a\'"}}},"vomxk":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"key":{"constant":true,"data":"\'b\'"}}}},"merges":{"wygllzbvi":{"vomxk":{"input":{"obj":true}},"puuzwlxil":{"input":{"obj":true}}}},"metadata":{"icon":null,"description":"no description","complexity":6,"tags":["core","util"]},"inputs":{"ab":{"plug":{"0":{"mergeId":"wygllzbvi"}},"type":"object"}},"outputs":{"a":{"plug":{"0":{"unitId":"puuzwlxil","pinId":"value"}},"type":"any"},"b":{"plug":{"0":{"unitId":"vomxk","pinId":"value"}},"type":"any"}},"id":"40555189-33ef-48b6-af8a-5ab4805b9a1f","type":"`U`&`G`","system":true},"b4d20f6f-32dc-4d04-97d6-69518976bdea":{"name":"false","units":{"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"false"}}}},"merges":{},"metadata":{"icon":"x-circle","description":"no description","complexity":5,"tags":["core","value"]},"inputs":{"any":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"}},"outputs":{"false":{"plug":{"0":{"unitId":"wait","pinId":"a"}},"type":"boolean"}},"id":"b4d20f6f-32dc-4d04-97d6-69518976bdea","type":"`U`&`G`","system":true},"984c4a44-86c7-464c-ad48-4759598c3be3":{"name":"true","units":{"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"true"}}}},"merges":{},"metadata":{"icon":"check-circle","description":"no description","complexity":5,"tags":["core","value"]},"inputs":{"any":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"}},"outputs":{"true":{"plug":{"0":{"unitId":"wait","pinId":"a"}},"type":"boolean"}},"id":"984c4a44-86c7-464c-ad48-4759598c3be3","type":"`U`&`G`","system":true},"6fe452f2-2ec1-4ee2-887d-751c3697e6bf":{"name":"add","inputs":{"a":{"type":"number"},"b":{"type":"number"}},"outputs":{"a + b":{"type":"number"}},"metadata":{"icon":"plus","description":"add `a` and `b`","complexity":3,"tags":["f","arithmetic"]},"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf","base":true,"type":"`U`","system":true},"158d85eb-28b8-4355-b637-28a7ec751233":{"name":"divide","inputs":{"a":{"type":"number"},"b":{"type":"number"}},"outputs":{"a \xF7 b":{"type":"number"}},"metadata":{"icon":"divide","description":"division arithmetic operator","complexity":3,"tags":["f","arithmetic"]},"id":"158d85eb-28b8-4355-b637-28a7ec751233","base":true,"type":"`U`","system":true},"872be100-f4dc-4246-8eea-6e3da31137b7":{"name":"multiply","inputs":{"a":{"type":"number"},"b":{"type":"number"}},"outputs":{"a \xD7 b":{"type":"number"}},"metadata":{"icon":"x","description":"multiplication arithmetic operator","complexity":3,"tags":["f","arithmetic"]},"id":"872be100-f4dc-4246-8eea-6e3da31137b7","base":true,"type":"`U`","system":true},"c5c05c85-f4c1-4b67-ab85-08b61fe67531":{"name":"remainder","inputs":{"a":{"type":"number"},"b":{"type":"number"}},"outputs":{"a % b":{"type":"number"}},"metadata":{"icon":"percent","description":"remainder arithmetic operator","complexity":3,"tags":["f","arithmetic"]},"id":"c5c05c85-f4c1-4b67-ab85-08b61fe67531","base":true,"type":"`U`","system":true},"fa94b179-00e3-4ed1-814e-7938324a833f":{"name":"subtract","inputs":{"a":{"type":"number"},"b":{"type":"number"}},"outputs":{"a - b":{"type":"number"}},"metadata":{"icon":"minus","description":"subtraction arithmetic operator","complexity":3,"tags":["f","arithmetic"]},"id":"fa94b179-00e3-4ed1-814e-7938324a833f","base":true,"type":"`U`","system":true},"fa7721eb-1dd6-482e-8c7a-6da35b5f88bc":{"name":"append","inputs":{"a":{"type":"<A>[]"},"b":{"type":"<A>"}},"outputs":{"a":{"type":"<A>[]"}},"metadata":{"icon":"chevrons-left","description":"append an element to an array","complexity":3,"tags":["f","array"]},"id":"fa7721eb-1dd6-482e-8c7a-6da35b5f88bc","base":true,"type":"`U`","system":true},"79f01345-4ed7-47e2-8882-fa3bd282c98a":{"name":"at","inputs":{"a":{"type":"<A>[]","metadata":{"description":"array"}},"i":{"type":"number","metadata":{"description":"index"}}},"outputs":{"a[i]":{"type":"<A>","metadata":{"description":"$a[i] = $a[$i]"}}},"metadata":{"icon":"info-square","description":"`a` element at position `i`","complexity":3,"tags":["f","array"]},"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a","base":true,"type":"`U`","system":true},"e9831075-2e62-43a4-84af-0653f7e707a9":{"name":"behead","inputs":{"a":{"type":"<A>[]"}},"outputs":{"a":{"type":"<A>[]"},"head":{"type":"<A>"}},"metadata":{"icon":"axe","description":"remove the first element `head` of `a`","complexity":3,"tags":["f","array"]},"id":"e9831075-2e62-43a4-84af-0653f7e707a9","base":true,"type":"`U`","system":true},"f57f5318-f26f-4b9f-b9e2-dcc022ad7728":{"name":"concat","inputs":{"a":{"type":"<A>[]"},"b":{"type":"<A>[]"}},"outputs":{"ab":{"type":"<A>[]"}},"metadata":{"icon":"chevrons-left","description":"concatenate arrays `a` and `b` into a single one","complexity":3,"tags":["f","array"]},"id":"f57f5318-f26f-4b9f-b9e2-dcc022ad7728","base":true,"type":"`U`","system":true},"609ec474-cd6b-4646-b9b9-5ef4bbb378a7":{"name":"fill","inputs":{"a":{"type":"<A>[]"},"value":{"type":"<A>"},"start":{"type":"number"},"end":{"type":"number"}},"outputs":{"a":{"type":"<A>[]"}},"metadata":{"icon":"info-square","description":"fill array `a` from `start` to `end` with `value`","complexity":3,"tags":["f","array"]},"id":"609ec474-cd6b-4646-b9b9-5ef4bbb378a7","base":true,"type":"`U`","system":true},"9741cb34-bc83-4ebb-a854-edbe9eb3468f":{"name":"index of","inputs":{"a[]":{"type":"<A>[]"},"a":{"type":"<A>"}},"outputs":{"i":{"type":"number"}},"metadata":{"icon":"info-square","description":"find index `i` of the element `a` on array `a[]` or -1 if not found","complexity":3,"tags":["f","array"]},"id":"9741cb34-bc83-4ebb-a854-edbe9eb3468f","base":true,"type":"`U`","system":true},"32b27ad8-51d9-4767-8b9a-09da5a34f39d":{"name":"init","inputs":{"n":{"type":"number"},"a":{"type":"<A>"}},"outputs":{"a[]":{"type":"<A>[]"}},"metadata":{"icon":"info-square","description":"create an array of size `n` filled with value `v`","complexity":3,"tags":["f","array"]},"id":"32b27ad8-51d9-4767-8b9a-09da5a34f39d","base":true,"type":"`U`","system":true},"7014b684-ce58-4b6a-989d-bd6c047daab5":{"name":"insert","inputs":{"a":{"type":"<A>[]"},"i":{"type":"number"},"b":{"type":"<A>"}},"outputs":{"a":{"type":"<A>[]"}},"metadata":{"icon":"info-square","description":"insert `b` element into `a` at index `i`","complexity":3,"tags":["f","array"]},"id":"7014b684-ce58-4b6a-989d-bd6c047daab5","base":true,"type":"`U`","system":true},"104777ec-afb9-4513-9974-53b5528f0d15":{"name":"join","inputs":{"a":{"type":"string[]"},"sep":{"type":"string"}},"outputs":{"str":{"type":"string"}},"metadata":{"icon":"plus","description":"join array `a` elements into `str` with separator `sep`","complexity":3,"tags":["f","array"]},"id":"104777ec-afb9-4513-9974-53b5528f0d15","base":true,"type":"`U`","system":true},"46d98b47-0fa4-409e-bbc6-bb3165d863d8":{"name":"length","inputs":{"a":{"type":"<A>[]"}},"outputs":{"length":{"type":"number"}},"metadata":{"icon":"ruler","description":"size of array","complexity":3,"tags":["f","array"]},"id":"46d98b47-0fa4-409e-bbc6-bb3165d863d8","base":true,"type":"`U`","system":true},"81006022-e4d0-11ea-902a-fbf9fc5c9246":{"name":"pop","inputs":{"a":{"type":"<A>[]"}},"outputs":{"a":{"type":"<A>[]"},"last":{"type":"<A>"}},"metadata":{"icon":"axe","description":"remove the `last` element from `a`","complexity":3,"tags":["f","array"]},"id":"81006022-e4d0-11ea-902a-fbf9fc5c9246","base":true,"type":"`U`","system":true},"d9cf4224-39df-434a-85a6-2b143330cbab":{"name":"prepend","inputs":{"a":{"type":"<A>[]"},"b":{"type":"<A>"}},"outputs":{"a":{"type":"<A>[]"}},"metadata":{"icon":"chevrons-left","description":"prepend element `b` to `a`","complexity":3,"tags":["f","array"]},"id":"d9cf4224-39df-434a-85a6-2b143330cbab","base":true,"type":"`U`","system":true},"22622778-d64f-47e7-8ceb-d175edcc6562":{"name":"put","inputs":{"a":{"type":"<A>[]"},"v":{"type":"<A>"},"i":{"type":"number"}},"outputs":{"a":{"type":"<A>[]"}},"metadata":{"icon":"chevrons-left","description":"set element of `a` at position `i` to `v`","complexity":3,"tags":["f","array"]},"id":"22622778-d64f-47e7-8ceb-d175edcc6562","base":true,"type":"`U`","system":true},"f69e88e3-b2c2-481b-b036-a5c0ed7ccccb":{"name":"remove","inputs":{"a":{"type":"<A>[]"},"start":{"type":"number"},"count":{"type":"number"}},"outputs":{"a":{"type":"<A>[]"},"removed":{"type":"<A>[]"}},"metadata":{"icon":"scissors","description":"remove `count` elements from array `a` starting at `start`","complexity":3,"tags":["f","array"]},"id":"f69e88e3-b2c2-481b-b036-a5c0ed7ccccb","base":true,"type":"`U`","system":true},"c6bf897a-4970-4284-bea2-b4a86186f828":{"name":"slice","inputs":{"a":{"type":"<A>[]"},"begin":{"type":"number"},"end":{"type":"number"}},"outputs":{"a":{"type":"<A>[]"}},"metadata":{"icon":"scissors","description":"extracts a section of a string","complexity":3,"tags":["f","array"]},"id":"c6bf897a-4970-4284-bea2-b4a86186f828","base":true,"type":"`U`","system":true},"d4572f1c-83d3-4a3d-be76-fa16578286d2":{"name":"sort","inputs":{"a":{"type":"<A>[]"},"a[i] < a[j]":{"type":"boolean"}},"outputs":{"a[i]":{"type":"<A>"},"a[j]":{"type":"<A>"},"b":{"type":"<A>[]"}},"metadata":{"icon":"list-ordered","description":"sort array `a` by comparing its elements","complexity":3,"tags":["f","array"]},"id":"d4572f1c-83d3-4a3d-be76-fa16578286d2","base":true,"type":"`U`","system":true},"be6801c0-02e2-4f76-bcad-b68c80991fad":{"name":"and","inputs":{"a":{"type":"number"},"b":{"type":"number"}},"outputs":{"a & b":{"type":"number"}},"metadata":{"icon":"binary","description":"bitwise AND operator","complexity":3,"tags":["f","bitwise"]},"id":"be6801c0-02e2-4f76-bcad-b68c80991fad","base":true,"type":"`U`","system":true},"62d0c3e2-cf8b-4415-acfb-cf31739adce5":{"name":"not","inputs":{"a":{"type":"number"}},"outputs":{"~a":{"type":"number"}},"metadata":{"icon":"exclamation","description":"bitwise NOT operator","complexity":3,"tags":["f","bitwise"]},"id":"62d0c3e2-cf8b-4415-acfb-cf31739adce5","base":true,"type":"`U`","system":true},"0d656c2e-eb10-45f0-b236-f8916492ca86":{"name":"or","inputs":{"a":{"type":"number"},"b":{"type":"number"}},"outputs":{"a | b":{"type":"number"}},"metadata":{"icon":"binary","description":"bitwise OR operator","complexity":3,"tags":["f","bitwise"]},"id":"0d656c2e-eb10-45f0-b236-f8916492ca86","base":true,"type":"`U`","system":true},"3d59edf2-5fca-4475-9df0-d876e14f990d":{"name":"xor","inputs":{"a":{"type":"number"},"b":{"type":"number"}},"outputs":{"a ^ b":{"type":"number"}},"metadata":{"icon":"binary","description":"bitwise XOR operator","complexity":3,"tags":["f","bitwise"]},"id":"3d59edf2-5fca-4475-9df0-d876e14f990d","base":true,"type":"`U`","system":true},"85204bf6-6692-4686-a785-23127c0594b5":{"name":"equals","inputs":{"a":{"type":"<A>"},"b":{"type":"<A>"}},"outputs":{"a = b":{"type":"boolean"}},"metadata":{"icon":"equal","description":"equality","complexity":3,"tags":["f","comparisson"]},"id":"85204bf6-6692-4686-a785-23127c0594b5","base":true,"type":"`U`","system":true},"1651ce6b-4db0-4787-9edf-f770b72d253c":{"name":"greater than","inputs":{"a":{"type":"number"},"b":{"type":"number"}},"outputs":{"a > b":{"type":"boolean"}},"metadata":{"icon":"greater-than","description":"greater than operator","complexity":3,"tags":["f","comparisson"]},"id":"1651ce6b-4db0-4787-9edf-f770b72d253c","base":true,"type":"`U`","system":true},"c9e06816-0d2b-43ec-b7c8-d07563e19b6b":{"name":"greater than equal","inputs":{"a":{"type":"number"},"b":{"type":"number"}},"outputs":{"a \u2265 b":{"type":"boolean"}},"metadata":{"icon":"greater-than-equal","description":"greater than equal operator","complexity":3,"tags":["f","comparisson"]},"id":"c9e06816-0d2b-43ec-b7c8-d07563e19b6b","base":true,"type":"`U`","system":true},"82c3cf2a-0855-4c6d-a4c4-807b0ce1fd35":{"name":"less than","inputs":{"a":{"type":"number"},"b":{"type":"number"}},"outputs":{"a < b":{"type":"boolean"}},"metadata":{"icon":"less-than","description":"less than operator","complexity":3,"tags":["f","comparisson"]},"id":"82c3cf2a-0855-4c6d-a4c4-807b0ce1fd35","base":true,"type":"`U`","system":true},"e13f3090-62a6-4a3b-8401-c571cbf03526":{"name":"less than equal","inputs":{"a":{"type":"number"},"b":{"type":"number"}},"outputs":{"a \u2264 b":{"type":"boolean"}},"metadata":{"icon":"less-than-equal","description":"less than or equal to operator","complexity":3,"tags":["f","comparisson"]},"id":"e13f3090-62a6-4a3b-8401-c571cbf03526","base":true,"type":"`U`","system":true},"bda175a9-a9d2-4282-9b50-1b008ae8a807":{"name":"not equal","inputs":{"a":{"type":"<A>"},"b":{"type":"<A>"}},"outputs":{"a \u2260 b":{"type":"boolean"}},"metadata":{"icon":"equal-not","description":"inequality","complexity":3,"tags":["f","comparisson"]},"id":"bda175a9-a9d2-4282-9b50-1b008ae8a807","base":true,"type":"`U`","system":true},"ff976ac8-c54f-4d37-8c7d-089c271cb433":{"name":"constant","inputs":{"a":{"type":"<A>"}},"outputs":{"a":{"type":"<A>"}},"metadata":{"icon":"circle","description":"identity operator","complexity":3,"tags":["f","control"]},"id":"ff976ac8-c54f-4d37-8c7d-089c271cb433","base":true,"type":"`U`","system":true},"329920ae-7e91-11ea-988e-1b12488c8b89":{"name":"default","inputs":{"a":{"type":"<A>"},"d":{"type":"<A>"}},"outputs":{"a":{"type":"<A>"}},"metadata":{"icon":"grip-lines-vertical","description":"output `a` if present, `default` if present, otherwise","complexity":3,"tags":["f","control"]},"id":"329920ae-7e91-11ea-988e-1b12488c8b89","base":true,"type":"`U`","system":true},"260d774e-bc89-4027-aa92-cb1985fb312b":{"name":"identity","inputs":{"a":{"type":"<A>"}},"outputs":{"a":{"type":"<A>"}},"metadata":{"icon":"unit","description":"output `a`","complexity":3,"tags":["f","control"]},"id":"260d774e-bc89-4027-aa92-cb1985fb312b","base":true,"type":"`U`","system":true},"06bc3983-44b0-43d6-b041-2e9218ea89c8":{"name":"if","inputs":{"a":{"type":"<A>"},"b":{"type":"boolean"}},"outputs":{"a if b":{"type":"<A>"}},"metadata":{"icon":"filter","description":"conditional filter","complexity":3,"tags":["f","control"]},"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8","base":true,"type":"`U`","system":true},"8a2b756a-25e4-11eb-860d-1f34c850b992":{"name":"iterate","inputs":{"next":{"type":"<A>"},"init":{"type":"<A>"}},"outputs":{"current":{"type":"<A>"},"local":{"type":"<A>"}},"metadata":{"icon":"undo","description":"interatively update a single value","complexity":3,"tags":["f","control"]},"id":"8a2b756a-25e4-11eb-860d-1f34c850b992","base":true,"type":"`U`","system":true},"3432494e-fab6-4e9d-a846-0c48a7c429cd":{"name":"loop","inputs":{"next":{"type":"<A>"},"test":{"type":"boolean"},"init":{"type":"<A>","metadata":{"examples":["0","3"]}}},"outputs":{"current":{"type":"<A>"},"local":{"type":"<A>"},"final":{"type":"<A>","defaultIgnored":true}},"metadata":{"icon":"undo","description":"for loop","complexity":3,"tags":["f","control"]},"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","base":true,"type":"`U`","system":true},"49e11645-c25d-4bf7-923d-56817f67b686":{"name":"memory","inputs":{"a":{"type":"<A>"}},"outputs":{"a":{"type":"<A>"}},"metadata":{"icon":"triangle","description":"data holder","complexity":3,"tags":["f","control"]},"id":"49e11645-c25d-4bf7-923d-56817f67b686","base":true,"type":"`U`","system":true},"36329d25-218d-48a5-a06c-1e0525da504f":{"name":"plan","inputs":{"a":{"type":"<A>"}},"outputs":{"0":{"type":"<A>"},"1":{"type":"<A>"}},"metadata":{"icon":"list-ordered","description":"output `a` on `0`, then `1`","complexity":3,"tags":["f","control"]},"id":"36329d25-218d-48a5-a06c-1e0525da504f","base":true,"type":"`U`","system":true},"99657eb7-fb94-474e-b03d-4b08c537c0a2":{"name":"throw","inputs":{"message":{"type":"string"}},"outputs":{},"metadata":{"icon":"alert-circle","description":"throw message","complexity":3,"tags":["f","control"]},"id":"99657eb7-fb94-474e-b03d-4b08c537c0a2","base":true,"type":"`U`","system":true},"6d4b8791-95f8-4979-8290-ade2adf4f192":{"name":"transistor","inputs":{"a":{"type":"<A>"},"b":{"type":"boolean"}},"outputs":{"a":{"type":"<A>"}},"metadata":{"icon":"git-merge","description":"let `a` pass only if `b` is true without consuming `b`","complexity":3,"tags":["f","control"]},"id":"6d4b8791-95f8-4979-8290-ade2adf4f192","base":true,"type":"`U`","system":true},"9d853ef5-3fff-474d-a951-6af4237cf4c4":{"name":"void","inputs":{"a":{"type":"any"}},"outputs":{},"metadata":{"icon":"slash","description":"send data to the void","complexity":3,"tags":["f","control"]},"id":"9d853ef5-3fff-474d-a951-6af4237cf4c4","base":true,"type":"`U`","system":true},"ba38b0af-80c0-49e4-9e39-864396964ccc":{"name":"wait","inputs":{"a":{"type":"<A>"},"b":{"type":"any"}},"outputs":{"a":{"type":"<A>"}},"metadata":{"icon":"git-merge","description":"wait for `b` before output `a`","complexity":3,"tags":["f","control"]},"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","base":true,"type":"`U`","system":true},"69323dab-b425-4a2a-b1c7-d7efc723327a":{"name":"evaluate","inputs":{"str":{"type":"string"}},"outputs":{"a":{"type":"any"}},"metadata":{"icon":"wave-triangle","description":"string to value","complexity":8,"tags":["f","data"]},"id":"69323dab-b425-4a2a-b1c7-d7efc723327a","base":true,"type":"`U`","system":true},"2b24877a-3221-4288-9f59-efbf29964368":{"name":"stringify","inputs":{"a":{"type":"any"}},"outputs":{"str":{"type":"string"}},"metadata":{"icon":"string","description":"value to string","complexity":3,"tags":["f","data"]},"id":"2b24877a-3221-4288-9f59-efbf29964368","base":true,"type":"`U`","system":true},"63605ea1-40e7-47db-9f8f-313dffa6e3c9":{"name":"type of","inputs":{"a":{"type":"<A>"}},"outputs":{"type":{"type":"string"}},"metadata":{"icon":"tilde","description":"identify data type","complexity":3,"tags":["f","data"]},"id":"63605ea1-40e7-47db-9f8f-313dffa6e3c9","base":true,"type":"`U`","system":true},"939ed573-82b8-4385-ac62-88934e5b76c9":{"name":"now","inputs":{"any":{"type":"<A>"}},"outputs":{"now":{"type":"number"}},"metadata":{"icon":"circle","description":"identity operator","complexity":3,"tags":["f","date"]},"id":"939ed573-82b8-4385-ac62-88934e5b76c9","base":true,"type":"`U`","system":true},"b80d4b5a-40e9-11eb-a2bb-1777d47bf9ae":{"name":"add unit","inputs":{"class":{"type":"`U`"},"graph":{"type":"`U`&`G`","ref":true},"id":{"type":"string"}},"outputs":{},"metadata":{"icon":"circle","description":"add unit of `class` to `graph`","complexity":3,"tags":["f","graph"]},"id":"b80d4b5a-40e9-11eb-a2bb-1777d47bf9ae","base":true,"type":"`U`","system":true},"73967b68-9b4b-44c1-8a19-f505551f6c53":{"name":"add unit","inputs":{"class":{"type":"`U`"},"graph":{"type":"`U`&`G`"},"id":{"type":"string"}},"outputs":{"graph":{"type":"`U`&`G`"}},"metadata":{"icon":"circle","description":"add unit of `class` to `graph`","complexity":3,"tags":["f","graph"]},"id":"73967b68-9b4b-44c1-8a19-f505551f6c53","base":true,"type":"`U`","system":true},"c47d84b2-4207-11eb-a064-a3633d64f05d":{"name":"remove unit","inputs":{"graph":{"type":"`U`","ref":true},"id":{"type":"string"}},"outputs":{},"metadata":{"icon":"circle","description":"remove unit `id` from `graph`","complexity":3,"tags":["f","graph"]},"id":"c47d84b2-4207-11eb-a064-a3633d64f05d","base":true,"type":"`U`","system":true},"76e99304-aa0c-11eb-9bfa-07725a1b4287":{"name":"set unit pin data","inputs":{"graph":{"type":"`U`","ref":true},"id":{"type":"string"},"type":{"type":"\'input\'|\'output\'"},"name":{"type":"string"},"data":{"type":"any"}},"outputs":{},"metadata":{"icon":"circle","description":"set `graph` `id` unit `type` `name` pin `data`","complexity":3,"tags":["f","graph"]},"id":"76e99304-aa0c-11eb-9bfa-07725a1b4287","base":true,"type":"`U`","system":true},"3e5c5856-c721-11ea-b7af-07a978a65cdc":{"name":"uuid","inputs":{"any":{"type":"any"}},"outputs":{"uuid":{"type":"string"}},"metadata":{"icon":"info","description":"output a random uuid","complexity":3,"tags":["f","id"]},"id":"3e5c5856-c721-11ea-b7af-07a978a65cdc","base":true,"type":"`U`","system":true},"58900411-ccc3-4c5a-86df-86efe6b7e30e":{"name":"format","inputs":{"json":{"type":"any"},"space":{"type":"string|number","optional":false,"metadata":{"examples":["0","2"]}}},"outputs":{"string":{"type":"string"}},"metadata":{"icon":"string","description":"converts a JSON value to a string","complexity":3,"tags":["f","JSON"]},"id":"58900411-ccc3-4c5a-86df-86efe6b7e30e","base":true,"type":"`U`","system":true},"563e92be-ad5e-4a61-a718-9249c3eac51d":{"name":"parse json","inputs":{"string":{"type":"string"}},"outputs":{"json":{"type":"any"}},"metadata":{"icon":"tilde","description":"converts a JSON string into a data","complexity":3,"tags":["f","JSON"]},"id":"563e92be-ad5e-4a61-a718-9249c3eac51d","base":true,"type":"`U`","system":true},"ee184ea6-3c80-4119-919e-290620aafab0":{"name":"stringify","inputs":{"json":{"type":"any"}},"outputs":{"string":{"type":"string"}},"metadata":{"icon":"string","description":"converts a JSON value to a string","complexity":3,"tags":["f","JSON"]},"id":"ee184ea6-3c80-4119-919e-290620aafab0","base":true,"type":"`U`","system":true},"407640f7-f1c3-4297-a5ce-baff357a6d31":{"name":"and","inputs":{"a":{"type":"boolean"},"b":{"type":"boolean"}},"outputs":{"a and b":{"type":"boolean"}},"metadata":{"icon":"question","description":"AND logical operator","complexity":3,"tags":["f","logic"]},"id":"407640f7-f1c3-4297-a5ce-baff357a6d31","base":true,"type":"`U`","system":true},"7d02d638-a311-4ea8-a0c0-d45baf739e0d":{"name":"not","inputs":{"a":{"type":"boolean"}},"outputs":{"!a":{"type":"boolean"}},"metadata":{"icon":"exclamation","description":"NOT logic operator","complexity":3,"tags":["f","logic"]},"id":"7d02d638-a311-4ea8-a0c0-d45baf739e0d","base":true,"type":"`U`","system":true},"62a19cd6-04bd-4e46-a72e-4fa3516ad3fa":{"name":"or","inputs":{"a":{"type":"boolean"},"b":{"type":"boolean"}},"outputs":{"a or b":{"type":"boolean"}},"metadata":{"icon":"grip-lines-vertical","description":"OR logical operator","complexity":3,"tags":["f","logic"]},"id":"62a19cd6-04bd-4e46-a72e-4fa3516ad3fa","base":true,"type":"`U`","system":true},"fafc23ce-a259-11eb-b14e-af9d1f579af4":{"name":"abs","inputs":{"a":{"type":"number"}},"outputs":{"|a|":{"type":"number"}},"metadata":{"icon":"value-absolute","description":"absolute value of `a`","complexity":3,"tags":["f","math"]},"id":"fafc23ce-a259-11eb-b14e-af9d1f579af4","base":true,"type":"`U`","system":true},"62af44dc-17d6-459a-b95f-3b8ce5b48856":{"name":"cos","inputs":{"a":{"type":"number"}},"outputs":{"cos(a)":{"type":"number"}},"metadata":{"icon":"ruler","description":"cosine of angle `a` in rad","complexity":3,"tags":["f","math"]},"id":"62af44dc-17d6-459a-b95f-3b8ce5b48856","base":true,"type":"`U`","system":true},"3217edcf-2fa1-4dc4-af7c-d6fb607c888d":{"name":"floor","inputs":{"a":{"type":"number"}},"outputs":{"\u230Aa\u230B":{"type":"number"}},"metadata":{"icon":"circle","description":"identity operator","complexity":3,"tags":["f","math"]},"id":"3217edcf-2fa1-4dc4-af7c-d6fb607c888d","base":true,"type":"`U`","system":true},"e857c770-5a98-4f8d-a0e1-b6cb126071ed":{"name":"max","inputs":{"a":{"type":"number"},"b":{"type":"number"}},"outputs":{"max":{"type":"number"}},"metadata":{"icon":"arrow-up","description":"the biggest between `a` and `b`","complexity":3,"tags":["f","math"]},"id":"e857c770-5a98-4f8d-a0e1-b6cb126071ed","base":true,"type":"`U`","system":true},"4e63c320-f5a5-4f65-982e-632b5adafa29":{"name":"min","inputs":{"a":{"type":"number"},"b":{"type":"number"}},"outputs":{"min":{"type":"number"}},"metadata":{"icon":"arrow-down","description":"the smallest between `a` and `b`","complexity":3,"tags":["f","math"]},"id":"4e63c320-f5a5-4f65-982e-632b5adafa29","base":true,"type":"`U`","system":true},"3256e26d-8495-4c9d-8998-5b026691231d":{"name":"PI","inputs":{"any":{"type":"any"}},"outputs":{"PI":{"type":"number"}},"metadata":{"icon":"pi","description":"the ratio of the circumference of a circle to its diameter","complexity":3,"tags":["f","math"]},"id":"3256e26d-8495-4c9d-8998-5b026691231d","base":true,"type":"`U`","system":true},"ef4c1d0a-bda1-484e-8fcb-0fdbde195778":{"name":"pow","inputs":{"a":{"type":"number"},"b":{"type":"number"}},"outputs":{"a ** b":{"type":"number"}},"metadata":{"icon":"exponential","description":"`a` to the power of `b`","complexity":3,"tags":["f","math"]},"id":"ef4c1d0a-bda1-484e-8fcb-0fdbde195778","base":true,"type":"`U`","system":true},"2b59f375-ef06-4ec7-80c2-71a53171ec67":{"name":"random","inputs":{"any":{"type":"any"}},"outputs":{"random":{"type":"number"}},"metadata":{"icon":"random","description":"random number between 0 and 1, non inclusive","complexity":3,"tags":["f","math"]},"id":"2b59f375-ef06-4ec7-80c2-71a53171ec67","base":true,"type":"`U`","system":true},"1a59348c-a25a-11eb-8afe-8bedb0732a89":{"name":"sign","inputs":{"a":{"type":"number"}},"outputs":{"sign(a)":{"type":"number"}},"metadata":{"icon":"plus-minus","description":"sign of a","complexity":3,"tags":["f","math"]},"id":"1a59348c-a25a-11eb-8afe-8bedb0732a89","base":true,"type":"`U`","system":true},"b9f90a95-1bfc-4897-9068-2560743821a3":{"name":"sin","inputs":{"a":{"type":"number"}},"outputs":{"sin(a)":{"type":"number"}},"metadata":{"icon":"ruler","description":"sine of angle `a` in rad","complexity":3,"tags":["f","math"]},"id":"b9f90a95-1bfc-4897-9068-2560743821a3","base":true,"type":"`U`","system":true},"530e83d2-1d61-11eb-b472-53e545a06c92":{"name":"sqrt","inputs":{"a":{"type":"number"}},"outputs":{"\u221Aa":{"type":"number"}},"metadata":{"icon":"ruler","description":"square root of `a`","complexity":3,"tags":["f","math"]},"id":"530e83d2-1d61-11eb-b472-53e545a06c92","base":true,"type":"`U`","system":true},"13d738b9-401d-43c9-852f-e9611545f5bc":{"name":"bundle","inputs":{"graph":{"type":"`U`&`G`","ref":true},"opt":{"type":"{snapshot?:boolean}","medatata":{"examples":["{}"]}}},"outputs":{"bundle":{"type":"object"}},"metadata":{"icon":"circle","description":"get `graph` `bundle`","complexity":3,"tags":["f","meta"]},"id":"13d738b9-401d-43c9-852f-e9611545f5bc","base":true,"type":"`U`","system":true},"2520668c-b279-11ea-ace3-5b84eb02bd7f":{"name":"catch","inputs":{"unit":{"type":"`U`","ref":true}},"outputs":{"err":{"type":"string"}},"metadata":{"icon":"circle","description":"catch all `unit` error","complexity":3,"tags":["f","meta"]},"id":"2520668c-b279-11ea-ace3-5b84eb02bd7f","base":true,"type":"`U`","system":true},"123f2837-76c0-4cb2-8d73-29e66879b181":{"name":"class","inputs":{"unit":{"type":"`U`","ref":true},"deep":{"type":"boolean"}},"outputs":{"class":{"type":"`U`"}},"metadata":{"icon":"circle","description":"system `id` of the given unit `class`","complexity":3,"tags":["f","meta"]},"id":"123f2837-76c0-4cb2-8d73-29e66879b181","type":"`U`","base":true,"system":true},"1520b630-93aa-11ea-ac56-7718cb2ad75d":{"name":"class to id","inputs":{"class":{"type":"`U`"}},"outputs":{"id":{"type":"string"}},"metadata":{"icon":"circle","description":"system `id` of the given unit `class`","complexity":3,"tags":["f","meta"]},"id":"1520b630-93aa-11ea-ac56-7718cb2ad75d","base":true,"type":"`U`","system":true},"56fb9a32-ad10-11ea-b0f4-3b0ea5e3ac2c":{"name":"exec","inputs":{"unit":{"type":"`U`","ref":true},"method":{"type":"string"},"args":{"type":"any[]"}},"outputs":{"return":{"type":"any"}},"metadata":{"icon":"circle","description":"execute `unit` `method` with `data`","complexity":3,"tags":["f","meta"]},"id":"56fb9a32-ad10-11ea-b0f4-3b0ea5e3ac2c","private":true,"base":true,"type":"`U`","system":true},"8383c41e-3f9b-4d04-8380-feb583a1404f":{"name":"global","inputs":{},"outputs":{},"metadata":{"icon":"table","description":"globally accessible object scope","complexity":11,"tags":["f","meta"],"globals":[]},"id":"8383c41e-3f9b-4d04-8380-feb583a1404f","base":true,"type":"`U`&`J`","system":true},"b0c25199-c284-4f90-817c-60dc89b15b1c":{"name":"id to class","inputs":{"id":{"type":"string","metadata":{"examples":["\\"260d774e-bc89-4027-aa92-cb1985fb312b\\""]}}},"outputs":{"class":{"type":"`U`"}},"metadata":{"icon":"circle","description":"unit `class` with the given system `id`","complexity":8,"tags":["f","meta"]},"id":"b0c25199-c284-4f90-817c-60dc89b15b1c","base":true,"type":"`U`","system":true},"b2626d61-b17d-4737-bea3-627c0322f9d6":{"name":"id to spec","inputs":{"id":{"type":"string"}},"outputs":{"spec":{"type":"object"}},"metadata":{"icon":"circle","description":"get system `spec` with `id`","complexity":3,"tags":["f","meta"]},"id":"b2626d61-b17d-4737-bea3-627c0322f9d6","base":true,"type":"`U`","system":true},"1b592040-968f-456b-bdb5-b424e08b80f1":{"name":"new","inputs":{"class":{"type":"`U`"}},"outputs":{"unit":{"type":"`U`","ref":true}},"metadata":{"icon":"circle","description":"intantiate `class`","complexity":3,"tags":["f","meta"]},"id":"1b592040-968f-456b-bdb5-b424e08b80f1","system":true,"base":true,"type":"`U`"},"e1486d65-7d51-436b-949d-4e57d1f9e4a9":{"name":"ref","inputs":{"obj":{"_type":"`J<T object>`","type":"`J`","ref":true},"key":{"_type":"<K keyof T>","type":"string"}},"outputs":{"value":{"_type":"`T[K]`","type":"`V`","ref":true}},"metadata":{"icon":"circle","description":"intantiate `class`","complexity":3,"tags":["f","meta"]},"id":"e1486d65-7d51-436b-949d-4e57d1f9e4a9","system":true,"base":true,"type":"`U`"},"f9f93972-0764-4095-9ca2-d18b7d9344d4":{"name":"scope","inputs":{"unit":{"type":"`U`","ref":true}},"outputs":{"obj":{"type":"`J`","ref":true}},"metadata":{"icon":"circle","description":"access object local scope","complexity":3,"tags":["f","meta"]},"id":"f9f93972-0764-4095-9ca2-d18b7d9344d4","system":true,"base":true,"type":"`U`"},"3be8272d-310a-4aa2-84a1-71f590a8227a":{"name":"spark","inputs":{"a":{"type":"<T>"}},"outputs":{"a":{"type":"<T>"}},"metadata":{"icon":"circle","description":"output `a` only once","complexity":3,"tags":["f","meta"]},"id":"3be8272d-310a-4aa2-84a1-71f590a8227a","base":true,"type":"`U`","system":true},"ae1f7fc0-d6e7-489c-94ed-dee71c68dbb7":{"name":"spec","inputs":{"unit":{"type":"`U`","ref":true},"any":{"type":"any"}},"outputs":{"spec":{"type":"object"}},"metadata":{"icon":"circle","description":"get system `unit` `spec`","complexity":3,"tags":["f","meta"]},"id":"ae1f7fc0-d6e7-489c-94ed-dee71c68dbb7","base":true,"type":"`U`","system":true},"b5ea15f4-9bbd-11eb-b623-37aff4a9ce60":{"name":"specs","inputs":{"any":{"type":"any"}},"outputs":{"specs":{"type":"object"}},"metadata":{"icon":"circle","description":"object mapping id to spec","complexity":3,"tags":["f","meta"]},"id":"b5ea15f4-9bbd-11eb-b623-37aff4a9ce60","base":true,"type":"`U`","system":true},"70972046-ad11-11ea-aaea-0b9067ad19e7":{"name":"this","inputs":{},"outputs":{"graph":{"type":"`U`&`G`","ref":true}},"metadata":{"icon":"circle","description":"parent graph","complexity":2,"tags":["f","meta"]},"id":"70972046-ad11-11ea-aaea-0b9067ad19e7","base":true,"type":"`U`","system":true},"94e93f42-d05e-45d9-9211-ba903e779f2d":{"name":"unit","inputs":{},"outputs":{},"metadata":{"icon":"circle","description":"unit","complexity":2,"tags":["f","meta"]},"id":"94e93f42-d05e-45d9-9211-ba903e779f2d","base":true,"type":"`U`","system":true,"private":true},"f712793d-8ee9-4805-9d4a-8c210cae667a":{"name":"number to string","inputs":{"n":{"type":"number"},"radix":{"type":"number","metadata":{"description":"integer in the range 2 through 36 specifying the base to represent the number"},"optional":true}},"outputs":{"str":{"type":"string"}},"metadata":{"icon":"tilde","description":"convert a number into a string","complexity":3,"tags":["f","number"]},"id":"f712793d-8ee9-4805-9d4a-8c210cae667a","base":true,"type":"`U`","system":true},"f60adade-f14e-11ea-b51e-537032a90354":{"name":"string to float","inputs":{"str":{"type":"string"}},"outputs":{"n":{"type":"number"}},"metadata":{"icon":"tilde","description":"convert a string into a float","complexity":3,"tags":["f","number"]},"id":"f60adade-f14e-11ea-b51e-537032a90354","base":true,"type":"`U`","system":true},"8cd29108-95cd-4217-9721-11f7c7c1131e":{"name":"string to int","inputs":{"str":{"type":"string"},"radix":{"type":"number","metadata":{"description":"integer in the range 2 through 36 specifying the base to represent the number"},"optional":true}},"outputs":{"n":{"type":"number"}},"metadata":{"icon":"tilde","description":"convert a number into an integer","complexity":3,"tags":["f","number"]},"id":"8cd29108-95cd-4217-9721-11f7c7c1131e","base":true,"type":"`U`","system":true},"2af12780-698c-40ca-baa9-5f3260377e0f":{"name":"deep merge","inputs":{"a":{"type":"object"},"b":{"type":"object"}},"outputs":{"ab":{"type":"object"}},"metadata":{"icon":"brackets-curly","description":"merge two objects `a` and `b` into `ab`","complexity":3,"tags":["f","object"]},"id":"2af12780-698c-40ca-baa9-5f3260377e0f","base":true,"type":"`U`","system":true},"664b5d3c-e4cf-11ea-ab74-eb6d2f3bd6f1":{"name":"delete","inputs":{"obj":{"type":"object","_type":"{...O,[K]:V}"},"key":{"type":"string","_type":"K:string"}},"outputs":{"obj":{"type":"object"}},"metadata":{"icon":"brackets-curly","description":"remove `obj` key-value pair for given `key`","complexity":3,"tags":["f","object"]},"id":"664b5d3c-e4cf-11ea-ab74-eb6d2f3bd6f1","base":true,"type":"`U`","system":true},"9414421d-3376-4438-aa03-7afcd860972c":{"name":"get","inputs":{"obj":{"_type":"T object","type":"object"},"key":{"_type":"K keyof T","type":"string"}},"outputs":{"value":{"_type":"T[K]","type":"any"}},"metadata":{"icon":"brackets-curly","description":"get `obj` property `name`","complexity":3,"tags":["f","object"]},"id":"9414421d-3376-4438-aa03-7afcd860972c","base":true,"type":"`U`","system":true},"ad2ae8b9-9674-4b22-bed4-4458e0030b1a":{"name":"has key","inputs":{"obj":{"type":"object"},"key":{"type":"string"}},"outputs":{"has":{"type":"boolean"}},"metadata":{"icon":"brackets-curly","description":"check if key is in object","complexity":3,"tags":["f","object"]},"id":"ad2ae8b9-9674-4b22-bed4-4458e0030b1a","base":true,"type":"`U`","system":true},"45b9c329-64e9-4c4a-800b-790947c75754":{"name":"keys","inputs":{"obj":{"type":"object"}},"outputs":{"keys":{"type":"string[]"}},"metadata":{"icon":"brackets-curly","description":"list keys for this object","complexity":3,"tags":["f","object"]},"id":"45b9c329-64e9-4c4a-800b-790947c75754","base":true,"type":"`U`","system":true},"60bdba6d-c670-430f-be72-6f39cf4e8453":{"name":"merge","inputs":{"a":{"type":"object"},"b":{"type":"object"}},"outputs":{"ab":{"type":"object"}},"metadata":{"icon":"brackets-curly","description":"merge two objects `a` and `b` into `ab`","complexity":3,"tags":["f","object"]},"id":"60bdba6d-c670-430f-be72-6f39cf4e8453","base":true,"type":"`U`","system":true},"c4784b05-1f50-44ad-b812-545b3ed77614":{"name":"set","inputs":{"obj":{"type":"object","_type":"O"},"key":{"type":"string","_type":"K"},"value":{"type":"any","_type":"V"}},"outputs":{"obj":{"type":"object","_type":"{...O,[K]:V}"}},"metadata":{"icon":"brackets-curly","description":"set value at given key","complexity":3,"tags":["f","object"]},"id":"c4784b05-1f50-44ad-b812-545b3ed77614","base":true,"type":"`U`","system":true},"964d3314-75fe-4a09-8ba8-c49145f29d49":{"name":"values","inputs":{"obj":{"type":"object"}},"outputs":{"values":{"type":"<A>[]"}},"metadata":{"icon":"brackets-curly","description":"list values for this object","complexity":3,"tags":["f","object"]},"id":"964d3314-75fe-4a09-8ba8-c49145f29d49","base":true,"type":"`U`","system":true},"02f91720-c4d5-4d66-ae91-d46ddc635722":{"name":"parse query","inputs":{"str":{"type":"string"}},"outputs":{"obj":{"type":"object"}},"metadata":{"icon":"tilde","description":"parses a URL query string into an object","complexity":3,"tags":["f","querystring"]},"id":"02f91720-c4d5-4d66-ae91-d46ddc635722","base":true,"type":"`U`","system":true},"f97f2a74-d9a9-411d-afd3-fda46ba86c3b":{"name":"stringify","inputs":{"obj":{"type":"object"}},"outputs":{"str":{"type":"string"}},"metadata":{"icon":"string","description":"produces a URL query string from a given obj","complexity":3,"tags":["f","querystring"]},"id":"f97f2a74-d9a9-411d-afd3-fda46ba86c3b","base":true,"type":"`U`","system":true},"3e20a18c-60a3-40cd-bbee-f2f9e289b14d":{"name":"behead","inputs":{"a":{"type":"string"}},"outputs":{"tail":{"type":"string"},"head":{"type":"string"}},"metadata":{"icon":"axe","description":"remove the first character `head` of string `a`","complexity":3,"tags":["f","string"]},"id":"3e20a18c-60a3-40cd-bbee-f2f9e289b14d","base":true,"type":"`U`","system":true},"eb345e08-08fd-4032-bd69-a4e9f55e7aa6":{"name":"char at","inputs":{"a":{"type":"string"},"i":{"type":"number","metadata":{"description":"index"}}},"outputs":{"a[i]":{"type":"string"}},"metadata":{"icon":"info-square","description":"get `a` character at position `i`","complexity":3,"tags":["f","string"]},"id":"eb345e08-08fd-4032-bd69-a4e9f55e7aa6","base":true,"type":"`U`","system":true},"779e538c-b0b9-477e-a986-30ee3abe6fe6":{"name":"concat","inputs":{"a":{"type":"string"},"b":{"type":"string"}},"outputs":{"ab":{"type":"string"}},"metadata":{"icon":"plus","description":"concatenate two strings","complexity":3,"tags":["f","string"]},"id":"779e538c-b0b9-477e-a986-30ee3abe6fe6","base":true,"type":"`U`","system":true},"25d0e003-f002-45ae-a50c-6fa3bffee4eb":{"name":"from char code","inputs":{"code":{"type":"number"}},"outputs":{"char":{"type":"string"}},"metadata":{"icon":"axe","description":"output string created from the specified sequence of UTF-16 code","complexity":3,"tags":["f","string"]},"id":"25d0e003-f002-45ae-a50c-6fa3bffee4eb","base":true,"type":"`U`","system":true},"1b8ce255-0bc7-4656-bafa-3dc86af44126":{"name":"length","inputs":{"a":{"type":"string"}},"outputs":{"length":{"type":"number"}},"metadata":{"icon":"ruler","description":"size of string","complexity":3,"tags":["f","string"]},"id":"1b8ce255-0bc7-4656-bafa-3dc86af44126","base":true,"type":"`U`","system":true},"065d2fc3-af3b-4704-b26e-228d71f61771":{"name":"locale compare","inputs":{"a":{"type":"string"},"b":{"type":"string"}},"outputs":{"a < b":{"type":"boolean"}},"metadata":{"icon":"plus","description":"compare two strings in alphabetical order","complexity":3,"tags":["f","string"]},"id":"065d2fc3-af3b-4704-b26e-228d71f61771","base":true,"type":"`U`","system":true},"b16cccf7-fe33-43a6-b208-48db494376e8":{"name":"match","inputs":{"str":{"type":"string"},"regex":{"type":"string"}},"outputs":{"match":{"type":"string[]&object"}},"metadata":{"icon":"ruler","description":"match a string against a regular expression","complexity":3,"tags":["f","string"]},"id":"b16cccf7-fe33-43a6-b208-48db494376e8","base":true,"type":"`U`","system":true},"af5469c4-a09e-4b22-8133-a21e721e7639":{"name":"replace","inputs":{"str":{"type":"string"},"regex":{"type":"string"},"flags":{"type":"string"},"with":{"type":"string"}},"outputs":{"str":{"type":"string"}},"metadata":{"icon":"search","description":"replace every `regex` match in `str` `with`","complexity":3,"tags":["f","string"]},"id":"af5469c4-a09e-4b22-8133-a21e721e7639","base":true,"type":"`U`","system":true},"c8a4cd44-a554-4901-8a33-a8adbff63d03":{"name":"slice","inputs":{"a":{"type":"string"},"begin":{"type":"number"},"end":{"type":"number"}},"outputs":{"a":{"type":"string"}},"metadata":{"icon":"scissors","description":"extracts a section of a string","complexity":3,"tags":["f","string"]},"id":"c8a4cd44-a554-4901-8a33-a8adbff63d03","base":true,"type":"`U`","system":true},"e1e106ad-e15d-4044-82f6-27ddd476d7c8":{"name":"split","inputs":{"a":{"type":"string"},"sep":{"type":"string"}},"outputs":{"parts":{"type":"string[]"}},"metadata":{"icon":"split-text","description":"output an array of strings by separating the string into substrings, using the specified separator `sep`","complexity":3,"tags":["f","string"]},"id":"e1e106ad-e15d-4044-82f6-27ddd476d7c8","base":true,"type":"`U`","system":true},"141eaa06-bb12-42f1-a46f-32ceefb64ddc":{"name":"substring","inputs":{"a":{"type":"string"},"from":{"type":"number"},"length":{"type":"number"}},"outputs":{"a":{"type":"string"}},"metadata":{"icon":"scissors","description":"substring","complexity":3,"tags":["f","string"]},"id":"141eaa06-bb12-42f1-a46f-32ceefb64ddc","base":true,"type":"`U`","system":true},"c2fec1e6-b370-4069-bb43-6dab5a78b9ab":{"name":"test","inputs":{"str":{"type":"string"},"regex":{"type":"string"}},"outputs":{"match":{"type":"boolean"}},"metadata":{"icon":"regex","description":"check if `regex` match `str`","complexity":3,"tags":["f","string"]},"id":"c2fec1e6-b370-4069-bb43-6dab5a78b9ab","base":true,"type":"`U`","system":true},"adde2d16-e1e6-4599-9a64-dd0968797041":{"name":"to lower case","inputs":{"A":{"type":"string","metadata":{"examples":["ABC","UNIT"]}}},"outputs":{"a":{"type":"string"}},"metadata":{"icon":"ruler","description":"conver string to lower case","link":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/toLowerCase","complexity":3,"tags":["f","string"]},"id":"adde2d16-e1e6-4599-9a64-dd0968797041","base":true,"type":"`U`","system":true},"d4e4d4b2-80e0-4066-8d6f-5051e9a11a10":{"name":"to upper case","inputs":{"a":{"type":"string","metadata":{"examples":["abc","unit"]}}},"outputs":{"A":{"type":"string"}},"metadata":{"icon":"ruler","description":"convert string to upper case","link":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase","complexity":3,"tags":["f","string"]},"id":"d4e4d4b2-80e0-4066-8d6f-5051e9a11a10","base":true,"type":"`U`","system":true},"42a8023a-0581-4e92-968a-b31584d0ed75":{"name":"interval","inputs":{"ms":{"type":"number","metadata":{"description":"number of milliseconds to wait before output"}},"done":{"type":"number","metadata":{"description":"signal the interval should stop"}}},"outputs":{"ms":{"type":"number","metadata":{"description":"same as the inputed `ms`"}}},"metadata":{"icon":"timer","description":"output `ms` after `ms` milliseconds, until `done`","complexity":3,"tags":["f","time"]},"id":"42a8023a-0581-4e92-968a-b31584d0ed75","base":true,"type":"`U`","system":true},"95076599-0f2f-46b6-a9e0-b4cbfdb8dcc9":{"name":"timer","inputs":{"ms":{"type":"number","metadata":{"description":"number of milliseconds to wait before output"}}},"outputs":{"ms":{"type":"number","metadata":{"description":"same as the inputed `ms`"}}},"metadata":{"icon":"timer","description":"output `ms` after `ms` milliseconds","complexity":3,"tags":["f","time"]},"id":"95076599-0f2f-46b6-a9e0-b4cbfdb8dcc9","base":true,"type":"`U`","system":true},"a85fd9ad-5aec-4ebc-9008-e22db851dfa8":{"name":"pause","inputs":{"unit":{"type":"`U`","ref":true},"opt":{"type":"{}"}},"outputs":{},"metadata":{"icon":"pause","description":"pause unit execution","complexity":3,"tags":["f","unit"]},"id":"a85fd9ad-5aec-4ebc-9008-e22db851dfa8","base":true,"type":"`U`","system":true},"49517cda-b9da-4d80-b849-61fc2260317d":{"name":"paused","inputs":{"unit":{"type":"`U`","ref":true},"any":{"type":"any"}},"outputs":{"paused":{"type":"boolean"}},"metadata":{"icon":"question","description":"check whether unit is paused","complexity":3,"tags":["f","unit"]},"id":"49517cda-b9da-4d80-b849-61fc2260317d","base":true,"type":"`U`","system":true},"ff84b8cd-216f-4bcf-8e29-e7c9998cae3d":{"name":"play","inputs":{"unit":{"type":"`U`","ref":true},"opt":{"type":"{}"}},"outputs":{},"metadata":{"icon":"play","description":"start unit execution","complexity":3,"tags":["f","unit"]},"id":"ff84b8cd-216f-4bcf-8e29-e7c9998cae3d","base":true,"type":"`U`","system":true},"43b43afd-9e7d-44ba-aef7-6e9db4ed8744":{"name":"set input","inputs":{"unit":{"_type":"<T:`U`>","type":"`U`"},"name":{"type":"string"},"data":{"type":"any"}},"outputs":{"unit":{"_type":"<T>","type":"any"}},"metadata":{"icon":"object-set","description":"set input `name` of `unit` to `data`","complexity":3,"tags":["f","unit"]},"id":"43b43afd-9e7d-44ba-aef7-6e9db4ed8744","base":true,"type":"`U`","system":true},"33434271-3533-4a4e-adb9-306e35ab6afe":{"name":"unset pin","inputs":{"unit":{"type":"`U`"},"type":{"type":"\'input\'|\'output"},"name":{"type":"string"}},"outputs":{"unit":{"type":"`U`"}},"metadata":{"icon":"object-set","description":"remove data on input `name` of `unit`","complexity":3,"tags":["f","unit"]},"id":"33434271-3533-4a4e-adb9-306e35ab6afe","base":true,"type":"`U`","system":true},"0b4aa055-010d-4d43-b991-f38a95cdb380":{"name":"alert","inputs":{"message":{"type":"string"}},"outputs":{},"metadata":{"icon":"tilde","description":"identify data type","complexity":3,"tags":["platform","api","alert"]},"id":"0b4aa055-010d-4d43-b991-f38a95cdb380","base":true,"type":"`U`","system":true},"fa3d97bb-060d-4671-9c18-dff81f64c1cc":{"name":"prompt","inputs":{"message":{"type":"string","metadata":{"examples":["\'Write something:\'"]}}},"outputs":{"answer":{"type":"string"}},"metadata":{"icon":"tilde","description":"identify data type","complexity":3,"tags":["platform","api","alert"]},"id":"fa3d97bb-060d-4671-9c18-dff81f64c1cc","base":true,"type":"`U`","system":true},"d6f727ee-5158-4e2b-a2d4-a84ee712144e":{"name":"decode","inputs":{"b":{"type":"string"}},"outputs":{"a":{"type":"string"}},"metadata":{"icon":"tilde","description":"identify data type","complexity":3,"tags":["platform","api","base64"]},"id":"d6f727ee-5158-4e2b-a2d4-a84ee712144e","base":true,"type":"`U`","system":true},"ee7b692f-5fe5-43c3-b636-aacca92b0bc7":{"name":"encode","inputs":{"a":{"type":"string"}},"outputs":{"b":{"type":"string"}},"metadata":{"icon":"tilde","description":"identify data type","complexity":3,"tags":["platform","api","base64"]},"id":"ee7b692f-5fe5-43c3-b636-aacca92b0bc7","base":true,"type":"`U`","system":true},"c7f6f43e-e8ed-11ea-92b2-0bd612272247":{"name":"bluetooth characteristic","type":"`U`","subtype":{"V":"string"},"inputs":{"service":{"type":"`BSE`","ref":true},"uuid":{"type":"string"}},"outputs":{"charac":{"type":"`V`","ref":true}},"events":{"characteristicvaluechanged":{"type":"string"}},"metadata":{"icon":"bluetooth","description":"remote GATT charact","complexity":3,"link":"https://developer.mozilla.org/en-US/docs/Web/API/BluetoothRemoteGATTCharacteristic","tags":["platform","api","bluetooth"]},"id":"c7f6f43e-e8ed-11ea-92b2-0bd612272247","base":true,"system":true},"4ad5bd0e-e11e-11ea-ad4c-83da30628333":{"name":"bluetooth device","inputs":{"opt":{"type":"{filters?:({name?:string}|{namePrefix?:string}|{services:(string|number)[]})[],optionalServices?:string[],acceptAllDevices?:boolean}"}},"outputs":{"device":{"type":"`BD`","ref":true}},"metadata":{"icon":"bluetooth","description":"remote GATT device","complexity":3,"tags":["platform","api","bluetooth"]},"id":"4ad5bd0e-e11e-11ea-ad4c-83da30628333","base":true,"type":"`U`","system":true},"dd520754-e138-11ea-879e-3bd947893124":{"name":"bluetooth server","inputs":{"device":{"type":"`BD`","ref":true}},"outputs":{"server":{"type":"`BS`","ref":true}},"metadata":{"icon":"bluetooth","description":"remote GATT server","complexity":3,"tags":["platform","api","bluetooth"]},"id":"dd520754-e138-11ea-879e-3bd947893124","base":true,"type":"`U`","system":true},"a44b2198-e18d-11ea-be3b-77e13b78b7e3":{"name":"bluetooth service","inputs":{"server":{"type":"`BS`","ref":true},"uuid":{"type":"string"}},"outputs":{"service":{"type":"`BSE`","ref":true}},"metadata":{"icon":"bluetooth","description":"remote GATT service","complexity":3,"link":"https://developer.mozilla.org/en-US/docs/Web/API/BluetoothRemoteGATTService","tags":["platform","api","bluetooth"]},"id":"a44b2198-e18d-11ea-be3b-77e13b78b7e3","base":true,"type":"`U`","system":true},"6796cd2d-2bd2-4dd3-9396-49d6bc1d2652":{"name":"add arc","inputs":{"d":{"type":"any[][]"},"arc":{"type":"{x:number,y:number,r:number,start:number,end:number,anticlockwise?:boolean}"}},"outputs":{"d":{"type":"any[][]"}},"metadata":{"icon":"edit-3","description":"adds a circular arc to the current sub-path","complexity":3,"tags":["platform","api","canvas"]},"id":"6796cd2d-2bd2-4dd3-9396-49d6bc1d2652","base":true,"type":"`U`","system":true},"2b0ef9e9-028b-4acc-9daf-6999e86cc2af":{"name":"add line to","inputs":{"d":{"type":"any[][]"},"x":{"type":"number"},"y":{"type":"number"}},"outputs":{"d":{"type":"any[][]"}},"metadata":{"icon":"edit-3","description":"adds a straight line to the current sub-path by connecting the sub-path\'s last point to the specified x, y coordinates","complexity":3,"tags":["platform","api","canvas"]},"id":"2b0ef9e9-028b-4acc-9daf-6999e86cc2af","base":true,"type":"`U`","system":true},"58385055-7f06-472a-be9e-26bb5bce276a":{"name":"add rect","inputs":{"d":{"type":"any[][]"},"rect":{"type":"{x:number,y:number,width:number,height:number}"}},"outputs":{"d":{"type":"any[][]"}},"metadata":{"icon":"edit-3","description":"adds a rectangle to the current sub-path","complexity":3,"tags":["platform","api","canvas"]},"id":"58385055-7f06-472a-be9e-26bb5bce276a","base":true,"type":"`U`","system":true},"81c0f469-ab88-4bc8-89d5-98d291b1d8b2":{"name":"begin path","inputs":{"d":{"type":"any[][]"}},"outputs":{"d":{"type":"any[][]"}},"metadata":{"icon":"edit-3","description":"starts a new path by emptying the list of sub-paths","link":"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/beginPath","complexity":3,"tags":["platform","api","canvas"]},"id":"81c0f469-ab88-4bc8-89d5-98d291b1d8b2","base":true,"type":"`U`","system":true},"1ef77768-7394-4b83-ad11-f5905fa9d0d3":{"name":"clear","inputs":{"any":{"type":"any"},"canvas":{"type":"`CA`","ref":true}},"outputs":{},"metadata":{"icon":"eraser","description":"clear canvas","complexity":3,"tags":["platform","api","canvas"]},"id":"1ef77768-7394-4b83-ad11-f5905fa9d0d3","base":true,"type":"`U`","system":true},"288aede9-59ea-4cb4-baf9-fef9109cc2b9":{"name":"close path","inputs":{"d":{"type":"(number|string)[][]"}},"outputs":{"d":{"type":"(number|string)[][]"}},"metadata":{"icon":"edit-3","description":"add a straight line from the current point to the start of the current sub-path","link":"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/closePath","complexity":3,"tags":["platform","api","canvas"]},"id":"288aede9-59ea-4cb4-baf9-fef9109cc2b9","base":true,"type":"`U`","system":true},"53018958-b686-11ea-bf53-175a3698c92d":{"name":"draw","inputs":{"canvas":{"type":"`CA`","ref":true,"metadata":{"position":{"0":{"x":-117,"y":28}}}},"step":{"_type":"(number|string)[]","type":"any[]","metadata":{"position":{"0":{"x":128,"y":32}}}}},"outputs":{},"metadata":{"icon":"square","description":"draw on `canvas`","complexity":3,"tags":["platform","api","canvas"],"position":{"merge":{"rgarjyrwq":{"x":5,"y":-4}}}},"id":"53018958-b686-11ea-bf53-175a3698c92d","type":"`U`","base":true,"system":true},"82cf909e-a78f-4f3e-b87a-976458c8e15d":{"name":"draw image","inputs":{"any":{"type":"any"},"image":{"type":"`IM`","ref":true},"canvas":{"type":"`CA`","ref":true},"x":{"type":"number","metadata":{"examples":["0"]}},"y":{"type":"number","metadata":{"examples":["0"]}},"width":{"type":"number","metadata":{"examples":["100"]}},"height":{"type":"number","metadata":{"examples":["100"]}}},"outputs":{},"metadata":{"icon":"square","description":"draw an image `bitmap` on `canvas`","complexity":3,"tags":["platform","api","canvas"]},"id":"82cf909e-a78f-4f3e-b87a-976458c8e15d","base":true,"type":"`U`","system":true},"87a11e2c-278c-11eb-9209-2f30aebffb25":{"name":"fill","inputs":{"d":{"type":"(number|string)[][]"}},"outputs":{"d":{"type":"(number|string)[][]"}},"metadata":{"icon":"edit-3","description":"fill the current path","complexity":3,"tags":["platform","api","canvas"]},"id":"87a11e2c-278c-11eb-9209-2f30aebffb25","base":true,"type":"`U`","system":true},"be59cf84-fcf2-46ef-aa34-6f0f8e055680":{"name":"fill path","inputs":{"d":{"type":"string"},"rule":{"type":"\\"evenodd\\"|\\"nonzero\\""},"canvas":{"type":"`CA`","ref":true}},"outputs":{},"metadata":{"icon":"edit-3","description":"fill a SVG path `d` on `canvas`","complexity":3,"tags":["platform","api","canvas"]},"id":"be59cf84-fcf2-46ef-aa34-6f0f8e055680","base":true,"type":"`U`","system":true},"f5b2faf1-3a8b-489f-9d99-62d3c749ced6":{"name":"fill style","inputs":{"d":{"type":"(number|string)[][]","metadata":{"examples":["[]"]}},"fillStyle":{"type":"string"}},"outputs":{"d":{"type":"(number|string)[][]"}},"metadata":{"icon":"edit-3","description":"set current fillStyle","complexity":3,"tags":["platform","api","canvas"]},"id":"f5b2faf1-3a8b-489f-9d99-62d3c749ced6","base":true,"type":"`U`","system":true},"3ab81e83-5954-4bae-ad3e-ebf409dd23c4":{"name":"get image data","inputs":{"canvas":{"type":"`CA`","ref":true},"x":{"type":"number","metadata":{"examples":["0"]}},"y":{"type":"number","metadata":{"examples":["0"]}},"width":{"type":"number","metadata":{"examples":["100"]}},"height":{"type":"number","metadata":{"examples":["100"]}},"opt":{"type":"{colorSpace?:\'srgb\'|\'display-p3\'}","metadata":{"examples":["{}","{colorSpace:\'srgb\'}"]}},"any":{"type":"any"},"done":{"type":"any"}},"outputs":{"image":{"type":"`ID`&`J`","ref":true,"metadata":{"examples":["1"]}}},"metadata":{"icon":"edit-3","description":"...","link":"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getImageData","complexity":3,"tags":["platform","api","canvas"]},"id":"3ab81e83-5954-4bae-ad3e-ebf409dd23c4","base":true,"type":"`U`","system":true},"8e978642-b686-41fd-b2af-9a4c5db6bfa4":{"name":"image data","inputs":{"data":{"type":"`V`","ref":true},"width":{"type":"number","metadata":{"examples":["100"]}},"height":{"type":"number","metadata":{"examples":["100"]}},"opt":{"type":"{colorSpace?:\'srgb\'|\'display-p3\'}","metadata":{"examples":["{}","{colorSpace:\'srgb\'}"]}},"done":{"type":"any"}},"outputs":{"image":{"type":"`ID`&`J`","ref":true,"metadata":{"examples":["1"]}}},"metadata":{"icon":"edit-3","description":"...","link":"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getImageData","complexity":3,"tags":["platform","api","canvas"]},"id":"8e978642-b686-41fd-b2af-9a4c5db6bfa4","base":true,"type":"`U`","system":true},"3c47d4bc-315d-4600-a9cd-6e388b345980":{"name":"move to","inputs":{"d":{"type":"any[][]"},"x":{"type":"number"},"y":{"type":"number"}},"outputs":{"d":{"type":"any[][]"}},"metadata":{"icon":"edit-3","description":"start new sub-path at the point specified by the given x, y coordinates","complexity":3,"tags":["platform","api","canvas"]},"id":"3c47d4bc-315d-4600-a9cd-6e388b345980","base":true,"type":"`U`","system":true},"138d16a7-a200-4329-9b4a-17abd24943d4":{"name":"put image data","inputs":{"canvas":{"type":"`CA`","ref":true},"image":{"type":"`ID`","ref":true,"metadata":{"examples":["1"]}},"any":{"type":"any"},"dx":{"type":"number","metadata":{"examples":["0"]}},"dy":{"type":"number","metadata":{"examples":["0"]}},"x":{"type":"number","metadata":{"examples":["0"]}},"y":{"type":"number","metadata":{"examples":["0"]}},"width":{"type":"number","metadata":{"examples":["100"]}},"height":{"type":"number","metadata":{"examples":["100"]}}},"outputs":{"done":{"type":"true","defaultIgnored":true}},"metadata":{"icon":"edit-3","description":"...","link":"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/putImageData","complexity":3,"tags":["platform","api","canvas"]},"id":"138d16a7-a200-4329-9b4a-17abd24943d4","base":true,"type":"`U`","system":true},"8f7ce559-a046-45bc-8e98-c39934ed0ae6":{"name":"rotate","inputs":{"d":{"type":"(number|string)[][]"},"rad":{"type":"number"}},"outputs":{"d":{"type":"(number|string)[][]"}},"metadata":{"icon":"edit-3","description":"add a rotation to the transformation matrix","link":"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/rotate","complexity":3,"tags":["platform","api","canvas"]},"id":"8f7ce559-a046-45bc-8e98-c39934ed0ae6","base":true,"type":"`U`","system":true},"2e2bede5-41a9-4c35-8b02-482b610837ff":{"name":"scale","inputs":{"sx":{"type":"number","metadata":{"examples":["1","0.5","2"]}},"sy":{"type":"number","metadata":{"examples":["1","0.5","2"]}},"canvas":{"type":"`CA`","ref":true}},"outputs":{},"metadata":{"icon":"edit-3","description":"scale a `canvas`","complexity":3,"tags":["platform","api","canvas"]},"id":"2e2bede5-41a9-4c35-8b02-482b610837ff","base":true,"type":"`U`","system":true},"9a7c22e3-3de2-4c99-ac1f-b2f8ceffae99":{"name":"stroke","inputs":{"d":{"type":"any[][]"}},"outputs":{"d":{"type":"any[][]"}},"metadata":{"icon":"edit-3","description":"strokes (outlines) the current","complexity":3,"tags":["platform","api","canvas"]},"id":"9a7c22e3-3de2-4c99-ac1f-b2f8ceffae99","base":true,"type":"`U`","system":true},"c0e124ca-381a-414b-93a2-41526df02e28":{"name":"stroke path","inputs":{"d":{"type":"string"},"canvas":{"type":"`CA`","ref":true}},"outputs":{},"metadata":{"icon":"edit-3","description":"stroke a SVG path `d` on `canvas`","complexity":3,"tags":["platform","api","canvas"]},"id":"c0e124ca-381a-414b-93a2-41526df02e28","base":true,"type":"`U`","system":true},"83d22558-2c6f-4dd4-a231-baba798d1d97":{"name":"stroke style","inputs":{"d":{"type":"(number|string)[][]","metadata":{"examples":["[]"]}},"strokeStyle":{"type":"string"}},"outputs":{"d":{"type":"(number|string)[][]"}},"metadata":{"icon":"edit-3","description":"set the color, gradient, or pattern to use for stroke","complexity":3,"tags":["platform","api","canvas"]},"id":"83d22558-2c6f-4dd4-a231-baba798d1d97","base":true,"type":"`U`","system":true},"c9d64ef4-35f6-44e7-a16b-1e4173f951dc":{"name":"to blob","inputs":{"canvas":{"type":"`CA`","ref":true},"quality":{"type":"number","metadata":{"examples":["1"]}},"type":{"type":"string","metadata":{"examples":["\'image/png\'"]}},"done":{"type":"any"}},"outputs":{"blob":{"type":"`B`","ref":true,"icon":"binary"}},"metadata":{"icon":"edit-3","description":"...","link":"https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob","complexity":3,"tags":["platform","api","canvas"]},"id":"c9d64ef4-35f6-44e7-a16b-1e4173f951dc","base":true,"type":"`U`","system":true},"b2eb49a8-7a7a-446a-ad36-e7c1efdaf61f":{"name":"transfer from image bitmap","inputs":{"bitmap":{"type":"`IB`","ref":true},"canvas":{"type":"`IBRC`","ref":true},"init":{"type":"any"}},"outputs":{},"metadata":{"icon":"square","description":"draw an image `bitmap` on `canvas`","complexity":3,"tags":["platform","api","canvas"]},"id":"b2eb49a8-7a7a-446a-ad36-e7c1efdaf61f","base":true,"type":"`U`","system":true},"6f79ee03-4b3f-439c-b955-5529f3bebcc9":{"name":"translate","inputs":{"d":{"type":"(number|string)[][]"},"x":{"type":"number"},"y":{"type":"number"}},"outputs":{"d":{"type":"(number|string)[][]"}},"metadata":{"icon":"edit-3","description":"add a translation to the current transformation matrix","link":"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/translate","complexity":3,"tags":["platform","api","canvas"]},"id":"6f79ee03-4b3f-439c-b955-5529f3bebcc9","base":true,"type":"`U`","system":true},"0b5a71c6-5c43-4e55-a29c-27d9ff7ed43a":{"name":"text to clipboard","inputs":{"text":{"type":"string"}},"outputs":{},"metadata":{"icon":"clipboard","description":"","complexity":3,"tags":["platform","api","clipboard"]},"id":"0b5a71c6-5c43-4e55-a29c-27d9ff7ed43a","base":true,"type":"`U`","system":true},"874f508f-d027-4e0b-852e-b4027e714406":{"name":"add arc","inputs":{"d":{"type":"any[][]"},"arc":{"type":"{x:number,y:number,r:number,start:number,end:number,anticlockwise?:boolean}"}},"outputs":{"d":{"type":"any[][]"}},"metadata":{"icon":"edit-3","description":"adds a circular arc to the current sub-path","complexity":3,"tags":["platform","api","codec"]},"id":"874f508f-d027-4e0b-852e-b4027e714406","base":true,"type":"`U`","system":true},"ee4715e6-f479-11ea-b231-bf95a7f38a99":{"name":"append child","inputs":{"parent":{"type":"`C`","ref":true,"metadata":{"position":{"0":{"x":-116,"y":30}}}},"child":{"type":"`C`","metadata":{"examples":["${unit:{id:\'f27cae4e-fea8-11ea-b91e-db41e114c426\'}}"],"position":{"0":{"x":128,"y":30}}}}},"outputs":{"at":{"type":"number","defaultIgnored":true}},"base":true,"metadata":{"icon":"square","description":"append `child` instance to `parent`","complexity":3,"tags":["platform","api","component"]},"id":"ee4715e6-f479-11ea-b231-bf95a7f38a99","type":"`U`","system":true},"1ba97b81-5084-49b8-8fbf-227ccd31cabc":{"name":"detach","inputs":{"component":{"type":"`C`","ref":true},"host":{"type":"`C`","ref":true},"opt":{"type":"{animate?:boolean}"},"done":{"type":"any"}},"outputs":{},"base":true,"metadata":{"icon":"square","description":"visually append `component` to `host` without affecting tree structure","complexity":3,"tags":["platform","api","component"]},"id":"1ba97b81-5084-49b8-8fbf-227ccd31cabc","type":"`U`","system":true},"c475117a-02b9-11eb-b7c8-579fe4f6c669":{"name":"has child","inputs":{"parent":{"type":"`C`","ref":true,"metadata":{"position":{"0":{"x":-116,"y":30}}}},"at":{"type":"number","metadata":{"examples":["0"],"position":{"0":{"x":128,"y":30}}}}},"outputs":{"test":{"type":"boolean"}},"base":true,"metadata":{"icon":"square","description":"check whether `parent` has a child `at`","complexity":3,"tags":["platform","api","component"]},"id":"c475117a-02b9-11eb-b7c8-579fe4f6c669","type":"`U`","system":true},"41a8c91e-87f8-4d96-9714-33716f329f7b":{"name":"insert child","inputs":{"parent":{"type":"`C`","ref":true,"metadata":{"position":{"0":{"x":-116,"y":30}}}},"child":{"type":"`C`","metadata":{"examples":["${unit:{id:\'f27cae4e-fea8-11ea-b91e-db41e114c426\'}}"],"position":{"0":{"x":128,"y":30}}}},"at":{"type":"number","metadata":{"position":{"0":{"x":-116,"y":0}}}}},"outputs":{},"base":true,"metadata":{"icon":"square","description":"insert `child` instance to `parent` `at` position","complexity":3,"tags":["platform","api","component"]},"id":"41a8c91e-87f8-4d96-9714-33716f329f7b","type":"`U`","system":true},"1ba931d8-0226-4600-9a48-dbb1b17d8d82":{"name":"lookup","inputs":{"unit":{"type":"`U`","ref":true},"name":{"type":"string"},"done":{"type":"any"}},"outputs":{"ref":{"type":"any","ref":true}},"base":true,"metadata":{"icon":"square","description":"lookup a registered component by `name`","complexity":3,"tags":["platform","api","component"]},"id":"1ba931d8-0226-4600-9a48-dbb1b17d8d82","type":"`U`","system":true},"fb3fc7b4-3175-41ce-9546-cf3a07053cdc":{"name":"register","inputs":{"ref":{"type":"any","ref":true},"unit":{"type":"`U`","ref":true},"name":{"type":"string"},"done":{"type":"any"}},"outputs":{},"base":true,"metadata":{"icon":"square","description":"register `ref` on `unit` scope","complexity":3,"tags":["platform","api","component"]},"id":"fb3fc7b4-3175-41ce-9546-cf3a07053cdc","type":"`U`","system":true},"6dbff818-02b9-11eb-9ee7-93b57419f741":{"name":"remove child","inputs":{"parent":{"type":"`C`","ref":true},"at":{"type":"number","metadata":{"examples":["0"]}}},"outputs":{"unit":{"type":"`U`&`C`","defaultIgnored":true}},"base":true,"metadata":{"icon":"square","description":"remove `parent` child element `at` index","complexity":3,"tags":["platform","api","component"]},"id":"6dbff818-02b9-11eb-9ee7-93b57419f741","type":"`U`","system":true},"e7232263-a2cf-4f2b-a862-4fc85933d09f":{"name":"log","inputs":{"message":{"type":"any"}},"metadata":{"icon":"terminal","description":"print on the console","complexity":3,"tags":["platform","api","console"]},"id":"e7232263-a2cf-4f2b-a862-4fc85933d09f","base":true,"type":"`U`","system":true},"a1cd3c3c-b1fa-40a2-80d1-32f416264a3d":{"name":"dispatch","inputs":{"element":{"type":"`C`","ref":true},"event":{"type":"string"},"data":{"type":"any"},"opt":{"type":"{bubbles?:boolean}","metadata":{"examples":["{},{bubbles:true},{bubbles:false}"]}}},"outputs":{},"metadata":{"icon":"circle","description":"dispatch a custom `event` with `data` on `element`","complexity":3,"tags":["platform","api","event"]},"id":"a1cd3c3c-b1fa-40a2-80d1-32f416264a3d","base":true,"type":"`U`","system":true},"367241d8-ad12-11ea-beed-9777f31699a8":{"name":"listen","inputs":{"emitter":{"type":"`EE`","ref":true},"event":{"type":"string"},"remove":{"type":"any","defaultIgnored":true}},"outputs":{"data":{"type":"any"}},"metadata":{"icon":"circle","description":"listen to `emitter` `event`","complexity":3,"tags":["platform","api","event"]},"id":"367241d8-ad12-11ea-beed-9777f31699a8","base":true,"type":"`U`","system":true},"77238fd9-a968-454d-b7ce-0277bc37475d":{"name":"gamepad","type":"`U`","inputs":{"i":{"type":"number","metadata":{"examples":["0"]}},"done":{"type":"any"}},"outputs":{"state":{"type":"`V`&`EE`","ref":true}},"events":{},"metadata":{"icon":"gamepad","description":"connect to gamepad controller","complexity":3,"tags":["platform","api","gamepad"]},"id":"77238fd9-a968-454d-b7ce-0277bc37475d","base":true,"system":true},"a9cba5ec-940d-42a3-b861-86197402cbe4":{"name":"geolocation","inputs":{"any":{"type":"any"}},"outputs":{"position":{"type":"{\\"latitude\\":number,\\"longitude\\":number}"}},"metadata":{"icon":"map-pin","description":"current gps latitude and latitude","complexity":3,"tags":["platform","api","geolocation"]},"id":"a9cba5ec-940d-42a3-b861-86197402cbe4","base":true,"type":"`U`","system":true},"817c76ba-a71c-4136-af86-bd6b69106c45":{"name":"local channel","inputs":{"channel":{"type":"string","metadata":{"description":"name of the channel"}},"close":{"type":"any","metadata":{"description":"signal to close channel"}}},"outputs":{"channel":{"type":"`CH`","ref":true}},"metadata":{"icon":"broadcast-tower","description":"channel for local communication","complexity":9,"tags":["platform","api","local"]},"id":"817c76ba-a71c-4136-af86-bd6b69106c45","base":true,"type":"`U`","system":true},"30f6738c-1938-4dcd-9e7f-6c10f9730021":{"name":"location","inputs":{"any":{"type":"any"}},"outputs":{"url":{"type":"string"}},"metadata":{"icon":"map-pin","description":"current web context location url","complexity":3,"tags":["platform","api","location"]},"id":"30f6738c-1938-4dcd-9e7f-6c10f9730021","base":true,"type":"`U`","system":true},"210632fc-f85b-4f13-a2a9-f689ff85da78":{"name":"analyser node","inputs":{"node":{"type":"`AC`|`AN`","ref":true},"opt":{"type":"{fftSize?:number,frequencyBinCount?:number,minDecibels?:number,maxDecibels?:number,smoothingTimeConstant?:number}","metadata":{"description":"","examples":["{fftSize:2048}"]}}},"outputs":{"node":{"type":"`AAN`&`AN`","ref":true}},"metadata":{"icon":"activity","description":"provide real-time frequency and time-domain analysis information from input `node`","complexity":12,"tags":["platform","api","media","audio"],"globals":["AudioAnalyser"]},"id":"210632fc-f85b-4f13-a2a9-f689ff85da78","base":true,"type":"`U`","system":true},"f5df301d-da63-492a-9e59-950289fe6ba9":{"name":"audio context","inputs":{"opt":{"type":"object","metadata":{"description":""}}},"outputs":{"ctx":{"type":"`AC`","ref":true}},"metadata":{"icon":"sliders","description":"control an audio-processing graph built from audio modules linked together","complexity":12,"tags":["platform","api","media","audio"],"globals":["AudioContext"]},"id":"f5df301d-da63-492a-9e59-950289fe6ba9","base":true,"type":"`U`","system":true},"71ff4fda-5878-4d4c-b55b-c2c79d8dc546":{"name":"audio destination node","inputs":{"node":{"type":"`AN`","ref":true}},"outputs":{},"metadata":{"icon":"speaker","description":"// TODO","complexity":12,"tags":["platform","api","media","audio"],"globals":["AudioDestinationNode"]},"id":"71ff4fda-5878-4d4c-b55b-c2c79d8dc546","base":true,"type":"`U`","system":true},"5c13db99-0923-4b27-85e3-7a18dbfdd309":{"name":"audio source","inputs":{"src":{"type":"string","metadata":{"description":"URL of the a media resource"}}},"outputs":{"stream":{"type":"`MS`","ref":true}},"metadata":{"icon":"file-output","description":"streams audio from a source url","complexity":12,"tags":["platform","api","media","audio"],"globals":["Audio"]},"id":"5c13db99-0923-4b27-85e3-7a18dbfdd309","base":true,"type":"`U`","system":true},"a7dee8c6-15a3-4b7e-8f63-03f13a7d34a9":{"name":"audio target","inputs":{"stream":{"type":"`MS`","ref":true},"id":{"type":"string"}},"outputs":{},"metadata":{"icon":"headphones","description":"play audio stream on a selected device","complexity":12,"tags":["platform","api","media","audio"],"globals":["Audio"]},"id":"a7dee8c6-15a3-4b7e-8f63-03f13a7d34a9","base":true,"type":"`U`","system":true},"9543c94b-e19e-430b-8a48-9cda8dae44c5":{"name":"delay node","inputs":{"node":{"type":"`AC`|`AN`","ref":true},"gain":{"type":"number","metadata":{"description":"","examples":["1","0","0.5"]}}},"outputs":{"node":{"type":"`ON`&`AN`","ref":true}},"metadata":{"icon":"activity","description":"periodic waveform, such as a sine wave","complexity":12,"tags":["platform","api","media","audio"],"globals":["AudioContext"]},"id":"9543c94b-e19e-430b-8a48-9cda8dae44c5","base":true,"type":"`U`","system":true},"a8d7c089-0385-4922-bb3a-6c550a8a1b3b":{"name":"gain node","inputs":{"node":{"type":"`AC`|`AN`","ref":true},"gain":{"type":"number","metadata":{"description":"","examples":["1","0","0.5"]}}},"outputs":{"node":{"type":"`ON`&`AN`","ref":true}},"metadata":{"icon":"activity","description":"periodic waveform, such as a sine wave","complexity":12,"tags":["platform","api","media","audio"],"globals":["AudioContext"]},"id":"a8d7c089-0385-4922-bb3a-6c550a8a1b3b","base":true,"type":"`U`","system":true},"2ec96f8b-4ea5-4ba8-ab8d-a00105c6cb71":{"name":"get byte frequency data","inputs":{"node":{"type":"`AAN`","ref":true},"opt":{"type":"{}","metadata":{"description":"","examples":["{fftSize:2048}"]}},"done":{"type":"any"}},"outputs":{"data":{"type":"`A`","ref":true}},"metadata":{"icon":"activity","description":"copies the current frequency data into a unsigned byte array","complexity":12,"tags":["platform","api","media","audio"],"globals":["AudioAnalyser"]},"id":"2ec96f8b-4ea5-4ba8-ab8d-a00105c6cb71","base":true,"type":"`U`","system":true},"e4ea5dce-10ea-434b-a93d-c874a92f2f39":{"name":"get byte time domain data","inputs":{"node":{"type":"`AAN`","ref":true},"opt":{"type":"{}","metadata":{"description":"","examples":["{fftSize:2048}"]}},"done":{"type":"any"}},"outputs":{"data":{"type":"`A`","ref":true}},"metadata":{"icon":"activity","description":"copies the current time data into an unsigned byte array","complexity":12,"tags":["platform","api","media","audio"],"globals":["AudioAnalyser"]},"id":"e4ea5dce-10ea-434b-a93d-c874a92f2f39","base":true,"type":"`U`","system":true},"31408be3-cc2a-490a-b0d1-96e0028ca68e":{"name":"media stream audio source node","inputs":{"node":{"type":"`AC`|`AN`","ref":true},"opt":{"type":"{}","metadata":{"description":"","examples":["{}"]}},"stream":{"type":"`MS`","ref":true}},"outputs":{"node":{"type":"`AN`","ref":true}},"metadata":{"icon":"activity","description":"periodic waveform, such as a sine wave","complexity":12,"tags":["platform","api","media","audio"],"globals":["AudioContext"]},"id":"31408be3-cc2a-490a-b0d1-96e0028ca68e","base":true,"type":"`U`","system":true},"33c623e5-bce2-4f30-9a98-50218bb6c431":{"name":"mixer node","inputs":{"a":{"type":"`AN`","ref":true},"b":{"type":"`AN`","ref":true}},"outputs":{"node":{"type":"`AN`","ref":true}},"metadata":{"icon":"activity","description":"add two audio signals together","complexity":12,"tags":["platform","api","media","audio"],"globals":["AudioContext"]},"id":"33c623e5-bce2-4f30-9a98-50218bb6c431","base":true,"type":"`U`","system":true},"c2738ec3-72fa-4432-96b9-74abb1a6f26a":{"name":"oscillator node","inputs":{"node":{"type":"`AC`|`AN`","ref":true},"opt":{"type":"{frequency?:number,type?:string,detune?:number}","metadata":{"description":"","examples":["{type:\'sine\',frequency:440}"]}}},"outputs":{"node":{"type":"`ON`&`AN`","ref":true},"frequency":{"type":"`V`","ref":true,"defaultIgnored":true},"detune":{"type":"`V`","ref":true,"defaultIgnored":true}},"metadata":{"icon":"activity","description":"periodic waveform, such as a sine wave","complexity":12,"tags":["platform","api","media","audio"],"globals":["AudioContext"]},"id":"c2738ec3-72fa-4432-96b9-74abb1a6f26a","base":true,"type":"`U`","system":true},"30e125ba-af81-11ea-ba6b-e70218ca7afe":{"name":"capture stream","inputs":{"source":{"type":"`CS`","ref":true},"opt":{"type":"{frameRate?:number}","metadata":{"examples":["{}","{frameRate:60}"]}},"stop":{"type":"any"}},"outputs":{"stream":{"type":"`MS`","ref":true}},"metadata":{"icon":"square","description":"request a stream containing a real-time video capture of the `media` element","complexity":12,"tags":["platform","api","media"],"globals":["MediaSource"]},"base":true,"id":"30e125ba-af81-11ea-ba6b-e70218ca7afe","type":"`U`&`MS`","system":true},"b5ab65ce-4306-4a46-8d3c-36b6c29b1c60":{"name":"download text","inputs":{"text":{"type":"string","metadata":{"examples":["\\"unit\\""]}},"name":{"type":"string","metadata":{"examples":["\\"text\\""]}},"mimetype":{"type":"string","metadata":{"examples":["\\"text/plain\\"","\\"application/json\\""]}},"charset":{"type":"string","metadata":{"examples":["\\"utf-8\\""]}}},"outputs":{},"id":"b5ab65ce-4306-4a46-8d3c-36b6c29b1c60","metadata":{"icon":"download","description":"download a `text` string","complexity":3,"tags":["platform","api","media","download"]},"type":"`U`","base":true,"system":true},"c18c8f59-f3c8-49a8-9dbd-ed30fdf856e9":{"name":"download url","inputs":{"url":{"type":"string","metadata":{"examples":[]}},"name":{"type":"string"}},"outputs":{},"id":"c18c8f59-f3c8-49a8-9dbd-ed30fdf856e9","metadata":{"icon":"download","description":"download whatever is at the given `url`","complexity":3,"tags":["platform","api","media","download"]},"type":"`U`","base":true,"system":true},"3511f756-2a02-4346-b417-8c34502f79d4":{"name":"enumerate devices","inputs":{"any":{"type":"any"}},"outputs":{"devices":{"type":"{deviceId:string,groupId:string,kind:string,label:string}[]"}},"metadata":{"icon":"list","description":"output a list of the available media input and output devices, such as microphones, cameras, headsets, and so forth","complexity":3,"tags":["platform","api","media"]},"id":"3511f756-2a02-4346-b417-8c34502f79d4","base":true,"type":"`U`","system":true},"6705462c-5b47-11eb-9dfc-2f14c58b2789":{"name":"get display media","inputs":{"opt":{"type":"{audio?:boolean,video?:boolean}"}},"outputs":{"stream":{"type":"`MS`","ref":true}},"id":"6705462c-5b47-11eb-9dfc-2f14c58b2789","base":true,"metadata":{"icon":"film","complexity":12,"tags":["platform","api","media"],"globals":["MediaDevices"],"href":""},"type":"`U`","system":true},"0bc0c4ad-d2e0-4e3e-92e8-5b9dfee1cf5e":{"name":"get video tracks","inputs":{"stream":{"type":"`MS`","ref":true},"init":{"type":"any"},"done":{"type":"any"}},"outputs":{"tracks":{"type":"`MST`[]","ref":true}},"id":"0bc0c4ad-d2e0-4e3e-92e8-5b9dfee1cf5e","base":true,"metadata":{"icon":"film","complexity":12,"tags":["platform","api","media"],"globals":["MediaStreamTrack"]},"type":"`U`","system":true},"f238caff-3f71-40d9-b1a9-d992060fea04":{"name":"grab frame","inputs":{"camera":{"type":"`IC`","ref":true},"init":{"type":"any"},"done":{"type":"any"}},"outputs":{"image":{"type":"`IB`","ref":true}},"id":"f238caff-3f71-40d9-b1a9-d992060fea04","base":true,"metadata":{"icon":"film","complexity":12,"tags":["platform","api","media"],"globals":["MediaRecorder"]},"type":"`U`","system":true},"262beb5f-21bd-4848-a62d-185f6f8a78e1":{"name":"image to bitmap","inputs":{"opt":{"type":"{imageOrientation?:\'none\'|\'flipY\',premultiplyAlpha?:\'none\'|\'premultiply\'|\'default\',colorSpaceConversion?:\'none\'|\'default\',resizeWidth?:number,resizeHeight?:number,resizeQuality?:\'pixelated\'|\'low\'|\'medium\'}","metadata":{"examples":["{}"]}},"image":{"type":"`IM`","ref":true},"rect":{"type":"{x?:number,y?:number,width?:number,height?:number}","metadata":{"examples":["{}"]}}},"outputs":{"bitmap":{"type":"`IB`","ref":true}},"id":"262beb5f-21bd-4848-a62d-185f6f8a78e1","base":true,"metadata":{"icon":"image","complexity":12,"description":"transform image to bitmap","tags":["platform","api","media","image"],"globals":["MediaRecorder"]},"type":"`U`","system":true},"a57383a9-5b24-4dbb-a5d1-0e278d036f89":{"name":"image capture","inputs":{"track":{"type":"`MST`","ref":true},"init":{"type":"any"},"done":{"type":"number"}},"outputs":{"camera":{"type":"`IC`","ref":true}},"id":"a57383a9-5b24-4dbb-a5d1-0e278d036f89","base":true,"metadata":{"icon":"film","complexity":12,"tags":["platform","api","media"],"globals":["ImageCapture"]},"type":"`U`","system":true},"7e1b3a4c-be6b-11eb-b098-1b6b9db93f1e":{"name":"media recorder","inputs":{"opt":{"type":"{mimeType?:string,bitsPerSecond?:number,audioBitsPerSecond?:number,videoBitsPerSecond?:number}","metadata":{"examples":["{mimeType:\\"video/webm;codecs=h264\\",audioBitsPerSecond:128000,videoBitsPerSecond:3145728}"]}},"start":{"type":"number","metadata":{"examples":["2000"]}},"stop":{"type":"any"},"stream":{"type":"`MS`","ref":true}},"outputs":{"blob":{"type":"`B`","ref":true}},"id":"7e1b3a4c-be6b-11eb-b098-1b6b9db93f1e","base":true,"metadata":{"icon":"film","complexity":12,"tags":["platform","api","media"],"globals":["MediaRecorder"]},"type":"`U`","system":true},"3889d2f1-a0ed-4e8c-8e75-7a6683224275":{"name":"request picture in picture","inputs":{"media":{"type":"`PS`","ref":true},"opt":{"type":"{}"},"stop":{"type":"any"}},"outputs":{},"metadata":{"complexity":12,"icon":"arrow-up-right","description":"...","tags":["platform","api","media"],"globals":["Video"]},"base":true,"id":"3889d2f1-a0ed-4e8c-8e75-7a6683224275","type":"`U`&`PP`","system":true},"a6e30b43-9ab4-4206-bfba-3f2129faac30":{"name":"user media","inputs":{"opt":{"type":"{audio?:boolean,video?:boolean}"}},"outputs":{"stream":{"type":"`MS`","ref":true}},"id":"a6e30b43-9ab4-4206-bfba-3f2129faac30","base":true,"metadata":{"icon":"film","complexity":12,"tags":["platform","api","media"],"globals":["MediaDevices"]},"type":"`U`","system":true},"41de8d5e-2c41-441c-ad29-cc3f5d4e6c7a":{"name":"event source","inputs":{"url":{"type":"string","metadata":{"examples":["\'/\'"]}},"close":{"type":"any","defaultIgnored":true}},"outputs":{"emitter":{"type":"`EE`","ref":true}},"metadata":{"icon":"network","description":"opens a persistent connection to an HTTP server, which sends events in text/event-stream format","link":"https://developer.mozilla.org/en-US/docs/Web/API/EventSource","complexity":3,"tags":["platform","api","network"]},"id":"41de8d5e-2c41-441c-ad29-cc3f5d4e6c7a","base":true,"type":"`U`","system":true},"c5856fdc-5154-46ab-a414-47f37af39da1":{"name":"fetch","inputs":{"url":{"type":"string","metadata":{"examples":["\'/\'"]}},"opt":{"type":"{body?:string|null,headers?:object,method?:string}","metadata":{"examples":["{method:\'GET\'}"]}}},"outputs":{"response":{"type":"{status:number,body:string}"}},"metadata":{"icon":"send","description":"fetch a resource across the network through HTTP","link":"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API","complexity":3,"tags":["platform","api","network"]},"id":"c5856fdc-5154-46ab-a414-47f37af39da1","base":true,"type":"`U`","system":true},"b8fc168e-ee2f-11ea-a42a-730934861ff1":{"name":"web socket","inputs":{"url":{"type":"string"},"close":{"type":"any","optional":true}},"outputs":{},"metadata":{"icon":"network","description":"create, manage and message a WebSocket connection to a server","link":"https://developer.mozilla.org/en-US/docs/Web/API/WebSocket","complexity":3,"tags":["platform","api","network"]},"id":"b8fc168e-ee2f-11ea-a42a-730934861ff1","base":true,"type":"`U`&`CH`","system":true},"29e974cc-081b-11eb-a607-1fd4ec67a52f":{"name":"close","inputs":{"this":{"short":"ntf","type":"`U`","ref":true},"any":{"type":"any"}},"outputs":{},"metadata":{"icon":"bell","description":"remove `notification` from system tray","complexity":10,"tags":["platform","api","notification"]},"id":"29e974cc-081b-11eb-a607-1fd4ec67a52f","type":"`U`","system":true},"bb029770-080e-11eb-9d38-f314d076f14b":{"name":"notification","inputs":{},"outputs":{},"metadata":{"icon":"bell","description":"notification object","complexity":3,"tags":["platform","api","notification"]},"id":"bb029770-080e-11eb-9d38-f314d076f14b","base":true,"type":"`U`","system":true},"5aea0bf0-0815-11eb-9304-5f90b5542620":{"name":"show","inputs":{"this":{"type":"`U`","ref":true},"title":{"type":"string"},"opt":{"type":"{icon?:string,body?:string}"}},"outputs":{},"metadata":{"icon":"bell","description":"push `notification` to system tray","complexity":14,"tags":["platform","api","notification"]},"id":"5aea0bf0-0815-11eb-9304-5f90b5542620","type":"`U`","system":true},"2f2d5ea4-6dd2-406e-a095-5552ebc235e7":{"name":"size observer","inputs":{"component":{"type":"`C`","ref":true}},"outputs":{"width":{"type":"number"},"height":{"type":"number"}},"metadata":{"icon":"ruler","description":"watch the size of a component","complexity":3,"tags":["platform","api","observer"]},"id":"2f2d5ea4-6dd2-406e-a095-5552ebc235e7","base":true,"type":"`U`","system":true},"755b0a17-1b09-45b4-bb7d-e63d21009efd":{"name":"peer duplex","inputs":{"offer":{"plug":{"0":{"unitId":"receiver","pinId":"offer"}},"metadata":{"position":{"0":{"x":84,"y":-91}}}},"answer":{"plug":{"0":{"unitId":"transmitter","pinId":"answer"}},"metadata":{"position":{"0":{"x":-81,"y":87}}}},"stream":{"plug":{"0":{"unitId":"transmitter","pinId":"stream"}},"ref":true,"metadata":{"position":{"0":{"x":-126,"y":50}}}},"close":{"plug":{"0":{"mergeId":"hjpqrffi"}},"metadata":{"position":{"0":{"x":-17,"y":-27}}}},"message":{"plug":{"0":{"unitId":"send","pinId":"data"}},"type":"any","metadata":{"position":{"0":{"x":-188,"y":-25}}}},"opt":{"plug":{"0":{"mergeId":"2"}},"ref":false}},"outputs":{"stream":{"plug":{"0":{"unitId":"receiver","pinId":"stream"}},"ref":true,"metadata":{"position":{"0":{"x":112,"y":45}}}},"answer":{"plug":{"0":{"unitId":"receiver","pinId":"answer"}},"metadata":{"position":{"0":{"x":6,"y":-83}}}},"offer":{"plug":{"0":{"unitId":"transmitter","pinId":"offer"}},"metadata":{"position":{"0":{"x":-8,"y":73}}}},"message":{"plug":{"0":{"unitId":"onmessage","pinId":"message"}},"type":"any","metadata":{"position":{"0":{"x":196,"y":-39}}}}},"units":{"send":{"id":"b296242e-8b82-11eb-ac6c-0f8d3f9948d0","input":{"data":{"metadata":{"position":{"x":-163,"y":-14}}}},"output":{},"metadata":{"position":{"x":-121,"y":27}}},"transmitter":{"id":"7375aad5-50fd-403c-80ae-471b95088f04","input":{"answer":{"metadata":{"position":{"x":-78,"y":59}}},"stream":{"metadata":{"position":{"x":-103,"y":32}}},"close":{},"opt":{}},"output":{"offer":{"metadata":{"position":{"x":-20,"y":47}}},"emitter":{}},"metadata":{"position":{"x":-57,"y":54}}},"receiver":{"id":"f079a38e-fb4f-496e-8e5f-d5e03a590cda","input":{"offer":{"metadata":{"position":{"x":81,"y":-62}}},"close":{},"opt":{}},"output":{"stream":{"metadata":{"position":{"x":97,"y":11}}},"answer":{"metadata":{"position":{"x":16,"y":-56}}},"emitter":{}},"metadata":{"position":{"x":26,"y":-36}}},"onmessage":{"id":"23c3952a-ef19-11ea-b80e-3f693508091e","input":{"emitter":{}},"output":{"message":{}},"metadata":{"position":{"x":150,"y":-47}}}},"merges":{"0":{"onmessage":{"input":{"emitter":true}},"receiver":{"output":{"emitter":true}}},"1":{"send":{"input":{"emitter":true}},"transmitter":{"output":{"emitter":true}}},"2":{"transmitter":{"input":{"opt":true}},"receiver":{"input":{"opt":true}}},"hjpqrffi":{"transmitter":{"input":{"close":true}},"receiver":{"input":{"close":true}}}},"component":{},"metadata":{"icon":"link","complexity":33,"tags":["platform","api","peer"],"position":{"merge":{"hjpqrffi":{"x":-3,"y":-4}}}},"id":"755b0a17-1b09-45b4-bb7d-e63d21009efd","type":"`U`&`G`","system":true},"d4ec46ab-d065-4d1c-9357-fa8b95be0c36":{"name":"peer graph","inputs":{"offer":{"type":"string"},"opt":{"type":"{iceServers:{urls:string[]}[]}","metadata":{"examples":["{iceServers:[{urls:[\'stun:stun.l.google.com:19302\']}]}"]}},"close":{"type":"any","defaultIgnored":true}},"outputs":{"answer":{"type":"string"},"graph":{"type":"`U`&`G`","ref":true,"icon":"graph"}},"metadata":{"icon":"link","description":"remote peer graph","complexity":9,"tags":["platform","api","peer"]},"id":"d4ec46ab-d065-4d1c-9357-fa8b95be0c36","base":true,"type":"`U`","system":true},"f079a38e-fb4f-496e-8e5f-d5e03a590cda":{"name":"peer receiver","inputs":{"offer":{"type":"string"},"close":{"type":"any"},"opt":{"type":"{iceServers:{urls:string[]}[]}","metadata":{"examples":["{iceServers:[{urls:[\'stun:stun.l.google.com:19302\']}]}"]}}},"outputs":{"stream":{"type":"`MS`","ref":true},"answer":{"type":"string"},"emitter":{"type":"`EE`","ref":true}},"metadata":{"icon":"link","description":"Peer to Peer (P2P) Receiver","complexity":9,"tags":["platform","api","peer"]},"id":"f079a38e-fb4f-496e-8e5f-d5e03a590cda","base":true,"type":"`U`&``","system":true},"16fa715f-fc94-43f7-831e-335037c8daea":{"name":"peer share graph","inputs":{"graph":{"type":"`U`&`G`","ref":true},"opt":{"type":"{iceServers:{urls:string[]}[]}","metadata":{"examples":["{iceServers:[{urls:[\'stun:stun.l.google.com:19302\']}]}"]}},"answer":{"type":"string"},"close":{"type":"any","defaultIgnored":true}},"outputs":{"offer":{"type":"string"}},"metadata":{"icon":"link","description":"allow remote peer to connect to this graph","complexity":11,"tags":["platform","api","peer"]},"id":"16fa715f-fc94-43f7-831e-335037c8daea","base":true,"type":"`U`","system":true},"7375aad5-50fd-403c-80ae-471b95088f04":{"name":"peer transmitter","inputs":{"answer":{"type":"string"},"stream":{"type":"`MS`","ref":true},"opt":{"type":"{iceServers:{urls:string[]}[]}","metadata":{"examples":["{iceServers:[{urls:[\'stun:stun.l.google.com:19302\']}]}"]}},"close":{"type":"any"}},"outputs":{"offer":{"type":"string"},"channel":{"type":"`CH`","ref":true}},"metadata":{"icon":"link","description":"output `offer` and input `answer` to stablish a Peer to Peer (P2P) connection with a remote peer","complexity":3,"tags":["platform","api","peer"]},"id":"7375aad5-50fd-403c-80ae-471b95088f04","base":true,"type":"`U`","system":true},"d3fc887c-9fc5-11eb-8f63-ab42b0414469":{"name":"set pointer capture","inputs":{"element":{"type":"`U`","ref":true},"pointerId":{"type":"number"},"done":{"type":"any"}},"outputs":{},"metadata":{"icon":"mouse-pointer","description":"hear me","complexity":3,"tags":["platform","api","pointer"]},"id":"d3fc887c-9fc5-11eb-8f63-ab42b0414469","base":true,"type":"`U`","system":true},"de9665db-a188-4252-99f0-ea50fc343058":{"name":"scroll into view","inputs":{"component":{"type":"`C`","ref":true},"opt":{"type":"{}"}},"outputs":{},"metadata":{"icon":"send","description":"scroll parent until `component` is visible","complexity":3,"tags":["platform","api","scroll"]},"base":true,"id":"de9665db-a188-4252-99f0-ea50fc343058","type":"`U`","system":true},"b296242e-8b82-11eb-ac6c-0f8d3f9948d0":{"name":"send","inputs":{"channel":{"type":"`CH`","ref":true},"data":{"type":"any"}},"outputs":{},"metadata":{"icon":"send","description":"send `data` through `channel`","complexity":3,"tags":["platform","api"]},"base":true,"id":"b296242e-8b82-11eb-ac6c-0f8d3f9948d0","type":"`U`","system":true},"04eda925-4423-40c8-83c8-2117a0d81185":{"name":"share","inputs":{"data":{"type":"{text:string,url:string,title:string}"}},"outputs":{},"metadata":{"icon":"share","description":"watch the size of a component","complexity":3,"tags":["platform","api","share"]},"id":"04eda925-4423-40c8-83c8-2117a0d81185","base":true,"type":"`U`","system":true},"2afcfde0-76d3-4045-a99c-c9809d71307a":{"name":"speech recognition","inputs":{"opt":{"type":"{grammars?:{type:\'string\'|\'url\',value:string,weight:number}[],lang?:string,interimResults?:boolean,maxAlternatives?:number,continuous?:boolean}"}},"outputs":{"emitter":{"type":"`EE`","ref":true}},"metadata":{"icon":"mic","description":"hear me","complexity":3,"tags":["platform","api","speech"]},"id":"2afcfde0-76d3-4045-a99c-c9809d71307a","base":true,"type":"`U`","system":true},"416550cc-6e02-4ff2-aafa-2f0edbf121c6":{"name":"speech to text","inputs":{"opt":{"type":"{grammars?:string[],lang?:string,interimResults?:boolean,maxAlternatives?:number,continuous?:boolean}","metadata":{"examples":["{grammars:[],lang:\'en-us\',maxAlternatives:1,interimResults:false,continuous:false}"]}},"stop":{"type":"any","metadata":{"examples":["\'en-us\'"]}}},"outputs":{"text":{"type":"string"}},"metadata":{"icon":"mic","description":"hear me","complexity":3,"tags":["platform","api","speech"]},"id":"416550cc-6e02-4ff2-aafa-2f0edbf121c6","base":true,"type":"`U`","system":true},"6db29a62-2035-4cfc-a9d3-03444a8bc2b8":{"name":"text to speech","inputs":{"message":{"type":"string","metadata":{"examples":["\'hello world\'","\'welcome to unit!\'"]}},"voice":{"type":"number","metadata":{"examples":["0"]}}},"outputs":{},"metadata":{"icon":"message-circle","description":"speak the message","complexity":3,"tags":["platform","api","speech"]},"id":"6db29a62-2035-4cfc-a9d3-03444a8bc2b8","base":true,"type":"`U`","system":true},"c8f3faa8-09f4-11eb-a3b1-477aa3ec4193":{"name":"local storage","inputs":{},"outputs":{},"metadata":{"icon":"table","description":"persist data on local storage","complexity":11,"tags":["platform","api","storage"],"globals":["LocalStorage"]},"id":"c8f3faa8-09f4-11eb-a3b1-477aa3ec4193","base":true,"type":"`U`&`V`&`J`","system":true},"dc513ed0-09f4-11eb-a54a-7f4d4e253ef5":{"name":"session storage","inputs":{},"outputs":{},"metadata":{"icon":"table","description":"persist data on current session storage","complexity":12,"tags":["platform","api","storage"],"globals":["SessionStorage"]},"id":"dc513ed0-09f4-11eb-a54a-7f4d4e253ef5","base":true,"type":"`U`&`V`&`J`","system":true},"08ff535a-93a7-403c-a1ef-c59cdb50ccf0":{"name":"decrypt","inputs":{"hash":{"type":"string"}},"outputs":{"value":{"type":"string"}},"metadata":{"icon":"table","description":"decrypt `hash` with user private key","complexity":12,"tags":["platform","api","system","user"],"globals":["LocalStorage"]},"id":"08ff535a-93a7-403c-a1ef-c59cdb50ccf0","base":true,"type":"`U`","system":true},"0f041192-1ff3-4094-93da-9264480ad5e2":{"name":"public key","inputs":{"any":{"type":"any"}},"outputs":{"key":{"type":"string"}},"metadata":{"icon":"table","description":"get user\'s public key","complexity":12,"tags":["platform","api","system","user"],"globals":["LocalStorage"]},"id":"0f041192-1ff3-4094-93da-9264480ad5e2","base":true,"type":"`U`","system":true},"58846eae-1650-41e7-ad42-a75b9c32332a":{"name":"sign","inputs":{"value":{"type":"string"}},"outputs":{"hash":{"type":"string"}},"metadata":{"icon":"table","description":"sign `value` with user\'s private key","complexity":12,"tags":["platform","api","system","user"],"globals":["LocalStorage"]},"id":"58846eae-1650-41e7-ad42-a75b9c32332a","base":true,"type":"`U`","system":true},"b949221c-8227-4178-bde4-5e8754a7ed39":{"name":"request animation frame","inputs":{"a":{"type":"<A>"}},"outputs":{"a":{"type":"<A>"}},"metadata":{"icon":"timer","description":"output `a` in the next animation frame","complexity":3,"tags":["platform","api","time"]},"id":"b949221c-8227-4178-bde4-5e8754a7ed39","base":true,"type":"`U`","system":true},"baadad13-b70f-4310-b4aa-8c81fe5a9d69":{"name":"transfer","inputs":{"unit":{"type":"`CH`","ref":true},"data":{"type":"`B`","ref":true}},"outputs":{},"metadata":{"icon":"send","description":"send an arbitrary datum to `unit`","complexity":3,"tags":["platform","api"]},"base":true,"id":"baadad13-b70f-4310-b4aa-8c81fe5a9d69","type":"`U`","system":true},"1d5b6bb0-f18e-4428-a350-a29d8ca3ff4a":{"name":"create blob url","inputs":{"blob":{"type":"`B`","ref":true},"init":{"type":"any"}},"outputs":{"url":{"type":"string"}},"metadata":{"icon":"tilde","description":"encode URI to UTF-8","complexity":3,"tags":["platform","api","URI"]},"id":"1d5b6bb0-f18e-4428-a350-a29d8ca3ff4a","type":"`U`","base":true,"system":true},"5bd48844-67c6-4fdc-b23b-f03cd561877f":{"name":"encode URI","inputs":{"uri":{"type":"string","metadata":{"examples":["web+unit://ioun.it"]}}},"outputs":{"UTF-8":{"type":"string"}},"metadata":{"icon":"tilde","description":"encode URI to UTF-8","complexity":3,"tags":["platform","api","URI"]},"id":"5bd48844-67c6-4fdc-b23b-f03cd561877f","type":"`U`","base":true,"system":true},"27e2f302-c23a-4447-abde-8309a94b331d":{"name":"encode URI component","inputs":{"text":{"type":"string","metadata":{"examples":["web+unit://ioun.it"]}}},"outputs":{"uri":{"type":"string"}},"metadata":{"icon":"tilde","description":"encodes a text string as a valid component of a Uniform Resource Identifier (URI).","complexity":3,"tags":["platform","api","URI"]},"id":"27e2f302-c23a-4447-abde-8309a94b331d","type":"`U`","base":true,"system":true},"81ac8195-57ed-4b22-b8b8-fe3e68b11af0":{"name":"parse url","inputs":{"url":{"type":"string","metadata":{"examples":["\\"https://unit.land\\"","\\"https://unit.moe\\"","\\"https://ioun.it\\""]}}},"outputs":{"obj":{"type":"{protocol:string,hostname:string,pathname:string,search:string,hash:string}"}},"metadata":{"icon":"tilde","description":"decode `url` into its segments `obj`","complexity":3,"tags":["platform","api","URL"]},"id":"81ac8195-57ed-4b22-b8b8-fe3e68b11af0","type":"`U`","base":true,"system":true},"68992d62-d5ca-11ea-888d-97179b32b7ab":{"name":"vibrate","inputs":{"pattern":{"type":"number[]"}},"outputs":{},"metadata":{"icon":"wave-square","description":"vibrate following period `pattern`","complexity":3,"tags":["platform","api","vibration"]},"id":"68992d62-d5ca-11ea-888d-97179b32b7ab","base":true,"type":"`U`","system":true},"81a54674-4e9c-11eb-a0e4-2b75980dbd9b":{"name":"wake lock","inputs":{"lock":{"type":"any"},"done":{"type":"any"}},"outputs":{},"metadata":{"icon":"lock","description":"prevent device from dimming or locking the screen","link":"https://developer.mozilla.org/en-US/docs/Web/API/Screen_Wake_Lock_API","complexity":3,"tags":["platform","api","wakelock"]},"id":"81a54674-4e9c-11eb-a0e4-2b75980dbd9b","base":true,"type":"`U`","system":true},"1baddd01-97a9-4971-b74a-e933fefdb629":{"name":"open","inputs":{"url":{"type":"string"},"target":{"type":"string","metadata":{"examples":["\'_blank\'","\'_self\'","\'_parent\'","\'_top\'"]}},"features":{"type":"object","metadata":{"examples":["{}","{popup:true}","{popup:true,width:600,height:600}"]}},"done":{"type":"any"}},"outputs":{"window":{"type":"`CH`","icon":"square","metadata":{"description":"channel for communicating with window"},"ref":true}},"metadata":{"icon":"external-link","description":"loads `url` into a new or existing `target` browsing context","link":"https://developer.mozilla.org/en-US/docs/Web/API/Window/open","complexity":3,"tags":["platform","api","window"]},"id":"1baddd01-97a9-4971-b74a-e933fefdb629","base":true,"type":"`U`","system":true},"ed53d847-6336-435b-9e5e-fd38c79dc9c6":{"name":"post message","inputs":{"url":{"type":"string"},"target":{"type":"string","metadata":{"examples":["\'_blank\'","\'_self\'","\'_parent\'","\'_top\'"]}},"features":{"type":"object","metadata":{"examples":["{}","{popup:true}","{popup:true,width:600,height:600}"]}},"done":{"type":"any"}},"outputs":{"window":{"type":"`CH`","icon":"square","metadata":{"description":"channel for communicating with window"},"ref":true}},"metadata":{"icon":"external-link","description":"loads `url` into a new or existing `target` browsing context","link":"https://developer.mozilla.org/en-US/docs/Web/API/Window/open","complexity":3,"tags":["platform","api","window"]},"id":"ed53d847-6336-435b-9e5e-fd38c79dc9c6","base":true,"type":"`U`","system":true},"72c84615-4d9c-4a82-a828-fa5d9447a4d5":{"name":"icons","inputs":{"any":{"type":"any"}},"outputs":{"icons":{"type":"object"}},"metadata":{"icon":"value-absolute","description":"output system `icons` dictionary","complexity":5,"tags":["platform","asset"]},"id":"72c84615-4d9c-4a82-a828-fa5d9447a4d5","base":true,"type":"`U`","system":true},"06a6eeb5-9c36-428c-b9af-4f8b178db350":{"name":"client","inputs":{"graph":{"type":"`U`&`G`","metadata":{"examples":["${unit:{id:\\"e33e7dcd-9715-461c-a474-15ed2bda899e\\"}}"]}},"done":{"type":"any","defaultIgnored":true}},"outputs":{"hub":{"type":"`J<`J<`G`>`>`","ref":true,"icon":"users"}},"metadata":{"icon":"circle","description":"run `graph` on every debug session","complexity":20,"tags":["platform"]},"id":"06a6eeb5-9c36-428c-b9af-4f8b178db350","type":"`U`","base":true,"system":true,"render":true,"component":{"defaultWidth":240,"defaultHeight":240}},"ccf6d0e2-6b08-11eb-9fc3-3785374109d0":{"name":"anchor","inputs":{"style":{"type":"object","optional":true},"href":{"type":"string","optional":true},"target":{"type":"string","optional":true,"metadata":{"examples":["\\"_blank\\""]}}},"outputs":{},"metadata":{"icon":"link","description":"HTML anchor element","complexity":20,"tags":["platform","component"]},"id":"ccf6d0e2-6b08-11eb-9fc3-3785374109d0","base":true,"component":{"defaultWidth":200,"defaultHeight":45},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"0e9e6cd4-67eb-11ea-995b-4b0721193361":{"name":"bot","inputs":{"style":{"type":"object"},"disabled":{"type":"boolean"},"r":{"type":"number"},"x":{"type":"string","defaultIgnored":true},"y":{"type":"string","defaultIgnored":true}},"outputs":{},"metadata":{"icon":"bot","description":"your fellow robot","complexity":21,"tags":["platform","component","app"]},"id":"0e9e6cd4-67eb-11ea-995b-4b0721193361","base":true,"component":{"defaultHeight":200,"defaultWidth":200},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"c18d7dcc-939b-11ea-90cb-77846d7504a9":{"name":"unit class","inputs":{"id":{"type":"string"}},"outputs":{},"metadata":{"icon":"chalkboard","description":"unit class component","complexity":23,"tags":["platform","component","app"]},"id":"c18d7dcc-939b-11ea-90cb-77846d7504a9","base":true,"component":{"defaultWidth":100,"defaultHeight":100},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"e8bce1fc-ae56-4f9f-9685-3cc844758855":{"name":"datum","inputs":{"style":{"type":"object"},"data":{"type":"object"}},"outputs":{},"metadata":{"icon":"atom-alt","description":"Recursive Graph Editor","complexity":22,"tags":["platform","component","app"]},"id":"e8bce1fc-ae56-4f9f-9685-3cc844758855","base":true,"component":{"defaultWidth":360,"defaultHeight":360},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"e80c912e-7508-11ea-966b-436805345ff0":{"name":"editor","inputs":{"style":{"type":"object"},"attr":{"type":"object","defaultIgnored":true},"graph":{"type":"`G`","ref":true},"disabled":{"type":"boolean","defaultIgnored":true},"fullwindow":{"type":"boolean","defaultIgnored":true},"frame":{"type":"`C`","ref":true,"defaultIgnored":true},"zoom":{"type":"{x:number,y:number,z:number}","defaultIgnored":true},"controls":{"type":"boolean","defaultIgnored":true}},"outputs":{"graph":{"type":"`G`","ref":true,"defaultIgnored":true}},"metadata":{"icon":"atom-alt","description":"Recursive Graph Editor","complexity":71,"tags":["platform","component","app"]},"id":"e80c912e-7508-11ea-966b-436805345ff0","base":true,"component":{"defaultWidth":360,"defaultHeight":360},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"0f043df2-46fc-11eb-ae20-6f1fedd527ba":{"name":"GUI","inputs":{"style":{"type":"object"},"disabled":{"type":"boolean"}},"outputs":{},"metadata":{"icon":"atom-alt","description":"minimalist UI to control a unit graph","complexity":28,"tags":["platform","component","app"]},"id":"0f043df2-46fc-11eb-ae20-6f1fedd527ba","component":{"defaultWidth":420,"defaultHeight":300},"base":true,"type":"`U`&`C`&`V`&`J`","system":true,"render":true,"deps":["6253bf76-2e85-11eb-9f59-3703abfd39c7"]},"c9b62bcc-8196-11eb-8372-9f2ac2c356d4":{"name":"GUI control","private":true,"inputs":{},"outputs":{},"metadata":{"icon":"chalkboard","description":"unit class component","complexity":23,"tags":["platform","component","app"]},"id":"c9b62bcc-8196-11eb-8372-9f2ac2c356d4","base":true,"component":{"defaultWidth":210,"defaultHeight":180},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"96d5d60e-85eb-11eb-ba90-7fc42ab0a641":{"name":"GUI control keyboard","inputs":{},"outputs":{},"metadata":{"icon":"chalkboard","description":"unit class component","complexity":24,"tags":["platform","component","app"]},"id":"96d5d60e-85eb-11eb-ba90-7fc42ab0a641","base":true,"component":{"defaultWidth":210,"defaultHeight":180},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"84bfce28-2116-11eb-82ca-cfb03193bf58":{"name":"HSV color picker","inputs":{"style":{"type":"object"},"h":{"type":"number","metadata":{"description":"0 - 359"}},"s":{"type":"number","metadata":{"description":"0 - 100"}},"v":{"type":"number","metadata":{"description":"0 - 100"}}},"outputs":{},"metadata":{"icon":"palette","description":"HSV Saturation and Value (SV) color picker","complexity":20,"tags":["platform","component","app"]},"id":"84bfce28-2116-11eb-82ca-cfb03193bf58","base":true,"component":{"defaultHeight":200,"defaultWidth":200},"type":"`U`&`C`","system":true,"render":true},"65759894-7d11-11ea-a838-93e14e650d65":{"name":"icon button","inputs":{"icon":{"plug":{"0":{"unitId":"default0","pinId":"a"}},"type":"string","ref":false},"style":{"plug":{"0":{"unitId":"default","pinId":"a"}},"type":"object","ref":false},"active":{"plug":{"0":{"unitId":"setifdefault0","pinId":"test"}},"type":"boolean","ref":false},"activeColor":{"plug":{"0":{"unitId":"setifdefault0","pinId":"value"}},"type":"string","ref":false},"hoverColor":{"plug":{"0":{"unitId":"setifdefault","pinId":"value"}},"type":"string","ref":false},"disabled":{"plug":{"0":{"unitId":"setifdefault1","pinId":"test"}},"defaultIgnored":true,"type":"boolean","ref":false},"disabledColor":{"plug":{"0":{"unitId":"setifdefault1","pinId":"value"}},"defaultIgnored":true,"type":"string","ref":false}},"outputs":{},"units":{"icon":{"id":"63a417e5-d354-4b39-9ebd-05f55e70de7b","output":{},"input":{"style":{},"icon":{}},"metadata":{"position":{"x":-72,"y":-51}}},"setifdefault":{"id":"7b344491-48a2-46e1-949e-56805bebe3da","input":{"default":{"data":"\'#C2C2C2\'"},"obj":{"data":"{color:\'currentColor\',cursor:\'pointer\'}"},"test":{},"value":{}},"output":{"obj":{}},"metadata":{"position":{"x":191,"y":-3}}},"setifdefault0":{"id":"7b344491-48a2-46e1-949e-56805bebe3da","input":{"default":{"data":"\'#787878\'"},"test":{},"value":{},"obj":{}},"output":{"obj":{}},"metadata":{"position":{"x":138,"y":103}}},"setifdefault1":{"id":"7b344491-48a2-46e1-949e-56805bebe3da","input":{"default":{"data":"\'#363636\'"},"test":{},"value":{},"obj":{}},"output":{"obj":{}},"metadata":{"position":{"x":14,"y":119}}},"true":{"id":"984c4a44-86c7-464c-ad48-4759598c3be3","input":{"any":{}},"output":{"true":{}},"metadata":{"position":{"x":92,"y":-33}}},"false":{"id":"b4d20f6f-32dc-4d04-97d6-69518976bdea","input":{"any":{}},"output":{"false":{}},"metadata":{"position":{"x":104,"y":-80}}},"merge":{"id":"60bdba6d-c670-430f-be72-6f39cf4e8453","input":{"a":{},"b":{}},"output":{"ab":{}},"metadata":{"position":{"x":-88,"y":60}}},"default":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89","input":{"d":{"data":"{}"},"a":{}},"output":{"a":{}},"metadata":{"position":{"x":-194,"y":85}}},"onpointerenter":{"id":"c0bb493a-af78-11ea-b6fa-3b893b757a39","input":{"element":{}},"output":{"event":{}},"metadata":{"position":{"x":-7,"y":-33}}},"onpointerleave":{"id":"c7dba94e-af78-11ea-b7d7-47e14ca215b5","input":{"element":{}},"output":{"event":{}},"metadata":{"position":{"x":-5,"y":-86}}},"default0":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89","input":{"a":{},"d":{"constant":true,"data":"\\"unit\\""}},"output":{"a":{}},"metadata":{"position":{"x":-181,"y":-87}}}},"merges":{"0":{"default0":{"output":{"a":true}},"icon":{"input":{"icon":true}}},"2":{"false":{"output":{"false":true}},"true":{"output":{"true":true}},"setifdefault":{"input":{"test":true}}},"3":{"setifdefault1":{"output":{"obj":true}},"merge":{"input":{"b":true}}},"4":{"setifdefault0":{"output":{"obj":true}},"setifdefault1":{"input":{"obj":true}}},"5":{"setifdefault":{"output":{"obj":true}},"setifdefault0":{"input":{"obj":true}}},"6":{"default":{"output":{"a":true}},"merge":{"input":{"a":true}}},"7":{"merge":{"output":{"ab":true}},"icon":{"input":{"style":true}}},"8":{"onpointerenter":{"input":{"element":true}},"icon":{"output":{"_self":true}},"onpointerleave":{"input":{"element":true}}},"9":{"onpointerleave":{"output":{"event":true}},"false":{"input":{"any":true}}},"cuurfvll":{"onpointerenter":{"output":{"event":true}},"true":{"input":{"any":true}}}},"render":true,"component":{"subComponents":{"icon":{"children":[]}},"children":["icon"],"defaultWidth":60,"defaultHeight":60},"metadata":{"icon":null,"description":"","complexity":71,"tags":["platform","component","app"]},"id":"65759894-7d11-11ea-a838-93e14e650d65","type":"`U`&`G`&`C`","system":true},"e6b88d1e-8755-11ea-916e-d3995fb8986e":{"name":"keyboard","inputs":{"style":{"type":"object"}},"outputs":{},"metadata":{"icon":"keyboard","description":"virtual keyboard","complexity":23,"tags":["platform","component","app"]},"id":"e6b88d1e-8755-11ea-916e-d3995fb8986e","base":true,"component":{"defaultWidth":720,"defaultHeight":234},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"d0672722-b1a9-11ea-a247-d736e666990e":{"name":"keyboard key","inputs":{"style":{"type":"object"},"key":{"type":"string"}},"outputs":{},"metadata":{"icon":"keyboard","description":"virtual keyboard single key","complexity":23,"tags":["platform","component","app"]},"id":"d0672722-b1a9-11ea-a247-d736e666990e","base":true,"component":{"defaultWidth":45,"defaultHeight":45},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"023c3762-c701-11ea-b590-57b51c2884a7":{"name":"microphone button","base":true,"units":{},"merges":{},"inputs":{"options":{"type":"{grammar?:string,lang?:string,interim?:boolean}"}},"outputs":{"transcript":{"type":"string"}},"component":{"defaultWidth":60,"defaultHeight":60},"metadata":{"icon":"mic","description":"speak a sentence","complexity":22,"tags":["platform","component","app"]},"id":"023c3762-c701-11ea-b590-57b51c2884a7","type":"`U`&`C`&`V`&`J`","system":true,"render":true},"deda524e-6990-11eb-9bc3-e7d55b583fa3":{"name":"minigraph","inputs":{"spec":{"type":"object"},"style":{"type":"object"}},"outputs":{},"metadata":{"icon":"chalkboard","description":"unit class component","complexity":24,"tags":["platform","component","app"]},"id":"deda524e-6990-11eb-9bc3-e7d55b583fa3","base":true,"component":{"defaultWidth":210,"defaultHeight":180},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"0e1d716e-a13f-11ea-ac6a-8fd610c86910":{"name":"unit minimal","inputs":{"id":{"type":"string"},"style":{"type":"object"}},"outputs":{},"metadata":{"icon":"chalkboard","description":"unit class component","complexity":20,"tags":["platform","component","app"]},"id":"0e1d716e-a13f-11ea-ac6a-8fd610c86910","base":true,"component":{"defaultWidth":45,"defaultHeight":81},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"b4d025e2-811e-11ea-97ee-1bd8d1736e67":{"name":"mode selector","units":{"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{"style":{"data":"{width:\'fit-content\',height:\'fit-content\',opacity:\'0.85\',top:\'50%\',left:\'6px\',textAlign:\'center\',transform:\'translateY(-50%)\',display:\'flex\',flexDirection:\'column\',position:\'relative\',gap:\'12px\',border:\'1px solid\',\'min-width\':\'30px\',\'min-height\':\'30px\'}"}}},"iconbutton":{"id":"65759894-7d11-11ea-a838-93e14e650d65","input":{"icon":{"data":"\'description\'"},"style":{"data":"{height:\'24px\',width:\'24px\',marginTop:\'6px\',marginBottom:\'6px\'}"},"activeColor":{"ignored":false,"data":"\'hsla(216, 75%, 50%, 1)\'"},"hoverColor":{"ignored":false,"data":"\'hsla(216, 75%, 50%, 1)\'"},"active":{"ignored":false}}},"iconbutton0":{"id":"65759894-7d11-11ea-a838-93e14e650d65","input":{"icon":{"data":"\'exchange\'"},"style":{"data":"{height:\'24px\',width:\'24px\',marginTop:\'6px\',marginBottom:\'6px\'}"},"activeColor":{"ignored":false,"data":"\'hsla(0, 100%, 70%, 1)\'"},"hoverColor":{"ignored":false,"data":"\'hsla(0, 100%, 70%, 1)\'"},"active":{"ignored":false}}},"iconbutton1":{"id":"65759894-7d11-11ea-a838-93e14e650d65","input":{"icon":{"data":"\'x\'"},"style":{"data":"{height:\'24px\',width:\'24px\',marginTop:\'6px\',marginBottom:\'6px\'}"},"activeColor":{"ignored":false,"data":"\'#10a51b\'"},"hoverColor":{"ignored":false,"data":"\'#10a51b\'"},"active":{"ignored":false}}},"iconbutton2":{"id":"65759894-7d11-11ea-a838-93e14e650d65","input":{"icon":{"data":"\'plus-2\'"},"style":{"data":"{height:\'24px\',width:\'24px\',marginTop:\'6px\',marginBottom:\'6px\'}"},"activeColor":{"ignored":false,"data":"\'#E5E5E5\'"},"hoverColor":{"ignored":false,"data":"\'#C2C2C2\'"},"active":{"ignored":false}}},"iconbutton3":{"id":"65759894-7d11-11ea-a838-93e14e650d65","input":{"icon":{"data":"\'data\'"},"style":{"data":"{height:\'24px\',width:\'24px\',marginTop:\'6px\',marginBottom:\'6px\'}"},"activeColor":{"ignored":false,"data":"\'#E5E5E5\'"},"hoverColor":{"ignored":false,"data":"\'#C2C2C2\'"},"active":{"ignored":false}}},"iconbutton4":{"id":"65759894-7d11-11ea-a838-93e14e650d65","input":{"icon":{"data":"\'brackets\'"},"style":{"data":"{height:\'24px\',width:\'24px\',marginTop:\'6px\',marginBottom:\'6px\'}"},"activeColor":{"ignored":false,"data":"\'#E5E5E5\'"},"hoverColor":{"ignored":false,"data":"\'#C2C2C2\'"},"active":{"ignored":false}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"data":"\'change\'","constant":true}}},"wait0":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"data":"\'remove\'","constant":true}}},"wait1":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"data":"\'add\'","constant":true}}},"wait2":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"data":"\'info\'","constant":true}}},"default":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89","input":{"d":{"data":"\'none\'","constant":true}}}},"merges":{"4":{"wait":{"output":{"a":true}},"wait0":{"output":{"a":true}},"wait1":{"output":{"a":true}},"wait2":{"output":{"a":true}},"default":{"input":{"a":true}}}},"inputs":{},"outputs":{},"component":{"defaultWidth":60,"defaultHeight":300,"subComponents":{"div":{"width":30,"height":120,"children":["iconbutton","iconbutton0","iconbutton1","iconbutton2","iconbutton3","iconbutton4"]},"iconbutton":{"width":30,"height":30},"iconbutton0":{"width":30,"height":30},"iconbutton1":{"width":30,"height":30},"iconbutton2":{"width":30,"height":30},"iconbutton3":{"width":30,"height":30},"iconbutton4":{"width":30,"height":30}},"children":["div"]},"metadata":{"icon":"navigation","description":"select a mode (\\"none\\"|\\"info\\"|\\"add\\"|\\"remove\\"|\\"change\\")","complexity":103,"tags":["platform","component","app"]},"id":"b4d025e2-811e-11ea-97ee-1bd8d1736e67","type":"`U`&`C`&`G`","system":true,"render":true},"fcccb9a4-1a30-11eb-93b0-e7d511d031f2":{"name":"phone keyboard","inputs":{"style":{"type":"object"}},"outputs":{},"metadata":{"icon":"keyboard","description":"virtual keyboard","complexity":23,"tags":["platform","component","app"]},"id":"fcccb9a4-1a30-11eb-93b0-e7d511d031f2","base":true,"component":{"defaultWidth":302,"defaultHeight":212},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"bc34c618-1c77-11eb-9785-e39a2bf52e49":{"name":"phone keyboard key","inputs":{"style":{"type":"object"},"key":{"type":"string"},"altKey":{"type":"string"}},"outputs":{},"metadata":{"icon":"keyboard","description":"virtual keyboard single key","complexity":23,"tags":["platform","component","app"]},"id":"bc34c618-1c77-11eb-9785-e39a2bf52e49","component":{"defaultWidth":48,"defaultHeight":60},"base":true,"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"6b18c608-7b5a-11ea-bb6e-2ff12a5cc3f3":{"name":"resize","inputs":{"size":{"type":"{width:number,height:number}"}},"outputs":{},"metadata":{"icon":"expand","description":"all corner resize handlers","complexity":20,"tags":["platform","component","app"]},"id":"6b18c608-7b5a-11ea-bb6e-2ff12a5cc3f3","base":true,"component":{"defaultWidth":120,"defaultHeight":120},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"e39a2a34-c71a-11ea-9835-07964acf6760":{"name":"transcend","inputs":{"style":{"type":"object"}},"outputs":{},"metadata":{"icon":"atom-alt","description":"\\"get out\\"","complexity":22,"tags":["platform","component","app"]},"id":"e39a2a34-c71a-11ea-9835-07964acf6760","base":true,"component":{"defaultWidth":120,"defaultHeight":120},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"9d1417a8-8a90-4ec1-be3e-401fd4ec3370":{"name":"tree","inputs":{"value":{"type":"string"},"style":{"type":"object"}},"outputs":{},"component":{"defaultWidth":180,"defaultHeight":120},"metadata":{"icon":"triangle","complexity":42,"tags":["platform","component","app"]},"id":"9d1417a8-8a90-4ec1-be3e-401fd4ec3370","type":"`U`","system":true,"base":true,"render":true},"b61f5cc6-37e9-45e1-965b-02940820f7ce":{"name":"button","type":"`U`&`C`&`V`&`J`","inputs":{"style":{"type":"object","optional":true,"metadata":{"examples":["{}"]}}},"outputs":{},"metadata":{"icon":"square","description":"HTML div element","complexity":20,"tags":["platform","component"]},"id":"b61f5cc6-37e9-45e1-965b-02940820f7ce","base":true,"component":{"defaultWidth":120,"defaultHeight":120},"system":true,"render":true},"94243ec4-8967-4907-8cdd-7223fe256cf6":{"name":"canvas","inputs":{"style":{"type":"object","optional":true},"width":{"type":"number|string","optional":true},"height":{"type":"number|string","optional":true},"d":{"type":"any[][]","optional":true}},"outputs":{},"metadata":{"icon":"chalkboard","description":"for painting","complexity":23,"tags":["platform","component","canvas"]},"id":"94243ec4-8967-4907-8cdd-7223fe256cf6","base":true,"component":{"defaultWidth":200,"defaultHeight":200},"type":"`U`&`C`&`V`&`J`&`PS`&`CS`&`CA`","system":true,"render":true},"7c27cf95-6226-4326-8619-32d82bcbe16d":{"name":"constrain","inputs":{"style":{"type":"object","optional":true,"metadata":{"examples":["{}"]}}},"outputs":{},"metadata":{"icon":"square","description":"force base style on all children","complexity":20,"tags":["platform","component"]},"id":"7c27cf95-6226-4326-8619-32d82bcbe16d","base":true,"component":{"defaultWidth":240,"defaultHeight":240},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"dc549da9-f758-4709-8913-e265f5e458b2":{"name":"datum","type":"`U`&`C`&`V`","inputs":{"value":{"type":"any"},"style":{"type":"object","optional":true,"metadata":{"examples":["{}"]}}},"outputs":{},"metadata":{"icon":"square","description":"unit datum representation","complexity":22,"tags":["platform","component"]},"id":"dc549da9-f758-4709-8913-e265f5e458b2","base":true,"component":{"defaultWidth":120,"defaultHeight":120},"system":true,"render":true},"66698a97-15c5-4602-9925-11a1aeb03710":{"name":"div","type":"`U`&`C`&`V`&`J`","inputs":{"style":{"type":"object","optional":true,"metadata":{"examples":["{}","{background:\'red\'}"]}},"attr":{"type":"object","optional":true,"defaultIgnored":true,"metadata":{"examples":["{tabIndex:1}","{title:\'hello\'}","{draggable:true}"]}}},"outputs":{},"metadata":{"icon":"square","description":"HTML div element","complexity":20,"tags":["platform","component"]},"id":"66698a97-15c5-4602-9925-11a1aeb03710","base":true,"component":{"defaultWidth":120,"defaultHeight":120},"system":true,"render":true},"8be95fbe-8f10-467b-bbdd-87311ca62594":{"name":"document","inputs":{"src":{"type":"string","optional":true},"srcdoc":{"type":"string","optional":true,"defaultIgnored":true}},"outputs":{"window":{"type":"`W`","ref":true}},"metadata":{"icon":"square","description":"offscreen iframe document","complexity":20,"tags":["platform","component"]},"id":"8be95fbe-8f10-467b-bbdd-87311ca62594","base":true,"type":"`U`","system":true},"d7c86a2a-489f-11eb-b83e-d3767f6d49b7":{"name":"frame","inputs":{"style":{"type":"object","metadata":{"examples":["{}"]}}},"outputs":{},"metadata":{"icon":"square","description":"context of the connected `element`","complexity":20,"tags":["platform","component"]},"id":"d7c86a2a-489f-11eb-b83e-d3767f6d49b7","base":true,"component":{"defaultWidth":300,"defaultHeight":300},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"dd7616e2-2e64-4d9c-b13e-ca7efeacd982":{"name":"header 1","type":"`U`&`C`&`V`&`J`","inputs":{"style":{"type":"object","optional":true,"metadata":{"examples":["{}","{background:\'red\'}"]}},"attr":{"type":"object","optional":true,"defaultIgnored":true,"metadata":{"examples":["{tabIndex:1}","{title:\'hello\'}","{draggable:true}"]}}},"outputs":{},"metadata":{"icon":"square","description":"HTML h3 heading element","complexity":20,"tags":["platform","component"]},"id":"dd7616e2-2e64-4d9c-b13e-ca7efeacd982","base":true,"component":{"defaultWidth":120,"defaultHeight":120},"system":true,"render":true},"321f971c-b898-4ca4-9e6e-3d75d68940f7":{"name":"header 2","type":"`U`&`C`&`V`&`J`","inputs":{"style":{"type":"object","optional":true,"metadata":{"examples":["{}","{background:\'red\'}"]}},"attr":{"type":"object","optional":true,"defaultIgnored":true,"metadata":{"examples":["{tabIndex:1}","{title:\'hello\'}","{draggable:true}"]}}},"outputs":{},"metadata":{"icon":"square","description":"HTML h3 heading element","complexity":20,"tags":["platform","component"]},"id":"321f971c-b898-4ca4-9e6e-3d75d68940f7","base":true,"component":{"defaultWidth":120,"defaultHeight":120},"system":true,"render":true},"b7f043ee-4f9d-4f69-90fe-63b1357ff4c2":{"name":"header 3","type":"`U`&`C`&`V`&`J`","inputs":{"style":{"type":"object","optional":true,"metadata":{"examples":["{}","{background:\'red\'}"]}},"attr":{"type":"object","optional":true,"defaultIgnored":true,"metadata":{"examples":["{tabIndex:1}","{title:\'hello\'}","{draggable:true}"]}}},"outputs":{},"metadata":{"icon":"square","description":"HTML h3 heading element","complexity":20,"tags":["platform","component"]},"id":"b7f043ee-4f9d-4f69-90fe-63b1357ff4c2","base":true,"component":{"defaultWidth":120,"defaultHeight":120},"system":true,"render":true},"63a417e5-d354-4b39-9ebd-05f55e70de7b":{"name":"icon","inputs":{"style":{"type":"object","optional":true,"metadata":{"description":"","examples":["{}"]}},"icon":{"type":"string","optional":true,"metadata":{"examples":["\\"unit\\"","\\"circle\\"","\\"square\\""]}}},"outputs":{},"metadata":{"icon":"square","description":"icon from the system","complexity":22,"tags":["platform","component"]},"id":"63a417e5-d354-4b39-9ebd-05f55e70de7b","base":true,"component":{"defaultWidth":45,"defaultHeight":45},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"32ff22b0-8221-4584-9c78-d21102dcfa6a":{"name":"iframe","inputs":{"src":{"type":"string","optional":true},"style":{"type":"object","optional":true},"attr":{"type":"object","optional":true},"srcdoc":{"type":"string","optional":true,"defaultIgnored":true}},"outputs":{},"metadata":{"icon":"square","description":"website container container","complexity":20,"tags":["platform","component"]},"id":"32ff22b0-8221-4584-9c78-d21102dcfa6a","base":true,"component":{"defaultWidth":420,"defaultHeight":420},"type":"`U`&`C`&`V`&`J`&`CH`","system":true,"render":true},"b5286262-9f92-40d3-8545-88fb3079a0f9":{"name":"inherit","inputs":{"style":{"type":"object","optional":true,"metadata":{"examples":["{}"]}}},"outputs":{},"metadata":{"icon":"square","description":"apply default style to all children","complexity":20,"tags":["platform","component"]},"id":"b5286262-9f92-40d3-8545-88fb3079a0f9","base":true,"component":{"defaultWidth":240,"defaultHeight":240},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"23b7df22-79e0-4233-8388-7e6e8f1859c6":{"name":"label","type":"`U`&`C`&`V`&`J`","inputs":{"style":{"type":"object","optional":true,"metadata":{"examples":["{}"]}},"attr":{"type":"object","optional":true,"defaultIgnored":true,"metadata":{"examples":["{}"]}}},"outputs":{},"metadata":{"icon":"square","description":"HTML label element","complexity":20,"tags":["platform","component"]},"id":"23b7df22-79e0-4233-8388-7e6e8f1859c6","base":true,"component":{"defaultWidth":150,"defaultHeight":45},"system":true,"render":true},"06823924-b659-4a22-8ed4-b3243121b55d":{"name":"audio","inputs":{"src":{"type":"string","metadata":{"description":"url pointing to a audio data"},"optional":true},"style":{"type":"object","optional":true},"stream":{"type":"`U`","ref":true,"metadata":{"description":"stream object"},"defaultIgnored":false,"optional":true},"controls":{"type":"boolean","optional":true}},"outputs":{},"metadata":{"icon":"volume-2","description":"platform audio component","complexity":20,"tags":["platform","component","media"]},"id":"06823924-b659-4a22-8ed4-b3243121b55d","base":true,"component":{"defaultWidth":240,"defaultHeight":45},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"059579bb-184f-435b-ace0-64ec95c9f125":{"name":"image","inputs":{"src":{"type":"string","metadata":{"description":"url pointing to a image data"},"optional":true},"style":{"type":"object","optional":true}},"outputs":{},"metadata":{"icon":"image","description":"TODO","complexity":20,"tags":["platform","component","media"]},"id":"059579bb-184f-435b-ace0-64ec95c9f125","base":true,"component":{"defaultWidth":180,"defaultHeight":240},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"44968bd5-f1a5-4f81-a32f-8ee5a6e4a842":{"name":"pause","inputs":{"media":{"type":"`ME`","ref":true},"any":{"type":"any"}},"outputs":{},"metadata":{"icon":"play","description":"play media element","complexity":3,"tags":["platform","component","media"]},"id":"44968bd5-f1a5-4f81-a32f-8ee5a6e4a842","base":true,"type":"`U`","system":true},"ab507863-2307-40c6-982b-c45680458997":{"name":"play","inputs":{"media":{"type":"`ME`","ref":true},"any":{"type":"any"}},"outputs":{},"metadata":{"icon":"play","description":"play media element","complexity":3,"tags":["platform","component","media"]},"id":"ab507863-2307-40c6-982b-c45680458997","base":true,"type":"`U`","system":true},"7a8921eb-c1ad-400b-94fc-6c6cead8163d":{"name":"video","inputs":{"src":{"type":"string","metadata":{"description":"url pointing to a video data"},"optional":true},"style":{"type":"object","optional":true},"stream":{"type":"`MS`","ref":true,"metadata":{"description":"stream object"},"defaultIgnored":false,"optional":true},"controls":{"type":"boolean","optional":true}},"outputs":{},"metadata":{"icon":"video","description":"video element","complexity":20,"tags":["platform","component","media"]},"id":"7a8921eb-c1ad-400b-94fc-6c6cead8163d","base":true,"component":{"defaultWidth":240,"defaultHeight":180},"type":"`U`&`C`&`V`&`J`&`PS`&`CS`&`IM`","system":true,"render":true},"2a5ad480-9d38-4918-8774-41fac7b54203":{"name":"paragraph","type":"`U`&`C`&`V`&`J`","inputs":{"style":{"type":"object","optional":true,"metadata":{"examples":["{}","{background:\'red\'}"]}},"attr":{"type":"object","optional":true,"defaultIgnored":true,"metadata":{"examples":["{tabIndex:1}","{title:\'hello\'}","{draggable:true}"]}}},"outputs":{},"metadata":{"icon":"square","description":"HTML h3 heading element","complexity":20,"tags":["platform","component"]},"id":"2a5ad480-9d38-4918-8774-41fac7b54203","base":true,"component":{"defaultWidth":120,"defaultHeight":120},"system":true,"render":true},"78b0939d-43e1-4f6c-867d-e4217a55d217":{"name":"parent","type":"`U`&`C`&`V`&`J`","inputs":{},"outputs":{},"metadata":{"icon":"square","description":"HTML div element","complexity":20,"tags":["platform","component"]},"id":"78b0939d-43e1-4f6c-867d-e4217a55d217","base":true,"component":{"defaultWidth":210,"defaultHeight":210},"system":true,"render":true},"7772a2f5-40c8-482e-83f4-bed9bfb364e3":{"name":"render","type":"`U`&`C`&`V`","inputs":{"style":{"type":"object","optional":true,"metadata":{"examples":["{}"]}},"component":{"type":"`C`","ref":true}},"outputs":{},"metadata":{"icon":"square","description":"render a component","complexity":20,"tags":["platform","component"]},"id":"7772a2f5-40c8-482e-83f4-bed9bfb364e3","base":true,"component":{"defaultWidth":300,"defaultHeight":300},"system":true,"render":true},"c711d540-9de3-437e-854a-b59491af3cf8":{"name":"span","type":"`U`&`C`&`V`&`J`","inputs":{"style":{"type":"object","optional":true,"metadata":{"examples":["{}"]}}},"outputs":{},"metadata":{"icon":"square","description":"HTML div element","complexity":20,"tags":["platform","component"]},"id":"c711d540-9de3-437e-854a-b59491af3cf8","base":true,"component":{"defaultWidth":60,"defaultHeight":60},"system":true,"render":true},"62ca7eae-ea36-4960-a8f2-6b5978cabbab":{"name":"style","type":"`U`&`C`&`V`&`J`","inputs":{"value":{"type":"string","optional":true,"metadata":{"examples":["div { outline: 1px solid currentColor; }"]}},"attr":{"type":"object","optional":true,"defaultIgnored":true,"metadata":{"examples":["{tabIndex:1}","{title:\'hello\'}","{draggable:true}"]}}},"outputs":{},"metadata":{"icon":"square","description":"HTML style element","complexity":20,"tags":["platform","component"]},"id":"62ca7eae-ea36-4960-a8f2-6b5978cabbab","base":true,"component":{"defaultWidth":60,"defaultHeight":60},"system":true,"render":true},"7666978e-252c-11eb-97a4-0f3e81286cae":{"name":"circle","inputs":{"style":{"type":"object","optional":true},"x":{"type":"number","optional":true},"y":{"type":"number","optional":true},"r":{"type":"number","optional":true}},"outputs":{},"metadata":{"icon":"square","description":"SVG circle","complexity":20,"tags":["platform","component","svg"]},"id":"7666978e-252c-11eb-97a4-0f3e81286cae","base":true,"component":{"defaultWidth":200,"defaultHeight":200},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"3fcb8e64-923d-11ea-bab1-43fa3b273af8":{"name":"defs","inputs":{"style":{"type":"object","optional":true}},"outputs":{},"metadata":{"icon":"square","description":"SVG defs","complexity":20,"tags":["platform","component","svg"]},"id":"3fcb8e64-923d-11ea-bab1-43fa3b273af8","base":true,"component":{"defaultWidth":120,"defaultHeight":120},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"e049f16e-2559-11eb-bdc4-db5b8a11164b":{"name":"foreign object","inputs":{"style":{"type":"object","optional":true}},"outputs":{},"metadata":{"icon":"square","description":"SVG G","complexity":20,"tags":["platform","component","svg"]},"id":"e049f16e-2559-11eb-bdc4-db5b8a11164b","base":true,"component":{"defaultWidth":200,"defaultHeight":200},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"be11165e-489f-11eb-921f-87b924eb0725":{"name":"g","inputs":{"style":{"type":"object","optional":true}},"outputs":{},"metadata":{"icon":"square","description":"SVG G","complexity":20,"tags":["platform","component","svg"]},"id":"be11165e-489f-11eb-921f-87b924eb0725","base":true,"component":{"defaultWidth":200,"defaultHeight":200},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"38d26d76-2559-11eb-ae02-dfda9b9b137e":{"name":"line","inputs":{"style":{"type":"object","optional":true},"x1":{"type":"number","optional":true},"y1":{"type":"number","optional":true},"x2":{"type":"number","optional":true},"y2":{"type":"number","optional":true}},"outputs":{},"metadata":{"icon":"square","description":"SVG line","complexity":20,"tags":["platform","component","svg"]},"id":"38d26d76-2559-11eb-ae02-dfda9b9b137e","base":true,"component":{"defaultWidth":200,"defaultHeight":200},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"9932f3bc-9241-11ea-89fa-0b2fdace0f08":{"name":"marker","inputs":{"style":{"type":"object","optional":true}},"outputs":{},"metadata":{"icon":"square","description":"SVG marker","complexity":20,"tags":["platform","component","svg"]},"id":"9932f3bc-9241-11ea-89fa-0b2fdace0f08","base":true,"component":{"defaultWidth":120,"defaultHeight":120},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"60bc7930-8982-11ea-8b24-cf97a783bb32":{"name":"path","inputs":{"style":{"type":"object","optional":true},"d":{"type":"string","optional":true,"metadata":{"examples":["\\"M126.274,15.18l-0.091-0.091 c-13.42-13.42-35.517-13.08-49.354,0.756l-6.158,6.158l-6.159-6.159C50.677,2.006,28.579,1.669,15.158,15.088l-0.091,0.092 C1.646,28.6,1.985,50.698,15.822,64.536l29.793,29.793c0.006,0.006,0.013,0.012,0.019,0.019l0.639,0.639 c0.002,0.003,0.005,0.005,0.007,0.008l0.091,0.091c0.002,0.003,0.005,0.005,0.008,0.008l24.291,24.291l24.278-24.278 c0.008-0.008,0.016-0.015,0.023-0.022l0.073-0.074l0.667-0.667c0.005-0.005,0.01-0.01,0.015-0.015l29.791-29.791 C139.356,50.698,139.694,28.6,126.274,15.18z\\"","\\"M 10 10 h 100 v 100 h -100 v -100\\"","\\"M 5 55 A 50 50 0 1 0 5 54.9\\""]}},"fillRule":{"type":"string","optional":true,"defaultIgnored":true}},"outputs":{},"metadata":{"icon":"square","description":"SVG path","complexity":20,"tags":["platform","component","svg"]},"id":"60bc7930-8982-11ea-8b24-cf97a783bb32","base":true,"component":{"defaultWidth":200,"defaultHeight":200},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"c0bfe832-8967-11ea-8c4c-1f2995e41b68":{"name":"rect","inputs":{"style":{"type":"object","optional":true,"metadata":{"examples":["{fill:\'transparent\',stroke:\'currentColor\',strokeWidth:\'3px\'}"]}},"x":{"type":"number","optional":true,"metadata":{"examples":["0"]}},"y":{"type":"number","optional":true,"metadata":{"examples":["0"]}},"width":{"type":"number","optional":true,"metadata":{"examples":["100","150"]}},"height":{"type":"number","optional":true,"metadata":{"examples":["100","150"]}}},"outputs":{},"metadata":{"icon":"square","description":"SVG rectangle","complexity":20,"tags":["platform","component","svg"]},"id":"c0bfe832-8967-11ea-8c4c-1f2995e41b68","base":true,"component":{"defaultWidth":200,"defaultHeight":200},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"98c279fc-7f5e-11ea-b9e4-f772f9f0bed1":{"name":"svg","inputs":{"style":{"type":"object","optional":true},"viewBox":{"type":"string","optional":true,"defaultIgnored":true}},"outputs":{},"metadata":{"icon":"square","description":"SVG container","complexity":20,"tags":["platform","component","svg"]},"id":"98c279fc-7f5e-11ea-b9e4-f772f9f0bed1","base":true,"component":{"defaultWidth":200,"defaultHeight":200},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"49ef122e-b4d1-11ea-b45e-b73d8ee2aae8":{"name":"text","inputs":{"style":{"type":"object","optional":true},"value":{"type":"string","optional":true},"x":{"type":"string","optional":true},"y":{"type":"string","optional":true},"dx":{"type":"string","optional":true},"dy":{"type":"string","optional":true}},"outputs":{},"metadata":{"icon":"square","description":"SVG text","complexity":20,"tags":["platform","component","svg"]},"id":"49ef122e-b4d1-11ea-b45e-b73d8ee2aae8","base":true,"component":{"defaultWidth":150,"defaultHeight":60},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"00c828fc-9243-11ea-b897-5b0fc55820c5":{"name":"text path","inputs":{"style":{"type":"object","optional":true}},"outputs":{},"metadata":{"icon":"square","description":"SVG text path","complexity":20,"tags":["platform","component","svg"]},"id":"00c828fc-9243-11ea-b897-5b0fc55820c5","base":true,"component":{"defaultWidth":120,"defaultHeight":120},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"ad12678e-6642-11eb-9fc3-9fbc75c58110":{"name":"use","inputs":{"href":{"type":"string","optional":true,"defaultIgnored":true},"style":{"type":"object","optional":true}},"outputs":{},"metadata":{"icon":"square","description":"SVG G","complexity":20,"tags":["platform","component","svg"]},"id":"ad12678e-6642-11eb-9fc3-9fbc75c58110","base":true,"component":{"defaultWidth":200,"defaultHeight":200},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"096fc4ca-edd2-11ea-8266-37b634a3ee0b":{"name":"checkbox","inputs":{"value":{"type":"boolean","optional":true},"style":{"type":"object","optional":true},"attr":{"type":"object","optional":true,"defaultIgnored":true}},"outputs":{"value":{"type":"boolean","optional":true}},"metadata":{"icon":"square","description":"checkbox","complexity":20,"tags":["platform","component","value"]},"id":"096fc4ca-edd2-11ea-8266-37b634a3ee0b","base":true,"component":{"defaultWidth":30,"defaultHeight":30},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"d8aa573f-129e-4587-9c64-674729d024e2":{"name":"color","inputs":{"value":{"type":"string","optional":true}},"outputs":{"value":{"type":"string","optional":true}},"metadata":{"icon":"palette","description":"pick a color","complexity":20,"tags":["platform","component","value"]},"id":"d8aa573f-129e-4587-9c64-674729d024e2","base":true,"component":{"defaultWidth":45,"defaultHeight":45},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"6309ac3f-4a37-4ab0-86c6-8be70b38e31d":{"name":"editable field","inputs":{"value":{"type":"string","optional":true},"style":{"type":"object","metadata":{"description":""},"optional":true},"maxLength":{"type":"number","optional":true,"defaultIgnored":true}},"outputs":{"value":{"type":"string","optional":true,"defaultIgnored":true}},"metadata":{"icon":"form-input","description":"single line text input","complexity":20,"tags":["platform","component","value"]},"id":"6309ac3f-4a37-4ab0-86c6-8be70b38e31d","base":true,"component":{"defaultWidth":180,"defaultHeight":45},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"e2109627-9783-4664-a70c-858fd8c46ea5":{"name":"file field","inputs":{"style":{"type":"object","metadata":{"description":""},"optional":true},"opt":{"type":"object","optional":true}},"outputs":{"files":{"type":"`F`[]","metadata":{"description":""},"optional":true,"ref":true}},"metadata":{"icon":"form-input","description":"single line text input","complexity":20,"tags":["platform","component","value"]},"id":"e2109627-9783-4664-a70c-858fd8c46ea5","base":true,"component":{"defaultWidth":180,"defaultHeight":45},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"9bc56564-ef4e-11ea-939a-27ae3feb321e":{"name":"number field","inputs":{"value":{"type":"number","optional":true},"style":{"type":"object","optional":true,"metadata":{"examples":["{fontSize:\'30px\'}","{}"]}},"min":{"type":"number","optional":true,"defaultIgnored":true},"max":{"type":"number","optional":true,"defaultIgnored":true}},"outputs":{"value":{"type":"number","optional":true}},"metadata":{"icon":"form-input","description":"single line number input","complexity":20,"tags":["platform","component","value"]},"id":"9bc56564-ef4e-11ea-939a-27ae3feb321e","base":true,"component":{"defaultWidth":120,"defaultHeight":45},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"c0d13c03-9b10-4a6f-a79f-66294d10aae6":{"name":"option","inputs":{"value":{"type":"string","optional":true},"style":{"type":"object","metadata":{"description":""},"optional":true}},"outputs":{},"metadata":{"icon":"form-input","description":"single line text input","complexity":20,"tags":["platform","component","value"]},"id":"c0d13c03-9b10-4a6f-a79f-66294d10aae6","base":true,"component":{"defaultWidth":180,"defaultHeight":45},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"51c2c7b4-cb8a-42e8-95ab-14b8ac37700c":{"name":"password field","inputs":{"value":{"type":"string","optional":true},"style":{"type":"object","metadata":{"description":""},"optional":true}},"outputs":{"value":{"type":"number","optional":true}},"metadata":{"icon":"form-input","description":"single line password text input","complexity":20,"tags":["platform","component","value"]},"id":"51c2c7b4-cb8a-42e8-95ab-14b8ac37700c","base":true,"component":{"defaultWidth":120,"defaultHeight":45},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"6c7cd7d1-c8a0-4317-9c8c-ba781f150729":{"name":"select","inputs":{"value":{"type":"string","optional":true},"style":{"type":"object","metadata":{"description":""},"optional":true}},"outputs":{"value":{"type":"string","optional":true}},"metadata":{"icon":"form-input","description":"single line text input","complexity":20,"tags":["platform","component","value"]},"id":"6c7cd7d1-c8a0-4317-9c8c-ba781f150729","base":true,"component":{"defaultWidth":180,"defaultHeight":45},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"e06518cf-9edf-430b-8751-74c486e407aa":{"name":"slider","inputs":{"style":{"type":"object","optional":true},"value":{"type":"number","optional":true},"min":{"type":"number","optional":true,"defaultIgnored":true},"max":{"type":"number","optional":true,"defaultIgnored":true}},"outputs":{"value":{"type":"number","optional":true}},"metadata":{"icon":"sliders","description":"slide","complexity":20,"tags":["platform","component","value"]},"id":"e06518cf-9edf-430b-8751-74c486e407aa","base":true,"component":{"defaultWidth":200,"defaultHeight":30},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"87f99b85-1c24-4e5b-a903-dd27230f4092":{"name":"text","inputs":{"value":{"type":"string","optional":true,"examples":["\\"Hello world!\\""]}},"outputs":{},"metadata":{"icon":"type","description":"text","complexity":20,"tags":["platform","component","value"]},"id":"87f99b85-1c24-4e5b-a903-dd27230f4092","base":true,"component":{"defaultWidth":180,"defaultHeight":90},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"83ec6688-b80b-4ef2-861f-14245ef392c0":{"name":"text area","inputs":{"value":{"type":"string","optional":true,"metadata":{"description":"input text here"}},"placeholder":{"type":"string","optional":true,"defaultIgnored":true,"metadata":{"examples":["\\"Type Text Here\\""]}},"style":{"type":"object","optional":true}},"outputs":{"value":{"type":"string","optional":true,"defaultIgnored":true}},"metadata":{"icon":"align-left","description":"input text through keyboard","complexity":20,"tags":["platform","component","value"]},"id":"83ec6688-b80b-4ef2-861f-14245ef392c0","base":true,"component":{"defaultWidth":200,"defaultHeight":150},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"6a14988f-5f4b-4fab-af32-226b7844e41f":{"name":"text field","inputs":{"value":{"type":"string","optional":true},"style":{"type":"object","metadata":{"description":""},"optional":true},"maxLength":{"type":"number","optional":true,"defaultIgnored":true}},"outputs":{"value":{"type":"string","optional":true,"defaultIgnored":true}},"metadata":{"icon":"form-input","description":"single line text input","complexity":20,"tags":["platform","component","value"]},"id":"6a14988f-5f4b-4fab-af32-226b7844e41f","base":true,"component":{"defaultWidth":180,"defaultHeight":45},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"454aaff2-cd74-4f6e-baf2-631bb32e7a6b":{"name":"wrap","inputs":{"component":{"type":"`C`","optional":true,"metadata":{"examples":["${unit:{id:\\"f27cae4e-fea8-11ea-b91e-db41e114c426\\"}}"]}}},"outputs":{"parent":{"type":"`C`","ref":true,"component":true}},"metadata":{"icon":"square","description":"wrap all children with `component`","complexity":20,"tags":["platform","component"]},"id":"454aaff2-cd74-4f6e-baf2-631bb32e7a6b","base":true,"component":{"defaultWidth":240,"defaultHeight":240},"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"3ffeaaf8-30dd-11eb-9dcc-836b075fc64d":{"name":"zoom","inputs":{"style":{"type":"object","optional":true},"zoom":{"type":"{x:number,y:number,z:number}","optional":true,"metadata":{"examples":["{x:0,y:0,z:1}"]}},"width":{"type":"number","metadata":{"examples":["240"]}},"height":{"type":"number","metadata":{"examples":["240"]}}},"outputs":{},"metadata":{"icon":"square","description":"parent container","complexity":20,"tags":["platform","component"]},"id":"3ffeaaf8-30dd-11eb-9dcc-836b075fc64d","component":{"defaultWidth":240,"defaultHeight":240},"base":true,"type":"`U`&`C`&`V`&`J`","system":true,"render":true},"a08ce854-e13b-11ea-b260-e76cc1643e97":{"name":"any device","inputs":{"any":{"plug":{"0":{"unitId":"merge","pinId":"b"}},"type":"any"}},"outputs":{"device":{"plug":{"0":{"unitId":"device","pinId":"device"}},"type":"`BD`","ref":true}},"units":{"device":{"id":"4ad5bd0e-e11e-11ea-ad4c-83da30628333","input":{"opt":{}},"output":{"device":{}},"metadata":{"position":{"x":51,"y":-1}}},"merge":{"id":"60bdba6d-c670-430f-be72-6f39cf4e8453","input":{"a":{"constant":true,"data":"{acceptAllDevices:true}"},"b":{}},"output":{"ab":{}},"metadata":{"position":{"x":-52,"y":0}}}},"merges":{"0":{"merge":{"output":{"ab":true}},"device":{"input":{"opt":true}}}},"render":false,"component":{},"metadata":{"icon":"bluetooth","description":"select one of all available bluetooth devices","complexity":8,"tags":["platform","core","api","bluetooth"]},"type":"`U`&`G`","system":true,"id":"a08ce854-e13b-11ea-b260-e76cc1643e97"},"2633ed12-309e-40fe-910d-44106d917e96":{"name":"child set","type":"`U`&`G`","inputs":{"parent":{"plug":{"0":{"unitId":"child","pinId":"parent"}},"ref":true,"metadata":{"position":{"0":{"x":-97,"y":39}}},"type":"`C`"},"at":{"plug":{"0":{"unitId":"child","pinId":"at"}},"metadata":{"position":{"0":{"x":-102,"y":-31}}},"type":"number","ref":false},"name":{"plug":{"0":{"unitId":"writeinput","pinId":"name"}},"metadata":{"position":{"0":{"x":96,"y":39}}},"type":"string","ref":false},"data":{"plug":{"0":{"unitId":"writeinput","pinId":"data"}},"metadata":{"position":{"0":{"x":101,"y":-31}}},"type":"any","ref":false}},"outputs":{},"units":{"child":{"id":"59afce80-30e7-4322-84e6-955767bb5106","input":{"parent":{"metadata":{"position":{"x":-77,"y":19}}},"at":{"metadata":{"position":{"x":-79,"y":-16}}},"done":{}},"output":{"child":{}},"metadata":{"position":{"x":-53,"y":-1}}},"writeinput":{"id":"04953fed-157a-479d-91ac-005174b9b85e","input":{"name":{},"data":{},"unit":{}},"output":{"data":{"ignored":false}},"metadata":{"position":{"x":52,"y":0}}}},"merges":{"0":{"writeinput":{"output":{"data":true}},"child":{"input":{"done":true}}},"1":{"writeinput":{"input":{"unit":true}},"child":{"output":{"child":true}}}},"component":{},"metadata":{"icon":"triangle","description":"set `element` child `at` `name` to `data`","complexity":13,"position":{"merge":{"0":{"x":-1,"y":-26}}},"tags":["platform","core","api","children"]},"id":"2633ed12-309e-40fe-910d-44106d917e96","system":true},"d7d77ad6-91db-4da7-a3c6-c37157574b17":{"name":"child set style","inputs":{"style":{"plug":{"0":{"unitId":"childset","pinId":"data"}},"metadata":{"position":{"0":{"x":69,"y":-43}}},"type":"any"},"at":{"plug":{"0":{"unitId":"childset","pinId":"at"}},"metadata":{"position":{"0":{"x":-66,"y":28}}},"type":"number"},"parent":{"plug":{"0":{"unitId":"childset","pinId":"parent"}},"ref":true,"metadata":{"position":{"0":{"x":69,"y":28}}},"type":"<A>"}},"outputs":{},"units":{"childset":{"id":"2633ed12-309e-40fe-910d-44106d917e96","input":{"parent":{"metadata":{"position":{"x":47,"y":11}}},"at":{"metadata":{"position":{"x":-44,"y":11}}},"name":{"constant":true,"data":"\'style\'","metadata":{"position":{"x":-44,"y":-26}}},"data":{"metadata":{"position":{"x":47,"y":-26}}}},"output":{},"metadata":{"position":{"x":2,"y":-8}}}},"merges":{},"component":{},"metadata":{"icon":"object-set","description":"set `element` child `at` style to `style`","complexity":15,"tags":["platform","core","api","children"]},"id":"d7d77ad6-91db-4da7-a3c6-c37157574b17","type":"`U`&`G`","system":true},"9f9dff70-30e6-467b-9204-55fdf5b4ac4f":{"name":"child set value","inputs":{"value":{"plug":{"0":{"unitId":"childset","pinId":"data"}},"metadata":{"position":{"0":{"x":69,"y":-43}}},"type":"any"},"at":{"plug":{"0":{"unitId":"childset","pinId":"at"}},"metadata":{"position":{"0":{"x":-66,"y":28}}},"type":"number"},"parent":{"plug":{"0":{"unitId":"childset","pinId":"parent"}},"ref":true,"metadata":{"position":{"0":{"x":69,"y":28}}},"type":"<A>"}},"outputs":{},"units":{"childset":{"id":"2633ed12-309e-40fe-910d-44106d917e96","input":{"parent":{"metadata":{"position":{"x":47,"y":11}}},"at":{"metadata":{"position":{"x":-44,"y":11}}},"name":{"constant":true,"data":"\'value\'","metadata":{"position":{"x":-44,"y":-26}}},"data":{"metadata":{"position":{"x":47,"y":-26}}}},"output":{},"metadata":{"position":{"x":2,"y":-8}}}},"merges":{},"component":{},"metadata":{"icon":"triangle","description":"set `element` child `at` value to `value`","complexity":15,"tags":["platform","core","api","children"]},"id":"9f9dff70-30e6-467b-9204-55fdf5b4ac4f","type":"`U`&`G`","system":true},"4556afd4-2463-48c8-abb6-12e30fff6ed0":{"name":"get clientX","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"obj":{},"key":{"constant":true,"data":"\'clientX\'"}},"output":{"value":{}}}},"merges":{},"inputs":{"event":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"object"}},"outputs":{"clientX":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"number"}},"metadata":{"icon":"brackets-curly","description":"extract clientX from `obj`","complexity":5,"tags":["platform","core","api","event"]},"id":"4556afd4-2463-48c8-abb6-12e30fff6ed0","type":"`U`&`G`","system":true},"1cbbfd58-c4ee-4c83-a5c8-83f614eb7027":{"name":"get clientX clientY","units":{"getclientx":{"id":"4556afd4-2463-48c8-abb6-12e30fff6ed0","input":{"event":{}},"output":{"clientX":{}}},"getclienty":{"id":"97c4f4ec-2613-11eb-8c54-4b82dde232ca","input":{"event":{}},"output":{"clientY":{}}}},"merges":{"0":{"getclienty":{"input":{"event":true}},"getclientx":{"input":{"event":true}}}},"inputs":{"obj":{"plug":{"0":{"mergeId":"0"}},"type":"object"}},"outputs":{"y":{"plug":{"0":{"unitId":"getclienty","pinId":"clientY"}},"type":"number"},"x":{"plug":{"0":{"unitId":"getclientx","pinId":"clientX"}},"type":"number"}},"metadata":{"icon":"brackets-curly","description":"extract `clientX` and `clientY` from `obj`","complexity":10,"tags":["platform","core","api","event"]},"id":"1cbbfd58-c4ee-4c83-a5c8-83f614eb7027","type":"`U`&`G`","system":true},"97c4f4ec-2613-11eb-8c54-4b82dde232ca":{"name":"get clientY","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"obj":{},"key":{"constant":true,"data":"\'clientY\'"}},"output":{"value":{}}}},"merges":{},"inputs":{"event":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"object"}},"outputs":{"clientY":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"number"}},"metadata":{"icon":"brackets-curly","description":"extract clientY from `obj`","complexity":5,"tags":["platform","core","api","event"]},"id":"97c4f4ec-2613-11eb-8c54-4b82dde232ca","type":"`U`&`G`","system":true},"f7a26f8c-98ac-11eb-9b81-e79fad66a6ce":{"name":"get height","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"obj":{},"key":{"constant":true,"data":"\'height\'"}},"output":{"value":{}}}},"merges":{},"inputs":{"event":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"object"}},"outputs":{"height":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"number"}},"metadata":{"icon":"brackets-curly","description":"extract height from `obj`","complexity":5,"tags":["platform","core","api","event"]},"id":"f7a26f8c-98ac-11eb-9b81-e79fad66a6ce","type":"`U`&`G`","system":true},"f7805a56-668d-11eb-a8df-732d644930cc":{"name":"get id","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"obj":{},"key":{"constant":true,"data":"\'id\'"}},"output":{"value":{}}}},"merges":{},"inputs":{"obj":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"object"}},"outputs":{"id":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"number"}},"metadata":{"icon":"brackets-curly","description":"extract `id` from `obj`","complexity":5,"tags":["platform","core","api","event"]},"id":"f7805a56-668d-11eb-a8df-732d644930cc","type":"`U`&`G`","system":true},"8e48bf34-a3b3-11eb-af21-9fff67fa4349":{"name":"get key","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"obj":{},"key":{"constant":true,"data":"\'key\'"}},"output":{"value":{}}}},"merges":{},"inputs":{"event":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"object"}},"outputs":{"key":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"string"}},"metadata":{"icon":"brackets-curly","description":"extract key from `obj`","complexity":5,"tags":["platform","core","api","event"]},"id":"8e48bf34-a3b3-11eb-af21-9fff67fa4349","type":"`U`&`G`","system":true},"cd7cfbb3-c86b-401d-a6b7-9de912672d96":{"name":"get offsetX","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"obj":{},"key":{"constant":true,"data":"\'offsetX\'"}},"output":{"value":{}}}},"merges":{},"inputs":{"event":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"object"}},"outputs":{"offsetX":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"number"}},"metadata":{"icon":"brackets-curly","description":"extract offsetX from `obj`","complexity":5,"tags":["platform","core","api","event"]},"id":"cd7cfbb3-c86b-401d-a6b7-9de912672d96","type":"`U`&`G`","system":true},"2307cacf-1363-40bc-bd6b-d58227927ae0":{"name":"get offsetX offsetY","units":{"propoffsetx":{"id":"cd7cfbb3-c86b-401d-a6b7-9de912672d96","input":{"event":{}},"output":{"offsetX":{}}},"propclientcy":{"id":"6e9c4adb-77e4-45ef-a71b-ced42a49aae9","input":{"event":{}},"output":{"offsetY":{}}}},"merges":{"0":{"propclientcy":{"input":{"event":true}},"propoffsetx":{"input":{"event":true}}}},"inputs":{"obj":{"plug":{"0":{"mergeId":"0"}},"type":"object"}},"outputs":{"offsetY":{"plug":{"0":{"unitId":"propclientcy","pinId":"offsetY"}},"type":"number"},"offsetX":{"plug":{"0":{"unitId":"propoffsetx","pinId":"offsetX"}},"type":"number"}},"metadata":{"icon":"brackets-curly","description":"extract `offsetX` and `offsetY` from `obj`","complexity":10,"tags":["platform","core","api","event"]},"id":"2307cacf-1363-40bc-bd6b-d58227927ae0","type":"`U`&`G`","system":true},"6e9c4adb-77e4-45ef-a71b-ced42a49aae9":{"name":"get offsetY","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"obj":{},"key":{"constant":true,"data":"\'offsetY\'"}},"output":{"value":{}}}},"merges":{},"inputs":{"event":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"object"}},"outputs":{"offsetY":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"number"}},"metadata":{"icon":"brackets-curly","description":"extract offsetY from `obj`","complexity":5,"tags":["platform","core","api","event"]},"id":"6e9c4adb-77e4-45ef-a71b-ced42a49aae9","type":"`U`&`G`","system":true},"19f08be0-560a-11eb-a3a2-e7395ef5830a":{"name":"get url","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"obj":{},"key":{"constant":true,"data":"\'url\'"}},"output":{"value":{}}}},"merges":{},"inputs":{"obj":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"object"}},"outputs":{"url":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"string"}},"metadata":{"icon":"brackets-curly","description":"extract `url` from `obj`","complexity":5,"tags":["platform","core","api","event"]},"id":"19f08be0-560a-11eb-a3a2-e7395ef5830a","type":"`U`&`G`","system":true},"16249a80-98ac-11eb-95b7-1b64bf84f0d8":{"name":"get width","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"obj":{},"key":{"constant":true,"data":"\'width\'"}},"output":{"value":{}}}},"merges":{},"inputs":{"event":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"object"}},"outputs":{"width":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"number"}},"metadata":{"icon":"brackets-curly","description":"extract width from `obj`","complexity":5,"tags":["platform","core","api","event"]},"id":"16249a80-98ac-11eb-95b7-1b64bf84f0d8","type":"`U`&`G`","system":true},"bbc52982-4a71-45b8-8521-c0c30260c022":{"name":"merge event data","units":{"tagevent":{"id":"5fe94b90-2618-11eb-b06a-5fc0ce62fd27","input":{"event":{}},"output":{"{event}":{}}},"tagdata":{"id":"7a602db8-2618-11eb-b9c6-4bb45b6d8833","input":{"data":{}},"output":{"{data}":{}}},"merge":{"id":"60bdba6d-c670-430f-be72-6f39cf4e8453","input":{"a":{},"b":{}},"output":{"ab":{}}}},"merges":{"0":{"merge":{"input":{"a":true}},"tagdata":{"output":{"{data}":true}}},"1":{"merge":{"input":{"b":true}},"tagevent":{"output":{"{event}":true}}}},"inputs":{"data":{"plug":{"0":{"unitId":"tagdata","pinId":"data"}},"type":"any"},"event":{"plug":{"0":{"unitId":"tagevent","pinId":"event"}},"type":"string"}},"outputs":{"{event,data}":{"plug":{"0":{"unitId":"merge","pinId":"ab"}},"type":"object"}},"metadata":{"icon":"brackets-curly","description":"...","complexity":15,"tags":["platform","core","api","event"]},"id":"bbc52982-4a71-45b8-8521-c0c30260c022","type":"`U`&`G`","system":true},"1448dd43-3e1e-4709-a9e1-3562d61cc6f1":{"name":"on axis change","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'axischange\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"gamepad":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"number"}},"metadata":{"icon":"square","description":"listen to `gamepad` \\"axischange\\" event","complexity":5,"tags":["platform","core","api","event"]},"id":"1448dd43-3e1e-4709-a9e1-3562d61cc6f1","type":"`U`&`G`","system":true},"98c01feb-afc7-4333-988f-9d516b5038bd":{"name":"on button down","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'buttondown\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"gamepad":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"number"}},"metadata":{"icon":"square","description":"listen to `gamepad` \\"buttondown\\" event","complexity":5,"tags":["platform","core","api","event"]},"id":"98c01feb-afc7-4333-988f-9d516b5038bd","type":"`U`&`G`","system":true},"60f1199f-d3e8-4968-8b48-4f8169a89602":{"name":"on button up","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'buttonup\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"gamepad":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"number"}},"metadata":{"icon":"square","description":"listen to `gamepad` \\"buttonup\\" event","complexity":5,"tags":["platform","core","api","event"]},"id":"60f1199f-d3e8-4968-8b48-4f8169a89602","type":"`U`&`G`","system":true},"7f25303a-b1ee-11ea-bab2-5f81e27c8466":{"name":"on change","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'change\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`C`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"any"}},"metadata":{"icon":"square","description":"listen to `element` change event","complexity":5,"tags":["platform","core","api","event"]},"id":"7f25303a-b1ee-11ea-bab2-5f81e27c8466","type":"`U`&`G`","system":true},"7b1eebd2-e8eb-11ea-a986-af42b73b3719":{"name":"on charact value changed","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'characteristicvaluechanged\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"charact":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"value":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"string"}},"metadata":{"icon":"square","description":"listen to Bluetooth GATT `characteristic` value changed event","complexity":5,"tags":["platform","core","api","event"]},"id":"7b1eebd2-e8eb-11ea-a986-af42b73b3719","type":"`U`&`G`","system":true},"97c94516-add1-11ea-ba72-8f55299b735c":{"name":"on click","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'click\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`C`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"{clientX:number,clientY:number,offsetX:number,offsetY:number,pointerId:number,pointerType:string}"}},"metadata":{"icon":"square","description":"listen to `element` click event","complexity":5,"tags":["platform","core","api","event"]},"id":"97c94516-add1-11ea-ba72-8f55299b735c","type":"`U`&`G`","system":true},"2ef3ebd3-6447-4871-ba2f-f539a3fa02ff":{"name":"on close","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'close\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"string"}},"metadata":{"icon":"square","description":"listen to `element` \\"ntf_close\\" event","complexity":5,"tags":["platform","core","api","event"]},"id":"2ef3ebd3-6447-4871-ba2f-f539a3fa02ff","type":"`U`&`G`","system":true},"8809ad1e-91bf-11eb-a3ad-dbb373958321":{"name":"on data","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'data\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"unit":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"data":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"any"}},"metadata":{"icon":"square","description":"listen to `element` message event","complexity":5,"tags":["platform","core","api","event"]},"id":"8809ad1e-91bf-11eb-a3ad-dbb373958321","type":"`U`&`G`","system":true},"f7c43966-be6b-11eb-ac82-2f0415b064df":{"name":"on data available","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'dataavailable\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"unit":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"data":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"any"}},"metadata":{"icon":"square","description":"listen to `element` message event","complexity":5,"tags":["platform","core","api","event"]},"id":"f7c43966-be6b-11eb-ac82-2f0415b064df","type":"`U`&`G`","system":true},"40f9a40a-b4f2-11eb-baf1-933bfa98253e":{"name":"on double click","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'dbclick\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"{clientX:number,clientY:number,offsetX:number,offsetY:number,pointerId:number,pointerType:string}"}},"metadata":{"icon":"square","description":"listen to `element` double click event","complexity":5,"tags":["platform","core","api","event"]},"id":"40f9a40a-b4f2-11eb-baf1-933bfa98253e","type":"`U`&`G`","system":true},"d4de180e-f1e8-4575-ab64-eaef413bcfc4":{"name":"on drag","inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"},"1":{"unitId":"onpointerleave","pinId":"element"},"2":{"unitId":"onpointerdown","pinId":"element"},"3":{"unitId":"setpointercapture","pinId":"element"},"4":{"unitId":"onpointerup","pinId":"element"}},"type":"`EE`","ref":true,"metadata":{"position":{"0":{"x":68,"y":-106},"1":{"x":186,"y":43},"2":{"x":-252,"y":6},"3":{"x":59,"y":92},"4":{"x":188,"y":-57}}}}},"outputs":{"move":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"any","metadata":{"position":{"0":{"x":-6,"y":-116}}}},"down":{"plug":{"0":{"mergeId":"0"}},"type":"{clientX:number,clientY:number,offsetX:number,offsetY:number,pointerId:number,pointerType:string}","metadata":{"position":{"0":{"x":-139,"y":-13}}}},"up":{"plug":{"0":{"mergeId":"2"}},"type":"{clientX:number,clientY:number,offsetX:number,offsetY:number,pointerId:number,pointerType:string}","metadata":{"position":{"0":{"x":72,"y":12}}}}},"units":{"onpointerdown":{"id":"2beefe96-b1ee-11ea-960c-7f33e07a2ad6","input":{"element":{"metadata":{"position":{"x":-229,"y":5}}}},"output":{"event":{}},"metadata":{"position":{"x":-178,"y":5}}},"onpointerleave":{"id":"c7dba94e-af78-11ea-b7d7-47e14ca215b5","input":{"element":{"metadata":{"position":{"x":165,"y":31}}}},"output":{"event":{}},"metadata":{"position":{"x":116,"y":18}}},"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"emitter":{"metadata":{"position":{"x":61,"y":-83}}},"event":{},"remove":{"ignored":false}},"output":{"data":{"metadata":{"position":{"x":-1,"y":-92}}}},"metadata":{"position":{"x":24,"y":-52}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"\\"pointermove\\"","metadata":{"position":{"x":-131,"y":-64}}},"b":{}},"output":{"a":{}},"metadata":{"position":{"x":-89,"y":-39}}},"setpointercapture":{"id":"d3fc887c-9fc5-11eb-8f63-ab42b0414469","input":{"element":{"metadata":{"position":{"x":56,"y":68}}},"pointerId":{},"done":{}},"output":{},"metadata":{"position":{"x":27,"y":32}}},"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"obj":{},"key":{"constant":true,"data":"\\"pointerId\\"","metadata":{"position":{"x":-119,"y":71}}}},"output":{"value":{}},"metadata":{"position":{"x":-82,"y":40}}},"onpointerup":{"id":"43a9d452-b1ee-11ea-923f-efb4af36e68e","input":{"element":{"metadata":{"position":{"x":168,"y":-45}}}},"output":{"event":{}},"metadata":{"position":{"x":118,"y":-33}}}},"merges":{"0":{"wait":{"input":{"b":true}},"onpointerdown":{"output":{"event":true}},"get":{"input":{"obj":true}}},"1":{"wait":{"output":{"a":true}},"listen":{"input":{"event":true}}},"2":{"onpointerleave":{"output":{"event":true}},"listen":{"input":{"remove":true}},"setpointercapture":{"input":{"done":true}},"onpointerup":{"output":{"event":true}}},"3":{"setpointercapture":{"input":{"pointerId":true}},"get":{"output":{"value":true}}}},"metadata":{"icon":"grab","description":"...","complexity":35,"tags":["platform","core","api","event"],"position":{"merge":{"0":{"x":-123,"y":3},"1":{"x":-33,"y":-50},"2":{"x":67,"y":-10},"3":{"x":-27,"y":43}}}},"id":"d4de180e-f1e8-4575-ab64-eaef413bcfc4","type":"`U`&`G`","system":true,"component":{"subComponents":{},"children":[],"defaultWidth":200,"defaultHeight":200}},"ae5c6f18-9ff9-11eb-986e-6fd93ceb151c":{"name":"on drag delta","inputs":{"element":{"plug":{"0":{"unitId":"ondrag","pinId":"element"}},"ref":true,"type":"`U`"}},"outputs":{"x":{"plug":{"0":{"unitId":"subtract","pinId":"a - b"}},"type":"number"},"y":{"plug":{"0":{"unitId":"subgtract","pinId":"a - b"}},"type":"number"},"test":{"plug":{"0":{"mergeId":"6"}}}},"units":{"ondrag":{"id":"d4de180e-f1e8-4575-ab64-eaef413bcfc4","input":{"element":{"metadata":{"position":{"x":-174,"y":-1}}}},"output":{"move":{},"down":{},"up":{"ignored":false,"metadata":{"position":{"x":-166,"y":24}}}},"metadata":{"position":{"x":-74,"y":48}}},"subtract":{"id":"fa94b179-00e3-4ed1-814e-7938324a833f","input":{"a":{},"b":{}},"output":{"a - b":{"metadata":{"position":{"x":126,"y":-63}}}},"metadata":{"position":{"x":135,"y":-31}}},"getclientxclienty":{"id":"1cbbfd58-c4ee-4c83-a5c8-83f614eb7027","input":{"obj":{}},"output":{"y":{},"x":{}},"metadata":{"position":{"x":51,"y":-51}}},"getclientxclienty0":{"id":"1cbbfd58-c4ee-4c83-a5c8-83f614eb7027","input":{"obj":{}},"output":{"y":{},"x":{}},"metadata":{"position":{"x":39,"y":36}}},"subgtract":{"id":"fa94b179-00e3-4ed1-814e-7938324a833f","input":{"a":{},"b":{}},"output":{"a - b":{"metadata":{"position":{"x":126,"y":61}}}},"metadata":{"position":{"x":132,"y":28}}},"looprepeat":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","input":{"init":{},"test":{}},"output":{"local":{"ignored":true},"current":{},"final":{"ignored":true}},"metadata":{"position":{"x":-57,"y":-39}}},"true":{"id":"984c4a44-86c7-464c-ad48-4759598c3be3","input":{"any":{}},"output":{"true":{}},"metadata":{"position":{"x":-71,"y":7}}},"false":{"id":"b4d20f6f-32dc-4d04-97d6-69518976bdea","input":{"any":{}},"output":{"false":{}},"metadata":{"position":{"x":-159,"y":-3}}}},"merges":{"0":{"ondrag":{"output":{"down":true}},"looprepeat":{"input":{"init":true}}},"1":{"getclientxclienty0":{"input":{"obj":true}},"ondrag":{"output":{"move":true}},"true":{"input":{"any":true}}},"2":{"subtract":{"input":{"a":true}},"getclientxclienty0":{"output":{"x":true}}},"3":{"subtract":{"input":{"b":true}},"getclientxclienty":{"output":{"y":true}}},"4":{"subgtract":{"input":{"a":true}},"getclientxclienty0":{"output":{"y":true}}},"5":{"subgtract":{"input":{"b":true}},"getclientxclienty":{"output":{"y":true}}},"6":{"looprepeat":{"input":{"test":true}},"true":{"output":{"true":true}},"false":{"output":{"false":true}}},"7":{"false":{"input":{"any":true}},"ondrag":{"output":{"up":true}}},"8":{"getclientxclienty":{"input":{"obj":true}},"looprepeat":{"output":{"current":true}}}},"metadata":{"icon":"grab","complexity":49,"tags":["platform","core","api","event"],"position":{"merge":{"0":{"x":-72,"y":-22},"1":{"x":-72,"y":20},"2":{"x":33,"y":-15},"3":{"x":28,"y":-55},"4":{"x":28,"y":52},"5":{"x":33,"y":13}}}},"id":"ae5c6f18-9ff9-11eb-986e-6fd93ceb151c","system":true},"90b783fe-a6a6-4026-9af6-fd853a5705f4":{"name":"on drag start","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'dragstart\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`C`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"{clientX:number,clientY:number,offsetX:number,offsetY:number}"}},"metadata":{"icon":"square","description":"listen to `element` click event","complexity":5,"tags":["platform","core","api","event"]},"id":"90b783fe-a6a6-4026-9af6-fd853a5705f4","type":"`U`&`G`","system":true},"4638661f-11d9-4727-83d1-8cdccc01508c":{"name":"on drop","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'drop\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`C`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"{clientX:number,clientY:number,offsetX:number,offsetY:number}"}},"metadata":{"icon":"square","description":"listen to `element` click event","complexity":5,"tags":["platform","core","api","event"]},"id":"4638661f-11d9-4727-83d1-8cdccc01508c","type":"`U`&`G`","system":true},"15507368-081f-11eb-aee1-d3c00ce4dd9d":{"name":"on error","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'error\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"string"}},"metadata":{"icon":"square","description":"listen to `element` \\"error\\" event","complexity":5,"tags":["platform","core","api","event"]},"id":"15507368-081f-11eb-aee1-d3c00ce4dd9d","type":"`U`&`G`","system":true},"b345c410-b1ee-11ea-b725-0b9ed734d65f":{"name":"on input","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'input\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`C`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"any"}},"metadata":{"icon":"square","description":"listen to `element` input event","complexity":5,"tags":["platform","core","api","event"]},"id":"b345c410-b1ee-11ea-b725-0b9ed734d65f","type":"`U`&`G`","system":true},"02dec0ae-a3b0-11eb-ab4e-afd7066a6476":{"name":"on keydown","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'keydown\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"{key:string,keyCode:number,ctrlKey:boolean,shiftKey:boolean,altKey:boolean,metaKey:boolean,repeat:boolean}"}},"metadata":{"icon":"square","description":"listen to `element` keydown event","complexity":5,"tags":["platform","core","api","event"]},"id":"02dec0ae-a3b0-11eb-ab4e-afd7066a6476","type":"`U`&`G`","system":true},"23c3952a-ef19-11ea-b80e-3f693508091e":{"name":"on message","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'message\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"emitter":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","_type":"<T:`EE`>","ref":true}},"outputs":{"message":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"any","_type":"<T:`EE`>[\'message\']"}},"metadata":{"icon":"square","description":"listen to `element` message event","complexity":5,"tags":["platform","core","api","event"]},"id":"23c3952a-ef19-11ea-b80e-3f693508091e","type":"`U`&`G`","system":true},"6ecc9c94-98bd-11eb-845c-dfd895d4184c":{"name":"on mount","inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"{clientX:number,clientY:number,offsetX:number,offsetY:number,pointerId:number,pointerType:string}"}},"units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"emitter":{"metadata":{"position":{"x":-15,"y":26}}},"event":{"data":"\'mount\'","constant":true,"metadata":{"position":{"x":-34,"y":-7}}},"remove":{"ignored":false,"metadata":{"position":{"x":-15,"y":-39}}}},"output":{"data":{"metadata":{"position":{"x":66,"y":-7}}}},"metadata":{"position":{"x":17,"y":-7}}}},"merges":{},"metadata":{"icon":"square","description":"listen to `element` \'mount\' event","complexity":5,"tags":["platform","core","api","event"]},"id":"6ecc9c94-98bd-11eb-845c-dfd895d4184c","type":"`U`&`G`","system":true},"ec03bf8a-30f8-11eb-b4a7-a77c38c8f1b3":{"name":"on paste","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'paste\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"string"}},"metadata":{"icon":"square","description":"listen to `element` paste event","complexity":5,"tags":["platform","core","api","event"]},"id":"ec03bf8a-30f8-11eb-b4a7-a77c38c8f1b3","type":"`U`&`G`","system":true},"2beefe96-b1ee-11ea-960c-7f33e07a2ad6":{"name":"on pointer down","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'pointerdown\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"{clientX:number,clientY:number,offsetX:number,offsetY:number,pointerId:number,pointerType:string}"}},"metadata":{"icon":"square","description":"listen to `element` pointerdown event","complexity":5,"tags":["platform","core","api","event"]},"id":"2beefe96-b1ee-11ea-960c-7f33e07a2ad6","type":"`U`&`G`","system":true},"c0bb493a-af78-11ea-b6fa-3b893b757a39":{"name":"on pointer enter","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'pointerenter\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"{clientX:number,clientY:number,offsetX:number,offsetY:number,pointerId:number,pointerType:string}"}},"metadata":{"icon":"square","description":"listen to `element` pointerenter event","complexity":5,"tags":["platform","core","api","event"]},"id":"c0bb493a-af78-11ea-b6fa-3b893b757a39","type":"`U`&`G`","system":true},"c7dba94e-af78-11ea-b7d7-47e14ca215b5":{"name":"on pointer leave","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'pointerleave\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"{clientX:number,clientY:number,offsetX:number,offsetY:number,pointerId:number,pointerType:string}"}},"metadata":{"icon":"square","description":"listen to `element` pointerleave event","complexity":5,"tags":["platform","core","api","event"]},"id":"c7dba94e-af78-11ea-b7d7-47e14ca215b5","type":"`U`&`G`","system":true},"6e45f29a-b1ee-11ea-908d-c7724f096465":{"name":"on pointer move","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'pointermove\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"{clientX:number,clientY:number,offsetX:number,offsetY:number,pointerId:number,pointerType:string}"}},"metadata":{"icon":"square","description":"listen to `element` pointerup event","complexity":5,"tags":["platform","core","api","event"]},"id":"6e45f29a-b1ee-11ea-908d-c7724f096465","type":"`U`&`G`","system":true},"43a9d452-b1ee-11ea-923f-efb4af36e68e":{"name":"on pointer up","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'pointerup\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"{clientX:number,clientY:number,offsetX:number,offsetY:number,pointerId:number,pointerType:string}"}},"metadata":{"icon":"square","description":"listen to `element` pointerup event","complexity":5,"tags":["platform","core","api","event"]},"id":"43a9d452-b1ee-11ea-923f-efb4af36e68e","type":"`U`&`G`","system":true},"9fd9d2ea-98a7-11eb-8aa3-fbeb43cb1944":{"name":"on resize","inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"{width:number,height:number}"}},"units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"emitter":{"metadata":{"position":{"x":-15,"y":26}}},"event":{"data":"\'_resize\'","constant":true,"metadata":{"position":{"x":-34,"y":-7}}},"remove":{"ignored":false,"metadata":{"position":{"x":-15,"y":-39}}}},"output":{"data":{"metadata":{"position":{"x":66,"y":-7}}}},"metadata":{"position":{"x":17,"y":-7}}}},"merges":{},"metadata":{"icon":"square","description":"listen to `element` \'resize\' event","complexity":5,"tags":["platform","core","api","event"]},"id":"9fd9d2ea-98a7-11eb-8aa3-fbeb43cb1944","type":"`U`&`G`","system":true},"9256571c-db04-4559-a0a6-b8b0d107861f":{"name":"on set","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'set\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"any"}},"metadata":{"icon":"square","description":"listen to `element` \\"set\\" event","complexity":5,"tags":["platform","core","api","event"]},"id":"9256571c-db04-4559-a0a6-b8b0d107861f","type":"`U`&`G`","system":true},"cbb19840-081e-11eb-918d-3f728eda5672":{"name":"on show","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'show\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"string"}},"metadata":{"icon":"square","description":"listen to `element` \\"show\\" event","complexity":5,"tags":["platform","core","api","event"]},"id":"cbb19840-081e-11eb-918d-3f728eda5672","type":"`U`&`G`","system":true},"d0e6f14c-400c-42f3-bfd6-1bbe0146f490":{"name":"on value","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'value\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"any"}},"metadata":{"icon":"square","description":"listen to `element` input event","complexity":5,"tags":["platform","core","api","event"]},"id":"d0e6f14c-400c-42f3-bfd6-1bbe0146f490","type":"`U`&`G`","system":true},"52e6d3c8-0958-4829-bc25-1f6cdbf6e451":{"name":"on wheel","units":{"listen":{"id":"367241d8-ad12-11ea-beed-9777f31699a8","input":{"event":{"data":"\'wheel\'"},"remove":{"ignored":false}}}},"merges":{},"inputs":{"element":{"plug":{"0":{"unitId":"listen","pinId":"emitter"}},"type":"`EE`","ref":true}},"outputs":{"event":{"plug":{"0":{"unitId":"listen","pinId":"data"}},"type":"{clientX:number,clientY:number,offsetX:number,offsetY:number,deltaX:number,deltaY:number,ctrlKey:boolean,altKey:boolean}"}},"metadata":{"icon":"square","description":"listen to `element` wheel event","complexity":5,"tags":["platform","core","api","event"]},"id":"52e6d3c8-0958-4829-bc25-1f6cdbf6e451","type":"`U`&`G`","system":true},"7a602db8-2618-11eb-b9c6-4bb45b6d8833":{"name":"tag data","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'data\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{data: `data`}","complexity":7,"tags":["platform","core","api","event"]},"inputs":{"data":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"any"}},"outputs":{"{data}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"7a602db8-2618-11eb-b9c6-4bb45b6d8833","type":"`U`&`G`","system":true},"5fe94b90-2618-11eb-b06a-5fc0ce62fd27":{"name":"tag event","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'event\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{event: `event`}","complexity":7,"tags":["platform","core","api","event"]},"inputs":{"event":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"string"}},"outputs":{"{event}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"5fe94b90-2618-11eb-b06a-5fc0ce62fd27","type":"`U`&`G`","system":true},"9a652f1b-f65f-4f3b-888a-2d90ddb43713":{"name":"watch change","units":{"getvalue":{"id":"d74f12c2-1868-11eb-8136-238c1b1a727f","input":{"obj":{},"any":{"data":"1"}},"output":{"value":{}}},"onchange":{"id":"7f25303a-b1ee-11ea-bab2-5f81e27c8466","input":{"element":{}},"output":{"event":{}}}},"merges":{"0":{"onchange":{"input":{"element":true}},"getvalue":{"input":{"obj":true}}},"1":{"onchange":{"output":{"event":true}},"getvalue":{"input":{"any":true}}}},"inputs":{"element":{"plug":{"0":{"mergeId":"0"}},"type":"`C`","ref":true}},"outputs":{"value":{"plug":{"0":{"unitId":"getvalue","pinId":"value"}},"type":"any"}},"metadata":{"icon":"square","description":"output `element` value and listen \\"input\\" event","complexity":15,"tags":["platform","core","api","event"]},"id":"9a652f1b-f65f-4f3b-888a-2d90ddb43713","type":"`U`&`G`","system":true},"f1e3b2aa-1215-49f0-a2cd-2ef7178a4374":{"name":"watch input","units":{"getvalue":{"id":"d74f12c2-1868-11eb-8136-238c1b1a727f","input":{"obj":{},"any":{"data":"1"}},"output":{"value":{}}},"oninput":{"id":"b345c410-b1ee-11ea-b725-0b9ed734d65f","input":{"element":{}},"output":{"event":{}}}},"merges":{"0":{"oninput":{"input":{"element":true}},"getvalue":{"input":{"obj":true}}},"1":{"oninput":{"output":{"event":true}},"getvalue":{"input":{"any":true}}}},"inputs":{"element":{"plug":{"0":{"mergeId":"0"}},"type":"`C`","ref":true}},"outputs":{"value":{"plug":{"0":{"unitId":"getvalue","pinId":"value"}},"type":"any"}},"metadata":{"icon":"square","description":"output `element` value and listen \\"input\\" event","complexity":15,"tags":["platform","core","api","event"]},"id":"f1e3b2aa-1215-49f0-a2cd-2ef7178a4374","type":"`U`&`G`","system":true},"f513667c-3e2f-11eb-8a96-4fbfb5c1b798":{"name":"get height","inputs":{"obj":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"`U`","ref":true,"metadata":{"position":{"0":{"x":123,"y":33}}}},"any":{"plug":{"0":{"unitId":"wait0","pinId":"b"}},"type":"any","metadata":{"position":{"0":{"x":-120,"y":33}}}}},"outputs":{"height":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"any","metadata":{"position":{"0":{"x":123,"y":-34}}}}},"units":{"get":{"id":"bc0320e2-2eb8-11eb-a38f-a779bfe81645","input":{"obj":{"metadata":{"position":{"x":100,"y":17}}},"name":{}},"output":{"value":{"metadata":{"position":{"x":100,"y":-18}}}},"metadata":{"position":{"x":55,"y":0}}},"wait0":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"\'height\'","metadata":{"position":{"x":-97,"y":-18}}},"b":{"metadata":{"position":{"x":-97,"y":17}}}},"output":{"a":{}},"metadata":{"position":{"x":-52,"y":0}}}},"merges":{"0":{"wait0":{"output":{"a":true}},"get":{"input":{"name":true}}}},"metadata":{"icon":"object-get","description":"get unit\'s current height","complexity":8,"tags":["platform","core","api","get"],"position":{"merge":{"0":{"x":2,"y":0}}}},"id":"f513667c-3e2f-11eb-8a96-4fbfb5c1b798","type":"`U`&`G`","system":true},"38b257d7-fa9d-483f-b858-4a0e6cbf7f66":{"name":"get host","units":{"get":{"id":"bc0320e2-2eb8-11eb-a38f-a779bfe81645","input":{"obj":{},"name":{}},"output":{"value":{}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"\'host\'"},"b":{}},"output":{"a":{}}}},"merges":{"0":{"wait":{"output":{"a":true}},"get":{"input":{"name":true}}}},"inputs":{"any":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"},"obj":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"ref":true,"type":"`U`"}},"outputs":{"host":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"any"}},"metadata":{"icon":"circle","description":"...","complexity":8,"tags":["platform","core","api","get"]},"id":"38b257d7-fa9d-483f-b858-4a0e6cbf7f66","type":"`U`&`G`","system":true},"9a695a17-a448-457f-90c2-02aed4b392af":{"name":"get hostname","units":{"get":{"id":"bc0320e2-2eb8-11eb-a38f-a779bfe81645","input":{"obj":{},"name":{}},"output":{"value":{}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"\'hostname\'"},"b":{}},"output":{"a":{}}}},"merges":{"0":{"wait":{"output":{"a":true}},"get":{"input":{"name":true}}}},"inputs":{"any":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"},"obj":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"ref":true,"type":"`U`"}},"outputs":{"hostname":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"any"}},"metadata":{"icon":"circle","description":"...","complexity":8,"tags":["platform","core","api","get"]},"id":"9a695a17-a448-457f-90c2-02aed4b392af","type":"`U`&`G`","system":true},"3a8a68cc-2ec7-11eb-a2b8-df0a171f0ba5":{"name":"get origin","units":{"get":{"id":"bc0320e2-2eb8-11eb-a38f-a779bfe81645","input":{"obj":{},"name":{}},"output":{"value":{}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"\'origin\'"},"b":{}},"output":{"a":{}}}},"merges":{"0":{"wait":{"output":{"a":true}},"get":{"input":{"name":true}}}},"inputs":{"any":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"},"obj":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"ref":true,"type":"`U`"}},"outputs":{"origin":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"any"}},"metadata":{"icon":"circle","description":"...","complexity":8,"tags":["platform","core","api","get"]},"id":"3a8a68cc-2ec7-11eb-a2b8-df0a171f0ba5","type":"`U`&`G`","system":true},"3bc6b974-594b-41b8-96d2-2189d58bfcd2":{"name":"get search","units":{"get":{"id":"bc0320e2-2eb8-11eb-a38f-a779bfe81645","input":{"obj":{},"name":{}},"output":{"value":{}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"\'search\'"},"b":{}},"output":{"a":{}}}},"merges":{"0":{"wait":{"output":{"a":true}},"get":{"input":{"name":true}}}},"inputs":{"any":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"},"obj":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"ref":true,"type":"`U`"}},"outputs":{"origin":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"any"}},"metadata":{"icon":"circle","description":"...","complexity":8,"tags":["platform","core","api","get"]},"id":"3bc6b974-594b-41b8-96d2-2189d58bfcd2","type":"`U`&`G`","system":true},"6a2e05c5-9753-4511-9e10-a8fba6491c29":{"name":"get sender","inputs":{"obj":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"`U`","ref":true,"metadata":{"position":{"0":{"x":123,"y":33}}}},"any":{"plug":{"0":{"unitId":"wait0","pinId":"b"}},"type":"any","metadata":{"position":{"0":{"x":-120,"y":33}}}}},"outputs":{"sender":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"any","metadata":{"position":{"0":{"x":123,"y":-34}}}}},"units":{"get":{"id":"bc0320e2-2eb8-11eb-a38f-a779bfe81645","input":{"obj":{"metadata":{"position":{"x":100,"y":17}}},"name":{}},"output":{"value":{"metadata":{"position":{"x":100,"y":-18}}}},"metadata":{"position":{"x":55,"y":0}}},"wait0":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"\'sender\'","metadata":{"position":{"x":-97,"y":-18}}},"b":{"metadata":{"position":{"x":-97,"y":17}}}},"output":{"a":{}},"metadata":{"position":{"x":-52,"y":0}}}},"merges":{"0":{"wait0":{"output":{"a":true}},"get":{"input":{"name":true}}}},"metadata":{"icon":"object-get","description":"get unit\'s current sender","complexity":8,"tags":["platform","core","api","get"],"position":{"merge":{"0":{"x":2,"y":0}}}},"id":"6a2e05c5-9753-4511-9e10-a8fba6491c29","type":"`U`&`G`","system":true},"c0dfeea2-4c9c-45df-99ea-d458925ddc94":{"name":"get src","units":{"get":{"id":"bc0320e2-2eb8-11eb-a38f-a779bfe81645","input":{"obj":{},"name":{}},"output":{"value":{}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"\'src\'"},"b":{}},"output":{"a":{}}}},"merges":{"0":{"wait":{"output":{"a":true}},"get":{"input":{"name":true}}}},"inputs":{"any":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any"},"obj":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"ref":true,"type":"`U`"}},"outputs":{"origin":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"any"}},"metadata":{"icon":"circle","description":"...","complexity":8,"tags":["platform","core","api","get"]},"id":"c0dfeea2-4c9c-45df-99ea-d458925ddc94","type":"`U`&`G`","system":true},"d74f12c2-1868-11eb-8136-238c1b1a727f":{"name":"get value","inputs":{"obj":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"`J`","ref":true,"metadata":{"position":{"0":{"x":-125,"y":-34}}}},"any":{"plug":{"0":{"unitId":"wait0","pinId":"b"}},"type":"any","metadata":{"position":{"0":{"x":120,"y":33}}}}},"outputs":{"value":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"any","metadata":{"position":{"0":{"x":-125,"y":33}}}}},"units":{"get":{"id":"bc0320e2-2eb8-11eb-a38f-a779bfe81645","input":{"obj":{"metadata":{"position":{"x":-102,"y":-18}}},"name":{}},"output":{"value":{"metadata":{"position":{"x":-102,"y":17}}}},"metadata":{"position":{"x":-56,"y":0}}},"wait0":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"\'value\'","metadata":{"position":{"x":97,"y":-18}}},"b":{"metadata":{"position":{"x":97,"y":17}}}},"output":{"a":{}},"metadata":{"position":{"x":52,"y":0}}}},"merges":{"0":{"wait0":{"output":{"a":true}},"get":{"input":{"name":true}}}},"metadata":{"icon":"object-get","description":"set element\'s current value","complexity":8,"tags":["platform","core","api","get"],"position":{"merge":{"0":{"x":-2,"y":0}}}},"id":"d74f12c2-1868-11eb-8136-238c1b1a727f","type":"`U`&`G`","system":true},"00682850-3e30-11eb-86ea-8f1c604946aa":{"name":"get width","inputs":{"obj":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"`U`","ref":true,"metadata":{"position":{"0":{"x":123,"y":33}}}},"any":{"plug":{"0":{"unitId":"wait0","pinId":"b"}},"type":"any","metadata":{"position":{"0":{"x":-120,"y":33}}}}},"outputs":{"width":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"any","metadata":{"position":{"0":{"x":123,"y":-34}}}}},"units":{"get":{"id":"bc0320e2-2eb8-11eb-a38f-a779bfe81645","input":{"obj":{"metadata":{"position":{"x":100,"y":17}}},"name":{}},"output":{"value":{"metadata":{"position":{"x":100,"y":-18}}}},"metadata":{"position":{"x":55,"y":0}}},"wait0":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"\'width\'","metadata":{"position":{"x":-97,"y":-18}}},"b":{"metadata":{"position":{"x":-97,"y":17}}}},"output":{"a":{}},"metadata":{"position":{"x":-52,"y":0}}}},"merges":{"0":{"wait0":{"output":{"a":true}},"get":{"input":{"name":true}}}},"metadata":{"icon":"object-get","description":"get unit\'s current width","complexity":8,"tags":["platform","core","api","get"],"position":{"merge":{"0":{"x":2,"y":0}}}},"id":"00682850-3e30-11eb-86ea-8f1c604946aa","type":"`U`&`G`","system":true},"74aea9dc-5247-4689-816f-2a1f24abbfc8":{"type":"`U`&`G`","name":"location query","units":{"parseurl":{"id":"81ac8195-57ed-4b22-b8b8-fe3e68b11af0","input":{"url":{}},"output":{"obj":{}},"metadata":{"position":{"x":-79,"y":80}}},"location":{"id":"30f6738c-1938-4dcd-9e7f-6c10f9730021","input":{"any":{}},"output":{"url":{}},"metadata":{"position":{"x":-181,"y":83}}},"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"obj":{},"key":{"constant":true,"data":"\\"search\\""}},"output":{"value":{}},"metadata":{"position":{"x":26,"y":61}}},"parsequery":{"id":"02f91720-c4d5-4d66-ae91-d46ddc635722","input":{"str":{}},"output":{"obj":{}},"metadata":{"position":{"x":129,"y":63}}}},"merges":{"0":{"parseurl":{"input":{"url":true}},"location":{"output":{"url":true}}},"1":{"parseurl":{"output":{"obj":true}},"get":{"input":{"obj":true}}},"2":{"get":{"output":{"value":true}},"parsequery":{"input":{"str":true}}}},"inputs":{"any":{"plug":{"0":{"unitId":"location","pinId":"any"}},"ref":false}},"outputs":{"obj":{"plug":{"0":{"unitId":"parsequery","pinId":"obj"}},"ref":false}},"metadata":{"icon":"question","description":"","tags":["platform","core","api","location"]},"id":"74aea9dc-5247-4689-816f-2a1f24abbfc8","system":true,"specs":{}},"e98f03fc-0987-4d21-9642-9078b23183ed":{"name":"get devices of kind","units":{"enumeratedevices":{"id":"3511f756-2a02-4346-b417-8c34502f79d4"},"filterpropequals":{"id":"f0386b2f-de73-49a3-be8f-1a2ca10600c5","input":{"key":{"constant":true,"data":"\'kind\'"}}}},"merges":{"0":{"enumeratedevices":{"output":{"devices":true}},"filterpropequals":{"input":{"a":true}}},"1":{"enumeratedevices":{"input":{"any":true}},"filterpropequals":{"input":{"value":true}}}},"metadata":{"icon":"brackets","description":"no description","complexity":87,"tags":["platform","core","api","media"]},"inputs":{"kind":{"plug":{"0":{"mergeId":"1"}},"name":"kind","type":"any"}},"outputs":{"devices":{"plug":{"0":{"unitId":"filterpropequals","pinId":"b"}},"name":"devices","type":"object[]"}},"id":"e98f03fc-0987-4d21-9642-9078b23183ed","type":"`U`&`G`","system":true},"7b067f38-e437-11ea-ad36-13112ed6b20b":{"name":"set color","inputs":{"color":{"plug":{"0":{"unitId":"set","pinId":"data"}},"type":"string","metadata":{"position":{"0":{"x":46,"y":37}}}},"context":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"ref":true,"type":"`U`","metadata":{"position":{"0":{"x":-91,"y":-1}}}}},"outputs":{},"units":{"set":{"id":"074ef6f4-a0a1-40f9-95c0-cf0ecc3d420c","input":{"obj":{"metadata":{"position":{"x":-65,"y":-1}}},"name":{"constant":true,"data":"\'color\'","metadata":{"position":{"x":27,"y":-19}}},"data":{"metadata":{"position":{"x":27,"y":18}}}},"output":{},"metadata":{"position":{"x":-17,"y":-1}}}},"merges":{},"metadata":{"icon":"object-set","description":"set context color","complexity":5,"tags":["platform","core","api","set"]},"id":"7b067f38-e437-11ea-ad36-13112ed6b20b","type":"`U`&`G`","system":true},"8d3a4d38-3015-46f2-81d7-694644cec386":{"type":"`U`&`C`&`G`","name":"icon grid","units":{"iconnames":{"id":"89cc231d-07a1-49a0-8dcb-6af7aba1ca18","input":{"any":{"constant":false,"ignored":false}},"output":{"keys":{"constant":false,"ignored":false}}},"appendchild":{"id":"ee4715e6-f479-11ea-b231-bf95a7f38a99","input":{"parent":{"ignored":false,"constant":false},"child":{"ignored":false,"constant":false}},"output":{"at":{"ignored":true,"constant":false}}},"setinput":{"id":"43b43afd-9e7d-44ba-aef7-6e9db4ed8744","input":{"unit":{"ignored":false,"constant":false},"name":{"ignored":false,"constant":true,"data":"\'icon\'"},"data":{"ignored":false,"constant":false}},"output":{"unit":{"ignored":false,"constant":false}}},"foreach":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","input":{"a":{"constant":false,"ignored":false}},"output":{"a[i]":{"constant":false,"ignored":false},"a":{"constant":false,"ignored":true},"i":{"constant":false,"ignored":true},"test":{"constant":false,"ignored":true}}},"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{"style":{"ignored":false,"constant":true,"data":"{display:\'grid\',\\"grid-template-columns\\":\'1fr 1fr 1fr 1fr\',height:\'fit-content\',gap:\'12px\',padding:\'12px\'}"}},"output":{},"metadata":{"component":{"width":192.5234375,"height":188.8046875}}},"spark":{"id":"3be8272d-310a-4aa2-84a1-71f590a8227a","input":{"a":{"ignored":false,"constant":true,"data":"null"}},"output":{"a":{"ignored":false,"constant":false}}},"setinput0":{"id":"43b43afd-9e7d-44ba-aef7-6e9db4ed8744","input":{"unit":{"ignored":false,"constant":true,"data":"${unit:{id:\'63a417e5-d354-4b39-9ebd-05f55e70de7b\',input:{icon:{data:\'\\\\\'zoom-out\\\\\'\'},style:{data:\'{height:\\\\\'24px\\\\\',width:\\\\\'24px\\\\\'}\'}}}}"},"name":{"ignored":false,"constant":true,"data":"\'style\'"},"data":{"ignored":false,"constant":true,"data":"{\'aspect-ratio\':1}"}},"output":{"unit":{"ignored":false,"constant":false}}}},"merges":{"0":{"setinput":{"output":{"unit":true}},"appendchild":{"input":{"child":true}}},"1":{"iconnames":{"output":{"keys":true}},"foreach":{"input":{"a":true}}},"2":{"setinput0":{"output":{"unit":true}},"setinput":{"input":{"unit":true}}},"3":{"appendchild":{"input":{"parent":true}},"div":{"output":{"_self":true}}},"4":{"spark":{"output":{"a":true}},"iconnames":{"input":{"any":true}}},"5":{"foreach":{"output":{"a[i]":true}},"setinput":{"input":{"data":true}}}},"inputs":{},"outputs":{},"metadata":{"icon":"square","description":"grid showin","complexity":73,"tags":["platform","core","asset"]},"id":"8d3a4d38-3015-46f2-81d7-694644cec386","system":true,"render":true,"component":{"subComponents":{"div":{}},"children":["div"],"defaultWidth":200,"defaultHeight":200}},"89cc231d-07a1-49a0-8dcb-6af7aba1ca18":{"type":"`U`&`G`","name":"icon names","units":{"icons":{"id":"72c84615-4d9c-4a82-a828-fa5d9447a4d5","input":{"any":{}},"output":{"icons":{}}},"keys":{"id":"45b9c329-64e9-4c4a-800b-790947c75754","input":{"obj":{}},"output":{"keys":{}}}},"merges":{"0":{"icons":{"output":{"icons":true}},"keys":{"input":{"obj":true}}}},"inputs":{"any":{"plug":{"0":{"unitId":"icons","pinId":"any"}},"ref":false}},"outputs":{"keys":{"plug":{"0":{"unitId":"keys","pinId":"keys"}},"ref":false}},"metadata":{"icon":"question","description":"","complexity":10,"tags":["platform","core","asset"]},"system":true,"id":"89cc231d-07a1-49a0-8dcb-6af7aba1ca18","specs":{}},"50d23b21-1513-42c0-9722-4a01a32dc161":{"name":"add circle","units":{"addarc":{"id":"6796cd2d-2bd2-4dd3-9396-49d6bc1d2652"},"merge3":{"id":"23b844e3-1cef-4ff7-9e2a-bb3ffb613055","input":{"c":{"constant":true,"data":"{start:0}"},"b":{"constant":true,"data":"{end:6.283185307179586}"}}}},"merges":{"0":{"addarc":{"input":{"arc":true}},"merge3":{"output":{"abc":true}}}},"metadata":{"icon":"edit-3","description":"add a circular arc to the current sub-path","complexity":11,"tags":["platform","core","canvas"]},"inputs":{"d":{"plug":{"0":{"unitId":"addarc","pinId":"d"}},"type":"any[][]"},"circle":{"plug":{"0":{"unitId":"merge3","pinId":"a"}},"type":"{x:number,y:number,r:number}"}},"outputs":{"d":{"plug":{"0":{"unitId":"addarc","pinId":"d"}},"type":"any[][]"}},"id":"50d23b21-1513-42c0-9722-4a01a32dc161","type":"`U`&`G`","system":true},"90dc2942-52fa-4e09-bcef-43fa97cc0b72":{"name":"stroke line","units":{"addlineto":{"id":"2b0ef9e9-028b-4acc-9daf-6999e86cc2af"},"moveto":{"id":"3c47d4bc-315d-4600-a9cd-6e388b345980"},"beginpath":{"id":"81c0f469-ab88-4bc8-89d5-98d291b1d8b2"},"stroke":{"id":"9a7c22e3-3de2-4c99-ac1f-b2f8ceffae99"},"propx0y0x1y1":{"id":"004058a4-3562-4427-a782-66f90bf336a3"}},"merges":{"0":{"addlineto":{"output":{"d":true}},"stroke":{"input":{"d":true}}},"1":{"beginpath":{"output":{"d":true}},"moveto":{"input":{"d":true}}},"2":{"addlineto":{"input":{"d":true}},"moveto":{"output":{"d":true}}},"3":{"propx0y0x1y1":{"output":{"x0":true}},"moveto":{"input":{"x":true}}},"4":{"propx0y0x1y1":{"output":{"y0":true}},"moveto":{"input":{"y":true}}},"5":{"propx0y0x1y1":{"output":{"x1":true}},"addlineto":{"input":{"x":true}}},"6":{"propx0y0x1y1":{"output":{"y1":true}},"addlineto":{"input":{"y":true}}}},"metadata":{"icon":"edit-3","description":"draw a circle to the canvas","complexity":22,"tags":["platform","core","canvas"]},"inputs":{"d":{"plug":{"0":{"unitId":"beginpath","pinId":"d"}},"type":"any[][]"},"line":{"plug":{"0":{"unitId":"propx0y0x1y1","pinId":"{x0,y0,x1,y1}"}},"type":"object"}},"outputs":{"d":{"plug":{"0":{"unitId":"stroke","pinId":"d"}},"type":"any[][]"}},"id":"90dc2942-52fa-4e09-bcef-43fa97cc0b72","type":"`U`&`G`","system":true},"22db6e29-8884-43ea-8561-5dc145c192d6":{"name":"add pie","inputs":{"d":{"plug":{"0":{"unitId":"moveto","pinId":"d"}},"functional":true,"type":"any[][]","metadata":{"position":{"0":{"x":260,"y":-197}}}},"rad":{"plug":{"0":{"unitId":"negate","pinId":"a"}},"functional":true,"type":"number","metadata":{"position":{"0":{"x":-214,"y":3}}}},"x":{"plug":{"0":{"unitId":"moveto","pinId":"x"},"lbxjkjit":{"unitId":"add","pinId":"a"},"yngaryall":{"unitId":"mergexyr","pinId":"x"}},"metadata":{"position":{"0":{"x":254,"y":-139},"lbxjkjit":{"x":-107,"y":-178},"yngaryall":{"x":-227,"y":280}}},"type":"number"},"y":{"plug":{"0":{"unitId":"moveto","pinId":"y"},"1":{"unitId":"addlineto","pinId":"y"},"fgkhrak":{"unitId":"mergexyr","pinId":"y"}},"metadata":{"position":{"0":{"x":205,"y":-241},"1":{"x":2,"y":-108},"fgkhrak":{"x":-110,"y":287}}},"type":"number"},"r":{"plug":{"0":{"unitId":"add","pinId":"b"},"vzqrpth":{"unitId":"mergexyr","pinId":"r"}},"metadata":{"position":{"0":{"x":-79,"y":-238},"vzqrpth":{"x":-243,"y":216}}},"type":"number"}},"outputs":{"d":{"plug":{"0":{"unitId":"closepath","pinId":"d"}},"type":"(number|string)[][]","metadata":{"position":{"0":{"x":241,"y":59}}}}},"units":{"moveto":{"id":"3c47d4bc-315d-4600-a9cd-6e388b345980","input":{"d":{"metadata":{"position":{"x":232,"y":-185}}},"x":{"metadata":{"position":{"x":230,"y":-156}}},"y":{"metadata":{"position":{"x":205,"y":-211}}}},"output":{"d":{}},"metadata":{"position":{"x":182,"y":-172}}},"addarc":{"id":"6796cd2d-2bd2-4dd3-9396-49d6bc1d2652","input":{"d":{},"arc":{"constant":false}},"output":{"d":{}},"metadata":{"position":{"x":69,"y":-8}}},"addlineto":{"id":"2b0ef9e9-028b-4acc-9daf-6999e86cc2af","input":{"d":{},"x":{},"y":{"metadata":{"position":{"x":25,"y":-122}}}},"output":{"d":{}},"metadata":{"position":{"x":72,"y":-127}}},"closepath":{"id":"288aede9-59ea-4cb4-baf9-fef9109cc2b9","input":{"d":{}},"output":{"d":{"metadata":{"position":{"x":219,"y":44}}}},"metadata":{"position":{"x":170,"y":33}}},"negate":{"id":"13cbadb7-bbe5-4c6d-a81e-fc6fe5949e30","input":{"a":{"metadata":{"position":{"x":-190,"y":17}}}},"output":{"-a":{}},"metadata":{"position":{"x":-141,"y":27}}},"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{"constant":false,"metadata":{"position":{"x":-65,"y":68}}},"key":{"constant":true,"data":"\'end\'","metadata":{"position":{"x":12,"y":77}}},"value":{}},"output":{"obj":{}},"metadata":{"position":{"x":-33,"y":62}}},"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf","input":{"a":{"metadata":{"position":{"x":-78,"y":-179}}},"b":{"metadata":{"position":{"x":-68,"y":-210}}}},"output":{"a + b":{}},"metadata":{"position":{"x":-28,"y":-184}}},"mergexyr":{"id":"4617df3b-4ca5-42c1-bcda-4a3833c645da","input":{"y":{"metadata":{"position":{"x":-126,"y":263}}},"x":{"metadata":{"position":{"x":-208,"y":257}}},"r":{"metadata":{"position":{"x":-215,"y":225}}}},"output":{"{x,y,r}":{"metadata":{"position":{"x":-98,"y":231}}}},"metadata":{"position":{"x":-164,"y":234}}},"merge":{"id":"60bdba6d-c670-430f-be72-6f39cf4e8453","input":{"a":{"constant":true,"data":"{start:0,anticlockwise:true}","metadata":{"position":{"x":-24,"y":185}}},"b":{"metadata":{"position":{"x":-28,"y":157}}}},"output":{"ab":{"metadata":{"position":{"x":63,"y":176}}}},"metadata":{"position":{"x":-71,"y":168}}}},"merges":{"0":{"addarc":{"output":{"d":true}},"closepath":{"input":{"d":true}}},"1":{"addlineto":{"output":{"d":true}},"addarc":{"input":{"d":true}}},"2":{"addlineto":{"input":{"d":true}},"moveto":{"output":{"d":true}}},"3":{"set":{"input":{"value":true}},"negate":{"output":{"-a":true}}},"4":{"addarc":{"input":{"arc":true}},"set":{"output":{"obj":true}}},"pewuwgpn":{"add":{"output":{"a + b":true}},"addlineto":{"input":{"x":true}}},"uexuvd":{"merge":{"input":{"b":true}},"mergexyr":{"output":{"{x,y,r}":true}}},"aepibezsi":{"merge":{"output":{"ab":true}},"set":{"input":{"obj":true}}}},"metadata":{"icon":"edit-3","description":"add a pie to current sub-path","complexity":47,"tags":["platform","core","canvas"],"position":{"merge":{"0":{"x":121,"y":14},"1":{"x":72,"y":-67},"2":{"x":127,"y":-152},"3":{"x":-88,"y":43},"4":{"x":18,"y":26},"pewuwgpn":{"x":23,"y":-160},"uexuvd":{"x":-116,"y":202},"aepibezsi":{"x":-51,"y":116}}}},"id":"22db6e29-8884-43ea-8561-5dc145c192d6","type":"`U`&`G`","system":true},"790d5128-7fd6-48f9-b5cf-9edecedb1043":{"name":"arc","units":{"stroke":{"id":"9a7c22e3-3de2-4c99-ac1f-b2f8ceffae99","output":{"d":{"ignored":false}}},"addarc":{"id":"6796cd2d-2bd2-4dd3-9396-49d6bc1d2652","input":{"arc":{"constant":false}}},"beginpath":{"id":"81c0f469-ab88-4bc8-89d5-98d291b1d8b2"}},"merges":{"0":{"addarc":{"input":{"d":true}},"beginpath":{"output":{"d":true}}},"1":{"addarc":{"output":{"d":true}},"stroke":{"input":{"d":true}}}},"metadata":{"icon":"edit-3","description":"draw a circle to the canvas","complexity":11,"tags":["platform","core","canvas"]},"inputs":{"arc":{"plug":{"0":{"unitId":"addarc","pinId":"arc"}},"type":"{x:number,y:number,r:number,start:number,end:number,anticlockwise?:boolean}"},"d":{"plug":{"0":{"unitId":"beginpath","pinId":"d"}},"type":"any[][]"}},"outputs":{"d":{"plug":{"0":{"unitId":"stroke","pinId":"d"}},"type":"any[][]"}},"id":"790d5128-7fd6-48f9-b5cf-9edecedb1043","type":"`U`&`G`","system":true},"c3a080cc-f2f2-4c7c-998d-17809c555ef1":{"type":"`U`&`G`","name":"download blob","units":{"downloadurl":{"id":"c18c8f59-f3c8-49a8-9dbd-ed30fdf856e9","input":{"url":{},"name":{}},"output":{},"metadata":{"position":{"x":107,"y":0}}},"createbloburl":{"id":"1d5b6bb0-f18e-4428-a350-a29d8ca3ff4a","input":{"blob":{},"init":{}},"output":{"url":{}},"metadata":{"position":{"x":6,"y":0}}}},"merges":{"1":{"downloadurl":{"input":{"url":true}},"createbloburl":{"output":{"url":true}}}},"inputs":{"name":{"plug":{"0":{"unitId":"downloadurl","pinId":"name"}},"ref":false},"blob":{"plug":{"0":{"unitId":"createbloburl","pinId":"blob"}},"ref":true},"init":{"plug":{"0":{"unitId":"createbloburl","pinId":"init"}},"ref":false}},"outputs":{},"metadata":{"icon":"question","description":"","tags":["platform","core","canvas"]},"id":"c3a080cc-f2f2-4c7c-998d-17809c555ef1","system":true},"1a398694-284e-4d67-a13c-3a929c38b0fc":{"name":"download canvas","inputs":{"name":{"plug":{"0":{"unitId":"plan","pinId":"a"},"1":{"unitId":"downloadblob","pinId":"init"}},"functional":true,"type":"<A>"},"type":{"plug":{"0":{"unitId":"toblob","pinId":"type"}},"type":"string","functional":true,"metadata":{"examples":["\\"image/png\\""]}},"canvas":{"plug":{"0":{"unitId":"toblob","pinId":"canvas"}},"type":"`CA`","ref":true}},"outputs":{},"units":{"toblob":{"id":"c9d64ef4-35f6-44e7-a16b-1e4173f951dc","input":{"canvas":{},"quality":{"constant":true,"data":"1"},"type":{},"done":{}},"output":{"blob":{}},"metadata":{"position":{"x":-115,"y":-1}}},"plan":{"id":"36329d25-218d-48a5-a06c-1e0525da504f","input":{"a":{}},"output":{"0":{},"1":{}}},"downloadblob":{"id":"c3a080cc-f2f2-4c7c-998d-17809c555ef1"}},"merges":{"0":{"toblob":{"output":{"blob":true}},"downloadblob":{"input":{"blob":true}}},"2":{"plan":{"output":{"1":true}},"toblob":{"input":{"done":true}}},"4":{"plan":{"output":{"0":true}},"downloadblob":{"input":{"name":true}}}},"render":false,"metadata":{"icon":"download","description":"download full canvas as png","complexity":21,"tags":["platform","core","canvas"]},"id":"1a398694-284e-4d67-a13c-3a929c38b0fc","type":"`U`&`G`","system":true},"62bd0895-8889-40b2-8147-1c690809f4eb":{"name":"draw d","units":{"draw":{"id":"53018958-b686-11ea-bf53-175a3698c92d","input":{"canvas":{},"step":{}},"output":{}},"foreach":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","input":{"a":{}},"output":{"a[i]":{},"a":{"ignored":true},"i":{"ignored":true},"test":{"ignored":true}}}},"merges":{"merge":{"foreach":{"output":{"a[i]":true}},"draw":{"input":{"step":true}}}},"inputs":{"d":{"plug":{"0":{"unitId":"foreach","pinId":"a"}},"type":"(number|string)[][]"},"canvas":{"plug":{"0":{"unitId":"draw","pinId":"canvas"}},"type":"`CA`","ref":true}},"outputs":{},"metadata":{"icon":"square","description":"draw step of `d` on `canvas`","complexity":36,"tags":["platform","core","canvas"]},"id":"62bd0895-8889-40b2-8147-1c690809f4eb","type":"`U`&`G`","system":true},"004058a4-3562-4427-a782-66f90bf336a3":{"name":"get x0 y0 x1 y1","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"key":{"constant":true,"data":"\'x0\'"}}},"get0":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"key":{"constant":true,"data":"\'x1\'"}}},"get1":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"key":{"constant":true,"data":"\'y0\'"}}},"get2":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"key":{"constant":true,"data":"\'y1\'"}}}},"merges":{"0":{"get":{"input":{"obj":true}},"get1":{"input":{"obj":true}},"get2":{"input":{"obj":true}},"get0":{"input":{"obj":true}}}},"metadata":{"icon":"brackets-curly","description":"no description","complexity":8,"tags":["platform","core","canvas"]},"inputs":{"{x0,y0,x1,y1}":{"plug":{"0":{"mergeId":"0"}},"type":"object"}},"outputs":{"x1":{"plug":{"0":{"unitId":"get0","pinId":"value"}},"type":"any"},"y0":{"plug":{"0":{"unitId":"get1","pinId":"value"}},"type":"any"},"x0":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"any"},"y1":{"plug":{"0":{"unitId":"get2","pinId":"value"}},"type":"any"}},"id":"004058a4-3562-4427-a782-66f90bf336a3","type":"`U`&`G`","system":true},"5bf348b6-9776-4b23-9516-d802b6b3c846":{"name":"get x y","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"key":{"constant":true,"data":"\'x\'"}}},"prop0":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"key":{"constant":true,"data":"\'y\'"}}}},"merges":{"0":{"get":{"input":{"obj":true}},"prop0":{"input":{"obj":true}}}},"metadata":{"icon":"brackets-curly","description":"no description","complexity":6,"tags":["platform","core","canvas"]},"inputs":{"obj":{"plug":{"0":{"mergeId":"0"}},"type":"{x:number,y:number}"}},"outputs":{"y":{"plug":{"0":{"unitId":"prop0","pinId":"value"}},"type":"number"},"x":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"number"}},"id":"5bf348b6-9776-4b23-9516-d802b6b3c846","type":"`U`&`G`","system":true},"eb9740fb-1a02-4006-a618-7fc8ebc2af96":{"name":"merge rect","inputs":{"width":{"plug":{"0":{"unitId":"mergewidthheight","pinId":"width"}},"metadata":{"position":{"0":{"x":-191,"y":-36}}},"type":"number"},"height":{"plug":{"0":{"unitId":"mergewidthheight","pinId":"height"}},"metadata":{"position":{"0":{"x":-190,"y":34}}},"type":"number"},"x":{"plug":{"0":{"unitId":"mergexy","pinId":"x"}},"metadata":{"position":{"0":{"x":177,"y":53}}},"type":"number"},"y":{"plug":{"0":{"unitId":"mergexy","pinId":"y"}},"metadata":{"position":{"0":{"x":184,"y":-16}}},"type":"number"}},"outputs":{"rect":{"plug":{"0":{"unitId":"merge","pinId":"ab"}},"metadata":{"position":{"0":{"x":32,"y":-59}}},"type":"object"}},"units":{"mergexy":{"id":"2737cd82-d80b-4d3f-b33d-f00f68361e24","input":{"y":{"metadata":{"position":{"x":158,"y":-1}}},"x":{"metadata":{"position":{"x":155,"y":33}}}},"output":{"{x,y}":{}},"metadata":{"position":{"x":109,"y":13}}},"mergewidthheight":{"id":"450dac92-395b-4c7b-b8c0-219315c28035","input":{"height":{"metadata":{"position":{"x":-167,"y":16}}},"width":{"metadata":{"position":{"x":-167,"y":-18}}}},"output":{"{width,height}":{}},"metadata":{"position":{"x":-119,"y":-1}}},"merge":{"id":"60bdba6d-c670-430f-be72-6f39cf4e8453","input":{"a":{},"b":{}},"output":{"ab":{"metadata":{"position":{"x":29,"y":-31}}}},"metadata":{"position":{"x":-6,"y":-2}}}},"merges":{"0":{"merge":{"input":{"a":true}},"mergewidthheight":{"output":{"{width,height}":true}}},"1":{"merge":{"input":{"b":true}},"mergexy":{"output":{"{x,y}":true}}}},"metadata":{"icon":"brackets-curly","description":"{ x, y, width, height }","complexity":29,"position":{"merge":{"0":{"x":-63,"y":-1},"1":{"x":52,"y":9}}},"tags":["platform","core","canvas"]},"id":"eb9740fb-1a02-4006-a618-7fc8ebc2af96","type":"`U`&`G`","system":true},"2bd0d83a-bd19-425b-aa75-84a47c73fc81":{"name":"merge x0 y0 x1 y1","units":{"merge4":{"id":"1f1b065a-937b-4630-be80-54edf795eb19"},"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'x0\'"}}},"tag0":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'x1\'"}}},"tag1":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'y0\'"}}},"tag2":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'y1\'"}}}},"merges":{"0":{"merge4":{"input":{"c":true}},"tag":{"output":{"kv":true}}},"1":{"merge4":{"input":{"d":true}},"tag0":{"output":{"kv":true}}},"2":{"merge4":{"input":{"b":true}},"tag1":{"output":{"kv":true}}},"3":{"merge4":{"input":{"a":true}},"tag2":{"output":{"kv":true}}}},"metadata":{"icon":"brackets-curly","description":"{ x0, y0, x1, y1 }","complexity":19,"tags":["platform","core","canvas"]},"inputs":{"x0":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"functional":true,"type":"number"},"x1":{"plug":{"0":{"unitId":"tag0","pinId":"v"}},"functional":true,"type":"number"},"y0":{"plug":{"0":{"unitId":"tag1","pinId":"v"}},"functional":true,"type":"number"},"y1":{"plug":{"0":{"unitId":"tag2","pinId":"v"}},"functional":true,"type":"number"}},"outputs":{"{x0,y0,x1,y1}":{"plug":{"0":{"unitId":"merge4","pinId":"abcd"}},"type":"object"}},"id":"2bd0d83a-bd19-425b-aa75-84a47c73fc81","type":"`U`&`G`","system":true},"2737cd82-d80b-4d3f-b33d-f00f68361e24":{"name":"merge x y","units":{"merge":{"id":"2af12780-698c-40ca-baa9-5f3260377e0f"},"tagx":{"id":"c03c6348-27ca-11eb-a1a3-c7af00092506","input":{"x":{}},"output":{"{x}":{}}},"tagy":{"id":"e3cfa57c-27ca-11eb-9aab-afd483aa07b0","input":{"y":{}},"output":{"{y}":{}}}},"merges":{"merge0":{"tagx":{"output":{"{x}":true}},"merge":{"input":{"a":true}}},"merge1":{"tagy":{"output":{"{y}":true}},"merge":{"input":{"b":true}}}},"metadata":{"icon":"brackets","description":"{ x, y }","complexity":15,"tags":["platform","core","canvas"]},"inputs":{"y":{"plug":{"0":{"unitId":"tagy","pinId":"y"}},"type":"number"},"x":{"plug":{"0":{"unitId":"tagx","pinId":"x"}},"type":"number"}},"outputs":{"{x,y}":{"plug":{"0":{"unitId":"merge","pinId":"ab"}},"type":"{x:number,y:number}"}},"id":"2737cd82-d80b-4d3f-b33d-f00f68361e24","type":"`U`&`G`","system":true},"4617df3b-4ca5-42c1-bcda-4a3833c645da":{"name":"merge x y r","units":{"mergexy":{"id":"2737cd82-d80b-4d3f-b33d-f00f68361e24","input":{"y":{},"x":{}},"output":{"{x,y}":{}}},"tagr":{"id":"5611a149-95bf-406e-b227-f583f71f5f3f","input":{"r":{}},"output":{"{r}":{}}},"merge":{"id":"60bdba6d-c670-430f-be72-6f39cf4e8453","input":{"a":{},"b":{}},"output":{"ab":{}}}},"merges":{"merge0":{"merge":{"input":{"b":true}},"mergexy":{"output":{"{x,y}":true}}},"merge1":{"merge":{"input":{"a":true}},"tagr":{"output":{"{r}":true}}}},"inputs":{"y":{"plug":{"0":{"unitId":"mergexy","pinId":"y"}},"type":"number"},"x":{"plug":{"0":{"unitId":"mergexy","pinId":"x"}},"type":"number"},"r":{"plug":{"0":{"unitId":"tagr","pinId":"r"}},"type":"any"}},"outputs":{"{x,y,r}":{"plug":{"0":{"unitId":"merge","pinId":"ab"}},"type":"object"}},"metadata":{"icon":"brackets-curly","description":"...","complexity":23,"tags":["platform","core","canvas"]},"id":"4617df3b-4ca5-42c1-bcda-4a3833c645da","type":"`U`&`G`","system":true},"389f41b1-0a1d-4b02-ab30-53446c2e13e2":{"name":"rotate around","units":{"translate":{"id":"6f79ee03-4b3f-439c-b955-5529f3bebcc9","input":{"y":{"constant":false},"x":{"constant":false}}},"rotate":{"id":"8f7ce559-a046-45bc-8e98-c39934ed0ae6","input":{"rad":{"constant":true,"data":"0.1"}}},"translate0":{"id":"6f79ee03-4b3f-439c-b955-5529f3bebcc9","input":{"y":{"constant":false},"x":{"constant":false}}},"negate":{"id":"13cbadb7-bbe5-4c6d-a81e-fc6fe5949e30"},"negate0":{"id":"13cbadb7-bbe5-4c6d-a81e-fc6fe5949e30"}},"merges":{"0":{"translate0":{"output":{"d":true}},"rotate":{"input":{"d":true}}},"1":{"translate":{"input":{"d":true}},"rotate":{"output":{"d":true}}},"2":{"translate0":{"input":{"x":true}},"negate0":{"input":{"a":true}}},"3":{"translate0":{"input":{"y":true}},"negate":{"input":{"a":true}}},"4":{"translate":{"input":{"y":true}},"negate":{"output":{"-a":true}}},"5":{"translate":{"input":{"x":true}},"negate0":{"output":{"-a":true}}}},"metadata":{"icon":"edit-3","description":"adds a rotation to the transformation matrix","complexity":15,"tags":["platform","core","canvas"]},"inputs":{"d":{"plug":{"0":{"unitId":"translate0","pinId":"d"}},"functional":true,"type":"(number|string)[][]"},"y":{"plug":{"0":{"mergeId":"3"}},"type":"number"},"x":{"plug":{"0":{"mergeId":"2"}},"type":"number"}},"outputs":{"d":{"plug":{"0":{"unitId":"translate","pinId":"d"}},"type":"(number|string)[][]"}},"id":"389f41b1-0a1d-4b02-ab30-53446c2e13e2","type":"`U`&`G`","system":true},"159706d0-44fc-456c-bfe9-d5ddb190a717":{"name":"animate draw spiral","inputs":{"d":{"plug":{"0":{"unitId":"kczhi","pinId":"init"}},"type":"any[][]"}},"outputs":{"d":{"plug":{"0":{"unitId":"kczhi","pinId":"final"}},"type":"any[][]"},"a":{"plug":{"0":{"mergeId":"yougupgye"}},"type":"any[][]"}},"units":{"jlecqwl":{"id":"790d5128-7fd6-48f9-b5cf-9edecedb1043","input":{"arc":{"constant":false},"d":{}},"output":{"d":{"ignored":false}},"metadata":{"position":{"x":87,"y":54}}},"pmatmfwkx":{"id":"6f4ac2fa-e9bd-4c0e-8bda-75976f3e4e58","input":{"a":{}},"output":{"a > 0":{}},"metadata":{"position":{"x":284,"y":10}}},"qqfekwh":{"id":"6a006c91-181c-48c4-826d-a6eaec21fea3","output":{"final":{"ignored":true,"metadata":{"position":{"x":294,"y":-55}}},"local":{},"current":{}},"input":{"test":{},"init":{"data":"90","constant":true,"metadata":{"position":{"x":247,"y":-92}}},"-":{"constant":true,"data":"0.2","metadata":{"position":{"x":281,"y":-69}}}},"metadata":{"position":{"x":234,"y":-46}}},"shdwwc":{"id":"3a138358-cc25-45e3-a0ce-bbe54445736f","input":{"angle":{"constant":true,"data":"6","metadata":{"position":{"x":-408,"y":40}}}},"output":{"rad":{}},"metadata":{"position":{"x":-357,"y":39}}},"loopadd":{"id":"93369291-7ce2-4b4c-a414-870b1f3c9b4c","output":{"local":{"ignored":true,"metadata":{"position":{"x":-191,"y":50}}},"final":{"ignored":true,"metadata":{"position":{"x":-284,"y":13}}},"current":{}},"input":{"init":{"constant":true,"data":"0","metadata":{"position":{"x":-207,"y":71}}},"test":{"constant":true,"data":"true","metadata":{"position":{"x":-277,"y":70}}},"plus":{"constant":true}},"metadata":{"position":{"x":-241,"y":38}}},"bjusxpr":{"id":"99764e75-c4be-4f35-9051-0e3a750dca83","input":{"start":{}},"output":{"{start}":{}},"metadata":{"position":{"x":-124,"y":5}}},"vzyqdw":{"id":"fe80edec-454f-4e87-ace4-51cdb5b5456f","input":{"end":{}},"output":{"end":{}},"metadata":{"position":{"x":-95,"y":-77}}},"cstfwodbo":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf","input":{"a":{},"b":{"constant":true,"data":"0.2","metadata":{"position":{"x":-235,"y":-71}}}},"output":{"a + b":{}},"metadata":{"position":{"x":-191,"y":-48}}},"bvcozpgif":{"id":"1f1b065a-937b-4630-be80-54edf795eb19","input":{"d":{},"c":{},"a":{"constant":true,"data":"{x:100,y:100}","metadata":{"position":{"x":15,"y":-66}}},"b":{}},"output":{"abcd":{}},"metadata":{"position":{"x":-3,"y":-24}}},"kczhi":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","output":{"current":{},"local":{"ignored":true,"metadata":{"position":{"x":167,"y":105}}},"final":{"ignored":false,"metadata":{"position":{"x":205,"y":108}}}},"input":{"next":{},"test":{},"init":{"metadata":{"position":{"x":239,"y":82}}}},"metadata":{"position":{"x":191,"y":62}}},"tagr":{"id":"5611a149-95bf-406e-b227-f583f71f5f3f","input":{"r":{}},"output":{"{r}":{}},"metadata":{"position":{"x":113,"y":-60}}}},"merges":{"bfligmpl":{"qqfekwh":{"output":{"current":true}},"tagr":{"input":{"r":true}}},"faomhbc":{"pmatmfwkx":{"output":{"a > 0":true}},"qqfekwh":{"input":{"test":true}},"kczhi":{"input":{"test":true}}},"dsdtznh":{"pmatmfwkx":{"input":{"a":true}},"qqfekwh":{"output":{"local":true}}},"eqinfvfgt":{"bjusxpr":{"input":{"start":true}},"loopadd":{"output":{"current":true}},"cstfwodbo":{"input":{"a":true}}},"fxtasmwk":{"cstfwodbo":{"output":{"a + b":true}},"vzyqdw":{"input":{"end":true}}},"shqowsyi":{"loopadd":{"input":{"plus":true}},"shdwwc":{"output":{"rad":true}}},"uxgqafan":{"vzyqdw":{"output":{"end":true}},"bvcozpgif":{"input":{"d":true}}},"orpymhfvr":{"bjusxpr":{"output":{"{start}":true}},"bvcozpgif":{"input":{"c":true}}},"puosxnwdk":{"bvcozpgif":{"input":{"b":true}},"tagr":{"output":{"{r}":true}}},"yoynparsg":{"jlecqwl":{"input":{"arc":true}},"bvcozpgif":{"output":{"abcd":true}}},"yougupgye":{"kczhi":{"output":{"current":true}},"jlecqwl":{"input":{"d":true}}},"gtgqgbn":{"kczhi":{"input":{"next":true}},"jlecqwl":{"output":{"d":true}}}},"metadata":{"icon":"edit-3","description":"draws a spiral step by step","complexity":70,"tags":["platform","core","canvas"],"position":{"merge":{"bfligmpl":{"x":173,"y":-60},"faomhbc":{"x":230,"y":13},"dsdtznh":{"x":285,"y":-33},"eqinfvfgt":{"x":-187,"y":4},"fxtasmwk":{"x":-147,"y":-73},"shqowsyi":{"x":-301,"y":37},"uxgqafan":{"x":-46,"y":-57},"orpymhfvr":{"x":-63,"y":-5},"puosxnwdk":{"x":55,"y":-46},"yoynparsg":{"x":38,"y":20},"yougupgye":{"x":137,"y":76},"gtgqgbn":{"x":139,"y":54},"rvevjcxup":{"x":223,"y":74},"xtbpen":{"x":204,"y":129}}}},"id":"159706d0-44fc-456c-bfe9-d5ddb190a717","type":"`U`&`G`","system":true},"1b6923a6-b383-4909-af8f-85444aeb6aae":{"name":"rotation","units":{"rotate":{"id":"8f7ce559-a046-45bc-8e98-c39934ed0ae6"},"loopadd":{"id":"93369291-7ce2-4b4c-a414-870b1f3c9b4c","output":{"final":{"ignored":true},"local":{"ignored":true}},"input":{"test":{"constant":true,"data":"true"},"init":{"constant":true,"data":"0"},"plus":{"constant":true}}},"translate":{"id":"6f79ee03-4b3f-439c-b955-5529f3bebcc9","input":{"x":{"constant":true,"data":"100"},"y":{"constant":true,"data":"100"}}},"translate0":{"id":"6f79ee03-4b3f-439c-b955-5529f3bebcc9","input":{"x":{"constant":true,"data":"-100"},"y":{"constant":true,"data":"-100"}}}},"merges":{"0":{"rotate":{"input":{"rad":true}},"loopadd":{"output":{"current":true}}},"1":{"translate":{"output":{"d":true}},"rotate":{"input":{"d":true}}},"2":{"translate0":{"input":{"d":true}},"rotate":{"output":{"d":true}}}},"metadata":{"icon":"edit-3","description":"rotate `+` more every frame","complexity":17,"tags":["platform","core","canvas"]},"inputs":{"rad":{"plug":{"0":{"unitId":"loopadd","pinId":"plus"}},"type":"number"},"d":{"plug":{"0":{"unitId":"translate","pinId":"d"}},"type":"(number|string)[][]"}},"outputs":{"d":{"plug":{"0":{"unitId":"translate0","pinId":"d"}},"type":"(number|string)[][]"}},"id":"1b6923a6-b383-4909-af8f-85444aeb6aae","type":"`U`&`G`","system":true},"89051065-ef45-48b2-ab7f-77ae173e1b4d":{"name":"stroke circle","units":{"addcircle":{"id":"50d23b21-1513-42c0-9722-4a01a32dc161","input":{"d":{},"circle":{}},"output":{"d":{}}},"beginpath":{"id":"81c0f469-ab88-4bc8-89d5-98d291b1d8b2","input":{"d":{}},"output":{"d":{}}},"stroke":{"id":"9a7c22e3-3de2-4c99-ac1f-b2f8ceffae99","input":{"d":{}},"output":{"d":{}}}},"merges":{"0":{"beginpath":{"output":{"d":true}},"addcircle":{"input":{"d":true}}},"1":{"stroke":{"input":{"d":true}},"addcircle":{"output":{"d":true}}}},"inputs":{"circle":{"plug":{"0":{"unitId":"addcircle","pinId":"circle"}},"type":"{x:number,y:number,r:number}","metadada":{"examples":["{x:50,y:50,r:25}"]}},"d":{"plug":{"0":{"unitId":"beginpath","pinId":"d"}},"type":"any[][]","metadata":{"examples":["[]"]}}},"outputs":{"d":{"plug":{"0":{"unitId":"stroke","pinId":"d"}},"type":"any[][]"}},"metadata":{"icon":"edit-3","description":"stroke a circle path","complexity":19,"tags":["platform","core","canvas"]},"id":"89051065-ef45-48b2-ab7f-77ae173e1b4d","type":"`U`&`G`","system":true},"0eb3579e-4645-4e45-a3b1-f3fb1a62ab4d":{"name":"stroke fill circle","units":{"addcircle":{"id":"50d23b21-1513-42c0-9722-4a01a32dc161"},"beginpath":{"id":"81c0f469-ab88-4bc8-89d5-98d291b1d8b2"},"stroke":{"id":"9a7c22e3-3de2-4c99-ac1f-b2f8ceffae99"},"fill":{"id":"87a11e2c-278c-11eb-9209-2f30aebffb25","input":{"d":{}},"output":{"d":{}}}},"merges":{"0":{"addcircle":{"input":{"d":true}},"beginpath":{"output":{"d":true}}},"1":{"stroke":{"input":{"d":true}},"fill":{"output":{"d":true}}},"2":{"fill":{"input":{"d":true}},"addcircle":{"output":{"d":true}}}},"metadata":{"icon":"edit-3","description":"draw a circle to the canvas","complexity":22,"tags":["platform","core","canvas"]},"inputs":{"d":{"plug":{"0":{"unitId":"beginpath","pinId":"d"}},"functional":true,"type":"any[][]"},"circle":{"plug":{"0":{"unitId":"addcircle","pinId":"circle"}},"type":"{x:number,y:number,r:number}"}},"outputs":{"d":{"plug":{"0":{"unitId":"stroke","pinId":"d"}},"type":"any[][]"}},"id":"0eb3579e-4645-4e45-a3b1-f3fb1a62ab4d","type":"`U`&`G`","system":true},"f1456a8d-7f4f-41b4-9487-166a67a6cbd4":{"name":"stroke fill style","units":{"strokestyle":{"id":"83d22558-2c6f-4dd4-a231-baba798d1d97","input":{"d":{},"strokeStyle":{}},"output":{"d":{}}},"fillstyle":{"id":"f5b2faf1-3a8b-489f-9d99-62d3c749ced6","input":{"d":{},"fillStyle":{}},"output":{"d":{}}}},"merges":{"0":{"fillstyle":{"output":{"d":true}},"strokestyle":{"input":{"d":true}}},"1":{"fillstyle":{"input":{"fillStyle":true}},"strokestyle":{"input":{"strokeStyle":true}}}},"inputs":{"style":{"plug":{"0":{"mergeId":"1"}},"type":"string"},"d":{"plug":{"0":{"unitId":"fillstyle","pinId":"d"}},"type":"(number|string)[][]"}},"outputs":{"d":{"plug":{"0":{"unitId":"strokestyle","pinId":"d"}},"type":"(number|string)[][]"}},"metadata":{"icon":"edit-3","description":"set the color, gradient, or pattern to use for stroke and fill","complexity":8,"tags":["platform","core","canvas"]},"id":"f1456a8d-7f4f-41b4-9487-166a67a6cbd4","type":"`U`&`G`","system":true},"fe80edec-454f-4e87-ace4-51cdb5b5456f":{"name":"tag end","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'end\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{end: `end`}","complexity":7,"tags":["platform","core","canvas"]},"inputs":{"end":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"any"}},"outputs":{"end":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"fe80edec-454f-4e87-ace4-51cdb5b5456f","type":"`U`&`G`","system":true},"cd3cc728-a253-11eb-92b7-876e93d80737":{"name":"tag height","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'height\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{height: `height`}","complexity":7,"tags":["platform","core","canvas"]},"inputs":{"height":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"any"}},"outputs":{"{height}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"cd3cc728-a253-11eb-92b7-876e93d80737","type":"`U`&`G`","system":true},"5611a149-95bf-406e-b227-f583f71f5f3f":{"name":"tag r","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'r\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{r: `r`}","complexity":7,"tags":["platform","core","canvas"]},"inputs":{"r":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"any"}},"outputs":{"{r}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"5611a149-95bf-406e-b227-f583f71f5f3f","type":"`U`&`G`","system":true},"99764e75-c4be-4f35-9051-0e3a750dca83":{"name":"tag start","units":{"temzrvlyb":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'start\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{start: `start`}","complexity":7,"tags":["platform","core","canvas"]},"inputs":{"start":{"plug":{"0":{"unitId":"temzrvlyb","pinId":"v"}},"type":"any"}},"outputs":{"{start}":{"plug":{"0":{"unitId":"temzrvlyb","pinId":"kv"}},"type":"object"}},"id":"99764e75-c4be-4f35-9051-0e3a750dca83","type":"`U`&`G`","system":true},"e9758d91-5270-4e11-b1c4-969092abbfe7":{"name":"tag transform","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'transform\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{transform: `transform`}","complexity":7,"tags":["platform","core","canvas"]},"inputs":{"transform":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"any"}},"outputs":{"{transform}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"e9758d91-5270-4e11-b1c4-969092abbfe7","type":"`U`&`G`","system":true},"f08860e0-f393-4159-80da-510ff95adb21":{"name":"tag transform translate px","inputs":{"y":{"plug":{"0":{"unitId":"px","pinId":"n"}}},"x":{"plug":{"0":{"unitId":"px0","pinId":"n"}}}},"outputs":{"{transform}":{"plug":{"0":{"unitId":"tagtransform","pinId":"{transform}"}}}},"units":{"tagtransform":{"id":"e9758d91-5270-4e11-b1c4-969092abbfe7","input":{"transform":{}},"output":{"{transform}":{}},"metadata":{"position":{"x":156,"y":10}}},"px":{"id":"87c7b2b8-c17e-11ea-ba3a-072aa030b89f","input":{"n":{}},"output":{"px":{}},"metadata":{"position":{"x":-137,"y":-77}}},"px0":{"id":"87c7b2b8-c17e-11ea-ba3a-072aa030b89f","input":{"n":{}},"output":{"px":{}},"metadata":{"position":{"x":-38,"y":87}}},"concat3":{"id":"bb28c9d9-0afd-4ef2-8c5b-41815ea65bf1","input":{"a":{"constant":true,"data":"\\"translate(\\""},"b":{},"c":{}},"output":{"abc":{}},"metadata":{"position":{"x":49,"y":26}}},"concat30":{"id":"bb28c9d9-0afd-4ef2-8c5b-41815ea65bf1","input":{"a":{"constant":true,"data":"\', \'"},"b":{},"c":{"constant":true,"data":"\')\'"}},"output":{"abc":{}},"metadata":{"position":{"x":-33,"y":-49}}}},"merges":{"0":{"concat30":{"output":{"abc":true}},"concat3":{"input":{"c":true}}},"1":{"px":{"output":{"px":true}},"concat30":{"input":{"b":true}}},"2":{"px0":{"output":{"px":true}},"concat3":{"input":{"b":true}}},"3":{"tagtransform":{"input":{"transform":true}},"concat3":{"output":{"abc":true}}}},"system":true,"type":"`U`&`G`","metadata":{"icon":"tag","complexity":23,"tags":["platform","core","canvas"]},"id":"f08860e0-f393-4159-80da-510ff95adb21"},"d4aa836e-a9ed-11eb-b048-6f5e7792f8be":{"name":"tag value","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'value\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{r: `r`}","complexity":7,"tags":["platform","core","canvas"]},"inputs":{"value":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"any"}},"outputs":{"{value}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"d4aa836e-a9ed-11eb-b048-6f5e7792f8be","type":"`U`&`G`","system":true},"c13fec8e-a253-11eb-bbe5-6bbcbf28b3ef":{"name":"tag width","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'width\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{width: `width`}","complexity":7,"tags":["platform","core","canvas"]},"inputs":{"width":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"any"}},"outputs":{"{width}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"c13fec8e-a253-11eb-bbe5-6bbcbf28b3ef","type":"`U`&`G`","system":true},"c03c6348-27ca-11eb-a1a3-c7af00092506":{"name":"tag x","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'x\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{x: `x`}","complexity":7,"tags":["platform","core","canvas"]},"inputs":{"x":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"any"}},"outputs":{"{x}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"c03c6348-27ca-11eb-a1a3-c7af00092506","type":"`U`&`G`","system":true},"e3cfa57c-27ca-11eb-9aab-afd483aa07b0":{"name":"tag y","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'y\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{y: `y`}","complexity":7,"tags":["platform","core","canvas"]},"inputs":{"y":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"any"}},"outputs":{"{y}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"e3cfa57c-27ca-11eb-9aab-afd483aa07b0","type":"`U`&`G`","system":true},"0a2aad57-975f-4806-a8c9-58e42161d8ec":{"name":"gamma correction","units":{"greaterthan":{"id":"1651ce6b-4db0-4787-9edf-f770b72d253c","input":{"b":{"constant":true,"data":"0.04045"}}},"ifelse":{"id":"92760dd2-ecd9-46db-851f-70950a5b6bc3"},"divide":{"id":"158d85eb-28b8-4355-b637-28a7ec751233","input":{"b":{"constant":true,"data":"12.92"}}},"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf","input":{"b":{"constant":true,"data":"0.055"}}},"divide0":{"id":"158d85eb-28b8-4355-b637-28a7ec751233","input":{"b":{"constant":true,"data":"1.055"}}},"pow":{"id":"ef4c1d0a-bda1-484e-8fcb-0fdbde195778","input":{"b":{"constant":true,"data":"2.4"}}}},"merges":{"0":{"ifelse":{"input":{"b":true}},"greaterthan":{"output":{"a > b":true}}},"1":{"greaterthan":{"input":{"a":true}},"ifelse":{"input":{"a":true}}},"2":{"ifelse":{"output":{"else":true}},"divide":{"input":{"a":true}}},"3":{"ifelse":{"output":{"if":true}},"add":{"input":{"a":true}}},"4":{"add":{"output":{"a + b":true}},"divide0":{"input":{"a":true}}},"5":{"divide0":{"output":{"a \xF7 b":true}},"pow":{"input":{"a":true}}},"6":{"divide":{"output":{"a \xF7 b":true}},"pow":{"output":{"a ** b":true}}}},"metadata":{"icon":"palette","description":"no description","link":"https://en.wikipedia.org/wiki/Gamma_correction","complexity":26,"tags":["platform","core","color"]},"inputs":{"a":{"plug":{"0":{"mergeId":"1"}},"type":"number"}},"outputs":{"a":{"plug":{"0":{"mergeId":"6"}},"type":"number"}},"id":"0a2aad57-975f-4806-a8c9-58e42161d8ec","type":"`U`&`G`","system":true},"653279dc-893d-4627-854e-d110aece0b72":{"name":"hex to rgb","units":{"narraybuilder":{"id":"38033fcc-aa28-4df3-abc8-d4ece231028b"},"parseint":{"id":"8cd29108-95cd-4217-9721-11f7c7c1131e","input":{"radix":{"constant":true,"data":"16"}}},"tail":{"id":"5c9f4a0a-e675-48db-b6c0-5ac6914cdae0"},"ifnotempty":{"id":"5f5b12b5-c3b9-460e-a84b-3db4f5d9c483"},"split":{"id":"306fe446-a495-4ae3-a835-34f1468e92fe","input":{"at":{"constant":true,"data":"2"}}},"for":{"id":"3432494e-fab6-4e9d-a846-0c48a7c429cd","output":{"final":{"ignored":true}}},"validate":{"id":"ea515441-7284-49ab-9bac-a0978f25e2c3","input":{"message":{"constant":true,"data":"\'invalid hex color string\'"}}},"test":{"id":"c2fec1e6-b370-4069-bb43-6dab5a78b9ab","input":{"regex":{"constant":true,"data":"\'^#[0-9a-zA-Z]{6}$\'"}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"3"}}}},"merges":{"0":{"parseint":{"input":{"str":true}},"split":{"output":{"first":true}}},"1":{"narraybuilder":{"input":{"a":true}},"parseint":{"output":{"n":true}}},"2":{"ifnotempty":{"input":{"a":true}},"for":{"output":{"local":true}}},"3":{"ifnotempty":{"output":{"!empty":true}},"for":{"input":{"test":true}}},"4":{"split":{"output":{"second":true}},"for":{"input":{"next":true}}},"5":{"tail":{"output":{"tail":true}},"for":{"input":{"init":true}}},"6":{"split":{"input":{"a":true}},"for":{"output":{"current":true}}},"7":{"validate":{"input":{"test":true}},"test":{"output":{"match":true}}},"8":{"validate":{"output":{"a":true}},"tail":{"input":{"a":true}}},"9":{"validate":{"input":{"a":true}},"test":{"input":{"str":true}},"wait":{"input":{"b":true}}},"10":{"wait":{"output":{"a":true}},"narraybuilder":{"input":{"n":true}}}},"metadata":{"icon":"palette","description":"hexadecimal color string to RGB array","complexity":75,"tags":["platform","core","color"]},"inputs":{"hex":{"plug":{"0":{"mergeId":"9"}},"functional":true,"type":"string"}},"outputs":{"RGB":{"plug":{"0":{"unitId":"narraybuilder","pinId":"a[]"}},"type":"number[]"}},"id":"653279dc-893d-4627-854e-d110aece0b72","type":"`U`&`G`","system":true},"f2043fd6-04d4-4523-939b-f631af07f70e":{"name":"hex to xy","units":{"umzakg":{"id":"653279dc-893d-4627-854e-d110aece0b72"},"jrovawnjv":{"id":"23cae4c7-b88c-4004-865f-e618bfb0c63f"}},"merges":{"uvlsnnmat":{"umzakg":{"output":{"RGB":true}},"jrovawnjv":{"input":{"RGB":true}}}},"metadata":{"icon":"palette","description":"no description","complexity":148,"tags":["platform","core","color"]},"inputs":{"hex":{"plug":{"0":{"unitId":"umzakg","pinId":"hex"}},"type":"string"}},"outputs":{"xy":{"plug":{"0":{"unitId":"jrovawnjv","pinId":"XY"}},"type":"number[]"}},"id":"f2043fd6-04d4-4523-939b-f631af07f70e","type":"`U`&`G`","system":true},"5f1dfd62-e6ac-4c1d-80e4-c0e99440def9":{"name":"name to color","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"obj":{"constant":true,"data":"{aliceblue:\'#f0f8ff\',antiquewhite:\'#faebd7\',aqua:\'#00ffff\',aquamarine:\'#7fffd4\',azure:\'#f0ffff\',beige:\'#f5f5dc\',bisque:\'#ffe4c4\',black:\'#000000\',blanchedalmond:\'#ffebcd\',blue:\'#0000ff\',blueviolet:\'#8a2be2\',brown:\'#a52a2a\',burlywood:\'#deb887\',cadetblue:\'#5f9ea0\',chartreuse:\'#7fff00\',chocolate:\'#d2691e\',coral:\'#ff7f50\',cornflowerblue:\'#6495ed\',cornsilk:\'#fff8dc\',crimson:\'#dc143c\',cyan:\'#00ffff\',darkblue:\'#00008b\',darkcyan:\'#008b8b\',darkgoldenrod:\'#b8860b\',darkgray:\'#a9a9a9\',darkgreen:\'#006400\',darkkhaki:\'#bdb76b\',darkmagenta:\'#8b008b\',darkolivegreen:\'#556b2f\',darkorange:\'#ff8c00\',darkorchid:\'#9932cc\',darkred:\'#8b0000\',darksalmon:\'#e9967a\',darkseagreen:\'#8fbc8f\',darkslateblue:\'#483d8b\',darkslategray:\'#2f4f4f\',darkturquoise:\'#00ced1\',darkviolet:\'#9400d3\',deeppink:\'#ff1493\',deepskyblue:\'#00bfff\',dimgray:\'#696969\',dodgerblue:\'#1e90ff\',firebrick:\'#b22222\',floralwhite:\'#fffaf0\',forestgreen:\'#228b22\',fuchsia:\'#ff00ff\',gainsboro:\'#dcdcdc\',ghostwhite:\'#f8f8ff\',gold:\'#ffd700\',goldenrod:\'#daa520\',gray:\'#808080\',green:\'#008000\',greenyellow:\'#adff2f\',honeydew:\'#f0fff0\',hotpink:\'#ff69b4\',\\"indianred \\":\'#cd5c5c\',indigo:\'#4b0082\',ivory:\'#fffff0\',khaki:\'#f0e68c\',lavender:\'#e6e6fa\',lavenderblush:\'#fff0f5\',lawngreen:\'#7cfc00\',lemonchiffon:\'#fffacd\',lightblue:\'#add8e6\',lightcoral:\'#f08080\',lightcyan:\'#e0ffff\',lightgoldenrodyellow:\'#fafad2\',lightgrey:\'#d3d3d3\',lightgreen:\'#90ee90\',lightpink:\'#ffb6c1\',lightsalmon:\'#ffa07a\',lightseagreen:\'#20b2aa\',lightskyblue:\'#87cefa\',lightslategray:\'#778899\',lightsteelblue:\'#b0c4de\',lightyellow:\'#ffffe0\',lime:\'#00ff00\',limegreen:\'#32cd32\',linen:\'#faf0e6\',magenta:\'#ff00ff\',maroon:\'#800000\',mediumaquamarine:\'#66cdaa\',mediumblue:\'#0000cd\',mediumorchid:\'#ba55d3\',mediumpurple:\'#9370d8\',mediumseagreen:\'#3cb371\',mediumslateblue:\'#7b68ee\',mediumspringgreen:\'#00fa9a\',mediumturquoise:\'#48d1cc\',mediumvioletred:\'#c71585\',midnightblue:\'#191970\',mintcream:\'#f5fffa\',mistyrose:\'#ffe4e1\',moccasin:\'#ffe4b5\',navajowhite:\'#ffdead\',navy:\'#000080\',oldlace:\'#fdf5e6\',olive:\'#808000\',olivedrab:\'#6b8e23\',orange:\'#ffa500\',orangered:\'#ff4500\',orchid:\'#da70d6\',palegoldenrod:\'#eee8aa\',palegreen:\'#98fb98\',paleturquoise:\'#afeeee\',palevioletred:\'#d87093\',papayawhip:\'#ffefd5\',peachpuff:\'#ffdab9\',peru:\'#cd853f\',pink:\'#ffc0cb\',plum:\'#dda0dd\',powderblue:\'#b0e0e6\',purple:\'#800080\',rebeccapurple:\'#663399\',red:\'#ff0000\',rosybrown:\'#bc8f8f\',royalblue:\'#4169e1\',saddlebrown:\'#8b4513\',salmon:\'#fa8072\',sandybrown:\'#f4a460\',seagreen:\'#2e8b57\',seashell:\'#fff5ee\',sienna:\'#a0522d\',silver:\'#c0c0c0\',skyblue:\'#87ceeb\',slateblue:\'#6a5acd\',slategray:\'#708090\',snow:\'#fffafa\',springgreen:\'#00ff7f\',steelblue:\'#4682b4\',tan:\'#d2b48c\',teal:\'#008080\',thistle:\'#d8bfd8\',tomato:\'#ff6347\',turquoise:\'#40e0d0\',violet:\'#ee82ee\',wheat:\'#f5deb3\',white:\'#ffffff\',whitesmoke:\'#f5f5f5\',yellow:\'#ffff00\',yellowgreen:\'#9acd32\'}"}}}},"merges":{},"metadata":{"icon":"palette","description":"turn a color named `name` into its correspondent `hex` string","complexity":5,"tags":["platform","core","color"]},"inputs":{"name":{"plug":{"0":{"unitId":"get","pinId":"key"}},"type":"string"}},"outputs":{"color":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"string"}},"id":"5f1dfd62-e6ac-4c1d-80e4-c0e99440def9","type":"`U`&`G`","system":true},"09856cbd-2676-4930-8241-08c5bbde0474":{"name":"random CIE xy color","units":{"hextoxy":{"id":"f2043fd6-04d4-4523-939b-f631af07f70e"},"randomhexcolor":{"id":"2f48e431-9338-44dd-9f20-b8b14e710a1f","input":{"any":{"constant":false}}}},"merges":{"0":{"hextoxy":{"input":{"hex":true}},"randomhexcolor":{"output":{"hex":true}}}},"metadata":{"icon":"palette","description":"generate a random CIE xy color string","complexity":182,"tags":["platform","core","color"]},"inputs":{"any":{"plug":{"0":{"unitId":"randomhexcolor","pinId":"any"}},"type":"any"}},"outputs":{"xy":{"plug":{"0":{"unitId":"hextoxy","pinId":"xy"}},"type":"number[]"}},"id":"09856cbd-2676-4930-8241-08c5bbde0474","type":"`U`&`G`","system":true},"2f48e431-9338-44dd-9f20-b8b14e710a1f":{"name":"random hex color","units":{"randomnaturalbetween":{"id":"9d2b69b2-c468-4fca-a7d5-d158033c0201","input":{"b":{"constant":true,"data":"16"},"a":{"constant":true,"data":"0"}}},"nstringbuilderfrom":{"id":"9cab124a-b40d-4614-b032-20b0209e90e3","input":{"n":{"constant":true,"data":"7"}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"\'#\'"}}},"numbertohex":{"id":"1a7665a2-2af0-11eb-9fdb-4bdf5feec91c","input":{"n":{}},"output":{"hex":{}}}},"merges":{"0":{"nstringbuilderfrom":{"input":{"from":true}},"wait":{"output":{"a":true}}},"1":{"numbertohex":{"input":{"n":true}},"randomnaturalbetween":{"output":{"n":true}}},"2":{"numbertohex":{"output":{"hex":true}},"nstringbuilderfrom":{"input":{"a":true}}}},"metadata":{"icon":"palette","description":"random HEX color string","complexity":49,"tags":["platform","core","color"]},"inputs":{"any":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"functional":true,"type":"any"}},"outputs":{"hex":{"plug":{"0":{"unitId":"nstringbuilderfrom","pinId":"str"}},"type":"string"}},"id":"2f48e431-9338-44dd-9f20-b8b14e710a1f","type":"`U`&`G`","system":true},"d7bf7bad-3b64-4190-9bae-878e88d119e7":{"name":"RGB to HEX","units":{"multiply":{"id":"872be100-f4dc-4246-8eea-6e3da31137b7","input":{"a":{},"b":{"constant":true,"data":"256"}},"output":{"a \xD7 b":{}}},"multiply0":{"id":"872be100-f4dc-4246-8eea-6e3da31137b7","input":{"a":{"constant":false},"b":{"constant":true,"data":"65536"}},"output":{"a \xD7 b":{}}},"add3":{"id":"51de3251-1bb6-454d-b9d6-6b8bcb1f56aa","input":{},"output":{}},"numbertostring":{"id":"f712793d-8ee9-4805-9d4a-8c210cae667a","input":{"n":{},"radix":{"constant":true,"data":"16"}},"output":{"str":{}}},"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf","input":{"a":{},"b":{"constant":true,"data":"16777216"}},"output":{"a + b":{}}},"slice":{"id":"c8a4cd44-a554-4901-8a33-a8adbff63d03","input":{"a":{},"begin":{"constant":true,"data":"1"},"end":{"constant":true,"data":"7"}},"output":{"a":{}}},"concat":{"id":"779e538c-b0b9-477e-a986-30ee3abe6fe6","input":{"a":{"constant":true,"data":"\'#\'"},"b":{}},"output":{"ab":{}}}},"merges":{"0":{"multiply":{"output":{"a \xD7 b":true}},"add3":{"input":{"b":true}}},"1":{"multiply0":{"output":{"a \xD7 b":true}},"add3":{"input":{"a":true}}},"2":{"add":{"input":{"a":true}},"add3":{"output":{"a + b + c":true}}},"4":{"numbertostring":{"input":{"n":true}},"add":{"output":{"a + b":true}}},"5":{"slice":{"input":{"a":true}},"numbertostring":{"output":{"str":true}}},"6":{"concat":{"input":{"b":true}},"slice":{"output":{"a":true}}}},"inputs":{"b":{"plug":{"0":{"unitId":"add3","pinId":"c"}},"type":"any"},"g":{"plug":{"0":{"unitId":"multiply","pinId":"a"}},"type":"number"},"r":{"plug":{"0":{"unitId":"multiply0","pinId":"a"}},"type":"number"}},"outputs":{"hex":{"plug":{"0":{"unitId":"concat","pinId":"ab"}},"type":"string"}},"metadata":{"icon":"palette","description":"RGB color to hexadecimal","complexity":22,"tags":["platform","core","color"]},"id":"d7bf7bad-3b64-4190-9bae-878e88d119e7","type":"`U`&`G`","system":true},"23cae4c7-b88c-4004-865f-e618bfb0c63f":{"name":"RGB to xy","units":{"rgbtoxyz":{"id":"73193df9-d5f4-4689-92ce-d804cf30ee20"},"xyztoxy":{"id":"31c06a15-ca1a-4175-b60a-0cb5dfff3a6c"}},"merges":{"0":{"rgbtoxyz":{"output":{"XYZ":true}},"xyztoxy":{"input":{"XYZ":true}}}},"metadata":{"icon":"palette","description":"no description","complexity":89,"tags":["platform","core","color"]},"inputs":{"RGB":{"plug":{"0":{"unitId":"rgbtoxyz","pinId":"RGB"}},"type":"number[]"}},"outputs":{"XY":{"plug":{"0":{"unitId":"xyztoxy","pinId":"xy"}},"type":"number[]"}},"id":"23cae4c7-b88c-4004-865f-e618bfb0c63f","type":"`U`&`G`","system":true},"73193df9-d5f4-4689-92ce-d804cf30ee20":{"name":"RGB to XYZ","units":{"zkotzntwd":{"id":"2dbdf0a4-09c1-49af-b9f8-d51b5cbab5a2","input":{"b":{"constant":true,"data":"[0.000088,0.07231,0.986039]"}}},"kpvelfewp":{"id":"2dbdf0a4-09c1-49af-b9f8-d51b5cbab5a2","input":{"b":{"constant":true,"data":"[0.664511,0.154324,0.162028]"}}},"pckybqxm":{"id":"2dbdf0a4-09c1-49af-b9f8-d51b5cbab5a2","input":{"b":{"constant":true,"data":"[0.283881,0.668433,0.047685]"}}},"dvmkrmbh":{"id":"bd1a9bbb-6129-4031-b7e9-aec351d847d9"},"hxywovgm":{"id":"bd1a9bbb-6129-4031-b7e9-aec351d847d9"},"mfopnseah":{"id":"bd1a9bbb-6129-4031-b7e9-aec351d847d9"},"esopvvb":{"id":"91536c82-8e5f-4542-8138-a1a4eb2e5f4d"}},"merges":{"qvpyeawq":{"zkotzntwd":{"input":{"a":true}},"pckybqxm":{"input":{"a":true}},"kpvelfewp":{"input":{"a":true}}},"sbbmfrhan":{"kpvelfewp":{"output":{"ab":true}},"dvmkrmbh":{"input":{"a":true}}},"rpgjca":{"pckybqxm":{"output":{"ab":true}},"hxywovgm":{"input":{"a":true}}},"auuhzosph":{"zkotzntwd":{"output":{"ab":true}},"mfopnseah":{"input":{"a":true}}},"huuqtjxa":{"mfopnseah":{"output":{"sum":true}},"esopvvb":{"input":{"2":true}}},"jjh":{"hxywovgm":{"output":{"sum":true}},"esopvvb":{"input":{"0":true}}},"tbmmrgpdy":{"dvmkrmbh":{"output":{"sum":true}},"esopvvb":{"input":{"1":true}}}},"metadata":{"icon":"palette","description":"no description","complexity":77,"tags":["platform","core","color"]},"inputs":{"RGB":{"plug":{"0":{"mergeId":"qvpyeawq"}},"functional":true,"type":"number[]"}},"outputs":{"XYZ":{"plug":{"0":{"unitId":"esopvvb","pinId":"a"}},"type":"number[]"}},"id":"73193df9-d5f4-4689-92ce-d804cf30ee20","type":"`U`&`G`","system":true},"31c06a15-ca1a-4175-b60a-0cb5dfff3a6c":{"name":"XYZ to xy","units":{"sumall":{"id":"bd1a9bbb-6129-4031-b7e9-aec351d847d9"},"at":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a","input":{"i":{"constant":true,"data":"0"}}},"at0":{"id":"79f01345-4ed7-47e2-8882-fa3bd282c98a","input":{"i":{"constant":true,"data":"1"}}},"divide":{"id":"158d85eb-28b8-4355-b637-28a7ec751233"},"divide0":{"id":"158d85eb-28b8-4355-b637-28a7ec751233"},"pair":{"id":"a7d5c2f3-6134-4248-b9bc-33271c280267"}},"merges":{"0":{"sumall":{"input":{"a":true}},"at0":{"input":{"a":true}},"at":{"input":{"a":true}}},"1":{"sumall":{"output":{"sum":true}},"divide":{"input":{"b":true}},"divide0":{"input":{"b":true}}},"2":{"at":{"output":{"a[i]":true}},"divide0":{"input":{"a":true}}},"3":{"at0":{"output":{"a[i]":true}},"divide":{"input":{"a":true}}},"4":{"divide0":{"output":{"a \xF7 b":true}},"pair":{"input":{"1":true}}},"5":{"divide":{"output":{"a \xF7 b":true}},"pair":{"input":{"0":true}}}},"metadata":{"icon":"palette","description":"no description","complexity":56,"tags":["platform","core","color"]},"inputs":{"XYZ":{"plug":{"0":{"mergeId":"0"}},"functional":true,"type":"number[]"}},"outputs":{"xy":{"plug":{"0":{"unitId":"pair","pinId":"hbsxpnl"}},"type":"number[]"}},"id":"31c06a15-ca1a-4175-b60a-0cb5dfff3a6c","type":"`U`&`G`","system":true},"dc546440-13ca-4ebf-8831-c28138c7efc6":{"name":"absolute div","type":"`U`&`G`&`C`","inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}}}},"outputs":{},"units":{"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{"style":{"constant":false}},"output":{},"metadata":{"position":{"x":73,"y":-9}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{position:\'absolute\',top:\'0\',left:\'0\'}"}},"output":{"a":{}},"metadata":{"position":{"x":-74,"y":8}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"div":{"input":{"style":true}}}},"component":{"slots":[["div","default"]],"subComponents":{"div":{"children":[]}},"children":["div"],"defaultWidth":120,"defaultHeight":120},"metadata":{"icon":"square","complexity":30,"tags":["platform","core","component"]},"id":"dc546440-13ca-4ebf-8831-c28138c7efc6","render":true,"system":true},"4181691b-4790-4191-9b03-86c6c968d1b8":{"name":"app","inputs":{"style":{"plug":{"0":{"unitId":"gui","pinId":"style"},"1":{"unitId":"propifhaskey","pinId":"obj"}},"metadata":{"position":{"0":{"x":-372,"y":-232},"1":{"x":-59,"y":45}}},"type":"object"},"disabled":{"plug":{"0":{"unitId":"gui","pinId":"disabled"},"1":{"unitId":"editor","pinId":"disabled"}},"metadata":{"position":{"0":{"x":-372,"y":-304},"1":{"x":183,"y":16}}},"type":"boolean"},"graph":{"plug":{"0":{"unitId":"editor","pinId":"graph"}},"ref":true,"metadata":{"position":{"0":{"x":183,"y":145}}},"type":"`G`"},"fullwindow":{"plug":{"0":{"unitId":"editor","pinId":"fullwindow"}},"type":"boolean"},"frame":{"plug":{"0":{"unitId":"editor","pinId":"frame"}},"type":"`U`","ref":true}},"outputs":{"graph":{"plug":{"0":{"unitId":"editor","pinId":"graph"}},"ref":true,"type":"`U`&`G`","defaultIgnored":true}},"units":{"gui":{"id":"0f043df2-46fc-11eb-ae20-6f1fedd527ba","input":{"style":{"metadata":{"position":{"x":-352,"y":-249}}},"disabled":{"metadata":{"position":{"x":-352,"y":-287}}}},"output":{},"metadata":{"position":{"x":-169,"y":-268}}},"editor":{"id":"e80c912e-7508-11ea-966b-436805345ff0","input":{"style":{},"graph":{"metadata":{"position":{"x":187,"y":118}}},"disabled":{"metadata":{"position":{"x":187,"y":44}}},"fullwindow":{"ignored":false,"metadata":{"position":{"x":187,"y":15}}},"frame":{"ignored":false,"metadata":{"position":{"x":188,"y":147}}}},"output":{},"metadata":{"position":{"x":366,"y":81}}},"tagcolor":{"id":"dfba14dd-bd14-4fd2-bbfa-c910eadd9f7d","input":{"color":{}},"output":{"{color}":{}},"metadata":{"position":{"x":118,"y":81}}},"propifhaskey":{"id":"8c4f4d5e-2c98-4dfb-aeac-d1e6605a673e","input":{"key":{"constant":true,"data":"\'color\'","metadata":{"position":{"x":-38,"y":98}}},"obj":{"constant":false,"metadata":{"position":{"x":-38,"y":63}}}},"output":{"value":{},"has":{"ignored":true,"metadata":{"position":{"x":-20,"y":119}}}},"metadata":{"position":{"x":8,"y":81}}}},"merges":{"0":{"tagcolor":{"output":{"{color}":true}},"editor":{"input":{"style":true}}},"1":{"tagcolor":{"input":{"color":true}},"propifhaskey":{"output":{"value":true}}}},"component":{"slots":[["gui","default"],["gui","1"],["gui","2"]],"subComponents":{"gui":{"children":["editor"],"width":420,"height":420},"editor":{"children":[]}},"children":["gui"],"defaultWidth":420,"defaultHeight":420},"metadata":{"icon":"atom-alt","description":"editor + gui","complexity":120,"tags":["platform","core","component"],"position":{"merge":{"0":{"x":174,"y":81},"1":{"x":62,"y":81}}}},"id":"4181691b-4790-4191-9b03-86c6c968d1b8","type":"`U`&`C`&`G`","render":true,"system":true},"9eba84b6-d2ca-47e6-9195-8208dbb880bc":{"name":"box","units":{"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{},"metadata":{"component":{"width":120,"height":210}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{width:\'100%\',height:\'100%\'}"}},"output":{"a":{}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"div":{"input":{"style":true}}}},"inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"type":"object"}},"outputs":{},"metadata":{"icon":"square","description":"100% div","complexity":30,"tags":["platform","core","component"]},"component":{"slots":[["div","default"]],"defaultWidth":180,"defaultHeight":180,"subComponents":{"div":{"children":[]}},"children":["div"]},"id":"9eba84b6-d2ca-47e6-9195-8208dbb880bc","type":"`U`&`C`&`V`&`J`","system":true,"render":true},"01562c38-9973-43f4-982b-1dbdbea49c5b":{"name":"canvas arc","inputs":{"arc":{"plug":{"0":{"unitId":"arc","pinId":"arc"}},"type":"{x:number,y:number,r:number,start:number,end:number,anticlockwise?:boolean}"},"style":{"plug":{"0":{"unitId":"canvas","pinId":"style"}},"type":"object"}},"outputs":{"canvas":{"plug":{"0":{"unitId":"canvas","pinId":"_self"}},"ref":true,"type":"`C`&`V`&`A`"}},"units":{"arc":{"id":"790d5128-7fd6-48f9-b5cf-9edecedb1043","input":{"arc":{"constant":false,"data":"{x:100,y:100,r:60,start:0.78,end:2.35}"},"d":{"constant":true,"data":"[]"}},"output":{"d":{}},"metadata":{"position":{"x":-120,"y":0}}},"canvas":{"id":"94243ec4-8967-4907-8cdd-7223fe256cf6","input":{"d":{},"style":{}},"output":{}}},"merges":{"0":{"arc":{"output":{"d":true}},"canvas":{"input":{"d":true}}}},"component":{"slots":[["canvas","default"]],"subComponents":{"canvas":{"children":[]}},"children":["canvas"],"defaultWidth":200,"defaultHeight":200},"metadata":{"complexity":36,"tags":["platform","core","component","canvas"]},"id":"01562c38-9973-43f4-982b-1dbdbea49c5b","type":"`U`&`G`","render":true,"system":true},"3e555954-4748-48bf-a767-8943ff5a7e95":{"name":"canvas fill circle","units":{"addfillcircle":{"id":"0eb3579e-4645-4e45-a3b1-f3fb1a62ab4d","input":{"circle":{"constant":false},"d":{"constant":true,"data":"[]"}},"output":{"d":{"ignored":false}}},"canvas":{"id":"94243ec4-8967-4907-8cdd-7223fe256cf6","input":{"d":{},"style":{}},"output":{}}},"merges":{"0":{"addfillcircle":{"output":{"d":true}},"canvas":{"input":{"d":true}}}},"metadata":{"icon":"edit-3","description":"a circle on canvas","complexity":47,"tags":["platform","core","component","canvas"]},"inputs":{"circle":{"plug":{"0":{"unitId":"addfillcircle","pinId":"circle"}},"type":"{x:number,y:number,r:number}","metadata":{"examples":["{x:100,y:100,r:50}"]}},"style":{"plug":{"0":{"unitId":"canvas","pinId":"style"}},"type":"object"}},"outputs":{"canvas":{"plug":{"0":{"unitId":"canvas","pinId":"_self"}},"ref":true,"type":"`C`&`V`&`A`"}},"id":"3e555954-4748-48bf-a767-8943ff5a7e95","component":{"slots":[["canvas","default"]],"defaultWidth":200,"defaultHeight":200,"subComponents":{"canvas":{"children":[]}},"children":["canvas"]},"type":"`U`&`G`","render":true,"system":true},"c30f0873-71d8-405f-9b92-d3eb5a387a3b":{"name":"canvas line","inputs":{"style":{"plug":{"0":{"unitId":"canvas","pinId":"style"}},"type":"object"},"line":{"plug":{"0":{"unitId":"default","pinId":"a"}},"type":"{x0:number,y0:number,x1:number,y1:number}"}},"outputs":{},"units":{"addline":{"id":"90dc2942-52fa-4e09-bcef-43fa97cc0b72","input":{"d":{"constant":true,"data":"[]","metadata":{"position":{"x":25,"y":47}}},"line":{"constant":false}},"output":{"d":{"ignored":false}},"metadata":{"position":{"x":54,"y":12}}},"canvas":{"id":"94243ec4-8967-4907-8cdd-7223fe256cf6","input":{"d":{},"style":{"metadata":{"position":{"x":119,"y":-47}}}},"output":{},"metadata":{"position":{"x":248,"y":-18}}},"default":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89","input":{"a":{"metadata":{"position":{"x":-105,"y":18}}},"d":{"constant":true,"data":"{x0:20,y0:180,x1:180,y1:20}","metadata":{"position":{"x":-104,"y":-16}}}},"output":{"a":{}},"metadata":{"position":{"x":-58,"y":2}}}},"merges":{"0":{"addline":{"output":{"d":true}},"canvas":{"input":{"d":true}}},"1":{"default":{"output":{"a":true}},"addline":{"input":{"line":true}}}},"component":{"subComponents":{"canvas":{"children":[]}},"children":["canvas"],"defaultWidth":200,"defaultHeight":200},"metadata":{"icon":"edit-3","description":"a line on canvas","complexity":50,"tags":["platform","core","component","canvas"],"position":{"merge":{"0":{"x":109,"y":4},"1":{"x":-3,"y":5}}}},"id":"c30f0873-71d8-405f-9b92-d3eb5a387a3b","type":"`U`&`G`","render":true,"system":true},"a24f049c-7bb0-11ea-bbdc-17b9984e1f06":{"name":"chalkboard","inputs":{"style":{"plug":{"0":{"unitId":"canvas","pinId":"style"}},"type":"object","metadata":{"position":{"0":{"x":-148,"y":177}}}},"width":{"plug":{"0":{"unitId":"canvas","pinId":"width"}},"metadata":{"examples":["200"],"position":{"0":{"x":-165,"y":128}}},"type":"string"},"height":{"plug":{"0":{"unitId":"canvas","pinId":"height"}},"metadata":{"examples":["200"],"position":{"0":{"x":-153,"y":-22}}},"type":"string"}},"outputs":{"canvas":{"plug":{"0":{"unitId":"canvas","pinId":"_self"}},"ref":true,"type":"`CS`&`CA`","defaultIgnored":true}},"units":{"ondrag":{"id":"d4de180e-f1e8-4575-ab64-eaef413bcfc4","input":{"element":{}},"output":{"move":{},"down":{},"up":{"ignored":true,"metadata":{"position":{"x":163,"y":-59}}}},"metadata":{"position":{"x":34,"y":-54}}},"propclientxclienty":{"id":"1cbbfd58-c4ee-4c83-a5c8-83f614eb7027","input":{"obj":{}},"output":{"y":{},"x":{}},"metadata":{"position":{"x":134,"y":-59}}},"beginpath":{"id":"81c0f469-ab88-4bc8-89d5-98d291b1d8b2","input":{"d":{"constant":true,"data":"[]","metadata":{"position":{"x":420,"y":96}}}},"output":{"d":{}},"metadata":{"position":{"x":290,"y":23}}},"moveto":{"id":"3c47d4bc-315d-4600-a9cd-6e388b345980","input":{"d":{},"x":{},"y":{}},"output":{"d":{}},"metadata":{"position":{"x":186,"y":9}}},"addlineto":{"id":"2b0ef9e9-028b-4acc-9daf-6999e86cc2af","input":{"d":{"constant":true,"data":"[]","metadata":{"position":{"x":-37,"y":-207}}},"x":{},"y":{}},"output":{"d":{}},"metadata":{"position":{"x":-159,"y":-119}}},"canvas":{"id":"94243ec4-8967-4907-8cdd-7223fe256cf6","input":{"style":{"metadata":{"position":{"x":-151,"y":147}}},"width":{"metadata":{"position":{"x":-151,"y":106}}},"height":{"metadata":{"position":{"x":-154,"y":4}}},"d":{"metadata":{"position":{"x":-154,"y":54}}}},"output":{},"metadata":{"position":{"x":-95,"y":65}}},"stroke":{"id":"9a7c22e3-3de2-4c99-ac1f-b2f8ceffae99","input":{"d":{}},"output":{"d":{}},"metadata":{"position":{"x":-255,"y":-69}}},"drawd":{"id":"62bd0895-8889-40b2-8147-1c690809f4eb","input":{"d":{},"canvas":{}},"output":{},"metadata":{"position":{"x":68,"y":44}}},"drawd0":{"id":"62bd0895-8889-40b2-8147-1c690809f4eb","input":{"d":{},"canvas":{}},"output":{},"metadata":{"position":{"x":-240,"y":14}}},"ondoubleclick":{"id":"40f9a40a-b4f2-11eb-baf1-933bfa98253e","input":{"element":{}},"output":{"event":{}},"metadata":{"position":{"x":41,"y":144}}},"clear":{"id":"1ef77768-7394-4b83-ad11-f5905fa9d0d3","input":{"any":{},"canvas":{}},"output":{},"metadata":{"position":{"x":50,"y":105}}},"propoffsetXoffsetY":{"id":"2307cacf-1363-40bc-bd6b-d58227927ae0"}},"merges":{"0":{"propclientxclienty":{"input":{"obj":true}},"ondrag":{"output":{"down":true}}},"1":{"moveto":{"input":{"x":true}},"propclientxclienty":{"output":{"x":true}}},"2":{"moveto":{"input":{"y":true}},"propclientxclienty":{"output":{"y":true}}},"3":{"moveto":{"input":{"d":true}},"beginpath":{"output":{"d":true}}},"4":{"ondrag":{"output":{"move":true}},"propoffsetXoffsetY":{"input":{"obj":true},"output":{}}},"5":{"canvas":{"output":{"_self":true}},"ondrag":{"input":{"element":true}},"ondoubleclick":{"input":{"element":true}},"drawd":{"input":{"canvas":true}},"drawd0":{"input":{"canvas":true}},"clear":{"input":{"canvas":true}}},"6":{"addlineto":{"input":{"y":true}},"propoffsetXoffsetY":{"input":{},"output":{"offsetY":true}}},"7":{"addlineto":{"input":{"x":true}},"propoffsetXoffsetY":{"input":{},"output":{"offsetX":true}}},"8":{"stroke":{"input":{"d":true}},"addlineto":{"output":{"d":true}}},"9":{"drawd":{"input":{"d":true}},"moveto":{"output":{"d":true}}},"10":{"stroke":{"output":{"d":true}},"drawd0":{"input":{"d":true}}},"13":{"ondoubleclick":{"output":{"event":true}},"clear":{"input":{"any":true}}}},"component":{"subComponents":{"canvas":{"children":[]}},"children":["canvas"],"defaultWidth":200,"defaultHeight":200},"metadata":{"icon":"chalkboard","description":"drawing board","complexity":116,"tags":["platform","core","component"],"position":{"merge":{"0":{"x":174,"y":-18},"1":{"x":217,"y":47},"2":{"x":271,"y":27},"3":{"x":316,"y":87},"4":{"x":117,"y":-92},"6":{"x":54,"y":-173},"7":{"x":42,"y":-150},"8":{"x":-60,"y":-162},"9":{"x":190,"y":86},"10":{"x":-153,"y":-120},"11":{"x":-267,"y":25},"12":{"x":-361,"y":64}}}},"id":"a24f049c-7bb0-11ea-bbdc-17b9984e1f06","type":"`U`&`C`&`G`","system":true,"render":true},"d0c59812-a8ec-4c53-81a9-c9725dda987e":{"name":"charcode","inputs":{"code":{"plug":{"0":{"unitId":"fromcharcode","pinId":"code"}},"ref":false},"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"ref":false}},"outputs":{},"units":{"textspan":{"id":"4ba86ad5-899b-4e8d-b5ce-3589dcfeaefd","input":{"style":{},"value":{}},"output":{},"metadata":{"component":{"width":137.0802001953125,"height":130.09799194335938}}},"fromcharcode":{"id":"25d0e003-f002-45ae-a50c-6fa3bffee4eb","input":{"code":{}},"output":{"char":{}},"metadata":{"position":{"x":-76,"y":0}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{display:\'flex\',justifyContent:\'center\',alignItems:\'center\',fontSize:\'60px\'}"}},"output":{"a":{}}}},"merges":{"0":{"fromcharcode":{"output":{"char":true}},"textspan":{"input":{"value":true}}},"1":{"mergedefault":{"output":{"a":true}},"textspan":{"input":{"style":true}}}},"component":{"subComponents":{"textspan":{"children":[]}},"children":["textspan"],"defaultWidth":90,"defaultHeight":90},"metadata":{"complexity":55,"tags":["platform","core","component"]},"id":"d0c59812-a8ec-4c53-81a9-c9725dda987e","type":"`U`&`G`","render":true,"system":true},"68ee3bf2-7d57-4828-92ac-1070e988ffe7":{"name":"default video","units":{"defaultvideomedia":{"id":"c03c7ef3-0649-4a99-9e9a-858bcaba1307","input":{"opt":{}},"output":{"stream":{}},"metadata":{"position":{"x":110,"y":0}}},"video":{"id":"7a8921eb-c1ad-400b-94fc-6c6cead8163d","input":{"src":{"ignored":true},"style":{},"stream":{"ignored":false},"controls":{"ignored":false}},"output":{},"metadata":{"position":{"x":-111,"y":-1}}}},"merges":{"0":{"video":{"input":{"stream":true}},"defaultvideomedia":{"output":{"stream":true}}}},"inputs":{"style":{"plug":{"0":{"unitId":"video","pinId":"style"}},"type":"object"},"controls":{"plug":{"0":{"unitId":"video","pinId":"controls"}},"defaultIgnored":true,"type":"boolean"},"opt":{"plug":{"0":{"unitId":"defaultvideomedia","pinId":"opt"}},"type":"object"}},"outputs":{"video":{"plug":{"0":{"unitId":"video","pinId":"_self"}},"ref":true,"type":"`V`&`C`&`M`"}},"metadata":{"icon":"video","description":"","complexity":44,"tags":["platform","core","component"]},"component":{"slots":[["video","default"]],"subComponents":{"video":{"children":[]}},"children":["video"],"defaultWidth":240,"defaultHeight":240},"id":"68ee3bf2-7d57-4828-92ac-1070e988ffe7","type":"`U`&`G`","system":true,"render":true},"4d0092bf-0e68-49e5-8fe1-6b0c79da571c":{"name":"fit-content","units":{"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{},"metadata":{"component":{"width":120,"height":210}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{width:\'fit-content\',height:\'fit-content\'}"}},"output":{"a":{}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"div":{"input":{"style":true}}}},"inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"type":"object"}},"outputs":{},"metadata":{"icon":"square","description":"column flexbox","complexity":30,"tags":["platform","core","component"]},"component":{"slots":[["div","default"]],"defaultWidth":180,"defaultHeight":270,"subComponents":{"div":{"children":[]}},"children":["div"]},"id":"4d0092bf-0e68-49e5-8fe1-6b0c79da571c","type":"`U`&`G`&`C`","system":true,"render":true},"67a6fb5a-feab-11ea-8bd1-a3c19e76592a":{"name":"flex column","units":{"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{},"metadata":{"component":{"width":180,"height":270}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{display:\'flex\',flexDirection:\'column\',overflow:\'auto\'}"}},"output":{"a":{}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"div":{"input":{"style":true}}}},"inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"type":"object"}},"outputs":{},"metadata":{"icon":"square","description":"column flexbox","complexity":30,"tags":["platform","core","component"]},"component":{"slots":[["div","default"]],"defaultWidth":180,"defaultHeight":270,"subComponents":{"div":{"children":[]}},"children":["div"]},"id":"67a6fb5a-feab-11ea-8bd1-a3c19e76592a","type":"`U`&`G`&`C`","system":true,"render":true},"59d00328-d61e-4ed2-b4e4-cfa53e0b7fa7":{"name":"flex column center","units":{"flexcolumn":{"id":"67a6fb5a-feab-11ea-8bd1-a3c19e76592a","input":{},"metadata":{"component":{"width":120,"height":210}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{alignItems:\'center\',justifyContent:\'center\'}"}},"output":{"a":{}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"flexcolumn":{"input":{"style":true}}}},"inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"type":"object"}},"outputs":{},"metadata":{"icon":"square","description":"column flexbox with centered content","complexity":33,"tags":["platform","core","component"]},"component":{"slots":[["flexcolumn","default"]],"defaultWidth":180,"defaultHeight":270,"subComponents":{"flexcolumn":{"children":[]}},"children":["flexcolumn"]},"id":"59d00328-d61e-4ed2-b4e4-cfa53e0b7fa7","type":"`U`&`G`&`C`","system":true,"render":true},"cac87386-de49-480e-87ec-80c306aa5eec":{"name":"flex column grid","units":{"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{},"metadata":{"component":{"width":120,"height":210}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{display:\'flex\',flexDirection:\'column\',flexWrap:\'wrap\',alignContent:\'start\'}"}},"output":{"a":{}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"div":{"input":{"style":true}}}},"inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"type":"object"}},"outputs":{},"metadata":{"icon":"square","description":"grid flexbox","complexity":30,"tags":["platform","core","component"]},"component":{"slots":[["div","default"]],"defaultWidth":240,"defaultHeight":240,"subComponents":{"div":{"children":[]}},"children":["div"]},"id":"cac87386-de49-480e-87ec-80c306aa5eec","type":"`U`&`G`&`C`","system":true,"render":true},"ad5a2fcc-fdee-11ea-a34f-77e9c48dbe57":{"name":"flex row","units":{"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{},"metadata":{"component":{"width":210,"height":120}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{display:\'flex\',flexDirection:\'row\'}"}},"output":{"a":{}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"div":{"input":{"style":true}}}},"inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"type":"object"}},"outputs":{},"metadata":{"icon":"square","description":"row flexbox","complexity":30,"tags":["platform","core","component"]},"component":{"slots":[["div","default"]],"defaultWidth":270,"defaultHeight":180,"subComponents":{"div":{"children":[]}},"children":["div"]},"id":"ad5a2fcc-fdee-11ea-a34f-77e9c48dbe57","type":"`U`&`C`&`V`&`J`","system":true,"render":true},"af731047-6d74-4dfd-93bd-0daa4d649d4d":{"name":"flex row center","units":{"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{},"metadata":{"component":{"width":120,"height":210}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{display:\'flex\',flexDirection:\'row\',flexWrap:\'wrap\',alignContent:\'center\',justifyContent:\'center\'}"}},"output":{"a":{}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"div":{"input":{"style":true}}}},"inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"type":"object"}},"outputs":{},"metadata":{"icon":"square","description":"centered flexbox","complexity":30,"tags":["platform","core","component"]},"component":{"slots":[["div","default"]],"defaultWidth":240,"defaultHeight":240,"subComponents":{"div":{"children":[]}},"children":["div"]},"id":"af731047-6d74-4dfd-93bd-0daa4d649d4d","type":"`U`&`C`&`G`","system":true,"render":true},"9b9f4c2e-7c28-44c6-b59a-ef26d63892d6":{"name":"flex row grid","units":{"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{},"metadata":{"component":{"width":120,"height":210}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{display:\'flex\',flexDirection:\'row\',flexWrap:\'wrap\',alignContent:\'start\'}"}},"output":{"a":{}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"div":{"input":{"style":true}}}},"inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"type":"object"}},"outputs":{},"metadata":{"icon":"square","description":"grid flexbox","complexity":30,"tags":["platform","core","component"]},"component":{"slots":[["div","default"]],"defaultWidth":240,"defaultHeight":240,"subComponents":{"div":{"children":[]}},"children":["div"]},"id":"9b9f4c2e-7c28-44c6-b59a-ef26d63892d6","type":"`U`&`C`&`G`","system":true,"render":true},"120ff298-ff92-4b7c-b748-9a3c3bdbad2e":{"name":"full chalkboard","inputs":{"style":{"plug":{"0":{"unitId":"chalkboard","pinId":"style"}},"metadata":{"position":{"0":{"x":336,"y":0}}},"type":"object"}},"outputs":{"canvas":{"plug":{"0":{"unitId":"chalkboard","pinId":"canvas"}},"ref":true,"type":"`CS`&`CA`","defaultIgnored":true}},"units":{"chalkboard":{"id":"a24f049c-7bb0-11ea-bbdc-17b9984e1f06","input":{"style":{"metadata":{"position":{"x":311,"y":-1}}},"width":{"constant":true,"data":"\\"100vw\\""},"height":{"constant":true,"data":"\\"100vh\\""}},"output":{"canvas":{"ignored":false}},"metadata":{"position":{"x":0,"y":0},"component":{"width":346.2822265625,"height":384.0284118652344}}}},"component":{"children":["chalkboard"],"subComponents":{"chalkboard":{"children":[]}},"defaultWidth":200,"defaultHeight":200},"metadata":{"icon":"chalkboard","description":"full frame chalkboard","complexity":118,"position":{"merge":{"dnnbflw":{"x":-92,"y":50},"cgpompnrt":{"x":-92,"y":-51}}},"tags":["platform","core","component"]},"id":"120ff298-ff92-4b7c-b748-9a3c3bdbad2e","type":"`U`&`G`","system":true,"render":true},"a9cbed12-9a53-11eb-8c2e-f3146b36128d":{"name":"hello world","inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}}}},"outputs":{},"units":{"textbox":{"id":"9988a56e-6bee-46c8-864c-e351d84bc7e2","input":{"value":{"constant":true,"data":"\'hello world\'"},"style":{"constant":false}},"output":{"div":{"ignored":true}},"metadata":{"position":{"x":105,"y":14}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{textAlign:\'center\',fontFamily:\'Inconsolata\',display:\'flex\',justifyContent:\'center\',alignItems:\'center\',fontSize:\'20vw\'}"}},"output":{"a":{}},"metadata":{"position":{"x":-106,"y":-15}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"textbox":{"input":{"style":true}}}},"component":{"subComponents":{"textbox":{"children":[]}},"children":["textbox"],"defaultWidth":300,"defaultHeight":300},"metadata":{"description":"text box saying \'hello world\'","icon":"sign","complexity":55,"position":{},"tags":["platform","core","component"]},"id":"a9cbed12-9a53-11eb-8c2e-f3146b36128d","render":true,"system":true,"specs":{},"type":"`U`&`G`"},"ec8afd36-0718-42f7-9b0d-4b1adbf62766":{"name":"horizontal scroll box","inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}}}},"outputs":{},"units":{"defaultstyle":{"id":"b5286262-9f92-40d3-8545-88fb3079a0f9","input":{"style":{"constant":true,"data":"{display:\\"inline-block\\",verticalAlign:\\"bottom\\"}"}},"metadata":{"position":{"x":50,"y":-114}}},"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{"style":{}},"output":{},"metadata":{"position":{"x":-51,"y":113}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"default":{"constant":true,"data":"{whiteSpace:\\"nowrap\\"}"}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"div":{"input":{"style":true}}}},"component":{"slots":[["defaultstyle","default"]],"subComponents":{"defaultstyle":{"children":[]},"div":{"children":["defaultstyle"]}},"children":["div"],"defaultWidth":300,"defaultHeight":180},"metadata":{"icon":"square","complexity":50,"description":"horizontal scroll container","tags":["platform","core","component"]},"id":"ec8afd36-0718-42f7-9b0d-4b1adbf62766","type":"`U`&`G`&`C`","render":true,"system":true},"687384e5-8b9a-4ba8-b68a-e7972213d7bc":{"name":"hovered or not","inputs":{},"outputs":{},"units":{"textdiv":{"id":"9988a56e-6bee-46c8-864c-e351d84bc7e2","input":{"value":{"constant":true,"data":"\'NOT HOVERED\'"},"style":{"constant":true,"data":"{display:\'flex\',justifyContent:\'center\',alignItems:\'center\',fontSize:\'30px\',textAlign:\'center\'}","metadata":{"position":{"x":251,"y":0}}}},"output":{},"metadata":{"position":{"x":128,"y":0}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"\'HOVERED\'","metadata":{"position":{"x":-109,"y":43}}},"b":{}},"output":{"a":{}},"metadata":{"position":{"x":-59,"y":31}}},"onpointerenter":{"id":"c0bb493a-af78-11ea-b6fa-3b893b757a39","input":{"element":{}},"output":{"event":{}},"metadata":{"position":{"x":4,"y":62}}},"onpointerleave":{"id":"c7dba94e-af78-11ea-b7d7-47e14ca215b5","input":{"element":{}},"output":{"event":{}},"metadata":{"position":{"x":4,"y":-63}}},"wait0":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"\'NOT HOVERED\'","metadata":{"position":{"x":-109,"y":-44}}},"b":{}},"output":{"a":{}},"metadata":{"position":{"x":-59,"y":-32}}}},"merges":{"amznbrs":{"onpointerleave":{"input":{"element":true}},"textdiv":{"output":{"_self":true}},"onpointerenter":{"input":{"element":true}}},"qkzuxfdle":{"wait0":{"input":{"b":true}},"onpointerleave":{"output":{"event":true}}},"skqbcsu":{"wait":{"input":{"b":true}},"onpointerenter":{"output":{"event":true}}},"qldolfj":{"wait":{"output":{"a":true}},"textdiv":{"input":{"value":true}},"wait0":{"output":{"a":true}}}},"metadata":{"complexity":66,"position":{"merge":{"qkzuxfdle":{"x":-41,"y":-72},"skqbcsu":{"x":-41,"y":71},"qldolfj":{"x":-12,"y":0},"yqhxzi":{"x":257,"y":0}}},"tags":["platform","core","component"]},"id":"687384e5-8b9a-4ba8-b68a-e7972213d7bc","component":{"subComponents":{"textdiv":{"children":[]}},"children":["textdiv"],"defaultWidth":180,"defaultHeight":90},"type":"`U`&`G`","system":true,"render":true},"e16f9ac0-29c3-4ae7-a2e7-2aa6b98bcc1b":{"name":"inherit display inline-block","inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}}}},"outputs":{},"units":{"inherit":{"id":"b5286262-9f92-40d3-8545-88fb3079a0f9","input":{"style":{}},"output":{},"metadata":{"position":{"x":103,"y":-1}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{\\"display\\":\'inline-block\',\\"vertical-align\\":\\"bottom\\"}"}},"output":{"a":{}},"metadata":{"position":{"x":-104,"y":0}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"inherit":{"input":{"style":true}}}},"render":true,"component":{"slots":[["inherit","default"]],"subComponents":{"inherit":{"children":[]}},"children":["inherit"],"defaultWidth":240,"defaultHeight":240},"metadata":{"icon":null,"description":"","complexity":30,"tags":["platform","core","component"]},"id":"e16f9ac0-29c3-4ae7-a2e7-2aa6b98bcc1b","system":true},"b62c0058-9183-435f-baae-c51a3ee1855b":{"name":"inherit scroll-snap-align start","inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}}}},"outputs":{},"units":{"inherit":{"id":"b5286262-9f92-40d3-8545-88fb3079a0f9","input":{"style":{}},"output":{},"metadata":{"position":{"x":103,"y":-1}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{\\"scroll-snap-align\\":\'start\'}"}},"output":{"a":{}},"metadata":{"position":{"x":-104,"y":0}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"inherit":{"input":{"style":true}}}},"render":true,"component":{"slots":[["inherit","default"]],"subComponents":{"inherit":{"children":[]}},"children":["inherit"],"defaultWidth":240,"defaultHeight":240},"metadata":{"icon":null,"description":"","complexity":30,"tags":["platform","core","component"]},"id":"b62c0058-9183-435f-baae-c51a3ee1855b","system":true},"0b5d4999-21ce-48da-907d-2891514c451d":{"name":"inherit scroll-snap x","inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}}}},"outputs":{},"units":{"inherit":{"id":"b5286262-9f92-40d3-8545-88fb3079a0f9","input":{"style":{}},"output":{},"metadata":{"position":{"x":103,"y":-1}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{\\"scroll-snap-type\\":\'x mandatory\',\\"scroll-snap-stop\\":\\"always\\"}"}},"output":{"a":{}},"metadata":{"position":{"x":-104,"y":0}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"inherit":{"input":{"style":true}}}},"render":true,"component":{"slots":[["inherit","default"]],"subComponents":{"inherit":{"children":[]}},"children":["inherit"],"defaultWidth":240,"defaultHeight":240},"metadata":{"icon":null,"description":"","complexity":30,"tags":["platform","core","component"]},"id":"0b5d4999-21ce-48da-907d-2891514c451d","system":true},"5867c5b6-24f2-4bd7-90b3-4e44615bc42c":{"name":"inherit scroll-snap y","inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}}}},"outputs":{},"units":{"inherit":{"id":"b5286262-9f92-40d3-8545-88fb3079a0f9","input":{"style":{}},"output":{},"metadata":{"position":{"x":103,"y":-1}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{\\"scroll-snap-type\\":\'y mandatory\',\\"scroll-snap-stop\\":\\"always\\"}"}},"output":{"a":{}},"metadata":{"position":{"x":-104,"y":0}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"inherit":{"input":{"style":true}}}},"render":true,"component":{"slots":[["inherit","default"]],"subComponents":{"inherit":{"children":[]}},"children":["inherit"],"defaultWidth":240,"defaultHeight":240},"metadata":{"icon":null,"description":"","complexity":30,"tags":["platform","core","component"]},"id":"5867c5b6-24f2-4bd7-90b3-4e44615bc42c","system":true},"40d0e320-484e-4bfb-95e6-75576e8c23c3":{"name":"inherit transparent","inputs":{"disabled":{"plug":{"0":{"unitId":"lever","pinId":"c"}}},"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}}}},"outputs":{},"units":{"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{}"}},"output":{"a":{}},"metadata":{"position":{"x":-128,"y":50}}},"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{},"key":{"constant":true,"data":"\\"opacity\\""},"value":{}},"output":{"obj":{}},"metadata":{"position":{"x":-24,"y":9}}},"lever":{"id":"c37c7c14-293e-414c-8a9c-01a40186c1e5","input":{"c":{},"b":{"constant":true,"data":"\\"0\\""},"a":{"constant":true,"data":"\\"1\\""}},"output":{"a":{}},"metadata":{"position":{"x":-38,"y":-96}}},"inherit":{"id":"b5286262-9f92-40d3-8545-88fb3079a0f9","input":{"style":{}},"output":{},"metadata":{"position":{"x":189,"y":35}}}},"merges":{"0":{"inherit":{"input":{"style":true}},"set":{"output":{"obj":true}}},"1":{"mergedefault":{"output":{"a":true}},"set":{"input":{"obj":true}}},"2":{"lever":{"output":{"a":true}},"set":{"input":{"value":true}}}},"render":true,"metadata":{"icon":null,"description":"","complexity":48,"tags":["platform","core","component"]},"id":"40d0e320-484e-4bfb-95e6-75576e8c23c3","component":{"slots":[["inherit","default"]],"subComponents":{"inherit":{"children":[]}},"children":["inherit"],"defaultWidth":120,"defaultHeight":120},"type":"`U`&`G`&`C`","system":true},"b434223f-7f7a-4f03-83ab-744e16990206":{"name":"inline-block div","type":"`U`&`G`&`C`","inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}}}},"outputs":{},"units":{"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{"style":{"constant":false}},"output":{},"metadata":{"position":{"x":73,"y":-9}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{display:\\"inline-block\\",verticalAlign:\\"bottom\\"}"}},"output":{"a":{}},"metadata":{"position":{"x":-74,"y":8}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"div":{"input":{"style":true}}}},"component":{"slots":[["div","default"]],"subComponents":{"div":{"children":[]}},"children":["div"],"defaultWidth":120,"defaultHeight":120},"metadata":{"icon":"square","complexity":30,"tags":["platform","core","component"]},"id":"b434223f-7f7a-4f03-83ab-744e16990206","render":true,"system":true},"6f267de2-b02c-11ea-b55c-db553f4c6c45":{"name":"IO","inputs":{"disabled":{"plug":{"0":{"unitId":"app","pinId":"disabled"},"1":{"unitId":"bot","pinId":"disabled"}},"type":"boolean","metadata":{"position":{"0":{"x":-435,"y":-53},"1":{"x":250,"y":-164}}}},"style":{"plug":{"0":{"unitId":"app","pinId":"style"},"1":{"unitId":"propifhaskey0","pinId":"obj"},"2":{"unitId":"propifhaskey","pinId":"obj"}},"type":"object","metadata":{"position":{"0":{"x":248,"y":77},"1":{"x":-419,"y":-9}}}},"graph":{"plug":{"0":{"unitId":"app","pinId":"graph"}},"type":"`G`","ref":true,"metadata":{"position":{"0":{"x":-437,"y":-89}}}},"fullwindow":{"plug":{"0":{"unitId":"app","pinId":"fullwindow"}},"type":"boolean","metadata":{"position":{"0":{"x":-389,"y":-134}}}},"frame":{"plug":{"0":{"unitId":"app","pinId":"frame"}},"ref":true,"type":"`U`","metadata":{"position":{"0":{"x":-419,"y":-169}}}}},"outputs":{"graph":{"plug":{"0":{"unitId":"app","pinId":"graph"}},"ref":true,"type":"`U`&`G`","defaultIgnored":true}},"units":{"app":{"id":"4181691b-4790-4191-9b03-86c6c968d1b8","input":{"style":{"metadata":{"position":{"x":-298.14547795324887,"y":-65.91218709181067}}},"disabled":{"metadata":{"position":{"x":-296.63631535157305,"y":-93.3196446293664}}},"graph":{"metadata":{"position":{"x":-297.8124928367791,"y":-117.4403828446583}}},"fullwindow":{"metadata":{"position":{"x":-294.8412524037967,"y":-140.76131893701523}}},"frame":{"metadata":{"position":{"x":-300.38405571934464,"y":-164.66781047034897}}}},"output":{"graph":{"ignored":false,"metadata":{"position":{"x":-289.3118062141259,"y":-193.78207427539593}}}},"metadata":{"position":{"x":-558.6621783671444,"y":-187.7214238075927}}},"bot":{"id":"0e9e6cd4-67eb-11ea-995b-4b0721193361","input":{"style":{"metadata":{"position":{"x":244,"y":45}}},"disabled":{"metadata":{"position":{"x":608.4371966644069,"y":-126.35953831311235}}},"r":{"constant":true,"data":"42","metadata":{"position":{"x":608.4371966644069,"y":-88.11799803592231}}},"x":{"ignored":false,"constant":true,"data":"\\"50%\\"","metadata":{"position":{"x":344.6521748892934,"y":-146.95460063857104}}},"y":{"ignored":false,"constant":true,"data":"\\"25%\\"","metadata":{"position":{"x":344.04774836238016,"y":-111.87036908016006}}}},"output":{},"metadata":{"position":{"x":456.8352328715838,"y":-165.32510948865962}}},"logo":{"id":"8aee8e9f-a132-46de-a0c7-17f8035b1898","input":{"style":{"constant":false,"metadata":{"position":{"x":88,"y":474}}},"pathStyle":{"metadata":{"position":{"x":16.563833359252612,"y":257.5886659437294}}}},"output":{},"metadata":{"position":{"x":173.16660309439214,"y":173.2234477527877},"component":{"width":289.85217285156244,"height":255.05767822265625}}},"propifhaskey":{"id":"8c4f4d5e-2c98-4dfb-aeac-d1e6605a673e","input":{"key":{"constant":true,"data":"\\"color\\"","metadata":{"position":{"x":-298.94494978295836,"y":196.08159083731522}}},"obj":{"metadata":{"position":{"x":-298.8358195703903,"y":159.80266490724836}}}},"output":{"value":{},"has":{"ignored":true,"metadata":{"position":{"x":-239.9166585172394,"y":219.97849994896745}}}},"metadata":{"position":{"x":-272.0954539021811,"y":119.959139632355}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{opacity:\'0.1\',position:\'relative\',width:\'240px\',top:\'50%\',left:\'50%\',transform:\'translate(-50%,-50%)\'}","metadata":{"position":{"x":-86.10647839053826,"y":227.19237683975695}}}},"output":{"a":{}},"metadata":{"position":{"x":-63.78741231550606,"y":145.57886546423185}}},"tagcolor":{"id":"dfba14dd-bd14-4fd2-bbfa-c910eadd9f7d","input":{"color":{}},"output":{"{color}":{}},"metadata":{"position":{"x":-167.78523908533958,"y":122.43466233697382}}},"propifhaskey0":{"id":"8c4f4d5e-2c98-4dfb-aeac-d1e6605a673e","input":{"key":{"constant":true,"data":"\\"color\\"","metadata":{"position":{"x":133.26902724217234,"y":-34.83180774135582}}},"obj":{"metadata":{"position":{"x":217.0177338501544,"y":-3.7406470225576527}}}},"output":{"value":{},"has":{"ignored":true,"metadata":{"position":{"x":141.7487345246251,"y":-7.95714449713995}}}},"metadata":{"position":{"x":164.35467772260517,"y":-92.17071555881313}}},"tagcolor0":{"id":"dfba14dd-bd14-4fd2-bbfa-c910eadd9f7d","input":{"color":{}},"output":{"{color}":{}},"metadata":{"position":{"x":267.97376998158984,"y":-115.97886633128314}}}},"merges":{"5":{"tagcolor":{"input":{"color":true}},"propifhaskey":{"output":{"value":true}}},"6":{"tagcolor":{"output":{"{color}":true}},"mergedefault":{"input":{"a":true}}},"7":{"mergedefault":{"output":{"a":true}},"logo":{"input":{"style":true}}},"8":{"tagcolor0":{"input":{"color":true}},"propifhaskey0":{"output":{"value":true}}},"9":{"tagcolor0":{"output":{"{color}":true}},"bot":{"input":{"style":true}}}},"render":true,"component":{"subComponents":{"app":{"children":["logo","bot"],"childSlot":{"logo":"1","bot":"1"}},"bot":{"children":[]},"logo":{"children":[]}},"children":["app"],"slots":[["app","default"],["app","1"],["app","2"]],"defaultWidth":360,"defaultHeight":360},"metadata":{"icon":"atom-alt","description":"bot + app","tags":["platform","core","component"],"position":{"merge":{"0":{"x":165,"y":-7},"1":{"x":165,"y":-86},"2":{"x":230,"y":-102},"3":{"x":229,"y":14}}}},"id":"6f267de2-b02c-11ea-b55c-db553f4c6c45","system":true},"e1b6acd3-69cd-4edb-8e3e-6c78ffd28b49":{"name":"local root","inputs":{},"outputs":{},"units":{"root":{"id":"9aba266d-5200-4281-b477-749c9b3c5815","input":{"disabled":{"ignored":true},"fullwindow":{"ignored":true},"style":{},"graph":{}},"output":{"graph":{"ignored":false}},"metadata":{"position":{"x":15,"y":35}}},"localstorage":{"id":"c8f3faa8-09f4-11eb-a3b1-477aa3ec4193","input":{},"output":{},"metadata":{"position":{"x":487,"y":5}}},"set":{"id":"074ef6f4-a0a1-40f9-95c0-cf0ecc3d420c","input":{"obj":{},"name":{"constant":true,"data":"\\"bundle\\""},"data":{}},"output":{"data":{"ignored":true}},"metadata":{"position":{"x":430,"y":22}}},"get":{"id":"bc0320e2-2eb8-11eb-a38f-a779bfe81645","input":{"obj":{},"name":{"constant":false}},"output":{"value":{}},"metadata":{"position":{"x":-288,"y":-13}}},"localstorage0":{"id":"c8f3faa8-09f4-11eb-a3b1-477aa3ec4193","input":{},"output":{},"metadata":{"position":{"x":-340,"y":15}}},"spark":{"id":"3be8272d-310a-4aa2-84a1-71f590a8227a","input":{"a":{"constant":true,"data":"\\"bundle\\""}},"output":{"a":{}},"metadata":{"position":{"x":-392,"y":-42}}},"swallow":{"id":"ecb16ee2-d81f-4f3f-a241-b007087f5055","input":{"unit":{}},"output":{},"metadata":{"position":{"x":-242,"y":-46}}},"graphbundle":{"id":"13d738b9-401d-43c9-852f-e9611545f5bc","input":{"graph":{},"opt":{}},"output":{"graph":{},"bundle":{}}},"delaypush":{"id":"8cd6c706-d1d4-11ea-92e1-47577abb9ccf","input":{"ms":{"constant":true,"data":"1000"},"a":{"constant":true,"data":"{}"}},"output":{"a":{}}},"stringify":{"id":"2b24877a-3221-4288-9f59-efbf29964368","input":{"a":{}},"output":{"str":{}}},"parse":{"id":"69323dab-b425-4a2a-b1c7-d7efc723327a","input":{"str":{}},"output":{"a":{}}},"frombundle":{"id":"de2d42e2-4fca-4a3f-8783-3585c546e88b","input":{"bundle":{}},"output":{"graph":{}}}},"merges":{"0":{"set":{"input":{"obj":true}},"localstorage":{"output":{"_self":true}}},"1":{"set":{"input":{"data":true}},"stringify":{"output":{"str":true}}},"2":{"get":{"input":{"obj":true}},"localstorage0":{"output":{"_self":true}}},"3":{"parse":{"input":{"str":true}},"get":{"output":{"value":true}}},"4":{"root":{"output":{"graph":true}},"graphbundle":{"input":{"graph":true}}},"5":{"spark":{"output":{"a":true}},"get":{"input":{"name":true}}},"6":{"swallow":{"input":{"unit":true}},"get":{"output":{"_self":true}}},"7":{"stringify":{"input":{"a":true}},"graphbundle":{"output":{"bundle":true}}},"8":{"delaypush":{"output":{"a":true}},"graphbundle":{"input":{"opt":true}}},"9":{"frombundle":{"input":{"bundle":true}},"parse":{"output":{"a":true}}},"10":{"frombundle":{"output":{"graph":true}},"root":{"input":{"graph":true}}}},"render":true,"component":{"subComponents":{"root":{"children":[]}},"children":["root"],"defaultWidth":420,"defaultHeight":420},"metadata":{"icon":null,"description":"","complexity":49,"tags":["platform","core","component"]},"id":"e1b6acd3-69cd-4edb-8e3e-6c78ffd28b49","type":"`U`&`G`","system":true,"specs":{}},"8aee8e9f-a132-46de-a0c7-17f8035b1898":{"name":"logo","inputs":{"style":{"plug":{"0":{"unitId":"svg","pinId":"style"}},"metadata":{"position":{"0":{"x":-143,"y":216}}},"type":"object"},"pathStyle":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"metadata":{"position":{"0":{"x":1,"y":-26}}},"type":"object"}},"outputs":{},"units":{"svgpath":{"id":"60bc7930-8982-11ea-8b24-cf97a783bb32","input":{"style":{"metadata":{"position":{"x":99,"y":-107}}},"d":{"constant":true,"data":"\'M2,36.00000000000001 A6,6,1,1,0,2,35.99900000000001z M2,36.00000000000001 A6,6,1,1,0,2,35.99900000000001zM14,36.00000000000001 L24,36.00000000000001M24,36 A24,24,1,1,0,24,35.999z M24,36 A24,24,1,1,0,24,35.999zM82,36 A6,6,1,1,0,82,35.999zM82,36 L72,36\'","metadata":{"position":{"x":124,"y":-127}}},"fillRule":{"ignored":false,"constant":true,"data":"\'evenodd\'","metadata":{"position":{"x":125,"y":-163}}}},"output":{},"metadata":{"position":{"x":255,"y":-121}}},"svg":{"id":"98c279fc-7f5e-11ea-b9e4-f772f9f0bed1","input":{"style":{"data":"{userSelect:\'none\'}","metadata":{"position":{"x":-123,"y":198}}},"viewBox":{"ignored":false,"constant":true,"data":"\'0 0 96 72\'","metadata":{"position":{"x":-123,"y":160}}}},"output":{},"metadata":{"position":{"x":10,"y":179}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{"metadata":{"position":{"x":20,"y":-47}}},"default":{"constant":true,"data":"{fill:\'currentColor\'}","metadata":{"position":{"x":14,"y":-81}}}},"output":{"a":{}},"metadata":{"position":{"x":63,"y":-70}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"svgpath":{"input":{"style":true}}}},"component":{"subComponents":{"svgpath":{"children":[]},"svg":{"children":["svgpath"],"width":285,"height":268}},"children":["svg"],"defaultWidth":120,"defaultHeight":120},"metadata":{"complexity":50,"tags":["platform","core","component"],"position":{"merge":{"0":{"x":117,"y":-84}}}},"id":"8aee8e9f-a132-46de-a0c7-17f8035b1898","type":"`U`&`G`","system":true,"render":true},"0d9605e4-f4f2-4141-a7f0-1f090c88230f":{"name":"min max slider","inputs":{"max":{"plug":{"0":{"unitId":"max","pinId":"value"},"1":{"mergeId":"6"},"2":{"mergeId":"7"}},"type":"number","metadata":{"position":{"0":{"x":-364,"y":-6},"1":{"x":-120,"y":62},"2":{"x":-138,"y":-133}}}},"min":{"plug":{"0":{"mergeId":"8"},"lmxgapmoa":{"unitId":"min","pinId":"value"},"ehxxshptb":{"mergeId":"9"}},"type":"number","metadata":{"position":{"0":{"x":176,"y":-115},"lmxgapmoa":{"x":384,"y":-9},"ehxxshptb":{"x":118,"y":86}}}},"value":{"plug":{"0":{"unitId":"slider","pinId":"value"},"iwqrfsvcw":{"unitId":"numberinput","pinId":"value"}},"type":"number","metadata":{"position":{"0":{"x":35,"y":-176},"iwqrfsvcw":{"x":-37,"y":122}}}}},"outputs":{"slider":{"plug":{"0":{"unitId":"slider","pinId":"_self"}},"ref":true,"defaultIgnored":true}},"units":{"numberinput":{"id":"9bc56564-ef4e-11ea-939a-27ae3feb321e","input":{"value":{"metadata":{"position":{"x":-45,"y":91}}},"style":{"ignored":true,"metadata":{"position":{"x":-80,"y":84}}},"min":{"ignored":false},"max":{"ignored":false}},"output":{},"metadata":{"position":{"x":7,"y":47}}},"slider":{"id":"e06518cf-9edf-430b-8751-74c486e407aa","input":{"style":{"ignored":true,"metadata":{"position":{"x":79,"y":-135}}},"value":{"metadata":{"position":{"x":44,"y":-146}}},"min":{"ignored":false},"max":{"ignored":false}},"output":{},"metadata":{"position":{"x":14,"y":-105}}},"oninput":{"id":"b345c410-b1ee-11ea-b725-0b9ed734d65f","input":{"element":{}},"output":{"event":{}},"metadata":{"position":{"x":91,"y":6}}},"setvalue":{"id":"ad68ca8e-ff63-467d-a770-3e6a7490f7fb","input":{"element":{},"value":{}},"output":{},"metadata":{"position":{"x":122,"y":-81}}},"oninput0":{"id":"b345c410-b1ee-11ea-b725-0b9ed734d65f","input":{"element":{}},"output":{"event":{}},"metadata":{"position":{"x":-100,"y":-81}}},"setvalue0":{"id":"ad68ca8e-ff63-467d-a770-3e6a7490f7fb","input":{"element":{},"value":{}},"output":{},"metadata":{"position":{"x":-59,"y":1}}},"max":{"id":"9bc56564-ef4e-11ea-939a-27ae3feb321e","input":{"value":{"data":"100","metadata":{"position":{"x":-335,"y":-21}}},"style":{"ignored":true,"metadata":{"position":{"x":-294,"y":-65}}},"min":{"ignored":true,"metadata":{"position":{"x":-298,"y":20}}},"max":{"ignored":true,"metadata":{"position":{"x":-340,"y":-46}}}},"output":{},"metadata":{"position":{"x":-240,"y":-22}}},"oninput1":{"id":"b345c410-b1ee-11ea-b725-0b9ed734d65f","input":{"element":{}},"output":{"event":{}},"metadata":{"position":{"x":-182,"y":-77}}},"min":{"id":"9bc56564-ef4e-11ea-939a-27ae3feb321e","input":{"value":{"metadata":{"position":{"x":353,"y":-1}}},"style":{"ignored":true,"metadata":{"position":{"x":338,"y":-41}}},"min":{"ignored":true,"metadata":{"position":{"x":297,"y":44}}},"max":{"ignored":true,"metadata":{"position":{"x":355,"y":28}}}},"output":{},"metadata":{"component":{"width":120,"height":45},"position":{"x":258,"y":-2}}},"oninput2":{"id":"b345c410-b1ee-11ea-b725-0b9ed734d65f","input":{"element":{}},"output":{"event":{}},"metadata":{"position":{"x":166,"y":42}}},"row":{"id":"ad5a2fcc-fdee-11ea-a34f-77e9c48dbe57","input":{"style":{"metadata":{"position":{"x":-117,"y":192}}}},"output":{},"metadata":{"position":{"x":-256,"y":192}}},"column":{"id":"67a6fb5a-feab-11ea-8bd1-a3c19e76592a","input":{"style":{"metadata":{"position":{"x":145,"y":226}}}},"output":{},"metadata":{"position":{"x":238,"y":226}}},"oninput3":{"id":"b345c410-b1ee-11ea-b725-0b9ed734d65f","input":{"element":{}},"output":{"event":{}},"metadata":{"position":{"x":-152,"y":23}}},"oninput4":{"id":"b345c410-b1ee-11ea-b725-0b9ed734d65f","input":{"element":{}},"output":{"event":{}},"metadata":{"position":{"x":206,"y":-59}}}},"merges":{"0":{"oninput":{"input":{"element":true}},"numberinput":{"output":{"_self":true}},"setvalue0":{"input":{"element":true}}},"1":{"setvalue":{"input":{"element":true}},"slider":{"output":{"_self":true}},"oninput0":{"input":{"element":true}}},"2":{"setvalue0":{"input":{"value":true}},"oninput0":{"output":{"event":true}}},"3":{"max":{"output":{"_self":true}},"oninput1":{"input":{"element":true}},"oninput3":{"input":{"element":true}}},"4":{"oninput2":{"input":{"element":true}},"min":{"output":{"_self":true}},"oninput4":{"input":{"element":true}}},"5":{"setvalue":{"input":{"value":true}},"oninput":{"output":{"event":true}}},"6":{"numberinput":{"input":{"max":true}},"oninput3":{"output":{"event":true}}},"7":{"oninput1":{"output":{"event":true}},"slider":{"input":{"max":true}}},"8":{"oninput4":{"output":{"event":true}},"slider":{"input":{"min":true}}},"9":{"oninput2":{"output":{"event":true}},"numberinput":{"input":{"min":true}}}},"component":{"subComponents":{"numberinput":{"children":[]},"slider":{"children":[]},"max":{"children":[]},"min":{"children":[],"width":120,"height":45},"row":{"children":["min","numberinput","max"]},"column":{"children":["slider","row"],"width":278,"height":85}},"children":["column"],"defaultWidth":210,"defaultHeight":120},"metadata":{"icon":"sliders","complexity":94,"tags":["platform","core","component"],"position":{"merge":{"2":{"x":-73,"y":-44},"5":{"x":114,"y":-36},"6":{"x":-98,"y":42},"7":{"x":-132,"y":-101},"8":{"x":160,"y":-89},"9":{"x":111,"y":56}}}},"id":"0d9605e4-f4f2-4141-a7f0-1f090c88230f","type":"`U`&`C`&`G`","system":true,"render":true},"3a56b714-36d3-4a0a-b641-001db6f774e8":{"name":"mirror","units":{"defaultvideo":{"id":"68ee3bf2-7d57-4828-92ac-1070e988ffe7","input":{"style":{"constant":true},"controls":{"ignored":false,"constant":true,"data":"false"},"opt":{"constant":true,"data":"{audio:false}"}},"output":{},"metadata":{"component":{"width":260.117431640625,"height":194.74407958984375}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{transform:\'scaleX(-1)\'}"}},"output":{"a":{}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"defaultvideo":{"input":{"style":true}}}},"inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"type":"object"}},"outputs":{"video":{"plug":{"0":{"unitId":"defaultvideo","pinId":"video"}},"ref":true,"type":"`C`&`V`","defaultIgnored":true}},"metadata":{"icon":"video","description":"","complexity":47,"tags":["platform","core","component"]},"component":{"slots":[["defaultvideo","default"]],"subComponents":{"defaultvideo":{"children":[]}},"children":["defaultvideo"],"defaultWidth":260,"defaultHeight":195},"id":"3a56b714-36d3-4a0a-b641-001db6f774e8","type":"`U`&`G`","system":true,"render":true},"f27cae4e-fea8-11ea-b91e-db41e114c426":{"name":"random color div","inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"type":"object","metadata":{"position":{"0":{"x":-2,"y":55}},"examples":["{}","{opacity:\\"0.5\\"}","{width:\'100px\',height:\'100px\'}"]}}},"outputs":{},"units":{"randombgcolortag":{"id":"051d4600-42e5-403b-b12e-eb58ae78ef0b","input":{"any":{"constant":true,"data":"null","metadata":{"position":{"x":-112,"y":-26}}}},"output":{"{bc}":{}},"metadata":{"position":{"x":-61,"y":-24}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{"metadata":{"position":{"x":5,"y":28}}},"default":{}},"output":{"a":{}},"metadata":{"position":{"x":42,"y":1}}},"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{"style":{}},"output":{},"metadata":{"position":{"x":190,"y":3}}}},"merges":{"0":{"randombgcolortag":{"output":{"{bc}":true}},"mergedefault":{"input":{"default":true}}},"1":{"div":{"input":{"style":true}},"mergedefault":{"output":{"a":true}}}},"component":{"slots":[["div","default"]],"subComponents":{"div":{"width":120,"height":120,"children":[]}},"children":["div"],"defaultWidth":120,"defaultHeight":120},"metadata":{"icon":"square","description":"div with a random background color","complexity":88,"tags":["platform","core","component"],"position":{"merge":{"0":{"x":-9,"y":-15},"1":{"x":94,"y":2}}}},"id":"f27cae4e-fea8-11ea-b91e-db41e114c426","type":"`U`&`C`&`G`&`V`&`J`","system":true,"render":true},"5f162826-e925-408f-8eb2-7984ef14c420":{"name":"random color div 100px","inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}}}},"outputs":{},"units":{"randomcolordiv":{"id":"f27cae4e-fea8-11ea-b91e-db41e114c426","input":{"style":{}},"output":{},"metadata":{"position":{"x":73,"y":-1}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{width:\\"100px\\",height:\'100px\'}"}},"output":{"a":{}},"metadata":{"position":{"x":-74,"y":0}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"randomcolordiv":{"input":{"style":true}}}},"metadata":{"icon":"square","description":"100px div with random background color","complexity":91,"tags":["platform","core","component"]},"id":"5f162826-e925-408f-8eb2-7984ef14c420","component":{"slots":[["randomcolordiv","default"]],"subComponents":{"randomcolordiv":{"children":[]}},"children":["randomcolordiv"],"defaultWidth":120,"defaultHeight":120},"type":"`U`&`G`&`C`","render":true,"system":true},"9aba266d-5200-4281-b477-749c9b3c5815":{"name":"root","inputs":{"disabled":{"plug":{"0":{"unitId":"io","pinId":"disabled"}},"type":"boolean","metadata":{"position":{"0":{"x":-208,"y":27}}},"defaultIgnored":true},"fullwindow":{"plug":{"0":{"unitId":"io","pinId":"fullwindow"}},"type":"boolean","metadata":{"position":{"0":{"x":-234,"y":-81}}},"defaultIgnored":true},"style":{"plug":{"0":{"unitId":"io","pinId":"style"}},"type":"object","metadata":{"position":{"0":{"x":-250,"y":-35}}}},"graph":{"plug":{"0":{"unitId":"graph","pinId":"graph"}},"type":"`G`","metadata":{"position":{"0":{"x":-310,"y":67}}}}},"outputs":{"graph":{"plug":{"0":{"unitId":"io","pinId":"graph"}},"ref":true,"type":"`U`&`G`","defaultIgnored":true}},"units":{"io":{"id":"6f267de2-b02c-11ea-b55c-db553f4c6c45","input":{"disabled":{"data":"false","metadata":{"position":{"x":-221,"y":5}}},"style":{"metadata":{"position":{"x":-223,"y":-24}}},"graph":{},"fullwindow":{"metadata":{"position":{"x":-222,"y":-55}}},"frame":{"metadata":{"position":{"x":317,"y":-6}}}},"output":{"graph":{"ignored":false}},"metadata":{"position":{"x":-10,"y":-6}}},"graph":{"id":"324b9c5e-5810-11eb-bf7c-634b3bb07f8c","input":{"graph":{"metadata":{"position":{"x":-286,"y":53}}}},"output":{},"metadata":{"position":{"x":-237,"y":42}}},"guikeyboard":{"id":"96d5d60e-85eb-11eb-ba90-7fc42ab0a641","input":{},"output":{},"metadata":{"position":{"x":583,"y":-280}}}},"merges":{"0":{"io":{"input":{"graph":true}},"graph":{"output":{"graph":true}}}},"component":{"slots":[["io","default"]],"subComponents":{"io":{"children":["guikeyboard"],"childSlot":{"guikeyboard":"2"}},"guikeyboard":{"children":[]}},"children":["io"],"defaultWidth":420,"defaultHeight":420},"metadata":{"icon":"chalkboard","description":"io + cloud","complexity":253,"tags":["platform","core","component"]},"id":"9aba266d-5200-4281-b477-749c9b3c5815","type":"`U`&`G`","system":true,"render":true},"552e4ce2-5db3-448b-bc06-bf7de256a5a5":{"name":"rotating div","units":{"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710"},"requestanimationframe":{"id":"b949221c-8227-4178-bde4-5e8754a7ed39"},"sin":{"id":"b9f90a95-1bfc-4897-9068-2560743821a3"},"cos":{"id":"62af44dc-17d6-459a-b95f-3b8ce5b48856"},"range":{"id":"29e43ad7-be5e-437f-8f0f-2df996c8b89c","input":{"a":{"constant":true,"data":"0"},"b":{"constant":true,"data":"360"}}},"degtorad":{"id":"3a138358-cc25-45e3-a0ce-bbe54445736f"},"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'left\'"}}},"tag0":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'top\'"}}},"multiply":{"id":"872be100-f4dc-4246-8eea-6e3da31137b7","input":{"b":{"constant":false}}},"multiply0":{"id":"872be100-f4dc-4246-8eea-6e3da31137b7","input":{"b":{"constant":false}}},"merge3":{"id":"23b844e3-1cef-4ff7-9e2a-bb3ffb613055","input":{"a":{"constant":true,"data":"{backgroundColor:\'lightgreen\',position:\'absolute\',borderRadius:\'50%\',width:\'60px\',height:\'60px\'}"}}},"memory":{"id":"49e11645-c25d-4bf7-923d-56817f67b686"},"px":{"id":"87c7b2b8-c17e-11ea-ba3a-072aa030b89f","input":{"n":{}},"output":{"px":{}}},"px0":{"id":"87c7b2b8-c17e-11ea-ba3a-072aa030b89f","input":{"n":{}},"output":{"px":{}}},"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf","input":{"a":{},"b":{}},"output":{"a + b":{}}},"add0":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf","input":{"a":{},"b":{}},"output":{"a + b":{}}},"default":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89","input":{"a":{},"d":{"constant":true,"data":"100"}},"output":{"a":{}}},"default0":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89","input":{"a":{},"d":{"constant":true,"data":"100"}},"output":{"a":{}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":false}},"output":{"a":{}}},"default1":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89","input":{"a":{},"d":{"constant":true,"data":"100"}},"output":{"a":{}}}},"merges":{"0":{"degtorad":{"output":{"rad":true}},"cos":{"input":{"a":true}},"sin":{"input":{"a":true}}},"1":{"sin":{"output":{"sin(a)":true}},"multiply0":{"input":{"a":true}}},"2":{"cos":{"output":{"cos(a)":true}},"multiply":{"input":{"a":true}}},"3":{"tag0":{"output":{"kv":true}},"merge3":{"input":{"b":true}}},"4":{"tag":{"output":{"kv":true}},"merge3":{"input":{"c":true}}},"5":{"px0":{"output":{"px":true}},"tag0":{"input":{"v":true}}},"6":{"px":{"output":{"px":true}},"tag":{"input":{"v":true}}},"7":{"add":{"input":{"b":true}},"multiply":{"output":{"a \xD7 b":true}}},"8":{"add0":{"input":{"b":true}},"multiply0":{"output":{"a \xD7 b":true}}},"9":{"default0":{"output":{"a":true}},"add":{"input":{"a":true}}},"10":{"add":{"output":{"a + b":true}},"px":{"input":{"n":true}}},"11":{"default":{"output":{"a":true}},"add0":{"input":{"a":true}}},"12":{"add0":{"output":{"a + b":true}},"px0":{"input":{"n":true}}},"13":{"memory":{"input":{"a":true}},"requestanimationframe":{"output":{"a":true}}},"14":{"mergedefault":{"output":{"a":true}},"div":{"input":{"style":true}}},"15":{"range":{"output":{"i":true}},"requestanimationframe":{"input":{"a":true}}},"16":{"memory":{"output":{"a":true}},"degtorad":{"input":{"angle":true}}},"17":{"merge3":{"output":{"abc":true}},"mergedefault":{"input":{"default":true}}},"18":{"default1":{"output":{"a":true}},"multiply":{"input":{"b":true}},"multiply0":{"input":{"b":true}}}},"metadata":{"icon":null,"description":"no description","editor":{"on":true},"complexity":103,"tags":["platform","core","component"]},"component":{"defaultWidth":260,"defaultHeight":260,"subComponents":{"div":{"width":260,"height":260,"children":[]}},"children":["div"]},"inputs":{"cy":{"plug":{"0":{"unitId":"default","pinId":"a"}},"type":"number"},"cx":{"plug":{"0":{"unitId":"default0","pinId":"a"}},"type":"number"},"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"type":"object"},"R":{"plug":{"0":{"unitId":"default1","pinId":"a"}},"type":"number"}},"outputs":{},"id":"552e4ce2-5db3-448b-bc06-bf7de256a5a5","type":"`U`&`C`&`G`","system":true,"render":true},"a9201738-f134-4268-a5ba-b6f88a4d9f92":{"name":"round switch","inputs":{"value":{"plug":{"0":{"unitId":"switch","pinId":"value"}},"metadata":{"position":{"0":{"x":107,"y":-7}}}}},"outputs":{"value":{"plug":{"0":{"unitId":"switch","pinId":"value"}},"type":"boolean","metadata":{"position":{"0":{"x":89,"y":47}}}}},"units":{"switch":{"id":"6253bf76-2e85-11eb-9f59-3703abfd39c7","input":{"style":{"data":"{height:\\"30px\\",width:\\"60px\\",border:\\"1px solid currentColor\\",borderRadius:\\"30px\\",cursor:\\"pointer\\"}","constant":true,"metadata":{"position":{"x":-82,"y":26}}},"sliderStyle":{"ignored":false,"data":"{borderRadius:\\"50%\\",backgroundColor:\\"currentColor\\"}","constant":true,"metadata":{"position":{"x":79,"y":-41}}},"onColor":{"data":"\\"#00aa11\\"","constant":true,"metadata":{"position":{"x":-82,"y":-41}}},"offColor":{"data":"\\"#ff6666\\"","constant":true,"metadata":{"position":{"x":-85,"y":-7}}},"value":{"metadata":{"position":{"x":83,"y":-7}}}},"output":{"value":{"metadata":{"position":{"x":79,"y":26}}}},"metadata":{"position":{"x":-1,"y":-7}}}},"merges":{},"render":true,"component":{"subComponents":{"switch":{"children":[]}},"children":["switch"],"defaultWidth":100,"defaultHeight":50},"metadata":{"icon":null,"description":"","complexity":95,"tags":["platform","core","component"]},"id":"a9201738-f134-4268-a5ba-b6f88a4d9f92","type":"`U`&`G`","system":true},"b792e421-1c0b-40fc-ac33-87c5c2bbac2a":{"name":"scroll snap align start","inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"ref":false}},"outputs":{},"units":{"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","memory":{"input":{"style":{"_register":{"scroll-snap-align":"start"},"_invalid":false,"_constant":true,"_ignored":false,"_idle":false}},"output":{},"memory":{"__buffer":[],"_forwarding":false,"_backwarding":false,"_forwarding_empty":false,"_state":{"style":{"scroll-snap-align":"start"}}}},"metadata":{"position":{"x":73,"y":-1}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{\\"scroll-snap-align\\":\'start\'}"}},"output":{"a":{}},"metadata":{"position":{"x":-74,"y":0}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"div":{"input":{"style":true}}}},"render":true,"component":{"slots":[["div","default"]],"subComponents":{"div":{"children":[]}},"children":["div"],"defaultWidth":300,"defaultHeight":420},"metadata":{"icon":null,"description":"","complexity":30,"tags":["platform","core","component"]},"id":"b792e421-1c0b-40fc-ac33-87c5c2bbac2a","system":true},"cef90fb7-bfcb-4f9d-8828-df6e68278601":{"name":"scroll snap y div","inputs":{},"outputs":{},"units":{"white-spacenowrap":{"id":"09072f81-7c8e-4bce-80ad-6d9a821a2897","input":{"style":{}},"output":{},"metadata":{"position":{"x":251,"y":-124}}},"inheritdisplayinline-block":{"id":"e16f9ac0-29c3-4ae7-a2e7-2aa6b98bcc1b","input":{"style":{}},"output":{},"metadata":{"position":{"x":86,"y":194}}},"inheritscroll-snapy":{"id":"5867c5b6-24f2-4bd7-90b3-4e44615bc42c","input":{"style":{}},"output":{},"metadata":{"position":{"x":-93,"y":-179}}},"inheritscroll-snap-alignstart":{"id":"b62c0058-9183-435f-baae-c51a3ee1855b","input":{"style":{}},"output":{},"metadata":{"position":{"x":-247,"y":107}}}},"merges":{},"render":true,"component":{"slots":[["inheritscroll-snap-alignstart","default"]],"subComponents":{"white-spacenowrap":{"children":["inheritdisplayinline-block"]},"inheritdisplayinline-block":{"children":["inheritscroll-snap-alignstart"]},"inheritscroll-snapy":{"children":["white-spacenowrap"]},"inheritscroll-snap-alignstart":{"children":[]}},"children":["inheritscroll-snapy"],"defaultWidth":180,"defaultHeight":270},"metadata":{"icon":null,"description":"","complexity":63,"tags":["platform","core","component"]},"id":"cef90fb7-bfcb-4f9d-8828-df6e68278601","type":"`U`&`G`","system":true},"6bdd7a40-e465-42ae-8219-b428d7d57aea":{"name":"slider 360","inputs":{},"outputs":{"value":{"plug":{"0":{"unitId":"slider","pinId":"value"}},"metadata":{"position":{"0":{"x":90,"y":-19}}},"type":"any"},"slider":{"plug":{"0":{"unitId":"slider","pinId":"_self"}},"ref":true,"type":"`C`&`V`","defaultIgnored":true}},"units":{"slider":{"id":"e06518cf-9edf-430b-8751-74c486e407aa","input":{"min":{"ignored":false,"constant":true,"data":"0","metadata":{"position":{"x":-127,"y":7}}},"style":{"ignored":true,"metadata":{"position":{"x":31,"y":-20}}},"value":{"ignored":true,"metadata":{"position":{"x":-114,"y":-18}}},"max":{"ignored":false,"constant":true,"data":"360","metadata":{"position":{"x":60,"y":26}}}},"output":{"value":{"metadata":{"position":{"x":60,"y":-12}}}},"metadata":{"position":{"x":-33,"y":7}}}},"merges":{},"metadata":{"icon":"sliders","description":"360 slider current value","complexity":39,"tags":["platform","core","component"]},"id":"6bdd7a40-e465-42ae-8219-b428d7d57aea","component":{"defaultWidth":120,"defaultHeight":30,"subComponents":{"slider":{"children":[]}},"children":["slider"]},"type":"`U`&`G`","system":true,"render":true},"063ee2df-eeb6-4cd9-8516-9201e6e282ca":{"name":"slider 360 rad","inputs":{},"outputs":{"rad":{"plug":{"0":{"unitId":"degtorad","pinId":"rad"}},"metadata":{"position":{"0":{"x":73,"y":-1}}},"type":"number"}},"units":{"slider360":{"id":"6bdd7a40-e465-42ae-8219-b428d7d57aea","input":{},"output":{"value":{}},"metadata":{"position":{"x":-147,"y":0}}},"degtorad":{"id":"3a138358-cc25-45e3-a0ce-bbe54445736f","input":{"angle":{}},"output":{"rad":{"metadata":{"position":{"x":47,"y":0}}}},"metadata":{"position":{"x":-2,"y":0}}}},"merges":{"hgtjcyd":{"degtorad":{"input":{"angle":true}},"slider360":{"output":{"value":true}}}},"metadata":{"icon":"sliders","description":"360 rad slider current value","complexity":55,"position":{"merge":{"hgtjcyd":{"x":-52,"y":0}}},"tags":["platform","core","component"]},"id":"063ee2df-eeb6-4cd9-8516-9201e6e282ca","component":{"subComponents":{"slider360":{"children":[]}},"children":["slider360"],"defaultWidth":120,"defaultHeight":30},"type":"`U`&`G`","system":true,"render":true},"58f72eed-f3d6-4972-9d13-b1bebdd98e61":{"name":"stack box","inputs":{},"outputs":{},"units":{"wrap":{"id":"454aaff2-cd74-4f6e-baf2-631bb32e7a6b","input":{"component":{"constant":true,"data":"${unit:{id:\'dc546440-13ca-4ebf-8831-c28138c7efc6\'}}"}},"output":{"parent":{}},"metadata":{"position":{"x":50,"y":-114}}},"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{"style":{"constant":true,"data":"{whiteSpace:\\"nowrap\\"}"}},"output":{},"metadata":{"position":{"x":-51,"y":113}}}},"merges":{},"component":{"slots":[["wrap","default"]],"subComponents":{"wrap":{"children":[]},"div":{"children":["wrap"]}},"children":["div"],"defaultWidth":180,"defaultHeight":300},"metadata":{"icon":"square","complexity":42,"description":"horizontal scroll container","tags":["platform","core","component"]},"id":"58f72eed-f3d6-4972-9d13-b1bebdd98e61","type":"`U`&`G`&`C`","render":true,"system":true},"79c37c2e-4a2b-445f-af75-5599cc6bf31c":{"type":"`U`&`G`&`C`","name":"svg path","units":{"path":{"id":"60bc7930-8982-11ea-8b24-cf97a783bb32","input":{"style":{"metadata":{"position":{"x":111,"y":-80}},"ignored":false},"d":{},"fillRule":{"ignored":true,"metadata":{"position":{"x":111,"y":-112}}}},"output":{},"metadata":{"position":{"x":194,"y":-14}}},"svg":{"id":"98c279fc-7f5e-11ea-b9e4-f772f9f0bed1","input":{"style":{},"viewBox":{"ignored":true}},"output":{},"metadata":{"position":{"x":-111,"y":-190}}}},"merges":{},"inputs":{"d":{"plug":{"0":{"unitId":"path","pinId":"d"}},"ref":false},"style":{"plug":{"0":{"unitId":"path","pinId":"style"}},"ref":false}},"outputs":{},"metadata":{"icon":"question","description":"","tags":["platform","core","component","svg"]},"render":true,"component":{"subComponents":{"path":{"children":[],"childSlot":{}},"svg":{"children":["path"],"childSlot":{}}},"children":["svg"],"defaultWidth":200,"defaultHeight":200},"id":"79c37c2e-4a2b-445f-af75-5599cc6bf31c","system":true},"e08596c5-fdb2-464f-802b-f52217295c04":{"type":"`U`&`G`&`C`","name":"svg text","units":{"svg":{"id":"98c279fc-7f5e-11ea-b9e4-f772f9f0bed1","input":{"style":{"metadata":{"position":{"x":-65,"y":-181}}},"viewBox":{"ignored":true,"metadata":{"position":{"x":-64,"y":-210}}}},"output":{},"metadata":{"position":{"x":69,"y":-181}}},"text":{"id":"49ef122e-b4d1-11ea-b45e-b73d8ee2aae8","input":{"style":{"metadata":{"position":{"x":108,"y":27}}},"value":{"constant":true,"data":"\\"SVG\\"","metadata":{"position":{"x":106,"y":61}}},"x":{"constant":true,"data":"\\"50%\\"","metadata":{"position":{"x":-107,"y":61}}},"y":{"constant":true,"data":"\\"50%\\"","metadata":{"position":{"x":-109,"y":27}}},"dx":{"metadata":{"position":{"x":-107,"y":-6}}},"dy":{"constant":true,"metadata":{"position":{"x":106,"y":-6}}}},"output":{},"metadata":{"position":{"x":0,"y":27}}}},"merges":{},"inputs":{},"outputs":{},"metadata":{"icon":"question","description":"","tags":["platform","core","component","svg"]},"render":true,"component":{"subComponents":{"svg":{"children":["text"],"childSlot":{}},"text":{"children":[],"childSlot":{}}},"children":["svg"],"defaultWidth":200,"defaultHeight":200},"id":"e08596c5-fdb2-464f-802b-f52217295c04","system":true},"6253bf76-2e85-11eb-9f59-3703abfd39c7":{"name":"switch","inputs":{"value":{"plug":{"0":{"unitId":"checkbox","pinId":"value"}},"type":"boolean","metadata":{"position":{"0":{"x":133,"y":44}}}},"style":{"plug":{"0":{"unitId":"mergedefault0","pinId":"a"}},"type":"object","metadata":{"position":{"0":{"x":263,"y":-101}}}},"offColor":{"plug":{"0":{"unitId":"default","pinId":"a"}},"type":"string","metadata":{"position":{"0":{"x":-33,"y":-182}}}},"onColor":{"plug":{"0":{"unitId":"default0","pinId":"a"}},"type":"string","metadata":{"position":{"0":{"x":-187,"y":-86}}}},"sliderStyle":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"defaultIgnored":true,"metadata":{"position":{"0":{"x":-196,"y":183}}}}},"outputs":{"value":{"plug":{"0":{"mergeId":"2"}},"type":"boolean","metadata":{"position":{"0":{"x":17,"y":25}}}}},"units":{"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{"style":{},"attr":{"ignored":true,"metadata":{"position":{"x":296,"y":-76}}}},"output":{},"metadata":{"position":{"x":352,"y":-35},"component":{"width":100,"height":50}}},"div0":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{"style":{},"attr":{"ignored":true,"metadata":{"position":{"x":-384,"y":124}}}},"output":{},"metadata":{"component":{"width":100,"height":50},"position":{"x":-301,"y":124}}},"mergedefault0":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{"metadata":{"position":{"x":255,"y":-79}}},"default":{"constant":false,"data":"{position:\'relative\',display:\'flex\',flexDirection:\'row\',padding:\'4px\',gap:\'4px\',backgroundColor:\'#1f1f1f\',cursor:\'pointer\'}"}},"output":{"a":{}},"metadata":{"position":{"x":214,"y":-54}}},"invert":{"id":"f55ab180-3fd5-44c4-915f-f40e6bbcc481","input":{"a":{},"c":{},"b":{}},"output":{"b":{},"a":{}},"metadata":{"position":{"x":-12,"y":-27}}},"default":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89","input":{"a":{"constant":false,"metadata":{"position":{"x":-27,"y":-159}}},"d":{"constant":true,"data":"\\"#1f1f1f\\"","metadata":{"position":{"x":55,"y":-156}}}},"output":{"a":{}},"metadata":{"position":{"x":13,"y":-132}}},"default0":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89","input":{"a":{"metadata":{"position":{"x":-163,"y":-83}}},"d":{"constant":true,"data":"\\"#d1d1d1\\"","metadata":{"position":{"x":-151,"y":-115}}}},"output":{"a":{}},"metadata":{"position":{"x":-112,"y":-86}}},"setbackgroundcolor0":{"id":"0ca54c4f-148e-49e5-bedf-d24276200f66","input":{"obj":{"constant":true,"data":"{position:\\"relative\\",display:\\"flex\\",flexDirection:\\"row\\",padding:\\"4px\\",gap:\\"4px\\",backgroundColor:\\"#00aa11\\",cursor:\\"pointer\\"}","metadata":{"position":{"x":139,"y":-86}}},"value":{}},"output":{"obj":{}},"metadata":{"position":{"x":102,"y":-58}}},"setbackgroundcolor":{"id":"0ca54c4f-148e-49e5-bedf-d24276200f66","input":{"obj":{"constant":true,"data":"{position:\\"absolute\\",top:\\"3px\\",left:\\"0\\",width:\\"calc(50% - 6px)\\",height:\\"calc(100% - 6px)\\",backgroundColor:\\"#ff6666\\",cursor:\\"pointer\\"}","metadata":{"position":{"x":-165,"y":8}}},"value":{}},"output":{"obj":{}},"metadata":{"position":{"x":-114,"y":11}}},"pickset":{"id":"9a85acf3-c40b-4e82-b04c-68c3dd1b0d4b","input":{"c":{},"b":{"constant":true,"data":"\\"3px\\"","metadata":{"position":{"x":0,"y":99}}},"a":{"constant":true,"data":"\\"calc(50% + 3px)\\"","metadata":{"position":{"x":-23,"y":127}}},"key":{"constant":true,"data":"\\"left\\"","metadata":{"position":{"x":-67,"y":127}}},"obj":{}},"output":{"obj":{}},"metadata":{"position":{"x":-47,"y":85}}},"checkbox":{"id":"096fc4ca-edd2-11ea-8266-37b634a3ee0b","input":{"value":{"ignored":false,"metadata":{"position":{"x":109,"y":46}}},"attr":{"ignored":false,"data":"{tabIndex:-1}","metadata":{"position":{"x":112,"y":74}},"constant":true},"style":{"constant":true,"data":"{opacity:\\"0\\"}","metadata":{"position":{"x":100,"y":101}}}},"output":{"value":{}},"metadata":{"position":{"x":60,"y":62}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{"metadata":{"position":{"x":-193,"y":159}}},"default":{}},"output":{"a":{}},"metadata":{"position":{"x":-159,"y":127}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"div0":{"input":{"style":true}}},"1":{"mergedefault":{"input":{"default":true}},"pickset":{"output":{"obj":true}}},"2":{"pickset":{"input":{"c":true}},"invert":{"input":{"c":true}},"checkbox":{"output":{"value":true}}},"3":{"mergedefault0":{"output":{"a":true}},"div":{"input":{"style":true}}},"4":{"default":{"output":{"a":true}},"invert":{"input":{"a":true}}},"5":{"default0":{"output":{"a":true}},"invert":{"input":{"b":true}}},"6":{"setbackgroundcolor":{"input":{"value":true}},"invert":{"output":{"b":true}}},"7":{"setbackgroundcolor0":{"input":{"value":true}},"invert":{"output":{"a":true}}},"8":{"mergedefault0":{"input":{"default":true}},"setbackgroundcolor0":{"output":{"obj":true}}},"9":{"setbackgroundcolor":{"output":{"obj":true}},"pickset":{"input":{"obj":true}}}},"component":{"subComponents":{"div":{"children":["div0","checkbox"],"childSlot":{"div0":"default","checkbox":"default"}},"div0":{"children":[]},"checkbox":{"children":[]}},"children":["div"],"defaultWidth":100,"defaultHeight":50},"metadata":{"complexity":54,"icon":"toggle-right","description":"select between \\"on\\" or \\"off\\"","position":{"merge":{"0":{"x":-214,"y":124},"1":{"x":-105,"y":108},"2":{"x":-1,"y":38},"3":{"x":265,"y":-40},"4":{"x":0,"y":-81},"5":{"x":-62,"y":-59},"6":{"x":-64,"y":-9},"7":{"x":46,"y":-43},"8":{"x":159,"y":-54},"9":{"x":-84,"y":50}}},"tags":["platform","core","component"]},"id":"6253bf76-2e85-11eb-9f59-3703abfd39c7","type":"`U`&`G`","system":true,"render":true},"360c691a-ac2d-11eb-95ec-b3053bd928da":{"name":"text area to speech","inputs":{"style":{"plug":{"0":{"unitId":"textarea","pinId":"style"}},"type":"object","metadata":{"position":{"0":{"x":-331,"y":-10}}}},"value":{"plug":{"0":{"unitId":"textarea","pinId":"value"}},"type":"string","metadata":{"position":{"0":{"x":-331,"y":74}}}},"a":{"plug":{"0":{"unitId":"default","pinId":"a"}},"metadata":{"position":{"0":{"x":249,"y":-53}}},"type":"number"}},"outputs":{},"units":{"texttospeech":{"id":"6db29a62-2035-4cfc-a9d3-03444a8bc2b8","input":{"message":{},"voice":{"constant":false,"metadata":{"position":{"x":200,"y":-33}}}},"output":{},"metadata":{"position":{"x":76,"y":-10}}},"onenterkeydown":{"id":"de45f6d0-7504-4061-b4ab-5d1ee902a0cb","input":{"element":{}},"output":{"a":{}},"metadata":{"position":{"x":-44,"y":62}}},"textarea":{"id":"83ec6688-b80b-4ef2-861f-14245ef392c0","input":{"value":{"metadata":{"position":{"x":-315,"y":51}}},"style":{"metadata":{"position":{"x":-315,"y":13}}}},"output":{},"metadata":{"position":{"x":-182,"y":32}}},"getvalue":{"id":"d74f12c2-1868-11eb-8136-238c1b1a727f","input":{"obj":{},"any":{}},"output":{"value":{}},"metadata":{"position":{"x":-32,"y":13}}},"default":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89","input":{"a":{"metadata":{"position":{"x":228,"y":-35}}},"d":{"constant":true,"data":"1","metadata":{"position":{"x":228,"y":1}}}},"output":{"a":{}},"metadata":{"position":{"x":183,"y":-16}}}},"merges":{"0":{"onenterkeydown":{"input":{"element":true}},"textarea":{"output":{"_self":true}},"getvalue":{"input":{"obj":true}}},"1":{"onenterkeydown":{"output":{"a":true}},"getvalue":{"input":{"any":true}}},"2":{"texttospeech":{"input":{"message":true}},"getvalue":{"output":{"value":true}}},"ntxmggphc":{"default":{"output":{"a":true}},"texttospeech":{"input":{"voice":true}}}},"component":{"subComponents":{"textarea":{"children":[]}},"children":["textarea"],"defaultWidth":200,"defaultHeight":150},"metadata":{"complexity":54,"icon":"align-left","description":"speech text on enter","tags":["platform","core","component"],"position":{"merge":{"1":{"x":0,"y":47},"2":{"x":22,"y":-2},"ntxmggphc":{"x":130,"y":-14}}}},"id":"360c691a-ac2d-11eb-95ec-b3053bd928da","type":"`U`&`G`","system":true,"render":true},"9988a56e-6bee-46c8-864c-e351d84bc7e2":{"name":"text box","inputs":{"value":{"plug":{"0":{"unitId":"text","pinId":"value"}},"type":"string"},"style":{"plug":{"0":{"unitId":"box","pinId":"style"}},"type":"object"}},"outputs":{"div":{"plug":{"0":{"unitId":"box","pinId":"_self"}},"defaultIgnored":true,"ref":true,"component":true}},"units":{"box":{"id":"9eba84b6-d2ca-47e6-9195-8208dbb880bc","input":{"style":{}},"output":{},"metadata":{"component":{"width":232.120361328125,"height":187.77685546875},"position":{"x":-21,"y":-94}}},"text":{"id":"87f99b85-1c24-4e5b-a903-dd27230f4092","input":{"value":{}},"output":{},"metadata":{"position":{"x":20,"y":93}}}},"merges":{},"component":{"subComponents":{"box":{"children":["text"]},"text":{"children":[]}},"children":["box"],"defaultWidth":240,"defaultHeight":180},"metadata":{"complexity":52,"tags":["platform","core","component"]},"id":"9988a56e-6bee-46c8-864c-e351d84bc7e2","type":"`U`&`G`&`C`","system":true,"render":true},"b12c858a-26ea-42a7-a435-0ee50ac34fbf":{"name":"text fit-content","inputs":{"value":{"plug":{"0":{"unitId":"text","pinId":"value"}},"type":"string"},"style":{"plug":{"0":{"unitId":"fit-content","pinId":"style"}},"type":"object"}},"outputs":{"fit-content":{"plug":{"0":{"unitId":"fit-content","pinId":"_self"}},"defaultIgnored":true,"ref":true,"component":true}},"units":{"fit-content":{"id":"4d0092bf-0e68-49e5-8fe1-6b0c79da571c","input":{"style":{}},"output":{},"metadata":{"component":{"width":232.120361328125,"height":187.77685546875},"position":{"x":-21,"y":-94}}},"text":{"id":"87f99b85-1c24-4e5b-a903-dd27230f4092","input":{"value":{}},"output":{},"metadata":{"position":{"x":20,"y":93}}}},"merges":{},"component":{"subComponents":{"fit-content":{"children":["text"]},"text":{"children":[]}},"children":["fit-content"],"defaultWidth":180,"defaultHeight":120},"metadata":{"complexity":52,"tags":["platform","core","component"]},"id":"b12c858a-26ea-42a7-a435-0ee50ac34fbf","type":"`U`&`G`&`C`","system":true,"render":true},"8543c796-caee-4e35-bffb-0065532afdf9":{"type":"`U`&`G`&`C`","name":"text option","units":{"option":{"id":"c0d13c03-9b10-4a6f-a79f-66294d10aae6","input":{"value":{},"style":{}},"output":{},"metadata":{"position":{"x":26,"y":56}}},"text":{"id":"87f99b85-1c24-4e5b-a903-dd27230f4092","input":{"value":{}},"output":{},"metadata":{"position":{"x":-27,"y":-57}}}},"merges":{},"inputs":{"value":{"plug":{"0":{"unitId":"option","pinId":"value"}},"ref":false},"style":{"plug":{"0":{"unitId":"option","pinId":"style"}},"ref":false},"text":{"plug":{"0":{"unitId":"text","pinId":"value"}},"ref":false}},"outputs":{},"metadata":{"icon":"question","description":"","tags":["platform","core","component"]},"render":true,"component":{"subComponents":{"option":{"children":["text"],"childSlot":{}},"text":{"children":[],"childSlot":{}}},"children":["option"],"defaultWidth":180,"defaultHeight":90},"id":"8543c796-caee-4e35-bffb-0065532afdf9","system":true},"30995775-fa18-4474-813e-17186d3f20aa":{"type":"`U`&`G`&`C`","name":"text select","units":{"onchange":{"id":"7f25303a-b1ee-11ea-bab2-5f81e27c8466","input":{"element":{}},"output":{"event":{}}},"removeallchildren":{"id":"2c7507c4-02bc-11eb-88e5-8bc78086a76f","input":{"any":{},"parent":{}},"output":{}},"appendchild":{"id":"ee4715e6-f479-11ea-b231-bf95a7f38a99","input":{"parent":{},"child":{}},"output":{"at":{"ignored":true}},"metadata":{"position":{"x":45,"y":79}}},"identity":{"id":"260d774e-bc89-4027-aa92-cb1985fb312b","input":{"a":{"constant":false}},"output":{"a":{}}},"plan":{"id":"36329d25-218d-48a5-a06c-1e0525da504f","input":{"a":{}},"output":{"0":{},"1":{}}},"setinput":{"id":"43b43afd-9e7d-44ba-aef7-6e9db4ed8744","input":{"unit":{"constant":true,"data":"${unit:{id:\\"8543c796-caee-4e35-bffb-0065532afdf9\\"}}"},"name":{"constant":true,"data":"\\"text\\""},"data":{}},"output":{"unit":{}},"metadata":{"position":{"x":20,"y":-12}}},"foreach":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","input":{"a":{}},"output":{"a[i]":{},"a":{"ignored":true},"i":{"ignored":true},"test":{"ignored":true}},"metadata":{"position":{"x":-141,"y":83}}},"select":{"id":"6c7cd7d1-c8a0-4317-9c8c-ba781f150729","input":{"value":{},"style":{}},"output":{"value":{"ignored":true}},"metadata":{"position":{"x":75,"y":-152}}}},"merges":{"0":{"setinput":{"input":{"data":true}},"foreach":{"output":{"a[i]":true}}},"1":{"appendchild":{"input":{"child":true}},"setinput":{"output":{"unit":true}}},"2":{"onchange":{"input":{"element":true}},"removeallchildren":{"input":{"parent":true}},"appendchild":{"input":{"parent":true}},"select":{"output":{"_self":true}}},"3":{"plan":{"output":{"1":true}},"foreach":{"input":{"a":true}}},"4":{"removeallchildren":{"input":{"any":true}},"plan":{"output":{"0":true}}}},"inputs":{"list":{"plug":{"0":{"unitId":"identity","pinId":"a"},"1":{"unitId":"plan","pinId":"a"}},"ref":false,"metadata":{"examples":["[\'banana\',\'apple\',\'orange\']"]}},"value":{"plug":{"0":{"unitId":"select","pinId":"value"}},"ref":false,"type":"string","metadata":{"examples":["\'banana\'","\'apple\'","\'orange\'"]}},"style":{"plug":{"0":{"unitId":"select","pinId":"style"}},"ref":false}},"outputs":{"value":{"plug":{"0":{"unitId":"onchange","pinId":"event"}},"ref":false}},"metadata":{"icon":"question","description":"","tags":["platform","core","component"]},"render":true,"component":{"subComponents":{"select":{"children":[],"childSlot":{}}},"children":["select"],"defaultWidth":180,"defaultHeight":45},"id":"30995775-fa18-4474-813e-17186d3f20aa","system":true},"4ba86ad5-899b-4e8d-b5ce-3589dcfeaefd":{"name":"text span","inputs":{"style":{"plug":{"0":{"unitId":"span","pinId":"style"}},"type":"object"},"value":{"plug":{"0":{"unitId":"text","pinId":"value"}},"type":"string"}},"outputs":{},"units":{"span":{"id":"c711d540-9de3-437e-854a-b59491af3cf8","input":{"style":{}},"output":{},"metadata":{"position":{"x":44,"y":-58}}},"text":{"id":"87f99b85-1c24-4e5b-a903-dd27230f4092","input":{"value":{}},"output":{},"metadata":{"position":{"x":-45,"y":57}}}},"merges":{},"metadata":{"complexity":42,"tags":["platform","core","component"]},"component":{"children":["span"],"subComponents":{"span":{"children":["text"]},"text":{"children":[]}},"defaultWidth":60,"defaultHeight":60},"id":"4ba86ad5-899b-4e8d-b5ce-3589dcfeaefd","type":"`U`&`G`","system":true,"render":true},"dae754da-d773-41b9-bbc8-f72b83b6f03d":{"name":"toggle value","units":{"getvalue":{"id":"d74f12c2-1868-11eb-8136-238c1b1a727f","input":{"obj":{},"any":{}},"output":{"value":{}}},"not":{"id":"7d02d638-a311-4ea8-a0c0-d45baf739e0d","input":{"a":{}},"output":{"!a":{}}},"setvalue":{"id":"ad68ca8e-ff63-467d-a770-3e6a7490f7fb","input":{"element":{},"value":{}},"output":{}}},"merges":{"0":{"not":{"input":{"a":true}},"getvalue":{"output":{"value":true}}},"1":{"setvalue":{"input":{"element":true}},"getvalue":{"input":{"obj":true}}},"fewowjo":{"setvalue":{"input":{"value":true}},"not":{"output":{"!a":true}}}},"inputs":{"state":{"plug":{"0":{"mergeId":"1"}},"type":"`U`","ref":true},"any":{"plug":{"0":{"unitId":"getvalue","pinId":"any"}},"type":"any"}},"outputs":{},"metadata":{"icon":"toggle-left","description":"...","complexity":18,"tags":["platform","core","component"]},"id":"dae754da-d773-41b9-bbc8-f72b83b6f03d","type":"`U`&`G`","system":true,"render":false},"aab688f1-77e1-4eb1-9d17-550dcc1440a7":{"name":"translating div","units":{"rangebounce":{"id":"343f1382-4d2d-4022-b4b3-139e40ab6627","input":{"b":{"constant":true,"data":"140"},"a":{"constant":true,"data":"0"}}},"requestanimationframe":{"id":"b949221c-8227-4178-bde4-5e8754a7ed39"},"memory":{"id":"49e11645-c25d-4bf7-923d-56817f67b686"},"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'left\'"}}},"merge":{"id":"60bdba6d-c670-430f-be72-6f39cf4e8453","input":{"b":{"constant":false},"a":{"constant":true,"data":"{position:\'absolute\',backgroundColor:\'chartreuse\',width:\'60px\',height:\'60px\'}"}}},"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710"},"px":{"id":"87c7b2b8-c17e-11ea-ba3a-072aa030b89f","input":{"n":{}},"output":{"px":{}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{}},"output":{"a":{}}},"default":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89","input":{"a":{},"d":{"constant":true,"data":"0"}},"output":{"a":{}}},"default0":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89","input":{"a":{},"d":{"constant":true,"data":"140"}},"output":{"a":{}}}},"merges":{"sxphnyptw":{"rangebounce":{"output":{"i":true}},"requestanimationframe":{"input":{"a":true}}},"nhgecfu":{"tag":{"output":{"kv":true}},"merge":{"input":{"b":true}}},"ymctkl":{"px":{"input":{"n":true}},"memory":{"output":{"a":true}}},"gutvaxyeb":{"px":{"output":{"px":true}},"tag":{"input":{"v":true}}},"hegpulsxl":{"mergedefault":{"input":{"default":true}},"merge":{"output":{"ab":true}}},"nnaifm":{"div":{"input":{"style":true}},"mergedefault":{"output":{"a":true}}},"yyznop":{"default0":{"output":{"a":true}},"rangebounce":{"input":{"b":true}}},"jnbxumenh":{"default":{"output":{"a":true}},"rangebounce":{"input":{"a":true}}},"nbehealht":{"requestanimationframe":{"output":{"a":true}},"memory":{"input":{"a":true}}}},"component":{"defaultWidth":200,"defaultHeight":60,"subComponents":{"div":{"width":200,"height":60,"children":[]}},"children":["div"]},"metadata":{"icon":null,"description":"no description","editor":{"on":true,"lit":false,"edit":false},"complexity":101,"tags":["platform","core","component"]},"inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"type":"object"},"a":{"plug":{"0":{"unitId":"default","pinId":"a"}},"type":"number"},"b":{"plug":{"0":{"unitId":"default0","pinId":"a"}},"type":"number"}},"outputs":{},"id":"aab688f1-77e1-4eb1-9d17-550dcc1440a7","type":"`U`&`C`&`G`","system":true,"render":true},"b6dc1d8f-2818-4a01-9e8e-47c6405c6f5a":{"name":"char","inputs":{"style":{"plug":{"0":{"unitId":"span","pinId":"style"}},"type":"object"},"value":{"plug":{"0":{"unitId":"text","pinId":"value"}},"type":"string"}},"outputs":{},"units":{"span":{"id":"c711d540-9de3-437e-854a-b59491af3cf8","input":{"style":{}},"output":{},"metadata":{"position":{"x":44,"y":-58}}},"text":{"id":"87f99b85-1c24-4e5b-a903-dd27230f4092","input":{"value":{}},"output":{},"metadata":{"position":{"x":-45,"y":57}}}},"merges":{},"metadata":{"complexity":42,"tags":["platform","core","component"]},"component":{"children":["span"],"subComponents":{"span":{"children":["text"]},"text":{"children":[]}},"defaultWidth":60,"defaultHeight":60},"id":"b6dc1d8f-2818-4a01-9e8e-47c6405c6f5a","type":"`U`&`G`","system":true,"render":true},"01791e01-bfeb-47d0-952a-8dd32a72d1fb":{"name":"vertical split","inputs":{},"outputs":{"a":{"plug":{"0":{"mergeId":"9"}}}},"units":{"box":{"id":"9eba84b6-d2ca-47e6-9195-8208dbb880bc","input":{"style":{}},"output":{},"metadata":{"position":{"x":-216,"y":-168}}},"box0":{"id":"9eba84b6-d2ca-47e6-9195-8208dbb880bc","input":{"style":{}},"output":{},"metadata":{"position":{"x":599,"y":52}}},"box1":{"id":"9eba84b6-d2ca-47e6-9195-8208dbb880bc","input":{"style":{}},"output":{},"metadata":{"position":{"x":-478,"y":110}}},"ondragdelta":{"id":"ae5c6f18-9ff9-11eb-986e-6fd93ceb151c","input":{"element":{}},"output":{"x":{},"y":{},"test":{}},"metadata":{"position":{"x":-80,"y":-130}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{"constant":false},"default":{"constant":true,"data":"{height:\'100%\',background:\'red\'}"}},"output":{"a":{}},"metadata":{"position":{"x":-300,"y":106}}},"tagwidth":{"id":"c13fec8e-a253-11eb-bbe5-6bbcbf28b3ef","input":{"width":{}},"output":{"{width}":{}},"metadata":{"position":{"x":-92,"y":72}}},"numbertodecimal":{"id":"a6ab9464-303a-48a4-8b5f-0cd515ab7b8f","input":{"n":{}},"output":{"str":{}},"metadata":{"position":{"x":111,"y":30}}},"flexrow":{"id":"ad5a2fcc-fdee-11ea-a34f-77e9c48dbe57","input":{"style":{}},"output":{},"metadata":{"position":{"x":-714,"y":-251}}},"mergedefault0":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{height:\'100%\',background:\'blue\',left:\'0\',position:\'relative\'}"}},"output":{"a":{}},"metadata":{"position":{"x":421,"y":53}}},"divide":{"id":"158d85eb-28b8-4355-b637-28a7ec751233","input":{"a":{},"b":{}},"output":{"a \xF7 b":{}},"metadata":{"position":{"x":15,"y":-178}}},"multiply":{"id":"872be100-f4dc-4246-8eea-6e3da31137b7","input":{"a":{},"b":{"constant":true,"data":"100"}},"output":{"a \xD7 b":{}},"metadata":{"position":{"x":129,"y":-46}}},"subtract":{"id":"fa94b179-00e3-4ed1-814e-7938324a833f","input":{"a":{"constant":true,"data":"100"},"b":{"constant":false,"data":"100"}},"output":{"a - b":{}},"metadata":{"position":{"x":212,"y":7}}},"tagwidth0":{"id":"c13fec8e-a253-11eb-bbe5-6bbcbf28b3ef","input":{"width":{}},"output":{"{width}":{}},"metadata":{"position":{"x":317,"y":32}}},"numbertodecimal0":{"id":"a6ab9464-303a-48a4-8b5f-0cd515ab7b8f","input":{"n":{}},"output":{"str":{}},"metadata":{"position":{"x":170,"y":224}}},"untitled":{"id":"72a186fe-a18b-44ca-b36b-c014ee44003a","metadata":{"position":{"x":10,"y":60}}},"px":{"id":"87c7b2b8-c17e-11ea-ba3a-072aa030b89f","input":{"n":{}},"output":{"px":{}},"metadata":{"position":{"x":42,"y":273}}},"clamp":{"id":"9ef9ff5b-6a1c-444b-8fc0-bfebbec6f4fd","input":{"max":{"constant":true,"data":"1"},"min":{"constant":true,"data":"0"},"a":{}},"output":{"a":{}},"metadata":{"position":{"x":122,"y":-150}}},"memory":{"id":"49e11645-c25d-4bf7-923d-56817f67b686","input":{"a":{}},"output":{"a":{}},"metadata":{"position":{"x":-195,"y":82}}}},"merges":{"0":{"ondragdelta":{"input":{"element":true}},"box":{"output":{"_self":true}}},"1":{"mergedefault":{"output":{"a":true}},"box1":{"input":{"style":true}}},"2":{"mergedefault":{"input":{"a":true}},"memory":{"output":{"a":true}}},"3":{"numbertodecimal":{"input":{"n":true}},"multiply":{"output":{"a \xD7 b":true}},"subtract":{"input":{"b":true}}},"4":{"numbertodecimal":{"output":{"str":true}},"untitled":{"input":{"a":true}}},"5":{"ondragdelta":{"output":{"x":true}},"divide":{"input":{"a":true}}},"6":{"tagwidth":{"input":{"width":true}},"untitled":{"output":{"ab":true}}},"7":{"mergedefault0":{"output":{"a":true}},"box0":{"input":{"style":true}}},"9":{"divide":{"output":{"a \xF7 b":true}},"clamp":{"input":{"a":true}}},"10":{"subtract":{"output":{"a - b":true}},"tagwidth0":{"input":{"width":true}}},"11":{"tagwidth0":{"output":{"{width}":true}},"mergedefault0":{"input":{"a":true}}},"12":{"multiply":{"input":{"a":true}},"clamp":{"output":{"a":true}}},"13":{"memory":{"input":{"a":true}},"tagwidth":{"output":{"{width}":true}}}},"render":true,"component":{"subComponents":{"box":{"children":[]},"box0":{"children":[]},"box1":{"children":[]},"flexrow":{"children":["box1","box","box0"]}},"children":["flexrow"],"defaultWidth":180,"defaultHeight":270},"metadata":{"icon":null,"description":"","complexity":141,"tags":["platform","core","component"]},"id":"01791e01-bfeb-47d0-952a-8dd32a72d1fb","type":"`U`&`G`","system":true},"09072f81-7c8e-4bce-80ad-6d9a821a2897":{"name":"white-space nowrap","units":{"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{},"metadata":{"component":{"width":120,"height":210}}},"mergedefault":{"id":"304e98ac-bda1-11ea-b416-9746f024148c","input":{"a":{},"default":{"constant":true,"data":"{\'white-space\':\'nowrap\',overflow:\'auto\'}"}},"output":{"a":{}}}},"merges":{"0":{"mergedefault":{"output":{"a":true}},"div":{"input":{"style":true}}}},"inputs":{"style":{"plug":{"0":{"unitId":"mergedefault","pinId":"a"}},"type":"object"}},"outputs":{},"metadata":{"icon":"square","description":"column flexbox","complexity":30,"tags":["platform","core","component"]},"component":{"slots":[["div","default"]],"defaultWidth":180,"defaultHeight":270,"subComponents":{"div":{"children":[]}},"children":["div"]},"id":"09072f81-7c8e-4bce-80ad-6d9a821a2897","type":"`U`&`G`&`C`","system":true,"render":true},"ecb16ee2-d81f-4f3f-a241-b007087f5055":{"name":"swallow","inputs":{"unit":{"plug":{"0":{"unitId":"catch","pinId":"unit"}},"ref":true}},"outputs":{},"units":{"catch":{"id":"2520668c-b279-11ea-ace3-5b84eb02bd7f","input":{"unit":{}},"output":{"err":{"ignored":true}},"metadata":{"position":{"x":0,"y":0}}}},"merges":{},"render":false,"component":{},"metadata":{"icon":"alert-circle","description":"throw away any caught error","complexity":5,"tags":["platform","core","control"]},"type":"`U`&`G`","id":"ecb16ee2-d81f-4f3f-a241-b007087f5055","system":true},"839af244-d1d3-11ea-89c0-073ae59ae4f1":{"name":"delay push random tag color","units":{"tagcolor":{"id":"8a2d42bf-fc83-4696-9e0c-cf8c6c4641ae","input":{"any":{"data":"0","constant":true}},"output":{"{color}":{}}},"delaypush":{"id":"8cd6c706-d1d4-11ea-92e1-47577abb9ccf","input":{"ms":{},"a":{}},"output":{"a":{}}}},"merges":{"fajbgvoyh":{"delaypush":{"input":{"a":true}},"tagcolor":{"output":{"{color}":true}}}},"inputs":{"ms":{"plug":{"0":{"unitId":"delaypush","pinId":"ms"}},"type":"number"}},"outputs":{"tag":{"plug":{"0":{"unitId":"delaypush","pinId":"a"}},"type":"object"}},"metadata":{"icon":"tag","description":"delay push random {color}","complexity":71,"tags":["platform","core"]},"id":"839af244-d1d3-11ea-89c0-073ae59ae4f1","type":"`U`&`G`","system":true},"dcd6a544-e386-4e1c-9282-043da9585957":{"type":"`U`&`G`","name":"download graph","units":{"stringify":{"id":"ee184ea6-3c80-4119-919e-290620aafab0"},"graphbundle":{"id":"13d738b9-401d-43c9-852f-e9611545f5bc","input":{"graph":{},"opt":{}},"output":{"bundle":{}},"metadata":{"position":{"x":-8,"y":10}}},"downloadtext":{"id":"b5ab65ce-4306-4a46-8d3c-36b6c29b1c60","input":{"text":{},"name":{"constant":false},"mimetype":{"constant":true,"data":"\\"application/json\\""},"charset":{"constant":true,"data":"\\"utf-8\\""}},"output":{},"metadata":{"position":{"x":198,"y":-15}}}},"merges":{"0":{"stringify":{"input":{"json":true}},"graphbundle":{"output":{"bundle":true}}},"1":{"stringify":{"output":{"string":true}},"downloadtext":{"input":{"text":true}}}},"inputs":{"graph":{"plug":{"0":{"unitId":"graphbundle","pinId":"graph"}},"ref":true},"opt":{"plug":{"0":{"unitId":"graphbundle","pinId":"opt"}},"ref":false},"name":{"plug":{"0":{"unitId":"downloadtext","pinId":"name"}},"ref":false}},"outputs":{},"metadata":{"icon":"download","description":"download `graph` bundle as a json file","complexity":11,"tags":["platform","core","download"]},"id":"dcd6a544-e386-4e1c-9282-043da9585957","system":true},"69ee5ea3-660c-479e-9cff-da9dc33a2b0a":{"name":"drag accumulate","inputs":{"test":{"plug":{"0":{"unitId":"ifelse","pinId":"b"}}},"a":{"plug":{"0":{"unitId":"ifelse","pinId":"a"}}},"init":{"plug":{"0":{"unitId":"iterate0","pinId":"init"}}}},"outputs":{"a + \u0394":{"plug":{"0":{"unitId":"add0","pinId":"a + b"}}}},"units":{"iterate":{"id":"8a2b756a-25e4-11eb-860d-1f34c850b992","input":{"next":{},"init":{"constant":true,"data":"0"}},"output":{"current":{},"local":{"ignored":true}},"metadata":{"position":{"x":51,"y":60}}},"iterate0":{"id":"8a2b756a-25e4-11eb-860d-1f34c850b992","input":{"next":{},"init":{}},"output":{"current":{},"local":{}},"metadata":{"position":{"x":-110,"y":-26}}},"ifelse":{"id":"92760dd2-ecd9-46db-851f-70950a5b6bc3","input":{"a":{},"b":{}},"output":{"if":{},"else":{}},"metadata":{"position":{"x":94,"y":-37}}},"zero":{"id":"618898d6-1167-11eb-bef9-cb053e09c21b","input":{"any":{}},"output":{"0":{}},"metadata":{"position":{"x":37,"y":-8}}},"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf","input":{"a":{},"b":{}},"output":{"a + b":{}},"metadata":{"position":{"x":-18,"y":-57}}},"add0":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf","input":{"a":{},"b":{}},"output":{"a + b":{}},"metadata":{"position":{"x":-57,"y":64}}}},"merges":{"0":{"ifelse":{"output":{"else":true}},"add":{"input":{"b":true}},"zero":{"input":{"any":true}}},"1":{"add":{"output":{"a + b":true}},"iterate0":{"input":{"next":true}}},"2":{"add":{"input":{"a":true}},"iterate0":{"output":{"local":true}}},"3":{"ifelse":{"output":{"if":true}},"iterate":{"input":{"next":true}},"zero":{"output":{"0":true}}},"4":{"add0":{"input":{"a":true}},"iterate":{"output":{"current":true}}},"5":{"add0":{"input":{"b":true}},"iterate0":{"output":{"current":true}}}},"component":{},"metadata":{"complexity":26,"tags":["platform","core"]},"id":"69ee5ea3-660c-479e-9cff-da9dc33a2b0a","system":true},"97907f46-9bc5-11eb-8353-1f208d12d9dc":{"name":"add random unit","inputs":{"graph":{"plug":{"0":{"unitId":"addunit","pinId":"graph"}},"ref":true,"type":"`U`"},"id":{"plug":{"0":{"mergeId":"1"}},"type":"string"}},"outputs":{},"units":{"randomclass":{"id":"96c788b0-9bc1-11eb-931a-7312c12cb4c3","input":{"any":{}},"output":{"class":{}},"metadata":{"position":{"x":46,"y":0}}},"addunit":{"id":"b80d4b5a-40e9-11eb-a2bb-1777d47bf9ae","input":{"graph":{},"id":{}},"output":{},"metadata":{"position":{"x":-47,"y":-1}}}},"merges":{"0":{"randomclass":{"output":{"class":true}},"addunit":{"input":{"class":true}}},"1":{"randomclass":{"input":{"any":true}},"addunit":{"input":{"id":true}}}},"metadata":{"icon":null,"description":"","complexity":46,"tags":["platform","core","graph"]},"id":"97907f46-9bc5-11eb-8353-1f208d12d9dc","type":"`U`&`G`","system":true},"470428a2-b4b4-4866-a1e9-2f130772cd3b":{"name":"editor | div","inputs":{},"outputs":{"graph":{"plug":{"0":{"unitId":"editor","pinId":"graph"}},"ref":true,"type":"`U`&`G`","defaultIgnored":true}},"units":{"editor":{"id":"e80c912e-7508-11ea-966b-436805345ff0","input":{"style":{"constant":true,"data":"{borderRight:\'1px solid currentColor\'}"},"graph":{"ignored":false},"disabled":{},"fullwindow":{"ignored":true},"frame":{}},"output":{},"metadata":{"position":{"x":7,"y":127},"component":{"width":360.1918640136719,"height":441.29931640625}}},"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{"style":{}},"output":{},"metadata":{"position":{"x":-342,"y":67},"component":{"width":246.2730712890625,"height":329.615966796875}}},"row":{"id":"ad5a2fcc-fdee-11ea-a34f-77e9c48dbe57","input":{"style":{}},"output":{},"metadata":{"position":{"x":334,"y":-196},"component":{"width":376.8758239746094,"height":223.14797973632812}}}},"merges":{"0":{"editor":{"input":{"frame":true}},"div":{"output":{"_self":true}}}},"metadata":{"icon":"atom-alt","complexity":104,"tags":["platform","core","graph"]},"component":{"slots":[["editor","default"],["div","default"]],"children":["row"],"subComponents":{"editor":{"children":[]},"div":{"children":[]},"row":{"children":["editor","div"]}},"defaultWidth":420,"defaultHeight":300},"id":"470428a2-b4b4-4866-a1e9-2f130772cd3b","type":"`U`&`G`","system":true,"render":true},"fc9cd968-7e0d-4540-9f0e-d16afeb0d3b3":{"name":"graph | graph","inputs":{"graph":{"plug":{"0":{"unitId":"default","pinId":"a"}},"metadata":{"position":{"0":{"x":59,"y":-245}}}}},"outputs":{},"units":{"graph":{"id":"e80c912e-7508-11ea-966b-436805345ff0","input":{"style":{"constant":true,"data":"{position:\'relative\'}","metadata":{"position":{"x":87,"y":55}}},"graph":{},"disabled":{"metadata":{"position":{"x":86,"y":24}}},"fullwindow":{"ignored":true,"metadata":{"position":{"x":92,"y":-28}}},"frame":{"metadata":{"position":{"x":87,"y":-6}}}},"output":{},"metadata":{"position":{"x":238,"y":6},"component":{"width":242.77862548828125,"height":238.30770874023438}}},"graph1":{"id":"324b9c5e-5810-11eb-bf7c-634b3bb07f8c","input":{"graph":{}},"output":{"graph":{"metadata":{"position":{"x":68,"y":-53}}}},"metadata":{"position":{"x":70,"y":-111}}},"default":{"id":"329920ae-7e91-11ea-988e-1b12488c8b89","input":{"a":{"metadata":{"position":{"x":72,"y":-221}}},"d":{"constant":true,"data":"${unit:{id:\'e33e7dcd-9715-461c-a474-15ed2bda899e\'}}","metadata":{"position":{"x":162,"y":-209}}}},"output":{"a":{}},"metadata":{"position":{"x":115,"y":-200}}},"graph0":{"id":"e80c912e-7508-11ea-966b-436805345ff0","input":{"style":{"constant":true,"data":"{position:\'relative\'}","metadata":{"position":{"x":-249,"y":-13}}},"graph":{},"disabled":{"metadata":{"position":{"x":-251,"y":-46}}},"fullwindow":{"ignored":true,"metadata":{"position":{"x":-248,"y":-103}}},"frame":{"metadata":{"position":{"x":-249,"y":-79}}}},"output":{},"metadata":{"component":{"width":236.420654296875,"height":240.87225341796875},"position":{"x":-100,"y":-46}}},"div":{"id":"66698a97-15c5-4602-9925-11a1aeb03710","input":{"style":{"constant":true,"data":"{width:\'1px\',position:\'relative\',background:\'currentColor\'}","metadata":{"position":{"x":150,"y":234}}}},"output":{},"metadata":{"position":{"x":244,"y":234}}},"row":{"id":"ad5a2fcc-fdee-11ea-a34f-77e9c48dbe57","input":{"style":{"metadata":{"position":{"x":-285,"y":405}}}},"output":{},"metadata":{"position":{"x":-147,"y":405},"component":{"width":210,"height":120}}}},"merges":{"0":{"default":{"output":{"a":true}},"graph1":{"input":{"graph":true}}},"1":{"graph1":{"output":{"graph":true}},"graph0":{"input":{"graph":true}},"graph":{"input":{"graph":true}}}},"component":{"slots":[["graph","default"],["graph0","default"]],"subComponents":{"graph":{"children":[]},"graph0":{"children":[]},"div":{"children":[]},"row":{"children":["graph0","div","graph"]}},"children":["row"],"defaultWidth":420,"defaultHeight":420},"metadata":{"icon":"atom-alt","complexity":114,"tags":["platform","core","graph"],"position":{"merge":{"0":{"x":89,"y":-158}}}},"id":"fc9cd968-7e0d-4540-9f0e-d16afeb0d3b3","system":true,"render":true},"f752dcd6-ac2c-11eb-9a69-3fada4450230":{"name":"graph spec to clipboard","inputs":{"any":{"plug":{"0":{"unitId":"spec","pinId":"any"}},"type":"any"},"graph":{"plug":{"0":{"unitId":"spec","pinId":"unit"}},"ref":true,"type":"`G`"}},"outputs":{},"units":{"texttoclipboard":{"id":"0b5a71c6-5c43-4e55-a29c-27d9ff7ed43a","input":{"text":{}},"output":{},"metadata":{"position":{"x":99,"y":-1}}},"stringify":{"id":"ee184ea6-3c80-4119-919e-290620aafab0","input":{"json":{"ignored":false}},"output":{"string":{}},"metadata":{"position":{"x":1,"y":-1}}},"spec":{"id":"ae1f7fc0-d6e7-489c-94ed-dee71c68dbb7","input":{"unit":{},"any":{}},"output":{"spec":{"ignored":false}},"metadata":{"position":{"x":-101,"y":0}}}},"merges":{"0":{"stringify":{"input":{"json":true}},"spec":{"output":{"spec":true}}},"1":{"texttoclipboard":{"input":{"text":true}},"stringify":{"output":{"string":true}}}},"component":{},"metadata":{"icon":"brackets-curly","description":"send this graph spec to clipboard","complexity":11,"tags":["platform","core","graph"]},"type":"`U`&`G`","id":"f752dcd6-ac2c-11eb-9a69-3fada4450230","system":true},"ba2363a8-c9b5-4596-b270-9db25ab8463b":{"name":"BMI","units":{"divide":{"id":"158d85eb-28b8-4355-b637-28a7ec751233"},"pow":{"id":"ef4c1d0a-bda1-484e-8fcb-0fdbde195778","input":{"b":{"constant":true,"data":"2"}}}},"merges":{"0":{"divide":{"input":{"b":true}},"pow":{"output":{"a ** b":true}}}},"metadata":{"icon":"scale","description":"weight / height ^ 2","link":"https://en.wikipedia.org/wiki/Body_mass_index","complexity":8,"tags":["platform","core","health"]},"inputs":{"h":{"plug":{"0":{"unitId":"pow","pinId":"a"}},"type":"number"},"m":{"plug":{"0":{"unitId":"divide","pinId":"a"}},"type":"number"}},"outputs":{"bmi":{"plug":{"0":{"unitId":"divide","pinId":"a \xF7 b"}},"type":"number"}},"id":"ba2363a8-c9b5-4596-b270-9db25ab8463b","type":"`U`&`G`","system":true},"6f1388c8-9ad3-44b4-9669-d1386d8a9fc4":{"type":"`U`&`G`","name":"fetch graph","units":{"frombundle":{"id":"de2d42e2-4fca-4a3f-8783-3585c546e88b","input":{"bundle":{}},"output":{"graph":{}},"metadata":{"position":{"x":242,"y":187}}},"fetchJSONbody":{"id":"00a8a078-91bf-4676-aa32-c9cfacdfd527","input":{"url":{},"options":{"constant":false}},"output":{"json":{}},"metadata":{"position":{"x":138,"y":187}}},"merge":{"id":"60bdba6d-c670-430f-be72-6f39cf4e8453","input":{"b":{"constant":false},"a":{"constant":true,"data":"{headers:{accept:\\"application/json\\"}}"}}}},"merges":{"0":{"merge":{"output":{"ab":true}},"fetchJSONbody":{"input":{"options":true}}},"4":{"frombundle":{"input":{"bundle":true}},"fetchJSONbody":{"output":{"json":true}}}},"inputs":{"url":{"plug":{"0":{"unitId":"fetchJSONbody","pinId":"url"}},"ref":false},"options":{"plug":{"0":{"unitId":"merge","pinId":"b"}},"ref":false}},"outputs":{"graph":{"plug":{"0":{"unitId":"frombundle","pinId":"graph"}},"ref":false}},"metadata":{"icon":"send","description":"fetch a JSON definded graph class","tags":["platform","core","http"]},"id":"6f1388c8-9ad3-44b4-9669-d1386d8a9fc4","system":true},"83d43ed1-7515-48cc-b243-612e4aeb6fff":{"name":"is valid email","units":{"test":{"id":"c2fec1e6-b370-4069-bb43-6dab5a78b9ab","input":{"regex":{"constant":true,"data":"\'^[a-zA-Z0-9.!#$%\\\\&amp;\\\\\'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\\\\\\\.[a-zA-Z0-9-]+)*$\'"}}}},"merges":{},"metadata":{"icon":"at-sign","description":"check if email is valid","complexity":5,"tags":["platform","core"]},"inputs":{"email":{"plug":{"0":{"unitId":"test","pinId":"str"}},"functional":true,"type":"string"}},"outputs":{"valid":{"plug":{"0":{"unitId":"test","pinId":"match"}},"type":"boolean"}},"id":"83d43ed1-7515-48cc-b243-612e4aeb6fff","type":"`U`&`G`","system":true},"3a138358-cc25-45e3-a0ce-bbe54445736f":{"name":"deg to rad","units":{"PI":{"id":"3256e26d-8495-4c9d-8998-5b026691231d","input":{"any":{"constant":true,"data":"0"}}},"multiply":{"id":"872be100-f4dc-4246-8eea-6e3da31137b7"},"divide":{"id":"158d85eb-28b8-4355-b637-28a7ec751233","input":{"b":{"constant":true,"data":"180"}}},"remainder":{"id":"c5c05c85-f4c1-4b67-ab85-08b61fe67531","input":{"b":{"constant":true,"data":"360"}}}},"merges":{"0":{"multiply":{"input":{"a":true}},"divide":{"output":{"a \xF7 b":true}}},"1":{"multiply":{"input":{"b":true}},"PI":{"output":{"PI":true}}},"2":{"remainder":{"output":{"a % b":true}},"divide":{"input":{"a":true}}}},"metadata":{"icon":"ruler","description":"convert deg to rad","complexity":14,"tags":["platform","core","math","geometry","trigonometry"]},"inputs":{"angle":{"plug":{"0":{"unitId":"remainder","pinId":"a"}},"type":"number"}},"outputs":{"rad":{"plug":{"0":{"unitId":"multiply","pinId":"a \xD7 b"}},"type":"number"}},"id":"3a138358-cc25-45e3-a0ce-bbe54445736f","type":"`U`&`G`","system":true},"38321611-6cb6-4840-8dff-34fc69347aff":{"type":"`U`&`G`","name":"hypotenuse","units":{"untitled0":{"id":"8e017373-3a2b-4985-b60c-f6f0a94db200","metadata":{"position":{"x":-68,"y":59}}},"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf","input":{"a":{},"b":{}},"output":{"a + b":{}},"metadata":{"position":{"x":15,"y":-1}}},"sqrt":{"id":"530e83d2-1d61-11eb-b472-53e545a06c92","input":{"a":{}},"output":{"\u221Aa":{}},"metadata":{"position":{"x":120,"y":-1}}},"pow2":{"id":"8e017373-3a2b-4985-b60c-f6f0a94db200","metadata":{"position":{"x":-69,"y":-60}}}},"merges":{"0":{"untitled0":{"output":{"a\xB2":true}},"add":{"input":{"a":true}}},"1":{"add":{"input":{"b":true}},"pow2":{"output":{"a\xB2":true}}},"2":{"add":{"output":{"a + b":true}},"sqrt":{"input":{"a":true}}}},"inputs":{"a":{"plug":{"0":{"unitId":"untitled0","pinId":"a"}},"ref":false},"b":{"plug":{"0":{"unitId":"pow2","pinId":"a"}},"ref":false}},"outputs":{"h":{"plug":{"0":{"unitId":"sqrt","pinId":"\u221Aa"}},"ref":false}},"metadata":{"icon":"ruler","description":"hypotenuse `h` for legs `a` and `b`","complexity":14,"tags":["platform","core","math","geometry","trigonometry"]},"system":true,"id":"38321611-6cb6-4840-8dff-34fc69347aff"},"af451707-9400-429f-bb3a-2670d4ce8821":{"name":"point in circle","units":{"mergexy":{"id":"2737cd82-d80b-4d3f-b33d-f00f68361e24"},"sin":{"id":"b9f90a95-1bfc-4897-9068-2560743821a3"},"cos":{"id":"62af44dc-17d6-459a-b95f-3b8ce5b48856"},"multiply":{"id":"872be100-f4dc-4246-8eea-6e3da31137b7","input":{"b":{"constant":false}}},"multiply0":{"id":"872be100-f4dc-4246-8eea-6e3da31137b7","input":{"b":{"constant":false}}},"add":{"id":"6fe452f2-2ec1-4ee2-887d-751c3697e6bf","input":{"b":{"constant":false}}},"subtract":{"id":"fa94b179-00e3-4ed1-814e-7938324a833f","input":{"a":{"constant":false}}}},"merges":{"0":{"multiply0":{"input":{"a":true}},"sin":{"output":{"sin(a)":true}}},"1":{"cos":{"output":{"cos(a)":true}},"multiply":{"input":{"a":true}}},"2":{"add":{"input":{"a":true}},"multiply":{"output":{"a \xD7 b":true}}},"3":{"mergexy":{"input":{"x":true}},"add":{"output":{"a + b":true}}},"4":{"cos":{"input":{"a":true}},"sin":{"input":{"a":true}}},"5":{"mergexy":{"input":{"y":true}},"subtract":{"output":{"a - b":true}}},"6":{"multiply0":{"output":{"a \xD7 b":true}},"subtract":{"input":{"b":true}}},"7":{"multiply0":{"input":{"b":true}},"multiply":{"input":{"b":true}}}},"metadata":{"icon":null,"description":"no description","complexity":33,"tags":["platform","core","math","geometry","trigonometry"]},"inputs":{"rad":{"plug":{"0":{"mergeId":"4"}},"type":"number"},"x":{"plug":{"0":{"unitId":"add","pinId":"b"}},"functional":true,"type":"number"},"y":{"plug":{"0":{"unitId":"subtract","pinId":"a"}},"functional":true,"type":"number"},"r":{"plug":{"0":{"mergeId":"7"}},"type":"number"}},"outputs":{"{x,y}":{"plug":{"0":{"unitId":"mergexy","pinId":"{x,y}"}},"type":"{x:number,y:number}"}},"id":"af451707-9400-429f-bb3a-2670d4ce8821","type":"`U`&`G`","system":true},"8e017373-3a2b-4985-b60c-f6f0a94db200":{"type":"`U`&`G`","name":"pow 2","units":{"pow":{"id":"ef4c1d0a-bda1-484e-8fcb-0fdbde195778","input":{"a":{},"b":{"constant":true,"data":"2"}},"output":{"a ** b":{}}}},"merges":{},"inputs":{"a":{"plug":{"0":{"unitId":"pow","pinId":"a"}},"ref":false}},"outputs":{"a\xB2":{"plug":{"0":{"unitId":"pow","pinId":"a ** b"}},"ref":false}},"metadata":{"icon":"exponential","description":"`a` to the power of 2","complexity":5,"tags":["platform","core","math","power"]},"system":true,"id":"8e017373-3a2b-4985-b60c-f6f0a94db200"},"1b164d72-2c14-4ec2-a1c8-253679a2bf13":{"name":"default audio user media","units":{"getusermedia":{"id":"a6e30b43-9ab4-4206-bfba-3f2129faac30","input":{"opt":{"constant":true,"data":"{video:false,audio:{echoCancellation:true,noiseSuppression:true}}"}},"output":{}}},"merges":{},"inputs":{},"outputs":{"stream":{"plug":{"0":{"unitId":"getusermedia","pinId":"stream"},"ref":true,"type":"`MS`"}}},"metadata":{"icon":"mic","description":"","complexity":14,"tags":["platform","core","media"]},"id":"1b164d72-2c14-4ec2-a1c8-253679a2bf13","type":"`U`&`G`","system":true},"c03c7ef3-0649-4a99-9e9a-858bcaba1307":{"name":"default video user media","inputs":{"opt":{"plug":{"0":{"unitId":"merge","pinId":"b"}}}},"outputs":{"stream":{"plug":{"0":{"unitId":"getusermedia","pinId":"stream"}},"ref":true,"type":"`MS`"}},"units":{"getusermedia":{"id":"a6e30b43-9ab4-4206-bfba-3f2129faac30","input":{"opt":{"constant":false}},"output":{"stream":{}},"metadata":{"position":{"x":51,"y":-1}}},"merge":{"id":"60bdba6d-c670-430f-be72-6f39cf4e8453","input":{"a":{"constant":true,"data":"{video:true,audio:{echoCancellation:true,noiseSuppression:true}}"},"b":{}},"output":{"ab":{}}}},"merges":{"0":{"merge":{"output":{"ab":true}},"getusermedia":{"input":{"opt":true}}}},"component":{},"metadata":{"icon":"video","description":"","complexity":10,"tags":["platform","core","media"]},"id":"c03c7ef3-0649-4a99-9e9a-858bcaba1307","system":true,"specs":{},"type":"`U`&`G`"},"450dac92-395b-4c7b-b8c0-219315c28035":{"name":"merge width height","inputs":{"height":{"plug":{"0":{"unitId":"tagheight","pinId":"height"}},"type":"any"},"width":{"plug":{"0":{"unitId":"tagwidth","pinId":"width"}},"type":"any"}},"outputs":{"{width,height}":{"plug":{"0":{"unitId":"merge","pinId":"ab"}},"type":"object"}},"units":{"tagwidth":{"id":"c13fec8e-a253-11eb-bbe5-6bbcbf28b3ef","input":{"width":{"metadata":{"position":{"x":-70,"y":71}}}},"output":{"{width}":{}},"metadata":{"position":{"x":-22,"y":59}}},"tagheight":{"id":"cd3cc728-a253-11eb-92b7-876e93d80737","input":{"height":{"metadata":{"position":{"x":-70,"y":-72}}}},"output":{"{height}":{}},"metadata":{"position":{"x":-22,"y":-60}}},"merge":{"id":"60bdba6d-c670-430f-be72-6f39cf4e8453","input":{"a":{},"b":{}},"output":{"ab":{"metadata":{"position":{"x":111,"y":-1}}}},"metadata":{"position":{"x":61,"y":-1}}}},"merges":{"0":{"merge":{"input":{"a":true}},"tagheight":{"output":{"{height}":true}}},"1":{"merge":{"input":{"b":true}},"tagwidth":{"output":{"{width}":true}}}},"metadata":{"icon":"brackets-curly","complexity":15,"position":{"merge":{"0":{"x":24,"y":-36},"1":{"x":24,"y":35}}},"tags":["platform","core"]},"id":"450dac92-395b-4c7b-b8c0-219315c28035","type":"`U`&`G`","system":true},"9b2bdc7c-eb5d-11ea-bdb1-1760294f446b":{"name":"on click toggle","units":{"onclick":{"id":"97c94516-add1-11ea-ba72-8f55299b735c","input":{"element":{}},"output":{"event":{}}},"toggle":{"id":"58c50bb2-569f-4b7a-aba3-176d9ac91d5c","input":{"init":{},"toggle":{}},"output":{"value":{}}}},"merges":{"0":{"toggle":{"input":{"toggle":true}},"onclick":{"output":{"event":true}}}},"inputs":{"init":{"plug":{"0":{"unitId":"toggle","pinId":"init"}},"type":"boolean"},"element":{"plug":{"0":{"unitId":"onclick","pinId":"element"}},"type":"`C`","ref":true}},"outputs":{"value":{"plug":{"0":{"unitId":"toggle","pinId":"value"}},"type":"boolean"}},"metadata":{"icon":"square","description":"toggle true/false on click","complexity":18,"tags":["platform","core"]},"id":"9b2bdc7c-eb5d-11ea-bdb1-1760294f446b","type":"`U`&`G`","system":true},"de45f6d0-7504-4061-b4ab-5d1ee902a0cb":{"name":"on enter keydown","inputs":{"element":{"plug":{"0":{"unitId":"onkeydown","pinId":"element"}},"ref":true,"type":"`U`"}},"outputs":{"a":{"plug":{"0":{"unitId":"if","pinId":"a if b"}},"type":"{key:string,keyCode:number,ctrlKey:boolean,shiftKey:boolean,altKey:boolean,metaKey:boolean,repeat:boolean}"}},"units":{"onkeydown":{"id":"02dec0ae-a3b0-11eb-ab4e-afd7066a6476","input":{"element":{"metadata":{"position":{"x":-162,"y":-10}}}},"output":{"event":{}},"metadata":{"position":{"x":-111,"y":-9}}},"equals":{"id":"85204bf6-6692-4686-a785-23127c0594b5","input":{"a":{},"b":{"constant":true,"data":"\'Enter\'","metadata":{"position":{"x":138,"y":-21}}}},"output":{"a = b":{}},"metadata":{"position":{"x":88,"y":-18}}},"propkey":{"id":"8e48bf34-a3b3-11eb-af21-9fff67fa4349","input":{"event":{}},"output":{"key":{}},"metadata":{"position":{"x":-12,"y":-35}}},"if":{"id":"06bc3983-44b0-43d6-b041-2e9218ea89c8","input":{"a":{},"b":{}},"output":{"a if b":{"metadata":{"position":{"x":15,"y":57}}}},"metadata":{"position":{"x":-9,"y":18}}}},"merges":{"lwzzgu":{"propkey":{"input":{"event":true}},"onkeydown":{"output":{"event":true}},"if":{"input":{"a":true}}},"webletbkt":{"equals":{"input":{"a":true}},"propkey":{"output":{"key":true}}},"tswomu":{"if":{"input":{"b":true}},"equals":{"output":{"a = b":true}}}},"metadata":{"icon":"square","complexity":18,"position":{"merge":{"lwzzgu":{"x":-56,"y":-8},"webletbkt":{"x":41,"y":-37},"tswomu":{"x":43,"y":6}}},"tags":["platform","core"]},"id":"de45f6d0-7504-4061-b4ab-5d1ee902a0cb","type":"`U`&`G`","system":true},"051d4600-42e5-403b-b12e-eb58ae78ef0b":{"name":"random background-color tag","units":{"randomhexcolor":{"id":"2f48e431-9338-44dd-9f20-b8b14e710a1f"},"tagbackgroundcolor":{"id":"26dc94ea-347b-4dbb-a7d7-1dab60da8352"}},"merges":{"0":{"randomhexcolor":{"output":{"hex":true}},"tagbackgroundcolor":{"input":{"color":true}}}},"metadata":{"icon":"palette","description":"random HEX background color string tag","complexity":58,"tags":["platform","core"]},"inputs":{"any":{"plug":{"0":{"unitId":"randomhexcolor","pinId":"any"}},"functional":true,"type":"any"}},"outputs":{"{bc}":{"plug":{"0":{"unitId":"tagbackgroundcolor","pinId":"{bc}"}},"type":"object"}},"id":"051d4600-42e5-403b-b12e-eb58ae78ef0b","type":"`U`&`G`","system":true},"8a2d42bf-fc83-4696-9e0c-cf8c6c4641ae":{"name":"random color tag","units":{"tagcolor":{"id":"dfba14dd-bd14-4fd2-bbfa-c910eadd9f7d"},"randomhexcolor":{"id":"2f48e431-9338-44dd-9f20-b8b14e710a1f"}},"merges":{"0":{"tagcolor":{"input":{"color":true}},"randomhexcolor":{"output":{"hex":true}}}},"metadata":{"icon":"palette","description":"random HEX color string tag","complexity":58,"tags":["platform","core"]},"inputs":{"any":{"plug":{"0":{"unitId":"randomhexcolor","pinId":"any"}},"type":"any","functional":true}},"outputs":{"{color}":{"plug":{"0":{"unitId":"tagcolor","pinId":"{color}"}},"type":"{color:string}"}},"id":"8a2d42bf-fc83-4696-9e0c-cf8c6c4641ae","type":"`U`&`G`","system":true},"2c7507c4-02bc-11eb-88e5-8bc78086a76f":{"name":"remove all children","inputs":{"any":{"plug":{"0":{"unitId":"wait","pinId":"b"}},"type":"any","metadata":{"position":{"0":{"x":-168,"y":-31}}}},"parent":{"plug":{"0":{"mergeId":"0"}},"type":"`C`","ref":true,"metadata":{"position":{"0":{"x":185,"y":8}}}}},"outputs":{},"units":{"haschild":{"id":"c475117a-02b9-11eb-b7c8-579fe4f6c669","input":{"parent":{},"at":{}},"output":{"test":{}},"metadata":{"position":{"x":113,"y":-19}}},"removechild":{"id":"6dbff818-02b9-11eb-9ee7-93b57419f741","input":{"parent":{},"at":{}},"output":{},"metadata":{"position":{"x":115,"y":34}}},"loop":{"id":"ba8d655b-6014-4eae-bce1-fb8fef9ee535","input":{"init":{},"test":{}},"output":{"local":{},"current":{},"final":{"ignored":true,"metadata":{"position":{"x":-21,"y":-29}}}},"metadata":{"position":{"x":17,"y":0}}},"wait":{"id":"ba38b0af-80c0-49e4-9e39-864396964ccc","input":{"a":{"constant":true,"data":"0","metadata":{"position":{"x":-143,"y":17}}},"b":{"metadata":{"position":{"x":-143,"y":-17}}}},"output":{"a":{}},"metadata":{"position":{"x":-97,"y":0}}}},"merges":{"0":{"haschild":{"input":{"parent":true}},"removechild":{"input":{"parent":true}}},"1":{"loop":{"output":{"local":true}},"haschild":{"input":{"at":true}}},"2":{"haschild":{"output":{"test":true}},"loop":{"input":{"test":true}}},"3":{"loop":{"output":{"current":true}},"removechild":{"input":{"at":true}}},"4":{"wait":{"output":{"a":true}},"loop":{"input":{"init":true}}}},"metadata":{"icon":"square","description":"remove all `parent` children","complexity":19,"tags":["platform","core"],"position":{"merge":{"0":{"x":156,"y":7},"1":{"x":66,"y":-5},"2":{"x":61,"y":-28},"3":{"x":62,"y":29},"4":{"x":-42,"y":0}}}},"id":"2c7507c4-02bc-11eb-88e5-8bc78086a76f","type":"`U`&`G`","system":true},"7ba3db14-6f80-434b-b9dc-bd38462b20fc":{"name":"fetch body","units":{"fetch":{"id":"c5856fdc-5154-46ab-a414-47f37af39da1"},"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"key":{"constant":true,"data":"\'body\'"}}}},"merges":{"0":{"fetch":{"output":{"response":true}},"get":{"input":{"obj":true}}}},"metadata":{"icon":"send","description":"no description","complexity":8,"tags":["platform","core","rest"]},"inputs":{"url":{"plug":{"0":{"unitId":"fetch","pinId":"url"}},"type":"string"},"opt":{"plug":{"0":{"unitId":"fetch","pinId":"opt"}},"type":"{body?:string|null,headers?:object,method?:string}"}},"outputs":{"body":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"any"}},"id":"7ba3db14-6f80-434b-b9dc-bd38462b20fc","type":"`U`&`G`","system":true},"00a8a078-91bf-4676-aa32-c9cfacdfd527":{"name":"fetch JSON body","units":{"fetchbody":{"id":"7ba3db14-6f80-434b-b9dc-bd38462b20fc","input":{"url":{},"opt":{}},"output":{"body":{}},"metadata":{"position":{"x":2,"y":6}}},"parse":{"id":"563e92be-ad5e-4a61-a718-9249c3eac51d","input":{"string":{}},"output":{"json":{}},"metadata":{"position":{"x":105,"y":2}}},"deepset":{"id":"419e468e-e4d4-11ea-8efb-2b9d815b1798","input":{"path":{"constant":true,"data":"[\'headers\',\'Content-Type\']"},"value":{"constant":true,"data":"\'application/json\'"},"obj":{}},"output":{"result":{}},"metadata":{"position":{"x":-109,"y":-9}}}},"merges":{"0":{"fetchbody":{"output":{"body":true}},"parse":{"input":{"string":true}}},"1":{"deepset":{"output":{"result":true}},"fetchbody":{"input":{"opt":true}}}},"render":false,"component":{},"metadata":{"icon":"send","description":"no description","complexity":52,"tags":["platform","core","rest"]},"inputs":{"url":{"plug":{"0":{"unitId":"fetchbody","pinId":"url"}},"type":"string"},"options":{"plug":{"0":{"unitId":"deepset","pinId":"obj"}},"type":"{body?:string|null,headers?:object,method?:string}"}},"outputs":{"json":{"plug":{"0":{"unitId":"parse","pinId":"json"}},"type":"any"}},"id":"00a8a078-91bf-4676-aa32-c9cfacdfd527","type":"`U`&`G`","system":true},"6a529c4d-07af-4778-8086-8a578694ec3f":{"name":"get body","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"key":{"constant":true,"data":"\'body\'"}}}},"merges":{},"metadata":{"icon":"send","description":"","complexity":5,"tags":["platform","core","rest"]},"inputs":{"{body}":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"object"}},"outputs":{"body":{"plug":{"0":{"unitId":"get","pinId":"value"}},"type":"any"}},"id":"6a529c4d-07af-4778-8086-8a578694ec3f","type":"`U`&`G`","system":true},"081b1edf-f66c-4e0a-9aaf-c20b4088d1ec":{"name":"HTTP basic auth","units":{"concat":{"id":"779e538c-b0b9-477e-a986-30ee3abe6fe6","input":{"b":{"constant":true,"data":"\':\'"}}},"concat0":{"id":"779e538c-b0b9-477e-a986-30ee3abe6fe6"},"encode":{"id":"ee7b692f-5fe5-43c3-b636-aacca92b0bc7"},"concat1":{"id":"779e538c-b0b9-477e-a986-30ee3abe6fe6","input":{"a":{"constant":true,"data":"\'Basic \'"}}}},"merges":{"0":{"concat":{"output":{"ab":true}},"concat0":{"input":{"a":true}}},"1":{"concat0":{"output":{"ab":true}},"encode":{"input":{"a":true}}},"2":{"encode":{"output":{"b":true}},"concat1":{"input":{"b":true}}}},"metadata":{"icon":"send","description":"no description","complexity":10,"tags":["platform","core","rest"]},"inputs":{"username":{"plug":{"0":{"unitId":"concat","pinId":"a"}},"type":"string"},"password":{"plug":{"0":{"unitId":"concat0","pinId":"b"}},"type":"string"}},"outputs":{"auth":{"plug":{"0":{"unitId":"concat1","pinId":"ab"}},"type":"string"}},"id":"081b1edf-f66c-4e0a-9aaf-c20b4088d1ec","type":"`U`&`G`","system":true},"522a9858-02c2-487a-ac04-27d2f5ebe7c3":{"name":"HTTP token auth","units":{"concat":{"id":"779e538c-b0b9-477e-a986-30ee3abe6fe6","input":{"a":{"constant":true,"data":"\'Bearer \'"}}}},"merges":{},"metadata":{"icon":"send","description":"no description","complexity":5,"tags":["platform","core","rest"]},"inputs":{"token":{"plug":{"0":{"unitId":"concat","pinId":"b"}},"type":"string"}},"outputs":{"auth":{"plug":{"0":{"unitId":"concat","pinId":"ab"}},"type":"string"}},"id":"522a9858-02c2-487a-ac04-27d2f5ebe7c3","type":"`U`&`G`","system":true},"ba70dd41-d533-4f8f-b476-c76274141468":{"name":"HTTP token auth opt","units":{"httptokenauth":{"id":"522a9858-02c2-487a-ac04-27d2f5ebe7c3"},"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'headers\'"}}},"tag0":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'Authorization\'"}}}},"merges":{"0":{"httptokenauth":{"output":{"auth":true}},"tag0":{"input":{"v":true}}},"1":{"tag0":{"output":{"kv":true}},"tag":{"input":{"v":true}}}},"metadata":{"icon":"send","description":"no description","complexity":13,"tags":["platform","core","rest"]},"inputs":{"token":{"plug":{"0":{"unitId":"httptokenauth","pinId":"token"}},"type":"string"}},"outputs":{"opt":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"ba70dd41-d533-4f8f-b476-c76274141468","type":"`U`&`G`","system":true},"63ede222-07af-4b27-98bc-d8bc7cc5b14c":{"name":"parse JSON body","units":{"get":{"id":"9414421d-3376-4438-aa03-7afcd860972c","input":{"key":{"constant":true,"data":"\'body\'"}}},"parse":{"id":"563e92be-ad5e-4a61-a718-9249c3eac51d"}},"merges":{"dbjrwzdhw":{"get":{"output":{"value":true}},"parse":{"input":{"string":true}}}},"metadata":{"icon":"arrow-right","description":"no description","complexity":8,"tags":["platform","core","rest"]},"inputs":{"res":{"plug":{"0":{"unitId":"get","pinId":"obj"}},"type":"object"}},"outputs":{"json":{"plug":{"0":{"unitId":"parse","pinId":"json"}},"type":"any"}},"id":"63ede222-07af-4b27-98bc-d8bc7cc5b14c","type":"`U`&`G`","system":true},"c4ff2bad-0d60-4d17-9471-c906075d2751":{"name":"post","inputs":{"url":{"plug":{"0":{"unitId":"fetch","pinId":"url"}},"ref":false},"opt":{"plug":{"0":{"unitId":"deepmerge","pinId":"b"}},"ref":false}},"outputs":{"response":{"plug":{"0":{"unitId":"fetch","pinId":"response"}},"ref":false}},"units":{"deepmerge":{"id":"2af12780-698c-40ca-baa9-5f3260377e0f","input":{"a":{"constant":true,"data":"{method:\'POST\'}"},"b":{"constant":false}},"output":{"ab":{}},"metadata":{"position":{"x":-53,"y":2}}},"fetch":{"id":"c5856fdc-5154-46ab-a414-47f37af39da1","input":{"url":{},"opt":{}},"output":{"response":{}},"metadata":{"position":{"x":52,"y":-3}}}},"merges":{"6":{"deepmerge":{"input":{},"output":{"ab":true}},"fetch":{"input":{"opt":true},"output":{}}}},"render":false,"component":{},"metadata":{"icon":"send","description":"fetch a resource across the network through HTTP POST","complexity":8,"tags":["platform","core","rest"]},"id":"c4ff2bad-0d60-4d17-9471-c906075d2751","system":true},"6fcb6d82-4d64-438e-8a30-82f8b89c524b":{"name":"post JSON","inputs":{"json":{"plug":{"0":{"unitId":"stringify","pinId":"json"}},"type":"any"},"url":{"plug":{"0":{"unitId":"fetch","pinId":"url"}},"type":"string"},"opt":{"plug":{"0":{"unitId":"deepmerge","pinId":"b"}}}},"outputs":{"response":{"plug":{"0":{"unitId":"fetch","pinId":"response"}},"type":"{status:number,body:string}"}},"units":{"stringify":{"id":"ee184ea6-3c80-4119-919e-290620aafab0","input":{"json":{}},"output":{"string":{}},"metadata":{"position":{"x":-76,"y":54}}},"fetch":{"id":"c5856fdc-5154-46ab-a414-47f37af39da1","input":{"url":{"constant":false},"opt":{}},"output":{"response":{}},"metadata":{"position":{"x":124,"y":22}}},"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{"constant":false},"key":{"constant":true,"data":"\\"body\\""},"value":{}},"output":{"obj":{}},"metadata":{"position":{"x":14,"y":-1}}},"deepmerge":{"id":"2af12780-698c-40ca-baa9-5f3260377e0f","input":{"a":{"constant":true,"data":"{method:\\"POST\\",headers:{\\"Content-Type\\":\\"application/json\\"}}"},"b":{}},"output":{"ab":{}}}},"merges":{"0":{"set":{"input":{"value":true}},"stringify":{"output":{"string":true}}},"1":{"fetch":{"input":{"opt":true}},"set":{"output":{"obj":true}}},"2":{"deepmerge":{"output":{"ab":true}},"set":{"input":{"obj":true}}}},"render":false,"component":{},"metadata":{"icon":"send","description":"...","complexity":24,"tags":["platform","core","rest"]},"id":"6fcb6d82-4d64-438e-8a30-82f8b89c524b","type":"`U`&`G`","system":true,"specs":{}},"1a89a9c0-0dfe-419b-96e7-8aae6bae1859":{"name":"post JSON body","inputs":{"json":{"plug":{"0":{"unitId":"postJSON","pinId":"json"}},"ref":false},"url":{"plug":{"0":{"unitId":"postJSON","pinId":"url"}},"ref":false},"opt":{"plug":{"0":{"unitId":"postJSON","pinId":"opt"}},"ref":false}},"outputs":{"body":{"plug":{"0":{"unitId":"getbody","pinId":"body"}},"ref":false}},"units":{"postJSON":{"id":"6fcb6d82-4d64-438e-8a30-82f8b89c524b","input":{"json":{},"url":{},"opt":{}},"output":{"response":{}},"metadata":{"position":{"x":-53,"y":9}}},"getbody":{"id":"6a529c4d-07af-4778-8086-8a578694ec3f","input":{"{body}":{}},"output":{"body":{}},"metadata":{"position":{"x":52,"y":-10}}}},"merges":{"2":{"getbody":{"input":{"{body}":true}},"postJSON":{"output":{"response":true}}}},"render":false,"component":{},"metadata":{"icon":"send","description":"","complexity":21,"tags":["platform","core","rest"]},"id":"1a89a9c0-0dfe-419b-96e7-8aae6bae1859","system":true,"type":"`U`&`G`"},"b9a7ef07-db1c-4a4a-814d-4e4113bbbbf7":{"name":"post url encoded","inputs":{"url":{"plug":{"0":{"unitId":"fetch","pinId":"url"}},"type":"string","metadata":{"position":{"0":{"x":22,"y":112}}}},"body":{"plug":{"0":{"unitId":"stringify","pinId":"obj"}},"type":"any","metadata":{"position":{"0":{"x":177,"y":-84}}}},"opt":{"plug":{"0":{"unitId":"deepmerge","pinId":"b"}},"type":"object","metadata":{"position":{"0":{"x":-170,"y":-39}}}}},"outputs":{"response":{"plug":{"0":{"unitId":"fetch","pinId":"response"}},"type":"{status:number,body:string}","metadata":{"position":{"0":{"x":145,"y":84}}}}},"units":{"fetch":{"id":"c5856fdc-5154-46ab-a414-47f37af39da1","input":{"url":{"constant":false,"metadata":{"position":{"x":34,"y":87}}},"opt":{}},"output":{"response":{"metadata":{"position":{"x":120,"y":73}}}},"metadata":{"position":{"x":73,"y":61}}},"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{},"key":{"constant":true,"data":"\'body\'","metadata":{"position":{"x":-23,"y":-54}}},"value":{}},"output":{"obj":{}},"metadata":{"position":{"x":9,"y":-22}}},"stringify":{"id":"f97f2a74-d9a9-411d-afd3-fda46ba86c3b","input":{"obj":{"metadata":{"position":{"x":152,"y":-78}}}},"output":{"str":{}},"metadata":{"position":{"x":104,"y":-68}}},"deepmerge":{"id":"2af12780-698c-40ca-baa9-5f3260377e0f","input":{"a":{"constant":true,"data":"{method:\'POST\',headers:{\\"Content-Type\\":\'application/x-www-form-urlencoded\'}}","metadata":{"position":{"x":-144,"y":11}}},"b":{"metadata":{"position":{"x":-147,"y":-24}}}},"output":{"ab":{}},"metadata":{"position":{"x":-100,"y":-9}}}},"merges":{"0":{"fetch":{"input":{"opt":true}},"set":{"output":{"obj":true}}},"1":{"set":{"input":{"value":true}},"stringify":{"output":{"str":true}}},"2":{"set":{"input":{"obj":true}},"deepmerge":{"output":{"ab":true}}}},"component":{},"metadata":{"icon":"send","description":"...","complexity":14,"tags":["platform","core","rest"],"position":{"merge":{"0":{"x":40,"y":21},"1":{"x":56,"y":-50},"2":{"x":-47,"y":-14}}}},"id":"b9a7ef07-db1c-4a4a-814d-4e4113bbbbf7","type":"`U`&`G`","system":true},"3698d7af-8d4c-40f6-bcfa-222d9efb0940":{"name":"put JSON","units":{"stringify":{"id":"ee184ea6-3c80-4119-919e-290620aafab0","input":{"json":{}}},"fetch":{"id":"c5856fdc-5154-46ab-a414-47f37af39da1","input":{"url":{"constant":false}}},"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{},"key":{"constant":true,"data":"\'body\'"}}},"deepmerge":{"id":"2af12780-698c-40ca-baa9-5f3260377e0f","input":{"a":{"constant":true,"data":"{method:\'PUT\',headers:{\\"Content-Type\\":\'application/json\'}}"}}}},"merges":{"0":{"set":{"input":{"value":true}},"stringify":{"output":{"string":true}}},"1":{"fetch":{"input":{"opt":true}},"set":{"output":{"obj":true}}},"2":{"set":{"input":{"obj":true}},"deepmerge":{"output":{"ab":true}}}},"inputs":{"json":{"plug":{"0":{"unitId":"stringify","pinId":"json"}},"type":"<A>"},"url":{"plug":{"0":{"unitId":"fetch","pinId":"url"}},"type":"string"},"opt":{"plug":{"0":{"unitId":"deepmerge","pinId":"b"}},"type":"object"}},"outputs":{"response":{"plug":{"0":{"unitId":"fetch","pinId":"response"}},"type":"{status:number,body:string}"}},"metadata":{"icon":"send","description":"...","complexity":14,"tags":["platform","core","rest"]},"id":"3698d7af-8d4c-40f6-bcfa-222d9efb0940","type":"`U`&`G`","system":true},"7b344491-48a2-46e1-949e-56805bebe3da":{"name":"set color default","units":{"setifordefault":{"id":"c0b85780-7e99-11ea-9a99-879f3f411ebd","input":{"key":{"constant":true,"data":"\'color\'"},"testdefault":{"constant":true,"data":"false"}}}},"merges":{},"inputs":{"default":{"plug":{"0":{"unitId":"setifordefault","pinId":"default"}},"type":"<A>"},"test":{"plug":{"0":{"unitId":"setifordefault","pinId":"test"}},"type":"boolean"},"value":{"plug":{"0":{"unitId":"setifordefault","pinId":"value"}},"type":"<A>"},"obj":{"plug":{"0":{"unitId":"setifordefault","pinId":"obj"}},"type":"object"}},"outputs":{"obj":{"plug":{"0":{"unitId":"setifordefault","pinId":"obj"}},"type":"object"}},"metadata":{"icon":"brackets-curly","description":"set `obj` \\"color\\" to `value` if `test` is true or to `default` otherwise","complexity":24,"tags":["platform","core"]},"id":"7b344491-48a2-46e1-949e-56805bebe3da","type":"`U`&`G`","system":true},"88553858-c62d-4970-98c9-084084528d2a":{"type":"`U`&`G`","name":"set currentTime","units":{"set":{"id":"074ef6f4-a0a1-40f9-95c0-cf0ecc3d420c","input":{"obj":{},"name":{"constant":true,"data":"\'currentTime\'"},"data":{}},"output":{"data":{"ignored":true}},"metadata":{"position":{"x":6,"y":19}}}},"merges":{},"inputs":{"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"ref":true},"data":{"plug":{"0":{"unitId":"set","pinId":"data"}},"ref":false}},"outputs":{},"metadata":{"icon":"brackets-curly","description":"set currentTime property of `obj`","tags":["platform","core"]},"id":"88553858-c62d-4970-98c9-084084528d2a","system":true},"887e66b8-a08e-11ea-bfea-b3687d92658a":{"name":"set fill default","units":{"setifordefault":{"id":"c0b85780-7e99-11ea-9a99-879f3f411ebd","input":{"key":{"constant":true,"data":"\'fill\'"},"testdefault":{"constant":true,"data":"false"}}}},"merges":{},"inputs":{"default":{"plug":{"0":{"unitId":"setifordefault","pinId":"default"}},"type":"<A>"},"test":{"plug":{"0":{"unitId":"setifordefault","pinId":"test"}},"type":"boolean"},"value":{"plug":{"0":{"unitId":"setifordefault","pinId":"value"}},"type":"<A>"},"obj":{"plug":{"0":{"unitId":"setifordefault","pinId":"obj"}},"type":"object"}},"outputs":{"obj":{"plug":{"0":{"unitId":"setifordefault","pinId":"obj"}},"type":"object"}},"metadata":{"icon":"brackets-curly","description":"set `obj` \\"fill\\" to `value` if `test` is true or to `default` otherwise","complexity":24,"tags":["platform","core"]},"id":"887e66b8-a08e-11ea-bfea-b3687d92658a","type":"`U`&`G`","system":true},"f752e8ce-83ce-4bdd-9ae2-67b241c51cfc":{"name":"set height","inputs":{"element":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"`J`","ref":true,"metadata":{"position":{"0":{"x":53,"y":37}}}},"height":{"plug":{"0":{"unitId":"set","pinId":"data"}},"type":"any","metadata":{"position":{"0":{"x":53,"y":-38}}}}},"outputs":{},"units":{"set":{"id":"074ef6f4-a0a1-40f9-95c0-cf0ecc3d420c","input":{"obj":{"metadata":{"position":{"x":34,"y":18}}},"name":{"constant":true,"data":"\'height\'","metadata":{"position":{"x":-60,"y":0}}},"data":{"metadata":{"position":{"x":34,"y":-19}}}},"output":{},"metadata":{"position":{"x":-11,"y":0}}}},"merges":{},"metadata":{"icon":"object-set","description":"set height property of `obj`","complexity":5,"tags":["platform","core"]},"id":"f752e8ce-83ce-4bdd-9ae2-67b241c51cfc","type":"`U`&`G`","system":true},"33a97304-0832-40d9-b013-de0ddf0688af":{"type":"`U`&`G`","name":"set scale","units":{"setscalex":{"id":"cea694c2-9c36-4655-85b6-9b33425a5c33","input":{"obj":{},"sx":{}},"output":{}},"setscaley":{"id":"1241b0ea-eaa8-4dc3-95d1-a3e1580e4267","input":{"obj":{},"sy":{}},"output":{}}},"merges":{},"inputs":{"obj":{"plug":{"0":{"unitId":"setscaley","pinId":"obj"},"1":{"unitId":"setscalex","pinId":"obj"}},"ref":true},"sx":{"plug":{"0":{"unitId":"setscalex","pinId":"sx"}},"ref":false},"sy":{"plug":{"0":{"unitId":"setscaley","pinId":"sy"}},"ref":false}},"outputs":{},"metadata":{"icon":"object-set","description":"set scale `sx` and `sy` of `obj`","complexity":10,"tags":["platform","core"]},"system":true,"id":"33a97304-0832-40d9-b013-de0ddf0688af"},"cea694c2-9c36-4655-85b6-9b33425a5c33":{"name":"set scale x","inputs":{"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"`J`","ref":true,"metadata":{"position":{"0":{"x":53,"y":37}}}},"sx":{"plug":{"0":{"unitId":"set","pinId":"data"}},"type":"any","metadata":{"position":{"0":{"x":53,"y":-38}}}}},"outputs":{},"units":{"set":{"id":"074ef6f4-a0a1-40f9-95c0-cf0ecc3d420c","input":{"obj":{"metadata":{"position":{"x":34,"y":18}}},"name":{"constant":true,"data":"\'sx\'","metadata":{"position":{"x":-60,"y":0}}},"data":{"metadata":{"position":{"x":34,"y":-19}}}},"output":{},"metadata":{"position":{"x":-11,"y":0}}}},"merges":{},"metadata":{"icon":"object-set","description":"set property `sx` of `object`","complexity":5,"tags":["platform","core"]},"id":"cea694c2-9c36-4655-85b6-9b33425a5c33","type":"`U`&`G`","system":true},"1241b0ea-eaa8-4dc3-95d1-a3e1580e4267":{"name":"set scale y","inputs":{"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"`J`","ref":true,"metadata":{"position":{"0":{"x":53,"y":37}}}},"sy":{"plug":{"0":{"unitId":"set","pinId":"data"}},"type":"any","metadata":{"position":{"0":{"x":53,"y":-38}}}}},"outputs":{},"units":{"set":{"id":"074ef6f4-a0a1-40f9-95c0-cf0ecc3d420c","input":{"obj":{"metadata":{"position":{"x":34,"y":18}}},"name":{"constant":true,"data":"\'sy\'","metadata":{"position":{"x":-60,"y":0}}},"data":{"metadata":{"position":{"x":34,"y":-19}}}},"output":{},"metadata":{"position":{"x":-11,"y":0}}}},"merges":{},"metadata":{"icon":"object-set","description":"set property `sy` of `object`","complexity":5,"tags":["platform","core"]},"id":"1241b0ea-eaa8-4dc3-95d1-a3e1580e4267","type":"`U`&`G`","system":true},"ad68ca8e-ff63-467d-a770-3e6a7490f7fb":{"name":"set value","inputs":{"element":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"`J`","ref":true,"metadata":{"position":{"0":{"x":53,"y":37}}}},"value":{"plug":{"0":{"unitId":"set","pinId":"data"}},"type":"any","metadata":{"position":{"0":{"x":53,"y":-38}}}}},"outputs":{},"units":{"set":{"id":"074ef6f4-a0a1-40f9-95c0-cf0ecc3d420c","input":{"obj":{"metadata":{"position":{"x":34,"y":18}}},"name":{"constant":true,"data":"\'value\'","metadata":{"position":{"x":-60,"y":0}}},"data":{"metadata":{"position":{"x":34,"y":-19}}}},"output":{},"metadata":{"position":{"x":-11,"y":0}}}},"merges":{},"metadata":{"icon":"object-set","description":"set property `value` of `obj`","complexity":5,"tags":["platform","core"]},"id":"ad68ca8e-ff63-467d-a770-3e6a7490f7fb","type":"`U`&`G`","system":true},"7849c9db-bf2d-4d1f-a105-11f0f3eee333":{"name":"set width","inputs":{"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"`J`","ref":true,"metadata":{"position":{"0":{"x":53,"y":37}}}},"width":{"plug":{"0":{"unitId":"set","pinId":"data"}},"type":"any","metadata":{"position":{"0":{"x":53,"y":-38}}}}},"outputs":{},"units":{"set":{"id":"074ef6f4-a0a1-40f9-95c0-cf0ecc3d420c","input":{"obj":{"metadata":{"position":{"x":34,"y":18}}},"name":{"constant":true,"data":"\'width\'","metadata":{"position":{"x":-60,"y":0}}},"data":{"metadata":{"position":{"x":34,"y":-19}}}},"output":{},"metadata":{"position":{"x":-11,"y":0}}}},"merges":{},"metadata":{"icon":"object-set","description":"...","complexity":5,"tags":["platform","core"]},"id":"7849c9db-bf2d-4d1f-a105-11f0f3eee333","type":"`U`&`G`","system":true},"b7028cdd-41c2-42ab-99d9-7122d372aee2":{"name":"speech to speech","units":{"texttospeech":{"id":"6db29a62-2035-4cfc-a9d3-03444a8bc2b8","input":{"voice":{"data":"0","constant":true}}},"speechtotext":{"id":"416550cc-6e02-4ff2-aafa-2f0edbf121c6","input":{"opt":{"constant":true,"data":"{lang:\'en-US\'}"}}}},"merges":{"0":{"speechtotext":{"output":{"text":true}},"texttospeech":{"input":{"message":true}}}},"inputs":{},"outputs":{},"metadata":{"icon":"message-circle","description":"say what I say","complexity":8,"tags":["platform","core","speech"]},"id":"b7028cdd-41c2-42ab-99d9-7122d372aee2","type":"`U`&`G`","system":true},"1a0773eb-559c-47e2-81d7-fc28bc80076d":{"type":"`U`&`G`","name":"remove newline","units":{"replace":{"id":"af5469c4-a09e-4b22-8133-a21e721e7639","input":{"str":{},"regex":{"constant":true,"data":"\'\\\\n\'"},"with":{"constant":true,"data":"\'\'"},"flags":{"constant":true,"data":"\'\'"}},"output":{"str":{}},"metadata":{"position":{"x":-74,"y":-39}}}},"merges":{},"inputs":{"str":{"plug":{"0":{"unitId":"replace","pinId":"str"}},"ref":false}},"outputs":{"str":{"plug":{"0":{"unitId":"replace","pinId":"str"}},"ref":false}},"metadata":{"icon":"type","description":"remove \\n","complexity":5,"tags":["platform","core","string"]},"id":"1a0773eb-559c-47e2-81d7-fc28bc80076d","system":true},"72a186fe-a18b-44ca-b36b-c014ee44003a":{"type":"`U`&`G`","name":"percent","units":{"concat":{"id":"779e538c-b0b9-477e-a986-30ee3abe6fe6","input":{"a":{},"b":{"constant":true,"data":"\\"%\\""}},"output":{"ab":{}},"metadata":{"position":{"x":22,"y":102}}}},"merges":{},"inputs":{"a":{"plug":{"0":{"unitId":"concat","pinId":"a"}},"ref":false}},"outputs":{"pa":{"plug":{"0":{"unitId":"concat","pinId":"ab"}},"ref":false}},"metadata":{"icon":"question","description":"","complexity":5,"tags":["platform","core","style"]},"id":"72a186fe-a18b-44ca-b36b-c014ee44003a","system":true},"87c7b2b8-c17e-11ea-ba3a-072aa030b89f":{"name":"px","units":{"concat":{"id":"779e538c-b0b9-477e-a986-30ee3abe6fe6","input":{"a":{},"b":{"constant":true,"data":"\'px\'"}},"output":{"ab":{}}},"numbertostring":{"id":"f712793d-8ee9-4805-9d4a-8c210cae667a","input":{"n":{},"radix":{"constant":true,"data":"10"}},"output":{"str":{}}}},"merges":{"tavfhissj":{"numbertostring":{"output":{"str":true}},"concat":{"input":{"a":true}}}},"inputs":{"n":{"plug":{"0":{"unitId":"numbertostring","pinId":"n"}},"type":"number"}},"outputs":{"px":{"plug":{"0":{"unitId":"concat","pinId":"ab"}},"type":"string"}},"metadata":{"icon":"dot-circle","description":"append \\"px\\" to `n`","complexity":8,"tags":["platform","core","style"]},"id":"87c7b2b8-c17e-11ea-ba3a-072aa030b89f","type":"`U`&`G`","system":true},"0ca54c4f-148e-49e5-bedf-d24276200f66":{"name":"set background-color","units":{"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{},"key":{"constant":true,"data":"\'backgroundColor\'"},"value":{}},"output":{"obj":{}}}},"merges":{},"inputs":{"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"object"},"value":{"plug":{"0":{"unitId":"set","pinId":"value"}},"type":"any"}},"outputs":{"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"object"}},"metadata":{"icon":"brackets-curly","description":"...","complexity":5,"tags":["platform","core","style"]},"id":"0ca54c4f-148e-49e5-bedf-d24276200f66","type":"`U`&`G`","system":true},"8affb853-d25e-48bc-87d6-8ce949aa8ecb":{"name":"set data","units":{"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{},"key":{"constant":true,"data":"\'data\'"},"value":{}},"output":{"obj":{}}}},"merges":{},"inputs":{"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"object"},"value":{"plug":{"0":{"unitId":"set","pinId":"value"}},"type":"any"}},"outputs":{"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"object"}},"metadata":{"icon":"brackets-curly","description":"...","complexity":5,"tags":["platform","core","style"]},"id":"8affb853-d25e-48bc-87d6-8ce949aa8ecb","type":"`U`&`G`","system":true},"53846253-2c16-4329-8e65-e6e8f37e6b086":{"name":"set from","units":{"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{},"key":{"constant":true,"data":"\'from\'"},"value":{}},"output":{"obj":{}}}},"merges":{},"inputs":{"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"object"},"value":{"plug":{"0":{"unitId":"set","pinId":"value"}},"type":"any"}},"outputs":{"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"object"}},"metadata":{"icon":"brackets-curly","description":"...","complexity":5,"tags":["platform","core","style"]},"id":"53846253-2c16-4329-8e65-e6e8f37e6b086","type":"`U`&`G`","system":true},"aab4ce68-49a6-4c84-a7f8-87359c453be9":{"name":"set to","units":{"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{},"key":{"constant":true,"data":"\'to\'"},"value":{}},"output":{"obj":{}}}},"merges":{},"inputs":{"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"object"},"value":{"plug":{"0":{"unitId":"set","pinId":"value"}},"type":"any"}},"outputs":{"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"object"}},"metadata":{"icon":"brackets-curly","description":"...","complexity":5,"tags":["platform","core","style"]},"id":"aab4ce68-49a6-4c84-a7f8-87359c453be9","type":"`U`&`G`","system":true},"b63a7c25-918c-4783-80bd-828da0e5d08f":{"name":"set value","units":{"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{},"key":{"constant":true,"data":"\'value\'"},"value":{}},"output":{"obj":{}}}},"merges":{},"inputs":{"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"object"},"value":{"plug":{"0":{"unitId":"set","pinId":"value"}},"type":"any"}},"outputs":{"obj":{"plug":{"0":{"unitId":"set","pinId":"obj"}},"type":"object"}},"metadata":{"icon":"brackets-curly","description":"...","complexity":5,"tags":["platform","core","style"]},"id":"b63a7c25-918c-4783-80bd-828da0e5d08f","type":"`U`&`G`","system":true},"de473a6a-a0f3-11ea-bc93-ff2e35342869":{"name":"style center","units":{"identity":{"id":"260d774e-bc89-4027-aa92-cb1985fb312b","input":{"a":{"constant":true,"data":"{position:\'absolute\',top:\'50%\',left:\'50%\',transform:\'translate(-50%,-50%)\',width:\'auto\',height:\'auto\'}"}},"output":{"a":{}}}},"merges":{},"inputs":{},"outputs":{"style":{"plug":{"0":{"unitId":"identity","pinId":"a"}},"type":"{position:string,top:string,left:string,transform:string}"}},"metadata":{"icon":"repeat-1","description":"style to centralize element on container","complexity":5,"tags":["platform","core","style"]},"id":"de473a6a-a0f3-11ea-bc93-ff2e35342869","type":"`U`&`G`","system":true},"26dc94ea-347b-4dbb-a7d7-1dab60da8352":{"name":"tag background-color","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'background-color\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{\\"background-color\\": `color`}","complexity":7,"tags":["platform","core","style"]},"inputs":{"color":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"string"}},"outputs":{"{bc}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"26dc94ea-347b-4dbb-a7d7-1dab60da8352","type":"`U`&`G`","system":true},"dfba14dd-bd14-4fd2-bbfa-c910eadd9f7d":{"name":"tag color","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'color\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{color: `color`}","complexity":7,"tags":["platform","core","style"]},"inputs":{"color":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"string"}},"outputs":{"{color}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"dfba14dd-bd14-4fd2-bbfa-c910eadd9f7d","type":"`U`&`G`","system":true},"cb1f45ee-2137-11eb-9b9d-e7e8fc730ec7":{"name":"tag filter","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'filter\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{filter: `filter`}","complexity":7,"tags":["platform","core","style"]},"inputs":{"filter":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"any"}},"outputs":{"{filter}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"cb1f45ee-2137-11eb-9b9d-e7e8fc730ec7","type":"`U`&`G`","system":true},"119335e8-9a6f-11eb-bd5e-a7c983e2d4cd":{"name":"tag font size","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'fontSize\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{fontSize: `fontSize`}","complexity":7,"tags":["platform","core","style"]},"inputs":{"fontSize":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"string"}},"outputs":{"{fontSize}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"119335e8-9a6f-11eb-bd5e-a7c983e2d4cd","type":"`U`&`G`","system":true},"06d91634-9aee-11eb-8e48-8bdcd8add0ff":{"name":"tag font size px","inputs":{"n":{"plug":{"0":{"unitId":"px","pinId":"n"}},"type":"number"}},"outputs":{"{fontSize}":{"plug":{"0":{"unitId":"tagfontsize","pinId":"{fontSize}"}},"type":"object"}},"units":{"px":{"id":"87c7b2b8-c17e-11ea-ba3a-072aa030b89f","input":{"n":{"metadata":{"position":{"x":-88,"y":4}}}},"output":{"px":{}},"metadata":{"position":{"x":-39,"y":4}}},"tagfontsize":{"id":"119335e8-9a6f-11eb-bd5e-a7c983e2d4cd","input":{"fontSize":{}},"output":{"{fontSize}":{"metadata":{"position":{"x":112,"y":4}}}},"metadata":{"position":{"x":63,"y":4}}}},"merges":{"1":{"px":{"output":{"px":true}},"tagfontsize":{"input":{"fontSize":true}}}},"metadata":{"description":"...","icon":"brackets-curly","complexity":17,"position":{"merge":{"1":{"x":12,"y":4},"2":{"x":27,"y":88},"3":{"x":-76,"y":62},"4":{"x":96,"y":-46},"5":{"x":-11,"y":-78},"uvpern":{"x":45,"y":117}}},"tags":["platform","core","style"]},"id":"06d91634-9aee-11eb-8e48-8bdcd8add0ff","type":"`U`&`G`","system":true},"2a6c9339-d20f-431b-8db1-f6f4f5a0af74":{"name":"tag from","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'from\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{from: `from`}","complexity":7,"tags":["platform","core","style"]},"inputs":{"from":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"string"}},"outputs":{"{from}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"2a6c9339-d20f-431b-8db1-f6f4f5a0af74","type":"`U`&`G`","system":true},"3cbca5b0-2616-11eb-a3d8-7b83ecaf1822":{"name":"tag left","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'left\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{left: `left`}","complexity":7,"tags":["platform","core","style"]},"inputs":{"left":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"string"}},"outputs":{"{left}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"3cbca5b0-2616-11eb-a3d8-7b83ecaf1822","type":"`U`&`G`","system":true},"2afbbe21-d399-482a-b53d-50820ee510be":{"name":"tag opacity","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'opacity\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{opacity: `opacity`}","complexity":7,"tags":["platform","core","style"]},"inputs":{"opacity":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"string"}},"outputs":{"{opacity}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"2afbbe21-d399-482a-b53d-50820ee510be","type":"`U`&`G`","system":true},"91f0b6b7-4242-42c5-9ba1-e1833c13f17c":{"name":"tag to","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'to\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{to: `to`}","complexity":7,"tags":["platform","core","style"]},"inputs":{"to":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"string"}},"outputs":{"{to}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"91f0b6b7-4242-42c5-9ba1-e1833c13f17c","type":"`U`&`G`","system":true},"13f661c0-2616-11eb-af30-2f9ba81c8b3b":{"name":"tag top","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'top\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{top: `top`}","complexity":7,"tags":["platform","core","style"]},"inputs":{"top":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"string"}},"outputs":{"{top}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"13f661c0-2616-11eb-af30-2f9ba81c8b3b","type":"`U`&`G`","system":true},"6e9e4202-26af-11eb-8d6e-eb6fbc70a0a9":{"name":"tag email","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'email\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{email: `email`}","complexity":7,"tags":["platform","core","tag"]},"inputs":{"email":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"string"}},"outputs":{"{email}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"6e9e4202-26af-11eb-8d6e-eb6fbc70a0a9","type":"`U`&`G`","system":true},"8b231876-26af-11eb-8e1d-6f057957054d":{"name":"tag password","units":{"tag":{"id":"5480c89e-31ef-4fdb-b232-60f25b3e36f3","input":{"k":{"constant":true,"data":"\'password\'"}}}},"merges":{},"metadata":{"icon":"tag","description":"{password: `password`}","complexity":7,"tags":["platform","core","tag"]},"inputs":{"password":{"plug":{"0":{"unitId":"tag","pinId":"v"}},"type":"string"}},"outputs":{"{password}":{"plug":{"0":{"unitId":"tag","pinId":"kv"}},"type":"object"}},"id":"8b231876-26af-11eb-8e1d-6f057957054d","type":"`U`&`G`","system":true},"47a78f03-7dd4-4207-aefa-02574661de6e":{"name":"transform","inputs":{"obj":{"plug":{"0":{"mergeId":"0"}},"ref":true},"name":{"plug":{"0":{"mergeId":"1"}}},"next":{"plug":{"0":{"unitId":"set0","pinId":"data"}}}},"outputs":{"current":{"plug":{"0":{"unitId":"get","pinId":"value"}}}},"units":{"get":{"id":"bc0320e2-2eb8-11eb-a38f-a779bfe81645","input":{"obj":{},"name":{}},"output":{"value":{}},"metadata":{"position":{"x":46,"y":0}}},"set0":{"id":"074ef6f4-a0a1-40f9-95c0-cf0ecc3d420c","input":{"obj":{},"name":{},"data":{}},"output":{"data":{"ignored":true}},"metadata":{"position":{"x":-47,"y":-1}}}},"merges":{"0":{"get":{"input":{"obj":true}},"set0":{"input":{"obj":true}}},"1":{"get":{"input":{"name":true}},"set0":{"input":{"name":true}}}},"metadata":{"icon":"brackets-curly","complexity":8,"tags":["platform","core"]},"type":"`U`&`G`","id":"47a78f03-7dd4-4207-aefa-02574661de6e","system":true},"850a3303-cdf7-4232-996f-760743e4f068":{"name":"read input","inputs":{"name":{"plug":{"0":{"unitId":"input","pinId":"name"}}},"unit":{"plug":{"0":{"unitId":"input","pinId":"unit"},"1":{"unitId":"read","pinId":"any"}},"ref":true}},"outputs":{"data":{"plug":{"0":{"unitId":"read","pinId":"data"}}}},"units":{"read":{"id":"c6da6b9f-a783-4e58-a252-e543aef109fb","input":{"value":{}},"output":{"data":{"ignored":false}},"metadata":{"position":{"x":58,"y":-1}}},"input":{"id":"4ae69887-a087-4d37-8743-d83ca48184d1","input":{"unit":{},"name":{},"done":{"ignored":true}},"output":{"pin":{}},"metadata":{"position":{"x":-59,"y":0}}}},"merges":{"0":{"read":{"input":{"value":true}},"input":{"output":{"pin":true}}}},"component":{},"metadata":{"icon":"object-set","description":"set `unit` input `name` to `data`","complexity":8,"tags":["platform","core","unit"]},"id":"850a3303-cdf7-4232-996f-760743e4f068","system":true},"04953fed-157a-479d-91ac-005174b9b85e":{"name":"write input","inputs":{"name":{"plug":{"0":{"unitId":"input","pinId":"name"}}},"data":{"plug":{"0":{"unitId":"write","pinId":"data"}}},"unit":{"plug":{"0":{"unitId":"input","pinId":"unit"}},"ref":true}},"outputs":{"data":{"plug":{"0":{"unitId":"write","pinId":"data"}},"defaultIgnored":true}},"units":{"write":{"id":"98ab5ee1-0997-4ad2-bc77-776208b6bb25","input":{"value":{},"data":{}},"output":{"data":{"ignored":false}},"metadata":{"position":{"x":58,"y":-1}}},"input":{"id":"4ae69887-a087-4d37-8743-d83ca48184d1","input":{"unit":{},"name":{},"done":{"ignored":true}},"output":{"pin":{}},"metadata":{"position":{"x":-59,"y":0}}}},"merges":{"0":{"write":{"input":{"value":true}},"input":{"output":{"pin":true}}}},"component":{},"metadata":{"icon":"object-set","description":"set `unit` input `name` to `data`","complexity":8,"tags":["platform","core","unit"]},"id":"04953fed-157a-479d-91ac-005174b9b85e","system":true},"002af312-560a-11eb-807c-8769b90eb8e6":{"name":"delete visit","inputs":{"url":{"type":"string"}},"outputs":{},"metadata":{"icon":"history","metadata":"remove all occurrences of the given URL from the history","complexity":3,"tags":["platform","extension","history"]},"id":"002af312-560a-11eb-807c-8769b90eb8e6","base":true,"type":"`U`","private":true,"system":true},"f1ed986a-55df-11eb-89e3-9f7cc8490b16":{"name":"get visits","inputs":{"url":{"type":"string"}},"outputs":{"visits":{"type":"object[]"}},"metadata":{"icon":"history","metadata":"retrieve information about visits to a URL","complexity":3,"tags":["platform","extension","history"]},"id":"f1ed986a-55df-11eb-89e3-9f7cc8490b16","base":true,"type":"`U`","private":true,"system":true},"dd22949e-ad44-4571-9af4-322a1e194ebe":{"name":"search delete visits","units":{"searchvisits":{"id":"ef550ed4-5608-11eb-8ee3-0be8f1fce185","input":{"query":{}},"output":{"items":{}}},"foreach":{"id":"e2da2ac1-26bd-4c91-b8ad-a0395d9c8857","input":{"a":{}},"output":{"a[i]":{},"a":{"ignored":true},"i":{"ignored":true},"test":{"ignored":true}}},"propurl":{"id":"19f08be0-560a-11eb-a3a2-e7395ef5830a","input":{"obj":{}},"output":{"url":{}}},"deletevisit":{"id":"002af312-560a-11eb-807c-8769b90eb8e6","input":{"url":{}},"output":{}},"set":{"id":"c4784b05-1f50-44ad-b812-545b3ed77614","input":{"obj":{"constant":true,"data":"{startTime:0}"},"key":{"constant":true,"data":"\'text\'"},"value":{}},"output":{"obj":{}}}},"merges":{"0":{"propurl":{"input":{"obj":true}},"foreach":{"output":{"a[i]":true}}},"1":{"foreach":{"input":{"a":true}},"searchvisits":{"output":{"items":true}}},"2":{"deletevisit":{"input":{"url":true}},"propurl":{"output":{"url":true}}},"3":{"set":{"output":{"obj":true}},"searchvisits":{"input":{"query":true}}}},"inputs":{"text":{"plug":{"0":{"unitId":"set","pinId":"value"}},"type":"any"}},"outputs":{},"metadata":{"icon":"history","description":"delete all history visits matching `text`","tags":["platform","extension","history"],"complexity":47},"id":"dd22949e-ad44-4571-9af4-322a1e194ebe","private":true,"type":"`U`&`G`","system":true},"ef550ed4-5608-11eb-8ee3-0be8f1fce185":{"name":"search visits","inputs":{"query":{"type":"{endTime?:number,maxResults?:number,startTime?:number,text?:string}","metadata":{"examples":["{startTime:0,text:\\"unit\\"}"]}}},"outputs":{"items":{"type":"{id:string,lastVisitTime:number,title:string,typedCount:number,url:string,visitCount:string}[]"}},"metadata":{"icon":"history","metadata":"retrieve information about visits to a URL","complexity":3,"tags":["platform","extension","history"]},"id":"ef550ed4-5608-11eb-8ee3-0be8f1fce185","base":true,"type":"`U`","private":true,"system":true},"738a0ac4-8805-4189-a46c-b7d7fcf63456":{"name":"host","inputs":{},"outputs":{},"metadata":{"icon":"square","description":"communicate with host system","complexity":3,"tags":["platform"]},"id":"738a0ac4-8805-4189-a46c-b7d7fcf63456","base":true,"type":"`U`&`EE`&`CH`","system":true},"59afce80-30e7-4322-84e6-955767bb5106":{"name":"child","inputs":{"parent":{"type":"`C`","ref":true},"at":{"type":"number"},"done":{"type":"any"}},"outputs":{"child":{"type":"`U`&`C`&`V`&`J`","ref":true,"icon":"square"}},"metadata":{"icon":"circle","description":"reference a child element inside `element`","complexity":3,"tags":["platform","meta"]},"id":"59afce80-30e7-4322-84e6-955767bb5106","base":true,"type":"`U`","system":true},"355b5332-0cc9-4a5c-989e-043d717215ec":{"name":"parent child","inputs":{"component":{"type":"`C`","ref":true},"at":{"type":"number"},"done":{"type":"any"}},"outputs":{"child":{"type":"`U`&`C`&`V`&`J`","ref":true,"icon":"square"}},"metadata":{"icon":"circle","description":"reference a child element inside `element`","complexity":3,"tags":["platform","meta"]},"id":"355b5332-0cc9-4a5c-989e-043d717215ec","base":true,"type":"`U`","system":true},"cf4db91a-f8b2-454f-a763-12005d71cb9d":{"name":"append","inputs":{"a[]":{"type":"`A`","ref":true},"a":{"type":"<A>"}},"outputs":{},"metadata":{"icon":"chevrons-left","description":"append an element to an array","complexity":3,"tags":["platform","method","array"]},"id":"cf4db91a-f8b2-454f-a763-12005d71cb9d","base":true,"type":"`U`","system":true},"c320b1b2-c130-4d69-b172-0c737b72c6b5":{"name":"at","inputs":{"a":{"type":"<A>[]","ref":true},"i":{"type":"number"}},"outputs":{"a[i]":{"type":"<A>"}},"metadata":{"icon":"info-square","description":"`a` element at position `i`","complexity":3,"tags":["platform","method","array"]},"id":"c320b1b2-c130-4d69-b172-0c737b72c6b5","base":true,"type":"`U`","system":true},"26b06e21-798c-4bc4-96e1-12a4351c083d":{"name":"index of","inputs":{"a[]":{"type":"A","ref":true},"a":{"type":"<A>"}},"outputs":{"i":{"type":"number"}},"metadata":{"icon":"info-square","description":"find index `i` of the element `a` on array `a[]` or -1 if not found","complexity":3,"tags":["platform","method","array"]},"id":"26b06e21-798c-4bc4-96e1-12a4351c083d","base":true,"type":"`U`","system":true},"04e8b64e-7fed-49a0-af48-eba025be3fbc":{"name":"put","inputs":{"a":{"type":"`A`","ref":true},"i":{"type":"number"},"v":{"type":"any"}},"outputs":{},"metadata":{"icon":"info-square","description":"set element of `a` at position `i` to `v`","complexity":3,"tags":["platform","method","array"]},"id":"04e8b64e-7fed-49a0-af48-eba025be3fbc","base":true,"type":"`U`","system":true},"b51db03f-4d2d-44f9-bbd9-116aa0b086d0":{"name":"blur","inputs":{"component":{"type":"`C`","ref":true},"any":{"type":"any"}},"outputs":{},"metadata":{"icon":"object-set","description":"remove focus from `component`","complexity":3,"tags":["platform","method","element"]},"id":"b51db03f-4d2d-44f9-bbd9-116aa0b086d0","base":true,"type":"`U`","system":true},"12d1e7be-a5a6-45ba-82d7-cce3d03b96e2":{"name":"focus","inputs":{"component":{"type":"`C`","ref":true},"any":{"type":"any"}},"outputs":{},"metadata":{"icon":"object-set","description":"focus on `component`","complexity":3,"tags":["platform","method","element"]},"id":"12d1e7be-a5a6-45ba-82d7-cce3d03b96e2","base":true,"type":"`U`","system":true},"275af55d-9fcf-4b53-9087-d97455cbe528":{"name":"delete","inputs":{"obj":{"type":"`J`","ref":true},"name":{"type":"string"}},"outputs":{},"metadata":{"icon":"object-set","description":"delete `obj` property `name`","complexity":3,"tags":["platform","method","object"]},"id":"275af55d-9fcf-4b53-9087-d97455cbe528","base":true,"type":"`U`","system":true},"bc0320e2-2eb8-11eb-a38f-a779bfe81645":{"name":"get","inputs":{"obj":{"type":"`J`","ref":true},"name":{"type":"string","_init":"N"}},"outputs":{"value":{"_type":"<T>[\'S\',N]","type":"any"}},"metadata":{"icon":"object-get","description":"get `obj` property `name`","complexity":3,"tags":["platform","method","object"]},"id":"bc0320e2-2eb8-11eb-a38f-a779bfe81645","base":true,"type":"`U`","system":true},"b409ff98-1c9e-4990-b2c2-d7f32fda50eb":{"name":"has key","inputs":{"obj":{"type":"`J`","ref":true},"key":{"type":"string"}},"outputs":{"has":{"_type":"<T>[\'S\',N]","type":"boolean"}},"metadata":{"icon":"object-get","description":"check whether `obj` has `key`","complexity":3,"tags":["platform","method","object"]},"id":"b409ff98-1c9e-4990-b2c2-d7f32fda50eb","base":true,"type":"`U`","system":true},"e4fb7815-95e1-4cbc-b2e2-750605e30258":{"name":"keys","inputs":{"obj":{"type":"`J`","ref":true},"any":{"type":"any"}},"outputs":{"keys":{"type":"string[]"}},"metadata":{"icon":"object-set","description":"get `obj` `keys`","complexity":3,"tags":["platform","method","object"]},"id":"e4fb7815-95e1-4cbc-b2e2-750605e30258","base":true,"type":"`U`","system":true},"eaf5e67b-6c48-4a27-85e1-9d5a8aa72e24":{"name":"observe","inputs":{"obj":{"type":"`J`","ref":true},"path":{"type":"string[]","metadata":{"examples":["[]"]}},"key":{"type":"string","metadata":{"examples":["\'*\'"]}}},"outputs":{"type":{"type":"\'set\'|\'delete\'"},"key":{"type":"string"},"path":{"type":"string[]"},"data":{"type":"any"}},"metadata":{"icon":"object-get","description":"subscribe to changes to object `obj` at `path` and `key` (possibly *)","complexity":3,"tags":["platform","method","object"]},"id":"eaf5e67b-6c48-4a27-85e1-9d5a8aa72e24","base":true,"type":"`U`","system":true},"074ef6f4-a0a1-40f9-95c0-cf0ecc3d420c":{"name":"set","inputs":{"obj":{"type":"`J`","ref":true},"name":{"type":"string"},"data":{"type":"any"}},"outputs":{"data":{"_type":"<T>[\'S\',N]","type":"any","defaultIgnored":true}},"metadata":{"icon":"object-set","description":"set `unit` property `name` to `data`","complexity":3,"tags":["platform","method","object"]},"id":"074ef6f4-a0a1-40f9-95c0-cf0ecc3d420c","base":true,"type":"`U`","system":true},"de2d42e2-4fca-4a3f-8783-3585c546e88b":{"name":"from bundle","inputs":{"bundle":{"type":"{spec:object,specs:object}","metadata":{"examples":["{spec:{},specs:{}}"]}}},"outputs":{"graph":{"type":"`G`","icon":"graph"}},"metadata":{"icon":"server","description":"start a new graph","complexity":8,"tags":["platform","method","process"]},"id":"de2d42e2-4fca-4a3f-8783-3585c546e88b","base":true,"type":"`U`","system":true},"324b9c5e-5810-11eb-bf7c-634b3bb07f8c":{"name":"new graph","inputs":{"graph":{"type":"`G`","metadata":{"examples":["${unit:{id:\'e33e7dcd-9715-461c-a474-15ed2bda899e\'}}"]}}},"outputs":{"graph":{"type":"`G`","ref":true,"icon":"graph"}},"metadata":{"icon":"server","description":"start a new graph","complexity":8,"tags":["platform","method","process"]},"id":"324b9c5e-5810-11eb-bf7c-634b3bb07f8c","base":true,"type":"`U`","system":true},"bddaba6f-83c8-4d25-97e2-ef1cdecd19e4":{"name":"new system","inputs":{"init":{"type":"{path?:string}","metadata":{"examples":["{}"]}}},"outputs":{"system":{"type":"`S`","ref":true,"icon":"server"}},"metadata":{"icon":"server","description":"asynchronously control a graph","complexity":34,"tags":["platform","method","process"]},"id":"bddaba6f-83c8-4d25-97e2-ef1cdecd19e4","base":true,"type":"`U`","system":true},"5ec9d37d-f9f4-49d0-a139-55af26fab05c":{"name":"local graph","inputs":{"id":{"type":"string","metadata":{}}},"outputs":{"graph":{"type":"`U`&`G`","ref":true}},"metadata":{"icon":"server","description":"connect to a locally shared process","complexity":3,"tags":["platform","method","process","share","local"]},"id":"5ec9d37d-f9f4-49d0-a139-55af26fab05c","base":true,"type":"`U`","system":true},"259ba71c-6315-4324-a32c-fc2277200a40":{"name":"local share graph","inputs":{"graph":{"type":"`G`","metadata":{},"ref":true},"opt":{"type":"{}"},"done":{"type":"any"}},"outputs":{"id":{"type":"string"}},"metadata":{"icon":"server","description":"share a graph localy","complexity":10,"tags":["platform","method","process","share","local"]},"id":"259ba71c-6315-4324-a32c-fc2277200a40","base":true,"type":"`U`","system":true},"7fe5b907-e9d3-4427-96cf-1b3be39a9bba":{"name":"start","inputs":{"graph":{"type":"`G`"},"done":{"type":"any","defaultIgnored":true},"opt":{"type":"{paused?:boolean}","metadata":{"examples":["{}","{paused:true}","{paused:false}"]}},"system":{"type":"`S`","ref":true}},"outputs":{"graph":{"type":"`U`&`G`","ref":true,"icon":"graph"}},"metadata":{"icon":"server","description":"start a new graph","complexity":3,"tags":["platform","method","process"]},"id":"7fe5b907-e9d3-4427-96cf-1b3be39a9bba","base":true,"type":"`U`","system":true},"0c6703a1-e949-4b55-9e84-71e6c9addd64":{"name":"worker","inputs":{"init":{"type":"{}","metadata":{"examples":["{}"]}}},"outputs":{"system":{"type":"`S`","ref":true,"icon":"circle"}},"metadata":{"icon":"server","description":"remote control a new worker system","complexity":3,"tags":["platform","method","process"]},"id":"0c6703a1-e949-4b55-9e84-71e6c9addd64","base":true,"type":"`U`","system":true},"c6da6b9f-a783-4e58-a252-e543aef109fb":{"name":"read","inputs":{"value":{"type":"`V`","ref":true},"any":{"type":"any"}},"outputs":{"data":{"type":"any"}},"metadata":{"icon":"object-get","description":"get `unit` property `name`","complexity":3,"tags":["platform","method","value"]},"id":"c6da6b9f-a783-4e58-a252-e543aef109fb","base":true,"type":"`U`","system":true},"98ab5ee1-0997-4ad2-bc77-776208b6bb25":{"name":"write","inputs":{"value":{"type":"`V`","ref":true},"data":{"type":"any"}},"outputs":{"data":{"type":"any","defaultIgnored":true}},"metadata":{"icon":"object-set","description":"set `unit` property `name` to `data`","complexity":3,"tags":["platform","method","value"]},"id":"98ab5ee1-0997-4ad2-bc77-776208b6bb25","base":true,"type":"`U`","system":true},"4ae69887-a087-4d37-8743-d83ca48184d1":{"name":"input","inputs":{"unit":{"type":"`U`","ref":true},"name":{"type":"string"},"done":{"type":"any","defaultIgnored":true}},"outputs":{"pin":{"type":"`V`","ref":true}},"metadata":{"icon":"unit","description":"reference `unit` input `name`","complexity":3,"tags":["platform","ref","unit"]},"id":"4ae69887-a087-4d37-8743-d83ca48184d1","type":"`U`","base":true,"system":true},"ed78b920-3f43-47df-840c-60c5297cdb2e":{"name":"output","inputs":{"unit":{"type":"`U`","ref":true},"name":{"type":"string"},"done":{"type":"any","defaultIgnored":true}},"outputs":{"pin":{"type":"`V`","ref":true}},"metadata":{"icon":"unit","description":"reference `unit` output `name`","complexity":3,"tags":["platform","ref","unit"]},"id":"ed78b920-3f43-47df-840c-60c5297cdb2e","type":"`U`","base":true,"system":true},"c899b675-c3c4-428e-b548-b228305c0302":{"name":"state","inputs":{"init":{"type":"<T>"},"done":{"type":"any","optional":true,"defaultIgnored":true}},"outputs":{"data":{"type":"<T>&`V`","optional":true,"ref":true}},"metadata":{"icon":"triangle","description":"control a value in memory","complexity":3,"tags":["platform"]},"id":"c899b675-c3c4-428e-b548-b228305c0302","base":true,"type":"`U`","system":true},"cd8c1d94-1471-49e2-8b43-d98ae93b70f3":{"name":"8-bit unsigned clamped array","inputs":{"length":{"type":"number","metadata":{"description":"length of the array"}},"done":{"type":"boolean","metadata":{"description":"whether the array is done"}}},"outputs":{"array":{"type":"`A`","ref":true}},"metadata":{"icon":"square","description":"array of 8-bit unsigned integers clamped to 0-255","complexity":3,"tags":["platform"]},"id":"cd8c1d94-1471-49e2-8b43-d98ae93b70f3","base":true,"type":"`U`","system":true}}');function Nv(r=null,o=xx(),t={flags:{}}){let{path:e="",specs:n={},flags:i={}}=t,s={pressed:[],repeat:!1},a=[],_={},c=new Set,p=[],u={keyboard:s,gamepads:a,pointers:_},d={iframe:[],dragAndDrop:{},pointerCapture:{},spriteSheetMap:{}},m={},h=Wt(Ow,n),f=new Rr(h),{specs_:b}=f,{specsCount:g,newSpecId:v,hasSpec:x,emptySpec:I,newSpec:E,getSpec:D,setSpec:w,forkSpec:T,injectSpecs:C,deleteSpec:P,registerUnit:k,unregisterUnit:M,shouldFork:U}=f,L=r?r.emitter:new Re,O={},R={},N={},z={path:e,parent:r,emitter:L,animated:!0,root:null,theme:"dark",customEvent:c,input:u,context:p,specs_:b,specs:h,classes:zS,components:Mw,graphs:[],specsCount:g,cache:d,feature:m,foreground:{svg:void 0,canvas:void 0,app:void 0},showLongPress:void 0,captureGesture:void 0,global:r?r.global:{ref:{},component:{},data:new Po({}),scope:{}},api:o,flags:S({defaultInputModeNone:!1,tick:"sync"},i),tick:i.tick==="sync"?F=>{F()}:F=>z.api.animation.requestAnimationFrame(F),boot:F=>Nv(z,o,F),stringifyBundleData:F=>$4(F),fromBundle:F=>Fi(F,h,{}),newGraph:F=>new F(z),getSpec:D.bind(f),hasSpec:x.bind(f),newSpecId:v.bind(f),emptySpec:I.bind(f),forkSpec:T.bind(f),newSpec:E.bind(f),setSpec:w.bind(f),injectSpecs:C.bind(f),deleteSpec:P.bind(f),registerUnit:k.bind(f),unregisterUnit:M.bind(f),shouldFork:U.bind(f),injectPrivateCSSClass:function(F,V,j){if(z.root){if(!z.global.component[F])throw new Error("component not found");let H=`${fx(j)}`;return gx(z,H),()=>{bx(z,H)}}else return zt},getLocalComponents:function(F){let V=N[F];return V?[...V].map(j=>R[j]):[]},registerLocalComponent:function(F,V){var H;let j=Ti(O);return R[j]=F,O[j]=V,N[V]=(H=N[V])!=null?H:new Set,N[V].add(j),L.emit(V,F),j},unregisterLocalComponent:function(F){let V=O[F];if(!V)throw new Error("local component not found");let j=N[V];j.delete(F),j.size===0&&delete N[V],delete O[F]}};return z}function kS(r){let{graphs:o}=r;for(let t of o)t.destroy()}l();function $w(r){let o=!1,t;onmessage=function(e){let{data:n}=e,{type:i,data:s}=n;switch(i){case $o:o=!0,t=r(s);break;case si:if(!o)throw new Error("ref was not initialized");t.exec(s);break;default:throw new Error("invalid message type")}}}var QM=r=>{postMessage(r,null)},tO=Nv(),eO=Dd(tO,["S"]),nO=new jo(eO,QM);$w(()=>nO);})();
